(function(Xn,be){typeof exports=="object"&&typeof module!="undefined"?module.exports=be():typeof define=="function"&&define.amd?define(be):(Xn=typeof globalThis!="undefined"?globalThis:Xn||self,Xn.app=be())})(this,function(){"use strict";const Xn=window.customElements.define.bind(window.customElements);window.customElements.define=(t,...n)=>{if(!customElements.get(t))return Xn(t,...n)};function be(){}function ea(t,n){for(const a in n)t[a]=n[a];return t}function ho(t){return t&&typeof t=="object"&&typeof t.then=="function"}function Dr(t){return t()}function ta(){return Object.create(null)}function wt(t){t.forEach(Dr)}function lr(t){return typeof t=="function"}function vo(t,n){return t!=t?n==n:t!==n||t&&typeof t=="object"||typeof t=="function"}function na(t,n){return t!=t?n==n:t!==n}function yo(t){return Object.keys(t).length===0}function ra(t,...n){if(t==null)return be;const a=t.subscribe(...n);return a.unsubscribe?()=>a.unsubscribe():a}function Rn(t,n,a){t.$$.on_destroy.push(ra(n,a))}function aa(t){const n={};for(const a in t)a[0]!=="$"&&(n[a]=t[a]);return n}const ia=typeof window!="undefined";let oa=ia?()=>window.performance.now():()=>Date.now(),sa=ia?t=>requestAnimationFrame(t):be;const Fn=new Set;function la(t){Fn.forEach(n=>{n.c(t)||(Fn.delete(n),n.f())}),Fn.size!==0&&sa(la)}function go(t){let n;return Fn.size===0&&sa(la),{promise:new Promise(a=>{Fn.add(n={c:t,f:a})}),abort(){Fn.delete(n)}}}function j(t,n){t.appendChild(n)}function G(t,n,a){t.insertBefore(n,a||null)}function B(t){t.parentNode.removeChild(t)}function xn(t,n){for(let a=0;a<t.length;a+=1)t[a]&&t[a].d(n)}function J(t){return document.createElement(t)}function Pn(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function Se(t){return document.createTextNode(t)}function we(){return Se(" ")}function zn(){return Se("")}function ze(t,n,a,l){return t.addEventListener(n,a,l),()=>t.removeEventListener(n,a,l)}function z(t,n,a){a==null?t.removeAttribute(n):t.getAttribute(n)!==a&&t.setAttribute(n,a)}function ua(t,n,a){n in t?t[n]=typeof t[n]=="boolean"&&a===""?!0:a:z(t,n,a)}function po(t){return Array.from(t.childNodes)}function He(t,n){n=""+n,t.wholeText!==n&&(t.data=n)}function Be(t,n,a,l){a===null?t.style.removeProperty(n):t.style.setProperty(n,a,l?"important":"")}let ur;function _o(){if(ur===void 0){ur=!1;try{typeof window!="undefined"&&window.parent&&window.parent.document}catch(t){ur=!0}}return ur}function bo(t,n){getComputedStyle(t).position==="static"&&(t.style.position="relative");const l=J("iframe");l.setAttribute("style","display: block; position: absolute; top: 0; left: 0; width: 100%; height: 100%; overflow: hidden; border: 0; opacity: 0; pointer-events: none; z-index: -1;"),l.setAttribute("aria-hidden","true"),l.tabIndex=-1;const d=_o();let c;return d?(l.src="data:text/html,<script>onresize=function(){parent.postMessage(0,'*')}<\/script>",c=ze(window,"message",f=>{f.source===l.contentWindow&&n()})):(l.src="about:blank",l.onload=()=>{c=ze(l.contentWindow,"resize",n)}),j(t,l),()=>{(d||c&&l.contentWindow)&&c(),B(l)}}function Ee(t,n,a){t.classList[a?"add":"remove"](n)}function da(t){const n={};for(const a of t)n[a.name]=a.value;return n}let Kn;function Ht(t){Kn=t}function Ir(){if(!Kn)throw new Error("Function called outside component initialization");return Kn}function wo(t){Ir().$$.on_mount.push(t)}const $n=[],Nr=[],dr=[],ca=[],fa=Promise.resolve();let Mr=!1;function ma(){Mr||(Mr=!0,fa.then(de))}function To(){return ma(),fa}function cr(t){dr.push(t)}const Ar=new Set;let fr=0;function de(){const t=Kn;do{for(;fr<$n.length;){const n=$n[fr];fr++,Ht(n),So(n.$$)}for(Ht(null),$n.length=0,fr=0;Nr.length;)Nr.pop()();for(let n=0;n<dr.length;n+=1){const a=dr[n];Ar.has(a)||(Ar.add(a),a())}dr.length=0}while($n.length);for(;ca.length;)ca.pop()();Mr=!1,Ar.clear(),Ht(t)}function So(t){if(t.fragment!==null){t.update(),wt(t.before_update);const n=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,n),t.after_update.forEach(cr)}}const mr=new Set;let cn;function Oo(){cn={r:0,c:[],p:cn}}function ko(){cn.r||wt(cn.c),cn=cn.p}function ha(t,n){t&&t.i&&(mr.delete(t),t.i(n))}function Eo(t,n,a,l){if(t&&t.o){if(mr.has(t))return;mr.add(t),cn.c.push(()=>{mr.delete(t),l&&(a&&t.d(1),l())}),t.o(n)}}function va(t,n){const a=n.token={};function l(d,c,f,v){if(n.token!==a)return;n.resolved=v;let p=n.ctx;f!==void 0&&(p=p.slice(),p[f]=v);const w=d&&(n.current=d)(p);let O=!1;n.block&&(n.blocks?n.blocks.forEach((b,k)=>{k!==c&&b&&(Oo(),Eo(b,1,1,()=>{n.blocks[k]===b&&(n.blocks[k]=null)}),ko())}):n.block.d(1),w.c(),ha(w,1),w.m(n.mount(),n.anchor),O=!0),n.block=w,n.blocks&&(n.blocks[c]=w),O&&de()}if(ho(t)){const d=Ir();if(t.then(c=>{Ht(d),l(n.then,1,n.value,c),Ht(null)},c=>{if(Ht(d),l(n.catch,2,n.error,c),Ht(null),!n.hasCatch)throw c}),n.current!==n.pending)return l(n.pending,0),!0}else{if(n.current!==n.then)return l(n.then,1,n.value,t),!0;n.resolved=t}}function Do(t,n,a){const l=n.slice(),{resolved:d}=t;t.current===t.then&&(l[t.value]=d),t.current===t.catch&&(l[t.error]=d),t.block.p(l,a)}function Io(t,n,a,l){const{fragment:d,on_mount:c,on_destroy:f,after_update:v}=t.$$;d&&d.m(n,a),l||cr(()=>{const p=c.map(Dr).filter(lr);f?f.push(...p):wt(p),t.$$.on_mount=[]}),v.forEach(cr)}function No(t,n){const a=t.$$;a.fragment!==null&&(wt(a.on_destroy),a.fragment&&a.fragment.d(n),a.on_destroy=a.fragment=null,a.ctx=[])}function Mo(t,n){t.$$.dirty[0]===-1&&($n.push(t),ma(),t.$$.dirty.fill(0)),t.$$.dirty[n/31|0]|=1<<n%31}function ya(t,n,a,l,d,c,f,v=[-1]){const p=Kn;Ht(t);const w=t.$$={fragment:null,ctx:null,props:c,update:be,not_equal:d,bound:ta(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(n.context||(p?p.$$.context:[])),callbacks:ta(),dirty:v,skip_bound:!1,root:n.target||p.$$.root};f&&f(w.root);let O=!1;if(w.ctx=a?a(t,n.props||{},(b,k,...L)=>{const Q=L.length?L[0]:k;return w.ctx&&d(w.ctx[b],w.ctx[b]=Q)&&(!w.skip_bound&&w.bound[b]&&w.bound[b](Q),O&&Mo(t,b)),k}):[],w.update(),O=!0,wt(w.before_update),w.fragment=l?l(w.ctx):!1,n.target){if(n.hydrate){const b=po(n.target);w.fragment&&w.fragment.l(b),b.forEach(B)}else w.fragment&&w.fragment.c();n.intro&&ha(t.$$.fragment),Io(t,n.target,n.anchor,n.customElement),de()}Ht(p)}let Cr;typeof HTMLElement=="function"&&(Cr=class extends HTMLElement{constructor(){super();this.attachShadow({mode:"open"})}connectedCallback(){const{on_mount:t}=this.$$;this.$$.on_disconnect=t.map(Dr).filter(lr);for(const n in this.$$.slotted)this.appendChild(this.$$.slotted[n])}attributeChangedCallback(t,n,a){this[t]=a}disconnectedCallback(){wt(this.$$.on_disconnect)}$destroy(){No(this,1),this.$destroy=be}$on(t,n){const a=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return a.push(n),()=>{const l=a.indexOf(n);l!==-1&&a.splice(l,1)}}$set(t){this.$$set&&!yo(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}});const Hn=[];function Ao(t,n){return{subscribe:Lt(t,n).subscribe}}function Lt(t,n=be){let a;const l=new Set;function d(v){if(vo(t,v)&&(t=v,a)){const p=!Hn.length;for(const w of l)w[1](),Hn.push(w,t);if(p){for(let w=0;w<Hn.length;w+=2)Hn[w][0](Hn[w+1]);Hn.length=0}}}function c(v){d(v(t))}function f(v,p=be){const w=[v,p];return l.add(w),l.size===1&&(a=n(d)||be),v(t),()=>{l.delete(w),l.size===0&&(a(),a=null)}}return{set:d,update:c,subscribe:f}}function Co(t,n,a){const l=!Array.isArray(t),d=l?[t]:t,c=n.length<2;return Ao(a,f=>{let v=!1;const p=[];let w=0,O=be;const b=()=>{if(w)return;O();const L=n(l?p[0]:p,f);c?f(L):O=lr(L)?L:be},k=d.map((L,Q)=>ra(L,H=>{p[Q]=H,w&=~(1<<Q),v&&b()},()=>{w|=1<<Q}));return v=!0,b(),function(){wt(k),O()}})}function ga(t){return Object.prototype.toString.call(t)==="[object Date]"}function Lr(t,n,a,l){if(typeof a=="number"||ga(a)){const d=l-a,c=(a-n)/(t.dt||1/60),f=t.opts.stiffness*d,v=t.opts.damping*c,p=(f-v)*t.inv_mass,w=(c+p)*t.dt;return Math.abs(w)<t.opts.precision&&Math.abs(d)<t.opts.precision?l:(t.settled=!1,ga(a)?new Date(a.getTime()+w):a+w)}else{if(Array.isArray(a))return a.map((d,c)=>Lr(t,n[c],a[c],l[c]));if(typeof a=="object"){const d={};for(const c in a)d[c]=Lr(t,n[c],a[c],l[c]);return d}else throw new Error(`Cannot spring ${typeof a} values`)}}function Lo(t,n={}){const a=Lt(t),{stiffness:l=.15,damping:d=.8,precision:c=.01}=n;let f,v,p,w=t,O=t,b=1,k=0,L=!1;function Q(C,F={}){O=C;const fe=p={};if(t==null||F.hard||H.stiffness>=1&&H.damping>=1)return L=!0,f=oa(),w=C,a.set(t=O),Promise.resolve();if(F.soft){const pe=F.soft===!0?.5:+F.soft;k=1/(pe*60),b=0}return v||(f=oa(),L=!1,v=go(pe=>{if(L)return L=!1,v=null,!1;b=Math.min(b+k,1);const q={inv_mass:b,opts:H,settled:!0,dt:(pe-f)*60/1e3},oe=Lr(q,w,t,O);return f=pe,w=t,a.set(t=oe),q.settled&&(v=null),!q.settled})),new Promise(pe=>{v.promise.then(()=>{fe===p&&pe()})})}const H={set:Q,update:(C,F)=>Q(C(O,t),F),subscribe:a.subscribe,stiffness:l,damping:d,precision:c};return H}function Ro(){return Lt({})}const Rr=Ro();var Fo=Object.defineProperty,xo=Object.defineProperties,Po=Object.getOwnPropertyDescriptors,pa=Object.getOwnPropertySymbols,zo=Object.prototype.hasOwnProperty,Ho=Object.prototype.propertyIsEnumerable,_a=(t,n,a)=>n in t?Fo(t,n,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[n]=a,Vo=(t,n)=>{for(var a in n||(n={}))zo.call(n,a)&&_a(t,a,n[a]);if(pa)for(var a of pa(n))Ho.call(n,a)&&_a(t,a,n[a]);return t},Uo=(t,n)=>xo(t,Po(n));async function lt(t){var n;if(!t.ok){const a=await t.json().then(c=>c),l=((n=a==null?void 0:a.response)==null?void 0:n.error)||(a==null?void 0:a.message),d=new Error(l);return d.name=a.name,Promise.reject({message:d,statusCode:t.status})}return t.json()}function ut(t={component_id:""}){return{method:t.method||"GET",headers:{Accept:"application/json","Content-Type":"application/json","X-Component-Id":t.component_id||"","X-Access-Token":t.access_token||""},body:t.body?JSON.stringify(t.body):void 0}}function Vt(t,n){throw console.error(n),Rr.update(a=>Uo(Vo({},a),{[t]:n})),n}const ba={"001":"","002":"ireland-","003":"canada-"};function dt(t){let n="";if(t.substring(3,4)==="-"){const l=t.substring(0,3);typeof ba[l]!="undefined"&&(n=ba[l])}return`https://${n}web-components.nylas.com/middleware`}function Vn(t){}const Wo=async t=>Promise.all(t.calendarIDs.map(n=>fetch(`${dt(t.component_id||"")}/agenda/events?calendar_id=${n}&starts_after=${t.starts_after-1}&ends_before=${t.ends_before}&expand_recurring=true`,ut({component_id:t.component_id,access_token:t.access_token})).then(a=>lt(a)).then(a=>a.response))).then(n=>n.flat()).catch(n=>Vt(t.component_id||"unknown",n)),jo=async t=>t.calendarIDs.length?Promise.allSettled(t.calendarIDs.map(n=>fetch(`${dt(t.component_id||"")}/calendars/${n}`,ut({component_id:t.component_id,access_token:t.access_token})).then(a=>lt(a)).then(a=>a.response))).then(n=>n.filter(l=>l.status==="fulfilled").map(l=>l.value).flat()).catch(n=>Vt(t.component_id||"unknown",n)):fetch(`${dt(t.component_id||"")}/calendars`,ut({component_id:t.component_id,access_token:t.access_token})).then(n=>lt(n)).then(n=>n.response);async function wa(t,n){return fetch(`${dt(n.component_id||"")}/agenda/events`,ut({method:"POST",component_id:n.component_id,access_token:n.access_token,body:t})).then(a=>lt(a)).then(a=>a.response)}var Zo=Object.defineProperty,Go=Object.defineProperties,Bo=Object.getOwnPropertyDescriptors,Ta=Object.getOwnPropertySymbols,Yo=Object.prototype.hasOwnProperty,Jo=Object.prototype.propertyIsEnumerable,Sa=(t,n,a)=>n in t?Zo(t,n,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[n]=a,Oa=(t,n)=>{for(var a in n||(n={}))Yo.call(n,a)&&Sa(t,a,n[a]);if(Ta)for(var a of Ta(n))Jo.call(n,a)&&Sa(t,a,n[a]);return t},ka=(t,n)=>Go(t,Bo(n));const Ea=(t,n,a)=>{if(t.thread_ids){const d=t.thread_ids.slice(a,a+n);return Promise.all(d.map(async c=>{const f=`${dt(t.component_id)}/threads/${c}?view=expanded`;return await fetch(f,ut(t)).then(v=>lt(v)).then(v=>v.response).then(v=>ka(Oa({},v),{messages:v.messages.filter(p=>p.from.length!==0||p.to.length!==0)})).catch(v=>Vt(t.component_id,v))}))}let l=`${dt(t.component_id)}/threads?view=expanded&not_in=trash&limit=${n}&offset=${a}`;return t.query&&Object.entries(t.query).forEach(d=>l=l.concat(`&${d[0]}=${d[1]}`)),fetch(l,ut(t)).then(d=>lt(d)).then(d=>d.response).then(d=>d.map(c=>ka(Oa({},c),{messages:c.messages.filter(f=>f.from.length!==0||f.to.length!==0)}))).catch(d=>Vt(t.component_id,d))};function Da(t){let n=`${dt(t.component_id)}/threads?view=expanded&not_in=trash&view=count`;return t.query&&Object.entries(t.query).forEach(a=>n=n.concat(`&${a[0]}=${a[1]}`)),t.keywordToSearch&&(n+=`&q=${t.keywordToSearch}`),fetch(n,ut(t)).then(a=>lt(a)).then(a=>a.response.count)}const qo=t=>{const n=`${dt(t.component_id)}/threads/search?q=${t.keywordToSearch}&view=expanded&limit=${t.query.limit}&offset=${t.query.offset}`;return fetch(n,ut(t)).then(async a=>lt(a)).then(a=>a.response).catch(a=>Vt(t.component_id,a))},Qo=(t,n)=>fetch(`${dt(t.component_id)}/threads/${n.id}`,ut({method:"PUT",component_id:t.component_id,access_token:t.access_token,body:{unread:n.unread,starred:n.starred,folder_id:n.folder_id,label_ids:n.label_ids}})).then(a=>lt(a)).then(a=>a.response).catch(a=>Vt(t.component_id,a)),Xo=async(t,n)=>await fetch(`${dt(t)}/manifest`,ut({access_token:n,component_id:t})).then(lt).then(a=>a.component.theming).catch(a=>Vt(t,a));var Ko=Object.defineProperty,Ia=Object.getOwnPropertySymbols,$o=Object.prototype.hasOwnProperty,es=Object.prototype.propertyIsEnumerable,Na=(t,n,a)=>n in t?Ko(t,n,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[n]=a,Ma=(t,n)=>{for(var a in n||(n={}))$o.call(n,a)&&Na(t,a,n[a]);if(Ia)for(var a of Ia(n))es.call(n,a)&&Na(t,a,n[a]);return t};const ts=async t=>fetch(`${dt(t.component_id)}/calendars/availability`,ut({method:"POST",component_id:t.component_id,access_token:t.access_token,body:t.body})).then(async n=>{const a=await lt(n);return a.response.time_slots=a.response.time_slots.map(l=>(l.start_time=l.start||0,l.end_time=l.end||0,delete l.start,delete l.end,l)),a.response}).catch(n=>Vt(t.component_id,n)),ns=async t=>fetch(`${dt(t.component_id)}/calendars/availability/consecutive`,ut({method:"POST",component_id:t.component_id,access_token:t.access_token,body:t.body})).then(async n=>{var a;const d=((a=(await lt(n)).response)==null?void 0:a.map(v=>(v=v.map(p=>(p.start_time=new Date(p.start_time*1e3),p.end_time=new Date(p.end_time*1e3),p)),v)))||[],c=rs(d,t.body.events);return as(c)}).catch(n=>Vt(t.component_id,n));function rs(t,n){return t.map(a=>a.map(l=>Ma(Ma({},l),n.find(d=>d.participantEmails.length===l.emails.length&&d.participantEmails.every(c=>l.emails.includes(c))))))}function as(t){const n=new Set;return t.filter(a=>{const l=`${a[0].start_time}_${a[a.length-1].end_time}`;return n.has(l)?!1:(n.add(l),!0)})}var is=Object.defineProperty,Aa=Object.getOwnPropertySymbols,os=Object.prototype.hasOwnProperty,ss=Object.prototype.propertyIsEnumerable,Ca=(t,n,a)=>n in t?is(t,n,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[n]=a,ls=(t,n)=>{for(var a in n||(n={}))os.call(n,a)&&Ca(t,a,n[a]);if(Aa)for(var a of Aa(n))ss.call(n,a)&&Ca(t,a,n[a]);return t};function us(){const t=(a,l)=>{var d,c;const f=JSON.parse(l),v=ls({},f);if(delete v.forceReload,l=JSON.stringify(v),!(!f.component_id||!((d=f==null?void 0:f.body)==null?void 0:d.start_time)||!((c=f==null?void 0:f.body)==null?void 0:c.end_time))){if(!a[l]||f.forceReload){const p=ts(f);n.update(w=>(w[l]=p,w)),a[l]=p}return a[l]}},n=Lt(new Proxy({},{get:t}));return n}us();function ds(){const t=(a,l)=>{var d,c;const f=JSON.parse(l);if(!(!f.component_id||!((d=f==null?void 0:f.body)==null?void 0:d.start_time)||!((c=f==null?void 0:f.body)==null?void 0:c.end_time))){if(!a[l]){const v=ns(f);n.update(p=>(p[l]=v,p)),a[l]=v}return a[l]}},n=Lt(new Proxy({},{get:t}));return n}ds();var cs=Object.defineProperty,La=Object.getOwnPropertySymbols,fs=Object.prototype.hasOwnProperty,ms=Object.prototype.propertyIsEnumerable,Ra=(t,n,a)=>n in t?cs(t,n,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[n]=a,hs=(t,n)=>{for(var a in n||(n={}))fs.call(n,a)&&Ra(t,a,n[a]);if(La)for(var a of La(n))ms.call(n,a)&&Ra(t,a,n[a]);return t};function vs(){const{subscribe:t,update:n,set:a}=Lt({});let l={};return{subscribe:t,getCalendars:async d=>{const c=JSON.stringify(d);return!l[c]&&(d.component_id||d.access_token)&&(l[c]=jo(d),n(f=>(f[c]=l[c],hs({},f)))),await l[c]},reset:()=>{l={},a({})}}}const ys=vs();var gs=Object.defineProperty,Fa=Object.getOwnPropertySymbols,ps=Object.prototype.hasOwnProperty,_s=Object.prototype.propertyIsEnumerable,xa=(t,n,a)=>n in t?gs(t,n,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[n]=a,Pa=(t,n)=>{for(var a in n||(n={}))ps.call(n,a)&&xa(t,a,n[a]);if(Fa)for(var a of Fa(n))_s.call(n,a)&&xa(t,a,n[a]);return t};function bs(){const{subscribe:t,update:n,set:a}=Lt({});let l={};const d=Lt(!0);return{loadingEvents:d,subscribe:t,getEvents:async c=>{if(Array.isArray(c.calendarIDs)&&c.calendarIDs.length>0){d.set(!0);const f=JSON.stringify(c);!l[f]&&(c.component_id||c.access_token)&&(l[f]=Wo(c),n(p=>(p[f]=l[f],Pa({},p))));const v=await l[f];return d.set(!1),v}},createEvent:async(c,f)=>{const v=JSON.stringify(f);await l[v]?l[v]=Promise.all([l[v],wa(c,f)]).then(w=>w.flat()):l[v]=wa(c,f).then(w=>[w]),n(w=>(w[v]=l[v],Pa({},w)))},reset:()=>{l={},a({})}}}const er=bs();var ws=Object.defineProperty,za=Object.getOwnPropertySymbols,Ts=Object.prototype.hasOwnProperty,Ss=Object.prototype.propertyIsEnumerable,Ha=(t,n,a)=>n in t?ws(t,n,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[n]=a,fn=(t,n)=>{for(var a in n||(n={}))Ts.call(n,a)&&Ha(t,a,n[a]);if(za)for(var a of za(n))Ss.call(n,a)&&Ha(t,a,n[a]);return t};async function Va(t){const n=[];for(let a=0;a<t;a++)n.push({isLoaded:!1,threads:[]});return n}function Os(){const{subscribe:t,set:n,update:a}=Lt({});let l={},d;return{subscribe:t,set:n,getThreads:async(c,f,v,p=!1)=>{const w=JSON.stringify(c);if(!c.component_id&&!c.access_token)return[];if(d===void 0||p){const O=c.thread_ids?c.thread_ids.length:await Da(c).catch(Vn);O&&(d=O)}if(!Array.isArray(l[w])||p){const O=Math.ceil(d/v);l[w]=await Va(O)}if(typeof l[w][f]=="undefined")return[];if(!l[w][f].isLoaded){const O=await Ea(c,v,f*v).catch(Vn);O&&(l[w][f].threads=O,l[w][f].isLoaded=!0)}return a(O=>(O[w]=l[w],fn({},O))),l[w][f].threads},getNumberOfItems:async c=>{if(!c.component_id&&!c.access_token)return 0;if(typeof d=="undefined"){const f=await Da(c).catch(Vn);f&&(d=f)}return d},getThreadsWithSearchKeyword:async(c,f=!1)=>{if(!c.component_id&&!c.access_token)return[];const v=JSON.stringify(c);if((!Array.isArray(l[v])||f)&&(l[v]=await Va(1)),!l[v][0].isLoaded||f){const p=await qo(c).catch(Vn);p&&(l[v][0].threads=p,l[v][0].isLoaded=!0)}return a(p=>(p[v]=l[v],fn({},p))),l[v][0].threads},updateThread:async(c,f,v,p,w)=>{const O=await Qo(c,v).catch(Vn);if(!l[f][p].isLoaded){const b=await Ea(JSON.parse(f),w,p*w).catch(Vn);b&&(l[f][p].threads=b,l[f][p].isLoaded=!0)}return l[f][p].threads=l[f][p].threads.map(b=>(O&&b.id===O.id&&(b=Object.assign(b,O)),b)),a(b=>(b[f]=l[f],fn({},b))),l[f][p].threads},updateThreadSelection:(c,f,v)=>{const p=l[c][f].threads;if(v){const w=p.find(O=>O.id===v);w&&(w.selected=!w.selected)}else{const w=p.some(O=>O.selected);for(const O of p)O.selected=!w}return a(w=>(w[c]=l[c],fn({},w))),l[c][f].threads},reset:()=>{l={},n({})},hydrateMessageInThread:(c,f,v)=>{var p,w,O;const b=JSON.stringify(f),k=(w=(p=l[b][v])==null?void 0:p.threads)==null?void 0:w.find(L=>L.id===c.thread_id);if(k){const L=(O=k.messages)==null?void 0:O.find(Q=>Q.id===c.id);L?(L.body=c.body,a(Q=>{if(c.thread_id){let H=Q[b][v].threads.find(C=>C.id===k.id);H&&(H=JSON.parse(JSON.stringify(k)))}return fn({},Q)})):a(Q=>{if(c.thread_id){let H=Q[b][v].threads.find(C=>C.id===k.id);if(H){const C=k.messages;C.push(c),k.messages=C,k.snippet=c.snippet,k.drafts=k.drafts.filter(F=>F.id!==c.id),H=JSON.parse(JSON.stringify(k))}}return fn({},Q)})}return l[b][v].threads},hydrateDraftInThread:(c,f,v)=>{var p,w,O;const b=JSON.stringify(f),k=(w=(p=l[b][v])==null?void 0:p.threads)==null?void 0:w.find(L=>L.id===c.thread_id);if(k){const L=(O=k.drafts)==null?void 0:O.find(Q=>Q.id===c.id);if(c.thread_id){if(L)Object.assign(L,c);else{const Q=k.drafts;Q.push(c),k.drafts=Q}a(Q=>{let H=Q[b][v].threads.find(C=>C.id===k.id);return H&&(H=JSON.parse(JSON.stringify(k))),fn({},Q)})}}return l[b][v].threads}}}const ks=Os();Co(ks,t=>{const n={};return Object.entries(t).forEach(([a,l])=>n[a]=l.map(d=>d.threads).flat()),n});function Es(){const t=(a,l)=>{const d=JSON.parse(l);if(!!d.component_id){if(!a[l]){const c=Xo(d.component_id,d.access_token);n.update(f=>(f[l]=c,f)),a[l]=c}return a[l]}},n=Lt(new Proxy({},{get:t}));return n}const Ds=Es();function Is(t){return(n,a)=>{t.dispatchEvent&&t.dispatchEvent(new CustomEvent(n,{detail:a,composed:!0}))}}function Fr(t,n,a){return new Proxy(t,{get:(l,d)=>d==="toString"||d==="toJSON"?()=>JSON.stringify(l):Reflect.get(l,d)!==void 0?Ua(Reflect.get(l,d),a[d]):n&&d in n?Ua(n[d],a[d]):a[d],ownKeys:l=>{const d=new Set([...Reflect.ownKeys(l),...Object.keys(n),...Object.keys(a)]);return Array.from(d)},getOwnPropertyDescriptor:(l,d)=>{var c,f;let v=Reflect.getOwnPropertyDescriptor(l,d);return v||(v=(f=(c=n&&Object.getOwnPropertyDescriptor(n,d))!=null?c:a&&Object.getOwnPropertyDescriptor(a,d))!=null?f:{configurable:!0,enumerable:!0,writable:!0},Reflect.defineProperty(l,d,v)),v}})}function Ua(t,n){if(t){if(typeof n=="boolean")return Ns(t);if(typeof n=="number")return Number(t);if(n instanceof Date)return new Date(t)}return t===void 0?n!=null?n:null:t}function Ns(t){return[!0,"true","1"].includes(t)}function Wa(t){let n,a,l,d,c,f;function v(O,b){if(O[2]==="HostDomainNotAllowedError")return As;if(O[2]==="IncompatibleProperties")return Ms}let p=v(t),w=p&&p(t);return{c(){var O,b;n=J("div"),w&&w.c(),a=we(),l=J("span"),l.textContent="Debug info:",d=we(),c=J("textarea"),z(l,"class","details"),z(c,"class","details"),c.readOnly=!0,c.value=f=`
      `+t[2]+": "+t[0]+`
      `+((b=(O=t[1].message)==null?void 0:O.message)!=null?b:"")+`
    `,z(n,"class","message-container")},m(O,b){G(O,n,b),w&&w.m(n,null),j(n,a),j(n,l),j(n,d),j(n,c)},p(O,b){var k,L;p===(p=v(O))&&w?w.p(O,b):(w&&w.d(1),w=p&&p(O),w&&(w.c(),w.m(n,a))),b&7&&f!==(f=`
      `+O[2]+": "+O[0]+`
      `+((L=(k=O[1].message)==null?void 0:k.message)!=null?L:"")+`
    `)&&(c.value=f)},d(O){O&&B(n),w&&w.d()}}}function Ms(t){let n;return{c(){n=J("h3"),n.textContent="Your component properties do not work with each other."},m(a,l){G(a,n,l)},p:be,d(a){a&&B(n)}}}function As(t){let n,a,l,d,c,f;return{c(){n=J("h3"),a=Se(`You are trying to access this component from\xA0
        `),l=J("code"),l.textContent=`${window.location.hostname}`,d=Se(`. The component's settings do not
        allow access from this domain.`),c=we(),f=J("h4"),f.innerHTML=`The list of allowed domains can be modified in your\xA0
        <a href="https://dashboard.nylas.com">Dashboard</a>.`},m(v,p){G(v,n,p),j(n,a),j(n,l),j(n,d),G(v,c,p),G(v,f,p)},p:be,d(v){v&&B(n),v&&B(c),v&&B(f)}}}function Cs(t){let n,a=t[2]&&t[3]&&Wa(t);return{c(){a&&a.c(),n=zn(),this.c=be},m(l,d){a&&a.m(l,d),G(l,n,d)},p(l,[d]){l[2]&&l[3]?a?a.p(l,d):(a=Wa(l),a.c(),a.m(n.parentNode,n)):a&&(a.d(1),a=null)},i:be,o:be,d(l){a&&a.d(l),l&&B(n)}}}function Ls(t,n,a){let l;Rn(t,Rr,k=>a(8,l=k));var d,c,f,v;let{id:p}=n,w,O;const b=window.location.href.includes("localhost")||window.location.href.includes("127.0.0.1");return t.$$set=k=>{"id"in k&&a(0,p=k.id)},t.$$.update=()=>{t.$$.dirty&499&&(a(1,w=a(4,d=l[p])!==null&&d!==void 0?d:{name:""}),a(2,O=a(7,v=a(5,c=w.name)!==null&&c!==void 0?c:a(6,f=w.message)===null||f===void 0?void 0:f.name)!==null&&v!==void 0?v:""))},[p,w,O,b,d,c,f,v,l]}class Rs extends Cr{constructor(n){super();this.shadowRoot.innerHTML=`<style>.message-container{background:#fff6f6;border-radius:5px;box-shadow:0 0 0 1px #aa92a0 inset, 0 0 0 0 transparent;color:#9f3a38;font-size:1.25rem;padding:10px;margin:0 auto;transition:opacity 500ms ease, color 500ms ease,
      background-color 500ms ease, box-shadow 500ms ease,
      -webkit-box-shadow 500ms ease}.message-container *:focus{outline:5px auto Highlight;outline:5px auto -webkit-focus-ring-color}.details{color:#494949;font-size:0.75rem;width:100%}</style>`,ya(this,{target:this.shadowRoot,props:da(this.attributes),customElement:!0},Ls,Cs,na,{id:0},null),n&&(n.target&&G(n.target,this,n.anchor),n.props&&(this.$set(n.props),de()))}static get observedAttributes(){return["id"]}get id(){return this.$$.ctx[0]}set id(n){this.$$set({id:n}),de()}}customElements.define("nylas-error",Rs);var Fs=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};function ja(t,n,a){return a={path:n,exports:{},require:function(l,d){return xs(l,d==null?a.path:d)}},t(a,a.exports),a.exports}function xs(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}var Ut=ja(function(t,n){Object.defineProperty(n,"__esModule",{value:!0});function a(r,s){for(var i=0;i<s.length;i++){var e=s[i];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(r,e.key,e)}}function l(r,s,i){return s&&a(r.prototype,s),i&&a(r,i),r}function d(){return d=Object.assign||function(r){for(var s=1;s<arguments.length;s++){var i=arguments[s];for(var e in i)Object.prototype.hasOwnProperty.call(i,e)&&(r[e]=i[e])}return r},d.apply(this,arguments)}function c(r,s){r.prototype=Object.create(s.prototype),r.prototype.constructor=r,v(r,s)}function f(r){return f=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},f(r)}function v(r,s){return v=Object.setPrototypeOf||function(e,o){return e.__proto__=o,e},v(r,s)}function p(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(r){return!1}}function w(r,s,i){return p()?w=Reflect.construct:w=function(o,u,m){var h=[null];h.push.apply(h,u);var g=Function.bind.apply(o,h),T=new g;return m&&v(T,m.prototype),T},w.apply(null,arguments)}function O(r){return Function.toString.call(r).indexOf("[native code]")!==-1}function b(r){var s=typeof Map=="function"?new Map:void 0;return b=function(e){if(e===null||!O(e))return e;if(typeof e!="function")throw new TypeError("Super expression must either be null or a function");if(typeof s!="undefined"){if(s.has(e))return s.get(e);s.set(e,o)}function o(){return w(e,arguments,f(this).constructor)}return o.prototype=Object.create(e.prototype,{constructor:{value:o,enumerable:!1,writable:!0,configurable:!0}}),v(o,e)},b(r)}function k(r,s){if(r==null)return{};var i={},e=Object.keys(r),o,u;for(u=0;u<e.length;u++)o=e[u],!(s.indexOf(o)>=0)&&(i[o]=r[o]);return i}function L(r,s){if(!!r){if(typeof r=="string")return Q(r,s);var i=Object.prototype.toString.call(r).slice(8,-1);if(i==="Object"&&r.constructor&&(i=r.constructor.name),i==="Map"||i==="Set")return Array.from(r);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return Q(r,s)}}function Q(r,s){(s==null||s>r.length)&&(s=r.length);for(var i=0,e=new Array(s);i<s;i++)e[i]=r[i];return e}function H(r,s){var i=typeof Symbol!="undefined"&&r[Symbol.iterator]||r["@@iterator"];if(i)return(i=i.call(r)).next.bind(i);if(Array.isArray(r)||(i=L(r))||s&&r&&typeof r.length=="number"){i&&(r=i);var e=0;return function(){return e>=r.length?{done:!0}:{done:!1,value:r[e++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var C=function(r){c(s,r);function s(){return r.apply(this,arguments)||this}return s}(b(Error)),F=function(r){c(s,r);function s(i){return r.call(this,"Invalid DateTime: "+i.toMessage())||this}return s}(C),fe=function(r){c(s,r);function s(i){return r.call(this,"Invalid Interval: "+i.toMessage())||this}return s}(C),pe=function(r){c(s,r);function s(i){return r.call(this,"Invalid Duration: "+i.toMessage())||this}return s}(C),q=function(r){c(s,r);function s(){return r.apply(this,arguments)||this}return s}(C),oe=function(r){c(s,r);function s(i){return r.call(this,"Invalid unit "+i)||this}return s}(C),ae=function(r){c(s,r);function s(){return r.apply(this,arguments)||this}return s}(C),Oe=function(r){c(s,r);function s(){return r.call(this,"Zone is an abstract class")||this}return s}(C),E="numeric",ee="short",A="long",me={year:E,month:E,day:E},$e={year:E,month:ee,day:E},Wt={year:E,month:ee,day:E,weekday:ee},jt={year:E,month:A,day:E},ct={year:E,month:A,day:E,weekday:A},mn={hour:E,minute:E},Zt={hour:E,minute:E,second:E},hn={hour:E,minute:E,second:E,timeZoneName:ee},en={hour:E,minute:E,second:E,timeZoneName:A},Rt={hour:E,minute:E,hourCycle:"h23"},Gt={hour:E,minute:E,second:E,hourCycle:"h23"},tn={hour:E,minute:E,second:E,hourCycle:"h23",timeZoneName:ee},Ft={hour:E,minute:E,second:E,hourCycle:"h23",timeZoneName:A},vn={year:E,month:E,day:E,hour:E,minute:E},yn={year:E,month:E,day:E,hour:E,minute:E,second:E},gn={year:E,month:ee,day:E,hour:E,minute:E},pn={year:E,month:ee,day:E,hour:E,minute:E,second:E},Un={year:E,month:ee,day:E,weekday:ee,hour:E,minute:E},_n={year:E,month:A,day:E,hour:E,minute:E,timeZoneName:ee},bn={year:E,month:A,day:E,hour:E,minute:E,second:E,timeZoneName:ee},Tt={year:E,month:A,day:E,weekday:A,hour:E,minute:E,timeZoneName:A},Ye={year:E,month:A,day:E,weekday:A,hour:E,minute:E,second:E,timeZoneName:A};function ie(r){return typeof r=="undefined"}function V(r){return typeof r=="number"}function St(r){return typeof r=="number"&&r%1==0}function Wn(r){return typeof r=="string"}function R(r){return Object.prototype.toString.call(r)==="[object Date]"}function P(){try{return typeof Intl!="undefined"&&!!Intl.RelativeTimeFormat}catch(r){return!1}}function te(r){return Array.isArray(r)?r:[r]}function U(r,s,i){if(r.length!==0)return r.reduce(function(e,o){var u=[s(o),o];return e&&i(e[0],u[0])===e[0]?e:u},null)[1]}function X(r,s){return s.reduce(function(i,e){return i[e]=r[e],i},{})}function he(r,s){return Object.prototype.hasOwnProperty.call(r,s)}function ge(r,s,i){return St(r)&&r>=s&&r<=i}function Fe(r,s){return r-s*Math.floor(r/s)}function Te(r,s){s===void 0&&(s=2);var i=r<0,e;return i?e="-"+(""+-r).padStart(s,"0"):e=(""+r).padStart(s,"0"),e}function _e(r){if(!(ie(r)||r===null||r===""))return parseInt(r,10)}function ft(r){if(!(ie(r)||r===null||r===""))return parseFloat(r)}function wn(r){if(!(ie(r)||r===null||r==="")){var s=parseFloat("0."+r)*1e3;return Math.floor(s)}}function Ot(r,s,i){i===void 0&&(i=!1);var e=Math.pow(10,s),o=i?Math.trunc:Math.round;return o(r*e)/e}function mt(r){return r%4==0&&(r%100!=0||r%400==0)}function De(r){return mt(r)?366:365}function xt(r,s){var i=Fe(s-1,12)+1,e=r+(s-i)/12;return i===2?mt(e)?29:28:[31,null,31,30,31,30,31,31,30,31,30,31][i-1]}function Bt(r){var s=Date.UTC(r.year,r.month-1,r.day,r.hour,r.minute,r.second,r.millisecond);return r.year<100&&r.year>=0&&(s=new Date(s),s.setUTCFullYear(s.getUTCFullYear()-1900)),+s}function nn(r){var s=(r+Math.floor(r/4)-Math.floor(r/100)+Math.floor(r/400))%7,i=r-1,e=(i+Math.floor(i/4)-Math.floor(i/100)+Math.floor(i/400))%7;return s===4||e===3?53:52}function et(r){return r>99?r:r>60?1900+r:2e3+r}function ot(r,s,i,e){e===void 0&&(e=null);var o=new Date(r),u={hourCycle:"h23",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"};e&&(u.timeZone=e);var m=d({timeZoneName:s},u),h=new Intl.DateTimeFormat(i,m).formatToParts(o).find(function(g){return g.type.toLowerCase()==="timezonename"});return h?h.value:null}function je(r,s){var i=parseInt(r,10);Number.isNaN(i)&&(i=0);var e=parseInt(s,10)||0,o=i<0||Object.is(i,-0)?-e:e;return i*60+o}function ht(r){var s=Number(r);if(typeof r=="boolean"||r===""||Number.isNaN(s))throw new ae("Invalid unit value "+r);return s}function vt(r,s){var i={};for(var e in r)if(he(r,e)){var o=r[e];if(o==null)continue;i[s(e)]=ht(o)}return i}function xe(r,s){var i=Math.trunc(Math.abs(r/60)),e=Math.trunc(Math.abs(r%60)),o=r>=0?"+":"-";switch(s){case"short":return""+o+Te(i,2)+":"+Te(e,2);case"narrow":return""+o+i+(e>0?":"+e:"");case"techie":return""+o+Te(i,2)+Te(e,2);default:throw new RangeError("Value format "+s+" is out of range for property format")}}function yt(r){return X(r,["hour","minute","second","millisecond"])}var kt=/[A-Za-z_+-]{1,256}(:?\/[A-Za-z0-9_+-]{1,256}(\/[A-Za-z0-9_+-]{1,256})?)?/,Tn=["January","February","March","April","May","June","July","August","September","October","November","December"],Ie=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],Et=["J","F","M","A","M","J","J","A","S","O","N","D"];function Je(r){switch(r){case"narrow":return[].concat(Et);case"short":return[].concat(Ie);case"long":return[].concat(Tn);case"numeric":return["1","2","3","4","5","6","7","8","9","10","11","12"];case"2-digit":return["01","02","03","04","05","06","07","08","09","10","11","12"];default:return null}}var Yt=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],Jt=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],jn=["M","T","W","T","F","S","S"];function Ve(r){switch(r){case"narrow":return[].concat(jn);case"short":return[].concat(Jt);case"long":return[].concat(Yt);case"numeric":return["1","2","3","4","5","6","7"];default:return null}}var tt=["AM","PM"],rn=["Before Christ","Anno Domini"],Sn=["BC","AD"],ke=["B","A"];function an(r){switch(r){case"narrow":return[].concat(ke);case"short":return[].concat(Sn);case"long":return[].concat(rn);default:return null}}function Ne(r){return tt[r.hour<12?0:1]}function Pt(r,s){return Ve(s)[r.weekday-1]}function se(r,s){return Je(s)[r.month-1]}function Me(r,s){return an(s)[r.year<0?0:1]}function On(r,s,i,e){i===void 0&&(i="always"),e===void 0&&(e=!1);var o={years:["year","yr."],quarters:["quarter","qtr."],months:["month","mo."],weeks:["week","wk."],days:["day","day","days"],hours:["hour","hr."],minutes:["minute","min."],seconds:["second","sec."]},u=["hours","minutes","seconds"].indexOf(r)===-1;if(i==="auto"&&u){var m=r==="days";switch(s){case 1:return m?"tomorrow":"next "+o[r][0];case-1:return m?"yesterday":"last "+o[r][0];case 0:return m?"today":"this "+o[r][0]}}var h=Object.is(s,-0)||s<0,g=Math.abs(s),T=g===1,N=o[r],D=e?T?N[1]:N[2]||N[1]:T?o[r][0]:r;return h?g+" "+D+" ago":"in "+g+" "+D}function kn(r,s){for(var i="",e=H(r),o;!(o=e()).done;){var u=o.value;u.literal?i+=u.val:i+=s(u.val)}return i}var En={D:me,DD:$e,DDD:jt,DDDD:ct,t:mn,tt:Zt,ttt:hn,tttt:en,T:Rt,TT:Gt,TTT:tn,TTTT:Ft,f:vn,ff:gn,fff:_n,ffff:Tt,F:yn,FF:pn,FFF:bn,FFFF:Ye},Ke=function(){r.create=function(e,o){return o===void 0&&(o={}),new r(e,o)},r.parseFormat=function(e){for(var o=null,u="",m=!1,h=[],g=0;g<e.length;g++){var T=e.charAt(g);T==="'"?(u.length>0&&h.push({literal:m,val:u}),o=null,u="",m=!m):m||T===o?u+=T:(u.length>0&&h.push({literal:!1,val:u}),u=T,o=T)}return u.length>0&&h.push({literal:m,val:u}),h},r.macroTokenToFormatOpts=function(e){return En[e]};function r(i,e){this.opts=e,this.loc=i,this.systemLoc=null}var s=r.prototype;return s.formatWithSystemDefault=function(e,o){this.systemLoc===null&&(this.systemLoc=this.loc.redefaultToSystem());var u=this.systemLoc.dtFormatter(e,d({},this.opts,o));return u.format()},s.formatDateTime=function(e,o){o===void 0&&(o={});var u=this.loc.dtFormatter(e,d({},this.opts,o));return u.format()},s.formatDateTimeParts=function(e,o){o===void 0&&(o={});var u=this.loc.dtFormatter(e,d({},this.opts,o));return u.formatToParts()},s.resolvedOptions=function(e,o){o===void 0&&(o={});var u=this.loc.dtFormatter(e,d({},this.opts,o));return u.resolvedOptions()},s.num=function(e,o){if(o===void 0&&(o=0),this.opts.forceSimple)return Te(e,o);var u=d({},this.opts);return o>0&&(u.padTo=o),this.loc.numberFormatter(u).format(e)},s.formatDateTimeFromString=function(e,o){var u=this,m=this.loc.listingMode()==="en",h=this.loc.outputCalendar&&this.loc.outputCalendar!=="gregory",g=function(K,Ge){return u.loc.extract(e,K,Ge)},T=function(K){return e.isOffsetFixed&&e.offset===0&&K.allowZ?"Z":e.isValid?e.zone.formatOffset(e.ts,K.format):""},N=function(){return m?Ne(e):g({hour:"numeric",hourCycle:"h12"},"dayperiod")},D=function(K,Ge){return m?se(e,K):g(Ge?{month:K}:{month:K,day:"numeric"},"month")},I=function(K,Ge){return m?Pt(e,K):g(Ge?{weekday:K}:{weekday:K,month:"long",day:"numeric"},"weekday")},Z=function(K){var Ge=r.macroTokenToFormatOpts(K);return Ge?u.formatWithSystemDefault(e,Ge):K},$=function(K){return m?Me(e,K):g({era:K},"era")},ce=function(K){switch(K){case"S":return u.num(e.millisecond);case"u":case"SSS":return u.num(e.millisecond,3);case"s":return u.num(e.second);case"ss":return u.num(e.second,2);case"uu":return u.num(Math.floor(e.millisecond/10),2);case"uuu":return u.num(Math.floor(e.millisecond/100));case"m":return u.num(e.minute);case"mm":return u.num(e.minute,2);case"h":return u.num(e.hour%12==0?12:e.hour%12);case"hh":return u.num(e.hour%12==0?12:e.hour%12,2);case"H":return u.num(e.hour);case"HH":return u.num(e.hour,2);case"Z":return T({format:"narrow",allowZ:u.opts.allowZ});case"ZZ":return T({format:"short",allowZ:u.opts.allowZ});case"ZZZ":return T({format:"techie",allowZ:u.opts.allowZ});case"ZZZZ":return e.zone.offsetName(e.ts,{format:"short",locale:u.loc.locale});case"ZZZZZ":return e.zone.offsetName(e.ts,{format:"long",locale:u.loc.locale});case"z":return e.zoneName;case"a":return N();case"d":return h?g({day:"numeric"},"day"):u.num(e.day);case"dd":return h?g({day:"2-digit"},"day"):u.num(e.day,2);case"c":return u.num(e.weekday);case"ccc":return I("short",!0);case"cccc":return I("long",!0);case"ccccc":return I("narrow",!0);case"E":return u.num(e.weekday);case"EEE":return I("short",!1);case"EEEE":return I("long",!1);case"EEEEE":return I("narrow",!1);case"L":return h?g({month:"numeric",day:"numeric"},"month"):u.num(e.month);case"LL":return h?g({month:"2-digit",day:"numeric"},"month"):u.num(e.month,2);case"LLL":return D("short",!0);case"LLLL":return D("long",!0);case"LLLLL":return D("narrow",!0);case"M":return h?g({month:"numeric"},"month"):u.num(e.month);case"MM":return h?g({month:"2-digit"},"month"):u.num(e.month,2);case"MMM":return D("short",!1);case"MMMM":return D("long",!1);case"MMMMM":return D("narrow",!1);case"y":return h?g({year:"numeric"},"year"):u.num(e.year);case"yy":return h?g({year:"2-digit"},"year"):u.num(e.year.toString().slice(-2),2);case"yyyy":return h?g({year:"numeric"},"year"):u.num(e.year,4);case"yyyyyy":return h?g({year:"numeric"},"year"):u.num(e.year,6);case"G":return $("short");case"GG":return $("long");case"GGGGG":return $("narrow");case"kk":return u.num(e.weekYear.toString().slice(-2),2);case"kkkk":return u.num(e.weekYear,4);case"W":return u.num(e.weekNumber);case"WW":return u.num(e.weekNumber,2);case"o":return u.num(e.ordinal);case"ooo":return u.num(e.ordinal,3);case"q":return u.num(e.quarter);case"qq":return u.num(e.quarter,2);case"X":return u.num(Math.floor(e.ts/1e3));case"x":return u.num(e.ts);default:return Z(K)}};return kn(r.parseFormat(o),ce)},s.formatDurationFromString=function(e,o){var u=this,m=function(I){switch(I[0]){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":return"hour";case"d":return"day";case"M":return"month";case"y":return"year";default:return null}},h=function(I){return function(Z){var $=m(Z);return $?u.num(I.get($),Z.length):Z}},g=r.parseFormat(o),T=g.reduce(function(D,I){var Z=I.literal,$=I.val;return Z?D:D.concat($)},[]),N=e.shiftTo.apply(e,T.map(m).filter(function(D){return D}));return kn(g,h(N))},r}(),Ce=function(){function r(i,e){this.reason=i,this.explanation=e}var s=r.prototype;return s.toMessage=function(){return this.explanation?this.reason+": "+this.explanation:this.reason},r}(),ne=function(){function r(){}var s=r.prototype;return s.offsetName=function(e,o){throw new Oe},s.formatOffset=function(e,o){throw new Oe},s.offset=function(e){throw new Oe},s.equals=function(e){throw new Oe},l(r,[{key:"type",get:function(){throw new Oe}},{key:"name",get:function(){throw new Oe}},{key:"isUniversal",get:function(){throw new Oe}},{key:"isValid",get:function(){throw new Oe}}]),r}(),qe=null,on=function(r){c(s,r);function s(){return r.apply(this,arguments)||this}var i=s.prototype;return i.offsetName=function(o,u){var m=u.format,h=u.locale;return ot(o,m,h)},i.formatOffset=function(o,u){return xe(this.offset(o),u)},i.offset=function(o){return-new Date(o).getTimezoneOffset()},i.equals=function(o){return o.type==="system"},l(s,[{key:"type",get:function(){return"system"}},{key:"name",get:function(){return new Intl.DateTimeFormat().resolvedOptions().timeZone}},{key:"isUniversal",get:function(){return!1}},{key:"isValid",get:function(){return!0}}],[{key:"instance",get:function(){return qe===null&&(qe=new s),qe}}]),s}(ne),Qe=RegExp("^"+kt.source+"$"),Dt={};function sn(r){return Dt[r]||(Dt[r]=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:r,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"})),Dt[r]}var Dn={year:0,month:1,day:2,hour:3,minute:4,second:5};function In(r,s){var i=r.format(s).replace(/\u200E/g,""),e=/(\d+)\/(\d+)\/(\d+),? (\d+):(\d+):(\d+)/.exec(i),o=e[1],u=e[2],m=e[3],h=e[4],g=e[5],T=e[6];return[m,o,u,h,g,T]}function qt(r,s){for(var i=r.formatToParts(s),e=[],o=0;o<i.length;o++){var u=i[o],m=u.type,h=u.value,g=Dn[m];ie(g)||(e[g]=parseInt(h,10))}return e}var st={},Ue=function(r){c(s,r),s.create=function(o){return st[o]||(st[o]=new s(o)),st[o]},s.resetCache=function(){st={},Dt={}},s.isValidSpecifier=function(o){return!!(o&&o.match(Qe))},s.isValidZone=function(o){if(!o)return!1;try{return new Intl.DateTimeFormat("en-US",{timeZone:o}).format(),!0}catch(u){return!1}};function s(e){var o;return o=r.call(this)||this,o.zoneName=e,o.valid=s.isValidZone(e),o}var i=s.prototype;return i.offsetName=function(o,u){var m=u.format,h=u.locale;return ot(o,m,h,this.name)},i.formatOffset=function(o,u){return xe(this.offset(o),u)},i.offset=function(o){var u=new Date(o);if(isNaN(u))return NaN;var m=sn(this.name),h=m.formatToParts?qt(m,u):In(m,u),g=h[0],T=h[1],N=h[2],D=h[3],I=h[4],Z=h[5],$=D===24?0:D,ce=Bt({year:g,month:T,day:N,hour:$,minute:I,second:Z,millisecond:0}),ue=+u,K=ue%1e3;return ue-=K>=0?K:1e3+K,(ce-ue)/(60*1e3)},i.equals=function(o){return o.type==="iana"&&o.name===this.name},l(s,[{key:"type",get:function(){return"iana"}},{key:"name",get:function(){return this.zoneName}},{key:"isUniversal",get:function(){return!1}},{key:"isValid",get:function(){return this.valid}}]),s}(ne),ln=null,Xe=function(r){c(s,r),s.instance=function(o){return o===0?s.utcInstance:new s(o)},s.parseSpecifier=function(o){if(o){var u=o.match(/^utc(?:([+-]\d{1,2})(?::(\d{2}))?)?$/i);if(u)return new s(je(u[1],u[2]))}return null};function s(e){var o;return o=r.call(this)||this,o.fixed=e,o}var i=s.prototype;return i.offsetName=function(){return this.name},i.formatOffset=function(o,u){return xe(this.fixed,u)},i.offset=function(){return this.fixed},i.equals=function(o){return o.type==="fixed"&&o.fixed===this.fixed},l(s,[{key:"type",get:function(){return"fixed"}},{key:"name",get:function(){return this.fixed===0?"UTC":"UTC"+xe(this.fixed,"narrow")}},{key:"isUniversal",get:function(){return!0}},{key:"isValid",get:function(){return!0}}],[{key:"utcInstance",get:function(){return ln===null&&(ln=new s(0)),ln}}]),s}(ne),un=function(r){c(s,r);function s(e){var o;return o=r.call(this)||this,o.zoneName=e,o}var i=s.prototype;return i.offsetName=function(){return null},i.formatOffset=function(){return""},i.offset=function(){return NaN},i.equals=function(){return!1},l(s,[{key:"type",get:function(){return"invalid"}},{key:"name",get:function(){return this.zoneName}},{key:"isUniversal",get:function(){return!1}},{key:"isValid",get:function(){return!1}}]),s}(ne);function nt(r,s){if(ie(r)||r===null)return s;if(r instanceof ne)return r;if(Wn(r)){var i=r.toLowerCase();return i==="local"||i==="system"?s:i==="utc"||i==="gmt"?Xe.utcInstance:Ue.isValidSpecifier(i)?Ue.create(r):Xe.parseSpecifier(i)||new un(r)}else return V(r)?Xe.instance(r):typeof r=="object"&&r.offset&&typeof r.offset=="number"?r:new un(r)}var Nn=function(){return Date.now()},dn="system",y=null,S=null,Y=null,le,re=function(){function r(){}return r.resetCaches=function(){Ae.resetCache(),Ue.resetCache()},l(r,null,[{key:"now",get:function(){return Nn},set:function(i){Nn=i}},{key:"defaultZone",get:function(){return nt(dn,on.instance)},set:function(i){dn=i}},{key:"defaultLocale",get:function(){return y},set:function(i){y=i}},{key:"defaultNumberingSystem",get:function(){return S},set:function(i){S=i}},{key:"defaultOutputCalendar",get:function(){return Y},set:function(i){Y=i}},{key:"throwOnInvalid",get:function(){return le},set:function(i){le=i}}]),r}(),rt=["base"],gt=["padTo","floor"],pt={};function zt(r,s){s===void 0&&(s={});var i=JSON.stringify([r,s]),e=pt[i];return e||(e=new Intl.ListFormat(r,s),pt[i]=e),e}var Qt={};function at(r,s){s===void 0&&(s={});var i=JSON.stringify([r,s]),e=Qt[i];return e||(e=new Intl.DateTimeFormat(r,s),Qt[i]=e),e}var It={};function yr(r,s){s===void 0&&(s={});var i=JSON.stringify([r,s]),e=It[i];return e||(e=new Intl.NumberFormat(r,s),It[i]=e),e}var Zn={};function Gn(r,s){s===void 0&&(s={});var i=s;i.base;var e=k(i,rt),o=JSON.stringify([r,e]),u=Zn[o];return u||(u=new Intl.RelativeTimeFormat(r,s),Zn[o]=u),u}var Xt=null;function Vr(){return Xt||(Xt=new Intl.DateTimeFormat().resolvedOptions().locale,Xt)}function Nt(r){var s=r.indexOf("-u-");if(s===-1)return[r];var i,e=r.substring(0,s);try{i=at(r).resolvedOptions()}catch(h){i=at(e).resolvedOptions()}var o=i,u=o.numberingSystem,m=o.calendar;return[e,u,m]}function gr(r,s,i){return(i||s)&&(r+="-u",i&&(r+="-ca-"+i),s&&(r+="-nu-"+s)),r}function pr(r){for(var s=[],i=1;i<=12;i++){var e=Re.utc(2016,i,1);s.push(r(e))}return s}function _r(r){for(var s=[],i=1;i<=7;i++){var e=Re.utc(2016,11,13+i);s.push(r(e))}return s}function Bn(r,s,i,e,o){var u=r.listingMode(i);return u==="error"?null:u==="en"?e(s):o(s)}function Mn(r){return r.numberingSystem&&r.numberingSystem!=="latn"?!1:r.numberingSystem==="latn"||!r.locale||r.locale.startsWith("en")||new Intl.DateTimeFormat(r.intl).resolvedOptions().numberingSystem==="latn"}var Mt=function(){function r(i,e,o){this.padTo=o.padTo||0,this.floor=o.floor||!1,o.padTo,o.floor;var u=k(o,gt);if(!e||Object.keys(u).length>0){var m=d({useGrouping:!1},o);o.padTo>0&&(m.minimumIntegerDigits=o.padTo),this.inf=yr(i,m)}}var s=r.prototype;return s.format=function(e){if(this.inf){var o=this.floor?Math.floor(e):e;return this.inf.format(o)}else{var u=this.floor?Math.floor(e):Ot(e,3);return Te(u,this.padTo)}},r}(),br=function(){function r(i,e,o){this.opts=o;var u;if(i.zone.isUniversal){var m=-1*(i.offset/60),h=m>=0?"Etc/GMT+"+m:"Etc/GMT"+m;i.offset!==0&&Ue.create(h).valid?(u=h,this.dt=i):(u="UTC",o.timeZoneName?this.dt=i:this.dt=i.offset===0?i:Re.fromMillis(i.ts+i.offset*60*1e3))}else i.zone.type==="system"?this.dt=i:(this.dt=i,u=i.zone.name);var g=d({},this.opts);u&&(g.timeZone=u),this.dtf=at(e,g)}var s=r.prototype;return s.format=function(){return this.dtf.format(this.dt.toJSDate())},s.formatToParts=function(){return this.dtf.formatToParts(this.dt.toJSDate())},s.resolvedOptions=function(){return this.dtf.resolvedOptions()},r}(),wr=function(){function r(i,e,o){this.opts=d({style:"long"},o),!e&&P()&&(this.rtf=Gn(i,o))}var s=r.prototype;return s.format=function(e,o){return this.rtf?this.rtf.format(e,o):On(o,e,this.opts.numeric,this.opts.style!=="long")},s.formatToParts=function(e,o){return this.rtf?this.rtf.formatToParts(e,o):[]},r}(),Ae=function(){r.fromOpts=function(e){return r.create(e.locale,e.numberingSystem,e.outputCalendar,e.defaultToEN)},r.create=function(e,o,u,m){m===void 0&&(m=!1);var h=e||re.defaultLocale,g=h||(m?"en-US":Vr()),T=o||re.defaultNumberingSystem,N=u||re.defaultOutputCalendar;return new r(g,T,N,h)},r.resetCache=function(){Xt=null,Qt={},It={},Zn={}},r.fromObject=function(e){var o=e===void 0?{}:e,u=o.locale,m=o.numberingSystem,h=o.outputCalendar;return r.create(u,m,h)};function r(i,e,o,u){var m=Nt(i),h=m[0],g=m[1],T=m[2];this.locale=h,this.numberingSystem=e||g||null,this.outputCalendar=o||T||null,this.intl=gr(this.locale,this.numberingSystem,this.outputCalendar),this.weekdaysCache={format:{},standalone:{}},this.monthsCache={format:{},standalone:{}},this.meridiemCache=null,this.eraCache={},this.specifiedLocale=u,this.fastNumbersCached=null}var s=r.prototype;return s.listingMode=function(){var e=this.isEnglish(),o=(this.numberingSystem===null||this.numberingSystem==="latn")&&(this.outputCalendar===null||this.outputCalendar==="gregory");return e&&o?"en":"intl"},s.clone=function(e){return!e||Object.getOwnPropertyNames(e).length===0?this:r.create(e.locale||this.specifiedLocale,e.numberingSystem||this.numberingSystem,e.outputCalendar||this.outputCalendar,e.defaultToEN||!1)},s.redefaultToEN=function(e){return e===void 0&&(e={}),this.clone(d({},e,{defaultToEN:!0}))},s.redefaultToSystem=function(e){return e===void 0&&(e={}),this.clone(d({},e,{defaultToEN:!1}))},s.months=function(e,o,u){var m=this;return o===void 0&&(o=!1),u===void 0&&(u=!0),Bn(this,e,u,Je,function(){var h=o?{month:e,day:"numeric"}:{month:e},g=o?"format":"standalone";return m.monthsCache[g][e]||(m.monthsCache[g][e]=pr(function(T){return m.extract(T,h,"month")})),m.monthsCache[g][e]})},s.weekdays=function(e,o,u){var m=this;return o===void 0&&(o=!1),u===void 0&&(u=!0),Bn(this,e,u,Ve,function(){var h=o?{weekday:e,year:"numeric",month:"long",day:"numeric"}:{weekday:e},g=o?"format":"standalone";return m.weekdaysCache[g][e]||(m.weekdaysCache[g][e]=_r(function(T){return m.extract(T,h,"weekday")})),m.weekdaysCache[g][e]})},s.meridiems=function(e){var o=this;return e===void 0&&(e=!0),Bn(this,void 0,e,function(){return tt},function(){if(!o.meridiemCache){var u={hour:"numeric",hourCycle:"h12"};o.meridiemCache=[Re.utc(2016,11,13,9),Re.utc(2016,11,13,19)].map(function(m){return o.extract(m,u,"dayperiod")})}return o.meridiemCache})},s.eras=function(e,o){var u=this;return o===void 0&&(o=!0),Bn(this,e,o,an,function(){var m={era:e};return u.eraCache[e]||(u.eraCache[e]=[Re.utc(-40,1,1),Re.utc(2017,1,1)].map(function(h){return u.extract(h,m,"era")})),u.eraCache[e]})},s.extract=function(e,o,u){var m=this.dtFormatter(e,o),h=m.formatToParts(),g=h.find(function(T){return T.type.toLowerCase()===u});return g?g.value:null},s.numberFormatter=function(e){return e===void 0&&(e={}),new Mt(this.intl,e.forceSimple||this.fastNumbers,e)},s.dtFormatter=function(e,o){return o===void 0&&(o={}),new br(e,this.intl,o)},s.relFormatter=function(e){return e===void 0&&(e={}),new wr(this.intl,this.isEnglish(),e)},s.listFormatter=function(e){return e===void 0&&(e={}),zt(this.intl,e)},s.isEnglish=function(){return this.locale==="en"||this.locale.toLowerCase()==="en-us"||new Intl.DateTimeFormat(this.intl).resolvedOptions().locale.startsWith("en-us")},s.equals=function(e){return this.locale===e.locale&&this.numberingSystem===e.numberingSystem&&this.outputCalendar===e.outputCalendar},l(r,[{key:"fastNumbers",get:function(){return this.fastNumbersCached==null&&(this.fastNumbersCached=Mn(this)),this.fastNumbersCached}}]),r}();function Kt(){for(var r=arguments.length,s=new Array(r),i=0;i<r;i++)s[i]=arguments[i];var e=s.reduce(function(o,u){return o+u.source},"");return RegExp("^"+e+"$")}function $t(){for(var r=arguments.length,s=new Array(r),i=0;i<r;i++)s[i]=arguments[i];return function(e){return s.reduce(function(o,u){var m=o[0],h=o[1],g=o[2],T=u(e,g),N=T[0],D=T[1],I=T[2];return[d({},m,N),h||D,I]},[{},null,1]).slice(0,2)}}function W(r){if(r==null)return[null,null];for(var s=arguments.length,i=new Array(s>1?s-1:0),e=1;e<s;e++)i[e-1]=arguments[e];for(var o=0,u=i;o<u.length;o++){var m=u[o],h=m[0],g=m[1],T=h.exec(r);if(T)return g(T)}return[null,null]}function _(){for(var r=arguments.length,s=new Array(r),i=0;i<r;i++)s[i]=arguments[i];return function(e,o){var u={},m;for(m=0;m<s.length;m++)u[s[m]]=_e(e[o+m]);return[u,null,o+m]}}var M=/(?:(Z)|([+-]\d\d)(?::?(\d\d))?)/,x=/(\d\d)(?::?(\d\d)(?::?(\d\d)(?:[.,](\d{1,30}))?)?)?/,ve=RegExp(""+x.source+M.source+"?"),Le=RegExp("(?:T"+ve.source+")?"),We=/([+-]\d{6}|\d{4})(?:-?(\d\d)(?:-?(\d\d))?)?/,Pe=/(\d{4})-?W(\d\d)(?:-?(\d))?/,Yn=/(\d{4})-?(\d{3})/,it=_("weekYear","weekNumber","weekDay"),Tr=_("year","ordinal"),Ur=/(\d{4})-(\d\d)-(\d\d)/,Wr=RegExp(x.source+" ?(?:"+M.source+"|("+kt.source+"))?"),il=RegExp("(?: "+Wr.source+")?");function Jn(r,s,i){var e=r[s];return ie(e)?i:_e(e)}function Ci(r,s){var i={year:Jn(r,s),month:Jn(r,s+1,1),day:Jn(r,s+2,1)};return[i,null,s+3]}function An(r,s){var i={hours:Jn(r,s,0),minutes:Jn(r,s+1,0),seconds:Jn(r,s+2,0),milliseconds:wn(r[s+3])};return[i,null,s+4]}function qn(r,s){var i=!r[s]&&!r[s+1],e=je(r[s+1],r[s+2]),o=i?null:Xe.instance(e);return[{},o,s+3]}function Li(r,s){var i=r[s]?Ue.create(r[s]):null;return[{},i,s+1]}var ol=RegExp("^T?"+x.source+"$"),sl=/^-?P(?:(?:(-?\d{1,9}(?:\.\d{1,9})?)Y)?(?:(-?\d{1,9}(?:\.\d{1,9})?)M)?(?:(-?\d{1,9}(?:\.\d{1,9})?)W)?(?:(-?\d{1,9}(?:\.\d{1,9})?)D)?(?:T(?:(-?\d{1,9}(?:\.\d{1,9})?)H)?(?:(-?\d{1,9}(?:\.\d{1,9})?)M)?(?:(-?\d{1,20})(?:[.,](-?\d{1,9}))?S)?)?)$/;function ll(r){var s=r[0],i=r[1],e=r[2],o=r[3],u=r[4],m=r[5],h=r[6],g=r[7],T=r[8],N=s[0]==="-",D=g&&g[0]==="-",I=function($,ce){return ce===void 0&&(ce=!1),$!==void 0&&(ce||$&&N)?-$:$};return[{years:I(ft(i)),months:I(ft(e)),weeks:I(ft(o)),days:I(ft(u)),hours:I(ft(m)),minutes:I(ft(h)),seconds:I(ft(g),g==="-0"),milliseconds:I(wn(T),D)}]}var ul={GMT:0,EDT:-4*60,EST:-5*60,CDT:-5*60,CST:-6*60,MDT:-6*60,MST:-7*60,PDT:-7*60,PST:-8*60};function jr(r,s,i,e,o,u,m){var h={year:s.length===2?et(_e(s)):_e(s),month:Ie.indexOf(i)+1,day:_e(e),hour:_e(o),minute:_e(u)};return m&&(h.second=_e(m)),r&&(h.weekday=r.length>3?Yt.indexOf(r)+1:Jt.indexOf(r)+1),h}var dl=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|(?:([+-]\d\d)(\d\d)))$/;function cl(r){var s=r[1],i=r[2],e=r[3],o=r[4],u=r[5],m=r[6],h=r[7],g=r[8],T=r[9],N=r[10],D=r[11],I=jr(s,o,e,i,u,m,h),Z;return g?Z=ul[g]:T?Z=0:Z=je(N,D),[I,new Xe(Z)]}function fl(r){return r.replace(/\([^)]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").trim()}var ml=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d\d) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d\d):(\d\d):(\d\d) GMT$/,hl=/^(Monday|Tuesday|Wedsday|Thursday|Friday|Saturday|Sunday), (\d\d)-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d\d) (\d\d):(\d\d):(\d\d) GMT$/,vl=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( \d|\d\d) (\d\d):(\d\d):(\d\d) (\d{4})$/;function Ri(r){var s=r[1],i=r[2],e=r[3],o=r[4],u=r[5],m=r[6],h=r[7],g=jr(s,o,e,i,u,m,h);return[g,Xe.utcInstance]}function yl(r){var s=r[1],i=r[2],e=r[3],o=r[4],u=r[5],m=r[6],h=r[7],g=jr(s,h,i,e,o,u,m);return[g,Xe.utcInstance]}var gl=Kt(We,Le),pl=Kt(Pe,Le),_l=Kt(Yn,Le),bl=Kt(ve),wl=$t(Ci,An,qn),Tl=$t(it,An,qn),Sl=$t(Tr,An,qn),Ol=$t(An,qn);function kl(r){return W(r,[gl,wl],[pl,Tl],[_l,Sl],[bl,Ol])}function El(r){return W(fl(r),[dl,cl])}function Dl(r){return W(r,[ml,Ri],[hl,Ri],[vl,yl])}function Il(r){return W(r,[sl,ll])}var Nl=$t(An);function Ml(r){return W(r,[ol,Nl])}var Al=Kt(Ur,il),Cl=Kt(Wr),Ll=$t(Ci,An,qn,Li),Rl=$t(An,qn,Li);function Fl(r){return W(r,[Al,Ll],[Cl,Rl])}var xl="Invalid Duration",Fi={weeks:{days:7,hours:7*24,minutes:7*24*60,seconds:7*24*60*60,milliseconds:7*24*60*60*1e3},days:{hours:24,minutes:24*60,seconds:24*60*60,milliseconds:24*60*60*1e3},hours:{minutes:60,seconds:60*60,milliseconds:60*60*1e3},minutes:{seconds:60,milliseconds:60*1e3},seconds:{milliseconds:1e3}},Pl=d({years:{quarters:4,months:12,weeks:52,days:365,hours:365*24,minutes:365*24*60,seconds:365*24*60*60,milliseconds:365*24*60*60*1e3},quarters:{months:3,weeks:13,days:91,hours:91*24,minutes:91*24*60,seconds:91*24*60*60,milliseconds:91*24*60*60*1e3},months:{weeks:4,days:30,hours:30*24,minutes:30*24*60,seconds:30*24*60*60,milliseconds:30*24*60*60*1e3}},Fi),_t=146097/400,Qn=146097/4800,zl=d({years:{quarters:4,months:12,weeks:_t/7,days:_t,hours:_t*24,minutes:_t*24*60,seconds:_t*24*60*60,milliseconds:_t*24*60*60*1e3},quarters:{months:3,weeks:_t/28,days:_t/4,hours:_t*24/4,minutes:_t*24*60/4,seconds:_t*24*60*60/4,milliseconds:_t*24*60*60*1e3/4},months:{weeks:Qn/7,days:Qn,hours:Qn*24,minutes:Qn*24*60,seconds:Qn*24*60*60,milliseconds:Qn*24*60*60*1e3}},Fi),Cn=["years","quarters","months","weeks","days","hours","minutes","seconds","milliseconds"],Hl=Cn.slice(0).reverse();function Ln(r,s,i){i===void 0&&(i=!1);var e={values:i?s.values:d({},r.values,s.values||{}),loc:r.loc.clone(s.loc),conversionAccuracy:s.conversionAccuracy||r.conversionAccuracy};return new Ze(e)}function Vl(r){return r<0?Math.floor(r):Math.ceil(r)}function xi(r,s,i,e,o){var u=r[o][i],m=s[i]/u,h=Math.sign(m)===Math.sign(e[o]),g=!h&&e[o]!==0&&Math.abs(m)<=1?Vl(m):Math.trunc(m);e[o]+=g,s[i]-=g*u}function Ul(r,s){Hl.reduce(function(i,e){return ie(s[e])?i:(i&&xi(r,s,i,s,e),e)},null)}var Ze=function(){function r(i){var e=i.conversionAccuracy==="longterm"||!1;this.values=i.values,this.loc=i.loc||Ae.create(),this.conversionAccuracy=e?"longterm":"casual",this.invalid=i.invalid||null,this.matrix=e?zl:Pl,this.isLuxonDuration=!0}r.fromMillis=function(e,o){return r.fromObject({milliseconds:e},o)},r.fromObject=function(e,o){if(o===void 0&&(o={}),e==null||typeof e!="object")throw new ae("Duration.fromObject: argument expected to be an object, got "+(e===null?"null":typeof e));return new r({values:vt(e,r.normalizeUnit),loc:Ae.fromObject(o),conversionAccuracy:o.conversionAccuracy})},r.fromDurationLike=function(e){if(V(e))return r.fromMillis(e);if(r.isDuration(e))return e;if(typeof e=="object")return r.fromObject(e);throw new ae("Unknown duration argument "+e+" of type "+typeof e)},r.fromISO=function(e,o){var u=Il(e),m=u[0];return m?r.fromObject(m,o):r.invalid("unparsable",'the input "'+e+`" can't be parsed as ISO 8601`)},r.fromISOTime=function(e,o){var u=Ml(e),m=u[0];return m?r.fromObject(m,o):r.invalid("unparsable",'the input "'+e+`" can't be parsed as ISO 8601`)},r.invalid=function(e,o){if(o===void 0&&(o=null),!e)throw new ae("need to specify a reason the Duration is invalid");var u=e instanceof Ce?e:new Ce(e,o);if(re.throwOnInvalid)throw new pe(u);return new r({invalid:u})},r.normalizeUnit=function(e){var o={year:"years",years:"years",quarter:"quarters",quarters:"quarters",month:"months",months:"months",week:"weeks",weeks:"weeks",day:"days",days:"days",hour:"hours",hours:"hours",minute:"minutes",minutes:"minutes",second:"seconds",seconds:"seconds",millisecond:"milliseconds",milliseconds:"milliseconds"}[e&&e.toLowerCase()];if(!o)throw new oe(e);return o},r.isDuration=function(e){return e&&e.isLuxonDuration||!1};var s=r.prototype;return s.toFormat=function(e,o){o===void 0&&(o={});var u=d({},o,{floor:o.round!==!1&&o.floor!==!1});return this.isValid?Ke.create(this.loc,u).formatDurationFromString(this,e):xl},s.toHuman=function(e){var o=this;e===void 0&&(e={});var u=Cn.map(function(m){var h=o.values[m];return ie(h)?null:o.loc.numberFormatter(d({style:"unit",unitDisplay:"long"},e,{unit:m.slice(0,-1)})).format(h)}).filter(function(m){return m});return this.loc.listFormatter(d({type:"conjunction",style:e.listStyle||"narrow"},e)).format(u)},s.toObject=function(){return this.isValid?d({},this.values):{}},s.toISO=function(){if(!this.isValid)return null;var e="P";return this.years!==0&&(e+=this.years+"Y"),(this.months!==0||this.quarters!==0)&&(e+=this.months+this.quarters*3+"M"),this.weeks!==0&&(e+=this.weeks+"W"),this.days!==0&&(e+=this.days+"D"),(this.hours!==0||this.minutes!==0||this.seconds!==0||this.milliseconds!==0)&&(e+="T"),this.hours!==0&&(e+=this.hours+"H"),this.minutes!==0&&(e+=this.minutes+"M"),(this.seconds!==0||this.milliseconds!==0)&&(e+=Ot(this.seconds+this.milliseconds/1e3,3)+"S"),e==="P"&&(e+="T0S"),e},s.toISOTime=function(e){if(e===void 0&&(e={}),!this.isValid)return null;var o=this.toMillis();if(o<0||o>=864e5)return null;e=d({suppressMilliseconds:!1,suppressSeconds:!1,includePrefix:!1,format:"extended"},e);var u=this.shiftTo("hours","minutes","seconds","milliseconds"),m=e.format==="basic"?"hhmm":"hh:mm";(!e.suppressSeconds||u.seconds!==0||u.milliseconds!==0)&&(m+=e.format==="basic"?"ss":":ss",(!e.suppressMilliseconds||u.milliseconds!==0)&&(m+=".SSS"));var h=u.toFormat(m);return e.includePrefix&&(h="T"+h),h},s.toJSON=function(){return this.toISO()},s.toString=function(){return this.toISO()},s.toMillis=function(){return this.as("milliseconds")},s.valueOf=function(){return this.toMillis()},s.plus=function(e){if(!this.isValid)return this;for(var o=r.fromDurationLike(e),u={},m=H(Cn),h;!(h=m()).done;){var g=h.value;(he(o.values,g)||he(this.values,g))&&(u[g]=o.get(g)+this.get(g))}return Ln(this,{values:u},!0)},s.minus=function(e){if(!this.isValid)return this;var o=r.fromDurationLike(e);return this.plus(o.negate())},s.mapUnits=function(e){if(!this.isValid)return this;for(var o={},u=0,m=Object.keys(this.values);u<m.length;u++){var h=m[u];o[h]=ht(e(this.values[h],h))}return Ln(this,{values:o},!0)},s.get=function(e){return this[r.normalizeUnit(e)]},s.set=function(e){if(!this.isValid)return this;var o=d({},this.values,vt(e,r.normalizeUnit));return Ln(this,{values:o})},s.reconfigure=function(e){var o=e===void 0?{}:e,u=o.locale,m=o.numberingSystem,h=o.conversionAccuracy,g=this.loc.clone({locale:u,numberingSystem:m}),T={loc:g};return h&&(T.conversionAccuracy=h),Ln(this,T)},s.as=function(e){return this.isValid?this.shiftTo(e).get(e):NaN},s.normalize=function(){if(!this.isValid)return this;var e=this.toObject();return Ul(this.matrix,e),Ln(this,{values:e},!0)},s.shiftTo=function(){for(var e=arguments.length,o=new Array(e),u=0;u<e;u++)o[u]=arguments[u];if(!this.isValid)return this;if(o.length===0)return this;o=o.map(function(Ge){return r.normalizeUnit(Ge)});for(var m={},h={},g=this.toObject(),T,N=H(Cn),D;!(D=N()).done;){var I=D.value;if(o.indexOf(I)>=0){T=I;var Z=0;for(var $ in h)Z+=this.matrix[$][I]*h[$],h[$]=0;V(g[I])&&(Z+=g[I]);var ce=Math.trunc(Z);m[I]=ce,h[I]=(Z*1e3-ce*1e3)/1e3;for(var ue in g)Cn.indexOf(ue)>Cn.indexOf(I)&&xi(this.matrix,g,ue,m,I)}else V(g[I])&&(h[I]=g[I])}for(var K in h)h[K]!==0&&(m[T]+=K===T?h[K]:h[K]/this.matrix[T][K]);return Ln(this,{values:m},!0).normalize()},s.negate=function(){if(!this.isValid)return this;for(var e={},o=0,u=Object.keys(this.values);o<u.length;o++){var m=u[o];e[m]=-this.values[m]}return Ln(this,{values:e},!0)},s.equals=function(e){if(!this.isValid||!e.isValid||!this.loc.equals(e.loc))return!1;function o(g,T){return g===void 0||g===0?T===void 0||T===0:g===T}for(var u=H(Cn),m;!(m=u()).done;){var h=m.value;if(!o(this.values[h],e.values[h]))return!1}return!0},l(r,[{key:"locale",get:function(){return this.isValid?this.loc.locale:null}},{key:"numberingSystem",get:function(){return this.isValid?this.loc.numberingSystem:null}},{key:"years",get:function(){return this.isValid?this.values.years||0:NaN}},{key:"quarters",get:function(){return this.isValid?this.values.quarters||0:NaN}},{key:"months",get:function(){return this.isValid?this.values.months||0:NaN}},{key:"weeks",get:function(){return this.isValid?this.values.weeks||0:NaN}},{key:"days",get:function(){return this.isValid?this.values.days||0:NaN}},{key:"hours",get:function(){return this.isValid?this.values.hours||0:NaN}},{key:"minutes",get:function(){return this.isValid?this.values.minutes||0:NaN}},{key:"seconds",get:function(){return this.isValid?this.values.seconds||0:NaN}},{key:"milliseconds",get:function(){return this.isValid?this.values.milliseconds||0:NaN}},{key:"isValid",get:function(){return this.invalid===null}},{key:"invalidReason",get:function(){return this.invalid?this.invalid.reason:null}},{key:"invalidExplanation",get:function(){return this.invalid?this.invalid.explanation:null}}]),r}(),tr="Invalid Interval";function Wl(r,s){return!r||!r.isValid?nr.invalid("missing or invalid start"):!s||!s.isValid?nr.invalid("missing or invalid end"):s<r?nr.invalid("end before start","The end of an interval must be after its start, but you had start="+r.toISO()+" and end="+s.toISO()):null}var nr=function(){function r(i){this.s=i.start,this.e=i.end,this.invalid=i.invalid||null,this.isLuxonInterval=!0}r.invalid=function(e,o){if(o===void 0&&(o=null),!e)throw new ae("need to specify a reason the Interval is invalid");var u=e instanceof Ce?e:new Ce(e,o);if(re.throwOnInvalid)throw new fe(u);return new r({invalid:u})},r.fromDateTimes=function(e,o){var u=or(e),m=or(o),h=Wl(u,m);return h==null?new r({start:u,end:m}):h},r.after=function(e,o){var u=Ze.fromDurationLike(o),m=or(e);return r.fromDateTimes(m,m.plus(u))},r.before=function(e,o){var u=Ze.fromDurationLike(o),m=or(e);return r.fromDateTimes(m.minus(u),m)},r.fromISO=function(e,o){var u=(e||"").split("/",2),m=u[0],h=u[1];if(m&&h){var g,T;try{g=Re.fromISO(m,o),T=g.isValid}catch($){T=!1}var N,D;try{N=Re.fromISO(h,o),D=N.isValid}catch($){D=!1}if(T&&D)return r.fromDateTimes(g,N);if(T){var I=Ze.fromISO(h,o);if(I.isValid)return r.after(g,I)}else if(D){var Z=Ze.fromISO(m,o);if(Z.isValid)return r.before(N,Z)}}return r.invalid("unparsable",'the input "'+e+`" can't be parsed as ISO 8601`)},r.isInterval=function(e){return e&&e.isLuxonInterval||!1};var s=r.prototype;return s.length=function(e){return e===void 0&&(e="milliseconds"),this.isValid?this.toDuration.apply(this,[e]).get(e):NaN},s.count=function(e){if(e===void 0&&(e="milliseconds"),!this.isValid)return NaN;var o=this.start.startOf(e),u=this.end.startOf(e);return Math.floor(u.diff(o,e).get(e))+1},s.hasSame=function(e){return this.isValid?this.isEmpty()||this.e.minus(1).hasSame(this.s,e):!1},s.isEmpty=function(){return this.s.valueOf()===this.e.valueOf()},s.isAfter=function(e){return this.isValid?this.s>e:!1},s.isBefore=function(e){return this.isValid?this.e<=e:!1},s.contains=function(e){return this.isValid?this.s<=e&&this.e>e:!1},s.set=function(e){var o=e===void 0?{}:e,u=o.start,m=o.end;return this.isValid?r.fromDateTimes(u||this.s,m||this.e):this},s.splitAt=function(){var e=this;if(!this.isValid)return[];for(var o=arguments.length,u=new Array(o),m=0;m<o;m++)u[m]=arguments[m];for(var h=u.map(or).filter(function(Z){return e.contains(Z)}).sort(),g=[],T=this.s,N=0;T<this.e;){var D=h[N]||this.e,I=+D>+this.e?this.e:D;g.push(r.fromDateTimes(T,I)),T=I,N+=1}return g},s.splitBy=function(e){var o=Ze.fromDurationLike(e);if(!this.isValid||!o.isValid||o.as("milliseconds")===0)return[];for(var u=this.s,m=1,h,g=[];u<this.e;){var T=this.start.plus(o.mapUnits(function(N){return N*m}));h=+T>+this.e?this.e:T,g.push(r.fromDateTimes(u,h)),u=h,m+=1}return g},s.divideEqually=function(e){return this.isValid?this.splitBy(this.length()/e).slice(0,e):[]},s.overlaps=function(e){return this.e>e.s&&this.s<e.e},s.abutsStart=function(e){return this.isValid?+this.e==+e.s:!1},s.abutsEnd=function(e){return this.isValid?+e.e==+this.s:!1},s.engulfs=function(e){return this.isValid?this.s<=e.s&&this.e>=e.e:!1},s.equals=function(e){return!this.isValid||!e.isValid?!1:this.s.equals(e.s)&&this.e.equals(e.e)},s.intersection=function(e){if(!this.isValid)return this;var o=this.s>e.s?this.s:e.s,u=this.e<e.e?this.e:e.e;return o>=u?null:r.fromDateTimes(o,u)},s.union=function(e){if(!this.isValid)return this;var o=this.s<e.s?this.s:e.s,u=this.e>e.e?this.e:e.e;return r.fromDateTimes(o,u)},r.merge=function(e){var o=e.sort(function(h,g){return h.s-g.s}).reduce(function(h,g){var T=h[0],N=h[1];return N?N.overlaps(g)||N.abutsStart(g)?[T,N.union(g)]:[T.concat([N]),g]:[T,g]},[[],null]),u=o[0],m=o[1];return m&&u.push(m),u},r.xor=function(e){for(var o,u=null,m=0,h=[],g=e.map(function($){return[{time:$.s,type:"s"},{time:$.e,type:"e"}]}),T=(o=Array.prototype).concat.apply(o,g),N=T.sort(function($,ce){return $.time-ce.time}),D=H(N),I;!(I=D()).done;){var Z=I.value;m+=Z.type==="s"?1:-1,m===1?u=Z.time:(u&&+u!=+Z.time&&h.push(r.fromDateTimes(u,Z.time)),u=null)}return r.merge(h)},s.difference=function(){for(var e=this,o=arguments.length,u=new Array(o),m=0;m<o;m++)u[m]=arguments[m];return r.xor([this].concat(u)).map(function(h){return e.intersection(h)}).filter(function(h){return h&&!h.isEmpty()})},s.toString=function(){return this.isValid?"["+this.s.toISO()+" \u2013 "+this.e.toISO()+")":tr},s.toISO=function(e){return this.isValid?this.s.toISO(e)+"/"+this.e.toISO(e):tr},s.toISODate=function(){return this.isValid?this.s.toISODate()+"/"+this.e.toISODate():tr},s.toISOTime=function(e){return this.isValid?this.s.toISOTime(e)+"/"+this.e.toISOTime(e):tr},s.toFormat=function(e,o){var u=o===void 0?{}:o,m=u.separator,h=m===void 0?" \u2013 ":m;return this.isValid?""+this.s.toFormat(e)+h+this.e.toFormat(e):tr},s.toDuration=function(e,o){return this.isValid?this.e.diff(this.s,e,o):Ze.invalid(this.invalidReason)},s.mapEndpoints=function(e){return r.fromDateTimes(e(this.s),e(this.e))},l(r,[{key:"start",get:function(){return this.isValid?this.s:null}},{key:"end",get:function(){return this.isValid?this.e:null}},{key:"isValid",get:function(){return this.invalidReason===null}},{key:"invalidReason",get:function(){return this.invalid?this.invalid.reason:null}},{key:"invalidExplanation",get:function(){return this.invalid?this.invalid.explanation:null}}]),r}(),rr=function(){function r(){}return r.hasDST=function(i){i===void 0&&(i=re.defaultZone);var e=Re.now().setZone(i).set({month:12});return!i.isUniversal&&e.offset!==e.set({month:6}).offset},r.isValidIANAZone=function(i){return Ue.isValidSpecifier(i)&&Ue.isValidZone(i)},r.normalizeZone=function(i){return nt(i,re.defaultZone)},r.months=function(i,e){i===void 0&&(i="long");var o=e===void 0?{}:e,u=o.locale,m=u===void 0?null:u,h=o.numberingSystem,g=h===void 0?null:h,T=o.locObj,N=T===void 0?null:T,D=o.outputCalendar,I=D===void 0?"gregory":D;return(N||Ae.create(m,g,I)).months(i)},r.monthsFormat=function(i,e){i===void 0&&(i="long");var o=e===void 0?{}:e,u=o.locale,m=u===void 0?null:u,h=o.numberingSystem,g=h===void 0?null:h,T=o.locObj,N=T===void 0?null:T,D=o.outputCalendar,I=D===void 0?"gregory":D;return(N||Ae.create(m,g,I)).months(i,!0)},r.weekdays=function(i,e){i===void 0&&(i="long");var o=e===void 0?{}:e,u=o.locale,m=u===void 0?null:u,h=o.numberingSystem,g=h===void 0?null:h,T=o.locObj,N=T===void 0?null:T;return(N||Ae.create(m,g,null)).weekdays(i)},r.weekdaysFormat=function(i,e){i===void 0&&(i="long");var o=e===void 0?{}:e,u=o.locale,m=u===void 0?null:u,h=o.numberingSystem,g=h===void 0?null:h,T=o.locObj,N=T===void 0?null:T;return(N||Ae.create(m,g,null)).weekdays(i,!0)},r.meridiems=function(i){var e=i===void 0?{}:i,o=e.locale,u=o===void 0?null:o;return Ae.create(u).meridiems()},r.eras=function(i,e){i===void 0&&(i="short");var o=e===void 0?{}:e,u=o.locale,m=u===void 0?null:u;return Ae.create(m,null,"gregory").eras(i)},r.features=function(){return{relative:P()}},r}();function Pi(r,s){var i=function(u){return u.toUTC(0,{keepLocalTime:!0}).startOf("day").valueOf()},e=i(s)-i(r);return Math.floor(Ze.fromMillis(e).as("days"))}function jl(r,s,i){for(var e=[["years",function(ce,ue){return ue.year-ce.year}],["quarters",function(ce,ue){return ue.quarter-ce.quarter}],["months",function(ce,ue){return ue.month-ce.month+(ue.year-ce.year)*12}],["weeks",function(ce,ue){var K=Pi(ce,ue);return(K-K%7)/7}],["days",Pi]],o={},u,m,h=0,g=e;h<g.length;h++){var T=g[h],N=T[0],D=T[1];if(i.indexOf(N)>=0){var I;u=N;var Z=D(r,s);if(m=r.plus((I={},I[N]=Z,I)),m>s){var $;r=r.plus(($={},$[N]=Z-1,$)),Z-=1}else r=m;o[N]=Z}}return[r,o,m,u]}function Zl(r,s,i,e){var o=jl(r,s,i),u=o[0],m=o[1],h=o[2],g=o[3],T=s-u,N=i.filter(function($){return["hours","minutes","seconds","milliseconds"].indexOf($)>=0});if(N.length===0){if(h<s){var D;h=u.plus((D={},D[g]=1,D))}h!==u&&(m[g]=(m[g]||0)+T/(h-u))}var I=Ze.fromObject(m,e);if(N.length>0){var Z;return(Z=Ze.fromMillis(T,e)).shiftTo.apply(Z,N).plus(I)}else return I}var Zr={arab:"[\u0660-\u0669]",arabext:"[\u06F0-\u06F9]",bali:"[\u1B50-\u1B59]",beng:"[\u09E6-\u09EF]",deva:"[\u0966-\u096F]",fullwide:"[\uFF10-\uFF19]",gujr:"[\u0AE6-\u0AEF]",hanidec:"[\u3007|\u4E00|\u4E8C|\u4E09|\u56DB|\u4E94|\u516D|\u4E03|\u516B|\u4E5D]",khmr:"[\u17E0-\u17E9]",knda:"[\u0CE6-\u0CEF]",laoo:"[\u0ED0-\u0ED9]",limb:"[\u1946-\u194F]",mlym:"[\u0D66-\u0D6F]",mong:"[\u1810-\u1819]",mymr:"[\u1040-\u1049]",orya:"[\u0B66-\u0B6F]",tamldec:"[\u0BE6-\u0BEF]",telu:"[\u0C66-\u0C6F]",thai:"[\u0E50-\u0E59]",tibt:"[\u0F20-\u0F29]",latn:"\\d"},zi={arab:[1632,1641],arabext:[1776,1785],bali:[6992,7001],beng:[2534,2543],deva:[2406,2415],fullwide:[65296,65303],gujr:[2790,2799],khmr:[6112,6121],knda:[3302,3311],laoo:[3792,3801],limb:[6470,6479],mlym:[3430,3439],mong:[6160,6169],mymr:[4160,4169],orya:[2918,2927],tamldec:[3046,3055],telu:[3174,3183],thai:[3664,3673],tibt:[3872,3881]},Gl=Zr.hanidec.replace(/[\[|\]]/g,"").split("");function Bl(r){var s=parseInt(r,10);if(isNaN(s)){s="";for(var i=0;i<r.length;i++){var e=r.charCodeAt(i);if(r[i].search(Zr.hanidec)!==-1)s+=Gl.indexOf(r[i]);else for(var o in zi){var u=zi[o],m=u[0],h=u[1];e>=m&&e<=h&&(s+=e-m)}}return parseInt(s,10)}else return s}function At(r,s){var i=r.numberingSystem;return s===void 0&&(s=""),new RegExp(""+Zr[i||"latn"]+s)}var Yl="missing Intl.DateTimeFormat.formatToParts support";function ye(r,s){return s===void 0&&(s=function(e){return e}),{regex:r,deser:function(e){var o=e[0];return s(Bl(o))}}}var Jl=String.fromCharCode(160),Hi="( |"+Jl+")",Vi=new RegExp(Hi,"g");function ql(r){return r.replace(/\./g,"\\.?").replace(Vi,Hi)}function Ui(r){return r.replace(/\./g,"").replace(Vi," ").toLowerCase()}function Ct(r,s){return r===null?null:{regex:RegExp(r.map(ql).join("|")),deser:function(e){var o=e[0];return r.findIndex(function(u){return Ui(o)===Ui(u)})+s}}}function Wi(r,s){return{regex:r,deser:function(e){var o=e[1],u=e[2];return je(o,u)},groups:s}}function Gr(r){return{regex:r,deser:function(i){var e=i[0];return e}}}function Ql(r){return r.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function Xl(r,s){var i=At(s),e=At(s,"{2}"),o=At(s,"{3}"),u=At(s,"{4}"),m=At(s,"{6}"),h=At(s,"{1,2}"),g=At(s,"{1,3}"),T=At(s,"{1,6}"),N=At(s,"{1,9}"),D=At(s,"{2,4}"),I=At(s,"{4,6}"),Z=function(K){return{regex:RegExp(Ql(K.val)),deser:function(Er){var Kr=Er[0];return Kr},literal:!0}},$=function(K){if(r.literal)return Z(K);switch(K.val){case"G":return Ct(s.eras("short",!1),0);case"GG":return Ct(s.eras("long",!1),0);case"y":return ye(T);case"yy":return ye(D,et);case"yyyy":return ye(u);case"yyyyy":return ye(I);case"yyyyyy":return ye(m);case"M":return ye(h);case"MM":return ye(e);case"MMM":return Ct(s.months("short",!0,!1),1);case"MMMM":return Ct(s.months("long",!0,!1),1);case"L":return ye(h);case"LL":return ye(e);case"LLL":return Ct(s.months("short",!1,!1),1);case"LLLL":return Ct(s.months("long",!1,!1),1);case"d":return ye(h);case"dd":return ye(e);case"o":return ye(g);case"ooo":return ye(o);case"HH":return ye(e);case"H":return ye(h);case"hh":return ye(e);case"h":return ye(h);case"mm":return ye(e);case"m":return ye(h);case"q":return ye(h);case"qq":return ye(e);case"s":return ye(h);case"ss":return ye(e);case"S":return ye(g);case"SSS":return ye(o);case"u":return Gr(N);case"uu":return Gr(h);case"uuu":return ye(i);case"a":return Ct(s.meridiems(),0);case"kkkk":return ye(u);case"kk":return ye(D,et);case"W":return ye(h);case"WW":return ye(e);case"E":case"c":return ye(i);case"EEE":return Ct(s.weekdays("short",!1,!1),1);case"EEEE":return Ct(s.weekdays("long",!1,!1),1);case"ccc":return Ct(s.weekdays("short",!0,!1),1);case"cccc":return Ct(s.weekdays("long",!0,!1),1);case"Z":case"ZZ":return Wi(new RegExp("([+-]"+h.source+")(?::("+e.source+"))?"),2);case"ZZZ":return Wi(new RegExp("([+-]"+h.source+")("+e.source+")?"),2);case"z":return Gr(/[a-z_+-/]{1,256}?/i);default:return Z(K)}},ce=$(r)||{invalidReason:Yl};return ce.token=r,ce}var Kl={year:{"2-digit":"yy",numeric:"yyyyy"},month:{numeric:"M","2-digit":"MM",short:"MMM",long:"MMMM"},day:{numeric:"d","2-digit":"dd"},weekday:{short:"EEE",long:"EEEE"},dayperiod:"a",dayPeriod:"a",hour:{numeric:"h","2-digit":"hh"},minute:{numeric:"m","2-digit":"mm"},second:{numeric:"s","2-digit":"ss"}};function $l(r,s,i){var e=r.type,o=r.value;if(e==="literal")return{literal:!0,val:o};var u=i[e],m=Kl[e];if(typeof m=="object"&&(m=m[u]),m)return{literal:!1,val:m}}function eu(r){var s=r.map(function(i){return i.regex}).reduce(function(i,e){return i+"("+e.source+")"},"");return["^"+s+"$",r]}function tu(r,s,i){var e=r.match(s);if(e){var o={},u=1;for(var m in i)if(he(i,m)){var h=i[m],g=h.groups?h.groups+1:1;!h.literal&&h.token&&(o[h.token.val[0]]=h.deser(e.slice(u,u+g))),u+=g}return[e,o]}else return[e,{}]}function nu(r){var s=function(m){switch(m){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":case"H":return"hour";case"d":return"day";case"o":return"ordinal";case"L":case"M":return"month";case"y":return"year";case"E":case"c":return"weekday";case"W":return"weekNumber";case"k":return"weekYear";case"q":return"quarter";default:return null}},i=null,e;ie(r.z)||(i=Ue.create(r.z)),ie(r.Z)||(i||(i=new Xe(r.Z)),e=r.Z),ie(r.q)||(r.M=(r.q-1)*3+1),ie(r.h)||(r.h<12&&r.a===1?r.h+=12:r.h===12&&r.a===0&&(r.h=0)),r.G===0&&r.y&&(r.y=-r.y),ie(r.u)||(r.S=wn(r.u));var o=Object.keys(r).reduce(function(u,m){var h=s(m);return h&&(u[h]=r[m]),u},{});return[o,i,e]}var Br=null;function ru(){return Br||(Br=Re.fromMillis(1555555555555)),Br}function au(r,s){if(r.literal)return r;var i=Ke.macroTokenToFormatOpts(r.val);if(!i)return r;var e=Ke.create(s,i),o=e.formatDateTimeParts(ru()),u=o.map(function(m){return $l(m,s,i)});return u.includes(void 0)?r:u}function iu(r,s){var i;return(i=Array.prototype).concat.apply(i,r.map(function(e){return au(e,s)}))}function ji(r,s,i){var e=iu(Ke.parseFormat(i),r),o=e.map(function(K){return Xl(K,r)}),u=o.find(function(K){return K.invalidReason});if(u)return{input:s,tokens:e,invalidReason:u.invalidReason};var m=eu(o),h=m[0],g=m[1],T=RegExp(h,"i"),N=tu(s,T,g),D=N[0],I=N[1],Z=I?nu(I):[null,null,void 0],$=Z[0],ce=Z[1],ue=Z[2];if(he(I,"a")&&he(I,"H"))throw new q("Can't include meridiem when specifying 24-hour format");return{input:s,tokens:e,regex:T,rawMatches:D,matches:I,result:$,zone:ce,specificOffset:ue}}function ou(r,s,i){var e=ji(r,s,i),o=e.result,u=e.zone,m=e.specificOffset,h=e.invalidReason;return[o,u,m,h]}var Zi=[0,31,59,90,120,151,181,212,243,273,304,334],Gi=[0,31,60,91,121,152,182,213,244,274,305,335];function bt(r,s){return new Ce("unit out of range","you specified "+s+" (of type "+typeof s+") as a "+r+", which is invalid")}function Bi(r,s,i){var e=new Date(Date.UTC(r,s-1,i)).getUTCDay();return e===0?7:e}function Yi(r,s,i){return i+(mt(r)?Gi:Zi)[s-1]}function Ji(r,s){var i=mt(r)?Gi:Zi,e=i.findIndex(function(u){return u<s}),o=s-i[e];return{month:e+1,day:o}}function Yr(r){var s=r.year,i=r.month,e=r.day,o=Yi(s,i,e),u=Bi(s,i,e),m=Math.floor((o-u+10)/7),h;return m<1?(h=s-1,m=nn(h)):m>nn(s)?(h=s+1,m=1):h=s,d({weekYear:h,weekNumber:m,weekday:u},yt(r))}function qi(r){var s=r.weekYear,i=r.weekNumber,e=r.weekday,o=Bi(s,1,4),u=De(s),m=i*7+e-o-3,h;m<1?(h=s-1,m+=De(h)):m>u?(h=s+1,m-=De(s)):h=s;var g=Ji(h,m),T=g.month,N=g.day;return d({year:h,month:T,day:N},yt(r))}function Jr(r){var s=r.year,i=r.month,e=r.day,o=Yi(s,i,e);return d({year:s,ordinal:o},yt(r))}function Qi(r){var s=r.year,i=r.ordinal,e=Ji(s,i),o=e.month,u=e.day;return d({year:s,month:o,day:u},yt(r))}function su(r){var s=St(r.weekYear),i=ge(r.weekNumber,1,nn(r.weekYear)),e=ge(r.weekday,1,7);return s?i?e?!1:bt("weekday",r.weekday):bt("week",r.week):bt("weekYear",r.weekYear)}function lu(r){var s=St(r.year),i=ge(r.ordinal,1,De(r.year));return s?i?!1:bt("ordinal",r.ordinal):bt("year",r.year)}function Xi(r){var s=St(r.year),i=ge(r.month,1,12),e=ge(r.day,1,xt(r.year,r.month));return s?i?e?!1:bt("day",r.day):bt("month",r.month):bt("year",r.year)}function Ki(r){var s=r.hour,i=r.minute,e=r.second,o=r.millisecond,u=ge(s,0,23)||s===24&&i===0&&e===0&&o===0,m=ge(i,0,59),h=ge(e,0,59),g=ge(o,0,999);return u?m?h?g?!1:bt("millisecond",o):bt("second",e):bt("minute",i):bt("hour",s)}var qr="Invalid DateTime",$i=864e13;function Sr(r){return new Ce("unsupported zone",'the zone "'+r.name+'" is not supported')}function Qr(r){return r.weekData===null&&(r.weekData=Yr(r.c)),r.weekData}function ar(r,s){var i={ts:r.ts,zone:r.zone,c:r.c,o:r.o,loc:r.loc,invalid:r.invalid};return new Re(d({},i,s,{old:i}))}function eo(r,s,i){var e=r-s*60*1e3,o=i.offset(e);if(s===o)return[e,s];e-=(o-s)*60*1e3;var u=i.offset(e);return o===u?[e,o]:[r-Math.min(o,u)*60*1e3,Math.max(o,u)]}function to(r,s){r+=s*60*1e3;var i=new Date(r);return{year:i.getUTCFullYear(),month:i.getUTCMonth()+1,day:i.getUTCDate(),hour:i.getUTCHours(),minute:i.getUTCMinutes(),second:i.getUTCSeconds(),millisecond:i.getUTCMilliseconds()}}function Or(r,s,i){return eo(Bt(r),s,i)}function no(r,s){var i=r.o,e=r.c.year+Math.trunc(s.years),o=r.c.month+Math.trunc(s.months)+Math.trunc(s.quarters)*3,u=d({},r.c,{year:e,month:o,day:Math.min(r.c.day,xt(e,o))+Math.trunc(s.days)+Math.trunc(s.weeks)*7}),m=Ze.fromObject({years:s.years-Math.trunc(s.years),quarters:s.quarters-Math.trunc(s.quarters),months:s.months-Math.trunc(s.months),weeks:s.weeks-Math.trunc(s.weeks),days:s.days-Math.trunc(s.days),hours:s.hours,minutes:s.minutes,seconds:s.seconds,milliseconds:s.milliseconds}).as("milliseconds"),h=Bt(u),g=eo(h,i,r.zone),T=g[0],N=g[1];return m!==0&&(T+=m,N=r.zone.offset(T)),{ts:T,o:N}}function ir(r,s,i,e,o,u){var m=i.setZone,h=i.zone;if(r&&Object.keys(r).length!==0){var g=s||h,T=Re.fromObject(r,d({},i,{zone:g,specificOffset:u}));return m?T:T.setZone(h)}else return Re.invalid(new Ce("unparsable",'the input "'+o+`" can't be parsed as `+e))}function kr(r,s,i){return i===void 0&&(i=!0),r.isValid?Ke.create(Ae.create("en-US"),{allowZ:i,forceSimple:!0}).formatDateTimeFromString(r,s):null}function Xr(r,s){var i=r.c.year>9999||r.c.year<0,e="";return i&&r.c.year>=0&&(e+="+"),e+=Te(r.c.year,i?6:4),s?(e+="-",e+=Te(r.c.month),e+="-",e+=Te(r.c.day)):(e+=Te(r.c.month),e+=Te(r.c.day)),e}function ro(r,s,i,e,o){var u=Te(r.c.hour);return s?(u+=":",u+=Te(r.c.minute),(r.c.second!==0||!i)&&(u+=":")):u+=Te(r.c.minute),(r.c.second!==0||!i)&&(u+=Te(r.c.second),(r.c.millisecond!==0||!e)&&(u+=".",u+=Te(r.c.millisecond,3))),o&&(r.isOffsetFixed&&r.offset===0?u+="Z":r.o<0?(u+="-",u+=Te(Math.trunc(-r.o/60)),u+=":",u+=Te(Math.trunc(-r.o%60))):(u+="+",u+=Te(Math.trunc(r.o/60)),u+=":",u+=Te(Math.trunc(r.o%60)))),u}var ao={month:1,day:1,hour:0,minute:0,second:0,millisecond:0},uu={weekNumber:1,weekday:1,hour:0,minute:0,second:0,millisecond:0},du={ordinal:1,hour:0,minute:0,second:0,millisecond:0},io=["year","month","day","hour","minute","second","millisecond"],cu=["weekYear","weekNumber","weekday","hour","minute","second","millisecond"],fu=["year","ordinal","hour","minute","second","millisecond"];function oo(r){var s={year:"year",years:"year",month:"month",months:"month",day:"day",days:"day",hour:"hour",hours:"hour",minute:"minute",minutes:"minute",quarter:"quarter",quarters:"quarter",second:"second",seconds:"second",millisecond:"millisecond",milliseconds:"millisecond",weekday:"weekday",weekdays:"weekday",weeknumber:"weekNumber",weeksnumber:"weekNumber",weeknumbers:"weekNumber",weekyear:"weekYear",weekyears:"weekYear",ordinal:"ordinal"}[r.toLowerCase()];if(!s)throw new oe(r);return s}function so(r,s){var i=nt(s.zone,re.defaultZone),e=Ae.fromObject(s),o=re.now(),u,m;if(ie(r.year))u=o;else{for(var h=H(io),g;!(g=h()).done;){var T=g.value;ie(r[T])&&(r[T]=ao[T])}var N=Xi(r)||Ki(r);if(N)return Re.invalid(N);var D=i.offset(o),I=Or(r,D,i);u=I[0],m=I[1]}return new Re({ts:u,zone:i,loc:e,o:m})}function lo(r,s,i){var e=ie(i.round)?!0:i.round,o=function(D,I){D=Ot(D,e||i.calendary?0:2,!0);var Z=s.loc.clone(i).relFormatter(i);return Z.format(D,I)},u=function(D){return i.calendary?s.hasSame(r,D)?0:s.startOf(D).diff(r.startOf(D),D).get(D):s.diff(r,D).get(D)};if(i.unit)return o(u(i.unit),i.unit);for(var m=H(i.units),h;!(h=m()).done;){var g=h.value,T=u(g);if(Math.abs(T)>=1)return o(T,g)}return o(r>s?-0:0,i.units[i.units.length-1])}function uo(r){var s={},i;return r.length>0&&typeof r[r.length-1]=="object"?(s=r[r.length-1],i=Array.from(r).slice(0,r.length-1)):i=Array.from(r),[s,i]}var Re=function(){function r(i){var e=i.zone||re.defaultZone,o=i.invalid||(Number.isNaN(i.ts)?new Ce("invalid input"):null)||(e.isValid?null:Sr(e));this.ts=ie(i.ts)?re.now():i.ts;var u=null,m=null;if(!o){var h=i.old&&i.old.ts===this.ts&&i.old.zone.equals(e);if(h){var g=[i.old.c,i.old.o];u=g[0],m=g[1]}else{var T=e.offset(this.ts);u=to(this.ts,T),o=Number.isNaN(u.year)?new Ce("invalid input"):null,u=o?null:u,m=o?null:T}}this._zone=e,this.loc=i.loc||Ae.create(),this.invalid=o,this.weekData=null,this.c=u,this.o=m,this.isLuxonDateTime=!0}r.now=function(){return new r({})},r.local=function(){var e=uo(arguments),o=e[0],u=e[1],m=u[0],h=u[1],g=u[2],T=u[3],N=u[4],D=u[5],I=u[6];return so({year:m,month:h,day:g,hour:T,minute:N,second:D,millisecond:I},o)},r.utc=function(){var e=uo(arguments),o=e[0],u=e[1],m=u[0],h=u[1],g=u[2],T=u[3],N=u[4],D=u[5],I=u[6];return o.zone=Xe.utcInstance,so({year:m,month:h,day:g,hour:T,minute:N,second:D,millisecond:I},o)},r.fromJSDate=function(e,o){o===void 0&&(o={});var u=R(e)?e.valueOf():NaN;if(Number.isNaN(u))return r.invalid("invalid input");var m=nt(o.zone,re.defaultZone);return m.isValid?new r({ts:u,zone:m,loc:Ae.fromObject(o)}):r.invalid(Sr(m))},r.fromMillis=function(e,o){if(o===void 0&&(o={}),V(e))return e<-$i||e>$i?r.invalid("Timestamp out of range"):new r({ts:e,zone:nt(o.zone,re.defaultZone),loc:Ae.fromObject(o)});throw new ae("fromMillis requires a numerical input, but received a "+typeof e+" with value "+e)},r.fromSeconds=function(e,o){if(o===void 0&&(o={}),V(e))return new r({ts:e*1e3,zone:nt(o.zone,re.defaultZone),loc:Ae.fromObject(o)});throw new ae("fromSeconds requires a numerical input")},r.fromObject=function(e,o){o===void 0&&(o={}),e=e||{};var u=nt(o.zone,re.defaultZone);if(!u.isValid)return r.invalid(Sr(u));var m=re.now(),h=ie(o.specificOffset)?u.offset(m):o.specificOffset,g=vt(e,oo),T=!ie(g.ordinal),N=!ie(g.year),D=!ie(g.month)||!ie(g.day),I=N||D,Z=g.weekYear||g.weekNumber,$=Ae.fromObject(o);if((I||T)&&Z)throw new q("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(D&&T)throw new q("Can't mix ordinal dates with month/day");var ce=Z||g.weekday&&!I,ue,K,Ge=to(m,h);ce?(ue=cu,K=uu,Ge=Yr(Ge)):T?(ue=fu,K=du,Ge=Jr(Ge)):(ue=io,K=ao);for(var Er=!1,Kr=H(ue),co;!(co=Kr()).done;){var sr=co.value,hu=g[sr];ie(hu)?Er?g[sr]=K[sr]:g[sr]=Ge[sr]:Er=!0}var vu=ce?su(g):T?lu(g):Xi(g),fo=vu||Ki(g);if(fo)return r.invalid(fo);var yu=ce?qi(g):T?Qi(g):g,mo=Or(yu,h,u),gu=mo[0],pu=mo[1],$r=new r({ts:gu,zone:u,o:pu,loc:$});return g.weekday&&I&&e.weekday!==$r.weekday?r.invalid("mismatched weekday","you can't specify both a weekday of "+g.weekday+" and a date of "+$r.toISO()):$r},r.fromISO=function(e,o){o===void 0&&(o={});var u=kl(e),m=u[0],h=u[1];return ir(m,h,o,"ISO 8601",e)},r.fromRFC2822=function(e,o){o===void 0&&(o={});var u=El(e),m=u[0],h=u[1];return ir(m,h,o,"RFC 2822",e)},r.fromHTTP=function(e,o){o===void 0&&(o={});var u=Dl(e),m=u[0],h=u[1];return ir(m,h,o,"HTTP",o)},r.fromFormat=function(e,o,u){if(u===void 0&&(u={}),ie(e)||ie(o))throw new ae("fromFormat requires an input string and a format");var m=u,h=m.locale,g=h===void 0?null:h,T=m.numberingSystem,N=T===void 0?null:T,D=Ae.fromOpts({locale:g,numberingSystem:N,defaultToEN:!0}),I=ou(D,e,o),Z=I[0],$=I[1],ce=I[2],ue=I[3];return ue?r.invalid(ue):ir(Z,$,u,"format "+o,e,ce)},r.fromString=function(e,o,u){return u===void 0&&(u={}),r.fromFormat(e,o,u)},r.fromSQL=function(e,o){o===void 0&&(o={});var u=Fl(e),m=u[0],h=u[1];return ir(m,h,o,"SQL",e)},r.invalid=function(e,o){if(o===void 0&&(o=null),!e)throw new ae("need to specify a reason the DateTime is invalid");var u=e instanceof Ce?e:new Ce(e,o);if(re.throwOnInvalid)throw new F(u);return new r({invalid:u})},r.isDateTime=function(e){return e&&e.isLuxonDateTime||!1};var s=r.prototype;return s.get=function(e){return this[e]},s.resolvedLocaleOptions=function(e){e===void 0&&(e={});var o=Ke.create(this.loc.clone(e),e).resolvedOptions(this),u=o.locale,m=o.numberingSystem,h=o.calendar;return{locale:u,numberingSystem:m,outputCalendar:h}},s.toUTC=function(e,o){return e===void 0&&(e=0),o===void 0&&(o={}),this.setZone(Xe.instance(e),o)},s.toLocal=function(){return this.setZone(re.defaultZone)},s.setZone=function(e,o){var u=o===void 0?{}:o,m=u.keepLocalTime,h=m===void 0?!1:m,g=u.keepCalendarTime,T=g===void 0?!1:g;if(e=nt(e,re.defaultZone),e.equals(this.zone))return this;if(e.isValid){var N=this.ts;if(h||T){var D=e.offset(this.ts),I=this.toObject(),Z=Or(I,D,e);N=Z[0]}return ar(this,{ts:N,zone:e})}else return r.invalid(Sr(e))},s.reconfigure=function(e){var o=e===void 0?{}:e,u=o.locale,m=o.numberingSystem,h=o.outputCalendar,g=this.loc.clone({locale:u,numberingSystem:m,outputCalendar:h});return ar(this,{loc:g})},s.setLocale=function(e){return this.reconfigure({locale:e})},s.set=function(e){if(!this.isValid)return this;var o=vt(e,oo),u=!ie(o.weekYear)||!ie(o.weekNumber)||!ie(o.weekday),m=!ie(o.ordinal),h=!ie(o.year),g=!ie(o.month)||!ie(o.day),T=h||g,N=o.weekYear||o.weekNumber;if((T||m)&&N)throw new q("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(g&&m)throw new q("Can't mix ordinal dates with month/day");var D;u?D=qi(d({},Yr(this.c),o)):ie(o.ordinal)?(D=d({},this.toObject(),o),ie(o.day)&&(D.day=Math.min(xt(D.year,D.month),D.day))):D=Qi(d({},Jr(this.c),o));var I=Or(D,this.o,this.zone),Z=I[0],$=I[1];return ar(this,{ts:Z,o:$})},s.plus=function(e){if(!this.isValid)return this;var o=Ze.fromDurationLike(e);return ar(this,no(this,o))},s.minus=function(e){if(!this.isValid)return this;var o=Ze.fromDurationLike(e).negate();return ar(this,no(this,o))},s.startOf=function(e){if(!this.isValid)return this;var o={},u=Ze.normalizeUnit(e);switch(u){case"years":o.month=1;case"quarters":case"months":o.day=1;case"weeks":case"days":o.hour=0;case"hours":o.minute=0;case"minutes":o.second=0;case"seconds":o.millisecond=0;break}if(u==="weeks"&&(o.weekday=1),u==="quarters"){var m=Math.ceil(this.month/3);o.month=(m-1)*3+1}return this.set(o)},s.endOf=function(e){var o;return this.isValid?this.plus((o={},o[e]=1,o)).startOf(e).minus(1):this},s.toFormat=function(e,o){return o===void 0&&(o={}),this.isValid?Ke.create(this.loc.redefaultToEN(o)).formatDateTimeFromString(this,e):qr},s.toLocaleString=function(e,o){return e===void 0&&(e=me),o===void 0&&(o={}),this.isValid?Ke.create(this.loc.clone(o),e).formatDateTime(this):qr},s.toLocaleParts=function(e){return e===void 0&&(e={}),this.isValid?Ke.create(this.loc.clone(e),e).formatDateTimeParts(this):[]},s.toISO=function(e){var o=e===void 0?{}:e,u=o.format,m=u===void 0?"extended":u,h=o.suppressSeconds,g=h===void 0?!1:h,T=o.suppressMilliseconds,N=T===void 0?!1:T,D=o.includeOffset,I=D===void 0?!0:D;if(!this.isValid)return null;var Z=m==="extended",$=Xr(this,Z);return $+="T",$+=ro(this,Z,g,N,I),$},s.toISODate=function(e){var o=e===void 0?{}:e,u=o.format,m=u===void 0?"extended":u;return this.isValid?Xr(this,m==="extended"):null},s.toISOWeekDate=function(){return kr(this,"kkkk-'W'WW-c")},s.toISOTime=function(e){var o=e===void 0?{}:e,u=o.suppressMilliseconds,m=u===void 0?!1:u,h=o.suppressSeconds,g=h===void 0?!1:h,T=o.includeOffset,N=T===void 0?!0:T,D=o.includePrefix,I=D===void 0?!1:D,Z=o.format,$=Z===void 0?"extended":Z;if(!this.isValid)return null;var ce=I?"T":"";return ce+ro(this,$==="extended",g,m,N)},s.toRFC2822=function(){return kr(this,"EEE, dd LLL yyyy HH:mm:ss ZZZ",!1)},s.toHTTP=function(){return kr(this.toUTC(),"EEE, dd LLL yyyy HH:mm:ss 'GMT'")},s.toSQLDate=function(){return this.isValid?Xr(this,!0):null},s.toSQLTime=function(e){var o=e===void 0?{}:e,u=o.includeOffset,m=u===void 0?!0:u,h=o.includeZone,g=h===void 0?!1:h,T="HH:mm:ss.SSS";return(g||m)&&(T+=" ",g?T+="z":m&&(T+="ZZ")),kr(this,T,!0)},s.toSQL=function(e){return e===void 0&&(e={}),this.isValid?this.toSQLDate()+" "+this.toSQLTime(e):null},s.toString=function(){return this.isValid?this.toISO():qr},s.valueOf=function(){return this.toMillis()},s.toMillis=function(){return this.isValid?this.ts:NaN},s.toSeconds=function(){return this.isValid?this.ts/1e3:NaN},s.toJSON=function(){return this.toISO()},s.toBSON=function(){return this.toJSDate()},s.toObject=function(e){if(e===void 0&&(e={}),!this.isValid)return{};var o=d({},this.c);return e.includeConfig&&(o.outputCalendar=this.outputCalendar,o.numberingSystem=this.loc.numberingSystem,o.locale=this.loc.locale),o},s.toJSDate=function(){return new Date(this.isValid?this.ts:NaN)},s.diff=function(e,o,u){if(o===void 0&&(o="milliseconds"),u===void 0&&(u={}),!this.isValid||!e.isValid)return Ze.invalid("created by diffing an invalid DateTime");var m=d({locale:this.locale,numberingSystem:this.numberingSystem},u),h=te(o).map(Ze.normalizeUnit),g=e.valueOf()>this.valueOf(),T=g?this:e,N=g?e:this,D=Zl(T,N,h,m);return g?D.negate():D},s.diffNow=function(e,o){return e===void 0&&(e="milliseconds"),o===void 0&&(o={}),this.diff(r.now(),e,o)},s.until=function(e){return this.isValid?nr.fromDateTimes(this,e):this},s.hasSame=function(e,o){if(!this.isValid)return!1;var u=e.valueOf(),m=this.setZone(e.zone,{keepLocalTime:!0});return m.startOf(o)<=u&&u<=m.endOf(o)},s.equals=function(e){return this.isValid&&e.isValid&&this.valueOf()===e.valueOf()&&this.zone.equals(e.zone)&&this.loc.equals(e.loc)},s.toRelative=function(e){if(e===void 0&&(e={}),!this.isValid)return null;var o=e.base||r.fromObject({},{zone:this.zone}),u=e.padding?this<o?-e.padding:e.padding:0,m=["years","months","days","hours","minutes","seconds"],h=e.unit;return Array.isArray(e.unit)&&(m=e.unit,h=void 0),lo(o,this.plus(u),d({},e,{numeric:"always",units:m,unit:h}))},s.toRelativeCalendar=function(e){return e===void 0&&(e={}),this.isValid?lo(e.base||r.fromObject({},{zone:this.zone}),this,d({},e,{numeric:"auto",units:["years","months","days"],calendary:!0})):null},r.min=function(){for(var e=arguments.length,o=new Array(e),u=0;u<e;u++)o[u]=arguments[u];if(!o.every(r.isDateTime))throw new ae("min requires all arguments be DateTimes");return U(o,function(m){return m.valueOf()},Math.min)},r.max=function(){for(var e=arguments.length,o=new Array(e),u=0;u<e;u++)o[u]=arguments[u];if(!o.every(r.isDateTime))throw new ae("max requires all arguments be DateTimes");return U(o,function(m){return m.valueOf()},Math.max)},r.fromFormatExplain=function(e,o,u){u===void 0&&(u={});var m=u,h=m.locale,g=h===void 0?null:h,T=m.numberingSystem,N=T===void 0?null:T,D=Ae.fromOpts({locale:g,numberingSystem:N,defaultToEN:!0});return ji(D,e,o)},r.fromStringExplain=function(e,o,u){return u===void 0&&(u={}),r.fromFormatExplain(e,o,u)},l(r,[{key:"isValid",get:function(){return this.invalid===null}},{key:"invalidReason",get:function(){return this.invalid?this.invalid.reason:null}},{key:"invalidExplanation",get:function(){return this.invalid?this.invalid.explanation:null}},{key:"locale",get:function(){return this.isValid?this.loc.locale:null}},{key:"numberingSystem",get:function(){return this.isValid?this.loc.numberingSystem:null}},{key:"outputCalendar",get:function(){return this.isValid?this.loc.outputCalendar:null}},{key:"zone",get:function(){return this._zone}},{key:"zoneName",get:function(){return this.isValid?this.zone.name:null}},{key:"year",get:function(){return this.isValid?this.c.year:NaN}},{key:"quarter",get:function(){return this.isValid?Math.ceil(this.c.month/3):NaN}},{key:"month",get:function(){return this.isValid?this.c.month:NaN}},{key:"day",get:function(){return this.isValid?this.c.day:NaN}},{key:"hour",get:function(){return this.isValid?this.c.hour:NaN}},{key:"minute",get:function(){return this.isValid?this.c.minute:NaN}},{key:"second",get:function(){return this.isValid?this.c.second:NaN}},{key:"millisecond",get:function(){return this.isValid?this.c.millisecond:NaN}},{key:"weekYear",get:function(){return this.isValid?Qr(this).weekYear:NaN}},{key:"weekNumber",get:function(){return this.isValid?Qr(this).weekNumber:NaN}},{key:"weekday",get:function(){return this.isValid?Qr(this).weekday:NaN}},{key:"ordinal",get:function(){return this.isValid?Jr(this.c).ordinal:NaN}},{key:"monthShort",get:function(){return this.isValid?rr.months("short",{locObj:this.loc})[this.month-1]:null}},{key:"monthLong",get:function(){return this.isValid?rr.months("long",{locObj:this.loc})[this.month-1]:null}},{key:"weekdayShort",get:function(){return this.isValid?rr.weekdays("short",{locObj:this.loc})[this.weekday-1]:null}},{key:"weekdayLong",get:function(){return this.isValid?rr.weekdays("long",{locObj:this.loc})[this.weekday-1]:null}},{key:"offset",get:function(){return this.isValid?+this.o:NaN}},{key:"offsetNameShort",get:function(){return this.isValid?this.zone.offsetName(this.ts,{format:"short",locale:this.locale}):null}},{key:"offsetNameLong",get:function(){return this.isValid?this.zone.offsetName(this.ts,{format:"long",locale:this.locale}):null}},{key:"isOffsetFixed",get:function(){return this.isValid?this.zone.isUniversal:null}},{key:"isInDST",get:function(){return this.isOffsetFixed?!1:this.offset>this.set({month:1}).offset||this.offset>this.set({month:5}).offset}},{key:"isInLeapYear",get:function(){return mt(this.year)}},{key:"daysInMonth",get:function(){return xt(this.year,this.month)}},{key:"daysInYear",get:function(){return this.isValid?De(this.year):NaN}},{key:"weeksInWeekYear",get:function(){return this.isValid?nn(this.weekYear):NaN}}],[{key:"DATE_SHORT",get:function(){return me}},{key:"DATE_MED",get:function(){return $e}},{key:"DATE_MED_WITH_WEEKDAY",get:function(){return Wt}},{key:"DATE_FULL",get:function(){return jt}},{key:"DATE_HUGE",get:function(){return ct}},{key:"TIME_SIMPLE",get:function(){return mn}},{key:"TIME_WITH_SECONDS",get:function(){return Zt}},{key:"TIME_WITH_SHORT_OFFSET",get:function(){return hn}},{key:"TIME_WITH_LONG_OFFSET",get:function(){return en}},{key:"TIME_24_SIMPLE",get:function(){return Rt}},{key:"TIME_24_WITH_SECONDS",get:function(){return Gt}},{key:"TIME_24_WITH_SHORT_OFFSET",get:function(){return tn}},{key:"TIME_24_WITH_LONG_OFFSET",get:function(){return Ft}},{key:"DATETIME_SHORT",get:function(){return vn}},{key:"DATETIME_SHORT_WITH_SECONDS",get:function(){return yn}},{key:"DATETIME_MED",get:function(){return gn}},{key:"DATETIME_MED_WITH_SECONDS",get:function(){return pn}},{key:"DATETIME_MED_WITH_WEEKDAY",get:function(){return Un}},{key:"DATETIME_FULL",get:function(){return _n}},{key:"DATETIME_FULL_WITH_SECONDS",get:function(){return bn}},{key:"DATETIME_HUGE",get:function(){return Tt}},{key:"DATETIME_HUGE_WITH_SECONDS",get:function(){return Ye}}]),r}();function or(r){if(Re.isDateTime(r))return r;if(r&&r.valueOf&&V(r.valueOf()))return Re.fromJSDate(r);if(r&&typeof r=="object")return Re.fromObject(r);throw new ae("Unknown datetime argument: "+r+", of type "+typeof r)}var mu="2.3.0";n.DateTime=Re,n.Duration=Ze,n.FixedOffsetZone=Xe,n.IANAZone=Ue,n.Info=rr,n.Interval=nr,n.InvalidZone=un,n.Settings=re,n.SystemZone=on,n.VERSION=mu,n.Zone=ne});function xr(t){return Ut.IANAZone.isValidZone(t)}function Za(t,n){const a=Ut.DateTime.fromJSDate(t).toLocaleString(Ut.DateTime.TIME_SIMPLE).replace(/\./g,"");try{const l=Ut.DateTime.fromJSDate(t,{zone:n});return!l.isValid&&(l.invalidReason==="unsupported zone"||!n)?a:l.toLocaleString(Ut.DateTime.TIME_SIMPLE).replace(/\./g,"")}catch(l){return a}}function Ga(t){if(!t||!xr(t))return 0;const n=Ut.DateTime.now(),a=Ut.DateTime.now().setZone(t,{keepLocalTime:!0});return n.diff(a).milliseconds}function Ps(t){return!t||!xr(t)?Ut.DateTime.now().offsetNameShort:Ut.DateTime.now().setZone(t).offsetNameShort}function Ba(t,n){return t.getTime()+Ga(n)}const Pr=10;function zs(t,n){t.forEach(a=>{n[a.id]={overlaps:t.filter(l=>a.id!==l.id&&l.when.start_time<a.when.end_time&&l.when.end_time>a.when.start_time),offset:0,leftNeighbour:null}})}function Hs(t,n){const a=n[t.id].overlaps;if(a.length===0){t.relativeOverlapWidth=1,t.relativeOverlapOffset=0;return}const l=n[t.id].leftNeighbour;!!l&&a.filter(d=>t.when.end_time-t.when.start_time>=d.when.end_time-d.when.start_time).length===0?t.relativeOverlapWidth=1-l.relativeOverlapWidth:t.relativeOverlapWidth=Vs(t,a),t.relativeOverlapOffset=n[t.id].offset,t.relativeOverlapWidth=n[t.id].widthOverride?n[t.id].widthOverride:t.relativeOverlapWidth,a.forEach(d=>{!l||d.when.start_time<l.when.end_time?(n[d.id].offset+=t.relativeOverlapWidth,n[d.id].leftNeighbour=t):n[d.id].widthOverride=t.relativeOverlapOffset})}function Vs(t,n){const a=Math.ceil((t.when.end_time-t.when.start_time)/(60*Pr)),l=new Array(a).fill(1);return n.forEach(d=>{let c=0;if(t.when.start_time<=d.when.start_time){const v=Math.ceil((d.when.start_time-t.when.start_time)/(60*Pr));c=Math.min(Math.max(0,v),l.length-1)}let f=l.length-1;if(t.when.end_time>=d.when.end_time){const v=Math.ceil(Math.abs(d.when.end_time-t.when.end_time)/(60*Pr));f=Math.max(c,l.length-v-1)}for(let v=c;v<=f;v++)l[v]++}),1/Math.max(...l)}function Ya(t){return"start_time"in t.when&&"end_time"in t.when?(new Date(t.when.start_time*1e3).getTime()-new Date(new Date(t.when.start_time*1e3).setHours(0,0,0,0)).getTime())/6e4:0}function Ja(t){if(!("start_time"in t.when&&"end_time"in t.when))return 0;let n=new Date(t.when.start_time*1e3).getTime()-new Date(new Date(t.when.start_time*1e3).setHours(0,0,0,0)).getTime();n=n/6e4;let a=new Date(t.when.end_time*1e3).getTime()-new Date(t.when.start_time*1e3).getTime();return a=a/6e4,n+a}var hr=ja(function(t,n){/*! @license DOMPurify 2.3.5 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/2.3.5/LICENSE */(function(a,l){t.exports=l()})(Fs,function(){function a(R){if(Array.isArray(R)){for(var P=0,te=Array(R.length);P<R.length;P++)te[P]=R[P];return te}else return Array.from(R)}var l=Object.hasOwnProperty,d=Object.setPrototypeOf,c=Object.isFrozen,f=Object.getPrototypeOf,v=Object.getOwnPropertyDescriptor,p=Object.freeze,w=Object.seal,O=Object.create,b=typeof Reflect!="undefined"&&Reflect,k=b.apply,L=b.construct;k||(k=function(P,te,U){return P.apply(te,U)}),p||(p=function(P){return P}),w||(w=function(P){return P}),L||(L=function(P,te){return new(Function.prototype.bind.apply(P,[null].concat(a(te))))});var Q=E(Array.prototype.forEach),H=E(Array.prototype.pop),C=E(Array.prototype.push),F=E(String.prototype.toLowerCase),fe=E(String.prototype.match),pe=E(String.prototype.replace),q=E(String.prototype.indexOf),oe=E(String.prototype.trim),ae=E(RegExp.prototype.test),Oe=ee(TypeError);function E(R){return function(P){for(var te=arguments.length,U=Array(te>1?te-1:0),X=1;X<te;X++)U[X-1]=arguments[X];return k(R,P,U)}}function ee(R){return function(){for(var P=arguments.length,te=Array(P),U=0;U<P;U++)te[U]=arguments[U];return L(R,te)}}function A(R,P){d&&d(R,null);for(var te=P.length;te--;){var U=P[te];if(typeof U=="string"){var X=F(U);X!==U&&(c(P)||(P[te]=X),U=X)}R[U]=!0}return R}function me(R){var P=O(null),te=void 0;for(te in R)k(l,R,[te])&&(P[te]=R[te]);return P}function $e(R,P){for(;R!==null;){var te=v(R,P);if(te){if(te.get)return E(te.get);if(typeof te.value=="function")return E(te.value)}R=f(R)}function U(X){return console.warn("fallback value for",X),null}return U}var Wt=p(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),jt=p(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),ct=p(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),mn=p(["animate","color-profile","cursor","discard","fedropshadow","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),Zt=p(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover"]),hn=p(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),en=p(["#text"]),Rt=p(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),Gt=p(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),tn=p(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),Ft=p(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),vn=w(/\{\{[\s\S]*|[\s\S]*\}\}/gm),yn=w(/<%[\s\S]*|[\s\S]*%>/gm),gn=w(/^data-[\-\w.\u00B7-\uFFFF]/),pn=w(/^aria-[\-\w]+$/),Un=w(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),_n=w(/^(?:\w+script|data):/i),bn=w(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),Tt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(R){return typeof R}:function(R){return R&&typeof Symbol=="function"&&R.constructor===Symbol&&R!==Symbol.prototype?"symbol":typeof R};function Ye(R){if(Array.isArray(R)){for(var P=0,te=Array(R.length);P<R.length;P++)te[P]=R[P];return te}else return Array.from(R)}var ie=function(){return typeof window=="undefined"?null:window},V=function(P,te){if((typeof P=="undefined"?"undefined":Tt(P))!=="object"||typeof P.createPolicy!="function")return null;var U=null,X="data-tt-policy-suffix";te.currentScript&&te.currentScript.hasAttribute(X)&&(U=te.currentScript.getAttribute(X));var he="dompurify"+(U?"#"+U:"");try{return P.createPolicy(he,{createHTML:function(Fe){return Fe}})}catch(ge){return console.warn("TrustedTypes policy "+he+" could not be created."),null}};function St(){var R=arguments.length>0&&arguments[0]!==void 0?arguments[0]:ie(),P=function(_){return St(_)};if(P.version="2.3.5",P.removed=[],!R||!R.document||R.document.nodeType!==9)return P.isSupported=!1,P;var te=R.document,U=R.document,X=R.DocumentFragment,he=R.HTMLTemplateElement,ge=R.Node,Fe=R.Element,Te=R.NodeFilter,_e=R.NamedNodeMap,ft=_e===void 0?R.NamedNodeMap||R.MozNamedAttrMap:_e,wn=R.HTMLFormElement,Ot=R.DOMParser,mt=R.trustedTypes,De=Fe.prototype,xt=$e(De,"cloneNode"),Bt=$e(De,"nextSibling"),nn=$e(De,"childNodes"),et=$e(De,"parentNode");if(typeof he=="function"){var ot=U.createElement("template");ot.content&&ot.content.ownerDocument&&(U=ot.content.ownerDocument)}var je=V(mt,te),ht=je?je.createHTML(""):"",vt=U,xe=vt.implementation,yt=vt.createNodeIterator,kt=vt.createDocumentFragment,Tn=vt.getElementsByTagName,Ie=te.importNode,Et={};try{Et=me(U).documentMode?U.documentMode:{}}catch(W){}var Je={};P.isSupported=typeof et=="function"&&xe&&typeof xe.createHTMLDocument!="undefined"&&Et!==9;var Yt=vn,Jt=yn,jn=gn,Ve=pn,tt=_n,rn=bn,Sn=Un,ke=null,an=A({},[].concat(Ye(Wt),Ye(jt),Ye(ct),Ye(Zt),Ye(en))),Ne=null,Pt=A({},[].concat(Ye(Rt),Ye(Gt),Ye(tn),Ye(Ft))),se=Object.seal(Object.create(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),Me=null,On=null,kn=!0,En=!0,Ke=!1,Ce=!1,ne=!1,qe=!1,on=!1,Qe=!1,Dt=!1,sn=!1,Dn=!0,In=!0,qt=!1,st={},Ue=null,ln=A({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]),Xe=null,un=A({},["audio","video","img","source","image","track"]),nt=null,Nn=A({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),dn="http://www.w3.org/1998/Math/MathML",y="http://www.w3.org/2000/svg",S="http://www.w3.org/1999/xhtml",Y=S,le=!1,re=void 0,rt=["application/xhtml+xml","text/html"],gt="text/html",pt=void 0,zt=null,Qt=U.createElement("form"),at=function(_){return _ instanceof RegExp||_ instanceof Function},It=function(_){zt&&zt===_||((!_||(typeof _=="undefined"?"undefined":Tt(_))!=="object")&&(_={}),_=me(_),ke="ALLOWED_TAGS"in _?A({},_.ALLOWED_TAGS):an,Ne="ALLOWED_ATTR"in _?A({},_.ALLOWED_ATTR):Pt,nt="ADD_URI_SAFE_ATTR"in _?A(me(Nn),_.ADD_URI_SAFE_ATTR):Nn,Xe="ADD_DATA_URI_TAGS"in _?A(me(un),_.ADD_DATA_URI_TAGS):un,Ue="FORBID_CONTENTS"in _?A({},_.FORBID_CONTENTS):ln,Me="FORBID_TAGS"in _?A({},_.FORBID_TAGS):{},On="FORBID_ATTR"in _?A({},_.FORBID_ATTR):{},st="USE_PROFILES"in _?_.USE_PROFILES:!1,kn=_.ALLOW_ARIA_ATTR!==!1,En=_.ALLOW_DATA_ATTR!==!1,Ke=_.ALLOW_UNKNOWN_PROTOCOLS||!1,Ce=_.SAFE_FOR_TEMPLATES||!1,ne=_.WHOLE_DOCUMENT||!1,Qe=_.RETURN_DOM||!1,Dt=_.RETURN_DOM_FRAGMENT||!1,sn=_.RETURN_TRUSTED_TYPE||!1,on=_.FORCE_BODY||!1,Dn=_.SANITIZE_DOM!==!1,In=_.KEEP_CONTENT!==!1,qt=_.IN_PLACE||!1,Sn=_.ALLOWED_URI_REGEXP||Sn,Y=_.NAMESPACE||S,_.CUSTOM_ELEMENT_HANDLING&&at(_.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(se.tagNameCheck=_.CUSTOM_ELEMENT_HANDLING.tagNameCheck),_.CUSTOM_ELEMENT_HANDLING&&at(_.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(se.attributeNameCheck=_.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),_.CUSTOM_ELEMENT_HANDLING&&typeof _.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(se.allowCustomizedBuiltInElements=_.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),re=rt.indexOf(_.PARSER_MEDIA_TYPE)===-1?re=gt:re=_.PARSER_MEDIA_TYPE,pt=re==="application/xhtml+xml"?function(M){return M}:F,Ce&&(En=!1),Dt&&(Qe=!0),st&&(ke=A({},[].concat(Ye(en))),Ne=[],st.html===!0&&(A(ke,Wt),A(Ne,Rt)),st.svg===!0&&(A(ke,jt),A(Ne,Gt),A(Ne,Ft)),st.svgFilters===!0&&(A(ke,ct),A(Ne,Gt),A(Ne,Ft)),st.mathMl===!0&&(A(ke,Zt),A(Ne,tn),A(Ne,Ft))),_.ADD_TAGS&&(ke===an&&(ke=me(ke)),A(ke,_.ADD_TAGS)),_.ADD_ATTR&&(Ne===Pt&&(Ne=me(Ne)),A(Ne,_.ADD_ATTR)),_.ADD_URI_SAFE_ATTR&&A(nt,_.ADD_URI_SAFE_ATTR),_.FORBID_CONTENTS&&(Ue===ln&&(Ue=me(Ue)),A(Ue,_.FORBID_CONTENTS)),In&&(ke["#text"]=!0),ne&&A(ke,["html","head","body"]),ke.table&&(A(ke,["tbody"]),delete Me.tbody),p&&p(_),zt=_)},yr=A({},["mi","mo","mn","ms","mtext"]),Zn=A({},["foreignobject","desc","title","annotation-xml"]),Gn=A({},jt);A(Gn,ct),A(Gn,mn);var Xt=A({},Zt);A(Xt,hn);var Vr=function(_){var M=et(_);(!M||!M.tagName)&&(M={namespaceURI:S,tagName:"template"});var x=F(_.tagName),ve=F(M.tagName);if(_.namespaceURI===y)return M.namespaceURI===S?x==="svg":M.namespaceURI===dn?x==="svg"&&(ve==="annotation-xml"||yr[ve]):Boolean(Gn[x]);if(_.namespaceURI===dn)return M.namespaceURI===S?x==="math":M.namespaceURI===y?x==="math"&&Zn[ve]:Boolean(Xt[x]);if(_.namespaceURI===S){if(M.namespaceURI===y&&!Zn[ve]||M.namespaceURI===dn&&!yr[ve])return!1;var Le=A({},["title","style","font","a","script"]);return!Xt[x]&&(Le[x]||!Gn[x])}return!1},Nt=function(_){C(P.removed,{element:_});try{_.parentNode.removeChild(_)}catch(M){try{_.outerHTML=ht}catch(x){_.remove()}}},gr=function(_,M){try{C(P.removed,{attribute:M.getAttributeNode(_),from:M})}catch(x){C(P.removed,{attribute:null,from:M})}if(M.removeAttribute(_),_==="is"&&!Ne[_])if(Qe||Dt)try{Nt(M)}catch(x){}else try{M.setAttribute(_,"")}catch(x){}},pr=function(_){var M=void 0,x=void 0;if(on)_="<remove></remove>"+_;else{var ve=fe(_,/^[\r\n\t ]+/);x=ve&&ve[0]}re==="application/xhtml+xml"&&(_='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+_+"</body></html>");var Le=je?je.createHTML(_):_;if(Y===S)try{M=new Ot().parseFromString(Le,re)}catch(Pe){}if(!M||!M.documentElement){M=xe.createDocument(Y,"template",null);try{M.documentElement.innerHTML=le?"":Le}catch(Pe){}}var We=M.body||M.documentElement;return _&&x&&We.insertBefore(U.createTextNode(x),We.childNodes[0]||null),Y===S?Tn.call(M,ne?"html":"body")[0]:ne?M.documentElement:We},_r=function(_){return yt.call(_.ownerDocument||_,_,Te.SHOW_ELEMENT|Te.SHOW_COMMENT|Te.SHOW_TEXT,null,!1)},Bn=function(_){return _ instanceof wn&&(typeof _.nodeName!="string"||typeof _.textContent!="string"||typeof _.removeChild!="function"||!(_.attributes instanceof ft)||typeof _.removeAttribute!="function"||typeof _.setAttribute!="function"||typeof _.namespaceURI!="string"||typeof _.insertBefore!="function")},Mn=function(_){return(typeof ge=="undefined"?"undefined":Tt(ge))==="object"?_ instanceof ge:_&&(typeof _=="undefined"?"undefined":Tt(_))==="object"&&typeof _.nodeType=="number"&&typeof _.nodeName=="string"},Mt=function(_,M,x){!Je[_]||Q(Je[_],function(ve){ve.call(P,M,x,zt)})},br=function(_){var M=void 0;if(Mt("beforeSanitizeElements",_,null),Bn(_)||fe(_.nodeName,/[\u0080-\uFFFF]/))return Nt(_),!0;var x=pt(_.nodeName);if(Mt("uponSanitizeElement",_,{tagName:x,allowedTags:ke}),!Mn(_.firstElementChild)&&(!Mn(_.content)||!Mn(_.content.firstElementChild))&&ae(/<[/\w]/g,_.innerHTML)&&ae(/<[/\w]/g,_.textContent)||x==="select"&&ae(/<template/i,_.innerHTML))return Nt(_),!0;if(!ke[x]||Me[x]){if(In&&!Ue[x]){var ve=et(_)||_.parentNode,Le=nn(_)||_.childNodes;if(Le&&ve)for(var We=Le.length,Pe=We-1;Pe>=0;--Pe)ve.insertBefore(xt(Le[Pe],!0),Bt(_))}return!Me[x]&&Ae(x)&&(se.tagNameCheck instanceof RegExp&&ae(se.tagNameCheck,x)||se.tagNameCheck instanceof Function&&se.tagNameCheck(x))?!1:(Nt(_),!0)}return _ instanceof Fe&&!Vr(_)||(x==="noscript"||x==="noembed")&&ae(/<\/no(script|embed)/i,_.innerHTML)?(Nt(_),!0):(Ce&&_.nodeType===3&&(M=_.textContent,M=pe(M,Yt," "),M=pe(M,Jt," "),_.textContent!==M&&(C(P.removed,{element:_.cloneNode()}),_.textContent=M)),Mt("afterSanitizeElements",_,null),!1)},wr=function(_,M,x){if(Dn&&(M==="id"||M==="name")&&(x in U||x in Qt))return!1;if(!(En&&!On[M]&&ae(jn,M))){if(!(kn&&ae(Ve,M))){if(!Ne[M]||On[M]){if(!(Ae(_)&&(se.tagNameCheck instanceof RegExp&&ae(se.tagNameCheck,_)||se.tagNameCheck instanceof Function&&se.tagNameCheck(_))&&(se.attributeNameCheck instanceof RegExp&&ae(se.attributeNameCheck,M)||se.attributeNameCheck instanceof Function&&se.attributeNameCheck(M))||M==="is"&&se.allowCustomizedBuiltInElements&&(se.tagNameCheck instanceof RegExp&&ae(se.tagNameCheck,x)||se.tagNameCheck instanceof Function&&se.tagNameCheck(x))))return!1}else if(!nt[M]){if(!ae(Sn,pe(x,rn,""))){if(!((M==="src"||M==="xlink:href"||M==="href")&&_!=="script"&&q(x,"data:")===0&&Xe[_])){if(!(Ke&&!ae(tt,pe(x,rn,"")))){if(x)return!1}}}}}}return!0},Ae=function(_){return _.indexOf("-")>0},Kt=function(_){var M=void 0,x=void 0,ve=void 0,Le=void 0;Mt("beforeSanitizeAttributes",_,null);var We=_.attributes;if(!!We){var Pe={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:Ne};for(Le=We.length;Le--;){M=We[Le];var Yn=M,it=Yn.name,Tr=Yn.namespaceURI;if(x=oe(M.value),ve=pt(it),Pe.attrName=ve,Pe.attrValue=x,Pe.keepAttr=!0,Pe.forceKeepAttr=void 0,Mt("uponSanitizeAttribute",_,Pe),x=Pe.attrValue,!Pe.forceKeepAttr&&(gr(it,_),!!Pe.keepAttr)){if(ae(/\/>/i,x)){gr(it,_);continue}Ce&&(x=pe(x,Yt," "),x=pe(x,Jt," "));var Ur=pt(_.nodeName);if(!!wr(Ur,ve,x))try{Tr?_.setAttributeNS(Tr,it,x):_.setAttribute(it,x),H(P.removed)}catch(Wr){}}}Mt("afterSanitizeAttributes",_,null)}},$t=function W(_){var M=void 0,x=_r(_);for(Mt("beforeSanitizeShadowDOM",_,null);M=x.nextNode();)Mt("uponSanitizeShadowNode",M,null),!br(M)&&(M.content instanceof X&&W(M.content),Kt(M));Mt("afterSanitizeShadowDOM",_,null)};return P.sanitize=function(W,_){var M=void 0,x=void 0,ve=void 0,Le=void 0,We=void 0;if(le=!W,le&&(W="<!-->"),typeof W!="string"&&!Mn(W)){if(typeof W.toString!="function")throw Oe("toString is not a function");if(W=W.toString(),typeof W!="string")throw Oe("dirty is not a string, aborting")}if(!P.isSupported){if(Tt(R.toStaticHTML)==="object"||typeof R.toStaticHTML=="function"){if(typeof W=="string")return R.toStaticHTML(W);if(Mn(W))return R.toStaticHTML(W.outerHTML)}return W}if(qe||It(_),P.removed=[],typeof W=="string"&&(qt=!1),qt){if(W.nodeName){var Pe=pt(W.nodeName);if(!ke[Pe]||Me[Pe])throw Oe("root node is forbidden and cannot be sanitized in-place")}}else if(W instanceof ge)M=pr("<!---->"),x=M.ownerDocument.importNode(W,!0),x.nodeType===1&&x.nodeName==="BODY"||x.nodeName==="HTML"?M=x:M.appendChild(x);else{if(!Qe&&!Ce&&!ne&&W.indexOf("<")===-1)return je&&sn?je.createHTML(W):W;if(M=pr(W),!M)return Qe?null:sn?ht:""}M&&on&&Nt(M.firstChild);for(var Yn=_r(qt?W:M);ve=Yn.nextNode();)ve.nodeType===3&&ve===Le||br(ve)||(ve.content instanceof X&&$t(ve.content),Kt(ve),Le=ve);if(Le=null,qt)return W;if(Qe){if(Dt)for(We=kt.call(M.ownerDocument);M.firstChild;)We.appendChild(M.firstChild);else We=M;return Ne.shadowroot&&(We=Ie.call(te,We,!0)),We}var it=ne?M.outerHTML:M.innerHTML;return Ce&&(it=pe(it,Yt," "),it=pe(it,Jt," ")),je&&sn?je.createHTML(it):it},P.setConfig=function(W){It(W),qe=!0},P.clearConfig=function(){zt=null,qe=!1},P.isValidAttribute=function(W,_,M){zt||It({});var x=pt(W),ve=pt(_);return wr(x,ve,M)},P.addHook=function(W,_){typeof _=="function"&&(Je[W]=Je[W]||[],C(Je[W],_))},P.removeHook=function(W){Je[W]&&H(Je[W])},P.removeHooks=function(W){Je[W]&&(Je[W]=[])},P.removeAllHooks=function(){Je={}},P}var Wn=St();return Wn})}),zr=new Date,Hr=new Date;function qa(t,n,a,l){function d(c){return t(c=arguments.length===0?new Date:new Date(+c)),c}return d.floor=function(c){return t(c=new Date(+c)),c},d.ceil=function(c){return t(c=new Date(c-1)),n(c,1),t(c),c},d.round=function(c){var f=d(c),v=d.ceil(c);return c-f<v-c?f:v},d.offset=function(c,f){return n(c=new Date(+c),f==null?1:Math.floor(f)),c},d.range=function(c,f,v){var p=[],w;if(c=d.ceil(c),v=v==null?1:Math.floor(v),!(c<f)||!(v>0))return p;do p.push(w=new Date(+c)),n(c,v),t(c);while(w<c&&c<f);return p},d.filter=function(c){return qa(function(f){if(f>=f)for(;t(f),!c(f);)f.setTime(f-1)},function(f,v){if(f>=f)if(v<0)for(;++v<=0;)for(;n(f,-1),!c(f););else for(;--v>=0;)for(;n(f,1),!c(f););})},a&&(d.count=function(c,f){return zr.setTime(+c),Hr.setTime(+f),t(zr),t(Hr),Math.floor(a(zr,Hr))},d.every=function(c){return c=Math.floor(c),!isFinite(c)||!(c>0)?null:c>1?d.filter(l?function(f){return l(f)%c==0}:function(f){return d.count(0,f)%c==0}):d}),d}const Qa=1e3*60,Us=Qa*60*24;var vr=qa(t=>t.setHours(0,0,0,0),(t,n)=>t.setDate(t.getDate()+n),(t,n)=>(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*Qa)/Us,t=>t.getDate()-1);function Xa(t,n,a){const l=t.slice();return l[117]=n[a],l}function Ka(t,n,a){const l=t.slice();l[120]=n[a];const d=l[120][0];l[121]=d;const c=l[120][1];return l[122]=c,l}function $a(t,n,a){const l=t.slice();return l[125]=n[a],l}function ei(t,n,a){const l=t.slice();return l[125]=n[a],l}function ti(t,n,a){const l=t.slice();return l[117]=n[a],l}function ni(t,n,a){const l=t.slice();l[120]=n[a];const d=l[120][0];l[121]=d;const c=l[120][1];return l[122]=c,l}function ri(t){let n;return{c(){n=J("link"),z(n,"rel","stylesheet"),z(n,"href",t[12])},m(a,l){G(a,n,l)},p(a,l){l[0]&4096&&z(n,"href",a[12])},d(a){a&&B(n)}}}function Ws(t){return{c:be,m:be,p:be,d:be}}function js(t){let n,a,l,d,c,f,v,p,w,O,b,k,L,Q,H,C,F=t[1].header_type!=="none"&&ai(t),fe=!t[1].hide_all_day_events&&li(t),pe=t[21],q=[];for(let ee=0;ee<pe.length;ee+=1)q[ee]=vi(ei(t,pe,ee));let oe=(t[116].length||!t[1].show_no_events_message&&!t[24])&&yi(t);function ae(ee,A){if(ee[116].length)return qs;if(ee[1].show_no_events_message&&!ee[24]&&ee[10][ee[4]])return Js}let Oe=ae(t),E=Oe&&Oe(t);return{c(){F&&F.c(),n=we(),a=J("div"),fe&&fe.c(),l=we(),d=J("div"),c=J("div"),f=J("span"),v=Se(t[13]),p=we(),w=J("div");for(let ee=0;ee<q.length;ee+=1)q[ee].c();O=we(),b=J("ul"),oe&&oe.c(),k=we(),E&&E.c(),z(a,"class","all-day"),z(c,"class","offset"),z(w,"class","ticks"),z(b,"class",L="events "+t[1].theme),Be(b,"transform","translate("+t[23].x+"px,0px)"),cr(()=>t[94].call(b)),Ee(b,"diff-by-calendar",t[1].color_by==="calendar"),Ee(b,"diff-by-event",t[1].color_by==="event"),Ee(b,"overflowing",t[5]),Ee(b,"scrolling",t[17]),z(d,"class","timespan"),Ee(d,"condensed",t[9]),Ee(d,"hide-ticks",t[1].hide_ticks)},m(ee,A){F&&F.m(ee,A),G(ee,n,A),G(ee,a,A),fe&&fe.m(a,null),G(ee,l,A),G(ee,d,A),j(d,c),j(c,f),j(f,v),j(d,p),j(d,w);for(let me=0;me<q.length;me+=1)q[me].m(w,null);j(d,O),j(d,b),oe&&oe.m(b,null),j(b,k),E&&E.m(b,null),t[93](b),Q=bo(b,t[94].bind(b)),H||(C=[ze(b,"wheel",function(){lr(t[1].prevent_zoom||t[9]?Mi:t[28])&&(t[1].prevent_zoom||t[9]?Mi:t[28]).apply(this,arguments)}),ze(b,"pointerdown",t[33]),ze(b,"pointermove",t[34]),ze(b,"pointerup",t[35]),ze(b,"mouseleave",t[35]),ze(d,"selectstart",t[95])],H=!0)},p(ee,A){if(t=ee,t[1].header_type!=="none"?F?F.p(t,A):(F=ai(t),F.c(),F.m(n.parentNode,n)):F&&(F.d(1),F=null),t[1].hide_all_day_events?fe&&(fe.d(1),fe=null):fe?fe.p(t,A):(fe=li(t),fe.c(),fe.m(a,null)),A[0]&8192&&He(v,t[13]),A[0]&2097152){pe=t[21];let me;for(me=0;me<pe.length;me+=1){const $e=ei(t,pe,me);q[me]?q[me].p($e,A):(q[me]=vi($e),q[me].c(),q[me].m(w,null))}for(;me<q.length;me+=1)q[me].d(1);q.length=pe.length}t[116].length||!t[1].show_no_events_message&&!t[24]?oe?oe.p(t,A):(oe=yi(t),oe.c(),oe.m(b,k)):oe&&(oe.d(1),oe=null),Oe===(Oe=ae(t))&&E?E.p(t,A):(E&&E.d(1),E=Oe&&Oe(t),E&&(E.c(),E.m(b,null))),A[0]&2&&L!==(L="events "+t[1].theme)&&z(b,"class",L),A[0]&8388608&&Be(b,"transform","translate("+t[23].x+"px,0px)"),A[0]&2&&Ee(b,"diff-by-calendar",t[1].color_by==="calendar"),A[0]&2&&Ee(b,"diff-by-event",t[1].color_by==="event"),A[0]&34&&Ee(b,"overflowing",t[5]),A[0]&131074&&Ee(b,"scrolling",t[17]),A[0]&512&&Ee(d,"condensed",t[9]),A[0]&2&&Ee(d,"hide-ticks",t[1].hide_ticks)},d(ee){F&&F.d(ee),ee&&B(n),ee&&B(a),fe&&fe.d(),ee&&B(l),ee&&B(d),xn(q,ee),oe&&oe.d(),E&&E.d(),t[93](null),Q(),H=!1,wt(C)}}}function ai(t){var fe,pe;let n,a,l,d,c,f=((fe=t[2])==null?void 0:fe.toLocaleString("default",{weekday:t[9]?"short":"long"}))+"",v,p,w,O=((pe=t[2])==null?void 0:pe.toLocaleString("default",{day:"numeric"}))+"",b,k,L,Q,H=t[1].header_type==="full"&&ii(t),C=t[1].allow_date_change&&oi(t),F=t[1].allow_date_change&&si(t);return{c(){n=J("header"),H&&H.c(),a=we(),l=J("div"),C&&C.c(),d=we(),c=J("h2"),v=Se(f),p=we(),w=J("span"),b=Se(O),k=we(),F&&F.c(),z(w,"class","date"),z(l,"class","day"),Ee(l,"allow_date_change",t[1].allow_date_change)},m(q,oe){G(q,n,oe),H&&H.m(n,null),j(n,a),j(n,l),C&&C.m(l,null),j(l,d),j(l,c),j(c,v),j(c,p),j(c,w),j(w,b),j(l,k),F&&F.m(l,null),L||(Q=[ze(n,"pointerdown",t[30]),ze(n,"pointermove",t[31]),ze(n,"pointerup",t[32]),ze(n,"mouseleave",t[32])],L=!0)},p(q,oe){var ae,Oe;q[1].header_type==="full"?H?H.p(q,oe):(H=ii(q),H.c(),H.m(n,a)):H&&(H.d(1),H=null),q[1].allow_date_change?C?C.p(q,oe):(C=oi(q),C.c(),C.m(l,d)):C&&(C.d(1),C=null),oe[0]&516&&f!==(f=((ae=q[2])==null?void 0:ae.toLocaleString("default",{weekday:q[9]?"short":"long"}))+"")&&He(v,f),oe[0]&4&&O!==(O=((Oe=q[2])==null?void 0:Oe.toLocaleString("default",{day:"numeric"}))+"")&&He(b,O),q[1].allow_date_change?F?F.p(q,oe):(F=si(q),F.c(),F.m(l,null)):F&&(F.d(1),F=null),oe[0]&2&&Ee(l,"allow_date_change",q[1].allow_date_change)},d(q){q&&B(n),H&&H.d(),C&&C.d(),F&&F.d(),L=!1,wt(Q)}}}function ii(t){var w,O;let n,a,l=((w=t[2])==null?void 0:w.toLocaleString("default",{month:"long"}))+"",d,c,f,v=((O=t[2])==null?void 0:O.toLocaleString("default",{year:"numeric"}))+"",p;return{c(){n=J("div"),a=J("h1"),d=Se(l),c=we(),f=J("span"),p=Se(v),z(f,"class","year"),z(n,"class","month")},m(b,k){G(b,n,k),j(n,a),j(a,d),j(a,c),j(a,f),j(f,p)},p(b,k){var L,Q;k[0]&4&&l!==(l=((L=b[2])==null?void 0:L.toLocaleString("default",{month:"long"}))+"")&&He(d,l),k[0]&4&&v!==(v=((Q=b[2])==null?void 0:Q.toLocaleString("default",{year:"numeric"}))+"")&&He(p,v)},d(b){b&&B(n)}}}function oi(t){let n,a,l,d,c;return{c(){n=J("button"),a=Pn("svg"),l=Pn("path"),z(l,"d","M0.371272 12.413L10.6278 22.4264C11.1225 22.9093 11.9245 22.9093 12.4191 22.4264L13.6153 21.2585C14.1092 20.7764 14.1101 19.995 13.6175 19.5117L5.48895 11.5385L13.6175 3.56541C14.1101 3.08216 14.1092 2.30079 13.6153 1.81868L12.4191 0.650778C11.9244 0.167839 11.1224 0.167839 10.6278 0.650778L0.371272 10.6641C-0.123338 11.1471 -0.123338 11.93 0.371272 12.413Z"),z(a,"width","14"),z(a,"height","23"),z(a,"viewBox","0 0 14 23"),z(a,"xmlns","http://www.w3.org/2000/svg"),n.disabled=t[14],z(n,"class","prev change-date")},m(f,v){G(f,n,v),j(n,a),j(a,l),d||(c=ze(n,"click",t[27]),d=!0)},p(f,v){v[0]&16384&&(n.disabled=f[14])},d(f){f&&B(n),d=!1,c()}}}function si(t){let n,a,l,d,c;return{c(){n=J("button"),a=Pn("svg"),l=Pn("path"),z(l,"d","M13.6153 10.6642L3.35873 0.650778C2.86407 0.16784 2.0621 0.16784 1.56749 0.650778L0.371229 1.81868C-0.12259 2.30079 -0.123539 3.08216 0.369118 3.56541L8.49763 11.5386L0.369118 19.5117C-0.123539 19.995 -0.12259 20.7764 0.371229 21.2585L1.56749 22.4264C2.06215 22.9093 2.86412 22.9093 3.35873 22.4264L13.6153 12.413C14.1099 11.9301 14.1099 11.1471 13.6153 10.6642Z"),z(a,"width","14"),z(a,"height","23"),z(a,"viewBox","0 0 14 23"),z(a,"xmlns","http://www.w3.org/2000/svg"),n.disabled=t[15],z(n,"class","next change-date")},m(f,v){G(f,n,v),j(n,a),j(a,l),d||(c=ze(n,"click",t[26]),d=!0)},p(f,v){v[0]&32768&&(n.disabled=f[15])},d(f){f&&B(n),d=!1,c()}}}function li(t){let n,a=Array.isArray(t[22]),l,d=a&&ui(t);return{c(){n=J("ul"),d&&d.c(),z(n,"class",l="events "+t[1].theme)},m(c,f){G(c,n,f),d&&d.m(n,null)},p(c,f){f[0]&4194304&&(a=Array.isArray(c[22])),a?d?d.p(c,f):(d=ui(c),d.c(),d.m(n,null)):d&&(d.d(1),d=null),f[0]&2&&l!==(l="events "+c[1].theme)&&z(n,"class",l)},d(c){c&&B(n),d&&d.d()}}}function ui(t){let n,a=t[22],l=[];for(let d=0;d<a.length;d+=1)l[d]=hi(ti(t,a,d));return{c(){for(let d=0;d<l.length;d+=1)l[d].c();n=zn()},m(d,c){for(let f=0;f<l.length;f+=1)l[f].m(d,c);G(d,n,c)},p(d,c){if(c[0]&541067274){a=d[22];let f;for(f=0;f<a.length;f+=1){const v=ti(d,a,f);l[f]?l[f].p(v,c):(l[f]=hi(v),l[f].c(),l[f].m(n.parentNode,n))}for(;f<l.length;f+=1)l[f].d(1);l.length=a.length}},d(d){xn(l,d),d&&B(n)}}}function Zs(t){let n;return{c(){n=J("h2"),n.textContent="Busy"},m(a,l){G(a,n,l)},p:be,d(a){a&&B(n)}}}function Gs(t){let n,a=t[117].title+"",l;return{c(){n=J("h2"),l=Se(a)},m(d,c){G(d,n,c),j(n,l)},p(d,c){c[0]&4194304&&a!==(a=d[117].title+"")&&He(l,a)},d(d){d&&B(n)}}}function di(t){var w,O;let n,a,l=hr.sanitize((w=t[117].description)!=null?w:"")+"",d,c=t[1].display_metadata&&t[117].metadata&&((O=Object.keys(t[117].metadata))==null?void 0:O.length),f,v=t[117].location&&ci(t),p=c&&fi(t);return{c(){v&&v.c(),n=we(),a=J("p"),d=we(),p&&p.c(),f=zn()},m(b,k){v&&v.m(b,k),G(b,n,k),G(b,a,k),a.innerHTML=l,G(b,d,k),p&&p.m(b,k),G(b,f,k)},p(b,k){var L,Q;b[117].location?v?v.p(b,k):(v=ci(b),v.c(),v.m(n.parentNode,n)):v&&(v.d(1),v=null),k[0]&4194304&&l!==(l=hr.sanitize((L=b[117].description)!=null?L:"")+"")&&(a.innerHTML=l),k[0]&4194306&&(c=b[1].display_metadata&&b[117].metadata&&((Q=Object.keys(b[117].metadata))==null?void 0:Q.length)),c?p?p.p(b,k):(p=fi(b),p.c(),p.m(f.parentNode,f)):p&&(p.d(1),p=null)},d(b){v&&v.d(b),b&&B(n),b&&B(a),b&&B(d),p&&p.d(b),b&&B(f)}}}function ci(t){let n;function a(c,f){return c[117].locationString?Ys:Bs}let l=a(t),d=l(t);return{c(){n=J("span"),d.c(),z(n,"class","location")},m(c,f){G(c,n,f),d.m(n,null)},p(c,f){l===(l=a(c))&&d?d.p(c,f):(d.d(1),d=l(c),d&&(d.c(),d.m(n,null)))},d(c){c&&B(n),d.d()}}}function Bs(t){let n=t[117].location+"",a;return{c(){a=Se(n)},m(l,d){G(l,a,d)},p(l,d){d[0]&4194304&&n!==(n=l[117].location+"")&&He(a,n)},d(l){l&&B(a)}}}function Ys(t){let n,a=t[117].locationString+"",l,d;return{c(){n=J("a"),l=Se(a),z(n,"href",d=t[117].location),z(n,"target","_blank")},m(c,f){G(c,n,f),j(n,l)},p(c,f){f[0]&4194304&&a!==(a=c[117].locationString+"")&&He(l,a),f[0]&4194304&&d!==(d=c[117].location)&&z(n,"href",d)},d(c){c&&B(n)}}}function fi(t){let n,a=Object.entries(t[117].metadata),l=[];for(let d=0;d<a.length;d+=1)l[d]=mi(ni(t,a,d));return{c(){n=J("ul");for(let d=0;d<l.length;d+=1)l[d].c();z(n,"class","metadata")},m(d,c){G(d,n,c);for(let f=0;f<l.length;f+=1)l[f].m(n,null)},p(d,c){if(c[0]&4194304){a=Object.entries(d[117].metadata);let f;for(f=0;f<a.length;f+=1){const v=ni(d,a,f);l[f]?l[f].p(v,c):(l[f]=mi(v),l[f].c(),l[f].m(n,null))}for(;f<l.length;f+=1)l[f].d(1);l.length=a.length}},d(d){d&&B(n),xn(l,d)}}}function mi(t){let n,a,l=t[121]+"",d,c,f,v=t[122]+"",p,w;return{c(){n=J("li"),a=J("strong"),d=Se(l),c=Se(":"),f=we(),p=Se(v),w=we()},m(O,b){G(O,n,b),j(n,a),j(a,d),j(a,c),j(n,f),j(n,p),j(n,w)},p(O,b){b[0]&4194304&&l!==(l=O[121]+"")&&He(d,l),b[0]&4194304&&v!==(v=O[122]+"")&&He(p,v)},d(O){O&&B(n)}}}function hi(t){let n,a,l,d,c,f,v,p;function w(H,C){return H[11]?Zs:Gs}let O=w(t),b=O(t),k=!t[11]&&di(t);function L(...H){return t[89](t[117],...H)}function Q(...H){return t[90](t[117],...H)}return{c(){var H;n=J("li"),a=J("div"),b.c(),l=we(),k&&k.c(),d=we(),z(a,"class","inner"),z(n,"tabindex","0"),z(n,"class",c="event status-"+t[117].attendeeStatus),z(n,"data-calendar-id",f=((H=t[3])==null?void 0:H.indexOf(t[117].calendar_id))+1)},m(H,C){G(H,n,C),j(n,a),b.m(a,null),j(a,l),k&&k.m(a,null),j(n,d),v||(p=[ze(n,"click",L),ze(n,"keyup",Q)],v=!0)},p(H,C){var F;t=H,O===(O=w(t))&&b?b.p(t,C):(b.d(1),b=O(t),b&&(b.c(),b.m(a,l))),t[11]?k&&(k.d(1),k=null):k?k.p(t,C):(k=di(t),k.c(),k.m(a,null)),C[0]&4194304&&c!==(c="event status-"+t[117].attendeeStatus)&&z(n,"class",c),C[0]&4194312&&f!==(f=((F=t[3])==null?void 0:F.indexOf(t[117].calendar_id))+1)&&z(n,"data-calendar-id",f)},d(H){H&&B(n),b.d(),k&&k.d(),v=!1,wt(p)}}}function vi(t){let n,a=t[125].formatted+"",l,d;return{c(){n=J("span"),l=Se(a),d=we(),Be(n,"top",t[125].relativeTickPosition*100+"%"),z(n,"class","tick")},m(c,f){G(c,n,f),j(n,l),j(n,d)},p(c,f){f[0]&2097152&&a!==(a=c[125].formatted+"")&&He(l,a),f[0]&2097152&&Be(n,"top",c[125].relativeTickPosition*100+"%")},d(c){c&&B(n)}}}function yi(t){let n,a=t[21],l=[];for(let d=0;d<a.length;d+=1)l[d]=gi($a(t,a,d));return{c(){n=J("div");for(let d=0;d<l.length;d+=1)l[d].c();z(n,"class","hour-ticks")},m(d,c){G(d,n,c);for(let f=0;f<l.length;f+=1)l[f].m(n,null)},p(d,c){if(c[0]&2097152){a=d[21];let f;for(f=0;f<a.length;f+=1){const v=$a(d,a,f);l[f]?l[f].p(v,c):(l[f]=gi(v),l[f].c(),l[f].m(n,null))}for(;f<l.length;f+=1)l[f].d(1);l.length=a.length}},d(d){d&&B(n),xn(l,d)}}}function gi(t){let n;return{c(){n=J("span"),Be(n,"top",t[125].relativeTickPosition*100+"%")},m(a,l){G(a,n,l)},p(a,l){l[0]&2097152&&Be(n,"top",a[125].relativeTickPosition*100+"%")},d(a){a&&B(n)}}}function Js(t){let n,a,l=t[2].toDateString()+"",d;return{c(){n=J("li"),a=Se("No events for "),d=Se(l),z(n,"class","no-events")},m(c,f){G(c,n,f),j(n,a),j(n,d)},p(c,f){f[0]&4&&l!==(l=c[2].toDateString()+"")&&He(d,l)},d(c){c&&B(n)}}}function qs(t){let n,a,l=[...t[116],t[19]],d=[];for(let f=0;f<l.length;f+=1)d[f]=Oi(Xa(t,l,f));let c=!t[1].hide_current_time&&ki(t);return{c(){for(let f=0;f<d.length;f+=1)d[f].c();n=we(),c&&c.c(),a=zn()},m(f,v){for(let p=0;p<d.length;p+=1)d[p].m(f,v);G(f,n,v),c&&c.m(f,v),G(f,a,v)},p(f,v){if(v[0]&537659978){l=[...f[116],f[19]];let p;for(p=0;p<l.length;p+=1){const w=Xa(f,l,p);d[p]?d[p].p(w,v):(d[p]=Oi(w),d[p].c(),d[p].m(n.parentNode,n))}for(;p<d.length;p+=1)d[p].d(1);d.length=l.length}f[1].hide_current_time?c&&(c.d(1),c=null):c?c.p(f,v):(c=ki(f),c.c(),c.m(a.parentNode,a))},d(f){xn(d,f),f&&B(n),c&&c.d(f),f&&B(a)}}}function pi(t){let n,a,l,d,c,f,v,p;function w(C,F){return C[11]?Qs:Xs}let O=w(t),b=O(t),k=t[117].when&&"start_time"in t[117].when&&_i(t),L=!t[11]&&bi(t);function Q(...C){return t[91](t[117],...C)}function H(...C){return t[92](t[117],...C)}return{c(){var C;n=J("li"),a=J("div"),b.c(),l=we(),k&&k.c(),d=we(),L&&L.c(),z(a,"class","inner"),Ee(a,"tiny-event",t[117].relativeRunTime<=.03),z(n,"tabindex","0"),z(n,"class",c="event status-"+t[117].attendeeStatus),z(n,"data-calendar-id",f=((C=t[3])==null?void 0:C.indexOf(t[117].calendar_id))+1),Be(n,"top",t[117].relativeStartTime*100+"%"),Be(n,"height",t[9]?`calc(${t[117].relativeRunTime*100}% - 4px)`:`calc(${t[117].relativeRunTime*100}%  - 4px)`),Be(n,"left",t[117].relativeOverlapOffset*100+"%"),Be(n,"width","calc("+t[117].relativeOverlapWidth*100+"% - 4px)"),Ee(n,"new-event",t[117].isNewEvent),Ee(n,"expanded",t[18]===t[117].id)},m(C,F){G(C,n,F),j(n,a),b.m(a,null),j(a,l),k&&k.m(a,null),j(a,d),L&&L.m(a,null),v||(p=[ze(n,"click",Q),ze(n,"keyup",H)],v=!0)},p(C,F){var fe;t=C,O===(O=w(t))&&b?b.p(t,F):(b.d(1),b=O(t),b&&(b.c(),b.m(a,l))),t[117].when&&"start_time"in t[117].when?k?k.p(t,F):(k=_i(t),k.c(),k.m(a,d)):k&&(k.d(1),k=null),t[11]?L&&(L.d(1),L=null):L?L.p(t,F):(L=bi(t),L.c(),L.m(a,null)),F[0]&524352&&Ee(a,"tiny-event",t[117].relativeRunTime<=.03),F[0]&524352&&c!==(c="event status-"+t[117].attendeeStatus)&&z(n,"class",c),F[0]&524360&&f!==(f=((fe=t[3])==null?void 0:fe.indexOf(t[117].calendar_id))+1)&&z(n,"data-calendar-id",f),F[0]&524352&&Be(n,"top",t[117].relativeStartTime*100+"%"),F[0]&524864&&Be(n,"height",t[9]?`calc(${t[117].relativeRunTime*100}% - 4px)`:`calc(${t[117].relativeRunTime*100}%  - 4px)`),F[0]&524352&&Be(n,"left",t[117].relativeOverlapOffset*100+"%"),F[0]&524352&&Be(n,"width","calc("+t[117].relativeOverlapWidth*100+"% - 4px)"),F[0]&524352&&Ee(n,"new-event",t[117].isNewEvent),F[0]&786496&&Ee(n,"expanded",t[18]===t[117].id)},d(C){C&&B(n),b.d(),k&&k.d(),L&&L.d(),v=!1,wt(p)}}}function Qs(t){let n;return{c(){n=J("h2"),n.textContent="Busy"},m(a,l){G(a,n,l)},p:be,d(a){a&&B(n)}}}function Xs(t){let n,a=t[117].title+"",l;return{c(){n=J("h2"),l=Se(a)},m(d,c){G(d,n,c),j(n,l)},p(d,c){c[0]&524352&&a!==(a=d[117].title+"")&&He(l,a)},d(d){d&&B(n)}}}function _i(t){let n,a=Za(new Date(t[117].when.start_time*1e3),t[1].timezone)+"",l;return{c(){n=J("span"),l=Se(a),z(n,"class","time")},m(d,c){G(d,n,c),j(n,l)},p(d,c){c[0]&524354&&a!==(a=Za(new Date(d[117].when.start_time*1e3),d[1].timezone)+"")&&He(l,a)},d(d){d&&B(n)}}}function bi(t){var w,O;let n,a,l=hr.sanitize((w=t[117].description)!=null?w:"")+"",d,c=t[1].display_metadata&&t[117].metadata&&((O=Object.keys(t[117].metadata))==null?void 0:O.length),f,v=t[117].location&&wi(t),p=c&&Ti(t);return{c(){v&&v.c(),n=we(),a=J("p"),d=we(),p&&p.c(),f=zn()},m(b,k){v&&v.m(b,k),G(b,n,k),G(b,a,k),a.innerHTML=l,G(b,d,k),p&&p.m(b,k),G(b,f,k)},p(b,k){var L,Q;b[117].location?v?v.p(b,k):(v=wi(b),v.c(),v.m(n.parentNode,n)):v&&(v.d(1),v=null),k[0]&524352&&l!==(l=hr.sanitize((L=b[117].description)!=null?L:"")+"")&&(a.innerHTML=l),k[0]&524354&&(c=b[1].display_metadata&&b[117].metadata&&((Q=Object.keys(b[117].metadata))==null?void 0:Q.length)),c?p?p.p(b,k):(p=Ti(b),p.c(),p.m(f.parentNode,f)):p&&(p.d(1),p=null)},d(b){v&&v.d(b),b&&B(n),b&&B(a),b&&B(d),p&&p.d(b),b&&B(f)}}}function wi(t){let n;function a(c,f){return c[117].locationString?$s:Ks}let l=a(t),d=l(t);return{c(){n=J("span"),d.c(),z(n,"class","location")},m(c,f){G(c,n,f),d.m(n,null)},p(c,f){l===(l=a(c))&&d?d.p(c,f):(d.d(1),d=l(c),d&&(d.c(),d.m(n,null)))},d(c){c&&B(n),d.d()}}}function Ks(t){let n=t[117].location+"",a;return{c(){a=Se(n)},m(l,d){G(l,a,d)},p(l,d){d[0]&524352&&n!==(n=l[117].location+"")&&He(a,n)},d(l){l&&B(a)}}}function $s(t){let n,a=t[117].locationString+"",l,d;return{c(){n=J("a"),l=Se(a),z(n,"href",d=t[117].location),z(n,"target","_blank")},m(c,f){G(c,n,f),j(n,l)},p(c,f){f[0]&524352&&a!==(a=c[117].locationString+"")&&He(l,a),f[0]&524352&&d!==(d=c[117].location)&&z(n,"href",d)},d(c){c&&B(n)}}}function Ti(t){let n,a=Object.entries(t[117].metadata),l=[];for(let d=0;d<a.length;d+=1)l[d]=Si(Ka(t,a,d));return{c(){n=J("ul");for(let d=0;d<l.length;d+=1)l[d].c();z(n,"class","metadata")},m(d,c){G(d,n,c);for(let f=0;f<l.length;f+=1)l[f].m(n,null)},p(d,c){if(c[0]&524352){a=Object.entries(d[117].metadata);let f;for(f=0;f<a.length;f+=1){const v=Ka(d,a,f);l[f]?l[f].p(v,c):(l[f]=Si(v),l[f].c(),l[f].m(n,null))}for(;f<l.length;f+=1)l[f].d(1);l.length=a.length}},d(d){d&&B(n),xn(l,d)}}}function Si(t){let n,a,l=t[121]+"",d,c,f,v=t[122]+"",p;return{c(){n=J("li"),a=J("strong"),d=Se(l),c=Se(":"),f=we(),p=Se(v)},m(w,O){G(w,n,O),j(n,a),j(a,d),j(a,c),j(n,f),j(n,p)},p(w,O){O[0]&524352&&l!==(l=w[121]+"")&&He(d,l),O[0]&524352&&v!==(v=w[122]+"")&&He(p,v)},d(w){w&&B(n)}}}function Oi(t){let n,a=t[117]&&t[117].relativeStartTime!==void 0&&pi(t);return{c(){a&&a.c(),n=zn()},m(l,d){a&&a.m(l,d),G(l,n,d)},p(l,d){l[117]&&l[117].relativeStartTime!==void 0?a?a.p(l,d):(a=pi(l),a.c(),a.m(n.parentNode,n)):a&&(a.d(1),a=null)},d(l){a&&a.d(l),l&&B(n)}}}function ki(t){let n,a,l;return{c(){n=J("span"),a=Pn("svg"),l=Pn("path"),z(l,"d","M8 0C3.58172 0 0 3.58172 0 8C0 12.4183 3.58172 16 8 16H24C27.7277 16 30.8599 13.4505 31.748 10H39V6H31.748C30.8599 2.54955 27.7277 0 24 0H8ZM4 8C4 5.79086 5.79086 4 8 4H24C26.2091 4 28 5.79086 28 8C28 10.2091 26.2091 12 24 12H8C5.79086 12 4 10.2091 4 8Z"),z(a,"width","39"),z(a,"height","16"),z(a,"viewBox","0 0 39 16"),z(a,"fill","none"),z(a,"xmlns","http://www.w3.org/2000/svg"),z(n,"class","now"),Be(n,"top",t[20]()+"%")},m(d,c){G(d,n,c),j(n,a),j(a,l)},p(d,c){c[0]&1048576&&Be(n,"top",d[20]()+"%")},d(d){d&&B(n)}}}function el(t){let n;return{c(){n=Se("(loading events)")},m(a,l){G(a,n,l)},p:be,d(a){a&&B(n)}}}function tl(t){let n,a,l,d,c,f,v=t[12]&&ri(t),p={ctx:t,current:null,token:null,hasCatch:!1,pending:el,then:js,catch:Ws,value:116};return va(c=t[6],p),{c(){n=J("nylas-error"),a=we(),v&&v.c(),l=we(),d=J("main"),p.block.c(),this.c=be,ua(n,"id",t[0]),z(d,"class",f=t[12]?"custom":t[1].theme),Ee(d,"nylas-agenda",!0),Ee(d,"headless",t[1].header_type==="none")},m(w,O){G(w,n,O),G(w,a,O),v&&v.m(w,O),G(w,l,O),G(w,d,O),p.block.m(d,p.anchor=null),p.mount=()=>d,p.anchor=null},p(w,O){t=w,O[0]&1&&ua(n,"id",t[0]),t[12]?v?v.p(t,O):(v=ri(t),v.c(),v.m(l.parentNode,l)):v&&(v.d(1),v=null),p.ctx=t,O[0]&64&&c!==(c=t[6])&&va(c,p)||Do(p,t,O),O[0]&4098&&f!==(f=t[12]?"custom":t[1].theme)&&z(d,"class",f),O[0]&4098&&Ee(d,"nylas-agenda",!0),O[0]&4098&&Ee(d,"headless",t[1].header_type==="none")},i:be,o:be,d(w){w&&B(n),w&&B(a),v&&v.d(w),w&&B(l),w&&B(d),p.block.d(),p.token=null,p=null}}}const Ei=30;let Di=.2,Ii=.7;const nl=50,rl=100;function Ni(t){return new Date(t.getTime()+t.getTimezoneOffset()*6e4)}const Mi=()=>{};function al(t,n,a){let l,d,c,f,v,p,w,O,b,k,L,Q,H;Rn(t,er,y=>a(10,b=y)),Rn(t,Rr,y=>a(88,k=y)),Rn(t,Ds,y=>a(101,L=y));var C=this&&this.__awaiter||function(y,S,Y,le){function re(rt){return rt instanceof Y?rt:new Y(function(gt){gt(rt)})}return new(Y||(Y=Promise))(function(rt,gt){function pt(at){try{Qt(le.next(at))}catch(It){gt(It)}}function zt(at){try{Qt(le.throw(at))}catch(It){gt(It)}}function Qt(at){at.done?rt(at.value):re(at.value).then(pt,zt)}Qt((le=le.apply(y,S||[])).next())})},F,fe;const pe=Object.freeze(["overlaps","relativeOverlapOffset","relativeOverlapWidth","relativeRunTime","relativeStartTime"]);let q={},{id:oe=""}=n,{access_token:ae=""}=n,{allow_date_change:Oe}=n,{allow_event_creation:E}=n,{allowed_dates:ee}=n,{auto_time_box:A}=n,{end_minute:me}=n,{events:$e=[]}=n,{calendar_id:Wt}=n,{calendar_ids:jt}=n,{click_action:ct}=n,{color_by:mn}=n,{condensed_view:Zt}=n,{eagerly_fetch_events:hn}=n,{event_snap_interval:en}=n,{event_created:Rt}=n,{header_type:Gt}=n,{hide_all_day_events:tn}=n,{hide_current_time:Ft}=n,{hide_ticks:vn}=n,{prevent_zoom:yn}=n,{selected_date:gn}=n,{show_no_events_message:pn}=n,{start_minute:Un}=n,{theme:_n}=n,{timezone:bn}=n,{timezone_agnostic_all_day_events:Tt}=n,{display_metadata:Ye}=n;const ie={allow_date_change:!1,allow_event_creation:!1,allowed_dates:[],auto_time_box:!1,calendar_id:"",calendar_ids:"",color_by:"event",condensed_view:!1,eagerly_fetch_events:!0,end_minute:1440,event_snap_interval:15,header_type:"full",hide_all_day_events:!1,hide_current_time:!1,hide_ticks:!1,prevent_zoom:!1,show_no_events_message:!1,start_minute:0,theme:"theme-1",timezone:"",timezone_agnostic_all_day_events:!0,display_metadata:!0};let V=Fr({},{},ie),St=new Date().getTime(),Wn=!1;wo(()=>C(void 0,void 0,void 0,function*(){var y;yield To(),a(7,tt=Ve==null?void 0:Ve.getBoundingClientRect().height),tt===0&&a(16,Ve.style.height="300px",Ve),a(65,q=(yield L[JSON.stringify({component_id:oe,access_token:ae})])||{}),a(11,Wn=(y=q==null?void 0:q.show_as_busy)!==null&&y!==void 0?y:!1),a(1,V=Fr(n,q,ie)),Te(),setInterval(()=>{a(66,St=new Date().getTime())},15e3)}));const R=Is(Ir());let P=n,te,U,X,he,ge,Fe=[];function Te(){var y;if(!!V.theme&&(V.theme.startsWith(".")||V.theme.startsWith("http"))&&a(12,te=V.theme),V.timezone&&(!xr(V.timezone)||V.timezone===Intl.DateTimeFormat().resolvedOptions().timeZone)&&a(1,V.timezone="",V),V.selected_date){const S=Ni(new Date(V.selected_date));S.setHours(0,0,0,0),a(2,U=S)}else if(X==null?void 0:X.length)a(2,U=X[0]);else{let S=new Date;V.timezone&&(S=new Date(Ba(S,V.timezone))),S.setHours(0,0,0,0),a(2,U=S)}a(1,V.hide_current_time=(y=V.hide_current_time)!==null&&y!==void 0?y:p.toLocaleDateString()!=U.toLocaleDateString(),V),a(68,X=wn()),a(3,Fe=nn())}let _e,ft;function wn(){let y=[];return V.allowed_dates&&typeof V.allowed_dates=="string"&&(V.allowed_dates.includes(",")?y=V.allowed_dates.split(",").map(S=>new Date(S)):y=[new Date(V.allowed_dates)],y=y.map(S=>(S.setHours(0,0,0,0),S))),V.allowed_dates&&typeof V.allowed_dates!="string"&&(y=V.allowed_dates),y}let Ot,mt,De,xt,Bt;function nn(){let y=V.calendar_ids;return typeof y=="string"&&y.length?y.split(",").map(S=>S.trim()):Wt?[Wt]:[]}let et,ot=[],je,ht=[];const{loadingEvents:vt}=er;Rn(t,vt,y=>a(24,H=y));let xe=[],yt=[],kt=[],Tn=!1,Ie,Et=[],Je,Yt;const Jt=()=>{if(!qe){if(X.length){const y=X.findIndex(S=>S.toDateString()===U.toDateString());a(2,U=X[y+1]||U)}else a(2,U=vr.offset(U,1));R("dateChange",new Date(new Date(U).setHours(0,0,0,0)))}},jn=()=>{if(!qe){if(X.length){const y=X.findIndex(S=>S.toDateString()===U.toDateString());a(2,U=X[y-1]||U)}else a(2,U=vr.offset(U,-1));R("dateChange",new Date(new Date(U).setHours(0,0,0,0)))}};let Ve,tt,rn=!1;const Sn=y=>{if(ke)return;a(17,rn=!0),setTimeout(()=>{a(17,rn=!1)},500),y.preventDefault();const S=Ve.getBoundingClientRect(),Y=y.clientY-S.top;let le=Math.abs(y.deltaY)/10;y.ctrlKey&&(y.preventDefault(),le*=20);const re=y.deltaY>=0?"out":"in",rt=[Y/S.height,(S.height-Y)/S.height];re==="out"&&(ge<=1440&&ge+le<=1440?a(70,ge+=le):a(70,ge=1440),he>=0&&he-le>=0?a(69,he-=le):a(69,he=0)),re==="in"&&ge>he+60&&(a(69,he+=le*rt[0]),a(70,ge-=le*rt[1]))};let ke="",an,Ne;function Pt(y,S){if(R("eventClicked",S),typeof ct=="function"){const Y=JSON.parse(JSON.stringify(S));for(const le of pe)delete Y[le];ct(y,Y)}l==="expand"&&"start_time"in S.when&&(S.id!==ke?(an=he,Ne=ge,a(69,he=Ya(S)),a(70,ge=Ja(S)),a(18,ke=S.id)):(a(18,ke=""),a(69,he=an),a(70,ge=Ne)))}let se={held:!1,x:0,y:0};const Me=Lo({x:0},{stiffness:Di,damping:Ii});Rn(t,Me,y=>a(23,Q=y));function On(y){a(84,se={held:!0,x:y.clientX,y:y.clientY}),a(8,Me.stiffness=1,Me),a(8,Me.damping=1,Me)}function kn(y){se.held&&Me.update(()=>({x:Math.sign(y.clientX-se.x)*Math.sqrt(Math.abs(y.clientX-se.x))}))}function En(y){if(se.held){let S=y.clientX-se.x;Math.abs(S)>nl&&V.allow_date_change?(S>0?jn():S<0&&Jt(),setTimeout(()=>{a(84,se={held:!1,x:0,y:0})},rl)):a(84,se={held:!1,x:0,y:0})}a(8,Me.stiffness=Di,Me),a(8,Me.damping=Ii,Me),Me.set({x:0})}function Ke(y){const S=Math.abs(y-Ve.getBoundingClientRect().y)/Ve.getBoundingClientRect().height,Y=De*S+he;return(Math.round(Y/V.event_snap_interval)*V.event_snap_interval-he)/De}function Ce(y){const S=Math.abs(y-se.y)/Ve.getBoundingClientRect().height,Y=De*S;return Math.round(Y/V.event_snap_interval)*V.event_snap_interval/De}let ne,qe=!1;function on(y){V.allow_event_creation&&!qe&&Array.isArray(Ie)&&(a(84,se={held:!0,x:y.clientX,y:y.clientY}),a(19,ne={id:`${Ie.length}`,title:"New Event",relativeStartTime:Ke(y.clientY),relativeRunTime:0,relativeOverlapWidth:1,when:{},isNewEvent:!0}),qe=!0)}let Qe=null;function Dt(y){V.allow_event_creation&&se.held&&!!ne&&y.clientY>Ve.getBoundingClientRect().y&&(se.y<=y.clientY?(Qe!==null&&(a(19,ne.relativeStartTime=Qe,ne),Qe=null),a(19,ne.relativeRunTime=Ce(y.clientY),ne)):(Qe===null&&(Qe=ne.relativeStartTime),a(19,ne.relativeStartTime=Ke(y.clientY),ne),a(19,ne.relativeRunTime=Math.abs(Qe-ne.relativeStartTime),ne)),a(19,ne=Object.assign({},ne)))}function sn(){if(V.allow_event_creation&&se.held&&ne&&ne.relativeRunTime>0){const y=De*ne.relativeStartTime+he,S=De*ne.relativeRunTime,Y=new Date(U);a(19,ne.when.start_time=Math.floor((Y.setHours(0,y,0,0)-_e)/1e3),ne),a(19,ne.when.end_time=Math.floor((Y.setHours(0,y+S,0,0)-_e)/1e3),ne),a(83,Ie=[...Ie,ne]),typeof Rt=="function"&&Array.isArray(Fe)&&Fe.length>0?(a(19,ne.calendar_id=Fe[0],ne),Rt(ne,qt,st,In)):qe=!1}else qe=!1;a(19,ne=null),Qe=null,a(84,se={held:!1,x:0,y:0})}function Dn(y){typeof y.when.start_time=="object"?y.when.start_time=Math.floor((y.when.start_time.getTime()-_e)/1e3):y.when.start_time=Math.floor((y.when.start_time-_e)/1e3),typeof y.when.end_time=="object"?y.when.end_time=Math.floor((y.when.end_time.getTime()-_e)/1e3):y.when.end_time=Math.floor((y.when.end_time-_e)/1e3)}function In(y){Dn(y);let S=new Date(y.when.start_time*1e3).getTime()-new Date(new Date(y.when.start_time*1e3).setHours(0,he,0,0)).getTime();S=S/6e4;let Y=new Date(y.when.end_time*1e3).getTime()-new Date(y.when.start_time*1e3).getTime();Y=Y/6e4,y.relativeStartTime=S/De,y.relativeRunTime=Y/De,a(83,Ie[Ie.length-1]=y,Ie),a(83,Ie=[...Ie])}function qt(y){if(typeof y!="object"){console.warn("Invalid event object provided.");return}Dn(y),er.createEvent(y,et),a(83,Ie[Ie.length-1].isNewEvent=!1,Ie),qe=!1}function st(){Ie.pop(),a(83,Ie=[...Ie]),qe=!1}const Ue=(y,S)=>Pt(S,y),ln=(y,S)=>{S.key==="Enter"&&Pt(S,y)},Xe=(y,S)=>Pt(S,y),un=(y,S)=>{S.key==="Enter"&&Pt(S,y)};function nt(y){Nr[y?"unshift":"push"](()=>{Ve=y,a(16,Ve)})}function Nn(){tt=this.clientHeight,a(7,tt)}const dn=y=>{V.allow_event_creation&&y.preventDefault()};return t.$$set=y=>{a(115,n=ea(ea({},n),aa(y))),"id"in y&&a(0,oe=y.id),"access_token"in y&&a(36,ae=y.access_token),"allow_date_change"in y&&a(37,Oe=y.allow_date_change),"allow_event_creation"in y&&a(38,E=y.allow_event_creation),"allowed_dates"in y&&a(39,ee=y.allowed_dates),"auto_time_box"in y&&a(40,A=y.auto_time_box),"end_minute"in y&&a(41,me=y.end_minute),"events"in y&&a(42,$e=y.events),"calendar_id"in y&&a(43,Wt=y.calendar_id),"calendar_ids"in y&&a(44,jt=y.calendar_ids),"click_action"in y&&a(45,ct=y.click_action),"color_by"in y&&a(46,mn=y.color_by),"condensed_view"in y&&a(47,Zt=y.condensed_view),"eagerly_fetch_events"in y&&a(48,hn=y.eagerly_fetch_events),"event_snap_interval"in y&&a(49,en=y.event_snap_interval),"event_created"in y&&a(50,Rt=y.event_created),"header_type"in y&&a(51,Gt=y.header_type),"hide_all_day_events"in y&&a(52,tn=y.hide_all_day_events),"hide_current_time"in y&&a(53,Ft=y.hide_current_time),"hide_ticks"in y&&a(54,vn=y.hide_ticks),"prevent_zoom"in y&&a(55,yn=y.prevent_zoom),"selected_date"in y&&a(56,gn=y.selected_date),"show_no_events_message"in y&&a(57,pn=y.show_no_events_message),"start_minute"in y&&a(58,Un=y.start_minute),"theme"in y&&a(59,_n=y.theme),"timezone"in y&&a(60,bn=y.timezone),"timezone_agnostic_all_day_events"in y&&a(61,Tt=y.timezone_agnostic_all_day_events),"display_metadata"in y&&a(62,Ye=y.display_metadata)},t.$$.update=()=>{if(t.$$.dirty[2]&8&&R("manifestLoaded",q),t.$$.dirty[2]&67108864&&Object.keys(k).length&&R("onError",k),JSON.stringify(P)!==JSON.stringify(n)&&(a(1,V=Fr(n,q,ie)),Te(),a(67,P=n)),t.$$.dirty[0]&2&&(a(71,_e=Ga(V.timezone)),a(13,ft=Ps(V.timezone))),t.$$.dirty[1]&16384&&(l=typeof ct=="function"?"none":"expand"),t.$$.dirty[0]&4|t.$$.dirty[2]&512&&a(75,xt=(new Date(U).getTime()-_e)/1e3),t.$$.dirty[0]&4|t.$$.dirty[2]&512&&a(76,Bt=(new Date(U).setHours(24,0,0,0)-_e)/1e3),t.$$.dirty[0]&9|t.$$.dirty[1]&32|t.$$.dirty[2]&24576&&a(77,et={component_id:oe,access_token:ae,calendarIDs:Fe,starts_after:xt,ends_before:Bt}),t.$$.dirty[0]&15|t.$$.dirty[1]&32|t.$$.dirty[2]&33344&&V.allow_date_change&&V.eagerly_fetch_events&&et){let y,S;if(X==null?void 0:X.length){const Y=X.findIndex(le=>le.toDateString()===U.toDateString());y=X[Y-1]||U,S=X[Y+1]||U}else y=vr.offset(U,-1),S=vr.offset(U,1);a(78,ot=[{component_id:oe,access_token:ae,calendarIDs:Fe,starts_after:(new Date(y).setHours(0,0,0,0)-_e)/1e3,ends_before:(new Date(y).setHours(24,0,0,0)-_e)/1e3},{component_id:oe,access_token:ae,calendarIDs:Fe,starts_after:(new Date(S).setHours(0,0,0,0)-_e)/1e3,ends_before:(new Date(S).setHours(24,0,0,0)-_e)/1e3}])}if(t.$$.dirty[0]&2|t.$$.dirty[2]&622592&&(()=>C(void 0,void 0,void 0,function*(){var y,S;if(V.events)a(80,xe=V.events);else{yt.push(er.getEvents(et));const Y=(yield Promise.allSettled(yt)).filter(le=>le.status!=="rejected");a(80,xe=(S=(y=Y.pop())===null||y===void 0?void 0:y.value)!==null&&S!==void 0?S:[]),a(81,yt.length=0,yt)}(ot==null?void 0:ot.length)&&ot.forEach(Y=>er.getEvents(Y))}))(),t.$$.dirty[0]&9|t.$$.dirty[1]&32&&(()=>C(void 0,void 0,void 0,function*(){if(oe&&(Fe==null?void 0:Fe.length)){const y={access_token:ae,component_id:oe,calendarIDs:Fe};a(79,ht=yield ys.getCalendars(y))}}))(),t.$$.dirty[2]&393220&&a(85,c=a(64,fe=xe==null?void 0:xe.filter(y=>"start_time"in y.when))===null||fe===void 0?void 0:fe.map(y=>{var S,Y;let le=ht.find(re=>re.id===y.calendar_id);return y.attendeeStatus=(Y=(S=y.participants)===null||S===void 0?void 0:S.find(re=>re.email===(le==null?void 0:le.name)))===null||Y===void 0?void 0:Y.status,y}).sort((y,S)=>y.when.start_time-S.when.start_time)),t.$$.dirty[0]&2|t.$$.dirty[2]&8389120&&(a(69,he=V.auto_time_box&&(c==null?void 0:c.length)?Ya(c[0])+_e/(1e3*60):V.start_minute),a(70,ge=V.auto_time_box&&(c==null?void 0:c.length)?Ja(c[c.length-1])+_e/(1e3*60):V.end_minute)),t.$$.dirty[2]&128){let y=new Date;y.setHours(0,he,0,0),a(72,Ot=y)}if(t.$$.dirty[2]&256){let y=new Date;y.setHours(0,ge,0,0),a(73,mt=y)}if(t.$$.dirty[2]&384&&a(74,De=Math.floor(ge-he)),t.$$.dirty[2]&32768&&a(4,je=JSON.stringify(et)),t.$$.dirty[0]&1026&&(V.events?a(82,kt=V.events.flat().filter(y=>{var S;return(S=y.when)===null||S===void 0?void 0:S.date})):Promise.all(Object.values(b)).then(y=>{a(82,kt=y.flat().filter(S=>{var Y;return(Y=S.when)===null||Y===void 0?void 0:Y.date}))})),t.$$.dirty[0]&6|t.$$.dirty[2]&1048578&&a(22,d=a(63,F=kt==null?void 0:kt.filter(y=>V.timezone_agnostic_all_day_events?Ni(new Date(y.when.date)).valueOf()===U.valueOf():new Date(y.when.date).toDateString()===U.toDateString()))===null||F===void 0?void 0:F.sort((y,S)=>(y.title||"").localeCompare(S.title||""))),t.$$.dirty[0]&2|t.$$.dirty[2]&262144&&(V.events||R("eventsLoaded",xe)),t.$$.dirty[0]&2|t.$$.dirty[2]&262144&&a(83,Ie=Array.isArray(xe)&&xe.length>0?xe:V.events||[]),t.$$.dirty[0]&130&&a(9,O=V.condensed_view||tt&&tt<500),t.$$.dirty[0]&1618|t.$$.dirty[1]&2048|t.$$.dirty[2]&10621056)if($e||c&&(ht==null?void 0:ht.length)){a(6,Et=Ie.filter(S=>S.status!=="cancelled"&&"start_time"in S.when).map((S,Y)=>{var le;if(O)return S.relativeStartTime=100/c.length/100*Y,S.relativeRunTime=100/c.length/100,S;let re=new Date(S.when.start_time*1e3);V.timezone&&(re=new Date(Ba(re,V.timezone)));let rt=(re.getTime()-re.setHours(0,he,0,0))/6e4,gt=new Date(S.when.end_time*1e3).getTime()-new Date(S.when.start_time*1e3).getTime();return gt=gt/6e4,S.relativeStartTime=rt/De,S.relativeRunTime=gt/De,((le=S.location)===null||le===void 0?void 0:le.startsWith("http"))&&(S.locationString=`Link: ${new URL(S.location).hostname}`),S}));const y=Et.filter(S=>"start_time"in S.when&&"end_time"in S.when);if(O)y.forEach(S=>{S.relativeOverlapWidth=1,S.relativeOverlapOffset=0});else{const S={};zs(y,S),y.sort((Y,le)=>Y.when.end_time-Y.when.start_time<le.when.end_time-le.when.start_time?1:-1).forEach(Y=>Hs(Y,S))}}else b[je]&&a(6,Et=[]);t.$$.dirty[0]&192&&a(5,Tn=Et.length*Ei>tt),t.$$.dirty[0]&128&&a(87,f=Ei/tt),t.$$.dirty[0]&608|t.$$.dirty[2]&33554432&&O&&Tn&&Et.forEach((y,S)=>{y.relativeStartTime=f*S,y.relativeRunTime=f}),t.$$.dirty[0]&4|t.$$.dirty[2]&64&&a(14,Je=!!((X==null?void 0:X.length)&&(X==null?void 0:X.findIndex(y=>y.toDateString()===U.toDateString()))===0)),t.$$.dirty[0]&4|t.$$.dirty[2]&64&&a(15,Yt=!!((X==null?void 0:X.length)&&(X==null?void 0:X.findIndex(y=>y.toDateString()===U.toDateString()))===X.length-1)),t.$$.dirty[2]&3072&&a(21,v=[...Array(24).keys()].map(y=>{const S=new Date;S.setHours(y,0,0,0);let Y=mt.getTime()-Ot.getTime();return Y=Y/6e4,{key:y,formatted:S.toLocaleTimeString("en-US",{hour:"numeric",hour12:!0}),timeString:S.toISOString(),timeStamp:S.getTime(),date:S,relativeTickPosition:(S.getTime()-Ot.getTime())/6e4/Y}})),t.$$.dirty[2]&528&&a(86,p=new Date(St+_e)),t.$$.dirty[2]&16780416&&a(20,w=()=>{let y=new Date(p);const S=(p.getTime()-y.setHours(0,he,0,0))/6e4,Y=(mt.getTime()-Ot.getTime())/6e4;return S/Y*100}),t.$$.dirty[0]&256|t.$$.dirty[2]&4194304&&se.x===0&&Me.set({x:0})},n=aa(n),[oe,V,U,Fe,je,Tn,Et,tt,Me,O,b,Wn,te,ft,Je,Yt,Ve,rn,ke,ne,w,v,d,Q,H,vt,Jt,jn,Sn,Pt,On,kn,En,on,Dt,sn,ae,Oe,E,ee,A,me,$e,Wt,jt,ct,mn,Zt,hn,en,Rt,Gt,tn,Ft,vn,yn,gn,pn,Un,_n,bn,Tt,Ye,F,fe,q,St,P,X,he,ge,_e,Ot,mt,De,xt,Bt,et,ot,ht,xe,yt,kt,Ie,se,c,p,f,k,Ue,ln,Xe,un,nt,Nn,dn]}class Ai extends Cr{constructor(n){super();this.shadowRoot.innerHTML=`<style>*{margin:0;padding:0;border:0;font-size:100%;font:inherit;vertical-align:baseline;list-style:none}.sr-only{position:absolute;left:-10000px;top:auto;width:1px;height:1px;overflow:hidden}main{--black:#161717;--grey-dark:#636671;--grey:#bdc0cb;--grey-lighter:#dfe1e8;--grey-dark-warm:#9fa4b5;--grey-lightest:#f7f7f8;--grey-background:#f0f1f5;--white:#ffffff;--blue:#314fa9;--blue-lighter:#f0f3ff;--red:#ee3248;--red-lighter:#ffeef0;--fs-12:0.75rem;--fs-14:0.875rem;--fs-16:1rem;--black-90:#2c2e2e;--grey-light:#f7f7f8;--grey-warm:#cbcbcb}.theme-1{--theme-header-color:#000000;--theme-ticks-color:#000000;--theme-icons-bg-color:#d5d5d5;--theme-dividers-border-color:#d5d5d5;--theme-current-time-bg-color:#36d2ac;--theme-declined-event-color:#ba7122;--theme-header-bg:#ffffff;--theme-event-color:#ffffff;--theme-calendar-1-bg-color:#002db4;--theme-calendar-2-bg-color:#315df2;--theme-calendar-3-bg-color:#078351;--theme-calendar-4-bg-color:#5fdb58;--theme-calendar-5-bg-color:#49a643;--theme-calendar-6-bg-color:#54d3b3;--theme-calendar-7-bg-color:#648fdc;--theme-calendar-8-bg-color:#a3cc3a;--theme-calendar-9-bg-color:#9fce7b;--theme-calendar-10-bg-color:#779138}.theme-2{--theme-header-color:#000000;--theme-ticks-color:#000000;--theme-icons-bg-color:#d5d5d5;--theme-dividers-border-color:#d5d5d5;--theme-current-time-bg-color:#d23636;--theme-declined-event-color:#eb8f24;--theme-header-bg:#ffffff;--theme-event-color:#ffffff;--theme-calendar-1-bg-color:#6300c6;--theme-calendar-2-bg-color:#170075;--theme-calendar-3-bg-color:#003f9e;--theme-calendar-4-bg-color:#813d9d;--theme-calendar-5-bg-color:#549dd0;--theme-calendar-6-bg-color:#c051dc;--theme-calendar-7-bg-color:#b788d4;--theme-calendar-8-bg-color:#674dd4;--theme-calendar-9-bg-color:#687cdc;--theme-calendar-10-bg-color:#5c518c}.theme-3{--theme-header-color:#000000;--theme-ticks-color:#000000;--theme-icons-bg-color:#d5d5d5;--theme-dividers-border-color:#d5d5d5;--theme-current-time-bg-color:#c12b73;--theme-declined-event-color:#ba1722;--theme-header-bg:#ffffff;--theme-event-color:#ffffff;--theme-calendar-1-bg-color:#1d9f51;--theme-calendar-2-bg-color:#0400c4;--theme-calendar-3-bg-color:#19a7b0;--theme-calendar-4-bg-color:#65c444;--theme-calendar-5-bg-color:#4c7fdf;--theme-calendar-6-bg-color:#6a9fe1;--theme-calendar-7-bg-color:#70c08c;--theme-calendar-8-bg-color:#37629d;--theme-calendar-9-bg-color:#4dafd7;--theme-calendar-10-bg-color:#3f7339}.theme-4{--theme-header-color:#ffffff;--theme-ticks-color:#ffffff;--secondaryText:#8b8e98;--theme-icons-bg-color:#414247;--theme-dividers-border-color:#414247;--theme-current-time-bg-color:#7ae1c7;--theme-declined-event-color:#ba1722;--theme-event-color:#ffffff;--theme-header-bg:#414247;--theme-calendar-1-bg-color:#1951fa;--theme-calendar-2-bg-color:#002db4;--theme-calendar-3-bg-color:#078351;--theme-calendar-4-bg-color:#466edb;--theme-calendar-5-bg-color:#26af65;--theme-calendar-6-bg-color:#6a95de;--theme-calendar-7-bg-color:#335695;--theme-calendar-8-bg-color:#60cbae;--theme-calendar-9-bg-color:#308157;--theme-calendar-10-bg-color:#54afda}.theme-5{--theme-header-color:#000000;--theme-ticks-color:#000000;--theme-icons-bg-color:#d5d5d5;--theme-dividers-border-color:#d5d5d5;--theme-current-time-bg-color:#cd5041;--theme-declined-event-color:#cd5041;--theme-header-bg:#ffffff;--theme-event-color:#ffffff;--theme-calendar-1-bg-color:#5285ed;--theme-calendar-2-bg-color:#ecb63f;--theme-calendar-3-bg-color:#459a5f;--theme-calendar-4-bg-color:#8dd255;--theme-calendar-5-bg-color:#9845c4;--theme-calendar-6-bg-color:#d81b60;--theme-calendar-7-bg-color:#60cbae;--theme-calendar-8-bg-color:#528fc8;--theme-calendar-9-bg-color:#b39ddb;--theme-calendar-10-bg-color:#bf6342}.events.diff-by-event .event:nth-of-type(10n
          + 1):not(.event-detail),.events.diff-by-event .event:nth-of-type(10n
          + 1).event-detail.status-yes .header,.events.diff-by-event .event:nth-of-type(10n
          + 1).event-detail.status-undefined .header{background-color:var(--nylas-agenda-calendar-1-bg-color, var(--primaryAndMainCalendar, var(--theme-calendar-1-bg-color)))}.events.diff-by-event .event:nth-of-type(10n
          + 1):not(.event-detail):not(.status-maybe):not(.status-noreply)::before,.events.diff-by-event .event:nth-of-type(10n
          + 1).event-detail.status-yes .header:not(.status-maybe):not(.status-noreply)::before,.events.diff-by-event .event:nth-of-type(10n
          + 1).event-detail.status-undefined .header:not(.status-maybe):not(.status-noreply)::before{content:"";background-color:var(--nylas-agenda-calendar-1-bg-color, var(--primaryAndMainCalendar, var(--theme-calendar-1-bg-color)));position:absolute;top:0;left:0;height:100%;width:0px;filter:brightness(70%)}.events.diff-by-event .event:nth-of-type(10n
          + 2):not(.event-detail),.events.diff-by-event .event:nth-of-type(10n
          + 2).event-detail.status-yes .header,.events.diff-by-event .event:nth-of-type(10n
          + 2).event-detail.status-undefined .header{background-color:var(--nylas-agenda-calendar-2-bg-color, var(--secondaryCalendar, var(--theme-calendar-2-bg-color)))}.events.diff-by-event .event:nth-of-type(10n
          + 2):not(.event-detail):not(.status-maybe):not(.status-noreply)::before,.events.diff-by-event .event:nth-of-type(10n
          + 2).event-detail.status-yes .header:not(.status-maybe):not(.status-noreply)::before,.events.diff-by-event .event:nth-of-type(10n
          + 2).event-detail.status-undefined .header:not(.status-maybe):not(.status-noreply)::before{content:"";background-color:var(--nylas-agenda-calendar-2-bg-color, var(--secondaryCalendar, var(--theme-calendar-2-bg-color)));position:absolute;top:0;left:0;height:100%;width:0px;filter:brightness(70%)}.events.diff-by-event .event:nth-of-type(10n
          + 3):not(.event-detail),.events.diff-by-event .event:nth-of-type(10n
          + 3).event-detail.status-yes .header,.events.diff-by-event .event:nth-of-type(10n
          + 3).event-detail.status-undefined .header{background-color:var(--nylas-agenda-calendar-3-bg-color, var(--thirdCalendar, var(--theme-calendar-3-bg-color)))}.events.diff-by-event .event:nth-of-type(10n
          + 3):not(.event-detail):not(.status-maybe):not(.status-noreply)::before,.events.diff-by-event .event:nth-of-type(10n
          + 3).event-detail.status-yes .header:not(.status-maybe):not(.status-noreply)::before,.events.diff-by-event .event:nth-of-type(10n
          + 3).event-detail.status-undefined .header:not(.status-maybe):not(.status-noreply)::before{content:"";background-color:var(--nylas-agenda-calendar-3-bg-color, var(--thirdCalendar, var(--theme-calendar-3-bg-color)));position:absolute;top:0;left:0;height:100%;width:0px;filter:brightness(70%)}.events.diff-by-event .event:nth-of-type(10n
          + 4):not(.event-detail),.events.diff-by-event .event:nth-of-type(10n
          + 4).event-detail.status-yes .header,.events.diff-by-event .event:nth-of-type(10n
          + 4).event-detail.status-undefined .header{background-color:var(--nylas-agenda-calendar-4-bg-color, var(--calendarColour4, var(--theme-calendar-4-bg-color)))}.events.diff-by-event .event:nth-of-type(10n
          + 4):not(.event-detail):not(.status-maybe):not(.status-noreply)::before,.events.diff-by-event .event:nth-of-type(10n
          + 4).event-detail.status-yes .header:not(.status-maybe):not(.status-noreply)::before,.events.diff-by-event .event:nth-of-type(10n
          + 4).event-detail.status-undefined .header:not(.status-maybe):not(.status-noreply)::before{content:"";background-color:var(--nylas-agenda-calendar-4-bg-color, var(--calendarColour4, var(--theme-calendar-4-bg-color)));position:absolute;top:0;left:0;height:100%;width:0px;filter:brightness(70%)}.events.diff-by-event .event:nth-of-type(10n
          + 5):not(.event-detail),.events.diff-by-event .event:nth-of-type(10n
          + 5).event-detail.status-yes .header,.events.diff-by-event .event:nth-of-type(10n
          + 5).event-detail.status-undefined .header{background-color:var(--nylas-agenda-calendar-5-bg-color, var(--calendarColour5, var(--theme-calendar-5-bg-color)))}.events.diff-by-event .event:nth-of-type(10n
          + 5):not(.event-detail):not(.status-maybe):not(.status-noreply)::before,.events.diff-by-event .event:nth-of-type(10n
          + 5).event-detail.status-yes .header:not(.status-maybe):not(.status-noreply)::before,.events.diff-by-event .event:nth-of-type(10n
          + 5).event-detail.status-undefined .header:not(.status-maybe):not(.status-noreply)::before{content:"";background-color:var(--nylas-agenda-calendar-5-bg-color, var(--calendarColour5, var(--theme-calendar-5-bg-color)));position:absolute;top:0;left:0;height:100%;width:0px;filter:brightness(70%)}.events.diff-by-event .event:nth-of-type(10n
          + 6):not(.event-detail),.events.diff-by-event .event:nth-of-type(10n
          + 6).event-detail.status-yes .header,.events.diff-by-event .event:nth-of-type(10n
          + 6).event-detail.status-undefined .header{background-color:var(--nylas-agenda-calendar-6-bg-color, var(--calendarColour6, var(--theme-calendar-6-bg-color)))}.events.diff-by-event .event:nth-of-type(10n
          + 6):not(.event-detail):not(.status-maybe):not(.status-noreply)::before,.events.diff-by-event .event:nth-of-type(10n
          + 6).event-detail.status-yes .header:not(.status-maybe):not(.status-noreply)::before,.events.diff-by-event .event:nth-of-type(10n
          + 6).event-detail.status-undefined .header:not(.status-maybe):not(.status-noreply)::before{content:"";background-color:var(--nylas-agenda-calendar-6-bg-color, var(--calendarColour6, var(--theme-calendar-6-bg-color)));position:absolute;top:0;left:0;height:100%;width:0px;filter:brightness(70%)}.events.diff-by-event .event:nth-of-type(10n
          + 7):not(.event-detail),.events.diff-by-event .event:nth-of-type(10n
          + 7).event-detail.status-yes .header,.events.diff-by-event .event:nth-of-type(10n
          + 7).event-detail.status-undefined .header{background-color:var(--nylas-agenda-calendar-7-bg-color, var(--calendarColour7, var(--theme-calendar-7-bg-color)))}.events.diff-by-event .event:nth-of-type(10n
          + 7):not(.event-detail):not(.status-maybe):not(.status-noreply)::before,.events.diff-by-event .event:nth-of-type(10n
          + 7).event-detail.status-yes .header:not(.status-maybe):not(.status-noreply)::before,.events.diff-by-event .event:nth-of-type(10n
          + 7).event-detail.status-undefined .header:not(.status-maybe):not(.status-noreply)::before{content:"";background-color:var(--nylas-agenda-calendar-7-bg-color, var(--calendarColour7, var(--theme-calendar-7-bg-color)));position:absolute;top:0;left:0;height:100%;width:0px;filter:brightness(70%)}.events.diff-by-event .event:nth-of-type(10n
          + 8):not(.event-detail),.events.diff-by-event .event:nth-of-type(10n
          + 8).event-detail.status-yes .header,.events.diff-by-event .event:nth-of-type(10n
          + 8).event-detail.status-undefined .header{background-color:var(--nylas-agenda-calendar-8-bg-color, var(--calendarColour8, var(--theme-calendar-8-bg-color)))}.events.diff-by-event .event:nth-of-type(10n
          + 8):not(.event-detail):not(.status-maybe):not(.status-noreply)::before,.events.diff-by-event .event:nth-of-type(10n
          + 8).event-detail.status-yes .header:not(.status-maybe):not(.status-noreply)::before,.events.diff-by-event .event:nth-of-type(10n
          + 8).event-detail.status-undefined .header:not(.status-maybe):not(.status-noreply)::before{content:"";background-color:var(--nylas-agenda-calendar-8-bg-color, var(--calendarColour8, var(--theme-calendar-8-bg-color)));position:absolute;top:0;left:0;height:100%;width:0px;filter:brightness(70%)}.events.diff-by-event .event:nth-of-type(10n
          + 9):not(.event-detail),.events.diff-by-event .event:nth-of-type(10n
          + 9).event-detail.status-yes .header,.events.diff-by-event .event:nth-of-type(10n
          + 9).event-detail.status-undefined .header{background-color:var(--nylas-agenda-calendar-9-bg-color, var(--calendarColour9, var(--theme-calendar-9-bg-color)))}.events.diff-by-event .event:nth-of-type(10n
          + 9):not(.event-detail):not(.status-maybe):not(.status-noreply)::before,.events.diff-by-event .event:nth-of-type(10n
          + 9).event-detail.status-yes .header:not(.status-maybe):not(.status-noreply)::before,.events.diff-by-event .event:nth-of-type(10n
          + 9).event-detail.status-undefined .header:not(.status-maybe):not(.status-noreply)::before{content:"";background-color:var(--nylas-agenda-calendar-9-bg-color, var(--calendarColour9, var(--theme-calendar-9-bg-color)));position:absolute;top:0;left:0;height:100%;width:0px;filter:brightness(70%)}.events.diff-by-calendar .event[data-calendar-id="0"]:not(.event-detail),.events.diff-by-calendar .event[data-calendar-id="0"].event-detail.status-yes .header,.events.diff-by-calendar .event[data-calendar-id="0"].event-detail.status-undefined .header{background-color:var(--nylas-agenda-calendar-1-bg-color, var(--primaryAndMainCalendar, var(--theme-calendar-1-bg-color)))}.events.diff-by-calendar .event[data-calendar-id="0"].status-noreply,.events.diff-by-calendar .event[data-calendar-id="0"].status-noreply.event-detail .header,.events.diff-by-calendar .event[data-calendar-id="0"].status-noreply.event-detail .details,.events.diff-by-calendar .event[data-calendar-id="0"].status-maybe,.events.diff-by-calendar .event[data-calendar-id="0"].status-maybe.event-detail .header,.events.diff-by-calendar .event[data-calendar-id="0"].status-maybe.event-detail .details{border-color:var(--nylas-agenda-calendar-1-bg-color, var(--primaryAndMainCalendar, var(--theme-calendar-1-bg-color)));color:var(--nylas-agenda-calendar-1-bg-color, var(--primaryAndMainCalendar, var(--theme-calendar-1-bg-color)))}.events.diff-by-calendar .event[data-calendar-id="1"]:not(.event-detail),.events.diff-by-calendar .event[data-calendar-id="1"].event-detail.status-yes .header,.events.diff-by-calendar .event[data-calendar-id="1"].event-detail.status-undefined .header{background-color:var(--nylas-agenda-calendar-2-bg-color, var(--secondaryCalendar, var(--theme-calendar-2-bg-color)))}.events.diff-by-calendar .event[data-calendar-id="1"].status-noreply,.events.diff-by-calendar .event[data-calendar-id="1"].status-noreply.event-detail .header,.events.diff-by-calendar .event[data-calendar-id="1"].status-noreply.event-detail .details,.events.diff-by-calendar .event[data-calendar-id="1"].status-maybe,.events.diff-by-calendar .event[data-calendar-id="1"].status-maybe.event-detail .header,.events.diff-by-calendar .event[data-calendar-id="1"].status-maybe.event-detail .details{border-color:var(--nylas-agenda-calendar-2-bg-color, var(--secondaryCalendar, var(--theme-calendar-2-bg-color)));color:var(--nylas-agenda-calendar-2-bg-color, var(--secondaryCalendar, var(--theme-calendar-2-bg-color)))}.events.diff-by-calendar .event[data-calendar-id="2"]:not(.event-detail),.events.diff-by-calendar .event[data-calendar-id="2"].event-detail.status-yes .header,.events.diff-by-calendar .event[data-calendar-id="2"].event-detail.status-undefined .header{background-color:var(--nylas-agenda-calendar-3-bg-color, var(--thirdCalendar, var(--theme-calendar-3-bg-color)))}.events.diff-by-calendar .event[data-calendar-id="2"].status-noreply,.events.diff-by-calendar .event[data-calendar-id="2"].status-noreply.event-detail .header,.events.diff-by-calendar .event[data-calendar-id="2"].status-noreply.event-detail .details,.events.diff-by-calendar .event[data-calendar-id="2"].status-maybe,.events.diff-by-calendar .event[data-calendar-id="2"].status-maybe.event-detail .header,.events.diff-by-calendar .event[data-calendar-id="2"].status-maybe.event-detail .details{border-color:var(--nylas-agenda-calendar-3-bg-color, var(--thirdCalendar, var(--theme-calendar-3-bg-color)));color:var(--nylas-agenda-calendar-3-bg-color, var(--thirdCalendar, var(--theme-calendar-3-bg-color)))}.events.diff-by-calendar .event[data-calendar-id="3"]:not(.event-detail),.events.diff-by-calendar .event[data-calendar-id="3"].event-detail.status-yes .header,.events.diff-by-calendar .event[data-calendar-id="3"].event-detail.status-undefined .header{background-color:var(--nylas-agenda-calendar-4-bg-color, var(--calendarColour4, var(--theme-calendar-4-bg-color)))}.events.diff-by-calendar .event[data-calendar-id="3"].status-noreply,.events.diff-by-calendar .event[data-calendar-id="3"].status-noreply.event-detail .header,.events.diff-by-calendar .event[data-calendar-id="3"].status-noreply.event-detail .details,.events.diff-by-calendar .event[data-calendar-id="3"].status-maybe,.events.diff-by-calendar .event[data-calendar-id="3"].status-maybe.event-detail .header,.events.diff-by-calendar .event[data-calendar-id="3"].status-maybe.event-detail .details{border-color:var(--nylas-agenda-calendar-4-bg-color, var(--calendarColour4, var(--theme-calendar-4-bg-color)));color:var(--nylas-agenda-calendar-4-bg-color, var(--calendarColour4, var(--theme-calendar-4-bg-color)))}.events.diff-by-calendar .event[data-calendar-id="4"]:not(.event-detail),.events.diff-by-calendar .event[data-calendar-id="4"].event-detail.status-yes .header,.events.diff-by-calendar .event[data-calendar-id="4"].event-detail.status-undefined .header{background-color:var(--nylas-agenda-calendar-5-bg-color, var(--calendarColour5, var(--theme-calendar-5-bg-color)))}.events.diff-by-calendar .event[data-calendar-id="4"].status-noreply,.events.diff-by-calendar .event[data-calendar-id="4"].status-noreply.event-detail .header,.events.diff-by-calendar .event[data-calendar-id="4"].status-noreply.event-detail .details,.events.diff-by-calendar .event[data-calendar-id="4"].status-maybe,.events.diff-by-calendar .event[data-calendar-id="4"].status-maybe.event-detail .header,.events.diff-by-calendar .event[data-calendar-id="4"].status-maybe.event-detail .details{border-color:var(--nylas-agenda-calendar-5-bg-color, var(--calendarColour5, var(--theme-calendar-5-bg-color)));color:var(--nylas-agenda-calendar-5-bg-color, var(--calendarColour5, var(--theme-calendar-5-bg-color)))}.events.diff-by-calendar .event[data-calendar-id="5"]:not(.event-detail),.events.diff-by-calendar .event[data-calendar-id="5"].event-detail.status-yes .header,.events.diff-by-calendar .event[data-calendar-id="5"].event-detail.status-undefined .header{background-color:var(--nylas-agenda-calendar-6-bg-color, var(--calendarColour6, var(--theme-calendar-6-bg-color)))}.events.diff-by-calendar .event[data-calendar-id="5"].status-noreply,.events.diff-by-calendar .event[data-calendar-id="5"].status-noreply.event-detail .header,.events.diff-by-calendar .event[data-calendar-id="5"].status-noreply.event-detail .details,.events.diff-by-calendar .event[data-calendar-id="5"].status-maybe,.events.diff-by-calendar .event[data-calendar-id="5"].status-maybe.event-detail .header,.events.diff-by-calendar .event[data-calendar-id="5"].status-maybe.event-detail .details{border-color:var(--nylas-agenda-calendar-6-bg-color, var(--calendarColour6, var(--theme-calendar-6-bg-color)));color:var(--nylas-agenda-calendar-6-bg-color, var(--calendarColour6, var(--theme-calendar-6-bg-color)))}.events.diff-by-calendar .event[data-calendar-id="6"]:not(.event-detail),.events.diff-by-calendar .event[data-calendar-id="6"].event-detail.status-yes .header,.events.diff-by-calendar .event[data-calendar-id="6"].event-detail.status-undefined .header{background-color:var(--nylas-agenda-calendar-7-bg-color, var(--calendarColour7, var(--theme-calendar-7-bg-color)))}.events.diff-by-calendar .event[data-calendar-id="6"].status-noreply,.events.diff-by-calendar .event[data-calendar-id="6"].status-noreply.event-detail .header,.events.diff-by-calendar .event[data-calendar-id="6"].status-noreply.event-detail .details,.events.diff-by-calendar .event[data-calendar-id="6"].status-maybe,.events.diff-by-calendar .event[data-calendar-id="6"].status-maybe.event-detail .header,.events.diff-by-calendar .event[data-calendar-id="6"].status-maybe.event-detail .details{border-color:var(--nylas-agenda-calendar-7-bg-color, var(--calendarColour7, var(--theme-calendar-7-bg-color)));color:var(--nylas-agenda-calendar-7-bg-color, var(--calendarColour7, var(--theme-calendar-7-bg-color)))}.events.diff-by-calendar .event[data-calendar-id="7"]:not(.event-detail),.events.diff-by-calendar .event[data-calendar-id="7"].event-detail.status-yes .header,.events.diff-by-calendar .event[data-calendar-id="7"].event-detail.status-undefined .header{background-color:var(--nylas-agenda-calendar-8-bg-color, var(--calendarColour8, var(--theme-calendar-8-bg-color)))}.events.diff-by-calendar .event[data-calendar-id="7"].status-noreply,.events.diff-by-calendar .event[data-calendar-id="7"].status-noreply.event-detail .header,.events.diff-by-calendar .event[data-calendar-id="7"].status-noreply.event-detail .details,.events.diff-by-calendar .event[data-calendar-id="7"].status-maybe,.events.diff-by-calendar .event[data-calendar-id="7"].status-maybe.event-detail .header,.events.diff-by-calendar .event[data-calendar-id="7"].status-maybe.event-detail .details{border-color:var(--nylas-agenda-calendar-8-bg-color, var(--calendarColour8, var(--theme-calendar-8-bg-color)));color:var(--nylas-agenda-calendar-8-bg-color, var(--calendarColour8, var(--theme-calendar-8-bg-color)))}.events.diff-by-calendar .event[data-calendar-id="8"]:not(.event-detail),.events.diff-by-calendar .event[data-calendar-id="8"].event-detail.status-yes .header,.events.diff-by-calendar .event[data-calendar-id="8"].event-detail.status-undefined .header{background-color:var(--nylas-agenda-calendar-9-bg-color, var(--calendarColour9, var(--theme-calendar-9-bg-color)))}.events.diff-by-calendar .event[data-calendar-id="8"].status-noreply,.events.diff-by-calendar .event[data-calendar-id="8"].status-noreply.event-detail .header,.events.diff-by-calendar .event[data-calendar-id="8"].status-noreply.event-detail .details,.events.diff-by-calendar .event[data-calendar-id="8"].status-maybe,.events.diff-by-calendar .event[data-calendar-id="8"].status-maybe.event-detail .header,.events.diff-by-calendar .event[data-calendar-id="8"].status-maybe.event-detail .details{border-color:var(--nylas-agenda-calendar-9-bg-color, var(--calendarColour9, var(--theme-calendar-9-bg-color)));color:var(--nylas-agenda-calendar-9-bg-color, var(--calendarColour9, var(--theme-calendar-9-bg-color)))}.events.diff-by-calendar .event[data-calendar-id="9"]:not(.event-detail),.events.diff-by-calendar .event[data-calendar-id="9"].event-detail.status-yes .header,.events.diff-by-calendar .event[data-calendar-id="9"].event-detail.status-undefined .header{background-color:var(--nylas-agenda-calendar-10-bg-color, var(--calendarColour10, var(--theme-calendar-10-bg-color)))}.events.diff-by-calendar .event[data-calendar-id="9"].status-noreply,.events.diff-by-calendar .event[data-calendar-id="9"].status-noreply.event-detail .header,.events.diff-by-calendar .event[data-calendar-id="9"].status-noreply.event-detail .details,.events.diff-by-calendar .event[data-calendar-id="9"].status-maybe,.events.diff-by-calendar .event[data-calendar-id="9"].status-maybe.event-detail .header,.events.diff-by-calendar .event[data-calendar-id="9"].status-maybe.event-detail .details{border-color:var(--nylas-agenda-calendar-10-bg-color, var(--calendarColour10, var(--theme-calendar-10-bg-color)));color:var(--nylas-agenda-calendar-10-bg-color, var(--calendarColour10, var(--theme-calendar-10-bg-color)))}.events.diff-by-calendar .event[data-calendar-id="10"]:not(.event-detail),.events.diff-by-calendar .event[data-calendar-id="10"].event-detail.status-yes .header,.events.diff-by-calendar .event[data-calendar-id="10"].event-detail.status-undefined .header{background-color:var(--nylas-agenda-calendar-1-bg-color, var(--primaryAndMainCalendar, var(--theme-calendar-1-bg-color)))}.events.diff-by-calendar .event[data-calendar-id="10"].status-noreply,.events.diff-by-calendar .event[data-calendar-id="10"].status-noreply.event-detail .header,.events.diff-by-calendar .event[data-calendar-id="10"].status-noreply.event-detail .details,.events.diff-by-calendar .event[data-calendar-id="10"].status-maybe,.events.diff-by-calendar .event[data-calendar-id="10"].status-maybe.event-detail .header,.events.diff-by-calendar .event[data-calendar-id="10"].status-maybe.event-detail .details{border-color:var(--nylas-agenda-calendar-1-bg-color, var(--primaryAndMainCalendar, var(--theme-calendar-1-bg-color)));color:var(--nylas-agenda-calendar-1-bg-color, var(--primaryAndMainCalendar, var(--theme-calendar-1-bg-color)))}.events .event:not(.event-detail.status-undefined):hover{background-color:var(--nylas-agenda-event-hover-bg-color, var(--nylas-agenda-calendar-1-bg-color, var(--primaryAndMainCalendar, var(--theme-calendar-1-bg-color))));color:var(--nylas-agenda-event-hover-color, var(--nylas-agenda-event-color, var(--calendarEventText, var(--theme-event-color))))}main{text-align:center;height:100%;margin:0 auto;font-family:inherit;display:grid;grid-template-rows:80px auto 1fr;grid-template-columns:1fr;grid-column-gap:5px;overflow:hidden;line-height:100%;transition:0.2s}main.headless{grid-template-rows:1fr}header{display:flex;flex-direction:column;align-items:center;justify-content:space-evenly;grid-column:1/3;color:var(--nylas-agenda-header-color, var(--mainTextAndDeclinedEvents, var(--theme-header-color)));background:var(--nylas-agenda-header-bg, var(--headerBackground, var(--theme-header-bg)));z-index:1;padding-left:10px}header button{padding:0rem 0.5rem;background:transparent}header button:first-of-type{padding-left:0}header button svg path{fill:var(--nylas-agenda-icons-bg-color, var(--linesAndIcons, var(--theme-icons-bg-color)));transition:0.2s}header .month,header .day{display:flex;flex-direction:row;gap:15px;align-items:center}header .month h1{font-size:26px;font-weight:bold;margin:0}header .month h1 span{font-weight:lighter}header .day{white-space:nowrap;display:grid}header .day.allow_date_change{grid-template-columns:1fr auto 1fr;width:100%}header .day button{cursor:pointer}header .day button.prev{text-align:right}header .day button.next{text-align:left}header .day button:hover svg path,header .day button:focus svg path{fill:hsl(var(--nylas-agenda-icons-bg-color, var(--linesAndIcons, var(--theme-icons-bg-color))), 50%)}header .day h2{font-size:20px;margin:0;font-weight:lighter}header .day h2 span{background-color:var(--nylas-agenda-calendar-1-bg-color, var(--primaryAndMainCalendar, var(--theme-calendar-1-bg-color)));color:var(--nylas-agenda-event-color, var(--calendarEventText, var(--theme-event-color)));border-radius:20px;display:inline-block;font-weight:bold;padding:4px;display:inline-block;width:22px;height:22px;font-weight:300;font-size:14px;text-align:center;line-height:22px}h2{font-family:inherit;font-size:12px;margin-bottom:0px;font-weight:600}.all-day{display:grid;grid-column:1/3;margin-bottom:1rem;max-height:20vh;overflow-y:scroll}.all-day .events{gap:0}.all-day .events .event{height:40px;position:relative;width:calc(100% - 4px)}.timespan{display:grid;grid-column:1/3;grid-template-columns:40px 1fr;grid-template-rows:1rem 1fr;overflow:hidden;line-height:100%;min-height:200px}.timespan.hide-ticks{grid-template-columns:0px 1fr;grid-template-rows:0px 1fr;grid-column-gap:0}.timespan.hide-ticks .ticks{visibility:hidden}.timespan.hide-ticks .offset{visibility:hidden}.offset{display:relative;grid-row:1/2;grid-column:1/3}.offset span{position:absolute;left:0;width:40px;text-align:right;display:block;white-space:nowrap;font-size:11px;opacity:0.6}.events{display:grid;gap:1rem;position:relative;min-width:100px;border-left:1px solid var(--nylas-agenda-dividers-border-color, var(--linesAndIcons, var(--theme-dividers-border-color)));border-right:1px solid var(--nylas-agenda-dividers-border-color, var(--linesAndIcons, var(--theme-dividers-border-color)))}.events.overflowing{overflow-y:auto}.events.scrolling .event,.events.scrolling .tick{transition:0s}.events .no-events{background:#eee;padding:1rem}.events .event{position:absolute;overflow:hidden;opacity:1;background:var(--nylas-agenda-calendar-1-bg-color, var(--primaryAndMainCalendar, var(--theme-calendar-1-bg-color)));border-radius:4px;box-sizing:border-box;color:var(--nylas-agenda-event-color, var(--calendarEventText, var(--theme-event-color)));cursor:pointer;text-align:left;font-size:0.9rem;letter-spacing:0.01rem;transition:0.5s;margin:2px;-webkit-font-smoothing:antialiased}.events .event.expanded{top:0 !important;left:0 !important;width:calc(100% - 4px) !important;height:calc(100% - 4px) !important;overflow-y:auto;z-index:1}.events .event.new-event{transition:none;animation-delay:0s !important;animation-duration:0s !important}.events .event.status-maybe{background-color:var(--nylas-agenda-empty-event-bg-color, var(--emptyEventBackground, #ddd)) !important;border-left-width:7px;color:var(--nylas-agenda-calendar-2-bg-color, var(--secondaryCalendar, var(--theme-calendar-2-bg-color))) !important;background-image:linear-gradient(45deg, transparent, transparent 40%, rgba(0, 0, 0, 0.2) 40%, rgba(0, 0, 0, 0.2) 50%, transparent 50%, transparent 90%, rgba(0, 0, 0, 0.2) 90%, rgba(0, 0, 0, 0.2));background-size:12px 12px}.events .event.status-noreply{background-color:var(--nylas-agenda-empty-event-bg-color, var(--emptyEventBackground, #ddd)) !important;color:var(--nylas-agenda-calendar-2-bg-color, var(--secondaryCalendar, var(--theme-calendar-2-bg-color, #444))) !important}.events .event.status-noreply a{color:var(--nylas-agenda-calendar-2-bg-color, var(--secondaryCalendar, var(--theme-calendar-2-bg-color))) !important}.events .event.status-no{border-color:var(--nylas-agenda-declined-event-color, var(--alertWarningDeclined, var(--theme-declined-event-color, #eb8f24)));color:var(--nylas-agenda-declined-event-color, var(--alertWarningDeclined, var(--theme-declined-event-color, #eb8f24)));background-color:var(--nylas-agenda-empty-event-bg-color, var(--emptyEventBackground, #ddd)) !important}.events .event.status-no>.inner>h2{text-decoration:line-through}.events .event.status-no a{color:var(--nylas-agenda-calendar-2-bg-color, var(--secondaryCalendar, var(--theme-calendar-2-bg-color))) !important}.events .event:nth-child(1){animation-name:eventsIn;animation-duration:0.5s;animation-delay:0.15s;animation-fill-mode:both}.events .event:nth-child(2){animation-name:eventsIn;animation-duration:0.5s;animation-delay:0.2s;animation-fill-mode:both}.events .event:nth-child(3){animation-name:eventsIn;animation-duration:0.5s;animation-delay:0.25s;animation-fill-mode:both}.events .event:nth-child(4){animation-name:eventsIn;animation-duration:0.5s;animation-delay:0.3s;animation-fill-mode:both}.events .event:nth-child(5){animation-name:eventsIn;animation-duration:0.5s;animation-delay:0.35s;animation-fill-mode:both}.events .event:nth-child(6){animation-name:eventsIn;animation-duration:0.5s;animation-delay:0.4s;animation-fill-mode:both}.events .event:nth-child(7){animation-name:eventsIn;animation-duration:0.5s;animation-delay:0.45s;animation-fill-mode:both}.events .event:nth-child(8){animation-name:eventsIn;animation-duration:0.5s;animation-delay:0.5s;animation-fill-mode:both}.events .event:nth-child(9){animation-name:eventsIn;animation-duration:0.5s;animation-delay:0.55s;animation-fill-mode:both}.events .event:nth-child(10){animation-name:eventsIn;animation-duration:0.5s;animation-delay:0.6s;animation-fill-mode:both}.events .event:nth-child(11){animation-name:eventsIn;animation-duration:0.5s;animation-delay:0.65s;animation-fill-mode:both}.events .event:nth-child(12){animation-name:eventsIn;animation-duration:0.5s;animation-delay:0.7s;animation-fill-mode:both}.events .event:nth-child(13){animation-name:eventsIn;animation-duration:0.5s;animation-delay:0.75s;animation-fill-mode:both}.events .event:nth-child(14){animation-name:eventsIn;animation-duration:0.5s;animation-delay:0.8s;animation-fill-mode:both}.events .event:nth-child(15){animation-name:eventsIn;animation-duration:0.5s;animation-delay:0.85s;animation-fill-mode:both}.events .event:nth-child(16){animation-name:eventsIn;animation-duration:0.5s;animation-delay:0.9s;animation-fill-mode:both}.events .event:nth-child(17){animation-name:eventsIn;animation-duration:0.5s;animation-delay:0.95s;animation-fill-mode:both}.events .event:nth-child(18){animation-name:eventsIn;animation-duration:0.5s;animation-delay:1s;animation-fill-mode:both}.events .event:nth-child(19){animation-name:eventsIn;animation-duration:0.5s;animation-delay:1.05s;animation-fill-mode:both}.events .event:nth-child(20){animation-name:eventsIn;animation-duration:0.5s;animation-delay:1.1s;animation-fill-mode:both}.events .event:nth-child(21){animation-name:eventsIn;animation-duration:0.5s;animation-delay:1.15s;animation-fill-mode:both}.events .event:nth-child(22){animation-name:eventsIn;animation-duration:0.5s;animation-delay:1.2s;animation-fill-mode:both}.events .event:nth-child(23){animation-name:eventsIn;animation-duration:0.5s;animation-delay:1.25s;animation-fill-mode:both}.events .event:nth-child(24){animation-name:eventsIn;animation-duration:0.5s;animation-delay:1.3s;animation-fill-mode:both}.events .event:nth-child(25){animation-name:eventsIn;animation-duration:0.5s;animation-delay:1.35s;animation-fill-mode:both}.events .event:nth-child(26){animation-name:eventsIn;animation-duration:0.5s;animation-delay:1.4s;animation-fill-mode:both}.events .event:nth-child(27){animation-name:eventsIn;animation-duration:0.5s;animation-delay:1.45s;animation-fill-mode:both}.events .event:nth-child(28){animation-name:eventsIn;animation-duration:0.5s;animation-delay:1.5s;animation-fill-mode:both}.events .event:nth-child(29){animation-name:eventsIn;animation-duration:0.5s;animation-delay:1.55s;animation-fill-mode:both}.events .event:nth-child(30){animation-name:eventsIn;animation-duration:0.5s;animation-delay:1.6s;animation-fill-mode:both}.events .event:nth-child(31){animation-name:eventsIn;animation-duration:0.5s;animation-delay:1.65s;animation-fill-mode:both}.events .event:nth-child(32){animation-name:eventsIn;animation-duration:0.5s;animation-delay:1.7s;animation-fill-mode:both}.events .event:nth-child(33){animation-name:eventsIn;animation-duration:0.5s;animation-delay:1.75s;animation-fill-mode:both}.events .event:nth-child(34){animation-name:eventsIn;animation-duration:0.5s;animation-delay:1.8s;animation-fill-mode:both}.events .event:nth-child(35){animation-name:eventsIn;animation-duration:0.5s;animation-delay:1.85s;animation-fill-mode:both}.events .event:nth-child(36){animation-name:eventsIn;animation-duration:0.5s;animation-delay:1.9s;animation-fill-mode:both}.events .event:nth-child(37){animation-name:eventsIn;animation-duration:0.5s;animation-delay:1.95s;animation-fill-mode:both}.events .event:nth-child(38){animation-name:eventsIn;animation-duration:0.5s;animation-delay:2s;animation-fill-mode:both}.events .event:nth-child(39){animation-name:eventsIn;animation-duration:0.5s;animation-delay:2.05s;animation-fill-mode:both}.events .event:nth-child(40){animation-name:eventsIn;animation-duration:0.5s;animation-delay:2.1s;animation-fill-mode:both}.events .event:nth-child(41){animation-name:eventsIn;animation-duration:0.5s;animation-delay:2.15s;animation-fill-mode:both}.events .event:nth-child(42){animation-name:eventsIn;animation-duration:0.5s;animation-delay:2.2s;animation-fill-mode:both}.events .event:nth-child(43){animation-name:eventsIn;animation-duration:0.5s;animation-delay:2.25s;animation-fill-mode:both}.events .event:nth-child(44){animation-name:eventsIn;animation-duration:0.5s;animation-delay:2.3s;animation-fill-mode:both}.events .event:nth-child(45){animation-name:eventsIn;animation-duration:0.5s;animation-delay:2.35s;animation-fill-mode:both}.events .event:nth-child(46){animation-name:eventsIn;animation-duration:0.5s;animation-delay:2.4s;animation-fill-mode:both}.events .event:nth-child(47){animation-name:eventsIn;animation-duration:0.5s;animation-delay:2.45s;animation-fill-mode:both}.events .event:nth-child(48){animation-name:eventsIn;animation-duration:0.5s;animation-delay:2.5s;animation-fill-mode:both}.events .event:nth-child(49){animation-name:eventsIn;animation-duration:0.5s;animation-delay:2.55s;animation-fill-mode:both}.events .event:nth-child(50){animation-name:eventsIn;animation-duration:0.5s;animation-delay:2.6s;animation-fill-mode:both}.events .event a{color:white;text-decoration:underline}.events .event .inner{padding:5px 5px 8px}.events .event .inner.tiny-event{padding-top:0}.events .event .inner.tiny-event h2,.events .event .inner.tiny-event span{font-size:70%}.events .event .inner span.time,.events .event .inner p{font-size:12px}.events .hour-ticks{height:100%;width:100%;position:relative}.events .hour-ticks span{position:absolute;height:1px;width:100%;border-top:1px solid var(--nylas-agenda-dividers-border-color, var(--linesAndIcons, var(--theme-dividers-border-color)));left:0}.ticks{pointer-events:none;height:100%;color:var(--nylas-agenda-ticks-color, var(--mainTextAndDeclinedEvents, var(--theme-ticks-color)));font-size:12px;position:relative;overflow:hidden}.ticks .tick{position:absolute;width:100%;text-align:right;display:block;white-space:nowrap;font-size:11px;opacity:0.5}.now{position:absolute;height:4px;width:100%;background-color:var(--nylas-agenda-current-time-bg-color, var(--timeLine, var(--theme-current-time-bg-color)))}.now svg{position:absolute;left:-39px;top:-6px;height:16px;width:39px}.now svg path{fill:var(--nylas-agenda-current-time-bg-color, var(--timeLine, var(--theme-current-time-bg-color)))}.condensed .events{grid-auto-rows:min-content;grid-column:1/3;gap:5px}.condensed .events .event{transition:0.5s}.condensed .events .event .inner{display:grid;grid-template-columns:min-content 1fr;gap:1rem}.condensed .events .event .inner>h2{grid-column:2;grid-row:1;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.condensed .events .event .inner>span.time{grid-column:1;grid-row:1;white-space:nowrap}.condensed .events .event .inner>p,.condensed .events .event .inner>.location{grid-column:1/-1}.condensed .events .event h2{float:left}.condensed .events .event span{float:left}.condensed .events .event p{clear:both}.condensed .ticks,.condensed .now{display:none}@media(min-width: 640px){main{max-width:none}}@keyframes eventsIn{0%{transform:translate(0, 30px);opacity:0}50%{opacity:1}100%{transform:translate(0, 0)}}</style>`,ya(this,{target:this.shadowRoot,props:da(this.attributes),customElement:!0},al,tl,na,{id:0,access_token:36,allow_date_change:37,allow_event_creation:38,allowed_dates:39,auto_time_box:40,end_minute:41,events:42,calendar_id:43,calendar_ids:44,click_action:45,color_by:46,condensed_view:47,eagerly_fetch_events:48,event_snap_interval:49,event_created:50,header_type:51,hide_all_day_events:52,hide_current_time:53,hide_ticks:54,prevent_zoom:55,selected_date:56,show_no_events_message:57,start_minute:58,theme:59,timezone:60,timezone_agnostic_all_day_events:61,display_metadata:62},null,[-1,-1,-1,-1,-1]),n&&(n.target&&G(n.target,this,n.anchor),n.props&&(this.$set(n.props),de()))}static get observedAttributes(){return["id","access_token","allow_date_change","allow_event_creation","allowed_dates","auto_time_box","end_minute","events","calendar_id","calendar_ids","click_action","color_by","condensed_view","eagerly_fetch_events","event_snap_interval","event_created","header_type","hide_all_day_events","hide_current_time","hide_ticks","prevent_zoom","selected_date","show_no_events_message","start_minute","theme","timezone","timezone_agnostic_all_day_events","display_metadata"]}get id(){return this.$$.ctx[0]}set id(n){this.$$set({id:n}),de()}get access_token(){return this.$$.ctx[36]}set access_token(n){this.$$set({access_token:n}),de()}get allow_date_change(){return this.$$.ctx[37]}set allow_date_change(n){this.$$set({allow_date_change:n}),de()}get allow_event_creation(){return this.$$.ctx[38]}set allow_event_creation(n){this.$$set({allow_event_creation:n}),de()}get allowed_dates(){return this.$$.ctx[39]}set allowed_dates(n){this.$$set({allowed_dates:n}),de()}get auto_time_box(){return this.$$.ctx[40]}set auto_time_box(n){this.$$set({auto_time_box:n}),de()}get end_minute(){return this.$$.ctx[41]}set end_minute(n){this.$$set({end_minute:n}),de()}get events(){return this.$$.ctx[42]}set events(n){this.$$set({events:n}),de()}get calendar_id(){return this.$$.ctx[43]}set calendar_id(n){this.$$set({calendar_id:n}),de()}get calendar_ids(){return this.$$.ctx[44]}set calendar_ids(n){this.$$set({calendar_ids:n}),de()}get click_action(){return this.$$.ctx[45]}set click_action(n){this.$$set({click_action:n}),de()}get color_by(){return this.$$.ctx[46]}set color_by(n){this.$$set({color_by:n}),de()}get condensed_view(){return this.$$.ctx[47]}set condensed_view(n){this.$$set({condensed_view:n}),de()}get eagerly_fetch_events(){return this.$$.ctx[48]}set eagerly_fetch_events(n){this.$$set({eagerly_fetch_events:n}),de()}get event_snap_interval(){return this.$$.ctx[49]}set event_snap_interval(n){this.$$set({event_snap_interval:n}),de()}get event_created(){return this.$$.ctx[50]}set event_created(n){this.$$set({event_created:n}),de()}get header_type(){return this.$$.ctx[51]}set header_type(n){this.$$set({header_type:n}),de()}get hide_all_day_events(){return this.$$.ctx[52]}set hide_all_day_events(n){this.$$set({hide_all_day_events:n}),de()}get hide_current_time(){return this.$$.ctx[53]}set hide_current_time(n){this.$$set({hide_current_time:n}),de()}get hide_ticks(){return this.$$.ctx[54]}set hide_ticks(n){this.$$set({hide_ticks:n}),de()}get prevent_zoom(){return this.$$.ctx[55]}set prevent_zoom(n){this.$$set({prevent_zoom:n}),de()}get selected_date(){return this.$$.ctx[56]}set selected_date(n){this.$$set({selected_date:n}),de()}get show_no_events_message(){return this.$$.ctx[57]}set show_no_events_message(n){this.$$set({show_no_events_message:n}),de()}get start_minute(){return this.$$.ctx[58]}set start_minute(n){this.$$set({start_minute:n}),de()}get theme(){return this.$$.ctx[59]}set theme(n){this.$$set({theme:n}),de()}get timezone(){return this.$$.ctx[60]}set timezone(n){this.$$set({timezone:n}),de()}get timezone_agnostic_all_day_events(){return this.$$.ctx[61]}set timezone_agnostic_all_day_events(n){this.$$set({timezone_agnostic_all_day_events:n}),de()}get display_metadata(){return this.$$.ctx[62]}set display_metadata(n){this.$$set({display_metadata:n}),de()}}return customElements.define("nylas-agenda",Ai),Ai});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5kZXguanMiLCJzb3VyY2VzIjpbIi4uLy4uL2NvbW1vbnMvc3JjL2RlZmluZS1jb21wb25lbnQtcGF0Y2gudHMiLCIuLi8uLi9ub2RlX21vZHVsZXMvc3ZlbHRlL2ludGVybmFsL2luZGV4Lm1qcyIsIi4uLy4uL25vZGVfbW9kdWxlcy9zdmVsdGUvc3RvcmUvaW5kZXgubWpzIiwiLi4vLi4vbm9kZV9tb2R1bGVzL3N2ZWx0ZS9tb3Rpb24vaW5kZXgubWpzIiwiLi4vLi4vY29tbW9ucy9zcmMvc3RvcmUvZXJyb3IudHMiLCIuLi8uLi9jb21tb25zL3NyYy9tZXRob2RzL2FwaS50cyIsIi4uLy4uL2NvbW1vbnMvc3JjL2Nvbm5lY3Rpb25zL2V2ZW50cy50cyIsIi4uLy4uL2NvbW1vbnMvc3JjL2Nvbm5lY3Rpb25zL3RocmVhZHMudHMiLCIuLi8uLi9jb21tb25zL3NyYy9jb25uZWN0aW9ucy9tYW5pZmVzdC50cyIsIi4uLy4uL2NvbW1vbnMvc3JjL2Nvbm5lY3Rpb25zL2F2YWlsYWJpbGl0eS50cyIsIi4uLy4uL2NvbW1vbnMvc3JjL3N0b3JlL2F2YWlsYWJpbGl0eS50cyIsIi4uLy4uL2NvbW1vbnMvc3JjL3N0b3JlL2NvbnNlY3V0aXZlLWF2YWlsYWJpbGl0eS50cyIsIi4uLy4uL2NvbW1vbnMvc3JjL3N0b3JlL2NhbGVuZGFycy50cyIsIi4uLy4uL2NvbW1vbnMvc3JjL3N0b3JlL2V2ZW50cy50cyIsIi4uLy4uL2NvbW1vbnMvc3JjL3N0b3JlL21haWxib3gudHMiLCIuLi8uLi9jb21tb25zL3NyYy9zdG9yZS9tYW5pZmVzdC50cyIsIi4uLy4uL2NvbW1vbnMvc3JjL21ldGhvZHMvY29tcG9uZW50LnRzIiwiLi4vLi4vY29tbW9ucy9zcmMvY29tcG9uZW50cy9ORXJyb3Iuc3ZlbHRlIiwiLi4vLi4vbm9kZV9tb2R1bGVzL2x1eG9uL2J1aWxkL2Nqcy1icm93c2VyL2x1eG9uLmpzIiwiLi4vLi4vY29tbW9ucy9zcmMvbWV0aG9kcy9jb252ZXJ0RGF0ZVRpbWVab25lLnRzIiwic3JjL21ldGhvZHMvcG9zaXRpb24udHMiLCJzcmMvbWV0aG9kcy90aW1lLnRzIiwiLi4vLi4vbm9kZV9tb2R1bGVzL2RvbXB1cmlmeS9kaXN0L3B1cmlmeS5qcyIsIi4uLy4uL25vZGVfbW9kdWxlcy9kMy10aW1lL3NyYy9pbnRlcnZhbC5qcyIsIi4uLy4uL25vZGVfbW9kdWxlcy9kMy10aW1lL3NyYy9kdXJhdGlvbi5qcyIsIi4uLy4uL25vZGVfbW9kdWxlcy9kMy10aW1lL3NyYy9kYXkuanMiLCJzcmMvQWdlbmRhLnN2ZWx0ZSJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgY29uc3Qgb3JpZ2luYWxEZWZpbmUgPSB3aW5kb3cuY3VzdG9tRWxlbWVudHMuZGVmaW5lLmJpbmQoXG4gIHdpbmRvdy5jdXN0b21FbGVtZW50cyxcbik7XG53aW5kb3cuY3VzdG9tRWxlbWVudHMuZGVmaW5lID0gKG5hbWU6IHN0cmluZywgLi4uYXJncykgPT4ge1xuICBpZiAoY3VzdG9tRWxlbWVudHMuZ2V0KG5hbWUpKSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIHJldHVybiBvcmlnaW5hbERlZmluZShuYW1lLCAuLi5hcmdzKTtcbn07XG4iLCJmdW5jdGlvbiBub29wKCkgeyB9XG5jb25zdCBpZGVudGl0eSA9IHggPT4geDtcbmZ1bmN0aW9uIGFzc2lnbih0YXIsIHNyYykge1xuICAgIC8vIEB0cy1pZ25vcmVcbiAgICBmb3IgKGNvbnN0IGsgaW4gc3JjKVxuICAgICAgICB0YXJba10gPSBzcmNba107XG4gICAgcmV0dXJuIHRhcjtcbn1cbmZ1bmN0aW9uIGlzX3Byb21pc2UodmFsdWUpIHtcbiAgICByZXR1cm4gdmFsdWUgJiYgdHlwZW9mIHZhbHVlID09PSAnb2JqZWN0JyAmJiB0eXBlb2YgdmFsdWUudGhlbiA9PT0gJ2Z1bmN0aW9uJztcbn1cbmZ1bmN0aW9uIGFkZF9sb2NhdGlvbihlbGVtZW50LCBmaWxlLCBsaW5lLCBjb2x1bW4sIGNoYXIpIHtcbiAgICBlbGVtZW50Ll9fc3ZlbHRlX21ldGEgPSB7XG4gICAgICAgIGxvYzogeyBmaWxlLCBsaW5lLCBjb2x1bW4sIGNoYXIgfVxuICAgIH07XG59XG5mdW5jdGlvbiBydW4oZm4pIHtcbiAgICByZXR1cm4gZm4oKTtcbn1cbmZ1bmN0aW9uIGJsYW5rX29iamVjdCgpIHtcbiAgICByZXR1cm4gT2JqZWN0LmNyZWF0ZShudWxsKTtcbn1cbmZ1bmN0aW9uIHJ1bl9hbGwoZm5zKSB7XG4gICAgZm5zLmZvckVhY2gocnVuKTtcbn1cbmZ1bmN0aW9uIGlzX2Z1bmN0aW9uKHRoaW5nKSB7XG4gICAgcmV0dXJuIHR5cGVvZiB0aGluZyA9PT0gJ2Z1bmN0aW9uJztcbn1cbmZ1bmN0aW9uIHNhZmVfbm90X2VxdWFsKGEsIGIpIHtcbiAgICByZXR1cm4gYSAhPSBhID8gYiA9PSBiIDogYSAhPT0gYiB8fCAoKGEgJiYgdHlwZW9mIGEgPT09ICdvYmplY3QnKSB8fCB0eXBlb2YgYSA9PT0gJ2Z1bmN0aW9uJyk7XG59XG5sZXQgc3JjX3VybF9lcXVhbF9hbmNob3I7XG5mdW5jdGlvbiBzcmNfdXJsX2VxdWFsKGVsZW1lbnRfc3JjLCB1cmwpIHtcbiAgICBpZiAoIXNyY191cmxfZXF1YWxfYW5jaG9yKSB7XG4gICAgICAgIHNyY191cmxfZXF1YWxfYW5jaG9yID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYScpO1xuICAgIH1cbiAgICBzcmNfdXJsX2VxdWFsX2FuY2hvci5ocmVmID0gdXJsO1xuICAgIHJldHVybiBlbGVtZW50X3NyYyA9PT0gc3JjX3VybF9lcXVhbF9hbmNob3IuaHJlZjtcbn1cbmZ1bmN0aW9uIG5vdF9lcXVhbChhLCBiKSB7XG4gICAgcmV0dXJuIGEgIT0gYSA/IGIgPT0gYiA6IGEgIT09IGI7XG59XG5mdW5jdGlvbiBpc19lbXB0eShvYmopIHtcbiAgICByZXR1cm4gT2JqZWN0LmtleXMob2JqKS5sZW5ndGggPT09IDA7XG59XG5mdW5jdGlvbiB2YWxpZGF0ZV9zdG9yZShzdG9yZSwgbmFtZSkge1xuICAgIGlmIChzdG9yZSAhPSBudWxsICYmIHR5cGVvZiBzdG9yZS5zdWJzY3JpYmUgIT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGAnJHtuYW1lfScgaXMgbm90IGEgc3RvcmUgd2l0aCBhICdzdWJzY3JpYmUnIG1ldGhvZGApO1xuICAgIH1cbn1cbmZ1bmN0aW9uIHN1YnNjcmliZShzdG9yZSwgLi4uY2FsbGJhY2tzKSB7XG4gICAgaWYgKHN0b3JlID09IG51bGwpIHtcbiAgICAgICAgcmV0dXJuIG5vb3A7XG4gICAgfVxuICAgIGNvbnN0IHVuc3ViID0gc3RvcmUuc3Vic2NyaWJlKC4uLmNhbGxiYWNrcyk7XG4gICAgcmV0dXJuIHVuc3ViLnVuc3Vic2NyaWJlID8gKCkgPT4gdW5zdWIudW5zdWJzY3JpYmUoKSA6IHVuc3ViO1xufVxuZnVuY3Rpb24gZ2V0X3N0b3JlX3ZhbHVlKHN0b3JlKSB7XG4gICAgbGV0IHZhbHVlO1xuICAgIHN1YnNjcmliZShzdG9yZSwgXyA9PiB2YWx1ZSA9IF8pKCk7XG4gICAgcmV0dXJuIHZhbHVlO1xufVxuZnVuY3Rpb24gY29tcG9uZW50X3N1YnNjcmliZShjb21wb25lbnQsIHN0b3JlLCBjYWxsYmFjaykge1xuICAgIGNvbXBvbmVudC4kJC5vbl9kZXN0cm95LnB1c2goc3Vic2NyaWJlKHN0b3JlLCBjYWxsYmFjaykpO1xufVxuZnVuY3Rpb24gY3JlYXRlX3Nsb3QoZGVmaW5pdGlvbiwgY3R4LCAkJHNjb3BlLCBmbikge1xuICAgIGlmIChkZWZpbml0aW9uKSB7XG4gICAgICAgIGNvbnN0IHNsb3RfY3R4ID0gZ2V0X3Nsb3RfY29udGV4dChkZWZpbml0aW9uLCBjdHgsICQkc2NvcGUsIGZuKTtcbiAgICAgICAgcmV0dXJuIGRlZmluaXRpb25bMF0oc2xvdF9jdHgpO1xuICAgIH1cbn1cbmZ1bmN0aW9uIGdldF9zbG90X2NvbnRleHQoZGVmaW5pdGlvbiwgY3R4LCAkJHNjb3BlLCBmbikge1xuICAgIHJldHVybiBkZWZpbml0aW9uWzFdICYmIGZuXG4gICAgICAgID8gYXNzaWduKCQkc2NvcGUuY3R4LnNsaWNlKCksIGRlZmluaXRpb25bMV0oZm4oY3R4KSkpXG4gICAgICAgIDogJCRzY29wZS5jdHg7XG59XG5mdW5jdGlvbiBnZXRfc2xvdF9jaGFuZ2VzKGRlZmluaXRpb24sICQkc2NvcGUsIGRpcnR5LCBmbikge1xuICAgIGlmIChkZWZpbml0aW9uWzJdICYmIGZuKSB7XG4gICAgICAgIGNvbnN0IGxldHMgPSBkZWZpbml0aW9uWzJdKGZuKGRpcnR5KSk7XG4gICAgICAgIGlmICgkJHNjb3BlLmRpcnR5ID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHJldHVybiBsZXRzO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0eXBlb2YgbGV0cyA9PT0gJ29iamVjdCcpIHtcbiAgICAgICAgICAgIGNvbnN0IG1lcmdlZCA9IFtdO1xuICAgICAgICAgICAgY29uc3QgbGVuID0gTWF0aC5tYXgoJCRzY29wZS5kaXJ0eS5sZW5ndGgsIGxldHMubGVuZ3RoKTtcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbGVuOyBpICs9IDEpIHtcbiAgICAgICAgICAgICAgICBtZXJnZWRbaV0gPSAkJHNjb3BlLmRpcnR5W2ldIHwgbGV0c1tpXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBtZXJnZWQ7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuICQkc2NvcGUuZGlydHkgfCBsZXRzO1xuICAgIH1cbiAgICByZXR1cm4gJCRzY29wZS5kaXJ0eTtcbn1cbmZ1bmN0aW9uIHVwZGF0ZV9zbG90X2Jhc2Uoc2xvdCwgc2xvdF9kZWZpbml0aW9uLCBjdHgsICQkc2NvcGUsIHNsb3RfY2hhbmdlcywgZ2V0X3Nsb3RfY29udGV4dF9mbikge1xuICAgIGlmIChzbG90X2NoYW5nZXMpIHtcbiAgICAgICAgY29uc3Qgc2xvdF9jb250ZXh0ID0gZ2V0X3Nsb3RfY29udGV4dChzbG90X2RlZmluaXRpb24sIGN0eCwgJCRzY29wZSwgZ2V0X3Nsb3RfY29udGV4dF9mbik7XG4gICAgICAgIHNsb3QucChzbG90X2NvbnRleHQsIHNsb3RfY2hhbmdlcyk7XG4gICAgfVxufVxuZnVuY3Rpb24gdXBkYXRlX3Nsb3Qoc2xvdCwgc2xvdF9kZWZpbml0aW9uLCBjdHgsICQkc2NvcGUsIGRpcnR5LCBnZXRfc2xvdF9jaGFuZ2VzX2ZuLCBnZXRfc2xvdF9jb250ZXh0X2ZuKSB7XG4gICAgY29uc3Qgc2xvdF9jaGFuZ2VzID0gZ2V0X3Nsb3RfY2hhbmdlcyhzbG90X2RlZmluaXRpb24sICQkc2NvcGUsIGRpcnR5LCBnZXRfc2xvdF9jaGFuZ2VzX2ZuKTtcbiAgICB1cGRhdGVfc2xvdF9iYXNlKHNsb3QsIHNsb3RfZGVmaW5pdGlvbiwgY3R4LCAkJHNjb3BlLCBzbG90X2NoYW5nZXMsIGdldF9zbG90X2NvbnRleHRfZm4pO1xufVxuZnVuY3Rpb24gZ2V0X2FsbF9kaXJ0eV9mcm9tX3Njb3BlKCQkc2NvcGUpIHtcbiAgICBpZiAoJCRzY29wZS5jdHgubGVuZ3RoID4gMzIpIHtcbiAgICAgICAgY29uc3QgZGlydHkgPSBbXTtcbiAgICAgICAgY29uc3QgbGVuZ3RoID0gJCRzY29wZS5jdHgubGVuZ3RoIC8gMzI7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGRpcnR5W2ldID0gLTE7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGRpcnR5O1xuICAgIH1cbiAgICByZXR1cm4gLTE7XG59XG5mdW5jdGlvbiBleGNsdWRlX2ludGVybmFsX3Byb3BzKHByb3BzKSB7XG4gICAgY29uc3QgcmVzdWx0ID0ge307XG4gICAgZm9yIChjb25zdCBrIGluIHByb3BzKVxuICAgICAgICBpZiAoa1swXSAhPT0gJyQnKVxuICAgICAgICAgICAgcmVzdWx0W2tdID0gcHJvcHNba107XG4gICAgcmV0dXJuIHJlc3VsdDtcbn1cbmZ1bmN0aW9uIGNvbXB1dGVfcmVzdF9wcm9wcyhwcm9wcywga2V5cykge1xuICAgIGNvbnN0IHJlc3QgPSB7fTtcbiAgICBrZXlzID0gbmV3IFNldChrZXlzKTtcbiAgICBmb3IgKGNvbnN0IGsgaW4gcHJvcHMpXG4gICAgICAgIGlmICgha2V5cy5oYXMoaykgJiYga1swXSAhPT0gJyQnKVxuICAgICAgICAgICAgcmVzdFtrXSA9IHByb3BzW2tdO1xuICAgIHJldHVybiByZXN0O1xufVxuZnVuY3Rpb24gY29tcHV0ZV9zbG90cyhzbG90cykge1xuICAgIGNvbnN0IHJlc3VsdCA9IHt9O1xuICAgIGZvciAoY29uc3Qga2V5IGluIHNsb3RzKSB7XG4gICAgICAgIHJlc3VsdFtrZXldID0gdHJ1ZTtcbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdDtcbn1cbmZ1bmN0aW9uIG9uY2UoZm4pIHtcbiAgICBsZXQgcmFuID0gZmFsc2U7XG4gICAgcmV0dXJuIGZ1bmN0aW9uICguLi5hcmdzKSB7XG4gICAgICAgIGlmIChyYW4pXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIHJhbiA9IHRydWU7XG4gICAgICAgIGZuLmNhbGwodGhpcywgLi4uYXJncyk7XG4gICAgfTtcbn1cbmZ1bmN0aW9uIG51bGxfdG9fZW1wdHkodmFsdWUpIHtcbiAgICByZXR1cm4gdmFsdWUgPT0gbnVsbCA/ICcnIDogdmFsdWU7XG59XG5mdW5jdGlvbiBzZXRfc3RvcmVfdmFsdWUoc3RvcmUsIHJldCwgdmFsdWUpIHtcbiAgICBzdG9yZS5zZXQodmFsdWUpO1xuICAgIHJldHVybiByZXQ7XG59XG5jb25zdCBoYXNfcHJvcCA9IChvYmosIHByb3ApID0+IE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIHByb3ApO1xuZnVuY3Rpb24gYWN0aW9uX2Rlc3Ryb3llcihhY3Rpb25fcmVzdWx0KSB7XG4gICAgcmV0dXJuIGFjdGlvbl9yZXN1bHQgJiYgaXNfZnVuY3Rpb24oYWN0aW9uX3Jlc3VsdC5kZXN0cm95KSA/IGFjdGlvbl9yZXN1bHQuZGVzdHJveSA6IG5vb3A7XG59XG5cbmNvbnN0IGlzX2NsaWVudCA9IHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnO1xubGV0IG5vdyA9IGlzX2NsaWVudFxuICAgID8gKCkgPT4gd2luZG93LnBlcmZvcm1hbmNlLm5vdygpXG4gICAgOiAoKSA9PiBEYXRlLm5vdygpO1xubGV0IHJhZiA9IGlzX2NsaWVudCA/IGNiID0+IHJlcXVlc3RBbmltYXRpb25GcmFtZShjYikgOiBub29wO1xuLy8gdXNlZCBpbnRlcm5hbGx5IGZvciB0ZXN0aW5nXG5mdW5jdGlvbiBzZXRfbm93KGZuKSB7XG4gICAgbm93ID0gZm47XG59XG5mdW5jdGlvbiBzZXRfcmFmKGZuKSB7XG4gICAgcmFmID0gZm47XG59XG5cbmNvbnN0IHRhc2tzID0gbmV3IFNldCgpO1xuZnVuY3Rpb24gcnVuX3Rhc2tzKG5vdykge1xuICAgIHRhc2tzLmZvckVhY2godGFzayA9PiB7XG4gICAgICAgIGlmICghdGFzay5jKG5vdykpIHtcbiAgICAgICAgICAgIHRhc2tzLmRlbGV0ZSh0YXNrKTtcbiAgICAgICAgICAgIHRhc2suZigpO1xuICAgICAgICB9XG4gICAgfSk7XG4gICAgaWYgKHRhc2tzLnNpemUgIT09IDApXG4gICAgICAgIHJhZihydW5fdGFza3MpO1xufVxuLyoqXG4gKiBGb3IgdGVzdGluZyBwdXJwb3NlcyBvbmx5IVxuICovXG5mdW5jdGlvbiBjbGVhcl9sb29wcygpIHtcbiAgICB0YXNrcy5jbGVhcigpO1xufVxuLyoqXG4gKiBDcmVhdGVzIGEgbmV3IHRhc2sgdGhhdCBydW5zIG9uIGVhY2ggcmFmIGZyYW1lXG4gKiB1bnRpbCBpdCByZXR1cm5zIGEgZmFsc3kgdmFsdWUgb3IgaXMgYWJvcnRlZFxuICovXG5mdW5jdGlvbiBsb29wKGNhbGxiYWNrKSB7XG4gICAgbGV0IHRhc2s7XG4gICAgaWYgKHRhc2tzLnNpemUgPT09IDApXG4gICAgICAgIHJhZihydW5fdGFza3MpO1xuICAgIHJldHVybiB7XG4gICAgICAgIHByb21pc2U6IG5ldyBQcm9taXNlKGZ1bGZpbGwgPT4ge1xuICAgICAgICAgICAgdGFza3MuYWRkKHRhc2sgPSB7IGM6IGNhbGxiYWNrLCBmOiBmdWxmaWxsIH0pO1xuICAgICAgICB9KSxcbiAgICAgICAgYWJvcnQoKSB7XG4gICAgICAgICAgICB0YXNrcy5kZWxldGUodGFzayk7XG4gICAgICAgIH1cbiAgICB9O1xufVxuXG4vLyBUcmFjayB3aGljaCBub2RlcyBhcmUgY2xhaW1lZCBkdXJpbmcgaHlkcmF0aW9uLiBVbmNsYWltZWQgbm9kZXMgY2FuIHRoZW4gYmUgcmVtb3ZlZCBmcm9tIHRoZSBET01cbi8vIGF0IHRoZSBlbmQgb2YgaHlkcmF0aW9uIHdpdGhvdXQgdG91Y2hpbmcgdGhlIHJlbWFpbmluZyBub2Rlcy5cbmxldCBpc19oeWRyYXRpbmcgPSBmYWxzZTtcbmZ1bmN0aW9uIHN0YXJ0X2h5ZHJhdGluZygpIHtcbiAgICBpc19oeWRyYXRpbmcgPSB0cnVlO1xufVxuZnVuY3Rpb24gZW5kX2h5ZHJhdGluZygpIHtcbiAgICBpc19oeWRyYXRpbmcgPSBmYWxzZTtcbn1cbmZ1bmN0aW9uIHVwcGVyX2JvdW5kKGxvdywgaGlnaCwga2V5LCB2YWx1ZSkge1xuICAgIC8vIFJldHVybiBmaXJzdCBpbmRleCBvZiB2YWx1ZSBsYXJnZXIgdGhhbiBpbnB1dCB2YWx1ZSBpbiB0aGUgcmFuZ2UgW2xvdywgaGlnaClcbiAgICB3aGlsZSAobG93IDwgaGlnaCkge1xuICAgICAgICBjb25zdCBtaWQgPSBsb3cgKyAoKGhpZ2ggLSBsb3cpID4+IDEpO1xuICAgICAgICBpZiAoa2V5KG1pZCkgPD0gdmFsdWUpIHtcbiAgICAgICAgICAgIGxvdyA9IG1pZCArIDE7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBoaWdoID0gbWlkO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBsb3c7XG59XG5mdW5jdGlvbiBpbml0X2h5ZHJhdGUodGFyZ2V0KSB7XG4gICAgaWYgKHRhcmdldC5oeWRyYXRlX2luaXQpXG4gICAgICAgIHJldHVybjtcbiAgICB0YXJnZXQuaHlkcmF0ZV9pbml0ID0gdHJ1ZTtcbiAgICAvLyBXZSBrbm93IHRoYXQgYWxsIGNoaWxkcmVuIGhhdmUgY2xhaW1fb3JkZXIgdmFsdWVzIHNpbmNlIHRoZSB1bmNsYWltZWQgaGF2ZSBiZWVuIGRldGFjaGVkIGlmIHRhcmdldCBpcyBub3QgPGhlYWQ+XG4gICAgbGV0IGNoaWxkcmVuID0gdGFyZ2V0LmNoaWxkTm9kZXM7XG4gICAgLy8gSWYgdGFyZ2V0IGlzIDxoZWFkPiwgdGhlcmUgbWF5IGJlIGNoaWxkcmVuIHdpdGhvdXQgY2xhaW1fb3JkZXJcbiAgICBpZiAodGFyZ2V0Lm5vZGVOYW1lID09PSAnSEVBRCcpIHtcbiAgICAgICAgY29uc3QgbXlDaGlsZHJlbiA9IFtdO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGNoaWxkcmVuLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBjb25zdCBub2RlID0gY2hpbGRyZW5baV07XG4gICAgICAgICAgICBpZiAobm9kZS5jbGFpbV9vcmRlciAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgbXlDaGlsZHJlbi5wdXNoKG5vZGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGNoaWxkcmVuID0gbXlDaGlsZHJlbjtcbiAgICB9XG4gICAgLypcbiAgICAqIFJlb3JkZXIgY2xhaW1lZCBjaGlsZHJlbiBvcHRpbWFsbHkuXG4gICAgKiBXZSBjYW4gcmVvcmRlciBjbGFpbWVkIGNoaWxkcmVuIG9wdGltYWxseSBieSBmaW5kaW5nIHRoZSBsb25nZXN0IHN1YnNlcXVlbmNlIG9mXG4gICAgKiBub2RlcyB0aGF0IGFyZSBhbHJlYWR5IGNsYWltZWQgaW4gb3JkZXIgYW5kIG9ubHkgbW92aW5nIHRoZSByZXN0LiBUaGUgbG9uZ2VzdFxuICAgICogc3Vic2VxdWVuY2Ugc3Vic2VxdWVuY2Ugb2Ygbm9kZXMgdGhhdCBhcmUgY2xhaW1lZCBpbiBvcmRlciBjYW4gYmUgZm91bmQgYnlcbiAgICAqIGNvbXB1dGluZyB0aGUgbG9uZ2VzdCBpbmNyZWFzaW5nIHN1YnNlcXVlbmNlIG9mIC5jbGFpbV9vcmRlciB2YWx1ZXMuXG4gICAgKlxuICAgICogVGhpcyBhbGdvcml0aG0gaXMgb3B0aW1hbCBpbiBnZW5lcmF0aW5nIHRoZSBsZWFzdCBhbW91bnQgb2YgcmVvcmRlciBvcGVyYXRpb25zXG4gICAgKiBwb3NzaWJsZS5cbiAgICAqXG4gICAgKiBQcm9vZjpcbiAgICAqIFdlIGtub3cgdGhhdCwgZ2l2ZW4gYSBzZXQgb2YgcmVvcmRlcmluZyBvcGVyYXRpb25zLCB0aGUgbm9kZXMgdGhhdCBkbyBub3QgbW92ZVxuICAgICogYWx3YXlzIGZvcm0gYW4gaW5jcmVhc2luZyBzdWJzZXF1ZW5jZSwgc2luY2UgdGhleSBkbyBub3QgbW92ZSBhbW9uZyBlYWNoIG90aGVyXG4gICAgKiBtZWFuaW5nIHRoYXQgdGhleSBtdXN0IGJlIGFscmVhZHkgb3JkZXJlZCBhbW9uZyBlYWNoIG90aGVyLiBUaHVzLCB0aGUgbWF4aW1hbFxuICAgICogc2V0IG9mIG5vZGVzIHRoYXQgZG8gbm90IG1vdmUgZm9ybSBhIGxvbmdlc3QgaW5jcmVhc2luZyBzdWJzZXF1ZW5jZS5cbiAgICAqL1xuICAgIC8vIENvbXB1dGUgbG9uZ2VzdCBpbmNyZWFzaW5nIHN1YnNlcXVlbmNlXG4gICAgLy8gbTogc3Vic2VxdWVuY2UgbGVuZ3RoIGogPT4gaW5kZXggayBvZiBzbWFsbGVzdCB2YWx1ZSB0aGF0IGVuZHMgYW4gaW5jcmVhc2luZyBzdWJzZXF1ZW5jZSBvZiBsZW5ndGggalxuICAgIGNvbnN0IG0gPSBuZXcgSW50MzJBcnJheShjaGlsZHJlbi5sZW5ndGggKyAxKTtcbiAgICAvLyBQcmVkZWNlc3NvciBpbmRpY2VzICsgMVxuICAgIGNvbnN0IHAgPSBuZXcgSW50MzJBcnJheShjaGlsZHJlbi5sZW5ndGgpO1xuICAgIG1bMF0gPSAtMTtcbiAgICBsZXQgbG9uZ2VzdCA9IDA7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBjaGlsZHJlbi5sZW5ndGg7IGkrKykge1xuICAgICAgICBjb25zdCBjdXJyZW50ID0gY2hpbGRyZW5baV0uY2xhaW1fb3JkZXI7XG4gICAgICAgIC8vIEZpbmQgdGhlIGxhcmdlc3Qgc3Vic2VxdWVuY2UgbGVuZ3RoIHN1Y2ggdGhhdCBpdCBlbmRzIGluIGEgdmFsdWUgbGVzcyB0aGFuIG91ciBjdXJyZW50IHZhbHVlXG4gICAgICAgIC8vIHVwcGVyX2JvdW5kIHJldHVybnMgZmlyc3QgZ3JlYXRlciB2YWx1ZSwgc28gd2Ugc3VidHJhY3Qgb25lXG4gICAgICAgIC8vIHdpdGggZmFzdCBwYXRoIGZvciB3aGVuIHdlIGFyZSBvbiB0aGUgY3VycmVudCBsb25nZXN0IHN1YnNlcXVlbmNlXG4gICAgICAgIGNvbnN0IHNlcUxlbiA9ICgobG9uZ2VzdCA+IDAgJiYgY2hpbGRyZW5bbVtsb25nZXN0XV0uY2xhaW1fb3JkZXIgPD0gY3VycmVudCkgPyBsb25nZXN0ICsgMSA6IHVwcGVyX2JvdW5kKDEsIGxvbmdlc3QsIGlkeCA9PiBjaGlsZHJlblttW2lkeF1dLmNsYWltX29yZGVyLCBjdXJyZW50KSkgLSAxO1xuICAgICAgICBwW2ldID0gbVtzZXFMZW5dICsgMTtcbiAgICAgICAgY29uc3QgbmV3TGVuID0gc2VxTGVuICsgMTtcbiAgICAgICAgLy8gV2UgY2FuIGd1YXJhbnRlZSB0aGF0IGN1cnJlbnQgaXMgdGhlIHNtYWxsZXN0IHZhbHVlLiBPdGhlcndpc2UsIHdlIHdvdWxkIGhhdmUgZ2VuZXJhdGVkIGEgbG9uZ2VyIHNlcXVlbmNlLlxuICAgICAgICBtW25ld0xlbl0gPSBpO1xuICAgICAgICBsb25nZXN0ID0gTWF0aC5tYXgobmV3TGVuLCBsb25nZXN0KTtcbiAgICB9XG4gICAgLy8gVGhlIGxvbmdlc3QgaW5jcmVhc2luZyBzdWJzZXF1ZW5jZSBvZiBub2RlcyAoaW5pdGlhbGx5IHJldmVyc2VkKVxuICAgIGNvbnN0IGxpcyA9IFtdO1xuICAgIC8vIFRoZSByZXN0IG9mIHRoZSBub2Rlcywgbm9kZXMgdGhhdCB3aWxsIGJlIG1vdmVkXG4gICAgY29uc3QgdG9Nb3ZlID0gW107XG4gICAgbGV0IGxhc3QgPSBjaGlsZHJlbi5sZW5ndGggLSAxO1xuICAgIGZvciAobGV0IGN1ciA9IG1bbG9uZ2VzdF0gKyAxOyBjdXIgIT0gMDsgY3VyID0gcFtjdXIgLSAxXSkge1xuICAgICAgICBsaXMucHVzaChjaGlsZHJlbltjdXIgLSAxXSk7XG4gICAgICAgIGZvciAoOyBsYXN0ID49IGN1cjsgbGFzdC0tKSB7XG4gICAgICAgICAgICB0b01vdmUucHVzaChjaGlsZHJlbltsYXN0XSk7XG4gICAgICAgIH1cbiAgICAgICAgbGFzdC0tO1xuICAgIH1cbiAgICBmb3IgKDsgbGFzdCA+PSAwOyBsYXN0LS0pIHtcbiAgICAgICAgdG9Nb3ZlLnB1c2goY2hpbGRyZW5bbGFzdF0pO1xuICAgIH1cbiAgICBsaXMucmV2ZXJzZSgpO1xuICAgIC8vIFdlIHNvcnQgdGhlIG5vZGVzIGJlaW5nIG1vdmVkIHRvIGd1YXJhbnRlZSB0aGF0IHRoZWlyIGluc2VydGlvbiBvcmRlciBtYXRjaGVzIHRoZSBjbGFpbSBvcmRlclxuICAgIHRvTW92ZS5zb3J0KChhLCBiKSA9PiBhLmNsYWltX29yZGVyIC0gYi5jbGFpbV9vcmRlcik7XG4gICAgLy8gRmluYWxseSwgd2UgbW92ZSB0aGUgbm9kZXNcbiAgICBmb3IgKGxldCBpID0gMCwgaiA9IDA7IGkgPCB0b01vdmUubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgd2hpbGUgKGogPCBsaXMubGVuZ3RoICYmIHRvTW92ZVtpXS5jbGFpbV9vcmRlciA+PSBsaXNbal0uY2xhaW1fb3JkZXIpIHtcbiAgICAgICAgICAgIGorKztcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBhbmNob3IgPSBqIDwgbGlzLmxlbmd0aCA/IGxpc1tqXSA6IG51bGw7XG4gICAgICAgIHRhcmdldC5pbnNlcnRCZWZvcmUodG9Nb3ZlW2ldLCBhbmNob3IpO1xuICAgIH1cbn1cbmZ1bmN0aW9uIGFwcGVuZCh0YXJnZXQsIG5vZGUpIHtcbiAgICB0YXJnZXQuYXBwZW5kQ2hpbGQobm9kZSk7XG59XG5mdW5jdGlvbiBhcHBlbmRfc3R5bGVzKHRhcmdldCwgc3R5bGVfc2hlZXRfaWQsIHN0eWxlcykge1xuICAgIGNvbnN0IGFwcGVuZF9zdHlsZXNfdG8gPSBnZXRfcm9vdF9mb3Jfc3R5bGUodGFyZ2V0KTtcbiAgICBpZiAoIWFwcGVuZF9zdHlsZXNfdG8uZ2V0RWxlbWVudEJ5SWQoc3R5bGVfc2hlZXRfaWQpKSB7XG4gICAgICAgIGNvbnN0IHN0eWxlID0gZWxlbWVudCgnc3R5bGUnKTtcbiAgICAgICAgc3R5bGUuaWQgPSBzdHlsZV9zaGVldF9pZDtcbiAgICAgICAgc3R5bGUudGV4dENvbnRlbnQgPSBzdHlsZXM7XG4gICAgICAgIGFwcGVuZF9zdHlsZXNoZWV0KGFwcGVuZF9zdHlsZXNfdG8sIHN0eWxlKTtcbiAgICB9XG59XG5mdW5jdGlvbiBnZXRfcm9vdF9mb3Jfc3R5bGUobm9kZSkge1xuICAgIGlmICghbm9kZSlcbiAgICAgICAgcmV0dXJuIGRvY3VtZW50O1xuICAgIGNvbnN0IHJvb3QgPSBub2RlLmdldFJvb3ROb2RlID8gbm9kZS5nZXRSb290Tm9kZSgpIDogbm9kZS5vd25lckRvY3VtZW50O1xuICAgIGlmIChyb290ICYmIHJvb3QuaG9zdCkge1xuICAgICAgICByZXR1cm4gcm9vdDtcbiAgICB9XG4gICAgcmV0dXJuIG5vZGUub3duZXJEb2N1bWVudDtcbn1cbmZ1bmN0aW9uIGFwcGVuZF9lbXB0eV9zdHlsZXNoZWV0KG5vZGUpIHtcbiAgICBjb25zdCBzdHlsZV9lbGVtZW50ID0gZWxlbWVudCgnc3R5bGUnKTtcbiAgICBhcHBlbmRfc3R5bGVzaGVldChnZXRfcm9vdF9mb3Jfc3R5bGUobm9kZSksIHN0eWxlX2VsZW1lbnQpO1xuICAgIHJldHVybiBzdHlsZV9lbGVtZW50LnNoZWV0O1xufVxuZnVuY3Rpb24gYXBwZW5kX3N0eWxlc2hlZXQobm9kZSwgc3R5bGUpIHtcbiAgICBhcHBlbmQobm9kZS5oZWFkIHx8IG5vZGUsIHN0eWxlKTtcbn1cbmZ1bmN0aW9uIGFwcGVuZF9oeWRyYXRpb24odGFyZ2V0LCBub2RlKSB7XG4gICAgaWYgKGlzX2h5ZHJhdGluZykge1xuICAgICAgICBpbml0X2h5ZHJhdGUodGFyZ2V0KTtcbiAgICAgICAgaWYgKCh0YXJnZXQuYWN0dWFsX2VuZF9jaGlsZCA9PT0gdW5kZWZpbmVkKSB8fCAoKHRhcmdldC5hY3R1YWxfZW5kX2NoaWxkICE9PSBudWxsKSAmJiAodGFyZ2V0LmFjdHVhbF9lbmRfY2hpbGQucGFyZW50RWxlbWVudCAhPT0gdGFyZ2V0KSkpIHtcbiAgICAgICAgICAgIHRhcmdldC5hY3R1YWxfZW5kX2NoaWxkID0gdGFyZ2V0LmZpcnN0Q2hpbGQ7XG4gICAgICAgIH1cbiAgICAgICAgLy8gU2tpcCBub2RlcyBvZiB1bmRlZmluZWQgb3JkZXJpbmdcbiAgICAgICAgd2hpbGUgKCh0YXJnZXQuYWN0dWFsX2VuZF9jaGlsZCAhPT0gbnVsbCkgJiYgKHRhcmdldC5hY3R1YWxfZW5kX2NoaWxkLmNsYWltX29yZGVyID09PSB1bmRlZmluZWQpKSB7XG4gICAgICAgICAgICB0YXJnZXQuYWN0dWFsX2VuZF9jaGlsZCA9IHRhcmdldC5hY3R1YWxfZW5kX2NoaWxkLm5leHRTaWJsaW5nO1xuICAgICAgICB9XG4gICAgICAgIGlmIChub2RlICE9PSB0YXJnZXQuYWN0dWFsX2VuZF9jaGlsZCkge1xuICAgICAgICAgICAgLy8gV2Ugb25seSBpbnNlcnQgaWYgdGhlIG9yZGVyaW5nIG9mIHRoaXMgbm9kZSBzaG91bGQgYmUgbW9kaWZpZWQgb3IgdGhlIHBhcmVudCBub2RlIGlzIG5vdCB0YXJnZXRcbiAgICAgICAgICAgIGlmIChub2RlLmNsYWltX29yZGVyICE9PSB1bmRlZmluZWQgfHwgbm9kZS5wYXJlbnROb2RlICE9PSB0YXJnZXQpIHtcbiAgICAgICAgICAgICAgICB0YXJnZXQuaW5zZXJ0QmVmb3JlKG5vZGUsIHRhcmdldC5hY3R1YWxfZW5kX2NoaWxkKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRhcmdldC5hY3R1YWxfZW5kX2NoaWxkID0gbm9kZS5uZXh0U2libGluZztcbiAgICAgICAgfVxuICAgIH1cbiAgICBlbHNlIGlmIChub2RlLnBhcmVudE5vZGUgIT09IHRhcmdldCB8fCBub2RlLm5leHRTaWJsaW5nICE9PSBudWxsKSB7XG4gICAgICAgIHRhcmdldC5hcHBlbmRDaGlsZChub2RlKTtcbiAgICB9XG59XG5mdW5jdGlvbiBpbnNlcnQodGFyZ2V0LCBub2RlLCBhbmNob3IpIHtcbiAgICB0YXJnZXQuaW5zZXJ0QmVmb3JlKG5vZGUsIGFuY2hvciB8fCBudWxsKTtcbn1cbmZ1bmN0aW9uIGluc2VydF9oeWRyYXRpb24odGFyZ2V0LCBub2RlLCBhbmNob3IpIHtcbiAgICBpZiAoaXNfaHlkcmF0aW5nICYmICFhbmNob3IpIHtcbiAgICAgICAgYXBwZW5kX2h5ZHJhdGlvbih0YXJnZXQsIG5vZGUpO1xuICAgIH1cbiAgICBlbHNlIGlmIChub2RlLnBhcmVudE5vZGUgIT09IHRhcmdldCB8fCBub2RlLm5leHRTaWJsaW5nICE9IGFuY2hvcikge1xuICAgICAgICB0YXJnZXQuaW5zZXJ0QmVmb3JlKG5vZGUsIGFuY2hvciB8fCBudWxsKTtcbiAgICB9XG59XG5mdW5jdGlvbiBkZXRhY2gobm9kZSkge1xuICAgIG5vZGUucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChub2RlKTtcbn1cbmZ1bmN0aW9uIGRlc3Ryb3lfZWFjaChpdGVyYXRpb25zLCBkZXRhY2hpbmcpIHtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGl0ZXJhdGlvbnMubGVuZ3RoOyBpICs9IDEpIHtcbiAgICAgICAgaWYgKGl0ZXJhdGlvbnNbaV0pXG4gICAgICAgICAgICBpdGVyYXRpb25zW2ldLmQoZGV0YWNoaW5nKTtcbiAgICB9XG59XG5mdW5jdGlvbiBlbGVtZW50KG5hbWUpIHtcbiAgICByZXR1cm4gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChuYW1lKTtcbn1cbmZ1bmN0aW9uIGVsZW1lbnRfaXMobmFtZSwgaXMpIHtcbiAgICByZXR1cm4gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChuYW1lLCB7IGlzIH0pO1xufVxuZnVuY3Rpb24gb2JqZWN0X3dpdGhvdXRfcHJvcGVydGllcyhvYmosIGV4Y2x1ZGUpIHtcbiAgICBjb25zdCB0YXJnZXQgPSB7fTtcbiAgICBmb3IgKGNvbnN0IGsgaW4gb2JqKSB7XG4gICAgICAgIGlmIChoYXNfcHJvcChvYmosIGspXG4gICAgICAgICAgICAvLyBAdHMtaWdub3JlXG4gICAgICAgICAgICAmJiBleGNsdWRlLmluZGV4T2YoaykgPT09IC0xKSB7XG4gICAgICAgICAgICAvLyBAdHMtaWdub3JlXG4gICAgICAgICAgICB0YXJnZXRba10gPSBvYmpba107XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHRhcmdldDtcbn1cbmZ1bmN0aW9uIHN2Z19lbGVtZW50KG5hbWUpIHtcbiAgICByZXR1cm4gZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKCdodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZycsIG5hbWUpO1xufVxuZnVuY3Rpb24gdGV4dChkYXRhKSB7XG4gICAgcmV0dXJuIGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKGRhdGEpO1xufVxuZnVuY3Rpb24gc3BhY2UoKSB7XG4gICAgcmV0dXJuIHRleHQoJyAnKTtcbn1cbmZ1bmN0aW9uIGVtcHR5KCkge1xuICAgIHJldHVybiB0ZXh0KCcnKTtcbn1cbmZ1bmN0aW9uIGxpc3Rlbihub2RlLCBldmVudCwgaGFuZGxlciwgb3B0aW9ucykge1xuICAgIG5vZGUuYWRkRXZlbnRMaXN0ZW5lcihldmVudCwgaGFuZGxlciwgb3B0aW9ucyk7XG4gICAgcmV0dXJuICgpID0+IG5vZGUucmVtb3ZlRXZlbnRMaXN0ZW5lcihldmVudCwgaGFuZGxlciwgb3B0aW9ucyk7XG59XG5mdW5jdGlvbiBwcmV2ZW50X2RlZmF1bHQoZm4pIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIC8vIEB0cy1pZ25vcmVcbiAgICAgICAgcmV0dXJuIGZuLmNhbGwodGhpcywgZXZlbnQpO1xuICAgIH07XG59XG5mdW5jdGlvbiBzdG9wX3Byb3BhZ2F0aW9uKGZuKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgLy8gQHRzLWlnbm9yZVxuICAgICAgICByZXR1cm4gZm4uY2FsbCh0aGlzLCBldmVudCk7XG4gICAgfTtcbn1cbmZ1bmN0aW9uIHNlbGYoZm4pIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgIC8vIEB0cy1pZ25vcmVcbiAgICAgICAgaWYgKGV2ZW50LnRhcmdldCA9PT0gdGhpcylcbiAgICAgICAgICAgIGZuLmNhbGwodGhpcywgZXZlbnQpO1xuICAgIH07XG59XG5mdW5jdGlvbiB0cnVzdGVkKGZuKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICAvLyBAdHMtaWdub3JlXG4gICAgICAgIGlmIChldmVudC5pc1RydXN0ZWQpXG4gICAgICAgICAgICBmbi5jYWxsKHRoaXMsIGV2ZW50KTtcbiAgICB9O1xufVxuZnVuY3Rpb24gYXR0cihub2RlLCBhdHRyaWJ1dGUsIHZhbHVlKSB7XG4gICAgaWYgKHZhbHVlID09IG51bGwpXG4gICAgICAgIG5vZGUucmVtb3ZlQXR0cmlidXRlKGF0dHJpYnV0ZSk7XG4gICAgZWxzZSBpZiAobm9kZS5nZXRBdHRyaWJ1dGUoYXR0cmlidXRlKSAhPT0gdmFsdWUpXG4gICAgICAgIG5vZGUuc2V0QXR0cmlidXRlKGF0dHJpYnV0ZSwgdmFsdWUpO1xufVxuZnVuY3Rpb24gc2V0X2F0dHJpYnV0ZXMobm9kZSwgYXR0cmlidXRlcykge1xuICAgIC8vIEB0cy1pZ25vcmVcbiAgICBjb25zdCBkZXNjcmlwdG9ycyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzKG5vZGUuX19wcm90b19fKTtcbiAgICBmb3IgKGNvbnN0IGtleSBpbiBhdHRyaWJ1dGVzKSB7XG4gICAgICAgIGlmIChhdHRyaWJ1dGVzW2tleV0gPT0gbnVsbCkge1xuICAgICAgICAgICAgbm9kZS5yZW1vdmVBdHRyaWJ1dGUoa2V5KTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChrZXkgPT09ICdzdHlsZScpIHtcbiAgICAgICAgICAgIG5vZGUuc3R5bGUuY3NzVGV4dCA9IGF0dHJpYnV0ZXNba2V5XTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChrZXkgPT09ICdfX3ZhbHVlJykge1xuICAgICAgICAgICAgbm9kZS52YWx1ZSA9IG5vZGVba2V5XSA9IGF0dHJpYnV0ZXNba2V5XTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChkZXNjcmlwdG9yc1trZXldICYmIGRlc2NyaXB0b3JzW2tleV0uc2V0KSB7XG4gICAgICAgICAgICBub2RlW2tleV0gPSBhdHRyaWJ1dGVzW2tleV07XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBhdHRyKG5vZGUsIGtleSwgYXR0cmlidXRlc1trZXldKTtcbiAgICAgICAgfVxuICAgIH1cbn1cbmZ1bmN0aW9uIHNldF9zdmdfYXR0cmlidXRlcyhub2RlLCBhdHRyaWJ1dGVzKSB7XG4gICAgZm9yIChjb25zdCBrZXkgaW4gYXR0cmlidXRlcykge1xuICAgICAgICBhdHRyKG5vZGUsIGtleSwgYXR0cmlidXRlc1trZXldKTtcbiAgICB9XG59XG5mdW5jdGlvbiBzZXRfY3VzdG9tX2VsZW1lbnRfZGF0YShub2RlLCBwcm9wLCB2YWx1ZSkge1xuICAgIGlmIChwcm9wIGluIG5vZGUpIHtcbiAgICAgICAgbm9kZVtwcm9wXSA9IHR5cGVvZiBub2RlW3Byb3BdID09PSAnYm9vbGVhbicgJiYgdmFsdWUgPT09ICcnID8gdHJ1ZSA6IHZhbHVlO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgYXR0cihub2RlLCBwcm9wLCB2YWx1ZSk7XG4gICAgfVxufVxuZnVuY3Rpb24geGxpbmtfYXR0cihub2RlLCBhdHRyaWJ1dGUsIHZhbHVlKSB7XG4gICAgbm9kZS5zZXRBdHRyaWJ1dGVOUygnaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluaycsIGF0dHJpYnV0ZSwgdmFsdWUpO1xufVxuZnVuY3Rpb24gZ2V0X2JpbmRpbmdfZ3JvdXBfdmFsdWUoZ3JvdXAsIF9fdmFsdWUsIGNoZWNrZWQpIHtcbiAgICBjb25zdCB2YWx1ZSA9IG5ldyBTZXQoKTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGdyb3VwLmxlbmd0aDsgaSArPSAxKSB7XG4gICAgICAgIGlmIChncm91cFtpXS5jaGVja2VkKVxuICAgICAgICAgICAgdmFsdWUuYWRkKGdyb3VwW2ldLl9fdmFsdWUpO1xuICAgIH1cbiAgICBpZiAoIWNoZWNrZWQpIHtcbiAgICAgICAgdmFsdWUuZGVsZXRlKF9fdmFsdWUpO1xuICAgIH1cbiAgICByZXR1cm4gQXJyYXkuZnJvbSh2YWx1ZSk7XG59XG5mdW5jdGlvbiB0b19udW1iZXIodmFsdWUpIHtcbiAgICByZXR1cm4gdmFsdWUgPT09ICcnID8gbnVsbCA6ICt2YWx1ZTtcbn1cbmZ1bmN0aW9uIHRpbWVfcmFuZ2VzX3RvX2FycmF5KHJhbmdlcykge1xuICAgIGNvbnN0IGFycmF5ID0gW107XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCByYW5nZXMubGVuZ3RoOyBpICs9IDEpIHtcbiAgICAgICAgYXJyYXkucHVzaCh7IHN0YXJ0OiByYW5nZXMuc3RhcnQoaSksIGVuZDogcmFuZ2VzLmVuZChpKSB9KTtcbiAgICB9XG4gICAgcmV0dXJuIGFycmF5O1xufVxuZnVuY3Rpb24gY2hpbGRyZW4oZWxlbWVudCkge1xuICAgIHJldHVybiBBcnJheS5mcm9tKGVsZW1lbnQuY2hpbGROb2Rlcyk7XG59XG5mdW5jdGlvbiBpbml0X2NsYWltX2luZm8obm9kZXMpIHtcbiAgICBpZiAobm9kZXMuY2xhaW1faW5mbyA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIG5vZGVzLmNsYWltX2luZm8gPSB7IGxhc3RfaW5kZXg6IDAsIHRvdGFsX2NsYWltZWQ6IDAgfTtcbiAgICB9XG59XG5mdW5jdGlvbiBjbGFpbV9ub2RlKG5vZGVzLCBwcmVkaWNhdGUsIHByb2Nlc3NOb2RlLCBjcmVhdGVOb2RlLCBkb250VXBkYXRlTGFzdEluZGV4ID0gZmFsc2UpIHtcbiAgICAvLyBUcnkgdG8gZmluZCBub2RlcyBpbiBhbiBvcmRlciBzdWNoIHRoYXQgd2UgbGVuZ3RoZW4gdGhlIGxvbmdlc3QgaW5jcmVhc2luZyBzdWJzZXF1ZW5jZVxuICAgIGluaXRfY2xhaW1faW5mbyhub2Rlcyk7XG4gICAgY29uc3QgcmVzdWx0Tm9kZSA9ICgoKSA9PiB7XG4gICAgICAgIC8vIFdlIGZpcnN0IHRyeSB0byBmaW5kIGFuIGVsZW1lbnQgYWZ0ZXIgdGhlIHByZXZpb3VzIG9uZVxuICAgICAgICBmb3IgKGxldCBpID0gbm9kZXMuY2xhaW1faW5mby5sYXN0X2luZGV4OyBpIDwgbm9kZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGNvbnN0IG5vZGUgPSBub2Rlc1tpXTtcbiAgICAgICAgICAgIGlmIChwcmVkaWNhdGUobm9kZSkpIHtcbiAgICAgICAgICAgICAgICBjb25zdCByZXBsYWNlbWVudCA9IHByb2Nlc3NOb2RlKG5vZGUpO1xuICAgICAgICAgICAgICAgIGlmIChyZXBsYWNlbWVudCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgIG5vZGVzLnNwbGljZShpLCAxKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIG5vZGVzW2ldID0gcmVwbGFjZW1lbnQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmICghZG9udFVwZGF0ZUxhc3RJbmRleCkge1xuICAgICAgICAgICAgICAgICAgICBub2Rlcy5jbGFpbV9pbmZvLmxhc3RfaW5kZXggPSBpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gbm9kZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICAvLyBPdGhlcndpc2UsIHdlIHRyeSB0byBmaW5kIG9uZSBiZWZvcmVcbiAgICAgICAgLy8gV2UgaXRlcmF0ZSBpbiByZXZlcnNlIHNvIHRoYXQgd2UgZG9uJ3QgZ28gdG9vIGZhciBiYWNrXG4gICAgICAgIGZvciAobGV0IGkgPSBub2Rlcy5jbGFpbV9pbmZvLmxhc3RfaW5kZXggLSAxOyBpID49IDA7IGktLSkge1xuICAgICAgICAgICAgY29uc3Qgbm9kZSA9IG5vZGVzW2ldO1xuICAgICAgICAgICAgaWYgKHByZWRpY2F0ZShub2RlKSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlcGxhY2VtZW50ID0gcHJvY2Vzc05vZGUobm9kZSk7XG4gICAgICAgICAgICAgICAgaWYgKHJlcGxhY2VtZW50ID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgbm9kZXMuc3BsaWNlKGksIDEpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgbm9kZXNbaV0gPSByZXBsYWNlbWVudDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKCFkb250VXBkYXRlTGFzdEluZGV4KSB7XG4gICAgICAgICAgICAgICAgICAgIG5vZGVzLmNsYWltX2luZm8ubGFzdF9pbmRleCA9IGk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKHJlcGxhY2VtZW50ID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gU2luY2Ugd2Ugc3BsaWNlZCBiZWZvcmUgdGhlIGxhc3RfaW5kZXgsIHdlIGRlY3JlYXNlIGl0XG4gICAgICAgICAgICAgICAgICAgIG5vZGVzLmNsYWltX2luZm8ubGFzdF9pbmRleC0tO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gbm9kZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICAvLyBJZiB3ZSBjYW4ndCBmaW5kIGFueSBtYXRjaGluZyBub2RlLCB3ZSBjcmVhdGUgYSBuZXcgb25lXG4gICAgICAgIHJldHVybiBjcmVhdGVOb2RlKCk7XG4gICAgfSkoKTtcbiAgICByZXN1bHROb2RlLmNsYWltX29yZGVyID0gbm9kZXMuY2xhaW1faW5mby50b3RhbF9jbGFpbWVkO1xuICAgIG5vZGVzLmNsYWltX2luZm8udG90YWxfY2xhaW1lZCArPSAxO1xuICAgIHJldHVybiByZXN1bHROb2RlO1xufVxuZnVuY3Rpb24gY2xhaW1fZWxlbWVudF9iYXNlKG5vZGVzLCBuYW1lLCBhdHRyaWJ1dGVzLCBjcmVhdGVfZWxlbWVudCkge1xuICAgIHJldHVybiBjbGFpbV9ub2RlKG5vZGVzLCAobm9kZSkgPT4gbm9kZS5ub2RlTmFtZSA9PT0gbmFtZSwgKG5vZGUpID0+IHtcbiAgICAgICAgY29uc3QgcmVtb3ZlID0gW107XG4gICAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgbm9kZS5hdHRyaWJ1dGVzLmxlbmd0aDsgaisrKSB7XG4gICAgICAgICAgICBjb25zdCBhdHRyaWJ1dGUgPSBub2RlLmF0dHJpYnV0ZXNbal07XG4gICAgICAgICAgICBpZiAoIWF0dHJpYnV0ZXNbYXR0cmlidXRlLm5hbWVdKSB7XG4gICAgICAgICAgICAgICAgcmVtb3ZlLnB1c2goYXR0cmlidXRlLm5hbWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJlbW92ZS5mb3JFYWNoKHYgPT4gbm9kZS5yZW1vdmVBdHRyaWJ1dGUodikpO1xuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH0sICgpID0+IGNyZWF0ZV9lbGVtZW50KG5hbWUpKTtcbn1cbmZ1bmN0aW9uIGNsYWltX2VsZW1lbnQobm9kZXMsIG5hbWUsIGF0dHJpYnV0ZXMpIHtcbiAgICByZXR1cm4gY2xhaW1fZWxlbWVudF9iYXNlKG5vZGVzLCBuYW1lLCBhdHRyaWJ1dGVzLCBlbGVtZW50KTtcbn1cbmZ1bmN0aW9uIGNsYWltX3N2Z19lbGVtZW50KG5vZGVzLCBuYW1lLCBhdHRyaWJ1dGVzKSB7XG4gICAgcmV0dXJuIGNsYWltX2VsZW1lbnRfYmFzZShub2RlcywgbmFtZSwgYXR0cmlidXRlcywgc3ZnX2VsZW1lbnQpO1xufVxuZnVuY3Rpb24gY2xhaW1fdGV4dChub2RlcywgZGF0YSkge1xuICAgIHJldHVybiBjbGFpbV9ub2RlKG5vZGVzLCAobm9kZSkgPT4gbm9kZS5ub2RlVHlwZSA9PT0gMywgKG5vZGUpID0+IHtcbiAgICAgICAgY29uc3QgZGF0YVN0ciA9ICcnICsgZGF0YTtcbiAgICAgICAgaWYgKG5vZGUuZGF0YS5zdGFydHNXaXRoKGRhdGFTdHIpKSB7XG4gICAgICAgICAgICBpZiAobm9kZS5kYXRhLmxlbmd0aCAhPT0gZGF0YVN0ci5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbm9kZS5zcGxpdFRleHQoZGF0YVN0ci5sZW5ndGgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgbm9kZS5kYXRhID0gZGF0YVN0cjtcbiAgICAgICAgfVxuICAgIH0sICgpID0+IHRleHQoZGF0YSksIHRydWUgLy8gVGV4dCBub2RlcyBzaG91bGQgbm90IHVwZGF0ZSBsYXN0IGluZGV4IHNpbmNlIGl0IGlzIGxpa2VseSBub3Qgd29ydGggaXQgdG8gZWxpbWluYXRlIGFuIGluY3JlYXNpbmcgc3Vic2VxdWVuY2Ugb2YgYWN0dWFsIGVsZW1lbnRzXG4gICAgKTtcbn1cbmZ1bmN0aW9uIGNsYWltX3NwYWNlKG5vZGVzKSB7XG4gICAgcmV0dXJuIGNsYWltX3RleHQobm9kZXMsICcgJyk7XG59XG5mdW5jdGlvbiBmaW5kX2NvbW1lbnQobm9kZXMsIHRleHQsIHN0YXJ0KSB7XG4gICAgZm9yIChsZXQgaSA9IHN0YXJ0OyBpIDwgbm9kZXMubGVuZ3RoOyBpICs9IDEpIHtcbiAgICAgICAgY29uc3Qgbm9kZSA9IG5vZGVzW2ldO1xuICAgICAgICBpZiAobm9kZS5ub2RlVHlwZSA9PT0gOCAvKiBjb21tZW50IG5vZGUgKi8gJiYgbm9kZS50ZXh0Q29udGVudC50cmltKCkgPT09IHRleHQpIHtcbiAgICAgICAgICAgIHJldHVybiBpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBub2Rlcy5sZW5ndGg7XG59XG5mdW5jdGlvbiBjbGFpbV9odG1sX3RhZyhub2Rlcykge1xuICAgIC8vIGZpbmQgaHRtbCBvcGVuaW5nIHRhZ1xuICAgIGNvbnN0IHN0YXJ0X2luZGV4ID0gZmluZF9jb21tZW50KG5vZGVzLCAnSFRNTF9UQUdfU1RBUlQnLCAwKTtcbiAgICBjb25zdCBlbmRfaW5kZXggPSBmaW5kX2NvbW1lbnQobm9kZXMsICdIVE1MX1RBR19FTkQnLCBzdGFydF9pbmRleCk7XG4gICAgaWYgKHN0YXJ0X2luZGV4ID09PSBlbmRfaW5kZXgpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBIdG1sVGFnSHlkcmF0aW9uKCk7XG4gICAgfVxuICAgIGluaXRfY2xhaW1faW5mbyhub2Rlcyk7XG4gICAgY29uc3QgaHRtbF90YWdfbm9kZXMgPSBub2Rlcy5zcGxpY2Uoc3RhcnRfaW5kZXgsIGVuZF9pbmRleCAtIHN0YXJ0X2luZGV4ICsgMSk7XG4gICAgZGV0YWNoKGh0bWxfdGFnX25vZGVzWzBdKTtcbiAgICBkZXRhY2goaHRtbF90YWdfbm9kZXNbaHRtbF90YWdfbm9kZXMubGVuZ3RoIC0gMV0pO1xuICAgIGNvbnN0IGNsYWltZWRfbm9kZXMgPSBodG1sX3RhZ19ub2Rlcy5zbGljZSgxLCBodG1sX3RhZ19ub2Rlcy5sZW5ndGggLSAxKTtcbiAgICBmb3IgKGNvbnN0IG4gb2YgY2xhaW1lZF9ub2Rlcykge1xuICAgICAgICBuLmNsYWltX29yZGVyID0gbm9kZXMuY2xhaW1faW5mby50b3RhbF9jbGFpbWVkO1xuICAgICAgICBub2Rlcy5jbGFpbV9pbmZvLnRvdGFsX2NsYWltZWQgKz0gMTtcbiAgICB9XG4gICAgcmV0dXJuIG5ldyBIdG1sVGFnSHlkcmF0aW9uKGNsYWltZWRfbm9kZXMpO1xufVxuZnVuY3Rpb24gc2V0X2RhdGEodGV4dCwgZGF0YSkge1xuICAgIGRhdGEgPSAnJyArIGRhdGE7XG4gICAgaWYgKHRleHQud2hvbGVUZXh0ICE9PSBkYXRhKVxuICAgICAgICB0ZXh0LmRhdGEgPSBkYXRhO1xufVxuZnVuY3Rpb24gc2V0X2lucHV0X3ZhbHVlKGlucHV0LCB2YWx1ZSkge1xuICAgIGlucHV0LnZhbHVlID0gdmFsdWUgPT0gbnVsbCA/ICcnIDogdmFsdWU7XG59XG5mdW5jdGlvbiBzZXRfaW5wdXRfdHlwZShpbnB1dCwgdHlwZSkge1xuICAgIHRyeSB7XG4gICAgICAgIGlucHV0LnR5cGUgPSB0eXBlO1xuICAgIH1cbiAgICBjYXRjaCAoZSkge1xuICAgICAgICAvLyBkbyBub3RoaW5nXG4gICAgfVxufVxuZnVuY3Rpb24gc2V0X3N0eWxlKG5vZGUsIGtleSwgdmFsdWUsIGltcG9ydGFudCkge1xuICAgIGlmICh2YWx1ZSA9PT0gbnVsbCkge1xuICAgICAgICBub2RlLnN0eWxlLnJlbW92ZVByb3BlcnR5KGtleSk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBub2RlLnN0eWxlLnNldFByb3BlcnR5KGtleSwgdmFsdWUsIGltcG9ydGFudCA/ICdpbXBvcnRhbnQnIDogJycpO1xuICAgIH1cbn1cbmZ1bmN0aW9uIHNlbGVjdF9vcHRpb24oc2VsZWN0LCB2YWx1ZSkge1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc2VsZWN0Lm9wdGlvbnMubGVuZ3RoOyBpICs9IDEpIHtcbiAgICAgICAgY29uc3Qgb3B0aW9uID0gc2VsZWN0Lm9wdGlvbnNbaV07XG4gICAgICAgIGlmIChvcHRpb24uX192YWx1ZSA9PT0gdmFsdWUpIHtcbiAgICAgICAgICAgIG9wdGlvbi5zZWxlY3RlZCA9IHRydWU7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICB9XG4gICAgc2VsZWN0LnNlbGVjdGVkSW5kZXggPSAtMTsgLy8gbm8gb3B0aW9uIHNob3VsZCBiZSBzZWxlY3RlZFxufVxuZnVuY3Rpb24gc2VsZWN0X29wdGlvbnMoc2VsZWN0LCB2YWx1ZSkge1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc2VsZWN0Lm9wdGlvbnMubGVuZ3RoOyBpICs9IDEpIHtcbiAgICAgICAgY29uc3Qgb3B0aW9uID0gc2VsZWN0Lm9wdGlvbnNbaV07XG4gICAgICAgIG9wdGlvbi5zZWxlY3RlZCA9IH52YWx1ZS5pbmRleE9mKG9wdGlvbi5fX3ZhbHVlKTtcbiAgICB9XG59XG5mdW5jdGlvbiBzZWxlY3RfdmFsdWUoc2VsZWN0KSB7XG4gICAgY29uc3Qgc2VsZWN0ZWRfb3B0aW9uID0gc2VsZWN0LnF1ZXJ5U2VsZWN0b3IoJzpjaGVja2VkJykgfHwgc2VsZWN0Lm9wdGlvbnNbMF07XG4gICAgcmV0dXJuIHNlbGVjdGVkX29wdGlvbiAmJiBzZWxlY3RlZF9vcHRpb24uX192YWx1ZTtcbn1cbmZ1bmN0aW9uIHNlbGVjdF9tdWx0aXBsZV92YWx1ZShzZWxlY3QpIHtcbiAgICByZXR1cm4gW10ubWFwLmNhbGwoc2VsZWN0LnF1ZXJ5U2VsZWN0b3JBbGwoJzpjaGVja2VkJyksIG9wdGlvbiA9PiBvcHRpb24uX192YWx1ZSk7XG59XG4vLyB1bmZvcnR1bmF0ZWx5IHRoaXMgY2FuJ3QgYmUgYSBjb25zdGFudCBhcyB0aGF0IHdvdWxkbid0IGJlIHRyZWUtc2hha2VhYmxlXG4vLyBzbyB3ZSBjYWNoZSB0aGUgcmVzdWx0IGluc3RlYWRcbmxldCBjcm9zc29yaWdpbjtcbmZ1bmN0aW9uIGlzX2Nyb3Nzb3JpZ2luKCkge1xuICAgIGlmIChjcm9zc29yaWdpbiA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIGNyb3Nzb3JpZ2luID0gZmFsc2U7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBpZiAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgJiYgd2luZG93LnBhcmVudCkge1xuICAgICAgICAgICAgICAgIHZvaWQgd2luZG93LnBhcmVudC5kb2N1bWVudDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGNyb3Nzb3JpZ2luID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gY3Jvc3NvcmlnaW47XG59XG5mdW5jdGlvbiBhZGRfcmVzaXplX2xpc3RlbmVyKG5vZGUsIGZuKSB7XG4gICAgY29uc3QgY29tcHV0ZWRfc3R5bGUgPSBnZXRDb21wdXRlZFN0eWxlKG5vZGUpO1xuICAgIGlmIChjb21wdXRlZF9zdHlsZS5wb3NpdGlvbiA9PT0gJ3N0YXRpYycpIHtcbiAgICAgICAgbm9kZS5zdHlsZS5wb3NpdGlvbiA9ICdyZWxhdGl2ZSc7XG4gICAgfVxuICAgIGNvbnN0IGlmcmFtZSA9IGVsZW1lbnQoJ2lmcmFtZScpO1xuICAgIGlmcmFtZS5zZXRBdHRyaWJ1dGUoJ3N0eWxlJywgJ2Rpc3BsYXk6IGJsb2NrOyBwb3NpdGlvbjogYWJzb2x1dGU7IHRvcDogMDsgbGVmdDogMDsgd2lkdGg6IDEwMCU7IGhlaWdodDogMTAwJTsgJyArXG4gICAgICAgICdvdmVyZmxvdzogaGlkZGVuOyBib3JkZXI6IDA7IG9wYWNpdHk6IDA7IHBvaW50ZXItZXZlbnRzOiBub25lOyB6LWluZGV4OiAtMTsnKTtcbiAgICBpZnJhbWUuc2V0QXR0cmlidXRlKCdhcmlhLWhpZGRlbicsICd0cnVlJyk7XG4gICAgaWZyYW1lLnRhYkluZGV4ID0gLTE7XG4gICAgY29uc3QgY3Jvc3NvcmlnaW4gPSBpc19jcm9zc29yaWdpbigpO1xuICAgIGxldCB1bnN1YnNjcmliZTtcbiAgICBpZiAoY3Jvc3NvcmlnaW4pIHtcbiAgICAgICAgaWZyYW1lLnNyYyA9IFwiZGF0YTp0ZXh0L2h0bWwsPHNjcmlwdD5vbnJlc2l6ZT1mdW5jdGlvbigpe3BhcmVudC5wb3N0TWVzc2FnZSgwLCcqJyl9PC9zY3JpcHQ+XCI7XG4gICAgICAgIHVuc3Vic2NyaWJlID0gbGlzdGVuKHdpbmRvdywgJ21lc3NhZ2UnLCAoZXZlbnQpID0+IHtcbiAgICAgICAgICAgIGlmIChldmVudC5zb3VyY2UgPT09IGlmcmFtZS5jb250ZW50V2luZG93KVxuICAgICAgICAgICAgICAgIGZuKCk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgaWZyYW1lLnNyYyA9ICdhYm91dDpibGFuayc7XG4gICAgICAgIGlmcmFtZS5vbmxvYWQgPSAoKSA9PiB7XG4gICAgICAgICAgICB1bnN1YnNjcmliZSA9IGxpc3RlbihpZnJhbWUuY29udGVudFdpbmRvdywgJ3Jlc2l6ZScsIGZuKTtcbiAgICAgICAgfTtcbiAgICB9XG4gICAgYXBwZW5kKG5vZGUsIGlmcmFtZSk7XG4gICAgcmV0dXJuICgpID0+IHtcbiAgICAgICAgaWYgKGNyb3Nzb3JpZ2luKSB7XG4gICAgICAgICAgICB1bnN1YnNjcmliZSgpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHVuc3Vic2NyaWJlICYmIGlmcmFtZS5jb250ZW50V2luZG93KSB7XG4gICAgICAgICAgICB1bnN1YnNjcmliZSgpO1xuICAgICAgICB9XG4gICAgICAgIGRldGFjaChpZnJhbWUpO1xuICAgIH07XG59XG5mdW5jdGlvbiB0b2dnbGVfY2xhc3MoZWxlbWVudCwgbmFtZSwgdG9nZ2xlKSB7XG4gICAgZWxlbWVudC5jbGFzc0xpc3RbdG9nZ2xlID8gJ2FkZCcgOiAncmVtb3ZlJ10obmFtZSk7XG59XG5mdW5jdGlvbiBjdXN0b21fZXZlbnQodHlwZSwgZGV0YWlsLCBidWJibGVzID0gZmFsc2UpIHtcbiAgICBjb25zdCBlID0gZG9jdW1lbnQuY3JlYXRlRXZlbnQoJ0N1c3RvbUV2ZW50Jyk7XG4gICAgZS5pbml0Q3VzdG9tRXZlbnQodHlwZSwgYnViYmxlcywgZmFsc2UsIGRldGFpbCk7XG4gICAgcmV0dXJuIGU7XG59XG5mdW5jdGlvbiBxdWVyeV9zZWxlY3Rvcl9hbGwoc2VsZWN0b3IsIHBhcmVudCA9IGRvY3VtZW50LmJvZHkpIHtcbiAgICByZXR1cm4gQXJyYXkuZnJvbShwYXJlbnQucXVlcnlTZWxlY3RvckFsbChzZWxlY3RvcikpO1xufVxuY2xhc3MgSHRtbFRhZyB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMuZSA9IHRoaXMubiA9IG51bGw7XG4gICAgfVxuICAgIGMoaHRtbCkge1xuICAgICAgICB0aGlzLmgoaHRtbCk7XG4gICAgfVxuICAgIG0oaHRtbCwgdGFyZ2V0LCBhbmNob3IgPSBudWxsKSB7XG4gICAgICAgIGlmICghdGhpcy5lKSB7XG4gICAgICAgICAgICB0aGlzLmUgPSBlbGVtZW50KHRhcmdldC5ub2RlTmFtZSk7XG4gICAgICAgICAgICB0aGlzLnQgPSB0YXJnZXQ7XG4gICAgICAgICAgICB0aGlzLmMoaHRtbCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5pKGFuY2hvcik7XG4gICAgfVxuICAgIGgoaHRtbCkge1xuICAgICAgICB0aGlzLmUuaW5uZXJIVE1MID0gaHRtbDtcbiAgICAgICAgdGhpcy5uID0gQXJyYXkuZnJvbSh0aGlzLmUuY2hpbGROb2Rlcyk7XG4gICAgfVxuICAgIGkoYW5jaG9yKSB7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5uLmxlbmd0aDsgaSArPSAxKSB7XG4gICAgICAgICAgICBpbnNlcnQodGhpcy50LCB0aGlzLm5baV0sIGFuY2hvcik7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcChodG1sKSB7XG4gICAgICAgIHRoaXMuZCgpO1xuICAgICAgICB0aGlzLmgoaHRtbCk7XG4gICAgICAgIHRoaXMuaSh0aGlzLmEpO1xuICAgIH1cbiAgICBkKCkge1xuICAgICAgICB0aGlzLm4uZm9yRWFjaChkZXRhY2gpO1xuICAgIH1cbn1cbmNsYXNzIEh0bWxUYWdIeWRyYXRpb24gZXh0ZW5kcyBIdG1sVGFnIHtcbiAgICBjb25zdHJ1Y3RvcihjbGFpbWVkX25vZGVzKSB7XG4gICAgICAgIHN1cGVyKCk7XG4gICAgICAgIHRoaXMuZSA9IHRoaXMubiA9IG51bGw7XG4gICAgICAgIHRoaXMubCA9IGNsYWltZWRfbm9kZXM7XG4gICAgfVxuICAgIGMoaHRtbCkge1xuICAgICAgICBpZiAodGhpcy5sKSB7XG4gICAgICAgICAgICB0aGlzLm4gPSB0aGlzLmw7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBzdXBlci5jKGh0bWwpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGkoYW5jaG9yKSB7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5uLmxlbmd0aDsgaSArPSAxKSB7XG4gICAgICAgICAgICBpbnNlcnRfaHlkcmF0aW9uKHRoaXMudCwgdGhpcy5uW2ldLCBhbmNob3IpO1xuICAgICAgICB9XG4gICAgfVxufVxuZnVuY3Rpb24gYXR0cmlidXRlX3RvX29iamVjdChhdHRyaWJ1dGVzKSB7XG4gICAgY29uc3QgcmVzdWx0ID0ge307XG4gICAgZm9yIChjb25zdCBhdHRyaWJ1dGUgb2YgYXR0cmlidXRlcykge1xuICAgICAgICByZXN1bHRbYXR0cmlidXRlLm5hbWVdID0gYXR0cmlidXRlLnZhbHVlO1xuICAgIH1cbiAgICByZXR1cm4gcmVzdWx0O1xufVxuZnVuY3Rpb24gZ2V0X2N1c3RvbV9lbGVtZW50c19zbG90cyhlbGVtZW50KSB7XG4gICAgY29uc3QgcmVzdWx0ID0ge307XG4gICAgZWxlbWVudC5jaGlsZE5vZGVzLmZvckVhY2goKG5vZGUpID0+IHtcbiAgICAgICAgcmVzdWx0W25vZGUuc2xvdCB8fCAnZGVmYXVsdCddID0gdHJ1ZTtcbiAgICB9KTtcbiAgICByZXR1cm4gcmVzdWx0O1xufVxuXG4vLyB3ZSBuZWVkIHRvIHN0b3JlIHRoZSBpbmZvcm1hdGlvbiBmb3IgbXVsdGlwbGUgZG9jdW1lbnRzIGJlY2F1c2UgYSBTdmVsdGUgYXBwbGljYXRpb24gY291bGQgYWxzbyBjb250YWluIGlmcmFtZXNcbi8vIGh0dHBzOi8vZ2l0aHViLmNvbS9zdmVsdGVqcy9zdmVsdGUvaXNzdWVzLzM2MjRcbmNvbnN0IG1hbmFnZWRfc3R5bGVzID0gbmV3IE1hcCgpO1xubGV0IGFjdGl2ZSA9IDA7XG4vLyBodHRwczovL2dpdGh1Yi5jb20vZGFya3NreWFwcC9zdHJpbmctaGFzaC9ibG9iL21hc3Rlci9pbmRleC5qc1xuZnVuY3Rpb24gaGFzaChzdHIpIHtcbiAgICBsZXQgaGFzaCA9IDUzODE7XG4gICAgbGV0IGkgPSBzdHIubGVuZ3RoO1xuICAgIHdoaWxlIChpLS0pXG4gICAgICAgIGhhc2ggPSAoKGhhc2ggPDwgNSkgLSBoYXNoKSBeIHN0ci5jaGFyQ29kZUF0KGkpO1xuICAgIHJldHVybiBoYXNoID4+PiAwO1xufVxuZnVuY3Rpb24gY3JlYXRlX3N0eWxlX2luZm9ybWF0aW9uKGRvYywgbm9kZSkge1xuICAgIGNvbnN0IGluZm8gPSB7IHN0eWxlc2hlZXQ6IGFwcGVuZF9lbXB0eV9zdHlsZXNoZWV0KG5vZGUpLCBydWxlczoge30gfTtcbiAgICBtYW5hZ2VkX3N0eWxlcy5zZXQoZG9jLCBpbmZvKTtcbiAgICByZXR1cm4gaW5mbztcbn1cbmZ1bmN0aW9uIGNyZWF0ZV9ydWxlKG5vZGUsIGEsIGIsIGR1cmF0aW9uLCBkZWxheSwgZWFzZSwgZm4sIHVpZCA9IDApIHtcbiAgICBjb25zdCBzdGVwID0gMTYuNjY2IC8gZHVyYXRpb247XG4gICAgbGV0IGtleWZyYW1lcyA9ICd7XFxuJztcbiAgICBmb3IgKGxldCBwID0gMDsgcCA8PSAxOyBwICs9IHN0ZXApIHtcbiAgICAgICAgY29uc3QgdCA9IGEgKyAoYiAtIGEpICogZWFzZShwKTtcbiAgICAgICAga2V5ZnJhbWVzICs9IHAgKiAxMDAgKyBgJXske2ZuKHQsIDEgLSB0KX19XFxuYDtcbiAgICB9XG4gICAgY29uc3QgcnVsZSA9IGtleWZyYW1lcyArIGAxMDAlIHske2ZuKGIsIDEgLSBiKX19XFxufWA7XG4gICAgY29uc3QgbmFtZSA9IGBfX3N2ZWx0ZV8ke2hhc2gocnVsZSl9XyR7dWlkfWA7XG4gICAgY29uc3QgZG9jID0gZ2V0X3Jvb3RfZm9yX3N0eWxlKG5vZGUpO1xuICAgIGNvbnN0IHsgc3R5bGVzaGVldCwgcnVsZXMgfSA9IG1hbmFnZWRfc3R5bGVzLmdldChkb2MpIHx8IGNyZWF0ZV9zdHlsZV9pbmZvcm1hdGlvbihkb2MsIG5vZGUpO1xuICAgIGlmICghcnVsZXNbbmFtZV0pIHtcbiAgICAgICAgcnVsZXNbbmFtZV0gPSB0cnVlO1xuICAgICAgICBzdHlsZXNoZWV0Lmluc2VydFJ1bGUoYEBrZXlmcmFtZXMgJHtuYW1lfSAke3J1bGV9YCwgc3R5bGVzaGVldC5jc3NSdWxlcy5sZW5ndGgpO1xuICAgIH1cbiAgICBjb25zdCBhbmltYXRpb24gPSBub2RlLnN0eWxlLmFuaW1hdGlvbiB8fCAnJztcbiAgICBub2RlLnN0eWxlLmFuaW1hdGlvbiA9IGAke2FuaW1hdGlvbiA/IGAke2FuaW1hdGlvbn0sIGAgOiAnJ30ke25hbWV9ICR7ZHVyYXRpb259bXMgbGluZWFyICR7ZGVsYXl9bXMgMSBib3RoYDtcbiAgICBhY3RpdmUgKz0gMTtcbiAgICByZXR1cm4gbmFtZTtcbn1cbmZ1bmN0aW9uIGRlbGV0ZV9ydWxlKG5vZGUsIG5hbWUpIHtcbiAgICBjb25zdCBwcmV2aW91cyA9IChub2RlLnN0eWxlLmFuaW1hdGlvbiB8fCAnJykuc3BsaXQoJywgJyk7XG4gICAgY29uc3QgbmV4dCA9IHByZXZpb3VzLmZpbHRlcihuYW1lXG4gICAgICAgID8gYW5pbSA9PiBhbmltLmluZGV4T2YobmFtZSkgPCAwIC8vIHJlbW92ZSBzcGVjaWZpYyBhbmltYXRpb25cbiAgICAgICAgOiBhbmltID0+IGFuaW0uaW5kZXhPZignX19zdmVsdGUnKSA9PT0gLTEgLy8gcmVtb3ZlIGFsbCBTdmVsdGUgYW5pbWF0aW9uc1xuICAgICk7XG4gICAgY29uc3QgZGVsZXRlZCA9IHByZXZpb3VzLmxlbmd0aCAtIG5leHQubGVuZ3RoO1xuICAgIGlmIChkZWxldGVkKSB7XG4gICAgICAgIG5vZGUuc3R5bGUuYW5pbWF0aW9uID0gbmV4dC5qb2luKCcsICcpO1xuICAgICAgICBhY3RpdmUgLT0gZGVsZXRlZDtcbiAgICAgICAgaWYgKCFhY3RpdmUpXG4gICAgICAgICAgICBjbGVhcl9ydWxlcygpO1xuICAgIH1cbn1cbmZ1bmN0aW9uIGNsZWFyX3J1bGVzKCkge1xuICAgIHJhZigoKSA9PiB7XG4gICAgICAgIGlmIChhY3RpdmUpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIG1hbmFnZWRfc3R5bGVzLmZvckVhY2goaW5mbyA9PiB7XG4gICAgICAgICAgICBjb25zdCB7IHN0eWxlc2hlZXQgfSA9IGluZm87XG4gICAgICAgICAgICBsZXQgaSA9IHN0eWxlc2hlZXQuY3NzUnVsZXMubGVuZ3RoO1xuICAgICAgICAgICAgd2hpbGUgKGktLSlcbiAgICAgICAgICAgICAgICBzdHlsZXNoZWV0LmRlbGV0ZVJ1bGUoaSk7XG4gICAgICAgICAgICBpbmZvLnJ1bGVzID0ge307XG4gICAgICAgIH0pO1xuICAgICAgICBtYW5hZ2VkX3N0eWxlcy5jbGVhcigpO1xuICAgIH0pO1xufVxuXG5mdW5jdGlvbiBjcmVhdGVfYW5pbWF0aW9uKG5vZGUsIGZyb20sIGZuLCBwYXJhbXMpIHtcbiAgICBpZiAoIWZyb20pXG4gICAgICAgIHJldHVybiBub29wO1xuICAgIGNvbnN0IHRvID0gbm9kZS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICBpZiAoZnJvbS5sZWZ0ID09PSB0by5sZWZ0ICYmIGZyb20ucmlnaHQgPT09IHRvLnJpZ2h0ICYmIGZyb20udG9wID09PSB0by50b3AgJiYgZnJvbS5ib3R0b20gPT09IHRvLmJvdHRvbSlcbiAgICAgICAgcmV0dXJuIG5vb3A7XG4gICAgY29uc3QgeyBkZWxheSA9IDAsIGR1cmF0aW9uID0gMzAwLCBlYXNpbmcgPSBpZGVudGl0eSwgXG4gICAgLy8gQHRzLWlnbm9yZSB0b2RvOiBzaG91bGQgdGhpcyBiZSBzZXBhcmF0ZWQgZnJvbSBkZXN0cnVjdHVyaW5nPyBPciBzdGFydC9lbmQgYWRkZWQgdG8gcHVibGljIGFwaSBhbmQgZG9jdW1lbnRhdGlvbj9cbiAgICBzdGFydDogc3RhcnRfdGltZSA9IG5vdygpICsgZGVsYXksIFxuICAgIC8vIEB0cy1pZ25vcmUgdG9kbzpcbiAgICBlbmQgPSBzdGFydF90aW1lICsgZHVyYXRpb24sIHRpY2sgPSBub29wLCBjc3MgfSA9IGZuKG5vZGUsIHsgZnJvbSwgdG8gfSwgcGFyYW1zKTtcbiAgICBsZXQgcnVubmluZyA9IHRydWU7XG4gICAgbGV0IHN0YXJ0ZWQgPSBmYWxzZTtcbiAgICBsZXQgbmFtZTtcbiAgICBmdW5jdGlvbiBzdGFydCgpIHtcbiAgICAgICAgaWYgKGNzcykge1xuICAgICAgICAgICAgbmFtZSA9IGNyZWF0ZV9ydWxlKG5vZGUsIDAsIDEsIGR1cmF0aW9uLCBkZWxheSwgZWFzaW5nLCBjc3MpO1xuICAgICAgICB9XG4gICAgICAgIGlmICghZGVsYXkpIHtcbiAgICAgICAgICAgIHN0YXJ0ZWQgPSB0cnVlO1xuICAgICAgICB9XG4gICAgfVxuICAgIGZ1bmN0aW9uIHN0b3AoKSB7XG4gICAgICAgIGlmIChjc3MpXG4gICAgICAgICAgICBkZWxldGVfcnVsZShub2RlLCBuYW1lKTtcbiAgICAgICAgcnVubmluZyA9IGZhbHNlO1xuICAgIH1cbiAgICBsb29wKG5vdyA9PiB7XG4gICAgICAgIGlmICghc3RhcnRlZCAmJiBub3cgPj0gc3RhcnRfdGltZSkge1xuICAgICAgICAgICAgc3RhcnRlZCA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHN0YXJ0ZWQgJiYgbm93ID49IGVuZCkge1xuICAgICAgICAgICAgdGljaygxLCAwKTtcbiAgICAgICAgICAgIHN0b3AoKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIXJ1bm5pbmcpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoc3RhcnRlZCkge1xuICAgICAgICAgICAgY29uc3QgcCA9IG5vdyAtIHN0YXJ0X3RpbWU7XG4gICAgICAgICAgICBjb25zdCB0ID0gMCArIDEgKiBlYXNpbmcocCAvIGR1cmF0aW9uKTtcbiAgICAgICAgICAgIHRpY2sodCwgMSAtIHQpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH0pO1xuICAgIHN0YXJ0KCk7XG4gICAgdGljaygwLCAxKTtcbiAgICByZXR1cm4gc3RvcDtcbn1cbmZ1bmN0aW9uIGZpeF9wb3NpdGlvbihub2RlKSB7XG4gICAgY29uc3Qgc3R5bGUgPSBnZXRDb21wdXRlZFN0eWxlKG5vZGUpO1xuICAgIGlmIChzdHlsZS5wb3NpdGlvbiAhPT0gJ2Fic29sdXRlJyAmJiBzdHlsZS5wb3NpdGlvbiAhPT0gJ2ZpeGVkJykge1xuICAgICAgICBjb25zdCB7IHdpZHRoLCBoZWlnaHQgfSA9IHN0eWxlO1xuICAgICAgICBjb25zdCBhID0gbm9kZS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICAgICAgbm9kZS5zdHlsZS5wb3NpdGlvbiA9ICdhYnNvbHV0ZSc7XG4gICAgICAgIG5vZGUuc3R5bGUud2lkdGggPSB3aWR0aDtcbiAgICAgICAgbm9kZS5zdHlsZS5oZWlnaHQgPSBoZWlnaHQ7XG4gICAgICAgIGFkZF90cmFuc2Zvcm0obm9kZSwgYSk7XG4gICAgfVxufVxuZnVuY3Rpb24gYWRkX3RyYW5zZm9ybShub2RlLCBhKSB7XG4gICAgY29uc3QgYiA9IG5vZGUuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgaWYgKGEubGVmdCAhPT0gYi5sZWZ0IHx8IGEudG9wICE9PSBiLnRvcCkge1xuICAgICAgICBjb25zdCBzdHlsZSA9IGdldENvbXB1dGVkU3R5bGUobm9kZSk7XG4gICAgICAgIGNvbnN0IHRyYW5zZm9ybSA9IHN0eWxlLnRyYW5zZm9ybSA9PT0gJ25vbmUnID8gJycgOiBzdHlsZS50cmFuc2Zvcm07XG4gICAgICAgIG5vZGUuc3R5bGUudHJhbnNmb3JtID0gYCR7dHJhbnNmb3JtfSB0cmFuc2xhdGUoJHthLmxlZnQgLSBiLmxlZnR9cHgsICR7YS50b3AgLSBiLnRvcH1weClgO1xuICAgIH1cbn1cblxubGV0IGN1cnJlbnRfY29tcG9uZW50O1xuZnVuY3Rpb24gc2V0X2N1cnJlbnRfY29tcG9uZW50KGNvbXBvbmVudCkge1xuICAgIGN1cnJlbnRfY29tcG9uZW50ID0gY29tcG9uZW50O1xufVxuZnVuY3Rpb24gZ2V0X2N1cnJlbnRfY29tcG9uZW50KCkge1xuICAgIGlmICghY3VycmVudF9jb21wb25lbnQpXG4gICAgICAgIHRocm93IG5ldyBFcnJvcignRnVuY3Rpb24gY2FsbGVkIG91dHNpZGUgY29tcG9uZW50IGluaXRpYWxpemF0aW9uJyk7XG4gICAgcmV0dXJuIGN1cnJlbnRfY29tcG9uZW50O1xufVxuZnVuY3Rpb24gYmVmb3JlVXBkYXRlKGZuKSB7XG4gICAgZ2V0X2N1cnJlbnRfY29tcG9uZW50KCkuJCQuYmVmb3JlX3VwZGF0ZS5wdXNoKGZuKTtcbn1cbmZ1bmN0aW9uIG9uTW91bnQoZm4pIHtcbiAgICBnZXRfY3VycmVudF9jb21wb25lbnQoKS4kJC5vbl9tb3VudC5wdXNoKGZuKTtcbn1cbmZ1bmN0aW9uIGFmdGVyVXBkYXRlKGZuKSB7XG4gICAgZ2V0X2N1cnJlbnRfY29tcG9uZW50KCkuJCQuYWZ0ZXJfdXBkYXRlLnB1c2goZm4pO1xufVxuZnVuY3Rpb24gb25EZXN0cm95KGZuKSB7XG4gICAgZ2V0X2N1cnJlbnRfY29tcG9uZW50KCkuJCQub25fZGVzdHJveS5wdXNoKGZuKTtcbn1cbmZ1bmN0aW9uIGNyZWF0ZUV2ZW50RGlzcGF0Y2hlcigpIHtcbiAgICBjb25zdCBjb21wb25lbnQgPSBnZXRfY3VycmVudF9jb21wb25lbnQoKTtcbiAgICByZXR1cm4gKHR5cGUsIGRldGFpbCkgPT4ge1xuICAgICAgICBjb25zdCBjYWxsYmFja3MgPSBjb21wb25lbnQuJCQuY2FsbGJhY2tzW3R5cGVdO1xuICAgICAgICBpZiAoY2FsbGJhY2tzKSB7XG4gICAgICAgICAgICAvLyBUT0RPIGFyZSB0aGVyZSBzaXR1YXRpb25zIHdoZXJlIGV2ZW50cyBjb3VsZCBiZSBkaXNwYXRjaGVkXG4gICAgICAgICAgICAvLyBpbiBhIHNlcnZlciAobm9uLURPTSkgZW52aXJvbm1lbnQ/XG4gICAgICAgICAgICBjb25zdCBldmVudCA9IGN1c3RvbV9ldmVudCh0eXBlLCBkZXRhaWwpO1xuICAgICAgICAgICAgY2FsbGJhY2tzLnNsaWNlKCkuZm9yRWFjaChmbiA9PiB7XG4gICAgICAgICAgICAgICAgZm4uY2FsbChjb21wb25lbnQsIGV2ZW50KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfTtcbn1cbmZ1bmN0aW9uIHNldENvbnRleHQoa2V5LCBjb250ZXh0KSB7XG4gICAgZ2V0X2N1cnJlbnRfY29tcG9uZW50KCkuJCQuY29udGV4dC5zZXQoa2V5LCBjb250ZXh0KTtcbn1cbmZ1bmN0aW9uIGdldENvbnRleHQoa2V5KSB7XG4gICAgcmV0dXJuIGdldF9jdXJyZW50X2NvbXBvbmVudCgpLiQkLmNvbnRleHQuZ2V0KGtleSk7XG59XG5mdW5jdGlvbiBnZXRBbGxDb250ZXh0cygpIHtcbiAgICByZXR1cm4gZ2V0X2N1cnJlbnRfY29tcG9uZW50KCkuJCQuY29udGV4dDtcbn1cbmZ1bmN0aW9uIGhhc0NvbnRleHQoa2V5KSB7XG4gICAgcmV0dXJuIGdldF9jdXJyZW50X2NvbXBvbmVudCgpLiQkLmNvbnRleHQuaGFzKGtleSk7XG59XG4vLyBUT0RPIGZpZ3VyZSBvdXQgaWYgd2Ugc3RpbGwgd2FudCB0byBzdXBwb3J0XG4vLyBzaG9ydGhhbmQgZXZlbnRzLCBvciBpZiB3ZSB3YW50IHRvIGltcGxlbWVudFxuLy8gYSByZWFsIGJ1YmJsaW5nIG1lY2hhbmlzbVxuZnVuY3Rpb24gYnViYmxlKGNvbXBvbmVudCwgZXZlbnQpIHtcbiAgICBjb25zdCBjYWxsYmFja3MgPSBjb21wb25lbnQuJCQuY2FsbGJhY2tzW2V2ZW50LnR5cGVdO1xuICAgIGlmIChjYWxsYmFja3MpIHtcbiAgICAgICAgLy8gQHRzLWlnbm9yZVxuICAgICAgICBjYWxsYmFja3Muc2xpY2UoKS5mb3JFYWNoKGZuID0+IGZuLmNhbGwodGhpcywgZXZlbnQpKTtcbiAgICB9XG59XG5cbmNvbnN0IGRpcnR5X2NvbXBvbmVudHMgPSBbXTtcbmNvbnN0IGludHJvcyA9IHsgZW5hYmxlZDogZmFsc2UgfTtcbmNvbnN0IGJpbmRpbmdfY2FsbGJhY2tzID0gW107XG5jb25zdCByZW5kZXJfY2FsbGJhY2tzID0gW107XG5jb25zdCBmbHVzaF9jYWxsYmFja3MgPSBbXTtcbmNvbnN0IHJlc29sdmVkX3Byb21pc2UgPSBQcm9taXNlLnJlc29sdmUoKTtcbmxldCB1cGRhdGVfc2NoZWR1bGVkID0gZmFsc2U7XG5mdW5jdGlvbiBzY2hlZHVsZV91cGRhdGUoKSB7XG4gICAgaWYgKCF1cGRhdGVfc2NoZWR1bGVkKSB7XG4gICAgICAgIHVwZGF0ZV9zY2hlZHVsZWQgPSB0cnVlO1xuICAgICAgICByZXNvbHZlZF9wcm9taXNlLnRoZW4oZmx1c2gpO1xuICAgIH1cbn1cbmZ1bmN0aW9uIHRpY2soKSB7XG4gICAgc2NoZWR1bGVfdXBkYXRlKCk7XG4gICAgcmV0dXJuIHJlc29sdmVkX3Byb21pc2U7XG59XG5mdW5jdGlvbiBhZGRfcmVuZGVyX2NhbGxiYWNrKGZuKSB7XG4gICAgcmVuZGVyX2NhbGxiYWNrcy5wdXNoKGZuKTtcbn1cbmZ1bmN0aW9uIGFkZF9mbHVzaF9jYWxsYmFjayhmbikge1xuICAgIGZsdXNoX2NhbGxiYWNrcy5wdXNoKGZuKTtcbn1cbi8vIGZsdXNoKCkgY2FsbHMgY2FsbGJhY2tzIGluIHRoaXMgb3JkZXI6XG4vLyAxLiBBbGwgYmVmb3JlVXBkYXRlIGNhbGxiYWNrcywgaW4gb3JkZXI6IHBhcmVudHMgYmVmb3JlIGNoaWxkcmVuXG4vLyAyLiBBbGwgYmluZDp0aGlzIGNhbGxiYWNrcywgaW4gcmV2ZXJzZSBvcmRlcjogY2hpbGRyZW4gYmVmb3JlIHBhcmVudHMuXG4vLyAzLiBBbGwgYWZ0ZXJVcGRhdGUgY2FsbGJhY2tzLCBpbiBvcmRlcjogcGFyZW50cyBiZWZvcmUgY2hpbGRyZW4uIEVYQ0VQVFxuLy8gICAgZm9yIGFmdGVyVXBkYXRlcyBjYWxsZWQgZHVyaW5nIHRoZSBpbml0aWFsIG9uTW91bnQsIHdoaWNoIGFyZSBjYWxsZWQgaW5cbi8vICAgIHJldmVyc2Ugb3JkZXI6IGNoaWxkcmVuIGJlZm9yZSBwYXJlbnRzLlxuLy8gU2luY2UgY2FsbGJhY2tzIG1pZ2h0IHVwZGF0ZSBjb21wb25lbnQgdmFsdWVzLCB3aGljaCBjb3VsZCB0cmlnZ2VyIGFub3RoZXJcbi8vIGNhbGwgdG8gZmx1c2goKSwgdGhlIGZvbGxvd2luZyBzdGVwcyBndWFyZCBhZ2FpbnN0IHRoaXM6XG4vLyAxLiBEdXJpbmcgYmVmb3JlVXBkYXRlLCBhbnkgdXBkYXRlZCBjb21wb25lbnRzIHdpbGwgYmUgYWRkZWQgdG8gdGhlXG4vLyAgICBkaXJ0eV9jb21wb25lbnRzIGFycmF5IGFuZCB3aWxsIGNhdXNlIGEgcmVlbnRyYW50IGNhbGwgdG8gZmx1c2goKS4gQmVjYXVzZVxuLy8gICAgdGhlIGZsdXNoIGluZGV4IGlzIGtlcHQgb3V0c2lkZSB0aGUgZnVuY3Rpb24sIHRoZSByZWVudHJhbnQgY2FsbCB3aWxsIHBpY2tcbi8vICAgIHVwIHdoZXJlIHRoZSBlYXJsaWVyIGNhbGwgbGVmdCBvZmYgYW5kIGdvIHRocm91Z2ggYWxsIGRpcnR5IGNvbXBvbmVudHMuIFRoZVxuLy8gICAgY3VycmVudF9jb21wb25lbnQgdmFsdWUgaXMgc2F2ZWQgYW5kIHJlc3RvcmVkIHNvIHRoYXQgdGhlIHJlZW50cmFudCBjYWxsIHdpbGxcbi8vICAgIG5vdCBpbnRlcmZlcmUgd2l0aCB0aGUgXCJwYXJlbnRcIiBmbHVzaCgpIGNhbGwuXG4vLyAyLiBiaW5kOnRoaXMgY2FsbGJhY2tzIGNhbm5vdCB0cmlnZ2VyIG5ldyBmbHVzaCgpIGNhbGxzLlxuLy8gMy4gRHVyaW5nIGFmdGVyVXBkYXRlLCBhbnkgdXBkYXRlZCBjb21wb25lbnRzIHdpbGwgTk9UIGhhdmUgdGhlaXIgYWZ0ZXJVcGRhdGVcbi8vICAgIGNhbGxiYWNrIGNhbGxlZCBhIHNlY29uZCB0aW1lOyB0aGUgc2Vlbl9jYWxsYmFja3Mgc2V0LCBvdXRzaWRlIHRoZSBmbHVzaCgpXG4vLyAgICBmdW5jdGlvbiwgZ3VhcmFudGVlcyB0aGlzIGJlaGF2aW9yLlxuY29uc3Qgc2Vlbl9jYWxsYmFja3MgPSBuZXcgU2V0KCk7XG5sZXQgZmx1c2hpZHggPSAwOyAvLyBEbyAqbm90KiBtb3ZlIHRoaXMgaW5zaWRlIHRoZSBmbHVzaCgpIGZ1bmN0aW9uXG5mdW5jdGlvbiBmbHVzaCgpIHtcbiAgICBjb25zdCBzYXZlZF9jb21wb25lbnQgPSBjdXJyZW50X2NvbXBvbmVudDtcbiAgICBkbyB7XG4gICAgICAgIC8vIGZpcnN0LCBjYWxsIGJlZm9yZVVwZGF0ZSBmdW5jdGlvbnNcbiAgICAgICAgLy8gYW5kIHVwZGF0ZSBjb21wb25lbnRzXG4gICAgICAgIHdoaWxlIChmbHVzaGlkeCA8IGRpcnR5X2NvbXBvbmVudHMubGVuZ3RoKSB7XG4gICAgICAgICAgICBjb25zdCBjb21wb25lbnQgPSBkaXJ0eV9jb21wb25lbnRzW2ZsdXNoaWR4XTtcbiAgICAgICAgICAgIGZsdXNoaWR4Kys7XG4gICAgICAgICAgICBzZXRfY3VycmVudF9jb21wb25lbnQoY29tcG9uZW50KTtcbiAgICAgICAgICAgIHVwZGF0ZShjb21wb25lbnQuJCQpO1xuICAgICAgICB9XG4gICAgICAgIHNldF9jdXJyZW50X2NvbXBvbmVudChudWxsKTtcbiAgICAgICAgZGlydHlfY29tcG9uZW50cy5sZW5ndGggPSAwO1xuICAgICAgICBmbHVzaGlkeCA9IDA7XG4gICAgICAgIHdoaWxlIChiaW5kaW5nX2NhbGxiYWNrcy5sZW5ndGgpXG4gICAgICAgICAgICBiaW5kaW5nX2NhbGxiYWNrcy5wb3AoKSgpO1xuICAgICAgICAvLyB0aGVuLCBvbmNlIGNvbXBvbmVudHMgYXJlIHVwZGF0ZWQsIGNhbGxcbiAgICAgICAgLy8gYWZ0ZXJVcGRhdGUgZnVuY3Rpb25zLiBUaGlzIG1heSBjYXVzZVxuICAgICAgICAvLyBzdWJzZXF1ZW50IHVwZGF0ZXMuLi5cbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCByZW5kZXJfY2FsbGJhY2tzLmxlbmd0aDsgaSArPSAxKSB7XG4gICAgICAgICAgICBjb25zdCBjYWxsYmFjayA9IHJlbmRlcl9jYWxsYmFja3NbaV07XG4gICAgICAgICAgICBpZiAoIXNlZW5fY2FsbGJhY2tzLmhhcyhjYWxsYmFjaykpIHtcbiAgICAgICAgICAgICAgICAvLyAuLi5zbyBndWFyZCBhZ2FpbnN0IGluZmluaXRlIGxvb3BzXG4gICAgICAgICAgICAgICAgc2Vlbl9jYWxsYmFja3MuYWRkKGNhbGxiYWNrKTtcbiAgICAgICAgICAgICAgICBjYWxsYmFjaygpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJlbmRlcl9jYWxsYmFja3MubGVuZ3RoID0gMDtcbiAgICB9IHdoaWxlIChkaXJ0eV9jb21wb25lbnRzLmxlbmd0aCk7XG4gICAgd2hpbGUgKGZsdXNoX2NhbGxiYWNrcy5sZW5ndGgpIHtcbiAgICAgICAgZmx1c2hfY2FsbGJhY2tzLnBvcCgpKCk7XG4gICAgfVxuICAgIHVwZGF0ZV9zY2hlZHVsZWQgPSBmYWxzZTtcbiAgICBzZWVuX2NhbGxiYWNrcy5jbGVhcigpO1xuICAgIHNldF9jdXJyZW50X2NvbXBvbmVudChzYXZlZF9jb21wb25lbnQpO1xufVxuZnVuY3Rpb24gdXBkYXRlKCQkKSB7XG4gICAgaWYgKCQkLmZyYWdtZW50ICE9PSBudWxsKSB7XG4gICAgICAgICQkLnVwZGF0ZSgpO1xuICAgICAgICBydW5fYWxsKCQkLmJlZm9yZV91cGRhdGUpO1xuICAgICAgICBjb25zdCBkaXJ0eSA9ICQkLmRpcnR5O1xuICAgICAgICAkJC5kaXJ0eSA9IFstMV07XG4gICAgICAgICQkLmZyYWdtZW50ICYmICQkLmZyYWdtZW50LnAoJCQuY3R4LCBkaXJ0eSk7XG4gICAgICAgICQkLmFmdGVyX3VwZGF0ZS5mb3JFYWNoKGFkZF9yZW5kZXJfY2FsbGJhY2spO1xuICAgIH1cbn1cblxubGV0IHByb21pc2U7XG5mdW5jdGlvbiB3YWl0KCkge1xuICAgIGlmICghcHJvbWlzZSkge1xuICAgICAgICBwcm9taXNlID0gUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgICAgIHByb21pc2UudGhlbigoKSA9PiB7XG4gICAgICAgICAgICBwcm9taXNlID0gbnVsbDtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIHJldHVybiBwcm9taXNlO1xufVxuZnVuY3Rpb24gZGlzcGF0Y2gobm9kZSwgZGlyZWN0aW9uLCBraW5kKSB7XG4gICAgbm9kZS5kaXNwYXRjaEV2ZW50KGN1c3RvbV9ldmVudChgJHtkaXJlY3Rpb24gPyAnaW50cm8nIDogJ291dHJvJ30ke2tpbmR9YCkpO1xufVxuY29uc3Qgb3V0cm9pbmcgPSBuZXcgU2V0KCk7XG5sZXQgb3V0cm9zO1xuZnVuY3Rpb24gZ3JvdXBfb3V0cm9zKCkge1xuICAgIG91dHJvcyA9IHtcbiAgICAgICAgcjogMCxcbiAgICAgICAgYzogW10sXG4gICAgICAgIHA6IG91dHJvcyAvLyBwYXJlbnQgZ3JvdXBcbiAgICB9O1xufVxuZnVuY3Rpb24gY2hlY2tfb3V0cm9zKCkge1xuICAgIGlmICghb3V0cm9zLnIpIHtcbiAgICAgICAgcnVuX2FsbChvdXRyb3MuYyk7XG4gICAgfVxuICAgIG91dHJvcyA9IG91dHJvcy5wO1xufVxuZnVuY3Rpb24gdHJhbnNpdGlvbl9pbihibG9jaywgbG9jYWwpIHtcbiAgICBpZiAoYmxvY2sgJiYgYmxvY2suaSkge1xuICAgICAgICBvdXRyb2luZy5kZWxldGUoYmxvY2spO1xuICAgICAgICBibG9jay5pKGxvY2FsKTtcbiAgICB9XG59XG5mdW5jdGlvbiB0cmFuc2l0aW9uX291dChibG9jaywgbG9jYWwsIGRldGFjaCwgY2FsbGJhY2spIHtcbiAgICBpZiAoYmxvY2sgJiYgYmxvY2subykge1xuICAgICAgICBpZiAob3V0cm9pbmcuaGFzKGJsb2NrKSlcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgb3V0cm9pbmcuYWRkKGJsb2NrKTtcbiAgICAgICAgb3V0cm9zLmMucHVzaCgoKSA9PiB7XG4gICAgICAgICAgICBvdXRyb2luZy5kZWxldGUoYmxvY2spO1xuICAgICAgICAgICAgaWYgKGNhbGxiYWNrKSB7XG4gICAgICAgICAgICAgICAgaWYgKGRldGFjaClcbiAgICAgICAgICAgICAgICAgICAgYmxvY2suZCgxKTtcbiAgICAgICAgICAgICAgICBjYWxsYmFjaygpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgYmxvY2subyhsb2NhbCk7XG4gICAgfVxufVxuY29uc3QgbnVsbF90cmFuc2l0aW9uID0geyBkdXJhdGlvbjogMCB9O1xuZnVuY3Rpb24gY3JlYXRlX2luX3RyYW5zaXRpb24obm9kZSwgZm4sIHBhcmFtcykge1xuICAgIGxldCBjb25maWcgPSBmbihub2RlLCBwYXJhbXMpO1xuICAgIGxldCBydW5uaW5nID0gZmFsc2U7XG4gICAgbGV0IGFuaW1hdGlvbl9uYW1lO1xuICAgIGxldCB0YXNrO1xuICAgIGxldCB1aWQgPSAwO1xuICAgIGZ1bmN0aW9uIGNsZWFudXAoKSB7XG4gICAgICAgIGlmIChhbmltYXRpb25fbmFtZSlcbiAgICAgICAgICAgIGRlbGV0ZV9ydWxlKG5vZGUsIGFuaW1hdGlvbl9uYW1lKTtcbiAgICB9XG4gICAgZnVuY3Rpb24gZ28oKSB7XG4gICAgICAgIGNvbnN0IHsgZGVsYXkgPSAwLCBkdXJhdGlvbiA9IDMwMCwgZWFzaW5nID0gaWRlbnRpdHksIHRpY2sgPSBub29wLCBjc3MgfSA9IGNvbmZpZyB8fCBudWxsX3RyYW5zaXRpb247XG4gICAgICAgIGlmIChjc3MpXG4gICAgICAgICAgICBhbmltYXRpb25fbmFtZSA9IGNyZWF0ZV9ydWxlKG5vZGUsIDAsIDEsIGR1cmF0aW9uLCBkZWxheSwgZWFzaW5nLCBjc3MsIHVpZCsrKTtcbiAgICAgICAgdGljaygwLCAxKTtcbiAgICAgICAgY29uc3Qgc3RhcnRfdGltZSA9IG5vdygpICsgZGVsYXk7XG4gICAgICAgIGNvbnN0IGVuZF90aW1lID0gc3RhcnRfdGltZSArIGR1cmF0aW9uO1xuICAgICAgICBpZiAodGFzaylcbiAgICAgICAgICAgIHRhc2suYWJvcnQoKTtcbiAgICAgICAgcnVubmluZyA9IHRydWU7XG4gICAgICAgIGFkZF9yZW5kZXJfY2FsbGJhY2soKCkgPT4gZGlzcGF0Y2gobm9kZSwgdHJ1ZSwgJ3N0YXJ0JykpO1xuICAgICAgICB0YXNrID0gbG9vcChub3cgPT4ge1xuICAgICAgICAgICAgaWYgKHJ1bm5pbmcpIHtcbiAgICAgICAgICAgICAgICBpZiAobm93ID49IGVuZF90aW1lKSB7XG4gICAgICAgICAgICAgICAgICAgIHRpY2soMSwgMCk7XG4gICAgICAgICAgICAgICAgICAgIGRpc3BhdGNoKG5vZGUsIHRydWUsICdlbmQnKTtcbiAgICAgICAgICAgICAgICAgICAgY2xlYW51cCgpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcnVubmluZyA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAobm93ID49IHN0YXJ0X3RpbWUpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdCA9IGVhc2luZygobm93IC0gc3RhcnRfdGltZSkgLyBkdXJhdGlvbik7XG4gICAgICAgICAgICAgICAgICAgIHRpY2sodCwgMSAtIHQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBydW5uaW5nO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgbGV0IHN0YXJ0ZWQgPSBmYWxzZTtcbiAgICByZXR1cm4ge1xuICAgICAgICBzdGFydCgpIHtcbiAgICAgICAgICAgIGlmIChzdGFydGVkKVxuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIHN0YXJ0ZWQgPSB0cnVlO1xuICAgICAgICAgICAgZGVsZXRlX3J1bGUobm9kZSk7XG4gICAgICAgICAgICBpZiAoaXNfZnVuY3Rpb24oY29uZmlnKSkge1xuICAgICAgICAgICAgICAgIGNvbmZpZyA9IGNvbmZpZygpO1xuICAgICAgICAgICAgICAgIHdhaXQoKS50aGVuKGdvKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGdvKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIGludmFsaWRhdGUoKSB7XG4gICAgICAgICAgICBzdGFydGVkID0gZmFsc2U7XG4gICAgICAgIH0sXG4gICAgICAgIGVuZCgpIHtcbiAgICAgICAgICAgIGlmIChydW5uaW5nKSB7XG4gICAgICAgICAgICAgICAgY2xlYW51cCgpO1xuICAgICAgICAgICAgICAgIHJ1bm5pbmcgPSBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG59XG5mdW5jdGlvbiBjcmVhdGVfb3V0X3RyYW5zaXRpb24obm9kZSwgZm4sIHBhcmFtcykge1xuICAgIGxldCBjb25maWcgPSBmbihub2RlLCBwYXJhbXMpO1xuICAgIGxldCBydW5uaW5nID0gdHJ1ZTtcbiAgICBsZXQgYW5pbWF0aW9uX25hbWU7XG4gICAgY29uc3QgZ3JvdXAgPSBvdXRyb3M7XG4gICAgZ3JvdXAuciArPSAxO1xuICAgIGZ1bmN0aW9uIGdvKCkge1xuICAgICAgICBjb25zdCB7IGRlbGF5ID0gMCwgZHVyYXRpb24gPSAzMDAsIGVhc2luZyA9IGlkZW50aXR5LCB0aWNrID0gbm9vcCwgY3NzIH0gPSBjb25maWcgfHwgbnVsbF90cmFuc2l0aW9uO1xuICAgICAgICBpZiAoY3NzKVxuICAgICAgICAgICAgYW5pbWF0aW9uX25hbWUgPSBjcmVhdGVfcnVsZShub2RlLCAxLCAwLCBkdXJhdGlvbiwgZGVsYXksIGVhc2luZywgY3NzKTtcbiAgICAgICAgY29uc3Qgc3RhcnRfdGltZSA9IG5vdygpICsgZGVsYXk7XG4gICAgICAgIGNvbnN0IGVuZF90aW1lID0gc3RhcnRfdGltZSArIGR1cmF0aW9uO1xuICAgICAgICBhZGRfcmVuZGVyX2NhbGxiYWNrKCgpID0+IGRpc3BhdGNoKG5vZGUsIGZhbHNlLCAnc3RhcnQnKSk7XG4gICAgICAgIGxvb3Aobm93ID0+IHtcbiAgICAgICAgICAgIGlmIChydW5uaW5nKSB7XG4gICAgICAgICAgICAgICAgaWYgKG5vdyA+PSBlbmRfdGltZSkge1xuICAgICAgICAgICAgICAgICAgICB0aWNrKDAsIDEpO1xuICAgICAgICAgICAgICAgICAgICBkaXNwYXRjaChub2RlLCBmYWxzZSwgJ2VuZCcpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoIS0tZ3JvdXAucikge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gdGhpcyB3aWxsIHJlc3VsdCBpbiBgZW5kKClgIGJlaW5nIGNhbGxlZCxcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHNvIHdlIGRvbid0IG5lZWQgdG8gY2xlYW4gdXAgaGVyZVxuICAgICAgICAgICAgICAgICAgICAgICAgcnVuX2FsbChncm91cC5jKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChub3cgPj0gc3RhcnRfdGltZSkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCB0ID0gZWFzaW5nKChub3cgLSBzdGFydF90aW1lKSAvIGR1cmF0aW9uKTtcbiAgICAgICAgICAgICAgICAgICAgdGljaygxIC0gdCwgdCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHJ1bm5pbmc7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBpZiAoaXNfZnVuY3Rpb24oY29uZmlnKSkge1xuICAgICAgICB3YWl0KCkudGhlbigoKSA9PiB7XG4gICAgICAgICAgICAvLyBAdHMtaWdub3JlXG4gICAgICAgICAgICBjb25maWcgPSBjb25maWcoKTtcbiAgICAgICAgICAgIGdvKCk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgZ28oKTtcbiAgICB9XG4gICAgcmV0dXJuIHtcbiAgICAgICAgZW5kKHJlc2V0KSB7XG4gICAgICAgICAgICBpZiAocmVzZXQgJiYgY29uZmlnLnRpY2spIHtcbiAgICAgICAgICAgICAgICBjb25maWcudGljaygxLCAwKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChydW5uaW5nKSB7XG4gICAgICAgICAgICAgICAgaWYgKGFuaW1hdGlvbl9uYW1lKVxuICAgICAgICAgICAgICAgICAgICBkZWxldGVfcnVsZShub2RlLCBhbmltYXRpb25fbmFtZSk7XG4gICAgICAgICAgICAgICAgcnVubmluZyA9IGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfTtcbn1cbmZ1bmN0aW9uIGNyZWF0ZV9iaWRpcmVjdGlvbmFsX3RyYW5zaXRpb24obm9kZSwgZm4sIHBhcmFtcywgaW50cm8pIHtcbiAgICBsZXQgY29uZmlnID0gZm4obm9kZSwgcGFyYW1zKTtcbiAgICBsZXQgdCA9IGludHJvID8gMCA6IDE7XG4gICAgbGV0IHJ1bm5pbmdfcHJvZ3JhbSA9IG51bGw7XG4gICAgbGV0IHBlbmRpbmdfcHJvZ3JhbSA9IG51bGw7XG4gICAgbGV0IGFuaW1hdGlvbl9uYW1lID0gbnVsbDtcbiAgICBmdW5jdGlvbiBjbGVhcl9hbmltYXRpb24oKSB7XG4gICAgICAgIGlmIChhbmltYXRpb25fbmFtZSlcbiAgICAgICAgICAgIGRlbGV0ZV9ydWxlKG5vZGUsIGFuaW1hdGlvbl9uYW1lKTtcbiAgICB9XG4gICAgZnVuY3Rpb24gaW5pdChwcm9ncmFtLCBkdXJhdGlvbikge1xuICAgICAgICBjb25zdCBkID0gKHByb2dyYW0uYiAtIHQpO1xuICAgICAgICBkdXJhdGlvbiAqPSBNYXRoLmFicyhkKTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGE6IHQsXG4gICAgICAgICAgICBiOiBwcm9ncmFtLmIsXG4gICAgICAgICAgICBkLFxuICAgICAgICAgICAgZHVyYXRpb24sXG4gICAgICAgICAgICBzdGFydDogcHJvZ3JhbS5zdGFydCxcbiAgICAgICAgICAgIGVuZDogcHJvZ3JhbS5zdGFydCArIGR1cmF0aW9uLFxuICAgICAgICAgICAgZ3JvdXA6IHByb2dyYW0uZ3JvdXBcbiAgICAgICAgfTtcbiAgICB9XG4gICAgZnVuY3Rpb24gZ28oYikge1xuICAgICAgICBjb25zdCB7IGRlbGF5ID0gMCwgZHVyYXRpb24gPSAzMDAsIGVhc2luZyA9IGlkZW50aXR5LCB0aWNrID0gbm9vcCwgY3NzIH0gPSBjb25maWcgfHwgbnVsbF90cmFuc2l0aW9uO1xuICAgICAgICBjb25zdCBwcm9ncmFtID0ge1xuICAgICAgICAgICAgc3RhcnQ6IG5vdygpICsgZGVsYXksXG4gICAgICAgICAgICBiXG4gICAgICAgIH07XG4gICAgICAgIGlmICghYikge1xuICAgICAgICAgICAgLy8gQHRzLWlnbm9yZSB0b2RvOiBpbXByb3ZlIHR5cGluZ3NcbiAgICAgICAgICAgIHByb2dyYW0uZ3JvdXAgPSBvdXRyb3M7XG4gICAgICAgICAgICBvdXRyb3MuciArPSAxO1xuICAgICAgICB9XG4gICAgICAgIGlmIChydW5uaW5nX3Byb2dyYW0gfHwgcGVuZGluZ19wcm9ncmFtKSB7XG4gICAgICAgICAgICBwZW5kaW5nX3Byb2dyYW0gPSBwcm9ncmFtO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgLy8gaWYgdGhpcyBpcyBhbiBpbnRybywgYW5kIHRoZXJlJ3MgYSBkZWxheSwgd2UgbmVlZCB0byBkb1xuICAgICAgICAgICAgLy8gYW4gaW5pdGlhbCB0aWNrIGFuZC9vciBhcHBseSBDU1MgYW5pbWF0aW9uIGltbWVkaWF0ZWx5XG4gICAgICAgICAgICBpZiAoY3NzKSB7XG4gICAgICAgICAgICAgICAgY2xlYXJfYW5pbWF0aW9uKCk7XG4gICAgICAgICAgICAgICAgYW5pbWF0aW9uX25hbWUgPSBjcmVhdGVfcnVsZShub2RlLCB0LCBiLCBkdXJhdGlvbiwgZGVsYXksIGVhc2luZywgY3NzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChiKVxuICAgICAgICAgICAgICAgIHRpY2soMCwgMSk7XG4gICAgICAgICAgICBydW5uaW5nX3Byb2dyYW0gPSBpbml0KHByb2dyYW0sIGR1cmF0aW9uKTtcbiAgICAgICAgICAgIGFkZF9yZW5kZXJfY2FsbGJhY2soKCkgPT4gZGlzcGF0Y2gobm9kZSwgYiwgJ3N0YXJ0JykpO1xuICAgICAgICAgICAgbG9vcChub3cgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChwZW5kaW5nX3Byb2dyYW0gJiYgbm93ID4gcGVuZGluZ19wcm9ncmFtLnN0YXJ0KSB7XG4gICAgICAgICAgICAgICAgICAgIHJ1bm5pbmdfcHJvZ3JhbSA9IGluaXQocGVuZGluZ19wcm9ncmFtLCBkdXJhdGlvbik7XG4gICAgICAgICAgICAgICAgICAgIHBlbmRpbmdfcHJvZ3JhbSA9IG51bGw7XG4gICAgICAgICAgICAgICAgICAgIGRpc3BhdGNoKG5vZGUsIHJ1bm5pbmdfcHJvZ3JhbS5iLCAnc3RhcnQnKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNzcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgY2xlYXJfYW5pbWF0aW9uKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBhbmltYXRpb25fbmFtZSA9IGNyZWF0ZV9ydWxlKG5vZGUsIHQsIHJ1bm5pbmdfcHJvZ3JhbS5iLCBydW5uaW5nX3Byb2dyYW0uZHVyYXRpb24sIDAsIGVhc2luZywgY29uZmlnLmNzcyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHJ1bm5pbmdfcHJvZ3JhbSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAobm93ID49IHJ1bm5pbmdfcHJvZ3JhbS5lbmQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRpY2sodCA9IHJ1bm5pbmdfcHJvZ3JhbS5iLCAxIC0gdCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBkaXNwYXRjaChub2RlLCBydW5uaW5nX3Byb2dyYW0uYiwgJ2VuZCcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFwZW5kaW5nX3Byb2dyYW0pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyB3ZSdyZSBkb25lXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJ1bm5pbmdfcHJvZ3JhbS5iKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGludHJvIOKAlCB3ZSBjYW4gdGlkeSB1cCBpbW1lZGlhdGVseVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGVhcl9hbmltYXRpb24oKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIG91dHJvIOKAlCBuZWVkcyB0byBiZSBjb29yZGluYXRlZFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIS0tcnVubmluZ19wcm9ncmFtLmdyb3VwLnIpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBydW5fYWxsKHJ1bm5pbmdfcHJvZ3JhbS5ncm91cC5jKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBydW5uaW5nX3Byb2dyYW0gPSBudWxsO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKG5vdyA+PSBydW5uaW5nX3Byb2dyYW0uc3RhcnQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHAgPSBub3cgLSBydW5uaW5nX3Byb2dyYW0uc3RhcnQ7XG4gICAgICAgICAgICAgICAgICAgICAgICB0ID0gcnVubmluZ19wcm9ncmFtLmEgKyBydW5uaW5nX3Byb2dyYW0uZCAqIGVhc2luZyhwIC8gcnVubmluZ19wcm9ncmFtLmR1cmF0aW9uKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRpY2sodCwgMSAtIHQpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiAhIShydW5uaW5nX3Byb2dyYW0gfHwgcGVuZGluZ19wcm9ncmFtKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiB7XG4gICAgICAgIHJ1bihiKSB7XG4gICAgICAgICAgICBpZiAoaXNfZnVuY3Rpb24oY29uZmlnKSkge1xuICAgICAgICAgICAgICAgIHdhaXQoKS50aGVuKCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgLy8gQHRzLWlnbm9yZVxuICAgICAgICAgICAgICAgICAgICBjb25maWcgPSBjb25maWcoKTtcbiAgICAgICAgICAgICAgICAgICAgZ28oYik7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBnbyhiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgZW5kKCkge1xuICAgICAgICAgICAgY2xlYXJfYW5pbWF0aW9uKCk7XG4gICAgICAgICAgICBydW5uaW5nX3Byb2dyYW0gPSBwZW5kaW5nX3Byb2dyYW0gPSBudWxsO1xuICAgICAgICB9XG4gICAgfTtcbn1cblxuZnVuY3Rpb24gaGFuZGxlX3Byb21pc2UocHJvbWlzZSwgaW5mbykge1xuICAgIGNvbnN0IHRva2VuID0gaW5mby50b2tlbiA9IHt9O1xuICAgIGZ1bmN0aW9uIHVwZGF0ZSh0eXBlLCBpbmRleCwga2V5LCB2YWx1ZSkge1xuICAgICAgICBpZiAoaW5mby50b2tlbiAhPT0gdG9rZW4pXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIGluZm8ucmVzb2x2ZWQgPSB2YWx1ZTtcbiAgICAgICAgbGV0IGNoaWxkX2N0eCA9IGluZm8uY3R4O1xuICAgICAgICBpZiAoa2V5ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGNoaWxkX2N0eCA9IGNoaWxkX2N0eC5zbGljZSgpO1xuICAgICAgICAgICAgY2hpbGRfY3R4W2tleV0gPSB2YWx1ZTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBibG9jayA9IHR5cGUgJiYgKGluZm8uY3VycmVudCA9IHR5cGUpKGNoaWxkX2N0eCk7XG4gICAgICAgIGxldCBuZWVkc19mbHVzaCA9IGZhbHNlO1xuICAgICAgICBpZiAoaW5mby5ibG9jaykge1xuICAgICAgICAgICAgaWYgKGluZm8uYmxvY2tzKSB7XG4gICAgICAgICAgICAgICAgaW5mby5ibG9ja3MuZm9yRWFjaCgoYmxvY2ssIGkpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGkgIT09IGluZGV4ICYmIGJsb2NrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBncm91cF9vdXRyb3MoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRyYW5zaXRpb25fb3V0KGJsb2NrLCAxLCAxLCAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGluZm8uYmxvY2tzW2ldID09PSBibG9jaykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbmZvLmJsb2Nrc1tpXSA9IG51bGw7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjaGVja19vdXRyb3MoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgaW5mby5ibG9jay5kKDEpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYmxvY2suYygpO1xuICAgICAgICAgICAgdHJhbnNpdGlvbl9pbihibG9jaywgMSk7XG4gICAgICAgICAgICBibG9jay5tKGluZm8ubW91bnQoKSwgaW5mby5hbmNob3IpO1xuICAgICAgICAgICAgbmVlZHNfZmx1c2ggPSB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGluZm8uYmxvY2sgPSBibG9jaztcbiAgICAgICAgaWYgKGluZm8uYmxvY2tzKVxuICAgICAgICAgICAgaW5mby5ibG9ja3NbaW5kZXhdID0gYmxvY2s7XG4gICAgICAgIGlmIChuZWVkc19mbHVzaCkge1xuICAgICAgICAgICAgZmx1c2goKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBpZiAoaXNfcHJvbWlzZShwcm9taXNlKSkge1xuICAgICAgICBjb25zdCBjdXJyZW50X2NvbXBvbmVudCA9IGdldF9jdXJyZW50X2NvbXBvbmVudCgpO1xuICAgICAgICBwcm9taXNlLnRoZW4odmFsdWUgPT4ge1xuICAgICAgICAgICAgc2V0X2N1cnJlbnRfY29tcG9uZW50KGN1cnJlbnRfY29tcG9uZW50KTtcbiAgICAgICAgICAgIHVwZGF0ZShpbmZvLnRoZW4sIDEsIGluZm8udmFsdWUsIHZhbHVlKTtcbiAgICAgICAgICAgIHNldF9jdXJyZW50X2NvbXBvbmVudChudWxsKTtcbiAgICAgICAgfSwgZXJyb3IgPT4ge1xuICAgICAgICAgICAgc2V0X2N1cnJlbnRfY29tcG9uZW50KGN1cnJlbnRfY29tcG9uZW50KTtcbiAgICAgICAgICAgIHVwZGF0ZShpbmZvLmNhdGNoLCAyLCBpbmZvLmVycm9yLCBlcnJvcik7XG4gICAgICAgICAgICBzZXRfY3VycmVudF9jb21wb25lbnQobnVsbCk7XG4gICAgICAgICAgICBpZiAoIWluZm8uaGFzQ2F0Y2gpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBlcnJvcjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIC8vIGlmIHdlIHByZXZpb3VzbHkgaGFkIGEgdGhlbi9jYXRjaCBibG9jaywgZGVzdHJveSBpdFxuICAgICAgICBpZiAoaW5mby5jdXJyZW50ICE9PSBpbmZvLnBlbmRpbmcpIHtcbiAgICAgICAgICAgIHVwZGF0ZShpbmZvLnBlbmRpbmcsIDApO1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIGlmIChpbmZvLmN1cnJlbnQgIT09IGluZm8udGhlbikge1xuICAgICAgICAgICAgdXBkYXRlKGluZm8udGhlbiwgMSwgaW5mby52YWx1ZSwgcHJvbWlzZSk7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBpbmZvLnJlc29sdmVkID0gcHJvbWlzZTtcbiAgICB9XG59XG5mdW5jdGlvbiB1cGRhdGVfYXdhaXRfYmxvY2tfYnJhbmNoKGluZm8sIGN0eCwgZGlydHkpIHtcbiAgICBjb25zdCBjaGlsZF9jdHggPSBjdHguc2xpY2UoKTtcbiAgICBjb25zdCB7IHJlc29sdmVkIH0gPSBpbmZvO1xuICAgIGlmIChpbmZvLmN1cnJlbnQgPT09IGluZm8udGhlbikge1xuICAgICAgICBjaGlsZF9jdHhbaW5mby52YWx1ZV0gPSByZXNvbHZlZDtcbiAgICB9XG4gICAgaWYgKGluZm8uY3VycmVudCA9PT0gaW5mby5jYXRjaCkge1xuICAgICAgICBjaGlsZF9jdHhbaW5mby5lcnJvcl0gPSByZXNvbHZlZDtcbiAgICB9XG4gICAgaW5mby5ibG9jay5wKGNoaWxkX2N0eCwgZGlydHkpO1xufVxuXG5jb25zdCBnbG9iYWxzID0gKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnXG4gICAgPyB3aW5kb3dcbiAgICA6IHR5cGVvZiBnbG9iYWxUaGlzICE9PSAndW5kZWZpbmVkJ1xuICAgICAgICA/IGdsb2JhbFRoaXNcbiAgICAgICAgOiBnbG9iYWwpO1xuXG5mdW5jdGlvbiBkZXN0cm95X2Jsb2NrKGJsb2NrLCBsb29rdXApIHtcbiAgICBibG9jay5kKDEpO1xuICAgIGxvb2t1cC5kZWxldGUoYmxvY2sua2V5KTtcbn1cbmZ1bmN0aW9uIG91dHJvX2FuZF9kZXN0cm95X2Jsb2NrKGJsb2NrLCBsb29rdXApIHtcbiAgICB0cmFuc2l0aW9uX291dChibG9jaywgMSwgMSwgKCkgPT4ge1xuICAgICAgICBsb29rdXAuZGVsZXRlKGJsb2NrLmtleSk7XG4gICAgfSk7XG59XG5mdW5jdGlvbiBmaXhfYW5kX2Rlc3Ryb3lfYmxvY2soYmxvY2ssIGxvb2t1cCkge1xuICAgIGJsb2NrLmYoKTtcbiAgICBkZXN0cm95X2Jsb2NrKGJsb2NrLCBsb29rdXApO1xufVxuZnVuY3Rpb24gZml4X2FuZF9vdXRyb19hbmRfZGVzdHJveV9ibG9jayhibG9jaywgbG9va3VwKSB7XG4gICAgYmxvY2suZigpO1xuICAgIG91dHJvX2FuZF9kZXN0cm95X2Jsb2NrKGJsb2NrLCBsb29rdXApO1xufVxuZnVuY3Rpb24gdXBkYXRlX2tleWVkX2VhY2gob2xkX2Jsb2NrcywgZGlydHksIGdldF9rZXksIGR5bmFtaWMsIGN0eCwgbGlzdCwgbG9va3VwLCBub2RlLCBkZXN0cm95LCBjcmVhdGVfZWFjaF9ibG9jaywgbmV4dCwgZ2V0X2NvbnRleHQpIHtcbiAgICBsZXQgbyA9IG9sZF9ibG9ja3MubGVuZ3RoO1xuICAgIGxldCBuID0gbGlzdC5sZW5ndGg7XG4gICAgbGV0IGkgPSBvO1xuICAgIGNvbnN0IG9sZF9pbmRleGVzID0ge307XG4gICAgd2hpbGUgKGktLSlcbiAgICAgICAgb2xkX2luZGV4ZXNbb2xkX2Jsb2Nrc1tpXS5rZXldID0gaTtcbiAgICBjb25zdCBuZXdfYmxvY2tzID0gW107XG4gICAgY29uc3QgbmV3X2xvb2t1cCA9IG5ldyBNYXAoKTtcbiAgICBjb25zdCBkZWx0YXMgPSBuZXcgTWFwKCk7XG4gICAgaSA9IG47XG4gICAgd2hpbGUgKGktLSkge1xuICAgICAgICBjb25zdCBjaGlsZF9jdHggPSBnZXRfY29udGV4dChjdHgsIGxpc3QsIGkpO1xuICAgICAgICBjb25zdCBrZXkgPSBnZXRfa2V5KGNoaWxkX2N0eCk7XG4gICAgICAgIGxldCBibG9jayA9IGxvb2t1cC5nZXQoa2V5KTtcbiAgICAgICAgaWYgKCFibG9jaykge1xuICAgICAgICAgICAgYmxvY2sgPSBjcmVhdGVfZWFjaF9ibG9jayhrZXksIGNoaWxkX2N0eCk7XG4gICAgICAgICAgICBibG9jay5jKCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoZHluYW1pYykge1xuICAgICAgICAgICAgYmxvY2sucChjaGlsZF9jdHgsIGRpcnR5KTtcbiAgICAgICAgfVxuICAgICAgICBuZXdfbG9va3VwLnNldChrZXksIG5ld19ibG9ja3NbaV0gPSBibG9jayk7XG4gICAgICAgIGlmIChrZXkgaW4gb2xkX2luZGV4ZXMpXG4gICAgICAgICAgICBkZWx0YXMuc2V0KGtleSwgTWF0aC5hYnMoaSAtIG9sZF9pbmRleGVzW2tleV0pKTtcbiAgICB9XG4gICAgY29uc3Qgd2lsbF9tb3ZlID0gbmV3IFNldCgpO1xuICAgIGNvbnN0IGRpZF9tb3ZlID0gbmV3IFNldCgpO1xuICAgIGZ1bmN0aW9uIGluc2VydChibG9jaykge1xuICAgICAgICB0cmFuc2l0aW9uX2luKGJsb2NrLCAxKTtcbiAgICAgICAgYmxvY2subShub2RlLCBuZXh0KTtcbiAgICAgICAgbG9va3VwLnNldChibG9jay5rZXksIGJsb2NrKTtcbiAgICAgICAgbmV4dCA9IGJsb2NrLmZpcnN0O1xuICAgICAgICBuLS07XG4gICAgfVxuICAgIHdoaWxlIChvICYmIG4pIHtcbiAgICAgICAgY29uc3QgbmV3X2Jsb2NrID0gbmV3X2Jsb2Nrc1tuIC0gMV07XG4gICAgICAgIGNvbnN0IG9sZF9ibG9jayA9IG9sZF9ibG9ja3NbbyAtIDFdO1xuICAgICAgICBjb25zdCBuZXdfa2V5ID0gbmV3X2Jsb2NrLmtleTtcbiAgICAgICAgY29uc3Qgb2xkX2tleSA9IG9sZF9ibG9jay5rZXk7XG4gICAgICAgIGlmIChuZXdfYmxvY2sgPT09IG9sZF9ibG9jaykge1xuICAgICAgICAgICAgLy8gZG8gbm90aGluZ1xuICAgICAgICAgICAgbmV4dCA9IG5ld19ibG9jay5maXJzdDtcbiAgICAgICAgICAgIG8tLTtcbiAgICAgICAgICAgIG4tLTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICghbmV3X2xvb2t1cC5oYXMob2xkX2tleSkpIHtcbiAgICAgICAgICAgIC8vIHJlbW92ZSBvbGQgYmxvY2tcbiAgICAgICAgICAgIGRlc3Ryb3kob2xkX2Jsb2NrLCBsb29rdXApO1xuICAgICAgICAgICAgby0tO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKCFsb29rdXAuaGFzKG5ld19rZXkpIHx8IHdpbGxfbW92ZS5oYXMobmV3X2tleSkpIHtcbiAgICAgICAgICAgIGluc2VydChuZXdfYmxvY2spO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGRpZF9tb3ZlLmhhcyhvbGRfa2V5KSkge1xuICAgICAgICAgICAgby0tO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGRlbHRhcy5nZXQobmV3X2tleSkgPiBkZWx0YXMuZ2V0KG9sZF9rZXkpKSB7XG4gICAgICAgICAgICBkaWRfbW92ZS5hZGQobmV3X2tleSk7XG4gICAgICAgICAgICBpbnNlcnQobmV3X2Jsb2NrKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHdpbGxfbW92ZS5hZGQob2xkX2tleSk7XG4gICAgICAgICAgICBvLS07XG4gICAgICAgIH1cbiAgICB9XG4gICAgd2hpbGUgKG8tLSkge1xuICAgICAgICBjb25zdCBvbGRfYmxvY2sgPSBvbGRfYmxvY2tzW29dO1xuICAgICAgICBpZiAoIW5ld19sb29rdXAuaGFzKG9sZF9ibG9jay5rZXkpKVxuICAgICAgICAgICAgZGVzdHJveShvbGRfYmxvY2ssIGxvb2t1cCk7XG4gICAgfVxuICAgIHdoaWxlIChuKVxuICAgICAgICBpbnNlcnQobmV3X2Jsb2Nrc1tuIC0gMV0pO1xuICAgIHJldHVybiBuZXdfYmxvY2tzO1xufVxuZnVuY3Rpb24gdmFsaWRhdGVfZWFjaF9rZXlzKGN0eCwgbGlzdCwgZ2V0X2NvbnRleHQsIGdldF9rZXkpIHtcbiAgICBjb25zdCBrZXlzID0gbmV3IFNldCgpO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbGlzdC5sZW5ndGg7IGkrKykge1xuICAgICAgICBjb25zdCBrZXkgPSBnZXRfa2V5KGdldF9jb250ZXh0KGN0eCwgbGlzdCwgaSkpO1xuICAgICAgICBpZiAoa2V5cy5oYXMoa2V5KSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdDYW5ub3QgaGF2ZSBkdXBsaWNhdGUga2V5cyBpbiBhIGtleWVkIGVhY2gnKTtcbiAgICAgICAgfVxuICAgICAgICBrZXlzLmFkZChrZXkpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gZ2V0X3NwcmVhZF91cGRhdGUobGV2ZWxzLCB1cGRhdGVzKSB7XG4gICAgY29uc3QgdXBkYXRlID0ge307XG4gICAgY29uc3QgdG9fbnVsbF9vdXQgPSB7fTtcbiAgICBjb25zdCBhY2NvdW50ZWRfZm9yID0geyAkJHNjb3BlOiAxIH07XG4gICAgbGV0IGkgPSBsZXZlbHMubGVuZ3RoO1xuICAgIHdoaWxlIChpLS0pIHtcbiAgICAgICAgY29uc3QgbyA9IGxldmVsc1tpXTtcbiAgICAgICAgY29uc3QgbiA9IHVwZGF0ZXNbaV07XG4gICAgICAgIGlmIChuKSB7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IGtleSBpbiBvKSB7XG4gICAgICAgICAgICAgICAgaWYgKCEoa2V5IGluIG4pKVxuICAgICAgICAgICAgICAgICAgICB0b19udWxsX291dFtrZXldID0gMTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGZvciAoY29uc3Qga2V5IGluIG4pIHtcbiAgICAgICAgICAgICAgICBpZiAoIWFjY291bnRlZF9mb3Jba2V5XSkge1xuICAgICAgICAgICAgICAgICAgICB1cGRhdGVba2V5XSA9IG5ba2V5XTtcbiAgICAgICAgICAgICAgICAgICAgYWNjb3VudGVkX2ZvcltrZXldID0gMTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBsZXZlbHNbaV0gPSBuO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgZm9yIChjb25zdCBrZXkgaW4gbykge1xuICAgICAgICAgICAgICAgIGFjY291bnRlZF9mb3Jba2V5XSA9IDE7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgZm9yIChjb25zdCBrZXkgaW4gdG9fbnVsbF9vdXQpIHtcbiAgICAgICAgaWYgKCEoa2V5IGluIHVwZGF0ZSkpXG4gICAgICAgICAgICB1cGRhdGVba2V5XSA9IHVuZGVmaW5lZDtcbiAgICB9XG4gICAgcmV0dXJuIHVwZGF0ZTtcbn1cbmZ1bmN0aW9uIGdldF9zcHJlYWRfb2JqZWN0KHNwcmVhZF9wcm9wcykge1xuICAgIHJldHVybiB0eXBlb2Ygc3ByZWFkX3Byb3BzID09PSAnb2JqZWN0JyAmJiBzcHJlYWRfcHJvcHMgIT09IG51bGwgPyBzcHJlYWRfcHJvcHMgOiB7fTtcbn1cblxuLy8gc291cmNlOiBodHRwczovL2h0bWwuc3BlYy53aGF0d2cub3JnL211bHRpcGFnZS9pbmRpY2VzLmh0bWxcbmNvbnN0IGJvb2xlYW5fYXR0cmlidXRlcyA9IG5ldyBTZXQoW1xuICAgICdhbGxvd2Z1bGxzY3JlZW4nLFxuICAgICdhbGxvd3BheW1lbnRyZXF1ZXN0JyxcbiAgICAnYXN5bmMnLFxuICAgICdhdXRvZm9jdXMnLFxuICAgICdhdXRvcGxheScsXG4gICAgJ2NoZWNrZWQnLFxuICAgICdjb250cm9scycsXG4gICAgJ2RlZmF1bHQnLFxuICAgICdkZWZlcicsXG4gICAgJ2Rpc2FibGVkJyxcbiAgICAnZm9ybW5vdmFsaWRhdGUnLFxuICAgICdoaWRkZW4nLFxuICAgICdpc21hcCcsXG4gICAgJ2xvb3AnLFxuICAgICdtdWx0aXBsZScsXG4gICAgJ211dGVkJyxcbiAgICAnbm9tb2R1bGUnLFxuICAgICdub3ZhbGlkYXRlJyxcbiAgICAnb3BlbicsXG4gICAgJ3BsYXlzaW5saW5lJyxcbiAgICAncmVhZG9ubHknLFxuICAgICdyZXF1aXJlZCcsXG4gICAgJ3JldmVyc2VkJyxcbiAgICAnc2VsZWN0ZWQnXG5dKTtcblxuY29uc3QgaW52YWxpZF9hdHRyaWJ1dGVfbmFtZV9jaGFyYWN0ZXIgPSAvW1xccydcIj4vPVxcdXtGREQwfS1cXHV7RkRFRn1cXHV7RkZGRX1cXHV7RkZGRn1cXHV7MUZGRkV9XFx1ezFGRkZGfVxcdXsyRkZGRX1cXHV7MkZGRkZ9XFx1ezNGRkZFfVxcdXszRkZGRn1cXHV7NEZGRkV9XFx1ezRGRkZGfVxcdXs1RkZGRX1cXHV7NUZGRkZ9XFx1ezZGRkZFfVxcdXs2RkZGRn1cXHV7N0ZGRkV9XFx1ezdGRkZGfVxcdXs4RkZGRX1cXHV7OEZGRkZ9XFx1ezlGRkZFfVxcdXs5RkZGRn1cXHV7QUZGRkV9XFx1e0FGRkZGfVxcdXtCRkZGRX1cXHV7QkZGRkZ9XFx1e0NGRkZFfVxcdXtDRkZGRn1cXHV7REZGRkV9XFx1e0RGRkZGfVxcdXtFRkZGRX1cXHV7RUZGRkZ9XFx1e0ZGRkZFfVxcdXtGRkZGRn1cXHV7MTBGRkZFfVxcdXsxMEZGRkZ9XS91O1xuLy8gaHR0cHM6Ly9odG1sLnNwZWMud2hhdHdnLm9yZy9tdWx0aXBhZ2Uvc3ludGF4Lmh0bWwjYXR0cmlidXRlcy0yXG4vLyBodHRwczovL2luZnJhLnNwZWMud2hhdHdnLm9yZy8jbm9uY2hhcmFjdGVyXG5mdW5jdGlvbiBzcHJlYWQoYXJncywgYXR0cnNfdG9fYWRkKSB7XG4gICAgY29uc3QgYXR0cmlidXRlcyA9IE9iamVjdC5hc3NpZ24oe30sIC4uLmFyZ3MpO1xuICAgIGlmIChhdHRyc190b19hZGQpIHtcbiAgICAgICAgY29uc3QgY2xhc3Nlc190b19hZGQgPSBhdHRyc190b19hZGQuY2xhc3NlcztcbiAgICAgICAgY29uc3Qgc3R5bGVzX3RvX2FkZCA9IGF0dHJzX3RvX2FkZC5zdHlsZXM7XG4gICAgICAgIGlmIChjbGFzc2VzX3RvX2FkZCkge1xuICAgICAgICAgICAgaWYgKGF0dHJpYnV0ZXMuY2xhc3MgPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIGF0dHJpYnV0ZXMuY2xhc3MgPSBjbGFzc2VzX3RvX2FkZDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGF0dHJpYnV0ZXMuY2xhc3MgKz0gJyAnICsgY2xhc3Nlc190b19hZGQ7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHN0eWxlc190b19hZGQpIHtcbiAgICAgICAgICAgIGlmIChhdHRyaWJ1dGVzLnN0eWxlID09IG51bGwpIHtcbiAgICAgICAgICAgICAgICBhdHRyaWJ1dGVzLnN0eWxlID0gc3R5bGVfb2JqZWN0X3RvX3N0cmluZyhzdHlsZXNfdG9fYWRkKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGF0dHJpYnV0ZXMuc3R5bGUgPSBzdHlsZV9vYmplY3RfdG9fc3RyaW5nKG1lcmdlX3Nzcl9zdHlsZXMoYXR0cmlidXRlcy5zdHlsZSwgc3R5bGVzX3RvX2FkZCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIGxldCBzdHIgPSAnJztcbiAgICBPYmplY3Qua2V5cyhhdHRyaWJ1dGVzKS5mb3JFYWNoKG5hbWUgPT4ge1xuICAgICAgICBpZiAoaW52YWxpZF9hdHRyaWJ1dGVfbmFtZV9jaGFyYWN0ZXIudGVzdChuYW1lKSlcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgY29uc3QgdmFsdWUgPSBhdHRyaWJ1dGVzW25hbWVdO1xuICAgICAgICBpZiAodmFsdWUgPT09IHRydWUpXG4gICAgICAgICAgICBzdHIgKz0gJyAnICsgbmFtZTtcbiAgICAgICAgZWxzZSBpZiAoYm9vbGVhbl9hdHRyaWJ1dGVzLmhhcyhuYW1lLnRvTG93ZXJDYXNlKCkpKSB7XG4gICAgICAgICAgICBpZiAodmFsdWUpXG4gICAgICAgICAgICAgICAgc3RyICs9ICcgJyArIG5hbWU7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAodmFsdWUgIT0gbnVsbCkge1xuICAgICAgICAgICAgc3RyICs9IGAgJHtuYW1lfT1cIiR7dmFsdWV9XCJgO1xuICAgICAgICB9XG4gICAgfSk7XG4gICAgcmV0dXJuIHN0cjtcbn1cbmZ1bmN0aW9uIG1lcmdlX3Nzcl9zdHlsZXMoc3R5bGVfYXR0cmlidXRlLCBzdHlsZV9kaXJlY3RpdmUpIHtcbiAgICBjb25zdCBzdHlsZV9vYmplY3QgPSB7fTtcbiAgICBmb3IgKGNvbnN0IGluZGl2aWR1YWxfc3R5bGUgb2Ygc3R5bGVfYXR0cmlidXRlLnNwbGl0KCc7JykpIHtcbiAgICAgICAgY29uc3QgY29sb25faW5kZXggPSBpbmRpdmlkdWFsX3N0eWxlLmluZGV4T2YoJzonKTtcbiAgICAgICAgY29uc3QgbmFtZSA9IGluZGl2aWR1YWxfc3R5bGUuc2xpY2UoMCwgY29sb25faW5kZXgpLnRyaW0oKTtcbiAgICAgICAgY29uc3QgdmFsdWUgPSBpbmRpdmlkdWFsX3N0eWxlLnNsaWNlKGNvbG9uX2luZGV4ICsgMSkudHJpbSgpO1xuICAgICAgICBpZiAoIW5hbWUpXG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgc3R5bGVfb2JqZWN0W25hbWVdID0gdmFsdWU7XG4gICAgfVxuICAgIGZvciAoY29uc3QgbmFtZSBpbiBzdHlsZV9kaXJlY3RpdmUpIHtcbiAgICAgICAgY29uc3QgdmFsdWUgPSBzdHlsZV9kaXJlY3RpdmVbbmFtZV07XG4gICAgICAgIGlmICh2YWx1ZSkge1xuICAgICAgICAgICAgc3R5bGVfb2JqZWN0W25hbWVdID0gdmFsdWU7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBkZWxldGUgc3R5bGVfb2JqZWN0W25hbWVdO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBzdHlsZV9vYmplY3Q7XG59XG5jb25zdCBlc2NhcGVkID0ge1xuICAgICdcIic6ICcmcXVvdDsnLFxuICAgIFwiJ1wiOiAnJiMzOTsnLFxuICAgICcmJzogJyZhbXA7JyxcbiAgICAnPCc6ICcmbHQ7JyxcbiAgICAnPic6ICcmZ3Q7J1xufTtcbmZ1bmN0aW9uIGVzY2FwZShodG1sKSB7XG4gICAgcmV0dXJuIFN0cmluZyhodG1sKS5yZXBsYWNlKC9bXCInJjw+XS9nLCBtYXRjaCA9PiBlc2NhcGVkW21hdGNoXSk7XG59XG5mdW5jdGlvbiBlc2NhcGVfYXR0cmlidXRlX3ZhbHVlKHZhbHVlKSB7XG4gICAgcmV0dXJuIHR5cGVvZiB2YWx1ZSA9PT0gJ3N0cmluZycgPyBlc2NhcGUodmFsdWUpIDogdmFsdWU7XG59XG5mdW5jdGlvbiBlc2NhcGVfb2JqZWN0KG9iaikge1xuICAgIGNvbnN0IHJlc3VsdCA9IHt9O1xuICAgIGZvciAoY29uc3Qga2V5IGluIG9iaikge1xuICAgICAgICByZXN1bHRba2V5XSA9IGVzY2FwZV9hdHRyaWJ1dGVfdmFsdWUob2JqW2tleV0pO1xuICAgIH1cbiAgICByZXR1cm4gcmVzdWx0O1xufVxuZnVuY3Rpb24gZWFjaChpdGVtcywgZm4pIHtcbiAgICBsZXQgc3RyID0gJyc7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBpdGVtcy5sZW5ndGg7IGkgKz0gMSkge1xuICAgICAgICBzdHIgKz0gZm4oaXRlbXNbaV0sIGkpO1xuICAgIH1cbiAgICByZXR1cm4gc3RyO1xufVxuY29uc3QgbWlzc2luZ19jb21wb25lbnQgPSB7XG4gICAgJCRyZW5kZXI6ICgpID0+ICcnXG59O1xuZnVuY3Rpb24gdmFsaWRhdGVfY29tcG9uZW50KGNvbXBvbmVudCwgbmFtZSkge1xuICAgIGlmICghY29tcG9uZW50IHx8ICFjb21wb25lbnQuJCRyZW5kZXIpIHtcbiAgICAgICAgaWYgKG5hbWUgPT09ICdzdmVsdGU6Y29tcG9uZW50JylcbiAgICAgICAgICAgIG5hbWUgKz0gJyB0aGlzPXsuLi59JztcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGA8JHtuYW1lfT4gaXMgbm90IGEgdmFsaWQgU1NSIGNvbXBvbmVudC4gWW91IG1heSBuZWVkIHRvIHJldmlldyB5b3VyIGJ1aWxkIGNvbmZpZyB0byBlbnN1cmUgdGhhdCBkZXBlbmRlbmNpZXMgYXJlIGNvbXBpbGVkLCByYXRoZXIgdGhhbiBpbXBvcnRlZCBhcyBwcmUtY29tcGlsZWQgbW9kdWxlc2ApO1xuICAgIH1cbiAgICByZXR1cm4gY29tcG9uZW50O1xufVxuZnVuY3Rpb24gZGVidWcoZmlsZSwgbGluZSwgY29sdW1uLCB2YWx1ZXMpIHtcbiAgICBjb25zb2xlLmxvZyhge0BkZWJ1Z30gJHtmaWxlID8gZmlsZSArICcgJyA6ICcnfSgke2xpbmV9OiR7Y29sdW1ufSlgKTsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby1jb25zb2xlXG4gICAgY29uc29sZS5sb2codmFsdWVzKTsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby1jb25zb2xlXG4gICAgcmV0dXJuICcnO1xufVxubGV0IG9uX2Rlc3Ryb3k7XG5mdW5jdGlvbiBjcmVhdGVfc3NyX2NvbXBvbmVudChmbikge1xuICAgIGZ1bmN0aW9uICQkcmVuZGVyKHJlc3VsdCwgcHJvcHMsIGJpbmRpbmdzLCBzbG90cywgY29udGV4dCkge1xuICAgICAgICBjb25zdCBwYXJlbnRfY29tcG9uZW50ID0gY3VycmVudF9jb21wb25lbnQ7XG4gICAgICAgIGNvbnN0ICQkID0ge1xuICAgICAgICAgICAgb25fZGVzdHJveSxcbiAgICAgICAgICAgIGNvbnRleHQ6IG5ldyBNYXAoY29udGV4dCB8fCAocGFyZW50X2NvbXBvbmVudCA/IHBhcmVudF9jb21wb25lbnQuJCQuY29udGV4dCA6IFtdKSksXG4gICAgICAgICAgICAvLyB0aGVzZSB3aWxsIGJlIGltbWVkaWF0ZWx5IGRpc2NhcmRlZFxuICAgICAgICAgICAgb25fbW91bnQ6IFtdLFxuICAgICAgICAgICAgYmVmb3JlX3VwZGF0ZTogW10sXG4gICAgICAgICAgICBhZnRlcl91cGRhdGU6IFtdLFxuICAgICAgICAgICAgY2FsbGJhY2tzOiBibGFua19vYmplY3QoKVxuICAgICAgICB9O1xuICAgICAgICBzZXRfY3VycmVudF9jb21wb25lbnQoeyAkJCB9KTtcbiAgICAgICAgY29uc3QgaHRtbCA9IGZuKHJlc3VsdCwgcHJvcHMsIGJpbmRpbmdzLCBzbG90cyk7XG4gICAgICAgIHNldF9jdXJyZW50X2NvbXBvbmVudChwYXJlbnRfY29tcG9uZW50KTtcbiAgICAgICAgcmV0dXJuIGh0bWw7XG4gICAgfVxuICAgIHJldHVybiB7XG4gICAgICAgIHJlbmRlcjogKHByb3BzID0ge30sIHsgJCRzbG90cyA9IHt9LCBjb250ZXh0ID0gbmV3IE1hcCgpIH0gPSB7fSkgPT4ge1xuICAgICAgICAgICAgb25fZGVzdHJveSA9IFtdO1xuICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0geyB0aXRsZTogJycsIGhlYWQ6ICcnLCBjc3M6IG5ldyBTZXQoKSB9O1xuICAgICAgICAgICAgY29uc3QgaHRtbCA9ICQkcmVuZGVyKHJlc3VsdCwgcHJvcHMsIHt9LCAkJHNsb3RzLCBjb250ZXh0KTtcbiAgICAgICAgICAgIHJ1bl9hbGwob25fZGVzdHJveSk7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIGh0bWwsXG4gICAgICAgICAgICAgICAgY3NzOiB7XG4gICAgICAgICAgICAgICAgICAgIGNvZGU6IEFycmF5LmZyb20ocmVzdWx0LmNzcykubWFwKGNzcyA9PiBjc3MuY29kZSkuam9pbignXFxuJyksXG4gICAgICAgICAgICAgICAgICAgIG1hcDogbnVsbCAvLyBUT0RPXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBoZWFkOiByZXN1bHQudGl0bGUgKyByZXN1bHQuaGVhZFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfSxcbiAgICAgICAgJCRyZW5kZXJcbiAgICB9O1xufVxuZnVuY3Rpb24gYWRkX2F0dHJpYnV0ZShuYW1lLCB2YWx1ZSwgYm9vbGVhbikge1xuICAgIGlmICh2YWx1ZSA9PSBudWxsIHx8IChib29sZWFuICYmICF2YWx1ZSkpXG4gICAgICAgIHJldHVybiAnJztcbiAgICByZXR1cm4gYCAke25hbWV9JHt2YWx1ZSA9PT0gdHJ1ZSAmJiBib29sZWFuX2F0dHJpYnV0ZXMuaGFzKG5hbWUpID8gJycgOiBgPSR7dHlwZW9mIHZhbHVlID09PSAnc3RyaW5nJyA/IEpTT04uc3RyaW5naWZ5KGVzY2FwZSh2YWx1ZSkpIDogYFwiJHt2YWx1ZX1cImB9YH1gO1xufVxuZnVuY3Rpb24gYWRkX2NsYXNzZXMoY2xhc3Nlcykge1xuICAgIHJldHVybiBjbGFzc2VzID8gYCBjbGFzcz1cIiR7Y2xhc3Nlc31cImAgOiAnJztcbn1cbmZ1bmN0aW9uIHN0eWxlX29iamVjdF90b19zdHJpbmcoc3R5bGVfb2JqZWN0KSB7XG4gICAgcmV0dXJuIE9iamVjdC5rZXlzKHN0eWxlX29iamVjdClcbiAgICAgICAgLmZpbHRlcihrZXkgPT4gc3R5bGVfb2JqZWN0W2tleV0pXG4gICAgICAgIC5tYXAoa2V5ID0+IGAke2tleX06ICR7c3R5bGVfb2JqZWN0W2tleV19O2ApXG4gICAgICAgIC5qb2luKCcgJyk7XG59XG5mdW5jdGlvbiBhZGRfc3R5bGVzKHN0eWxlX29iamVjdCkge1xuICAgIGNvbnN0IHN0eWxlcyA9IHN0eWxlX29iamVjdF90b19zdHJpbmcoc3R5bGVfb2JqZWN0KTtcbiAgICByZXR1cm4gc3R5bGVzID8gYCBzdHlsZT1cIiR7c3R5bGVzfVwiYCA6ICcnO1xufVxuXG5mdW5jdGlvbiBiaW5kKGNvbXBvbmVudCwgbmFtZSwgY2FsbGJhY2spIHtcbiAgICBjb25zdCBpbmRleCA9IGNvbXBvbmVudC4kJC5wcm9wc1tuYW1lXTtcbiAgICBpZiAoaW5kZXggIT09IHVuZGVmaW5lZCkge1xuICAgICAgICBjb21wb25lbnQuJCQuYm91bmRbaW5kZXhdID0gY2FsbGJhY2s7XG4gICAgICAgIGNhbGxiYWNrKGNvbXBvbmVudC4kJC5jdHhbaW5kZXhdKTtcbiAgICB9XG59XG5mdW5jdGlvbiBjcmVhdGVfY29tcG9uZW50KGJsb2NrKSB7XG4gICAgYmxvY2sgJiYgYmxvY2suYygpO1xufVxuZnVuY3Rpb24gY2xhaW1fY29tcG9uZW50KGJsb2NrLCBwYXJlbnRfbm9kZXMpIHtcbiAgICBibG9jayAmJiBibG9jay5sKHBhcmVudF9ub2Rlcyk7XG59XG5mdW5jdGlvbiBtb3VudF9jb21wb25lbnQoY29tcG9uZW50LCB0YXJnZXQsIGFuY2hvciwgY3VzdG9tRWxlbWVudCkge1xuICAgIGNvbnN0IHsgZnJhZ21lbnQsIG9uX21vdW50LCBvbl9kZXN0cm95LCBhZnRlcl91cGRhdGUgfSA9IGNvbXBvbmVudC4kJDtcbiAgICBmcmFnbWVudCAmJiBmcmFnbWVudC5tKHRhcmdldCwgYW5jaG9yKTtcbiAgICBpZiAoIWN1c3RvbUVsZW1lbnQpIHtcbiAgICAgICAgLy8gb25Nb3VudCBoYXBwZW5zIGJlZm9yZSB0aGUgaW5pdGlhbCBhZnRlclVwZGF0ZVxuICAgICAgICBhZGRfcmVuZGVyX2NhbGxiYWNrKCgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IG5ld19vbl9kZXN0cm95ID0gb25fbW91bnQubWFwKHJ1bikuZmlsdGVyKGlzX2Z1bmN0aW9uKTtcbiAgICAgICAgICAgIGlmIChvbl9kZXN0cm95KSB7XG4gICAgICAgICAgICAgICAgb25fZGVzdHJveS5wdXNoKC4uLm5ld19vbl9kZXN0cm95KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIC8vIEVkZ2UgY2FzZSAtIGNvbXBvbmVudCB3YXMgZGVzdHJveWVkIGltbWVkaWF0ZWx5LFxuICAgICAgICAgICAgICAgIC8vIG1vc3QgbGlrZWx5IGFzIGEgcmVzdWx0IG9mIGEgYmluZGluZyBpbml0aWFsaXNpbmdcbiAgICAgICAgICAgICAgICBydW5fYWxsKG5ld19vbl9kZXN0cm95KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbXBvbmVudC4kJC5vbl9tb3VudCA9IFtdO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgYWZ0ZXJfdXBkYXRlLmZvckVhY2goYWRkX3JlbmRlcl9jYWxsYmFjayk7XG59XG5mdW5jdGlvbiBkZXN0cm95X2NvbXBvbmVudChjb21wb25lbnQsIGRldGFjaGluZykge1xuICAgIGNvbnN0ICQkID0gY29tcG9uZW50LiQkO1xuICAgIGlmICgkJC5mcmFnbWVudCAhPT0gbnVsbCkge1xuICAgICAgICBydW5fYWxsKCQkLm9uX2Rlc3Ryb3kpO1xuICAgICAgICAkJC5mcmFnbWVudCAmJiAkJC5mcmFnbWVudC5kKGRldGFjaGluZyk7XG4gICAgICAgIC8vIFRPRE8gbnVsbCBvdXQgb3RoZXIgcmVmcywgaW5jbHVkaW5nIGNvbXBvbmVudC4kJCAoYnV0IG5lZWQgdG9cbiAgICAgICAgLy8gcHJlc2VydmUgZmluYWwgc3RhdGU/KVxuICAgICAgICAkJC5vbl9kZXN0cm95ID0gJCQuZnJhZ21lbnQgPSBudWxsO1xuICAgICAgICAkJC5jdHggPSBbXTtcbiAgICB9XG59XG5mdW5jdGlvbiBtYWtlX2RpcnR5KGNvbXBvbmVudCwgaSkge1xuICAgIGlmIChjb21wb25lbnQuJCQuZGlydHlbMF0gPT09IC0xKSB7XG4gICAgICAgIGRpcnR5X2NvbXBvbmVudHMucHVzaChjb21wb25lbnQpO1xuICAgICAgICBzY2hlZHVsZV91cGRhdGUoKTtcbiAgICAgICAgY29tcG9uZW50LiQkLmRpcnR5LmZpbGwoMCk7XG4gICAgfVxuICAgIGNvbXBvbmVudC4kJC5kaXJ0eVsoaSAvIDMxKSB8IDBdIHw9ICgxIDw8IChpICUgMzEpKTtcbn1cbmZ1bmN0aW9uIGluaXQoY29tcG9uZW50LCBvcHRpb25zLCBpbnN0YW5jZSwgY3JlYXRlX2ZyYWdtZW50LCBub3RfZXF1YWwsIHByb3BzLCBhcHBlbmRfc3R5bGVzLCBkaXJ0eSA9IFstMV0pIHtcbiAgICBjb25zdCBwYXJlbnRfY29tcG9uZW50ID0gY3VycmVudF9jb21wb25lbnQ7XG4gICAgc2V0X2N1cnJlbnRfY29tcG9uZW50KGNvbXBvbmVudCk7XG4gICAgY29uc3QgJCQgPSBjb21wb25lbnQuJCQgPSB7XG4gICAgICAgIGZyYWdtZW50OiBudWxsLFxuICAgICAgICBjdHg6IG51bGwsXG4gICAgICAgIC8vIHN0YXRlXG4gICAgICAgIHByb3BzLFxuICAgICAgICB1cGRhdGU6IG5vb3AsXG4gICAgICAgIG5vdF9lcXVhbCxcbiAgICAgICAgYm91bmQ6IGJsYW5rX29iamVjdCgpLFxuICAgICAgICAvLyBsaWZlY3ljbGVcbiAgICAgICAgb25fbW91bnQ6IFtdLFxuICAgICAgICBvbl9kZXN0cm95OiBbXSxcbiAgICAgICAgb25fZGlzY29ubmVjdDogW10sXG4gICAgICAgIGJlZm9yZV91cGRhdGU6IFtdLFxuICAgICAgICBhZnRlcl91cGRhdGU6IFtdLFxuICAgICAgICBjb250ZXh0OiBuZXcgTWFwKG9wdGlvbnMuY29udGV4dCB8fCAocGFyZW50X2NvbXBvbmVudCA/IHBhcmVudF9jb21wb25lbnQuJCQuY29udGV4dCA6IFtdKSksXG4gICAgICAgIC8vIGV2ZXJ5dGhpbmcgZWxzZVxuICAgICAgICBjYWxsYmFja3M6IGJsYW5rX29iamVjdCgpLFxuICAgICAgICBkaXJ0eSxcbiAgICAgICAgc2tpcF9ib3VuZDogZmFsc2UsXG4gICAgICAgIHJvb3Q6IG9wdGlvbnMudGFyZ2V0IHx8IHBhcmVudF9jb21wb25lbnQuJCQucm9vdFxuICAgIH07XG4gICAgYXBwZW5kX3N0eWxlcyAmJiBhcHBlbmRfc3R5bGVzKCQkLnJvb3QpO1xuICAgIGxldCByZWFkeSA9IGZhbHNlO1xuICAgICQkLmN0eCA9IGluc3RhbmNlXG4gICAgICAgID8gaW5zdGFuY2UoY29tcG9uZW50LCBvcHRpb25zLnByb3BzIHx8IHt9LCAoaSwgcmV0LCAuLi5yZXN0KSA9PiB7XG4gICAgICAgICAgICBjb25zdCB2YWx1ZSA9IHJlc3QubGVuZ3RoID8gcmVzdFswXSA6IHJldDtcbiAgICAgICAgICAgIGlmICgkJC5jdHggJiYgbm90X2VxdWFsKCQkLmN0eFtpXSwgJCQuY3R4W2ldID0gdmFsdWUpKSB7XG4gICAgICAgICAgICAgICAgaWYgKCEkJC5za2lwX2JvdW5kICYmICQkLmJvdW5kW2ldKVxuICAgICAgICAgICAgICAgICAgICAkJC5ib3VuZFtpXSh2YWx1ZSk7XG4gICAgICAgICAgICAgICAgaWYgKHJlYWR5KVxuICAgICAgICAgICAgICAgICAgICBtYWtlX2RpcnR5KGNvbXBvbmVudCwgaSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gcmV0O1xuICAgICAgICB9KVxuICAgICAgICA6IFtdO1xuICAgICQkLnVwZGF0ZSgpO1xuICAgIHJlYWR5ID0gdHJ1ZTtcbiAgICBydW5fYWxsKCQkLmJlZm9yZV91cGRhdGUpO1xuICAgIC8vIGBmYWxzZWAgYXMgYSBzcGVjaWFsIGNhc2Ugb2Ygbm8gRE9NIGNvbXBvbmVudFxuICAgICQkLmZyYWdtZW50ID0gY3JlYXRlX2ZyYWdtZW50ID8gY3JlYXRlX2ZyYWdtZW50KCQkLmN0eCkgOiBmYWxzZTtcbiAgICBpZiAob3B0aW9ucy50YXJnZXQpIHtcbiAgICAgICAgaWYgKG9wdGlvbnMuaHlkcmF0ZSkge1xuICAgICAgICAgICAgc3RhcnRfaHlkcmF0aW5nKCk7XG4gICAgICAgICAgICBjb25zdCBub2RlcyA9IGNoaWxkcmVuKG9wdGlvbnMudGFyZ2V0KTtcbiAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tbm9uLW51bGwtYXNzZXJ0aW9uXG4gICAgICAgICAgICAkJC5mcmFnbWVudCAmJiAkJC5mcmFnbWVudC5sKG5vZGVzKTtcbiAgICAgICAgICAgIG5vZGVzLmZvckVhY2goZGV0YWNoKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tbm9uLW51bGwtYXNzZXJ0aW9uXG4gICAgICAgICAgICAkJC5mcmFnbWVudCAmJiAkJC5mcmFnbWVudC5jKCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG9wdGlvbnMuaW50cm8pXG4gICAgICAgICAgICB0cmFuc2l0aW9uX2luKGNvbXBvbmVudC4kJC5mcmFnbWVudCk7XG4gICAgICAgIG1vdW50X2NvbXBvbmVudChjb21wb25lbnQsIG9wdGlvbnMudGFyZ2V0LCBvcHRpb25zLmFuY2hvciwgb3B0aW9ucy5jdXN0b21FbGVtZW50KTtcbiAgICAgICAgZW5kX2h5ZHJhdGluZygpO1xuICAgICAgICBmbHVzaCgpO1xuICAgIH1cbiAgICBzZXRfY3VycmVudF9jb21wb25lbnQocGFyZW50X2NvbXBvbmVudCk7XG59XG5sZXQgU3ZlbHRlRWxlbWVudDtcbmlmICh0eXBlb2YgSFRNTEVsZW1lbnQgPT09ICdmdW5jdGlvbicpIHtcbiAgICBTdmVsdGVFbGVtZW50ID0gY2xhc3MgZXh0ZW5kcyBIVE1MRWxlbWVudCB7XG4gICAgICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICAgICAgc3VwZXIoKTtcbiAgICAgICAgICAgIHRoaXMuYXR0YWNoU2hhZG93KHsgbW9kZTogJ29wZW4nIH0pO1xuICAgICAgICB9XG4gICAgICAgIGNvbm5lY3RlZENhbGxiYWNrKCkge1xuICAgICAgICAgICAgY29uc3QgeyBvbl9tb3VudCB9ID0gdGhpcy4kJDtcbiAgICAgICAgICAgIHRoaXMuJCQub25fZGlzY29ubmVjdCA9IG9uX21vdW50Lm1hcChydW4pLmZpbHRlcihpc19mdW5jdGlvbik7XG4gICAgICAgICAgICAvLyBAdHMtaWdub3JlIHRvZG86IGltcHJvdmUgdHlwaW5nc1xuICAgICAgICAgICAgZm9yIChjb25zdCBrZXkgaW4gdGhpcy4kJC5zbG90dGVkKSB7XG4gICAgICAgICAgICAgICAgLy8gQHRzLWlnbm9yZSB0b2RvOiBpbXByb3ZlIHR5cGluZ3NcbiAgICAgICAgICAgICAgICB0aGlzLmFwcGVuZENoaWxkKHRoaXMuJCQuc2xvdHRlZFtrZXldKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBhdHRyaWJ1dGVDaGFuZ2VkQ2FsbGJhY2soYXR0ciwgX29sZFZhbHVlLCBuZXdWYWx1ZSkge1xuICAgICAgICAgICAgdGhpc1thdHRyXSA9IG5ld1ZhbHVlO1xuICAgICAgICB9XG4gICAgICAgIGRpc2Nvbm5lY3RlZENhbGxiYWNrKCkge1xuICAgICAgICAgICAgcnVuX2FsbCh0aGlzLiQkLm9uX2Rpc2Nvbm5lY3QpO1xuICAgICAgICB9XG4gICAgICAgICRkZXN0cm95KCkge1xuICAgICAgICAgICAgZGVzdHJveV9jb21wb25lbnQodGhpcywgMSk7XG4gICAgICAgICAgICB0aGlzLiRkZXN0cm95ID0gbm9vcDtcbiAgICAgICAgfVxuICAgICAgICAkb24odHlwZSwgY2FsbGJhY2spIHtcbiAgICAgICAgICAgIC8vIFRPRE8gc2hvdWxkIHRoaXMgZGVsZWdhdGUgdG8gYWRkRXZlbnRMaXN0ZW5lcj9cbiAgICAgICAgICAgIGNvbnN0IGNhbGxiYWNrcyA9ICh0aGlzLiQkLmNhbGxiYWNrc1t0eXBlXSB8fCAodGhpcy4kJC5jYWxsYmFja3NbdHlwZV0gPSBbXSkpO1xuICAgICAgICAgICAgY2FsbGJhY2tzLnB1c2goY2FsbGJhY2spO1xuICAgICAgICAgICAgcmV0dXJuICgpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBpbmRleCA9IGNhbGxiYWNrcy5pbmRleE9mKGNhbGxiYWNrKTtcbiAgICAgICAgICAgICAgICBpZiAoaW5kZXggIT09IC0xKVxuICAgICAgICAgICAgICAgICAgICBjYWxsYmFja3Muc3BsaWNlKGluZGV4LCAxKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgICAgJHNldCgkJHByb3BzKSB7XG4gICAgICAgICAgICBpZiAodGhpcy4kJHNldCAmJiAhaXNfZW1wdHkoJCRwcm9wcykpIHtcbiAgICAgICAgICAgICAgICB0aGlzLiQkLnNraXBfYm91bmQgPSB0cnVlO1xuICAgICAgICAgICAgICAgIHRoaXMuJCRzZXQoJCRwcm9wcyk7XG4gICAgICAgICAgICAgICAgdGhpcy4kJC5za2lwX2JvdW5kID0gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xufVxuLyoqXG4gKiBCYXNlIGNsYXNzIGZvciBTdmVsdGUgY29tcG9uZW50cy4gVXNlZCB3aGVuIGRldj1mYWxzZS5cbiAqL1xuY2xhc3MgU3ZlbHRlQ29tcG9uZW50IHtcbiAgICAkZGVzdHJveSgpIHtcbiAgICAgICAgZGVzdHJveV9jb21wb25lbnQodGhpcywgMSk7XG4gICAgICAgIHRoaXMuJGRlc3Ryb3kgPSBub29wO1xuICAgIH1cbiAgICAkb24odHlwZSwgY2FsbGJhY2spIHtcbiAgICAgICAgY29uc3QgY2FsbGJhY2tzID0gKHRoaXMuJCQuY2FsbGJhY2tzW3R5cGVdIHx8ICh0aGlzLiQkLmNhbGxiYWNrc1t0eXBlXSA9IFtdKSk7XG4gICAgICAgIGNhbGxiYWNrcy5wdXNoKGNhbGxiYWNrKTtcbiAgICAgICAgcmV0dXJuICgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGluZGV4ID0gY2FsbGJhY2tzLmluZGV4T2YoY2FsbGJhY2spO1xuICAgICAgICAgICAgaWYgKGluZGV4ICE9PSAtMSlcbiAgICAgICAgICAgICAgICBjYWxsYmFja3Muc3BsaWNlKGluZGV4LCAxKTtcbiAgICAgICAgfTtcbiAgICB9XG4gICAgJHNldCgkJHByb3BzKSB7XG4gICAgICAgIGlmICh0aGlzLiQkc2V0ICYmICFpc19lbXB0eSgkJHByb3BzKSkge1xuICAgICAgICAgICAgdGhpcy4kJC5za2lwX2JvdW5kID0gdHJ1ZTtcbiAgICAgICAgICAgIHRoaXMuJCRzZXQoJCRwcm9wcyk7XG4gICAgICAgICAgICB0aGlzLiQkLnNraXBfYm91bmQgPSBmYWxzZTtcbiAgICAgICAgfVxuICAgIH1cbn1cblxuZnVuY3Rpb24gZGlzcGF0Y2hfZGV2KHR5cGUsIGRldGFpbCkge1xuICAgIGRvY3VtZW50LmRpc3BhdGNoRXZlbnQoY3VzdG9tX2V2ZW50KHR5cGUsIE9iamVjdC5hc3NpZ24oeyB2ZXJzaW9uOiAnMy40Ni40JyB9LCBkZXRhaWwpLCB0cnVlKSk7XG59XG5mdW5jdGlvbiBhcHBlbmRfZGV2KHRhcmdldCwgbm9kZSkge1xuICAgIGRpc3BhdGNoX2RldignU3ZlbHRlRE9NSW5zZXJ0JywgeyB0YXJnZXQsIG5vZGUgfSk7XG4gICAgYXBwZW5kKHRhcmdldCwgbm9kZSk7XG59XG5mdW5jdGlvbiBhcHBlbmRfaHlkcmF0aW9uX2Rldih0YXJnZXQsIG5vZGUpIHtcbiAgICBkaXNwYXRjaF9kZXYoJ1N2ZWx0ZURPTUluc2VydCcsIHsgdGFyZ2V0LCBub2RlIH0pO1xuICAgIGFwcGVuZF9oeWRyYXRpb24odGFyZ2V0LCBub2RlKTtcbn1cbmZ1bmN0aW9uIGluc2VydF9kZXYodGFyZ2V0LCBub2RlLCBhbmNob3IpIHtcbiAgICBkaXNwYXRjaF9kZXYoJ1N2ZWx0ZURPTUluc2VydCcsIHsgdGFyZ2V0LCBub2RlLCBhbmNob3IgfSk7XG4gICAgaW5zZXJ0KHRhcmdldCwgbm9kZSwgYW5jaG9yKTtcbn1cbmZ1bmN0aW9uIGluc2VydF9oeWRyYXRpb25fZGV2KHRhcmdldCwgbm9kZSwgYW5jaG9yKSB7XG4gICAgZGlzcGF0Y2hfZGV2KCdTdmVsdGVET01JbnNlcnQnLCB7IHRhcmdldCwgbm9kZSwgYW5jaG9yIH0pO1xuICAgIGluc2VydF9oeWRyYXRpb24odGFyZ2V0LCBub2RlLCBhbmNob3IpO1xufVxuZnVuY3Rpb24gZGV0YWNoX2Rldihub2RlKSB7XG4gICAgZGlzcGF0Y2hfZGV2KCdTdmVsdGVET01SZW1vdmUnLCB7IG5vZGUgfSk7XG4gICAgZGV0YWNoKG5vZGUpO1xufVxuZnVuY3Rpb24gZGV0YWNoX2JldHdlZW5fZGV2KGJlZm9yZSwgYWZ0ZXIpIHtcbiAgICB3aGlsZSAoYmVmb3JlLm5leHRTaWJsaW5nICYmIGJlZm9yZS5uZXh0U2libGluZyAhPT0gYWZ0ZXIpIHtcbiAgICAgICAgZGV0YWNoX2RldihiZWZvcmUubmV4dFNpYmxpbmcpO1xuICAgIH1cbn1cbmZ1bmN0aW9uIGRldGFjaF9iZWZvcmVfZGV2KGFmdGVyKSB7XG4gICAgd2hpbGUgKGFmdGVyLnByZXZpb3VzU2libGluZykge1xuICAgICAgICBkZXRhY2hfZGV2KGFmdGVyLnByZXZpb3VzU2libGluZyk7XG4gICAgfVxufVxuZnVuY3Rpb24gZGV0YWNoX2FmdGVyX2RldihiZWZvcmUpIHtcbiAgICB3aGlsZSAoYmVmb3JlLm5leHRTaWJsaW5nKSB7XG4gICAgICAgIGRldGFjaF9kZXYoYmVmb3JlLm5leHRTaWJsaW5nKTtcbiAgICB9XG59XG5mdW5jdGlvbiBsaXN0ZW5fZGV2KG5vZGUsIGV2ZW50LCBoYW5kbGVyLCBvcHRpb25zLCBoYXNfcHJldmVudF9kZWZhdWx0LCBoYXNfc3RvcF9wcm9wYWdhdGlvbikge1xuICAgIGNvbnN0IG1vZGlmaWVycyA9IG9wdGlvbnMgPT09IHRydWUgPyBbJ2NhcHR1cmUnXSA6IG9wdGlvbnMgPyBBcnJheS5mcm9tKE9iamVjdC5rZXlzKG9wdGlvbnMpKSA6IFtdO1xuICAgIGlmIChoYXNfcHJldmVudF9kZWZhdWx0KVxuICAgICAgICBtb2RpZmllcnMucHVzaCgncHJldmVudERlZmF1bHQnKTtcbiAgICBpZiAoaGFzX3N0b3BfcHJvcGFnYXRpb24pXG4gICAgICAgIG1vZGlmaWVycy5wdXNoKCdzdG9wUHJvcGFnYXRpb24nKTtcbiAgICBkaXNwYXRjaF9kZXYoJ1N2ZWx0ZURPTUFkZEV2ZW50TGlzdGVuZXInLCB7IG5vZGUsIGV2ZW50LCBoYW5kbGVyLCBtb2RpZmllcnMgfSk7XG4gICAgY29uc3QgZGlzcG9zZSA9IGxpc3Rlbihub2RlLCBldmVudCwgaGFuZGxlciwgb3B0aW9ucyk7XG4gICAgcmV0dXJuICgpID0+IHtcbiAgICAgICAgZGlzcGF0Y2hfZGV2KCdTdmVsdGVET01SZW1vdmVFdmVudExpc3RlbmVyJywgeyBub2RlLCBldmVudCwgaGFuZGxlciwgbW9kaWZpZXJzIH0pO1xuICAgICAgICBkaXNwb3NlKCk7XG4gICAgfTtcbn1cbmZ1bmN0aW9uIGF0dHJfZGV2KG5vZGUsIGF0dHJpYnV0ZSwgdmFsdWUpIHtcbiAgICBhdHRyKG5vZGUsIGF0dHJpYnV0ZSwgdmFsdWUpO1xuICAgIGlmICh2YWx1ZSA9PSBudWxsKVxuICAgICAgICBkaXNwYXRjaF9kZXYoJ1N2ZWx0ZURPTVJlbW92ZUF0dHJpYnV0ZScsIHsgbm9kZSwgYXR0cmlidXRlIH0pO1xuICAgIGVsc2VcbiAgICAgICAgZGlzcGF0Y2hfZGV2KCdTdmVsdGVET01TZXRBdHRyaWJ1dGUnLCB7IG5vZGUsIGF0dHJpYnV0ZSwgdmFsdWUgfSk7XG59XG5mdW5jdGlvbiBwcm9wX2Rldihub2RlLCBwcm9wZXJ0eSwgdmFsdWUpIHtcbiAgICBub2RlW3Byb3BlcnR5XSA9IHZhbHVlO1xuICAgIGRpc3BhdGNoX2RldignU3ZlbHRlRE9NU2V0UHJvcGVydHknLCB7IG5vZGUsIHByb3BlcnR5LCB2YWx1ZSB9KTtcbn1cbmZ1bmN0aW9uIGRhdGFzZXRfZGV2KG5vZGUsIHByb3BlcnR5LCB2YWx1ZSkge1xuICAgIG5vZGUuZGF0YXNldFtwcm9wZXJ0eV0gPSB2YWx1ZTtcbiAgICBkaXNwYXRjaF9kZXYoJ1N2ZWx0ZURPTVNldERhdGFzZXQnLCB7IG5vZGUsIHByb3BlcnR5LCB2YWx1ZSB9KTtcbn1cbmZ1bmN0aW9uIHNldF9kYXRhX2Rldih0ZXh0LCBkYXRhKSB7XG4gICAgZGF0YSA9ICcnICsgZGF0YTtcbiAgICBpZiAodGV4dC53aG9sZVRleHQgPT09IGRhdGEpXG4gICAgICAgIHJldHVybjtcbiAgICBkaXNwYXRjaF9kZXYoJ1N2ZWx0ZURPTVNldERhdGEnLCB7IG5vZGU6IHRleHQsIGRhdGEgfSk7XG4gICAgdGV4dC5kYXRhID0gZGF0YTtcbn1cbmZ1bmN0aW9uIHZhbGlkYXRlX2VhY2hfYXJndW1lbnQoYXJnKSB7XG4gICAgaWYgKHR5cGVvZiBhcmcgIT09ICdzdHJpbmcnICYmICEoYXJnICYmIHR5cGVvZiBhcmcgPT09ICdvYmplY3QnICYmICdsZW5ndGgnIGluIGFyZykpIHtcbiAgICAgICAgbGV0IG1zZyA9ICd7I2VhY2h9IG9ubHkgaXRlcmF0ZXMgb3ZlciBhcnJheS1saWtlIG9iamVjdHMuJztcbiAgICAgICAgaWYgKHR5cGVvZiBTeW1ib2wgPT09ICdmdW5jdGlvbicgJiYgYXJnICYmIFN5bWJvbC5pdGVyYXRvciBpbiBhcmcpIHtcbiAgICAgICAgICAgIG1zZyArPSAnIFlvdSBjYW4gdXNlIGEgc3ByZWFkIHRvIGNvbnZlcnQgdGhpcyBpdGVyYWJsZSBpbnRvIGFuIGFycmF5Lic7XG4gICAgICAgIH1cbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKG1zZyk7XG4gICAgfVxufVxuZnVuY3Rpb24gdmFsaWRhdGVfc2xvdHMobmFtZSwgc2xvdCwga2V5cykge1xuICAgIGZvciAoY29uc3Qgc2xvdF9rZXkgb2YgT2JqZWN0LmtleXMoc2xvdCkpIHtcbiAgICAgICAgaWYgKCF+a2V5cy5pbmRleE9mKHNsb3Rfa2V5KSkge1xuICAgICAgICAgICAgY29uc29sZS53YXJuKGA8JHtuYW1lfT4gcmVjZWl2ZWQgYW4gdW5leHBlY3RlZCBzbG90IFwiJHtzbG90X2tleX1cIi5gKTtcbiAgICAgICAgfVxuICAgIH1cbn1cbi8qKlxuICogQmFzZSBjbGFzcyBmb3IgU3ZlbHRlIGNvbXBvbmVudHMgd2l0aCBzb21lIG1pbm9yIGRldi1lbmhhbmNlbWVudHMuIFVzZWQgd2hlbiBkZXY9dHJ1ZS5cbiAqL1xuY2xhc3MgU3ZlbHRlQ29tcG9uZW50RGV2IGV4dGVuZHMgU3ZlbHRlQ29tcG9uZW50IHtcbiAgICBjb25zdHJ1Y3RvcihvcHRpb25zKSB7XG4gICAgICAgIGlmICghb3B0aW9ucyB8fCAoIW9wdGlvbnMudGFyZ2V0ICYmICFvcHRpb25zLiQkaW5saW5lKSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiJ3RhcmdldCcgaXMgYSByZXF1aXJlZCBvcHRpb25cIik7XG4gICAgICAgIH1cbiAgICAgICAgc3VwZXIoKTtcbiAgICB9XG4gICAgJGRlc3Ryb3koKSB7XG4gICAgICAgIHN1cGVyLiRkZXN0cm95KCk7XG4gICAgICAgIHRoaXMuJGRlc3Ryb3kgPSAoKSA9PiB7XG4gICAgICAgICAgICBjb25zb2xlLndhcm4oJ0NvbXBvbmVudCB3YXMgYWxyZWFkeSBkZXN0cm95ZWQnKTsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby1jb25zb2xlXG4gICAgICAgIH07XG4gICAgfVxuICAgICRjYXB0dXJlX3N0YXRlKCkgeyB9XG4gICAgJGluamVjdF9zdGF0ZSgpIHsgfVxufVxuLyoqXG4gKiBCYXNlIGNsYXNzIHRvIGNyZWF0ZSBzdHJvbmdseSB0eXBlZCBTdmVsdGUgY29tcG9uZW50cy5cbiAqIFRoaXMgb25seSBleGlzdHMgZm9yIHR5cGluZyBwdXJwb3NlcyBhbmQgc2hvdWxkIGJlIHVzZWQgaW4gYC5kLnRzYCBmaWxlcy5cbiAqXG4gKiAjIyMgRXhhbXBsZTpcbiAqXG4gKiBZb3UgaGF2ZSBjb21wb25lbnQgbGlicmFyeSBvbiBucG0gY2FsbGVkIGBjb21wb25lbnQtbGlicmFyeWAsIGZyb20gd2hpY2hcbiAqIHlvdSBleHBvcnQgYSBjb21wb25lbnQgY2FsbGVkIGBNeUNvbXBvbmVudGAuIEZvciBTdmVsdGUrVHlwZVNjcmlwdCB1c2VycyxcbiAqIHlvdSB3YW50IHRvIHByb3ZpZGUgdHlwaW5ncy4gVGhlcmVmb3JlIHlvdSBjcmVhdGUgYSBgaW5kZXguZC50c2A6XG4gKiBgYGB0c1xuICogaW1wb3J0IHsgU3ZlbHRlQ29tcG9uZW50VHlwZWQgfSBmcm9tIFwic3ZlbHRlXCI7XG4gKiBleHBvcnQgY2xhc3MgTXlDb21wb25lbnQgZXh0ZW5kcyBTdmVsdGVDb21wb25lbnRUeXBlZDx7Zm9vOiBzdHJpbmd9PiB7fVxuICogYGBgXG4gKiBUeXBpbmcgdGhpcyBtYWtlcyBpdCBwb3NzaWJsZSBmb3IgSURFcyBsaWtlIFZTIENvZGUgd2l0aCB0aGUgU3ZlbHRlIGV4dGVuc2lvblxuICogdG8gcHJvdmlkZSBpbnRlbGxpc2Vuc2UgYW5kIHRvIHVzZSB0aGUgY29tcG9uZW50IGxpa2UgdGhpcyBpbiBhIFN2ZWx0ZSBmaWxlXG4gKiB3aXRoIFR5cGVTY3JpcHQ6XG4gKiBgYGBzdmVsdGVcbiAqIDxzY3JpcHQgbGFuZz1cInRzXCI+XG4gKiBcdGltcG9ydCB7IE15Q29tcG9uZW50IH0gZnJvbSBcImNvbXBvbmVudC1saWJyYXJ5XCI7XG4gKiA8L3NjcmlwdD5cbiAqIDxNeUNvbXBvbmVudCBmb289eydiYXInfSAvPlxuICogYGBgXG4gKlxuICogIyMjIyBXaHkgbm90IG1ha2UgdGhpcyBwYXJ0IG9mIGBTdmVsdGVDb21wb25lbnQoRGV2KWA/XG4gKiBCZWNhdXNlXG4gKiBgYGB0c1xuICogY2xhc3MgQVN1YmNsYXNzT2ZTdmVsdGVDb21wb25lbnQgZXh0ZW5kcyBTdmVsdGVDb21wb25lbnQ8e2Zvbzogc3RyaW5nfT4ge31cbiAqIGNvbnN0IGNvbXBvbmVudDogdHlwZW9mIFN2ZWx0ZUNvbXBvbmVudCA9IEFTdWJjbGFzc09mU3ZlbHRlQ29tcG9uZW50O1xuICogYGBgXG4gKiB3aWxsIHRocm93IGEgdHlwZSBlcnJvciwgc28gd2UgbmVlZCB0byBzZXBhcmF0ZSB0aGUgbW9yZSBzdHJpY3RseSB0eXBlZCBjbGFzcy5cbiAqL1xuY2xhc3MgU3ZlbHRlQ29tcG9uZW50VHlwZWQgZXh0ZW5kcyBTdmVsdGVDb21wb25lbnREZXYge1xuICAgIGNvbnN0cnVjdG9yKG9wdGlvbnMpIHtcbiAgICAgICAgc3VwZXIob3B0aW9ucyk7XG4gICAgfVxufVxuZnVuY3Rpb24gbG9vcF9ndWFyZCh0aW1lb3V0KSB7XG4gICAgY29uc3Qgc3RhcnQgPSBEYXRlLm5vdygpO1xuICAgIHJldHVybiAoKSA9PiB7XG4gICAgICAgIGlmIChEYXRlLm5vdygpIC0gc3RhcnQgPiB0aW1lb3V0KSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0luZmluaXRlIGxvb3AgZGV0ZWN0ZWQnKTtcbiAgICAgICAgfVxuICAgIH07XG59XG5cbmV4cG9ydCB7IEh0bWxUYWcsIEh0bWxUYWdIeWRyYXRpb24sIFN2ZWx0ZUNvbXBvbmVudCwgU3ZlbHRlQ29tcG9uZW50RGV2LCBTdmVsdGVDb21wb25lbnRUeXBlZCwgU3ZlbHRlRWxlbWVudCwgYWN0aW9uX2Rlc3Ryb3llciwgYWRkX2F0dHJpYnV0ZSwgYWRkX2NsYXNzZXMsIGFkZF9mbHVzaF9jYWxsYmFjaywgYWRkX2xvY2F0aW9uLCBhZGRfcmVuZGVyX2NhbGxiYWNrLCBhZGRfcmVzaXplX2xpc3RlbmVyLCBhZGRfc3R5bGVzLCBhZGRfdHJhbnNmb3JtLCBhZnRlclVwZGF0ZSwgYXBwZW5kLCBhcHBlbmRfZGV2LCBhcHBlbmRfZW1wdHlfc3R5bGVzaGVldCwgYXBwZW5kX2h5ZHJhdGlvbiwgYXBwZW5kX2h5ZHJhdGlvbl9kZXYsIGFwcGVuZF9zdHlsZXMsIGFzc2lnbiwgYXR0ciwgYXR0cl9kZXYsIGF0dHJpYnV0ZV90b19vYmplY3QsIGJlZm9yZVVwZGF0ZSwgYmluZCwgYmluZGluZ19jYWxsYmFja3MsIGJsYW5rX29iamVjdCwgYnViYmxlLCBjaGVja19vdXRyb3MsIGNoaWxkcmVuLCBjbGFpbV9jb21wb25lbnQsIGNsYWltX2VsZW1lbnQsIGNsYWltX2h0bWxfdGFnLCBjbGFpbV9zcGFjZSwgY2xhaW1fc3ZnX2VsZW1lbnQsIGNsYWltX3RleHQsIGNsZWFyX2xvb3BzLCBjb21wb25lbnRfc3Vic2NyaWJlLCBjb21wdXRlX3Jlc3RfcHJvcHMsIGNvbXB1dGVfc2xvdHMsIGNyZWF0ZUV2ZW50RGlzcGF0Y2hlciwgY3JlYXRlX2FuaW1hdGlvbiwgY3JlYXRlX2JpZGlyZWN0aW9uYWxfdHJhbnNpdGlvbiwgY3JlYXRlX2NvbXBvbmVudCwgY3JlYXRlX2luX3RyYW5zaXRpb24sIGNyZWF0ZV9vdXRfdHJhbnNpdGlvbiwgY3JlYXRlX3Nsb3QsIGNyZWF0ZV9zc3JfY29tcG9uZW50LCBjdXJyZW50X2NvbXBvbmVudCwgY3VzdG9tX2V2ZW50LCBkYXRhc2V0X2RldiwgZGVidWcsIGRlc3Ryb3lfYmxvY2ssIGRlc3Ryb3lfY29tcG9uZW50LCBkZXN0cm95X2VhY2gsIGRldGFjaCwgZGV0YWNoX2FmdGVyX2RldiwgZGV0YWNoX2JlZm9yZV9kZXYsIGRldGFjaF9iZXR3ZWVuX2RldiwgZGV0YWNoX2RldiwgZGlydHlfY29tcG9uZW50cywgZGlzcGF0Y2hfZGV2LCBlYWNoLCBlbGVtZW50LCBlbGVtZW50X2lzLCBlbXB0eSwgZW5kX2h5ZHJhdGluZywgZXNjYXBlLCBlc2NhcGVfYXR0cmlidXRlX3ZhbHVlLCBlc2NhcGVfb2JqZWN0LCBlc2NhcGVkLCBleGNsdWRlX2ludGVybmFsX3Byb3BzLCBmaXhfYW5kX2Rlc3Ryb3lfYmxvY2ssIGZpeF9hbmRfb3V0cm9fYW5kX2Rlc3Ryb3lfYmxvY2ssIGZpeF9wb3NpdGlvbiwgZmx1c2gsIGdldEFsbENvbnRleHRzLCBnZXRDb250ZXh0LCBnZXRfYWxsX2RpcnR5X2Zyb21fc2NvcGUsIGdldF9iaW5kaW5nX2dyb3VwX3ZhbHVlLCBnZXRfY3VycmVudF9jb21wb25lbnQsIGdldF9jdXN0b21fZWxlbWVudHNfc2xvdHMsIGdldF9yb290X2Zvcl9zdHlsZSwgZ2V0X3Nsb3RfY2hhbmdlcywgZ2V0X3NwcmVhZF9vYmplY3QsIGdldF9zcHJlYWRfdXBkYXRlLCBnZXRfc3RvcmVfdmFsdWUsIGdsb2JhbHMsIGdyb3VwX291dHJvcywgaGFuZGxlX3Byb21pc2UsIGhhc0NvbnRleHQsIGhhc19wcm9wLCBpZGVudGl0eSwgaW5pdCwgaW5zZXJ0LCBpbnNlcnRfZGV2LCBpbnNlcnRfaHlkcmF0aW9uLCBpbnNlcnRfaHlkcmF0aW9uX2RldiwgaW50cm9zLCBpbnZhbGlkX2F0dHJpYnV0ZV9uYW1lX2NoYXJhY3RlciwgaXNfY2xpZW50LCBpc19jcm9zc29yaWdpbiwgaXNfZW1wdHksIGlzX2Z1bmN0aW9uLCBpc19wcm9taXNlLCBsaXN0ZW4sIGxpc3Rlbl9kZXYsIGxvb3AsIGxvb3BfZ3VhcmQsIG1lcmdlX3Nzcl9zdHlsZXMsIG1pc3NpbmdfY29tcG9uZW50LCBtb3VudF9jb21wb25lbnQsIG5vb3AsIG5vdF9lcXVhbCwgbm93LCBudWxsX3RvX2VtcHR5LCBvYmplY3Rfd2l0aG91dF9wcm9wZXJ0aWVzLCBvbkRlc3Ryb3ksIG9uTW91bnQsIG9uY2UsIG91dHJvX2FuZF9kZXN0cm95X2Jsb2NrLCBwcmV2ZW50X2RlZmF1bHQsIHByb3BfZGV2LCBxdWVyeV9zZWxlY3Rvcl9hbGwsIHJhZiwgcnVuLCBydW5fYWxsLCBzYWZlX25vdF9lcXVhbCwgc2NoZWR1bGVfdXBkYXRlLCBzZWxlY3RfbXVsdGlwbGVfdmFsdWUsIHNlbGVjdF9vcHRpb24sIHNlbGVjdF9vcHRpb25zLCBzZWxlY3RfdmFsdWUsIHNlbGYsIHNldENvbnRleHQsIHNldF9hdHRyaWJ1dGVzLCBzZXRfY3VycmVudF9jb21wb25lbnQsIHNldF9jdXN0b21fZWxlbWVudF9kYXRhLCBzZXRfZGF0YSwgc2V0X2RhdGFfZGV2LCBzZXRfaW5wdXRfdHlwZSwgc2V0X2lucHV0X3ZhbHVlLCBzZXRfbm93LCBzZXRfcmFmLCBzZXRfc3RvcmVfdmFsdWUsIHNldF9zdHlsZSwgc2V0X3N2Z19hdHRyaWJ1dGVzLCBzcGFjZSwgc3ByZWFkLCBzcmNfdXJsX2VxdWFsLCBzdGFydF9oeWRyYXRpbmcsIHN0b3BfcHJvcGFnYXRpb24sIHN1YnNjcmliZSwgc3ZnX2VsZW1lbnQsIHRleHQsIHRpY2ssIHRpbWVfcmFuZ2VzX3RvX2FycmF5LCB0b19udW1iZXIsIHRvZ2dsZV9jbGFzcywgdHJhbnNpdGlvbl9pbiwgdHJhbnNpdGlvbl9vdXQsIHRydXN0ZWQsIHVwZGF0ZV9hd2FpdF9ibG9ja19icmFuY2gsIHVwZGF0ZV9rZXllZF9lYWNoLCB1cGRhdGVfc2xvdCwgdXBkYXRlX3Nsb3RfYmFzZSwgdmFsaWRhdGVfY29tcG9uZW50LCB2YWxpZGF0ZV9lYWNoX2FyZ3VtZW50LCB2YWxpZGF0ZV9lYWNoX2tleXMsIHZhbGlkYXRlX3Nsb3RzLCB2YWxpZGF0ZV9zdG9yZSwgeGxpbmtfYXR0ciB9O1xuIiwiaW1wb3J0IHsgbm9vcCwgc2FmZV9ub3RfZXF1YWwsIHN1YnNjcmliZSwgcnVuX2FsbCwgaXNfZnVuY3Rpb24gfSBmcm9tICcuLi9pbnRlcm5hbC9pbmRleC5tanMnO1xuZXhwb3J0IHsgZ2V0X3N0b3JlX3ZhbHVlIGFzIGdldCB9IGZyb20gJy4uL2ludGVybmFsL2luZGV4Lm1qcyc7XG5cbmNvbnN0IHN1YnNjcmliZXJfcXVldWUgPSBbXTtcbi8qKlxuICogQ3JlYXRlcyBhIGBSZWFkYWJsZWAgc3RvcmUgdGhhdCBhbGxvd3MgcmVhZGluZyBieSBzdWJzY3JpcHRpb24uXG4gKiBAcGFyYW0gdmFsdWUgaW5pdGlhbCB2YWx1ZVxuICogQHBhcmFtIHtTdGFydFN0b3BOb3RpZmllcn1zdGFydCBzdGFydCBhbmQgc3RvcCBub3RpZmljYXRpb25zIGZvciBzdWJzY3JpcHRpb25zXG4gKi9cbmZ1bmN0aW9uIHJlYWRhYmxlKHZhbHVlLCBzdGFydCkge1xuICAgIHJldHVybiB7XG4gICAgICAgIHN1YnNjcmliZTogd3JpdGFibGUodmFsdWUsIHN0YXJ0KS5zdWJzY3JpYmVcbiAgICB9O1xufVxuLyoqXG4gKiBDcmVhdGUgYSBgV3JpdGFibGVgIHN0b3JlIHRoYXQgYWxsb3dzIGJvdGggdXBkYXRpbmcgYW5kIHJlYWRpbmcgYnkgc3Vic2NyaXB0aW9uLlxuICogQHBhcmFtIHsqPX12YWx1ZSBpbml0aWFsIHZhbHVlXG4gKiBAcGFyYW0ge1N0YXJ0U3RvcE5vdGlmaWVyPX1zdGFydCBzdGFydCBhbmQgc3RvcCBub3RpZmljYXRpb25zIGZvciBzdWJzY3JpcHRpb25zXG4gKi9cbmZ1bmN0aW9uIHdyaXRhYmxlKHZhbHVlLCBzdGFydCA9IG5vb3ApIHtcbiAgICBsZXQgc3RvcDtcbiAgICBjb25zdCBzdWJzY3JpYmVycyA9IG5ldyBTZXQoKTtcbiAgICBmdW5jdGlvbiBzZXQobmV3X3ZhbHVlKSB7XG4gICAgICAgIGlmIChzYWZlX25vdF9lcXVhbCh2YWx1ZSwgbmV3X3ZhbHVlKSkge1xuICAgICAgICAgICAgdmFsdWUgPSBuZXdfdmFsdWU7XG4gICAgICAgICAgICBpZiAoc3RvcCkgeyAvLyBzdG9yZSBpcyByZWFkeVxuICAgICAgICAgICAgICAgIGNvbnN0IHJ1bl9xdWV1ZSA9ICFzdWJzY3JpYmVyX3F1ZXVlLmxlbmd0aDtcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IHN1YnNjcmliZXIgb2Ygc3Vic2NyaWJlcnMpIHtcbiAgICAgICAgICAgICAgICAgICAgc3Vic2NyaWJlclsxXSgpO1xuICAgICAgICAgICAgICAgICAgICBzdWJzY3JpYmVyX3F1ZXVlLnB1c2goc3Vic2NyaWJlciwgdmFsdWUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAocnVuX3F1ZXVlKSB7XG4gICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc3Vic2NyaWJlcl9xdWV1ZS5sZW5ndGg7IGkgKz0gMikge1xuICAgICAgICAgICAgICAgICAgICAgICAgc3Vic2NyaWJlcl9xdWV1ZVtpXVswXShzdWJzY3JpYmVyX3F1ZXVlW2kgKyAxXSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgc3Vic2NyaWJlcl9xdWV1ZS5sZW5ndGggPSAwO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBmdW5jdGlvbiB1cGRhdGUoZm4pIHtcbiAgICAgICAgc2V0KGZuKHZhbHVlKSk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIHN1YnNjcmliZShydW4sIGludmFsaWRhdGUgPSBub29wKSB7XG4gICAgICAgIGNvbnN0IHN1YnNjcmliZXIgPSBbcnVuLCBpbnZhbGlkYXRlXTtcbiAgICAgICAgc3Vic2NyaWJlcnMuYWRkKHN1YnNjcmliZXIpO1xuICAgICAgICBpZiAoc3Vic2NyaWJlcnMuc2l6ZSA9PT0gMSkge1xuICAgICAgICAgICAgc3RvcCA9IHN0YXJ0KHNldCkgfHwgbm9vcDtcbiAgICAgICAgfVxuICAgICAgICBydW4odmFsdWUpO1xuICAgICAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgICAgICAgc3Vic2NyaWJlcnMuZGVsZXRlKHN1YnNjcmliZXIpO1xuICAgICAgICAgICAgaWYgKHN1YnNjcmliZXJzLnNpemUgPT09IDApIHtcbiAgICAgICAgICAgICAgICBzdG9wKCk7XG4gICAgICAgICAgICAgICAgc3RvcCA9IG51bGw7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgfVxuICAgIHJldHVybiB7IHNldCwgdXBkYXRlLCBzdWJzY3JpYmUgfTtcbn1cbmZ1bmN0aW9uIGRlcml2ZWQoc3RvcmVzLCBmbiwgaW5pdGlhbF92YWx1ZSkge1xuICAgIGNvbnN0IHNpbmdsZSA9ICFBcnJheS5pc0FycmF5KHN0b3Jlcyk7XG4gICAgY29uc3Qgc3RvcmVzX2FycmF5ID0gc2luZ2xlXG4gICAgICAgID8gW3N0b3Jlc11cbiAgICAgICAgOiBzdG9yZXM7XG4gICAgY29uc3QgYXV0byA9IGZuLmxlbmd0aCA8IDI7XG4gICAgcmV0dXJuIHJlYWRhYmxlKGluaXRpYWxfdmFsdWUsIChzZXQpID0+IHtcbiAgICAgICAgbGV0IGluaXRlZCA9IGZhbHNlO1xuICAgICAgICBjb25zdCB2YWx1ZXMgPSBbXTtcbiAgICAgICAgbGV0IHBlbmRpbmcgPSAwO1xuICAgICAgICBsZXQgY2xlYW51cCA9IG5vb3A7XG4gICAgICAgIGNvbnN0IHN5bmMgPSAoKSA9PiB7XG4gICAgICAgICAgICBpZiAocGVuZGluZykge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNsZWFudXAoKTtcbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGZuKHNpbmdsZSA/IHZhbHVlc1swXSA6IHZhbHVlcywgc2V0KTtcbiAgICAgICAgICAgIGlmIChhdXRvKSB7XG4gICAgICAgICAgICAgICAgc2V0KHJlc3VsdCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBjbGVhbnVwID0gaXNfZnVuY3Rpb24ocmVzdWx0KSA/IHJlc3VsdCA6IG5vb3A7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIGNvbnN0IHVuc3Vic2NyaWJlcnMgPSBzdG9yZXNfYXJyYXkubWFwKChzdG9yZSwgaSkgPT4gc3Vic2NyaWJlKHN0b3JlLCAodmFsdWUpID0+IHtcbiAgICAgICAgICAgIHZhbHVlc1tpXSA9IHZhbHVlO1xuICAgICAgICAgICAgcGVuZGluZyAmPSB+KDEgPDwgaSk7XG4gICAgICAgICAgICBpZiAoaW5pdGVkKSB7XG4gICAgICAgICAgICAgICAgc3luYygpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LCAoKSA9PiB7XG4gICAgICAgICAgICBwZW5kaW5nIHw9ICgxIDw8IGkpO1xuICAgICAgICB9KSk7XG4gICAgICAgIGluaXRlZCA9IHRydWU7XG4gICAgICAgIHN5bmMoKTtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIHN0b3AoKSB7XG4gICAgICAgICAgICBydW5fYWxsKHVuc3Vic2NyaWJlcnMpO1xuICAgICAgICAgICAgY2xlYW51cCgpO1xuICAgICAgICB9O1xuICAgIH0pO1xufVxuXG5leHBvcnQgeyBkZXJpdmVkLCByZWFkYWJsZSwgd3JpdGFibGUgfTtcbiIsImltcG9ydCB7IHdyaXRhYmxlIH0gZnJvbSAnLi4vc3RvcmUvaW5kZXgubWpzJztcbmltcG9ydCB7IG5vdywgbG9vcCwgYXNzaWduIH0gZnJvbSAnLi4vaW50ZXJuYWwvaW5kZXgubWpzJztcbmltcG9ydCB7IGxpbmVhciB9IGZyb20gJy4uL2Vhc2luZy9pbmRleC5tanMnO1xuXG5mdW5jdGlvbiBpc19kYXRlKG9iaikge1xuICAgIHJldHVybiBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwob2JqKSA9PT0gJ1tvYmplY3QgRGF0ZV0nO1xufVxuXG5mdW5jdGlvbiB0aWNrX3NwcmluZyhjdHgsIGxhc3RfdmFsdWUsIGN1cnJlbnRfdmFsdWUsIHRhcmdldF92YWx1ZSkge1xuICAgIGlmICh0eXBlb2YgY3VycmVudF92YWx1ZSA9PT0gJ251bWJlcicgfHwgaXNfZGF0ZShjdXJyZW50X3ZhbHVlKSkge1xuICAgICAgICAvLyBAdHMtaWdub3JlXG4gICAgICAgIGNvbnN0IGRlbHRhID0gdGFyZ2V0X3ZhbHVlIC0gY3VycmVudF92YWx1ZTtcbiAgICAgICAgLy8gQHRzLWlnbm9yZVxuICAgICAgICBjb25zdCB2ZWxvY2l0eSA9IChjdXJyZW50X3ZhbHVlIC0gbGFzdF92YWx1ZSkgLyAoY3R4LmR0IHx8IDEgLyA2MCk7IC8vIGd1YXJkIGRpdiBieSAwXG4gICAgICAgIGNvbnN0IHNwcmluZyA9IGN0eC5vcHRzLnN0aWZmbmVzcyAqIGRlbHRhO1xuICAgICAgICBjb25zdCBkYW1wZXIgPSBjdHgub3B0cy5kYW1waW5nICogdmVsb2NpdHk7XG4gICAgICAgIGNvbnN0IGFjY2VsZXJhdGlvbiA9IChzcHJpbmcgLSBkYW1wZXIpICogY3R4Lmludl9tYXNzO1xuICAgICAgICBjb25zdCBkID0gKHZlbG9jaXR5ICsgYWNjZWxlcmF0aW9uKSAqIGN0eC5kdDtcbiAgICAgICAgaWYgKE1hdGguYWJzKGQpIDwgY3R4Lm9wdHMucHJlY2lzaW9uICYmIE1hdGguYWJzKGRlbHRhKSA8IGN0eC5vcHRzLnByZWNpc2lvbikge1xuICAgICAgICAgICAgcmV0dXJuIHRhcmdldF92YWx1ZTsgLy8gc2V0dGxlZFxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgY3R4LnNldHRsZWQgPSBmYWxzZTsgLy8gc2lnbmFsIGxvb3AgdG8ga2VlcCB0aWNraW5nXG4gICAgICAgICAgICAvLyBAdHMtaWdub3JlXG4gICAgICAgICAgICByZXR1cm4gaXNfZGF0ZShjdXJyZW50X3ZhbHVlKSA/XG4gICAgICAgICAgICAgICAgbmV3IERhdGUoY3VycmVudF92YWx1ZS5nZXRUaW1lKCkgKyBkKSA6IGN1cnJlbnRfdmFsdWUgKyBkO1xuICAgICAgICB9XG4gICAgfVxuICAgIGVsc2UgaWYgKEFycmF5LmlzQXJyYXkoY3VycmVudF92YWx1ZSkpIHtcbiAgICAgICAgLy8gQHRzLWlnbm9yZVxuICAgICAgICByZXR1cm4gY3VycmVudF92YWx1ZS5tYXAoKF8sIGkpID0+IHRpY2tfc3ByaW5nKGN0eCwgbGFzdF92YWx1ZVtpXSwgY3VycmVudF92YWx1ZVtpXSwgdGFyZ2V0X3ZhbHVlW2ldKSk7XG4gICAgfVxuICAgIGVsc2UgaWYgKHR5cGVvZiBjdXJyZW50X3ZhbHVlID09PSAnb2JqZWN0Jykge1xuICAgICAgICBjb25zdCBuZXh0X3ZhbHVlID0ge307XG4gICAgICAgIGZvciAoY29uc3QgayBpbiBjdXJyZW50X3ZhbHVlKSB7XG4gICAgICAgICAgICAvLyBAdHMtaWdub3JlXG4gICAgICAgICAgICBuZXh0X3ZhbHVlW2tdID0gdGlja19zcHJpbmcoY3R4LCBsYXN0X3ZhbHVlW2tdLCBjdXJyZW50X3ZhbHVlW2tdLCB0YXJnZXRfdmFsdWVba10pO1xuICAgICAgICB9XG4gICAgICAgIC8vIEB0cy1pZ25vcmVcbiAgICAgICAgcmV0dXJuIG5leHRfdmFsdWU7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYENhbm5vdCBzcHJpbmcgJHt0eXBlb2YgY3VycmVudF92YWx1ZX0gdmFsdWVzYCk7XG4gICAgfVxufVxuZnVuY3Rpb24gc3ByaW5nKHZhbHVlLCBvcHRzID0ge30pIHtcbiAgICBjb25zdCBzdG9yZSA9IHdyaXRhYmxlKHZhbHVlKTtcbiAgICBjb25zdCB7IHN0aWZmbmVzcyA9IDAuMTUsIGRhbXBpbmcgPSAwLjgsIHByZWNpc2lvbiA9IDAuMDEgfSA9IG9wdHM7XG4gICAgbGV0IGxhc3RfdGltZTtcbiAgICBsZXQgdGFzaztcbiAgICBsZXQgY3VycmVudF90b2tlbjtcbiAgICBsZXQgbGFzdF92YWx1ZSA9IHZhbHVlO1xuICAgIGxldCB0YXJnZXRfdmFsdWUgPSB2YWx1ZTtcbiAgICBsZXQgaW52X21hc3MgPSAxO1xuICAgIGxldCBpbnZfbWFzc19yZWNvdmVyeV9yYXRlID0gMDtcbiAgICBsZXQgY2FuY2VsX3Rhc2sgPSBmYWxzZTtcbiAgICBmdW5jdGlvbiBzZXQobmV3X3ZhbHVlLCBvcHRzID0ge30pIHtcbiAgICAgICAgdGFyZ2V0X3ZhbHVlID0gbmV3X3ZhbHVlO1xuICAgICAgICBjb25zdCB0b2tlbiA9IGN1cnJlbnRfdG9rZW4gPSB7fTtcbiAgICAgICAgaWYgKHZhbHVlID09IG51bGwgfHwgb3B0cy5oYXJkIHx8IChzcHJpbmcuc3RpZmZuZXNzID49IDEgJiYgc3ByaW5nLmRhbXBpbmcgPj0gMSkpIHtcbiAgICAgICAgICAgIGNhbmNlbF90YXNrID0gdHJ1ZTsgLy8gY2FuY2VsIGFueSBydW5uaW5nIGFuaW1hdGlvblxuICAgICAgICAgICAgbGFzdF90aW1lID0gbm93KCk7XG4gICAgICAgICAgICBsYXN0X3ZhbHVlID0gbmV3X3ZhbHVlO1xuICAgICAgICAgICAgc3RvcmUuc2V0KHZhbHVlID0gdGFyZ2V0X3ZhbHVlKTtcbiAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChvcHRzLnNvZnQpIHtcbiAgICAgICAgICAgIGNvbnN0IHJhdGUgPSBvcHRzLnNvZnQgPT09IHRydWUgPyAuNSA6ICtvcHRzLnNvZnQ7XG4gICAgICAgICAgICBpbnZfbWFzc19yZWNvdmVyeV9yYXRlID0gMSAvIChyYXRlICogNjApO1xuICAgICAgICAgICAgaW52X21hc3MgPSAwOyAvLyBpbmZpbml0ZSBtYXNzLCB1bmFmZmVjdGVkIGJ5IHNwcmluZyBmb3JjZXNcbiAgICAgICAgfVxuICAgICAgICBpZiAoIXRhc2spIHtcbiAgICAgICAgICAgIGxhc3RfdGltZSA9IG5vdygpO1xuICAgICAgICAgICAgY2FuY2VsX3Rhc2sgPSBmYWxzZTtcbiAgICAgICAgICAgIHRhc2sgPSBsb29wKG5vdyA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKGNhbmNlbF90YXNrKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhbmNlbF90YXNrID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIHRhc2sgPSBudWxsO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGludl9tYXNzID0gTWF0aC5taW4oaW52X21hc3MgKyBpbnZfbWFzc19yZWNvdmVyeV9yYXRlLCAxKTtcbiAgICAgICAgICAgICAgICBjb25zdCBjdHggPSB7XG4gICAgICAgICAgICAgICAgICAgIGludl9tYXNzLFxuICAgICAgICAgICAgICAgICAgICBvcHRzOiBzcHJpbmcsXG4gICAgICAgICAgICAgICAgICAgIHNldHRsZWQ6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIGR0OiAobm93IC0gbGFzdF90aW1lKSAqIDYwIC8gMTAwMFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgY29uc3QgbmV4dF92YWx1ZSA9IHRpY2tfc3ByaW5nKGN0eCwgbGFzdF92YWx1ZSwgdmFsdWUsIHRhcmdldF92YWx1ZSk7XG4gICAgICAgICAgICAgICAgbGFzdF90aW1lID0gbm93O1xuICAgICAgICAgICAgICAgIGxhc3RfdmFsdWUgPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICBzdG9yZS5zZXQodmFsdWUgPSBuZXh0X3ZhbHVlKTtcbiAgICAgICAgICAgICAgICBpZiAoY3R4LnNldHRsZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgdGFzayA9IG51bGw7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiAhY3R4LnNldHRsZWQ7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVsZmlsID0+IHtcbiAgICAgICAgICAgIHRhc2sucHJvbWlzZS50aGVuKCgpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAodG9rZW4gPT09IGN1cnJlbnRfdG9rZW4pXG4gICAgICAgICAgICAgICAgICAgIGZ1bGZpbCgpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBjb25zdCBzcHJpbmcgPSB7XG4gICAgICAgIHNldCxcbiAgICAgICAgdXBkYXRlOiAoZm4sIG9wdHMpID0+IHNldChmbih0YXJnZXRfdmFsdWUsIHZhbHVlKSwgb3B0cyksXG4gICAgICAgIHN1YnNjcmliZTogc3RvcmUuc3Vic2NyaWJlLFxuICAgICAgICBzdGlmZm5lc3MsXG4gICAgICAgIGRhbXBpbmcsXG4gICAgICAgIHByZWNpc2lvblxuICAgIH07XG4gICAgcmV0dXJuIHNwcmluZztcbn1cblxuZnVuY3Rpb24gZ2V0X2ludGVycG9sYXRvcihhLCBiKSB7XG4gICAgaWYgKGEgPT09IGIgfHwgYSAhPT0gYSlcbiAgICAgICAgcmV0dXJuICgpID0+IGE7XG4gICAgY29uc3QgdHlwZSA9IHR5cGVvZiBhO1xuICAgIGlmICh0eXBlICE9PSB0eXBlb2YgYiB8fCBBcnJheS5pc0FycmF5KGEpICE9PSBBcnJheS5pc0FycmF5KGIpKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignQ2Fubm90IGludGVycG9sYXRlIHZhbHVlcyBvZiBkaWZmZXJlbnQgdHlwZScpO1xuICAgIH1cbiAgICBpZiAoQXJyYXkuaXNBcnJheShhKSkge1xuICAgICAgICBjb25zdCBhcnIgPSBiLm1hcCgoYmksIGkpID0+IHtcbiAgICAgICAgICAgIHJldHVybiBnZXRfaW50ZXJwb2xhdG9yKGFbaV0sIGJpKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiB0ID0+IGFyci5tYXAoZm4gPT4gZm4odCkpO1xuICAgIH1cbiAgICBpZiAodHlwZSA9PT0gJ29iamVjdCcpIHtcbiAgICAgICAgaWYgKCFhIHx8ICFiKVxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdPYmplY3QgY2Fubm90IGJlIG51bGwnKTtcbiAgICAgICAgaWYgKGlzX2RhdGUoYSkgJiYgaXNfZGF0ZShiKSkge1xuICAgICAgICAgICAgYSA9IGEuZ2V0VGltZSgpO1xuICAgICAgICAgICAgYiA9IGIuZ2V0VGltZSgpO1xuICAgICAgICAgICAgY29uc3QgZGVsdGEgPSBiIC0gYTtcbiAgICAgICAgICAgIHJldHVybiB0ID0+IG5ldyBEYXRlKGEgKyB0ICogZGVsdGEpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGtleXMgPSBPYmplY3Qua2V5cyhiKTtcbiAgICAgICAgY29uc3QgaW50ZXJwb2xhdG9ycyA9IHt9O1xuICAgICAgICBrZXlzLmZvckVhY2goa2V5ID0+IHtcbiAgICAgICAgICAgIGludGVycG9sYXRvcnNba2V5XSA9IGdldF9pbnRlcnBvbGF0b3IoYVtrZXldLCBiW2tleV0pO1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIHQgPT4ge1xuICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0ge307XG4gICAgICAgICAgICBrZXlzLmZvckVhY2goa2V5ID0+IHtcbiAgICAgICAgICAgICAgICByZXN1bHRba2V5XSA9IGludGVycG9sYXRvcnNba2V5XSh0KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgICAgfTtcbiAgICB9XG4gICAgaWYgKHR5cGUgPT09ICdudW1iZXInKSB7XG4gICAgICAgIGNvbnN0IGRlbHRhID0gYiAtIGE7XG4gICAgICAgIHJldHVybiB0ID0+IGEgKyB0ICogZGVsdGE7XG4gICAgfVxuICAgIHRocm93IG5ldyBFcnJvcihgQ2Fubm90IGludGVycG9sYXRlICR7dHlwZX0gdmFsdWVzYCk7XG59XG5mdW5jdGlvbiB0d2VlbmVkKHZhbHVlLCBkZWZhdWx0cyA9IHt9KSB7XG4gICAgY29uc3Qgc3RvcmUgPSB3cml0YWJsZSh2YWx1ZSk7XG4gICAgbGV0IHRhc2s7XG4gICAgbGV0IHRhcmdldF92YWx1ZSA9IHZhbHVlO1xuICAgIGZ1bmN0aW9uIHNldChuZXdfdmFsdWUsIG9wdHMpIHtcbiAgICAgICAgaWYgKHZhbHVlID09IG51bGwpIHtcbiAgICAgICAgICAgIHN0b3JlLnNldCh2YWx1ZSA9IG5ld192YWx1ZSk7XG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgICAgIH1cbiAgICAgICAgdGFyZ2V0X3ZhbHVlID0gbmV3X3ZhbHVlO1xuICAgICAgICBsZXQgcHJldmlvdXNfdGFzayA9IHRhc2s7XG4gICAgICAgIGxldCBzdGFydGVkID0gZmFsc2U7XG4gICAgICAgIGxldCB7IGRlbGF5ID0gMCwgZHVyYXRpb24gPSA0MDAsIGVhc2luZyA9IGxpbmVhciwgaW50ZXJwb2xhdGUgPSBnZXRfaW50ZXJwb2xhdG9yIH0gPSBhc3NpZ24oYXNzaWduKHt9LCBkZWZhdWx0cyksIG9wdHMpO1xuICAgICAgICBpZiAoZHVyYXRpb24gPT09IDApIHtcbiAgICAgICAgICAgIGlmIChwcmV2aW91c190YXNrKSB7XG4gICAgICAgICAgICAgICAgcHJldmlvdXNfdGFzay5hYm9ydCgpO1xuICAgICAgICAgICAgICAgIHByZXZpb3VzX3Rhc2sgPSBudWxsO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgc3RvcmUuc2V0KHZhbHVlID0gdGFyZ2V0X3ZhbHVlKTtcbiAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBzdGFydCA9IG5vdygpICsgZGVsYXk7XG4gICAgICAgIGxldCBmbjtcbiAgICAgICAgdGFzayA9IGxvb3Aobm93ID0+IHtcbiAgICAgICAgICAgIGlmIChub3cgPCBzdGFydClcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIGlmICghc3RhcnRlZCkge1xuICAgICAgICAgICAgICAgIGZuID0gaW50ZXJwb2xhdGUodmFsdWUsIG5ld192YWx1ZSk7XG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBkdXJhdGlvbiA9PT0gJ2Z1bmN0aW9uJylcbiAgICAgICAgICAgICAgICAgICAgZHVyYXRpb24gPSBkdXJhdGlvbih2YWx1ZSwgbmV3X3ZhbHVlKTtcbiAgICAgICAgICAgICAgICBzdGFydGVkID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChwcmV2aW91c190YXNrKSB7XG4gICAgICAgICAgICAgICAgcHJldmlvdXNfdGFzay5hYm9ydCgpO1xuICAgICAgICAgICAgICAgIHByZXZpb3VzX3Rhc2sgPSBudWxsO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgZWxhcHNlZCA9IG5vdyAtIHN0YXJ0O1xuICAgICAgICAgICAgaWYgKGVsYXBzZWQgPiBkdXJhdGlvbikge1xuICAgICAgICAgICAgICAgIHN0b3JlLnNldCh2YWx1ZSA9IG5ld192YWx1ZSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gQHRzLWlnbm9yZVxuICAgICAgICAgICAgc3RvcmUuc2V0KHZhbHVlID0gZm4oZWFzaW5nKGVsYXBzZWQgLyBkdXJhdGlvbikpKTtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIHRhc2sucHJvbWlzZTtcbiAgICB9XG4gICAgcmV0dXJuIHtcbiAgICAgICAgc2V0LFxuICAgICAgICB1cGRhdGU6IChmbiwgb3B0cykgPT4gc2V0KGZuKHRhcmdldF92YWx1ZSwgdmFsdWUpLCBvcHRzKSxcbiAgICAgICAgc3Vic2NyaWJlOiBzdG9yZS5zdWJzY3JpYmVcbiAgICB9O1xufVxuXG5leHBvcnQgeyBzcHJpbmcsIHR3ZWVuZWQgfTtcbiIsImltcG9ydCB7IFdyaXRhYmxlLCB3cml0YWJsZSB9IGZyb20gXCJzdmVsdGUvc3RvcmVcIjtcbmltcG9ydCB0eXBlIHsgTWFuaWZlc3QgfSBmcm9tIFwiQGNvbW1vbnMvdHlwZXMvTnlsYXNcIjtcblxudHlwZSBFcnJvclN0b3JlID0gUmVjb3JkPHN0cmluZywgTWFuaWZlc3RbXCJlcnJvclwiXT47XG5cbmZ1bmN0aW9uIGluaXRpYWxpemUoKTogV3JpdGFibGU8RXJyb3JTdG9yZT4ge1xuICByZXR1cm4gd3JpdGFibGUoe30pO1xufVxuXG5leHBvcnQgY29uc3QgRXJyb3JTdG9yZSA9IGluaXRpYWxpemUoKTtcbiIsImltcG9ydCB7IEVycm9yU3RvcmUgfSBmcm9tIFwiLi4vc3RvcmUvZXJyb3JcIjtcbmltcG9ydCB0eXBlIHsgTWFuaWZlc3QgfSBmcm9tIFwiQGNvbW1vbnMvdHlwZXMvTnlsYXNcIjtcblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGhhbmRsZVJlc3BvbnNlPFQgPSB1bmtub3duPihcbiAgcmVzcG9uc2U6IFJlc3BvbnNlLFxuKTogUHJvbWlzZTxUPiB7XG4gIGlmICghcmVzcG9uc2Uub2spIHtcbiAgICBjb25zdCBwYXNzZWRFcnJvciA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKS50aGVuKFxuICAgICAgKGpzb246IHtcbiAgICAgICAgbWVzc2FnZTogc3RyaW5nO1xuICAgICAgICBuYW1lOiBzdHJpbmc7XG4gICAgICAgIHJlc3BvbnNlPzoge1xuICAgICAgICAgIGVycm9yPzogc3RyaW5nO1xuICAgICAgICB9O1xuICAgICAgfSkgPT4ganNvbixcbiAgICApO1xuXG4gICAgY29uc3QgbWVzc2FnZSA9IHBhc3NlZEVycm9yPy5yZXNwb25zZT8uZXJyb3IgfHwgcGFzc2VkRXJyb3I/Lm1lc3NhZ2U7XG5cbiAgICBjb25zdCBlcnJvciA9IG5ldyBFcnJvcihtZXNzYWdlKTtcbiAgICBlcnJvci5uYW1lID0gcGFzc2VkRXJyb3IubmFtZTtcbiAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoeyBtZXNzYWdlOiBlcnJvciwgc3RhdHVzQ29kZTogcmVzcG9uc2Uuc3RhdHVzIH0pO1xuICB9XG4gIHJldHVybiByZXNwb25zZS5qc29uKCk7XG59XG5cbnR5cGUgSFRUUE1ldGhvZCA9IFwiUE9TVFwiIHwgXCJHRVRcIiB8IFwiUFVUXCIgfCBcIlBBVENIXCIgfCBcIk9QVElPTlNcIiB8IHVuZGVmaW5lZDtcblxudHlwZSBGZXRjaE9wdGlvbnMgPSB7XG4gIGJvZHk/OiB1bmtub3duO1xuICBtZXRob2Q/OiBIVFRQTWV0aG9kO1xuICBjb21wb25lbnRfaWQ/OiBzdHJpbmc7XG4gIGFjY2Vzc190b2tlbj86IHN0cmluZztcbn07XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRGZXRjaENvbmZpZyhcbiAgb3B0czogRmV0Y2hPcHRpb25zID0geyBjb21wb25lbnRfaWQ6IFwiXCIgfSxcbik6IFJlcXVlc3RJbml0IHtcbiAgcmV0dXJuIHtcbiAgICBtZXRob2Q6IG9wdHMubWV0aG9kIHx8IFwiR0VUXCIsIC8vIEdFVCBpcyBkZWZhdWx0IG1ldGhvZFxuICAgIGhlYWRlcnM6IHtcbiAgICAgIEFjY2VwdDogXCJhcHBsaWNhdGlvbi9qc29uXCIsXG4gICAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIixcbiAgICAgIFwiWC1Db21wb25lbnQtSWRcIjogb3B0cy5jb21wb25lbnRfaWQgfHwgXCJcIiwgLy8gQ29tcG9uZW50IElEIGlzIHBhc3NlZCBhcyBoZWFkZXJcbiAgICAgIFwiWC1BY2Nlc3MtVG9rZW5cIjogb3B0cy5hY2Nlc3NfdG9rZW4gfHwgXCJcIiwgLy8gQWNjZXNzIFRva2VuIGlzIHBhc3NlZCBhcyBoZWFkZXJcbiAgICB9LFxuICAgIGJvZHk6IG9wdHMuYm9keSA/IEpTT04uc3RyaW5naWZ5KG9wdHMuYm9keSkgOiB1bmRlZmluZWQsXG4gIH07XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBoYW5kbGVFcnJvcihpZDogc3RyaW5nLCBlcnJvcjogTWFuaWZlc3RbXCJlcnJvclwiXSk6IG5ldmVyIHtcbiAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikgY29uc29sZS5lcnJvcihlcnJvcik7XG4gIEVycm9yU3RvcmUudXBkYXRlKChlcnJvck1hcCkgPT4gKHsgLi4uZXJyb3JNYXAsIFtpZF06IGVycm9yIH0pKTtcbiAgdGhyb3cgZXJyb3I7XG59XG5cbmNvbnN0IFJFR0lPTl9NQVBQSU5HOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+ID0ge1xuICBcIjAwMVwiOiBcIlwiLCAvLyBVU1xuICBcIjAwMlwiOiBcImlyZWxhbmQtXCIsIC8vIEVVXG4gIFwiMDAzXCI6IFwiY2FuYWRhLVwiLCAvLyBDYW5hZGFcbn07XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRNaWRkbGV3YXJlQXBpVXJsKGlkOiBzdHJpbmcpOiBzdHJpbmcge1xuICBsZXQgcmVnaW9uID0gXCJcIjtcbiAgaWYgKGlkLnN1YnN0cmluZygzLCA0KSA9PT0gXCItXCIpIHtcbiAgICBjb25zdCBjb2RlID0gaWQuc3Vic3RyaW5nKDAsIDMpO1xuICAgIGlmICh0eXBlb2YgUkVHSU9OX01BUFBJTkdbY29kZV0gIT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgIHJlZ2lvbiA9IFJFR0lPTl9NQVBQSU5HW2NvZGVdO1xuICAgIH1cbiAgfVxuICBjb25zdCBBUElfR0FURVdBWSA9IGBodHRwczovLyR7cmVnaW9ufSR7cHJvY2Vzcy5lbnYuQVBJX0dBVEVXQVl9YDtcbiAgcmV0dXJuIEFQSV9HQVRFV0FZO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gc2lsZW5jZShlcnJvcjogRXJyb3IpIHt9XG5cbmV4cG9ydCBmdW5jdGlvbiBidWlsZFF1ZXJ5UGFyYW1zKHBhcmFtczogUmVjb3JkPHN0cmluZywgYW55Pik6IHN0cmluZyB7XG4gIHJldHVybiBPYmplY3Qua2V5cyhwYXJhbXMpXG4gICAgLnJlZHVjZSgoYWNjLCBrZXkpID0+IHtcbiAgICAgIGlmIChwYXJhbXNba2V5XSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIGFjYy5hcHBlbmQoa2V5LCBwYXJhbXNba2V5XSk7XG4gICAgICB9XG4gICAgICByZXR1cm4gYWNjO1xuICAgIH0sIG5ldyBVUkxTZWFyY2hQYXJhbXMoKSlcbiAgICAudG9TdHJpbmcoKTtcbn1cbiIsImltcG9ydCB7XG4gIGdldEZldGNoQ29uZmlnLFxuICBoYW5kbGVFcnJvcixcbiAgaGFuZGxlUmVzcG9uc2UsXG4gIGdldE1pZGRsZXdhcmVBcGlVcmwsXG59IGZyb20gXCIuLi9tZXRob2RzL2FwaVwiO1xuaW1wb3J0IHR5cGUgeyBNaWRkbGV3YXJlUmVzcG9uc2UgfSBmcm9tIFwiQGNvbW1vbnMvdHlwZXMvTnlsYXNcIjtcbmltcG9ydCB0eXBlIHtcbiAgRXZlbnRRdWVyeSxcbiAgRXZlbnQsXG4gIENhbGVuZGFyUXVlcnksXG4gIENhbGVuZGFyLFxufSBmcm9tIFwiQGNvbW1vbnMvdHlwZXMvRXZlbnRzXCI7XG5cbmV4cG9ydCBjb25zdCBmZXRjaEV2ZW50cyA9IGFzeW5jIChxdWVyeTogRXZlbnRRdWVyeSk6IFByb21pc2U8RXZlbnRbXT4gPT4ge1xuICByZXR1cm4gUHJvbWlzZS5hbGwoXG4gICAgcXVlcnkuY2FsZW5kYXJJRHMubWFwKChjYWxlbmRhcikgPT4ge1xuICAgICAgcmV0dXJuIGZldGNoKFxuICAgICAgICBgJHtnZXRNaWRkbGV3YXJlQXBpVXJsKFxuICAgICAgICAgIHF1ZXJ5LmNvbXBvbmVudF9pZCB8fCBcIlwiLFxuICAgICAgICApfS9hZ2VuZGEvZXZlbnRzP2NhbGVuZGFyX2lkPSR7Y2FsZW5kYXJ9JnN0YXJ0c19hZnRlcj0ke3F1ZXJ5LnN0YXJ0c19hZnRlciAtIDFcbiAgICAgICAgfSZlbmRzX2JlZm9yZT0ke3F1ZXJ5LmVuZHNfYmVmb3JlfSZleHBhbmRfcmVjdXJyaW5nPXRydWVgLFxuICAgICAgICBnZXRGZXRjaENvbmZpZyh7XG4gICAgICAgICAgY29tcG9uZW50X2lkOiBxdWVyeS5jb21wb25lbnRfaWQsXG4gICAgICAgICAgYWNjZXNzX3Rva2VuOiBxdWVyeS5hY2Nlc3NfdG9rZW4sXG4gICAgICAgIH0pLFxuICAgICAgKVxuICAgICAgICAudGhlbigocmVzcG9uc2UpID0+XG4gICAgICAgICAgaGFuZGxlUmVzcG9uc2U8TWlkZGxld2FyZVJlc3BvbnNlPEV2ZW50W10+PihyZXNwb25zZSksXG4gICAgICAgIClcbiAgICAgICAgLnRoZW4oKGpzb24pID0+IHtcbiAgICAgICAgICByZXR1cm4ganNvbi5yZXNwb25zZTtcbiAgICAgICAgfSk7XG4gICAgfSksXG4gIClcbiAgICAudGhlbigocmVzcG9uc2VzKSA9PiB7XG4gICAgICByZXR1cm4gcmVzcG9uc2VzLmZsYXQoKTtcbiAgICB9KVxuICAgIC5jYXRjaCgoZXJyb3IpID0+IGhhbmRsZUVycm9yKHF1ZXJ5LmNvbXBvbmVudF9pZCB8fCBcInVua25vd25cIiwgZXJyb3IpKTtcbn07XG5cbmV4cG9ydCBjb25zdCBmZXRjaENhbGVuZGFycyA9IGFzeW5jIChcbiAgcXVlcnk6IENhbGVuZGFyUXVlcnksXG4pOiBQcm9taXNlPENhbGVuZGFyW10+ID0+IHtcbiAgaWYgKHF1ZXJ5LmNhbGVuZGFySURzLmxlbmd0aCkge1xuICAgIHJldHVybiBQcm9taXNlLmFsbFNldHRsZWQoXG4gICAgICBxdWVyeS5jYWxlbmRhcklEcy5tYXAoKGNhbGVuZGFyOiB1bmtub3duKSA9PiB7XG4gICAgICAgIHJldHVybiBmZXRjaChcbiAgICAgICAgICBgJHtnZXRNaWRkbGV3YXJlQXBpVXJsKFxuICAgICAgICAgICAgcXVlcnkuY29tcG9uZW50X2lkIHx8IFwiXCIsXG4gICAgICAgICAgKX0vY2FsZW5kYXJzLyR7Y2FsZW5kYXJ9YCxcbiAgICAgICAgICBnZXRGZXRjaENvbmZpZyh7XG4gICAgICAgICAgICBjb21wb25lbnRfaWQ6IHF1ZXJ5LmNvbXBvbmVudF9pZCxcbiAgICAgICAgICAgIGFjY2Vzc190b2tlbjogcXVlcnkuYWNjZXNzX3Rva2VuLFxuICAgICAgICAgIH0pLFxuICAgICAgICApXG4gICAgICAgICAgLnRoZW4oKHJlc3BvbnNlKSA9PlxuICAgICAgICAgICAgaGFuZGxlUmVzcG9uc2U8TWlkZGxld2FyZVJlc3BvbnNlPENhbGVuZGFyW10+PihcbiAgICAgICAgICAgICAgcmVzcG9uc2UsXG4gICAgICAgICAgICApLFxuICAgICAgICAgIClcbiAgICAgICAgICAudGhlbigoanNvbikgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIGpzb24ucmVzcG9uc2U7XG4gICAgICAgICAgfSk7XG4gICAgICB9KSxcbiAgICApXG4gICAgICAudGhlbigocmVzcG9uc2VzKSA9PiB7XG4gICAgICAgIGNvbnN0IGZpbHRlcmVkUmVzcG9uc2VzID0gcmVzcG9uc2VzXG4gICAgICAgICAgLmZpbHRlcihcbiAgICAgICAgICAgIChyZXNwb25zZSk6IHJlc3BvbnNlIGlzIFByb21pc2VGdWxmaWxsZWRSZXN1bHQ8Q2FsZW5kYXJbXT4gPT5cbiAgICAgICAgICAgICAgcmVzcG9uc2Uuc3RhdHVzID09PSBcImZ1bGZpbGxlZFwiLFxuICAgICAgICAgIClcbiAgICAgICAgICAubWFwKChjYWwpID0+IGNhbC52YWx1ZSk7XG4gICAgICAgIHJldHVybiBmaWx0ZXJlZFJlc3BvbnNlcy5mbGF0KCk7XG4gICAgICB9KVxuICAgICAgLmNhdGNoKChlcnJvcikgPT4gaGFuZGxlRXJyb3IocXVlcnkuY29tcG9uZW50X2lkIHx8IFwidW5rbm93blwiLCBlcnJvcikpO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiBmZXRjaChcbiAgICAgIGAke2dldE1pZGRsZXdhcmVBcGlVcmwocXVlcnkuY29tcG9uZW50X2lkIHx8IFwiXCIpfS9jYWxlbmRhcnNgLFxuICAgICAgZ2V0RmV0Y2hDb25maWcoe1xuICAgICAgICBjb21wb25lbnRfaWQ6IHF1ZXJ5LmNvbXBvbmVudF9pZCxcbiAgICAgICAgYWNjZXNzX3Rva2VuOiBxdWVyeS5hY2Nlc3NfdG9rZW4sXG4gICAgICB9KSxcbiAgICApXG4gICAgICAudGhlbigocmVzcG9uc2UpID0+XG4gICAgICAgIGhhbmRsZVJlc3BvbnNlPE1pZGRsZXdhcmVSZXNwb25zZTxDYWxlbmRhcltdPj4ocmVzcG9uc2UpLFxuICAgICAgKVxuICAgICAgLnRoZW4oKGpzb24pID0+IHtcbiAgICAgICAgcmV0dXJuIGpzb24ucmVzcG9uc2U7XG4gICAgICB9KTtcbiAgfVxufTtcblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGNyZWF0ZUV2ZW50KFxuICBldmVudDogRXZlbnQsXG4gIHF1ZXJ5OiBFdmVudFF1ZXJ5LFxuKTogUHJvbWlzZTxFdmVudD4ge1xuICByZXR1cm4gZmV0Y2goXG4gICAgYCR7Z2V0TWlkZGxld2FyZUFwaVVybChxdWVyeS5jb21wb25lbnRfaWQgfHwgXCJcIil9L2FnZW5kYS9ldmVudHNgLFxuICAgIGdldEZldGNoQ29uZmlnKHtcbiAgICAgIG1ldGhvZDogXCJQT1NUXCIsXG4gICAgICBjb21wb25lbnRfaWQ6IHF1ZXJ5LmNvbXBvbmVudF9pZCxcbiAgICAgIGFjY2Vzc190b2tlbjogcXVlcnkuYWNjZXNzX3Rva2VuLFxuICAgICAgYm9keTogZXZlbnQsXG4gICAgfSksXG4gIClcbiAgICAudGhlbigocmVzcG9uc2UpID0+IGhhbmRsZVJlc3BvbnNlPE1pZGRsZXdhcmVSZXNwb25zZTxFdmVudD4+KHJlc3BvbnNlKSlcbiAgICAudGhlbigoanNvbikgPT4ge1xuICAgICAgcmV0dXJuIGpzb24ucmVzcG9uc2U7XG4gICAgfSk7XG59XG4iLCJpbXBvcnQge1xuICBnZXRGZXRjaENvbmZpZyxcbiAgaGFuZGxlRXJyb3IsXG4gIGhhbmRsZVJlc3BvbnNlLFxuICBnZXRNaWRkbGV3YXJlQXBpVXJsLFxufSBmcm9tIFwiLi4vbWV0aG9kcy9hcGlcIjtcbmltcG9ydCB0eXBlIHtcbiAgTWFpbGJveFF1ZXJ5LFxuICBUaHJlYWQsXG4gIENvbnZlcnNhdGlvblF1ZXJ5LFxuICBDb252ZXJzYXRpb24sXG4gIE1pZGRsZXdhcmVSZXNwb25zZSxcbn0gZnJvbSBcIkBjb21tb25zL3R5cGVzL055bGFzXCI7XG5cbmV4cG9ydCBjb25zdCBmZXRjaFRocmVhZHMgPSAoXG4gIHF1ZXJ5OiBNYWlsYm94UXVlcnksXG4gIGxpbWl0OiBudW1iZXIsXG4gIG9mZnNldDogbnVtYmVyLFxuKTogUHJvbWlzZTxUaHJlYWRbXT4gPT4ge1xuICBpZiAocXVlcnkudGhyZWFkX2lkcykge1xuICAgIC8vICZsaW1pdD0ke2xpbWl0fSZvZmZzZXQ9JHtvZmZzZXR9XG4gICAgY29uc3QgcGFnZV9vZl9pZHMgPSBxdWVyeS50aHJlYWRfaWRzLnNsaWNlKG9mZnNldCwgb2Zmc2V0ICsgbGltaXQpO1xuICAgIHJldHVybiBQcm9taXNlLmFsbChcbiAgICAgIHBhZ2Vfb2ZfaWRzLm1hcChhc3luYyAodGhyZWFkX2lkKSA9PiB7XG4gICAgICAgIC8vIE55bGFzIEFQSSBkb2VzIG5vdCBzdXBwb3J0IGZldGNoaW5nIHRocmVhZHMgaW4gYnVsaywgc28gbXVzdCBmZXRjaCB0aGVtIG9uZVxuICAgICAgICAvLyBhdCBhIHRpbWUgOihcbiAgICAgICAgY29uc3QgcXVlcnlTdHJpbmcgPSBgJHtnZXRNaWRkbGV3YXJlQXBpVXJsKFxuICAgICAgICAgIHF1ZXJ5LmNvbXBvbmVudF9pZCxcbiAgICAgICAgKX0vdGhyZWFkcy8ke3RocmVhZF9pZH0/dmlldz1leHBhbmRlZGA7XG4gICAgICAgIC8vIFRPRE86IGlkZWFsbHkgdGhpcyB3b3VsZG4ndCByZXBsaWNhdGUgbXVjaCBvZiB0aGUgY29kZSBmcm9tIGJlbG93XG4gICAgICAgIHJldHVybiBhd2FpdCBmZXRjaChxdWVyeVN0cmluZywgZ2V0RmV0Y2hDb25maWcocXVlcnkpKVxuICAgICAgICAgIC50aGVuKChyZXNwb25zZSkgPT5cbiAgICAgICAgICAgIGhhbmRsZVJlc3BvbnNlPE1pZGRsZXdhcmVSZXNwb25zZTxUaHJlYWQ+PihyZXNwb25zZSksXG4gICAgICAgICAgKVxuICAgICAgICAgIC50aGVuKChqc29uKSA9PiBqc29uLnJlc3BvbnNlKVxuICAgICAgICAgIC8vIFRPRE86IFJlbW92ZSB0aGlzIHVnbHkgaGFjayB3aGVuIHdlIGZpeCB0aGUgQVBJIGZyb20gcmV0dXJuaW5nIGdob3N0IG1lc3NhZ2VzIChlLmcuIHcvbyBhIGZyb20vdG8gZmllbGQpXG4gICAgICAgICAgLnRoZW4oKHRocmVhZCkgPT4gKHtcbiAgICAgICAgICAgIC4uLnRocmVhZCxcbiAgICAgICAgICAgIG1lc3NhZ2VzOiB0aHJlYWQubWVzc2FnZXMuZmlsdGVyKFxuICAgICAgICAgICAgICAobWVzc2FnZSkgPT4gbWVzc2FnZS5mcm9tLmxlbmd0aCAhPT0gMCB8fCBtZXNzYWdlLnRvLmxlbmd0aCAhPT0gMCxcbiAgICAgICAgICAgICksXG4gICAgICAgICAgfSkpXG4gICAgICAgICAgLmNhdGNoKChlcnJvcikgPT4gaGFuZGxlRXJyb3IocXVlcnkuY29tcG9uZW50X2lkLCBlcnJvcikpO1xuICAgICAgfSksXG4gICAgKTtcbiAgfVxuICBsZXQgcXVlcnlTdHJpbmcgPSBgJHtnZXRNaWRkbGV3YXJlQXBpVXJsKFxuICAgIHF1ZXJ5LmNvbXBvbmVudF9pZCxcbiAgKX0vdGhyZWFkcz92aWV3PWV4cGFuZGVkJm5vdF9pbj10cmFzaCZsaW1pdD0ke2xpbWl0fSZvZmZzZXQ9JHtvZmZzZXR9YDtcbiAgaWYgKHF1ZXJ5LnF1ZXJ5KSB7XG4gICAgT2JqZWN0LmVudHJpZXMocXVlcnkucXVlcnkpLmZvckVhY2goXG4gICAgICAocGFyYW0pID0+IChxdWVyeVN0cmluZyA9IHF1ZXJ5U3RyaW5nLmNvbmNhdChgJiR7cGFyYW1bMF19PSR7cGFyYW1bMV19YCkpLFxuICAgICk7XG4gIH1cbiAgcmV0dXJuIChcbiAgICBmZXRjaChxdWVyeVN0cmluZywgZ2V0RmV0Y2hDb25maWcocXVlcnkpKVxuICAgICAgLnRoZW4oKHJlc3BvbnNlKSA9PlxuICAgICAgICBoYW5kbGVSZXNwb25zZTxNaWRkbGV3YXJlUmVzcG9uc2U8VGhyZWFkW10+PihyZXNwb25zZSksXG4gICAgICApXG4gICAgICAudGhlbigoanNvbikgPT4ganNvbi5yZXNwb25zZSlcbiAgICAgIC8vIFRPRE86IFJlbW92ZSB0aGlzIHVnbHkgaGFjayB3aGVuIHdlIGZpeCB0aGUgQVBJIGZyb20gcmV0dXJuaW5nIGdob3N0IG1lc3NhZ2VzIChlLmcuIHcvbyBhIGZyb20vdG8gZmllbGQpXG4gICAgICAudGhlbigodGhyZWFkcykgPT5cbiAgICAgICAgdGhyZWFkcy5tYXAoKHRocmVhZCkgPT4gKHtcbiAgICAgICAgICAuLi50aHJlYWQsXG4gICAgICAgICAgbWVzc2FnZXM6IHRocmVhZC5tZXNzYWdlcy5maWx0ZXIoXG4gICAgICAgICAgICAobWVzc2FnZSkgPT4gbWVzc2FnZS5mcm9tLmxlbmd0aCAhPT0gMCB8fCBtZXNzYWdlLnRvLmxlbmd0aCAhPT0gMCxcbiAgICAgICAgICApLFxuICAgICAgICB9KSksXG4gICAgICApXG4gICAgICAuY2F0Y2goKGVycm9yKSA9PiBoYW5kbGVFcnJvcihxdWVyeS5jb21wb25lbnRfaWQsIGVycm9yKSlcbiAgKTtcbn07XG5cbmV4cG9ydCBmdW5jdGlvbiBmZXRjaFRocmVhZENvdW50KHF1ZXJ5OiBNYWlsYm94UXVlcnkpOiBQcm9taXNlPG51bWJlcj4ge1xuICBsZXQgcXVlcnlTdHJpbmcgPSBgJHtnZXRNaWRkbGV3YXJlQXBpVXJsKFxuICAgIHF1ZXJ5LmNvbXBvbmVudF9pZCxcbiAgKX0vdGhyZWFkcz92aWV3PWV4cGFuZGVkJm5vdF9pbj10cmFzaCZ2aWV3PWNvdW50YDtcbiAgaWYgKHF1ZXJ5LnF1ZXJ5KSB7XG4gICAgT2JqZWN0LmVudHJpZXMocXVlcnkucXVlcnkpLmZvckVhY2goXG4gICAgICAocGFyYW0pID0+IChxdWVyeVN0cmluZyA9IHF1ZXJ5U3RyaW5nLmNvbmNhdChgJiR7cGFyYW1bMF19PSR7cGFyYW1bMV19YCkpLFxuICAgICk7XG4gIH1cblxuICBpZiAocXVlcnkua2V5d29yZFRvU2VhcmNoKSB7XG4gICAgcXVlcnlTdHJpbmcgKz0gYCZxPSR7cXVlcnkua2V5d29yZFRvU2VhcmNofWA7XG4gIH1cblxuICByZXR1cm4gZmV0Y2gocXVlcnlTdHJpbmcsIGdldEZldGNoQ29uZmlnKHF1ZXJ5KSlcbiAgICAudGhlbigocmVzcG9uc2UpID0+IGhhbmRsZVJlc3BvbnNlPE1pZGRsZXdhcmVSZXNwb25zZTxhbnk+PihyZXNwb25zZSkpXG4gICAgLnRoZW4oKGpzb24pID0+IGpzb24ucmVzcG9uc2UuY291bnQpO1xufVxuXG5leHBvcnQgY29uc3QgZmV0Y2hTZWFyY2hSZXN1bHRUaHJlYWRzID0gKFxuICBxdWVyeTogTWFpbGJveFF1ZXJ5LFxuKTogUHJvbWlzZTxUaHJlYWRbXT4gPT4ge1xuICBjb25zdCBxdWVyeVN0cmluZyA9IGAke2dldE1pZGRsZXdhcmVBcGlVcmwoXG4gICAgcXVlcnkuY29tcG9uZW50X2lkLFxuICApfS90aHJlYWRzL3NlYXJjaD9xPSR7cXVlcnkua2V5d29yZFRvU2VhcmNofSZ2aWV3PWV4cGFuZGVkJmxpbWl0PSR7XG4gICAgcXVlcnkucXVlcnkubGltaXRcbiAgfSZvZmZzZXQ9JHtxdWVyeS5xdWVyeS5vZmZzZXR9YDtcblxuICByZXR1cm4gZmV0Y2gocXVlcnlTdHJpbmcsIGdldEZldGNoQ29uZmlnKHF1ZXJ5KSlcbiAgICAudGhlbihhc3luYyAocmVzcG9uc2UpID0+XG4gICAgICBoYW5kbGVSZXNwb25zZTxNaWRkbGV3YXJlUmVzcG9uc2U8VGhyZWFkW10+PihyZXNwb25zZSksXG4gICAgKVxuICAgIC50aGVuKChqc29uKSA9PiBqc29uLnJlc3BvbnNlKVxuICAgIC5jYXRjaCgoZXJyb3IpID0+IGhhbmRsZUVycm9yKHF1ZXJ5LmNvbXBvbmVudF9pZCwgZXJyb3IpKTtcbn07XG5cbmV4cG9ydCBjb25zdCBmZXRjaFRocmVhZCA9IGFzeW5jIChcbiAgcXVlcnk6IENvbnZlcnNhdGlvblF1ZXJ5LFxuKTogUHJvbWlzZTxDb252ZXJzYXRpb24+ID0+IHtcbiAgY29uc3QgdGhyZWFkID0gYXdhaXQgZmV0Y2goXG4gICAgYCR7Z2V0TWlkZGxld2FyZUFwaVVybChxdWVyeS5jb21wb25lbnRfaWQpfS90aHJlYWRzLyR7XG4gICAgICBxdWVyeS50aHJlYWRfaWRcbiAgICB9P3ZpZXc9ZXhwYW5kZWRgLFxuICAgIGdldEZldGNoQ29uZmlnKHtcbiAgICAgIGNvbXBvbmVudF9pZDogcXVlcnkuY29tcG9uZW50X2lkLFxuICAgICAgYWNjZXNzX3Rva2VuOiBxdWVyeS5hY2Nlc3NfdG9rZW4sXG4gICAgfSksXG4gIClcbiAgICAudGhlbigocmVzcG9uc2UpID0+XG4gICAgICBoYW5kbGVSZXNwb25zZTxNaWRkbGV3YXJlUmVzcG9uc2U8Q29udmVyc2F0aW9uPj4ocmVzcG9uc2UpLFxuICAgIClcbiAgICAudGhlbigoanNvbikgPT4ganNvbi5yZXNwb25zZSlcbiAgICAuY2F0Y2goKGVycm9yKSA9PiBoYW5kbGVFcnJvcihxdWVyeS5jb21wb25lbnRfaWQsIGVycm9yKSk7XG5cbiAgcmV0dXJuIHRocmVhZDtcbn07XG5cbmV4cG9ydCBjb25zdCB1cGRhdGVUaHJlYWQgPSAoXG4gIHF1ZXJ5OiBDb252ZXJzYXRpb25RdWVyeSxcbiAgdXBkYXRlZFRocmVhZDogQ29udmVyc2F0aW9uLFxuKTogUHJvbWlzZTxDb252ZXJzYXRpb24+ID0+IHtcbiAgLy8gYWNjZXB0cyB1bnJlYWQsIHN0YXJyZWQsIGZvbGRlcl9pZCArIGxhYmVsX2lkcy4gZGV2ZWxvcGVyLm55bGFzLmNvbS9kb2NzL2FwaS8jcHV0L3RocmVhZHMvaWRcbiAgcmV0dXJuIGZldGNoKFxuICAgIGAke2dldE1pZGRsZXdhcmVBcGlVcmwocXVlcnkuY29tcG9uZW50X2lkKX0vdGhyZWFkcy8ke3VwZGF0ZWRUaHJlYWQuaWR9YCxcbiAgICBnZXRGZXRjaENvbmZpZyh7XG4gICAgICBtZXRob2Q6IFwiUFVUXCIsXG4gICAgICBjb21wb25lbnRfaWQ6IHF1ZXJ5LmNvbXBvbmVudF9pZCxcbiAgICAgIGFjY2Vzc190b2tlbjogcXVlcnkuYWNjZXNzX3Rva2VuLFxuICAgICAgYm9keToge1xuICAgICAgICB1bnJlYWQ6IHVwZGF0ZWRUaHJlYWQudW5yZWFkLFxuICAgICAgICBzdGFycmVkOiB1cGRhdGVkVGhyZWFkLnN0YXJyZWQsXG4gICAgICAgIGZvbGRlcl9pZDogdXBkYXRlZFRocmVhZC5mb2xkZXJfaWQsXG4gICAgICAgIGxhYmVsX2lkczogdXBkYXRlZFRocmVhZC5sYWJlbF9pZHMsXG4gICAgICB9LFxuICAgIH0pLFxuICApXG4gICAgLnRoZW4oKHJlc3BvbnNlKSA9PlxuICAgICAgaGFuZGxlUmVzcG9uc2U8TWlkZGxld2FyZVJlc3BvbnNlPENvbnZlcnNhdGlvbj4+KHJlc3BvbnNlKSxcbiAgICApXG4gICAgLnRoZW4oKGpzb24pID0+IGpzb24ucmVzcG9uc2UpXG4gICAgLmNhdGNoKChlcnJvcikgPT4gaGFuZGxlRXJyb3IocXVlcnkuY29tcG9uZW50X2lkLCBlcnJvcikpO1xufTtcbiIsImltcG9ydCB7XG4gIGdldEZldGNoQ29uZmlnLFxuICBoYW5kbGVFcnJvcixcbiAgaGFuZGxlUmVzcG9uc2UsXG4gIGdldE1pZGRsZXdhcmVBcGlVcmwsXG59IGZyb20gXCIuLi9tZXRob2RzL2FwaVwiO1xuaW1wb3J0IHR5cGUgeyBNYW5pZmVzdCwgTWlkZGxld2FyZVJlc3BvbnNlIH0gZnJvbSBcIkBjb21tb25zL3R5cGVzL055bGFzXCI7XG5cbmV4cG9ydCBjb25zdCBmZXRjaE1hbmlmZXN0ID0gYXN5bmMgKFxuICBpZDogc3RyaW5nLFxuICBhY2Nlc3NfdG9rZW4/OiBzdHJpbmcsXG4pOiBQcm9taXNlPE1hbmlmZXN0PiA9PiB7XG4gIHJldHVybiBhd2FpdCBmZXRjaChcbiAgICBgJHtnZXRNaWRkbGV3YXJlQXBpVXJsKGlkKX0vbWFuaWZlc3RgLFxuICAgIGdldEZldGNoQ29uZmlnKHtcbiAgICAgIGFjY2Vzc190b2tlbixcbiAgICAgIGNvbXBvbmVudF9pZDogaWQsXG4gICAgfSksXG4gIClcbiAgICAudGhlbjxNaWRkbGV3YXJlUmVzcG9uc2U+KGhhbmRsZVJlc3BvbnNlKVxuICAgIC50aGVuKChyZXNwb25zZSkgPT4gcmVzcG9uc2UuY29tcG9uZW50LnRoZW1pbmcpXG4gICAgLmNhdGNoKChlcnJvcikgPT4gaGFuZGxlRXJyb3IoaWQsIGVycm9yKSk7XG59O1xuXG4vLyBBbGxvd3MgPG55bGFzLXNjaGVkdWxlLWVkaXRvcj4gdG8gbW9kaWZ5IGl0cyBvd24gcHJvcGVydGllc1xuXG5leHBvcnQgY29uc3Qgc2F2ZU1hbmlmZXN0ID0gYXN5bmMgKFxuICBpZDogc3RyaW5nLFxuICBtYW5pZmVzdDogTWFuaWZlc3QsXG4gIGFjY2Vzc190b2tlbj86IHN0cmluZyxcbik6IFByb21pc2U8TWFuaWZlc3Q+ID0+IHtcbiAgcmV0dXJuIGZldGNoKFxuICAgIGAke2dldE1pZGRsZXdhcmVBcGlVcmwoaWQpfS9jb21wb25lbnRgLFxuICAgIGdldEZldGNoQ29uZmlnKHtcbiAgICAgIG1ldGhvZDogXCJQVVRcIixcbiAgICAgIGNvbXBvbmVudF9pZDogaWQsXG4gICAgICBhY2Nlc3NfdG9rZW4sXG4gICAgICBib2R5OiB7IHNldHRpbmdzOiBtYW5pZmVzdCB9LFxuICAgIH0pLFxuICApXG4gICAgLnRoZW4oKHJlc3BvbnNlKSA9PiBoYW5kbGVSZXNwb25zZTxNaWRkbGV3YXJlUmVzcG9uc2U8TWFuaWZlc3Q+PihyZXNwb25zZSkpXG4gICAgLnRoZW4oKGpzb24pID0+IHtcbiAgICAgIHJldHVybiBqc29uLnJlc3BvbnNlO1xuICAgIH0pO1xufTtcbiIsImltcG9ydCB7XG4gIGdldEZldGNoQ29uZmlnLFxuICBoYW5kbGVFcnJvcixcbiAgaGFuZGxlUmVzcG9uc2UsXG4gIGdldE1pZGRsZXdhcmVBcGlVcmwsXG59IGZyb20gXCIuLi9tZXRob2RzL2FwaVwiO1xuaW1wb3J0IHR5cGUge1xuICBDb25zZWN1dGl2ZUF2YWlsYWJpbGl0eVF1ZXJ5LFxuICBBdmFpbGFiaWxpdHlRdWVyeSxcbiAgQXZhaWxhYmlsaXR5UmVzcG9uc2UsXG4gIEZyZWVCdXN5UmVzcG9uc2UsXG4gIFByZURhdGVkVGltZVNsb3QsXG59IGZyb20gXCJAY29tbW9ucy90eXBlcy9BdmFpbGFiaWxpdHlcIjtcbmltcG9ydCB0eXBlIHsgTWlkZGxld2FyZVJlc3BvbnNlIH0gZnJvbSBcIkBjb21tb25zL3R5cGVzL055bGFzXCI7XG5pbXBvcnQgdHlwZSB7IEV2ZW50RGVmaW5pdGlvbiB9IGZyb20gXCJAY29tbW9ucy90eXBlcy9TY2hlZHVsZUVkaXRvclwiO1xuaW1wb3J0IHR5cGUgeyBDb25zZWN1dGl2ZUV2ZW50IH0gZnJvbSBcIkBjb21tb25zL3R5cGVzL0Jvb2tpbmdcIjtcblxuLy8gVE9ETzogZGVwcmVjYXRlIGlmIHdlIGZpbmQgL2NhbGVuZGFycy9hdmFpbGFiaWxpdHkgdG8gYmUgZnVsbHkgc3VmZmljaWVudFxuZXhwb3J0IGNvbnN0IGZldGNoRnJlZUJ1c3kgPSBhc3luYyAoXG4gIHF1ZXJ5OiBBdmFpbGFiaWxpdHlRdWVyeSxcbik6IFByb21pc2U8RnJlZUJ1c3lSZXNwb25zZVtdPiA9PiB7XG4gIHJldHVybiBmZXRjaChcbiAgICBgJHtnZXRNaWRkbGV3YXJlQXBpVXJsKHF1ZXJ5LmNvbXBvbmVudF9pZCl9L2NhbGVuZGFycy9mcmVlLWJ1c3lgLFxuICAgIGdldEZldGNoQ29uZmlnKHtcbiAgICAgIG1ldGhvZDogXCJQT1NUXCIsXG4gICAgICBjb21wb25lbnRfaWQ6IHF1ZXJ5LmNvbXBvbmVudF9pZCxcbiAgICAgIGFjY2Vzc190b2tlbjogcXVlcnkuYWNjZXNzX3Rva2VuLFxuICAgICAgYm9keTogcXVlcnkuYm9keSxcbiAgICB9KSxcbiAgKVxuICAgIC50aGVuKGFzeW5jIChhcGlSZXNwb25zZSkgPT4ge1xuICAgICAgY29uc3QganNvbiA9IGF3YWl0IGhhbmRsZVJlc3BvbnNlPE1pZGRsZXdhcmVSZXNwb25zZTxGcmVlQnVzeVJlc3BvbnNlW10+PihcbiAgICAgICAgYXBpUmVzcG9uc2UsXG4gICAgICApO1xuICAgICAgcmV0dXJuIGpzb24ucmVzcG9uc2U7XG4gICAgfSlcbiAgICAuY2F0Y2goKGVycm9yKSA9PiBoYW5kbGVFcnJvcihxdWVyeS5jb21wb25lbnRfaWQsIGVycm9yKSk7XG59O1xuXG5leHBvcnQgY29uc3QgZmV0Y2hBdmFpbGFiaWxpdHkgPSBhc3luYyAoXG4gIHF1ZXJ5OiBBdmFpbGFiaWxpdHlRdWVyeSxcbik6IFByb21pc2U8QXZhaWxhYmlsaXR5UmVzcG9uc2U+ID0+IHtcbiAgcmV0dXJuIGZldGNoKFxuICAgIGAke2dldE1pZGRsZXdhcmVBcGlVcmwocXVlcnkuY29tcG9uZW50X2lkKX0vY2FsZW5kYXJzL2F2YWlsYWJpbGl0eWAsXG4gICAgZ2V0RmV0Y2hDb25maWcoe1xuICAgICAgbWV0aG9kOiBcIlBPU1RcIixcbiAgICAgIGNvbXBvbmVudF9pZDogcXVlcnkuY29tcG9uZW50X2lkLFxuICAgICAgYWNjZXNzX3Rva2VuOiBxdWVyeS5hY2Nlc3NfdG9rZW4sXG4gICAgICBib2R5OiBxdWVyeS5ib2R5LFxuICAgIH0pLFxuICApXG4gICAgLnRoZW4oYXN5bmMgKGFwaVJlc3BvbnNlKSA9PiB7XG4gICAgICBjb25zdCBqc29uID0gYXdhaXQgaGFuZGxlUmVzcG9uc2U8XG4gICAgICAgIE1pZGRsZXdhcmVSZXNwb25zZTxBdmFpbGFiaWxpdHlSZXNwb25zZT5cbiAgICAgID4oYXBpUmVzcG9uc2UpO1xuICAgICAgLy8gTm9ybWFsaXplIHJlc3BvbnNlIC5zdGFydCBhbmQgLmVuZCB0byAuc3RhcnRfdGltZSBhbmQgLmVuZF90aW1lIHRvIG1ha2UgdXAgZm9yIGRpc2NyZXBlbmRjeSBpbiB0aGUgTnlsYXMgQVBJOiBodHRwczovL2RldmVsb3Blci5ueWxhcy5jb20vZG9jcy9jb25uZWN0aXZpdHkvY2FsZW5kYXIvY2FsZW5kYXItYXZhaWxhYmlsaXR5LyNhdmFpbGFiaWxpdHktcmVzcG9uc2VcbiAgICAgIC8vIEFQSSBzdG9yeTogaHR0cHM6Ly9hcHAuc2hvcnRjdXQuY29tL255bGFzL3N0b3J5LzczMTk2L1xuICAgICAganNvbi5yZXNwb25zZS50aW1lX3Nsb3RzID0ganNvbi5yZXNwb25zZS50aW1lX3Nsb3RzLm1hcCgoc2xvdCkgPT4ge1xuICAgICAgICBzbG90LnN0YXJ0X3RpbWUgPSBzbG90LnN0YXJ0IHx8IDA7XG4gICAgICAgIHNsb3QuZW5kX3RpbWUgPSBzbG90LmVuZCB8fCAwO1xuICAgICAgICBkZWxldGUgc2xvdC5zdGFydDtcbiAgICAgICAgZGVsZXRlIHNsb3QuZW5kO1xuICAgICAgICByZXR1cm4gc2xvdDtcbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIGpzb24ucmVzcG9uc2U7XG4gICAgfSlcbiAgICAuY2F0Y2goKGVycm9yKSA9PiBoYW5kbGVFcnJvcihxdWVyeS5jb21wb25lbnRfaWQsIGVycm9yKSk7XG59O1xuXG5leHBvcnQgY29uc3QgZmV0Y2hDb25zZWN1dGl2ZUF2YWlsYWJpbGl0eSA9IGFzeW5jIChcbiAgcXVlcnk6IENvbnNlY3V0aXZlQXZhaWxhYmlsaXR5UXVlcnksXG4pOiBQcm9taXNlPENvbnNlY3V0aXZlRXZlbnRbXVtdPiA9PiB7XG4gIHJldHVybiBmZXRjaChcbiAgICBgJHtnZXRNaWRkbGV3YXJlQXBpVXJsKFxuICAgICAgcXVlcnkuY29tcG9uZW50X2lkLFxuICAgICl9L2NhbGVuZGFycy9hdmFpbGFiaWxpdHkvY29uc2VjdXRpdmVgLFxuICAgIGdldEZldGNoQ29uZmlnKHtcbiAgICAgIG1ldGhvZDogXCJQT1NUXCIsXG4gICAgICBjb21wb25lbnRfaWQ6IHF1ZXJ5LmNvbXBvbmVudF9pZCxcbiAgICAgIGFjY2Vzc190b2tlbjogcXVlcnkuYWNjZXNzX3Rva2VuLFxuICAgICAgYm9keTogcXVlcnkuYm9keSxcbiAgICB9KSxcbiAgKVxuICAgIC50aGVuKGFzeW5jIChhcGlSZXNwb25zZSk6IFByb21pc2U8Q29uc2VjdXRpdmVFdmVudFtdW10+ID0+IHtcbiAgICAgIGNvbnN0IGpzb24gPSBhd2FpdCBoYW5kbGVSZXNwb25zZTxcbiAgICAgICAgTWlkZGxld2FyZVJlc3BvbnNlPFByZURhdGVkVGltZVNsb3RbXVtdPlxuICAgICAgPihhcGlSZXNwb25zZSk7XG4gICAgICBjb25zdCByZXNwb25zZTogUHJlRGF0ZWRUaW1lU2xvdFtdW10gPVxuICAgICAgICBqc29uLnJlc3BvbnNlPy5tYXAoKGJsb2NrU2xvdCkgPT4ge1xuICAgICAgICAgIGJsb2NrU2xvdCA9IGJsb2NrU2xvdC5tYXAoKHNsb3Q6IGFueSkgPT4ge1xuICAgICAgICAgICAgc2xvdC5zdGFydF90aW1lID0gbmV3IERhdGUoc2xvdC5zdGFydF90aW1lICogMTAwMCk7XG4gICAgICAgICAgICBzbG90LmVuZF90aW1lID0gbmV3IERhdGUoc2xvdC5lbmRfdGltZSAqIDEwMDApO1xuICAgICAgICAgICAgcmV0dXJuIHNsb3Q7XG4gICAgICAgICAgfSk7XG4gICAgICAgICAgcmV0dXJuIGJsb2NrU2xvdDtcbiAgICAgICAgfSkgfHwgW107XG4gICAgICBjb25zdCBoeWRyYXRlZFJlc3BvbnNlID0gaHlkcmF0ZVNsb3RzVG9FdmVudHMoXG4gICAgICAgIHJlc3BvbnNlLFxuICAgICAgICBxdWVyeS5ib2R5LmV2ZW50cyxcbiAgICAgICk7XG4gICAgICBjb25zdCBkZWR1cGVkUmVzcG9uc2UgPVxuICAgICAgICByZW1vdmVTaW11bHRhbmVvdXNBdmFpbGFiaWxpdHlPcHRpb25zKGh5ZHJhdGVkUmVzcG9uc2UpO1xuICAgICAgcmV0dXJuIGRlZHVwZWRSZXNwb25zZTtcbiAgICB9KVxuICAgIC5jYXRjaCgoZXJyb3IpID0+IGhhbmRsZUVycm9yKHF1ZXJ5LmNvbXBvbmVudF9pZCwgZXJyb3IpKTtcbn07XG5cbi8vIERvaW5nIHRoZSBiZXN0IHdlIGNhbiB3aXRoIHdoYXQgd2UndmUgZ290OiAvY2FsZW5kYXJzL2F2YWlsYWJpbGl0eS9jb25zZWN1dGl2ZSBkb2Vzbid0IHJldHVybiBhbnkgaW5mbyBvdGhlciB0aGFuIGVtYWlsc1xuLy8gYW5kIHN0YXJ0L2VuZCB0aW1lcy4gVGhpcyBtZWFucyB0aGF0IGlmIHdlIGhhdmUgdG8gZXZlbnRzIChFdmVudERlZmluaXRpb25zKSB3aXRoIHRoZSBzYW1lIGVtYWlsIGFkZHJlc3Nlcz8gV2UncmUgc2hvb3RpbmcgaW4gdGhlIGRhcmsgYWJvdXQgd2hpY2ggaXMgd2hpY2guXG4vLyBUT0RPOiBhbGxvdyBmb3IgYW4gaW5kaWNhdG9yIG9uIHRoZSBBUEkgc2lkZVxuZnVuY3Rpb24gaHlkcmF0ZVNsb3RzVG9FdmVudHMoXG4gIGF2YWlsYWJpbGl0aWVzOiBQcmVEYXRlZFRpbWVTbG90W11bXSxcbiAgZXZlbnRzOiBFdmVudERlZmluaXRpb25bXSxcbik6IENvbnNlY3V0aXZlRXZlbnRbXVtdIHtcbiAgcmV0dXJuIGF2YWlsYWJpbGl0aWVzLm1hcCgoYmxvY2spID0+IHtcbiAgICByZXR1cm4gYmxvY2subWFwKChzdWJldmVudCkgPT4ge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgLi4uc3ViZXZlbnQsXG4gICAgICAgIC4uLmV2ZW50cy5maW5kKFxuICAgICAgICAgIChldmVudGRlZikgPT5cbiAgICAgICAgICAgIGV2ZW50ZGVmLnBhcnRpY2lwYW50RW1haWxzLmxlbmd0aCA9PT0gc3ViZXZlbnQuZW1haWxzLmxlbmd0aCAmJlxuICAgICAgICAgICAgZXZlbnRkZWYucGFydGljaXBhbnRFbWFpbHMuZXZlcnkoKGVtYWlsKSA9PlxuICAgICAgICAgICAgICBzdWJldmVudC5lbWFpbHMuaW5jbHVkZXMoZW1haWwpLFxuICAgICAgICAgICAgKSxcbiAgICAgICAgKSxcbiAgICAgIH07XG4gICAgfSk7XG4gIH0pIGFzIGFueVtdW107IC8vIFRPRE86IEhvdyB0byBiZXN0IGNvZXJjZSBQcmVEYXRlZFRpbWVTbG90W11bXSB0byBDb25zZWN1dGl2ZUV2ZW50W11bXT8gc3ByZWFkLWNvbWJpbmVkIHJldHVybiBoYW5kbGVzIGl0LlxufVxuXG4vLyBXZSBkb24ndCB3YW50IHRvIG92ZXJidXJkZW4gb3VyIHVzZXJzIHdpdGggdG9vIG11Y2ggc3dlZXQgaG9ycmlibGUgZnJlZWRvbSBvZiBjaG9pY2U7XG4vLyB0aGUgL2NhbGVuZGFycy9hdmFpbGFiaWxpdHkvY29uc2VjdXRpdmUgZW5kcG9pbnQgcmV0dXJucyBvcmRlciBwZXJtdXRhdGlvbnMgd2l0aCBzYW1lIHRpbWUgc2xvdHM7XG4vLyBDdWxsIHRoZW0gZG93biB0byBqdXN0IHRoZSBmaXJzdCB0aGF0IGV4aXN0cyBwZXIgdGltZXNsb3QuXG5mdW5jdGlvbiByZW1vdmVTaW11bHRhbmVvdXNBdmFpbGFiaWxpdHlPcHRpb25zKFxuICBhdmFpbGFiaWxpdGllczogQ29uc2VjdXRpdmVFdmVudFtdW10sXG4pIHtcbiAgY29uc3QgYmxvY2tTZXQgPSBuZXcgU2V0KCk7XG4gIHJldHVybiBhdmFpbGFiaWxpdGllcy5maWx0ZXIoKGJsb2NrKSA9PiB7XG4gICAgY29uc3QgYmxvY2tTdHJpbmcgPSBgJHtibG9ja1swXS5zdGFydF90aW1lfV8ke1xuICAgICAgYmxvY2tbYmxvY2subGVuZ3RoIC0gMV0uZW5kX3RpbWVcbiAgICB9YDtcbiAgICBpZiAoYmxvY2tTZXQuaGFzKGJsb2NrU3RyaW5nKSkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH0gZWxzZSB7XG4gICAgICBibG9ja1NldC5hZGQoYmxvY2tTdHJpbmcpO1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICB9KTtcbn1cbiIsImltcG9ydCB7IFdyaXRhYmxlLCB3cml0YWJsZSB9IGZyb20gXCJzdmVsdGUvc3RvcmVcIjtcbmltcG9ydCB7IGZldGNoQXZhaWxhYmlsaXR5IH0gZnJvbSBcIi4uL2Nvbm5lY3Rpb25zL2F2YWlsYWJpbGl0eVwiO1xuaW1wb3J0IHR5cGUge1xuICBBdmFpbGFiaWxpdHlRdWVyeSxcbiAgQXZhaWxhYmlsaXR5UmVzcG9uc2UsXG59IGZyb20gXCJAY29tbW9ucy90eXBlcy9BdmFpbGFiaWxpdHlcIjtcblxudHlwZSBBdmFpbGFiaWxpdHlTdG9yZSA9IFJlY29yZDxzdHJpbmcsIFByb21pc2U8QXZhaWxhYmlsaXR5UmVzcG9uc2U+PjtcblxuZnVuY3Rpb24gaW5pdGlhbGl6ZSgpOiBXcml0YWJsZTxBdmFpbGFiaWxpdHlTdG9yZT4ge1xuICBjb25zdCBnZXQgPSAoXG4gICAgdGFyZ2V0OiBBdmFpbGFiaWxpdHlTdG9yZSxcbiAgICBrZXk6IHN0cmluZyxcbiAgKTogUHJvbWlzZTxBdmFpbGFiaWxpdHlSZXNwb25zZT4gfCB2b2lkID0+IHtcbiAgICBjb25zdCBhY2Nlc3NvcjogQXZhaWxhYmlsaXR5UXVlcnkgPSBKU09OLnBhcnNlKGtleSk7XG4gICAgLy8gQXZvaWQgc2F2aW5nIGZvcmNlUmVsb2FkIHByb3BlcnR5IGFzIHBhcnQgb2Ygc3RvcmUga2V5XG4gICAgY29uc3QgYWNjZXNzb3JDb3B5ID0geyAuLi5hY2Nlc3NvciB9O1xuICAgIGRlbGV0ZSBhY2Nlc3NvckNvcHkuZm9yY2VSZWxvYWQ7XG4gICAga2V5ID0gSlNPTi5zdHJpbmdpZnkoYWNjZXNzb3JDb3B5KTtcblxuICAgIGlmIChcbiAgICAgICFhY2Nlc3Nvci5jb21wb25lbnRfaWQgfHxcbiAgICAgICFhY2Nlc3Nvcj8uYm9keT8uc3RhcnRfdGltZSB8fFxuICAgICAgIWFjY2Vzc29yPy5ib2R5Py5lbmRfdGltZVxuICAgICkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmICghdGFyZ2V0W2tleV0gfHwgYWNjZXNzb3IuZm9yY2VSZWxvYWQpIHtcbiAgICAgIGNvbnN0IGZldGNoUHJvbWlzZSA9IGZldGNoQXZhaWxhYmlsaXR5KGFjY2Vzc29yKTtcbiAgICAgIHN0b3JlLnVwZGF0ZSgoc3RvcmUpID0+IHtcbiAgICAgICAgc3RvcmVba2V5XSA9IGZldGNoUHJvbWlzZTtcbiAgICAgICAgcmV0dXJuIHN0b3JlO1xuICAgICAgfSk7XG4gICAgICB0YXJnZXRba2V5XSA9IGZldGNoUHJvbWlzZTtcbiAgICB9XG4gICAgcmV0dXJuIHRhcmdldFtrZXldO1xuICB9O1xuICBjb25zdCBzdG9yZSA9IHdyaXRhYmxlKG5ldyBQcm94eTxBdmFpbGFiaWxpdHlTdG9yZT4oe30sIHsgZ2V0IH0pKTtcbiAgcmV0dXJuIHN0b3JlO1xufVxuXG5leHBvcnQgY29uc3QgQXZhaWxhYmlsaXR5U3RvcmUgPSBpbml0aWFsaXplKCk7XG4iLCJpbXBvcnQgeyBXcml0YWJsZSwgd3JpdGFibGUgfSBmcm9tIFwic3ZlbHRlL3N0b3JlXCI7XG5pbXBvcnQgeyBmZXRjaENvbnNlY3V0aXZlQXZhaWxhYmlsaXR5IH0gZnJvbSBcIi4uL2Nvbm5lY3Rpb25zL2F2YWlsYWJpbGl0eVwiO1xuaW1wb3J0IHR5cGUgeyBDb25zZWN1dGl2ZUF2YWlsYWJpbGl0eVF1ZXJ5IH0gZnJvbSBcIkBjb21tb25zL3R5cGVzL0F2YWlsYWJpbGl0eVwiO1xuaW1wb3J0IHR5cGUgeyBDb25zZWN1dGl2ZUV2ZW50IH0gZnJvbSBcIkBjb21tb25zL3R5cGVzL0Jvb2tpbmdcIjtcblxudHlwZSBDb25zZWN1dGl2ZUF2YWlsYWJpbGl0eVN0b3JlID0gUmVjb3JkPFxuICBzdHJpbmcsXG4gIFByb21pc2U8Q29uc2VjdXRpdmVFdmVudFtdW10+XG4+O1xuXG5mdW5jdGlvbiBpbml0aWFsaXplKCk6IFdyaXRhYmxlPENvbnNlY3V0aXZlQXZhaWxhYmlsaXR5U3RvcmU+IHtcbiAgY29uc3QgZ2V0ID0gKFxuICAgIHRhcmdldDogQ29uc2VjdXRpdmVBdmFpbGFiaWxpdHlTdG9yZSxcbiAgICBrZXk6IHN0cmluZyxcbiAgKTogUHJvbWlzZTxDb25zZWN1dGl2ZUV2ZW50W11bXT4gfCB2b2lkID0+IHtcbiAgICBjb25zdCBhY2Nlc3NvcjogQ29uc2VjdXRpdmVBdmFpbGFiaWxpdHlRdWVyeSA9IEpTT04ucGFyc2Uoa2V5KTtcblxuICAgIGlmIChcbiAgICAgICFhY2Nlc3Nvci5jb21wb25lbnRfaWQgfHxcbiAgICAgICFhY2Nlc3Nvcj8uYm9keT8uc3RhcnRfdGltZSB8fFxuICAgICAgIWFjY2Vzc29yPy5ib2R5Py5lbmRfdGltZVxuICAgICkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmICghdGFyZ2V0W2tleV0pIHtcbiAgICAgIGNvbnN0IGZldGNoUHJvbWlzZSA9IGZldGNoQ29uc2VjdXRpdmVBdmFpbGFiaWxpdHkoYWNjZXNzb3IpO1xuICAgICAgc3RvcmUudXBkYXRlKChzdG9yZSkgPT4ge1xuICAgICAgICBzdG9yZVtrZXldID0gZmV0Y2hQcm9taXNlO1xuICAgICAgICByZXR1cm4gc3RvcmU7XG4gICAgICB9KTtcbiAgICAgIHRhcmdldFtrZXldID0gZmV0Y2hQcm9taXNlO1xuICAgIH1cbiAgICByZXR1cm4gdGFyZ2V0W2tleV07XG4gIH07XG4gIGNvbnN0IHN0b3JlID0gd3JpdGFibGUobmV3IFByb3h5PENvbnNlY3V0aXZlQXZhaWxhYmlsaXR5U3RvcmU+KHt9LCB7IGdldCB9KSk7XG4gIHJldHVybiBzdG9yZTtcbn1cblxuZXhwb3J0IGNvbnN0IENvbnNlY3V0aXZlQXZhaWxhYmlsaXR5U3RvcmUgPSBpbml0aWFsaXplKCk7XG4iLCJpbXBvcnQgeyB3cml0YWJsZSB9IGZyb20gXCJzdmVsdGUvc3RvcmVcIjtcbmltcG9ydCB7IGZldGNoQ2FsZW5kYXJzIH0gZnJvbSBcIi4uL2Nvbm5lY3Rpb25zL2V2ZW50c1wiO1xuaW1wb3J0IHR5cGUgeyBDYWxlbmRhclF1ZXJ5LCBDYWxlbmRhciB9IGZyb20gXCJAY29tbW9ucy90eXBlcy9FdmVudHNcIjtcblxuZnVuY3Rpb24gaW5pdGlhbGl6ZUNhbGVuZGFycygpIHtcbiAgY29uc3QgeyBzdWJzY3JpYmUsIHVwZGF0ZSwgc2V0IH0gPSB3cml0YWJsZTxcbiAgICBSZWNvcmQ8c3RyaW5nLCBQcm9taXNlPENhbGVuZGFyW10+PlxuICA+KHt9KTtcbiAgbGV0IGNhbGVuZGFyTWFwOiBSZWNvcmQ8c3RyaW5nLCBQcm9taXNlPENhbGVuZGFyW10+PiA9IHt9O1xuXG4gIHJldHVybiB7XG4gICAgc3Vic2NyaWJlLFxuICAgIGdldENhbGVuZGFyczogYXN5bmMgKHF1ZXJ5OiBDYWxlbmRhclF1ZXJ5KSA9PiB7XG4gICAgICBjb25zdCBxdWVyeUtleSA9IEpTT04uc3RyaW5naWZ5KHF1ZXJ5KTtcbiAgICAgIGlmIChcbiAgICAgICAgIWNhbGVuZGFyTWFwW3F1ZXJ5S2V5XSAmJlxuICAgICAgICAocXVlcnkuY29tcG9uZW50X2lkIHx8IHF1ZXJ5LmFjY2Vzc190b2tlbilcbiAgICAgICkge1xuICAgICAgICBjYWxlbmRhck1hcFtxdWVyeUtleV0gPSBmZXRjaENhbGVuZGFycyhxdWVyeSk7XG4gICAgICAgIHVwZGF0ZSgoY2FsZW5kYXJzKSA9PiB7XG4gICAgICAgICAgY2FsZW5kYXJzW3F1ZXJ5S2V5XSA9IGNhbGVuZGFyTWFwW3F1ZXJ5S2V5XTtcbiAgICAgICAgICByZXR1cm4geyAuLi5jYWxlbmRhcnMgfTtcbiAgICAgICAgfSk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBhd2FpdCBjYWxlbmRhck1hcFtxdWVyeUtleV07XG4gICAgfSxcbiAgICByZXNldDogKCkgPT4ge1xuICAgICAgY2FsZW5kYXJNYXAgPSB7fTtcbiAgICAgIHNldCh7fSk7XG4gICAgfSxcbiAgfTtcbn1cblxuZXhwb3J0IGNvbnN0IENhbGVuZGFyU3RvcmUgPSBpbml0aWFsaXplQ2FsZW5kYXJzKCk7XG4iLCJpbXBvcnQgeyB3cml0YWJsZSB9IGZyb20gXCJzdmVsdGUvc3RvcmVcIjtcbmltcG9ydCB7IGNyZWF0ZUV2ZW50LCBmZXRjaEV2ZW50cyB9IGZyb20gXCIuLi9jb25uZWN0aW9ucy9ldmVudHNcIjtcbmltcG9ydCB0eXBlIHsgRXZlbnRRdWVyeSwgRXZlbnQgfSBmcm9tIFwiQGNvbW1vbnMvdHlwZXMvRXZlbnRzXCI7XG5cbmZ1bmN0aW9uIGluaXRpYWxpemVFdmVudHMoKSB7XG4gIGNvbnN0IHsgc3Vic2NyaWJlLCB1cGRhdGUsIHNldCB9ID0gd3JpdGFibGU8UmVjb3JkPHN0cmluZywgUHJvbWlzZTxFdmVudFtdPj4+KFxuICAgIHt9LFxuICApO1xuICBsZXQgZXZlbnRzTWFwOiBSZWNvcmQ8c3RyaW5nLCBQcm9taXNlPEV2ZW50W10+PiA9IHt9O1xuICBjb25zdCBsb2FkaW5nRXZlbnRzID0gd3JpdGFibGUodHJ1ZSk7XG5cbiAgcmV0dXJuIHtcbiAgICBsb2FkaW5nRXZlbnRzLFxuICAgIHN1YnNjcmliZSxcbiAgICBnZXRFdmVudHM6IGFzeW5jIChxdWVyeTogRXZlbnRRdWVyeSkgPT4ge1xuICAgICAgaWYgKEFycmF5LmlzQXJyYXkocXVlcnkuY2FsZW5kYXJJRHMpICYmIHF1ZXJ5LmNhbGVuZGFySURzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgbG9hZGluZ0V2ZW50cy5zZXQodHJ1ZSk7XG5cbiAgICAgICAgY29uc3QgcXVlcnlLZXkgPSBKU09OLnN0cmluZ2lmeShxdWVyeSk7XG4gICAgICAgIGlmIChcbiAgICAgICAgICAhZXZlbnRzTWFwW3F1ZXJ5S2V5XSAmJlxuICAgICAgICAgIChxdWVyeS5jb21wb25lbnRfaWQgfHwgcXVlcnkuYWNjZXNzX3Rva2VuKVxuICAgICAgICApIHtcbiAgICAgICAgICBldmVudHNNYXBbcXVlcnlLZXldID0gZmV0Y2hFdmVudHMocXVlcnkpO1xuXG4gICAgICAgICAgdXBkYXRlKChldmVudHMpID0+IHtcbiAgICAgICAgICAgIGV2ZW50c1txdWVyeUtleV0gPSBldmVudHNNYXBbcXVlcnlLZXldO1xuICAgICAgICAgICAgcmV0dXJuIHsgLi4uZXZlbnRzIH07XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBldmVudHMgPSBhd2FpdCBldmVudHNNYXBbcXVlcnlLZXldO1xuXG4gICAgICAgIGxvYWRpbmdFdmVudHMuc2V0KGZhbHNlKTtcblxuICAgICAgICByZXR1cm4gZXZlbnRzO1xuICAgICAgfVxuICAgIH0sXG4gICAgY3JlYXRlRXZlbnQ6IGFzeW5jIChldmVudDogRXZlbnQsIHF1ZXJ5OiBFdmVudFF1ZXJ5KSA9PiB7XG4gICAgICBjb25zdCBxdWVyeUtleSA9IEpTT04uc3RyaW5naWZ5KHF1ZXJ5KTtcbiAgICAgIGNvbnN0IF9ldmVudCA9IGF3YWl0IGV2ZW50c01hcFtxdWVyeUtleV07XG4gICAgICBpZiAoX2V2ZW50KSB7XG4gICAgICAgIGV2ZW50c01hcFtxdWVyeUtleV0gPSBQcm9taXNlLmFsbChbXG4gICAgICAgICAgZXZlbnRzTWFwW3F1ZXJ5S2V5XSxcbiAgICAgICAgICBjcmVhdGVFdmVudChldmVudCwgcXVlcnkpLFxuICAgICAgICBdKS50aGVuKChldmVudHMpID0+IHtcbiAgICAgICAgICByZXR1cm4gZXZlbnRzLmZsYXQoKTtcbiAgICAgICAgfSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBldmVudHNNYXBbcXVlcnlLZXldID0gY3JlYXRlRXZlbnQoZXZlbnQsIHF1ZXJ5KS50aGVuKChldmVudCkgPT4ge1xuICAgICAgICAgIHJldHVybiBbZXZlbnRdO1xuICAgICAgICB9KTtcbiAgICAgIH1cblxuICAgICAgdXBkYXRlKChldmVudHMpID0+IHtcbiAgICAgICAgZXZlbnRzW3F1ZXJ5S2V5XSA9IGV2ZW50c01hcFtxdWVyeUtleV07XG4gICAgICAgIHJldHVybiB7IC4uLmV2ZW50cyB9O1xuICAgICAgfSk7XG4gICAgfSxcbiAgICByZXNldDogKCkgPT4ge1xuICAgICAgZXZlbnRzTWFwID0ge307XG4gICAgICBzZXQoe30pO1xuICAgIH0sXG4gIH07XG59XG5cbmV4cG9ydCBjb25zdCBFdmVudFN0b3JlID0gaW5pdGlhbGl6ZUV2ZW50cygpO1xuIiwiaW1wb3J0IHsgZGVyaXZlZCwgUmVhZGFibGUsIHdyaXRhYmxlIH0gZnJvbSBcInN2ZWx0ZS9zdG9yZVwiO1xuaW1wb3J0IHtcbiAgZmV0Y2hUaHJlYWRzLFxuICBmZXRjaFNlYXJjaFJlc3VsdFRocmVhZHMsXG4gIHVwZGF0ZVRocmVhZCxcbiAgZmV0Y2hUaHJlYWRDb3VudCxcbn0gZnJvbSBcIi4uL2Nvbm5lY3Rpb25zL3RocmVhZHNcIjtcbmltcG9ydCB0eXBlIHtcbiAgVGhyZWFkLFxuICBNYWlsYm94UXVlcnksXG4gIENvbnZlcnNhdGlvblF1ZXJ5LFxuICBNZXNzYWdlLFxuICBDb252ZXJzYXRpb24sXG59IGZyb20gXCJAY29tbW9ucy90eXBlcy9OeWxhc1wiO1xuaW1wb3J0IHsgc2lsZW5jZSB9IGZyb20gXCJAY29tbW9uc1wiO1xuXG5pbnRlcmZhY2UgUGFnaW5hdGVkVGhyZWFkcyB7XG4gIGlzTG9hZGVkOiBib29sZWFuO1xuICB0aHJlYWRzOiBUaHJlYWRbXTtcbn1cblxuYXN5bmMgZnVuY3Rpb24gaW5pdGlhbGl6ZVBhZ2luYXRlZFRocmVhZHModG90YWxQYWdlczogbnVtYmVyKSB7XG4gIGNvbnN0IHBhZ2luYXRlZFRocmVhZHMgPSBbXTtcblxuICBmb3IgKGxldCBpID0gMDsgaSA8IHRvdGFsUGFnZXM7IGkrKykge1xuICAgIHBhZ2luYXRlZFRocmVhZHMucHVzaCh7XG4gICAgICBpc0xvYWRlZDogZmFsc2UsXG4gICAgICB0aHJlYWRzOiA8VGhyZWFkW10+W10sXG4gICAgfSk7XG4gIH1cbiAgcmV0dXJuIHBhZ2luYXRlZFRocmVhZHM7XG59XG5cbmZ1bmN0aW9uIGluaXRpYWxpemVUaHJlYWRzKCkge1xuICBjb25zdCB7IHN1YnNjcmliZSwgc2V0LCB1cGRhdGUgfSA9IHdyaXRhYmxlPFxuICAgIFJlY29yZDxzdHJpbmcsIFBhZ2luYXRlZFRocmVhZHNbXT5cbiAgPih7fSk7XG4gIGxldCB0aHJlYWRzTWFwOiBSZWNvcmQ8c3RyaW5nLCBQYWdpbmF0ZWRUaHJlYWRzW10+ID0ge307XG4gIGxldCB0b3RhbEl0ZW1zOiBudW1iZXI7XG5cbiAgcmV0dXJuIHtcbiAgICBzdWJzY3JpYmUsXG4gICAgc2V0LFxuICAgIGdldFRocmVhZHM6IGFzeW5jIChcbiAgICAgIHF1ZXJ5OiBNYWlsYm94UXVlcnksXG4gICAgICBjdXJyZW50UGFnZTogbnVtYmVyLFxuICAgICAgcGFnZVNpemU6IG51bWJlcixcbiAgICAgIGZvcmNlUmVmcmVzaCA9IGZhbHNlLFxuICAgICkgPT4ge1xuICAgICAgY29uc3QgcXVlcnlLZXkgPSBKU09OLnN0cmluZ2lmeShxdWVyeSk7XG5cbiAgICAgIGlmICghcXVlcnkuY29tcG9uZW50X2lkICYmICFxdWVyeS5hY2Nlc3NfdG9rZW4pIHtcbiAgICAgICAgLy8gVGhpcyBzaG91bGQgYWxlcnQgdGhlIHVzZXJcbiAgICAgICAgcmV0dXJuIFtdO1xuICAgICAgfVxuXG4gICAgICBpZiAodG90YWxJdGVtcyA9PT0gdW5kZWZpbmVkIHx8IGZvcmNlUmVmcmVzaCkge1xuICAgICAgICAvLyBUT0RPOiB0aGlzIGNhbiBjb3VudCBwYXNzZWQtaW4gSURzXG4gICAgICAgIGNvbnN0IHRocmVhZENvdW50ID0gcXVlcnkudGhyZWFkX2lkc1xuICAgICAgICAgID8gcXVlcnkudGhyZWFkX2lkcy5sZW5ndGhcbiAgICAgICAgICA6IGF3YWl0IGZldGNoVGhyZWFkQ291bnQocXVlcnkpLmNhdGNoKHNpbGVuY2UpO1xuXG4gICAgICAgIGlmICh0aHJlYWRDb3VudCkge1xuICAgICAgICAgIHRvdGFsSXRlbXMgPSB0aHJlYWRDb3VudDtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBpZiAoIUFycmF5LmlzQXJyYXkodGhyZWFkc01hcFtxdWVyeUtleV0pIHx8IGZvcmNlUmVmcmVzaCkge1xuICAgICAgICBjb25zdCB0b3RhbFBhZ2VzID0gTWF0aC5jZWlsKHRvdGFsSXRlbXMgLyBwYWdlU2l6ZSk7XG4gICAgICAgIHRocmVhZHNNYXBbcXVlcnlLZXldID0gYXdhaXQgaW5pdGlhbGl6ZVBhZ2luYXRlZFRocmVhZHModG90YWxQYWdlcyk7XG4gICAgICB9XG5cbiAgICAgIGlmICh0eXBlb2YgdGhyZWFkc01hcFtxdWVyeUtleV1bY3VycmVudFBhZ2VdID09PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICAgIC8vIFNob3VsZG4ndCB0aGlzIGJlIGFuIGludGVybmFsIGVycm9yP1xuICAgICAgICByZXR1cm4gW107XG4gICAgICB9IGVsc2UgaWYgKCF0aHJlYWRzTWFwW3F1ZXJ5S2V5XVtjdXJyZW50UGFnZV0uaXNMb2FkZWQpIHtcbiAgICAgICAgY29uc3QgdGhyZWFkcyA9IGF3YWl0IGZldGNoVGhyZWFkcyhcbiAgICAgICAgICBxdWVyeSxcbiAgICAgICAgICBwYWdlU2l6ZSxcbiAgICAgICAgICBjdXJyZW50UGFnZSAqIHBhZ2VTaXplLFxuICAgICAgICApLmNhdGNoKHNpbGVuY2UpO1xuXG4gICAgICAgIGlmICh0aHJlYWRzKSB7XG4gICAgICAgICAgdGhyZWFkc01hcFtxdWVyeUtleV1bY3VycmVudFBhZ2VdLnRocmVhZHMgPSB0aHJlYWRzO1xuICAgICAgICAgIHRocmVhZHNNYXBbcXVlcnlLZXldW2N1cnJlbnRQYWdlXS5pc0xvYWRlZCA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgdXBkYXRlKCh0aHJlYWRzKSA9PiB7XG4gICAgICAgIHRocmVhZHNbcXVlcnlLZXldID0gdGhyZWFkc01hcFtxdWVyeUtleV07XG4gICAgICAgIHJldHVybiB7IC4uLnRocmVhZHMgfTtcbiAgICAgIH0pO1xuXG4gICAgICByZXR1cm4gdGhyZWFkc01hcFtxdWVyeUtleV1bY3VycmVudFBhZ2VdLnRocmVhZHM7XG4gICAgfSxcbiAgICBnZXROdW1iZXJPZkl0ZW1zOiBhc3luYyAocXVlcnk6IE1haWxib3hRdWVyeSkgPT4ge1xuICAgICAgaWYgKCFxdWVyeS5jb21wb25lbnRfaWQgJiYgIXF1ZXJ5LmFjY2Vzc190b2tlbikge1xuICAgICAgICByZXR1cm4gMDtcbiAgICAgIH1cblxuICAgICAgaWYgKHR5cGVvZiB0b3RhbEl0ZW1zID09PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICAgIGNvbnN0IHRocmVhZENvdW50ID0gYXdhaXQgZmV0Y2hUaHJlYWRDb3VudChxdWVyeSkuY2F0Y2goc2lsZW5jZSk7XG5cbiAgICAgICAgaWYgKHRocmVhZENvdW50KSB7XG4gICAgICAgICAgdG90YWxJdGVtcyA9IHRocmVhZENvdW50O1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gdG90YWxJdGVtcztcbiAgICB9LFxuICAgIC8vIFRPRE8gLSBVc2UgcmVhbCBwYWdpbmF0aW9uIHdoZW4gc2VhcmNoIGVuZHBvaW50IHN1cHBvcnRzIGl0XG4gICAgZ2V0VGhyZWFkc1dpdGhTZWFyY2hLZXl3b3JkOiBhc3luYyAoXG4gICAgICBxdWVyeTogTWFpbGJveFF1ZXJ5LFxuICAgICAgZm9yY2VSZWZyZXNoID0gZmFsc2UsXG4gICAgKSA9PiB7XG4gICAgICBpZiAoIXF1ZXJ5LmNvbXBvbmVudF9pZCAmJiAhcXVlcnkuYWNjZXNzX3Rva2VuKSB7XG4gICAgICAgIHJldHVybiBbXTtcbiAgICAgIH1cbiAgICAgIGNvbnN0IHF1ZXJ5S2V5ID0gSlNPTi5zdHJpbmdpZnkocXVlcnkpO1xuXG4gICAgICBpZiAoIUFycmF5LmlzQXJyYXkodGhyZWFkc01hcFtxdWVyeUtleV0pIHx8IGZvcmNlUmVmcmVzaCkge1xuICAgICAgICB0aHJlYWRzTWFwW3F1ZXJ5S2V5XSA9IGF3YWl0IGluaXRpYWxpemVQYWdpbmF0ZWRUaHJlYWRzKDEpO1xuICAgICAgfVxuXG4gICAgICBpZiAoIXRocmVhZHNNYXBbcXVlcnlLZXldWzBdLmlzTG9hZGVkIHx8IGZvcmNlUmVmcmVzaCkge1xuICAgICAgICBjb25zdCBzZWFyY2hSZXN1bHRUaHJlYWRzID0gYXdhaXQgZmV0Y2hTZWFyY2hSZXN1bHRUaHJlYWRzKHF1ZXJ5KS5jYXRjaChcbiAgICAgICAgICBzaWxlbmNlLFxuICAgICAgICApO1xuXG4gICAgICAgIGlmIChzZWFyY2hSZXN1bHRUaHJlYWRzKSB7XG4gICAgICAgICAgdGhyZWFkc01hcFtxdWVyeUtleV1bMF0udGhyZWFkcyA9IHNlYXJjaFJlc3VsdFRocmVhZHM7XG4gICAgICAgICAgdGhyZWFkc01hcFtxdWVyeUtleV1bMF0uaXNMb2FkZWQgPSB0cnVlO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICB1cGRhdGUoKHRocmVhZHMpID0+IHtcbiAgICAgICAgdGhyZWFkc1txdWVyeUtleV0gPSB0aHJlYWRzTWFwW3F1ZXJ5S2V5XTtcbiAgICAgICAgcmV0dXJuIHsgLi4udGhyZWFkcyB9O1xuICAgICAgfSk7XG4gICAgICByZXR1cm4gdGhyZWFkc01hcFtxdWVyeUtleV1bMF0udGhyZWFkcztcbiAgICB9LFxuICAgIHVwZGF0ZVRocmVhZDogYXN5bmMgKFxuICAgICAgdGhyZWFkUXVlcnk6IENvbnZlcnNhdGlvblF1ZXJ5LFxuICAgICAgcXVlcnlLZXk6IHN0cmluZyxcbiAgICAgIHVwZGF0ZWRUaHJlYWQ6IENvbnZlcnNhdGlvbixcbiAgICAgIGN1cnJlbnRQYWdlOiBudW1iZXIsXG4gICAgICBwYWdlU2l6ZTogbnVtYmVyLFxuICAgICkgPT4ge1xuICAgICAgY29uc3QgdGhyZWFkID0gYXdhaXQgdXBkYXRlVGhyZWFkKHRocmVhZFF1ZXJ5LCB1cGRhdGVkVGhyZWFkKS5jYXRjaChcbiAgICAgICAgc2lsZW5jZSxcbiAgICAgICk7XG5cbiAgICAgIGlmICghdGhyZWFkc01hcFtxdWVyeUtleV1bY3VycmVudFBhZ2VdLmlzTG9hZGVkKSB7XG4gICAgICAgIC8vIHBvc3NpYmxlIGhhY2s6IHBhc3MgaW4gYXJyYXkgdG8gcXVlcnk/XG4gICAgICAgIGNvbnN0IHRocmVhZHMgPSBhd2FpdCBmZXRjaFRocmVhZHMoXG4gICAgICAgICAgSlNPTi5wYXJzZShxdWVyeUtleSksXG4gICAgICAgICAgcGFnZVNpemUsXG4gICAgICAgICAgY3VycmVudFBhZ2UgKiBwYWdlU2l6ZSxcbiAgICAgICAgKS5jYXRjaChzaWxlbmNlKTtcblxuICAgICAgICBpZiAodGhyZWFkcykge1xuICAgICAgICAgIHRocmVhZHNNYXBbcXVlcnlLZXldW2N1cnJlbnRQYWdlXS50aHJlYWRzID0gdGhyZWFkcztcbiAgICAgICAgICB0aHJlYWRzTWFwW3F1ZXJ5S2V5XVtjdXJyZW50UGFnZV0uaXNMb2FkZWQgPSB0cnVlO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHRocmVhZHNNYXBbcXVlcnlLZXldW2N1cnJlbnRQYWdlXS50aHJlYWRzID0gdGhyZWFkc01hcFtxdWVyeUtleV1bXG4gICAgICAgIGN1cnJlbnRQYWdlXG4gICAgICBdLnRocmVhZHMubWFwKChpbml0aWFsVGhyZWFkKSA9PiB7XG4gICAgICAgIGlmICh0aHJlYWQgJiYgaW5pdGlhbFRocmVhZC5pZCA9PT0gdGhyZWFkLmlkKSB7XG4gICAgICAgICAgaW5pdGlhbFRocmVhZCA9IE9iamVjdC5hc3NpZ24oaW5pdGlhbFRocmVhZCwgdGhyZWFkKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gaW5pdGlhbFRocmVhZDtcbiAgICAgIH0pO1xuICAgICAgdXBkYXRlKCh0aHJlYWRzKSA9PiB7XG4gICAgICAgIHRocmVhZHNbcXVlcnlLZXldID0gdGhyZWFkc01hcFtxdWVyeUtleV07XG4gICAgICAgIHJldHVybiB7IC4uLnRocmVhZHMgfTtcbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIHRocmVhZHNNYXBbcXVlcnlLZXldW2N1cnJlbnRQYWdlXS50aHJlYWRzO1xuICAgIH0sXG4gICAgdXBkYXRlVGhyZWFkU2VsZWN0aW9uOiAoXG4gICAgICBxdWVyeUtleTogc3RyaW5nLFxuICAgICAgY3VycmVudFBhZ2U6IG51bWJlcixcbiAgICAgIHRocmVhZElkPzogc3RyaW5nLFxuICAgICkgPT4ge1xuICAgICAgY29uc3QgdGhyZWFkcyA9IHRocmVhZHNNYXBbcXVlcnlLZXldW2N1cnJlbnRQYWdlXS50aHJlYWRzO1xuXG4gICAgICBpZiAoIXRocmVhZElkKSB7XG4gICAgICAgIGNvbnN0IHNlbGVjdGlvblN0YXRlID0gdGhyZWFkcy5zb21lKCh0aHJlYWQpID0+IHRocmVhZC5zZWxlY3RlZCk7XG4gICAgICAgIGZvciAoY29uc3QgdGhyZWFkIG9mIHRocmVhZHMpIHtcbiAgICAgICAgICB0aHJlYWQuc2VsZWN0ZWQgPSAhc2VsZWN0aW9uU3RhdGU7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnN0IHRocmVhZCA9IHRocmVhZHMuZmluZCgodGhyZWFkKSA9PiB0aHJlYWQuaWQgPT09IHRocmVhZElkKTtcbiAgICAgICAgaWYgKHRocmVhZCkge1xuICAgICAgICAgIHRocmVhZC5zZWxlY3RlZCA9ICF0aHJlYWQuc2VsZWN0ZWQ7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHVwZGF0ZSgodGhyZWFkcykgPT4ge1xuICAgICAgICB0aHJlYWRzW3F1ZXJ5S2V5XSA9IHRocmVhZHNNYXBbcXVlcnlLZXldO1xuICAgICAgICByZXR1cm4geyAuLi50aHJlYWRzIH07XG4gICAgICB9KTtcbiAgICAgIHJldHVybiB0aHJlYWRzTWFwW3F1ZXJ5S2V5XVtjdXJyZW50UGFnZV0udGhyZWFkcztcbiAgICB9LFxuXG4gICAgcmVzZXQ6ICgpID0+IHtcbiAgICAgIHRocmVhZHNNYXAgPSB7fTtcbiAgICAgIHNldCh7fSk7XG4gICAgfSxcblxuICAgIGh5ZHJhdGVNZXNzYWdlSW5UaHJlYWQ6IChcbiAgICAgIGluY29taW5nTWVzc2FnZTogTWVzc2FnZSxcbiAgICAgIHF1ZXJ5OiBNYWlsYm94UXVlcnksXG4gICAgICBjdXJyZW50UGFnZTogbnVtYmVyLFxuICAgICkgPT4ge1xuICAgICAgY29uc3QgcXVlcnlLZXkgPSBKU09OLnN0cmluZ2lmeShxdWVyeSk7XG5cbiAgICAgIGNvbnN0IGZvdW5kVGhyZWFkID0gdGhyZWFkc01hcFtxdWVyeUtleV1bY3VycmVudFBhZ2VdPy50aHJlYWRzPy5maW5kKFxuICAgICAgICAodGhyZWFkKSA9PiB0aHJlYWQuaWQgPT09IGluY29taW5nTWVzc2FnZS50aHJlYWRfaWQsXG4gICAgICApO1xuICAgICAgaWYgKGZvdW5kVGhyZWFkKSB7XG4gICAgICAgIGNvbnN0IGZvdW5kTWVzc2FnZSA9IGZvdW5kVGhyZWFkLm1lc3NhZ2VzPy5maW5kKFxuICAgICAgICAgIChtZXNzYWdlKSA9PiBtZXNzYWdlLmlkID09PSBpbmNvbWluZ01lc3NhZ2UuaWQsXG4gICAgICAgICk7XG4gICAgICAgIGlmIChmb3VuZE1lc3NhZ2UpIHtcbiAgICAgICAgICBmb3VuZE1lc3NhZ2UuYm9keSA9IGluY29taW5nTWVzc2FnZS5ib2R5O1xuICAgICAgICAgIHVwZGF0ZSgodGhyZWFkcykgPT4ge1xuICAgICAgICAgICAgaWYgKGluY29taW5nTWVzc2FnZS50aHJlYWRfaWQpIHtcbiAgICAgICAgICAgICAgbGV0IHRocmVhZFRvVXBkYXRlID0gdGhyZWFkc1txdWVyeUtleV1bY3VycmVudFBhZ2VdLnRocmVhZHMuZmluZChcbiAgICAgICAgICAgICAgICAodGhyZWFkKSA9PiB0aHJlYWQuaWQgPT09IGZvdW5kVGhyZWFkLmlkLFxuICAgICAgICAgICAgICApO1xuXG4gICAgICAgICAgICAgIGlmICh0aHJlYWRUb1VwZGF0ZSkge1xuICAgICAgICAgICAgICAgIHRocmVhZFRvVXBkYXRlID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShmb3VuZFRocmVhZCkpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4geyAuLi50aHJlYWRzIH07XG4gICAgICAgICAgfSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgLy8gVGhpcyBoYXBwZW5zIHdoZW4gc29tZW9uZSBzZW5kcyBhIG1lc3NhZ2UgdXNpbmcgY29tcG9zZXIgYW5kIHdlIHdhbnRcbiAgICAgICAgICAvLyB0byB1cGRhdGUgdGhlIGV4aXN0aW5nIHRocmVhZCB3aXRoIHRoZSBzZW50IG1lc3NhZ2VcbiAgICAgICAgICB1cGRhdGUoKHRocmVhZHMpID0+IHtcbiAgICAgICAgICAgIGlmIChpbmNvbWluZ01lc3NhZ2UudGhyZWFkX2lkKSB7XG4gICAgICAgICAgICAgIGxldCB0aHJlYWRUb1VwZGF0ZSA9IHRocmVhZHNbcXVlcnlLZXldW2N1cnJlbnRQYWdlXS50aHJlYWRzLmZpbmQoXG4gICAgICAgICAgICAgICAgKHRocmVhZCkgPT4gdGhyZWFkLmlkID09PSBmb3VuZFRocmVhZC5pZCxcbiAgICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgICBpZiAodGhyZWFkVG9VcGRhdGUpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBtZXNzYWdlcyA9IGZvdW5kVGhyZWFkLm1lc3NhZ2VzO1xuICAgICAgICAgICAgICAgIG1lc3NhZ2VzLnB1c2goaW5jb21pbmdNZXNzYWdlKTtcbiAgICAgICAgICAgICAgICBmb3VuZFRocmVhZC5tZXNzYWdlcyA9IG1lc3NhZ2VzO1xuICAgICAgICAgICAgICAgIGZvdW5kVGhyZWFkLnNuaXBwZXQgPSBpbmNvbWluZ01lc3NhZ2Uuc25pcHBldDtcbiAgICAgICAgICAgICAgICAvL1JlbW92ZSBkcmFmdCB3aXRoIHRoZSBzYW1lIGlkIGFzIHNlbnQgbWVzc2FnZVxuICAgICAgICAgICAgICAgIGZvdW5kVGhyZWFkLmRyYWZ0cyA9IGZvdW5kVGhyZWFkLmRyYWZ0cy5maWx0ZXIoXG4gICAgICAgICAgICAgICAgICAoZHJhZnQpID0+IGRyYWZ0LmlkICE9PSBpbmNvbWluZ01lc3NhZ2UuaWQsXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICB0aHJlYWRUb1VwZGF0ZSA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkoZm91bmRUaHJlYWQpKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHsgLi4udGhyZWFkcyB9O1xuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHJldHVybiB0aHJlYWRzTWFwW3F1ZXJ5S2V5XVtjdXJyZW50UGFnZV0udGhyZWFkcztcbiAgICB9LFxuXG4gICAgLy9VcGRhdGUgZHJhZnRzIGluIHRoZSB0aHJlYWRzIHN0b3JlXG4gICAgaHlkcmF0ZURyYWZ0SW5UaHJlYWQ6IChcbiAgICAgIGluY29taW5nRHJhZnQ6IE1lc3NhZ2UsXG4gICAgICBxdWVyeTogTWFpbGJveFF1ZXJ5LFxuICAgICAgY3VycmVudFBhZ2U6IG51bWJlcixcbiAgICApID0+IHtcbiAgICAgIGNvbnN0IHF1ZXJ5S2V5ID0gSlNPTi5zdHJpbmdpZnkocXVlcnkpO1xuXG4gICAgICBjb25zdCBmb3VuZFRocmVhZCA9IHRocmVhZHNNYXBbcXVlcnlLZXldW2N1cnJlbnRQYWdlXT8udGhyZWFkcz8uZmluZChcbiAgICAgICAgKHRocmVhZCkgPT4gdGhyZWFkLmlkID09PSBpbmNvbWluZ0RyYWZ0LnRocmVhZF9pZCxcbiAgICAgICk7XG4gICAgICBpZiAoZm91bmRUaHJlYWQpIHtcbiAgICAgICAgLy9VcGRhdGUgZXhpc3RpbmcgZHJhZnQgbWVzc2FnZSBpbiBzdG9yZVxuICAgICAgICBjb25zdCBmb3VuZERyYWZ0ID0gZm91bmRUaHJlYWQuZHJhZnRzPy5maW5kKFxuICAgICAgICAgIChkcmFmdCkgPT4gZHJhZnQuaWQgPT09IGluY29taW5nRHJhZnQuaWQsXG4gICAgICAgICk7XG5cbiAgICAgICAgaWYgKGluY29taW5nRHJhZnQudGhyZWFkX2lkKSB7XG4gICAgICAgICAgaWYgKGZvdW5kRHJhZnQpIHtcbiAgICAgICAgICAgIE9iamVjdC5hc3NpZ24oZm91bmREcmFmdCwgaW5jb21pbmdEcmFmdCk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNvbnN0IGRyYWZ0cyA9IGZvdW5kVGhyZWFkLmRyYWZ0cztcbiAgICAgICAgICAgIGRyYWZ0cy5wdXNoKGluY29taW5nRHJhZnQpO1xuICAgICAgICAgICAgZm91bmRUaHJlYWQuZHJhZnRzID0gZHJhZnRzO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIHVwZGF0ZSgodGhyZWFkcykgPT4ge1xuICAgICAgICAgICAgbGV0IHRocmVhZFRvVXBkYXRlID0gdGhyZWFkc1txdWVyeUtleV1bY3VycmVudFBhZ2VdLnRocmVhZHMuZmluZChcbiAgICAgICAgICAgICAgKHRocmVhZCkgPT4gdGhyZWFkLmlkID09PSBmb3VuZFRocmVhZC5pZCxcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICBpZiAodGhyZWFkVG9VcGRhdGUpIHtcbiAgICAgICAgICAgICAgdGhyZWFkVG9VcGRhdGUgPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KGZvdW5kVGhyZWFkKSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiB7IC4uLnRocmVhZHMgfTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIHRocmVhZHNNYXBbcXVlcnlLZXldW2N1cnJlbnRQYWdlXS50aHJlYWRzO1xuICAgIH0sXG4gIH07XG59XG5cbmV4cG9ydCBjb25zdCBNYWlsYm94U3RvcmUgPSBpbml0aWFsaXplVGhyZWFkcygpO1xuXG5leHBvcnQgY29uc3QgRW1haWxTdG9yZTogUmVhZGFibGU8UmVjb3JkPHN0cmluZywgVGhyZWFkW10+PiA9IGRlcml2ZWQoXG4gIE1haWxib3hTdG9yZSxcbiAgKCRNYWlsYm94U3RvcmUpID0+IHtcbiAgICBjb25zdCBlbWFpbFN0b3JlOiBSZWNvcmQ8c3RyaW5nLCBUaHJlYWRbXT4gPSB7fTtcbiAgICBPYmplY3QuZW50cmllcygkTWFpbGJveFN0b3JlKS5mb3JFYWNoKFxuICAgICAgKFtrZXksIHBhZ2luYXRlZFRocmVhZHNdKSA9PlxuICAgICAgICAoZW1haWxTdG9yZVtrZXldID0gcGFnaW5hdGVkVGhyZWFkc1xuICAgICAgICAgIC5tYXAoKHBhZ2luYXRlZFRocmVhZCkgPT4gcGFnaW5hdGVkVGhyZWFkLnRocmVhZHMpXG4gICAgICAgICAgLmZsYXQoKSksXG4gICAgKTtcbiAgICByZXR1cm4gZW1haWxTdG9yZTtcbiAgfSxcbik7XG4iLCJpbXBvcnQgeyBmZXRjaE1hbmlmZXN0IH0gZnJvbSBcIi4uL2Nvbm5lY3Rpb25zL21hbmlmZXN0XCI7XG5pbXBvcnQgeyBXcml0YWJsZSwgd3JpdGFibGUgfSBmcm9tIFwic3ZlbHRlL3N0b3JlXCI7XG5pbXBvcnQgdHlwZSB7IE1hbmlmZXN0IH0gZnJvbSBcIkBjb21tb25zL3R5cGVzL055bGFzXCI7XG5cbnR5cGUgTWFuaWZlc3RBY2Nlc3NvciA9IHtcbiAgY29tcG9uZW50X2lkOiBzdHJpbmc7XG4gIGFjY2Vzc190b2tlbj86IHN0cmluZztcbiAgZXh0ZXJuYWxfbWFuaWZlc3RfaWRzPzogW107XG59O1xudHlwZSBNYW5pZmVzdFN0b3JlID0gUmVjb3JkPHN0cmluZywgUHJvbWlzZTxNYW5pZmVzdD4+O1xuXG5mdW5jdGlvbiBpbml0aWFsaXplKCk6IFdyaXRhYmxlPE1hbmlmZXN0U3RvcmU+IHtcbiAgY29uc3QgZ2V0ID0gKFxuICAgIHRhcmdldDogTWFuaWZlc3RTdG9yZSxcbiAgICBrZXk6IHN0cmluZyxcbiAgKTogUHJvbWlzZTxNYW5pZmVzdD4gfCB2b2lkID0+IHtcbiAgICBjb25zdCBhY2Nlc3NvcjogTWFuaWZlc3RBY2Nlc3NvciA9IEpTT04ucGFyc2Uoa2V5KTtcblxuICAgIGlmICghYWNjZXNzb3IuY29tcG9uZW50X2lkKSByZXR1cm47XG5cbiAgICBpZiAoIXRhcmdldFtrZXldKSB7XG4gICAgICBjb25zdCBmZXRjaFByb21pc2UgPSBmZXRjaE1hbmlmZXN0KFxuICAgICAgICBhY2Nlc3Nvci5jb21wb25lbnRfaWQsXG4gICAgICAgIGFjY2Vzc29yLmFjY2Vzc190b2tlbixcbiAgICAgICk7XG4gICAgICBzdG9yZS51cGRhdGUoKHN0b3JlKSA9PiB7XG4gICAgICAgIHN0b3JlW2tleV0gPSBmZXRjaFByb21pc2U7XG4gICAgICAgIHJldHVybiBzdG9yZTtcbiAgICAgIH0pO1xuICAgICAgdGFyZ2V0W2tleV0gPSBmZXRjaFByb21pc2U7XG4gICAgfVxuICAgIHJldHVybiB0YXJnZXRba2V5XTtcbiAgfTtcbiAgY29uc3Qgc3RvcmUgPSB3cml0YWJsZShuZXcgUHJveHk8TWFuaWZlc3RTdG9yZT4oe30sIHsgZ2V0IH0pKTtcbiAgcmV0dXJuIHN0b3JlO1xufVxuXG5leHBvcnQgY29uc3QgTWFuaWZlc3RTdG9yZSA9IGluaXRpYWxpemUoKTtcbiIsImltcG9ydCB0eXBlIHsgRmlsZSwgTWFuaWZlc3QgfSBmcm9tIFwiQGNvbW1vbnMvdHlwZXMvTnlsYXNcIjtcblxuZXhwb3J0IGZ1bmN0aW9uIGdldEV2ZW50RGlzcGF0Y2hlcihjb21wb25lbnQ6IHtcbiAgZGlzcGF0Y2hFdmVudD86IChlOiBFdmVudCkgPT4gYm9vbGVhbjtcbn0pIHtcbiAgcmV0dXJuIChuYW1lOiBzdHJpbmcsIGRldGFpbDogdW5rbm93bik6IHZvaWQgPT4ge1xuICAgIGlmIChjb21wb25lbnQuZGlzcGF0Y2hFdmVudCkge1xuICAgICAgY29tcG9uZW50LmRpc3BhdGNoRXZlbnQoXG4gICAgICAgIG5ldyBDdXN0b21FdmVudChuYW1lLCB7XG4gICAgICAgICAgZGV0YWlsLFxuICAgICAgICAgIGNvbXBvc2VkOiB0cnVlLCAvLyBwcm9wYWdhdGUgYWNyb3NzIHRoZSBzaGFkb3cgRE9NXG4gICAgICAgIH0pLFxuICAgICAgKTtcbiAgICB9XG4gIH07XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBkZWJvdW5jZShcbiAgZm46IChhcmdzOiB1bmtub3duKSA9PiB1bmtub3duLFxuICB0aW1lOiBudW1iZXIsXG4pOiAoKSA9PiB2b2lkIHtcbiAgbGV0IHRpbWVvdXRJZDogUmV0dXJuVHlwZTx0eXBlb2Ygc2V0VGltZW91dD47XG4gIHJldHVybiAoKTogdm9pZCA9PiB7XG4gICAgaWYgKHRpbWVvdXRJZCkge1xuICAgICAgY2xlYXJUaW1lb3V0KHRpbWVvdXRJZCk7XG4gICAgfVxuXG4gICAgdGltZW91dElkID0gc2V0VGltZW91dChmbiwgdGltZSk7XG4gIH07XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBidWlsZEludGVybmFsUHJvcHM8VCBleHRlbmRzIFBhcnRpYWw8TWFuaWZlc3Q+PihcbiAgcHJvcGVydGllczogVCxcbiAgbWFuaWZlc3Q6IFQsXG4gIGRlZmF1bHRWYWx1ZU1hcDogVCxcbik6IFQge1xuICByZXR1cm4gbmV3IFByb3h5KHByb3BlcnRpZXMsIHtcbiAgICBnZXQ6ICh0YXJnZXQsIG5hbWU6IGtleW9mIE1hbmlmZXN0IHwgXCJ0b0pTT05cIiB8IFwidG9TdHJpbmdcIikgPT4ge1xuICAgICAgaWYgKG5hbWUgPT09IFwidG9TdHJpbmdcIiB8fCBuYW1lID09PSBcInRvSlNPTlwiKSB7XG4gICAgICAgIHJldHVybiAoKSA9PiBKU09OLnN0cmluZ2lmeSh0YXJnZXQpO1xuICAgICAgfVxuXG4gICAgICBpZiAoUmVmbGVjdC5nZXQodGFyZ2V0LCBuYW1lKSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHJldHVybiBnZXRQcm9wZXJ0eVZhbHVlKFxuICAgICAgICAgIFJlZmxlY3QuZ2V0KHRhcmdldCwgbmFtZSksXG4gICAgICAgICAgZGVmYXVsdFZhbHVlTWFwW25hbWVdLFxuICAgICAgICApO1xuICAgICAgfVxuXG4gICAgICBpZiAobWFuaWZlc3QgJiYgbmFtZSBpbiBtYW5pZmVzdCkge1xuICAgICAgICByZXR1cm4gZ2V0UHJvcGVydHlWYWx1ZShtYW5pZmVzdFtuYW1lXSwgZGVmYXVsdFZhbHVlTWFwW25hbWVdKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBkZWZhdWx0VmFsdWVNYXBbbmFtZV07XG4gICAgfSxcblxuICAgIG93bktleXM6ICh0YXJnZXQpID0+IHtcbiAgICAgIGNvbnN0IGtleXMgPSBuZXcgU2V0KFtcbiAgICAgICAgLi4uUmVmbGVjdC5vd25LZXlzKHRhcmdldCksXG4gICAgICAgIC4uLk9iamVjdC5rZXlzKG1hbmlmZXN0KSxcbiAgICAgICAgLi4uT2JqZWN0LmtleXMoZGVmYXVsdFZhbHVlTWFwKSxcbiAgICAgIF0pO1xuICAgICAgcmV0dXJuIEFycmF5LmZyb20oa2V5cyk7XG4gICAgfSxcblxuICAgIGdldE93blByb3BlcnR5RGVzY3JpcHRvcjogKHRhcmdldCwgcHJvcCkgPT4ge1xuICAgICAgbGV0IHByb3BEZXNjcmlwdG9yID0gUmVmbGVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodGFyZ2V0LCBwcm9wKTtcbiAgICAgIGlmICghcHJvcERlc2NyaXB0b3IpIHtcbiAgICAgICAgcHJvcERlc2NyaXB0b3IgPSAobWFuaWZlc3QgJiZcbiAgICAgICAgICBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG1hbmlmZXN0LCBwcm9wKSkgPz9cbiAgICAgICAgICAoZGVmYXVsdFZhbHVlTWFwICYmXG4gICAgICAgICAgICBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKGRlZmF1bHRWYWx1ZU1hcCwgcHJvcCkpID8/IHtcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICB9O1xuICAgICAgICBSZWZsZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgcHJvcCwgcHJvcERlc2NyaXB0b3IpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHByb3BEZXNjcmlwdG9yO1xuICAgIH0sXG4gIH0pO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0UHJvcGVydHlWYWx1ZTxUPihwcm9wVmFsdWU6IGFueSwgZGVmYXVsdFRvOiBUKTogVCB7XG4gIGlmIChwcm9wVmFsdWUpIHtcbiAgICBpZiAodHlwZW9mIGRlZmF1bHRUbyA9PT0gXCJib29sZWFuXCIpIHtcbiAgICAgIHJldHVybiBwYXJzZUJvb2xlYW4ocHJvcFZhbHVlKSBhcyBhbnk7XG4gICAgfVxuICAgIGlmICh0eXBlb2YgZGVmYXVsdFRvID09PSBcIm51bWJlclwiKSB7XG4gICAgICByZXR1cm4gTnVtYmVyKHByb3BWYWx1ZSkgYXMgYW55O1xuICAgIH1cbiAgICBpZiAoZGVmYXVsdFRvIGluc3RhbmNlb2YgRGF0ZSkge1xuICAgICAgcmV0dXJuIG5ldyBEYXRlKHByb3BWYWx1ZSkgYXMgYW55O1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiBwcm9wVmFsdWUgPT09IHVuZGVmaW5lZCA/IGRlZmF1bHRUbyA/PyBudWxsIDogcHJvcFZhbHVlO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gcGFyc2VCb29sZWFuKFxuICB2YWw6IHN0cmluZyB8IGJvb2xlYW4gfCB1bmRlZmluZWQgfCBudWxsLFxuKTogYm9vbGVhbiB7XG4gIHJldHVybiAoPGFueT5bdHJ1ZSwgXCJ0cnVlXCIsIFwiMVwiXSkuaW5jbHVkZXModmFsKTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gcGFyc2VTdHJpbmdUb0FycmF5KHBhcnNlU3RyOiBzdHJpbmcpOiBzdHJpbmdbXSB7XG4gIGlmICghcGFyc2VTdHIpIHtcbiAgICByZXR1cm4gW107XG4gIH1cblxuICBpZiAocGFyc2VTdHIuaW5jbHVkZXMoXCIsXCIpKSB7XG4gICAgcmV0dXJuIHBhcnNlU3RyLnNwbGl0KFwiLFwiKS5tYXAoKHM6IHN0cmluZykgPT4gcy50cmltKCkpO1xuICB9XG4gIGlmIChwYXJzZVN0ci5pbmNsdWRlcyhcIiBcIikpIHtcbiAgICByZXR1cm4gcGFyc2VTdHIuc3BsaXQoXCIgXCIpLm1hcCgoczogc3RyaW5nKSA9PiBzLnRyaW0oKSk7XG4gIH1cbiAgaWYgKHBhcnNlU3RyLmluY2x1ZGVzKFwiXFxuXCIpKSB7XG4gICAgcmV0dXJuIHBhcnNlU3RyLnNwbGl0KFwiXFxuXCIpLm1hcCgoczogc3RyaW5nKSA9PiBzLnRyaW0oKSk7XG4gIH1cblxuICByZXR1cm4gW3BhcnNlU3RyLnRyaW0oKV07XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBkb3dubG9hZEF0dGFjaGVkRmlsZShmaWxlRGF0YTogc3RyaW5nLCBmaWxlOiBGaWxlKTogdm9pZCB7XG4gIGNvbnN0IGJ1ZmZlciA9IFVpbnQ4QXJyYXkuZnJvbShhdG9iKGZpbGVEYXRhKSwgKGMpID0+IGMuY2hhckNvZGVBdCgwKSk7XG4gIGNvbnN0IGJsb2IgPSBuZXcgQmxvYihbYnVmZmVyXSwgeyB0eXBlOiBmaWxlLmNvbnRlbnRfdHlwZSB9KTtcbiAgY29uc3QgYmxvYkZpbGUgPSB3aW5kb3cuVVJMLmNyZWF0ZU9iamVjdFVSTChibG9iKTtcblxuICBjb25zdCBhID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImFcIik7XG4gIGEuaHJlZiA9IGJsb2JGaWxlO1xuICBhLmRvd25sb2FkID0gZmlsZS5maWxlbmFtZSA/PyBmaWxlLmlkO1xuICBhLnRhcmdldCA9IFwiX2JsYW5rXCI7XG4gIGEuY2xpY2soKTtcbiAgYS5yZW1vdmUoKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGFycmF5Q29udGFpbnNBcnJheShzdXBlcnNldDogYW55W10sIHN1YnNldDogYW55W10pOiBib29sZWFuIHtcbiAgcmV0dXJuIHN1YnNldC5ldmVyeSgodGFyZ2V0KSA9PiBzdXBlcnNldC5pbmNsdWRlcyh0YXJnZXQpKTtcbn1cbiIsIjxzdmVsdGU6b3B0aW9ucyB0YWc9XCJueWxhcy1lcnJvclwiIGltbXV0YWJsZT17dHJ1ZX0gLz5cblxuPHNjcmlwdCBsYW5nPVwidHNcIj5cbiAgaW1wb3J0IHsgRXJyb3JTdG9yZSB9IGZyb20gXCIuLi9zdG9yZS9lcnJvclwiO1xuICBpbXBvcnQgdHlwZSB7IE5FcnJvciB9IGZyb20gXCJAY29tbW9ucy90eXBlcy9OeWxhc1wiO1xuXG4gIGV4cG9ydCBsZXQgaWQ6IHN0cmluZzsgLy8gY29tcG9uZW50IGlkXG5cbiAgbGV0IGVycm9yOiBORXJyb3I7XG4gIGxldCBlcnJvck5hbWU6IHN0cmluZztcblxuICAkOiB7XG4gICAgZXJyb3IgPSAkRXJyb3JTdG9yZVtpZF0gPz8geyBuYW1lOiBcIlwiIH07XG4gICAgZXJyb3JOYW1lID0gZXJyb3IubmFtZSA/PyBlcnJvci5tZXNzYWdlPy5uYW1lID8/IFwiXCI7XG4gIH1cblxuICBjb25zdCBpc0RldkVudiA9XG4gICAgd2luZG93LmxvY2F0aW9uLmhyZWYuaW5jbHVkZXMoXCJsb2NhbGhvc3RcIikgfHxcbiAgICB3aW5kb3cubG9jYXRpb24uaHJlZi5pbmNsdWRlcyhcIjEyNy4wLjAuMVwiKTtcbjwvc2NyaXB0PlxuXG48c3R5bGU+XG4gIC5tZXNzYWdlLWNvbnRhaW5lciB7XG4gICAgYmFja2dyb3VuZDogI2ZmZjZmNjtcbiAgICBib3JkZXItcmFkaXVzOiA1cHg7XG4gICAgYm94LXNoYWRvdzogMCAwIDAgMXB4ICNhYTkyYTAgaW5zZXQsIDAgMCAwIDAgdHJhbnNwYXJlbnQ7XG4gICAgY29sb3I6ICM5ZjNhMzg7XG4gICAgZm9udC1zaXplOiAxLjI1cmVtO1xuICAgIHBhZGRpbmc6IDEwcHg7XG4gICAgbWFyZ2luOiAwIGF1dG87XG4gICAgdHJhbnNpdGlvbjogb3BhY2l0eSA1MDBtcyBlYXNlLCBjb2xvciA1MDBtcyBlYXNlLFxuICAgICAgYmFja2dyb3VuZC1jb2xvciA1MDBtcyBlYXNlLCBib3gtc2hhZG93IDUwMG1zIGVhc2UsXG4gICAgICAtd2Via2l0LWJveC1zaGFkb3cgNTAwbXMgZWFzZTtcbiAgfVxuXG4gIC5tZXNzYWdlLWNvbnRhaW5lciAqOmZvY3VzIHtcbiAgICBvdXRsaW5lOiA1cHggYXV0byBIaWdobGlnaHQ7XG4gICAgb3V0bGluZTogNXB4IGF1dG8gLXdlYmtpdC1mb2N1cy1yaW5nLWNvbG9yO1xuICB9XG5cbiAgLmRldGFpbHMge1xuICAgIGNvbG9yOiAjNDk0OTQ5O1xuICAgIGZvbnQtc2l6ZTogMC43NXJlbTtcbiAgICB3aWR0aDogMTAwJTtcbiAgfVxuPC9zdHlsZT5cblxueyNpZiBlcnJvck5hbWUgJiYgaXNEZXZFbnZ9XG4gIDxkaXYgY2xhc3M9XCJtZXNzYWdlLWNvbnRhaW5lclwiPlxuICAgIHsjaWYgZXJyb3JOYW1lID09PSBcIkhvc3REb21haW5Ob3RBbGxvd2VkRXJyb3JcIn1cbiAgICAgIDxoMz5cbiAgICAgICAgWW91IGFyZSB0cnlpbmcgdG8gYWNjZXNzIHRoaXMgY29tcG9uZW50IGZyb20mbmJzcDtcbiAgICAgICAgPGNvZGU+e3dpbmRvdy5sb2NhdGlvbi5ob3N0bmFtZX08L2NvZGU+LiBUaGUgY29tcG9uZW50J3Mgc2V0dGluZ3MgZG8gbm90XG4gICAgICAgIGFsbG93IGFjY2VzcyBmcm9tIHRoaXMgZG9tYWluLlxuICAgICAgPC9oMz5cbiAgICAgIDxoND5cbiAgICAgICAgVGhlIGxpc3Qgb2YgYWxsb3dlZCBkb21haW5zIGNhbiBiZSBtb2RpZmllZCBpbiB5b3VyJm5ic3A7XG4gICAgICAgIDxhIGhyZWY9XCJodHRwczovL2Rhc2hib2FyZC5ueWxhcy5jb21cIj5EYXNoYm9hcmQ8L2E+LlxuICAgICAgPC9oND5cbiAgICB7OmVsc2UgaWYgZXJyb3JOYW1lID09PSBcIkluY29tcGF0aWJsZVByb3BlcnRpZXNcIn1cbiAgICAgIDxoMz5Zb3VyIGNvbXBvbmVudCBwcm9wZXJ0aWVzIGRvIG5vdCB3b3JrIHdpdGggZWFjaCBvdGhlci48L2gzPlxuICAgIHsvaWZ9XG4gICAgPHNwYW4gY2xhc3M9XCJkZXRhaWxzXCI+RGVidWcgaW5mbzo8L3NwYW4+XG4gICAgPHRleHRhcmVhIGNsYXNzPVwiZGV0YWlsc1wiIHJlYWRvbmx5PlxuICAgICAge2Vycm9yTmFtZX06IHtpZH1cbiAgICAgIHtlcnJvci5tZXNzYWdlPy5tZXNzYWdlID8/IFwiXCJ9XG4gICAgPC90ZXh0YXJlYT5cbiAgPC9kaXY+XG57L2lmfVxuIiwiJ3VzZSBzdHJpY3QnO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xuXG5mdW5jdGlvbiBfZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7XG4gIGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHtcbiAgICB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldO1xuICAgIGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTtcbiAgICBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7XG4gICAgaWYgKFwidmFsdWVcIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7XG4gIH1cbn1cblxuZnVuY3Rpb24gX2NyZWF0ZUNsYXNzKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykge1xuICBpZiAocHJvdG9Qcm9wcykgX2RlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTtcbiAgaWYgKHN0YXRpY1Byb3BzKSBfZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpO1xuICByZXR1cm4gQ29uc3RydWN0b3I7XG59XG5cbmZ1bmN0aW9uIF9leHRlbmRzKCkge1xuICBfZXh0ZW5kcyA9IE9iamVjdC5hc3NpZ24gfHwgZnVuY3Rpb24gKHRhcmdldCkge1xuICAgIGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICB2YXIgc291cmNlID0gYXJndW1lbnRzW2ldO1xuXG4gICAgICBmb3IgKHZhciBrZXkgaW4gc291cmNlKSB7XG4gICAgICAgIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoc291cmNlLCBrZXkpKSB7XG4gICAgICAgICAgdGFyZ2V0W2tleV0gPSBzb3VyY2Vba2V5XTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiB0YXJnZXQ7XG4gIH07XG5cbiAgcmV0dXJuIF9leHRlbmRzLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG59XG5cbmZ1bmN0aW9uIF9pbmhlcml0c0xvb3NlKHN1YkNsYXNzLCBzdXBlckNsYXNzKSB7XG4gIHN1YkNsYXNzLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoc3VwZXJDbGFzcy5wcm90b3R5cGUpO1xuICBzdWJDbGFzcy5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBzdWJDbGFzcztcblxuICBfc2V0UHJvdG90eXBlT2Yoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpO1xufVxuXG5mdW5jdGlvbiBfZ2V0UHJvdG90eXBlT2Yobykge1xuICBfZ2V0UHJvdG90eXBlT2YgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgPyBPYmplY3QuZ2V0UHJvdG90eXBlT2YgOiBmdW5jdGlvbiBfZ2V0UHJvdG90eXBlT2Yobykge1xuICAgIHJldHVybiBvLl9fcHJvdG9fXyB8fCBPYmplY3QuZ2V0UHJvdG90eXBlT2Yobyk7XG4gIH07XG4gIHJldHVybiBfZ2V0UHJvdG90eXBlT2Yobyk7XG59XG5cbmZ1bmN0aW9uIF9zZXRQcm90b3R5cGVPZihvLCBwKSB7XG4gIF9zZXRQcm90b3R5cGVPZiA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fCBmdW5jdGlvbiBfc2V0UHJvdG90eXBlT2YobywgcCkge1xuICAgIG8uX19wcm90b19fID0gcDtcbiAgICByZXR1cm4gbztcbiAgfTtcblxuICByZXR1cm4gX3NldFByb3RvdHlwZU9mKG8sIHApO1xufVxuXG5mdW5jdGlvbiBfaXNOYXRpdmVSZWZsZWN0Q29uc3RydWN0KCkge1xuICBpZiAodHlwZW9mIFJlZmxlY3QgPT09IFwidW5kZWZpbmVkXCIgfHwgIVJlZmxlY3QuY29uc3RydWN0KSByZXR1cm4gZmFsc2U7XG4gIGlmIChSZWZsZWN0LmNvbnN0cnVjdC5zaGFtKSByZXR1cm4gZmFsc2U7XG4gIGlmICh0eXBlb2YgUHJveHkgPT09IFwiZnVuY3Rpb25cIikgcmV0dXJuIHRydWU7XG5cbiAgdHJ5IHtcbiAgICBCb29sZWFuLnByb3RvdHlwZS52YWx1ZU9mLmNhbGwoUmVmbGVjdC5jb25zdHJ1Y3QoQm9vbGVhbiwgW10sIGZ1bmN0aW9uICgpIHt9KSk7XG4gICAgcmV0dXJuIHRydWU7XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbn1cblxuZnVuY3Rpb24gX2NvbnN0cnVjdChQYXJlbnQsIGFyZ3MsIENsYXNzKSB7XG4gIGlmIChfaXNOYXRpdmVSZWZsZWN0Q29uc3RydWN0KCkpIHtcbiAgICBfY29uc3RydWN0ID0gUmVmbGVjdC5jb25zdHJ1Y3Q7XG4gIH0gZWxzZSB7XG4gICAgX2NvbnN0cnVjdCA9IGZ1bmN0aW9uIF9jb25zdHJ1Y3QoUGFyZW50LCBhcmdzLCBDbGFzcykge1xuICAgICAgdmFyIGEgPSBbbnVsbF07XG4gICAgICBhLnB1c2guYXBwbHkoYSwgYXJncyk7XG4gICAgICB2YXIgQ29uc3RydWN0b3IgPSBGdW5jdGlvbi5iaW5kLmFwcGx5KFBhcmVudCwgYSk7XG4gICAgICB2YXIgaW5zdGFuY2UgPSBuZXcgQ29uc3RydWN0b3IoKTtcbiAgICAgIGlmIChDbGFzcykgX3NldFByb3RvdHlwZU9mKGluc3RhbmNlLCBDbGFzcy5wcm90b3R5cGUpO1xuICAgICAgcmV0dXJuIGluc3RhbmNlO1xuICAgIH07XG4gIH1cblxuICByZXR1cm4gX2NvbnN0cnVjdC5hcHBseShudWxsLCBhcmd1bWVudHMpO1xufVxuXG5mdW5jdGlvbiBfaXNOYXRpdmVGdW5jdGlvbihmbikge1xuICByZXR1cm4gRnVuY3Rpb24udG9TdHJpbmcuY2FsbChmbikuaW5kZXhPZihcIltuYXRpdmUgY29kZV1cIikgIT09IC0xO1xufVxuXG5mdW5jdGlvbiBfd3JhcE5hdGl2ZVN1cGVyKENsYXNzKSB7XG4gIHZhciBfY2FjaGUgPSB0eXBlb2YgTWFwID09PSBcImZ1bmN0aW9uXCIgPyBuZXcgTWFwKCkgOiB1bmRlZmluZWQ7XG5cbiAgX3dyYXBOYXRpdmVTdXBlciA9IGZ1bmN0aW9uIF93cmFwTmF0aXZlU3VwZXIoQ2xhc3MpIHtcbiAgICBpZiAoQ2xhc3MgPT09IG51bGwgfHwgIV9pc05hdGl2ZUZ1bmN0aW9uKENsYXNzKSkgcmV0dXJuIENsYXNzO1xuXG4gICAgaWYgKHR5cGVvZiBDbGFzcyAhPT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb25cIik7XG4gICAgfVxuXG4gICAgaWYgKHR5cGVvZiBfY2FjaGUgIT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgIGlmIChfY2FjaGUuaGFzKENsYXNzKSkgcmV0dXJuIF9jYWNoZS5nZXQoQ2xhc3MpO1xuXG4gICAgICBfY2FjaGUuc2V0KENsYXNzLCBXcmFwcGVyKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBXcmFwcGVyKCkge1xuICAgICAgcmV0dXJuIF9jb25zdHJ1Y3QoQ2xhc3MsIGFyZ3VtZW50cywgX2dldFByb3RvdHlwZU9mKHRoaXMpLmNvbnN0cnVjdG9yKTtcbiAgICB9XG5cbiAgICBXcmFwcGVyLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoQ2xhc3MucHJvdG90eXBlLCB7XG4gICAgICBjb25zdHJ1Y3Rvcjoge1xuICAgICAgICB2YWx1ZTogV3JhcHBlcixcbiAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICAgIH1cbiAgICB9KTtcbiAgICByZXR1cm4gX3NldFByb3RvdHlwZU9mKFdyYXBwZXIsIENsYXNzKTtcbiAgfTtcblxuICByZXR1cm4gX3dyYXBOYXRpdmVTdXBlcihDbGFzcyk7XG59XG5cbmZ1bmN0aW9uIF9vYmplY3RXaXRob3V0UHJvcGVydGllc0xvb3NlKHNvdXJjZSwgZXhjbHVkZWQpIHtcbiAgaWYgKHNvdXJjZSA9PSBudWxsKSByZXR1cm4ge307XG4gIHZhciB0YXJnZXQgPSB7fTtcbiAgdmFyIHNvdXJjZUtleXMgPSBPYmplY3Qua2V5cyhzb3VyY2UpO1xuICB2YXIga2V5LCBpO1xuXG4gIGZvciAoaSA9IDA7IGkgPCBzb3VyY2VLZXlzLmxlbmd0aDsgaSsrKSB7XG4gICAga2V5ID0gc291cmNlS2V5c1tpXTtcbiAgICBpZiAoZXhjbHVkZWQuaW5kZXhPZihrZXkpID49IDApIGNvbnRpbnVlO1xuICAgIHRhcmdldFtrZXldID0gc291cmNlW2tleV07XG4gIH1cblxuICByZXR1cm4gdGFyZ2V0O1xufVxuXG5mdW5jdGlvbiBfdW5zdXBwb3J0ZWRJdGVyYWJsZVRvQXJyYXkobywgbWluTGVuKSB7XG4gIGlmICghbykgcmV0dXJuO1xuICBpZiAodHlwZW9mIG8gPT09IFwic3RyaW5nXCIpIHJldHVybiBfYXJyYXlMaWtlVG9BcnJheShvLCBtaW5MZW4pO1xuICB2YXIgbiA9IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChvKS5zbGljZSg4LCAtMSk7XG4gIGlmIChuID09PSBcIk9iamVjdFwiICYmIG8uY29uc3RydWN0b3IpIG4gPSBvLmNvbnN0cnVjdG9yLm5hbWU7XG4gIGlmIChuID09PSBcIk1hcFwiIHx8IG4gPT09IFwiU2V0XCIpIHJldHVybiBBcnJheS5mcm9tKG8pO1xuICBpZiAobiA9PT0gXCJBcmd1bWVudHNcIiB8fCAvXig/OlVpfEkpbnQoPzo4fDE2fDMyKSg/OkNsYW1wZWQpP0FycmF5JC8udGVzdChuKSkgcmV0dXJuIF9hcnJheUxpa2VUb0FycmF5KG8sIG1pbkxlbik7XG59XG5cbmZ1bmN0aW9uIF9hcnJheUxpa2VUb0FycmF5KGFyciwgbGVuKSB7XG4gIGlmIChsZW4gPT0gbnVsbCB8fCBsZW4gPiBhcnIubGVuZ3RoKSBsZW4gPSBhcnIubGVuZ3RoO1xuXG4gIGZvciAodmFyIGkgPSAwLCBhcnIyID0gbmV3IEFycmF5KGxlbik7IGkgPCBsZW47IGkrKykgYXJyMltpXSA9IGFycltpXTtcblxuICByZXR1cm4gYXJyMjtcbn1cblxuZnVuY3Rpb24gX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXJMb29zZShvLCBhbGxvd0FycmF5TGlrZSkge1xuICB2YXIgaXQgPSB0eXBlb2YgU3ltYm9sICE9PSBcInVuZGVmaW5lZFwiICYmIG9bU3ltYm9sLml0ZXJhdG9yXSB8fCBvW1wiQEBpdGVyYXRvclwiXTtcbiAgaWYgKGl0KSByZXR1cm4gKGl0ID0gaXQuY2FsbChvKSkubmV4dC5iaW5kKGl0KTtcblxuICBpZiAoQXJyYXkuaXNBcnJheShvKSB8fCAoaXQgPSBfdW5zdXBwb3J0ZWRJdGVyYWJsZVRvQXJyYXkobykpIHx8IGFsbG93QXJyYXlMaWtlICYmIG8gJiYgdHlwZW9mIG8ubGVuZ3RoID09PSBcIm51bWJlclwiKSB7XG4gICAgaWYgKGl0KSBvID0gaXQ7XG4gICAgdmFyIGkgPSAwO1xuICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICBpZiAoaSA+PSBvLmxlbmd0aCkgcmV0dXJuIHtcbiAgICAgICAgZG9uZTogdHJ1ZVxuICAgICAgfTtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIGRvbmU6IGZhbHNlLFxuICAgICAgICB2YWx1ZTogb1tpKytdXG4gICAgICB9O1xuICAgIH07XG4gIH1cblxuICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiSW52YWxpZCBhdHRlbXB0IHRvIGl0ZXJhdGUgbm9uLWl0ZXJhYmxlIGluc3RhbmNlLlxcbkluIG9yZGVyIHRvIGJlIGl0ZXJhYmxlLCBub24tYXJyYXkgb2JqZWN0cyBtdXN0IGhhdmUgYSBbU3ltYm9sLml0ZXJhdG9yXSgpIG1ldGhvZC5cIik7XG59XG5cbi8vIHRoZXNlIGFyZW4ndCByZWFsbHkgcHJpdmF0ZSwgYnV0IG5vciBhcmUgdGhleSByZWFsbHkgdXNlZnVsIHRvIGRvY3VtZW50XG5cbi8qKlxuICogQHByaXZhdGVcbiAqL1xudmFyIEx1eG9uRXJyb3IgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKF9FcnJvcikge1xuICBfaW5oZXJpdHNMb29zZShMdXhvbkVycm9yLCBfRXJyb3IpO1xuXG4gIGZ1bmN0aW9uIEx1eG9uRXJyb3IoKSB7XG4gICAgcmV0dXJuIF9FcnJvci5hcHBseSh0aGlzLCBhcmd1bWVudHMpIHx8IHRoaXM7XG4gIH1cblxuICByZXR1cm4gTHV4b25FcnJvcjtcbn0oIC8qI19fUFVSRV9fKi9fd3JhcE5hdGl2ZVN1cGVyKEVycm9yKSk7XG4vKipcbiAqIEBwcml2YXRlXG4gKi9cblxuXG52YXIgSW52YWxpZERhdGVUaW1lRXJyb3IgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKF9MdXhvbkVycm9yKSB7XG4gIF9pbmhlcml0c0xvb3NlKEludmFsaWREYXRlVGltZUVycm9yLCBfTHV4b25FcnJvcik7XG5cbiAgZnVuY3Rpb24gSW52YWxpZERhdGVUaW1lRXJyb3IocmVhc29uKSB7XG4gICAgcmV0dXJuIF9MdXhvbkVycm9yLmNhbGwodGhpcywgXCJJbnZhbGlkIERhdGVUaW1lOiBcIiArIHJlYXNvbi50b01lc3NhZ2UoKSkgfHwgdGhpcztcbiAgfVxuXG4gIHJldHVybiBJbnZhbGlkRGF0ZVRpbWVFcnJvcjtcbn0oTHV4b25FcnJvcik7XG4vKipcbiAqIEBwcml2YXRlXG4gKi9cblxudmFyIEludmFsaWRJbnRlcnZhbEVycm9yID0gLyojX19QVVJFX18qL2Z1bmN0aW9uIChfTHV4b25FcnJvcjIpIHtcbiAgX2luaGVyaXRzTG9vc2UoSW52YWxpZEludGVydmFsRXJyb3IsIF9MdXhvbkVycm9yMik7XG5cbiAgZnVuY3Rpb24gSW52YWxpZEludGVydmFsRXJyb3IocmVhc29uKSB7XG4gICAgcmV0dXJuIF9MdXhvbkVycm9yMi5jYWxsKHRoaXMsIFwiSW52YWxpZCBJbnRlcnZhbDogXCIgKyByZWFzb24udG9NZXNzYWdlKCkpIHx8IHRoaXM7XG4gIH1cblxuICByZXR1cm4gSW52YWxpZEludGVydmFsRXJyb3I7XG59KEx1eG9uRXJyb3IpO1xuLyoqXG4gKiBAcHJpdmF0ZVxuICovXG5cbnZhciBJbnZhbGlkRHVyYXRpb25FcnJvciA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoX0x1eG9uRXJyb3IzKSB7XG4gIF9pbmhlcml0c0xvb3NlKEludmFsaWREdXJhdGlvbkVycm9yLCBfTHV4b25FcnJvcjMpO1xuXG4gIGZ1bmN0aW9uIEludmFsaWREdXJhdGlvbkVycm9yKHJlYXNvbikge1xuICAgIHJldHVybiBfTHV4b25FcnJvcjMuY2FsbCh0aGlzLCBcIkludmFsaWQgRHVyYXRpb246IFwiICsgcmVhc29uLnRvTWVzc2FnZSgpKSB8fCB0aGlzO1xuICB9XG5cbiAgcmV0dXJuIEludmFsaWREdXJhdGlvbkVycm9yO1xufShMdXhvbkVycm9yKTtcbi8qKlxuICogQHByaXZhdGVcbiAqL1xuXG52YXIgQ29uZmxpY3RpbmdTcGVjaWZpY2F0aW9uRXJyb3IgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKF9MdXhvbkVycm9yNCkge1xuICBfaW5oZXJpdHNMb29zZShDb25mbGljdGluZ1NwZWNpZmljYXRpb25FcnJvciwgX0x1eG9uRXJyb3I0KTtcblxuICBmdW5jdGlvbiBDb25mbGljdGluZ1NwZWNpZmljYXRpb25FcnJvcigpIHtcbiAgICByZXR1cm4gX0x1eG9uRXJyb3I0LmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgdGhpcztcbiAgfVxuXG4gIHJldHVybiBDb25mbGljdGluZ1NwZWNpZmljYXRpb25FcnJvcjtcbn0oTHV4b25FcnJvcik7XG4vKipcbiAqIEBwcml2YXRlXG4gKi9cblxudmFyIEludmFsaWRVbml0RXJyb3IgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKF9MdXhvbkVycm9yNSkge1xuICBfaW5oZXJpdHNMb29zZShJbnZhbGlkVW5pdEVycm9yLCBfTHV4b25FcnJvcjUpO1xuXG4gIGZ1bmN0aW9uIEludmFsaWRVbml0RXJyb3IodW5pdCkge1xuICAgIHJldHVybiBfTHV4b25FcnJvcjUuY2FsbCh0aGlzLCBcIkludmFsaWQgdW5pdCBcIiArIHVuaXQpIHx8IHRoaXM7XG4gIH1cblxuICByZXR1cm4gSW52YWxpZFVuaXRFcnJvcjtcbn0oTHV4b25FcnJvcik7XG4vKipcbiAqIEBwcml2YXRlXG4gKi9cblxudmFyIEludmFsaWRBcmd1bWVudEVycm9yID0gLyojX19QVVJFX18qL2Z1bmN0aW9uIChfTHV4b25FcnJvcjYpIHtcbiAgX2luaGVyaXRzTG9vc2UoSW52YWxpZEFyZ3VtZW50RXJyb3IsIF9MdXhvbkVycm9yNik7XG5cbiAgZnVuY3Rpb24gSW52YWxpZEFyZ3VtZW50RXJyb3IoKSB7XG4gICAgcmV0dXJuIF9MdXhvbkVycm9yNi5hcHBseSh0aGlzLCBhcmd1bWVudHMpIHx8IHRoaXM7XG4gIH1cblxuICByZXR1cm4gSW52YWxpZEFyZ3VtZW50RXJyb3I7XG59KEx1eG9uRXJyb3IpO1xuLyoqXG4gKiBAcHJpdmF0ZVxuICovXG5cbnZhciBab25lSXNBYnN0cmFjdEVycm9yID0gLyojX19QVVJFX18qL2Z1bmN0aW9uIChfTHV4b25FcnJvcjcpIHtcbiAgX2luaGVyaXRzTG9vc2UoWm9uZUlzQWJzdHJhY3RFcnJvciwgX0x1eG9uRXJyb3I3KTtcblxuICBmdW5jdGlvbiBab25lSXNBYnN0cmFjdEVycm9yKCkge1xuICAgIHJldHVybiBfTHV4b25FcnJvcjcuY2FsbCh0aGlzLCBcIlpvbmUgaXMgYW4gYWJzdHJhY3QgY2xhc3NcIikgfHwgdGhpcztcbiAgfVxuXG4gIHJldHVybiBab25lSXNBYnN0cmFjdEVycm9yO1xufShMdXhvbkVycm9yKTtcblxuLyoqXG4gKiBAcHJpdmF0ZVxuICovXG52YXIgbiA9IFwibnVtZXJpY1wiLFxuICAgIHMgPSBcInNob3J0XCIsXG4gICAgbCA9IFwibG9uZ1wiO1xudmFyIERBVEVfU0hPUlQgPSB7XG4gIHllYXI6IG4sXG4gIG1vbnRoOiBuLFxuICBkYXk6IG5cbn07XG52YXIgREFURV9NRUQgPSB7XG4gIHllYXI6IG4sXG4gIG1vbnRoOiBzLFxuICBkYXk6IG5cbn07XG52YXIgREFURV9NRURfV0lUSF9XRUVLREFZID0ge1xuICB5ZWFyOiBuLFxuICBtb250aDogcyxcbiAgZGF5OiBuLFxuICB3ZWVrZGF5OiBzXG59O1xudmFyIERBVEVfRlVMTCA9IHtcbiAgeWVhcjogbixcbiAgbW9udGg6IGwsXG4gIGRheTogblxufTtcbnZhciBEQVRFX0hVR0UgPSB7XG4gIHllYXI6IG4sXG4gIG1vbnRoOiBsLFxuICBkYXk6IG4sXG4gIHdlZWtkYXk6IGxcbn07XG52YXIgVElNRV9TSU1QTEUgPSB7XG4gIGhvdXI6IG4sXG4gIG1pbnV0ZTogblxufTtcbnZhciBUSU1FX1dJVEhfU0VDT05EUyA9IHtcbiAgaG91cjogbixcbiAgbWludXRlOiBuLFxuICBzZWNvbmQ6IG5cbn07XG52YXIgVElNRV9XSVRIX1NIT1JUX09GRlNFVCA9IHtcbiAgaG91cjogbixcbiAgbWludXRlOiBuLFxuICBzZWNvbmQ6IG4sXG4gIHRpbWVab25lTmFtZTogc1xufTtcbnZhciBUSU1FX1dJVEhfTE9OR19PRkZTRVQgPSB7XG4gIGhvdXI6IG4sXG4gIG1pbnV0ZTogbixcbiAgc2Vjb25kOiBuLFxuICB0aW1lWm9uZU5hbWU6IGxcbn07XG52YXIgVElNRV8yNF9TSU1QTEUgPSB7XG4gIGhvdXI6IG4sXG4gIG1pbnV0ZTogbixcbiAgaG91ckN5Y2xlOiBcImgyM1wiXG59O1xudmFyIFRJTUVfMjRfV0lUSF9TRUNPTkRTID0ge1xuICBob3VyOiBuLFxuICBtaW51dGU6IG4sXG4gIHNlY29uZDogbixcbiAgaG91ckN5Y2xlOiBcImgyM1wiXG59O1xudmFyIFRJTUVfMjRfV0lUSF9TSE9SVF9PRkZTRVQgPSB7XG4gIGhvdXI6IG4sXG4gIG1pbnV0ZTogbixcbiAgc2Vjb25kOiBuLFxuICBob3VyQ3ljbGU6IFwiaDIzXCIsXG4gIHRpbWVab25lTmFtZTogc1xufTtcbnZhciBUSU1FXzI0X1dJVEhfTE9OR19PRkZTRVQgPSB7XG4gIGhvdXI6IG4sXG4gIG1pbnV0ZTogbixcbiAgc2Vjb25kOiBuLFxuICBob3VyQ3ljbGU6IFwiaDIzXCIsXG4gIHRpbWVab25lTmFtZTogbFxufTtcbnZhciBEQVRFVElNRV9TSE9SVCA9IHtcbiAgeWVhcjogbixcbiAgbW9udGg6IG4sXG4gIGRheTogbixcbiAgaG91cjogbixcbiAgbWludXRlOiBuXG59O1xudmFyIERBVEVUSU1FX1NIT1JUX1dJVEhfU0VDT05EUyA9IHtcbiAgeWVhcjogbixcbiAgbW9udGg6IG4sXG4gIGRheTogbixcbiAgaG91cjogbixcbiAgbWludXRlOiBuLFxuICBzZWNvbmQ6IG5cbn07XG52YXIgREFURVRJTUVfTUVEID0ge1xuICB5ZWFyOiBuLFxuICBtb250aDogcyxcbiAgZGF5OiBuLFxuICBob3VyOiBuLFxuICBtaW51dGU6IG5cbn07XG52YXIgREFURVRJTUVfTUVEX1dJVEhfU0VDT05EUyA9IHtcbiAgeWVhcjogbixcbiAgbW9udGg6IHMsXG4gIGRheTogbixcbiAgaG91cjogbixcbiAgbWludXRlOiBuLFxuICBzZWNvbmQ6IG5cbn07XG52YXIgREFURVRJTUVfTUVEX1dJVEhfV0VFS0RBWSA9IHtcbiAgeWVhcjogbixcbiAgbW9udGg6IHMsXG4gIGRheTogbixcbiAgd2Vla2RheTogcyxcbiAgaG91cjogbixcbiAgbWludXRlOiBuXG59O1xudmFyIERBVEVUSU1FX0ZVTEwgPSB7XG4gIHllYXI6IG4sXG4gIG1vbnRoOiBsLFxuICBkYXk6IG4sXG4gIGhvdXI6IG4sXG4gIG1pbnV0ZTogbixcbiAgdGltZVpvbmVOYW1lOiBzXG59O1xudmFyIERBVEVUSU1FX0ZVTExfV0lUSF9TRUNPTkRTID0ge1xuICB5ZWFyOiBuLFxuICBtb250aDogbCxcbiAgZGF5OiBuLFxuICBob3VyOiBuLFxuICBtaW51dGU6IG4sXG4gIHNlY29uZDogbixcbiAgdGltZVpvbmVOYW1lOiBzXG59O1xudmFyIERBVEVUSU1FX0hVR0UgPSB7XG4gIHllYXI6IG4sXG4gIG1vbnRoOiBsLFxuICBkYXk6IG4sXG4gIHdlZWtkYXk6IGwsXG4gIGhvdXI6IG4sXG4gIG1pbnV0ZTogbixcbiAgdGltZVpvbmVOYW1lOiBsXG59O1xudmFyIERBVEVUSU1FX0hVR0VfV0lUSF9TRUNPTkRTID0ge1xuICB5ZWFyOiBuLFxuICBtb250aDogbCxcbiAgZGF5OiBuLFxuICB3ZWVrZGF5OiBsLFxuICBob3VyOiBuLFxuICBtaW51dGU6IG4sXG4gIHNlY29uZDogbixcbiAgdGltZVpvbmVOYW1lOiBsXG59O1xuXG4vKipcbiAqIEBwcml2YXRlXG4gKi9cbi8vIFRZUEVTXG5cbmZ1bmN0aW9uIGlzVW5kZWZpbmVkKG8pIHtcbiAgcmV0dXJuIHR5cGVvZiBvID09PSBcInVuZGVmaW5lZFwiO1xufVxuZnVuY3Rpb24gaXNOdW1iZXIobykge1xuICByZXR1cm4gdHlwZW9mIG8gPT09IFwibnVtYmVyXCI7XG59XG5mdW5jdGlvbiBpc0ludGVnZXIobykge1xuICByZXR1cm4gdHlwZW9mIG8gPT09IFwibnVtYmVyXCIgJiYgbyAlIDEgPT09IDA7XG59XG5mdW5jdGlvbiBpc1N0cmluZyhvKSB7XG4gIHJldHVybiB0eXBlb2YgbyA9PT0gXCJzdHJpbmdcIjtcbn1cbmZ1bmN0aW9uIGlzRGF0ZShvKSB7XG4gIHJldHVybiBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwobykgPT09IFwiW29iamVjdCBEYXRlXVwiO1xufSAvLyBDQVBBQklMSVRJRVNcblxuZnVuY3Rpb24gaGFzUmVsYXRpdmUoKSB7XG4gIHRyeSB7XG4gICAgcmV0dXJuIHR5cGVvZiBJbnRsICE9PSBcInVuZGVmaW5lZFwiICYmICEhSW50bC5SZWxhdGl2ZVRpbWVGb3JtYXQ7XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbn0gLy8gT0JKRUNUUyBBTkQgQVJSQVlTXG5cbmZ1bmN0aW9uIG1heWJlQXJyYXkodGhpbmcpIHtcbiAgcmV0dXJuIEFycmF5LmlzQXJyYXkodGhpbmcpID8gdGhpbmcgOiBbdGhpbmddO1xufVxuZnVuY3Rpb24gYmVzdEJ5KGFyciwgYnksIGNvbXBhcmUpIHtcbiAgaWYgKGFyci5sZW5ndGggPT09IDApIHtcbiAgICByZXR1cm4gdW5kZWZpbmVkO1xuICB9XG5cbiAgcmV0dXJuIGFyci5yZWR1Y2UoZnVuY3Rpb24gKGJlc3QsIG5leHQpIHtcbiAgICB2YXIgcGFpciA9IFtieShuZXh0KSwgbmV4dF07XG5cbiAgICBpZiAoIWJlc3QpIHtcbiAgICAgIHJldHVybiBwYWlyO1xuICAgIH0gZWxzZSBpZiAoY29tcGFyZShiZXN0WzBdLCBwYWlyWzBdKSA9PT0gYmVzdFswXSkge1xuICAgICAgcmV0dXJuIGJlc3Q7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBwYWlyO1xuICAgIH1cbiAgfSwgbnVsbClbMV07XG59XG5mdW5jdGlvbiBwaWNrKG9iaiwga2V5cykge1xuICByZXR1cm4ga2V5cy5yZWR1Y2UoZnVuY3Rpb24gKGEsIGspIHtcbiAgICBhW2tdID0gb2JqW2tdO1xuICAgIHJldHVybiBhO1xuICB9LCB7fSk7XG59XG5mdW5jdGlvbiBoYXNPd25Qcm9wZXJ0eShvYmosIHByb3ApIHtcbiAgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIHByb3ApO1xufSAvLyBOVU1CRVJTIEFORCBTVFJJTkdTXG5cbmZ1bmN0aW9uIGludGVnZXJCZXR3ZWVuKHRoaW5nLCBib3R0b20sIHRvcCkge1xuICByZXR1cm4gaXNJbnRlZ2VyKHRoaW5nKSAmJiB0aGluZyA+PSBib3R0b20gJiYgdGhpbmcgPD0gdG9wO1xufSAvLyB4ICUgbiBidXQgdGFrZXMgdGhlIHNpZ24gb2YgbiBpbnN0ZWFkIG9mIHhcblxuZnVuY3Rpb24gZmxvb3JNb2QoeCwgbikge1xuICByZXR1cm4geCAtIG4gKiBNYXRoLmZsb29yKHggLyBuKTtcbn1cbmZ1bmN0aW9uIHBhZFN0YXJ0KGlucHV0LCBuKSB7XG4gIGlmIChuID09PSB2b2lkIDApIHtcbiAgICBuID0gMjtcbiAgfVxuXG4gIHZhciBpc05lZyA9IGlucHV0IDwgMDtcbiAgdmFyIHBhZGRlZDtcblxuICBpZiAoaXNOZWcpIHtcbiAgICBwYWRkZWQgPSBcIi1cIiArIChcIlwiICsgLWlucHV0KS5wYWRTdGFydChuLCBcIjBcIik7XG4gIH0gZWxzZSB7XG4gICAgcGFkZGVkID0gKFwiXCIgKyBpbnB1dCkucGFkU3RhcnQobiwgXCIwXCIpO1xuICB9XG5cbiAgcmV0dXJuIHBhZGRlZDtcbn1cbmZ1bmN0aW9uIHBhcnNlSW50ZWdlcihzdHJpbmcpIHtcbiAgaWYgKGlzVW5kZWZpbmVkKHN0cmluZykgfHwgc3RyaW5nID09PSBudWxsIHx8IHN0cmluZyA9PT0gXCJcIikge1xuICAgIHJldHVybiB1bmRlZmluZWQ7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIHBhcnNlSW50KHN0cmluZywgMTApO1xuICB9XG59XG5mdW5jdGlvbiBwYXJzZUZsb2F0aW5nKHN0cmluZykge1xuICBpZiAoaXNVbmRlZmluZWQoc3RyaW5nKSB8fCBzdHJpbmcgPT09IG51bGwgfHwgc3RyaW5nID09PSBcIlwiKSB7XG4gICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gcGFyc2VGbG9hdChzdHJpbmcpO1xuICB9XG59XG5mdW5jdGlvbiBwYXJzZU1pbGxpcyhmcmFjdGlvbikge1xuICAvLyBSZXR1cm4gdW5kZWZpbmVkIChpbnN0ZWFkIG9mIDApIGluIHRoZXNlIGNhc2VzLCB3aGVyZSBmcmFjdGlvbiBpcyBub3Qgc2V0XG4gIGlmIChpc1VuZGVmaW5lZChmcmFjdGlvbikgfHwgZnJhY3Rpb24gPT09IG51bGwgfHwgZnJhY3Rpb24gPT09IFwiXCIpIHtcbiAgICByZXR1cm4gdW5kZWZpbmVkO1xuICB9IGVsc2Uge1xuICAgIHZhciBmID0gcGFyc2VGbG9hdChcIjAuXCIgKyBmcmFjdGlvbikgKiAxMDAwO1xuICAgIHJldHVybiBNYXRoLmZsb29yKGYpO1xuICB9XG59XG5mdW5jdGlvbiByb3VuZFRvKG51bWJlciwgZGlnaXRzLCB0b3dhcmRaZXJvKSB7XG4gIGlmICh0b3dhcmRaZXJvID09PSB2b2lkIDApIHtcbiAgICB0b3dhcmRaZXJvID0gZmFsc2U7XG4gIH1cblxuICB2YXIgZmFjdG9yID0gTWF0aC5wb3coMTAsIGRpZ2l0cyksXG4gICAgICByb3VuZGVyID0gdG93YXJkWmVybyA/IE1hdGgudHJ1bmMgOiBNYXRoLnJvdW5kO1xuICByZXR1cm4gcm91bmRlcihudW1iZXIgKiBmYWN0b3IpIC8gZmFjdG9yO1xufSAvLyBEQVRFIEJBU0lDU1xuXG5mdW5jdGlvbiBpc0xlYXBZZWFyKHllYXIpIHtcbiAgcmV0dXJuIHllYXIgJSA0ID09PSAwICYmICh5ZWFyICUgMTAwICE9PSAwIHx8IHllYXIgJSA0MDAgPT09IDApO1xufVxuZnVuY3Rpb24gZGF5c0luWWVhcih5ZWFyKSB7XG4gIHJldHVybiBpc0xlYXBZZWFyKHllYXIpID8gMzY2IDogMzY1O1xufVxuZnVuY3Rpb24gZGF5c0luTW9udGgoeWVhciwgbW9udGgpIHtcbiAgdmFyIG1vZE1vbnRoID0gZmxvb3JNb2QobW9udGggLSAxLCAxMikgKyAxLFxuICAgICAgbW9kWWVhciA9IHllYXIgKyAobW9udGggLSBtb2RNb250aCkgLyAxMjtcblxuICBpZiAobW9kTW9udGggPT09IDIpIHtcbiAgICByZXR1cm4gaXNMZWFwWWVhcihtb2RZZWFyKSA/IDI5IDogMjg7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIFszMSwgbnVsbCwgMzEsIDMwLCAzMSwgMzAsIDMxLCAzMSwgMzAsIDMxLCAzMCwgMzFdW21vZE1vbnRoIC0gMV07XG4gIH1cbn0gLy8gY292ZXJ0IGEgY2FsZW5kYXIgb2JqZWN0IHRvIGEgbG9jYWwgdGltZXN0YW1wIChlcG9jaCwgYnV0IHdpdGggdGhlIG9mZnNldCBiYWtlZCBpbilcblxuZnVuY3Rpb24gb2JqVG9Mb2NhbFRTKG9iaikge1xuICB2YXIgZCA9IERhdGUuVVRDKG9iai55ZWFyLCBvYmoubW9udGggLSAxLCBvYmouZGF5LCBvYmouaG91ciwgb2JqLm1pbnV0ZSwgb2JqLnNlY29uZCwgb2JqLm1pbGxpc2Vjb25kKTsgLy8gZm9yIGxlZ2FjeSByZWFzb25zLCB5ZWFycyBiZXR3ZWVuIDAgYW5kIDk5IGFyZSBpbnRlcnByZXRlZCBhcyAxOVhYOyByZXZlcnQgdGhhdFxuXG4gIGlmIChvYmoueWVhciA8IDEwMCAmJiBvYmoueWVhciA+PSAwKSB7XG4gICAgZCA9IG5ldyBEYXRlKGQpO1xuICAgIGQuc2V0VVRDRnVsbFllYXIoZC5nZXRVVENGdWxsWWVhcigpIC0gMTkwMCk7XG4gIH1cblxuICByZXR1cm4gK2Q7XG59XG5mdW5jdGlvbiB3ZWVrc0luV2Vla1llYXIod2Vla1llYXIpIHtcbiAgdmFyIHAxID0gKHdlZWtZZWFyICsgTWF0aC5mbG9vcih3ZWVrWWVhciAvIDQpIC0gTWF0aC5mbG9vcih3ZWVrWWVhciAvIDEwMCkgKyBNYXRoLmZsb29yKHdlZWtZZWFyIC8gNDAwKSkgJSA3LFxuICAgICAgbGFzdCA9IHdlZWtZZWFyIC0gMSxcbiAgICAgIHAyID0gKGxhc3QgKyBNYXRoLmZsb29yKGxhc3QgLyA0KSAtIE1hdGguZmxvb3IobGFzdCAvIDEwMCkgKyBNYXRoLmZsb29yKGxhc3QgLyA0MDApKSAlIDc7XG4gIHJldHVybiBwMSA9PT0gNCB8fCBwMiA9PT0gMyA/IDUzIDogNTI7XG59XG5mdW5jdGlvbiB1bnRydW5jYXRlWWVhcih5ZWFyKSB7XG4gIGlmICh5ZWFyID4gOTkpIHtcbiAgICByZXR1cm4geWVhcjtcbiAgfSBlbHNlIHJldHVybiB5ZWFyID4gNjAgPyAxOTAwICsgeWVhciA6IDIwMDAgKyB5ZWFyO1xufSAvLyBQQVJTSU5HXG5cbmZ1bmN0aW9uIHBhcnNlWm9uZUluZm8odHMsIG9mZnNldEZvcm1hdCwgbG9jYWxlLCB0aW1lWm9uZSkge1xuICBpZiAodGltZVpvbmUgPT09IHZvaWQgMCkge1xuICAgIHRpbWVab25lID0gbnVsbDtcbiAgfVxuXG4gIHZhciBkYXRlID0gbmV3IERhdGUodHMpLFxuICAgICAgaW50bE9wdHMgPSB7XG4gICAgaG91ckN5Y2xlOiBcImgyM1wiLFxuICAgIHllYXI6IFwibnVtZXJpY1wiLFxuICAgIG1vbnRoOiBcIjItZGlnaXRcIixcbiAgICBkYXk6IFwiMi1kaWdpdFwiLFxuICAgIGhvdXI6IFwiMi1kaWdpdFwiLFxuICAgIG1pbnV0ZTogXCIyLWRpZ2l0XCJcbiAgfTtcblxuICBpZiAodGltZVpvbmUpIHtcbiAgICBpbnRsT3B0cy50aW1lWm9uZSA9IHRpbWVab25lO1xuICB9XG5cbiAgdmFyIG1vZGlmaWVkID0gX2V4dGVuZHMoe1xuICAgIHRpbWVab25lTmFtZTogb2Zmc2V0Rm9ybWF0XG4gIH0sIGludGxPcHRzKTtcblxuICB2YXIgcGFyc2VkID0gbmV3IEludGwuRGF0ZVRpbWVGb3JtYXQobG9jYWxlLCBtb2RpZmllZCkuZm9ybWF0VG9QYXJ0cyhkYXRlKS5maW5kKGZ1bmN0aW9uIChtKSB7XG4gICAgcmV0dXJuIG0udHlwZS50b0xvd2VyQ2FzZSgpID09PSBcInRpbWV6b25lbmFtZVwiO1xuICB9KTtcbiAgcmV0dXJuIHBhcnNlZCA/IHBhcnNlZC52YWx1ZSA6IG51bGw7XG59IC8vIHNpZ25lZE9mZnNldCgnLTUnLCAnMzAnKSAtPiAtMzMwXG5cbmZ1bmN0aW9uIHNpZ25lZE9mZnNldChvZmZIb3VyU3RyLCBvZmZNaW51dGVTdHIpIHtcbiAgdmFyIG9mZkhvdXIgPSBwYXJzZUludChvZmZIb3VyU3RyLCAxMCk7IC8vIGRvbid0IHx8IHRoaXMgYmVjYXVzZSB3ZSB3YW50IHRvIHByZXNlcnZlIC0wXG5cbiAgaWYgKE51bWJlci5pc05hTihvZmZIb3VyKSkge1xuICAgIG9mZkhvdXIgPSAwO1xuICB9XG5cbiAgdmFyIG9mZk1pbiA9IHBhcnNlSW50KG9mZk1pbnV0ZVN0ciwgMTApIHx8IDAsXG4gICAgICBvZmZNaW5TaWduZWQgPSBvZmZIb3VyIDwgMCB8fCBPYmplY3QuaXMob2ZmSG91ciwgLTApID8gLW9mZk1pbiA6IG9mZk1pbjtcbiAgcmV0dXJuIG9mZkhvdXIgKiA2MCArIG9mZk1pblNpZ25lZDtcbn0gLy8gQ09FUkNJT05cblxuZnVuY3Rpb24gYXNOdW1iZXIodmFsdWUpIHtcbiAgdmFyIG51bWVyaWNWYWx1ZSA9IE51bWJlcih2YWx1ZSk7XG4gIGlmICh0eXBlb2YgdmFsdWUgPT09IFwiYm9vbGVhblwiIHx8IHZhbHVlID09PSBcIlwiIHx8IE51bWJlci5pc05hTihudW1lcmljVmFsdWUpKSB0aHJvdyBuZXcgSW52YWxpZEFyZ3VtZW50RXJyb3IoXCJJbnZhbGlkIHVuaXQgdmFsdWUgXCIgKyB2YWx1ZSk7XG4gIHJldHVybiBudW1lcmljVmFsdWU7XG59XG5mdW5jdGlvbiBub3JtYWxpemVPYmplY3Qob2JqLCBub3JtYWxpemVyKSB7XG4gIHZhciBub3JtYWxpemVkID0ge307XG5cbiAgZm9yICh2YXIgdSBpbiBvYmopIHtcbiAgICBpZiAoaGFzT3duUHJvcGVydHkob2JqLCB1KSkge1xuICAgICAgdmFyIHYgPSBvYmpbdV07XG4gICAgICBpZiAodiA9PT0gdW5kZWZpbmVkIHx8IHYgPT09IG51bGwpIGNvbnRpbnVlO1xuICAgICAgbm9ybWFsaXplZFtub3JtYWxpemVyKHUpXSA9IGFzTnVtYmVyKHYpO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiBub3JtYWxpemVkO1xufVxuZnVuY3Rpb24gZm9ybWF0T2Zmc2V0KG9mZnNldCwgZm9ybWF0KSB7XG4gIHZhciBob3VycyA9IE1hdGgudHJ1bmMoTWF0aC5hYnMob2Zmc2V0IC8gNjApKSxcbiAgICAgIG1pbnV0ZXMgPSBNYXRoLnRydW5jKE1hdGguYWJzKG9mZnNldCAlIDYwKSksXG4gICAgICBzaWduID0gb2Zmc2V0ID49IDAgPyBcIitcIiA6IFwiLVwiO1xuXG4gIHN3aXRjaCAoZm9ybWF0KSB7XG4gICAgY2FzZSBcInNob3J0XCI6XG4gICAgICByZXR1cm4gXCJcIiArIHNpZ24gKyBwYWRTdGFydChob3VycywgMikgKyBcIjpcIiArIHBhZFN0YXJ0KG1pbnV0ZXMsIDIpO1xuXG4gICAgY2FzZSBcIm5hcnJvd1wiOlxuICAgICAgcmV0dXJuIFwiXCIgKyBzaWduICsgaG91cnMgKyAobWludXRlcyA+IDAgPyBcIjpcIiArIG1pbnV0ZXMgOiBcIlwiKTtcblxuICAgIGNhc2UgXCJ0ZWNoaWVcIjpcbiAgICAgIHJldHVybiBcIlwiICsgc2lnbiArIHBhZFN0YXJ0KGhvdXJzLCAyKSArIHBhZFN0YXJ0KG1pbnV0ZXMsIDIpO1xuXG4gICAgZGVmYXVsdDpcbiAgICAgIHRocm93IG5ldyBSYW5nZUVycm9yKFwiVmFsdWUgZm9ybWF0IFwiICsgZm9ybWF0ICsgXCIgaXMgb3V0IG9mIHJhbmdlIGZvciBwcm9wZXJ0eSBmb3JtYXRcIik7XG4gIH1cbn1cbmZ1bmN0aW9uIHRpbWVPYmplY3Qob2JqKSB7XG4gIHJldHVybiBwaWNrKG9iaiwgW1wiaG91clwiLCBcIm1pbnV0ZVwiLCBcInNlY29uZFwiLCBcIm1pbGxpc2Vjb25kXCJdKTtcbn1cbnZhciBpYW5hUmVnZXggPSAvW0EtWmEtel8rLV17MSwyNTZ9KDo/XFwvW0EtWmEtejAtOV8rLV17MSwyNTZ9KFxcL1tBLVphLXowLTlfKy1dezEsMjU2fSk/KT8vO1xuXG4vKipcbiAqIEBwcml2YXRlXG4gKi9cblxuXG52YXIgbW9udGhzTG9uZyA9IFtcIkphbnVhcnlcIiwgXCJGZWJydWFyeVwiLCBcIk1hcmNoXCIsIFwiQXByaWxcIiwgXCJNYXlcIiwgXCJKdW5lXCIsIFwiSnVseVwiLCBcIkF1Z3VzdFwiLCBcIlNlcHRlbWJlclwiLCBcIk9jdG9iZXJcIiwgXCJOb3ZlbWJlclwiLCBcIkRlY2VtYmVyXCJdO1xudmFyIG1vbnRoc1Nob3J0ID0gW1wiSmFuXCIsIFwiRmViXCIsIFwiTWFyXCIsIFwiQXByXCIsIFwiTWF5XCIsIFwiSnVuXCIsIFwiSnVsXCIsIFwiQXVnXCIsIFwiU2VwXCIsIFwiT2N0XCIsIFwiTm92XCIsIFwiRGVjXCJdO1xudmFyIG1vbnRoc05hcnJvdyA9IFtcIkpcIiwgXCJGXCIsIFwiTVwiLCBcIkFcIiwgXCJNXCIsIFwiSlwiLCBcIkpcIiwgXCJBXCIsIFwiU1wiLCBcIk9cIiwgXCJOXCIsIFwiRFwiXTtcbmZ1bmN0aW9uIG1vbnRocyhsZW5ndGgpIHtcbiAgc3dpdGNoIChsZW5ndGgpIHtcbiAgICBjYXNlIFwibmFycm93XCI6XG4gICAgICByZXR1cm4gW10uY29uY2F0KG1vbnRoc05hcnJvdyk7XG5cbiAgICBjYXNlIFwic2hvcnRcIjpcbiAgICAgIHJldHVybiBbXS5jb25jYXQobW9udGhzU2hvcnQpO1xuXG4gICAgY2FzZSBcImxvbmdcIjpcbiAgICAgIHJldHVybiBbXS5jb25jYXQobW9udGhzTG9uZyk7XG5cbiAgICBjYXNlIFwibnVtZXJpY1wiOlxuICAgICAgcmV0dXJuIFtcIjFcIiwgXCIyXCIsIFwiM1wiLCBcIjRcIiwgXCI1XCIsIFwiNlwiLCBcIjdcIiwgXCI4XCIsIFwiOVwiLCBcIjEwXCIsIFwiMTFcIiwgXCIxMlwiXTtcblxuICAgIGNhc2UgXCIyLWRpZ2l0XCI6XG4gICAgICByZXR1cm4gW1wiMDFcIiwgXCIwMlwiLCBcIjAzXCIsIFwiMDRcIiwgXCIwNVwiLCBcIjA2XCIsIFwiMDdcIiwgXCIwOFwiLCBcIjA5XCIsIFwiMTBcIiwgXCIxMVwiLCBcIjEyXCJdO1xuXG4gICAgZGVmYXVsdDpcbiAgICAgIHJldHVybiBudWxsO1xuICB9XG59XG52YXIgd2Vla2RheXNMb25nID0gW1wiTW9uZGF5XCIsIFwiVHVlc2RheVwiLCBcIldlZG5lc2RheVwiLCBcIlRodXJzZGF5XCIsIFwiRnJpZGF5XCIsIFwiU2F0dXJkYXlcIiwgXCJTdW5kYXlcIl07XG52YXIgd2Vla2RheXNTaG9ydCA9IFtcIk1vblwiLCBcIlR1ZVwiLCBcIldlZFwiLCBcIlRodVwiLCBcIkZyaVwiLCBcIlNhdFwiLCBcIlN1blwiXTtcbnZhciB3ZWVrZGF5c05hcnJvdyA9IFtcIk1cIiwgXCJUXCIsIFwiV1wiLCBcIlRcIiwgXCJGXCIsIFwiU1wiLCBcIlNcIl07XG5mdW5jdGlvbiB3ZWVrZGF5cyhsZW5ndGgpIHtcbiAgc3dpdGNoIChsZW5ndGgpIHtcbiAgICBjYXNlIFwibmFycm93XCI6XG4gICAgICByZXR1cm4gW10uY29uY2F0KHdlZWtkYXlzTmFycm93KTtcblxuICAgIGNhc2UgXCJzaG9ydFwiOlxuICAgICAgcmV0dXJuIFtdLmNvbmNhdCh3ZWVrZGF5c1Nob3J0KTtcblxuICAgIGNhc2UgXCJsb25nXCI6XG4gICAgICByZXR1cm4gW10uY29uY2F0KHdlZWtkYXlzTG9uZyk7XG5cbiAgICBjYXNlIFwibnVtZXJpY1wiOlxuICAgICAgcmV0dXJuIFtcIjFcIiwgXCIyXCIsIFwiM1wiLCBcIjRcIiwgXCI1XCIsIFwiNlwiLCBcIjdcIl07XG5cbiAgICBkZWZhdWx0OlxuICAgICAgcmV0dXJuIG51bGw7XG4gIH1cbn1cbnZhciBtZXJpZGllbXMgPSBbXCJBTVwiLCBcIlBNXCJdO1xudmFyIGVyYXNMb25nID0gW1wiQmVmb3JlIENocmlzdFwiLCBcIkFubm8gRG9taW5pXCJdO1xudmFyIGVyYXNTaG9ydCA9IFtcIkJDXCIsIFwiQURcIl07XG52YXIgZXJhc05hcnJvdyA9IFtcIkJcIiwgXCJBXCJdO1xuZnVuY3Rpb24gZXJhcyhsZW5ndGgpIHtcbiAgc3dpdGNoIChsZW5ndGgpIHtcbiAgICBjYXNlIFwibmFycm93XCI6XG4gICAgICByZXR1cm4gW10uY29uY2F0KGVyYXNOYXJyb3cpO1xuXG4gICAgY2FzZSBcInNob3J0XCI6XG4gICAgICByZXR1cm4gW10uY29uY2F0KGVyYXNTaG9ydCk7XG5cbiAgICBjYXNlIFwibG9uZ1wiOlxuICAgICAgcmV0dXJuIFtdLmNvbmNhdChlcmFzTG9uZyk7XG5cbiAgICBkZWZhdWx0OlxuICAgICAgcmV0dXJuIG51bGw7XG4gIH1cbn1cbmZ1bmN0aW9uIG1lcmlkaWVtRm9yRGF0ZVRpbWUoZHQpIHtcbiAgcmV0dXJuIG1lcmlkaWVtc1tkdC5ob3VyIDwgMTIgPyAwIDogMV07XG59XG5mdW5jdGlvbiB3ZWVrZGF5Rm9yRGF0ZVRpbWUoZHQsIGxlbmd0aCkge1xuICByZXR1cm4gd2Vla2RheXMobGVuZ3RoKVtkdC53ZWVrZGF5IC0gMV07XG59XG5mdW5jdGlvbiBtb250aEZvckRhdGVUaW1lKGR0LCBsZW5ndGgpIHtcbiAgcmV0dXJuIG1vbnRocyhsZW5ndGgpW2R0Lm1vbnRoIC0gMV07XG59XG5mdW5jdGlvbiBlcmFGb3JEYXRlVGltZShkdCwgbGVuZ3RoKSB7XG4gIHJldHVybiBlcmFzKGxlbmd0aClbZHQueWVhciA8IDAgPyAwIDogMV07XG59XG5mdW5jdGlvbiBmb3JtYXRSZWxhdGl2ZVRpbWUodW5pdCwgY291bnQsIG51bWVyaWMsIG5hcnJvdykge1xuICBpZiAobnVtZXJpYyA9PT0gdm9pZCAwKSB7XG4gICAgbnVtZXJpYyA9IFwiYWx3YXlzXCI7XG4gIH1cblxuICBpZiAobmFycm93ID09PSB2b2lkIDApIHtcbiAgICBuYXJyb3cgPSBmYWxzZTtcbiAgfVxuXG4gIHZhciB1bml0cyA9IHtcbiAgICB5ZWFyczogW1wieWVhclwiLCBcInlyLlwiXSxcbiAgICBxdWFydGVyczogW1wicXVhcnRlclwiLCBcInF0ci5cIl0sXG4gICAgbW9udGhzOiBbXCJtb250aFwiLCBcIm1vLlwiXSxcbiAgICB3ZWVrczogW1wid2Vla1wiLCBcIndrLlwiXSxcbiAgICBkYXlzOiBbXCJkYXlcIiwgXCJkYXlcIiwgXCJkYXlzXCJdLFxuICAgIGhvdXJzOiBbXCJob3VyXCIsIFwiaHIuXCJdLFxuICAgIG1pbnV0ZXM6IFtcIm1pbnV0ZVwiLCBcIm1pbi5cIl0sXG4gICAgc2Vjb25kczogW1wic2Vjb25kXCIsIFwic2VjLlwiXVxuICB9O1xuICB2YXIgbGFzdGFibGUgPSBbXCJob3Vyc1wiLCBcIm1pbnV0ZXNcIiwgXCJzZWNvbmRzXCJdLmluZGV4T2YodW5pdCkgPT09IC0xO1xuXG4gIGlmIChudW1lcmljID09PSBcImF1dG9cIiAmJiBsYXN0YWJsZSkge1xuICAgIHZhciBpc0RheSA9IHVuaXQgPT09IFwiZGF5c1wiO1xuXG4gICAgc3dpdGNoIChjb3VudCkge1xuICAgICAgY2FzZSAxOlxuICAgICAgICByZXR1cm4gaXNEYXkgPyBcInRvbW9ycm93XCIgOiBcIm5leHQgXCIgKyB1bml0c1t1bml0XVswXTtcblxuICAgICAgY2FzZSAtMTpcbiAgICAgICAgcmV0dXJuIGlzRGF5ID8gXCJ5ZXN0ZXJkYXlcIiA6IFwibGFzdCBcIiArIHVuaXRzW3VuaXRdWzBdO1xuXG4gICAgICBjYXNlIDA6XG4gICAgICAgIHJldHVybiBpc0RheSA/IFwidG9kYXlcIiA6IFwidGhpcyBcIiArIHVuaXRzW3VuaXRdWzBdO1xuXG4gICAgfVxuICB9XG5cbiAgdmFyIGlzSW5QYXN0ID0gT2JqZWN0LmlzKGNvdW50LCAtMCkgfHwgY291bnQgPCAwLFxuICAgICAgZm10VmFsdWUgPSBNYXRoLmFicyhjb3VudCksXG4gICAgICBzaW5ndWxhciA9IGZtdFZhbHVlID09PSAxLFxuICAgICAgbGlsVW5pdHMgPSB1bml0c1t1bml0XSxcbiAgICAgIGZtdFVuaXQgPSBuYXJyb3cgPyBzaW5ndWxhciA/IGxpbFVuaXRzWzFdIDogbGlsVW5pdHNbMl0gfHwgbGlsVW5pdHNbMV0gOiBzaW5ndWxhciA/IHVuaXRzW3VuaXRdWzBdIDogdW5pdDtcbiAgcmV0dXJuIGlzSW5QYXN0ID8gZm10VmFsdWUgKyBcIiBcIiArIGZtdFVuaXQgKyBcIiBhZ29cIiA6IFwiaW4gXCIgKyBmbXRWYWx1ZSArIFwiIFwiICsgZm10VW5pdDtcbn1cblxuZnVuY3Rpb24gc3RyaW5naWZ5VG9rZW5zKHNwbGl0cywgdG9rZW5Ub1N0cmluZykge1xuICB2YXIgcyA9IFwiXCI7XG5cbiAgZm9yICh2YXIgX2l0ZXJhdG9yID0gX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXJMb29zZShzcGxpdHMpLCBfc3RlcDsgIShfc3RlcCA9IF9pdGVyYXRvcigpKS5kb25lOykge1xuICAgIHZhciB0b2tlbiA9IF9zdGVwLnZhbHVlO1xuXG4gICAgaWYgKHRva2VuLmxpdGVyYWwpIHtcbiAgICAgIHMgKz0gdG9rZW4udmFsO1xuICAgIH0gZWxzZSB7XG4gICAgICBzICs9IHRva2VuVG9TdHJpbmcodG9rZW4udmFsKTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gcztcbn1cblxudmFyIF9tYWNyb1Rva2VuVG9Gb3JtYXRPcHRzID0ge1xuICBEOiBEQVRFX1NIT1JULFxuICBERDogREFURV9NRUQsXG4gIERERDogREFURV9GVUxMLFxuICBEREREOiBEQVRFX0hVR0UsXG4gIHQ6IFRJTUVfU0lNUExFLFxuICB0dDogVElNRV9XSVRIX1NFQ09ORFMsXG4gIHR0dDogVElNRV9XSVRIX1NIT1JUX09GRlNFVCxcbiAgdHR0dDogVElNRV9XSVRIX0xPTkdfT0ZGU0VULFxuICBUOiBUSU1FXzI0X1NJTVBMRSxcbiAgVFQ6IFRJTUVfMjRfV0lUSF9TRUNPTkRTLFxuICBUVFQ6IFRJTUVfMjRfV0lUSF9TSE9SVF9PRkZTRVQsXG4gIFRUVFQ6IFRJTUVfMjRfV0lUSF9MT05HX09GRlNFVCxcbiAgZjogREFURVRJTUVfU0hPUlQsXG4gIGZmOiBEQVRFVElNRV9NRUQsXG4gIGZmZjogREFURVRJTUVfRlVMTCxcbiAgZmZmZjogREFURVRJTUVfSFVHRSxcbiAgRjogREFURVRJTUVfU0hPUlRfV0lUSF9TRUNPTkRTLFxuICBGRjogREFURVRJTUVfTUVEX1dJVEhfU0VDT05EUyxcbiAgRkZGOiBEQVRFVElNRV9GVUxMX1dJVEhfU0VDT05EUyxcbiAgRkZGRjogREFURVRJTUVfSFVHRV9XSVRIX1NFQ09ORFNcbn07XG4vKipcbiAqIEBwcml2YXRlXG4gKi9cblxudmFyIEZvcm1hdHRlciA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7XG4gIEZvcm1hdHRlci5jcmVhdGUgPSBmdW5jdGlvbiBjcmVhdGUobG9jYWxlLCBvcHRzKSB7XG4gICAgaWYgKG9wdHMgPT09IHZvaWQgMCkge1xuICAgICAgb3B0cyA9IHt9O1xuICAgIH1cblxuICAgIHJldHVybiBuZXcgRm9ybWF0dGVyKGxvY2FsZSwgb3B0cyk7XG4gIH07XG5cbiAgRm9ybWF0dGVyLnBhcnNlRm9ybWF0ID0gZnVuY3Rpb24gcGFyc2VGb3JtYXQoZm10KSB7XG4gICAgdmFyIGN1cnJlbnQgPSBudWxsLFxuICAgICAgICBjdXJyZW50RnVsbCA9IFwiXCIsXG4gICAgICAgIGJyYWNrZXRlZCA9IGZhbHNlO1xuICAgIHZhciBzcGxpdHMgPSBbXTtcblxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZm10Lmxlbmd0aDsgaSsrKSB7XG4gICAgICB2YXIgYyA9IGZtdC5jaGFyQXQoaSk7XG5cbiAgICAgIGlmIChjID09PSBcIidcIikge1xuICAgICAgICBpZiAoY3VycmVudEZ1bGwubGVuZ3RoID4gMCkge1xuICAgICAgICAgIHNwbGl0cy5wdXNoKHtcbiAgICAgICAgICAgIGxpdGVyYWw6IGJyYWNrZXRlZCxcbiAgICAgICAgICAgIHZhbDogY3VycmVudEZ1bGxcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGN1cnJlbnQgPSBudWxsO1xuICAgICAgICBjdXJyZW50RnVsbCA9IFwiXCI7XG4gICAgICAgIGJyYWNrZXRlZCA9ICFicmFja2V0ZWQ7XG4gICAgICB9IGVsc2UgaWYgKGJyYWNrZXRlZCkge1xuICAgICAgICBjdXJyZW50RnVsbCArPSBjO1xuICAgICAgfSBlbHNlIGlmIChjID09PSBjdXJyZW50KSB7XG4gICAgICAgIGN1cnJlbnRGdWxsICs9IGM7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpZiAoY3VycmVudEZ1bGwubGVuZ3RoID4gMCkge1xuICAgICAgICAgIHNwbGl0cy5wdXNoKHtcbiAgICAgICAgICAgIGxpdGVyYWw6IGZhbHNlLFxuICAgICAgICAgICAgdmFsOiBjdXJyZW50RnVsbFxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgY3VycmVudEZ1bGwgPSBjO1xuICAgICAgICBjdXJyZW50ID0gYztcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoY3VycmVudEZ1bGwubGVuZ3RoID4gMCkge1xuICAgICAgc3BsaXRzLnB1c2goe1xuICAgICAgICBsaXRlcmFsOiBicmFja2V0ZWQsXG4gICAgICAgIHZhbDogY3VycmVudEZ1bGxcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIHJldHVybiBzcGxpdHM7XG4gIH07XG5cbiAgRm9ybWF0dGVyLm1hY3JvVG9rZW5Ub0Zvcm1hdE9wdHMgPSBmdW5jdGlvbiBtYWNyb1Rva2VuVG9Gb3JtYXRPcHRzKHRva2VuKSB7XG4gICAgcmV0dXJuIF9tYWNyb1Rva2VuVG9Gb3JtYXRPcHRzW3Rva2VuXTtcbiAgfTtcblxuICBmdW5jdGlvbiBGb3JtYXR0ZXIobG9jYWxlLCBmb3JtYXRPcHRzKSB7XG4gICAgdGhpcy5vcHRzID0gZm9ybWF0T3B0cztcbiAgICB0aGlzLmxvYyA9IGxvY2FsZTtcbiAgICB0aGlzLnN5c3RlbUxvYyA9IG51bGw7XG4gIH1cblxuICB2YXIgX3Byb3RvID0gRm9ybWF0dGVyLnByb3RvdHlwZTtcblxuICBfcHJvdG8uZm9ybWF0V2l0aFN5c3RlbURlZmF1bHQgPSBmdW5jdGlvbiBmb3JtYXRXaXRoU3lzdGVtRGVmYXVsdChkdCwgb3B0cykge1xuICAgIGlmICh0aGlzLnN5c3RlbUxvYyA9PT0gbnVsbCkge1xuICAgICAgdGhpcy5zeXN0ZW1Mb2MgPSB0aGlzLmxvYy5yZWRlZmF1bHRUb1N5c3RlbSgpO1xuICAgIH1cblxuICAgIHZhciBkZiA9IHRoaXMuc3lzdGVtTG9jLmR0Rm9ybWF0dGVyKGR0LCBfZXh0ZW5kcyh7fSwgdGhpcy5vcHRzLCBvcHRzKSk7XG4gICAgcmV0dXJuIGRmLmZvcm1hdCgpO1xuICB9O1xuXG4gIF9wcm90by5mb3JtYXREYXRlVGltZSA9IGZ1bmN0aW9uIGZvcm1hdERhdGVUaW1lKGR0LCBvcHRzKSB7XG4gICAgaWYgKG9wdHMgPT09IHZvaWQgMCkge1xuICAgICAgb3B0cyA9IHt9O1xuICAgIH1cblxuICAgIHZhciBkZiA9IHRoaXMubG9jLmR0Rm9ybWF0dGVyKGR0LCBfZXh0ZW5kcyh7fSwgdGhpcy5vcHRzLCBvcHRzKSk7XG4gICAgcmV0dXJuIGRmLmZvcm1hdCgpO1xuICB9O1xuXG4gIF9wcm90by5mb3JtYXREYXRlVGltZVBhcnRzID0gZnVuY3Rpb24gZm9ybWF0RGF0ZVRpbWVQYXJ0cyhkdCwgb3B0cykge1xuICAgIGlmIChvcHRzID09PSB2b2lkIDApIHtcbiAgICAgIG9wdHMgPSB7fTtcbiAgICB9XG5cbiAgICB2YXIgZGYgPSB0aGlzLmxvYy5kdEZvcm1hdHRlcihkdCwgX2V4dGVuZHMoe30sIHRoaXMub3B0cywgb3B0cykpO1xuICAgIHJldHVybiBkZi5mb3JtYXRUb1BhcnRzKCk7XG4gIH07XG5cbiAgX3Byb3RvLnJlc29sdmVkT3B0aW9ucyA9IGZ1bmN0aW9uIHJlc29sdmVkT3B0aW9ucyhkdCwgb3B0cykge1xuICAgIGlmIChvcHRzID09PSB2b2lkIDApIHtcbiAgICAgIG9wdHMgPSB7fTtcbiAgICB9XG5cbiAgICB2YXIgZGYgPSB0aGlzLmxvYy5kdEZvcm1hdHRlcihkdCwgX2V4dGVuZHMoe30sIHRoaXMub3B0cywgb3B0cykpO1xuICAgIHJldHVybiBkZi5yZXNvbHZlZE9wdGlvbnMoKTtcbiAgfTtcblxuICBfcHJvdG8ubnVtID0gZnVuY3Rpb24gbnVtKG4sIHApIHtcbiAgICBpZiAocCA9PT0gdm9pZCAwKSB7XG4gICAgICBwID0gMDtcbiAgICB9XG5cbiAgICAvLyB3ZSBnZXQgc29tZSBwZXJmIG91dCBvZiBkb2luZyB0aGlzIGhlcmUsIGFubm95aW5nbHlcbiAgICBpZiAodGhpcy5vcHRzLmZvcmNlU2ltcGxlKSB7XG4gICAgICByZXR1cm4gcGFkU3RhcnQobiwgcCk7XG4gICAgfVxuXG4gICAgdmFyIG9wdHMgPSBfZXh0ZW5kcyh7fSwgdGhpcy5vcHRzKTtcblxuICAgIGlmIChwID4gMCkge1xuICAgICAgb3B0cy5wYWRUbyA9IHA7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXMubG9jLm51bWJlckZvcm1hdHRlcihvcHRzKS5mb3JtYXQobik7XG4gIH07XG5cbiAgX3Byb3RvLmZvcm1hdERhdGVUaW1lRnJvbVN0cmluZyA9IGZ1bmN0aW9uIGZvcm1hdERhdGVUaW1lRnJvbVN0cmluZyhkdCwgZm10KSB7XG4gICAgdmFyIF90aGlzID0gdGhpcztcblxuICAgIHZhciBrbm93bkVuZ2xpc2ggPSB0aGlzLmxvYy5saXN0aW5nTW9kZSgpID09PSBcImVuXCIsXG4gICAgICAgIHVzZURhdGVUaW1lRm9ybWF0dGVyID0gdGhpcy5sb2Mub3V0cHV0Q2FsZW5kYXIgJiYgdGhpcy5sb2Mub3V0cHV0Q2FsZW5kYXIgIT09IFwiZ3JlZ29yeVwiLFxuICAgICAgICBzdHJpbmcgPSBmdW5jdGlvbiBzdHJpbmcob3B0cywgZXh0cmFjdCkge1xuICAgICAgcmV0dXJuIF90aGlzLmxvYy5leHRyYWN0KGR0LCBvcHRzLCBleHRyYWN0KTtcbiAgICB9LFxuICAgICAgICBmb3JtYXRPZmZzZXQgPSBmdW5jdGlvbiBmb3JtYXRPZmZzZXQob3B0cykge1xuICAgICAgaWYgKGR0LmlzT2Zmc2V0Rml4ZWQgJiYgZHQub2Zmc2V0ID09PSAwICYmIG9wdHMuYWxsb3daKSB7XG4gICAgICAgIHJldHVybiBcIlpcIjtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGR0LmlzVmFsaWQgPyBkdC56b25lLmZvcm1hdE9mZnNldChkdC50cywgb3B0cy5mb3JtYXQpIDogXCJcIjtcbiAgICB9LFxuICAgICAgICBtZXJpZGllbSA9IGZ1bmN0aW9uIG1lcmlkaWVtKCkge1xuICAgICAgcmV0dXJuIGtub3duRW5nbGlzaCA/IG1lcmlkaWVtRm9yRGF0ZVRpbWUoZHQpIDogc3RyaW5nKHtcbiAgICAgICAgaG91cjogXCJudW1lcmljXCIsXG4gICAgICAgIGhvdXJDeWNsZTogXCJoMTJcIlxuICAgICAgfSwgXCJkYXlwZXJpb2RcIik7XG4gICAgfSxcbiAgICAgICAgbW9udGggPSBmdW5jdGlvbiBtb250aChsZW5ndGgsIHN0YW5kYWxvbmUpIHtcbiAgICAgIHJldHVybiBrbm93bkVuZ2xpc2ggPyBtb250aEZvckRhdGVUaW1lKGR0LCBsZW5ndGgpIDogc3RyaW5nKHN0YW5kYWxvbmUgPyB7XG4gICAgICAgIG1vbnRoOiBsZW5ndGhcbiAgICAgIH0gOiB7XG4gICAgICAgIG1vbnRoOiBsZW5ndGgsXG4gICAgICAgIGRheTogXCJudW1lcmljXCJcbiAgICAgIH0sIFwibW9udGhcIik7XG4gICAgfSxcbiAgICAgICAgd2Vla2RheSA9IGZ1bmN0aW9uIHdlZWtkYXkobGVuZ3RoLCBzdGFuZGFsb25lKSB7XG4gICAgICByZXR1cm4ga25vd25FbmdsaXNoID8gd2Vla2RheUZvckRhdGVUaW1lKGR0LCBsZW5ndGgpIDogc3RyaW5nKHN0YW5kYWxvbmUgPyB7XG4gICAgICAgIHdlZWtkYXk6IGxlbmd0aFxuICAgICAgfSA6IHtcbiAgICAgICAgd2Vla2RheTogbGVuZ3RoLFxuICAgICAgICBtb250aDogXCJsb25nXCIsXG4gICAgICAgIGRheTogXCJudW1lcmljXCJcbiAgICAgIH0sIFwid2Vla2RheVwiKTtcbiAgICB9LFxuICAgICAgICBtYXliZU1hY3JvID0gZnVuY3Rpb24gbWF5YmVNYWNybyh0b2tlbikge1xuICAgICAgdmFyIGZvcm1hdE9wdHMgPSBGb3JtYXR0ZXIubWFjcm9Ub2tlblRvRm9ybWF0T3B0cyh0b2tlbik7XG5cbiAgICAgIGlmIChmb3JtYXRPcHRzKSB7XG4gICAgICAgIHJldHVybiBfdGhpcy5mb3JtYXRXaXRoU3lzdGVtRGVmYXVsdChkdCwgZm9ybWF0T3B0cyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gdG9rZW47XG4gICAgICB9XG4gICAgfSxcbiAgICAgICAgZXJhID0gZnVuY3Rpb24gZXJhKGxlbmd0aCkge1xuICAgICAgcmV0dXJuIGtub3duRW5nbGlzaCA/IGVyYUZvckRhdGVUaW1lKGR0LCBsZW5ndGgpIDogc3RyaW5nKHtcbiAgICAgICAgZXJhOiBsZW5ndGhcbiAgICAgIH0sIFwiZXJhXCIpO1xuICAgIH0sXG4gICAgICAgIHRva2VuVG9TdHJpbmcgPSBmdW5jdGlvbiB0b2tlblRvU3RyaW5nKHRva2VuKSB7XG4gICAgICAvLyBXaGVyZSBwb3NzaWJsZTogaHR0cDovL2NsZHIudW5pY29kZS5vcmcvdHJhbnNsYXRpb24vZGF0ZS10aW1lLTEvZGF0ZS10aW1lI1RPQy1TdGFuZGFsb25lLXZzLi1Gb3JtYXQtU3R5bGVzXG4gICAgICBzd2l0Y2ggKHRva2VuKSB7XG4gICAgICAgIC8vIG1zXG4gICAgICAgIGNhc2UgXCJTXCI6XG4gICAgICAgICAgcmV0dXJuIF90aGlzLm51bShkdC5taWxsaXNlY29uZCk7XG5cbiAgICAgICAgY2FzZSBcInVcIjogLy8gZmFsbHMgdGhyb3VnaFxuXG4gICAgICAgIGNhc2UgXCJTU1NcIjpcbiAgICAgICAgICByZXR1cm4gX3RoaXMubnVtKGR0Lm1pbGxpc2Vjb25kLCAzKTtcbiAgICAgICAgLy8gc2Vjb25kc1xuXG4gICAgICAgIGNhc2UgXCJzXCI6XG4gICAgICAgICAgcmV0dXJuIF90aGlzLm51bShkdC5zZWNvbmQpO1xuXG4gICAgICAgIGNhc2UgXCJzc1wiOlxuICAgICAgICAgIHJldHVybiBfdGhpcy5udW0oZHQuc2Vjb25kLCAyKTtcbiAgICAgICAgLy8gZnJhY3Rpb25hbCBzZWNvbmRzXG5cbiAgICAgICAgY2FzZSBcInV1XCI6XG4gICAgICAgICAgcmV0dXJuIF90aGlzLm51bShNYXRoLmZsb29yKGR0Lm1pbGxpc2Vjb25kIC8gMTApLCAyKTtcblxuICAgICAgICBjYXNlIFwidXV1XCI6XG4gICAgICAgICAgcmV0dXJuIF90aGlzLm51bShNYXRoLmZsb29yKGR0Lm1pbGxpc2Vjb25kIC8gMTAwKSk7XG4gICAgICAgIC8vIG1pbnV0ZXNcblxuICAgICAgICBjYXNlIFwibVwiOlxuICAgICAgICAgIHJldHVybiBfdGhpcy5udW0oZHQubWludXRlKTtcblxuICAgICAgICBjYXNlIFwibW1cIjpcbiAgICAgICAgICByZXR1cm4gX3RoaXMubnVtKGR0Lm1pbnV0ZSwgMik7XG4gICAgICAgIC8vIGhvdXJzXG5cbiAgICAgICAgY2FzZSBcImhcIjpcbiAgICAgICAgICByZXR1cm4gX3RoaXMubnVtKGR0LmhvdXIgJSAxMiA9PT0gMCA/IDEyIDogZHQuaG91ciAlIDEyKTtcblxuICAgICAgICBjYXNlIFwiaGhcIjpcbiAgICAgICAgICByZXR1cm4gX3RoaXMubnVtKGR0LmhvdXIgJSAxMiA9PT0gMCA/IDEyIDogZHQuaG91ciAlIDEyLCAyKTtcblxuICAgICAgICBjYXNlIFwiSFwiOlxuICAgICAgICAgIHJldHVybiBfdGhpcy5udW0oZHQuaG91cik7XG5cbiAgICAgICAgY2FzZSBcIkhIXCI6XG4gICAgICAgICAgcmV0dXJuIF90aGlzLm51bShkdC5ob3VyLCAyKTtcbiAgICAgICAgLy8gb2Zmc2V0XG5cbiAgICAgICAgY2FzZSBcIlpcIjpcbiAgICAgICAgICAvLyBsaWtlICs2XG4gICAgICAgICAgcmV0dXJuIGZvcm1hdE9mZnNldCh7XG4gICAgICAgICAgICBmb3JtYXQ6IFwibmFycm93XCIsXG4gICAgICAgICAgICBhbGxvd1o6IF90aGlzLm9wdHMuYWxsb3daXG4gICAgICAgICAgfSk7XG5cbiAgICAgICAgY2FzZSBcIlpaXCI6XG4gICAgICAgICAgLy8gbGlrZSArMDY6MDBcbiAgICAgICAgICByZXR1cm4gZm9ybWF0T2Zmc2V0KHtcbiAgICAgICAgICAgIGZvcm1hdDogXCJzaG9ydFwiLFxuICAgICAgICAgICAgYWxsb3daOiBfdGhpcy5vcHRzLmFsbG93WlxuICAgICAgICAgIH0pO1xuXG4gICAgICAgIGNhc2UgXCJaWlpcIjpcbiAgICAgICAgICAvLyBsaWtlICswNjAwXG4gICAgICAgICAgcmV0dXJuIGZvcm1hdE9mZnNldCh7XG4gICAgICAgICAgICBmb3JtYXQ6IFwidGVjaGllXCIsXG4gICAgICAgICAgICBhbGxvd1o6IF90aGlzLm9wdHMuYWxsb3daXG4gICAgICAgICAgfSk7XG5cbiAgICAgICAgY2FzZSBcIlpaWlpcIjpcbiAgICAgICAgICAvLyBsaWtlIEVTVFxuICAgICAgICAgIHJldHVybiBkdC56b25lLm9mZnNldE5hbWUoZHQudHMsIHtcbiAgICAgICAgICAgIGZvcm1hdDogXCJzaG9ydFwiLFxuICAgICAgICAgICAgbG9jYWxlOiBfdGhpcy5sb2MubG9jYWxlXG4gICAgICAgICAgfSk7XG5cbiAgICAgICAgY2FzZSBcIlpaWlpaXCI6XG4gICAgICAgICAgLy8gbGlrZSBFYXN0ZXJuIFN0YW5kYXJkIFRpbWVcbiAgICAgICAgICByZXR1cm4gZHQuem9uZS5vZmZzZXROYW1lKGR0LnRzLCB7XG4gICAgICAgICAgICBmb3JtYXQ6IFwibG9uZ1wiLFxuICAgICAgICAgICAgbG9jYWxlOiBfdGhpcy5sb2MubG9jYWxlXG4gICAgICAgICAgfSk7XG4gICAgICAgIC8vIHpvbmVcblxuICAgICAgICBjYXNlIFwielwiOlxuICAgICAgICAgIC8vIGxpa2UgQW1lcmljYS9OZXdfWW9ya1xuICAgICAgICAgIHJldHVybiBkdC56b25lTmFtZTtcbiAgICAgICAgLy8gbWVyaWRpZW1zXG5cbiAgICAgICAgY2FzZSBcImFcIjpcbiAgICAgICAgICByZXR1cm4gbWVyaWRpZW0oKTtcbiAgICAgICAgLy8gZGF0ZXNcblxuICAgICAgICBjYXNlIFwiZFwiOlxuICAgICAgICAgIHJldHVybiB1c2VEYXRlVGltZUZvcm1hdHRlciA/IHN0cmluZyh7XG4gICAgICAgICAgICBkYXk6IFwibnVtZXJpY1wiXG4gICAgICAgICAgfSwgXCJkYXlcIikgOiBfdGhpcy5udW0oZHQuZGF5KTtcblxuICAgICAgICBjYXNlIFwiZGRcIjpcbiAgICAgICAgICByZXR1cm4gdXNlRGF0ZVRpbWVGb3JtYXR0ZXIgPyBzdHJpbmcoe1xuICAgICAgICAgICAgZGF5OiBcIjItZGlnaXRcIlxuICAgICAgICAgIH0sIFwiZGF5XCIpIDogX3RoaXMubnVtKGR0LmRheSwgMik7XG4gICAgICAgIC8vIHdlZWtkYXlzIC0gc3RhbmRhbG9uZVxuXG4gICAgICAgIGNhc2UgXCJjXCI6XG4gICAgICAgICAgLy8gbGlrZSAxXG4gICAgICAgICAgcmV0dXJuIF90aGlzLm51bShkdC53ZWVrZGF5KTtcblxuICAgICAgICBjYXNlIFwiY2NjXCI6XG4gICAgICAgICAgLy8gbGlrZSAnVHVlcydcbiAgICAgICAgICByZXR1cm4gd2Vla2RheShcInNob3J0XCIsIHRydWUpO1xuXG4gICAgICAgIGNhc2UgXCJjY2NjXCI6XG4gICAgICAgICAgLy8gbGlrZSAnVHVlc2RheSdcbiAgICAgICAgICByZXR1cm4gd2Vla2RheShcImxvbmdcIiwgdHJ1ZSk7XG5cbiAgICAgICAgY2FzZSBcImNjY2NjXCI6XG4gICAgICAgICAgLy8gbGlrZSAnVCdcbiAgICAgICAgICByZXR1cm4gd2Vla2RheShcIm5hcnJvd1wiLCB0cnVlKTtcbiAgICAgICAgLy8gd2Vla2RheXMgLSBmb3JtYXRcblxuICAgICAgICBjYXNlIFwiRVwiOlxuICAgICAgICAgIC8vIGxpa2UgMVxuICAgICAgICAgIHJldHVybiBfdGhpcy5udW0oZHQud2Vla2RheSk7XG5cbiAgICAgICAgY2FzZSBcIkVFRVwiOlxuICAgICAgICAgIC8vIGxpa2UgJ1R1ZXMnXG4gICAgICAgICAgcmV0dXJuIHdlZWtkYXkoXCJzaG9ydFwiLCBmYWxzZSk7XG5cbiAgICAgICAgY2FzZSBcIkVFRUVcIjpcbiAgICAgICAgICAvLyBsaWtlICdUdWVzZGF5J1xuICAgICAgICAgIHJldHVybiB3ZWVrZGF5KFwibG9uZ1wiLCBmYWxzZSk7XG5cbiAgICAgICAgY2FzZSBcIkVFRUVFXCI6XG4gICAgICAgICAgLy8gbGlrZSAnVCdcbiAgICAgICAgICByZXR1cm4gd2Vla2RheShcIm5hcnJvd1wiLCBmYWxzZSk7XG4gICAgICAgIC8vIG1vbnRocyAtIHN0YW5kYWxvbmVcblxuICAgICAgICBjYXNlIFwiTFwiOlxuICAgICAgICAgIC8vIGxpa2UgMVxuICAgICAgICAgIHJldHVybiB1c2VEYXRlVGltZUZvcm1hdHRlciA/IHN0cmluZyh7XG4gICAgICAgICAgICBtb250aDogXCJudW1lcmljXCIsXG4gICAgICAgICAgICBkYXk6IFwibnVtZXJpY1wiXG4gICAgICAgICAgfSwgXCJtb250aFwiKSA6IF90aGlzLm51bShkdC5tb250aCk7XG5cbiAgICAgICAgY2FzZSBcIkxMXCI6XG4gICAgICAgICAgLy8gbGlrZSAwMSwgZG9lc24ndCBzZWVtIHRvIHdvcmtcbiAgICAgICAgICByZXR1cm4gdXNlRGF0ZVRpbWVGb3JtYXR0ZXIgPyBzdHJpbmcoe1xuICAgICAgICAgICAgbW9udGg6IFwiMi1kaWdpdFwiLFxuICAgICAgICAgICAgZGF5OiBcIm51bWVyaWNcIlxuICAgICAgICAgIH0sIFwibW9udGhcIikgOiBfdGhpcy5udW0oZHQubW9udGgsIDIpO1xuXG4gICAgICAgIGNhc2UgXCJMTExcIjpcbiAgICAgICAgICAvLyBsaWtlIEphblxuICAgICAgICAgIHJldHVybiBtb250aChcInNob3J0XCIsIHRydWUpO1xuXG4gICAgICAgIGNhc2UgXCJMTExMXCI6XG4gICAgICAgICAgLy8gbGlrZSBKYW51YXJ5XG4gICAgICAgICAgcmV0dXJuIG1vbnRoKFwibG9uZ1wiLCB0cnVlKTtcblxuICAgICAgICBjYXNlIFwiTExMTExcIjpcbiAgICAgICAgICAvLyBsaWtlIEpcbiAgICAgICAgICByZXR1cm4gbW9udGgoXCJuYXJyb3dcIiwgdHJ1ZSk7XG4gICAgICAgIC8vIG1vbnRocyAtIGZvcm1hdFxuXG4gICAgICAgIGNhc2UgXCJNXCI6XG4gICAgICAgICAgLy8gbGlrZSAxXG4gICAgICAgICAgcmV0dXJuIHVzZURhdGVUaW1lRm9ybWF0dGVyID8gc3RyaW5nKHtcbiAgICAgICAgICAgIG1vbnRoOiBcIm51bWVyaWNcIlxuICAgICAgICAgIH0sIFwibW9udGhcIikgOiBfdGhpcy5udW0oZHQubW9udGgpO1xuXG4gICAgICAgIGNhc2UgXCJNTVwiOlxuICAgICAgICAgIC8vIGxpa2UgMDFcbiAgICAgICAgICByZXR1cm4gdXNlRGF0ZVRpbWVGb3JtYXR0ZXIgPyBzdHJpbmcoe1xuICAgICAgICAgICAgbW9udGg6IFwiMi1kaWdpdFwiXG4gICAgICAgICAgfSwgXCJtb250aFwiKSA6IF90aGlzLm51bShkdC5tb250aCwgMik7XG5cbiAgICAgICAgY2FzZSBcIk1NTVwiOlxuICAgICAgICAgIC8vIGxpa2UgSmFuXG4gICAgICAgICAgcmV0dXJuIG1vbnRoKFwic2hvcnRcIiwgZmFsc2UpO1xuXG4gICAgICAgIGNhc2UgXCJNTU1NXCI6XG4gICAgICAgICAgLy8gbGlrZSBKYW51YXJ5XG4gICAgICAgICAgcmV0dXJuIG1vbnRoKFwibG9uZ1wiLCBmYWxzZSk7XG5cbiAgICAgICAgY2FzZSBcIk1NTU1NXCI6XG4gICAgICAgICAgLy8gbGlrZSBKXG4gICAgICAgICAgcmV0dXJuIG1vbnRoKFwibmFycm93XCIsIGZhbHNlKTtcbiAgICAgICAgLy8geWVhcnNcblxuICAgICAgICBjYXNlIFwieVwiOlxuICAgICAgICAgIC8vIGxpa2UgMjAxNFxuICAgICAgICAgIHJldHVybiB1c2VEYXRlVGltZUZvcm1hdHRlciA/IHN0cmluZyh7XG4gICAgICAgICAgICB5ZWFyOiBcIm51bWVyaWNcIlxuICAgICAgICAgIH0sIFwieWVhclwiKSA6IF90aGlzLm51bShkdC55ZWFyKTtcblxuICAgICAgICBjYXNlIFwieXlcIjpcbiAgICAgICAgICAvLyBsaWtlIDE0XG4gICAgICAgICAgcmV0dXJuIHVzZURhdGVUaW1lRm9ybWF0dGVyID8gc3RyaW5nKHtcbiAgICAgICAgICAgIHllYXI6IFwiMi1kaWdpdFwiXG4gICAgICAgICAgfSwgXCJ5ZWFyXCIpIDogX3RoaXMubnVtKGR0LnllYXIudG9TdHJpbmcoKS5zbGljZSgtMiksIDIpO1xuXG4gICAgICAgIGNhc2UgXCJ5eXl5XCI6XG4gICAgICAgICAgLy8gbGlrZSAwMDEyXG4gICAgICAgICAgcmV0dXJuIHVzZURhdGVUaW1lRm9ybWF0dGVyID8gc3RyaW5nKHtcbiAgICAgICAgICAgIHllYXI6IFwibnVtZXJpY1wiXG4gICAgICAgICAgfSwgXCJ5ZWFyXCIpIDogX3RoaXMubnVtKGR0LnllYXIsIDQpO1xuXG4gICAgICAgIGNhc2UgXCJ5eXl5eXlcIjpcbiAgICAgICAgICAvLyBsaWtlIDAwMDAxMlxuICAgICAgICAgIHJldHVybiB1c2VEYXRlVGltZUZvcm1hdHRlciA/IHN0cmluZyh7XG4gICAgICAgICAgICB5ZWFyOiBcIm51bWVyaWNcIlxuICAgICAgICAgIH0sIFwieWVhclwiKSA6IF90aGlzLm51bShkdC55ZWFyLCA2KTtcbiAgICAgICAgLy8gZXJhc1xuXG4gICAgICAgIGNhc2UgXCJHXCI6XG4gICAgICAgICAgLy8gbGlrZSBBRFxuICAgICAgICAgIHJldHVybiBlcmEoXCJzaG9ydFwiKTtcblxuICAgICAgICBjYXNlIFwiR0dcIjpcbiAgICAgICAgICAvLyBsaWtlIEFubm8gRG9taW5pXG4gICAgICAgICAgcmV0dXJuIGVyYShcImxvbmdcIik7XG5cbiAgICAgICAgY2FzZSBcIkdHR0dHXCI6XG4gICAgICAgICAgcmV0dXJuIGVyYShcIm5hcnJvd1wiKTtcblxuICAgICAgICBjYXNlIFwia2tcIjpcbiAgICAgICAgICByZXR1cm4gX3RoaXMubnVtKGR0LndlZWtZZWFyLnRvU3RyaW5nKCkuc2xpY2UoLTIpLCAyKTtcblxuICAgICAgICBjYXNlIFwia2tra1wiOlxuICAgICAgICAgIHJldHVybiBfdGhpcy5udW0oZHQud2Vla1llYXIsIDQpO1xuXG4gICAgICAgIGNhc2UgXCJXXCI6XG4gICAgICAgICAgcmV0dXJuIF90aGlzLm51bShkdC53ZWVrTnVtYmVyKTtcblxuICAgICAgICBjYXNlIFwiV1dcIjpcbiAgICAgICAgICByZXR1cm4gX3RoaXMubnVtKGR0LndlZWtOdW1iZXIsIDIpO1xuXG4gICAgICAgIGNhc2UgXCJvXCI6XG4gICAgICAgICAgcmV0dXJuIF90aGlzLm51bShkdC5vcmRpbmFsKTtcblxuICAgICAgICBjYXNlIFwib29vXCI6XG4gICAgICAgICAgcmV0dXJuIF90aGlzLm51bShkdC5vcmRpbmFsLCAzKTtcblxuICAgICAgICBjYXNlIFwicVwiOlxuICAgICAgICAgIC8vIGxpa2UgMVxuICAgICAgICAgIHJldHVybiBfdGhpcy5udW0oZHQucXVhcnRlcik7XG5cbiAgICAgICAgY2FzZSBcInFxXCI6XG4gICAgICAgICAgLy8gbGlrZSAwMVxuICAgICAgICAgIHJldHVybiBfdGhpcy5udW0oZHQucXVhcnRlciwgMik7XG5cbiAgICAgICAgY2FzZSBcIlhcIjpcbiAgICAgICAgICByZXR1cm4gX3RoaXMubnVtKE1hdGguZmxvb3IoZHQudHMgLyAxMDAwKSk7XG5cbiAgICAgICAgY2FzZSBcInhcIjpcbiAgICAgICAgICByZXR1cm4gX3RoaXMubnVtKGR0LnRzKTtcblxuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgIHJldHVybiBtYXliZU1hY3JvKHRva2VuKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgcmV0dXJuIHN0cmluZ2lmeVRva2VucyhGb3JtYXR0ZXIucGFyc2VGb3JtYXQoZm10KSwgdG9rZW5Ub1N0cmluZyk7XG4gIH07XG5cbiAgX3Byb3RvLmZvcm1hdER1cmF0aW9uRnJvbVN0cmluZyA9IGZ1bmN0aW9uIGZvcm1hdER1cmF0aW9uRnJvbVN0cmluZyhkdXIsIGZtdCkge1xuICAgIHZhciBfdGhpczIgPSB0aGlzO1xuXG4gICAgdmFyIHRva2VuVG9GaWVsZCA9IGZ1bmN0aW9uIHRva2VuVG9GaWVsZCh0b2tlbikge1xuICAgICAgc3dpdGNoICh0b2tlblswXSkge1xuICAgICAgICBjYXNlIFwiU1wiOlxuICAgICAgICAgIHJldHVybiBcIm1pbGxpc2Vjb25kXCI7XG5cbiAgICAgICAgY2FzZSBcInNcIjpcbiAgICAgICAgICByZXR1cm4gXCJzZWNvbmRcIjtcblxuICAgICAgICBjYXNlIFwibVwiOlxuICAgICAgICAgIHJldHVybiBcIm1pbnV0ZVwiO1xuXG4gICAgICAgIGNhc2UgXCJoXCI6XG4gICAgICAgICAgcmV0dXJuIFwiaG91clwiO1xuXG4gICAgICAgIGNhc2UgXCJkXCI6XG4gICAgICAgICAgcmV0dXJuIFwiZGF5XCI7XG5cbiAgICAgICAgY2FzZSBcIk1cIjpcbiAgICAgICAgICByZXR1cm4gXCJtb250aFwiO1xuXG4gICAgICAgIGNhc2UgXCJ5XCI6XG4gICAgICAgICAgcmV0dXJuIFwieWVhclwiO1xuXG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICB9XG4gICAgfSxcbiAgICAgICAgdG9rZW5Ub1N0cmluZyA9IGZ1bmN0aW9uIHRva2VuVG9TdHJpbmcobGlsZHVyKSB7XG4gICAgICByZXR1cm4gZnVuY3Rpb24gKHRva2VuKSB7XG4gICAgICAgIHZhciBtYXBwZWQgPSB0b2tlblRvRmllbGQodG9rZW4pO1xuXG4gICAgICAgIGlmIChtYXBwZWQpIHtcbiAgICAgICAgICByZXR1cm4gX3RoaXMyLm51bShsaWxkdXIuZ2V0KG1hcHBlZCksIHRva2VuLmxlbmd0aCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmV0dXJuIHRva2VuO1xuICAgICAgICB9XG4gICAgICB9O1xuICAgIH0sXG4gICAgICAgIHRva2VucyA9IEZvcm1hdHRlci5wYXJzZUZvcm1hdChmbXQpLFxuICAgICAgICByZWFsVG9rZW5zID0gdG9rZW5zLnJlZHVjZShmdW5jdGlvbiAoZm91bmQsIF9yZWYpIHtcbiAgICAgIHZhciBsaXRlcmFsID0gX3JlZi5saXRlcmFsLFxuICAgICAgICAgIHZhbCA9IF9yZWYudmFsO1xuICAgICAgcmV0dXJuIGxpdGVyYWwgPyBmb3VuZCA6IGZvdW5kLmNvbmNhdCh2YWwpO1xuICAgIH0sIFtdKSxcbiAgICAgICAgY29sbGFwc2VkID0gZHVyLnNoaWZ0VG8uYXBwbHkoZHVyLCByZWFsVG9rZW5zLm1hcCh0b2tlblRvRmllbGQpLmZpbHRlcihmdW5jdGlvbiAodCkge1xuICAgICAgcmV0dXJuIHQ7XG4gICAgfSkpO1xuXG4gICAgcmV0dXJuIHN0cmluZ2lmeVRva2Vucyh0b2tlbnMsIHRva2VuVG9TdHJpbmcoY29sbGFwc2VkKSk7XG4gIH07XG5cbiAgcmV0dXJuIEZvcm1hdHRlcjtcbn0oKTtcblxudmFyIEludmFsaWQgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkge1xuICBmdW5jdGlvbiBJbnZhbGlkKHJlYXNvbiwgZXhwbGFuYXRpb24pIHtcbiAgICB0aGlzLnJlYXNvbiA9IHJlYXNvbjtcbiAgICB0aGlzLmV4cGxhbmF0aW9uID0gZXhwbGFuYXRpb247XG4gIH1cblxuICB2YXIgX3Byb3RvID0gSW52YWxpZC5wcm90b3R5cGU7XG5cbiAgX3Byb3RvLnRvTWVzc2FnZSA9IGZ1bmN0aW9uIHRvTWVzc2FnZSgpIHtcbiAgICBpZiAodGhpcy5leHBsYW5hdGlvbikge1xuICAgICAgcmV0dXJuIHRoaXMucmVhc29uICsgXCI6IFwiICsgdGhpcy5leHBsYW5hdGlvbjtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIHRoaXMucmVhc29uO1xuICAgIH1cbiAgfTtcblxuICByZXR1cm4gSW52YWxpZDtcbn0oKTtcblxuLyoqXG4gKiBAaW50ZXJmYWNlXG4gKi9cblxudmFyIFpvbmUgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkge1xuICBmdW5jdGlvbiBab25lKCkge31cblxuICB2YXIgX3Byb3RvID0gWm9uZS5wcm90b3R5cGU7XG5cbiAgLyoqXG4gICAqIFJldHVybnMgdGhlIG9mZnNldCdzIGNvbW1vbiBuYW1lIChzdWNoIGFzIEVTVCkgYXQgdGhlIHNwZWNpZmllZCB0aW1lc3RhbXBcbiAgICogQGFic3RyYWN0XG4gICAqIEBwYXJhbSB7bnVtYmVyfSB0cyAtIEVwb2NoIG1pbGxpc2Vjb25kcyBmb3Igd2hpY2ggdG8gZ2V0IHRoZSBuYW1lXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRzIC0gT3B0aW9ucyB0byBhZmZlY3QgdGhlIGZvcm1hdFxuICAgKiBAcGFyYW0ge3N0cmluZ30gb3B0cy5mb3JtYXQgLSBXaGF0IHN0eWxlIG9mIG9mZnNldCB0byByZXR1cm4uIEFjY2VwdHMgJ2xvbmcnIG9yICdzaG9ydCcuXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBvcHRzLmxvY2FsZSAtIFdoYXQgbG9jYWxlIHRvIHJldHVybiB0aGUgb2Zmc2V0IG5hbWUgaW4uXG4gICAqIEByZXR1cm4ge3N0cmluZ31cbiAgICovXG4gIF9wcm90by5vZmZzZXROYW1lID0gZnVuY3Rpb24gb2Zmc2V0TmFtZSh0cywgb3B0cykge1xuICAgIHRocm93IG5ldyBab25lSXNBYnN0cmFjdEVycm9yKCk7XG4gIH1cbiAgLyoqXG4gICAqIFJldHVybnMgdGhlIG9mZnNldCdzIHZhbHVlIGFzIGEgc3RyaW5nXG4gICAqIEBhYnN0cmFjdFxuICAgKiBAcGFyYW0ge251bWJlcn0gdHMgLSBFcG9jaCBtaWxsaXNlY29uZHMgZm9yIHdoaWNoIHRvIGdldCB0aGUgb2Zmc2V0XG4gICAqIEBwYXJhbSB7c3RyaW5nfSBmb3JtYXQgLSBXaGF0IHN0eWxlIG9mIG9mZnNldCB0byByZXR1cm4uXG4gICAqICAgICAgICAgICAgICAgICAgICAgICAgICBBY2NlcHRzICduYXJyb3cnLCAnc2hvcnQnLCBvciAndGVjaGllJy4gUmV0dXJuaW5nICcrNicsICcrMDY6MDAnLCBvciAnKzA2MDAnIHJlc3BlY3RpdmVseVxuICAgKiBAcmV0dXJuIHtzdHJpbmd9XG4gICAqL1xuICA7XG5cbiAgX3Byb3RvLmZvcm1hdE9mZnNldCA9IGZ1bmN0aW9uIGZvcm1hdE9mZnNldCh0cywgZm9ybWF0KSB7XG4gICAgdGhyb3cgbmV3IFpvbmVJc0Fic3RyYWN0RXJyb3IoKTtcbiAgfVxuICAvKipcbiAgICogUmV0dXJuIHRoZSBvZmZzZXQgaW4gbWludXRlcyBmb3IgdGhpcyB6b25lIGF0IHRoZSBzcGVjaWZpZWQgdGltZXN0YW1wLlxuICAgKiBAYWJzdHJhY3RcbiAgICogQHBhcmFtIHtudW1iZXJ9IHRzIC0gRXBvY2ggbWlsbGlzZWNvbmRzIGZvciB3aGljaCB0byBjb21wdXRlIHRoZSBvZmZzZXRcbiAgICogQHJldHVybiB7bnVtYmVyfVxuICAgKi9cbiAgO1xuXG4gIF9wcm90by5vZmZzZXQgPSBmdW5jdGlvbiBvZmZzZXQodHMpIHtcbiAgICB0aHJvdyBuZXcgWm9uZUlzQWJzdHJhY3RFcnJvcigpO1xuICB9XG4gIC8qKlxuICAgKiBSZXR1cm4gd2hldGhlciB0aGlzIFpvbmUgaXMgZXF1YWwgdG8gYW5vdGhlciB6b25lXG4gICAqIEBhYnN0cmFjdFxuICAgKiBAcGFyYW0ge1pvbmV9IG90aGVyWm9uZSAtIHRoZSB6b25lIHRvIGNvbXBhcmVcbiAgICogQHJldHVybiB7Ym9vbGVhbn1cbiAgICovXG4gIDtcblxuICBfcHJvdG8uZXF1YWxzID0gZnVuY3Rpb24gZXF1YWxzKG90aGVyWm9uZSkge1xuICAgIHRocm93IG5ldyBab25lSXNBYnN0cmFjdEVycm9yKCk7XG4gIH1cbiAgLyoqXG4gICAqIFJldHVybiB3aGV0aGVyIHRoaXMgWm9uZSBpcyB2YWxpZC5cbiAgICogQGFic3RyYWN0XG4gICAqIEB0eXBlIHtib29sZWFufVxuICAgKi9cbiAgO1xuXG4gIF9jcmVhdGVDbGFzcyhab25lLCBbe1xuICAgIGtleTogXCJ0eXBlXCIsXG4gICAgZ2V0OlxuICAgIC8qKlxuICAgICAqIFRoZSB0eXBlIG9mIHpvbmVcbiAgICAgKiBAYWJzdHJhY3RcbiAgICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgIHRocm93IG5ldyBab25lSXNBYnN0cmFjdEVycm9yKCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRoZSBuYW1lIG9mIHRoaXMgem9uZS5cbiAgICAgKiBAYWJzdHJhY3RcbiAgICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgICAqL1xuXG4gIH0sIHtcbiAgICBrZXk6IFwibmFtZVwiLFxuICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgdGhyb3cgbmV3IFpvbmVJc0Fic3RyYWN0RXJyb3IoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB3aGV0aGVyIHRoZSBvZmZzZXQgaXMga25vd24gdG8gYmUgZml4ZWQgZm9yIHRoZSB3aG9sZSB5ZWFyLlxuICAgICAqIEBhYnN0cmFjdFxuICAgICAqIEB0eXBlIHtib29sZWFufVxuICAgICAqL1xuXG4gIH0sIHtcbiAgICBrZXk6IFwiaXNVbml2ZXJzYWxcIixcbiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgIHRocm93IG5ldyBab25lSXNBYnN0cmFjdEVycm9yKCk7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcImlzVmFsaWRcIixcbiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgIHRocm93IG5ldyBab25lSXNBYnN0cmFjdEVycm9yKCk7XG4gICAgfVxuICB9XSk7XG5cbiAgcmV0dXJuIFpvbmU7XG59KCk7XG5cbnZhciBzaW5nbGV0b24kMSA9IG51bGw7XG4vKipcbiAqIFJlcHJlc2VudHMgdGhlIGxvY2FsIHpvbmUgZm9yIHRoaXMgSmF2YVNjcmlwdCBlbnZpcm9ubWVudC5cbiAqIEBpbXBsZW1lbnRzIHtab25lfVxuICovXG5cbnZhciBTeXN0ZW1ab25lID0gLyojX19QVVJFX18qL2Z1bmN0aW9uIChfWm9uZSkge1xuICBfaW5oZXJpdHNMb29zZShTeXN0ZW1ab25lLCBfWm9uZSk7XG5cbiAgZnVuY3Rpb24gU3lzdGVtWm9uZSgpIHtcbiAgICByZXR1cm4gX1pvbmUuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzO1xuICB9XG5cbiAgdmFyIF9wcm90byA9IFN5c3RlbVpvbmUucHJvdG90eXBlO1xuXG4gIC8qKiBAb3ZlcnJpZGUgKiovXG4gIF9wcm90by5vZmZzZXROYW1lID0gZnVuY3Rpb24gb2Zmc2V0TmFtZSh0cywgX3JlZikge1xuICAgIHZhciBmb3JtYXQgPSBfcmVmLmZvcm1hdCxcbiAgICAgICAgbG9jYWxlID0gX3JlZi5sb2NhbGU7XG4gICAgcmV0dXJuIHBhcnNlWm9uZUluZm8odHMsIGZvcm1hdCwgbG9jYWxlKTtcbiAgfVxuICAvKiogQG92ZXJyaWRlICoqL1xuICA7XG5cbiAgX3Byb3RvLmZvcm1hdE9mZnNldCA9IGZ1bmN0aW9uIGZvcm1hdE9mZnNldCQxKHRzLCBmb3JtYXQpIHtcbiAgICByZXR1cm4gZm9ybWF0T2Zmc2V0KHRoaXMub2Zmc2V0KHRzKSwgZm9ybWF0KTtcbiAgfVxuICAvKiogQG92ZXJyaWRlICoqL1xuICA7XG5cbiAgX3Byb3RvLm9mZnNldCA9IGZ1bmN0aW9uIG9mZnNldCh0cykge1xuICAgIHJldHVybiAtbmV3IERhdGUodHMpLmdldFRpbWV6b25lT2Zmc2V0KCk7XG4gIH1cbiAgLyoqIEBvdmVycmlkZSAqKi9cbiAgO1xuXG4gIF9wcm90by5lcXVhbHMgPSBmdW5jdGlvbiBlcXVhbHMob3RoZXJab25lKSB7XG4gICAgcmV0dXJuIG90aGVyWm9uZS50eXBlID09PSBcInN5c3RlbVwiO1xuICB9XG4gIC8qKiBAb3ZlcnJpZGUgKiovXG4gIDtcblxuICBfY3JlYXRlQ2xhc3MoU3lzdGVtWm9uZSwgW3tcbiAgICBrZXk6IFwidHlwZVwiLFxuICAgIGdldDpcbiAgICAvKiogQG92ZXJyaWRlICoqL1xuICAgIGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgIHJldHVybiBcInN5c3RlbVwiO1xuICAgIH1cbiAgICAvKiogQG92ZXJyaWRlICoqL1xuXG4gIH0sIHtcbiAgICBrZXk6IFwibmFtZVwiLFxuICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgcmV0dXJuIG5ldyBJbnRsLkRhdGVUaW1lRm9ybWF0KCkucmVzb2x2ZWRPcHRpb25zKCkudGltZVpvbmU7XG4gICAgfVxuICAgIC8qKiBAb3ZlcnJpZGUgKiovXG5cbiAgfSwge1xuICAgIGtleTogXCJpc1VuaXZlcnNhbFwiLFxuICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJpc1ZhbGlkXCIsXG4gICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gIH1dLCBbe1xuICAgIGtleTogXCJpbnN0YW5jZVwiLFxuICAgIGdldDpcbiAgICAvKipcbiAgICAgKiBHZXQgYSBzaW5nbGV0b24gaW5zdGFuY2Ugb2YgdGhlIGxvY2FsIHpvbmVcbiAgICAgKiBAcmV0dXJuIHtTeXN0ZW1ab25lfVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgIGlmIChzaW5nbGV0b24kMSA9PT0gbnVsbCkge1xuICAgICAgICBzaW5nbGV0b24kMSA9IG5ldyBTeXN0ZW1ab25lKCk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBzaW5nbGV0b24kMTtcbiAgICB9XG4gIH1dKTtcblxuICByZXR1cm4gU3lzdGVtWm9uZTtcbn0oWm9uZSk7XG5cbnZhciBtYXRjaGluZ1JlZ2V4ID0gUmVnRXhwKFwiXlwiICsgaWFuYVJlZ2V4LnNvdXJjZSArIFwiJFwiKTtcbnZhciBkdGZDYWNoZSA9IHt9O1xuXG5mdW5jdGlvbiBtYWtlRFRGKHpvbmUpIHtcbiAgaWYgKCFkdGZDYWNoZVt6b25lXSkge1xuICAgIGR0ZkNhY2hlW3pvbmVdID0gbmV3IEludGwuRGF0ZVRpbWVGb3JtYXQoXCJlbi1VU1wiLCB7XG4gICAgICBob3VyMTI6IGZhbHNlLFxuICAgICAgdGltZVpvbmU6IHpvbmUsXG4gICAgICB5ZWFyOiBcIm51bWVyaWNcIixcbiAgICAgIG1vbnRoOiBcIjItZGlnaXRcIixcbiAgICAgIGRheTogXCIyLWRpZ2l0XCIsXG4gICAgICBob3VyOiBcIjItZGlnaXRcIixcbiAgICAgIG1pbnV0ZTogXCIyLWRpZ2l0XCIsXG4gICAgICBzZWNvbmQ6IFwiMi1kaWdpdFwiXG4gICAgfSk7XG4gIH1cblxuICByZXR1cm4gZHRmQ2FjaGVbem9uZV07XG59XG5cbnZhciB0eXBlVG9Qb3MgPSB7XG4gIHllYXI6IDAsXG4gIG1vbnRoOiAxLFxuICBkYXk6IDIsXG4gIGhvdXI6IDMsXG4gIG1pbnV0ZTogNCxcbiAgc2Vjb25kOiA1XG59O1xuXG5mdW5jdGlvbiBoYWNreU9mZnNldChkdGYsIGRhdGUpIHtcbiAgdmFyIGZvcm1hdHRlZCA9IGR0Zi5mb3JtYXQoZGF0ZSkucmVwbGFjZSgvXFx1MjAwRS9nLCBcIlwiKSxcbiAgICAgIHBhcnNlZCA9IC8oXFxkKylcXC8oXFxkKylcXC8oXFxkKyksPyAoXFxkKyk6KFxcZCspOihcXGQrKS8uZXhlYyhmb3JtYXR0ZWQpLFxuICAgICAgZk1vbnRoID0gcGFyc2VkWzFdLFxuICAgICAgZkRheSA9IHBhcnNlZFsyXSxcbiAgICAgIGZZZWFyID0gcGFyc2VkWzNdLFxuICAgICAgZkhvdXIgPSBwYXJzZWRbNF0sXG4gICAgICBmTWludXRlID0gcGFyc2VkWzVdLFxuICAgICAgZlNlY29uZCA9IHBhcnNlZFs2XTtcbiAgcmV0dXJuIFtmWWVhciwgZk1vbnRoLCBmRGF5LCBmSG91ciwgZk1pbnV0ZSwgZlNlY29uZF07XG59XG5cbmZ1bmN0aW9uIHBhcnRzT2Zmc2V0KGR0ZiwgZGF0ZSkge1xuICB2YXIgZm9ybWF0dGVkID0gZHRmLmZvcm1hdFRvUGFydHMoZGF0ZSksXG4gICAgICBmaWxsZWQgPSBbXTtcblxuICBmb3IgKHZhciBpID0gMDsgaSA8IGZvcm1hdHRlZC5sZW5ndGg7IGkrKykge1xuICAgIHZhciBfZm9ybWF0dGVkJGkgPSBmb3JtYXR0ZWRbaV0sXG4gICAgICAgIHR5cGUgPSBfZm9ybWF0dGVkJGkudHlwZSxcbiAgICAgICAgdmFsdWUgPSBfZm9ybWF0dGVkJGkudmFsdWUsXG4gICAgICAgIHBvcyA9IHR5cGVUb1Bvc1t0eXBlXTtcblxuICAgIGlmICghaXNVbmRlZmluZWQocG9zKSkge1xuICAgICAgZmlsbGVkW3Bvc10gPSBwYXJzZUludCh2YWx1ZSwgMTApO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiBmaWxsZWQ7XG59XG5cbnZhciBpYW5hWm9uZUNhY2hlID0ge307XG4vKipcbiAqIEEgem9uZSBpZGVudGlmaWVkIGJ5IGFuIElBTkEgaWRlbnRpZmllciwgbGlrZSBBbWVyaWNhL05ld19Zb3JrXG4gKiBAaW1wbGVtZW50cyB7Wm9uZX1cbiAqL1xuXG52YXIgSUFOQVpvbmUgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKF9ab25lKSB7XG4gIF9pbmhlcml0c0xvb3NlKElBTkFab25lLCBfWm9uZSk7XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBuYW1lIC0gWm9uZSBuYW1lXG4gICAqIEByZXR1cm4ge0lBTkFab25lfVxuICAgKi9cbiAgSUFOQVpvbmUuY3JlYXRlID0gZnVuY3Rpb24gY3JlYXRlKG5hbWUpIHtcbiAgICBpZiAoIWlhbmFab25lQ2FjaGVbbmFtZV0pIHtcbiAgICAgIGlhbmFab25lQ2FjaGVbbmFtZV0gPSBuZXcgSUFOQVpvbmUobmFtZSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGlhbmFab25lQ2FjaGVbbmFtZV07XG4gIH1cbiAgLyoqXG4gICAqIFJlc2V0IGxvY2FsIGNhY2hlcy4gU2hvdWxkIG9ubHkgYmUgbmVjZXNzYXJ5IGluIHRlc3Rpbmcgc2NlbmFyaW9zLlxuICAgKiBAcmV0dXJuIHt2b2lkfVxuICAgKi9cbiAgO1xuXG4gIElBTkFab25lLnJlc2V0Q2FjaGUgPSBmdW5jdGlvbiByZXNldENhY2hlKCkge1xuICAgIGlhbmFab25lQ2FjaGUgPSB7fTtcbiAgICBkdGZDYWNoZSA9IHt9O1xuICB9XG4gIC8qKlxuICAgKiBSZXR1cm5zIHdoZXRoZXIgdGhlIHByb3ZpZGVkIHN0cmluZyBpcyBhIHZhbGlkIHNwZWNpZmllci4gVGhpcyBvbmx5IGNoZWNrcyB0aGUgc3RyaW5nJ3MgZm9ybWF0LCBub3QgdGhhdCB0aGUgc3BlY2lmaWVyIGlkZW50aWZpZXMgYSBrbm93biB6b25lOyBzZWUgaXNWYWxpZFpvbmUgZm9yIHRoYXQuXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBzIC0gVGhlIHN0cmluZyB0byBjaGVjayB2YWxpZGl0eSBvblxuICAgKiBAZXhhbXBsZSBJQU5BWm9uZS5pc1ZhbGlkU3BlY2lmaWVyKFwiQW1lcmljYS9OZXdfWW9ya1wiKSAvLz0+IHRydWVcbiAgICogQGV4YW1wbGUgSUFOQVpvbmUuaXNWYWxpZFNwZWNpZmllcihcIkZhbnRhc2lhL0Nhc3RsZVwiKSAvLz0+IHRydWVcbiAgICogQGV4YW1wbGUgSUFOQVpvbmUuaXNWYWxpZFNwZWNpZmllcihcIlNwb3J0fn5ibG9ycFwiKSAvLz0+IGZhbHNlXG4gICAqIEByZXR1cm4ge2Jvb2xlYW59XG4gICAqL1xuICA7XG5cbiAgSUFOQVpvbmUuaXNWYWxpZFNwZWNpZmllciA9IGZ1bmN0aW9uIGlzVmFsaWRTcGVjaWZpZXIocykge1xuICAgIHJldHVybiAhIShzICYmIHMubWF0Y2gobWF0Y2hpbmdSZWdleCkpO1xuICB9XG4gIC8qKlxuICAgKiBSZXR1cm5zIHdoZXRoZXIgdGhlIHByb3ZpZGVkIHN0cmluZyBpZGVudGlmaWVzIGEgcmVhbCB6b25lXG4gICAqIEBwYXJhbSB7c3RyaW5nfSB6b25lIC0gVGhlIHN0cmluZyB0byBjaGVja1xuICAgKiBAZXhhbXBsZSBJQU5BWm9uZS5pc1ZhbGlkWm9uZShcIkFtZXJpY2EvTmV3X1lvcmtcIikgLy89PiB0cnVlXG4gICAqIEBleGFtcGxlIElBTkFab25lLmlzVmFsaWRab25lKFwiRmFudGFzaWEvQ2FzdGxlXCIpIC8vPT4gZmFsc2VcbiAgICogQGV4YW1wbGUgSUFOQVpvbmUuaXNWYWxpZFpvbmUoXCJTcG9ydH5+YmxvcnBcIikgLy89PiBmYWxzZVxuICAgKiBAcmV0dXJuIHtib29sZWFufVxuICAgKi9cbiAgO1xuXG4gIElBTkFab25lLmlzVmFsaWRab25lID0gZnVuY3Rpb24gaXNWYWxpZFpvbmUoem9uZSkge1xuICAgIGlmICghem9uZSkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIHRyeSB7XG4gICAgICBuZXcgSW50bC5EYXRlVGltZUZvcm1hdChcImVuLVVTXCIsIHtcbiAgICAgICAgdGltZVpvbmU6IHpvbmVcbiAgICAgIH0pLmZvcm1hdCgpO1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgfTtcblxuICBmdW5jdGlvbiBJQU5BWm9uZShuYW1lKSB7XG4gICAgdmFyIF90aGlzO1xuXG4gICAgX3RoaXMgPSBfWm9uZS5jYWxsKHRoaXMpIHx8IHRoaXM7XG4gICAgLyoqIEBwcml2YXRlICoqL1xuXG4gICAgX3RoaXMuem9uZU5hbWUgPSBuYW1lO1xuICAgIC8qKiBAcHJpdmF0ZSAqKi9cblxuICAgIF90aGlzLnZhbGlkID0gSUFOQVpvbmUuaXNWYWxpZFpvbmUobmFtZSk7XG4gICAgcmV0dXJuIF90aGlzO1xuICB9XG4gIC8qKiBAb3ZlcnJpZGUgKiovXG5cblxuICB2YXIgX3Byb3RvID0gSUFOQVpvbmUucHJvdG90eXBlO1xuXG4gIC8qKiBAb3ZlcnJpZGUgKiovXG4gIF9wcm90by5vZmZzZXROYW1lID0gZnVuY3Rpb24gb2Zmc2V0TmFtZSh0cywgX3JlZikge1xuICAgIHZhciBmb3JtYXQgPSBfcmVmLmZvcm1hdCxcbiAgICAgICAgbG9jYWxlID0gX3JlZi5sb2NhbGU7XG4gICAgcmV0dXJuIHBhcnNlWm9uZUluZm8odHMsIGZvcm1hdCwgbG9jYWxlLCB0aGlzLm5hbWUpO1xuICB9XG4gIC8qKiBAb3ZlcnJpZGUgKiovXG4gIDtcblxuICBfcHJvdG8uZm9ybWF0T2Zmc2V0ID0gZnVuY3Rpb24gZm9ybWF0T2Zmc2V0JDEodHMsIGZvcm1hdCkge1xuICAgIHJldHVybiBmb3JtYXRPZmZzZXQodGhpcy5vZmZzZXQodHMpLCBmb3JtYXQpO1xuICB9XG4gIC8qKiBAb3ZlcnJpZGUgKiovXG4gIDtcblxuICBfcHJvdG8ub2Zmc2V0ID0gZnVuY3Rpb24gb2Zmc2V0KHRzKSB7XG4gICAgdmFyIGRhdGUgPSBuZXcgRGF0ZSh0cyk7XG4gICAgaWYgKGlzTmFOKGRhdGUpKSByZXR1cm4gTmFOO1xuXG4gICAgdmFyIGR0ZiA9IG1ha2VEVEYodGhpcy5uYW1lKSxcbiAgICAgICAgX3JlZjIgPSBkdGYuZm9ybWF0VG9QYXJ0cyA/IHBhcnRzT2Zmc2V0KGR0ZiwgZGF0ZSkgOiBoYWNreU9mZnNldChkdGYsIGRhdGUpLFxuICAgICAgICB5ZWFyID0gX3JlZjJbMF0sXG4gICAgICAgIG1vbnRoID0gX3JlZjJbMV0sXG4gICAgICAgIGRheSA9IF9yZWYyWzJdLFxuICAgICAgICBob3VyID0gX3JlZjJbM10sXG4gICAgICAgIG1pbnV0ZSA9IF9yZWYyWzRdLFxuICAgICAgICBzZWNvbmQgPSBfcmVmMls1XTsgLy8gYmVjYXVzZSB3ZSdyZSB1c2luZyBob3VyMTIgYW5kIGh0dHBzOi8vYnVncy5jaHJvbWl1bS5vcmcvcC9jaHJvbWl1bS9pc3N1ZXMvZGV0YWlsP2lkPTEwMjU1NjQmY2FuPTImcT0lMjIyNCUzQTAwJTIyJTIwZGF0ZXRpbWVmb3JtYXRcblxuXG4gICAgdmFyIGFkanVzdGVkSG91ciA9IGhvdXIgPT09IDI0ID8gMCA6IGhvdXI7XG4gICAgdmFyIGFzVVRDID0gb2JqVG9Mb2NhbFRTKHtcbiAgICAgIHllYXI6IHllYXIsXG4gICAgICBtb250aDogbW9udGgsXG4gICAgICBkYXk6IGRheSxcbiAgICAgIGhvdXI6IGFkanVzdGVkSG91cixcbiAgICAgIG1pbnV0ZTogbWludXRlLFxuICAgICAgc2Vjb25kOiBzZWNvbmQsXG4gICAgICBtaWxsaXNlY29uZDogMFxuICAgIH0pO1xuICAgIHZhciBhc1RTID0gK2RhdGU7XG4gICAgdmFyIG92ZXIgPSBhc1RTICUgMTAwMDtcbiAgICBhc1RTIC09IG92ZXIgPj0gMCA/IG92ZXIgOiAxMDAwICsgb3ZlcjtcbiAgICByZXR1cm4gKGFzVVRDIC0gYXNUUykgLyAoNjAgKiAxMDAwKTtcbiAgfVxuICAvKiogQG92ZXJyaWRlICoqL1xuICA7XG5cbiAgX3Byb3RvLmVxdWFscyA9IGZ1bmN0aW9uIGVxdWFscyhvdGhlclpvbmUpIHtcbiAgICByZXR1cm4gb3RoZXJab25lLnR5cGUgPT09IFwiaWFuYVwiICYmIG90aGVyWm9uZS5uYW1lID09PSB0aGlzLm5hbWU7XG4gIH1cbiAgLyoqIEBvdmVycmlkZSAqKi9cbiAgO1xuXG4gIF9jcmVhdGVDbGFzcyhJQU5BWm9uZSwgW3tcbiAgICBrZXk6IFwidHlwZVwiLFxuICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgcmV0dXJuIFwiaWFuYVwiO1xuICAgIH1cbiAgICAvKiogQG92ZXJyaWRlICoqL1xuXG4gIH0sIHtcbiAgICBrZXk6IFwibmFtZVwiLFxuICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgcmV0dXJuIHRoaXMuem9uZU5hbWU7XG4gICAgfVxuICAgIC8qKiBAb3ZlcnJpZGUgKiovXG5cbiAgfSwge1xuICAgIGtleTogXCJpc1VuaXZlcnNhbFwiLFxuICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJpc1ZhbGlkXCIsXG4gICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICByZXR1cm4gdGhpcy52YWxpZDtcbiAgICB9XG4gIH1dKTtcblxuICByZXR1cm4gSUFOQVpvbmU7XG59KFpvbmUpO1xuXG52YXIgc2luZ2xldG9uID0gbnVsbDtcbi8qKlxuICogQSB6b25lIHdpdGggYSBmaXhlZCBvZmZzZXQgKG1lYW5pbmcgbm8gRFNUKVxuICogQGltcGxlbWVudHMge1pvbmV9XG4gKi9cblxudmFyIEZpeGVkT2Zmc2V0Wm9uZSA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoX1pvbmUpIHtcbiAgX2luaGVyaXRzTG9vc2UoRml4ZWRPZmZzZXRab25lLCBfWm9uZSk7XG5cbiAgLyoqXG4gICAqIEdldCBhbiBpbnN0YW5jZSB3aXRoIGEgc3BlY2lmaWVkIG9mZnNldFxuICAgKiBAcGFyYW0ge251bWJlcn0gb2Zmc2V0IC0gVGhlIG9mZnNldCBpbiBtaW51dGVzXG4gICAqIEByZXR1cm4ge0ZpeGVkT2Zmc2V0Wm9uZX1cbiAgICovXG4gIEZpeGVkT2Zmc2V0Wm9uZS5pbnN0YW5jZSA9IGZ1bmN0aW9uIGluc3RhbmNlKG9mZnNldCkge1xuICAgIHJldHVybiBvZmZzZXQgPT09IDAgPyBGaXhlZE9mZnNldFpvbmUudXRjSW5zdGFuY2UgOiBuZXcgRml4ZWRPZmZzZXRab25lKG9mZnNldCk7XG4gIH1cbiAgLyoqXG4gICAqIEdldCBhbiBpbnN0YW5jZSBvZiBGaXhlZE9mZnNldFpvbmUgZnJvbSBhIFVUQyBvZmZzZXQgc3RyaW5nLCBsaWtlIFwiVVRDKzZcIlxuICAgKiBAcGFyYW0ge3N0cmluZ30gcyAtIFRoZSBvZmZzZXQgc3RyaW5nIHRvIHBhcnNlXG4gICAqIEBleGFtcGxlIEZpeGVkT2Zmc2V0Wm9uZS5wYXJzZVNwZWNpZmllcihcIlVUQys2XCIpXG4gICAqIEBleGFtcGxlIEZpeGVkT2Zmc2V0Wm9uZS5wYXJzZVNwZWNpZmllcihcIlVUQyswNlwiKVxuICAgKiBAZXhhbXBsZSBGaXhlZE9mZnNldFpvbmUucGFyc2VTcGVjaWZpZXIoXCJVVEMtNjowMFwiKVxuICAgKiBAcmV0dXJuIHtGaXhlZE9mZnNldFpvbmV9XG4gICAqL1xuICA7XG5cbiAgRml4ZWRPZmZzZXRab25lLnBhcnNlU3BlY2lmaWVyID0gZnVuY3Rpb24gcGFyc2VTcGVjaWZpZXIocykge1xuICAgIGlmIChzKSB7XG4gICAgICB2YXIgciA9IHMubWF0Y2goL151dGMoPzooWystXVxcZHsxLDJ9KSg/OjooXFxkezJ9KSk/KT8kL2kpO1xuXG4gICAgICBpZiAocikge1xuICAgICAgICByZXR1cm4gbmV3IEZpeGVkT2Zmc2V0Wm9uZShzaWduZWRPZmZzZXQoclsxXSwgclsyXSkpO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBudWxsO1xuICB9O1xuXG4gIGZ1bmN0aW9uIEZpeGVkT2Zmc2V0Wm9uZShvZmZzZXQpIHtcbiAgICB2YXIgX3RoaXM7XG5cbiAgICBfdGhpcyA9IF9ab25lLmNhbGwodGhpcykgfHwgdGhpcztcbiAgICAvKiogQHByaXZhdGUgKiovXG5cbiAgICBfdGhpcy5maXhlZCA9IG9mZnNldDtcbiAgICByZXR1cm4gX3RoaXM7XG4gIH1cbiAgLyoqIEBvdmVycmlkZSAqKi9cblxuXG4gIHZhciBfcHJvdG8gPSBGaXhlZE9mZnNldFpvbmUucHJvdG90eXBlO1xuXG4gIC8qKiBAb3ZlcnJpZGUgKiovXG4gIF9wcm90by5vZmZzZXROYW1lID0gZnVuY3Rpb24gb2Zmc2V0TmFtZSgpIHtcbiAgICByZXR1cm4gdGhpcy5uYW1lO1xuICB9XG4gIC8qKiBAb3ZlcnJpZGUgKiovXG4gIDtcblxuICBfcHJvdG8uZm9ybWF0T2Zmc2V0ID0gZnVuY3Rpb24gZm9ybWF0T2Zmc2V0JDEodHMsIGZvcm1hdCkge1xuICAgIHJldHVybiBmb3JtYXRPZmZzZXQodGhpcy5maXhlZCwgZm9ybWF0KTtcbiAgfVxuICAvKiogQG92ZXJyaWRlICoqL1xuICA7XG5cbiAgLyoqIEBvdmVycmlkZSAqKi9cbiAgX3Byb3RvLm9mZnNldCA9IGZ1bmN0aW9uIG9mZnNldCgpIHtcbiAgICByZXR1cm4gdGhpcy5maXhlZDtcbiAgfVxuICAvKiogQG92ZXJyaWRlICoqL1xuICA7XG5cbiAgX3Byb3RvLmVxdWFscyA9IGZ1bmN0aW9uIGVxdWFscyhvdGhlclpvbmUpIHtcbiAgICByZXR1cm4gb3RoZXJab25lLnR5cGUgPT09IFwiZml4ZWRcIiAmJiBvdGhlclpvbmUuZml4ZWQgPT09IHRoaXMuZml4ZWQ7XG4gIH1cbiAgLyoqIEBvdmVycmlkZSAqKi9cbiAgO1xuXG4gIF9jcmVhdGVDbGFzcyhGaXhlZE9mZnNldFpvbmUsIFt7XG4gICAga2V5OiBcInR5cGVcIixcbiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgIHJldHVybiBcImZpeGVkXCI7XG4gICAgfVxuICAgIC8qKiBAb3ZlcnJpZGUgKiovXG5cbiAgfSwge1xuICAgIGtleTogXCJuYW1lXCIsXG4gICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICByZXR1cm4gdGhpcy5maXhlZCA9PT0gMCA/IFwiVVRDXCIgOiBcIlVUQ1wiICsgZm9ybWF0T2Zmc2V0KHRoaXMuZml4ZWQsIFwibmFycm93XCIpO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJpc1VuaXZlcnNhbFwiLFxuICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcImlzVmFsaWRcIixcbiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgfV0sIFt7XG4gICAga2V5OiBcInV0Y0luc3RhbmNlXCIsXG4gICAgZ2V0OlxuICAgIC8qKlxuICAgICAqIEdldCBhIHNpbmdsZXRvbiBpbnN0YW5jZSBvZiBVVENcbiAgICAgKiBAcmV0dXJuIHtGaXhlZE9mZnNldFpvbmV9XG4gICAgICovXG4gICAgZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgaWYgKHNpbmdsZXRvbiA9PT0gbnVsbCkge1xuICAgICAgICBzaW5nbGV0b24gPSBuZXcgRml4ZWRPZmZzZXRab25lKDApO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gc2luZ2xldG9uO1xuICAgIH1cbiAgfV0pO1xuXG4gIHJldHVybiBGaXhlZE9mZnNldFpvbmU7XG59KFpvbmUpO1xuXG4vKipcbiAqIEEgem9uZSB0aGF0IGZhaWxlZCB0byBwYXJzZS4gWW91IHNob3VsZCBuZXZlciBuZWVkIHRvIGluc3RhbnRpYXRlIHRoaXMuXG4gKiBAaW1wbGVtZW50cyB7Wm9uZX1cbiAqL1xuXG52YXIgSW52YWxpZFpvbmUgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKF9ab25lKSB7XG4gIF9pbmhlcml0c0xvb3NlKEludmFsaWRab25lLCBfWm9uZSk7XG5cbiAgZnVuY3Rpb24gSW52YWxpZFpvbmUoem9uZU5hbWUpIHtcbiAgICB2YXIgX3RoaXM7XG5cbiAgICBfdGhpcyA9IF9ab25lLmNhbGwodGhpcykgfHwgdGhpcztcbiAgICAvKiogIEBwcml2YXRlICovXG5cbiAgICBfdGhpcy56b25lTmFtZSA9IHpvbmVOYW1lO1xuICAgIHJldHVybiBfdGhpcztcbiAgfVxuICAvKiogQG92ZXJyaWRlICoqL1xuXG5cbiAgdmFyIF9wcm90byA9IEludmFsaWRab25lLnByb3RvdHlwZTtcblxuICAvKiogQG92ZXJyaWRlICoqL1xuICBfcHJvdG8ub2Zmc2V0TmFtZSA9IGZ1bmN0aW9uIG9mZnNldE5hbWUoKSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbiAgLyoqIEBvdmVycmlkZSAqKi9cbiAgO1xuXG4gIF9wcm90by5mb3JtYXRPZmZzZXQgPSBmdW5jdGlvbiBmb3JtYXRPZmZzZXQoKSB7XG4gICAgcmV0dXJuIFwiXCI7XG4gIH1cbiAgLyoqIEBvdmVycmlkZSAqKi9cbiAgO1xuXG4gIF9wcm90by5vZmZzZXQgPSBmdW5jdGlvbiBvZmZzZXQoKSB7XG4gICAgcmV0dXJuIE5hTjtcbiAgfVxuICAvKiogQG92ZXJyaWRlICoqL1xuICA7XG5cbiAgX3Byb3RvLmVxdWFscyA9IGZ1bmN0aW9uIGVxdWFscygpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgLyoqIEBvdmVycmlkZSAqKi9cbiAgO1xuXG4gIF9jcmVhdGVDbGFzcyhJbnZhbGlkWm9uZSwgW3tcbiAgICBrZXk6IFwidHlwZVwiLFxuICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgcmV0dXJuIFwiaW52YWxpZFwiO1xuICAgIH1cbiAgICAvKiogQG92ZXJyaWRlICoqL1xuXG4gIH0sIHtcbiAgICBrZXk6IFwibmFtZVwiLFxuICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgcmV0dXJuIHRoaXMuem9uZU5hbWU7XG4gICAgfVxuICAgIC8qKiBAb3ZlcnJpZGUgKiovXG5cbiAgfSwge1xuICAgIGtleTogXCJpc1VuaXZlcnNhbFwiLFxuICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJpc1ZhbGlkXCIsXG4gICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICB9XSk7XG5cbiAgcmV0dXJuIEludmFsaWRab25lO1xufShab25lKTtcblxuLyoqXG4gKiBAcHJpdmF0ZVxuICovXG5mdW5jdGlvbiBub3JtYWxpemVab25lKGlucHV0LCBkZWZhdWx0Wm9uZSkge1xuXG4gIGlmIChpc1VuZGVmaW5lZChpbnB1dCkgfHwgaW5wdXQgPT09IG51bGwpIHtcbiAgICByZXR1cm4gZGVmYXVsdFpvbmU7XG4gIH0gZWxzZSBpZiAoaW5wdXQgaW5zdGFuY2VvZiBab25lKSB7XG4gICAgcmV0dXJuIGlucHV0O1xuICB9IGVsc2UgaWYgKGlzU3RyaW5nKGlucHV0KSkge1xuICAgIHZhciBsb3dlcmVkID0gaW5wdXQudG9Mb3dlckNhc2UoKTtcbiAgICBpZiAobG93ZXJlZCA9PT0gXCJsb2NhbFwiIHx8IGxvd2VyZWQgPT09IFwic3lzdGVtXCIpIHJldHVybiBkZWZhdWx0Wm9uZTtlbHNlIGlmIChsb3dlcmVkID09PSBcInV0Y1wiIHx8IGxvd2VyZWQgPT09IFwiZ210XCIpIHJldHVybiBGaXhlZE9mZnNldFpvbmUudXRjSW5zdGFuY2U7ZWxzZSBpZiAoSUFOQVpvbmUuaXNWYWxpZFNwZWNpZmllcihsb3dlcmVkKSkgcmV0dXJuIElBTkFab25lLmNyZWF0ZShpbnB1dCk7ZWxzZSByZXR1cm4gRml4ZWRPZmZzZXRab25lLnBhcnNlU3BlY2lmaWVyKGxvd2VyZWQpIHx8IG5ldyBJbnZhbGlkWm9uZShpbnB1dCk7XG4gIH0gZWxzZSBpZiAoaXNOdW1iZXIoaW5wdXQpKSB7XG4gICAgcmV0dXJuIEZpeGVkT2Zmc2V0Wm9uZS5pbnN0YW5jZShpbnB1dCk7XG4gIH0gZWxzZSBpZiAodHlwZW9mIGlucHV0ID09PSBcIm9iamVjdFwiICYmIGlucHV0Lm9mZnNldCAmJiB0eXBlb2YgaW5wdXQub2Zmc2V0ID09PSBcIm51bWJlclwiKSB7XG4gICAgLy8gVGhpcyBpcyBkdW1iLCBidXQgdGhlIGluc3RhbmNlb2YgY2hlY2sgYWJvdmUgZG9lc24ndCBzZWVtIHRvIHJlYWxseSB3b3JrXG4gICAgLy8gc28gd2UncmUgZHVjayBjaGVja2luZyBpdFxuICAgIHJldHVybiBpbnB1dDtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gbmV3IEludmFsaWRab25lKGlucHV0KTtcbiAgfVxufVxuXG52YXIgbm93ID0gZnVuY3Rpb24gbm93KCkge1xuICByZXR1cm4gRGF0ZS5ub3coKTtcbn0sXG4gICAgZGVmYXVsdFpvbmUgPSBcInN5c3RlbVwiLFxuICAgIGRlZmF1bHRMb2NhbGUgPSBudWxsLFxuICAgIGRlZmF1bHROdW1iZXJpbmdTeXN0ZW0gPSBudWxsLFxuICAgIGRlZmF1bHRPdXRwdXRDYWxlbmRhciA9IG51bGwsXG4gICAgdGhyb3dPbkludmFsaWQ7XG4vKipcbiAqIFNldHRpbmdzIGNvbnRhaW5zIHN0YXRpYyBnZXR0ZXJzIGFuZCBzZXR0ZXJzIHRoYXQgY29udHJvbCBMdXhvbidzIG92ZXJhbGwgYmVoYXZpb3IuIEx1eG9uIGlzIGEgc2ltcGxlIGxpYnJhcnkgd2l0aCBmZXcgb3B0aW9ucywgYnV0IHRoZSBvbmVzIGl0IGRvZXMgaGF2ZSBsaXZlIGhlcmUuXG4gKi9cblxuXG52YXIgU2V0dGluZ3MgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkge1xuICBmdW5jdGlvbiBTZXR0aW5ncygpIHt9XG5cbiAgLyoqXG4gICAqIFJlc2V0IEx1eG9uJ3MgZ2xvYmFsIGNhY2hlcy4gU2hvdWxkIG9ubHkgYmUgbmVjZXNzYXJ5IGluIHRlc3Rpbmcgc2NlbmFyaW9zLlxuICAgKiBAcmV0dXJuIHt2b2lkfVxuICAgKi9cbiAgU2V0dGluZ3MucmVzZXRDYWNoZXMgPSBmdW5jdGlvbiByZXNldENhY2hlcygpIHtcbiAgICBMb2NhbGUucmVzZXRDYWNoZSgpO1xuICAgIElBTkFab25lLnJlc2V0Q2FjaGUoKTtcbiAgfTtcblxuICBfY3JlYXRlQ2xhc3MoU2V0dGluZ3MsIG51bGwsIFt7XG4gICAga2V5OiBcIm5vd1wiLFxuICAgIGdldDpcbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIGNhbGxiYWNrIGZvciByZXR1cm5pbmcgdGhlIGN1cnJlbnQgdGltZXN0YW1wLlxuICAgICAqIEB0eXBlIHtmdW5jdGlvbn1cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICByZXR1cm4gbm93O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTZXQgdGhlIGNhbGxiYWNrIGZvciByZXR1cm5pbmcgdGhlIGN1cnJlbnQgdGltZXN0YW1wLlxuICAgICAqIFRoZSBmdW5jdGlvbiBzaG91bGQgcmV0dXJuIGEgbnVtYmVyLCB3aGljaCB3aWxsIGJlIGludGVycHJldGVkIGFzIGFuIEVwb2NoIG1pbGxpc2Vjb25kIGNvdW50XG4gICAgICogQHR5cGUge2Z1bmN0aW9ufVxuICAgICAqIEBleGFtcGxlIFNldHRpbmdzLm5vdyA9ICgpID0+IERhdGUubm93KCkgKyAzMDAwIC8vIHByZXRlbmQgaXQgaXMgMyBzZWNvbmRzIGluIHRoZSBmdXR1cmVcbiAgICAgKiBAZXhhbXBsZSBTZXR0aW5ncy5ub3cgPSAoKSA9PiAwIC8vIGFsd2F5cyBwcmV0ZW5kIGl0J3MgSmFuIDEsIDE5NzAgYXQgbWlkbmlnaHQgaW4gVVRDIHRpbWVcbiAgICAgKi9cbiAgICAsXG4gICAgc2V0OiBmdW5jdGlvbiBzZXQobikge1xuICAgICAgbm93ID0gbjtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU2V0IHRoZSBkZWZhdWx0IHRpbWUgem9uZSB0byBjcmVhdGUgRGF0ZVRpbWVzIGluLiBEb2VzIG5vdCBhZmZlY3QgZXhpc3RpbmcgaW5zdGFuY2VzLlxuICAgICAqIFVzZSB0aGUgdmFsdWUgXCJzeXN0ZW1cIiB0byByZXNldCB0aGlzIHZhbHVlIHRvIHRoZSBzeXN0ZW0ncyB0aW1lIHpvbmUuXG4gICAgICogQHR5cGUge3N0cmluZ31cbiAgICAgKi9cblxuICB9LCB7XG4gICAga2V5OiBcImRlZmF1bHRab25lXCIsXG4gICAgZ2V0OlxuICAgIC8qKlxuICAgICAqIEdldCB0aGUgZGVmYXVsdCB0aW1lIHpvbmUgb2JqZWN0IGN1cnJlbnRseSB1c2VkIHRvIGNyZWF0ZSBEYXRlVGltZXMuIERvZXMgbm90IGFmZmVjdCBleGlzdGluZyBpbnN0YW5jZXMuXG4gICAgICogVGhlIGRlZmF1bHQgdmFsdWUgaXMgdGhlIHN5c3RlbSdzIHRpbWUgem9uZSAodGhlIG9uZSBzZXQgb24gdGhlIG1hY2hpbmUgdGhhdCBydW5zIHRoaXMgY29kZSkuXG4gICAgICogQHR5cGUge1pvbmV9XG4gICAgICovXG4gICAgZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgcmV0dXJuIG5vcm1hbGl6ZVpvbmUoZGVmYXVsdFpvbmUsIFN5c3RlbVpvbmUuaW5zdGFuY2UpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIGRlZmF1bHQgbG9jYWxlIHRvIGNyZWF0ZSBEYXRlVGltZXMgd2l0aC4gRG9lcyBub3QgYWZmZWN0IGV4aXN0aW5nIGluc3RhbmNlcy5cbiAgICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgICAqL1xuICAgICxcbiAgICBzZXQ6IGZ1bmN0aW9uIHNldCh6b25lKSB7XG4gICAgICBkZWZhdWx0Wm9uZSA9IHpvbmU7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcImRlZmF1bHRMb2NhbGVcIixcbiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgIHJldHVybiBkZWZhdWx0TG9jYWxlO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTZXQgdGhlIGRlZmF1bHQgbG9jYWxlIHRvIGNyZWF0ZSBEYXRlVGltZXMgd2l0aC4gRG9lcyBub3QgYWZmZWN0IGV4aXN0aW5nIGluc3RhbmNlcy5cbiAgICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgICAqL1xuICAgICxcbiAgICBzZXQ6IGZ1bmN0aW9uIHNldChsb2NhbGUpIHtcbiAgICAgIGRlZmF1bHRMb2NhbGUgPSBsb2NhbGU7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEdldCB0aGUgZGVmYXVsdCBudW1iZXJpbmcgc3lzdGVtIHRvIGNyZWF0ZSBEYXRlVGltZXMgd2l0aC4gRG9lcyBub3QgYWZmZWN0IGV4aXN0aW5nIGluc3RhbmNlcy5cbiAgICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgICAqL1xuXG4gIH0sIHtcbiAgICBrZXk6IFwiZGVmYXVsdE51bWJlcmluZ1N5c3RlbVwiLFxuICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgcmV0dXJuIGRlZmF1bHROdW1iZXJpbmdTeXN0ZW07XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNldCB0aGUgZGVmYXVsdCBudW1iZXJpbmcgc3lzdGVtIHRvIGNyZWF0ZSBEYXRlVGltZXMgd2l0aC4gRG9lcyBub3QgYWZmZWN0IGV4aXN0aW5nIGluc3RhbmNlcy5cbiAgICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgICAqL1xuICAgICxcbiAgICBzZXQ6IGZ1bmN0aW9uIHNldChudW1iZXJpbmdTeXN0ZW0pIHtcbiAgICAgIGRlZmF1bHROdW1iZXJpbmdTeXN0ZW0gPSBudW1iZXJpbmdTeXN0ZW07XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEdldCB0aGUgZGVmYXVsdCBvdXRwdXQgY2FsZW5kYXIgdG8gY3JlYXRlIERhdGVUaW1lcyB3aXRoLiBEb2VzIG5vdCBhZmZlY3QgZXhpc3RpbmcgaW5zdGFuY2VzLlxuICAgICAqIEB0eXBlIHtzdHJpbmd9XG4gICAgICovXG5cbiAgfSwge1xuICAgIGtleTogXCJkZWZhdWx0T3V0cHV0Q2FsZW5kYXJcIixcbiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgIHJldHVybiBkZWZhdWx0T3V0cHV0Q2FsZW5kYXI7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNldCB0aGUgZGVmYXVsdCBvdXRwdXQgY2FsZW5kYXIgdG8gY3JlYXRlIERhdGVUaW1lcyB3aXRoLiBEb2VzIG5vdCBhZmZlY3QgZXhpc3RpbmcgaW5zdGFuY2VzLlxuICAgICAqIEB0eXBlIHtzdHJpbmd9XG4gICAgICovXG4gICAgLFxuICAgIHNldDogZnVuY3Rpb24gc2V0KG91dHB1dENhbGVuZGFyKSB7XG4gICAgICBkZWZhdWx0T3V0cHV0Q2FsZW5kYXIgPSBvdXRwdXRDYWxlbmRhcjtcbiAgICB9XG4gICAgLyoqXG4gICAgICogR2V0IHdoZXRoZXIgTHV4b24gd2lsbCB0aHJvdyB3aGVuIGl0IGVuY291bnRlcnMgaW52YWxpZCBEYXRlVGltZXMsIER1cmF0aW9ucywgb3IgSW50ZXJ2YWxzXG4gICAgICogQHR5cGUge2Jvb2xlYW59XG4gICAgICovXG5cbiAgfSwge1xuICAgIGtleTogXCJ0aHJvd09uSW52YWxpZFwiLFxuICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgcmV0dXJuIHRocm93T25JbnZhbGlkO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTZXQgd2hldGhlciBMdXhvbiB3aWxsIHRocm93IHdoZW4gaXQgZW5jb3VudGVycyBpbnZhbGlkIERhdGVUaW1lcywgRHVyYXRpb25zLCBvciBJbnRlcnZhbHNcbiAgICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICAgKi9cbiAgICAsXG4gICAgc2V0OiBmdW5jdGlvbiBzZXQodCkge1xuICAgICAgdGhyb3dPbkludmFsaWQgPSB0O1xuICAgIH1cbiAgfV0pO1xuXG4gIHJldHVybiBTZXR0aW5ncztcbn0oKTtcblxudmFyIF9leGNsdWRlZCA9IFtcImJhc2VcIl0sXG4gICAgX2V4Y2x1ZGVkMiA9IFtcInBhZFRvXCIsIFwiZmxvb3JcIl07XG5cbnZhciBpbnRsTEZDYWNoZSA9IHt9O1xuXG5mdW5jdGlvbiBnZXRDYWNoZWRMRihsb2NTdHJpbmcsIG9wdHMpIHtcbiAgaWYgKG9wdHMgPT09IHZvaWQgMCkge1xuICAgIG9wdHMgPSB7fTtcbiAgfVxuXG4gIHZhciBrZXkgPSBKU09OLnN0cmluZ2lmeShbbG9jU3RyaW5nLCBvcHRzXSk7XG4gIHZhciBkdGYgPSBpbnRsTEZDYWNoZVtrZXldO1xuXG4gIGlmICghZHRmKSB7XG4gICAgZHRmID0gbmV3IEludGwuTGlzdEZvcm1hdChsb2NTdHJpbmcsIG9wdHMpO1xuICAgIGludGxMRkNhY2hlW2tleV0gPSBkdGY7XG4gIH1cblxuICByZXR1cm4gZHRmO1xufVxuXG52YXIgaW50bERUQ2FjaGUgPSB7fTtcblxuZnVuY3Rpb24gZ2V0Q2FjaGVkRFRGKGxvY1N0cmluZywgb3B0cykge1xuICBpZiAob3B0cyA9PT0gdm9pZCAwKSB7XG4gICAgb3B0cyA9IHt9O1xuICB9XG5cbiAgdmFyIGtleSA9IEpTT04uc3RyaW5naWZ5KFtsb2NTdHJpbmcsIG9wdHNdKTtcbiAgdmFyIGR0ZiA9IGludGxEVENhY2hlW2tleV07XG5cbiAgaWYgKCFkdGYpIHtcbiAgICBkdGYgPSBuZXcgSW50bC5EYXRlVGltZUZvcm1hdChsb2NTdHJpbmcsIG9wdHMpO1xuICAgIGludGxEVENhY2hlW2tleV0gPSBkdGY7XG4gIH1cblxuICByZXR1cm4gZHRmO1xufVxuXG52YXIgaW50bE51bUNhY2hlID0ge307XG5cbmZ1bmN0aW9uIGdldENhY2hlZElORihsb2NTdHJpbmcsIG9wdHMpIHtcbiAgaWYgKG9wdHMgPT09IHZvaWQgMCkge1xuICAgIG9wdHMgPSB7fTtcbiAgfVxuXG4gIHZhciBrZXkgPSBKU09OLnN0cmluZ2lmeShbbG9jU3RyaW5nLCBvcHRzXSk7XG4gIHZhciBpbmYgPSBpbnRsTnVtQ2FjaGVba2V5XTtcblxuICBpZiAoIWluZikge1xuICAgIGluZiA9IG5ldyBJbnRsLk51bWJlckZvcm1hdChsb2NTdHJpbmcsIG9wdHMpO1xuICAgIGludGxOdW1DYWNoZVtrZXldID0gaW5mO1xuICB9XG5cbiAgcmV0dXJuIGluZjtcbn1cblxudmFyIGludGxSZWxDYWNoZSA9IHt9O1xuXG5mdW5jdGlvbiBnZXRDYWNoZWRSVEYobG9jU3RyaW5nLCBvcHRzKSB7XG4gIGlmIChvcHRzID09PSB2b2lkIDApIHtcbiAgICBvcHRzID0ge307XG4gIH1cblxuICB2YXIgX29wdHMgPSBvcHRzO1xuICAgICAgX29wdHMuYmFzZTtcbiAgICAgIHZhciBjYWNoZUtleU9wdHMgPSBfb2JqZWN0V2l0aG91dFByb3BlcnRpZXNMb29zZShfb3B0cywgX2V4Y2x1ZGVkKTsgLy8gZXhjbHVkZSBgYmFzZWAgZnJvbSB0aGUgb3B0aW9uc1xuXG5cbiAgdmFyIGtleSA9IEpTT04uc3RyaW5naWZ5KFtsb2NTdHJpbmcsIGNhY2hlS2V5T3B0c10pO1xuICB2YXIgaW5mID0gaW50bFJlbENhY2hlW2tleV07XG5cbiAgaWYgKCFpbmYpIHtcbiAgICBpbmYgPSBuZXcgSW50bC5SZWxhdGl2ZVRpbWVGb3JtYXQobG9jU3RyaW5nLCBvcHRzKTtcbiAgICBpbnRsUmVsQ2FjaGVba2V5XSA9IGluZjtcbiAgfVxuXG4gIHJldHVybiBpbmY7XG59XG5cbnZhciBzeXNMb2NhbGVDYWNoZSA9IG51bGw7XG5cbmZ1bmN0aW9uIHN5c3RlbUxvY2FsZSgpIHtcbiAgaWYgKHN5c0xvY2FsZUNhY2hlKSB7XG4gICAgcmV0dXJuIHN5c0xvY2FsZUNhY2hlO1xuICB9IGVsc2Uge1xuICAgIHN5c0xvY2FsZUNhY2hlID0gbmV3IEludGwuRGF0ZVRpbWVGb3JtYXQoKS5yZXNvbHZlZE9wdGlvbnMoKS5sb2NhbGU7XG4gICAgcmV0dXJuIHN5c0xvY2FsZUNhY2hlO1xuICB9XG59XG5cbmZ1bmN0aW9uIHBhcnNlTG9jYWxlU3RyaW5nKGxvY2FsZVN0cikge1xuICAvLyBJIHJlYWxseSB3YW50IHRvIGF2b2lkIHdyaXRpbmcgYSBCQ1AgNDcgcGFyc2VyXG4gIC8vIHNlZSwgZS5nLiBodHRwczovL2dpdGh1Yi5jb20vd29vb3JtL2JjcC00N1xuICAvLyBJbnN0ZWFkLCB3ZSdsbCBkbyB0aGlzOlxuICAvLyBhKSBpZiB0aGUgc3RyaW5nIGhhcyBubyAtdSBleHRlbnNpb25zLCBqdXN0IGxlYXZlIGl0IGFsb25lXG4gIC8vIGIpIGlmIGl0IGRvZXMsIHVzZSBJbnRsIHRvIHJlc29sdmUgZXZlcnl0aGluZ1xuICAvLyBjKSBpZiBJbnRsIGZhaWxzLCB0cnkgYWdhaW4gd2l0aG91dCB0aGUgLXVcbiAgdmFyIHVJbmRleCA9IGxvY2FsZVN0ci5pbmRleE9mKFwiLXUtXCIpO1xuXG4gIGlmICh1SW5kZXggPT09IC0xKSB7XG4gICAgcmV0dXJuIFtsb2NhbGVTdHJdO1xuICB9IGVsc2Uge1xuICAgIHZhciBvcHRpb25zO1xuICAgIHZhciBzbWFsbGVyID0gbG9jYWxlU3RyLnN1YnN0cmluZygwLCB1SW5kZXgpO1xuXG4gICAgdHJ5IHtcbiAgICAgIG9wdGlvbnMgPSBnZXRDYWNoZWREVEYobG9jYWxlU3RyKS5yZXNvbHZlZE9wdGlvbnMoKTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICBvcHRpb25zID0gZ2V0Q2FjaGVkRFRGKHNtYWxsZXIpLnJlc29sdmVkT3B0aW9ucygpO1xuICAgIH1cblxuICAgIHZhciBfb3B0aW9ucyA9IG9wdGlvbnMsXG4gICAgICAgIG51bWJlcmluZ1N5c3RlbSA9IF9vcHRpb25zLm51bWJlcmluZ1N5c3RlbSxcbiAgICAgICAgY2FsZW5kYXIgPSBfb3B0aW9ucy5jYWxlbmRhcjsgLy8gcmV0dXJuIHRoZSBzbWFsbGVyIG9uZSBzbyB0aGF0IHdlIGNhbiBhcHBlbmQgdGhlIGNhbGVuZGFyIGFuZCBudW1iZXJpbmcgb3ZlcnJpZGVzIHRvIGl0XG5cbiAgICByZXR1cm4gW3NtYWxsZXIsIG51bWJlcmluZ1N5c3RlbSwgY2FsZW5kYXJdO1xuICB9XG59XG5cbmZ1bmN0aW9uIGludGxDb25maWdTdHJpbmcobG9jYWxlU3RyLCBudW1iZXJpbmdTeXN0ZW0sIG91dHB1dENhbGVuZGFyKSB7XG4gIGlmIChvdXRwdXRDYWxlbmRhciB8fCBudW1iZXJpbmdTeXN0ZW0pIHtcbiAgICBsb2NhbGVTdHIgKz0gXCItdVwiO1xuXG4gICAgaWYgKG91dHB1dENhbGVuZGFyKSB7XG4gICAgICBsb2NhbGVTdHIgKz0gXCItY2EtXCIgKyBvdXRwdXRDYWxlbmRhcjtcbiAgICB9XG5cbiAgICBpZiAobnVtYmVyaW5nU3lzdGVtKSB7XG4gICAgICBsb2NhbGVTdHIgKz0gXCItbnUtXCIgKyBudW1iZXJpbmdTeXN0ZW07XG4gICAgfVxuXG4gICAgcmV0dXJuIGxvY2FsZVN0cjtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gbG9jYWxlU3RyO1xuICB9XG59XG5cbmZ1bmN0aW9uIG1hcE1vbnRocyhmKSB7XG4gIHZhciBtcyA9IFtdO1xuXG4gIGZvciAodmFyIGkgPSAxOyBpIDw9IDEyOyBpKyspIHtcbiAgICB2YXIgZHQgPSBEYXRlVGltZS51dGMoMjAxNiwgaSwgMSk7XG4gICAgbXMucHVzaChmKGR0KSk7XG4gIH1cblxuICByZXR1cm4gbXM7XG59XG5cbmZ1bmN0aW9uIG1hcFdlZWtkYXlzKGYpIHtcbiAgdmFyIG1zID0gW107XG5cbiAgZm9yICh2YXIgaSA9IDE7IGkgPD0gNzsgaSsrKSB7XG4gICAgdmFyIGR0ID0gRGF0ZVRpbWUudXRjKDIwMTYsIDExLCAxMyArIGkpO1xuICAgIG1zLnB1c2goZihkdCkpO1xuICB9XG5cbiAgcmV0dXJuIG1zO1xufVxuXG5mdW5jdGlvbiBsaXN0U3R1ZmYobG9jLCBsZW5ndGgsIGRlZmF1bHRPSywgZW5nbGlzaEZuLCBpbnRsRm4pIHtcbiAgdmFyIG1vZGUgPSBsb2MubGlzdGluZ01vZGUoZGVmYXVsdE9LKTtcblxuICBpZiAobW9kZSA9PT0gXCJlcnJvclwiKSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH0gZWxzZSBpZiAobW9kZSA9PT0gXCJlblwiKSB7XG4gICAgcmV0dXJuIGVuZ2xpc2hGbihsZW5ndGgpO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiBpbnRsRm4obGVuZ3RoKTtcbiAgfVxufVxuXG5mdW5jdGlvbiBzdXBwb3J0c0Zhc3ROdW1iZXJzKGxvYykge1xuICBpZiAobG9jLm51bWJlcmluZ1N5c3RlbSAmJiBsb2MubnVtYmVyaW5nU3lzdGVtICE9PSBcImxhdG5cIikge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gbG9jLm51bWJlcmluZ1N5c3RlbSA9PT0gXCJsYXRuXCIgfHwgIWxvYy5sb2NhbGUgfHwgbG9jLmxvY2FsZS5zdGFydHNXaXRoKFwiZW5cIikgfHwgbmV3IEludGwuRGF0ZVRpbWVGb3JtYXQobG9jLmludGwpLnJlc29sdmVkT3B0aW9ucygpLm51bWJlcmluZ1N5c3RlbSA9PT0gXCJsYXRuXCI7XG4gIH1cbn1cbi8qKlxuICogQHByaXZhdGVcbiAqL1xuXG5cbnZhciBQb2x5TnVtYmVyRm9ybWF0dGVyID0gLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHtcbiAgZnVuY3Rpb24gUG9seU51bWJlckZvcm1hdHRlcihpbnRsLCBmb3JjZVNpbXBsZSwgb3B0cykge1xuICAgIHRoaXMucGFkVG8gPSBvcHRzLnBhZFRvIHx8IDA7XG4gICAgdGhpcy5mbG9vciA9IG9wdHMuZmxvb3IgfHwgZmFsc2U7XG5cbiAgICBvcHRzLnBhZFRvO1xuICAgICAgICBvcHRzLmZsb29yO1xuICAgICAgICB2YXIgb3RoZXJPcHRzID0gX29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzTG9vc2Uob3B0cywgX2V4Y2x1ZGVkMik7XG5cbiAgICBpZiAoIWZvcmNlU2ltcGxlIHx8IE9iamVjdC5rZXlzKG90aGVyT3B0cykubGVuZ3RoID4gMCkge1xuICAgICAgdmFyIGludGxPcHRzID0gX2V4dGVuZHMoe1xuICAgICAgICB1c2VHcm91cGluZzogZmFsc2VcbiAgICAgIH0sIG9wdHMpO1xuXG4gICAgICBpZiAob3B0cy5wYWRUbyA+IDApIGludGxPcHRzLm1pbmltdW1JbnRlZ2VyRGlnaXRzID0gb3B0cy5wYWRUbztcbiAgICAgIHRoaXMuaW5mID0gZ2V0Q2FjaGVkSU5GKGludGwsIGludGxPcHRzKTtcbiAgICB9XG4gIH1cblxuICB2YXIgX3Byb3RvID0gUG9seU51bWJlckZvcm1hdHRlci5wcm90b3R5cGU7XG5cbiAgX3Byb3RvLmZvcm1hdCA9IGZ1bmN0aW9uIGZvcm1hdChpKSB7XG4gICAgaWYgKHRoaXMuaW5mKSB7XG4gICAgICB2YXIgZml4ZWQgPSB0aGlzLmZsb29yID8gTWF0aC5mbG9vcihpKSA6IGk7XG4gICAgICByZXR1cm4gdGhpcy5pbmYuZm9ybWF0KGZpeGVkKTtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gdG8gbWF0Y2ggdGhlIGJyb3dzZXIncyBudW1iZXJmb3JtYXR0ZXIgZGVmYXVsdHNcbiAgICAgIHZhciBfZml4ZWQgPSB0aGlzLmZsb29yID8gTWF0aC5mbG9vcihpKSA6IHJvdW5kVG8oaSwgMyk7XG5cbiAgICAgIHJldHVybiBwYWRTdGFydChfZml4ZWQsIHRoaXMucGFkVG8pO1xuICAgIH1cbiAgfTtcblxuICByZXR1cm4gUG9seU51bWJlckZvcm1hdHRlcjtcbn0oKTtcbi8qKlxuICogQHByaXZhdGVcbiAqL1xuXG5cbnZhciBQb2x5RGF0ZUZvcm1hdHRlciA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7XG4gIGZ1bmN0aW9uIFBvbHlEYXRlRm9ybWF0dGVyKGR0LCBpbnRsLCBvcHRzKSB7XG4gICAgdGhpcy5vcHRzID0gb3B0cztcbiAgICB2YXIgejtcblxuICAgIGlmIChkdC56b25lLmlzVW5pdmVyc2FsKSB7XG4gICAgICAvLyBVVEMtOCBvciBFdGMvVVRDLTggYXJlIG5vdCBwYXJ0IG9mIHR6ZGF0YSwgb25seSBFdGMvR01UKzggYW5kIHRoZSBsaWtlLlxuICAgICAgLy8gVGhhdCBpcyB3aHkgZml4ZWQtb2Zmc2V0IFRaIGlzIHNldCB0byB0aGF0IHVubGVzcyBpdCBpczpcbiAgICAgIC8vIDEuIFJlcHJlc2VudGluZyBvZmZzZXQgMCB3aGVuIFVUQyBpcyB1c2VkIHRvIG1haW50YWluIHByZXZpb3VzIGJlaGF2aW9yIGFuZCBkb2VzIG5vdCBiZWNvbWUgR01ULlxuICAgICAgLy8gMi4gVW5zdXBwb3J0ZWQgYnkgdGhlIGJyb3dzZXI6XG4gICAgICAvLyAgICAtIHNvbWUgZG8gbm90IHN1cHBvcnQgRXRjL1xuICAgICAgLy8gICAgLSA8IEV0Yy9HTVQtMTQsID4gRXRjL0dNVCsxMiwgYW5kIDMwLW1pbnV0ZSBvciA0NS1taW51dGUgb2Zmc2V0cyBhcmUgbm90IHBhcnQgb2YgdHpkYXRhXG4gICAgICB2YXIgZ210T2Zmc2V0ID0gLTEgKiAoZHQub2Zmc2V0IC8gNjApO1xuICAgICAgdmFyIG9mZnNldFogPSBnbXRPZmZzZXQgPj0gMCA/IFwiRXRjL0dNVCtcIiArIGdtdE9mZnNldCA6IFwiRXRjL0dNVFwiICsgZ210T2Zmc2V0O1xuXG4gICAgICBpZiAoZHQub2Zmc2V0ICE9PSAwICYmIElBTkFab25lLmNyZWF0ZShvZmZzZXRaKS52YWxpZCkge1xuICAgICAgICB6ID0gb2Zmc2V0WjtcbiAgICAgICAgdGhpcy5kdCA9IGR0O1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gTm90IGFsbCBmaXhlZC1vZmZzZXQgem9uZXMgbGlrZSBFdGMvKzQ6MzAgYXJlIHByZXNlbnQgaW4gdHpkYXRhLlxuICAgICAgICAvLyBTbyB3ZSBoYXZlIHRvIG1ha2UgZG8uIFR3byBjYXNlczpcbiAgICAgICAgLy8gMS4gVGhlIGZvcm1hdCBvcHRpb25zIHRlbGwgdXMgdG8gc2hvdyB0aGUgem9uZS4gV2UgY2FuJ3QgZG8gdGhhdCwgc28gdGhlIGJlc3RcbiAgICAgICAgLy8gd2UgY2FuIGRvIGlzIGZvcm1hdCB0aGUgZGF0ZSBpbiBVVEMuXG4gICAgICAgIC8vIDIuIFRoZSBmb3JtYXQgb3B0aW9ucyBkb24ndCB0ZWxsIHVzIHRvIHNob3cgdGhlIHpvbmUuIFRoZW4gd2UgY2FuIGFkanVzdCB0aGVtXG4gICAgICAgIC8vIHRoZSB0aW1lIGFuZCB0ZWxsIHRoZSBmb3JtYXR0ZXIgdG8gc2hvdyBpdCB0byB1cyBpbiBVVEMsIHNvIHRoYXQgdGhlIHRpbWUgaXMgcmlnaHRcbiAgICAgICAgLy8gYW5kIHRoZSBiYWQgem9uZSBkb2Vzbid0IHNob3cgdXAuXG4gICAgICAgIHogPSBcIlVUQ1wiO1xuXG4gICAgICAgIGlmIChvcHRzLnRpbWVab25lTmFtZSkge1xuICAgICAgICAgIHRoaXMuZHQgPSBkdDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0aGlzLmR0ID0gZHQub2Zmc2V0ID09PSAwID8gZHQgOiBEYXRlVGltZS5mcm9tTWlsbGlzKGR0LnRzICsgZHQub2Zmc2V0ICogNjAgKiAxMDAwKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gZWxzZSBpZiAoZHQuem9uZS50eXBlID09PSBcInN5c3RlbVwiKSB7XG4gICAgICB0aGlzLmR0ID0gZHQ7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuZHQgPSBkdDtcbiAgICAgIHogPSBkdC56b25lLm5hbWU7XG4gICAgfVxuXG4gICAgdmFyIGludGxPcHRzID0gX2V4dGVuZHMoe30sIHRoaXMub3B0cyk7XG5cbiAgICBpZiAoeikge1xuICAgICAgaW50bE9wdHMudGltZVpvbmUgPSB6O1xuICAgIH1cblxuICAgIHRoaXMuZHRmID0gZ2V0Q2FjaGVkRFRGKGludGwsIGludGxPcHRzKTtcbiAgfVxuXG4gIHZhciBfcHJvdG8yID0gUG9seURhdGVGb3JtYXR0ZXIucHJvdG90eXBlO1xuXG4gIF9wcm90bzIuZm9ybWF0ID0gZnVuY3Rpb24gZm9ybWF0KCkge1xuICAgIHJldHVybiB0aGlzLmR0Zi5mb3JtYXQodGhpcy5kdC50b0pTRGF0ZSgpKTtcbiAgfTtcblxuICBfcHJvdG8yLmZvcm1hdFRvUGFydHMgPSBmdW5jdGlvbiBmb3JtYXRUb1BhcnRzKCkge1xuICAgIHJldHVybiB0aGlzLmR0Zi5mb3JtYXRUb1BhcnRzKHRoaXMuZHQudG9KU0RhdGUoKSk7XG4gIH07XG5cbiAgX3Byb3RvMi5yZXNvbHZlZE9wdGlvbnMgPSBmdW5jdGlvbiByZXNvbHZlZE9wdGlvbnMoKSB7XG4gICAgcmV0dXJuIHRoaXMuZHRmLnJlc29sdmVkT3B0aW9ucygpO1xuICB9O1xuXG4gIHJldHVybiBQb2x5RGF0ZUZvcm1hdHRlcjtcbn0oKTtcbi8qKlxuICogQHByaXZhdGVcbiAqL1xuXG5cbnZhciBQb2x5UmVsRm9ybWF0dGVyID0gLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHtcbiAgZnVuY3Rpb24gUG9seVJlbEZvcm1hdHRlcihpbnRsLCBpc0VuZ2xpc2gsIG9wdHMpIHtcbiAgICB0aGlzLm9wdHMgPSBfZXh0ZW5kcyh7XG4gICAgICBzdHlsZTogXCJsb25nXCJcbiAgICB9LCBvcHRzKTtcblxuICAgIGlmICghaXNFbmdsaXNoICYmIGhhc1JlbGF0aXZlKCkpIHtcbiAgICAgIHRoaXMucnRmID0gZ2V0Q2FjaGVkUlRGKGludGwsIG9wdHMpO1xuICAgIH1cbiAgfVxuXG4gIHZhciBfcHJvdG8zID0gUG9seVJlbEZvcm1hdHRlci5wcm90b3R5cGU7XG5cbiAgX3Byb3RvMy5mb3JtYXQgPSBmdW5jdGlvbiBmb3JtYXQoY291bnQsIHVuaXQpIHtcbiAgICBpZiAodGhpcy5ydGYpIHtcbiAgICAgIHJldHVybiB0aGlzLnJ0Zi5mb3JtYXQoY291bnQsIHVuaXQpO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gZm9ybWF0UmVsYXRpdmVUaW1lKHVuaXQsIGNvdW50LCB0aGlzLm9wdHMubnVtZXJpYywgdGhpcy5vcHRzLnN0eWxlICE9PSBcImxvbmdcIik7XG4gICAgfVxuICB9O1xuXG4gIF9wcm90bzMuZm9ybWF0VG9QYXJ0cyA9IGZ1bmN0aW9uIGZvcm1hdFRvUGFydHMoY291bnQsIHVuaXQpIHtcbiAgICBpZiAodGhpcy5ydGYpIHtcbiAgICAgIHJldHVybiB0aGlzLnJ0Zi5mb3JtYXRUb1BhcnRzKGNvdW50LCB1bml0KTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIFtdO1xuICAgIH1cbiAgfTtcblxuICByZXR1cm4gUG9seVJlbEZvcm1hdHRlcjtcbn0oKTtcbi8qKlxuICogQHByaXZhdGVcbiAqL1xuXG5cbnZhciBMb2NhbGUgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkge1xuICBMb2NhbGUuZnJvbU9wdHMgPSBmdW5jdGlvbiBmcm9tT3B0cyhvcHRzKSB7XG4gICAgcmV0dXJuIExvY2FsZS5jcmVhdGUob3B0cy5sb2NhbGUsIG9wdHMubnVtYmVyaW5nU3lzdGVtLCBvcHRzLm91dHB1dENhbGVuZGFyLCBvcHRzLmRlZmF1bHRUb0VOKTtcbiAgfTtcblxuICBMb2NhbGUuY3JlYXRlID0gZnVuY3Rpb24gY3JlYXRlKGxvY2FsZSwgbnVtYmVyaW5nU3lzdGVtLCBvdXRwdXRDYWxlbmRhciwgZGVmYXVsdFRvRU4pIHtcbiAgICBpZiAoZGVmYXVsdFRvRU4gPT09IHZvaWQgMCkge1xuICAgICAgZGVmYXVsdFRvRU4gPSBmYWxzZTtcbiAgICB9XG5cbiAgICB2YXIgc3BlY2lmaWVkTG9jYWxlID0gbG9jYWxlIHx8IFNldHRpbmdzLmRlZmF1bHRMb2NhbGU7IC8vIHRoZSBzeXN0ZW0gbG9jYWxlIGlzIHVzZWZ1bCBmb3IgaHVtYW4gcmVhZGFibGUgc3RyaW5ncyBidXQgYW5ub3lpbmcgZm9yIHBhcnNpbmcvZm9ybWF0dGluZyBrbm93biBmb3JtYXRzXG5cbiAgICB2YXIgbG9jYWxlUiA9IHNwZWNpZmllZExvY2FsZSB8fCAoZGVmYXVsdFRvRU4gPyBcImVuLVVTXCIgOiBzeXN0ZW1Mb2NhbGUoKSk7XG4gICAgdmFyIG51bWJlcmluZ1N5c3RlbVIgPSBudW1iZXJpbmdTeXN0ZW0gfHwgU2V0dGluZ3MuZGVmYXVsdE51bWJlcmluZ1N5c3RlbTtcbiAgICB2YXIgb3V0cHV0Q2FsZW5kYXJSID0gb3V0cHV0Q2FsZW5kYXIgfHwgU2V0dGluZ3MuZGVmYXVsdE91dHB1dENhbGVuZGFyO1xuICAgIHJldHVybiBuZXcgTG9jYWxlKGxvY2FsZVIsIG51bWJlcmluZ1N5c3RlbVIsIG91dHB1dENhbGVuZGFyUiwgc3BlY2lmaWVkTG9jYWxlKTtcbiAgfTtcblxuICBMb2NhbGUucmVzZXRDYWNoZSA9IGZ1bmN0aW9uIHJlc2V0Q2FjaGUoKSB7XG4gICAgc3lzTG9jYWxlQ2FjaGUgPSBudWxsO1xuICAgIGludGxEVENhY2hlID0ge307XG4gICAgaW50bE51bUNhY2hlID0ge307XG4gICAgaW50bFJlbENhY2hlID0ge307XG4gIH07XG5cbiAgTG9jYWxlLmZyb21PYmplY3QgPSBmdW5jdGlvbiBmcm9tT2JqZWN0KF90ZW1wKSB7XG4gICAgdmFyIF9yZWYgPSBfdGVtcCA9PT0gdm9pZCAwID8ge30gOiBfdGVtcCxcbiAgICAgICAgbG9jYWxlID0gX3JlZi5sb2NhbGUsXG4gICAgICAgIG51bWJlcmluZ1N5c3RlbSA9IF9yZWYubnVtYmVyaW5nU3lzdGVtLFxuICAgICAgICBvdXRwdXRDYWxlbmRhciA9IF9yZWYub3V0cHV0Q2FsZW5kYXI7XG5cbiAgICByZXR1cm4gTG9jYWxlLmNyZWF0ZShsb2NhbGUsIG51bWJlcmluZ1N5c3RlbSwgb3V0cHV0Q2FsZW5kYXIpO1xuICB9O1xuXG4gIGZ1bmN0aW9uIExvY2FsZShsb2NhbGUsIG51bWJlcmluZywgb3V0cHV0Q2FsZW5kYXIsIHNwZWNpZmllZExvY2FsZSkge1xuICAgIHZhciBfcGFyc2VMb2NhbGVTdHJpbmcgPSBwYXJzZUxvY2FsZVN0cmluZyhsb2NhbGUpLFxuICAgICAgICBwYXJzZWRMb2NhbGUgPSBfcGFyc2VMb2NhbGVTdHJpbmdbMF0sXG4gICAgICAgIHBhcnNlZE51bWJlcmluZ1N5c3RlbSA9IF9wYXJzZUxvY2FsZVN0cmluZ1sxXSxcbiAgICAgICAgcGFyc2VkT3V0cHV0Q2FsZW5kYXIgPSBfcGFyc2VMb2NhbGVTdHJpbmdbMl07XG5cbiAgICB0aGlzLmxvY2FsZSA9IHBhcnNlZExvY2FsZTtcbiAgICB0aGlzLm51bWJlcmluZ1N5c3RlbSA9IG51bWJlcmluZyB8fCBwYXJzZWROdW1iZXJpbmdTeXN0ZW0gfHwgbnVsbDtcbiAgICB0aGlzLm91dHB1dENhbGVuZGFyID0gb3V0cHV0Q2FsZW5kYXIgfHwgcGFyc2VkT3V0cHV0Q2FsZW5kYXIgfHwgbnVsbDtcbiAgICB0aGlzLmludGwgPSBpbnRsQ29uZmlnU3RyaW5nKHRoaXMubG9jYWxlLCB0aGlzLm51bWJlcmluZ1N5c3RlbSwgdGhpcy5vdXRwdXRDYWxlbmRhcik7XG4gICAgdGhpcy53ZWVrZGF5c0NhY2hlID0ge1xuICAgICAgZm9ybWF0OiB7fSxcbiAgICAgIHN0YW5kYWxvbmU6IHt9XG4gICAgfTtcbiAgICB0aGlzLm1vbnRoc0NhY2hlID0ge1xuICAgICAgZm9ybWF0OiB7fSxcbiAgICAgIHN0YW5kYWxvbmU6IHt9XG4gICAgfTtcbiAgICB0aGlzLm1lcmlkaWVtQ2FjaGUgPSBudWxsO1xuICAgIHRoaXMuZXJhQ2FjaGUgPSB7fTtcbiAgICB0aGlzLnNwZWNpZmllZExvY2FsZSA9IHNwZWNpZmllZExvY2FsZTtcbiAgICB0aGlzLmZhc3ROdW1iZXJzQ2FjaGVkID0gbnVsbDtcbiAgfVxuXG4gIHZhciBfcHJvdG80ID0gTG9jYWxlLnByb3RvdHlwZTtcblxuICBfcHJvdG80Lmxpc3RpbmdNb2RlID0gZnVuY3Rpb24gbGlzdGluZ01vZGUoKSB7XG4gICAgdmFyIGlzQWN0dWFsbHlFbiA9IHRoaXMuaXNFbmdsaXNoKCk7XG4gICAgdmFyIGhhc05vV2VpcmRuZXNzID0gKHRoaXMubnVtYmVyaW5nU3lzdGVtID09PSBudWxsIHx8IHRoaXMubnVtYmVyaW5nU3lzdGVtID09PSBcImxhdG5cIikgJiYgKHRoaXMub3V0cHV0Q2FsZW5kYXIgPT09IG51bGwgfHwgdGhpcy5vdXRwdXRDYWxlbmRhciA9PT0gXCJncmVnb3J5XCIpO1xuICAgIHJldHVybiBpc0FjdHVhbGx5RW4gJiYgaGFzTm9XZWlyZG5lc3MgPyBcImVuXCIgOiBcImludGxcIjtcbiAgfTtcblxuICBfcHJvdG80LmNsb25lID0gZnVuY3Rpb24gY2xvbmUoYWx0cykge1xuICAgIGlmICghYWx0cyB8fCBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyhhbHRzKS5sZW5ndGggPT09IDApIHtcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gTG9jYWxlLmNyZWF0ZShhbHRzLmxvY2FsZSB8fCB0aGlzLnNwZWNpZmllZExvY2FsZSwgYWx0cy5udW1iZXJpbmdTeXN0ZW0gfHwgdGhpcy5udW1iZXJpbmdTeXN0ZW0sIGFsdHMub3V0cHV0Q2FsZW5kYXIgfHwgdGhpcy5vdXRwdXRDYWxlbmRhciwgYWx0cy5kZWZhdWx0VG9FTiB8fCBmYWxzZSk7XG4gICAgfVxuICB9O1xuXG4gIF9wcm90bzQucmVkZWZhdWx0VG9FTiA9IGZ1bmN0aW9uIHJlZGVmYXVsdFRvRU4oYWx0cykge1xuICAgIGlmIChhbHRzID09PSB2b2lkIDApIHtcbiAgICAgIGFsdHMgPSB7fTtcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcy5jbG9uZShfZXh0ZW5kcyh7fSwgYWx0cywge1xuICAgICAgZGVmYXVsdFRvRU46IHRydWVcbiAgICB9KSk7XG4gIH07XG5cbiAgX3Byb3RvNC5yZWRlZmF1bHRUb1N5c3RlbSA9IGZ1bmN0aW9uIHJlZGVmYXVsdFRvU3lzdGVtKGFsdHMpIHtcbiAgICBpZiAoYWx0cyA9PT0gdm9pZCAwKSB7XG4gICAgICBhbHRzID0ge307XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXMuY2xvbmUoX2V4dGVuZHMoe30sIGFsdHMsIHtcbiAgICAgIGRlZmF1bHRUb0VOOiBmYWxzZVxuICAgIH0pKTtcbiAgfTtcblxuICBfcHJvdG80Lm1vbnRocyA9IGZ1bmN0aW9uIG1vbnRocyQxKGxlbmd0aCwgZm9ybWF0LCBkZWZhdWx0T0spIHtcbiAgICB2YXIgX3RoaXMgPSB0aGlzO1xuXG4gICAgaWYgKGZvcm1hdCA9PT0gdm9pZCAwKSB7XG4gICAgICBmb3JtYXQgPSBmYWxzZTtcbiAgICB9XG5cbiAgICBpZiAoZGVmYXVsdE9LID09PSB2b2lkIDApIHtcbiAgICAgIGRlZmF1bHRPSyA9IHRydWU7XG4gICAgfVxuXG4gICAgcmV0dXJuIGxpc3RTdHVmZih0aGlzLCBsZW5ndGgsIGRlZmF1bHRPSywgbW9udGhzLCBmdW5jdGlvbiAoKSB7XG4gICAgICB2YXIgaW50bCA9IGZvcm1hdCA/IHtcbiAgICAgICAgbW9udGg6IGxlbmd0aCxcbiAgICAgICAgZGF5OiBcIm51bWVyaWNcIlxuICAgICAgfSA6IHtcbiAgICAgICAgbW9udGg6IGxlbmd0aFxuICAgICAgfSxcbiAgICAgICAgICBmb3JtYXRTdHIgPSBmb3JtYXQgPyBcImZvcm1hdFwiIDogXCJzdGFuZGFsb25lXCI7XG5cbiAgICAgIGlmICghX3RoaXMubW9udGhzQ2FjaGVbZm9ybWF0U3RyXVtsZW5ndGhdKSB7XG4gICAgICAgIF90aGlzLm1vbnRoc0NhY2hlW2Zvcm1hdFN0cl1bbGVuZ3RoXSA9IG1hcE1vbnRocyhmdW5jdGlvbiAoZHQpIHtcbiAgICAgICAgICByZXR1cm4gX3RoaXMuZXh0cmFjdChkdCwgaW50bCwgXCJtb250aFwiKTtcbiAgICAgICAgfSk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBfdGhpcy5tb250aHNDYWNoZVtmb3JtYXRTdHJdW2xlbmd0aF07XG4gICAgfSk7XG4gIH07XG5cbiAgX3Byb3RvNC53ZWVrZGF5cyA9IGZ1bmN0aW9uIHdlZWtkYXlzJDEobGVuZ3RoLCBmb3JtYXQsIGRlZmF1bHRPSykge1xuICAgIHZhciBfdGhpczIgPSB0aGlzO1xuXG4gICAgaWYgKGZvcm1hdCA9PT0gdm9pZCAwKSB7XG4gICAgICBmb3JtYXQgPSBmYWxzZTtcbiAgICB9XG5cbiAgICBpZiAoZGVmYXVsdE9LID09PSB2b2lkIDApIHtcbiAgICAgIGRlZmF1bHRPSyA9IHRydWU7XG4gICAgfVxuXG4gICAgcmV0dXJuIGxpc3RTdHVmZih0aGlzLCBsZW5ndGgsIGRlZmF1bHRPSywgd2Vla2RheXMsIGZ1bmN0aW9uICgpIHtcbiAgICAgIHZhciBpbnRsID0gZm9ybWF0ID8ge1xuICAgICAgICB3ZWVrZGF5OiBsZW5ndGgsXG4gICAgICAgIHllYXI6IFwibnVtZXJpY1wiLFxuICAgICAgICBtb250aDogXCJsb25nXCIsXG4gICAgICAgIGRheTogXCJudW1lcmljXCJcbiAgICAgIH0gOiB7XG4gICAgICAgIHdlZWtkYXk6IGxlbmd0aFxuICAgICAgfSxcbiAgICAgICAgICBmb3JtYXRTdHIgPSBmb3JtYXQgPyBcImZvcm1hdFwiIDogXCJzdGFuZGFsb25lXCI7XG5cbiAgICAgIGlmICghX3RoaXMyLndlZWtkYXlzQ2FjaGVbZm9ybWF0U3RyXVtsZW5ndGhdKSB7XG4gICAgICAgIF90aGlzMi53ZWVrZGF5c0NhY2hlW2Zvcm1hdFN0cl1bbGVuZ3RoXSA9IG1hcFdlZWtkYXlzKGZ1bmN0aW9uIChkdCkge1xuICAgICAgICAgIHJldHVybiBfdGhpczIuZXh0cmFjdChkdCwgaW50bCwgXCJ3ZWVrZGF5XCIpO1xuICAgICAgICB9KTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIF90aGlzMi53ZWVrZGF5c0NhY2hlW2Zvcm1hdFN0cl1bbGVuZ3RoXTtcbiAgICB9KTtcbiAgfTtcblxuICBfcHJvdG80Lm1lcmlkaWVtcyA9IGZ1bmN0aW9uIG1lcmlkaWVtcyQxKGRlZmF1bHRPSykge1xuICAgIHZhciBfdGhpczMgPSB0aGlzO1xuXG4gICAgaWYgKGRlZmF1bHRPSyA9PT0gdm9pZCAwKSB7XG4gICAgICBkZWZhdWx0T0sgPSB0cnVlO1xuICAgIH1cblxuICAgIHJldHVybiBsaXN0U3R1ZmYodGhpcywgdW5kZWZpbmVkLCBkZWZhdWx0T0ssIGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiBtZXJpZGllbXM7XG4gICAgfSwgZnVuY3Rpb24gKCkge1xuICAgICAgLy8gSW4gdGhlb3J5IHRoZXJlIGNvdWxkIGJlIGFyaWJpdHJhcnkgZGF5IHBlcmlvZHMuIFdlJ3JlIGdvbm5hIGFzc3VtZSB0aGVyZSBhcmUgZXhhY3RseSB0d29cbiAgICAgIC8vIGZvciBBTSBhbmQgUE0uIFRoaXMgaXMgcHJvYmFibHkgd3JvbmcsIGJ1dCBpdCdzIG1ha2VzIHBhcnNpbmcgd2F5IGVhc2llci5cbiAgICAgIGlmICghX3RoaXMzLm1lcmlkaWVtQ2FjaGUpIHtcbiAgICAgICAgdmFyIGludGwgPSB7XG4gICAgICAgICAgaG91cjogXCJudW1lcmljXCIsXG4gICAgICAgICAgaG91ckN5Y2xlOiBcImgxMlwiXG4gICAgICAgIH07XG4gICAgICAgIF90aGlzMy5tZXJpZGllbUNhY2hlID0gW0RhdGVUaW1lLnV0YygyMDE2LCAxMSwgMTMsIDkpLCBEYXRlVGltZS51dGMoMjAxNiwgMTEsIDEzLCAxOSldLm1hcChmdW5jdGlvbiAoZHQpIHtcbiAgICAgICAgICByZXR1cm4gX3RoaXMzLmV4dHJhY3QoZHQsIGludGwsIFwiZGF5cGVyaW9kXCIpO1xuICAgICAgICB9KTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIF90aGlzMy5tZXJpZGllbUNhY2hlO1xuICAgIH0pO1xuICB9O1xuXG4gIF9wcm90bzQuZXJhcyA9IGZ1bmN0aW9uIGVyYXMkMShsZW5ndGgsIGRlZmF1bHRPSykge1xuICAgIHZhciBfdGhpczQgPSB0aGlzO1xuXG4gICAgaWYgKGRlZmF1bHRPSyA9PT0gdm9pZCAwKSB7XG4gICAgICBkZWZhdWx0T0sgPSB0cnVlO1xuICAgIH1cblxuICAgIHJldHVybiBsaXN0U3R1ZmYodGhpcywgbGVuZ3RoLCBkZWZhdWx0T0ssIGVyYXMsIGZ1bmN0aW9uICgpIHtcbiAgICAgIHZhciBpbnRsID0ge1xuICAgICAgICBlcmE6IGxlbmd0aFxuICAgICAgfTsgLy8gVGhpcyBpcyBwcm9ibGVtYXRpYy4gRGlmZmVyZW50IGNhbGVuZGFycyBhcmUgZ29pbmcgdG8gZGVmaW5lIGVyYXMgdG90YWxseSBkaWZmZXJlbnRseS4gV2hhdCBJIG5lZWQgaXMgdGhlIG1pbmltdW0gc2V0IG9mIGRhdGVzXG4gICAgICAvLyB0byBkZWZpbml0ZWx5IGVudW1lcmF0ZSB0aGVtLlxuXG4gICAgICBpZiAoIV90aGlzNC5lcmFDYWNoZVtsZW5ndGhdKSB7XG4gICAgICAgIF90aGlzNC5lcmFDYWNoZVtsZW5ndGhdID0gW0RhdGVUaW1lLnV0YygtNDAsIDEsIDEpLCBEYXRlVGltZS51dGMoMjAxNywgMSwgMSldLm1hcChmdW5jdGlvbiAoZHQpIHtcbiAgICAgICAgICByZXR1cm4gX3RoaXM0LmV4dHJhY3QoZHQsIGludGwsIFwiZXJhXCIpO1xuICAgICAgICB9KTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIF90aGlzNC5lcmFDYWNoZVtsZW5ndGhdO1xuICAgIH0pO1xuICB9O1xuXG4gIF9wcm90bzQuZXh0cmFjdCA9IGZ1bmN0aW9uIGV4dHJhY3QoZHQsIGludGxPcHRzLCBmaWVsZCkge1xuICAgIHZhciBkZiA9IHRoaXMuZHRGb3JtYXR0ZXIoZHQsIGludGxPcHRzKSxcbiAgICAgICAgcmVzdWx0cyA9IGRmLmZvcm1hdFRvUGFydHMoKSxcbiAgICAgICAgbWF0Y2hpbmcgPSByZXN1bHRzLmZpbmQoZnVuY3Rpb24gKG0pIHtcbiAgICAgIHJldHVybiBtLnR5cGUudG9Mb3dlckNhc2UoKSA9PT0gZmllbGQ7XG4gICAgfSk7XG4gICAgcmV0dXJuIG1hdGNoaW5nID8gbWF0Y2hpbmcudmFsdWUgOiBudWxsO1xuICB9O1xuXG4gIF9wcm90bzQubnVtYmVyRm9ybWF0dGVyID0gZnVuY3Rpb24gbnVtYmVyRm9ybWF0dGVyKG9wdHMpIHtcbiAgICBpZiAob3B0cyA9PT0gdm9pZCAwKSB7XG4gICAgICBvcHRzID0ge307XG4gICAgfVxuXG4gICAgLy8gdGhpcyBmb3JjZXNpbXBsZSBvcHRpb24gaXMgbmV2ZXIgdXNlZCAodGhlIG9ubHkgY2FsbGVyIHNob3J0LWNpcmN1aXRzIG9uIGl0LCBidXQgaXQgc2VlbXMgc2FmZXIgdG8gbGVhdmUpXG4gICAgLy8gKGluIGNvbnRyYXN0LCB0aGUgcmVzdCBvZiB0aGUgY29uZGl0aW9uIGlzIHVzZWQgaGVhdmlseSlcbiAgICByZXR1cm4gbmV3IFBvbHlOdW1iZXJGb3JtYXR0ZXIodGhpcy5pbnRsLCBvcHRzLmZvcmNlU2ltcGxlIHx8IHRoaXMuZmFzdE51bWJlcnMsIG9wdHMpO1xuICB9O1xuXG4gIF9wcm90bzQuZHRGb3JtYXR0ZXIgPSBmdW5jdGlvbiBkdEZvcm1hdHRlcihkdCwgaW50bE9wdHMpIHtcbiAgICBpZiAoaW50bE9wdHMgPT09IHZvaWQgMCkge1xuICAgICAgaW50bE9wdHMgPSB7fTtcbiAgICB9XG5cbiAgICByZXR1cm4gbmV3IFBvbHlEYXRlRm9ybWF0dGVyKGR0LCB0aGlzLmludGwsIGludGxPcHRzKTtcbiAgfTtcblxuICBfcHJvdG80LnJlbEZvcm1hdHRlciA9IGZ1bmN0aW9uIHJlbEZvcm1hdHRlcihvcHRzKSB7XG4gICAgaWYgKG9wdHMgPT09IHZvaWQgMCkge1xuICAgICAgb3B0cyA9IHt9O1xuICAgIH1cblxuICAgIHJldHVybiBuZXcgUG9seVJlbEZvcm1hdHRlcih0aGlzLmludGwsIHRoaXMuaXNFbmdsaXNoKCksIG9wdHMpO1xuICB9O1xuXG4gIF9wcm90bzQubGlzdEZvcm1hdHRlciA9IGZ1bmN0aW9uIGxpc3RGb3JtYXR0ZXIob3B0cykge1xuICAgIGlmIChvcHRzID09PSB2b2lkIDApIHtcbiAgICAgIG9wdHMgPSB7fTtcbiAgICB9XG5cbiAgICByZXR1cm4gZ2V0Q2FjaGVkTEYodGhpcy5pbnRsLCBvcHRzKTtcbiAgfTtcblxuICBfcHJvdG80LmlzRW5nbGlzaCA9IGZ1bmN0aW9uIGlzRW5nbGlzaCgpIHtcbiAgICByZXR1cm4gdGhpcy5sb2NhbGUgPT09IFwiZW5cIiB8fCB0aGlzLmxvY2FsZS50b0xvd2VyQ2FzZSgpID09PSBcImVuLXVzXCIgfHwgbmV3IEludGwuRGF0ZVRpbWVGb3JtYXQodGhpcy5pbnRsKS5yZXNvbHZlZE9wdGlvbnMoKS5sb2NhbGUuc3RhcnRzV2l0aChcImVuLXVzXCIpO1xuICB9O1xuXG4gIF9wcm90bzQuZXF1YWxzID0gZnVuY3Rpb24gZXF1YWxzKG90aGVyKSB7XG4gICAgcmV0dXJuIHRoaXMubG9jYWxlID09PSBvdGhlci5sb2NhbGUgJiYgdGhpcy5udW1iZXJpbmdTeXN0ZW0gPT09IG90aGVyLm51bWJlcmluZ1N5c3RlbSAmJiB0aGlzLm91dHB1dENhbGVuZGFyID09PSBvdGhlci5vdXRwdXRDYWxlbmRhcjtcbiAgfTtcblxuICBfY3JlYXRlQ2xhc3MoTG9jYWxlLCBbe1xuICAgIGtleTogXCJmYXN0TnVtYmVyc1wiLFxuICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgaWYgKHRoaXMuZmFzdE51bWJlcnNDYWNoZWQgPT0gbnVsbCkge1xuICAgICAgICB0aGlzLmZhc3ROdW1iZXJzQ2FjaGVkID0gc3VwcG9ydHNGYXN0TnVtYmVycyh0aGlzKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHRoaXMuZmFzdE51bWJlcnNDYWNoZWQ7XG4gICAgfVxuICB9XSk7XG5cbiAgcmV0dXJuIExvY2FsZTtcbn0oKTtcblxuLypcbiAqIFRoaXMgZmlsZSBoYW5kbGVzIHBhcnNpbmcgZm9yIHdlbGwtc3BlY2lmaWVkIGZvcm1hdHMuIEhlcmUncyBob3cgaXQgd29ya3M6XG4gKiBUd28gdGhpbmdzIGdvIGludG8gcGFyc2luZzogYSByZWdleCB0byBtYXRjaCB3aXRoIGFuZCBhbiBleHRyYWN0b3IgdG8gdGFrZSBhcGFydCB0aGUgZ3JvdXBzIGluIHRoZSBtYXRjaC5cbiAqIEFuIGV4dHJhY3RvciBpcyBqdXN0IGEgZnVuY3Rpb24gdGhhdCB0YWtlcyBhIHJlZ2V4IG1hdGNoIGFycmF5IGFuZCByZXR1cm5zIGEgeyB5ZWFyOiAuLi4sIG1vbnRoOiAuLi4gfSBvYmplY3RcbiAqIHBhcnNlKCkgZG9lcyB0aGUgd29yayBvZiBleGVjdXRpbmcgdGhlIHJlZ2V4IGFuZCBhcHBseWluZyB0aGUgZXh0cmFjdG9yLiBJdCB0YWtlcyBtdWx0aXBsZSByZWdleC9leHRyYWN0b3IgcGFpcnMgdG8gdHJ5IGluIHNlcXVlbmNlLlxuICogRXh0cmFjdG9ycyBjYW4gdGFrZSBhIFwiY3Vyc29yXCIgcmVwcmVzZW50aW5nIHRoZSBvZmZzZXQgaW4gdGhlIG1hdGNoIHRvIGxvb2sgYXQuIFRoaXMgbWFrZXMgaXQgZWFzeSB0byBjb21iaW5lIGV4dHJhY3RvcnMuXG4gKiBjb21iaW5lRXh0cmFjdG9ycygpIGRvZXMgdGhlIHdvcmsgb2YgY29tYmluaW5nIHRoZW0sIGtlZXBpbmcgdHJhY2sgb2YgdGhlIGN1cnNvciB0aHJvdWdoIG11bHRpcGxlIGV4dHJhY3Rpb25zLlxuICogU29tZSBleHRyYWN0aW9ucyBhcmUgc3VwZXIgZHVtYiBhbmQgc2ltcGxlUGFyc2UgYW5kIGZyb21TdHJpbmdzIGhlbHAgRFJZIHRoZW0uXG4gKi9cblxuZnVuY3Rpb24gY29tYmluZVJlZ2V4ZXMoKSB7XG4gIGZvciAodmFyIF9sZW4gPSBhcmd1bWVudHMubGVuZ3RoLCByZWdleGVzID0gbmV3IEFycmF5KF9sZW4pLCBfa2V5ID0gMDsgX2tleSA8IF9sZW47IF9rZXkrKykge1xuICAgIHJlZ2V4ZXNbX2tleV0gPSBhcmd1bWVudHNbX2tleV07XG4gIH1cblxuICB2YXIgZnVsbCA9IHJlZ2V4ZXMucmVkdWNlKGZ1bmN0aW9uIChmLCByKSB7XG4gICAgcmV0dXJuIGYgKyByLnNvdXJjZTtcbiAgfSwgXCJcIik7XG4gIHJldHVybiBSZWdFeHAoXCJeXCIgKyBmdWxsICsgXCIkXCIpO1xufVxuXG5mdW5jdGlvbiBjb21iaW5lRXh0cmFjdG9ycygpIHtcbiAgZm9yICh2YXIgX2xlbjIgPSBhcmd1bWVudHMubGVuZ3RoLCBleHRyYWN0b3JzID0gbmV3IEFycmF5KF9sZW4yKSwgX2tleTIgPSAwOyBfa2V5MiA8IF9sZW4yOyBfa2V5MisrKSB7XG4gICAgZXh0cmFjdG9yc1tfa2V5Ml0gPSBhcmd1bWVudHNbX2tleTJdO1xuICB9XG5cbiAgcmV0dXJuIGZ1bmN0aW9uIChtKSB7XG4gICAgcmV0dXJuIGV4dHJhY3RvcnMucmVkdWNlKGZ1bmN0aW9uIChfcmVmLCBleCkge1xuICAgICAgdmFyIG1lcmdlZFZhbHMgPSBfcmVmWzBdLFxuICAgICAgICAgIG1lcmdlZFpvbmUgPSBfcmVmWzFdLFxuICAgICAgICAgIGN1cnNvciA9IF9yZWZbMl07XG5cbiAgICAgIHZhciBfZXggPSBleChtLCBjdXJzb3IpLFxuICAgICAgICAgIHZhbCA9IF9leFswXSxcbiAgICAgICAgICB6b25lID0gX2V4WzFdLFxuICAgICAgICAgIG5leHQgPSBfZXhbMl07XG5cbiAgICAgIHJldHVybiBbX2V4dGVuZHMoe30sIG1lcmdlZFZhbHMsIHZhbCksIG1lcmdlZFpvbmUgfHwgem9uZSwgbmV4dF07XG4gICAgfSwgW3t9LCBudWxsLCAxXSkuc2xpY2UoMCwgMik7XG4gIH07XG59XG5cbmZ1bmN0aW9uIHBhcnNlKHMpIHtcbiAgaWYgKHMgPT0gbnVsbCkge1xuICAgIHJldHVybiBbbnVsbCwgbnVsbF07XG4gIH1cblxuICBmb3IgKHZhciBfbGVuMyA9IGFyZ3VtZW50cy5sZW5ndGgsIHBhdHRlcm5zID0gbmV3IEFycmF5KF9sZW4zID4gMSA/IF9sZW4zIC0gMSA6IDApLCBfa2V5MyA9IDE7IF9rZXkzIDwgX2xlbjM7IF9rZXkzKyspIHtcbiAgICBwYXR0ZXJuc1tfa2V5MyAtIDFdID0gYXJndW1lbnRzW19rZXkzXTtcbiAgfVxuXG4gIGZvciAodmFyIF9pID0gMCwgX3BhdHRlcm5zID0gcGF0dGVybnM7IF9pIDwgX3BhdHRlcm5zLmxlbmd0aDsgX2krKykge1xuICAgIHZhciBfcGF0dGVybnMkX2kgPSBfcGF0dGVybnNbX2ldLFxuICAgICAgICByZWdleCA9IF9wYXR0ZXJucyRfaVswXSxcbiAgICAgICAgZXh0cmFjdG9yID0gX3BhdHRlcm5zJF9pWzFdO1xuICAgIHZhciBtID0gcmVnZXguZXhlYyhzKTtcblxuICAgIGlmIChtKSB7XG4gICAgICByZXR1cm4gZXh0cmFjdG9yKG0pO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiBbbnVsbCwgbnVsbF07XG59XG5cbmZ1bmN0aW9uIHNpbXBsZVBhcnNlKCkge1xuICBmb3IgKHZhciBfbGVuNCA9IGFyZ3VtZW50cy5sZW5ndGgsIGtleXMgPSBuZXcgQXJyYXkoX2xlbjQpLCBfa2V5NCA9IDA7IF9rZXk0IDwgX2xlbjQ7IF9rZXk0KyspIHtcbiAgICBrZXlzW19rZXk0XSA9IGFyZ3VtZW50c1tfa2V5NF07XG4gIH1cblxuICByZXR1cm4gZnVuY3Rpb24gKG1hdGNoLCBjdXJzb3IpIHtcbiAgICB2YXIgcmV0ID0ge307XG4gICAgdmFyIGk7XG5cbiAgICBmb3IgKGkgPSAwOyBpIDwga2V5cy5sZW5ndGg7IGkrKykge1xuICAgICAgcmV0W2tleXNbaV1dID0gcGFyc2VJbnRlZ2VyKG1hdGNoW2N1cnNvciArIGldKTtcbiAgICB9XG5cbiAgICByZXR1cm4gW3JldCwgbnVsbCwgY3Vyc29yICsgaV07XG4gIH07XG59IC8vIElTTyBhbmQgU1FMIHBhcnNpbmdcblxuXG52YXIgb2Zmc2V0UmVnZXggPSAvKD86KFopfChbKy1dXFxkXFxkKSg/Ojo/KFxcZFxcZCkpPykvLFxuICAgIGlzb1RpbWVCYXNlUmVnZXggPSAvKFxcZFxcZCkoPzo6PyhcXGRcXGQpKD86Oj8oXFxkXFxkKSg/OlsuLF0oXFxkezEsMzB9KSk/KT8pPy8sXG4gICAgaXNvVGltZVJlZ2V4ID0gUmVnRXhwKFwiXCIgKyBpc29UaW1lQmFzZVJlZ2V4LnNvdXJjZSArIG9mZnNldFJlZ2V4LnNvdXJjZSArIFwiP1wiKSxcbiAgICBpc29UaW1lRXh0ZW5zaW9uUmVnZXggPSBSZWdFeHAoXCIoPzpUXCIgKyBpc29UaW1lUmVnZXguc291cmNlICsgXCIpP1wiKSxcbiAgICBpc29ZbWRSZWdleCA9IC8oWystXVxcZHs2fXxcXGR7NH0pKD86LT8oXFxkXFxkKSg/Oi0/KFxcZFxcZCkpPyk/LyxcbiAgICBpc29XZWVrUmVnZXggPSAvKFxcZHs0fSktP1coXFxkXFxkKSg/Oi0/KFxcZCkpPy8sXG4gICAgaXNvT3JkaW5hbFJlZ2V4ID0gLyhcXGR7NH0pLT8oXFxkezN9KS8sXG4gICAgZXh0cmFjdElTT1dlZWtEYXRhID0gc2ltcGxlUGFyc2UoXCJ3ZWVrWWVhclwiLCBcIndlZWtOdW1iZXJcIiwgXCJ3ZWVrRGF5XCIpLFxuICAgIGV4dHJhY3RJU09PcmRpbmFsRGF0YSA9IHNpbXBsZVBhcnNlKFwieWVhclwiLCBcIm9yZGluYWxcIiksXG4gICAgc3FsWW1kUmVnZXggPSAvKFxcZHs0fSktKFxcZFxcZCktKFxcZFxcZCkvLFxuICAgIC8vIGR1bWJlZC1kb3duIHZlcnNpb24gb2YgdGhlIElTTyBvbmVcbnNxbFRpbWVSZWdleCA9IFJlZ0V4cChpc29UaW1lQmFzZVJlZ2V4LnNvdXJjZSArIFwiID8oPzpcIiArIG9mZnNldFJlZ2V4LnNvdXJjZSArIFwifChcIiArIGlhbmFSZWdleC5zb3VyY2UgKyBcIikpP1wiKSxcbiAgICBzcWxUaW1lRXh0ZW5zaW9uUmVnZXggPSBSZWdFeHAoXCIoPzogXCIgKyBzcWxUaW1lUmVnZXguc291cmNlICsgXCIpP1wiKTtcblxuZnVuY3Rpb24gaW50KG1hdGNoLCBwb3MsIGZhbGxiYWNrKSB7XG4gIHZhciBtID0gbWF0Y2hbcG9zXTtcbiAgcmV0dXJuIGlzVW5kZWZpbmVkKG0pID8gZmFsbGJhY2sgOiBwYXJzZUludGVnZXIobSk7XG59XG5cbmZ1bmN0aW9uIGV4dHJhY3RJU09ZbWQobWF0Y2gsIGN1cnNvcikge1xuICB2YXIgaXRlbSA9IHtcbiAgICB5ZWFyOiBpbnQobWF0Y2gsIGN1cnNvciksXG4gICAgbW9udGg6IGludChtYXRjaCwgY3Vyc29yICsgMSwgMSksXG4gICAgZGF5OiBpbnQobWF0Y2gsIGN1cnNvciArIDIsIDEpXG4gIH07XG4gIHJldHVybiBbaXRlbSwgbnVsbCwgY3Vyc29yICsgM107XG59XG5cbmZ1bmN0aW9uIGV4dHJhY3RJU09UaW1lKG1hdGNoLCBjdXJzb3IpIHtcbiAgdmFyIGl0ZW0gPSB7XG4gICAgaG91cnM6IGludChtYXRjaCwgY3Vyc29yLCAwKSxcbiAgICBtaW51dGVzOiBpbnQobWF0Y2gsIGN1cnNvciArIDEsIDApLFxuICAgIHNlY29uZHM6IGludChtYXRjaCwgY3Vyc29yICsgMiwgMCksXG4gICAgbWlsbGlzZWNvbmRzOiBwYXJzZU1pbGxpcyhtYXRjaFtjdXJzb3IgKyAzXSlcbiAgfTtcbiAgcmV0dXJuIFtpdGVtLCBudWxsLCBjdXJzb3IgKyA0XTtcbn1cblxuZnVuY3Rpb24gZXh0cmFjdElTT09mZnNldChtYXRjaCwgY3Vyc29yKSB7XG4gIHZhciBsb2NhbCA9ICFtYXRjaFtjdXJzb3JdICYmICFtYXRjaFtjdXJzb3IgKyAxXSxcbiAgICAgIGZ1bGxPZmZzZXQgPSBzaWduZWRPZmZzZXQobWF0Y2hbY3Vyc29yICsgMV0sIG1hdGNoW2N1cnNvciArIDJdKSxcbiAgICAgIHpvbmUgPSBsb2NhbCA/IG51bGwgOiBGaXhlZE9mZnNldFpvbmUuaW5zdGFuY2UoZnVsbE9mZnNldCk7XG4gIHJldHVybiBbe30sIHpvbmUsIGN1cnNvciArIDNdO1xufVxuXG5mdW5jdGlvbiBleHRyYWN0SUFOQVpvbmUobWF0Y2gsIGN1cnNvcikge1xuICB2YXIgem9uZSA9IG1hdGNoW2N1cnNvcl0gPyBJQU5BWm9uZS5jcmVhdGUobWF0Y2hbY3Vyc29yXSkgOiBudWxsO1xuICByZXR1cm4gW3t9LCB6b25lLCBjdXJzb3IgKyAxXTtcbn0gLy8gSVNPIHRpbWUgcGFyc2luZ1xuXG5cbnZhciBpc29UaW1lT25seSA9IFJlZ0V4cChcIl5UP1wiICsgaXNvVGltZUJhc2VSZWdleC5zb3VyY2UgKyBcIiRcIik7IC8vIElTTyBkdXJhdGlvbiBwYXJzaW5nXG5cbnZhciBpc29EdXJhdGlvbiA9IC9eLT9QKD86KD86KC0/XFxkezEsOX0oPzpcXC5cXGR7MSw5fSk/KVkpPyg/OigtP1xcZHsxLDl9KD86XFwuXFxkezEsOX0pPylNKT8oPzooLT9cXGR7MSw5fSg/OlxcLlxcZHsxLDl9KT8pVyk/KD86KC0/XFxkezEsOX0oPzpcXC5cXGR7MSw5fSk/KUQpPyg/OlQoPzooLT9cXGR7MSw5fSg/OlxcLlxcZHsxLDl9KT8pSCk/KD86KC0/XFxkezEsOX0oPzpcXC5cXGR7MSw5fSk/KU0pPyg/OigtP1xcZHsxLDIwfSkoPzpbLixdKC0/XFxkezEsOX0pKT9TKT8pPykkLztcblxuZnVuY3Rpb24gZXh0cmFjdElTT0R1cmF0aW9uKG1hdGNoKSB7XG4gIHZhciBzID0gbWF0Y2hbMF0sXG4gICAgICB5ZWFyU3RyID0gbWF0Y2hbMV0sXG4gICAgICBtb250aFN0ciA9IG1hdGNoWzJdLFxuICAgICAgd2Vla1N0ciA9IG1hdGNoWzNdLFxuICAgICAgZGF5U3RyID0gbWF0Y2hbNF0sXG4gICAgICBob3VyU3RyID0gbWF0Y2hbNV0sXG4gICAgICBtaW51dGVTdHIgPSBtYXRjaFs2XSxcbiAgICAgIHNlY29uZFN0ciA9IG1hdGNoWzddLFxuICAgICAgbWlsbGlzZWNvbmRzU3RyID0gbWF0Y2hbOF07XG4gIHZhciBoYXNOZWdhdGl2ZVByZWZpeCA9IHNbMF0gPT09IFwiLVwiO1xuICB2YXIgbmVnYXRpdmVTZWNvbmRzID0gc2Vjb25kU3RyICYmIHNlY29uZFN0clswXSA9PT0gXCItXCI7XG5cbiAgdmFyIG1heWJlTmVnYXRlID0gZnVuY3Rpb24gbWF5YmVOZWdhdGUobnVtLCBmb3JjZSkge1xuICAgIGlmIChmb3JjZSA9PT0gdm9pZCAwKSB7XG4gICAgICBmb3JjZSA9IGZhbHNlO1xuICAgIH1cblxuICAgIHJldHVybiBudW0gIT09IHVuZGVmaW5lZCAmJiAoZm9yY2UgfHwgbnVtICYmIGhhc05lZ2F0aXZlUHJlZml4KSA/IC1udW0gOiBudW07XG4gIH07XG5cbiAgcmV0dXJuIFt7XG4gICAgeWVhcnM6IG1heWJlTmVnYXRlKHBhcnNlRmxvYXRpbmcoeWVhclN0cikpLFxuICAgIG1vbnRoczogbWF5YmVOZWdhdGUocGFyc2VGbG9hdGluZyhtb250aFN0cikpLFxuICAgIHdlZWtzOiBtYXliZU5lZ2F0ZShwYXJzZUZsb2F0aW5nKHdlZWtTdHIpKSxcbiAgICBkYXlzOiBtYXliZU5lZ2F0ZShwYXJzZUZsb2F0aW5nKGRheVN0cikpLFxuICAgIGhvdXJzOiBtYXliZU5lZ2F0ZShwYXJzZUZsb2F0aW5nKGhvdXJTdHIpKSxcbiAgICBtaW51dGVzOiBtYXliZU5lZ2F0ZShwYXJzZUZsb2F0aW5nKG1pbnV0ZVN0cikpLFxuICAgIHNlY29uZHM6IG1heWJlTmVnYXRlKHBhcnNlRmxvYXRpbmcoc2Vjb25kU3RyKSwgc2Vjb25kU3RyID09PSBcIi0wXCIpLFxuICAgIG1pbGxpc2Vjb25kczogbWF5YmVOZWdhdGUocGFyc2VNaWxsaXMobWlsbGlzZWNvbmRzU3RyKSwgbmVnYXRpdmVTZWNvbmRzKVxuICB9XTtcbn0gLy8gVGhlc2UgYXJlIGEgbGl0dGxlIGJyYWluZGVhZC4gRURUICpzaG91bGQqIHRlbGwgdXMgdGhhdCB3ZSdyZSBpbiwgc2F5LCBBbWVyaWNhL05ld19Zb3JrXG4vLyBhbmQgbm90IGp1c3QgdGhhdCB3ZSdyZSBpbiAtMjQwICpyaWdodCBub3cqLiBCdXQgc2luY2UgSSBkb24ndCB0aGluayB0aGVzZSBhcmUgdXNlZCB0aGF0IG9mdGVuXG4vLyBJJ20ganVzdCBnb2luZyB0byBpZ25vcmUgdGhhdFxuXG5cbnZhciBvYnNPZmZzZXRzID0ge1xuICBHTVQ6IDAsXG4gIEVEVDogLTQgKiA2MCxcbiAgRVNUOiAtNSAqIDYwLFxuICBDRFQ6IC01ICogNjAsXG4gIENTVDogLTYgKiA2MCxcbiAgTURUOiAtNiAqIDYwLFxuICBNU1Q6IC03ICogNjAsXG4gIFBEVDogLTcgKiA2MCxcbiAgUFNUOiAtOCAqIDYwXG59O1xuXG5mdW5jdGlvbiBmcm9tU3RyaW5ncyh3ZWVrZGF5U3RyLCB5ZWFyU3RyLCBtb250aFN0ciwgZGF5U3RyLCBob3VyU3RyLCBtaW51dGVTdHIsIHNlY29uZFN0cikge1xuICB2YXIgcmVzdWx0ID0ge1xuICAgIHllYXI6IHllYXJTdHIubGVuZ3RoID09PSAyID8gdW50cnVuY2F0ZVllYXIocGFyc2VJbnRlZ2VyKHllYXJTdHIpKSA6IHBhcnNlSW50ZWdlcih5ZWFyU3RyKSxcbiAgICBtb250aDogbW9udGhzU2hvcnQuaW5kZXhPZihtb250aFN0cikgKyAxLFxuICAgIGRheTogcGFyc2VJbnRlZ2VyKGRheVN0ciksXG4gICAgaG91cjogcGFyc2VJbnRlZ2VyKGhvdXJTdHIpLFxuICAgIG1pbnV0ZTogcGFyc2VJbnRlZ2VyKG1pbnV0ZVN0cilcbiAgfTtcbiAgaWYgKHNlY29uZFN0cikgcmVzdWx0LnNlY29uZCA9IHBhcnNlSW50ZWdlcihzZWNvbmRTdHIpO1xuXG4gIGlmICh3ZWVrZGF5U3RyKSB7XG4gICAgcmVzdWx0LndlZWtkYXkgPSB3ZWVrZGF5U3RyLmxlbmd0aCA+IDMgPyB3ZWVrZGF5c0xvbmcuaW5kZXhPZih3ZWVrZGF5U3RyKSArIDEgOiB3ZWVrZGF5c1Nob3J0LmluZGV4T2Yod2Vla2RheVN0cikgKyAxO1xuICB9XG5cbiAgcmV0dXJuIHJlc3VsdDtcbn0gLy8gUkZDIDI4MjIvNTMyMlxuXG5cbnZhciByZmMyODIyID0gL14oPzooTW9ufFR1ZXxXZWR8VGh1fEZyaXxTYXR8U3VuKSxcXHMpPyhcXGR7MSwyfSlcXHMoSmFufEZlYnxNYXJ8QXByfE1heXxKdW58SnVsfEF1Z3xTZXB8T2N0fE5vdnxEZWMpXFxzKFxcZHsyLDR9KVxccyhcXGRcXGQpOihcXGRcXGQpKD86OihcXGRcXGQpKT9cXHMoPzooVVR8R01UfFtFQ01QXVtTRF1UKXwoW1p6XSl8KD86KFsrLV1cXGRcXGQpKFxcZFxcZCkpKSQvO1xuXG5mdW5jdGlvbiBleHRyYWN0UkZDMjgyMihtYXRjaCkge1xuICB2YXIgd2Vla2RheVN0ciA9IG1hdGNoWzFdLFxuICAgICAgZGF5U3RyID0gbWF0Y2hbMl0sXG4gICAgICBtb250aFN0ciA9IG1hdGNoWzNdLFxuICAgICAgeWVhclN0ciA9IG1hdGNoWzRdLFxuICAgICAgaG91clN0ciA9IG1hdGNoWzVdLFxuICAgICAgbWludXRlU3RyID0gbWF0Y2hbNl0sXG4gICAgICBzZWNvbmRTdHIgPSBtYXRjaFs3XSxcbiAgICAgIG9ic09mZnNldCA9IG1hdGNoWzhdLFxuICAgICAgbWlsT2Zmc2V0ID0gbWF0Y2hbOV0sXG4gICAgICBvZmZIb3VyU3RyID0gbWF0Y2hbMTBdLFxuICAgICAgb2ZmTWludXRlU3RyID0gbWF0Y2hbMTFdLFxuICAgICAgcmVzdWx0ID0gZnJvbVN0cmluZ3Mod2Vla2RheVN0ciwgeWVhclN0ciwgbW9udGhTdHIsIGRheVN0ciwgaG91clN0ciwgbWludXRlU3RyLCBzZWNvbmRTdHIpO1xuICB2YXIgb2Zmc2V0O1xuXG4gIGlmIChvYnNPZmZzZXQpIHtcbiAgICBvZmZzZXQgPSBvYnNPZmZzZXRzW29ic09mZnNldF07XG4gIH0gZWxzZSBpZiAobWlsT2Zmc2V0KSB7XG4gICAgb2Zmc2V0ID0gMDtcbiAgfSBlbHNlIHtcbiAgICBvZmZzZXQgPSBzaWduZWRPZmZzZXQob2ZmSG91clN0ciwgb2ZmTWludXRlU3RyKTtcbiAgfVxuXG4gIHJldHVybiBbcmVzdWx0LCBuZXcgRml4ZWRPZmZzZXRab25lKG9mZnNldCldO1xufVxuXG5mdW5jdGlvbiBwcmVwcm9jZXNzUkZDMjgyMihzKSB7XG4gIC8vIFJlbW92ZSBjb21tZW50cyBhbmQgZm9sZGluZyB3aGl0ZXNwYWNlIGFuZCByZXBsYWNlIG11bHRpcGxlLXNwYWNlcyB3aXRoIGEgc2luZ2xlIHNwYWNlXG4gIHJldHVybiBzLnJlcGxhY2UoL1xcKFteKV0qXFwpfFtcXG5cXHRdL2csIFwiIFwiKS5yZXBsYWNlKC8oXFxzXFxzKykvZywgXCIgXCIpLnRyaW0oKTtcbn0gLy8gaHR0cCBkYXRlXG5cblxudmFyIHJmYzExMjMgPSAvXihNb258VHVlfFdlZHxUaHV8RnJpfFNhdHxTdW4pLCAoXFxkXFxkKSAoSmFufEZlYnxNYXJ8QXByfE1heXxKdW58SnVsfEF1Z3xTZXB8T2N0fE5vdnxEZWMpIChcXGR7NH0pIChcXGRcXGQpOihcXGRcXGQpOihcXGRcXGQpIEdNVCQvLFxuICAgIHJmYzg1MCA9IC9eKE1vbmRheXxUdWVzZGF5fFdlZHNkYXl8VGh1cnNkYXl8RnJpZGF5fFNhdHVyZGF5fFN1bmRheSksIChcXGRcXGQpLShKYW58RmVifE1hcnxBcHJ8TWF5fEp1bnxKdWx8QXVnfFNlcHxPY3R8Tm92fERlYyktKFxcZFxcZCkgKFxcZFxcZCk6KFxcZFxcZCk6KFxcZFxcZCkgR01UJC8sXG4gICAgYXNjaWkgPSAvXihNb258VHVlfFdlZHxUaHV8RnJpfFNhdHxTdW4pIChKYW58RmVifE1hcnxBcHJ8TWF5fEp1bnxKdWx8QXVnfFNlcHxPY3R8Tm92fERlYykgKCBcXGR8XFxkXFxkKSAoXFxkXFxkKTooXFxkXFxkKTooXFxkXFxkKSAoXFxkezR9KSQvO1xuXG5mdW5jdGlvbiBleHRyYWN0UkZDMTEyM09yODUwKG1hdGNoKSB7XG4gIHZhciB3ZWVrZGF5U3RyID0gbWF0Y2hbMV0sXG4gICAgICBkYXlTdHIgPSBtYXRjaFsyXSxcbiAgICAgIG1vbnRoU3RyID0gbWF0Y2hbM10sXG4gICAgICB5ZWFyU3RyID0gbWF0Y2hbNF0sXG4gICAgICBob3VyU3RyID0gbWF0Y2hbNV0sXG4gICAgICBtaW51dGVTdHIgPSBtYXRjaFs2XSxcbiAgICAgIHNlY29uZFN0ciA9IG1hdGNoWzddLFxuICAgICAgcmVzdWx0ID0gZnJvbVN0cmluZ3Mod2Vla2RheVN0ciwgeWVhclN0ciwgbW9udGhTdHIsIGRheVN0ciwgaG91clN0ciwgbWludXRlU3RyLCBzZWNvbmRTdHIpO1xuICByZXR1cm4gW3Jlc3VsdCwgRml4ZWRPZmZzZXRab25lLnV0Y0luc3RhbmNlXTtcbn1cblxuZnVuY3Rpb24gZXh0cmFjdEFTQ0lJKG1hdGNoKSB7XG4gIHZhciB3ZWVrZGF5U3RyID0gbWF0Y2hbMV0sXG4gICAgICBtb250aFN0ciA9IG1hdGNoWzJdLFxuICAgICAgZGF5U3RyID0gbWF0Y2hbM10sXG4gICAgICBob3VyU3RyID0gbWF0Y2hbNF0sXG4gICAgICBtaW51dGVTdHIgPSBtYXRjaFs1XSxcbiAgICAgIHNlY29uZFN0ciA9IG1hdGNoWzZdLFxuICAgICAgeWVhclN0ciA9IG1hdGNoWzddLFxuICAgICAgcmVzdWx0ID0gZnJvbVN0cmluZ3Mod2Vla2RheVN0ciwgeWVhclN0ciwgbW9udGhTdHIsIGRheVN0ciwgaG91clN0ciwgbWludXRlU3RyLCBzZWNvbmRTdHIpO1xuICByZXR1cm4gW3Jlc3VsdCwgRml4ZWRPZmZzZXRab25lLnV0Y0luc3RhbmNlXTtcbn1cblxudmFyIGlzb1ltZFdpdGhUaW1lRXh0ZW5zaW9uUmVnZXggPSBjb21iaW5lUmVnZXhlcyhpc29ZbWRSZWdleCwgaXNvVGltZUV4dGVuc2lvblJlZ2V4KTtcbnZhciBpc29XZWVrV2l0aFRpbWVFeHRlbnNpb25SZWdleCA9IGNvbWJpbmVSZWdleGVzKGlzb1dlZWtSZWdleCwgaXNvVGltZUV4dGVuc2lvblJlZ2V4KTtcbnZhciBpc29PcmRpbmFsV2l0aFRpbWVFeHRlbnNpb25SZWdleCA9IGNvbWJpbmVSZWdleGVzKGlzb09yZGluYWxSZWdleCwgaXNvVGltZUV4dGVuc2lvblJlZ2V4KTtcbnZhciBpc29UaW1lQ29tYmluZWRSZWdleCA9IGNvbWJpbmVSZWdleGVzKGlzb1RpbWVSZWdleCk7XG52YXIgZXh0cmFjdElTT1ltZFRpbWVBbmRPZmZzZXQgPSBjb21iaW5lRXh0cmFjdG9ycyhleHRyYWN0SVNPWW1kLCBleHRyYWN0SVNPVGltZSwgZXh0cmFjdElTT09mZnNldCk7XG52YXIgZXh0cmFjdElTT1dlZWtUaW1lQW5kT2Zmc2V0ID0gY29tYmluZUV4dHJhY3RvcnMoZXh0cmFjdElTT1dlZWtEYXRhLCBleHRyYWN0SVNPVGltZSwgZXh0cmFjdElTT09mZnNldCk7XG52YXIgZXh0cmFjdElTT09yZGluYWxEYXRlQW5kVGltZSA9IGNvbWJpbmVFeHRyYWN0b3JzKGV4dHJhY3RJU09PcmRpbmFsRGF0YSwgZXh0cmFjdElTT1RpbWUsIGV4dHJhY3RJU09PZmZzZXQpO1xudmFyIGV4dHJhY3RJU09UaW1lQW5kT2Zmc2V0ID0gY29tYmluZUV4dHJhY3RvcnMoZXh0cmFjdElTT1RpbWUsIGV4dHJhY3RJU09PZmZzZXQpO1xuLyoqXG4gKiBAcHJpdmF0ZVxuICovXG5cbmZ1bmN0aW9uIHBhcnNlSVNPRGF0ZShzKSB7XG4gIHJldHVybiBwYXJzZShzLCBbaXNvWW1kV2l0aFRpbWVFeHRlbnNpb25SZWdleCwgZXh0cmFjdElTT1ltZFRpbWVBbmRPZmZzZXRdLCBbaXNvV2Vla1dpdGhUaW1lRXh0ZW5zaW9uUmVnZXgsIGV4dHJhY3RJU09XZWVrVGltZUFuZE9mZnNldF0sIFtpc29PcmRpbmFsV2l0aFRpbWVFeHRlbnNpb25SZWdleCwgZXh0cmFjdElTT09yZGluYWxEYXRlQW5kVGltZV0sIFtpc29UaW1lQ29tYmluZWRSZWdleCwgZXh0cmFjdElTT1RpbWVBbmRPZmZzZXRdKTtcbn1cbmZ1bmN0aW9uIHBhcnNlUkZDMjgyMkRhdGUocykge1xuICByZXR1cm4gcGFyc2UocHJlcHJvY2Vzc1JGQzI4MjIocyksIFtyZmMyODIyLCBleHRyYWN0UkZDMjgyMl0pO1xufVxuZnVuY3Rpb24gcGFyc2VIVFRQRGF0ZShzKSB7XG4gIHJldHVybiBwYXJzZShzLCBbcmZjMTEyMywgZXh0cmFjdFJGQzExMjNPcjg1MF0sIFtyZmM4NTAsIGV4dHJhY3RSRkMxMTIzT3I4NTBdLCBbYXNjaWksIGV4dHJhY3RBU0NJSV0pO1xufVxuZnVuY3Rpb24gcGFyc2VJU09EdXJhdGlvbihzKSB7XG4gIHJldHVybiBwYXJzZShzLCBbaXNvRHVyYXRpb24sIGV4dHJhY3RJU09EdXJhdGlvbl0pO1xufVxudmFyIGV4dHJhY3RJU09UaW1lT25seSA9IGNvbWJpbmVFeHRyYWN0b3JzKGV4dHJhY3RJU09UaW1lKTtcbmZ1bmN0aW9uIHBhcnNlSVNPVGltZU9ubHkocykge1xuICByZXR1cm4gcGFyc2UocywgW2lzb1RpbWVPbmx5LCBleHRyYWN0SVNPVGltZU9ubHldKTtcbn1cbnZhciBzcWxZbWRXaXRoVGltZUV4dGVuc2lvblJlZ2V4ID0gY29tYmluZVJlZ2V4ZXMoc3FsWW1kUmVnZXgsIHNxbFRpbWVFeHRlbnNpb25SZWdleCk7XG52YXIgc3FsVGltZUNvbWJpbmVkUmVnZXggPSBjb21iaW5lUmVnZXhlcyhzcWxUaW1lUmVnZXgpO1xudmFyIGV4dHJhY3RJU09ZbWRUaW1lT2Zmc2V0QW5kSUFOQVpvbmUgPSBjb21iaW5lRXh0cmFjdG9ycyhleHRyYWN0SVNPWW1kLCBleHRyYWN0SVNPVGltZSwgZXh0cmFjdElTT09mZnNldCwgZXh0cmFjdElBTkFab25lKTtcbnZhciBleHRyYWN0SVNPVGltZU9mZnNldEFuZElBTkFab25lID0gY29tYmluZUV4dHJhY3RvcnMoZXh0cmFjdElTT1RpbWUsIGV4dHJhY3RJU09PZmZzZXQsIGV4dHJhY3RJQU5BWm9uZSk7XG5mdW5jdGlvbiBwYXJzZVNRTChzKSB7XG4gIHJldHVybiBwYXJzZShzLCBbc3FsWW1kV2l0aFRpbWVFeHRlbnNpb25SZWdleCwgZXh0cmFjdElTT1ltZFRpbWVPZmZzZXRBbmRJQU5BWm9uZV0sIFtzcWxUaW1lQ29tYmluZWRSZWdleCwgZXh0cmFjdElTT1RpbWVPZmZzZXRBbmRJQU5BWm9uZV0pO1xufVxuXG52YXIgSU5WQUxJRCQyID0gXCJJbnZhbGlkIER1cmF0aW9uXCI7IC8vIHVuaXQgY29udmVyc2lvbiBjb25zdGFudHNcblxudmFyIGxvd09yZGVyTWF0cml4ID0ge1xuICB3ZWVrczoge1xuICAgIGRheXM6IDcsXG4gICAgaG91cnM6IDcgKiAyNCxcbiAgICBtaW51dGVzOiA3ICogMjQgKiA2MCxcbiAgICBzZWNvbmRzOiA3ICogMjQgKiA2MCAqIDYwLFxuICAgIG1pbGxpc2Vjb25kczogNyAqIDI0ICogNjAgKiA2MCAqIDEwMDBcbiAgfSxcbiAgZGF5czoge1xuICAgIGhvdXJzOiAyNCxcbiAgICBtaW51dGVzOiAyNCAqIDYwLFxuICAgIHNlY29uZHM6IDI0ICogNjAgKiA2MCxcbiAgICBtaWxsaXNlY29uZHM6IDI0ICogNjAgKiA2MCAqIDEwMDBcbiAgfSxcbiAgaG91cnM6IHtcbiAgICBtaW51dGVzOiA2MCxcbiAgICBzZWNvbmRzOiA2MCAqIDYwLFxuICAgIG1pbGxpc2Vjb25kczogNjAgKiA2MCAqIDEwMDBcbiAgfSxcbiAgbWludXRlczoge1xuICAgIHNlY29uZHM6IDYwLFxuICAgIG1pbGxpc2Vjb25kczogNjAgKiAxMDAwXG4gIH0sXG4gIHNlY29uZHM6IHtcbiAgICBtaWxsaXNlY29uZHM6IDEwMDBcbiAgfVxufSxcbiAgICBjYXN1YWxNYXRyaXggPSBfZXh0ZW5kcyh7XG4gIHllYXJzOiB7XG4gICAgcXVhcnRlcnM6IDQsXG4gICAgbW9udGhzOiAxMixcbiAgICB3ZWVrczogNTIsXG4gICAgZGF5czogMzY1LFxuICAgIGhvdXJzOiAzNjUgKiAyNCxcbiAgICBtaW51dGVzOiAzNjUgKiAyNCAqIDYwLFxuICAgIHNlY29uZHM6IDM2NSAqIDI0ICogNjAgKiA2MCxcbiAgICBtaWxsaXNlY29uZHM6IDM2NSAqIDI0ICogNjAgKiA2MCAqIDEwMDBcbiAgfSxcbiAgcXVhcnRlcnM6IHtcbiAgICBtb250aHM6IDMsXG4gICAgd2Vla3M6IDEzLFxuICAgIGRheXM6IDkxLFxuICAgIGhvdXJzOiA5MSAqIDI0LFxuICAgIG1pbnV0ZXM6IDkxICogMjQgKiA2MCxcbiAgICBzZWNvbmRzOiA5MSAqIDI0ICogNjAgKiA2MCxcbiAgICBtaWxsaXNlY29uZHM6IDkxICogMjQgKiA2MCAqIDYwICogMTAwMFxuICB9LFxuICBtb250aHM6IHtcbiAgICB3ZWVrczogNCxcbiAgICBkYXlzOiAzMCxcbiAgICBob3VyczogMzAgKiAyNCxcbiAgICBtaW51dGVzOiAzMCAqIDI0ICogNjAsXG4gICAgc2Vjb25kczogMzAgKiAyNCAqIDYwICogNjAsXG4gICAgbWlsbGlzZWNvbmRzOiAzMCAqIDI0ICogNjAgKiA2MCAqIDEwMDBcbiAgfVxufSwgbG93T3JkZXJNYXRyaXgpLFxuICAgIGRheXNJblllYXJBY2N1cmF0ZSA9IDE0NjA5Ny4wIC8gNDAwLFxuICAgIGRheXNJbk1vbnRoQWNjdXJhdGUgPSAxNDYwOTcuMCAvIDQ4MDAsXG4gICAgYWNjdXJhdGVNYXRyaXggPSBfZXh0ZW5kcyh7XG4gIHllYXJzOiB7XG4gICAgcXVhcnRlcnM6IDQsXG4gICAgbW9udGhzOiAxMixcbiAgICB3ZWVrczogZGF5c0luWWVhckFjY3VyYXRlIC8gNyxcbiAgICBkYXlzOiBkYXlzSW5ZZWFyQWNjdXJhdGUsXG4gICAgaG91cnM6IGRheXNJblllYXJBY2N1cmF0ZSAqIDI0LFxuICAgIG1pbnV0ZXM6IGRheXNJblllYXJBY2N1cmF0ZSAqIDI0ICogNjAsXG4gICAgc2Vjb25kczogZGF5c0luWWVhckFjY3VyYXRlICogMjQgKiA2MCAqIDYwLFxuICAgIG1pbGxpc2Vjb25kczogZGF5c0luWWVhckFjY3VyYXRlICogMjQgKiA2MCAqIDYwICogMTAwMFxuICB9LFxuICBxdWFydGVyczoge1xuICAgIG1vbnRoczogMyxcbiAgICB3ZWVrczogZGF5c0luWWVhckFjY3VyYXRlIC8gMjgsXG4gICAgZGF5czogZGF5c0luWWVhckFjY3VyYXRlIC8gNCxcbiAgICBob3VyczogZGF5c0luWWVhckFjY3VyYXRlICogMjQgLyA0LFxuICAgIG1pbnV0ZXM6IGRheXNJblllYXJBY2N1cmF0ZSAqIDI0ICogNjAgLyA0LFxuICAgIHNlY29uZHM6IGRheXNJblllYXJBY2N1cmF0ZSAqIDI0ICogNjAgKiA2MCAvIDQsXG4gICAgbWlsbGlzZWNvbmRzOiBkYXlzSW5ZZWFyQWNjdXJhdGUgKiAyNCAqIDYwICogNjAgKiAxMDAwIC8gNFxuICB9LFxuICBtb250aHM6IHtcbiAgICB3ZWVrczogZGF5c0luTW9udGhBY2N1cmF0ZSAvIDcsXG4gICAgZGF5czogZGF5c0luTW9udGhBY2N1cmF0ZSxcbiAgICBob3VyczogZGF5c0luTW9udGhBY2N1cmF0ZSAqIDI0LFxuICAgIG1pbnV0ZXM6IGRheXNJbk1vbnRoQWNjdXJhdGUgKiAyNCAqIDYwLFxuICAgIHNlY29uZHM6IGRheXNJbk1vbnRoQWNjdXJhdGUgKiAyNCAqIDYwICogNjAsXG4gICAgbWlsbGlzZWNvbmRzOiBkYXlzSW5Nb250aEFjY3VyYXRlICogMjQgKiA2MCAqIDYwICogMTAwMFxuICB9XG59LCBsb3dPcmRlck1hdHJpeCk7IC8vIHVuaXRzIG9yZGVyZWQgYnkgc2l6ZVxuXG52YXIgb3JkZXJlZFVuaXRzJDEgPSBbXCJ5ZWFyc1wiLCBcInF1YXJ0ZXJzXCIsIFwibW9udGhzXCIsIFwid2Vla3NcIiwgXCJkYXlzXCIsIFwiaG91cnNcIiwgXCJtaW51dGVzXCIsIFwic2Vjb25kc1wiLCBcIm1pbGxpc2Vjb25kc1wiXTtcbnZhciByZXZlcnNlVW5pdHMgPSBvcmRlcmVkVW5pdHMkMS5zbGljZSgwKS5yZXZlcnNlKCk7IC8vIGNsb25lIHJlYWxseSBtZWFucyBcImNyZWF0ZSBhbm90aGVyIGluc3RhbmNlIGp1c3QgbGlrZSB0aGlzIG9uZSwgYnV0IHdpdGggdGhlc2UgY2hhbmdlc1wiXG5cbmZ1bmN0aW9uIGNsb25lJDEoZHVyLCBhbHRzLCBjbGVhcikge1xuICBpZiAoY2xlYXIgPT09IHZvaWQgMCkge1xuICAgIGNsZWFyID0gZmFsc2U7XG4gIH1cblxuICAvLyBkZWVwIG1lcmdlIGZvciB2YWxzXG4gIHZhciBjb25mID0ge1xuICAgIHZhbHVlczogY2xlYXIgPyBhbHRzLnZhbHVlcyA6IF9leHRlbmRzKHt9LCBkdXIudmFsdWVzLCBhbHRzLnZhbHVlcyB8fCB7fSksXG4gICAgbG9jOiBkdXIubG9jLmNsb25lKGFsdHMubG9jKSxcbiAgICBjb252ZXJzaW9uQWNjdXJhY3k6IGFsdHMuY29udmVyc2lvbkFjY3VyYWN5IHx8IGR1ci5jb252ZXJzaW9uQWNjdXJhY3lcbiAgfTtcbiAgcmV0dXJuIG5ldyBEdXJhdGlvbihjb25mKTtcbn1cblxuZnVuY3Rpb24gYW50aVRydW5jKG4pIHtcbiAgcmV0dXJuIG4gPCAwID8gTWF0aC5mbG9vcihuKSA6IE1hdGguY2VpbChuKTtcbn0gLy8gTkI6IG11dGF0ZXMgcGFyYW1ldGVyc1xuXG5cbmZ1bmN0aW9uIGNvbnZlcnQobWF0cml4LCBmcm9tTWFwLCBmcm9tVW5pdCwgdG9NYXAsIHRvVW5pdCkge1xuICB2YXIgY29udiA9IG1hdHJpeFt0b1VuaXRdW2Zyb21Vbml0XSxcbiAgICAgIHJhdyA9IGZyb21NYXBbZnJvbVVuaXRdIC8gY29udixcbiAgICAgIHNhbWVTaWduID0gTWF0aC5zaWduKHJhdykgPT09IE1hdGguc2lnbih0b01hcFt0b1VuaXRdKSxcbiAgICAgIC8vIG9rLCBzbyB0aGlzIGlzIHdpbGQsIGJ1dCBzZWUgdGhlIG1hdHJpeCBpbiB0aGUgdGVzdHNcbiAgYWRkZWQgPSAhc2FtZVNpZ24gJiYgdG9NYXBbdG9Vbml0XSAhPT0gMCAmJiBNYXRoLmFicyhyYXcpIDw9IDEgPyBhbnRpVHJ1bmMocmF3KSA6IE1hdGgudHJ1bmMocmF3KTtcbiAgdG9NYXBbdG9Vbml0XSArPSBhZGRlZDtcbiAgZnJvbU1hcFtmcm9tVW5pdF0gLT0gYWRkZWQgKiBjb252O1xufSAvLyBOQjogbXV0YXRlcyBwYXJhbWV0ZXJzXG5cblxuZnVuY3Rpb24gbm9ybWFsaXplVmFsdWVzKG1hdHJpeCwgdmFscykge1xuICByZXZlcnNlVW5pdHMucmVkdWNlKGZ1bmN0aW9uIChwcmV2aW91cywgY3VycmVudCkge1xuICAgIGlmICghaXNVbmRlZmluZWQodmFsc1tjdXJyZW50XSkpIHtcbiAgICAgIGlmIChwcmV2aW91cykge1xuICAgICAgICBjb252ZXJ0KG1hdHJpeCwgdmFscywgcHJldmlvdXMsIHZhbHMsIGN1cnJlbnQpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gY3VycmVudDtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIHByZXZpb3VzO1xuICAgIH1cbiAgfSwgbnVsbCk7XG59XG4vKipcbiAqIEEgRHVyYXRpb24gb2JqZWN0IHJlcHJlc2VudHMgYSBwZXJpb2Qgb2YgdGltZSwgbGlrZSBcIjIgbW9udGhzXCIgb3IgXCIxIGRheSwgMSBob3VyXCIuIENvbmNlcHR1YWxseSwgaXQncyBqdXN0IGEgbWFwIG9mIHVuaXRzIHRvIHRoZWlyIHF1YW50aXRpZXMsIGFjY29tcGFuaWVkIGJ5IHNvbWUgYWRkaXRpb25hbCBjb25maWd1cmF0aW9uIGFuZCBtZXRob2RzIGZvciBjcmVhdGluZywgcGFyc2luZywgaW50ZXJyb2dhdGluZywgdHJhbnNmb3JtaW5nLCBhbmQgZm9ybWF0dGluZyB0aGVtLiBUaGV5IGNhbiBiZSB1c2VkIG9uIHRoZWlyIG93biBvciBpbiBjb25qdW5jdGlvbiB3aXRoIG90aGVyIEx1eG9uIHR5cGVzOyBmb3IgZXhhbXBsZSwgeW91IGNhbiB1c2Uge0BsaW5rIERhdGVUaW1lI3BsdXN9IHRvIGFkZCBhIER1cmF0aW9uIG9iamVjdCB0byBhIERhdGVUaW1lLCBwcm9kdWNpbmcgYW5vdGhlciBEYXRlVGltZS5cbiAqXG4gKiBIZXJlIGlzIGEgYnJpZWYgb3ZlcnZpZXcgb2YgY29tbW9ubHkgdXNlZCBtZXRob2RzIGFuZCBnZXR0ZXJzIGluIER1cmF0aW9uOlxuICpcbiAqICogKipDcmVhdGlvbioqIFRvIGNyZWF0ZSBhIER1cmF0aW9uLCB1c2Uge0BsaW5rIER1cmF0aW9uI2Zyb21NaWxsaXN9LCB7QGxpbmsgRHVyYXRpb24jZnJvbU9iamVjdH0sIG9yIHtAbGluayBEdXJhdGlvbiNmcm9tSVNPfS5cbiAqICogKipVbml0IHZhbHVlcyoqIFNlZSB0aGUge0BsaW5rIER1cmF0aW9uI3llYXJzfSwge0BsaW5rIER1cmF0aW9uLm1vbnRoc30sIHtAbGluayBEdXJhdGlvbiN3ZWVrc30sIHtAbGluayBEdXJhdGlvbiNkYXlzfSwge0BsaW5rIER1cmF0aW9uI2hvdXJzfSwge0BsaW5rIER1cmF0aW9uI21pbnV0ZXN9LCB7QGxpbmsgRHVyYXRpb24jc2Vjb25kc30sIHtAbGluayBEdXJhdGlvbiNtaWxsaXNlY29uZHN9IGFjY2Vzc29ycy5cbiAqICogKipDb25maWd1cmF0aW9uKiogU2VlICB7QGxpbmsgRHVyYXRpb24jbG9jYWxlfSBhbmQge0BsaW5rIER1cmF0aW9uI251bWJlcmluZ1N5c3RlbX0gYWNjZXNzb3JzLlxuICogKiAqKlRyYW5zZm9ybWF0aW9uKiogVG8gY3JlYXRlIG5ldyBEdXJhdGlvbnMgb3V0IG9mIG9sZCBvbmVzIHVzZSB7QGxpbmsgRHVyYXRpb24jcGx1c30sIHtAbGluayBEdXJhdGlvbiNtaW51c30sIHtAbGluayBEdXJhdGlvbiNub3JtYWxpemV9LCB7QGxpbmsgRHVyYXRpb24jc2V0fSwge0BsaW5rIER1cmF0aW9uI3JlY29uZmlndXJlfSwge0BsaW5rIER1cmF0aW9uI3NoaWZ0VG99LCBhbmQge0BsaW5rIER1cmF0aW9uI25lZ2F0ZX0uXG4gKiAqICoqT3V0cHV0KiogVG8gY29udmVydCB0aGUgRHVyYXRpb24gaW50byBvdGhlciByZXByZXNlbnRhdGlvbnMsIHNlZSB7QGxpbmsgRHVyYXRpb24jYXN9LCB7QGxpbmsgRHVyYXRpb24jdG9JU099LCB7QGxpbmsgRHVyYXRpb24jdG9Gb3JtYXR9LCBhbmQge0BsaW5rIER1cmF0aW9uI3RvSlNPTn1cbiAqXG4gKiBUaGVyZSdzIGFyZSBtb3JlIG1ldGhvZHMgZG9jdW1lbnRlZCBiZWxvdy4gSW4gYWRkaXRpb24sIGZvciBtb3JlIGluZm9ybWF0aW9uIG9uIHN1YnRsZXIgdG9waWNzIGxpa2UgaW50ZXJuYXRpb25hbGl6YXRpb24gYW5kIHZhbGlkaXR5LCBzZWUgdGhlIGV4dGVybmFsIGRvY3VtZW50YXRpb24uXG4gKi9cblxuXG52YXIgRHVyYXRpb24gPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkge1xuICAvKipcbiAgICogQHByaXZhdGVcbiAgICovXG4gIGZ1bmN0aW9uIER1cmF0aW9uKGNvbmZpZykge1xuICAgIHZhciBhY2N1cmF0ZSA9IGNvbmZpZy5jb252ZXJzaW9uQWNjdXJhY3kgPT09IFwibG9uZ3Rlcm1cIiB8fCBmYWxzZTtcbiAgICAvKipcbiAgICAgKiBAYWNjZXNzIHByaXZhdGVcbiAgICAgKi9cblxuICAgIHRoaXMudmFsdWVzID0gY29uZmlnLnZhbHVlcztcbiAgICAvKipcbiAgICAgKiBAYWNjZXNzIHByaXZhdGVcbiAgICAgKi9cblxuICAgIHRoaXMubG9jID0gY29uZmlnLmxvYyB8fCBMb2NhbGUuY3JlYXRlKCk7XG4gICAgLyoqXG4gICAgICogQGFjY2VzcyBwcml2YXRlXG4gICAgICovXG5cbiAgICB0aGlzLmNvbnZlcnNpb25BY2N1cmFjeSA9IGFjY3VyYXRlID8gXCJsb25ndGVybVwiIDogXCJjYXN1YWxcIjtcbiAgICAvKipcbiAgICAgKiBAYWNjZXNzIHByaXZhdGVcbiAgICAgKi9cblxuICAgIHRoaXMuaW52YWxpZCA9IGNvbmZpZy5pbnZhbGlkIHx8IG51bGw7XG4gICAgLyoqXG4gICAgICogQGFjY2VzcyBwcml2YXRlXG4gICAgICovXG5cbiAgICB0aGlzLm1hdHJpeCA9IGFjY3VyYXRlID8gYWNjdXJhdGVNYXRyaXggOiBjYXN1YWxNYXRyaXg7XG4gICAgLyoqXG4gICAgICogQGFjY2VzcyBwcml2YXRlXG4gICAgICovXG5cbiAgICB0aGlzLmlzTHV4b25EdXJhdGlvbiA9IHRydWU7XG4gIH1cbiAgLyoqXG4gICAqIENyZWF0ZSBEdXJhdGlvbiBmcm9tIGEgbnVtYmVyIG9mIG1pbGxpc2Vjb25kcy5cbiAgICogQHBhcmFtIHtudW1iZXJ9IGNvdW50IG9mIG1pbGxpc2Vjb25kc1xuICAgKiBAcGFyYW0ge09iamVjdH0gb3B0cyAtIG9wdGlvbnMgZm9yIHBhcnNpbmdcbiAgICogQHBhcmFtIHtzdHJpbmd9IFtvcHRzLmxvY2FsZT0nZW4tVVMnXSAtIHRoZSBsb2NhbGUgdG8gdXNlXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBvcHRzLm51bWJlcmluZ1N5c3RlbSAtIHRoZSBudW1iZXJpbmcgc3lzdGVtIHRvIHVzZVxuICAgKiBAcGFyYW0ge3N0cmluZ30gW29wdHMuY29udmVyc2lvbkFjY3VyYWN5PSdjYXN1YWwnXSAtIHRoZSBjb252ZXJzaW9uIHN5c3RlbSB0byB1c2VcbiAgICogQHJldHVybiB7RHVyYXRpb259XG4gICAqL1xuXG5cbiAgRHVyYXRpb24uZnJvbU1pbGxpcyA9IGZ1bmN0aW9uIGZyb21NaWxsaXMoY291bnQsIG9wdHMpIHtcbiAgICByZXR1cm4gRHVyYXRpb24uZnJvbU9iamVjdCh7XG4gICAgICBtaWxsaXNlY29uZHM6IGNvdW50XG4gICAgfSwgb3B0cyk7XG4gIH1cbiAgLyoqXG4gICAqIENyZWF0ZSBhIER1cmF0aW9uIGZyb20gYSBKYXZhU2NyaXB0IG9iamVjdCB3aXRoIGtleXMgbGlrZSAneWVhcnMnIGFuZCAnaG91cnMnLlxuICAgKiBJZiB0aGlzIG9iamVjdCBpcyBlbXB0eSB0aGVuIGEgemVybyBtaWxsaXNlY29uZHMgZHVyYXRpb24gaXMgcmV0dXJuZWQuXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBvYmogLSB0aGUgb2JqZWN0IHRvIGNyZWF0ZSB0aGUgRGF0ZVRpbWUgZnJvbVxuICAgKiBAcGFyYW0ge251bWJlcn0gb2JqLnllYXJzXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBvYmoucXVhcnRlcnNcbiAgICogQHBhcmFtIHtudW1iZXJ9IG9iai5tb250aHNcbiAgICogQHBhcmFtIHtudW1iZXJ9IG9iai53ZWVrc1xuICAgKiBAcGFyYW0ge251bWJlcn0gb2JqLmRheXNcbiAgICogQHBhcmFtIHtudW1iZXJ9IG9iai5ob3Vyc1xuICAgKiBAcGFyYW0ge251bWJlcn0gb2JqLm1pbnV0ZXNcbiAgICogQHBhcmFtIHtudW1iZXJ9IG9iai5zZWNvbmRzXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBvYmoubWlsbGlzZWNvbmRzXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0cz1bXV0gLSBvcHRpb25zIGZvciBjcmVhdGluZyB0aGlzIER1cmF0aW9uXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBbb3B0cy5sb2NhbGU9J2VuLVVTJ10gLSB0aGUgbG9jYWxlIHRvIHVzZVxuICAgKiBAcGFyYW0ge3N0cmluZ30gb3B0cy5udW1iZXJpbmdTeXN0ZW0gLSB0aGUgbnVtYmVyaW5nIHN5c3RlbSB0byB1c2VcbiAgICogQHBhcmFtIHtzdHJpbmd9IFtvcHRzLmNvbnZlcnNpb25BY2N1cmFjeT0nY2FzdWFsJ10gLSB0aGUgY29udmVyc2lvbiBzeXN0ZW0gdG8gdXNlXG4gICAqIEByZXR1cm4ge0R1cmF0aW9ufVxuICAgKi9cbiAgO1xuXG4gIER1cmF0aW9uLmZyb21PYmplY3QgPSBmdW5jdGlvbiBmcm9tT2JqZWN0KG9iaiwgb3B0cykge1xuICAgIGlmIChvcHRzID09PSB2b2lkIDApIHtcbiAgICAgIG9wdHMgPSB7fTtcbiAgICB9XG5cbiAgICBpZiAob2JqID09IG51bGwgfHwgdHlwZW9mIG9iaiAhPT0gXCJvYmplY3RcIikge1xuICAgICAgdGhyb3cgbmV3IEludmFsaWRBcmd1bWVudEVycm9yKFwiRHVyYXRpb24uZnJvbU9iamVjdDogYXJndW1lbnQgZXhwZWN0ZWQgdG8gYmUgYW4gb2JqZWN0LCBnb3QgXCIgKyAob2JqID09PSBudWxsID8gXCJudWxsXCIgOiB0eXBlb2Ygb2JqKSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIG5ldyBEdXJhdGlvbih7XG4gICAgICB2YWx1ZXM6IG5vcm1hbGl6ZU9iamVjdChvYmosIER1cmF0aW9uLm5vcm1hbGl6ZVVuaXQpLFxuICAgICAgbG9jOiBMb2NhbGUuZnJvbU9iamVjdChvcHRzKSxcbiAgICAgIGNvbnZlcnNpb25BY2N1cmFjeTogb3B0cy5jb252ZXJzaW9uQWNjdXJhY3lcbiAgICB9KTtcbiAgfVxuICAvKipcbiAgICogQ3JlYXRlIGEgRHVyYXRpb24gZnJvbSBEdXJhdGlvbkxpa2UuXG4gICAqXG4gICAqIEBwYXJhbSB7T2JqZWN0IHwgbnVtYmVyIHwgRHVyYXRpb259IGR1cmF0aW9uTGlrZVxuICAgKiBPbmUgb2Y6XG4gICAqIC0gb2JqZWN0IHdpdGgga2V5cyBsaWtlICd5ZWFycycgYW5kICdob3VycycuXG4gICAqIC0gbnVtYmVyIHJlcHJlc2VudGluZyBtaWxsaXNlY29uZHNcbiAgICogLSBEdXJhdGlvbiBpbnN0YW5jZVxuICAgKiBAcmV0dXJuIHtEdXJhdGlvbn1cbiAgICovXG4gIDtcblxuICBEdXJhdGlvbi5mcm9tRHVyYXRpb25MaWtlID0gZnVuY3Rpb24gZnJvbUR1cmF0aW9uTGlrZShkdXJhdGlvbkxpa2UpIHtcbiAgICBpZiAoaXNOdW1iZXIoZHVyYXRpb25MaWtlKSkge1xuICAgICAgcmV0dXJuIER1cmF0aW9uLmZyb21NaWxsaXMoZHVyYXRpb25MaWtlKTtcbiAgICB9IGVsc2UgaWYgKER1cmF0aW9uLmlzRHVyYXRpb24oZHVyYXRpb25MaWtlKSkge1xuICAgICAgcmV0dXJuIGR1cmF0aW9uTGlrZTtcbiAgICB9IGVsc2UgaWYgKHR5cGVvZiBkdXJhdGlvbkxpa2UgPT09IFwib2JqZWN0XCIpIHtcbiAgICAgIHJldHVybiBEdXJhdGlvbi5mcm9tT2JqZWN0KGR1cmF0aW9uTGlrZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRocm93IG5ldyBJbnZhbGlkQXJndW1lbnRFcnJvcihcIlVua25vd24gZHVyYXRpb24gYXJndW1lbnQgXCIgKyBkdXJhdGlvbkxpa2UgKyBcIiBvZiB0eXBlIFwiICsgdHlwZW9mIGR1cmF0aW9uTGlrZSk7XG4gICAgfVxuICB9XG4gIC8qKlxuICAgKiBDcmVhdGUgYSBEdXJhdGlvbiBmcm9tIGFuIElTTyA4NjAxIGR1cmF0aW9uIHN0cmluZy5cbiAgICogQHBhcmFtIHtzdHJpbmd9IHRleHQgLSB0ZXh0IHRvIHBhcnNlXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRzIC0gb3B0aW9ucyBmb3IgcGFyc2luZ1xuICAgKiBAcGFyYW0ge3N0cmluZ30gW29wdHMubG9jYWxlPSdlbi1VUyddIC0gdGhlIGxvY2FsZSB0byB1c2VcbiAgICogQHBhcmFtIHtzdHJpbmd9IG9wdHMubnVtYmVyaW5nU3lzdGVtIC0gdGhlIG51bWJlcmluZyBzeXN0ZW0gdG8gdXNlXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBbb3B0cy5jb252ZXJzaW9uQWNjdXJhY3k9J2Nhc3VhbCddIC0gdGhlIGNvbnZlcnNpb24gc3lzdGVtIHRvIHVzZVxuICAgKiBAc2VlIGh0dHBzOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL0lTT184NjAxI0R1cmF0aW9uc1xuICAgKiBAZXhhbXBsZSBEdXJhdGlvbi5mcm9tSVNPKCdQM1k2TTFXNERUMTJIMzBNNVMnKS50b09iamVjdCgpIC8vPT4geyB5ZWFyczogMywgbW9udGhzOiA2LCB3ZWVrczogMSwgZGF5czogNCwgaG91cnM6IDEyLCBtaW51dGVzOiAzMCwgc2Vjb25kczogNSB9XG4gICAqIEBleGFtcGxlIER1cmF0aW9uLmZyb21JU08oJ1BUMjNIJykudG9PYmplY3QoKSAvLz0+IHsgaG91cnM6IDIzIH1cbiAgICogQGV4YW1wbGUgRHVyYXRpb24uZnJvbUlTTygnUDVZM00nKS50b09iamVjdCgpIC8vPT4geyB5ZWFyczogNSwgbW9udGhzOiAzIH1cbiAgICogQHJldHVybiB7RHVyYXRpb259XG4gICAqL1xuICA7XG5cbiAgRHVyYXRpb24uZnJvbUlTTyA9IGZ1bmN0aW9uIGZyb21JU08odGV4dCwgb3B0cykge1xuICAgIHZhciBfcGFyc2VJU09EdXJhdGlvbiA9IHBhcnNlSVNPRHVyYXRpb24odGV4dCksXG4gICAgICAgIHBhcnNlZCA9IF9wYXJzZUlTT0R1cmF0aW9uWzBdO1xuXG4gICAgaWYgKHBhcnNlZCkge1xuICAgICAgcmV0dXJuIER1cmF0aW9uLmZyb21PYmplY3QocGFyc2VkLCBvcHRzKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIER1cmF0aW9uLmludmFsaWQoXCJ1bnBhcnNhYmxlXCIsIFwidGhlIGlucHV0IFxcXCJcIiArIHRleHQgKyBcIlxcXCIgY2FuJ3QgYmUgcGFyc2VkIGFzIElTTyA4NjAxXCIpO1xuICAgIH1cbiAgfVxuICAvKipcbiAgICogQ3JlYXRlIGEgRHVyYXRpb24gZnJvbSBhbiBJU08gODYwMSB0aW1lIHN0cmluZy5cbiAgICogQHBhcmFtIHtzdHJpbmd9IHRleHQgLSB0ZXh0IHRvIHBhcnNlXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRzIC0gb3B0aW9ucyBmb3IgcGFyc2luZ1xuICAgKiBAcGFyYW0ge3N0cmluZ30gW29wdHMubG9jYWxlPSdlbi1VUyddIC0gdGhlIGxvY2FsZSB0byB1c2VcbiAgICogQHBhcmFtIHtzdHJpbmd9IG9wdHMubnVtYmVyaW5nU3lzdGVtIC0gdGhlIG51bWJlcmluZyBzeXN0ZW0gdG8gdXNlXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBbb3B0cy5jb252ZXJzaW9uQWNjdXJhY3k9J2Nhc3VhbCddIC0gdGhlIGNvbnZlcnNpb24gc3lzdGVtIHRvIHVzZVxuICAgKiBAc2VlIGh0dHBzOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL0lTT184NjAxI1RpbWVzXG4gICAqIEBleGFtcGxlIER1cmF0aW9uLmZyb21JU09UaW1lKCcxMToyMjozMy40NDQnKS50b09iamVjdCgpIC8vPT4geyBob3VyczogMTEsIG1pbnV0ZXM6IDIyLCBzZWNvbmRzOiAzMywgbWlsbGlzZWNvbmRzOiA0NDQgfVxuICAgKiBAZXhhbXBsZSBEdXJhdGlvbi5mcm9tSVNPVGltZSgnMTE6MDAnKS50b09iamVjdCgpIC8vPT4geyBob3VyczogMTEsIG1pbnV0ZXM6IDAsIHNlY29uZHM6IDAgfVxuICAgKiBAZXhhbXBsZSBEdXJhdGlvbi5mcm9tSVNPVGltZSgnVDExOjAwJykudG9PYmplY3QoKSAvLz0+IHsgaG91cnM6IDExLCBtaW51dGVzOiAwLCBzZWNvbmRzOiAwIH1cbiAgICogQGV4YW1wbGUgRHVyYXRpb24uZnJvbUlTT1RpbWUoJzExMDAnKS50b09iamVjdCgpIC8vPT4geyBob3VyczogMTEsIG1pbnV0ZXM6IDAsIHNlY29uZHM6IDAgfVxuICAgKiBAZXhhbXBsZSBEdXJhdGlvbi5mcm9tSVNPVGltZSgnVDExMDAnKS50b09iamVjdCgpIC8vPT4geyBob3VyczogMTEsIG1pbnV0ZXM6IDAsIHNlY29uZHM6IDAgfVxuICAgKiBAcmV0dXJuIHtEdXJhdGlvbn1cbiAgICovXG4gIDtcblxuICBEdXJhdGlvbi5mcm9tSVNPVGltZSA9IGZ1bmN0aW9uIGZyb21JU09UaW1lKHRleHQsIG9wdHMpIHtcbiAgICB2YXIgX3BhcnNlSVNPVGltZU9ubHkgPSBwYXJzZUlTT1RpbWVPbmx5KHRleHQpLFxuICAgICAgICBwYXJzZWQgPSBfcGFyc2VJU09UaW1lT25seVswXTtcblxuICAgIGlmIChwYXJzZWQpIHtcbiAgICAgIHJldHVybiBEdXJhdGlvbi5mcm9tT2JqZWN0KHBhcnNlZCwgb3B0cyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBEdXJhdGlvbi5pbnZhbGlkKFwidW5wYXJzYWJsZVwiLCBcInRoZSBpbnB1dCBcXFwiXCIgKyB0ZXh0ICsgXCJcXFwiIGNhbid0IGJlIHBhcnNlZCBhcyBJU08gODYwMVwiKTtcbiAgICB9XG4gIH1cbiAgLyoqXG4gICAqIENyZWF0ZSBhbiBpbnZhbGlkIER1cmF0aW9uLlxuICAgKiBAcGFyYW0ge3N0cmluZ30gcmVhc29uIC0gc2ltcGxlIHN0cmluZyBvZiB3aHkgdGhpcyBkYXRldGltZSBpcyBpbnZhbGlkLiBTaG91bGQgbm90IGNvbnRhaW4gcGFyYW1ldGVycyBvciBhbnl0aGluZyBlbHNlIGRhdGEtZGVwZW5kZW50XG4gICAqIEBwYXJhbSB7c3RyaW5nfSBbZXhwbGFuYXRpb249bnVsbF0gLSBsb25nZXIgZXhwbGFuYXRpb24sIG1heSBpbmNsdWRlIHBhcmFtZXRlcnMgYW5kIG90aGVyIHVzZWZ1bCBkZWJ1Z2dpbmcgaW5mb3JtYXRpb25cbiAgICogQHJldHVybiB7RHVyYXRpb259XG4gICAqL1xuICA7XG5cbiAgRHVyYXRpb24uaW52YWxpZCA9IGZ1bmN0aW9uIGludmFsaWQocmVhc29uLCBleHBsYW5hdGlvbikge1xuICAgIGlmIChleHBsYW5hdGlvbiA9PT0gdm9pZCAwKSB7XG4gICAgICBleHBsYW5hdGlvbiA9IG51bGw7XG4gICAgfVxuXG4gICAgaWYgKCFyZWFzb24pIHtcbiAgICAgIHRocm93IG5ldyBJbnZhbGlkQXJndW1lbnRFcnJvcihcIm5lZWQgdG8gc3BlY2lmeSBhIHJlYXNvbiB0aGUgRHVyYXRpb24gaXMgaW52YWxpZFwiKTtcbiAgICB9XG5cbiAgICB2YXIgaW52YWxpZCA9IHJlYXNvbiBpbnN0YW5jZW9mIEludmFsaWQgPyByZWFzb24gOiBuZXcgSW52YWxpZChyZWFzb24sIGV4cGxhbmF0aW9uKTtcblxuICAgIGlmIChTZXR0aW5ncy50aHJvd09uSW52YWxpZCkge1xuICAgICAgdGhyb3cgbmV3IEludmFsaWREdXJhdGlvbkVycm9yKGludmFsaWQpO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gbmV3IER1cmF0aW9uKHtcbiAgICAgICAgaW52YWxpZDogaW52YWxpZFxuICAgICAgfSk7XG4gICAgfVxuICB9XG4gIC8qKlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgO1xuXG4gIER1cmF0aW9uLm5vcm1hbGl6ZVVuaXQgPSBmdW5jdGlvbiBub3JtYWxpemVVbml0KHVuaXQpIHtcbiAgICB2YXIgbm9ybWFsaXplZCA9IHtcbiAgICAgIHllYXI6IFwieWVhcnNcIixcbiAgICAgIHllYXJzOiBcInllYXJzXCIsXG4gICAgICBxdWFydGVyOiBcInF1YXJ0ZXJzXCIsXG4gICAgICBxdWFydGVyczogXCJxdWFydGVyc1wiLFxuICAgICAgbW9udGg6IFwibW9udGhzXCIsXG4gICAgICBtb250aHM6IFwibW9udGhzXCIsXG4gICAgICB3ZWVrOiBcIndlZWtzXCIsXG4gICAgICB3ZWVrczogXCJ3ZWVrc1wiLFxuICAgICAgZGF5OiBcImRheXNcIixcbiAgICAgIGRheXM6IFwiZGF5c1wiLFxuICAgICAgaG91cjogXCJob3Vyc1wiLFxuICAgICAgaG91cnM6IFwiaG91cnNcIixcbiAgICAgIG1pbnV0ZTogXCJtaW51dGVzXCIsXG4gICAgICBtaW51dGVzOiBcIm1pbnV0ZXNcIixcbiAgICAgIHNlY29uZDogXCJzZWNvbmRzXCIsXG4gICAgICBzZWNvbmRzOiBcInNlY29uZHNcIixcbiAgICAgIG1pbGxpc2Vjb25kOiBcIm1pbGxpc2Vjb25kc1wiLFxuICAgICAgbWlsbGlzZWNvbmRzOiBcIm1pbGxpc2Vjb25kc1wiXG4gICAgfVt1bml0ID8gdW5pdC50b0xvd2VyQ2FzZSgpIDogdW5pdF07XG4gICAgaWYgKCFub3JtYWxpemVkKSB0aHJvdyBuZXcgSW52YWxpZFVuaXRFcnJvcih1bml0KTtcbiAgICByZXR1cm4gbm9ybWFsaXplZDtcbiAgfVxuICAvKipcbiAgICogQ2hlY2sgaWYgYW4gb2JqZWN0IGlzIGEgRHVyYXRpb24uIFdvcmtzIGFjcm9zcyBjb250ZXh0IGJvdW5kYXJpZXNcbiAgICogQHBhcmFtIHtvYmplY3R9IG9cbiAgICogQHJldHVybiB7Ym9vbGVhbn1cbiAgICovXG4gIDtcblxuICBEdXJhdGlvbi5pc0R1cmF0aW9uID0gZnVuY3Rpb24gaXNEdXJhdGlvbihvKSB7XG4gICAgcmV0dXJuIG8gJiYgby5pc0x1eG9uRHVyYXRpb24gfHwgZmFsc2U7XG4gIH1cbiAgLyoqXG4gICAqIEdldCAgdGhlIGxvY2FsZSBvZiBhIER1cmF0aW9uLCBzdWNoICdlbi1HQidcbiAgICogQHR5cGUge3N0cmluZ31cbiAgICovXG4gIDtcblxuICB2YXIgX3Byb3RvID0gRHVyYXRpb24ucHJvdG90eXBlO1xuXG4gIC8qKlxuICAgKiBSZXR1cm5zIGEgc3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIHRoaXMgRHVyYXRpb24gZm9ybWF0dGVkIGFjY29yZGluZyB0byB0aGUgc3BlY2lmaWVkIGZvcm1hdCBzdHJpbmcuIFlvdSBtYXkgdXNlIHRoZXNlIHRva2VuczpcbiAgICogKiBgU2AgZm9yIG1pbGxpc2Vjb25kc1xuICAgKiAqIGBzYCBmb3Igc2Vjb25kc1xuICAgKiAqIGBtYCBmb3IgbWludXRlc1xuICAgKiAqIGBoYCBmb3IgaG91cnNcbiAgICogKiBgZGAgZm9yIGRheXNcbiAgICogKiBgTWAgZm9yIG1vbnRoc1xuICAgKiAqIGB5YCBmb3IgeWVhcnNcbiAgICogTm90ZXM6XG4gICAqICogQWRkIHBhZGRpbmcgYnkgcmVwZWF0aW5nIHRoZSB0b2tlbiwgZS5nLiBcInl5XCIgcGFkcyB0aGUgeWVhcnMgdG8gdHdvIGRpZ2l0cywgXCJoaGhoXCIgcGFkcyB0aGUgaG91cnMgb3V0IHRvIGZvdXIgZGlnaXRzXG4gICAqICogVGhlIGR1cmF0aW9uIHdpbGwgYmUgY29udmVydGVkIHRvIHRoZSBzZXQgb2YgdW5pdHMgaW4gdGhlIGZvcm1hdCBzdHJpbmcgdXNpbmcge0BsaW5rIER1cmF0aW9uI3NoaWZ0VG99IGFuZCB0aGUgRHVyYXRpb25zJ3MgY29udmVyc2lvbiBhY2N1cmFjeSBzZXR0aW5nLlxuICAgKiBAcGFyYW0ge3N0cmluZ30gZm10IC0gdGhlIGZvcm1hdCBzdHJpbmdcbiAgICogQHBhcmFtIHtPYmplY3R9IG9wdHMgLSBvcHRpb25zXG4gICAqIEBwYXJhbSB7Ym9vbGVhbn0gW29wdHMuZmxvb3I9dHJ1ZV0gLSBmbG9vciBudW1lcmljYWwgdmFsdWVzXG4gICAqIEBleGFtcGxlIER1cmF0aW9uLmZyb21PYmplY3QoeyB5ZWFyczogMSwgZGF5czogNiwgc2Vjb25kczogMiB9KS50b0Zvcm1hdChcInkgZCBzXCIpIC8vPT4gXCIxIDYgMlwiXG4gICAqIEBleGFtcGxlIER1cmF0aW9uLmZyb21PYmplY3QoeyB5ZWFyczogMSwgZGF5czogNiwgc2Vjb25kczogMiB9KS50b0Zvcm1hdChcInl5IGRkIHNzc1wiKSAvLz0+IFwiMDEgMDYgMDAyXCJcbiAgICogQGV4YW1wbGUgRHVyYXRpb24uZnJvbU9iamVjdCh7IHllYXJzOiAxLCBkYXlzOiA2LCBzZWNvbmRzOiAyIH0pLnRvRm9ybWF0KFwiTSBTXCIpIC8vPT4gXCIxMiA1MTg0MDIwMDBcIlxuICAgKiBAcmV0dXJuIHtzdHJpbmd9XG4gICAqL1xuICBfcHJvdG8udG9Gb3JtYXQgPSBmdW5jdGlvbiB0b0Zvcm1hdChmbXQsIG9wdHMpIHtcbiAgICBpZiAob3B0cyA9PT0gdm9pZCAwKSB7XG4gICAgICBvcHRzID0ge307XG4gICAgfVxuXG4gICAgLy8gcmV2ZXJzZS1jb21wYXQgc2luY2UgMS4yOyB3ZSBhbHdheXMgcm91bmQgZG93biBub3csIG5ldmVyIHVwLCBhbmQgd2UgZG8gaXQgYnkgZGVmYXVsdFxuICAgIHZhciBmbXRPcHRzID0gX2V4dGVuZHMoe30sIG9wdHMsIHtcbiAgICAgIGZsb29yOiBvcHRzLnJvdW5kICE9PSBmYWxzZSAmJiBvcHRzLmZsb29yICE9PSBmYWxzZVxuICAgIH0pO1xuXG4gICAgcmV0dXJuIHRoaXMuaXNWYWxpZCA/IEZvcm1hdHRlci5jcmVhdGUodGhpcy5sb2MsIGZtdE9wdHMpLmZvcm1hdER1cmF0aW9uRnJvbVN0cmluZyh0aGlzLCBmbXQpIDogSU5WQUxJRCQyO1xuICB9XG4gIC8qKlxuICAgKiBSZXR1cm5zIGEgc3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIGEgRHVyYXRpb24gd2l0aCBhbGwgdW5pdHMgaW5jbHVkZWRcbiAgICogVG8gbW9kaWZ5IGl0cyBiZWhhdmlvciB1c2UgdGhlIGBsaXN0U3R5bGVgIGFuZCBhbnkgSW50bC5OdW1iZXJGb3JtYXQgb3B0aW9uLCB0aG91Z2ggYHVuaXREaXNwbGF5YCBpcyBlc3BlY2lhbGx5IHJlbGV2YW50LiBTZWUge0BsaW5rIEludGwuTnVtYmVyRm9ybWF0fS5cbiAgICogQHBhcmFtIG9wdHMgLSBPbiBvcHRpb24gb2JqZWN0IHRvIG92ZXJyaWRlIHRoZSBmb3JtYXR0aW5nLiBBY2NlcHRzIHRoZSBzYW1lIGtleXMgYXMgdGhlIG9wdGlvbnMgcGFyYW1ldGVyIG9mIHRoZSBuYXRpdmUgYEludC5OdW1iZXJGb3JtYXRgIGNvbnN0cnVjdG9yLCBhcyB3ZWxsIGFzIGBsaXN0U3R5bGVgLlxuICAgKiBAZXhhbXBsZVxuICAgKiBgYGBqc1xuICAgKiB2YXIgZHVyID0gRHVyYXRpb24uZnJvbU9iamVjdCh7IGRheXM6IDEsIGhvdXJzOiA1LCBtaW51dGVzOiA2IH0pXG4gICAqIGR1ci50b0h1bWFuKCkgLy89PiAnMSBkYXksIDUgaG91cnMsIDYgbWludXRlcydcbiAgICogZHVyLnRvSHVtYW4oeyBsaXN0U3R5bGU6IFwibG9uZ1wiIH0pIC8vPT4gJzEgZGF5LCA1IGhvdXJzLCBhbmQgNiBtaW51dGVzJ1xuICAgKiBkdXIudG9IdW1hbih7IHVuaXREaXNwbGF5OiBcInNob3J0XCIgfSkgLy89PiAnMSBkYXksIDUgaHIsIDYgbWluJ1xuICAgKiBgYGBcbiAgICovXG4gIDtcblxuICBfcHJvdG8udG9IdW1hbiA9IGZ1bmN0aW9uIHRvSHVtYW4ob3B0cykge1xuICAgIHZhciBfdGhpcyA9IHRoaXM7XG5cbiAgICBpZiAob3B0cyA9PT0gdm9pZCAwKSB7XG4gICAgICBvcHRzID0ge307XG4gICAgfVxuXG4gICAgdmFyIGwgPSBvcmRlcmVkVW5pdHMkMS5tYXAoZnVuY3Rpb24gKHVuaXQpIHtcbiAgICAgIHZhciB2YWwgPSBfdGhpcy52YWx1ZXNbdW5pdF07XG5cbiAgICAgIGlmIChpc1VuZGVmaW5lZCh2YWwpKSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gX3RoaXMubG9jLm51bWJlckZvcm1hdHRlcihfZXh0ZW5kcyh7XG4gICAgICAgIHN0eWxlOiBcInVuaXRcIixcbiAgICAgICAgdW5pdERpc3BsYXk6IFwibG9uZ1wiXG4gICAgICB9LCBvcHRzLCB7XG4gICAgICAgIHVuaXQ6IHVuaXQuc2xpY2UoMCwgLTEpXG4gICAgICB9KSkuZm9ybWF0KHZhbCk7XG4gICAgfSkuZmlsdGVyKGZ1bmN0aW9uIChuKSB7XG4gICAgICByZXR1cm4gbjtcbiAgICB9KTtcbiAgICByZXR1cm4gdGhpcy5sb2MubGlzdEZvcm1hdHRlcihfZXh0ZW5kcyh7XG4gICAgICB0eXBlOiBcImNvbmp1bmN0aW9uXCIsXG4gICAgICBzdHlsZTogb3B0cy5saXN0U3R5bGUgfHwgXCJuYXJyb3dcIlxuICAgIH0sIG9wdHMpKS5mb3JtYXQobCk7XG4gIH1cbiAgLyoqXG4gICAqIFJldHVybnMgYSBKYXZhU2NyaXB0IG9iamVjdCB3aXRoIHRoaXMgRHVyYXRpb24ncyB2YWx1ZXMuXG4gICAqIEBleGFtcGxlIER1cmF0aW9uLmZyb21PYmplY3QoeyB5ZWFyczogMSwgZGF5czogNiwgc2Vjb25kczogMiB9KS50b09iamVjdCgpIC8vPT4geyB5ZWFyczogMSwgZGF5czogNiwgc2Vjb25kczogMiB9XG4gICAqIEByZXR1cm4ge09iamVjdH1cbiAgICovXG4gIDtcblxuICBfcHJvdG8udG9PYmplY3QgPSBmdW5jdGlvbiB0b09iamVjdCgpIHtcbiAgICBpZiAoIXRoaXMuaXNWYWxpZCkgcmV0dXJuIHt9O1xuICAgIHJldHVybiBfZXh0ZW5kcyh7fSwgdGhpcy52YWx1ZXMpO1xuICB9XG4gIC8qKlxuICAgKiBSZXR1cm5zIGFuIElTTyA4NjAxLWNvbXBsaWFudCBzdHJpbmcgcmVwcmVzZW50YXRpb24gb2YgdGhpcyBEdXJhdGlvbi5cbiAgICogQHNlZSBodHRwczovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9JU09fODYwMSNEdXJhdGlvbnNcbiAgICogQGV4YW1wbGUgRHVyYXRpb24uZnJvbU9iamVjdCh7IHllYXJzOiAzLCBzZWNvbmRzOiA0NSB9KS50b0lTTygpIC8vPT4gJ1AzWVQ0NVMnXG4gICAqIEBleGFtcGxlIER1cmF0aW9uLmZyb21PYmplY3QoeyBtb250aHM6IDQsIHNlY29uZHM6IDQ1IH0pLnRvSVNPKCkgLy89PiAnUDRNVDQ1UydcbiAgICogQGV4YW1wbGUgRHVyYXRpb24uZnJvbU9iamVjdCh7IG1vbnRoczogNSB9KS50b0lTTygpIC8vPT4gJ1A1TSdcbiAgICogQGV4YW1wbGUgRHVyYXRpb24uZnJvbU9iamVjdCh7IG1pbnV0ZXM6IDUgfSkudG9JU08oKSAvLz0+ICdQVDVNJ1xuICAgKiBAZXhhbXBsZSBEdXJhdGlvbi5mcm9tT2JqZWN0KHsgbWlsbGlzZWNvbmRzOiA2IH0pLnRvSVNPKCkgLy89PiAnUFQwLjAwNlMnXG4gICAqIEByZXR1cm4ge3N0cmluZ31cbiAgICovXG4gIDtcblxuICBfcHJvdG8udG9JU08gPSBmdW5jdGlvbiB0b0lTTygpIHtcbiAgICAvLyB3ZSBjb3VsZCB1c2UgdGhlIGZvcm1hdHRlciwgYnV0IHRoaXMgaXMgYW4gZWFzaWVyIHdheSB0byBnZXQgdGhlIG1pbmltdW0gc3RyaW5nXG4gICAgaWYgKCF0aGlzLmlzVmFsaWQpIHJldHVybiBudWxsO1xuICAgIHZhciBzID0gXCJQXCI7XG4gICAgaWYgKHRoaXMueWVhcnMgIT09IDApIHMgKz0gdGhpcy55ZWFycyArIFwiWVwiO1xuICAgIGlmICh0aGlzLm1vbnRocyAhPT0gMCB8fCB0aGlzLnF1YXJ0ZXJzICE9PSAwKSBzICs9IHRoaXMubW9udGhzICsgdGhpcy5xdWFydGVycyAqIDMgKyBcIk1cIjtcbiAgICBpZiAodGhpcy53ZWVrcyAhPT0gMCkgcyArPSB0aGlzLndlZWtzICsgXCJXXCI7XG4gICAgaWYgKHRoaXMuZGF5cyAhPT0gMCkgcyArPSB0aGlzLmRheXMgKyBcIkRcIjtcbiAgICBpZiAodGhpcy5ob3VycyAhPT0gMCB8fCB0aGlzLm1pbnV0ZXMgIT09IDAgfHwgdGhpcy5zZWNvbmRzICE9PSAwIHx8IHRoaXMubWlsbGlzZWNvbmRzICE9PSAwKSBzICs9IFwiVFwiO1xuICAgIGlmICh0aGlzLmhvdXJzICE9PSAwKSBzICs9IHRoaXMuaG91cnMgKyBcIkhcIjtcbiAgICBpZiAodGhpcy5taW51dGVzICE9PSAwKSBzICs9IHRoaXMubWludXRlcyArIFwiTVwiO1xuICAgIGlmICh0aGlzLnNlY29uZHMgIT09IDAgfHwgdGhpcy5taWxsaXNlY29uZHMgIT09IDApIC8vIHRoaXMgd2lsbCBoYW5kbGUgXCJmbG9hdGluZyBwb2ludCBtYWRuZXNzXCIgYnkgcmVtb3ZpbmcgZXh0cmEgZGVjaW1hbCBwbGFjZXNcbiAgICAgIC8vIGh0dHBzOi8vc3RhY2tvdmVyZmxvdy5jb20vcXVlc3Rpb25zLzU4ODAwNC9pcy1mbG9hdGluZy1wb2ludC1tYXRoLWJyb2tlblxuICAgICAgcyArPSByb3VuZFRvKHRoaXMuc2Vjb25kcyArIHRoaXMubWlsbGlzZWNvbmRzIC8gMTAwMCwgMykgKyBcIlNcIjtcbiAgICBpZiAocyA9PT0gXCJQXCIpIHMgKz0gXCJUMFNcIjtcbiAgICByZXR1cm4gcztcbiAgfVxuICAvKipcbiAgICogUmV0dXJucyBhbiBJU08gODYwMS1jb21wbGlhbnQgc3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIHRoaXMgRHVyYXRpb24sIGZvcm1hdHRlZCBhcyBhIHRpbWUgb2YgZGF5LlxuICAgKiBOb3RlIHRoYXQgdGhpcyB3aWxsIHJldHVybiBudWxsIGlmIHRoZSBkdXJhdGlvbiBpcyBpbnZhbGlkLCBuZWdhdGl2ZSwgb3IgZXF1YWwgdG8gb3IgZ3JlYXRlciB0aGFuIDI0IGhvdXJzLlxuICAgKiBAc2VlIGh0dHBzOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL0lTT184NjAxI1RpbWVzXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRzIC0gb3B0aW9uc1xuICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHRzLnN1cHByZXNzTWlsbGlzZWNvbmRzPWZhbHNlXSAtIGV4Y2x1ZGUgbWlsbGlzZWNvbmRzIGZyb20gdGhlIGZvcm1hdCBpZiB0aGV5J3JlIDBcbiAgICogQHBhcmFtIHtib29sZWFufSBbb3B0cy5zdXBwcmVzc1NlY29uZHM9ZmFsc2VdIC0gZXhjbHVkZSBzZWNvbmRzIGZyb20gdGhlIGZvcm1hdCBpZiB0aGV5J3JlIDBcbiAgICogQHBhcmFtIHtib29sZWFufSBbb3B0cy5pbmNsdWRlUHJlZml4PWZhbHNlXSAtIGluY2x1ZGUgdGhlIGBUYCBwcmVmaXhcbiAgICogQHBhcmFtIHtzdHJpbmd9IFtvcHRzLmZvcm1hdD0nZXh0ZW5kZWQnXSAtIGNob29zZSBiZXR3ZWVuIHRoZSBiYXNpYyBhbmQgZXh0ZW5kZWQgZm9ybWF0XG4gICAqIEBleGFtcGxlIER1cmF0aW9uLmZyb21PYmplY3QoeyBob3VyczogMTEgfSkudG9JU09UaW1lKCkgLy89PiAnMTE6MDA6MDAuMDAwJ1xuICAgKiBAZXhhbXBsZSBEdXJhdGlvbi5mcm9tT2JqZWN0KHsgaG91cnM6IDExIH0pLnRvSVNPVGltZSh7IHN1cHByZXNzTWlsbGlzZWNvbmRzOiB0cnVlIH0pIC8vPT4gJzExOjAwOjAwJ1xuICAgKiBAZXhhbXBsZSBEdXJhdGlvbi5mcm9tT2JqZWN0KHsgaG91cnM6IDExIH0pLnRvSVNPVGltZSh7IHN1cHByZXNzU2Vjb25kczogdHJ1ZSB9KSAvLz0+ICcxMTowMCdcbiAgICogQGV4YW1wbGUgRHVyYXRpb24uZnJvbU9iamVjdCh7IGhvdXJzOiAxMSB9KS50b0lTT1RpbWUoeyBpbmNsdWRlUHJlZml4OiB0cnVlIH0pIC8vPT4gJ1QxMTowMDowMC4wMDAnXG4gICAqIEBleGFtcGxlIER1cmF0aW9uLmZyb21PYmplY3QoeyBob3VyczogMTEgfSkudG9JU09UaW1lKHsgZm9ybWF0OiAnYmFzaWMnIH0pIC8vPT4gJzExMDAwMC4wMDAnXG4gICAqIEByZXR1cm4ge3N0cmluZ31cbiAgICovXG4gIDtcblxuICBfcHJvdG8udG9JU09UaW1lID0gZnVuY3Rpb24gdG9JU09UaW1lKG9wdHMpIHtcbiAgICBpZiAob3B0cyA9PT0gdm9pZCAwKSB7XG4gICAgICBvcHRzID0ge307XG4gICAgfVxuXG4gICAgaWYgKCF0aGlzLmlzVmFsaWQpIHJldHVybiBudWxsO1xuICAgIHZhciBtaWxsaXMgPSB0aGlzLnRvTWlsbGlzKCk7XG4gICAgaWYgKG1pbGxpcyA8IDAgfHwgbWlsbGlzID49IDg2NDAwMDAwKSByZXR1cm4gbnVsbDtcbiAgICBvcHRzID0gX2V4dGVuZHMoe1xuICAgICAgc3VwcHJlc3NNaWxsaXNlY29uZHM6IGZhbHNlLFxuICAgICAgc3VwcHJlc3NTZWNvbmRzOiBmYWxzZSxcbiAgICAgIGluY2x1ZGVQcmVmaXg6IGZhbHNlLFxuICAgICAgZm9ybWF0OiBcImV4dGVuZGVkXCJcbiAgICB9LCBvcHRzKTtcbiAgICB2YXIgdmFsdWUgPSB0aGlzLnNoaWZ0VG8oXCJob3Vyc1wiLCBcIm1pbnV0ZXNcIiwgXCJzZWNvbmRzXCIsIFwibWlsbGlzZWNvbmRzXCIpO1xuICAgIHZhciBmbXQgPSBvcHRzLmZvcm1hdCA9PT0gXCJiYXNpY1wiID8gXCJoaG1tXCIgOiBcImhoOm1tXCI7XG5cbiAgICBpZiAoIW9wdHMuc3VwcHJlc3NTZWNvbmRzIHx8IHZhbHVlLnNlY29uZHMgIT09IDAgfHwgdmFsdWUubWlsbGlzZWNvbmRzICE9PSAwKSB7XG4gICAgICBmbXQgKz0gb3B0cy5mb3JtYXQgPT09IFwiYmFzaWNcIiA/IFwic3NcIiA6IFwiOnNzXCI7XG5cbiAgICAgIGlmICghb3B0cy5zdXBwcmVzc01pbGxpc2Vjb25kcyB8fCB2YWx1ZS5taWxsaXNlY29uZHMgIT09IDApIHtcbiAgICAgICAgZm10ICs9IFwiLlNTU1wiO1xuICAgICAgfVxuICAgIH1cblxuICAgIHZhciBzdHIgPSB2YWx1ZS50b0Zvcm1hdChmbXQpO1xuXG4gICAgaWYgKG9wdHMuaW5jbHVkZVByZWZpeCkge1xuICAgICAgc3RyID0gXCJUXCIgKyBzdHI7XG4gICAgfVxuXG4gICAgcmV0dXJuIHN0cjtcbiAgfVxuICAvKipcbiAgICogUmV0dXJucyBhbiBJU08gODYwMSByZXByZXNlbnRhdGlvbiBvZiB0aGlzIER1cmF0aW9uIGFwcHJvcHJpYXRlIGZvciB1c2UgaW4gSlNPTi5cbiAgICogQHJldHVybiB7c3RyaW5nfVxuICAgKi9cbiAgO1xuXG4gIF9wcm90by50b0pTT04gPSBmdW5jdGlvbiB0b0pTT04oKSB7XG4gICAgcmV0dXJuIHRoaXMudG9JU08oKTtcbiAgfVxuICAvKipcbiAgICogUmV0dXJucyBhbiBJU08gODYwMSByZXByZXNlbnRhdGlvbiBvZiB0aGlzIER1cmF0aW9uIGFwcHJvcHJpYXRlIGZvciB1c2UgaW4gZGVidWdnaW5nLlxuICAgKiBAcmV0dXJuIHtzdHJpbmd9XG4gICAqL1xuICA7XG5cbiAgX3Byb3RvLnRvU3RyaW5nID0gZnVuY3Rpb24gdG9TdHJpbmcoKSB7XG4gICAgcmV0dXJuIHRoaXMudG9JU08oKTtcbiAgfVxuICAvKipcbiAgICogUmV0dXJucyBhbiBtaWxsaXNlY29uZHMgdmFsdWUgb2YgdGhpcyBEdXJhdGlvbi5cbiAgICogQHJldHVybiB7bnVtYmVyfVxuICAgKi9cbiAgO1xuXG4gIF9wcm90by50b01pbGxpcyA9IGZ1bmN0aW9uIHRvTWlsbGlzKCkge1xuICAgIHJldHVybiB0aGlzLmFzKFwibWlsbGlzZWNvbmRzXCIpO1xuICB9XG4gIC8qKlxuICAgKiBSZXR1cm5zIGFuIG1pbGxpc2Vjb25kcyB2YWx1ZSBvZiB0aGlzIER1cmF0aW9uLiBBbGlhcyBvZiB7QGxpbmsgdG9NaWxsaXN9XG4gICAqIEByZXR1cm4ge251bWJlcn1cbiAgICovXG4gIDtcblxuICBfcHJvdG8udmFsdWVPZiA9IGZ1bmN0aW9uIHZhbHVlT2YoKSB7XG4gICAgcmV0dXJuIHRoaXMudG9NaWxsaXMoKTtcbiAgfVxuICAvKipcbiAgICogTWFrZSB0aGlzIER1cmF0aW9uIGxvbmdlciBieSB0aGUgc3BlY2lmaWVkIGFtb3VudC4gUmV0dXJuIGEgbmV3bHktY29uc3RydWN0ZWQgRHVyYXRpb24uXG4gICAqIEBwYXJhbSB7RHVyYXRpb258T2JqZWN0fG51bWJlcn0gZHVyYXRpb24gLSBUaGUgYW1vdW50IHRvIGFkZC4gRWl0aGVyIGEgTHV4b24gRHVyYXRpb24sIGEgbnVtYmVyIG9mIG1pbGxpc2Vjb25kcywgdGhlIG9iamVjdCBhcmd1bWVudCB0byBEdXJhdGlvbi5mcm9tT2JqZWN0KClcbiAgICogQHJldHVybiB7RHVyYXRpb259XG4gICAqL1xuICA7XG5cbiAgX3Byb3RvLnBsdXMgPSBmdW5jdGlvbiBwbHVzKGR1cmF0aW9uKSB7XG4gICAgaWYgKCF0aGlzLmlzVmFsaWQpIHJldHVybiB0aGlzO1xuICAgIHZhciBkdXIgPSBEdXJhdGlvbi5mcm9tRHVyYXRpb25MaWtlKGR1cmF0aW9uKSxcbiAgICAgICAgcmVzdWx0ID0ge307XG5cbiAgICBmb3IgKHZhciBfaXRlcmF0b3IgPSBfY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlckxvb3NlKG9yZGVyZWRVbml0cyQxKSwgX3N0ZXA7ICEoX3N0ZXAgPSBfaXRlcmF0b3IoKSkuZG9uZTspIHtcbiAgICAgIHZhciBrID0gX3N0ZXAudmFsdWU7XG5cbiAgICAgIGlmIChoYXNPd25Qcm9wZXJ0eShkdXIudmFsdWVzLCBrKSB8fCBoYXNPd25Qcm9wZXJ0eSh0aGlzLnZhbHVlcywgaykpIHtcbiAgICAgICAgcmVzdWx0W2tdID0gZHVyLmdldChrKSArIHRoaXMuZ2V0KGspO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBjbG9uZSQxKHRoaXMsIHtcbiAgICAgIHZhbHVlczogcmVzdWx0XG4gICAgfSwgdHJ1ZSk7XG4gIH1cbiAgLyoqXG4gICAqIE1ha2UgdGhpcyBEdXJhdGlvbiBzaG9ydGVyIGJ5IHRoZSBzcGVjaWZpZWQgYW1vdW50LiBSZXR1cm4gYSBuZXdseS1jb25zdHJ1Y3RlZCBEdXJhdGlvbi5cbiAgICogQHBhcmFtIHtEdXJhdGlvbnxPYmplY3R8bnVtYmVyfSBkdXJhdGlvbiAtIFRoZSBhbW91bnQgdG8gc3VidHJhY3QuIEVpdGhlciBhIEx1eG9uIER1cmF0aW9uLCBhIG51bWJlciBvZiBtaWxsaXNlY29uZHMsIHRoZSBvYmplY3QgYXJndW1lbnQgdG8gRHVyYXRpb24uZnJvbU9iamVjdCgpXG4gICAqIEByZXR1cm4ge0R1cmF0aW9ufVxuICAgKi9cbiAgO1xuXG4gIF9wcm90by5taW51cyA9IGZ1bmN0aW9uIG1pbnVzKGR1cmF0aW9uKSB7XG4gICAgaWYgKCF0aGlzLmlzVmFsaWQpIHJldHVybiB0aGlzO1xuICAgIHZhciBkdXIgPSBEdXJhdGlvbi5mcm9tRHVyYXRpb25MaWtlKGR1cmF0aW9uKTtcbiAgICByZXR1cm4gdGhpcy5wbHVzKGR1ci5uZWdhdGUoKSk7XG4gIH1cbiAgLyoqXG4gICAqIFNjYWxlIHRoaXMgRHVyYXRpb24gYnkgdGhlIHNwZWNpZmllZCBhbW91bnQuIFJldHVybiBhIG5ld2x5LWNvbnN0cnVjdGVkIER1cmF0aW9uLlxuICAgKiBAcGFyYW0ge2Z1bmN0aW9ufSBmbiAtIFRoZSBmdW5jdGlvbiB0byBhcHBseSB0byBlYWNoIHVuaXQuIEFyaXR5IGlzIDEgb3IgMjogdGhlIHZhbHVlIG9mIHRoZSB1bml0IGFuZCwgb3B0aW9uYWxseSwgdGhlIHVuaXQgbmFtZS4gTXVzdCByZXR1cm4gYSBudW1iZXIuXG4gICAqIEBleGFtcGxlIER1cmF0aW9uLmZyb21PYmplY3QoeyBob3VyczogMSwgbWludXRlczogMzAgfSkubWFwVW5pdHMoeCA9PiB4ICogMikgLy89PiB7IGhvdXJzOiAyLCBtaW51dGVzOiA2MCB9XG4gICAqIEBleGFtcGxlIER1cmF0aW9uLmZyb21PYmplY3QoeyBob3VyczogMSwgbWludXRlczogMzAgfSkubWFwVW5pdHMoKHgsIHUpID0+IHUgPT09IFwiaG91clwiID8geCAqIDIgOiB4KSAvLz0+IHsgaG91cnM6IDIsIG1pbnV0ZXM6IDMwIH1cbiAgICogQHJldHVybiB7RHVyYXRpb259XG4gICAqL1xuICA7XG5cbiAgX3Byb3RvLm1hcFVuaXRzID0gZnVuY3Rpb24gbWFwVW5pdHMoZm4pIHtcbiAgICBpZiAoIXRoaXMuaXNWYWxpZCkgcmV0dXJuIHRoaXM7XG4gICAgdmFyIHJlc3VsdCA9IHt9O1xuXG4gICAgZm9yICh2YXIgX2kgPSAwLCBfT2JqZWN0JGtleXMgPSBPYmplY3Qua2V5cyh0aGlzLnZhbHVlcyk7IF9pIDwgX09iamVjdCRrZXlzLmxlbmd0aDsgX2krKykge1xuICAgICAgdmFyIGsgPSBfT2JqZWN0JGtleXNbX2ldO1xuICAgICAgcmVzdWx0W2tdID0gYXNOdW1iZXIoZm4odGhpcy52YWx1ZXNba10sIGspKTtcbiAgICB9XG5cbiAgICByZXR1cm4gY2xvbmUkMSh0aGlzLCB7XG4gICAgICB2YWx1ZXM6IHJlc3VsdFxuICAgIH0sIHRydWUpO1xuICB9XG4gIC8qKlxuICAgKiBHZXQgdGhlIHZhbHVlIG9mIHVuaXQuXG4gICAqIEBwYXJhbSB7c3RyaW5nfSB1bml0IC0gYSB1bml0IHN1Y2ggYXMgJ21pbnV0ZScgb3IgJ2RheSdcbiAgICogQGV4YW1wbGUgRHVyYXRpb24uZnJvbU9iamVjdCh7eWVhcnM6IDIsIGRheXM6IDN9KS5nZXQoJ3llYXJzJykgLy89PiAyXG4gICAqIEBleGFtcGxlIER1cmF0aW9uLmZyb21PYmplY3Qoe3llYXJzOiAyLCBkYXlzOiAzfSkuZ2V0KCdtb250aHMnKSAvLz0+IDBcbiAgICogQGV4YW1wbGUgRHVyYXRpb24uZnJvbU9iamVjdCh7eWVhcnM6IDIsIGRheXM6IDN9KS5nZXQoJ2RheXMnKSAvLz0+IDNcbiAgICogQHJldHVybiB7bnVtYmVyfVxuICAgKi9cbiAgO1xuXG4gIF9wcm90by5nZXQgPSBmdW5jdGlvbiBnZXQodW5pdCkge1xuICAgIHJldHVybiB0aGlzW0R1cmF0aW9uLm5vcm1hbGl6ZVVuaXQodW5pdCldO1xuICB9XG4gIC8qKlxuICAgKiBcIlNldFwiIHRoZSB2YWx1ZXMgb2Ygc3BlY2lmaWVkIHVuaXRzLiBSZXR1cm4gYSBuZXdseS1jb25zdHJ1Y3RlZCBEdXJhdGlvbi5cbiAgICogQHBhcmFtIHtPYmplY3R9IHZhbHVlcyAtIGEgbWFwcGluZyBvZiB1bml0cyB0byBudW1iZXJzXG4gICAqIEBleGFtcGxlIGR1ci5zZXQoeyB5ZWFyczogMjAxNyB9KVxuICAgKiBAZXhhbXBsZSBkdXIuc2V0KHsgaG91cnM6IDgsIG1pbnV0ZXM6IDMwIH0pXG4gICAqIEByZXR1cm4ge0R1cmF0aW9ufVxuICAgKi9cbiAgO1xuXG4gIF9wcm90by5zZXQgPSBmdW5jdGlvbiBzZXQodmFsdWVzKSB7XG4gICAgaWYgKCF0aGlzLmlzVmFsaWQpIHJldHVybiB0aGlzO1xuXG4gICAgdmFyIG1peGVkID0gX2V4dGVuZHMoe30sIHRoaXMudmFsdWVzLCBub3JtYWxpemVPYmplY3QodmFsdWVzLCBEdXJhdGlvbi5ub3JtYWxpemVVbml0KSk7XG5cbiAgICByZXR1cm4gY2xvbmUkMSh0aGlzLCB7XG4gICAgICB2YWx1ZXM6IG1peGVkXG4gICAgfSk7XG4gIH1cbiAgLyoqXG4gICAqIFwiU2V0XCIgdGhlIGxvY2FsZSBhbmQvb3IgbnVtYmVyaW5nU3lzdGVtLiAgUmV0dXJucyBhIG5ld2x5LWNvbnN0cnVjdGVkIER1cmF0aW9uLlxuICAgKiBAZXhhbXBsZSBkdXIucmVjb25maWd1cmUoeyBsb2NhbGU6ICdlbi1HQicgfSlcbiAgICogQHJldHVybiB7RHVyYXRpb259XG4gICAqL1xuICA7XG5cbiAgX3Byb3RvLnJlY29uZmlndXJlID0gZnVuY3Rpb24gcmVjb25maWd1cmUoX3RlbXApIHtcbiAgICB2YXIgX3JlZiA9IF90ZW1wID09PSB2b2lkIDAgPyB7fSA6IF90ZW1wLFxuICAgICAgICBsb2NhbGUgPSBfcmVmLmxvY2FsZSxcbiAgICAgICAgbnVtYmVyaW5nU3lzdGVtID0gX3JlZi5udW1iZXJpbmdTeXN0ZW0sXG4gICAgICAgIGNvbnZlcnNpb25BY2N1cmFjeSA9IF9yZWYuY29udmVyc2lvbkFjY3VyYWN5O1xuXG4gICAgdmFyIGxvYyA9IHRoaXMubG9jLmNsb25lKHtcbiAgICAgIGxvY2FsZTogbG9jYWxlLFxuICAgICAgbnVtYmVyaW5nU3lzdGVtOiBudW1iZXJpbmdTeXN0ZW1cbiAgICB9KSxcbiAgICAgICAgb3B0cyA9IHtcbiAgICAgIGxvYzogbG9jXG4gICAgfTtcblxuICAgIGlmIChjb252ZXJzaW9uQWNjdXJhY3kpIHtcbiAgICAgIG9wdHMuY29udmVyc2lvbkFjY3VyYWN5ID0gY29udmVyc2lvbkFjY3VyYWN5O1xuICAgIH1cblxuICAgIHJldHVybiBjbG9uZSQxKHRoaXMsIG9wdHMpO1xuICB9XG4gIC8qKlxuICAgKiBSZXR1cm4gdGhlIGxlbmd0aCBvZiB0aGUgZHVyYXRpb24gaW4gdGhlIHNwZWNpZmllZCB1bml0LlxuICAgKiBAcGFyYW0ge3N0cmluZ30gdW5pdCAtIGEgdW5pdCBzdWNoIGFzICdtaW51dGVzJyBvciAnZGF5cydcbiAgICogQGV4YW1wbGUgRHVyYXRpb24uZnJvbU9iamVjdCh7eWVhcnM6IDF9KS5hcygnZGF5cycpIC8vPT4gMzY1XG4gICAqIEBleGFtcGxlIER1cmF0aW9uLmZyb21PYmplY3Qoe3llYXJzOiAxfSkuYXMoJ21vbnRocycpIC8vPT4gMTJcbiAgICogQGV4YW1wbGUgRHVyYXRpb24uZnJvbU9iamVjdCh7aG91cnM6IDYwfSkuYXMoJ2RheXMnKSAvLz0+IDIuNVxuICAgKiBAcmV0dXJuIHtudW1iZXJ9XG4gICAqL1xuICA7XG5cbiAgX3Byb3RvLmFzID0gZnVuY3Rpb24gYXModW5pdCkge1xuICAgIHJldHVybiB0aGlzLmlzVmFsaWQgPyB0aGlzLnNoaWZ0VG8odW5pdCkuZ2V0KHVuaXQpIDogTmFOO1xuICB9XG4gIC8qKlxuICAgKiBSZWR1Y2UgdGhpcyBEdXJhdGlvbiB0byBpdHMgY2Fub25pY2FsIHJlcHJlc2VudGF0aW9uIGluIGl0cyBjdXJyZW50IHVuaXRzLlxuICAgKiBAZXhhbXBsZSBEdXJhdGlvbi5mcm9tT2JqZWN0KHsgeWVhcnM6IDIsIGRheXM6IDUwMDAgfSkubm9ybWFsaXplKCkudG9PYmplY3QoKSAvLz0+IHsgeWVhcnM6IDE1LCBkYXlzOiAyNTUgfVxuICAgKiBAZXhhbXBsZSBEdXJhdGlvbi5mcm9tT2JqZWN0KHsgaG91cnM6IDEyLCBtaW51dGVzOiAtNDUgfSkubm9ybWFsaXplKCkudG9PYmplY3QoKSAvLz0+IHsgaG91cnM6IDExLCBtaW51dGVzOiAxNSB9XG4gICAqIEByZXR1cm4ge0R1cmF0aW9ufVxuICAgKi9cbiAgO1xuXG4gIF9wcm90by5ub3JtYWxpemUgPSBmdW5jdGlvbiBub3JtYWxpemUoKSB7XG4gICAgaWYgKCF0aGlzLmlzVmFsaWQpIHJldHVybiB0aGlzO1xuICAgIHZhciB2YWxzID0gdGhpcy50b09iamVjdCgpO1xuICAgIG5vcm1hbGl6ZVZhbHVlcyh0aGlzLm1hdHJpeCwgdmFscyk7XG4gICAgcmV0dXJuIGNsb25lJDEodGhpcywge1xuICAgICAgdmFsdWVzOiB2YWxzXG4gICAgfSwgdHJ1ZSk7XG4gIH1cbiAgLyoqXG4gICAqIENvbnZlcnQgdGhpcyBEdXJhdGlvbiBpbnRvIGl0cyByZXByZXNlbnRhdGlvbiBpbiBhIGRpZmZlcmVudCBzZXQgb2YgdW5pdHMuXG4gICAqIEBleGFtcGxlIER1cmF0aW9uLmZyb21PYmplY3QoeyBob3VyczogMSwgc2Vjb25kczogMzAgfSkuc2hpZnRUbygnbWludXRlcycsICdtaWxsaXNlY29uZHMnKS50b09iamVjdCgpIC8vPT4geyBtaW51dGVzOiA2MCwgbWlsbGlzZWNvbmRzOiAzMDAwMCB9XG4gICAqIEByZXR1cm4ge0R1cmF0aW9ufVxuICAgKi9cbiAgO1xuXG4gIF9wcm90by5zaGlmdFRvID0gZnVuY3Rpb24gc2hpZnRUbygpIHtcbiAgICBmb3IgKHZhciBfbGVuID0gYXJndW1lbnRzLmxlbmd0aCwgdW5pdHMgPSBuZXcgQXJyYXkoX2xlbiksIF9rZXkgPSAwOyBfa2V5IDwgX2xlbjsgX2tleSsrKSB7XG4gICAgICB1bml0c1tfa2V5XSA9IGFyZ3VtZW50c1tfa2V5XTtcbiAgICB9XG5cbiAgICBpZiAoIXRoaXMuaXNWYWxpZCkgcmV0dXJuIHRoaXM7XG5cbiAgICBpZiAodW5pdHMubGVuZ3RoID09PSAwKSB7XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9XG5cbiAgICB1bml0cyA9IHVuaXRzLm1hcChmdW5jdGlvbiAodSkge1xuICAgICAgcmV0dXJuIER1cmF0aW9uLm5vcm1hbGl6ZVVuaXQodSk7XG4gICAgfSk7XG4gICAgdmFyIGJ1aWx0ID0ge30sXG4gICAgICAgIGFjY3VtdWxhdGVkID0ge30sXG4gICAgICAgIHZhbHMgPSB0aGlzLnRvT2JqZWN0KCk7XG4gICAgdmFyIGxhc3RVbml0O1xuXG4gICAgZm9yICh2YXIgX2l0ZXJhdG9yMiA9IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyTG9vc2Uob3JkZXJlZFVuaXRzJDEpLCBfc3RlcDI7ICEoX3N0ZXAyID0gX2l0ZXJhdG9yMigpKS5kb25lOykge1xuICAgICAgdmFyIGsgPSBfc3RlcDIudmFsdWU7XG5cbiAgICAgIGlmICh1bml0cy5pbmRleE9mKGspID49IDApIHtcbiAgICAgICAgbGFzdFVuaXQgPSBrO1xuICAgICAgICB2YXIgb3duID0gMDsgLy8gYW55dGhpbmcgd2UgaGF2ZW4ndCBib2lsZWQgZG93biB5ZXQgc2hvdWxkIGdldCBib2lsZWQgdG8gdGhpcyB1bml0XG5cbiAgICAgICAgZm9yICh2YXIgYWsgaW4gYWNjdW11bGF0ZWQpIHtcbiAgICAgICAgICBvd24gKz0gdGhpcy5tYXRyaXhbYWtdW2tdICogYWNjdW11bGF0ZWRbYWtdO1xuICAgICAgICAgIGFjY3VtdWxhdGVkW2FrXSA9IDA7XG4gICAgICAgIH0gLy8gcGx1cyBhbnl0aGluZyB0aGF0J3MgYWxyZWFkeSBpbiB0aGlzIHVuaXRcblxuXG4gICAgICAgIGlmIChpc051bWJlcih2YWxzW2tdKSkge1xuICAgICAgICAgIG93biArPSB2YWxzW2tdO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIGkgPSBNYXRoLnRydW5jKG93bik7XG4gICAgICAgIGJ1aWx0W2tdID0gaTtcbiAgICAgICAgYWNjdW11bGF0ZWRba10gPSAob3duICogMTAwMCAtIGkgKiAxMDAwKSAvIDEwMDA7IC8vIHBsdXMgYW55dGhpbmcgZnVydGhlciBkb3duIHRoZSBjaGFpbiB0aGF0IHNob3VsZCBiZSByb2xsZWQgdXAgaW4gdG8gdGhpc1xuXG4gICAgICAgIGZvciAodmFyIGRvd24gaW4gdmFscykge1xuICAgICAgICAgIGlmIChvcmRlcmVkVW5pdHMkMS5pbmRleE9mKGRvd24pID4gb3JkZXJlZFVuaXRzJDEuaW5kZXhPZihrKSkge1xuICAgICAgICAgICAgY29udmVydCh0aGlzLm1hdHJpeCwgdmFscywgZG93biwgYnVpbHQsIGspO1xuICAgICAgICAgIH1cbiAgICAgICAgfSAvLyBvdGhlcndpc2UsIGtlZXAgaXQgaW4gdGhlIHdpbmdzIHRvIGJvaWwgaXQgbGF0ZXJcblxuICAgICAgfSBlbHNlIGlmIChpc051bWJlcih2YWxzW2tdKSkge1xuICAgICAgICBhY2N1bXVsYXRlZFtrXSA9IHZhbHNba107XG4gICAgICB9XG4gICAgfSAvLyBhbnl0aGluZyBsZWZ0b3ZlciBiZWNvbWVzIHRoZSBkZWNpbWFsIGZvciB0aGUgbGFzdCB1bml0XG4gICAgLy8gbGFzdFVuaXQgbXVzdCBiZSBkZWZpbmVkIHNpbmNlIHVuaXRzIGlzIG5vdCBlbXB0eVxuXG5cbiAgICBmb3IgKHZhciBrZXkgaW4gYWNjdW11bGF0ZWQpIHtcbiAgICAgIGlmIChhY2N1bXVsYXRlZFtrZXldICE9PSAwKSB7XG4gICAgICAgIGJ1aWx0W2xhc3RVbml0XSArPSBrZXkgPT09IGxhc3RVbml0ID8gYWNjdW11bGF0ZWRba2V5XSA6IGFjY3VtdWxhdGVkW2tleV0gLyB0aGlzLm1hdHJpeFtsYXN0VW5pdF1ba2V5XTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gY2xvbmUkMSh0aGlzLCB7XG4gICAgICB2YWx1ZXM6IGJ1aWx0XG4gICAgfSwgdHJ1ZSkubm9ybWFsaXplKCk7XG4gIH1cbiAgLyoqXG4gICAqIFJldHVybiB0aGUgbmVnYXRpdmUgb2YgdGhpcyBEdXJhdGlvbi5cbiAgICogQGV4YW1wbGUgRHVyYXRpb24uZnJvbU9iamVjdCh7IGhvdXJzOiAxLCBzZWNvbmRzOiAzMCB9KS5uZWdhdGUoKS50b09iamVjdCgpIC8vPT4geyBob3VyczogLTEsIHNlY29uZHM6IC0zMCB9XG4gICAqIEByZXR1cm4ge0R1cmF0aW9ufVxuICAgKi9cbiAgO1xuXG4gIF9wcm90by5uZWdhdGUgPSBmdW5jdGlvbiBuZWdhdGUoKSB7XG4gICAgaWYgKCF0aGlzLmlzVmFsaWQpIHJldHVybiB0aGlzO1xuICAgIHZhciBuZWdhdGVkID0ge307XG5cbiAgICBmb3IgKHZhciBfaTIgPSAwLCBfT2JqZWN0JGtleXMyID0gT2JqZWN0LmtleXModGhpcy52YWx1ZXMpOyBfaTIgPCBfT2JqZWN0JGtleXMyLmxlbmd0aDsgX2kyKyspIHtcbiAgICAgIHZhciBrID0gX09iamVjdCRrZXlzMltfaTJdO1xuICAgICAgbmVnYXRlZFtrXSA9IC10aGlzLnZhbHVlc1trXTtcbiAgICB9XG5cbiAgICByZXR1cm4gY2xvbmUkMSh0aGlzLCB7XG4gICAgICB2YWx1ZXM6IG5lZ2F0ZWRcbiAgICB9LCB0cnVlKTtcbiAgfVxuICAvKipcbiAgICogR2V0IHRoZSB5ZWFycy5cbiAgICogQHR5cGUge251bWJlcn1cbiAgICovXG4gIDtcblxuICAvKipcbiAgICogRXF1YWxpdHkgY2hlY2tcbiAgICogVHdvIER1cmF0aW9ucyBhcmUgZXF1YWwgaWZmIHRoZXkgaGF2ZSB0aGUgc2FtZSB1bml0cyBhbmQgdGhlIHNhbWUgdmFsdWVzIGZvciBlYWNoIHVuaXQuXG4gICAqIEBwYXJhbSB7RHVyYXRpb259IG90aGVyXG4gICAqIEByZXR1cm4ge2Jvb2xlYW59XG4gICAqL1xuICBfcHJvdG8uZXF1YWxzID0gZnVuY3Rpb24gZXF1YWxzKG90aGVyKSB7XG4gICAgaWYgKCF0aGlzLmlzVmFsaWQgfHwgIW90aGVyLmlzVmFsaWQpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICBpZiAoIXRoaXMubG9jLmVxdWFscyhvdGhlci5sb2MpKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZXEodjEsIHYyKSB7XG4gICAgICAvLyBDb25zaWRlciAwIGFuZCB1bmRlZmluZWQgYXMgZXF1YWxcbiAgICAgIGlmICh2MSA9PT0gdW5kZWZpbmVkIHx8IHYxID09PSAwKSByZXR1cm4gdjIgPT09IHVuZGVmaW5lZCB8fCB2MiA9PT0gMDtcbiAgICAgIHJldHVybiB2MSA9PT0gdjI7XG4gICAgfVxuXG4gICAgZm9yICh2YXIgX2l0ZXJhdG9yMyA9IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyTG9vc2Uob3JkZXJlZFVuaXRzJDEpLCBfc3RlcDM7ICEoX3N0ZXAzID0gX2l0ZXJhdG9yMygpKS5kb25lOykge1xuICAgICAgdmFyIHUgPSBfc3RlcDMudmFsdWU7XG5cbiAgICAgIGlmICghZXEodGhpcy52YWx1ZXNbdV0sIG90aGVyLnZhbHVlc1t1XSkpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiB0cnVlO1xuICB9O1xuXG4gIF9jcmVhdGVDbGFzcyhEdXJhdGlvbiwgW3tcbiAgICBrZXk6IFwibG9jYWxlXCIsXG4gICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICByZXR1cm4gdGhpcy5pc1ZhbGlkID8gdGhpcy5sb2MubG9jYWxlIDogbnVsbDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogR2V0IHRoZSBudW1iZXJpbmcgc3lzdGVtIG9mIGEgRHVyYXRpb24sIHN1Y2ggJ2JlbmcnLiBUaGUgbnVtYmVyaW5nIHN5c3RlbSBpcyB1c2VkIHdoZW4gZm9ybWF0dGluZyB0aGUgRHVyYXRpb25cbiAgICAgKlxuICAgICAqIEB0eXBlIHtzdHJpbmd9XG4gICAgICovXG5cbiAgfSwge1xuICAgIGtleTogXCJudW1iZXJpbmdTeXN0ZW1cIixcbiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgIHJldHVybiB0aGlzLmlzVmFsaWQgPyB0aGlzLmxvYy5udW1iZXJpbmdTeXN0ZW0gOiBudWxsO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJ5ZWFyc1wiLFxuICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgcmV0dXJuIHRoaXMuaXNWYWxpZCA/IHRoaXMudmFsdWVzLnllYXJzIHx8IDAgOiBOYU47XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEdldCB0aGUgcXVhcnRlcnMuXG4gICAgICogQHR5cGUge251bWJlcn1cbiAgICAgKi9cblxuICB9LCB7XG4gICAga2V5OiBcInF1YXJ0ZXJzXCIsXG4gICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICByZXR1cm4gdGhpcy5pc1ZhbGlkID8gdGhpcy52YWx1ZXMucXVhcnRlcnMgfHwgMCA6IE5hTjtcbiAgICB9XG4gICAgLyoqXG4gICAgICogR2V0IHRoZSBtb250aHMuXG4gICAgICogQHR5cGUge251bWJlcn1cbiAgICAgKi9cblxuICB9LCB7XG4gICAga2V5OiBcIm1vbnRoc1wiLFxuICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgcmV0dXJuIHRoaXMuaXNWYWxpZCA/IHRoaXMudmFsdWVzLm1vbnRocyB8fCAwIDogTmFOO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIHdlZWtzXG4gICAgICogQHR5cGUge251bWJlcn1cbiAgICAgKi9cblxuICB9LCB7XG4gICAga2V5OiBcIndlZWtzXCIsXG4gICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICByZXR1cm4gdGhpcy5pc1ZhbGlkID8gdGhpcy52YWx1ZXMud2Vla3MgfHwgMCA6IE5hTjtcbiAgICB9XG4gICAgLyoqXG4gICAgICogR2V0IHRoZSBkYXlzLlxuICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICovXG5cbiAgfSwge1xuICAgIGtleTogXCJkYXlzXCIsXG4gICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICByZXR1cm4gdGhpcy5pc1ZhbGlkID8gdGhpcy52YWx1ZXMuZGF5cyB8fCAwIDogTmFOO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIGhvdXJzLlxuICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICovXG5cbiAgfSwge1xuICAgIGtleTogXCJob3Vyc1wiLFxuICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgcmV0dXJuIHRoaXMuaXNWYWxpZCA/IHRoaXMudmFsdWVzLmhvdXJzIHx8IDAgOiBOYU47XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEdldCB0aGUgbWludXRlcy5cbiAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAqL1xuXG4gIH0sIHtcbiAgICBrZXk6IFwibWludXRlc1wiLFxuICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgcmV0dXJuIHRoaXMuaXNWYWxpZCA/IHRoaXMudmFsdWVzLm1pbnV0ZXMgfHwgMCA6IE5hTjtcbiAgICB9XG4gICAgLyoqXG4gICAgICogR2V0IHRoZSBzZWNvbmRzLlxuICAgICAqIEByZXR1cm4ge251bWJlcn1cbiAgICAgKi9cblxuICB9LCB7XG4gICAga2V5OiBcInNlY29uZHNcIixcbiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgIHJldHVybiB0aGlzLmlzVmFsaWQgPyB0aGlzLnZhbHVlcy5zZWNvbmRzIHx8IDAgOiBOYU47XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEdldCB0aGUgbWlsbGlzZWNvbmRzLlxuICAgICAqIEByZXR1cm4ge251bWJlcn1cbiAgICAgKi9cblxuICB9LCB7XG4gICAga2V5OiBcIm1pbGxpc2Vjb25kc1wiLFxuICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgcmV0dXJuIHRoaXMuaXNWYWxpZCA/IHRoaXMudmFsdWVzLm1pbGxpc2Vjb25kcyB8fCAwIDogTmFOO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHdoZXRoZXIgdGhlIER1cmF0aW9uIGlzIGludmFsaWQuIEludmFsaWQgZHVyYXRpb25zIGFyZSByZXR1cm5lZCBieSBkaWZmIG9wZXJhdGlvbnNcbiAgICAgKiBvbiBpbnZhbGlkIERhdGVUaW1lcyBvciBJbnRlcnZhbHMuXG4gICAgICogQHJldHVybiB7Ym9vbGVhbn1cbiAgICAgKi9cblxuICB9LCB7XG4gICAga2V5OiBcImlzVmFsaWRcIixcbiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgIHJldHVybiB0aGlzLmludmFsaWQgPT09IG51bGw7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgYW4gZXJyb3IgY29kZSBpZiB0aGlzIER1cmF0aW9uIGJlY2FtZSBpbnZhbGlkLCBvciBudWxsIGlmIHRoZSBEdXJhdGlvbiBpcyB2YWxpZFxuICAgICAqIEByZXR1cm4ge3N0cmluZ31cbiAgICAgKi9cblxuICB9LCB7XG4gICAga2V5OiBcImludmFsaWRSZWFzb25cIixcbiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgIHJldHVybiB0aGlzLmludmFsaWQgPyB0aGlzLmludmFsaWQucmVhc29uIDogbnVsbDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyBhbiBleHBsYW5hdGlvbiBvZiB3aHkgdGhpcyBEdXJhdGlvbiBiZWNhbWUgaW52YWxpZCwgb3IgbnVsbCBpZiB0aGUgRHVyYXRpb24gaXMgdmFsaWRcbiAgICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgICAqL1xuXG4gIH0sIHtcbiAgICBrZXk6IFwiaW52YWxpZEV4cGxhbmF0aW9uXCIsXG4gICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICByZXR1cm4gdGhpcy5pbnZhbGlkID8gdGhpcy5pbnZhbGlkLmV4cGxhbmF0aW9uIDogbnVsbDtcbiAgICB9XG4gIH1dKTtcblxuICByZXR1cm4gRHVyYXRpb247XG59KCk7XG5cbnZhciBJTlZBTElEJDEgPSBcIkludmFsaWQgSW50ZXJ2YWxcIjsgLy8gY2hlY2tzIGlmIHRoZSBzdGFydCBpcyBlcXVhbCB0byBvciBiZWZvcmUgdGhlIGVuZFxuXG5mdW5jdGlvbiB2YWxpZGF0ZVN0YXJ0RW5kKHN0YXJ0LCBlbmQpIHtcbiAgaWYgKCFzdGFydCB8fCAhc3RhcnQuaXNWYWxpZCkge1xuICAgIHJldHVybiBJbnRlcnZhbC5pbnZhbGlkKFwibWlzc2luZyBvciBpbnZhbGlkIHN0YXJ0XCIpO1xuICB9IGVsc2UgaWYgKCFlbmQgfHwgIWVuZC5pc1ZhbGlkKSB7XG4gICAgcmV0dXJuIEludGVydmFsLmludmFsaWQoXCJtaXNzaW5nIG9yIGludmFsaWQgZW5kXCIpO1xuICB9IGVsc2UgaWYgKGVuZCA8IHN0YXJ0KSB7XG4gICAgcmV0dXJuIEludGVydmFsLmludmFsaWQoXCJlbmQgYmVmb3JlIHN0YXJ0XCIsIFwiVGhlIGVuZCBvZiBhbiBpbnRlcnZhbCBtdXN0IGJlIGFmdGVyIGl0cyBzdGFydCwgYnV0IHlvdSBoYWQgc3RhcnQ9XCIgKyBzdGFydC50b0lTTygpICsgXCIgYW5kIGVuZD1cIiArIGVuZC50b0lTTygpKTtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxufVxuLyoqXG4gKiBBbiBJbnRlcnZhbCBvYmplY3QgcmVwcmVzZW50cyBhIGhhbGYtb3BlbiBpbnRlcnZhbCBvZiB0aW1lLCB3aGVyZSBlYWNoIGVuZHBvaW50IGlzIGEge0BsaW5rIERhdGVUaW1lfS4gQ29uY2VwdHVhbGx5LCBpdCdzIGEgY29udGFpbmVyIGZvciB0aG9zZSB0d28gZW5kcG9pbnRzLCBhY2NvbXBhbmllZCBieSBtZXRob2RzIGZvciBjcmVhdGluZywgcGFyc2luZywgaW50ZXJyb2dhdGluZywgY29tcGFyaW5nLCB0cmFuc2Zvcm1pbmcsIGFuZCBmb3JtYXR0aW5nIHRoZW0uXG4gKlxuICogSGVyZSBpcyBhIGJyaWVmIG92ZXJ2aWV3IG9mIHRoZSBtb3N0IGNvbW1vbmx5IHVzZWQgbWV0aG9kcyBhbmQgZ2V0dGVycyBpbiBJbnRlcnZhbDpcbiAqXG4gKiAqICoqQ3JlYXRpb24qKiBUbyBjcmVhdGUgYW4gSW50ZXJ2YWwsIHVzZSB7QGxpbmsgSW50ZXJ2YWwjZnJvbURhdGVUaW1lc30sIHtAbGluayBJbnRlcnZhbCNhZnRlcn0sIHtAbGluayBJbnRlcnZhbCNiZWZvcmV9LCBvciB7QGxpbmsgSW50ZXJ2YWwjZnJvbUlTT30uXG4gKiAqICoqQWNjZXNzb3JzKiogVXNlIHtAbGluayBJbnRlcnZhbCNzdGFydH0gYW5kIHtAbGluayBJbnRlcnZhbCNlbmR9IHRvIGdldCB0aGUgc3RhcnQgYW5kIGVuZC5cbiAqICogKipJbnRlcnJvZ2F0aW9uKiogVG8gYW5hbHl6ZSB0aGUgSW50ZXJ2YWwsIHVzZSB7QGxpbmsgSW50ZXJ2YWwjY291bnR9LCB7QGxpbmsgSW50ZXJ2YWwjbGVuZ3RofSwge0BsaW5rIEludGVydmFsI2hhc1NhbWV9LCB7QGxpbmsgSW50ZXJ2YWwjY29udGFpbnN9LCB7QGxpbmsgSW50ZXJ2YWwjaXNBZnRlcn0sIG9yIHtAbGluayBJbnRlcnZhbCNpc0JlZm9yZX0uXG4gKiAqICoqVHJhbnNmb3JtYXRpb24qKiBUbyBjcmVhdGUgb3RoZXIgSW50ZXJ2YWxzIG91dCBvZiB0aGlzIG9uZSwgdXNlIHtAbGluayBJbnRlcnZhbCNzZXR9LCB7QGxpbmsgSW50ZXJ2YWwjc3BsaXRBdH0sIHtAbGluayBJbnRlcnZhbCNzcGxpdEJ5fSwge0BsaW5rIEludGVydmFsI2RpdmlkZUVxdWFsbHl9LCB7QGxpbmsgSW50ZXJ2YWwjbWVyZ2V9LCB7QGxpbmsgSW50ZXJ2YWwjeG9yfSwge0BsaW5rIEludGVydmFsI3VuaW9ufSwge0BsaW5rIEludGVydmFsI2ludGVyc2VjdGlvbn0sIG9yIHtAbGluayBJbnRlcnZhbCNkaWZmZXJlbmNlfS5cbiAqICogKipDb21wYXJpc29uKiogVG8gY29tcGFyZSB0aGlzIEludGVydmFsIHRvIGFub3RoZXIgb25lLCB1c2Uge0BsaW5rIEludGVydmFsI2VxdWFsc30sIHtAbGluayBJbnRlcnZhbCNvdmVybGFwc30sIHtAbGluayBJbnRlcnZhbCNhYnV0c1N0YXJ0fSwge0BsaW5rIEludGVydmFsI2FidXRzRW5kfSwge0BsaW5rIEludGVydmFsI2VuZ3VsZnN9XG4gKiAqICoqT3V0cHV0KiogVG8gY29udmVydCB0aGUgSW50ZXJ2YWwgaW50byBvdGhlciByZXByZXNlbnRhdGlvbnMsIHNlZSB7QGxpbmsgSW50ZXJ2YWwjdG9TdHJpbmd9LCB7QGxpbmsgSW50ZXJ2YWwjdG9JU099LCB7QGxpbmsgSW50ZXJ2YWwjdG9JU09EYXRlfSwge0BsaW5rIEludGVydmFsI3RvSVNPVGltZX0sIHtAbGluayBJbnRlcnZhbCN0b0Zvcm1hdH0sIGFuZCB7QGxpbmsgSW50ZXJ2YWwjdG9EdXJhdGlvbn0uXG4gKi9cblxuXG52YXIgSW50ZXJ2YWwgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkge1xuICAvKipcbiAgICogQHByaXZhdGVcbiAgICovXG4gIGZ1bmN0aW9uIEludGVydmFsKGNvbmZpZykge1xuICAgIC8qKlxuICAgICAqIEBhY2Nlc3MgcHJpdmF0ZVxuICAgICAqL1xuICAgIHRoaXMucyA9IGNvbmZpZy5zdGFydDtcbiAgICAvKipcbiAgICAgKiBAYWNjZXNzIHByaXZhdGVcbiAgICAgKi9cblxuICAgIHRoaXMuZSA9IGNvbmZpZy5lbmQ7XG4gICAgLyoqXG4gICAgICogQGFjY2VzcyBwcml2YXRlXG4gICAgICovXG5cbiAgICB0aGlzLmludmFsaWQgPSBjb25maWcuaW52YWxpZCB8fCBudWxsO1xuICAgIC8qKlxuICAgICAqIEBhY2Nlc3MgcHJpdmF0ZVxuICAgICAqL1xuXG4gICAgdGhpcy5pc0x1eG9uSW50ZXJ2YWwgPSB0cnVlO1xuICB9XG4gIC8qKlxuICAgKiBDcmVhdGUgYW4gaW52YWxpZCBJbnRlcnZhbC5cbiAgICogQHBhcmFtIHtzdHJpbmd9IHJlYXNvbiAtIHNpbXBsZSBzdHJpbmcgb2Ygd2h5IHRoaXMgSW50ZXJ2YWwgaXMgaW52YWxpZC4gU2hvdWxkIG5vdCBjb250YWluIHBhcmFtZXRlcnMgb3IgYW55dGhpbmcgZWxzZSBkYXRhLWRlcGVuZGVudFxuICAgKiBAcGFyYW0ge3N0cmluZ30gW2V4cGxhbmF0aW9uPW51bGxdIC0gbG9uZ2VyIGV4cGxhbmF0aW9uLCBtYXkgaW5jbHVkZSBwYXJhbWV0ZXJzIGFuZCBvdGhlciB1c2VmdWwgZGVidWdnaW5nIGluZm9ybWF0aW9uXG4gICAqIEByZXR1cm4ge0ludGVydmFsfVxuICAgKi9cblxuXG4gIEludGVydmFsLmludmFsaWQgPSBmdW5jdGlvbiBpbnZhbGlkKHJlYXNvbiwgZXhwbGFuYXRpb24pIHtcbiAgICBpZiAoZXhwbGFuYXRpb24gPT09IHZvaWQgMCkge1xuICAgICAgZXhwbGFuYXRpb24gPSBudWxsO1xuICAgIH1cblxuICAgIGlmICghcmVhc29uKSB7XG4gICAgICB0aHJvdyBuZXcgSW52YWxpZEFyZ3VtZW50RXJyb3IoXCJuZWVkIHRvIHNwZWNpZnkgYSByZWFzb24gdGhlIEludGVydmFsIGlzIGludmFsaWRcIik7XG4gICAgfVxuXG4gICAgdmFyIGludmFsaWQgPSByZWFzb24gaW5zdGFuY2VvZiBJbnZhbGlkID8gcmVhc29uIDogbmV3IEludmFsaWQocmVhc29uLCBleHBsYW5hdGlvbik7XG5cbiAgICBpZiAoU2V0dGluZ3MudGhyb3dPbkludmFsaWQpIHtcbiAgICAgIHRocm93IG5ldyBJbnZhbGlkSW50ZXJ2YWxFcnJvcihpbnZhbGlkKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIG5ldyBJbnRlcnZhbCh7XG4gICAgICAgIGludmFsaWQ6IGludmFsaWRcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuICAvKipcbiAgICogQ3JlYXRlIGFuIEludGVydmFsIGZyb20gYSBzdGFydCBEYXRlVGltZSBhbmQgYW4gZW5kIERhdGVUaW1lLiBJbmNsdXNpdmUgb2YgdGhlIHN0YXJ0IGJ1dCBub3QgdGhlIGVuZC5cbiAgICogQHBhcmFtIHtEYXRlVGltZXxEYXRlfE9iamVjdH0gc3RhcnRcbiAgICogQHBhcmFtIHtEYXRlVGltZXxEYXRlfE9iamVjdH0gZW5kXG4gICAqIEByZXR1cm4ge0ludGVydmFsfVxuICAgKi9cbiAgO1xuXG4gIEludGVydmFsLmZyb21EYXRlVGltZXMgPSBmdW5jdGlvbiBmcm9tRGF0ZVRpbWVzKHN0YXJ0LCBlbmQpIHtcbiAgICB2YXIgYnVpbHRTdGFydCA9IGZyaWVuZGx5RGF0ZVRpbWUoc3RhcnQpLFxuICAgICAgICBidWlsdEVuZCA9IGZyaWVuZGx5RGF0ZVRpbWUoZW5kKTtcbiAgICB2YXIgdmFsaWRhdGVFcnJvciA9IHZhbGlkYXRlU3RhcnRFbmQoYnVpbHRTdGFydCwgYnVpbHRFbmQpO1xuXG4gICAgaWYgKHZhbGlkYXRlRXJyb3IgPT0gbnVsbCkge1xuICAgICAgcmV0dXJuIG5ldyBJbnRlcnZhbCh7XG4gICAgICAgIHN0YXJ0OiBidWlsdFN0YXJ0LFxuICAgICAgICBlbmQ6IGJ1aWx0RW5kXG4gICAgICB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIHZhbGlkYXRlRXJyb3I7XG4gICAgfVxuICB9XG4gIC8qKlxuICAgKiBDcmVhdGUgYW4gSW50ZXJ2YWwgZnJvbSBhIHN0YXJ0IERhdGVUaW1lIGFuZCBhIER1cmF0aW9uIHRvIGV4dGVuZCB0by5cbiAgICogQHBhcmFtIHtEYXRlVGltZXxEYXRlfE9iamVjdH0gc3RhcnRcbiAgICogQHBhcmFtIHtEdXJhdGlvbnxPYmplY3R8bnVtYmVyfSBkdXJhdGlvbiAtIHRoZSBsZW5ndGggb2YgdGhlIEludGVydmFsLlxuICAgKiBAcmV0dXJuIHtJbnRlcnZhbH1cbiAgICovXG4gIDtcblxuICBJbnRlcnZhbC5hZnRlciA9IGZ1bmN0aW9uIGFmdGVyKHN0YXJ0LCBkdXJhdGlvbikge1xuICAgIHZhciBkdXIgPSBEdXJhdGlvbi5mcm9tRHVyYXRpb25MaWtlKGR1cmF0aW9uKSxcbiAgICAgICAgZHQgPSBmcmllbmRseURhdGVUaW1lKHN0YXJ0KTtcbiAgICByZXR1cm4gSW50ZXJ2YWwuZnJvbURhdGVUaW1lcyhkdCwgZHQucGx1cyhkdXIpKTtcbiAgfVxuICAvKipcbiAgICogQ3JlYXRlIGFuIEludGVydmFsIGZyb20gYW4gZW5kIERhdGVUaW1lIGFuZCBhIER1cmF0aW9uIHRvIGV4dGVuZCBiYWNrd2FyZHMgdG8uXG4gICAqIEBwYXJhbSB7RGF0ZVRpbWV8RGF0ZXxPYmplY3R9IGVuZFxuICAgKiBAcGFyYW0ge0R1cmF0aW9ufE9iamVjdHxudW1iZXJ9IGR1cmF0aW9uIC0gdGhlIGxlbmd0aCBvZiB0aGUgSW50ZXJ2YWwuXG4gICAqIEByZXR1cm4ge0ludGVydmFsfVxuICAgKi9cbiAgO1xuXG4gIEludGVydmFsLmJlZm9yZSA9IGZ1bmN0aW9uIGJlZm9yZShlbmQsIGR1cmF0aW9uKSB7XG4gICAgdmFyIGR1ciA9IER1cmF0aW9uLmZyb21EdXJhdGlvbkxpa2UoZHVyYXRpb24pLFxuICAgICAgICBkdCA9IGZyaWVuZGx5RGF0ZVRpbWUoZW5kKTtcbiAgICByZXR1cm4gSW50ZXJ2YWwuZnJvbURhdGVUaW1lcyhkdC5taW51cyhkdXIpLCBkdCk7XG4gIH1cbiAgLyoqXG4gICAqIENyZWF0ZSBhbiBJbnRlcnZhbCBmcm9tIGFuIElTTyA4NjAxIHN0cmluZy5cbiAgICogQWNjZXB0cyBgPHN0YXJ0Pi88ZW5kPmAsIGA8c3RhcnQ+LzxkdXJhdGlvbj5gLCBhbmQgYDxkdXJhdGlvbj4vPGVuZD5gIGZvcm1hdHMuXG4gICAqIEBwYXJhbSB7c3RyaW5nfSB0ZXh0IC0gdGhlIElTTyBzdHJpbmcgdG8gcGFyc2VcbiAgICogQHBhcmFtIHtPYmplY3R9IFtvcHRzXSAtIG9wdGlvbnMgdG8gcGFzcyB7QGxpbmsgRGF0ZVRpbWUjZnJvbUlTT30gYW5kIG9wdGlvbmFsbHkge0BsaW5rIER1cmF0aW9uI2Zyb21JU099XG4gICAqIEBzZWUgaHR0cHM6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvSVNPXzg2MDEjVGltZV9pbnRlcnZhbHNcbiAgICogQHJldHVybiB7SW50ZXJ2YWx9XG4gICAqL1xuICA7XG5cbiAgSW50ZXJ2YWwuZnJvbUlTTyA9IGZ1bmN0aW9uIGZyb21JU08odGV4dCwgb3B0cykge1xuICAgIHZhciBfc3BsaXQgPSAodGV4dCB8fCBcIlwiKS5zcGxpdChcIi9cIiwgMiksXG4gICAgICAgIHMgPSBfc3BsaXRbMF0sXG4gICAgICAgIGUgPSBfc3BsaXRbMV07XG5cbiAgICBpZiAocyAmJiBlKSB7XG4gICAgICB2YXIgc3RhcnQsIHN0YXJ0SXNWYWxpZDtcblxuICAgICAgdHJ5IHtcbiAgICAgICAgc3RhcnQgPSBEYXRlVGltZS5mcm9tSVNPKHMsIG9wdHMpO1xuICAgICAgICBzdGFydElzVmFsaWQgPSBzdGFydC5pc1ZhbGlkO1xuICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICBzdGFydElzVmFsaWQgPSBmYWxzZTtcbiAgICAgIH1cblxuICAgICAgdmFyIGVuZCwgZW5kSXNWYWxpZDtcblxuICAgICAgdHJ5IHtcbiAgICAgICAgZW5kID0gRGF0ZVRpbWUuZnJvbUlTTyhlLCBvcHRzKTtcbiAgICAgICAgZW5kSXNWYWxpZCA9IGVuZC5pc1ZhbGlkO1xuICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICBlbmRJc1ZhbGlkID0gZmFsc2U7XG4gICAgICB9XG5cbiAgICAgIGlmIChzdGFydElzVmFsaWQgJiYgZW5kSXNWYWxpZCkge1xuICAgICAgICByZXR1cm4gSW50ZXJ2YWwuZnJvbURhdGVUaW1lcyhzdGFydCwgZW5kKTtcbiAgICAgIH1cblxuICAgICAgaWYgKHN0YXJ0SXNWYWxpZCkge1xuICAgICAgICB2YXIgZHVyID0gRHVyYXRpb24uZnJvbUlTTyhlLCBvcHRzKTtcblxuICAgICAgICBpZiAoZHVyLmlzVmFsaWQpIHtcbiAgICAgICAgICByZXR1cm4gSW50ZXJ2YWwuYWZ0ZXIoc3RhcnQsIGR1cik7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAoZW5kSXNWYWxpZCkge1xuICAgICAgICB2YXIgX2R1ciA9IER1cmF0aW9uLmZyb21JU08ocywgb3B0cyk7XG5cbiAgICAgICAgaWYgKF9kdXIuaXNWYWxpZCkge1xuICAgICAgICAgIHJldHVybiBJbnRlcnZhbC5iZWZvcmUoZW5kLCBfZHVyKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBJbnRlcnZhbC5pbnZhbGlkKFwidW5wYXJzYWJsZVwiLCBcInRoZSBpbnB1dCBcXFwiXCIgKyB0ZXh0ICsgXCJcXFwiIGNhbid0IGJlIHBhcnNlZCBhcyBJU08gODYwMVwiKTtcbiAgfVxuICAvKipcbiAgICogQ2hlY2sgaWYgYW4gb2JqZWN0IGlzIGFuIEludGVydmFsLiBXb3JrcyBhY3Jvc3MgY29udGV4dCBib3VuZGFyaWVzXG4gICAqIEBwYXJhbSB7b2JqZWN0fSBvXG4gICAqIEByZXR1cm4ge2Jvb2xlYW59XG4gICAqL1xuICA7XG5cbiAgSW50ZXJ2YWwuaXNJbnRlcnZhbCA9IGZ1bmN0aW9uIGlzSW50ZXJ2YWwobykge1xuICAgIHJldHVybiBvICYmIG8uaXNMdXhvbkludGVydmFsIHx8IGZhbHNlO1xuICB9XG4gIC8qKlxuICAgKiBSZXR1cm5zIHRoZSBzdGFydCBvZiB0aGUgSW50ZXJ2YWxcbiAgICogQHR5cGUge0RhdGVUaW1lfVxuICAgKi9cbiAgO1xuXG4gIHZhciBfcHJvdG8gPSBJbnRlcnZhbC5wcm90b3R5cGU7XG5cbiAgLyoqXG4gICAqIFJldHVybnMgdGhlIGxlbmd0aCBvZiB0aGUgSW50ZXJ2YWwgaW4gdGhlIHNwZWNpZmllZCB1bml0LlxuICAgKiBAcGFyYW0ge3N0cmluZ30gdW5pdCAtIHRoZSB1bml0IChzdWNoIGFzICdob3Vycycgb3IgJ2RheXMnKSB0byByZXR1cm4gdGhlIGxlbmd0aCBpbi5cbiAgICogQHJldHVybiB7bnVtYmVyfVxuICAgKi9cbiAgX3Byb3RvLmxlbmd0aCA9IGZ1bmN0aW9uIGxlbmd0aCh1bml0KSB7XG4gICAgaWYgKHVuaXQgPT09IHZvaWQgMCkge1xuICAgICAgdW5pdCA9IFwibWlsbGlzZWNvbmRzXCI7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXMuaXNWYWxpZCA/IHRoaXMudG9EdXJhdGlvbi5hcHBseSh0aGlzLCBbdW5pdF0pLmdldCh1bml0KSA6IE5hTjtcbiAgfVxuICAvKipcbiAgICogUmV0dXJucyB0aGUgY291bnQgb2YgbWludXRlcywgaG91cnMsIGRheXMsIG1vbnRocywgb3IgeWVhcnMgaW5jbHVkZWQgaW4gdGhlIEludGVydmFsLCBldmVuIGluIHBhcnQuXG4gICAqIFVubGlrZSB7QGxpbmsgSW50ZXJ2YWwjbGVuZ3RofSB0aGlzIGNvdW50cyBzZWN0aW9ucyBvZiB0aGUgY2FsZW5kYXIsIG5vdCBwZXJpb2RzIG9mIHRpbWUsIGUuZy4gc3BlY2lmeWluZyAnZGF5J1xuICAgKiBhc2tzICd3aGF0IGRhdGVzIGFyZSBpbmNsdWRlZCBpbiB0aGlzIGludGVydmFsPycsIG5vdCAnaG93IG1hbnkgZGF5cyBsb25nIGlzIHRoaXMgaW50ZXJ2YWw/J1xuICAgKiBAcGFyYW0ge3N0cmluZ30gW3VuaXQ9J21pbGxpc2Vjb25kcyddIC0gdGhlIHVuaXQgb2YgdGltZSB0byBjb3VudC5cbiAgICogQHJldHVybiB7bnVtYmVyfVxuICAgKi9cbiAgO1xuXG4gIF9wcm90by5jb3VudCA9IGZ1bmN0aW9uIGNvdW50KHVuaXQpIHtcbiAgICBpZiAodW5pdCA9PT0gdm9pZCAwKSB7XG4gICAgICB1bml0ID0gXCJtaWxsaXNlY29uZHNcIjtcbiAgICB9XG5cbiAgICBpZiAoIXRoaXMuaXNWYWxpZCkgcmV0dXJuIE5hTjtcbiAgICB2YXIgc3RhcnQgPSB0aGlzLnN0YXJ0LnN0YXJ0T2YodW5pdCksXG4gICAgICAgIGVuZCA9IHRoaXMuZW5kLnN0YXJ0T2YodW5pdCk7XG4gICAgcmV0dXJuIE1hdGguZmxvb3IoZW5kLmRpZmYoc3RhcnQsIHVuaXQpLmdldCh1bml0KSkgKyAxO1xuICB9XG4gIC8qKlxuICAgKiBSZXR1cm5zIHdoZXRoZXIgdGhpcyBJbnRlcnZhbCdzIHN0YXJ0IGFuZCBlbmQgYXJlIGJvdGggaW4gdGhlIHNhbWUgdW5pdCBvZiB0aW1lXG4gICAqIEBwYXJhbSB7c3RyaW5nfSB1bml0IC0gdGhlIHVuaXQgb2YgdGltZSB0byBjaGVjayBzYW1lbmVzcyBvblxuICAgKiBAcmV0dXJuIHtib29sZWFufVxuICAgKi9cbiAgO1xuXG4gIF9wcm90by5oYXNTYW1lID0gZnVuY3Rpb24gaGFzU2FtZSh1bml0KSB7XG4gICAgcmV0dXJuIHRoaXMuaXNWYWxpZCA/IHRoaXMuaXNFbXB0eSgpIHx8IHRoaXMuZS5taW51cygxKS5oYXNTYW1lKHRoaXMucywgdW5pdCkgOiBmYWxzZTtcbiAgfVxuICAvKipcbiAgICogUmV0dXJuIHdoZXRoZXIgdGhpcyBJbnRlcnZhbCBoYXMgdGhlIHNhbWUgc3RhcnQgYW5kIGVuZCBEYXRlVGltZXMuXG4gICAqIEByZXR1cm4ge2Jvb2xlYW59XG4gICAqL1xuICA7XG5cbiAgX3Byb3RvLmlzRW1wdHkgPSBmdW5jdGlvbiBpc0VtcHR5KCkge1xuICAgIHJldHVybiB0aGlzLnMudmFsdWVPZigpID09PSB0aGlzLmUudmFsdWVPZigpO1xuICB9XG4gIC8qKlxuICAgKiBSZXR1cm4gd2hldGhlciB0aGlzIEludGVydmFsJ3Mgc3RhcnQgaXMgYWZ0ZXIgdGhlIHNwZWNpZmllZCBEYXRlVGltZS5cbiAgICogQHBhcmFtIHtEYXRlVGltZX0gZGF0ZVRpbWVcbiAgICogQHJldHVybiB7Ym9vbGVhbn1cbiAgICovXG4gIDtcblxuICBfcHJvdG8uaXNBZnRlciA9IGZ1bmN0aW9uIGlzQWZ0ZXIoZGF0ZVRpbWUpIHtcbiAgICBpZiAoIXRoaXMuaXNWYWxpZCkgcmV0dXJuIGZhbHNlO1xuICAgIHJldHVybiB0aGlzLnMgPiBkYXRlVGltZTtcbiAgfVxuICAvKipcbiAgICogUmV0dXJuIHdoZXRoZXIgdGhpcyBJbnRlcnZhbCdzIGVuZCBpcyBiZWZvcmUgdGhlIHNwZWNpZmllZCBEYXRlVGltZS5cbiAgICogQHBhcmFtIHtEYXRlVGltZX0gZGF0ZVRpbWVcbiAgICogQHJldHVybiB7Ym9vbGVhbn1cbiAgICovXG4gIDtcblxuICBfcHJvdG8uaXNCZWZvcmUgPSBmdW5jdGlvbiBpc0JlZm9yZShkYXRlVGltZSkge1xuICAgIGlmICghdGhpcy5pc1ZhbGlkKSByZXR1cm4gZmFsc2U7XG4gICAgcmV0dXJuIHRoaXMuZSA8PSBkYXRlVGltZTtcbiAgfVxuICAvKipcbiAgICogUmV0dXJuIHdoZXRoZXIgdGhpcyBJbnRlcnZhbCBjb250YWlucyB0aGUgc3BlY2lmaWVkIERhdGVUaW1lLlxuICAgKiBAcGFyYW0ge0RhdGVUaW1lfSBkYXRlVGltZVxuICAgKiBAcmV0dXJuIHtib29sZWFufVxuICAgKi9cbiAgO1xuXG4gIF9wcm90by5jb250YWlucyA9IGZ1bmN0aW9uIGNvbnRhaW5zKGRhdGVUaW1lKSB7XG4gICAgaWYgKCF0aGlzLmlzVmFsaWQpIHJldHVybiBmYWxzZTtcbiAgICByZXR1cm4gdGhpcy5zIDw9IGRhdGVUaW1lICYmIHRoaXMuZSA+IGRhdGVUaW1lO1xuICB9XG4gIC8qKlxuICAgKiBcIlNldHNcIiB0aGUgc3RhcnQgYW5kL29yIGVuZCBkYXRlcy4gUmV0dXJucyBhIG5ld2x5LWNvbnN0cnVjdGVkIEludGVydmFsLlxuICAgKiBAcGFyYW0ge09iamVjdH0gdmFsdWVzIC0gdGhlIHZhbHVlcyB0byBzZXRcbiAgICogQHBhcmFtIHtEYXRlVGltZX0gdmFsdWVzLnN0YXJ0IC0gdGhlIHN0YXJ0aW5nIERhdGVUaW1lXG4gICAqIEBwYXJhbSB7RGF0ZVRpbWV9IHZhbHVlcy5lbmQgLSB0aGUgZW5kaW5nIERhdGVUaW1lXG4gICAqIEByZXR1cm4ge0ludGVydmFsfVxuICAgKi9cbiAgO1xuXG4gIF9wcm90by5zZXQgPSBmdW5jdGlvbiBzZXQoX3RlbXApIHtcbiAgICB2YXIgX3JlZiA9IF90ZW1wID09PSB2b2lkIDAgPyB7fSA6IF90ZW1wLFxuICAgICAgICBzdGFydCA9IF9yZWYuc3RhcnQsXG4gICAgICAgIGVuZCA9IF9yZWYuZW5kO1xuXG4gICAgaWYgKCF0aGlzLmlzVmFsaWQpIHJldHVybiB0aGlzO1xuICAgIHJldHVybiBJbnRlcnZhbC5mcm9tRGF0ZVRpbWVzKHN0YXJ0IHx8IHRoaXMucywgZW5kIHx8IHRoaXMuZSk7XG4gIH1cbiAgLyoqXG4gICAqIFNwbGl0IHRoaXMgSW50ZXJ2YWwgYXQgZWFjaCBvZiB0aGUgc3BlY2lmaWVkIERhdGVUaW1lc1xuICAgKiBAcGFyYW0gey4uLkRhdGVUaW1lfSBkYXRlVGltZXMgLSB0aGUgdW5pdCBvZiB0aW1lIHRvIGNvdW50LlxuICAgKiBAcmV0dXJuIHtBcnJheX1cbiAgICovXG4gIDtcblxuICBfcHJvdG8uc3BsaXRBdCA9IGZ1bmN0aW9uIHNwbGl0QXQoKSB7XG4gICAgdmFyIF90aGlzID0gdGhpcztcblxuICAgIGlmICghdGhpcy5pc1ZhbGlkKSByZXR1cm4gW107XG5cbiAgICBmb3IgKHZhciBfbGVuID0gYXJndW1lbnRzLmxlbmd0aCwgZGF0ZVRpbWVzID0gbmV3IEFycmF5KF9sZW4pLCBfa2V5ID0gMDsgX2tleSA8IF9sZW47IF9rZXkrKykge1xuICAgICAgZGF0ZVRpbWVzW19rZXldID0gYXJndW1lbnRzW19rZXldO1xuICAgIH1cblxuICAgIHZhciBzb3J0ZWQgPSBkYXRlVGltZXMubWFwKGZyaWVuZGx5RGF0ZVRpbWUpLmZpbHRlcihmdW5jdGlvbiAoZCkge1xuICAgICAgcmV0dXJuIF90aGlzLmNvbnRhaW5zKGQpO1xuICAgIH0pLnNvcnQoKSxcbiAgICAgICAgcmVzdWx0cyA9IFtdO1xuICAgIHZhciBzID0gdGhpcy5zLFxuICAgICAgICBpID0gMDtcblxuICAgIHdoaWxlIChzIDwgdGhpcy5lKSB7XG4gICAgICB2YXIgYWRkZWQgPSBzb3J0ZWRbaV0gfHwgdGhpcy5lLFxuICAgICAgICAgIG5leHQgPSArYWRkZWQgPiArdGhpcy5lID8gdGhpcy5lIDogYWRkZWQ7XG4gICAgICByZXN1bHRzLnB1c2goSW50ZXJ2YWwuZnJvbURhdGVUaW1lcyhzLCBuZXh0KSk7XG4gICAgICBzID0gbmV4dDtcbiAgICAgIGkgKz0gMTtcbiAgICB9XG5cbiAgICByZXR1cm4gcmVzdWx0cztcbiAgfVxuICAvKipcbiAgICogU3BsaXQgdGhpcyBJbnRlcnZhbCBpbnRvIHNtYWxsZXIgSW50ZXJ2YWxzLCBlYWNoIG9mIHRoZSBzcGVjaWZpZWQgbGVuZ3RoLlxuICAgKiBMZWZ0IG92ZXIgdGltZSBpcyBncm91cGVkIGludG8gYSBzbWFsbGVyIGludGVydmFsXG4gICAqIEBwYXJhbSB7RHVyYXRpb258T2JqZWN0fG51bWJlcn0gZHVyYXRpb24gLSBUaGUgbGVuZ3RoIG9mIGVhY2ggcmVzdWx0aW5nIGludGVydmFsLlxuICAgKiBAcmV0dXJuIHtBcnJheX1cbiAgICovXG4gIDtcblxuICBfcHJvdG8uc3BsaXRCeSA9IGZ1bmN0aW9uIHNwbGl0QnkoZHVyYXRpb24pIHtcbiAgICB2YXIgZHVyID0gRHVyYXRpb24uZnJvbUR1cmF0aW9uTGlrZShkdXJhdGlvbik7XG5cbiAgICBpZiAoIXRoaXMuaXNWYWxpZCB8fCAhZHVyLmlzVmFsaWQgfHwgZHVyLmFzKFwibWlsbGlzZWNvbmRzXCIpID09PSAwKSB7XG4gICAgICByZXR1cm4gW107XG4gICAgfVxuXG4gICAgdmFyIHMgPSB0aGlzLnMsXG4gICAgICAgIGlkeCA9IDEsXG4gICAgICAgIG5leHQ7XG4gICAgdmFyIHJlc3VsdHMgPSBbXTtcblxuICAgIHdoaWxlIChzIDwgdGhpcy5lKSB7XG4gICAgICB2YXIgYWRkZWQgPSB0aGlzLnN0YXJ0LnBsdXMoZHVyLm1hcFVuaXRzKGZ1bmN0aW9uICh4KSB7XG4gICAgICAgIHJldHVybiB4ICogaWR4O1xuICAgICAgfSkpO1xuICAgICAgbmV4dCA9ICthZGRlZCA+ICt0aGlzLmUgPyB0aGlzLmUgOiBhZGRlZDtcbiAgICAgIHJlc3VsdHMucHVzaChJbnRlcnZhbC5mcm9tRGF0ZVRpbWVzKHMsIG5leHQpKTtcbiAgICAgIHMgPSBuZXh0O1xuICAgICAgaWR4ICs9IDE7XG4gICAgfVxuXG4gICAgcmV0dXJuIHJlc3VsdHM7XG4gIH1cbiAgLyoqXG4gICAqIFNwbGl0IHRoaXMgSW50ZXJ2YWwgaW50byB0aGUgc3BlY2lmaWVkIG51bWJlciBvZiBzbWFsbGVyIGludGVydmFscy5cbiAgICogQHBhcmFtIHtudW1iZXJ9IG51bWJlck9mUGFydHMgLSBUaGUgbnVtYmVyIG9mIEludGVydmFscyB0byBkaXZpZGUgdGhlIEludGVydmFsIGludG8uXG4gICAqIEByZXR1cm4ge0FycmF5fVxuICAgKi9cbiAgO1xuXG4gIF9wcm90by5kaXZpZGVFcXVhbGx5ID0gZnVuY3Rpb24gZGl2aWRlRXF1YWxseShudW1iZXJPZlBhcnRzKSB7XG4gICAgaWYgKCF0aGlzLmlzVmFsaWQpIHJldHVybiBbXTtcbiAgICByZXR1cm4gdGhpcy5zcGxpdEJ5KHRoaXMubGVuZ3RoKCkgLyBudW1iZXJPZlBhcnRzKS5zbGljZSgwLCBudW1iZXJPZlBhcnRzKTtcbiAgfVxuICAvKipcbiAgICogUmV0dXJuIHdoZXRoZXIgdGhpcyBJbnRlcnZhbCBvdmVybGFwcyB3aXRoIHRoZSBzcGVjaWZpZWQgSW50ZXJ2YWxcbiAgICogQHBhcmFtIHtJbnRlcnZhbH0gb3RoZXJcbiAgICogQHJldHVybiB7Ym9vbGVhbn1cbiAgICovXG4gIDtcblxuICBfcHJvdG8ub3ZlcmxhcHMgPSBmdW5jdGlvbiBvdmVybGFwcyhvdGhlcikge1xuICAgIHJldHVybiB0aGlzLmUgPiBvdGhlci5zICYmIHRoaXMucyA8IG90aGVyLmU7XG4gIH1cbiAgLyoqXG4gICAqIFJldHVybiB3aGV0aGVyIHRoaXMgSW50ZXJ2YWwncyBlbmQgaXMgYWRqYWNlbnQgdG8gdGhlIHNwZWNpZmllZCBJbnRlcnZhbCdzIHN0YXJ0LlxuICAgKiBAcGFyYW0ge0ludGVydmFsfSBvdGhlclxuICAgKiBAcmV0dXJuIHtib29sZWFufVxuICAgKi9cbiAgO1xuXG4gIF9wcm90by5hYnV0c1N0YXJ0ID0gZnVuY3Rpb24gYWJ1dHNTdGFydChvdGhlcikge1xuICAgIGlmICghdGhpcy5pc1ZhbGlkKSByZXR1cm4gZmFsc2U7XG4gICAgcmV0dXJuICt0aGlzLmUgPT09ICtvdGhlci5zO1xuICB9XG4gIC8qKlxuICAgKiBSZXR1cm4gd2hldGhlciB0aGlzIEludGVydmFsJ3Mgc3RhcnQgaXMgYWRqYWNlbnQgdG8gdGhlIHNwZWNpZmllZCBJbnRlcnZhbCdzIGVuZC5cbiAgICogQHBhcmFtIHtJbnRlcnZhbH0gb3RoZXJcbiAgICogQHJldHVybiB7Ym9vbGVhbn1cbiAgICovXG4gIDtcblxuICBfcHJvdG8uYWJ1dHNFbmQgPSBmdW5jdGlvbiBhYnV0c0VuZChvdGhlcikge1xuICAgIGlmICghdGhpcy5pc1ZhbGlkKSByZXR1cm4gZmFsc2U7XG4gICAgcmV0dXJuICtvdGhlci5lID09PSArdGhpcy5zO1xuICB9XG4gIC8qKlxuICAgKiBSZXR1cm4gd2hldGhlciB0aGlzIEludGVydmFsIGVuZ3VsZnMgdGhlIHN0YXJ0IGFuZCBlbmQgb2YgdGhlIHNwZWNpZmllZCBJbnRlcnZhbC5cbiAgICogQHBhcmFtIHtJbnRlcnZhbH0gb3RoZXJcbiAgICogQHJldHVybiB7Ym9vbGVhbn1cbiAgICovXG4gIDtcblxuICBfcHJvdG8uZW5ndWxmcyA9IGZ1bmN0aW9uIGVuZ3VsZnMob3RoZXIpIHtcbiAgICBpZiAoIXRoaXMuaXNWYWxpZCkgcmV0dXJuIGZhbHNlO1xuICAgIHJldHVybiB0aGlzLnMgPD0gb3RoZXIucyAmJiB0aGlzLmUgPj0gb3RoZXIuZTtcbiAgfVxuICAvKipcbiAgICogUmV0dXJuIHdoZXRoZXIgdGhpcyBJbnRlcnZhbCBoYXMgdGhlIHNhbWUgc3RhcnQgYW5kIGVuZCBhcyB0aGUgc3BlY2lmaWVkIEludGVydmFsLlxuICAgKiBAcGFyYW0ge0ludGVydmFsfSBvdGhlclxuICAgKiBAcmV0dXJuIHtib29sZWFufVxuICAgKi9cbiAgO1xuXG4gIF9wcm90by5lcXVhbHMgPSBmdW5jdGlvbiBlcXVhbHMob3RoZXIpIHtcbiAgICBpZiAoIXRoaXMuaXNWYWxpZCB8fCAhb3RoZXIuaXNWYWxpZCkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzLnMuZXF1YWxzKG90aGVyLnMpICYmIHRoaXMuZS5lcXVhbHMob3RoZXIuZSk7XG4gIH1cbiAgLyoqXG4gICAqIFJldHVybiBhbiBJbnRlcnZhbCByZXByZXNlbnRpbmcgdGhlIGludGVyc2VjdGlvbiBvZiB0aGlzIEludGVydmFsIGFuZCB0aGUgc3BlY2lmaWVkIEludGVydmFsLlxuICAgKiBTcGVjaWZpY2FsbHksIHRoZSByZXN1bHRpbmcgSW50ZXJ2YWwgaGFzIHRoZSBtYXhpbXVtIHN0YXJ0IHRpbWUgYW5kIHRoZSBtaW5pbXVtIGVuZCB0aW1lIG9mIHRoZSB0d28gSW50ZXJ2YWxzLlxuICAgKiBSZXR1cm5zIG51bGwgaWYgdGhlIGludGVyc2VjdGlvbiBpcyBlbXB0eSwgbWVhbmluZywgdGhlIGludGVydmFscyBkb24ndCBpbnRlcnNlY3QuXG4gICAqIEBwYXJhbSB7SW50ZXJ2YWx9IG90aGVyXG4gICAqIEByZXR1cm4ge0ludGVydmFsfVxuICAgKi9cbiAgO1xuXG4gIF9wcm90by5pbnRlcnNlY3Rpb24gPSBmdW5jdGlvbiBpbnRlcnNlY3Rpb24ob3RoZXIpIHtcbiAgICBpZiAoIXRoaXMuaXNWYWxpZCkgcmV0dXJuIHRoaXM7XG4gICAgdmFyIHMgPSB0aGlzLnMgPiBvdGhlci5zID8gdGhpcy5zIDogb3RoZXIucyxcbiAgICAgICAgZSA9IHRoaXMuZSA8IG90aGVyLmUgPyB0aGlzLmUgOiBvdGhlci5lO1xuXG4gICAgaWYgKHMgPj0gZSkge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBJbnRlcnZhbC5mcm9tRGF0ZVRpbWVzKHMsIGUpO1xuICAgIH1cbiAgfVxuICAvKipcbiAgICogUmV0dXJuIGFuIEludGVydmFsIHJlcHJlc2VudGluZyB0aGUgdW5pb24gb2YgdGhpcyBJbnRlcnZhbCBhbmQgdGhlIHNwZWNpZmllZCBJbnRlcnZhbC5cbiAgICogU3BlY2lmaWNhbGx5LCB0aGUgcmVzdWx0aW5nIEludGVydmFsIGhhcyB0aGUgbWluaW11bSBzdGFydCB0aW1lIGFuZCB0aGUgbWF4aW11bSBlbmQgdGltZSBvZiB0aGUgdHdvIEludGVydmFscy5cbiAgICogQHBhcmFtIHtJbnRlcnZhbH0gb3RoZXJcbiAgICogQHJldHVybiB7SW50ZXJ2YWx9XG4gICAqL1xuICA7XG5cbiAgX3Byb3RvLnVuaW9uID0gZnVuY3Rpb24gdW5pb24ob3RoZXIpIHtcbiAgICBpZiAoIXRoaXMuaXNWYWxpZCkgcmV0dXJuIHRoaXM7XG4gICAgdmFyIHMgPSB0aGlzLnMgPCBvdGhlci5zID8gdGhpcy5zIDogb3RoZXIucyxcbiAgICAgICAgZSA9IHRoaXMuZSA+IG90aGVyLmUgPyB0aGlzLmUgOiBvdGhlci5lO1xuICAgIHJldHVybiBJbnRlcnZhbC5mcm9tRGF0ZVRpbWVzKHMsIGUpO1xuICB9XG4gIC8qKlxuICAgKiBNZXJnZSBhbiBhcnJheSBvZiBJbnRlcnZhbHMgaW50byBhIGVxdWl2YWxlbnQgbWluaW1hbCBzZXQgb2YgSW50ZXJ2YWxzLlxuICAgKiBDb21iaW5lcyBvdmVybGFwcGluZyBhbmQgYWRqYWNlbnQgSW50ZXJ2YWxzLlxuICAgKiBAcGFyYW0ge0FycmF5fSBpbnRlcnZhbHNcbiAgICogQHJldHVybiB7QXJyYXl9XG4gICAqL1xuICA7XG5cbiAgSW50ZXJ2YWwubWVyZ2UgPSBmdW5jdGlvbiBtZXJnZShpbnRlcnZhbHMpIHtcbiAgICB2YXIgX2ludGVydmFscyRzb3J0JHJlZHVjID0gaW50ZXJ2YWxzLnNvcnQoZnVuY3Rpb24gKGEsIGIpIHtcbiAgICAgIHJldHVybiBhLnMgLSBiLnM7XG4gICAgfSkucmVkdWNlKGZ1bmN0aW9uIChfcmVmMiwgaXRlbSkge1xuICAgICAgdmFyIHNvZmFyID0gX3JlZjJbMF0sXG4gICAgICAgICAgY3VycmVudCA9IF9yZWYyWzFdO1xuXG4gICAgICBpZiAoIWN1cnJlbnQpIHtcbiAgICAgICAgcmV0dXJuIFtzb2ZhciwgaXRlbV07XG4gICAgICB9IGVsc2UgaWYgKGN1cnJlbnQub3ZlcmxhcHMoaXRlbSkgfHwgY3VycmVudC5hYnV0c1N0YXJ0KGl0ZW0pKSB7XG4gICAgICAgIHJldHVybiBbc29mYXIsIGN1cnJlbnQudW5pb24oaXRlbSldO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIFtzb2Zhci5jb25jYXQoW2N1cnJlbnRdKSwgaXRlbV07XG4gICAgICB9XG4gICAgfSwgW1tdLCBudWxsXSksXG4gICAgICAgIGZvdW5kID0gX2ludGVydmFscyRzb3J0JHJlZHVjWzBdLFxuICAgICAgICBmaW5hbCA9IF9pbnRlcnZhbHMkc29ydCRyZWR1Y1sxXTtcblxuICAgIGlmIChmaW5hbCkge1xuICAgICAgZm91bmQucHVzaChmaW5hbCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGZvdW5kO1xuICB9XG4gIC8qKlxuICAgKiBSZXR1cm4gYW4gYXJyYXkgb2YgSW50ZXJ2YWxzIHJlcHJlc2VudGluZyB0aGUgc3BhbnMgb2YgdGltZSB0aGF0IG9ubHkgYXBwZWFyIGluIG9uZSBvZiB0aGUgc3BlY2lmaWVkIEludGVydmFscy5cbiAgICogQHBhcmFtIHtBcnJheX0gaW50ZXJ2YWxzXG4gICAqIEByZXR1cm4ge0FycmF5fVxuICAgKi9cbiAgO1xuXG4gIEludGVydmFsLnhvciA9IGZ1bmN0aW9uIHhvcihpbnRlcnZhbHMpIHtcbiAgICB2YXIgX0FycmF5JHByb3RvdHlwZTtcblxuICAgIHZhciBzdGFydCA9IG51bGwsXG4gICAgICAgIGN1cnJlbnRDb3VudCA9IDA7XG5cbiAgICB2YXIgcmVzdWx0cyA9IFtdLFxuICAgICAgICBlbmRzID0gaW50ZXJ2YWxzLm1hcChmdW5jdGlvbiAoaSkge1xuICAgICAgcmV0dXJuIFt7XG4gICAgICAgIHRpbWU6IGkucyxcbiAgICAgICAgdHlwZTogXCJzXCJcbiAgICAgIH0sIHtcbiAgICAgICAgdGltZTogaS5lLFxuICAgICAgICB0eXBlOiBcImVcIlxuICAgICAgfV07XG4gICAgfSksXG4gICAgICAgIGZsYXR0ZW5lZCA9IChfQXJyYXkkcHJvdG90eXBlID0gQXJyYXkucHJvdG90eXBlKS5jb25jYXQuYXBwbHkoX0FycmF5JHByb3RvdHlwZSwgZW5kcyksXG4gICAgICAgIGFyciA9IGZsYXR0ZW5lZC5zb3J0KGZ1bmN0aW9uIChhLCBiKSB7XG4gICAgICByZXR1cm4gYS50aW1lIC0gYi50aW1lO1xuICAgIH0pO1xuXG4gICAgZm9yICh2YXIgX2l0ZXJhdG9yID0gX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXJMb29zZShhcnIpLCBfc3RlcDsgIShfc3RlcCA9IF9pdGVyYXRvcigpKS5kb25lOykge1xuICAgICAgdmFyIGkgPSBfc3RlcC52YWx1ZTtcbiAgICAgIGN1cnJlbnRDb3VudCArPSBpLnR5cGUgPT09IFwic1wiID8gMSA6IC0xO1xuXG4gICAgICBpZiAoY3VycmVudENvdW50ID09PSAxKSB7XG4gICAgICAgIHN0YXJ0ID0gaS50aW1lO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaWYgKHN0YXJ0ICYmICtzdGFydCAhPT0gK2kudGltZSkge1xuICAgICAgICAgIHJlc3VsdHMucHVzaChJbnRlcnZhbC5mcm9tRGF0ZVRpbWVzKHN0YXJ0LCBpLnRpbWUpKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHN0YXJ0ID0gbnVsbDtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gSW50ZXJ2YWwubWVyZ2UocmVzdWx0cyk7XG4gIH1cbiAgLyoqXG4gICAqIFJldHVybiBhbiBJbnRlcnZhbCByZXByZXNlbnRpbmcgdGhlIHNwYW4gb2YgdGltZSBpbiB0aGlzIEludGVydmFsIHRoYXQgZG9lc24ndCBvdmVybGFwIHdpdGggYW55IG9mIHRoZSBzcGVjaWZpZWQgSW50ZXJ2YWxzLlxuICAgKiBAcGFyYW0gey4uLkludGVydmFsfSBpbnRlcnZhbHNcbiAgICogQHJldHVybiB7QXJyYXl9XG4gICAqL1xuICA7XG5cbiAgX3Byb3RvLmRpZmZlcmVuY2UgPSBmdW5jdGlvbiBkaWZmZXJlbmNlKCkge1xuICAgIHZhciBfdGhpczIgPSB0aGlzO1xuXG4gICAgZm9yICh2YXIgX2xlbjIgPSBhcmd1bWVudHMubGVuZ3RoLCBpbnRlcnZhbHMgPSBuZXcgQXJyYXkoX2xlbjIpLCBfa2V5MiA9IDA7IF9rZXkyIDwgX2xlbjI7IF9rZXkyKyspIHtcbiAgICAgIGludGVydmFsc1tfa2V5Ml0gPSBhcmd1bWVudHNbX2tleTJdO1xuICAgIH1cblxuICAgIHJldHVybiBJbnRlcnZhbC54b3IoW3RoaXNdLmNvbmNhdChpbnRlcnZhbHMpKS5tYXAoZnVuY3Rpb24gKGkpIHtcbiAgICAgIHJldHVybiBfdGhpczIuaW50ZXJzZWN0aW9uKGkpO1xuICAgIH0pLmZpbHRlcihmdW5jdGlvbiAoaSkge1xuICAgICAgcmV0dXJuIGkgJiYgIWkuaXNFbXB0eSgpO1xuICAgIH0pO1xuICB9XG4gIC8qKlxuICAgKiBSZXR1cm5zIGEgc3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIHRoaXMgSW50ZXJ2YWwgYXBwcm9wcmlhdGUgZm9yIGRlYnVnZ2luZy5cbiAgICogQHJldHVybiB7c3RyaW5nfVxuICAgKi9cbiAgO1xuXG4gIF9wcm90by50b1N0cmluZyA9IGZ1bmN0aW9uIHRvU3RyaW5nKCkge1xuICAgIGlmICghdGhpcy5pc1ZhbGlkKSByZXR1cm4gSU5WQUxJRCQxO1xuICAgIHJldHVybiBcIltcIiArIHRoaXMucy50b0lTTygpICsgXCIgXFx1MjAxMyBcIiArIHRoaXMuZS50b0lTTygpICsgXCIpXCI7XG4gIH1cbiAgLyoqXG4gICAqIFJldHVybnMgYW4gSVNPIDg2MDEtY29tcGxpYW50IHN0cmluZyByZXByZXNlbnRhdGlvbiBvZiB0aGlzIEludGVydmFsLlxuICAgKiBAc2VlIGh0dHBzOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL0lTT184NjAxI1RpbWVfaW50ZXJ2YWxzXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRzIC0gVGhlIHNhbWUgb3B0aW9ucyBhcyB7QGxpbmsgRGF0ZVRpbWUjdG9JU099XG4gICAqIEByZXR1cm4ge3N0cmluZ31cbiAgICovXG4gIDtcblxuICBfcHJvdG8udG9JU08gPSBmdW5jdGlvbiB0b0lTTyhvcHRzKSB7XG4gICAgaWYgKCF0aGlzLmlzVmFsaWQpIHJldHVybiBJTlZBTElEJDE7XG4gICAgcmV0dXJuIHRoaXMucy50b0lTTyhvcHRzKSArIFwiL1wiICsgdGhpcy5lLnRvSVNPKG9wdHMpO1xuICB9XG4gIC8qKlxuICAgKiBSZXR1cm5zIGFuIElTTyA4NjAxLWNvbXBsaWFudCBzdHJpbmcgcmVwcmVzZW50YXRpb24gb2YgZGF0ZSBvZiB0aGlzIEludGVydmFsLlxuICAgKiBUaGUgdGltZSBjb21wb25lbnRzIGFyZSBpZ25vcmVkLlxuICAgKiBAc2VlIGh0dHBzOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL0lTT184NjAxI1RpbWVfaW50ZXJ2YWxzXG4gICAqIEByZXR1cm4ge3N0cmluZ31cbiAgICovXG4gIDtcblxuICBfcHJvdG8udG9JU09EYXRlID0gZnVuY3Rpb24gdG9JU09EYXRlKCkge1xuICAgIGlmICghdGhpcy5pc1ZhbGlkKSByZXR1cm4gSU5WQUxJRCQxO1xuICAgIHJldHVybiB0aGlzLnMudG9JU09EYXRlKCkgKyBcIi9cIiArIHRoaXMuZS50b0lTT0RhdGUoKTtcbiAgfVxuICAvKipcbiAgICogUmV0dXJucyBhbiBJU08gODYwMS1jb21wbGlhbnQgc3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIHRpbWUgb2YgdGhpcyBJbnRlcnZhbC5cbiAgICogVGhlIGRhdGUgY29tcG9uZW50cyBhcmUgaWdub3JlZC5cbiAgICogQHNlZSBodHRwczovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9JU09fODYwMSNUaW1lX2ludGVydmFsc1xuICAgKiBAcGFyYW0ge09iamVjdH0gb3B0cyAtIFRoZSBzYW1lIG9wdGlvbnMgYXMge0BsaW5rIERhdGVUaW1lI3RvSVNPfVxuICAgKiBAcmV0dXJuIHtzdHJpbmd9XG4gICAqL1xuICA7XG5cbiAgX3Byb3RvLnRvSVNPVGltZSA9IGZ1bmN0aW9uIHRvSVNPVGltZShvcHRzKSB7XG4gICAgaWYgKCF0aGlzLmlzVmFsaWQpIHJldHVybiBJTlZBTElEJDE7XG4gICAgcmV0dXJuIHRoaXMucy50b0lTT1RpbWUob3B0cykgKyBcIi9cIiArIHRoaXMuZS50b0lTT1RpbWUob3B0cyk7XG4gIH1cbiAgLyoqXG4gICAqIFJldHVybnMgYSBzdHJpbmcgcmVwcmVzZW50YXRpb24gb2YgdGhpcyBJbnRlcnZhbCBmb3JtYXR0ZWQgYWNjb3JkaW5nIHRvIHRoZSBzcGVjaWZpZWQgZm9ybWF0IHN0cmluZy5cbiAgICogQHBhcmFtIHtzdHJpbmd9IGRhdGVGb3JtYXQgLSB0aGUgZm9ybWF0IHN0cmluZy4gVGhpcyBzdHJpbmcgZm9ybWF0cyB0aGUgc3RhcnQgYW5kIGVuZCB0aW1lLiBTZWUge0BsaW5rIERhdGVUaW1lI3RvRm9ybWF0fSBmb3IgZGV0YWlscy5cbiAgICogQHBhcmFtIHtPYmplY3R9IG9wdHMgLSBvcHRpb25zXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBbb3B0cy5zZXBhcmF0b3IgPSAgJyDigJMgJ10gLSBhIHNlcGFyYXRvciB0byBwbGFjZSBiZXR3ZWVuIHRoZSBzdGFydCBhbmQgZW5kIHJlcHJlc2VudGF0aW9uc1xuICAgKiBAcmV0dXJuIHtzdHJpbmd9XG4gICAqL1xuICA7XG5cbiAgX3Byb3RvLnRvRm9ybWF0ID0gZnVuY3Rpb24gdG9Gb3JtYXQoZGF0ZUZvcm1hdCwgX3RlbXAyKSB7XG4gICAgdmFyIF9yZWYzID0gX3RlbXAyID09PSB2b2lkIDAgPyB7fSA6IF90ZW1wMixcbiAgICAgICAgX3JlZjMkc2VwYXJhdG9yID0gX3JlZjMuc2VwYXJhdG9yLFxuICAgICAgICBzZXBhcmF0b3IgPSBfcmVmMyRzZXBhcmF0b3IgPT09IHZvaWQgMCA/IFwiIOKAkyBcIiA6IF9yZWYzJHNlcGFyYXRvcjtcblxuICAgIGlmICghdGhpcy5pc1ZhbGlkKSByZXR1cm4gSU5WQUxJRCQxO1xuICAgIHJldHVybiBcIlwiICsgdGhpcy5zLnRvRm9ybWF0KGRhdGVGb3JtYXQpICsgc2VwYXJhdG9yICsgdGhpcy5lLnRvRm9ybWF0KGRhdGVGb3JtYXQpO1xuICB9XG4gIC8qKlxuICAgKiBSZXR1cm4gYSBEdXJhdGlvbiByZXByZXNlbnRpbmcgdGhlIHRpbWUgc3Bhbm5lZCBieSB0aGlzIGludGVydmFsLlxuICAgKiBAcGFyYW0ge3N0cmluZ3xzdHJpbmdbXX0gW3VuaXQ9WydtaWxsaXNlY29uZHMnXV0gLSB0aGUgdW5pdCBvciB1bml0cyAoc3VjaCBhcyAnaG91cnMnIG9yICdkYXlzJykgdG8gaW5jbHVkZSBpbiB0aGUgZHVyYXRpb24uXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRzIC0gb3B0aW9ucyB0aGF0IGFmZmVjdCB0aGUgY3JlYXRpb24gb2YgdGhlIER1cmF0aW9uXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBbb3B0cy5jb252ZXJzaW9uQWNjdXJhY3k9J2Nhc3VhbCddIC0gdGhlIGNvbnZlcnNpb24gc3lzdGVtIHRvIHVzZVxuICAgKiBAZXhhbXBsZSBJbnRlcnZhbC5mcm9tRGF0ZVRpbWVzKGR0MSwgZHQyKS50b0R1cmF0aW9uKCkudG9PYmplY3QoKSAvLz0+IHsgbWlsbGlzZWNvbmRzOiA4ODQ4OTI1NyB9XG4gICAqIEBleGFtcGxlIEludGVydmFsLmZyb21EYXRlVGltZXMoZHQxLCBkdDIpLnRvRHVyYXRpb24oJ2RheXMnKS50b09iamVjdCgpIC8vPT4geyBkYXlzOiAxLjAyNDE4MTIxNTI3Nzc3NzggfVxuICAgKiBAZXhhbXBsZSBJbnRlcnZhbC5mcm9tRGF0ZVRpbWVzKGR0MSwgZHQyKS50b0R1cmF0aW9uKFsnaG91cnMnLCAnbWludXRlcyddKS50b09iamVjdCgpIC8vPT4geyBob3VyczogMjQsIG1pbnV0ZXM6IDM0LjgyMDk1IH1cbiAgICogQGV4YW1wbGUgSW50ZXJ2YWwuZnJvbURhdGVUaW1lcyhkdDEsIGR0MikudG9EdXJhdGlvbihbJ2hvdXJzJywgJ21pbnV0ZXMnLCAnc2Vjb25kcyddKS50b09iamVjdCgpIC8vPT4geyBob3VyczogMjQsIG1pbnV0ZXM6IDM0LCBzZWNvbmRzOiA0OS4yNTcgfVxuICAgKiBAZXhhbXBsZSBJbnRlcnZhbC5mcm9tRGF0ZVRpbWVzKGR0MSwgZHQyKS50b0R1cmF0aW9uKCdzZWNvbmRzJykudG9PYmplY3QoKSAvLz0+IHsgc2Vjb25kczogODg0ODkuMjU3IH1cbiAgICogQHJldHVybiB7RHVyYXRpb259XG4gICAqL1xuICA7XG5cbiAgX3Byb3RvLnRvRHVyYXRpb24gPSBmdW5jdGlvbiB0b0R1cmF0aW9uKHVuaXQsIG9wdHMpIHtcbiAgICBpZiAoIXRoaXMuaXNWYWxpZCkge1xuICAgICAgcmV0dXJuIER1cmF0aW9uLmludmFsaWQodGhpcy5pbnZhbGlkUmVhc29uKTtcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcy5lLmRpZmYodGhpcy5zLCB1bml0LCBvcHRzKTtcbiAgfVxuICAvKipcbiAgICogUnVuIG1hcEZuIG9uIHRoZSBpbnRlcnZhbCBzdGFydCBhbmQgZW5kLCByZXR1cm5pbmcgYSBuZXcgSW50ZXJ2YWwgZnJvbSB0aGUgcmVzdWx0aW5nIERhdGVUaW1lc1xuICAgKiBAcGFyYW0ge2Z1bmN0aW9ufSBtYXBGblxuICAgKiBAcmV0dXJuIHtJbnRlcnZhbH1cbiAgICogQGV4YW1wbGUgSW50ZXJ2YWwuZnJvbURhdGVUaW1lcyhkdDEsIGR0MikubWFwRW5kcG9pbnRzKGVuZHBvaW50ID0+IGVuZHBvaW50LnRvVVRDKCkpXG4gICAqIEBleGFtcGxlIEludGVydmFsLmZyb21EYXRlVGltZXMoZHQxLCBkdDIpLm1hcEVuZHBvaW50cyhlbmRwb2ludCA9PiBlbmRwb2ludC5wbHVzKHsgaG91cnM6IDIgfSkpXG4gICAqL1xuICA7XG5cbiAgX3Byb3RvLm1hcEVuZHBvaW50cyA9IGZ1bmN0aW9uIG1hcEVuZHBvaW50cyhtYXBGbikge1xuICAgIHJldHVybiBJbnRlcnZhbC5mcm9tRGF0ZVRpbWVzKG1hcEZuKHRoaXMucyksIG1hcEZuKHRoaXMuZSkpO1xuICB9O1xuXG4gIF9jcmVhdGVDbGFzcyhJbnRlcnZhbCwgW3tcbiAgICBrZXk6IFwic3RhcnRcIixcbiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgIHJldHVybiB0aGlzLmlzVmFsaWQgPyB0aGlzLnMgOiBudWxsO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRoZSBlbmQgb2YgdGhlIEludGVydmFsXG4gICAgICogQHR5cGUge0RhdGVUaW1lfVxuICAgICAqL1xuXG4gIH0sIHtcbiAgICBrZXk6IFwiZW5kXCIsXG4gICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICByZXR1cm4gdGhpcy5pc1ZhbGlkID8gdGhpcy5lIDogbnVsbDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB3aGV0aGVyIHRoaXMgSW50ZXJ2YWwncyBlbmQgaXMgYXQgbGVhc3QgaXRzIHN0YXJ0LCBtZWFuaW5nIHRoYXQgdGhlIEludGVydmFsIGlzbid0ICdiYWNrd2FyZHMnLlxuICAgICAqIEB0eXBlIHtib29sZWFufVxuICAgICAqL1xuXG4gIH0sIHtcbiAgICBrZXk6IFwiaXNWYWxpZFwiLFxuICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgcmV0dXJuIHRoaXMuaW52YWxpZFJlYXNvbiA9PT0gbnVsbDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyBhbiBlcnJvciBjb2RlIGlmIHRoaXMgSW50ZXJ2YWwgaXMgaW52YWxpZCwgb3IgbnVsbCBpZiB0aGUgSW50ZXJ2YWwgaXMgdmFsaWRcbiAgICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgICAqL1xuXG4gIH0sIHtcbiAgICBrZXk6IFwiaW52YWxpZFJlYXNvblwiLFxuICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgcmV0dXJuIHRoaXMuaW52YWxpZCA/IHRoaXMuaW52YWxpZC5yZWFzb24gOiBudWxsO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGFuIGV4cGxhbmF0aW9uIG9mIHdoeSB0aGlzIEludGVydmFsIGJlY2FtZSBpbnZhbGlkLCBvciBudWxsIGlmIHRoZSBJbnRlcnZhbCBpcyB2YWxpZFxuICAgICAqIEB0eXBlIHtzdHJpbmd9XG4gICAgICovXG5cbiAgfSwge1xuICAgIGtleTogXCJpbnZhbGlkRXhwbGFuYXRpb25cIixcbiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgIHJldHVybiB0aGlzLmludmFsaWQgPyB0aGlzLmludmFsaWQuZXhwbGFuYXRpb24gOiBudWxsO1xuICAgIH1cbiAgfV0pO1xuXG4gIHJldHVybiBJbnRlcnZhbDtcbn0oKTtcblxuLyoqXG4gKiBUaGUgSW5mbyBjbGFzcyBjb250YWlucyBzdGF0aWMgbWV0aG9kcyBmb3IgcmV0cmlldmluZyBnZW5lcmFsIHRpbWUgYW5kIGRhdGUgcmVsYXRlZCBkYXRhLiBGb3IgZXhhbXBsZSwgaXQgaGFzIG1ldGhvZHMgZm9yIGZpbmRpbmcgb3V0IGlmIGEgdGltZSB6b25lIGhhcyBhIERTVCwgZm9yIGxpc3RpbmcgdGhlIG1vbnRocyBpbiBhbnkgc3VwcG9ydGVkIGxvY2FsZSwgYW5kIGZvciBkaXNjb3ZlcmluZyB3aGljaCBvZiBMdXhvbiBmZWF0dXJlcyBhcmUgYXZhaWxhYmxlIGluIHRoZSBjdXJyZW50IGVudmlyb25tZW50LlxuICovXG5cbnZhciBJbmZvID0gLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHtcbiAgZnVuY3Rpb24gSW5mbygpIHt9XG5cbiAgLyoqXG4gICAqIFJldHVybiB3aGV0aGVyIHRoZSBzcGVjaWZpZWQgem9uZSBjb250YWlucyBhIERTVC5cbiAgICogQHBhcmFtIHtzdHJpbmd8Wm9uZX0gW3pvbmU9J2xvY2FsJ10gLSBab25lIHRvIGNoZWNrLiBEZWZhdWx0cyB0byB0aGUgZW52aXJvbm1lbnQncyBsb2NhbCB6b25lLlxuICAgKiBAcmV0dXJuIHtib29sZWFufVxuICAgKi9cbiAgSW5mby5oYXNEU1QgPSBmdW5jdGlvbiBoYXNEU1Qoem9uZSkge1xuICAgIGlmICh6b25lID09PSB2b2lkIDApIHtcbiAgICAgIHpvbmUgPSBTZXR0aW5ncy5kZWZhdWx0Wm9uZTtcbiAgICB9XG5cbiAgICB2YXIgcHJvdG8gPSBEYXRlVGltZS5ub3coKS5zZXRab25lKHpvbmUpLnNldCh7XG4gICAgICBtb250aDogMTJcbiAgICB9KTtcbiAgICByZXR1cm4gIXpvbmUuaXNVbml2ZXJzYWwgJiYgcHJvdG8ub2Zmc2V0ICE9PSBwcm90by5zZXQoe1xuICAgICAgbW9udGg6IDZcbiAgICB9KS5vZmZzZXQ7XG4gIH1cbiAgLyoqXG4gICAqIFJldHVybiB3aGV0aGVyIHRoZSBzcGVjaWZpZWQgem9uZSBpcyBhIHZhbGlkIElBTkEgc3BlY2lmaWVyLlxuICAgKiBAcGFyYW0ge3N0cmluZ30gem9uZSAtIFpvbmUgdG8gY2hlY2tcbiAgICogQHJldHVybiB7Ym9vbGVhbn1cbiAgICovXG4gIDtcblxuICBJbmZvLmlzVmFsaWRJQU5BWm9uZSA9IGZ1bmN0aW9uIGlzVmFsaWRJQU5BWm9uZSh6b25lKSB7XG4gICAgcmV0dXJuIElBTkFab25lLmlzVmFsaWRTcGVjaWZpZXIoem9uZSkgJiYgSUFOQVpvbmUuaXNWYWxpZFpvbmUoem9uZSk7XG4gIH1cbiAgLyoqXG4gICAqIENvbnZlcnRzIHRoZSBpbnB1dCBpbnRvIGEge0BsaW5rIFpvbmV9IGluc3RhbmNlLlxuICAgKlxuICAgKiAqIElmIGBpbnB1dGAgaXMgYWxyZWFkeSBhIFpvbmUgaW5zdGFuY2UsIGl0IGlzIHJldHVybmVkIHVuY2hhbmdlZC5cbiAgICogKiBJZiBgaW5wdXRgIGlzIGEgc3RyaW5nIGNvbnRhaW5pbmcgYSB2YWxpZCB0aW1lIHpvbmUgbmFtZSwgYSBab25lIGluc3RhbmNlXG4gICAqICAgd2l0aCB0aGF0IG5hbWUgaXMgcmV0dXJuZWQuXG4gICAqICogSWYgYGlucHV0YCBpcyBhIHN0cmluZyB0aGF0IGRvZXNuJ3QgcmVmZXIgdG8gYSBrbm93biB0aW1lIHpvbmUsIGEgWm9uZVxuICAgKiAgIGluc3RhbmNlIHdpdGgge0BsaW5rIFpvbmUjaXNWYWxpZH0gPT0gZmFsc2UgaXMgcmV0dXJuZWQuXG4gICAqICogSWYgYGlucHV0IGlzIGEgbnVtYmVyLCBhIFpvbmUgaW5zdGFuY2Ugd2l0aCB0aGUgc3BlY2lmaWVkIGZpeGVkIG9mZnNldFxuICAgKiAgIGluIG1pbnV0ZXMgaXMgcmV0dXJuZWQuXG4gICAqICogSWYgYGlucHV0YCBpcyBgbnVsbGAgb3IgYHVuZGVmaW5lZGAsIHRoZSBkZWZhdWx0IHpvbmUgaXMgcmV0dXJuZWQuXG4gICAqIEBwYXJhbSB7c3RyaW5nfFpvbmV8bnVtYmVyfSBbaW5wdXRdIC0gdGhlIHZhbHVlIHRvIGJlIGNvbnZlcnRlZFxuICAgKiBAcmV0dXJuIHtab25lfVxuICAgKi9cbiAgO1xuXG4gIEluZm8ubm9ybWFsaXplWm9uZSA9IGZ1bmN0aW9uIG5vcm1hbGl6ZVpvbmUkMShpbnB1dCkge1xuICAgIHJldHVybiBub3JtYWxpemVab25lKGlucHV0LCBTZXR0aW5ncy5kZWZhdWx0Wm9uZSk7XG4gIH1cbiAgLyoqXG4gICAqIFJldHVybiBhbiBhcnJheSBvZiBzdGFuZGFsb25lIG1vbnRoIG5hbWVzLlxuICAgKiBAc2VlIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0phdmFTY3JpcHQvUmVmZXJlbmNlL0dsb2JhbF9PYmplY3RzL0RhdGVUaW1lRm9ybWF0XG4gICAqIEBwYXJhbSB7c3RyaW5nfSBbbGVuZ3RoPSdsb25nJ10gLSB0aGUgbGVuZ3RoIG9mIHRoZSBtb250aCByZXByZXNlbnRhdGlvbiwgc3VjaCBhcyBcIm51bWVyaWNcIiwgXCIyLWRpZ2l0XCIsIFwibmFycm93XCIsIFwic2hvcnRcIiwgXCJsb25nXCJcbiAgICogQHBhcmFtIHtPYmplY3R9IG9wdHMgLSBvcHRpb25zXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBbb3B0cy5sb2NhbGVdIC0gdGhlIGxvY2FsZSBjb2RlXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBbb3B0cy5udW1iZXJpbmdTeXN0ZW09bnVsbF0gLSB0aGUgbnVtYmVyaW5nIHN5c3RlbVxuICAgKiBAcGFyYW0ge3N0cmluZ30gW29wdHMubG9jT2JqPW51bGxdIC0gYW4gZXhpc3RpbmcgbG9jYWxlIG9iamVjdCB0byB1c2VcbiAgICogQHBhcmFtIHtzdHJpbmd9IFtvcHRzLm91dHB1dENhbGVuZGFyPSdncmVnb3J5J10gLSB0aGUgY2FsZW5kYXJcbiAgICogQGV4YW1wbGUgSW5mby5tb250aHMoKVswXSAvLz0+ICdKYW51YXJ5J1xuICAgKiBAZXhhbXBsZSBJbmZvLm1vbnRocygnc2hvcnQnKVswXSAvLz0+ICdKYW4nXG4gICAqIEBleGFtcGxlIEluZm8ubW9udGhzKCdudW1lcmljJylbMF0gLy89PiAnMSdcbiAgICogQGV4YW1wbGUgSW5mby5tb250aHMoJ3Nob3J0JywgeyBsb2NhbGU6ICdmci1DQScgfSApWzBdIC8vPT4gJ2phbnYuJ1xuICAgKiBAZXhhbXBsZSBJbmZvLm1vbnRocygnbnVtZXJpYycsIHsgbG9jYWxlOiAnYXInIH0pWzBdIC8vPT4gJ9mhJ1xuICAgKiBAZXhhbXBsZSBJbmZvLm1vbnRocygnbG9uZycsIHsgb3V0cHV0Q2FsZW5kYXI6ICdpc2xhbWljJyB9KVswXSAvLz0+ICdSYWJpyrsgSSdcbiAgICogQHJldHVybiB7QXJyYXl9XG4gICAqL1xuICA7XG5cbiAgSW5mby5tb250aHMgPSBmdW5jdGlvbiBtb250aHMobGVuZ3RoLCBfdGVtcCkge1xuICAgIGlmIChsZW5ndGggPT09IHZvaWQgMCkge1xuICAgICAgbGVuZ3RoID0gXCJsb25nXCI7XG4gICAgfVxuXG4gICAgdmFyIF9yZWYgPSBfdGVtcCA9PT0gdm9pZCAwID8ge30gOiBfdGVtcCxcbiAgICAgICAgX3JlZiRsb2NhbGUgPSBfcmVmLmxvY2FsZSxcbiAgICAgICAgbG9jYWxlID0gX3JlZiRsb2NhbGUgPT09IHZvaWQgMCA/IG51bGwgOiBfcmVmJGxvY2FsZSxcbiAgICAgICAgX3JlZiRudW1iZXJpbmdTeXN0ZW0gPSBfcmVmLm51bWJlcmluZ1N5c3RlbSxcbiAgICAgICAgbnVtYmVyaW5nU3lzdGVtID0gX3JlZiRudW1iZXJpbmdTeXN0ZW0gPT09IHZvaWQgMCA/IG51bGwgOiBfcmVmJG51bWJlcmluZ1N5c3RlbSxcbiAgICAgICAgX3JlZiRsb2NPYmogPSBfcmVmLmxvY09iaixcbiAgICAgICAgbG9jT2JqID0gX3JlZiRsb2NPYmogPT09IHZvaWQgMCA/IG51bGwgOiBfcmVmJGxvY09iaixcbiAgICAgICAgX3JlZiRvdXRwdXRDYWxlbmRhciA9IF9yZWYub3V0cHV0Q2FsZW5kYXIsXG4gICAgICAgIG91dHB1dENhbGVuZGFyID0gX3JlZiRvdXRwdXRDYWxlbmRhciA9PT0gdm9pZCAwID8gXCJncmVnb3J5XCIgOiBfcmVmJG91dHB1dENhbGVuZGFyO1xuXG4gICAgcmV0dXJuIChsb2NPYmogfHwgTG9jYWxlLmNyZWF0ZShsb2NhbGUsIG51bWJlcmluZ1N5c3RlbSwgb3V0cHV0Q2FsZW5kYXIpKS5tb250aHMobGVuZ3RoKTtcbiAgfVxuICAvKipcbiAgICogUmV0dXJuIGFuIGFycmF5IG9mIGZvcm1hdCBtb250aCBuYW1lcy5cbiAgICogRm9ybWF0IG1vbnRocyBkaWZmZXIgZnJvbSBzdGFuZGFsb25lIG1vbnRocyBpbiB0aGF0IHRoZXkncmUgbWVhbnQgdG8gYXBwZWFyIG5leHQgdG8gdGhlIGRheSBvZiB0aGUgbW9udGguIEluIHNvbWUgbGFuZ3VhZ2VzLCB0aGF0XG4gICAqIGNoYW5nZXMgdGhlIHN0cmluZy5cbiAgICogU2VlIHtAbGluayBJbmZvI21vbnRoc31cbiAgICogQHBhcmFtIHtzdHJpbmd9IFtsZW5ndGg9J2xvbmcnXSAtIHRoZSBsZW5ndGggb2YgdGhlIG1vbnRoIHJlcHJlc2VudGF0aW9uLCBzdWNoIGFzIFwibnVtZXJpY1wiLCBcIjItZGlnaXRcIiwgXCJuYXJyb3dcIiwgXCJzaG9ydFwiLCBcImxvbmdcIlxuICAgKiBAcGFyYW0ge09iamVjdH0gb3B0cyAtIG9wdGlvbnNcbiAgICogQHBhcmFtIHtzdHJpbmd9IFtvcHRzLmxvY2FsZV0gLSB0aGUgbG9jYWxlIGNvZGVcbiAgICogQHBhcmFtIHtzdHJpbmd9IFtvcHRzLm51bWJlcmluZ1N5c3RlbT1udWxsXSAtIHRoZSBudW1iZXJpbmcgc3lzdGVtXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBbb3B0cy5sb2NPYmo9bnVsbF0gLSBhbiBleGlzdGluZyBsb2NhbGUgb2JqZWN0IHRvIHVzZVxuICAgKiBAcGFyYW0ge3N0cmluZ30gW29wdHMub3V0cHV0Q2FsZW5kYXI9J2dyZWdvcnknXSAtIHRoZSBjYWxlbmRhclxuICAgKiBAcmV0dXJuIHtBcnJheX1cbiAgICovXG4gIDtcblxuICBJbmZvLm1vbnRoc0Zvcm1hdCA9IGZ1bmN0aW9uIG1vbnRoc0Zvcm1hdChsZW5ndGgsIF90ZW1wMikge1xuICAgIGlmIChsZW5ndGggPT09IHZvaWQgMCkge1xuICAgICAgbGVuZ3RoID0gXCJsb25nXCI7XG4gICAgfVxuXG4gICAgdmFyIF9yZWYyID0gX3RlbXAyID09PSB2b2lkIDAgPyB7fSA6IF90ZW1wMixcbiAgICAgICAgX3JlZjIkbG9jYWxlID0gX3JlZjIubG9jYWxlLFxuICAgICAgICBsb2NhbGUgPSBfcmVmMiRsb2NhbGUgPT09IHZvaWQgMCA/IG51bGwgOiBfcmVmMiRsb2NhbGUsXG4gICAgICAgIF9yZWYyJG51bWJlcmluZ1N5c3RlbSA9IF9yZWYyLm51bWJlcmluZ1N5c3RlbSxcbiAgICAgICAgbnVtYmVyaW5nU3lzdGVtID0gX3JlZjIkbnVtYmVyaW5nU3lzdGVtID09PSB2b2lkIDAgPyBudWxsIDogX3JlZjIkbnVtYmVyaW5nU3lzdGVtLFxuICAgICAgICBfcmVmMiRsb2NPYmogPSBfcmVmMi5sb2NPYmosXG4gICAgICAgIGxvY09iaiA9IF9yZWYyJGxvY09iaiA9PT0gdm9pZCAwID8gbnVsbCA6IF9yZWYyJGxvY09iaixcbiAgICAgICAgX3JlZjIkb3V0cHV0Q2FsZW5kYXIgPSBfcmVmMi5vdXRwdXRDYWxlbmRhcixcbiAgICAgICAgb3V0cHV0Q2FsZW5kYXIgPSBfcmVmMiRvdXRwdXRDYWxlbmRhciA9PT0gdm9pZCAwID8gXCJncmVnb3J5XCIgOiBfcmVmMiRvdXRwdXRDYWxlbmRhcjtcblxuICAgIHJldHVybiAobG9jT2JqIHx8IExvY2FsZS5jcmVhdGUobG9jYWxlLCBudW1iZXJpbmdTeXN0ZW0sIG91dHB1dENhbGVuZGFyKSkubW9udGhzKGxlbmd0aCwgdHJ1ZSk7XG4gIH1cbiAgLyoqXG4gICAqIFJldHVybiBhbiBhcnJheSBvZiBzdGFuZGFsb25lIHdlZWsgbmFtZXMuXG4gICAqIEBzZWUgaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvSmF2YVNjcmlwdC9SZWZlcmVuY2UvR2xvYmFsX09iamVjdHMvRGF0ZVRpbWVGb3JtYXRcbiAgICogQHBhcmFtIHtzdHJpbmd9IFtsZW5ndGg9J2xvbmcnXSAtIHRoZSBsZW5ndGggb2YgdGhlIHdlZWtkYXkgcmVwcmVzZW50YXRpb24sIHN1Y2ggYXMgXCJuYXJyb3dcIiwgXCJzaG9ydFwiLCBcImxvbmdcIi5cbiAgICogQHBhcmFtIHtPYmplY3R9IG9wdHMgLSBvcHRpb25zXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBbb3B0cy5sb2NhbGVdIC0gdGhlIGxvY2FsZSBjb2RlXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBbb3B0cy5udW1iZXJpbmdTeXN0ZW09bnVsbF0gLSB0aGUgbnVtYmVyaW5nIHN5c3RlbVxuICAgKiBAcGFyYW0ge3N0cmluZ30gW29wdHMubG9jT2JqPW51bGxdIC0gYW4gZXhpc3RpbmcgbG9jYWxlIG9iamVjdCB0byB1c2VcbiAgICogQGV4YW1wbGUgSW5mby53ZWVrZGF5cygpWzBdIC8vPT4gJ01vbmRheSdcbiAgICogQGV4YW1wbGUgSW5mby53ZWVrZGF5cygnc2hvcnQnKVswXSAvLz0+ICdNb24nXG4gICAqIEBleGFtcGxlIEluZm8ud2Vla2RheXMoJ3Nob3J0JywgeyBsb2NhbGU6ICdmci1DQScgfSlbMF0gLy89PiAnbHVuLidcbiAgICogQGV4YW1wbGUgSW5mby53ZWVrZGF5cygnc2hvcnQnLCB7IGxvY2FsZTogJ2FyJyB9KVswXSAvLz0+ICfYp9mE2KfYq9mG2YrZhidcbiAgICogQHJldHVybiB7QXJyYXl9XG4gICAqL1xuICA7XG5cbiAgSW5mby53ZWVrZGF5cyA9IGZ1bmN0aW9uIHdlZWtkYXlzKGxlbmd0aCwgX3RlbXAzKSB7XG4gICAgaWYgKGxlbmd0aCA9PT0gdm9pZCAwKSB7XG4gICAgICBsZW5ndGggPSBcImxvbmdcIjtcbiAgICB9XG5cbiAgICB2YXIgX3JlZjMgPSBfdGVtcDMgPT09IHZvaWQgMCA/IHt9IDogX3RlbXAzLFxuICAgICAgICBfcmVmMyRsb2NhbGUgPSBfcmVmMy5sb2NhbGUsXG4gICAgICAgIGxvY2FsZSA9IF9yZWYzJGxvY2FsZSA9PT0gdm9pZCAwID8gbnVsbCA6IF9yZWYzJGxvY2FsZSxcbiAgICAgICAgX3JlZjMkbnVtYmVyaW5nU3lzdGVtID0gX3JlZjMubnVtYmVyaW5nU3lzdGVtLFxuICAgICAgICBudW1iZXJpbmdTeXN0ZW0gPSBfcmVmMyRudW1iZXJpbmdTeXN0ZW0gPT09IHZvaWQgMCA/IG51bGwgOiBfcmVmMyRudW1iZXJpbmdTeXN0ZW0sXG4gICAgICAgIF9yZWYzJGxvY09iaiA9IF9yZWYzLmxvY09iaixcbiAgICAgICAgbG9jT2JqID0gX3JlZjMkbG9jT2JqID09PSB2b2lkIDAgPyBudWxsIDogX3JlZjMkbG9jT2JqO1xuXG4gICAgcmV0dXJuIChsb2NPYmogfHwgTG9jYWxlLmNyZWF0ZShsb2NhbGUsIG51bWJlcmluZ1N5c3RlbSwgbnVsbCkpLndlZWtkYXlzKGxlbmd0aCk7XG4gIH1cbiAgLyoqXG4gICAqIFJldHVybiBhbiBhcnJheSBvZiBmb3JtYXQgd2VlayBuYW1lcy5cbiAgICogRm9ybWF0IHdlZWtkYXlzIGRpZmZlciBmcm9tIHN0YW5kYWxvbmUgd2Vla2RheXMgaW4gdGhhdCB0aGV5J3JlIG1lYW50IHRvIGFwcGVhciBuZXh0IHRvIG1vcmUgZGF0ZSBpbmZvcm1hdGlvbi4gSW4gc29tZSBsYW5ndWFnZXMsIHRoYXRcbiAgICogY2hhbmdlcyB0aGUgc3RyaW5nLlxuICAgKiBTZWUge0BsaW5rIEluZm8jd2Vla2RheXN9XG4gICAqIEBwYXJhbSB7c3RyaW5nfSBbbGVuZ3RoPSdsb25nJ10gLSB0aGUgbGVuZ3RoIG9mIHRoZSBtb250aCByZXByZXNlbnRhdGlvbiwgc3VjaCBhcyBcIm5hcnJvd1wiLCBcInNob3J0XCIsIFwibG9uZ1wiLlxuICAgKiBAcGFyYW0ge09iamVjdH0gb3B0cyAtIG9wdGlvbnNcbiAgICogQHBhcmFtIHtzdHJpbmd9IFtvcHRzLmxvY2FsZT1udWxsXSAtIHRoZSBsb2NhbGUgY29kZVxuICAgKiBAcGFyYW0ge3N0cmluZ30gW29wdHMubnVtYmVyaW5nU3lzdGVtPW51bGxdIC0gdGhlIG51bWJlcmluZyBzeXN0ZW1cbiAgICogQHBhcmFtIHtzdHJpbmd9IFtvcHRzLmxvY09iaj1udWxsXSAtIGFuIGV4aXN0aW5nIGxvY2FsZSBvYmplY3QgdG8gdXNlXG4gICAqIEByZXR1cm4ge0FycmF5fVxuICAgKi9cbiAgO1xuXG4gIEluZm8ud2Vla2RheXNGb3JtYXQgPSBmdW5jdGlvbiB3ZWVrZGF5c0Zvcm1hdChsZW5ndGgsIF90ZW1wNCkge1xuICAgIGlmIChsZW5ndGggPT09IHZvaWQgMCkge1xuICAgICAgbGVuZ3RoID0gXCJsb25nXCI7XG4gICAgfVxuXG4gICAgdmFyIF9yZWY0ID0gX3RlbXA0ID09PSB2b2lkIDAgPyB7fSA6IF90ZW1wNCxcbiAgICAgICAgX3JlZjQkbG9jYWxlID0gX3JlZjQubG9jYWxlLFxuICAgICAgICBsb2NhbGUgPSBfcmVmNCRsb2NhbGUgPT09IHZvaWQgMCA/IG51bGwgOiBfcmVmNCRsb2NhbGUsXG4gICAgICAgIF9yZWY0JG51bWJlcmluZ1N5c3RlbSA9IF9yZWY0Lm51bWJlcmluZ1N5c3RlbSxcbiAgICAgICAgbnVtYmVyaW5nU3lzdGVtID0gX3JlZjQkbnVtYmVyaW5nU3lzdGVtID09PSB2b2lkIDAgPyBudWxsIDogX3JlZjQkbnVtYmVyaW5nU3lzdGVtLFxuICAgICAgICBfcmVmNCRsb2NPYmogPSBfcmVmNC5sb2NPYmosXG4gICAgICAgIGxvY09iaiA9IF9yZWY0JGxvY09iaiA9PT0gdm9pZCAwID8gbnVsbCA6IF9yZWY0JGxvY09iajtcblxuICAgIHJldHVybiAobG9jT2JqIHx8IExvY2FsZS5jcmVhdGUobG9jYWxlLCBudW1iZXJpbmdTeXN0ZW0sIG51bGwpKS53ZWVrZGF5cyhsZW5ndGgsIHRydWUpO1xuICB9XG4gIC8qKlxuICAgKiBSZXR1cm4gYW4gYXJyYXkgb2YgbWVyaWRpZW1zLlxuICAgKiBAcGFyYW0ge09iamVjdH0gb3B0cyAtIG9wdGlvbnNcbiAgICogQHBhcmFtIHtzdHJpbmd9IFtvcHRzLmxvY2FsZV0gLSB0aGUgbG9jYWxlIGNvZGVcbiAgICogQGV4YW1wbGUgSW5mby5tZXJpZGllbXMoKSAvLz0+IFsgJ0FNJywgJ1BNJyBdXG4gICAqIEBleGFtcGxlIEluZm8ubWVyaWRpZW1zKHsgbG9jYWxlOiAnbXknIH0pIC8vPT4gWyAn4YCU4YC24YCU4YCA4YC6JywgJ+GAiuGAlOGAsScgXVxuICAgKiBAcmV0dXJuIHtBcnJheX1cbiAgICovXG4gIDtcblxuICBJbmZvLm1lcmlkaWVtcyA9IGZ1bmN0aW9uIG1lcmlkaWVtcyhfdGVtcDUpIHtcbiAgICB2YXIgX3JlZjUgPSBfdGVtcDUgPT09IHZvaWQgMCA/IHt9IDogX3RlbXA1LFxuICAgICAgICBfcmVmNSRsb2NhbGUgPSBfcmVmNS5sb2NhbGUsXG4gICAgICAgIGxvY2FsZSA9IF9yZWY1JGxvY2FsZSA9PT0gdm9pZCAwID8gbnVsbCA6IF9yZWY1JGxvY2FsZTtcblxuICAgIHJldHVybiBMb2NhbGUuY3JlYXRlKGxvY2FsZSkubWVyaWRpZW1zKCk7XG4gIH1cbiAgLyoqXG4gICAqIFJldHVybiBhbiBhcnJheSBvZiBlcmFzLCBzdWNoIGFzIFsnQkMnLCAnQUQnXS4gVGhlIGxvY2FsZSBjYW4gYmUgc3BlY2lmaWVkLCBidXQgdGhlIGNhbGVuZGFyIHN5c3RlbSBpcyBhbHdheXMgR3JlZ29yaWFuLlxuICAgKiBAcGFyYW0ge3N0cmluZ30gW2xlbmd0aD0nc2hvcnQnXSAtIHRoZSBsZW5ndGggb2YgdGhlIGVyYSByZXByZXNlbnRhdGlvbiwgc3VjaCBhcyBcInNob3J0XCIgb3IgXCJsb25nXCIuXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRzIC0gb3B0aW9uc1xuICAgKiBAcGFyYW0ge3N0cmluZ30gW29wdHMubG9jYWxlXSAtIHRoZSBsb2NhbGUgY29kZVxuICAgKiBAZXhhbXBsZSBJbmZvLmVyYXMoKSAvLz0+IFsgJ0JDJywgJ0FEJyBdXG4gICAqIEBleGFtcGxlIEluZm8uZXJhcygnbG9uZycpIC8vPT4gWyAnQmVmb3JlIENocmlzdCcsICdBbm5vIERvbWluaScgXVxuICAgKiBAZXhhbXBsZSBJbmZvLmVyYXMoJ2xvbmcnLCB7IGxvY2FsZTogJ2ZyJyB9KSAvLz0+IFsgJ2F2YW50IErDqXN1cy1DaHJpc3QnLCAnYXByw6hzIErDqXN1cy1DaHJpc3QnIF1cbiAgICogQHJldHVybiB7QXJyYXl9XG4gICAqL1xuICA7XG5cbiAgSW5mby5lcmFzID0gZnVuY3Rpb24gZXJhcyhsZW5ndGgsIF90ZW1wNikge1xuICAgIGlmIChsZW5ndGggPT09IHZvaWQgMCkge1xuICAgICAgbGVuZ3RoID0gXCJzaG9ydFwiO1xuICAgIH1cblxuICAgIHZhciBfcmVmNiA9IF90ZW1wNiA9PT0gdm9pZCAwID8ge30gOiBfdGVtcDYsXG4gICAgICAgIF9yZWY2JGxvY2FsZSA9IF9yZWY2LmxvY2FsZSxcbiAgICAgICAgbG9jYWxlID0gX3JlZjYkbG9jYWxlID09PSB2b2lkIDAgPyBudWxsIDogX3JlZjYkbG9jYWxlO1xuXG4gICAgcmV0dXJuIExvY2FsZS5jcmVhdGUobG9jYWxlLCBudWxsLCBcImdyZWdvcnlcIikuZXJhcyhsZW5ndGgpO1xuICB9XG4gIC8qKlxuICAgKiBSZXR1cm4gdGhlIHNldCBvZiBhdmFpbGFibGUgZmVhdHVyZXMgaW4gdGhpcyBlbnZpcm9ubWVudC5cbiAgICogU29tZSBmZWF0dXJlcyBvZiBMdXhvbiBhcmUgbm90IGF2YWlsYWJsZSBpbiBhbGwgZW52aXJvbm1lbnRzLiBGb3IgZXhhbXBsZSwgb24gb2xkZXIgYnJvd3NlcnMsIHJlbGF0aXZlIHRpbWUgZm9ybWF0dGluZyBzdXBwb3J0IGlzIG5vdCBhdmFpbGFibGUuIFVzZSB0aGlzIGZ1bmN0aW9uIHRvIGZpZ3VyZSBvdXQgaWYgdGhhdCdzIHRoZSBjYXNlLlxuICAgKiBLZXlzOlxuICAgKiAqIGByZWxhdGl2ZWA6IHdoZXRoZXIgdGhpcyBlbnZpcm9ubWVudCBzdXBwb3J0cyByZWxhdGl2ZSB0aW1lIGZvcm1hdHRpbmdcbiAgICogQGV4YW1wbGUgSW5mby5mZWF0dXJlcygpIC8vPT4geyByZWxhdGl2ZTogZmFsc2UgfVxuICAgKiBAcmV0dXJuIHtPYmplY3R9XG4gICAqL1xuICA7XG5cbiAgSW5mby5mZWF0dXJlcyA9IGZ1bmN0aW9uIGZlYXR1cmVzKCkge1xuICAgIHJldHVybiB7XG4gICAgICByZWxhdGl2ZTogaGFzUmVsYXRpdmUoKVxuICAgIH07XG4gIH07XG5cbiAgcmV0dXJuIEluZm87XG59KCk7XG5cbmZ1bmN0aW9uIGRheURpZmYoZWFybGllciwgbGF0ZXIpIHtcbiAgdmFyIHV0Y0RheVN0YXJ0ID0gZnVuY3Rpb24gdXRjRGF5U3RhcnQoZHQpIHtcbiAgICByZXR1cm4gZHQudG9VVEMoMCwge1xuICAgICAga2VlcExvY2FsVGltZTogdHJ1ZVxuICAgIH0pLnN0YXJ0T2YoXCJkYXlcIikudmFsdWVPZigpO1xuICB9LFxuICAgICAgbXMgPSB1dGNEYXlTdGFydChsYXRlcikgLSB1dGNEYXlTdGFydChlYXJsaWVyKTtcblxuICByZXR1cm4gTWF0aC5mbG9vcihEdXJhdGlvbi5mcm9tTWlsbGlzKG1zKS5hcyhcImRheXNcIikpO1xufVxuXG5mdW5jdGlvbiBoaWdoT3JkZXJEaWZmcyhjdXJzb3IsIGxhdGVyLCB1bml0cykge1xuICB2YXIgZGlmZmVycyA9IFtbXCJ5ZWFyc1wiLCBmdW5jdGlvbiAoYSwgYikge1xuICAgIHJldHVybiBiLnllYXIgLSBhLnllYXI7XG4gIH1dLCBbXCJxdWFydGVyc1wiLCBmdW5jdGlvbiAoYSwgYikge1xuICAgIHJldHVybiBiLnF1YXJ0ZXIgLSBhLnF1YXJ0ZXI7XG4gIH1dLCBbXCJtb250aHNcIiwgZnVuY3Rpb24gKGEsIGIpIHtcbiAgICByZXR1cm4gYi5tb250aCAtIGEubW9udGggKyAoYi55ZWFyIC0gYS55ZWFyKSAqIDEyO1xuICB9XSwgW1wid2Vla3NcIiwgZnVuY3Rpb24gKGEsIGIpIHtcbiAgICB2YXIgZGF5cyA9IGRheURpZmYoYSwgYik7XG4gICAgcmV0dXJuIChkYXlzIC0gZGF5cyAlIDcpIC8gNztcbiAgfV0sIFtcImRheXNcIiwgZGF5RGlmZl1dO1xuICB2YXIgcmVzdWx0cyA9IHt9O1xuICB2YXIgbG93ZXN0T3JkZXIsIGhpZ2hXYXRlcjtcblxuICBmb3IgKHZhciBfaSA9IDAsIF9kaWZmZXJzID0gZGlmZmVyczsgX2kgPCBfZGlmZmVycy5sZW5ndGg7IF9pKyspIHtcbiAgICB2YXIgX2RpZmZlcnMkX2kgPSBfZGlmZmVyc1tfaV0sXG4gICAgICAgIHVuaXQgPSBfZGlmZmVycyRfaVswXSxcbiAgICAgICAgZGlmZmVyID0gX2RpZmZlcnMkX2lbMV07XG5cbiAgICBpZiAodW5pdHMuaW5kZXhPZih1bml0KSA+PSAwKSB7XG4gICAgICB2YXIgX2N1cnNvciRwbHVzO1xuXG4gICAgICBsb3dlc3RPcmRlciA9IHVuaXQ7XG4gICAgICB2YXIgZGVsdGEgPSBkaWZmZXIoY3Vyc29yLCBsYXRlcik7XG4gICAgICBoaWdoV2F0ZXIgPSBjdXJzb3IucGx1cygoX2N1cnNvciRwbHVzID0ge30sIF9jdXJzb3IkcGx1c1t1bml0XSA9IGRlbHRhLCBfY3Vyc29yJHBsdXMpKTtcblxuICAgICAgaWYgKGhpZ2hXYXRlciA+IGxhdGVyKSB7XG4gICAgICAgIHZhciBfY3Vyc29yJHBsdXMyO1xuXG4gICAgICAgIGN1cnNvciA9IGN1cnNvci5wbHVzKChfY3Vyc29yJHBsdXMyID0ge30sIF9jdXJzb3IkcGx1czJbdW5pdF0gPSBkZWx0YSAtIDEsIF9jdXJzb3IkcGx1czIpKTtcbiAgICAgICAgZGVsdGEgLT0gMTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGN1cnNvciA9IGhpZ2hXYXRlcjtcbiAgICAgIH1cblxuICAgICAgcmVzdWx0c1t1bml0XSA9IGRlbHRhO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiBbY3Vyc29yLCByZXN1bHRzLCBoaWdoV2F0ZXIsIGxvd2VzdE9yZGVyXTtcbn1cblxuZnVuY3Rpb24gX2RpZmYgKGVhcmxpZXIsIGxhdGVyLCB1bml0cywgb3B0cykge1xuICB2YXIgX2hpZ2hPcmRlckRpZmZzID0gaGlnaE9yZGVyRGlmZnMoZWFybGllciwgbGF0ZXIsIHVuaXRzKSxcbiAgICAgIGN1cnNvciA9IF9oaWdoT3JkZXJEaWZmc1swXSxcbiAgICAgIHJlc3VsdHMgPSBfaGlnaE9yZGVyRGlmZnNbMV0sXG4gICAgICBoaWdoV2F0ZXIgPSBfaGlnaE9yZGVyRGlmZnNbMl0sXG4gICAgICBsb3dlc3RPcmRlciA9IF9oaWdoT3JkZXJEaWZmc1szXTtcblxuICB2YXIgcmVtYWluaW5nTWlsbGlzID0gbGF0ZXIgLSBjdXJzb3I7XG4gIHZhciBsb3dlck9yZGVyVW5pdHMgPSB1bml0cy5maWx0ZXIoZnVuY3Rpb24gKHUpIHtcbiAgICByZXR1cm4gW1wiaG91cnNcIiwgXCJtaW51dGVzXCIsIFwic2Vjb25kc1wiLCBcIm1pbGxpc2Vjb25kc1wiXS5pbmRleE9mKHUpID49IDA7XG4gIH0pO1xuXG4gIGlmIChsb3dlck9yZGVyVW5pdHMubGVuZ3RoID09PSAwKSB7XG4gICAgaWYgKGhpZ2hXYXRlciA8IGxhdGVyKSB7XG4gICAgICB2YXIgX2N1cnNvciRwbHVzMztcblxuICAgICAgaGlnaFdhdGVyID0gY3Vyc29yLnBsdXMoKF9jdXJzb3IkcGx1czMgPSB7fSwgX2N1cnNvciRwbHVzM1tsb3dlc3RPcmRlcl0gPSAxLCBfY3Vyc29yJHBsdXMzKSk7XG4gICAgfVxuXG4gICAgaWYgKGhpZ2hXYXRlciAhPT0gY3Vyc29yKSB7XG4gICAgICByZXN1bHRzW2xvd2VzdE9yZGVyXSA9IChyZXN1bHRzW2xvd2VzdE9yZGVyXSB8fCAwKSArIHJlbWFpbmluZ01pbGxpcyAvIChoaWdoV2F0ZXIgLSBjdXJzb3IpO1xuICAgIH1cbiAgfVxuXG4gIHZhciBkdXJhdGlvbiA9IER1cmF0aW9uLmZyb21PYmplY3QocmVzdWx0cywgb3B0cyk7XG5cbiAgaWYgKGxvd2VyT3JkZXJVbml0cy5sZW5ndGggPiAwKSB7XG4gICAgdmFyIF9EdXJhdGlvbiRmcm9tTWlsbGlzO1xuXG4gICAgcmV0dXJuIChfRHVyYXRpb24kZnJvbU1pbGxpcyA9IER1cmF0aW9uLmZyb21NaWxsaXMocmVtYWluaW5nTWlsbGlzLCBvcHRzKSkuc2hpZnRUby5hcHBseShfRHVyYXRpb24kZnJvbU1pbGxpcywgbG93ZXJPcmRlclVuaXRzKS5wbHVzKGR1cmF0aW9uKTtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gZHVyYXRpb247XG4gIH1cbn1cblxudmFyIG51bWJlcmluZ1N5c3RlbXMgPSB7XG4gIGFyYWI6IFwiW1xcdTA2NjAtXFx1MDY2OV1cIixcbiAgYXJhYmV4dDogXCJbXFx1MDZGMC1cXHUwNkY5XVwiLFxuICBiYWxpOiBcIltcXHUxQjUwLVxcdTFCNTldXCIsXG4gIGJlbmc6IFwiW1xcdTA5RTYtXFx1MDlFRl1cIixcbiAgZGV2YTogXCJbXFx1MDk2Ni1cXHUwOTZGXVwiLFxuICBmdWxsd2lkZTogXCJbXFx1RkYxMC1cXHVGRjE5XVwiLFxuICBndWpyOiBcIltcXHUwQUU2LVxcdTBBRUZdXCIsXG4gIGhhbmlkZWM6IFwiW+OAh3zkuIB85LqMfOS4iXzlm5t85LqUfOWFrXzkuIN85YWrfOS5nV1cIixcbiAga2htcjogXCJbXFx1MTdFMC1cXHUxN0U5XVwiLFxuICBrbmRhOiBcIltcXHUwQ0U2LVxcdTBDRUZdXCIsXG4gIGxhb286IFwiW1xcdTBFRDAtXFx1MEVEOV1cIixcbiAgbGltYjogXCJbXFx1MTk0Ni1cXHUxOTRGXVwiLFxuICBtbHltOiBcIltcXHUwRDY2LVxcdTBENkZdXCIsXG4gIG1vbmc6IFwiW1xcdTE4MTAtXFx1MTgxOV1cIixcbiAgbXltcjogXCJbXFx1MTA0MC1cXHUxMDQ5XVwiLFxuICBvcnlhOiBcIltcXHUwQjY2LVxcdTBCNkZdXCIsXG4gIHRhbWxkZWM6IFwiW1xcdTBCRTYtXFx1MEJFRl1cIixcbiAgdGVsdTogXCJbXFx1MEM2Ni1cXHUwQzZGXVwiLFxuICB0aGFpOiBcIltcXHUwRTUwLVxcdTBFNTldXCIsXG4gIHRpYnQ6IFwiW1xcdTBGMjAtXFx1MEYyOV1cIixcbiAgbGF0bjogXCJcXFxcZFwiXG59O1xudmFyIG51bWJlcmluZ1N5c3RlbXNVVEYxNiA9IHtcbiAgYXJhYjogWzE2MzIsIDE2NDFdLFxuICBhcmFiZXh0OiBbMTc3NiwgMTc4NV0sXG4gIGJhbGk6IFs2OTkyLCA3MDAxXSxcbiAgYmVuZzogWzI1MzQsIDI1NDNdLFxuICBkZXZhOiBbMjQwNiwgMjQxNV0sXG4gIGZ1bGx3aWRlOiBbNjUyOTYsIDY1MzAzXSxcbiAgZ3VqcjogWzI3OTAsIDI3OTldLFxuICBraG1yOiBbNjExMiwgNjEyMV0sXG4gIGtuZGE6IFszMzAyLCAzMzExXSxcbiAgbGFvbzogWzM3OTIsIDM4MDFdLFxuICBsaW1iOiBbNjQ3MCwgNjQ3OV0sXG4gIG1seW06IFszNDMwLCAzNDM5XSxcbiAgbW9uZzogWzYxNjAsIDYxNjldLFxuICBteW1yOiBbNDE2MCwgNDE2OV0sXG4gIG9yeWE6IFsyOTE4LCAyOTI3XSxcbiAgdGFtbGRlYzogWzMwNDYsIDMwNTVdLFxuICB0ZWx1OiBbMzE3NCwgMzE4M10sXG4gIHRoYWk6IFszNjY0LCAzNjczXSxcbiAgdGlidDogWzM4NzIsIDM4ODFdXG59O1xudmFyIGhhbmlkZWNDaGFycyA9IG51bWJlcmluZ1N5c3RlbXMuaGFuaWRlYy5yZXBsYWNlKC9bXFxbfFxcXV0vZywgXCJcIikuc3BsaXQoXCJcIik7XG5mdW5jdGlvbiBwYXJzZURpZ2l0cyhzdHIpIHtcbiAgdmFyIHZhbHVlID0gcGFyc2VJbnQoc3RyLCAxMCk7XG5cbiAgaWYgKGlzTmFOKHZhbHVlKSkge1xuICAgIHZhbHVlID0gXCJcIjtcblxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgc3RyLmxlbmd0aDsgaSsrKSB7XG4gICAgICB2YXIgY29kZSA9IHN0ci5jaGFyQ29kZUF0KGkpO1xuXG4gICAgICBpZiAoc3RyW2ldLnNlYXJjaChudW1iZXJpbmdTeXN0ZW1zLmhhbmlkZWMpICE9PSAtMSkge1xuICAgICAgICB2YWx1ZSArPSBoYW5pZGVjQ2hhcnMuaW5kZXhPZihzdHJbaV0pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZm9yICh2YXIga2V5IGluIG51bWJlcmluZ1N5c3RlbXNVVEYxNikge1xuICAgICAgICAgIHZhciBfbnVtYmVyaW5nU3lzdGVtc1VURiA9IG51bWJlcmluZ1N5c3RlbXNVVEYxNltrZXldLFxuICAgICAgICAgICAgICBtaW4gPSBfbnVtYmVyaW5nU3lzdGVtc1VURlswXSxcbiAgICAgICAgICAgICAgbWF4ID0gX251bWJlcmluZ1N5c3RlbXNVVEZbMV07XG5cbiAgICAgICAgICBpZiAoY29kZSA+PSBtaW4gJiYgY29kZSA8PSBtYXgpIHtcbiAgICAgICAgICAgIHZhbHVlICs9IGNvZGUgLSBtaW47XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHBhcnNlSW50KHZhbHVlLCAxMCk7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIHZhbHVlO1xuICB9XG59XG5mdW5jdGlvbiBkaWdpdFJlZ2V4KF9yZWYsIGFwcGVuZCkge1xuICB2YXIgbnVtYmVyaW5nU3lzdGVtID0gX3JlZi5udW1iZXJpbmdTeXN0ZW07XG5cbiAgaWYgKGFwcGVuZCA9PT0gdm9pZCAwKSB7XG4gICAgYXBwZW5kID0gXCJcIjtcbiAgfVxuXG4gIHJldHVybiBuZXcgUmVnRXhwKFwiXCIgKyBudW1iZXJpbmdTeXN0ZW1zW251bWJlcmluZ1N5c3RlbSB8fCBcImxhdG5cIl0gKyBhcHBlbmQpO1xufVxuXG52YXIgTUlTU0lOR19GVFAgPSBcIm1pc3NpbmcgSW50bC5EYXRlVGltZUZvcm1hdC5mb3JtYXRUb1BhcnRzIHN1cHBvcnRcIjtcblxuZnVuY3Rpb24gaW50VW5pdChyZWdleCwgcG9zdCkge1xuICBpZiAocG9zdCA9PT0gdm9pZCAwKSB7XG4gICAgcG9zdCA9IGZ1bmN0aW9uIHBvc3QoaSkge1xuICAgICAgcmV0dXJuIGk7XG4gICAgfTtcbiAgfVxuXG4gIHJldHVybiB7XG4gICAgcmVnZXg6IHJlZ2V4LFxuICAgIGRlc2VyOiBmdW5jdGlvbiBkZXNlcihfcmVmKSB7XG4gICAgICB2YXIgcyA9IF9yZWZbMF07XG4gICAgICByZXR1cm4gcG9zdChwYXJzZURpZ2l0cyhzKSk7XG4gICAgfVxuICB9O1xufVxuXG52YXIgTkJTUCA9IFN0cmluZy5mcm9tQ2hhckNvZGUoMTYwKTtcbnZhciBzcGFjZU9yTkJTUCA9IFwiKCB8XCIgKyBOQlNQICsgXCIpXCI7XG52YXIgc3BhY2VPck5CU1BSZWdFeHAgPSBuZXcgUmVnRXhwKHNwYWNlT3JOQlNQLCBcImdcIik7XG5cbmZ1bmN0aW9uIGZpeExpc3RSZWdleChzKSB7XG4gIC8vIG1ha2UgZG90cyBvcHRpb25hbCBhbmQgYWxzbyBtYWtlIHRoZW0gbGl0ZXJhbFxuICAvLyBtYWtlIHNwYWNlIGFuZCBub24gYnJlYWthYmxlIHNwYWNlIGNoYXJhY3RlcnMgaW50ZXJjaGFuZ2VhYmxlXG4gIHJldHVybiBzLnJlcGxhY2UoL1xcLi9nLCBcIlxcXFwuP1wiKS5yZXBsYWNlKHNwYWNlT3JOQlNQUmVnRXhwLCBzcGFjZU9yTkJTUCk7XG59XG5cbmZ1bmN0aW9uIHN0cmlwSW5zZW5zaXRpdml0aWVzKHMpIHtcbiAgcmV0dXJuIHMucmVwbGFjZSgvXFwuL2csIFwiXCIpIC8vIGlnbm9yZSBkb3RzIHRoYXQgd2VyZSBtYWRlIG9wdGlvbmFsXG4gIC5yZXBsYWNlKHNwYWNlT3JOQlNQUmVnRXhwLCBcIiBcIikgLy8gaW50ZXJjaGFuZ2Ugc3BhY2UgYW5kIG5ic3BcbiAgLnRvTG93ZXJDYXNlKCk7XG59XG5cbmZ1bmN0aW9uIG9uZU9mKHN0cmluZ3MsIHN0YXJ0SW5kZXgpIHtcbiAgaWYgKHN0cmluZ3MgPT09IG51bGwpIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4ge1xuICAgICAgcmVnZXg6IFJlZ0V4cChzdHJpbmdzLm1hcChmaXhMaXN0UmVnZXgpLmpvaW4oXCJ8XCIpKSxcbiAgICAgIGRlc2VyOiBmdW5jdGlvbiBkZXNlcihfcmVmMikge1xuICAgICAgICB2YXIgcyA9IF9yZWYyWzBdO1xuICAgICAgICByZXR1cm4gc3RyaW5ncy5maW5kSW5kZXgoZnVuY3Rpb24gKGkpIHtcbiAgICAgICAgICByZXR1cm4gc3RyaXBJbnNlbnNpdGl2aXRpZXMocykgPT09IHN0cmlwSW5zZW5zaXRpdml0aWVzKGkpO1xuICAgICAgICB9KSArIHN0YXJ0SW5kZXg7XG4gICAgICB9XG4gICAgfTtcbiAgfVxufVxuXG5mdW5jdGlvbiBvZmZzZXQocmVnZXgsIGdyb3Vwcykge1xuICByZXR1cm4ge1xuICAgIHJlZ2V4OiByZWdleCxcbiAgICBkZXNlcjogZnVuY3Rpb24gZGVzZXIoX3JlZjMpIHtcbiAgICAgIHZhciBoID0gX3JlZjNbMV0sXG4gICAgICAgICAgbSA9IF9yZWYzWzJdO1xuICAgICAgcmV0dXJuIHNpZ25lZE9mZnNldChoLCBtKTtcbiAgICB9LFxuICAgIGdyb3VwczogZ3JvdXBzXG4gIH07XG59XG5cbmZ1bmN0aW9uIHNpbXBsZShyZWdleCkge1xuICByZXR1cm4ge1xuICAgIHJlZ2V4OiByZWdleCxcbiAgICBkZXNlcjogZnVuY3Rpb24gZGVzZXIoX3JlZjQpIHtcbiAgICAgIHZhciBzID0gX3JlZjRbMF07XG4gICAgICByZXR1cm4gcztcbiAgICB9XG4gIH07XG59XG5cbmZ1bmN0aW9uIGVzY2FwZVRva2VuKHZhbHVlKSB7XG4gIHJldHVybiB2YWx1ZS5yZXBsYWNlKC9bXFwtXFxbXFxde30oKSorPy4sXFxcXFxcXiR8I1xcc10vZywgXCJcXFxcJCZcIik7XG59XG5cbmZ1bmN0aW9uIHVuaXRGb3JUb2tlbih0b2tlbiwgbG9jKSB7XG4gIHZhciBvbmUgPSBkaWdpdFJlZ2V4KGxvYyksXG4gICAgICB0d28gPSBkaWdpdFJlZ2V4KGxvYywgXCJ7Mn1cIiksXG4gICAgICB0aHJlZSA9IGRpZ2l0UmVnZXgobG9jLCBcInszfVwiKSxcbiAgICAgIGZvdXIgPSBkaWdpdFJlZ2V4KGxvYywgXCJ7NH1cIiksXG4gICAgICBzaXggPSBkaWdpdFJlZ2V4KGxvYywgXCJ7Nn1cIiksXG4gICAgICBvbmVPclR3byA9IGRpZ2l0UmVnZXgobG9jLCBcInsxLDJ9XCIpLFxuICAgICAgb25lVG9UaHJlZSA9IGRpZ2l0UmVnZXgobG9jLCBcInsxLDN9XCIpLFxuICAgICAgb25lVG9TaXggPSBkaWdpdFJlZ2V4KGxvYywgXCJ7MSw2fVwiKSxcbiAgICAgIG9uZVRvTmluZSA9IGRpZ2l0UmVnZXgobG9jLCBcInsxLDl9XCIpLFxuICAgICAgdHdvVG9Gb3VyID0gZGlnaXRSZWdleChsb2MsIFwiezIsNH1cIiksXG4gICAgICBmb3VyVG9TaXggPSBkaWdpdFJlZ2V4KGxvYywgXCJ7NCw2fVwiKSxcbiAgICAgIGxpdGVyYWwgPSBmdW5jdGlvbiBsaXRlcmFsKHQpIHtcbiAgICByZXR1cm4ge1xuICAgICAgcmVnZXg6IFJlZ0V4cChlc2NhcGVUb2tlbih0LnZhbCkpLFxuICAgICAgZGVzZXI6IGZ1bmN0aW9uIGRlc2VyKF9yZWY1KSB7XG4gICAgICAgIHZhciBzID0gX3JlZjVbMF07XG4gICAgICAgIHJldHVybiBzO1xuICAgICAgfSxcbiAgICAgIGxpdGVyYWw6IHRydWVcbiAgICB9O1xuICB9LFxuICAgICAgdW5pdGF0ZSA9IGZ1bmN0aW9uIHVuaXRhdGUodCkge1xuICAgIGlmICh0b2tlbi5saXRlcmFsKSB7XG4gICAgICByZXR1cm4gbGl0ZXJhbCh0KTtcbiAgICB9XG5cbiAgICBzd2l0Y2ggKHQudmFsKSB7XG4gICAgICAvLyBlcmFcbiAgICAgIGNhc2UgXCJHXCI6XG4gICAgICAgIHJldHVybiBvbmVPZihsb2MuZXJhcyhcInNob3J0XCIsIGZhbHNlKSwgMCk7XG5cbiAgICAgIGNhc2UgXCJHR1wiOlxuICAgICAgICByZXR1cm4gb25lT2YobG9jLmVyYXMoXCJsb25nXCIsIGZhbHNlKSwgMCk7XG4gICAgICAvLyB5ZWFyc1xuXG4gICAgICBjYXNlIFwieVwiOlxuICAgICAgICByZXR1cm4gaW50VW5pdChvbmVUb1NpeCk7XG5cbiAgICAgIGNhc2UgXCJ5eVwiOlxuICAgICAgICByZXR1cm4gaW50VW5pdCh0d29Ub0ZvdXIsIHVudHJ1bmNhdGVZZWFyKTtcblxuICAgICAgY2FzZSBcInl5eXlcIjpcbiAgICAgICAgcmV0dXJuIGludFVuaXQoZm91cik7XG5cbiAgICAgIGNhc2UgXCJ5eXl5eVwiOlxuICAgICAgICByZXR1cm4gaW50VW5pdChmb3VyVG9TaXgpO1xuXG4gICAgICBjYXNlIFwieXl5eXl5XCI6XG4gICAgICAgIHJldHVybiBpbnRVbml0KHNpeCk7XG4gICAgICAvLyBtb250aHNcblxuICAgICAgY2FzZSBcIk1cIjpcbiAgICAgICAgcmV0dXJuIGludFVuaXQob25lT3JUd28pO1xuXG4gICAgICBjYXNlIFwiTU1cIjpcbiAgICAgICAgcmV0dXJuIGludFVuaXQodHdvKTtcblxuICAgICAgY2FzZSBcIk1NTVwiOlxuICAgICAgICByZXR1cm4gb25lT2YobG9jLm1vbnRocyhcInNob3J0XCIsIHRydWUsIGZhbHNlKSwgMSk7XG5cbiAgICAgIGNhc2UgXCJNTU1NXCI6XG4gICAgICAgIHJldHVybiBvbmVPZihsb2MubW9udGhzKFwibG9uZ1wiLCB0cnVlLCBmYWxzZSksIDEpO1xuXG4gICAgICBjYXNlIFwiTFwiOlxuICAgICAgICByZXR1cm4gaW50VW5pdChvbmVPclR3byk7XG5cbiAgICAgIGNhc2UgXCJMTFwiOlxuICAgICAgICByZXR1cm4gaW50VW5pdCh0d28pO1xuXG4gICAgICBjYXNlIFwiTExMXCI6XG4gICAgICAgIHJldHVybiBvbmVPZihsb2MubW9udGhzKFwic2hvcnRcIiwgZmFsc2UsIGZhbHNlKSwgMSk7XG5cbiAgICAgIGNhc2UgXCJMTExMXCI6XG4gICAgICAgIHJldHVybiBvbmVPZihsb2MubW9udGhzKFwibG9uZ1wiLCBmYWxzZSwgZmFsc2UpLCAxKTtcbiAgICAgIC8vIGRhdGVzXG5cbiAgICAgIGNhc2UgXCJkXCI6XG4gICAgICAgIHJldHVybiBpbnRVbml0KG9uZU9yVHdvKTtcblxuICAgICAgY2FzZSBcImRkXCI6XG4gICAgICAgIHJldHVybiBpbnRVbml0KHR3byk7XG4gICAgICAvLyBvcmRpbmFsc1xuXG4gICAgICBjYXNlIFwib1wiOlxuICAgICAgICByZXR1cm4gaW50VW5pdChvbmVUb1RocmVlKTtcblxuICAgICAgY2FzZSBcIm9vb1wiOlxuICAgICAgICByZXR1cm4gaW50VW5pdCh0aHJlZSk7XG4gICAgICAvLyB0aW1lXG5cbiAgICAgIGNhc2UgXCJISFwiOlxuICAgICAgICByZXR1cm4gaW50VW5pdCh0d28pO1xuXG4gICAgICBjYXNlIFwiSFwiOlxuICAgICAgICByZXR1cm4gaW50VW5pdChvbmVPclR3byk7XG5cbiAgICAgIGNhc2UgXCJoaFwiOlxuICAgICAgICByZXR1cm4gaW50VW5pdCh0d28pO1xuXG4gICAgICBjYXNlIFwiaFwiOlxuICAgICAgICByZXR1cm4gaW50VW5pdChvbmVPclR3byk7XG5cbiAgICAgIGNhc2UgXCJtbVwiOlxuICAgICAgICByZXR1cm4gaW50VW5pdCh0d28pO1xuXG4gICAgICBjYXNlIFwibVwiOlxuICAgICAgICByZXR1cm4gaW50VW5pdChvbmVPclR3byk7XG5cbiAgICAgIGNhc2UgXCJxXCI6XG4gICAgICAgIHJldHVybiBpbnRVbml0KG9uZU9yVHdvKTtcblxuICAgICAgY2FzZSBcInFxXCI6XG4gICAgICAgIHJldHVybiBpbnRVbml0KHR3byk7XG5cbiAgICAgIGNhc2UgXCJzXCI6XG4gICAgICAgIHJldHVybiBpbnRVbml0KG9uZU9yVHdvKTtcblxuICAgICAgY2FzZSBcInNzXCI6XG4gICAgICAgIHJldHVybiBpbnRVbml0KHR3byk7XG5cbiAgICAgIGNhc2UgXCJTXCI6XG4gICAgICAgIHJldHVybiBpbnRVbml0KG9uZVRvVGhyZWUpO1xuXG4gICAgICBjYXNlIFwiU1NTXCI6XG4gICAgICAgIHJldHVybiBpbnRVbml0KHRocmVlKTtcblxuICAgICAgY2FzZSBcInVcIjpcbiAgICAgICAgcmV0dXJuIHNpbXBsZShvbmVUb05pbmUpO1xuXG4gICAgICBjYXNlIFwidXVcIjpcbiAgICAgICAgcmV0dXJuIHNpbXBsZShvbmVPclR3byk7XG5cbiAgICAgIGNhc2UgXCJ1dXVcIjpcbiAgICAgICAgcmV0dXJuIGludFVuaXQob25lKTtcbiAgICAgIC8vIG1lcmlkaWVtXG5cbiAgICAgIGNhc2UgXCJhXCI6XG4gICAgICAgIHJldHVybiBvbmVPZihsb2MubWVyaWRpZW1zKCksIDApO1xuICAgICAgLy8gd2Vla1llYXIgKGspXG5cbiAgICAgIGNhc2UgXCJra2trXCI6XG4gICAgICAgIHJldHVybiBpbnRVbml0KGZvdXIpO1xuXG4gICAgICBjYXNlIFwia2tcIjpcbiAgICAgICAgcmV0dXJuIGludFVuaXQodHdvVG9Gb3VyLCB1bnRydW5jYXRlWWVhcik7XG4gICAgICAvLyB3ZWVrTnVtYmVyIChXKVxuXG4gICAgICBjYXNlIFwiV1wiOlxuICAgICAgICByZXR1cm4gaW50VW5pdChvbmVPclR3byk7XG5cbiAgICAgIGNhc2UgXCJXV1wiOlxuICAgICAgICByZXR1cm4gaW50VW5pdCh0d28pO1xuICAgICAgLy8gd2Vla2RheXNcblxuICAgICAgY2FzZSBcIkVcIjpcbiAgICAgIGNhc2UgXCJjXCI6XG4gICAgICAgIHJldHVybiBpbnRVbml0KG9uZSk7XG5cbiAgICAgIGNhc2UgXCJFRUVcIjpcbiAgICAgICAgcmV0dXJuIG9uZU9mKGxvYy53ZWVrZGF5cyhcInNob3J0XCIsIGZhbHNlLCBmYWxzZSksIDEpO1xuXG4gICAgICBjYXNlIFwiRUVFRVwiOlxuICAgICAgICByZXR1cm4gb25lT2YobG9jLndlZWtkYXlzKFwibG9uZ1wiLCBmYWxzZSwgZmFsc2UpLCAxKTtcblxuICAgICAgY2FzZSBcImNjY1wiOlxuICAgICAgICByZXR1cm4gb25lT2YobG9jLndlZWtkYXlzKFwic2hvcnRcIiwgdHJ1ZSwgZmFsc2UpLCAxKTtcblxuICAgICAgY2FzZSBcImNjY2NcIjpcbiAgICAgICAgcmV0dXJuIG9uZU9mKGxvYy53ZWVrZGF5cyhcImxvbmdcIiwgdHJ1ZSwgZmFsc2UpLCAxKTtcbiAgICAgIC8vIG9mZnNldC96b25lXG5cbiAgICAgIGNhc2UgXCJaXCI6XG4gICAgICBjYXNlIFwiWlpcIjpcbiAgICAgICAgcmV0dXJuIG9mZnNldChuZXcgUmVnRXhwKFwiKFsrLV1cIiArIG9uZU9yVHdvLnNvdXJjZSArIFwiKSg/OjooXCIgKyB0d28uc291cmNlICsgXCIpKT9cIiksIDIpO1xuXG4gICAgICBjYXNlIFwiWlpaXCI6XG4gICAgICAgIHJldHVybiBvZmZzZXQobmV3IFJlZ0V4cChcIihbKy1dXCIgKyBvbmVPclR3by5zb3VyY2UgKyBcIikoXCIgKyB0d28uc291cmNlICsgXCIpP1wiKSwgMik7XG4gICAgICAvLyB3ZSBkb24ndCBzdXBwb3J0IFpaWlogKFBTVCkgb3IgWlpaWlogKFBhY2lmaWMgU3RhbmRhcmQgVGltZSkgaW4gcGFyc2luZ1xuICAgICAgLy8gYmVjYXVzZSB3ZSBkb24ndCBoYXZlIGFueSB3YXkgdG8gZmlndXJlIG91dCB3aGF0IHRoZXkgYXJlXG5cbiAgICAgIGNhc2UgXCJ6XCI6XG4gICAgICAgIHJldHVybiBzaW1wbGUoL1thLXpfKy0vXXsxLDI1Nn0/L2kpO1xuXG4gICAgICBkZWZhdWx0OlxuICAgICAgICByZXR1cm4gbGl0ZXJhbCh0KTtcbiAgICB9XG4gIH07XG5cbiAgdmFyIHVuaXQgPSB1bml0YXRlKHRva2VuKSB8fCB7XG4gICAgaW52YWxpZFJlYXNvbjogTUlTU0lOR19GVFBcbiAgfTtcbiAgdW5pdC50b2tlbiA9IHRva2VuO1xuICByZXR1cm4gdW5pdDtcbn1cblxudmFyIHBhcnRUeXBlU3R5bGVUb1Rva2VuVmFsID0ge1xuICB5ZWFyOiB7XG4gICAgXCIyLWRpZ2l0XCI6IFwieXlcIixcbiAgICBudW1lcmljOiBcInl5eXl5XCJcbiAgfSxcbiAgbW9udGg6IHtcbiAgICBudW1lcmljOiBcIk1cIixcbiAgICBcIjItZGlnaXRcIjogXCJNTVwiLFxuICAgIHNob3J0OiBcIk1NTVwiLFxuICAgIGxvbmc6IFwiTU1NTVwiXG4gIH0sXG4gIGRheToge1xuICAgIG51bWVyaWM6IFwiZFwiLFxuICAgIFwiMi1kaWdpdFwiOiBcImRkXCJcbiAgfSxcbiAgd2Vla2RheToge1xuICAgIHNob3J0OiBcIkVFRVwiLFxuICAgIGxvbmc6IFwiRUVFRVwiXG4gIH0sXG4gIGRheXBlcmlvZDogXCJhXCIsXG4gIGRheVBlcmlvZDogXCJhXCIsXG4gIGhvdXI6IHtcbiAgICBudW1lcmljOiBcImhcIixcbiAgICBcIjItZGlnaXRcIjogXCJoaFwiXG4gIH0sXG4gIG1pbnV0ZToge1xuICAgIG51bWVyaWM6IFwibVwiLFxuICAgIFwiMi1kaWdpdFwiOiBcIm1tXCJcbiAgfSxcbiAgc2Vjb25kOiB7XG4gICAgbnVtZXJpYzogXCJzXCIsXG4gICAgXCIyLWRpZ2l0XCI6IFwic3NcIlxuICB9XG59O1xuXG5mdW5jdGlvbiB0b2tlbkZvclBhcnQocGFydCwgbG9jYWxlLCBmb3JtYXRPcHRzKSB7XG4gIHZhciB0eXBlID0gcGFydC50eXBlLFxuICAgICAgdmFsdWUgPSBwYXJ0LnZhbHVlO1xuXG4gIGlmICh0eXBlID09PSBcImxpdGVyYWxcIikge1xuICAgIHJldHVybiB7XG4gICAgICBsaXRlcmFsOiB0cnVlLFxuICAgICAgdmFsOiB2YWx1ZVxuICAgIH07XG4gIH1cblxuICB2YXIgc3R5bGUgPSBmb3JtYXRPcHRzW3R5cGVdO1xuICB2YXIgdmFsID0gcGFydFR5cGVTdHlsZVRvVG9rZW5WYWxbdHlwZV07XG5cbiAgaWYgKHR5cGVvZiB2YWwgPT09IFwib2JqZWN0XCIpIHtcbiAgICB2YWwgPSB2YWxbc3R5bGVdO1xuICB9XG5cbiAgaWYgKHZhbCkge1xuICAgIHJldHVybiB7XG4gICAgICBsaXRlcmFsOiBmYWxzZSxcbiAgICAgIHZhbDogdmFsXG4gICAgfTtcbiAgfVxuXG4gIHJldHVybiB1bmRlZmluZWQ7XG59XG5cbmZ1bmN0aW9uIGJ1aWxkUmVnZXgodW5pdHMpIHtcbiAgdmFyIHJlID0gdW5pdHMubWFwKGZ1bmN0aW9uICh1KSB7XG4gICAgcmV0dXJuIHUucmVnZXg7XG4gIH0pLnJlZHVjZShmdW5jdGlvbiAoZiwgcikge1xuICAgIHJldHVybiBmICsgXCIoXCIgKyByLnNvdXJjZSArIFwiKVwiO1xuICB9LCBcIlwiKTtcbiAgcmV0dXJuIFtcIl5cIiArIHJlICsgXCIkXCIsIHVuaXRzXTtcbn1cblxuZnVuY3Rpb24gbWF0Y2goaW5wdXQsIHJlZ2V4LCBoYW5kbGVycykge1xuICB2YXIgbWF0Y2hlcyA9IGlucHV0Lm1hdGNoKHJlZ2V4KTtcblxuICBpZiAobWF0Y2hlcykge1xuICAgIHZhciBhbGwgPSB7fTtcbiAgICB2YXIgbWF0Y2hJbmRleCA9IDE7XG5cbiAgICBmb3IgKHZhciBpIGluIGhhbmRsZXJzKSB7XG4gICAgICBpZiAoaGFzT3duUHJvcGVydHkoaGFuZGxlcnMsIGkpKSB7XG4gICAgICAgIHZhciBoID0gaGFuZGxlcnNbaV0sXG4gICAgICAgICAgICBncm91cHMgPSBoLmdyb3VwcyA/IGguZ3JvdXBzICsgMSA6IDE7XG5cbiAgICAgICAgaWYgKCFoLmxpdGVyYWwgJiYgaC50b2tlbikge1xuICAgICAgICAgIGFsbFtoLnRva2VuLnZhbFswXV0gPSBoLmRlc2VyKG1hdGNoZXMuc2xpY2UobWF0Y2hJbmRleCwgbWF0Y2hJbmRleCArIGdyb3VwcykpO1xuICAgICAgICB9XG5cbiAgICAgICAgbWF0Y2hJbmRleCArPSBncm91cHM7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIFttYXRjaGVzLCBhbGxdO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiBbbWF0Y2hlcywge31dO1xuICB9XG59XG5cbmZ1bmN0aW9uIGRhdGVUaW1lRnJvbU1hdGNoZXMobWF0Y2hlcykge1xuICB2YXIgdG9GaWVsZCA9IGZ1bmN0aW9uIHRvRmllbGQodG9rZW4pIHtcbiAgICBzd2l0Y2ggKHRva2VuKSB7XG4gICAgICBjYXNlIFwiU1wiOlxuICAgICAgICByZXR1cm4gXCJtaWxsaXNlY29uZFwiO1xuXG4gICAgICBjYXNlIFwic1wiOlxuICAgICAgICByZXR1cm4gXCJzZWNvbmRcIjtcblxuICAgICAgY2FzZSBcIm1cIjpcbiAgICAgICAgcmV0dXJuIFwibWludXRlXCI7XG5cbiAgICAgIGNhc2UgXCJoXCI6XG4gICAgICBjYXNlIFwiSFwiOlxuICAgICAgICByZXR1cm4gXCJob3VyXCI7XG5cbiAgICAgIGNhc2UgXCJkXCI6XG4gICAgICAgIHJldHVybiBcImRheVwiO1xuXG4gICAgICBjYXNlIFwib1wiOlxuICAgICAgICByZXR1cm4gXCJvcmRpbmFsXCI7XG5cbiAgICAgIGNhc2UgXCJMXCI6XG4gICAgICBjYXNlIFwiTVwiOlxuICAgICAgICByZXR1cm4gXCJtb250aFwiO1xuXG4gICAgICBjYXNlIFwieVwiOlxuICAgICAgICByZXR1cm4gXCJ5ZWFyXCI7XG5cbiAgICAgIGNhc2UgXCJFXCI6XG4gICAgICBjYXNlIFwiY1wiOlxuICAgICAgICByZXR1cm4gXCJ3ZWVrZGF5XCI7XG5cbiAgICAgIGNhc2UgXCJXXCI6XG4gICAgICAgIHJldHVybiBcIndlZWtOdW1iZXJcIjtcblxuICAgICAgY2FzZSBcImtcIjpcbiAgICAgICAgcmV0dXJuIFwid2Vla1llYXJcIjtcblxuICAgICAgY2FzZSBcInFcIjpcbiAgICAgICAgcmV0dXJuIFwicXVhcnRlclwiO1xuXG4gICAgICBkZWZhdWx0OlxuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gIH07XG5cbiAgdmFyIHpvbmUgPSBudWxsO1xuICB2YXIgc3BlY2lmaWNPZmZzZXQ7XG5cbiAgaWYgKCFpc1VuZGVmaW5lZChtYXRjaGVzLnopKSB7XG4gICAgem9uZSA9IElBTkFab25lLmNyZWF0ZShtYXRjaGVzLnopO1xuICB9XG5cbiAgaWYgKCFpc1VuZGVmaW5lZChtYXRjaGVzLlopKSB7XG4gICAgaWYgKCF6b25lKSB7XG4gICAgICB6b25lID0gbmV3IEZpeGVkT2Zmc2V0Wm9uZShtYXRjaGVzLlopO1xuICAgIH1cblxuICAgIHNwZWNpZmljT2Zmc2V0ID0gbWF0Y2hlcy5aO1xuICB9XG5cbiAgaWYgKCFpc1VuZGVmaW5lZChtYXRjaGVzLnEpKSB7XG4gICAgbWF0Y2hlcy5NID0gKG1hdGNoZXMucSAtIDEpICogMyArIDE7XG4gIH1cblxuICBpZiAoIWlzVW5kZWZpbmVkKG1hdGNoZXMuaCkpIHtcbiAgICBpZiAobWF0Y2hlcy5oIDwgMTIgJiYgbWF0Y2hlcy5hID09PSAxKSB7XG4gICAgICBtYXRjaGVzLmggKz0gMTI7XG4gICAgfSBlbHNlIGlmIChtYXRjaGVzLmggPT09IDEyICYmIG1hdGNoZXMuYSA9PT0gMCkge1xuICAgICAgbWF0Y2hlcy5oID0gMDtcbiAgICB9XG4gIH1cblxuICBpZiAobWF0Y2hlcy5HID09PSAwICYmIG1hdGNoZXMueSkge1xuICAgIG1hdGNoZXMueSA9IC1tYXRjaGVzLnk7XG4gIH1cblxuICBpZiAoIWlzVW5kZWZpbmVkKG1hdGNoZXMudSkpIHtcbiAgICBtYXRjaGVzLlMgPSBwYXJzZU1pbGxpcyhtYXRjaGVzLnUpO1xuICB9XG5cbiAgdmFyIHZhbHMgPSBPYmplY3Qua2V5cyhtYXRjaGVzKS5yZWR1Y2UoZnVuY3Rpb24gKHIsIGspIHtcbiAgICB2YXIgZiA9IHRvRmllbGQoayk7XG5cbiAgICBpZiAoZikge1xuICAgICAgcltmXSA9IG1hdGNoZXNba107XG4gICAgfVxuXG4gICAgcmV0dXJuIHI7XG4gIH0sIHt9KTtcbiAgcmV0dXJuIFt2YWxzLCB6b25lLCBzcGVjaWZpY09mZnNldF07XG59XG5cbnZhciBkdW1teURhdGVUaW1lQ2FjaGUgPSBudWxsO1xuXG5mdW5jdGlvbiBnZXREdW1teURhdGVUaW1lKCkge1xuICBpZiAoIWR1bW15RGF0ZVRpbWVDYWNoZSkge1xuICAgIGR1bW15RGF0ZVRpbWVDYWNoZSA9IERhdGVUaW1lLmZyb21NaWxsaXMoMTU1NTU1NTU1NTU1NSk7XG4gIH1cblxuICByZXR1cm4gZHVtbXlEYXRlVGltZUNhY2hlO1xufVxuXG5mdW5jdGlvbiBtYXliZUV4cGFuZE1hY3JvVG9rZW4odG9rZW4sIGxvY2FsZSkge1xuICBpZiAodG9rZW4ubGl0ZXJhbCkge1xuICAgIHJldHVybiB0b2tlbjtcbiAgfVxuXG4gIHZhciBmb3JtYXRPcHRzID0gRm9ybWF0dGVyLm1hY3JvVG9rZW5Ub0Zvcm1hdE9wdHModG9rZW4udmFsKTtcblxuICBpZiAoIWZvcm1hdE9wdHMpIHtcbiAgICByZXR1cm4gdG9rZW47XG4gIH1cblxuICB2YXIgZm9ybWF0dGVyID0gRm9ybWF0dGVyLmNyZWF0ZShsb2NhbGUsIGZvcm1hdE9wdHMpO1xuICB2YXIgcGFydHMgPSBmb3JtYXR0ZXIuZm9ybWF0RGF0ZVRpbWVQYXJ0cyhnZXREdW1teURhdGVUaW1lKCkpO1xuICB2YXIgdG9rZW5zID0gcGFydHMubWFwKGZ1bmN0aW9uIChwKSB7XG4gICAgcmV0dXJuIHRva2VuRm9yUGFydChwLCBsb2NhbGUsIGZvcm1hdE9wdHMpO1xuICB9KTtcblxuICBpZiAodG9rZW5zLmluY2x1ZGVzKHVuZGVmaW5lZCkpIHtcbiAgICByZXR1cm4gdG9rZW47XG4gIH1cblxuICByZXR1cm4gdG9rZW5zO1xufVxuXG5mdW5jdGlvbiBleHBhbmRNYWNyb1Rva2Vucyh0b2tlbnMsIGxvY2FsZSkge1xuICB2YXIgX0FycmF5JHByb3RvdHlwZTtcblxuICByZXR1cm4gKF9BcnJheSRwcm90b3R5cGUgPSBBcnJheS5wcm90b3R5cGUpLmNvbmNhdC5hcHBseShfQXJyYXkkcHJvdG90eXBlLCB0b2tlbnMubWFwKGZ1bmN0aW9uICh0KSB7XG4gICAgcmV0dXJuIG1heWJlRXhwYW5kTWFjcm9Ub2tlbih0LCBsb2NhbGUpO1xuICB9KSk7XG59XG4vKipcbiAqIEBwcml2YXRlXG4gKi9cblxuXG5mdW5jdGlvbiBleHBsYWluRnJvbVRva2Vucyhsb2NhbGUsIGlucHV0LCBmb3JtYXQpIHtcbiAgdmFyIHRva2VucyA9IGV4cGFuZE1hY3JvVG9rZW5zKEZvcm1hdHRlci5wYXJzZUZvcm1hdChmb3JtYXQpLCBsb2NhbGUpLFxuICAgICAgdW5pdHMgPSB0b2tlbnMubWFwKGZ1bmN0aW9uICh0KSB7XG4gICAgcmV0dXJuIHVuaXRGb3JUb2tlbih0LCBsb2NhbGUpO1xuICB9KSxcbiAgICAgIGRpc3F1YWxpZnlpbmdVbml0ID0gdW5pdHMuZmluZChmdW5jdGlvbiAodCkge1xuICAgIHJldHVybiB0LmludmFsaWRSZWFzb247XG4gIH0pO1xuXG4gIGlmIChkaXNxdWFsaWZ5aW5nVW5pdCkge1xuICAgIHJldHVybiB7XG4gICAgICBpbnB1dDogaW5wdXQsXG4gICAgICB0b2tlbnM6IHRva2VucyxcbiAgICAgIGludmFsaWRSZWFzb246IGRpc3F1YWxpZnlpbmdVbml0LmludmFsaWRSZWFzb25cbiAgICB9O1xuICB9IGVsc2Uge1xuICAgIHZhciBfYnVpbGRSZWdleCA9IGJ1aWxkUmVnZXgodW5pdHMpLFxuICAgICAgICByZWdleFN0cmluZyA9IF9idWlsZFJlZ2V4WzBdLFxuICAgICAgICBoYW5kbGVycyA9IF9idWlsZFJlZ2V4WzFdLFxuICAgICAgICByZWdleCA9IFJlZ0V4cChyZWdleFN0cmluZywgXCJpXCIpLFxuICAgICAgICBfbWF0Y2ggPSBtYXRjaChpbnB1dCwgcmVnZXgsIGhhbmRsZXJzKSxcbiAgICAgICAgcmF3TWF0Y2hlcyA9IF9tYXRjaFswXSxcbiAgICAgICAgbWF0Y2hlcyA9IF9tYXRjaFsxXSxcbiAgICAgICAgX3JlZjYgPSBtYXRjaGVzID8gZGF0ZVRpbWVGcm9tTWF0Y2hlcyhtYXRjaGVzKSA6IFtudWxsLCBudWxsLCB1bmRlZmluZWRdLFxuICAgICAgICByZXN1bHQgPSBfcmVmNlswXSxcbiAgICAgICAgem9uZSA9IF9yZWY2WzFdLFxuICAgICAgICBzcGVjaWZpY09mZnNldCA9IF9yZWY2WzJdO1xuXG4gICAgaWYgKGhhc093blByb3BlcnR5KG1hdGNoZXMsIFwiYVwiKSAmJiBoYXNPd25Qcm9wZXJ0eShtYXRjaGVzLCBcIkhcIikpIHtcbiAgICAgIHRocm93IG5ldyBDb25mbGljdGluZ1NwZWNpZmljYXRpb25FcnJvcihcIkNhbid0IGluY2x1ZGUgbWVyaWRpZW0gd2hlbiBzcGVjaWZ5aW5nIDI0LWhvdXIgZm9ybWF0XCIpO1xuICAgIH1cblxuICAgIHJldHVybiB7XG4gICAgICBpbnB1dDogaW5wdXQsXG4gICAgICB0b2tlbnM6IHRva2VucyxcbiAgICAgIHJlZ2V4OiByZWdleCxcbiAgICAgIHJhd01hdGNoZXM6IHJhd01hdGNoZXMsXG4gICAgICBtYXRjaGVzOiBtYXRjaGVzLFxuICAgICAgcmVzdWx0OiByZXN1bHQsXG4gICAgICB6b25lOiB6b25lLFxuICAgICAgc3BlY2lmaWNPZmZzZXQ6IHNwZWNpZmljT2Zmc2V0XG4gICAgfTtcbiAgfVxufVxuZnVuY3Rpb24gcGFyc2VGcm9tVG9rZW5zKGxvY2FsZSwgaW5wdXQsIGZvcm1hdCkge1xuICB2YXIgX2V4cGxhaW5Gcm9tVG9rZW5zID0gZXhwbGFpbkZyb21Ub2tlbnMobG9jYWxlLCBpbnB1dCwgZm9ybWF0KSxcbiAgICAgIHJlc3VsdCA9IF9leHBsYWluRnJvbVRva2Vucy5yZXN1bHQsXG4gICAgICB6b25lID0gX2V4cGxhaW5Gcm9tVG9rZW5zLnpvbmUsXG4gICAgICBzcGVjaWZpY09mZnNldCA9IF9leHBsYWluRnJvbVRva2Vucy5zcGVjaWZpY09mZnNldCxcbiAgICAgIGludmFsaWRSZWFzb24gPSBfZXhwbGFpbkZyb21Ub2tlbnMuaW52YWxpZFJlYXNvbjtcblxuICByZXR1cm4gW3Jlc3VsdCwgem9uZSwgc3BlY2lmaWNPZmZzZXQsIGludmFsaWRSZWFzb25dO1xufVxuXG52YXIgbm9uTGVhcExhZGRlciA9IFswLCAzMSwgNTksIDkwLCAxMjAsIDE1MSwgMTgxLCAyMTIsIDI0MywgMjczLCAzMDQsIDMzNF0sXG4gICAgbGVhcExhZGRlciA9IFswLCAzMSwgNjAsIDkxLCAxMjEsIDE1MiwgMTgyLCAyMTMsIDI0NCwgMjc0LCAzMDUsIDMzNV07XG5cbmZ1bmN0aW9uIHVuaXRPdXRPZlJhbmdlKHVuaXQsIHZhbHVlKSB7XG4gIHJldHVybiBuZXcgSW52YWxpZChcInVuaXQgb3V0IG9mIHJhbmdlXCIsIFwieW91IHNwZWNpZmllZCBcIiArIHZhbHVlICsgXCIgKG9mIHR5cGUgXCIgKyB0eXBlb2YgdmFsdWUgKyBcIikgYXMgYSBcIiArIHVuaXQgKyBcIiwgd2hpY2ggaXMgaW52YWxpZFwiKTtcbn1cblxuZnVuY3Rpb24gZGF5T2ZXZWVrKHllYXIsIG1vbnRoLCBkYXkpIHtcbiAgdmFyIGpzID0gbmV3IERhdGUoRGF0ZS5VVEMoeWVhciwgbW9udGggLSAxLCBkYXkpKS5nZXRVVENEYXkoKTtcbiAgcmV0dXJuIGpzID09PSAwID8gNyA6IGpzO1xufVxuXG5mdW5jdGlvbiBjb21wdXRlT3JkaW5hbCh5ZWFyLCBtb250aCwgZGF5KSB7XG4gIHJldHVybiBkYXkgKyAoaXNMZWFwWWVhcih5ZWFyKSA/IGxlYXBMYWRkZXIgOiBub25MZWFwTGFkZGVyKVttb250aCAtIDFdO1xufVxuXG5mdW5jdGlvbiB1bmNvbXB1dGVPcmRpbmFsKHllYXIsIG9yZGluYWwpIHtcbiAgdmFyIHRhYmxlID0gaXNMZWFwWWVhcih5ZWFyKSA/IGxlYXBMYWRkZXIgOiBub25MZWFwTGFkZGVyLFxuICAgICAgbW9udGgwID0gdGFibGUuZmluZEluZGV4KGZ1bmN0aW9uIChpKSB7XG4gICAgcmV0dXJuIGkgPCBvcmRpbmFsO1xuICB9KSxcbiAgICAgIGRheSA9IG9yZGluYWwgLSB0YWJsZVttb250aDBdO1xuICByZXR1cm4ge1xuICAgIG1vbnRoOiBtb250aDAgKyAxLFxuICAgIGRheTogZGF5XG4gIH07XG59XG4vKipcbiAqIEBwcml2YXRlXG4gKi9cblxuXG5mdW5jdGlvbiBncmVnb3JpYW5Ub1dlZWsoZ3JlZ09iaikge1xuICB2YXIgeWVhciA9IGdyZWdPYmoueWVhcixcbiAgICAgIG1vbnRoID0gZ3JlZ09iai5tb250aCxcbiAgICAgIGRheSA9IGdyZWdPYmouZGF5LFxuICAgICAgb3JkaW5hbCA9IGNvbXB1dGVPcmRpbmFsKHllYXIsIG1vbnRoLCBkYXkpLFxuICAgICAgd2Vla2RheSA9IGRheU9mV2Vlayh5ZWFyLCBtb250aCwgZGF5KTtcbiAgdmFyIHdlZWtOdW1iZXIgPSBNYXRoLmZsb29yKChvcmRpbmFsIC0gd2Vla2RheSArIDEwKSAvIDcpLFxuICAgICAgd2Vla1llYXI7XG5cbiAgaWYgKHdlZWtOdW1iZXIgPCAxKSB7XG4gICAgd2Vla1llYXIgPSB5ZWFyIC0gMTtcbiAgICB3ZWVrTnVtYmVyID0gd2Vla3NJbldlZWtZZWFyKHdlZWtZZWFyKTtcbiAgfSBlbHNlIGlmICh3ZWVrTnVtYmVyID4gd2Vla3NJbldlZWtZZWFyKHllYXIpKSB7XG4gICAgd2Vla1llYXIgPSB5ZWFyICsgMTtcbiAgICB3ZWVrTnVtYmVyID0gMTtcbiAgfSBlbHNlIHtcbiAgICB3ZWVrWWVhciA9IHllYXI7XG4gIH1cblxuICByZXR1cm4gX2V4dGVuZHMoe1xuICAgIHdlZWtZZWFyOiB3ZWVrWWVhcixcbiAgICB3ZWVrTnVtYmVyOiB3ZWVrTnVtYmVyLFxuICAgIHdlZWtkYXk6IHdlZWtkYXlcbiAgfSwgdGltZU9iamVjdChncmVnT2JqKSk7XG59XG5mdW5jdGlvbiB3ZWVrVG9HcmVnb3JpYW4od2Vla0RhdGEpIHtcbiAgdmFyIHdlZWtZZWFyID0gd2Vla0RhdGEud2Vla1llYXIsXG4gICAgICB3ZWVrTnVtYmVyID0gd2Vla0RhdGEud2Vla051bWJlcixcbiAgICAgIHdlZWtkYXkgPSB3ZWVrRGF0YS53ZWVrZGF5LFxuICAgICAgd2Vla2RheU9mSmFuNCA9IGRheU9mV2Vlayh3ZWVrWWVhciwgMSwgNCksXG4gICAgICB5ZWFySW5EYXlzID0gZGF5c0luWWVhcih3ZWVrWWVhcik7XG4gIHZhciBvcmRpbmFsID0gd2Vla051bWJlciAqIDcgKyB3ZWVrZGF5IC0gd2Vla2RheU9mSmFuNCAtIDMsXG4gICAgICB5ZWFyO1xuXG4gIGlmIChvcmRpbmFsIDwgMSkge1xuICAgIHllYXIgPSB3ZWVrWWVhciAtIDE7XG4gICAgb3JkaW5hbCArPSBkYXlzSW5ZZWFyKHllYXIpO1xuICB9IGVsc2UgaWYgKG9yZGluYWwgPiB5ZWFySW5EYXlzKSB7XG4gICAgeWVhciA9IHdlZWtZZWFyICsgMTtcbiAgICBvcmRpbmFsIC09IGRheXNJblllYXIod2Vla1llYXIpO1xuICB9IGVsc2Uge1xuICAgIHllYXIgPSB3ZWVrWWVhcjtcbiAgfVxuXG4gIHZhciBfdW5jb21wdXRlT3JkaW5hbCA9IHVuY29tcHV0ZU9yZGluYWwoeWVhciwgb3JkaW5hbCksXG4gICAgICBtb250aCA9IF91bmNvbXB1dGVPcmRpbmFsLm1vbnRoLFxuICAgICAgZGF5ID0gX3VuY29tcHV0ZU9yZGluYWwuZGF5O1xuXG4gIHJldHVybiBfZXh0ZW5kcyh7XG4gICAgeWVhcjogeWVhcixcbiAgICBtb250aDogbW9udGgsXG4gICAgZGF5OiBkYXlcbiAgfSwgdGltZU9iamVjdCh3ZWVrRGF0YSkpO1xufVxuZnVuY3Rpb24gZ3JlZ29yaWFuVG9PcmRpbmFsKGdyZWdEYXRhKSB7XG4gIHZhciB5ZWFyID0gZ3JlZ0RhdGEueWVhcixcbiAgICAgIG1vbnRoID0gZ3JlZ0RhdGEubW9udGgsXG4gICAgICBkYXkgPSBncmVnRGF0YS5kYXk7XG4gIHZhciBvcmRpbmFsID0gY29tcHV0ZU9yZGluYWwoeWVhciwgbW9udGgsIGRheSk7XG4gIHJldHVybiBfZXh0ZW5kcyh7XG4gICAgeWVhcjogeWVhcixcbiAgICBvcmRpbmFsOiBvcmRpbmFsXG4gIH0sIHRpbWVPYmplY3QoZ3JlZ0RhdGEpKTtcbn1cbmZ1bmN0aW9uIG9yZGluYWxUb0dyZWdvcmlhbihvcmRpbmFsRGF0YSkge1xuICB2YXIgeWVhciA9IG9yZGluYWxEYXRhLnllYXIsXG4gICAgICBvcmRpbmFsID0gb3JkaW5hbERhdGEub3JkaW5hbDtcblxuICB2YXIgX3VuY29tcHV0ZU9yZGluYWwyID0gdW5jb21wdXRlT3JkaW5hbCh5ZWFyLCBvcmRpbmFsKSxcbiAgICAgIG1vbnRoID0gX3VuY29tcHV0ZU9yZGluYWwyLm1vbnRoLFxuICAgICAgZGF5ID0gX3VuY29tcHV0ZU9yZGluYWwyLmRheTtcblxuICByZXR1cm4gX2V4dGVuZHMoe1xuICAgIHllYXI6IHllYXIsXG4gICAgbW9udGg6IG1vbnRoLFxuICAgIGRheTogZGF5XG4gIH0sIHRpbWVPYmplY3Qob3JkaW5hbERhdGEpKTtcbn1cbmZ1bmN0aW9uIGhhc0ludmFsaWRXZWVrRGF0YShvYmopIHtcbiAgdmFyIHZhbGlkWWVhciA9IGlzSW50ZWdlcihvYmoud2Vla1llYXIpLFxuICAgICAgdmFsaWRXZWVrID0gaW50ZWdlckJldHdlZW4ob2JqLndlZWtOdW1iZXIsIDEsIHdlZWtzSW5XZWVrWWVhcihvYmoud2Vla1llYXIpKSxcbiAgICAgIHZhbGlkV2Vla2RheSA9IGludGVnZXJCZXR3ZWVuKG9iai53ZWVrZGF5LCAxLCA3KTtcblxuICBpZiAoIXZhbGlkWWVhcikge1xuICAgIHJldHVybiB1bml0T3V0T2ZSYW5nZShcIndlZWtZZWFyXCIsIG9iai53ZWVrWWVhcik7XG4gIH0gZWxzZSBpZiAoIXZhbGlkV2Vlaykge1xuICAgIHJldHVybiB1bml0T3V0T2ZSYW5nZShcIndlZWtcIiwgb2JqLndlZWspO1xuICB9IGVsc2UgaWYgKCF2YWxpZFdlZWtkYXkpIHtcbiAgICByZXR1cm4gdW5pdE91dE9mUmFuZ2UoXCJ3ZWVrZGF5XCIsIG9iai53ZWVrZGF5KTtcbiAgfSBlbHNlIHJldHVybiBmYWxzZTtcbn1cbmZ1bmN0aW9uIGhhc0ludmFsaWRPcmRpbmFsRGF0YShvYmopIHtcbiAgdmFyIHZhbGlkWWVhciA9IGlzSW50ZWdlcihvYmoueWVhciksXG4gICAgICB2YWxpZE9yZGluYWwgPSBpbnRlZ2VyQmV0d2VlbihvYmoub3JkaW5hbCwgMSwgZGF5c0luWWVhcihvYmoueWVhcikpO1xuXG4gIGlmICghdmFsaWRZZWFyKSB7XG4gICAgcmV0dXJuIHVuaXRPdXRPZlJhbmdlKFwieWVhclwiLCBvYmoueWVhcik7XG4gIH0gZWxzZSBpZiAoIXZhbGlkT3JkaW5hbCkge1xuICAgIHJldHVybiB1bml0T3V0T2ZSYW5nZShcIm9yZGluYWxcIiwgb2JqLm9yZGluYWwpO1xuICB9IGVsc2UgcmV0dXJuIGZhbHNlO1xufVxuZnVuY3Rpb24gaGFzSW52YWxpZEdyZWdvcmlhbkRhdGEob2JqKSB7XG4gIHZhciB2YWxpZFllYXIgPSBpc0ludGVnZXIob2JqLnllYXIpLFxuICAgICAgdmFsaWRNb250aCA9IGludGVnZXJCZXR3ZWVuKG9iai5tb250aCwgMSwgMTIpLFxuICAgICAgdmFsaWREYXkgPSBpbnRlZ2VyQmV0d2VlbihvYmouZGF5LCAxLCBkYXlzSW5Nb250aChvYmoueWVhciwgb2JqLm1vbnRoKSk7XG5cbiAgaWYgKCF2YWxpZFllYXIpIHtcbiAgICByZXR1cm4gdW5pdE91dE9mUmFuZ2UoXCJ5ZWFyXCIsIG9iai55ZWFyKTtcbiAgfSBlbHNlIGlmICghdmFsaWRNb250aCkge1xuICAgIHJldHVybiB1bml0T3V0T2ZSYW5nZShcIm1vbnRoXCIsIG9iai5tb250aCk7XG4gIH0gZWxzZSBpZiAoIXZhbGlkRGF5KSB7XG4gICAgcmV0dXJuIHVuaXRPdXRPZlJhbmdlKFwiZGF5XCIsIG9iai5kYXkpO1xuICB9IGVsc2UgcmV0dXJuIGZhbHNlO1xufVxuZnVuY3Rpb24gaGFzSW52YWxpZFRpbWVEYXRhKG9iaikge1xuICB2YXIgaG91ciA9IG9iai5ob3VyLFxuICAgICAgbWludXRlID0gb2JqLm1pbnV0ZSxcbiAgICAgIHNlY29uZCA9IG9iai5zZWNvbmQsXG4gICAgICBtaWxsaXNlY29uZCA9IG9iai5taWxsaXNlY29uZDtcbiAgdmFyIHZhbGlkSG91ciA9IGludGVnZXJCZXR3ZWVuKGhvdXIsIDAsIDIzKSB8fCBob3VyID09PSAyNCAmJiBtaW51dGUgPT09IDAgJiYgc2Vjb25kID09PSAwICYmIG1pbGxpc2Vjb25kID09PSAwLFxuICAgICAgdmFsaWRNaW51dGUgPSBpbnRlZ2VyQmV0d2VlbihtaW51dGUsIDAsIDU5KSxcbiAgICAgIHZhbGlkU2Vjb25kID0gaW50ZWdlckJldHdlZW4oc2Vjb25kLCAwLCA1OSksXG4gICAgICB2YWxpZE1pbGxpc2Vjb25kID0gaW50ZWdlckJldHdlZW4obWlsbGlzZWNvbmQsIDAsIDk5OSk7XG5cbiAgaWYgKCF2YWxpZEhvdXIpIHtcbiAgICByZXR1cm4gdW5pdE91dE9mUmFuZ2UoXCJob3VyXCIsIGhvdXIpO1xuICB9IGVsc2UgaWYgKCF2YWxpZE1pbnV0ZSkge1xuICAgIHJldHVybiB1bml0T3V0T2ZSYW5nZShcIm1pbnV0ZVwiLCBtaW51dGUpO1xuICB9IGVsc2UgaWYgKCF2YWxpZFNlY29uZCkge1xuICAgIHJldHVybiB1bml0T3V0T2ZSYW5nZShcInNlY29uZFwiLCBzZWNvbmQpO1xuICB9IGVsc2UgaWYgKCF2YWxpZE1pbGxpc2Vjb25kKSB7XG4gICAgcmV0dXJuIHVuaXRPdXRPZlJhbmdlKFwibWlsbGlzZWNvbmRcIiwgbWlsbGlzZWNvbmQpO1xuICB9IGVsc2UgcmV0dXJuIGZhbHNlO1xufVxuXG52YXIgSU5WQUxJRCA9IFwiSW52YWxpZCBEYXRlVGltZVwiO1xudmFyIE1BWF9EQVRFID0gOC42NGUxNTtcblxuZnVuY3Rpb24gdW5zdXBwb3J0ZWRab25lKHpvbmUpIHtcbiAgcmV0dXJuIG5ldyBJbnZhbGlkKFwidW5zdXBwb3J0ZWQgem9uZVwiLCBcInRoZSB6b25lIFxcXCJcIiArIHpvbmUubmFtZSArIFwiXFxcIiBpcyBub3Qgc3VwcG9ydGVkXCIpO1xufSAvLyB3ZSBjYWNoZSB3ZWVrIGRhdGEgb24gdGhlIERUIG9iamVjdCBhbmQgdGhpcyBpbnRlcm1lZGlhdGVzIHRoZSBjYWNoZVxuXG5cbmZ1bmN0aW9uIHBvc3NpYmx5Q2FjaGVkV2Vla0RhdGEoZHQpIHtcbiAgaWYgKGR0LndlZWtEYXRhID09PSBudWxsKSB7XG4gICAgZHQud2Vla0RhdGEgPSBncmVnb3JpYW5Ub1dlZWsoZHQuYyk7XG4gIH1cblxuICByZXR1cm4gZHQud2Vla0RhdGE7XG59IC8vIGNsb25lIHJlYWxseSBtZWFucywgXCJtYWtlIGEgbmV3IG9iamVjdCB3aXRoIHRoZXNlIG1vZGlmaWNhdGlvbnNcIi4gYWxsIFwic2V0dGVyc1wiIHJlYWxseSB1c2UgdGhpc1xuLy8gdG8gY3JlYXRlIGEgbmV3IG9iamVjdCB3aGlsZSBvbmx5IGNoYW5naW5nIHNvbWUgb2YgdGhlIHByb3BlcnRpZXNcblxuXG5mdW5jdGlvbiBjbG9uZShpbnN0LCBhbHRzKSB7XG4gIHZhciBjdXJyZW50ID0ge1xuICAgIHRzOiBpbnN0LnRzLFxuICAgIHpvbmU6IGluc3Quem9uZSxcbiAgICBjOiBpbnN0LmMsXG4gICAgbzogaW5zdC5vLFxuICAgIGxvYzogaW5zdC5sb2MsXG4gICAgaW52YWxpZDogaW5zdC5pbnZhbGlkXG4gIH07XG4gIHJldHVybiBuZXcgRGF0ZVRpbWUoX2V4dGVuZHMoe30sIGN1cnJlbnQsIGFsdHMsIHtcbiAgICBvbGQ6IGN1cnJlbnRcbiAgfSkpO1xufSAvLyBmaW5kIHRoZSByaWdodCBvZmZzZXQgYSBnaXZlbiBsb2NhbCB0aW1lLiBUaGUgbyBpbnB1dCBpcyBvdXIgZ3Vlc3MsIHdoaWNoIGRldGVybWluZXMgd2hpY2hcbi8vIG9mZnNldCB3ZSdsbCBwaWNrIGluIGFtYmlndW91cyBjYXNlcyAoZS5nLiB0aGVyZSBhcmUgdHdvIDMgQU1zIGIvYyBGYWxsYmFjayBEU1QpXG5cblxuZnVuY3Rpb24gZml4T2Zmc2V0KGxvY2FsVFMsIG8sIHR6KSB7XG4gIC8vIE91ciBVVEMgdGltZSBpcyBqdXN0IGEgZ3Vlc3MgYmVjYXVzZSBvdXIgb2Zmc2V0IGlzIGp1c3QgYSBndWVzc1xuICB2YXIgdXRjR3Vlc3MgPSBsb2NhbFRTIC0gbyAqIDYwICogMTAwMDsgLy8gVGVzdCB3aGV0aGVyIHRoZSB6b25lIG1hdGNoZXMgdGhlIG9mZnNldCBmb3IgdGhpcyB0c1xuXG4gIHZhciBvMiA9IHR6Lm9mZnNldCh1dGNHdWVzcyk7IC8vIElmIHNvLCBvZmZzZXQgZGlkbid0IGNoYW5nZSBhbmQgd2UncmUgZG9uZVxuXG4gIGlmIChvID09PSBvMikge1xuICAgIHJldHVybiBbdXRjR3Vlc3MsIG9dO1xuICB9IC8vIElmIG5vdCwgY2hhbmdlIHRoZSB0cyBieSB0aGUgZGlmZmVyZW5jZSBpbiB0aGUgb2Zmc2V0XG5cblxuICB1dGNHdWVzcyAtPSAobzIgLSBvKSAqIDYwICogMTAwMDsgLy8gSWYgdGhhdCBnaXZlcyB1cyB0aGUgbG9jYWwgdGltZSB3ZSB3YW50LCB3ZSdyZSBkb25lXG5cbiAgdmFyIG8zID0gdHoub2Zmc2V0KHV0Y0d1ZXNzKTtcblxuICBpZiAobzIgPT09IG8zKSB7XG4gICAgcmV0dXJuIFt1dGNHdWVzcywgbzJdO1xuICB9IC8vIElmIGl0J3MgZGlmZmVyZW50LCB3ZSdyZSBpbiBhIGhvbGUgdGltZS4gVGhlIG9mZnNldCBoYXMgY2hhbmdlZCwgYnV0IHRoZSB3ZSBkb24ndCBhZGp1c3QgdGhlIHRpbWVcblxuXG4gIHJldHVybiBbbG9jYWxUUyAtIE1hdGgubWluKG8yLCBvMykgKiA2MCAqIDEwMDAsIE1hdGgubWF4KG8yLCBvMyldO1xufSAvLyBjb252ZXJ0IGFuIGVwb2NoIHRpbWVzdGFtcCBpbnRvIGEgY2FsZW5kYXIgb2JqZWN0IHdpdGggdGhlIGdpdmVuIG9mZnNldFxuXG5cbmZ1bmN0aW9uIHRzVG9PYmoodHMsIG9mZnNldCkge1xuICB0cyArPSBvZmZzZXQgKiA2MCAqIDEwMDA7XG4gIHZhciBkID0gbmV3IERhdGUodHMpO1xuICByZXR1cm4ge1xuICAgIHllYXI6IGQuZ2V0VVRDRnVsbFllYXIoKSxcbiAgICBtb250aDogZC5nZXRVVENNb250aCgpICsgMSxcbiAgICBkYXk6IGQuZ2V0VVRDRGF0ZSgpLFxuICAgIGhvdXI6IGQuZ2V0VVRDSG91cnMoKSxcbiAgICBtaW51dGU6IGQuZ2V0VVRDTWludXRlcygpLFxuICAgIHNlY29uZDogZC5nZXRVVENTZWNvbmRzKCksXG4gICAgbWlsbGlzZWNvbmQ6IGQuZ2V0VVRDTWlsbGlzZWNvbmRzKClcbiAgfTtcbn0gLy8gY29udmVydCBhIGNhbGVuZGFyIG9iamVjdCB0byBhIGVwb2NoIHRpbWVzdGFtcFxuXG5cbmZ1bmN0aW9uIG9ialRvVFMob2JqLCBvZmZzZXQsIHpvbmUpIHtcbiAgcmV0dXJuIGZpeE9mZnNldChvYmpUb0xvY2FsVFMob2JqKSwgb2Zmc2V0LCB6b25lKTtcbn0gLy8gY3JlYXRlIGEgbmV3IERUIGluc3RhbmNlIGJ5IGFkZGluZyBhIGR1cmF0aW9uLCBhZGp1c3RpbmcgZm9yIERTVHNcblxuXG5mdW5jdGlvbiBhZGp1c3RUaW1lKGluc3QsIGR1cikge1xuICB2YXIgb1ByZSA9IGluc3QubyxcbiAgICAgIHllYXIgPSBpbnN0LmMueWVhciArIE1hdGgudHJ1bmMoZHVyLnllYXJzKSxcbiAgICAgIG1vbnRoID0gaW5zdC5jLm1vbnRoICsgTWF0aC50cnVuYyhkdXIubW9udGhzKSArIE1hdGgudHJ1bmMoZHVyLnF1YXJ0ZXJzKSAqIDMsXG4gICAgICBjID0gX2V4dGVuZHMoe30sIGluc3QuYywge1xuICAgIHllYXI6IHllYXIsXG4gICAgbW9udGg6IG1vbnRoLFxuICAgIGRheTogTWF0aC5taW4oaW5zdC5jLmRheSwgZGF5c0luTW9udGgoeWVhciwgbW9udGgpKSArIE1hdGgudHJ1bmMoZHVyLmRheXMpICsgTWF0aC50cnVuYyhkdXIud2Vla3MpICogN1xuICB9KSxcbiAgICAgIG1pbGxpc1RvQWRkID0gRHVyYXRpb24uZnJvbU9iamVjdCh7XG4gICAgeWVhcnM6IGR1ci55ZWFycyAtIE1hdGgudHJ1bmMoZHVyLnllYXJzKSxcbiAgICBxdWFydGVyczogZHVyLnF1YXJ0ZXJzIC0gTWF0aC50cnVuYyhkdXIucXVhcnRlcnMpLFxuICAgIG1vbnRoczogZHVyLm1vbnRocyAtIE1hdGgudHJ1bmMoZHVyLm1vbnRocyksXG4gICAgd2Vla3M6IGR1ci53ZWVrcyAtIE1hdGgudHJ1bmMoZHVyLndlZWtzKSxcbiAgICBkYXlzOiBkdXIuZGF5cyAtIE1hdGgudHJ1bmMoZHVyLmRheXMpLFxuICAgIGhvdXJzOiBkdXIuaG91cnMsXG4gICAgbWludXRlczogZHVyLm1pbnV0ZXMsXG4gICAgc2Vjb25kczogZHVyLnNlY29uZHMsXG4gICAgbWlsbGlzZWNvbmRzOiBkdXIubWlsbGlzZWNvbmRzXG4gIH0pLmFzKFwibWlsbGlzZWNvbmRzXCIpLFxuICAgICAgbG9jYWxUUyA9IG9ialRvTG9jYWxUUyhjKTtcblxuICB2YXIgX2ZpeE9mZnNldCA9IGZpeE9mZnNldChsb2NhbFRTLCBvUHJlLCBpbnN0LnpvbmUpLFxuICAgICAgdHMgPSBfZml4T2Zmc2V0WzBdLFxuICAgICAgbyA9IF9maXhPZmZzZXRbMV07XG5cbiAgaWYgKG1pbGxpc1RvQWRkICE9PSAwKSB7XG4gICAgdHMgKz0gbWlsbGlzVG9BZGQ7IC8vIHRoYXQgY291bGQgaGF2ZSBjaGFuZ2VkIHRoZSBvZmZzZXQgYnkgZ29pbmcgb3ZlciBhIERTVCwgYnV0IHdlIHdhbnQgdG8ga2VlcCB0aGUgdHMgdGhlIHNhbWVcblxuICAgIG8gPSBpbnN0LnpvbmUub2Zmc2V0KHRzKTtcbiAgfVxuXG4gIHJldHVybiB7XG4gICAgdHM6IHRzLFxuICAgIG86IG9cbiAgfTtcbn0gLy8gaGVscGVyIHVzZWZ1bCBpbiB0dXJuaW5nIHRoZSByZXN1bHRzIG9mIHBhcnNpbmcgaW50byByZWFsIGRhdGVzXG4vLyBieSBoYW5kbGluZyB0aGUgem9uZSBvcHRpb25zXG5cblxuZnVuY3Rpb24gcGFyc2VEYXRhVG9EYXRlVGltZShwYXJzZWQsIHBhcnNlZFpvbmUsIG9wdHMsIGZvcm1hdCwgdGV4dCwgc3BlY2lmaWNPZmZzZXQpIHtcbiAgdmFyIHNldFpvbmUgPSBvcHRzLnNldFpvbmUsXG4gICAgICB6b25lID0gb3B0cy56b25lO1xuXG4gIGlmIChwYXJzZWQgJiYgT2JqZWN0LmtleXMocGFyc2VkKS5sZW5ndGggIT09IDApIHtcbiAgICB2YXIgaW50ZXJwcmV0YXRpb25ab25lID0gcGFyc2VkWm9uZSB8fCB6b25lLFxuICAgICAgICBpbnN0ID0gRGF0ZVRpbWUuZnJvbU9iamVjdChwYXJzZWQsIF9leHRlbmRzKHt9LCBvcHRzLCB7XG4gICAgICB6b25lOiBpbnRlcnByZXRhdGlvblpvbmUsXG4gICAgICBzcGVjaWZpY09mZnNldDogc3BlY2lmaWNPZmZzZXRcbiAgICB9KSk7XG4gICAgcmV0dXJuIHNldFpvbmUgPyBpbnN0IDogaW5zdC5zZXRab25lKHpvbmUpO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiBEYXRlVGltZS5pbnZhbGlkKG5ldyBJbnZhbGlkKFwidW5wYXJzYWJsZVwiLCBcInRoZSBpbnB1dCBcXFwiXCIgKyB0ZXh0ICsgXCJcXFwiIGNhbid0IGJlIHBhcnNlZCBhcyBcIiArIGZvcm1hdCkpO1xuICB9XG59IC8vIGlmIHlvdSB3YW50IHRvIG91dHB1dCBhIHRlY2huaWNhbCBmb3JtYXQgKGUuZy4gUkZDIDI4MjIpLCB0aGlzIGhlbHBlclxuLy8gaGVscHMgaGFuZGxlIHRoZSBkZXRhaWxzXG5cblxuZnVuY3Rpb24gdG9UZWNoRm9ybWF0KGR0LCBmb3JtYXQsIGFsbG93Wikge1xuICBpZiAoYWxsb3daID09PSB2b2lkIDApIHtcbiAgICBhbGxvd1ogPSB0cnVlO1xuICB9XG5cbiAgcmV0dXJuIGR0LmlzVmFsaWQgPyBGb3JtYXR0ZXIuY3JlYXRlKExvY2FsZS5jcmVhdGUoXCJlbi1VU1wiKSwge1xuICAgIGFsbG93WjogYWxsb3daLFxuICAgIGZvcmNlU2ltcGxlOiB0cnVlXG4gIH0pLmZvcm1hdERhdGVUaW1lRnJvbVN0cmluZyhkdCwgZm9ybWF0KSA6IG51bGw7XG59XG5cbmZ1bmN0aW9uIF90b0lTT0RhdGUobywgZXh0ZW5kZWQpIHtcbiAgdmFyIGxvbmdGb3JtYXQgPSBvLmMueWVhciA+IDk5OTkgfHwgby5jLnllYXIgPCAwO1xuICB2YXIgYyA9IFwiXCI7XG4gIGlmIChsb25nRm9ybWF0ICYmIG8uYy55ZWFyID49IDApIGMgKz0gXCIrXCI7XG4gIGMgKz0gcGFkU3RhcnQoby5jLnllYXIsIGxvbmdGb3JtYXQgPyA2IDogNCk7XG5cbiAgaWYgKGV4dGVuZGVkKSB7XG4gICAgYyArPSBcIi1cIjtcbiAgICBjICs9IHBhZFN0YXJ0KG8uYy5tb250aCk7XG4gICAgYyArPSBcIi1cIjtcbiAgICBjICs9IHBhZFN0YXJ0KG8uYy5kYXkpO1xuICB9IGVsc2Uge1xuICAgIGMgKz0gcGFkU3RhcnQoby5jLm1vbnRoKTtcbiAgICBjICs9IHBhZFN0YXJ0KG8uYy5kYXkpO1xuICB9XG5cbiAgcmV0dXJuIGM7XG59XG5cbmZ1bmN0aW9uIF90b0lTT1RpbWUobywgZXh0ZW5kZWQsIHN1cHByZXNzU2Vjb25kcywgc3VwcHJlc3NNaWxsaXNlY29uZHMsIGluY2x1ZGVPZmZzZXQpIHtcbiAgdmFyIGMgPSBwYWRTdGFydChvLmMuaG91cik7XG5cbiAgaWYgKGV4dGVuZGVkKSB7XG4gICAgYyArPSBcIjpcIjtcbiAgICBjICs9IHBhZFN0YXJ0KG8uYy5taW51dGUpO1xuXG4gICAgaWYgKG8uYy5zZWNvbmQgIT09IDAgfHwgIXN1cHByZXNzU2Vjb25kcykge1xuICAgICAgYyArPSBcIjpcIjtcbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgYyArPSBwYWRTdGFydChvLmMubWludXRlKTtcbiAgfVxuXG4gIGlmIChvLmMuc2Vjb25kICE9PSAwIHx8ICFzdXBwcmVzc1NlY29uZHMpIHtcbiAgICBjICs9IHBhZFN0YXJ0KG8uYy5zZWNvbmQpO1xuXG4gICAgaWYgKG8uYy5taWxsaXNlY29uZCAhPT0gMCB8fCAhc3VwcHJlc3NNaWxsaXNlY29uZHMpIHtcbiAgICAgIGMgKz0gXCIuXCI7XG4gICAgICBjICs9IHBhZFN0YXJ0KG8uYy5taWxsaXNlY29uZCwgMyk7XG4gICAgfVxuICB9XG5cbiAgaWYgKGluY2x1ZGVPZmZzZXQpIHtcbiAgICBpZiAoby5pc09mZnNldEZpeGVkICYmIG8ub2Zmc2V0ID09PSAwKSB7XG4gICAgICBjICs9IFwiWlwiO1xuICAgIH0gZWxzZSBpZiAoby5vIDwgMCkge1xuICAgICAgYyArPSBcIi1cIjtcbiAgICAgIGMgKz0gcGFkU3RhcnQoTWF0aC50cnVuYygtby5vIC8gNjApKTtcbiAgICAgIGMgKz0gXCI6XCI7XG4gICAgICBjICs9IHBhZFN0YXJ0KE1hdGgudHJ1bmMoLW8ubyAlIDYwKSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGMgKz0gXCIrXCI7XG4gICAgICBjICs9IHBhZFN0YXJ0KE1hdGgudHJ1bmMoby5vIC8gNjApKTtcbiAgICAgIGMgKz0gXCI6XCI7XG4gICAgICBjICs9IHBhZFN0YXJ0KE1hdGgudHJ1bmMoby5vICUgNjApKTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gYztcbn0gLy8gZGVmYXVsdHMgZm9yIHVuc3BlY2lmaWVkIHVuaXRzIGluIHRoZSBzdXBwb3J0ZWQgY2FsZW5kYXJzXG5cblxudmFyIGRlZmF1bHRVbml0VmFsdWVzID0ge1xuICBtb250aDogMSxcbiAgZGF5OiAxLFxuICBob3VyOiAwLFxuICBtaW51dGU6IDAsXG4gIHNlY29uZDogMCxcbiAgbWlsbGlzZWNvbmQ6IDBcbn0sXG4gICAgZGVmYXVsdFdlZWtVbml0VmFsdWVzID0ge1xuICB3ZWVrTnVtYmVyOiAxLFxuICB3ZWVrZGF5OiAxLFxuICBob3VyOiAwLFxuICBtaW51dGU6IDAsXG4gIHNlY29uZDogMCxcbiAgbWlsbGlzZWNvbmQ6IDBcbn0sXG4gICAgZGVmYXVsdE9yZGluYWxVbml0VmFsdWVzID0ge1xuICBvcmRpbmFsOiAxLFxuICBob3VyOiAwLFxuICBtaW51dGU6IDAsXG4gIHNlY29uZDogMCxcbiAgbWlsbGlzZWNvbmQ6IDBcbn07IC8vIFVuaXRzIGluIHRoZSBzdXBwb3J0ZWQgY2FsZW5kYXJzLCBzb3J0ZWQgYnkgYmlnbmVzc1xuXG52YXIgb3JkZXJlZFVuaXRzID0gW1wieWVhclwiLCBcIm1vbnRoXCIsIFwiZGF5XCIsIFwiaG91clwiLCBcIm1pbnV0ZVwiLCBcInNlY29uZFwiLCBcIm1pbGxpc2Vjb25kXCJdLFxuICAgIG9yZGVyZWRXZWVrVW5pdHMgPSBbXCJ3ZWVrWWVhclwiLCBcIndlZWtOdW1iZXJcIiwgXCJ3ZWVrZGF5XCIsIFwiaG91clwiLCBcIm1pbnV0ZVwiLCBcInNlY29uZFwiLCBcIm1pbGxpc2Vjb25kXCJdLFxuICAgIG9yZGVyZWRPcmRpbmFsVW5pdHMgPSBbXCJ5ZWFyXCIsIFwib3JkaW5hbFwiLCBcImhvdXJcIiwgXCJtaW51dGVcIiwgXCJzZWNvbmRcIiwgXCJtaWxsaXNlY29uZFwiXTsgLy8gc3RhbmRhcmRpemUgY2FzZSBhbmQgcGx1cmFsaXR5IGluIHVuaXRzXG5cbmZ1bmN0aW9uIG5vcm1hbGl6ZVVuaXQodW5pdCkge1xuICB2YXIgbm9ybWFsaXplZCA9IHtcbiAgICB5ZWFyOiBcInllYXJcIixcbiAgICB5ZWFyczogXCJ5ZWFyXCIsXG4gICAgbW9udGg6IFwibW9udGhcIixcbiAgICBtb250aHM6IFwibW9udGhcIixcbiAgICBkYXk6IFwiZGF5XCIsXG4gICAgZGF5czogXCJkYXlcIixcbiAgICBob3VyOiBcImhvdXJcIixcbiAgICBob3VyczogXCJob3VyXCIsXG4gICAgbWludXRlOiBcIm1pbnV0ZVwiLFxuICAgIG1pbnV0ZXM6IFwibWludXRlXCIsXG4gICAgcXVhcnRlcjogXCJxdWFydGVyXCIsXG4gICAgcXVhcnRlcnM6IFwicXVhcnRlclwiLFxuICAgIHNlY29uZDogXCJzZWNvbmRcIixcbiAgICBzZWNvbmRzOiBcInNlY29uZFwiLFxuICAgIG1pbGxpc2Vjb25kOiBcIm1pbGxpc2Vjb25kXCIsXG4gICAgbWlsbGlzZWNvbmRzOiBcIm1pbGxpc2Vjb25kXCIsXG4gICAgd2Vla2RheTogXCJ3ZWVrZGF5XCIsXG4gICAgd2Vla2RheXM6IFwid2Vla2RheVwiLFxuICAgIHdlZWtudW1iZXI6IFwid2Vla051bWJlclwiLFxuICAgIHdlZWtzbnVtYmVyOiBcIndlZWtOdW1iZXJcIixcbiAgICB3ZWVrbnVtYmVyczogXCJ3ZWVrTnVtYmVyXCIsXG4gICAgd2Vla3llYXI6IFwid2Vla1llYXJcIixcbiAgICB3ZWVreWVhcnM6IFwid2Vla1llYXJcIixcbiAgICBvcmRpbmFsOiBcIm9yZGluYWxcIlxuICB9W3VuaXQudG9Mb3dlckNhc2UoKV07XG4gIGlmICghbm9ybWFsaXplZCkgdGhyb3cgbmV3IEludmFsaWRVbml0RXJyb3IodW5pdCk7XG4gIHJldHVybiBub3JtYWxpemVkO1xufSAvLyB0aGlzIGlzIGEgZHVtYmVkIGRvd24gdmVyc2lvbiBvZiBmcm9tT2JqZWN0KCkgdGhhdCBydW5zIGFib3V0IDYwJSBmYXN0ZXJcbi8vIGJ1dCBkb2Vzbid0IGRvIGFueSB2YWxpZGF0aW9uLCBtYWtlcyBhIGJ1bmNoIG9mIGFzc3VtcHRpb25zIGFib3V0IHdoYXQgdW5pdHNcbi8vIGFyZSBwcmVzZW50LCBhbmQgc28gb24uXG4vLyB0aGlzIGlzIGEgZHVtYmVkIGRvd24gdmVyc2lvbiBvZiBmcm9tT2JqZWN0KCkgdGhhdCBydW5zIGFib3V0IDYwJSBmYXN0ZXJcbi8vIGJ1dCBkb2Vzbid0IGRvIGFueSB2YWxpZGF0aW9uLCBtYWtlcyBhIGJ1bmNoIG9mIGFzc3VtcHRpb25zIGFib3V0IHdoYXQgdW5pdHNcbi8vIGFyZSBwcmVzZW50LCBhbmQgc28gb24uXG5cblxuZnVuY3Rpb24gcXVpY2tEVChvYmosIG9wdHMpIHtcbiAgdmFyIHpvbmUgPSBub3JtYWxpemVab25lKG9wdHMuem9uZSwgU2V0dGluZ3MuZGVmYXVsdFpvbmUpLFxuICAgICAgbG9jID0gTG9jYWxlLmZyb21PYmplY3Qob3B0cyksXG4gICAgICB0c05vdyA9IFNldHRpbmdzLm5vdygpO1xuICB2YXIgdHMsIG87IC8vIGFzc3VtZSB3ZSBoYXZlIHRoZSBoaWdoZXItb3JkZXIgdW5pdHNcblxuICBpZiAoIWlzVW5kZWZpbmVkKG9iai55ZWFyKSkge1xuICAgIGZvciAodmFyIF9pdGVyYXRvciA9IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyTG9vc2Uob3JkZXJlZFVuaXRzKSwgX3N0ZXA7ICEoX3N0ZXAgPSBfaXRlcmF0b3IoKSkuZG9uZTspIHtcbiAgICAgIHZhciB1ID0gX3N0ZXAudmFsdWU7XG5cbiAgICAgIGlmIChpc1VuZGVmaW5lZChvYmpbdV0pKSB7XG4gICAgICAgIG9ialt1XSA9IGRlZmF1bHRVbml0VmFsdWVzW3VdO1xuICAgICAgfVxuICAgIH1cblxuICAgIHZhciBpbnZhbGlkID0gaGFzSW52YWxpZEdyZWdvcmlhbkRhdGEob2JqKSB8fCBoYXNJbnZhbGlkVGltZURhdGEob2JqKTtcblxuICAgIGlmIChpbnZhbGlkKSB7XG4gICAgICByZXR1cm4gRGF0ZVRpbWUuaW52YWxpZChpbnZhbGlkKTtcbiAgICB9XG5cbiAgICB2YXIgb2Zmc2V0UHJvdmlzID0gem9uZS5vZmZzZXQodHNOb3cpO1xuXG4gICAgdmFyIF9vYmpUb1RTID0gb2JqVG9UUyhvYmosIG9mZnNldFByb3Zpcywgem9uZSk7XG5cbiAgICB0cyA9IF9vYmpUb1RTWzBdO1xuICAgIG8gPSBfb2JqVG9UU1sxXTtcbiAgfSBlbHNlIHtcbiAgICB0cyA9IHRzTm93O1xuICB9XG5cbiAgcmV0dXJuIG5ldyBEYXRlVGltZSh7XG4gICAgdHM6IHRzLFxuICAgIHpvbmU6IHpvbmUsXG4gICAgbG9jOiBsb2MsXG4gICAgbzogb1xuICB9KTtcbn1cblxuZnVuY3Rpb24gZGlmZlJlbGF0aXZlKHN0YXJ0LCBlbmQsIG9wdHMpIHtcbiAgdmFyIHJvdW5kID0gaXNVbmRlZmluZWQob3B0cy5yb3VuZCkgPyB0cnVlIDogb3B0cy5yb3VuZCxcbiAgICAgIGZvcm1hdCA9IGZ1bmN0aW9uIGZvcm1hdChjLCB1bml0KSB7XG4gICAgYyA9IHJvdW5kVG8oYywgcm91bmQgfHwgb3B0cy5jYWxlbmRhcnkgPyAwIDogMiwgdHJ1ZSk7XG4gICAgdmFyIGZvcm1hdHRlciA9IGVuZC5sb2MuY2xvbmUob3B0cykucmVsRm9ybWF0dGVyKG9wdHMpO1xuICAgIHJldHVybiBmb3JtYXR0ZXIuZm9ybWF0KGMsIHVuaXQpO1xuICB9LFxuICAgICAgZGlmZmVyID0gZnVuY3Rpb24gZGlmZmVyKHVuaXQpIHtcbiAgICBpZiAob3B0cy5jYWxlbmRhcnkpIHtcbiAgICAgIGlmICghZW5kLmhhc1NhbWUoc3RhcnQsIHVuaXQpKSB7XG4gICAgICAgIHJldHVybiBlbmQuc3RhcnRPZih1bml0KS5kaWZmKHN0YXJ0LnN0YXJ0T2YodW5pdCksIHVuaXQpLmdldCh1bml0KTtcbiAgICAgIH0gZWxzZSByZXR1cm4gMDtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIGVuZC5kaWZmKHN0YXJ0LCB1bml0KS5nZXQodW5pdCk7XG4gICAgfVxuICB9O1xuXG4gIGlmIChvcHRzLnVuaXQpIHtcbiAgICByZXR1cm4gZm9ybWF0KGRpZmZlcihvcHRzLnVuaXQpLCBvcHRzLnVuaXQpO1xuICB9XG5cbiAgZm9yICh2YXIgX2l0ZXJhdG9yMiA9IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyTG9vc2Uob3B0cy51bml0cyksIF9zdGVwMjsgIShfc3RlcDIgPSBfaXRlcmF0b3IyKCkpLmRvbmU7KSB7XG4gICAgdmFyIHVuaXQgPSBfc3RlcDIudmFsdWU7XG4gICAgdmFyIGNvdW50ID0gZGlmZmVyKHVuaXQpO1xuXG4gICAgaWYgKE1hdGguYWJzKGNvdW50KSA+PSAxKSB7XG4gICAgICByZXR1cm4gZm9ybWF0KGNvdW50LCB1bml0KTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gZm9ybWF0KHN0YXJ0ID4gZW5kID8gLTAgOiAwLCBvcHRzLnVuaXRzW29wdHMudW5pdHMubGVuZ3RoIC0gMV0pO1xufVxuXG5mdW5jdGlvbiBsYXN0T3B0cyhhcmdMaXN0KSB7XG4gIHZhciBvcHRzID0ge30sXG4gICAgICBhcmdzO1xuXG4gIGlmIChhcmdMaXN0Lmxlbmd0aCA+IDAgJiYgdHlwZW9mIGFyZ0xpc3RbYXJnTGlzdC5sZW5ndGggLSAxXSA9PT0gXCJvYmplY3RcIikge1xuICAgIG9wdHMgPSBhcmdMaXN0W2FyZ0xpc3QubGVuZ3RoIC0gMV07XG4gICAgYXJncyA9IEFycmF5LmZyb20oYXJnTGlzdCkuc2xpY2UoMCwgYXJnTGlzdC5sZW5ndGggLSAxKTtcbiAgfSBlbHNlIHtcbiAgICBhcmdzID0gQXJyYXkuZnJvbShhcmdMaXN0KTtcbiAgfVxuXG4gIHJldHVybiBbb3B0cywgYXJnc107XG59XG4vKipcbiAqIEEgRGF0ZVRpbWUgaXMgYW4gaW1tdXRhYmxlIGRhdGEgc3RydWN0dXJlIHJlcHJlc2VudGluZyBhIHNwZWNpZmljIGRhdGUgYW5kIHRpbWUgYW5kIGFjY29tcGFueWluZyBtZXRob2RzLiBJdCBjb250YWlucyBjbGFzcyBhbmQgaW5zdGFuY2UgbWV0aG9kcyBmb3IgY3JlYXRpbmcsIHBhcnNpbmcsIGludGVycm9nYXRpbmcsIHRyYW5zZm9ybWluZywgYW5kIGZvcm1hdHRpbmcgdGhlbS5cbiAqXG4gKiBBIERhdGVUaW1lIGNvbXByaXNlcyBvZjpcbiAqICogQSB0aW1lc3RhbXAuIEVhY2ggRGF0ZVRpbWUgaW5zdGFuY2UgcmVmZXJzIHRvIGEgc3BlY2lmaWMgbWlsbGlzZWNvbmQgb2YgdGhlIFVuaXggZXBvY2guXG4gKiAqIEEgdGltZSB6b25lLiBFYWNoIGluc3RhbmNlIGlzIGNvbnNpZGVyZWQgaW4gdGhlIGNvbnRleHQgb2YgYSBzcGVjaWZpYyB6b25lIChieSBkZWZhdWx0IHRoZSBsb2NhbCBzeXN0ZW0ncyB6b25lKS5cbiAqICogQ29uZmlndXJhdGlvbiBwcm9wZXJ0aWVzIHRoYXQgZWZmZWN0IGhvdyBvdXRwdXQgc3RyaW5ncyBhcmUgZm9ybWF0dGVkLCBzdWNoIGFzIGBsb2NhbGVgLCBgbnVtYmVyaW5nU3lzdGVtYCwgYW5kIGBvdXRwdXRDYWxlbmRhcmAuXG4gKlxuICogSGVyZSBpcyBhIGJyaWVmIG92ZXJ2aWV3IG9mIHRoZSBtb3N0IGNvbW1vbmx5IHVzZWQgZnVuY3Rpb25hbGl0eSBpdCBwcm92aWRlczpcbiAqXG4gKiAqICoqQ3JlYXRpb24qKjogVG8gY3JlYXRlIGEgRGF0ZVRpbWUgZnJvbSBpdHMgY29tcG9uZW50cywgdXNlIG9uZSBvZiBpdHMgZmFjdG9yeSBjbGFzcyBtZXRob2RzOiB7QGxpbmsgRGF0ZVRpbWUjbG9jYWx9LCB7QGxpbmsgRGF0ZVRpbWUjdXRjfSwgYW5kIChtb3N0IGZsZXhpYmx5KSB7QGxpbmsgRGF0ZVRpbWUjZnJvbU9iamVjdH0uIFRvIGNyZWF0ZSBvbmUgZnJvbSBhIHN0YW5kYXJkIHN0cmluZyBmb3JtYXQsIHVzZSB7QGxpbmsgRGF0ZVRpbWUjZnJvbUlTT30sIHtAbGluayBEYXRlVGltZSNmcm9tSFRUUH0sIGFuZCB7QGxpbmsgRGF0ZVRpbWUjZnJvbVJGQzI4MjJ9LiBUbyBjcmVhdGUgb25lIGZyb20gYSBjdXN0b20gc3RyaW5nIGZvcm1hdCwgdXNlIHtAbGluayBEYXRlVGltZSNmcm9tRm9ybWF0fS4gVG8gY3JlYXRlIG9uZSBmcm9tIGEgbmF0aXZlIEpTIGRhdGUsIHVzZSB7QGxpbmsgRGF0ZVRpbWUjZnJvbUpTRGF0ZX0uXG4gKiAqICoqR3JlZ29yaWFuIGNhbGVuZGFyIGFuZCB0aW1lKio6IFRvIGV4YW1pbmUgdGhlIEdyZWdvcmlhbiBwcm9wZXJ0aWVzIG9mIGEgRGF0ZVRpbWUgaW5kaXZpZHVhbGx5IChpLmUgYXMgb3Bwb3NlZCB0byBjb2xsZWN0aXZlbHkgdGhyb3VnaCB7QGxpbmsgRGF0ZVRpbWUjdG9PYmplY3R9KSwgdXNlIHRoZSB7QGxpbmsgRGF0ZVRpbWUjeWVhcn0sIHtAbGluayBEYXRlVGltZSNtb250aH0sXG4gKiB7QGxpbmsgRGF0ZVRpbWUjZGF5fSwge0BsaW5rIERhdGVUaW1lI2hvdXJ9LCB7QGxpbmsgRGF0ZVRpbWUjbWludXRlfSwge0BsaW5rIERhdGVUaW1lI3NlY29uZH0sIHtAbGluayBEYXRlVGltZSNtaWxsaXNlY29uZH0gYWNjZXNzb3JzLlxuICogKiAqKldlZWsgY2FsZW5kYXIqKjogRm9yIElTTyB3ZWVrIGNhbGVuZGFyIGF0dHJpYnV0ZXMsIHNlZSB0aGUge0BsaW5rIERhdGVUaW1lI3dlZWtZZWFyfSwge0BsaW5rIERhdGVUaW1lI3dlZWtOdW1iZXJ9LCBhbmQge0BsaW5rIERhdGVUaW1lI3dlZWtkYXl9IGFjY2Vzc29ycy5cbiAqICogKipDb25maWd1cmF0aW9uKiogU2VlIHRoZSB7QGxpbmsgRGF0ZVRpbWUjbG9jYWxlfSBhbmQge0BsaW5rIERhdGVUaW1lI251bWJlcmluZ1N5c3RlbX0gYWNjZXNzb3JzLlxuICogKiAqKlRyYW5zZm9ybWF0aW9uKio6IFRvIHRyYW5zZm9ybSB0aGUgRGF0ZVRpbWUgaW50byBvdGhlciBEYXRlVGltZXMsIHVzZSB7QGxpbmsgRGF0ZVRpbWUjc2V0fSwge0BsaW5rIERhdGVUaW1lI3JlY29uZmlndXJlfSwge0BsaW5rIERhdGVUaW1lI3NldFpvbmV9LCB7QGxpbmsgRGF0ZVRpbWUjc2V0TG9jYWxlfSwge0BsaW5rIERhdGVUaW1lLnBsdXN9LCB7QGxpbmsgRGF0ZVRpbWUjbWludXN9LCB7QGxpbmsgRGF0ZVRpbWUjZW5kT2Z9LCB7QGxpbmsgRGF0ZVRpbWUjc3RhcnRPZn0sIHtAbGluayBEYXRlVGltZSN0b1VUQ30sIGFuZCB7QGxpbmsgRGF0ZVRpbWUjdG9Mb2NhbH0uXG4gKiAqICoqT3V0cHV0Kio6IFRvIGNvbnZlcnQgdGhlIERhdGVUaW1lIHRvIG90aGVyIHJlcHJlc2VudGF0aW9ucywgdXNlIHRoZSB7QGxpbmsgRGF0ZVRpbWUjdG9SZWxhdGl2ZX0sIHtAbGluayBEYXRlVGltZSN0b1JlbGF0aXZlQ2FsZW5kYXJ9LCB7QGxpbmsgRGF0ZVRpbWUjdG9KU09OfSwge0BsaW5rIERhdGVUaW1lI3RvSVNPfSwge0BsaW5rIERhdGVUaW1lI3RvSFRUUH0sIHtAbGluayBEYXRlVGltZSN0b09iamVjdH0sIHtAbGluayBEYXRlVGltZSN0b1JGQzI4MjJ9LCB7QGxpbmsgRGF0ZVRpbWUjdG9TdHJpbmd9LCB7QGxpbmsgRGF0ZVRpbWUjdG9Mb2NhbGVTdHJpbmd9LCB7QGxpbmsgRGF0ZVRpbWUjdG9Gb3JtYXR9LCB7QGxpbmsgRGF0ZVRpbWUjdG9NaWxsaXN9IGFuZCB7QGxpbmsgRGF0ZVRpbWUjdG9KU0RhdGV9LlxuICpcbiAqIFRoZXJlJ3MgcGxlbnR5IG90aGVycyBkb2N1bWVudGVkIGJlbG93LiBJbiBhZGRpdGlvbiwgZm9yIG1vcmUgaW5mb3JtYXRpb24gb24gc3VidGxlciB0b3BpY3MgbGlrZSBpbnRlcm5hdGlvbmFsaXphdGlvbiwgdGltZSB6b25lcywgYWx0ZXJuYXRpdmUgY2FsZW5kYXJzLCB2YWxpZGl0eSwgYW5kIHNvIG9uLCBzZWUgdGhlIGV4dGVybmFsIGRvY3VtZW50YXRpb24uXG4gKi9cblxuXG52YXIgRGF0ZVRpbWUgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkge1xuICAvKipcbiAgICogQGFjY2VzcyBwcml2YXRlXG4gICAqL1xuICBmdW5jdGlvbiBEYXRlVGltZShjb25maWcpIHtcbiAgICB2YXIgem9uZSA9IGNvbmZpZy56b25lIHx8IFNldHRpbmdzLmRlZmF1bHRab25lO1xuICAgIHZhciBpbnZhbGlkID0gY29uZmlnLmludmFsaWQgfHwgKE51bWJlci5pc05hTihjb25maWcudHMpID8gbmV3IEludmFsaWQoXCJpbnZhbGlkIGlucHV0XCIpIDogbnVsbCkgfHwgKCF6b25lLmlzVmFsaWQgPyB1bnN1cHBvcnRlZFpvbmUoem9uZSkgOiBudWxsKTtcbiAgICAvKipcbiAgICAgKiBAYWNjZXNzIHByaXZhdGVcbiAgICAgKi9cblxuICAgIHRoaXMudHMgPSBpc1VuZGVmaW5lZChjb25maWcudHMpID8gU2V0dGluZ3Mubm93KCkgOiBjb25maWcudHM7XG4gICAgdmFyIGMgPSBudWxsLFxuICAgICAgICBvID0gbnVsbDtcblxuICAgIGlmICghaW52YWxpZCkge1xuICAgICAgdmFyIHVuY2hhbmdlZCA9IGNvbmZpZy5vbGQgJiYgY29uZmlnLm9sZC50cyA9PT0gdGhpcy50cyAmJiBjb25maWcub2xkLnpvbmUuZXF1YWxzKHpvbmUpO1xuXG4gICAgICBpZiAodW5jaGFuZ2VkKSB7XG4gICAgICAgIHZhciBfcmVmID0gW2NvbmZpZy5vbGQuYywgY29uZmlnLm9sZC5vXTtcbiAgICAgICAgYyA9IF9yZWZbMF07XG4gICAgICAgIG8gPSBfcmVmWzFdO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdmFyIG90ID0gem9uZS5vZmZzZXQodGhpcy50cyk7XG4gICAgICAgIGMgPSB0c1RvT2JqKHRoaXMudHMsIG90KTtcbiAgICAgICAgaW52YWxpZCA9IE51bWJlci5pc05hTihjLnllYXIpID8gbmV3IEludmFsaWQoXCJpbnZhbGlkIGlucHV0XCIpIDogbnVsbDtcbiAgICAgICAgYyA9IGludmFsaWQgPyBudWxsIDogYztcbiAgICAgICAgbyA9IGludmFsaWQgPyBudWxsIDogb3Q7XG4gICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBhY2Nlc3MgcHJpdmF0ZVxuICAgICAqL1xuXG5cbiAgICB0aGlzLl96b25lID0gem9uZTtcbiAgICAvKipcbiAgICAgKiBAYWNjZXNzIHByaXZhdGVcbiAgICAgKi9cblxuICAgIHRoaXMubG9jID0gY29uZmlnLmxvYyB8fCBMb2NhbGUuY3JlYXRlKCk7XG4gICAgLyoqXG4gICAgICogQGFjY2VzcyBwcml2YXRlXG4gICAgICovXG5cbiAgICB0aGlzLmludmFsaWQgPSBpbnZhbGlkO1xuICAgIC8qKlxuICAgICAqIEBhY2Nlc3MgcHJpdmF0ZVxuICAgICAqL1xuXG4gICAgdGhpcy53ZWVrRGF0YSA9IG51bGw7XG4gICAgLyoqXG4gICAgICogQGFjY2VzcyBwcml2YXRlXG4gICAgICovXG5cbiAgICB0aGlzLmMgPSBjO1xuICAgIC8qKlxuICAgICAqIEBhY2Nlc3MgcHJpdmF0ZVxuICAgICAqL1xuXG4gICAgdGhpcy5vID0gbztcbiAgICAvKipcbiAgICAgKiBAYWNjZXNzIHByaXZhdGVcbiAgICAgKi9cblxuICAgIHRoaXMuaXNMdXhvbkRhdGVUaW1lID0gdHJ1ZTtcbiAgfSAvLyBDT05TVFJVQ1RcblxuICAvKipcbiAgICogQ3JlYXRlIGEgRGF0ZVRpbWUgZm9yIHRoZSBjdXJyZW50IGluc3RhbnQsIGluIHRoZSBzeXN0ZW0ncyB0aW1lIHpvbmUuXG4gICAqXG4gICAqIFVzZSBTZXR0aW5ncyB0byBvdmVycmlkZSB0aGVzZSBkZWZhdWx0IHZhbHVlcyBpZiBuZWVkZWQuXG4gICAqIEBleGFtcGxlIERhdGVUaW1lLm5vdygpLnRvSVNPKCkgLy9+PiBub3cgaW4gdGhlIElTTyBmb3JtYXRcbiAgICogQHJldHVybiB7RGF0ZVRpbWV9XG4gICAqL1xuXG5cbiAgRGF0ZVRpbWUubm93ID0gZnVuY3Rpb24gbm93KCkge1xuICAgIHJldHVybiBuZXcgRGF0ZVRpbWUoe30pO1xuICB9XG4gIC8qKlxuICAgKiBDcmVhdGUgYSBsb2NhbCBEYXRlVGltZVxuICAgKiBAcGFyYW0ge251bWJlcn0gW3llYXJdIC0gVGhlIGNhbGVuZGFyIHllYXIuIElmIG9taXR0ZWQgKGFzIGluLCBjYWxsIGBsb2NhbCgpYCB3aXRoIG5vIGFyZ3VtZW50cyksIHRoZSBjdXJyZW50IHRpbWUgd2lsbCBiZSB1c2VkXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBbbW9udGg9MV0gLSBUaGUgbW9udGgsIDEtaW5kZXhlZFxuICAgKiBAcGFyYW0ge251bWJlcn0gW2RheT0xXSAtIFRoZSBkYXkgb2YgdGhlIG1vbnRoLCAxLWluZGV4ZWRcbiAgICogQHBhcmFtIHtudW1iZXJ9IFtob3VyPTBdIC0gVGhlIGhvdXIgb2YgdGhlIGRheSwgaW4gMjQtaG91ciB0aW1lXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBbbWludXRlPTBdIC0gVGhlIG1pbnV0ZSBvZiB0aGUgaG91ciwgbWVhbmluZyBhIG51bWJlciBiZXR3ZWVuIDAgYW5kIDU5XG4gICAqIEBwYXJhbSB7bnVtYmVyfSBbc2Vjb25kPTBdIC0gVGhlIHNlY29uZCBvZiB0aGUgbWludXRlLCBtZWFuaW5nIGEgbnVtYmVyIGJldHdlZW4gMCBhbmQgNTlcbiAgICogQHBhcmFtIHtudW1iZXJ9IFttaWxsaXNlY29uZD0wXSAtIFRoZSBtaWxsaXNlY29uZCBvZiB0aGUgc2Vjb25kLCBtZWFuaW5nIGEgbnVtYmVyIGJldHdlZW4gMCBhbmQgOTk5XG4gICAqIEBleGFtcGxlIERhdGVUaW1lLmxvY2FsKCkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9+PiBub3dcbiAgICogQGV4YW1wbGUgRGF0ZVRpbWUubG9jYWwoeyB6b25lOiBcIkFtZXJpY2EvTmV3X1lvcmtcIiB9KSAgICAgIC8vfj4gbm93LCBpbiBVUyBlYXN0IGNvYXN0IHRpbWVcbiAgICogQGV4YW1wbGUgRGF0ZVRpbWUubG9jYWwoMjAxNykgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL34+IDIwMTctMDEtMDFUMDA6MDA6MDBcbiAgICogQGV4YW1wbGUgRGF0ZVRpbWUubG9jYWwoMjAxNywgMykgICAgICAgICAgICAgICAgICAgICAgICAgICAvL34+IDIwMTctMDMtMDFUMDA6MDA6MDBcbiAgICogQGV4YW1wbGUgRGF0ZVRpbWUubG9jYWwoMjAxNywgMywgMTIsIHsgbG9jYWxlOiBcImZyXCIgfSkgICAgIC8vfj4gMjAxNy0wMy0xMlQwMDowMDowMCwgd2l0aCBhIEZyZW5jaCBsb2NhbGVcbiAgICogQGV4YW1wbGUgRGF0ZVRpbWUubG9jYWwoMjAxNywgMywgMTIsIDUpICAgICAgICAgICAgICAgICAgICAvL34+IDIwMTctMDMtMTJUMDU6MDA6MDBcbiAgICogQGV4YW1wbGUgRGF0ZVRpbWUubG9jYWwoMjAxNywgMywgMTIsIDUsIHsgem9uZTogXCJ1dGNcIiB9KSAgIC8vfj4gMjAxNy0wMy0xMlQwNTowMDowMCwgaW4gVVRDXG4gICAqIEBleGFtcGxlIERhdGVUaW1lLmxvY2FsKDIwMTcsIDMsIDEyLCA1LCA0NSkgICAgICAgICAgICAgICAgLy9+PiAyMDE3LTAzLTEyVDA1OjQ1OjAwXG4gICAqIEBleGFtcGxlIERhdGVUaW1lLmxvY2FsKDIwMTcsIDMsIDEyLCA1LCA0NSwgMTApICAgICAgICAgICAgLy9+PiAyMDE3LTAzLTEyVDA1OjQ1OjEwXG4gICAqIEBleGFtcGxlIERhdGVUaW1lLmxvY2FsKDIwMTcsIDMsIDEyLCA1LCA0NSwgMTAsIDc2NSkgICAgICAgLy9+PiAyMDE3LTAzLTEyVDA1OjQ1OjEwLjc2NVxuICAgKiBAcmV0dXJuIHtEYXRlVGltZX1cbiAgICovXG4gIDtcblxuICBEYXRlVGltZS5sb2NhbCA9IGZ1bmN0aW9uIGxvY2FsKCkge1xuICAgIHZhciBfbGFzdE9wdHMgPSBsYXN0T3B0cyhhcmd1bWVudHMpLFxuICAgICAgICBvcHRzID0gX2xhc3RPcHRzWzBdLFxuICAgICAgICBhcmdzID0gX2xhc3RPcHRzWzFdLFxuICAgICAgICB5ZWFyID0gYXJnc1swXSxcbiAgICAgICAgbW9udGggPSBhcmdzWzFdLFxuICAgICAgICBkYXkgPSBhcmdzWzJdLFxuICAgICAgICBob3VyID0gYXJnc1szXSxcbiAgICAgICAgbWludXRlID0gYXJnc1s0XSxcbiAgICAgICAgc2Vjb25kID0gYXJnc1s1XSxcbiAgICAgICAgbWlsbGlzZWNvbmQgPSBhcmdzWzZdO1xuXG4gICAgcmV0dXJuIHF1aWNrRFQoe1xuICAgICAgeWVhcjogeWVhcixcbiAgICAgIG1vbnRoOiBtb250aCxcbiAgICAgIGRheTogZGF5LFxuICAgICAgaG91cjogaG91cixcbiAgICAgIG1pbnV0ZTogbWludXRlLFxuICAgICAgc2Vjb25kOiBzZWNvbmQsXG4gICAgICBtaWxsaXNlY29uZDogbWlsbGlzZWNvbmRcbiAgICB9LCBvcHRzKTtcbiAgfVxuICAvKipcbiAgICogQ3JlYXRlIGEgRGF0ZVRpbWUgaW4gVVRDXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBbeWVhcl0gLSBUaGUgY2FsZW5kYXIgeWVhci4gSWYgb21pdHRlZCAoYXMgaW4sIGNhbGwgYHV0YygpYCB3aXRoIG5vIGFyZ3VtZW50cyksIHRoZSBjdXJyZW50IHRpbWUgd2lsbCBiZSB1c2VkXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBbbW9udGg9MV0gLSBUaGUgbW9udGgsIDEtaW5kZXhlZFxuICAgKiBAcGFyYW0ge251bWJlcn0gW2RheT0xXSAtIFRoZSBkYXkgb2YgdGhlIG1vbnRoXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBbaG91cj0wXSAtIFRoZSBob3VyIG9mIHRoZSBkYXksIGluIDI0LWhvdXIgdGltZVxuICAgKiBAcGFyYW0ge251bWJlcn0gW21pbnV0ZT0wXSAtIFRoZSBtaW51dGUgb2YgdGhlIGhvdXIsIG1lYW5pbmcgYSBudW1iZXIgYmV0d2VlbiAwIGFuZCA1OVxuICAgKiBAcGFyYW0ge251bWJlcn0gW3NlY29uZD0wXSAtIFRoZSBzZWNvbmQgb2YgdGhlIG1pbnV0ZSwgbWVhbmluZyBhIG51bWJlciBiZXR3ZWVuIDAgYW5kIDU5XG4gICAqIEBwYXJhbSB7bnVtYmVyfSBbbWlsbGlzZWNvbmQ9MF0gLSBUaGUgbWlsbGlzZWNvbmQgb2YgdGhlIHNlY29uZCwgbWVhbmluZyBhIG51bWJlciBiZXR3ZWVuIDAgYW5kIDk5OVxuICAgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9ucyAtIGNvbmZpZ3VyYXRpb24gb3B0aW9ucyBmb3IgdGhlIERhdGVUaW1lXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBbb3B0aW9ucy5sb2NhbGVdIC0gYSBsb2NhbGUgdG8gc2V0IG9uIHRoZSByZXN1bHRpbmcgRGF0ZVRpbWUgaW5zdGFuY2VcbiAgICogQHBhcmFtIHtzdHJpbmd9IFtvcHRpb25zLm91dHB1dENhbGVuZGFyXSAtIHRoZSBvdXRwdXQgY2FsZW5kYXIgdG8gc2V0IG9uIHRoZSByZXN1bHRpbmcgRGF0ZVRpbWUgaW5zdGFuY2VcbiAgICogQHBhcmFtIHtzdHJpbmd9IFtvcHRpb25zLm51bWJlcmluZ1N5c3RlbV0gLSB0aGUgbnVtYmVyaW5nIHN5c3RlbSB0byBzZXQgb24gdGhlIHJlc3VsdGluZyBEYXRlVGltZSBpbnN0YW5jZVxuICAgKiBAZXhhbXBsZSBEYXRlVGltZS51dGMoKSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL34+IG5vd1xuICAgKiBAZXhhbXBsZSBEYXRlVGltZS51dGMoMjAxNykgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL34+IDIwMTctMDEtMDFUMDA6MDA6MDBaXG4gICAqIEBleGFtcGxlIERhdGVUaW1lLnV0YygyMDE3LCAzKSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vfj4gMjAxNy0wMy0wMVQwMDowMDowMFpcbiAgICogQGV4YW1wbGUgRGF0ZVRpbWUudXRjKDIwMTcsIDMsIDEyKSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9+PiAyMDE3LTAzLTEyVDAwOjAwOjAwWlxuICAgKiBAZXhhbXBsZSBEYXRlVGltZS51dGMoMjAxNywgMywgMTIsIDUpICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL34+IDIwMTctMDMtMTJUMDU6MDA6MDBaXG4gICAqIEBleGFtcGxlIERhdGVUaW1lLnV0YygyMDE3LCAzLCAxMiwgNSwgNDUpICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vfj4gMjAxNy0wMy0xMlQwNTo0NTowMFpcbiAgICogQGV4YW1wbGUgRGF0ZVRpbWUudXRjKDIwMTcsIDMsIDEyLCA1LCA0NSwgeyBsb2NhbGU6IFwiZnJcIiB9KSAgICAgICAgICAvL34+IDIwMTctMDMtMTJUMDU6NDU6MDBaIHdpdGggYSBGcmVuY2ggbG9jYWxlXG4gICAqIEBleGFtcGxlIERhdGVUaW1lLnV0YygyMDE3LCAzLCAxMiwgNSwgNDUsIDEwKSAgICAgICAgICAgICAgICAgICAgICAgIC8vfj4gMjAxNy0wMy0xMlQwNTo0NToxMFpcbiAgICogQGV4YW1wbGUgRGF0ZVRpbWUudXRjKDIwMTcsIDMsIDEyLCA1LCA0NSwgMTAsIDc2NSwgeyBsb2NhbGU6IFwiZnJcIiB9KSAvL34+IDIwMTctMDMtMTJUMDU6NDU6MTAuNzY1WiB3aXRoIGEgRnJlbmNoIGxvY2FsZVxuICAgKiBAcmV0dXJuIHtEYXRlVGltZX1cbiAgICovXG4gIDtcblxuICBEYXRlVGltZS51dGMgPSBmdW5jdGlvbiB1dGMoKSB7XG4gICAgdmFyIF9sYXN0T3B0czIgPSBsYXN0T3B0cyhhcmd1bWVudHMpLFxuICAgICAgICBvcHRzID0gX2xhc3RPcHRzMlswXSxcbiAgICAgICAgYXJncyA9IF9sYXN0T3B0czJbMV0sXG4gICAgICAgIHllYXIgPSBhcmdzWzBdLFxuICAgICAgICBtb250aCA9IGFyZ3NbMV0sXG4gICAgICAgIGRheSA9IGFyZ3NbMl0sXG4gICAgICAgIGhvdXIgPSBhcmdzWzNdLFxuICAgICAgICBtaW51dGUgPSBhcmdzWzRdLFxuICAgICAgICBzZWNvbmQgPSBhcmdzWzVdLFxuICAgICAgICBtaWxsaXNlY29uZCA9IGFyZ3NbNl07XG5cbiAgICBvcHRzLnpvbmUgPSBGaXhlZE9mZnNldFpvbmUudXRjSW5zdGFuY2U7XG4gICAgcmV0dXJuIHF1aWNrRFQoe1xuICAgICAgeWVhcjogeWVhcixcbiAgICAgIG1vbnRoOiBtb250aCxcbiAgICAgIGRheTogZGF5LFxuICAgICAgaG91cjogaG91cixcbiAgICAgIG1pbnV0ZTogbWludXRlLFxuICAgICAgc2Vjb25kOiBzZWNvbmQsXG4gICAgICBtaWxsaXNlY29uZDogbWlsbGlzZWNvbmRcbiAgICB9LCBvcHRzKTtcbiAgfVxuICAvKipcbiAgICogQ3JlYXRlIGEgRGF0ZVRpbWUgZnJvbSBhIEphdmFTY3JpcHQgRGF0ZSBvYmplY3QuIFVzZXMgdGhlIGRlZmF1bHQgem9uZS5cbiAgICogQHBhcmFtIHtEYXRlfSBkYXRlIC0gYSBKYXZhU2NyaXB0IERhdGUgb2JqZWN0XG4gICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zIC0gY29uZmlndXJhdGlvbiBvcHRpb25zIGZvciB0aGUgRGF0ZVRpbWVcbiAgICogQHBhcmFtIHtzdHJpbmd8Wm9uZX0gW29wdGlvbnMuem9uZT0nbG9jYWwnXSAtIHRoZSB6b25lIHRvIHBsYWNlIHRoZSBEYXRlVGltZSBpbnRvXG4gICAqIEByZXR1cm4ge0RhdGVUaW1lfVxuICAgKi9cbiAgO1xuXG4gIERhdGVUaW1lLmZyb21KU0RhdGUgPSBmdW5jdGlvbiBmcm9tSlNEYXRlKGRhdGUsIG9wdGlvbnMpIHtcbiAgICBpZiAob3B0aW9ucyA9PT0gdm9pZCAwKSB7XG4gICAgICBvcHRpb25zID0ge307XG4gICAgfVxuXG4gICAgdmFyIHRzID0gaXNEYXRlKGRhdGUpID8gZGF0ZS52YWx1ZU9mKCkgOiBOYU47XG5cbiAgICBpZiAoTnVtYmVyLmlzTmFOKHRzKSkge1xuICAgICAgcmV0dXJuIERhdGVUaW1lLmludmFsaWQoXCJpbnZhbGlkIGlucHV0XCIpO1xuICAgIH1cblxuICAgIHZhciB6b25lVG9Vc2UgPSBub3JtYWxpemVab25lKG9wdGlvbnMuem9uZSwgU2V0dGluZ3MuZGVmYXVsdFpvbmUpO1xuXG4gICAgaWYgKCF6b25lVG9Vc2UuaXNWYWxpZCkge1xuICAgICAgcmV0dXJuIERhdGVUaW1lLmludmFsaWQodW5zdXBwb3J0ZWRab25lKHpvbmVUb1VzZSkpO1xuICAgIH1cblxuICAgIHJldHVybiBuZXcgRGF0ZVRpbWUoe1xuICAgICAgdHM6IHRzLFxuICAgICAgem9uZTogem9uZVRvVXNlLFxuICAgICAgbG9jOiBMb2NhbGUuZnJvbU9iamVjdChvcHRpb25zKVxuICAgIH0pO1xuICB9XG4gIC8qKlxuICAgKiBDcmVhdGUgYSBEYXRlVGltZSBmcm9tIGEgbnVtYmVyIG9mIG1pbGxpc2Vjb25kcyBzaW5jZSB0aGUgZXBvY2ggKG1lYW5pbmcgc2luY2UgMSBKYW51YXJ5IDE5NzAgMDA6MDA6MDAgVVRDKS4gVXNlcyB0aGUgZGVmYXVsdCB6b25lLlxuICAgKiBAcGFyYW0ge251bWJlcn0gbWlsbGlzZWNvbmRzIC0gYSBudW1iZXIgb2YgbWlsbGlzZWNvbmRzIHNpbmNlIDE5NzAgVVRDXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zIC0gY29uZmlndXJhdGlvbiBvcHRpb25zIGZvciB0aGUgRGF0ZVRpbWVcbiAgICogQHBhcmFtIHtzdHJpbmd8Wm9uZX0gW29wdGlvbnMuem9uZT0nbG9jYWwnXSAtIHRoZSB6b25lIHRvIHBsYWNlIHRoZSBEYXRlVGltZSBpbnRvXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBbb3B0aW9ucy5sb2NhbGVdIC0gYSBsb2NhbGUgdG8gc2V0IG9uIHRoZSByZXN1bHRpbmcgRGF0ZVRpbWUgaW5zdGFuY2VcbiAgICogQHBhcmFtIHtzdHJpbmd9IG9wdGlvbnMub3V0cHV0Q2FsZW5kYXIgLSB0aGUgb3V0cHV0IGNhbGVuZGFyIHRvIHNldCBvbiB0aGUgcmVzdWx0aW5nIERhdGVUaW1lIGluc3RhbmNlXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBvcHRpb25zLm51bWJlcmluZ1N5c3RlbSAtIHRoZSBudW1iZXJpbmcgc3lzdGVtIHRvIHNldCBvbiB0aGUgcmVzdWx0aW5nIERhdGVUaW1lIGluc3RhbmNlXG4gICAqIEByZXR1cm4ge0RhdGVUaW1lfVxuICAgKi9cbiAgO1xuXG4gIERhdGVUaW1lLmZyb21NaWxsaXMgPSBmdW5jdGlvbiBmcm9tTWlsbGlzKG1pbGxpc2Vjb25kcywgb3B0aW9ucykge1xuICAgIGlmIChvcHRpb25zID09PSB2b2lkIDApIHtcbiAgICAgIG9wdGlvbnMgPSB7fTtcbiAgICB9XG5cbiAgICBpZiAoIWlzTnVtYmVyKG1pbGxpc2Vjb25kcykpIHtcbiAgICAgIHRocm93IG5ldyBJbnZhbGlkQXJndW1lbnRFcnJvcihcImZyb21NaWxsaXMgcmVxdWlyZXMgYSBudW1lcmljYWwgaW5wdXQsIGJ1dCByZWNlaXZlZCBhIFwiICsgdHlwZW9mIG1pbGxpc2Vjb25kcyArIFwiIHdpdGggdmFsdWUgXCIgKyBtaWxsaXNlY29uZHMpO1xuICAgIH0gZWxzZSBpZiAobWlsbGlzZWNvbmRzIDwgLU1BWF9EQVRFIHx8IG1pbGxpc2Vjb25kcyA+IE1BWF9EQVRFKSB7XG4gICAgICAvLyB0aGlzIGlzbid0IHBlcmZlY3QgYmVjYXVzZSBiZWNhdXNlIHdlIGNhbiBzdGlsbCBlbmQgdXAgb3V0IG9mIHJhbmdlIGJlY2F1c2Ugb2YgYWRkaXRpb25hbCBzaGlmdGluZywgYnV0IGl0J3MgYSBzdGFydFxuICAgICAgcmV0dXJuIERhdGVUaW1lLmludmFsaWQoXCJUaW1lc3RhbXAgb3V0IG9mIHJhbmdlXCIpO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gbmV3IERhdGVUaW1lKHtcbiAgICAgICAgdHM6IG1pbGxpc2Vjb25kcyxcbiAgICAgICAgem9uZTogbm9ybWFsaXplWm9uZShvcHRpb25zLnpvbmUsIFNldHRpbmdzLmRlZmF1bHRab25lKSxcbiAgICAgICAgbG9jOiBMb2NhbGUuZnJvbU9iamVjdChvcHRpb25zKVxuICAgICAgfSk7XG4gICAgfVxuICB9XG4gIC8qKlxuICAgKiBDcmVhdGUgYSBEYXRlVGltZSBmcm9tIGEgbnVtYmVyIG9mIHNlY29uZHMgc2luY2UgdGhlIGVwb2NoIChtZWFuaW5nIHNpbmNlIDEgSmFudWFyeSAxOTcwIDAwOjAwOjAwIFVUQykuIFVzZXMgdGhlIGRlZmF1bHQgem9uZS5cbiAgICogQHBhcmFtIHtudW1iZXJ9IHNlY29uZHMgLSBhIG51bWJlciBvZiBzZWNvbmRzIHNpbmNlIDE5NzAgVVRDXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zIC0gY29uZmlndXJhdGlvbiBvcHRpb25zIGZvciB0aGUgRGF0ZVRpbWVcbiAgICogQHBhcmFtIHtzdHJpbmd8Wm9uZX0gW29wdGlvbnMuem9uZT0nbG9jYWwnXSAtIHRoZSB6b25lIHRvIHBsYWNlIHRoZSBEYXRlVGltZSBpbnRvXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBbb3B0aW9ucy5sb2NhbGVdIC0gYSBsb2NhbGUgdG8gc2V0IG9uIHRoZSByZXN1bHRpbmcgRGF0ZVRpbWUgaW5zdGFuY2VcbiAgICogQHBhcmFtIHtzdHJpbmd9IG9wdGlvbnMub3V0cHV0Q2FsZW5kYXIgLSB0aGUgb3V0cHV0IGNhbGVuZGFyIHRvIHNldCBvbiB0aGUgcmVzdWx0aW5nIERhdGVUaW1lIGluc3RhbmNlXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBvcHRpb25zLm51bWJlcmluZ1N5c3RlbSAtIHRoZSBudW1iZXJpbmcgc3lzdGVtIHRvIHNldCBvbiB0aGUgcmVzdWx0aW5nIERhdGVUaW1lIGluc3RhbmNlXG4gICAqIEByZXR1cm4ge0RhdGVUaW1lfVxuICAgKi9cbiAgO1xuXG4gIERhdGVUaW1lLmZyb21TZWNvbmRzID0gZnVuY3Rpb24gZnJvbVNlY29uZHMoc2Vjb25kcywgb3B0aW9ucykge1xuICAgIGlmIChvcHRpb25zID09PSB2b2lkIDApIHtcbiAgICAgIG9wdGlvbnMgPSB7fTtcbiAgICB9XG5cbiAgICBpZiAoIWlzTnVtYmVyKHNlY29uZHMpKSB7XG4gICAgICB0aHJvdyBuZXcgSW52YWxpZEFyZ3VtZW50RXJyb3IoXCJmcm9tU2Vjb25kcyByZXF1aXJlcyBhIG51bWVyaWNhbCBpbnB1dFwiKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIG5ldyBEYXRlVGltZSh7XG4gICAgICAgIHRzOiBzZWNvbmRzICogMTAwMCxcbiAgICAgICAgem9uZTogbm9ybWFsaXplWm9uZShvcHRpb25zLnpvbmUsIFNldHRpbmdzLmRlZmF1bHRab25lKSxcbiAgICAgICAgbG9jOiBMb2NhbGUuZnJvbU9iamVjdChvcHRpb25zKVxuICAgICAgfSk7XG4gICAgfVxuICB9XG4gIC8qKlxuICAgKiBDcmVhdGUgYSBEYXRlVGltZSBmcm9tIGEgSmF2YVNjcmlwdCBvYmplY3Qgd2l0aCBrZXlzIGxpa2UgJ3llYXInIGFuZCAnaG91cicgd2l0aCByZWFzb25hYmxlIGRlZmF1bHRzLlxuICAgKiBAcGFyYW0ge09iamVjdH0gb2JqIC0gdGhlIG9iamVjdCB0byBjcmVhdGUgdGhlIERhdGVUaW1lIGZyb21cbiAgICogQHBhcmFtIHtudW1iZXJ9IG9iai55ZWFyIC0gYSB5ZWFyLCBzdWNoIGFzIDE5ODdcbiAgICogQHBhcmFtIHtudW1iZXJ9IG9iai5tb250aCAtIGEgbW9udGgsIDEtMTJcbiAgICogQHBhcmFtIHtudW1iZXJ9IG9iai5kYXkgLSBhIGRheSBvZiB0aGUgbW9udGgsIDEtMzEsIGRlcGVuZGluZyBvbiB0aGUgbW9udGhcbiAgICogQHBhcmFtIHtudW1iZXJ9IG9iai5vcmRpbmFsIC0gZGF5IG9mIHRoZSB5ZWFyLCAxLTM2NSBvciAzNjZcbiAgICogQHBhcmFtIHtudW1iZXJ9IG9iai53ZWVrWWVhciAtIGFuIElTTyB3ZWVrIHllYXJcbiAgICogQHBhcmFtIHtudW1iZXJ9IG9iai53ZWVrTnVtYmVyIC0gYW4gSVNPIHdlZWsgbnVtYmVyLCBiZXR3ZWVuIDEgYW5kIDUyIG9yIDUzLCBkZXBlbmRpbmcgb24gdGhlIHllYXJcbiAgICogQHBhcmFtIHtudW1iZXJ9IG9iai53ZWVrZGF5IC0gYW4gSVNPIHdlZWtkYXksIDEtNywgd2hlcmUgMSBpcyBNb25kYXkgYW5kIDcgaXMgU3VuZGF5XG4gICAqIEBwYXJhbSB7bnVtYmVyfSBvYmouaG91ciAtIGhvdXIgb2YgdGhlIGRheSwgMC0yM1xuICAgKiBAcGFyYW0ge251bWJlcn0gb2JqLm1pbnV0ZSAtIG1pbnV0ZSBvZiB0aGUgaG91ciwgMC01OVxuICAgKiBAcGFyYW0ge251bWJlcn0gb2JqLnNlY29uZCAtIHNlY29uZCBvZiB0aGUgbWludXRlLCAwLTU5XG4gICAqIEBwYXJhbSB7bnVtYmVyfSBvYmoubWlsbGlzZWNvbmQgLSBtaWxsaXNlY29uZCBvZiB0aGUgc2Vjb25kLCAwLTk5OVxuICAgKiBAcGFyYW0ge09iamVjdH0gb3B0cyAtIG9wdGlvbnMgZm9yIGNyZWF0aW5nIHRoaXMgRGF0ZVRpbWVcbiAgICogQHBhcmFtIHtzdHJpbmd8Wm9uZX0gW29wdHMuem9uZT0nbG9jYWwnXSAtIGludGVycHJldCB0aGUgbnVtYmVycyBpbiB0aGUgY29udGV4dCBvZiBhIHBhcnRpY3VsYXIgem9uZS4gQ2FuIHRha2UgYW55IHZhbHVlIHRha2VuIGFzIHRoZSBmaXJzdCBhcmd1bWVudCB0byBzZXRab25lKClcbiAgICogQHBhcmFtIHtzdHJpbmd9IFtvcHRzLmxvY2FsZT0nc3lzdGVtJ3MgbG9jYWxlJ10gLSBhIGxvY2FsZSB0byBzZXQgb24gdGhlIHJlc3VsdGluZyBEYXRlVGltZSBpbnN0YW5jZVxuICAgKiBAcGFyYW0ge3N0cmluZ30gb3B0cy5vdXRwdXRDYWxlbmRhciAtIHRoZSBvdXRwdXQgY2FsZW5kYXIgdG8gc2V0IG9uIHRoZSByZXN1bHRpbmcgRGF0ZVRpbWUgaW5zdGFuY2VcbiAgICogQHBhcmFtIHtzdHJpbmd9IG9wdHMubnVtYmVyaW5nU3lzdGVtIC0gdGhlIG51bWJlcmluZyBzeXN0ZW0gdG8gc2V0IG9uIHRoZSByZXN1bHRpbmcgRGF0ZVRpbWUgaW5zdGFuY2VcbiAgICogQGV4YW1wbGUgRGF0ZVRpbWUuZnJvbU9iamVjdCh7IHllYXI6IDE5ODIsIG1vbnRoOiA1LCBkYXk6IDI1fSkudG9JU09EYXRlKCkgLy89PiAnMTk4Mi0wNS0yNSdcbiAgICogQGV4YW1wbGUgRGF0ZVRpbWUuZnJvbU9iamVjdCh7IHllYXI6IDE5ODIgfSkudG9JU09EYXRlKCkgLy89PiAnMTk4Mi0wMS0wMSdcbiAgICogQGV4YW1wbGUgRGF0ZVRpbWUuZnJvbU9iamVjdCh7IGhvdXI6IDEwLCBtaW51dGU6IDI2LCBzZWNvbmQ6IDYgfSkgLy9+PiB0b2RheSBhdCAxMDoyNjowNlxuICAgKiBAZXhhbXBsZSBEYXRlVGltZS5mcm9tT2JqZWN0KHsgaG91cjogMTAsIG1pbnV0ZTogMjYsIHNlY29uZDogNiB9LCB7IHpvbmU6ICd1dGMnIH0pLFxuICAgKiBAZXhhbXBsZSBEYXRlVGltZS5mcm9tT2JqZWN0KHsgaG91cjogMTAsIG1pbnV0ZTogMjYsIHNlY29uZDogNiB9LCB7IHpvbmU6ICdsb2NhbCcgfSlcbiAgICogQGV4YW1wbGUgRGF0ZVRpbWUuZnJvbU9iamVjdCh7IGhvdXI6IDEwLCBtaW51dGU6IDI2LCBzZWNvbmQ6IDYgfSwgeyB6b25lOiAnQW1lcmljYS9OZXdfWW9yaycgfSlcbiAgICogQGV4YW1wbGUgRGF0ZVRpbWUuZnJvbU9iamVjdCh7IHdlZWtZZWFyOiAyMDE2LCB3ZWVrTnVtYmVyOiAyLCB3ZWVrZGF5OiAzIH0pLnRvSVNPRGF0ZSgpIC8vPT4gJzIwMTYtMDEtMTMnXG4gICAqIEByZXR1cm4ge0RhdGVUaW1lfVxuICAgKi9cbiAgO1xuXG4gIERhdGVUaW1lLmZyb21PYmplY3QgPSBmdW5jdGlvbiBmcm9tT2JqZWN0KG9iaiwgb3B0cykge1xuICAgIGlmIChvcHRzID09PSB2b2lkIDApIHtcbiAgICAgIG9wdHMgPSB7fTtcbiAgICB9XG5cbiAgICBvYmogPSBvYmogfHwge307XG4gICAgdmFyIHpvbmVUb1VzZSA9IG5vcm1hbGl6ZVpvbmUob3B0cy56b25lLCBTZXR0aW5ncy5kZWZhdWx0Wm9uZSk7XG5cbiAgICBpZiAoIXpvbmVUb1VzZS5pc1ZhbGlkKSB7XG4gICAgICByZXR1cm4gRGF0ZVRpbWUuaW52YWxpZCh1bnN1cHBvcnRlZFpvbmUoem9uZVRvVXNlKSk7XG4gICAgfVxuXG4gICAgdmFyIHRzTm93ID0gU2V0dGluZ3Mubm93KCksXG4gICAgICAgIG9mZnNldFByb3ZpcyA9ICFpc1VuZGVmaW5lZChvcHRzLnNwZWNpZmljT2Zmc2V0KSA/IG9wdHMuc3BlY2lmaWNPZmZzZXQgOiB6b25lVG9Vc2Uub2Zmc2V0KHRzTm93KSxcbiAgICAgICAgbm9ybWFsaXplZCA9IG5vcm1hbGl6ZU9iamVjdChvYmosIG5vcm1hbGl6ZVVuaXQpLFxuICAgICAgICBjb250YWluc09yZGluYWwgPSAhaXNVbmRlZmluZWQobm9ybWFsaXplZC5vcmRpbmFsKSxcbiAgICAgICAgY29udGFpbnNHcmVnb3JZZWFyID0gIWlzVW5kZWZpbmVkKG5vcm1hbGl6ZWQueWVhciksXG4gICAgICAgIGNvbnRhaW5zR3JlZ29yTUQgPSAhaXNVbmRlZmluZWQobm9ybWFsaXplZC5tb250aCkgfHwgIWlzVW5kZWZpbmVkKG5vcm1hbGl6ZWQuZGF5KSxcbiAgICAgICAgY29udGFpbnNHcmVnb3IgPSBjb250YWluc0dyZWdvclllYXIgfHwgY29udGFpbnNHcmVnb3JNRCxcbiAgICAgICAgZGVmaW5pdGVXZWVrRGVmID0gbm9ybWFsaXplZC53ZWVrWWVhciB8fCBub3JtYWxpemVkLndlZWtOdW1iZXIsXG4gICAgICAgIGxvYyA9IExvY2FsZS5mcm9tT2JqZWN0KG9wdHMpOyAvLyBjYXNlczpcbiAgICAvLyBqdXN0IGEgd2Vla2RheSAtPiB0aGlzIHdlZWsncyBpbnN0YW5jZSBvZiB0aGF0IHdlZWtkYXksIG5vIHdvcnJpZXNcbiAgICAvLyAoZ3JlZ29yaWFuIGRhdGEgb3Igb3JkaW5hbCkgKyAod2Vla1llYXIgb3Igd2Vla051bWJlcikgLT4gZXJyb3JcbiAgICAvLyAoZ3JlZ29yaWFuIG1vbnRoIG9yIGRheSkgKyBvcmRpbmFsIC0+IGVycm9yXG4gICAgLy8gb3RoZXJ3aXNlIGp1c3QgdXNlIHdlZWtzIG9yIG9yZGluYWxzIG9yIGdyZWdvcmlhbiwgZGVwZW5kaW5nIG9uIHdoYXQncyBzcGVjaWZpZWRcblxuICAgIGlmICgoY29udGFpbnNHcmVnb3IgfHwgY29udGFpbnNPcmRpbmFsKSAmJiBkZWZpbml0ZVdlZWtEZWYpIHtcbiAgICAgIHRocm93IG5ldyBDb25mbGljdGluZ1NwZWNpZmljYXRpb25FcnJvcihcIkNhbid0IG1peCB3ZWVrWWVhci93ZWVrTnVtYmVyIHVuaXRzIHdpdGggeWVhci9tb250aC9kYXkgb3Igb3JkaW5hbHNcIik7XG4gICAgfVxuXG4gICAgaWYgKGNvbnRhaW5zR3JlZ29yTUQgJiYgY29udGFpbnNPcmRpbmFsKSB7XG4gICAgICB0aHJvdyBuZXcgQ29uZmxpY3RpbmdTcGVjaWZpY2F0aW9uRXJyb3IoXCJDYW4ndCBtaXggb3JkaW5hbCBkYXRlcyB3aXRoIG1vbnRoL2RheVwiKTtcbiAgICB9XG5cbiAgICB2YXIgdXNlV2Vla0RhdGEgPSBkZWZpbml0ZVdlZWtEZWYgfHwgbm9ybWFsaXplZC53ZWVrZGF5ICYmICFjb250YWluc0dyZWdvcjsgLy8gY29uZmlndXJlIG91cnNlbHZlcyB0byBkZWFsIHdpdGggZ3JlZ29yaWFuIGRhdGVzIG9yIHdlZWsgc3R1ZmZcblxuICAgIHZhciB1bml0cyxcbiAgICAgICAgZGVmYXVsdFZhbHVlcyxcbiAgICAgICAgb2JqTm93ID0gdHNUb09iaih0c05vdywgb2Zmc2V0UHJvdmlzKTtcblxuICAgIGlmICh1c2VXZWVrRGF0YSkge1xuICAgICAgdW5pdHMgPSBvcmRlcmVkV2Vla1VuaXRzO1xuICAgICAgZGVmYXVsdFZhbHVlcyA9IGRlZmF1bHRXZWVrVW5pdFZhbHVlcztcbiAgICAgIG9iak5vdyA9IGdyZWdvcmlhblRvV2VlayhvYmpOb3cpO1xuICAgIH0gZWxzZSBpZiAoY29udGFpbnNPcmRpbmFsKSB7XG4gICAgICB1bml0cyA9IG9yZGVyZWRPcmRpbmFsVW5pdHM7XG4gICAgICBkZWZhdWx0VmFsdWVzID0gZGVmYXVsdE9yZGluYWxVbml0VmFsdWVzO1xuICAgICAgb2JqTm93ID0gZ3JlZ29yaWFuVG9PcmRpbmFsKG9iak5vdyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHVuaXRzID0gb3JkZXJlZFVuaXRzO1xuICAgICAgZGVmYXVsdFZhbHVlcyA9IGRlZmF1bHRVbml0VmFsdWVzO1xuICAgIH0gLy8gc2V0IGRlZmF1bHQgdmFsdWVzIGZvciBtaXNzaW5nIHN0dWZmXG5cblxuICAgIHZhciBmb3VuZEZpcnN0ID0gZmFsc2U7XG5cbiAgICBmb3IgKHZhciBfaXRlcmF0b3IzID0gX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXJMb29zZSh1bml0cyksIF9zdGVwMzsgIShfc3RlcDMgPSBfaXRlcmF0b3IzKCkpLmRvbmU7KSB7XG4gICAgICB2YXIgdSA9IF9zdGVwMy52YWx1ZTtcbiAgICAgIHZhciB2ID0gbm9ybWFsaXplZFt1XTtcblxuICAgICAgaWYgKCFpc1VuZGVmaW5lZCh2KSkge1xuICAgICAgICBmb3VuZEZpcnN0ID0gdHJ1ZTtcbiAgICAgIH0gZWxzZSBpZiAoZm91bmRGaXJzdCkge1xuICAgICAgICBub3JtYWxpemVkW3VdID0gZGVmYXVsdFZhbHVlc1t1XTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIG5vcm1hbGl6ZWRbdV0gPSBvYmpOb3dbdV07XG4gICAgICB9XG4gICAgfSAvLyBtYWtlIHN1cmUgdGhlIHZhbHVlcyB3ZSBoYXZlIGFyZSBpbiByYW5nZVxuXG5cbiAgICB2YXIgaGlnaGVyT3JkZXJJbnZhbGlkID0gdXNlV2Vla0RhdGEgPyBoYXNJbnZhbGlkV2Vla0RhdGEobm9ybWFsaXplZCkgOiBjb250YWluc09yZGluYWwgPyBoYXNJbnZhbGlkT3JkaW5hbERhdGEobm9ybWFsaXplZCkgOiBoYXNJbnZhbGlkR3JlZ29yaWFuRGF0YShub3JtYWxpemVkKSxcbiAgICAgICAgaW52YWxpZCA9IGhpZ2hlck9yZGVySW52YWxpZCB8fCBoYXNJbnZhbGlkVGltZURhdGEobm9ybWFsaXplZCk7XG5cbiAgICBpZiAoaW52YWxpZCkge1xuICAgICAgcmV0dXJuIERhdGVUaW1lLmludmFsaWQoaW52YWxpZCk7XG4gICAgfSAvLyBjb21wdXRlIHRoZSBhY3R1YWwgdGltZVxuXG5cbiAgICB2YXIgZ3JlZ29yaWFuID0gdXNlV2Vla0RhdGEgPyB3ZWVrVG9HcmVnb3JpYW4obm9ybWFsaXplZCkgOiBjb250YWluc09yZGluYWwgPyBvcmRpbmFsVG9HcmVnb3JpYW4obm9ybWFsaXplZCkgOiBub3JtYWxpemVkLFxuICAgICAgICBfb2JqVG9UUzIgPSBvYmpUb1RTKGdyZWdvcmlhbiwgb2Zmc2V0UHJvdmlzLCB6b25lVG9Vc2UpLFxuICAgICAgICB0c0ZpbmFsID0gX29ialRvVFMyWzBdLFxuICAgICAgICBvZmZzZXRGaW5hbCA9IF9vYmpUb1RTMlsxXSxcbiAgICAgICAgaW5zdCA9IG5ldyBEYXRlVGltZSh7XG4gICAgICB0czogdHNGaW5hbCxcbiAgICAgIHpvbmU6IHpvbmVUb1VzZSxcbiAgICAgIG86IG9mZnNldEZpbmFsLFxuICAgICAgbG9jOiBsb2NcbiAgICB9KTsgLy8gZ3JlZ29yaWFuIGRhdGEgKyB3ZWVrZGF5IHNlcnZlcyBvbmx5IHRvIHZhbGlkYXRlXG5cblxuICAgIGlmIChub3JtYWxpemVkLndlZWtkYXkgJiYgY29udGFpbnNHcmVnb3IgJiYgb2JqLndlZWtkYXkgIT09IGluc3Qud2Vla2RheSkge1xuICAgICAgcmV0dXJuIERhdGVUaW1lLmludmFsaWQoXCJtaXNtYXRjaGVkIHdlZWtkYXlcIiwgXCJ5b3UgY2FuJ3Qgc3BlY2lmeSBib3RoIGEgd2Vla2RheSBvZiBcIiArIG5vcm1hbGl6ZWQud2Vla2RheSArIFwiIGFuZCBhIGRhdGUgb2YgXCIgKyBpbnN0LnRvSVNPKCkpO1xuICAgIH1cblxuICAgIHJldHVybiBpbnN0O1xuICB9XG4gIC8qKlxuICAgKiBDcmVhdGUgYSBEYXRlVGltZSBmcm9tIGFuIElTTyA4NjAxIHN0cmluZ1xuICAgKiBAcGFyYW0ge3N0cmluZ30gdGV4dCAtIHRoZSBJU08gc3RyaW5nXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRzIC0gb3B0aW9ucyB0byBhZmZlY3QgdGhlIGNyZWF0aW9uXG4gICAqIEBwYXJhbSB7c3RyaW5nfFpvbmV9IFtvcHRzLnpvbmU9J2xvY2FsJ10gLSB1c2UgdGhpcyB6b25lIGlmIG5vIG9mZnNldCBpcyBzcGVjaWZpZWQgaW4gdGhlIGlucHV0IHN0cmluZyBpdHNlbGYuIFdpbGwgYWxzbyBjb252ZXJ0IHRoZSB0aW1lIHRvIHRoaXMgem9uZVxuICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHRzLnNldFpvbmU9ZmFsc2VdIC0gb3ZlcnJpZGUgdGhlIHpvbmUgd2l0aCBhIGZpeGVkLW9mZnNldCB6b25lIHNwZWNpZmllZCBpbiB0aGUgc3RyaW5nIGl0c2VsZiwgaWYgaXQgc3BlY2lmaWVzIG9uZVxuICAgKiBAcGFyYW0ge3N0cmluZ30gW29wdHMubG9jYWxlPSdzeXN0ZW0ncyBsb2NhbGUnXSAtIGEgbG9jYWxlIHRvIHNldCBvbiB0aGUgcmVzdWx0aW5nIERhdGVUaW1lIGluc3RhbmNlXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBbb3B0cy5vdXRwdXRDYWxlbmRhcl0gLSB0aGUgb3V0cHV0IGNhbGVuZGFyIHRvIHNldCBvbiB0aGUgcmVzdWx0aW5nIERhdGVUaW1lIGluc3RhbmNlXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBbb3B0cy5udW1iZXJpbmdTeXN0ZW1dIC0gdGhlIG51bWJlcmluZyBzeXN0ZW0gdG8gc2V0IG9uIHRoZSByZXN1bHRpbmcgRGF0ZVRpbWUgaW5zdGFuY2VcbiAgICogQGV4YW1wbGUgRGF0ZVRpbWUuZnJvbUlTTygnMjAxNi0wNS0yNVQwOTowODozNC4xMjMnKVxuICAgKiBAZXhhbXBsZSBEYXRlVGltZS5mcm9tSVNPKCcyMDE2LTA1LTI1VDA5OjA4OjM0LjEyMyswNjowMCcpXG4gICAqIEBleGFtcGxlIERhdGVUaW1lLmZyb21JU08oJzIwMTYtMDUtMjVUMDk6MDg6MzQuMTIzKzA2OjAwJywge3NldFpvbmU6IHRydWV9KVxuICAgKiBAZXhhbXBsZSBEYXRlVGltZS5mcm9tSVNPKCcyMDE2LTA1LTI1VDA5OjA4OjM0LjEyMycsIHt6b25lOiAndXRjJ30pXG4gICAqIEBleGFtcGxlIERhdGVUaW1lLmZyb21JU08oJzIwMTYtVzA1LTQnKVxuICAgKiBAcmV0dXJuIHtEYXRlVGltZX1cbiAgICovXG4gIDtcblxuICBEYXRlVGltZS5mcm9tSVNPID0gZnVuY3Rpb24gZnJvbUlTTyh0ZXh0LCBvcHRzKSB7XG4gICAgaWYgKG9wdHMgPT09IHZvaWQgMCkge1xuICAgICAgb3B0cyA9IHt9O1xuICAgIH1cblxuICAgIHZhciBfcGFyc2VJU09EYXRlID0gcGFyc2VJU09EYXRlKHRleHQpLFxuICAgICAgICB2YWxzID0gX3BhcnNlSVNPRGF0ZVswXSxcbiAgICAgICAgcGFyc2VkWm9uZSA9IF9wYXJzZUlTT0RhdGVbMV07XG5cbiAgICByZXR1cm4gcGFyc2VEYXRhVG9EYXRlVGltZSh2YWxzLCBwYXJzZWRab25lLCBvcHRzLCBcIklTTyA4NjAxXCIsIHRleHQpO1xuICB9XG4gIC8qKlxuICAgKiBDcmVhdGUgYSBEYXRlVGltZSBmcm9tIGFuIFJGQyAyODIyIHN0cmluZ1xuICAgKiBAcGFyYW0ge3N0cmluZ30gdGV4dCAtIHRoZSBSRkMgMjgyMiBzdHJpbmdcbiAgICogQHBhcmFtIHtPYmplY3R9IG9wdHMgLSBvcHRpb25zIHRvIGFmZmVjdCB0aGUgY3JlYXRpb25cbiAgICogQHBhcmFtIHtzdHJpbmd8Wm9uZX0gW29wdHMuem9uZT0nbG9jYWwnXSAtIGNvbnZlcnQgdGhlIHRpbWUgdG8gdGhpcyB6b25lLiBTaW5jZSB0aGUgb2Zmc2V0IGlzIGFsd2F5cyBzcGVjaWZpZWQgaW4gdGhlIHN0cmluZyBpdHNlbGYsIHRoaXMgaGFzIG5vIGVmZmVjdCBvbiB0aGUgaW50ZXJwcmV0YXRpb24gb2Ygc3RyaW5nLCBtZXJlbHkgdGhlIHpvbmUgdGhlIHJlc3VsdGluZyBEYXRlVGltZSBpcyBleHByZXNzZWQgaW4uXG4gICAqIEBwYXJhbSB7Ym9vbGVhbn0gW29wdHMuc2V0Wm9uZT1mYWxzZV0gLSBvdmVycmlkZSB0aGUgem9uZSB3aXRoIGEgZml4ZWQtb2Zmc2V0IHpvbmUgc3BlY2lmaWVkIGluIHRoZSBzdHJpbmcgaXRzZWxmLCBpZiBpdCBzcGVjaWZpZXMgb25lXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBbb3B0cy5sb2NhbGU9J3N5c3RlbSdzIGxvY2FsZSddIC0gYSBsb2NhbGUgdG8gc2V0IG9uIHRoZSByZXN1bHRpbmcgRGF0ZVRpbWUgaW5zdGFuY2VcbiAgICogQHBhcmFtIHtzdHJpbmd9IG9wdHMub3V0cHV0Q2FsZW5kYXIgLSB0aGUgb3V0cHV0IGNhbGVuZGFyIHRvIHNldCBvbiB0aGUgcmVzdWx0aW5nIERhdGVUaW1lIGluc3RhbmNlXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBvcHRzLm51bWJlcmluZ1N5c3RlbSAtIHRoZSBudW1iZXJpbmcgc3lzdGVtIHRvIHNldCBvbiB0aGUgcmVzdWx0aW5nIERhdGVUaW1lIGluc3RhbmNlXG4gICAqIEBleGFtcGxlIERhdGVUaW1lLmZyb21SRkMyODIyKCcyNSBOb3YgMjAxNiAxMzoyMzoxMiBHTVQnKVxuICAgKiBAZXhhbXBsZSBEYXRlVGltZS5mcm9tUkZDMjgyMignRnJpLCAyNSBOb3YgMjAxNiAxMzoyMzoxMiArMDYwMCcpXG4gICAqIEBleGFtcGxlIERhdGVUaW1lLmZyb21SRkMyODIyKCcyNSBOb3YgMjAxNiAxMzoyMyBaJylcbiAgICogQHJldHVybiB7RGF0ZVRpbWV9XG4gICAqL1xuICA7XG5cbiAgRGF0ZVRpbWUuZnJvbVJGQzI4MjIgPSBmdW5jdGlvbiBmcm9tUkZDMjgyMih0ZXh0LCBvcHRzKSB7XG4gICAgaWYgKG9wdHMgPT09IHZvaWQgMCkge1xuICAgICAgb3B0cyA9IHt9O1xuICAgIH1cblxuICAgIHZhciBfcGFyc2VSRkMyODIyRGF0ZSA9IHBhcnNlUkZDMjgyMkRhdGUodGV4dCksXG4gICAgICAgIHZhbHMgPSBfcGFyc2VSRkMyODIyRGF0ZVswXSxcbiAgICAgICAgcGFyc2VkWm9uZSA9IF9wYXJzZVJGQzI4MjJEYXRlWzFdO1xuXG4gICAgcmV0dXJuIHBhcnNlRGF0YVRvRGF0ZVRpbWUodmFscywgcGFyc2VkWm9uZSwgb3B0cywgXCJSRkMgMjgyMlwiLCB0ZXh0KTtcbiAgfVxuICAvKipcbiAgICogQ3JlYXRlIGEgRGF0ZVRpbWUgZnJvbSBhbiBIVFRQIGhlYWRlciBkYXRlXG4gICAqIEBzZWUgaHR0cHM6Ly93d3cudzMub3JnL1Byb3RvY29scy9yZmMyNjE2L3JmYzI2MTYtc2VjMy5odG1sI3NlYzMuMy4xXG4gICAqIEBwYXJhbSB7c3RyaW5nfSB0ZXh0IC0gdGhlIEhUVFAgaGVhZGVyIGRhdGVcbiAgICogQHBhcmFtIHtPYmplY3R9IG9wdHMgLSBvcHRpb25zIHRvIGFmZmVjdCB0aGUgY3JlYXRpb25cbiAgICogQHBhcmFtIHtzdHJpbmd8Wm9uZX0gW29wdHMuem9uZT0nbG9jYWwnXSAtIGNvbnZlcnQgdGhlIHRpbWUgdG8gdGhpcyB6b25lLiBTaW5jZSBIVFRQIGRhdGVzIGFyZSBhbHdheXMgaW4gVVRDLCB0aGlzIGhhcyBubyBlZmZlY3Qgb24gdGhlIGludGVycHJldGF0aW9uIG9mIHN0cmluZywgbWVyZWx5IHRoZSB6b25lIHRoZSByZXN1bHRpbmcgRGF0ZVRpbWUgaXMgZXhwcmVzc2VkIGluLlxuICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHRzLnNldFpvbmU9ZmFsc2VdIC0gb3ZlcnJpZGUgdGhlIHpvbmUgd2l0aCB0aGUgZml4ZWQtb2Zmc2V0IHpvbmUgc3BlY2lmaWVkIGluIHRoZSBzdHJpbmcuIEZvciBIVFRQIGRhdGVzLCB0aGlzIGlzIGFsd2F5cyBVVEMsIHNvIHRoaXMgb3B0aW9uIGlzIGVxdWl2YWxlbnQgdG8gc2V0dGluZyB0aGUgYHpvbmVgIG9wdGlvbiB0byAndXRjJywgYnV0IHRoaXMgb3B0aW9uIGlzIGluY2x1ZGVkIGZvciBjb25zaXN0ZW5jeSB3aXRoIHNpbWlsYXIgbWV0aG9kcy5cbiAgICogQHBhcmFtIHtzdHJpbmd9IFtvcHRzLmxvY2FsZT0nc3lzdGVtJ3MgbG9jYWxlJ10gLSBhIGxvY2FsZSB0byBzZXQgb24gdGhlIHJlc3VsdGluZyBEYXRlVGltZSBpbnN0YW5jZVxuICAgKiBAcGFyYW0ge3N0cmluZ30gb3B0cy5vdXRwdXRDYWxlbmRhciAtIHRoZSBvdXRwdXQgY2FsZW5kYXIgdG8gc2V0IG9uIHRoZSByZXN1bHRpbmcgRGF0ZVRpbWUgaW5zdGFuY2VcbiAgICogQHBhcmFtIHtzdHJpbmd9IG9wdHMubnVtYmVyaW5nU3lzdGVtIC0gdGhlIG51bWJlcmluZyBzeXN0ZW0gdG8gc2V0IG9uIHRoZSByZXN1bHRpbmcgRGF0ZVRpbWUgaW5zdGFuY2VcbiAgICogQGV4YW1wbGUgRGF0ZVRpbWUuZnJvbUhUVFAoJ1N1biwgMDYgTm92IDE5OTQgMDg6NDk6MzcgR01UJylcbiAgICogQGV4YW1wbGUgRGF0ZVRpbWUuZnJvbUhUVFAoJ1N1bmRheSwgMDYtTm92LTk0IDA4OjQ5OjM3IEdNVCcpXG4gICAqIEBleGFtcGxlIERhdGVUaW1lLmZyb21IVFRQKCdTdW4gTm92ICA2IDA4OjQ5OjM3IDE5OTQnKVxuICAgKiBAcmV0dXJuIHtEYXRlVGltZX1cbiAgICovXG4gIDtcblxuICBEYXRlVGltZS5mcm9tSFRUUCA9IGZ1bmN0aW9uIGZyb21IVFRQKHRleHQsIG9wdHMpIHtcbiAgICBpZiAob3B0cyA9PT0gdm9pZCAwKSB7XG4gICAgICBvcHRzID0ge307XG4gICAgfVxuXG4gICAgdmFyIF9wYXJzZUhUVFBEYXRlID0gcGFyc2VIVFRQRGF0ZSh0ZXh0KSxcbiAgICAgICAgdmFscyA9IF9wYXJzZUhUVFBEYXRlWzBdLFxuICAgICAgICBwYXJzZWRab25lID0gX3BhcnNlSFRUUERhdGVbMV07XG5cbiAgICByZXR1cm4gcGFyc2VEYXRhVG9EYXRlVGltZSh2YWxzLCBwYXJzZWRab25lLCBvcHRzLCBcIkhUVFBcIiwgb3B0cyk7XG4gIH1cbiAgLyoqXG4gICAqIENyZWF0ZSBhIERhdGVUaW1lIGZyb20gYW4gaW5wdXQgc3RyaW5nIGFuZCBmb3JtYXQgc3RyaW5nLlxuICAgKiBEZWZhdWx0cyB0byBlbi1VUyBpZiBubyBsb2NhbGUgaGFzIGJlZW4gc3BlY2lmaWVkLCByZWdhcmRsZXNzIG9mIHRoZSBzeXN0ZW0ncyBsb2NhbGUuIEZvciBhIHRhYmxlIG9mIHRva2VucyBhbmQgdGhlaXIgaW50ZXJwcmV0YXRpb25zLCBzZWUgW2hlcmVdKGh0dHBzOi8vbW9tZW50LmdpdGh1Yi5pby9sdXhvbi8jL3BhcnNpbmc/aWQ9dGFibGUtb2YtdG9rZW5zKS5cbiAgICogQHBhcmFtIHtzdHJpbmd9IHRleHQgLSB0aGUgc3RyaW5nIHRvIHBhcnNlXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBmbXQgLSB0aGUgZm9ybWF0IHRoZSBzdHJpbmcgaXMgZXhwZWN0ZWQgdG8gYmUgaW4gKHNlZSB0aGUgbGluayBiZWxvdyBmb3IgdGhlIGZvcm1hdHMpXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRzIC0gb3B0aW9ucyB0byBhZmZlY3QgdGhlIGNyZWF0aW9uXG4gICAqIEBwYXJhbSB7c3RyaW5nfFpvbmV9IFtvcHRzLnpvbmU9J2xvY2FsJ10gLSB1c2UgdGhpcyB6b25lIGlmIG5vIG9mZnNldCBpcyBzcGVjaWZpZWQgaW4gdGhlIGlucHV0IHN0cmluZyBpdHNlbGYuIFdpbGwgYWxzbyBjb252ZXJ0IHRoZSBEYXRlVGltZSB0byB0aGlzIHpvbmVcbiAgICogQHBhcmFtIHtib29sZWFufSBbb3B0cy5zZXRab25lPWZhbHNlXSAtIG92ZXJyaWRlIHRoZSB6b25lIHdpdGggYSB6b25lIHNwZWNpZmllZCBpbiB0aGUgc3RyaW5nIGl0c2VsZiwgaWYgaXQgc3BlY2lmaWVzIG9uZVxuICAgKiBAcGFyYW0ge3N0cmluZ30gW29wdHMubG9jYWxlPSdlbi1VUyddIC0gYSBsb2NhbGUgc3RyaW5nIHRvIHVzZSB3aGVuIHBhcnNpbmcuIFdpbGwgYWxzbyBzZXQgdGhlIERhdGVUaW1lIHRvIHRoaXMgbG9jYWxlXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBvcHRzLm51bWJlcmluZ1N5c3RlbSAtIHRoZSBudW1iZXJpbmcgc3lzdGVtIHRvIHVzZSB3aGVuIHBhcnNpbmcuIFdpbGwgYWxzbyBzZXQgdGhlIHJlc3VsdGluZyBEYXRlVGltZSB0byB0aGlzIG51bWJlcmluZyBzeXN0ZW1cbiAgICogQHBhcmFtIHtzdHJpbmd9IG9wdHMub3V0cHV0Q2FsZW5kYXIgLSB0aGUgb3V0cHV0IGNhbGVuZGFyIHRvIHNldCBvbiB0aGUgcmVzdWx0aW5nIERhdGVUaW1lIGluc3RhbmNlXG4gICAqIEByZXR1cm4ge0RhdGVUaW1lfVxuICAgKi9cbiAgO1xuXG4gIERhdGVUaW1lLmZyb21Gb3JtYXQgPSBmdW5jdGlvbiBmcm9tRm9ybWF0KHRleHQsIGZtdCwgb3B0cykge1xuICAgIGlmIChvcHRzID09PSB2b2lkIDApIHtcbiAgICAgIG9wdHMgPSB7fTtcbiAgICB9XG5cbiAgICBpZiAoaXNVbmRlZmluZWQodGV4dCkgfHwgaXNVbmRlZmluZWQoZm10KSkge1xuICAgICAgdGhyb3cgbmV3IEludmFsaWRBcmd1bWVudEVycm9yKFwiZnJvbUZvcm1hdCByZXF1aXJlcyBhbiBpbnB1dCBzdHJpbmcgYW5kIGEgZm9ybWF0XCIpO1xuICAgIH1cblxuICAgIHZhciBfb3B0cyA9IG9wdHMsXG4gICAgICAgIF9vcHRzJGxvY2FsZSA9IF9vcHRzLmxvY2FsZSxcbiAgICAgICAgbG9jYWxlID0gX29wdHMkbG9jYWxlID09PSB2b2lkIDAgPyBudWxsIDogX29wdHMkbG9jYWxlLFxuICAgICAgICBfb3B0cyRudW1iZXJpbmdTeXN0ZW0gPSBfb3B0cy5udW1iZXJpbmdTeXN0ZW0sXG4gICAgICAgIG51bWJlcmluZ1N5c3RlbSA9IF9vcHRzJG51bWJlcmluZ1N5c3RlbSA9PT0gdm9pZCAwID8gbnVsbCA6IF9vcHRzJG51bWJlcmluZ1N5c3RlbSxcbiAgICAgICAgbG9jYWxlVG9Vc2UgPSBMb2NhbGUuZnJvbU9wdHMoe1xuICAgICAgbG9jYWxlOiBsb2NhbGUsXG4gICAgICBudW1iZXJpbmdTeXN0ZW06IG51bWJlcmluZ1N5c3RlbSxcbiAgICAgIGRlZmF1bHRUb0VOOiB0cnVlXG4gICAgfSksXG4gICAgICAgIF9wYXJzZUZyb21Ub2tlbnMgPSBwYXJzZUZyb21Ub2tlbnMobG9jYWxlVG9Vc2UsIHRleHQsIGZtdCksXG4gICAgICAgIHZhbHMgPSBfcGFyc2VGcm9tVG9rZW5zWzBdLFxuICAgICAgICBwYXJzZWRab25lID0gX3BhcnNlRnJvbVRva2Vuc1sxXSxcbiAgICAgICAgc3BlY2lmaWNPZmZzZXQgPSBfcGFyc2VGcm9tVG9rZW5zWzJdLFxuICAgICAgICBpbnZhbGlkID0gX3BhcnNlRnJvbVRva2Vuc1szXTtcblxuICAgIGlmIChpbnZhbGlkKSB7XG4gICAgICByZXR1cm4gRGF0ZVRpbWUuaW52YWxpZChpbnZhbGlkKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIHBhcnNlRGF0YVRvRGF0ZVRpbWUodmFscywgcGFyc2VkWm9uZSwgb3B0cywgXCJmb3JtYXQgXCIgKyBmbXQsIHRleHQsIHNwZWNpZmljT2Zmc2V0KTtcbiAgICB9XG4gIH1cbiAgLyoqXG4gICAqIEBkZXByZWNhdGVkIHVzZSBmcm9tRm9ybWF0IGluc3RlYWRcbiAgICovXG4gIDtcblxuICBEYXRlVGltZS5mcm9tU3RyaW5nID0gZnVuY3Rpb24gZnJvbVN0cmluZyh0ZXh0LCBmbXQsIG9wdHMpIHtcbiAgICBpZiAob3B0cyA9PT0gdm9pZCAwKSB7XG4gICAgICBvcHRzID0ge307XG4gICAgfVxuXG4gICAgcmV0dXJuIERhdGVUaW1lLmZyb21Gb3JtYXQodGV4dCwgZm10LCBvcHRzKTtcbiAgfVxuICAvKipcbiAgICogQ3JlYXRlIGEgRGF0ZVRpbWUgZnJvbSBhIFNRTCBkYXRlLCB0aW1lLCBvciBkYXRldGltZVxuICAgKiBEZWZhdWx0cyB0byBlbi1VUyBpZiBubyBsb2NhbGUgaGFzIGJlZW4gc3BlY2lmaWVkLCByZWdhcmRsZXNzIG9mIHRoZSBzeXN0ZW0ncyBsb2NhbGVcbiAgICogQHBhcmFtIHtzdHJpbmd9IHRleHQgLSB0aGUgc3RyaW5nIHRvIHBhcnNlXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRzIC0gb3B0aW9ucyB0byBhZmZlY3QgdGhlIGNyZWF0aW9uXG4gICAqIEBwYXJhbSB7c3RyaW5nfFpvbmV9IFtvcHRzLnpvbmU9J2xvY2FsJ10gLSB1c2UgdGhpcyB6b25lIGlmIG5vIG9mZnNldCBpcyBzcGVjaWZpZWQgaW4gdGhlIGlucHV0IHN0cmluZyBpdHNlbGYuIFdpbGwgYWxzbyBjb252ZXJ0IHRoZSBEYXRlVGltZSB0byB0aGlzIHpvbmVcbiAgICogQHBhcmFtIHtib29sZWFufSBbb3B0cy5zZXRab25lPWZhbHNlXSAtIG92ZXJyaWRlIHRoZSB6b25lIHdpdGggYSB6b25lIHNwZWNpZmllZCBpbiB0aGUgc3RyaW5nIGl0c2VsZiwgaWYgaXQgc3BlY2lmaWVzIG9uZVxuICAgKiBAcGFyYW0ge3N0cmluZ30gW29wdHMubG9jYWxlPSdlbi1VUyddIC0gYSBsb2NhbGUgc3RyaW5nIHRvIHVzZSB3aGVuIHBhcnNpbmcuIFdpbGwgYWxzbyBzZXQgdGhlIERhdGVUaW1lIHRvIHRoaXMgbG9jYWxlXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBvcHRzLm51bWJlcmluZ1N5c3RlbSAtIHRoZSBudW1iZXJpbmcgc3lzdGVtIHRvIHVzZSB3aGVuIHBhcnNpbmcuIFdpbGwgYWxzbyBzZXQgdGhlIHJlc3VsdGluZyBEYXRlVGltZSB0byB0aGlzIG51bWJlcmluZyBzeXN0ZW1cbiAgICogQHBhcmFtIHtzdHJpbmd9IG9wdHMub3V0cHV0Q2FsZW5kYXIgLSB0aGUgb3V0cHV0IGNhbGVuZGFyIHRvIHNldCBvbiB0aGUgcmVzdWx0aW5nIERhdGVUaW1lIGluc3RhbmNlXG4gICAqIEBleGFtcGxlIERhdGVUaW1lLmZyb21TUUwoJzIwMTctMDUtMTUnKVxuICAgKiBAZXhhbXBsZSBEYXRlVGltZS5mcm9tU1FMKCcyMDE3LTA1LTE1IDA5OjEyOjM0JylcbiAgICogQGV4YW1wbGUgRGF0ZVRpbWUuZnJvbVNRTCgnMjAxNy0wNS0xNSAwOToxMjozNC4zNDInKVxuICAgKiBAZXhhbXBsZSBEYXRlVGltZS5mcm9tU1FMKCcyMDE3LTA1LTE1IDA5OjEyOjM0LjM0MiswNjowMCcpXG4gICAqIEBleGFtcGxlIERhdGVUaW1lLmZyb21TUUwoJzIwMTctMDUtMTUgMDk6MTI6MzQuMzQyIEFtZXJpY2EvTG9zX0FuZ2VsZXMnKVxuICAgKiBAZXhhbXBsZSBEYXRlVGltZS5mcm9tU1FMKCcyMDE3LTA1LTE1IDA5OjEyOjM0LjM0MiBBbWVyaWNhL0xvc19BbmdlbGVzJywgeyBzZXRab25lOiB0cnVlIH0pXG4gICAqIEBleGFtcGxlIERhdGVUaW1lLmZyb21TUUwoJzIwMTctMDUtMTUgMDk6MTI6MzQuMzQyJywgeyB6b25lOiAnQW1lcmljYS9Mb3NfQW5nZWxlcycgfSlcbiAgICogQGV4YW1wbGUgRGF0ZVRpbWUuZnJvbVNRTCgnMDk6MTI6MzQuMzQyJylcbiAgICogQHJldHVybiB7RGF0ZVRpbWV9XG4gICAqL1xuICA7XG5cbiAgRGF0ZVRpbWUuZnJvbVNRTCA9IGZ1bmN0aW9uIGZyb21TUUwodGV4dCwgb3B0cykge1xuICAgIGlmIChvcHRzID09PSB2b2lkIDApIHtcbiAgICAgIG9wdHMgPSB7fTtcbiAgICB9XG5cbiAgICB2YXIgX3BhcnNlU1FMID0gcGFyc2VTUUwodGV4dCksXG4gICAgICAgIHZhbHMgPSBfcGFyc2VTUUxbMF0sXG4gICAgICAgIHBhcnNlZFpvbmUgPSBfcGFyc2VTUUxbMV07XG5cbiAgICByZXR1cm4gcGFyc2VEYXRhVG9EYXRlVGltZSh2YWxzLCBwYXJzZWRab25lLCBvcHRzLCBcIlNRTFwiLCB0ZXh0KTtcbiAgfVxuICAvKipcbiAgICogQ3JlYXRlIGFuIGludmFsaWQgRGF0ZVRpbWUuXG4gICAqIEBwYXJhbSB7c3RyaW5nfSByZWFzb24gLSBzaW1wbGUgc3RyaW5nIG9mIHdoeSB0aGlzIERhdGVUaW1lIGlzIGludmFsaWQuIFNob3VsZCBub3QgY29udGFpbiBwYXJhbWV0ZXJzIG9yIGFueXRoaW5nIGVsc2UgZGF0YS1kZXBlbmRlbnRcbiAgICogQHBhcmFtIHtzdHJpbmd9IFtleHBsYW5hdGlvbj1udWxsXSAtIGxvbmdlciBleHBsYW5hdGlvbiwgbWF5IGluY2x1ZGUgcGFyYW1ldGVycyBhbmQgb3RoZXIgdXNlZnVsIGRlYnVnZ2luZyBpbmZvcm1hdGlvblxuICAgKiBAcmV0dXJuIHtEYXRlVGltZX1cbiAgICovXG4gIDtcblxuICBEYXRlVGltZS5pbnZhbGlkID0gZnVuY3Rpb24gaW52YWxpZChyZWFzb24sIGV4cGxhbmF0aW9uKSB7XG4gICAgaWYgKGV4cGxhbmF0aW9uID09PSB2b2lkIDApIHtcbiAgICAgIGV4cGxhbmF0aW9uID0gbnVsbDtcbiAgICB9XG5cbiAgICBpZiAoIXJlYXNvbikge1xuICAgICAgdGhyb3cgbmV3IEludmFsaWRBcmd1bWVudEVycm9yKFwibmVlZCB0byBzcGVjaWZ5IGEgcmVhc29uIHRoZSBEYXRlVGltZSBpcyBpbnZhbGlkXCIpO1xuICAgIH1cblxuICAgIHZhciBpbnZhbGlkID0gcmVhc29uIGluc3RhbmNlb2YgSW52YWxpZCA/IHJlYXNvbiA6IG5ldyBJbnZhbGlkKHJlYXNvbiwgZXhwbGFuYXRpb24pO1xuXG4gICAgaWYgKFNldHRpbmdzLnRocm93T25JbnZhbGlkKSB7XG4gICAgICB0aHJvdyBuZXcgSW52YWxpZERhdGVUaW1lRXJyb3IoaW52YWxpZCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBuZXcgRGF0ZVRpbWUoe1xuICAgICAgICBpbnZhbGlkOiBpbnZhbGlkXG4gICAgICB9KTtcbiAgICB9XG4gIH1cbiAgLyoqXG4gICAqIENoZWNrIGlmIGFuIG9iamVjdCBpcyBhIERhdGVUaW1lLiBXb3JrcyBhY3Jvc3MgY29udGV4dCBib3VuZGFyaWVzXG4gICAqIEBwYXJhbSB7b2JqZWN0fSBvXG4gICAqIEByZXR1cm4ge2Jvb2xlYW59XG4gICAqL1xuICA7XG5cbiAgRGF0ZVRpbWUuaXNEYXRlVGltZSA9IGZ1bmN0aW9uIGlzRGF0ZVRpbWUobykge1xuICAgIHJldHVybiBvICYmIG8uaXNMdXhvbkRhdGVUaW1lIHx8IGZhbHNlO1xuICB9IC8vIElORk9cblxuICAvKipcbiAgICogR2V0IHRoZSB2YWx1ZSBvZiB1bml0LlxuICAgKiBAcGFyYW0ge3N0cmluZ30gdW5pdCAtIGEgdW5pdCBzdWNoIGFzICdtaW51dGUnIG9yICdkYXknXG4gICAqIEBleGFtcGxlIERhdGVUaW1lLmxvY2FsKDIwMTcsIDcsIDQpLmdldCgnbW9udGgnKTsgLy89PiA3XG4gICAqIEBleGFtcGxlIERhdGVUaW1lLmxvY2FsKDIwMTcsIDcsIDQpLmdldCgnZGF5Jyk7IC8vPT4gNFxuICAgKiBAcmV0dXJuIHtudW1iZXJ9XG4gICAqL1xuICA7XG5cbiAgdmFyIF9wcm90byA9IERhdGVUaW1lLnByb3RvdHlwZTtcblxuICBfcHJvdG8uZ2V0ID0gZnVuY3Rpb24gZ2V0KHVuaXQpIHtcbiAgICByZXR1cm4gdGhpc1t1bml0XTtcbiAgfVxuICAvKipcbiAgICogUmV0dXJucyB3aGV0aGVyIHRoZSBEYXRlVGltZSBpcyB2YWxpZC4gSW52YWxpZCBEYXRlVGltZXMgb2NjdXIgd2hlbjpcbiAgICogKiBUaGUgRGF0ZVRpbWUgd2FzIGNyZWF0ZWQgZnJvbSBpbnZhbGlkIGNhbGVuZGFyIGluZm9ybWF0aW9uLCBzdWNoIGFzIHRoZSAxM3RoIG1vbnRoIG9yIEZlYnJ1YXJ5IDMwXG4gICAqICogVGhlIERhdGVUaW1lIHdhcyBjcmVhdGVkIGJ5IGFuIG9wZXJhdGlvbiBvbiBhbm90aGVyIGludmFsaWQgZGF0ZVxuICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICovXG4gIDtcblxuICAvKipcbiAgICogUmV0dXJucyB0aGUgcmVzb2x2ZWQgSW50bCBvcHRpb25zIGZvciB0aGlzIERhdGVUaW1lLlxuICAgKiBUaGlzIGlzIHVzZWZ1bCBpbiB1bmRlcnN0YW5kaW5nIHRoZSBiZWhhdmlvciBvZiBmb3JtYXR0aW5nIG1ldGhvZHNcbiAgICogQHBhcmFtIHtPYmplY3R9IG9wdHMgLSB0aGUgc2FtZSBvcHRpb25zIGFzIHRvTG9jYWxlU3RyaW5nXG4gICAqIEByZXR1cm4ge09iamVjdH1cbiAgICovXG4gIF9wcm90by5yZXNvbHZlZExvY2FsZU9wdGlvbnMgPSBmdW5jdGlvbiByZXNvbHZlZExvY2FsZU9wdGlvbnMob3B0cykge1xuICAgIGlmIChvcHRzID09PSB2b2lkIDApIHtcbiAgICAgIG9wdHMgPSB7fTtcbiAgICB9XG5cbiAgICB2YXIgX0Zvcm1hdHRlciRjcmVhdGUkcmVzID0gRm9ybWF0dGVyLmNyZWF0ZSh0aGlzLmxvYy5jbG9uZShvcHRzKSwgb3B0cykucmVzb2x2ZWRPcHRpb25zKHRoaXMpLFxuICAgICAgICBsb2NhbGUgPSBfRm9ybWF0dGVyJGNyZWF0ZSRyZXMubG9jYWxlLFxuICAgICAgICBudW1iZXJpbmdTeXN0ZW0gPSBfRm9ybWF0dGVyJGNyZWF0ZSRyZXMubnVtYmVyaW5nU3lzdGVtLFxuICAgICAgICBjYWxlbmRhciA9IF9Gb3JtYXR0ZXIkY3JlYXRlJHJlcy5jYWxlbmRhcjtcblxuICAgIHJldHVybiB7XG4gICAgICBsb2NhbGU6IGxvY2FsZSxcbiAgICAgIG51bWJlcmluZ1N5c3RlbTogbnVtYmVyaW5nU3lzdGVtLFxuICAgICAgb3V0cHV0Q2FsZW5kYXI6IGNhbGVuZGFyXG4gICAgfTtcbiAgfSAvLyBUUkFOU0ZPUk1cblxuICAvKipcbiAgICogXCJTZXRcIiB0aGUgRGF0ZVRpbWUncyB6b25lIHRvIFVUQy4gUmV0dXJucyBhIG5ld2x5LWNvbnN0cnVjdGVkIERhdGVUaW1lLlxuICAgKlxuICAgKiBFcXVpdmFsZW50IHRvIHtAbGluayBEYXRlVGltZSNzZXRab25lfSgndXRjJylcbiAgICogQHBhcmFtIHtudW1iZXJ9IFtvZmZzZXQ9MF0gLSBvcHRpb25hbGx5LCBhbiBvZmZzZXQgZnJvbSBVVEMgaW4gbWludXRlc1xuICAgKiBAcGFyYW0ge09iamVjdH0gW29wdHM9e31dIC0gb3B0aW9ucyB0byBwYXNzIHRvIGBzZXRab25lKClgXG4gICAqIEByZXR1cm4ge0RhdGVUaW1lfVxuICAgKi9cbiAgO1xuXG4gIF9wcm90by50b1VUQyA9IGZ1bmN0aW9uIHRvVVRDKG9mZnNldCwgb3B0cykge1xuICAgIGlmIChvZmZzZXQgPT09IHZvaWQgMCkge1xuICAgICAgb2Zmc2V0ID0gMDtcbiAgICB9XG5cbiAgICBpZiAob3B0cyA9PT0gdm9pZCAwKSB7XG4gICAgICBvcHRzID0ge307XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXMuc2V0Wm9uZShGaXhlZE9mZnNldFpvbmUuaW5zdGFuY2Uob2Zmc2V0KSwgb3B0cyk7XG4gIH1cbiAgLyoqXG4gICAqIFwiU2V0XCIgdGhlIERhdGVUaW1lJ3Mgem9uZSB0byB0aGUgaG9zdCdzIGxvY2FsIHpvbmUuIFJldHVybnMgYSBuZXdseS1jb25zdHJ1Y3RlZCBEYXRlVGltZS5cbiAgICpcbiAgICogRXF1aXZhbGVudCB0byBgc2V0Wm9uZSgnbG9jYWwnKWBcbiAgICogQHJldHVybiB7RGF0ZVRpbWV9XG4gICAqL1xuICA7XG5cbiAgX3Byb3RvLnRvTG9jYWwgPSBmdW5jdGlvbiB0b0xvY2FsKCkge1xuICAgIHJldHVybiB0aGlzLnNldFpvbmUoU2V0dGluZ3MuZGVmYXVsdFpvbmUpO1xuICB9XG4gIC8qKlxuICAgKiBcIlNldFwiIHRoZSBEYXRlVGltZSdzIHpvbmUgdG8gc3BlY2lmaWVkIHpvbmUuIFJldHVybnMgYSBuZXdseS1jb25zdHJ1Y3RlZCBEYXRlVGltZS5cbiAgICpcbiAgICogQnkgZGVmYXVsdCwgdGhlIHNldHRlciBrZWVwcyB0aGUgdW5kZXJseWluZyB0aW1lIHRoZSBzYW1lIChhcyBpbiwgdGhlIHNhbWUgdGltZXN0YW1wKSwgYnV0IHRoZSBuZXcgaW5zdGFuY2Ugd2lsbCByZXBvcnQgZGlmZmVyZW50IGxvY2FsIHRpbWVzIGFuZCBjb25zaWRlciBEU1RzIHdoZW4gbWFraW5nIGNvbXB1dGF0aW9ucywgYXMgd2l0aCB7QGxpbmsgRGF0ZVRpbWUjcGx1c30uIFlvdSBtYXkgd2lzaCB0byB1c2Uge0BsaW5rIERhdGVUaW1lI3RvTG9jYWx9IGFuZCB7QGxpbmsgRGF0ZVRpbWUjdG9VVEN9IHdoaWNoIHByb3ZpZGUgc2ltcGxlIGNvbnZlbmllbmNlIHdyYXBwZXJzIGZvciBjb21tb25seSB1c2VkIHpvbmVzLlxuICAgKiBAcGFyYW0ge3N0cmluZ3xab25lfSBbem9uZT0nbG9jYWwnXSAtIGEgem9uZSBpZGVudGlmaWVyLiBBcyBhIHN0cmluZywgdGhhdCBjYW4gYmUgYW55IElBTkEgem9uZSBzdXBwb3J0ZWQgYnkgdGhlIGhvc3QgZW52aXJvbm1lbnQsIG9yIGEgZml4ZWQtb2Zmc2V0IG5hbWUgb2YgdGhlIGZvcm0gJ1VUQyszJywgb3IgdGhlIHN0cmluZ3MgJ2xvY2FsJyBvciAndXRjJy4gWW91IG1heSBhbHNvIHN1cHBseSBhbiBpbnN0YW5jZSBvZiBhIHtAbGluayBEYXRlVGltZSNab25lfSBjbGFzcy5cbiAgICogQHBhcmFtIHtPYmplY3R9IG9wdHMgLSBvcHRpb25zXG4gICAqIEBwYXJhbSB7Ym9vbGVhbn0gW29wdHMua2VlcExvY2FsVGltZT1mYWxzZV0gLSBJZiB0cnVlLCBhZGp1c3QgdGhlIHVuZGVybHlpbmcgdGltZSBzbyB0aGF0IHRoZSBsb2NhbCB0aW1lIHN0YXlzIHRoZSBzYW1lLCBidXQgaW4gdGhlIHRhcmdldCB6b25lLiBZb3Ugc2hvdWxkIHJhcmVseSBuZWVkIHRoaXMuXG4gICAqIEByZXR1cm4ge0RhdGVUaW1lfVxuICAgKi9cbiAgO1xuXG4gIF9wcm90by5zZXRab25lID0gZnVuY3Rpb24gc2V0Wm9uZSh6b25lLCBfdGVtcCkge1xuICAgIHZhciBfcmVmMiA9IF90ZW1wID09PSB2b2lkIDAgPyB7fSA6IF90ZW1wLFxuICAgICAgICBfcmVmMiRrZWVwTG9jYWxUaW1lID0gX3JlZjIua2VlcExvY2FsVGltZSxcbiAgICAgICAga2VlcExvY2FsVGltZSA9IF9yZWYyJGtlZXBMb2NhbFRpbWUgPT09IHZvaWQgMCA/IGZhbHNlIDogX3JlZjIka2VlcExvY2FsVGltZSxcbiAgICAgICAgX3JlZjIka2VlcENhbGVuZGFyVGltID0gX3JlZjIua2VlcENhbGVuZGFyVGltZSxcbiAgICAgICAga2VlcENhbGVuZGFyVGltZSA9IF9yZWYyJGtlZXBDYWxlbmRhclRpbSA9PT0gdm9pZCAwID8gZmFsc2UgOiBfcmVmMiRrZWVwQ2FsZW5kYXJUaW07XG5cbiAgICB6b25lID0gbm9ybWFsaXplWm9uZSh6b25lLCBTZXR0aW5ncy5kZWZhdWx0Wm9uZSk7XG5cbiAgICBpZiAoem9uZS5lcXVhbHModGhpcy56b25lKSkge1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfSBlbHNlIGlmICghem9uZS5pc1ZhbGlkKSB7XG4gICAgICByZXR1cm4gRGF0ZVRpbWUuaW52YWxpZCh1bnN1cHBvcnRlZFpvbmUoem9uZSkpO1xuICAgIH0gZWxzZSB7XG4gICAgICB2YXIgbmV3VFMgPSB0aGlzLnRzO1xuXG4gICAgICBpZiAoa2VlcExvY2FsVGltZSB8fCBrZWVwQ2FsZW5kYXJUaW1lKSB7XG4gICAgICAgIHZhciBvZmZzZXRHdWVzcyA9IHpvbmUub2Zmc2V0KHRoaXMudHMpO1xuICAgICAgICB2YXIgYXNPYmogPSB0aGlzLnRvT2JqZWN0KCk7XG5cbiAgICAgICAgdmFyIF9vYmpUb1RTMyA9IG9ialRvVFMoYXNPYmosIG9mZnNldEd1ZXNzLCB6b25lKTtcblxuICAgICAgICBuZXdUUyA9IF9vYmpUb1RTM1swXTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGNsb25lKHRoaXMsIHtcbiAgICAgICAgdHM6IG5ld1RTLFxuICAgICAgICB6b25lOiB6b25lXG4gICAgICB9KTtcbiAgICB9XG4gIH1cbiAgLyoqXG4gICAqIFwiU2V0XCIgdGhlIGxvY2FsZSwgbnVtYmVyaW5nU3lzdGVtLCBvciBvdXRwdXRDYWxlbmRhci4gUmV0dXJucyBhIG5ld2x5LWNvbnN0cnVjdGVkIERhdGVUaW1lLlxuICAgKiBAcGFyYW0ge09iamVjdH0gcHJvcGVydGllcyAtIHRoZSBwcm9wZXJ0aWVzIHRvIHNldFxuICAgKiBAZXhhbXBsZSBEYXRlVGltZS5sb2NhbCgyMDE3LCA1LCAyNSkucmVjb25maWd1cmUoeyBsb2NhbGU6ICdlbi1HQicgfSlcbiAgICogQHJldHVybiB7RGF0ZVRpbWV9XG4gICAqL1xuICA7XG5cbiAgX3Byb3RvLnJlY29uZmlndXJlID0gZnVuY3Rpb24gcmVjb25maWd1cmUoX3RlbXAyKSB7XG4gICAgdmFyIF9yZWYzID0gX3RlbXAyID09PSB2b2lkIDAgPyB7fSA6IF90ZW1wMixcbiAgICAgICAgbG9jYWxlID0gX3JlZjMubG9jYWxlLFxuICAgICAgICBudW1iZXJpbmdTeXN0ZW0gPSBfcmVmMy5udW1iZXJpbmdTeXN0ZW0sXG4gICAgICAgIG91dHB1dENhbGVuZGFyID0gX3JlZjMub3V0cHV0Q2FsZW5kYXI7XG5cbiAgICB2YXIgbG9jID0gdGhpcy5sb2MuY2xvbmUoe1xuICAgICAgbG9jYWxlOiBsb2NhbGUsXG4gICAgICBudW1iZXJpbmdTeXN0ZW06IG51bWJlcmluZ1N5c3RlbSxcbiAgICAgIG91dHB1dENhbGVuZGFyOiBvdXRwdXRDYWxlbmRhclxuICAgIH0pO1xuICAgIHJldHVybiBjbG9uZSh0aGlzLCB7XG4gICAgICBsb2M6IGxvY1xuICAgIH0pO1xuICB9XG4gIC8qKlxuICAgKiBcIlNldFwiIHRoZSBsb2NhbGUuIFJldHVybnMgYSBuZXdseS1jb25zdHJ1Y3RlZCBEYXRlVGltZS5cbiAgICogSnVzdCBhIGNvbnZlbmllbnQgYWxpYXMgZm9yIHJlY29uZmlndXJlKHsgbG9jYWxlIH0pXG4gICAqIEBleGFtcGxlIERhdGVUaW1lLmxvY2FsKDIwMTcsIDUsIDI1KS5zZXRMb2NhbGUoJ2VuLUdCJylcbiAgICogQHJldHVybiB7RGF0ZVRpbWV9XG4gICAqL1xuICA7XG5cbiAgX3Byb3RvLnNldExvY2FsZSA9IGZ1bmN0aW9uIHNldExvY2FsZShsb2NhbGUpIHtcbiAgICByZXR1cm4gdGhpcy5yZWNvbmZpZ3VyZSh7XG4gICAgICBsb2NhbGU6IGxvY2FsZVxuICAgIH0pO1xuICB9XG4gIC8qKlxuICAgKiBcIlNldFwiIHRoZSB2YWx1ZXMgb2Ygc3BlY2lmaWVkIHVuaXRzLiBSZXR1cm5zIGEgbmV3bHktY29uc3RydWN0ZWQgRGF0ZVRpbWUuXG4gICAqIFlvdSBjYW4gb25seSBzZXQgdW5pdHMgd2l0aCB0aGlzIG1ldGhvZDsgZm9yIFwic2V0dGluZ1wiIG1ldGFkYXRhLCBzZWUge0BsaW5rIERhdGVUaW1lI3JlY29uZmlndXJlfSBhbmQge0BsaW5rIERhdGVUaW1lI3NldFpvbmV9LlxuICAgKiBAcGFyYW0ge09iamVjdH0gdmFsdWVzIC0gYSBtYXBwaW5nIG9mIHVuaXRzIHRvIG51bWJlcnNcbiAgICogQGV4YW1wbGUgZHQuc2V0KHsgeWVhcjogMjAxNyB9KVxuICAgKiBAZXhhbXBsZSBkdC5zZXQoeyBob3VyOiA4LCBtaW51dGU6IDMwIH0pXG4gICAqIEBleGFtcGxlIGR0LnNldCh7IHdlZWtkYXk6IDUgfSlcbiAgICogQGV4YW1wbGUgZHQuc2V0KHsgeWVhcjogMjAwNSwgb3JkaW5hbDogMjM0IH0pXG4gICAqIEByZXR1cm4ge0RhdGVUaW1lfVxuICAgKi9cbiAgO1xuXG4gIF9wcm90by5zZXQgPSBmdW5jdGlvbiBzZXQodmFsdWVzKSB7XG4gICAgaWYgKCF0aGlzLmlzVmFsaWQpIHJldHVybiB0aGlzO1xuICAgIHZhciBub3JtYWxpemVkID0gbm9ybWFsaXplT2JqZWN0KHZhbHVlcywgbm9ybWFsaXplVW5pdCksXG4gICAgICAgIHNldHRpbmdXZWVrU3R1ZmYgPSAhaXNVbmRlZmluZWQobm9ybWFsaXplZC53ZWVrWWVhcikgfHwgIWlzVW5kZWZpbmVkKG5vcm1hbGl6ZWQud2Vla051bWJlcikgfHwgIWlzVW5kZWZpbmVkKG5vcm1hbGl6ZWQud2Vla2RheSksXG4gICAgICAgIGNvbnRhaW5zT3JkaW5hbCA9ICFpc1VuZGVmaW5lZChub3JtYWxpemVkLm9yZGluYWwpLFxuICAgICAgICBjb250YWluc0dyZWdvclllYXIgPSAhaXNVbmRlZmluZWQobm9ybWFsaXplZC55ZWFyKSxcbiAgICAgICAgY29udGFpbnNHcmVnb3JNRCA9ICFpc1VuZGVmaW5lZChub3JtYWxpemVkLm1vbnRoKSB8fCAhaXNVbmRlZmluZWQobm9ybWFsaXplZC5kYXkpLFxuICAgICAgICBjb250YWluc0dyZWdvciA9IGNvbnRhaW5zR3JlZ29yWWVhciB8fCBjb250YWluc0dyZWdvck1ELFxuICAgICAgICBkZWZpbml0ZVdlZWtEZWYgPSBub3JtYWxpemVkLndlZWtZZWFyIHx8IG5vcm1hbGl6ZWQud2Vla051bWJlcjtcblxuICAgIGlmICgoY29udGFpbnNHcmVnb3IgfHwgY29udGFpbnNPcmRpbmFsKSAmJiBkZWZpbml0ZVdlZWtEZWYpIHtcbiAgICAgIHRocm93IG5ldyBDb25mbGljdGluZ1NwZWNpZmljYXRpb25FcnJvcihcIkNhbid0IG1peCB3ZWVrWWVhci93ZWVrTnVtYmVyIHVuaXRzIHdpdGggeWVhci9tb250aC9kYXkgb3Igb3JkaW5hbHNcIik7XG4gICAgfVxuXG4gICAgaWYgKGNvbnRhaW5zR3JlZ29yTUQgJiYgY29udGFpbnNPcmRpbmFsKSB7XG4gICAgICB0aHJvdyBuZXcgQ29uZmxpY3RpbmdTcGVjaWZpY2F0aW9uRXJyb3IoXCJDYW4ndCBtaXggb3JkaW5hbCBkYXRlcyB3aXRoIG1vbnRoL2RheVwiKTtcbiAgICB9XG5cbiAgICB2YXIgbWl4ZWQ7XG5cbiAgICBpZiAoc2V0dGluZ1dlZWtTdHVmZikge1xuICAgICAgbWl4ZWQgPSB3ZWVrVG9HcmVnb3JpYW4oX2V4dGVuZHMoe30sIGdyZWdvcmlhblRvV2Vlayh0aGlzLmMpLCBub3JtYWxpemVkKSk7XG4gICAgfSBlbHNlIGlmICghaXNVbmRlZmluZWQobm9ybWFsaXplZC5vcmRpbmFsKSkge1xuICAgICAgbWl4ZWQgPSBvcmRpbmFsVG9HcmVnb3JpYW4oX2V4dGVuZHMoe30sIGdyZWdvcmlhblRvT3JkaW5hbCh0aGlzLmMpLCBub3JtYWxpemVkKSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIG1peGVkID0gX2V4dGVuZHMoe30sIHRoaXMudG9PYmplY3QoKSwgbm9ybWFsaXplZCk7IC8vIGlmIHdlIGRpZG4ndCBzZXQgdGhlIGRheSBidXQgd2UgZW5kZWQgdXAgb24gYW4gb3ZlcmZsb3cgZGF0ZSxcbiAgICAgIC8vIHVzZSB0aGUgbGFzdCBkYXkgb2YgdGhlIHJpZ2h0IG1vbnRoXG5cbiAgICAgIGlmIChpc1VuZGVmaW5lZChub3JtYWxpemVkLmRheSkpIHtcbiAgICAgICAgbWl4ZWQuZGF5ID0gTWF0aC5taW4oZGF5c0luTW9udGgobWl4ZWQueWVhciwgbWl4ZWQubW9udGgpLCBtaXhlZC5kYXkpO1xuICAgICAgfVxuICAgIH1cblxuICAgIHZhciBfb2JqVG9UUzQgPSBvYmpUb1RTKG1peGVkLCB0aGlzLm8sIHRoaXMuem9uZSksXG4gICAgICAgIHRzID0gX29ialRvVFM0WzBdLFxuICAgICAgICBvID0gX29ialRvVFM0WzFdO1xuXG4gICAgcmV0dXJuIGNsb25lKHRoaXMsIHtcbiAgICAgIHRzOiB0cyxcbiAgICAgIG86IG9cbiAgICB9KTtcbiAgfVxuICAvKipcbiAgICogQWRkIGEgcGVyaW9kIG9mIHRpbWUgdG8gdGhpcyBEYXRlVGltZSBhbmQgcmV0dXJuIHRoZSByZXN1bHRpbmcgRGF0ZVRpbWVcbiAgICpcbiAgICogQWRkaW5nIGhvdXJzLCBtaW51dGVzLCBzZWNvbmRzLCBvciBtaWxsaXNlY29uZHMgaW5jcmVhc2VzIHRoZSB0aW1lc3RhbXAgYnkgdGhlIHJpZ2h0IG51bWJlciBvZiBtaWxsaXNlY29uZHMuIEFkZGluZyBkYXlzLCBtb250aHMsIG9yIHllYXJzIHNoaWZ0cyB0aGUgY2FsZW5kYXIsIGFjY291bnRpbmcgZm9yIERTVHMgYW5kIGxlYXAgeWVhcnMgYWxvbmcgdGhlIHdheS4gVGh1cywgYGR0LnBsdXMoeyBob3VyczogMjQgfSlgIG1heSByZXN1bHQgaW4gYSBkaWZmZXJlbnQgdGltZSB0aGFuIGBkdC5wbHVzKHsgZGF5czogMSB9KWAgaWYgdGhlcmUncyBhIERTVCBzaGlmdCBpbiBiZXR3ZWVuLlxuICAgKiBAcGFyYW0ge0R1cmF0aW9ufE9iamVjdHxudW1iZXJ9IGR1cmF0aW9uIC0gVGhlIGFtb3VudCB0byBhZGQuIEVpdGhlciBhIEx1eG9uIER1cmF0aW9uLCBhIG51bWJlciBvZiBtaWxsaXNlY29uZHMsIHRoZSBvYmplY3QgYXJndW1lbnQgdG8gRHVyYXRpb24uZnJvbU9iamVjdCgpXG4gICAqIEBleGFtcGxlIERhdGVUaW1lLm5vdygpLnBsdXMoMTIzKSAvL34+IGluIDEyMyBtaWxsaXNlY29uZHNcbiAgICogQGV4YW1wbGUgRGF0ZVRpbWUubm93KCkucGx1cyh7IG1pbnV0ZXM6IDE1IH0pIC8vfj4gaW4gMTUgbWludXRlc1xuICAgKiBAZXhhbXBsZSBEYXRlVGltZS5ub3coKS5wbHVzKHsgZGF5czogMSB9KSAvL34+IHRoaXMgdGltZSB0b21vcnJvd1xuICAgKiBAZXhhbXBsZSBEYXRlVGltZS5ub3coKS5wbHVzKHsgZGF5czogLTEgfSkgLy9+PiB0aGlzIHRpbWUgeWVzdGVyZGF5XG4gICAqIEBleGFtcGxlIERhdGVUaW1lLm5vdygpLnBsdXMoeyBob3VyczogMywgbWludXRlczogMTMgfSkgLy9+PiBpbiAzIGhyLCAxMyBtaW5cbiAgICogQGV4YW1wbGUgRGF0ZVRpbWUubm93KCkucGx1cyhEdXJhdGlvbi5mcm9tT2JqZWN0KHsgaG91cnM6IDMsIG1pbnV0ZXM6IDEzIH0pKSAvL34+IGluIDMgaHIsIDEzIG1pblxuICAgKiBAcmV0dXJuIHtEYXRlVGltZX1cbiAgICovXG4gIDtcblxuICBfcHJvdG8ucGx1cyA9IGZ1bmN0aW9uIHBsdXMoZHVyYXRpb24pIHtcbiAgICBpZiAoIXRoaXMuaXNWYWxpZCkgcmV0dXJuIHRoaXM7XG4gICAgdmFyIGR1ciA9IER1cmF0aW9uLmZyb21EdXJhdGlvbkxpa2UoZHVyYXRpb24pO1xuICAgIHJldHVybiBjbG9uZSh0aGlzLCBhZGp1c3RUaW1lKHRoaXMsIGR1cikpO1xuICB9XG4gIC8qKlxuICAgKiBTdWJ0cmFjdCBhIHBlcmlvZCBvZiB0aW1lIHRvIHRoaXMgRGF0ZVRpbWUgYW5kIHJldHVybiB0aGUgcmVzdWx0aW5nIERhdGVUaW1lXG4gICAqIFNlZSB7QGxpbmsgRGF0ZVRpbWUjcGx1c31cbiAgICogQHBhcmFtIHtEdXJhdGlvbnxPYmplY3R8bnVtYmVyfSBkdXJhdGlvbiAtIFRoZSBhbW91bnQgdG8gc3VidHJhY3QuIEVpdGhlciBhIEx1eG9uIER1cmF0aW9uLCBhIG51bWJlciBvZiBtaWxsaXNlY29uZHMsIHRoZSBvYmplY3QgYXJndW1lbnQgdG8gRHVyYXRpb24uZnJvbU9iamVjdCgpXG4gICBAcmV0dXJuIHtEYXRlVGltZX1cbiAgICovXG4gIDtcblxuICBfcHJvdG8ubWludXMgPSBmdW5jdGlvbiBtaW51cyhkdXJhdGlvbikge1xuICAgIGlmICghdGhpcy5pc1ZhbGlkKSByZXR1cm4gdGhpcztcbiAgICB2YXIgZHVyID0gRHVyYXRpb24uZnJvbUR1cmF0aW9uTGlrZShkdXJhdGlvbikubmVnYXRlKCk7XG4gICAgcmV0dXJuIGNsb25lKHRoaXMsIGFkanVzdFRpbWUodGhpcywgZHVyKSk7XG4gIH1cbiAgLyoqXG4gICAqIFwiU2V0XCIgdGhpcyBEYXRlVGltZSB0byB0aGUgYmVnaW5uaW5nIG9mIGEgdW5pdCBvZiB0aW1lLlxuICAgKiBAcGFyYW0ge3N0cmluZ30gdW5pdCAtIFRoZSB1bml0IHRvIGdvIHRvIHRoZSBiZWdpbm5pbmcgb2YuIENhbiBiZSAneWVhcicsICdxdWFydGVyJywgJ21vbnRoJywgJ3dlZWsnLCAnZGF5JywgJ2hvdXInLCAnbWludXRlJywgJ3NlY29uZCcsIG9yICdtaWxsaXNlY29uZCcuXG4gICAqIEBleGFtcGxlIERhdGVUaW1lLmxvY2FsKDIwMTQsIDMsIDMpLnN0YXJ0T2YoJ21vbnRoJykudG9JU09EYXRlKCk7IC8vPT4gJzIwMTQtMDMtMDEnXG4gICAqIEBleGFtcGxlIERhdGVUaW1lLmxvY2FsKDIwMTQsIDMsIDMpLnN0YXJ0T2YoJ3llYXInKS50b0lTT0RhdGUoKTsgLy89PiAnMjAxNC0wMS0wMSdcbiAgICogQGV4YW1wbGUgRGF0ZVRpbWUubG9jYWwoMjAxNCwgMywgMykuc3RhcnRPZignd2VlaycpLnRvSVNPRGF0ZSgpOyAvLz0+ICcyMDE0LTAzLTAzJywgd2Vla3MgYWx3YXlzIHN0YXJ0IG9uIE1vbmRheXNcbiAgICogQGV4YW1wbGUgRGF0ZVRpbWUubG9jYWwoMjAxNCwgMywgMywgNSwgMzApLnN0YXJ0T2YoJ2RheScpLnRvSVNPVGltZSgpOyAvLz0+ICcwMDowMC4wMDAtMDU6MDAnXG4gICAqIEBleGFtcGxlIERhdGVUaW1lLmxvY2FsKDIwMTQsIDMsIDMsIDUsIDMwKS5zdGFydE9mKCdob3VyJykudG9JU09UaW1lKCk7IC8vPT4gJzA1OjAwOjAwLjAwMC0wNTowMCdcbiAgICogQHJldHVybiB7RGF0ZVRpbWV9XG4gICAqL1xuICA7XG5cbiAgX3Byb3RvLnN0YXJ0T2YgPSBmdW5jdGlvbiBzdGFydE9mKHVuaXQpIHtcbiAgICBpZiAoIXRoaXMuaXNWYWxpZCkgcmV0dXJuIHRoaXM7XG4gICAgdmFyIG8gPSB7fSxcbiAgICAgICAgbm9ybWFsaXplZFVuaXQgPSBEdXJhdGlvbi5ub3JtYWxpemVVbml0KHVuaXQpO1xuXG4gICAgc3dpdGNoIChub3JtYWxpemVkVW5pdCkge1xuICAgICAgY2FzZSBcInllYXJzXCI6XG4gICAgICAgIG8ubW9udGggPSAxO1xuICAgICAgLy8gZmFsbHMgdGhyb3VnaFxuXG4gICAgICBjYXNlIFwicXVhcnRlcnNcIjpcbiAgICAgIGNhc2UgXCJtb250aHNcIjpcbiAgICAgICAgby5kYXkgPSAxO1xuICAgICAgLy8gZmFsbHMgdGhyb3VnaFxuXG4gICAgICBjYXNlIFwid2Vla3NcIjpcbiAgICAgIGNhc2UgXCJkYXlzXCI6XG4gICAgICAgIG8uaG91ciA9IDA7XG4gICAgICAvLyBmYWxscyB0aHJvdWdoXG5cbiAgICAgIGNhc2UgXCJob3Vyc1wiOlxuICAgICAgICBvLm1pbnV0ZSA9IDA7XG4gICAgICAvLyBmYWxscyB0aHJvdWdoXG5cbiAgICAgIGNhc2UgXCJtaW51dGVzXCI6XG4gICAgICAgIG8uc2Vjb25kID0gMDtcbiAgICAgIC8vIGZhbGxzIHRocm91Z2hcblxuICAgICAgY2FzZSBcInNlY29uZHNcIjpcbiAgICAgICAgby5taWxsaXNlY29uZCA9IDA7XG4gICAgICAgIGJyZWFrO1xuICAgICAgLy8gbm8gZGVmYXVsdCwgaW52YWxpZCB1bml0cyB0aHJvdyBpbiBub3JtYWxpemVVbml0KClcbiAgICB9XG5cbiAgICBpZiAobm9ybWFsaXplZFVuaXQgPT09IFwid2Vla3NcIikge1xuICAgICAgby53ZWVrZGF5ID0gMTtcbiAgICB9XG5cbiAgICBpZiAobm9ybWFsaXplZFVuaXQgPT09IFwicXVhcnRlcnNcIikge1xuICAgICAgdmFyIHEgPSBNYXRoLmNlaWwodGhpcy5tb250aCAvIDMpO1xuICAgICAgby5tb250aCA9IChxIC0gMSkgKiAzICsgMTtcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcy5zZXQobyk7XG4gIH1cbiAgLyoqXG4gICAqIFwiU2V0XCIgdGhpcyBEYXRlVGltZSB0byB0aGUgZW5kIChtZWFuaW5nIHRoZSBsYXN0IG1pbGxpc2Vjb25kKSBvZiBhIHVuaXQgb2YgdGltZVxuICAgKiBAcGFyYW0ge3N0cmluZ30gdW5pdCAtIFRoZSB1bml0IHRvIGdvIHRvIHRoZSBlbmQgb2YuIENhbiBiZSAneWVhcicsICdxdWFydGVyJywgJ21vbnRoJywgJ3dlZWsnLCAnZGF5JywgJ2hvdXInLCAnbWludXRlJywgJ3NlY29uZCcsIG9yICdtaWxsaXNlY29uZCcuXG4gICAqIEBleGFtcGxlIERhdGVUaW1lLmxvY2FsKDIwMTQsIDMsIDMpLmVuZE9mKCdtb250aCcpLnRvSVNPKCk7IC8vPT4gJzIwMTQtMDMtMzFUMjM6NTk6NTkuOTk5LTA1OjAwJ1xuICAgKiBAZXhhbXBsZSBEYXRlVGltZS5sb2NhbCgyMDE0LCAzLCAzKS5lbmRPZigneWVhcicpLnRvSVNPKCk7IC8vPT4gJzIwMTQtMTItMzFUMjM6NTk6NTkuOTk5LTA1OjAwJ1xuICAgKiBAZXhhbXBsZSBEYXRlVGltZS5sb2NhbCgyMDE0LCAzLCAzKS5lbmRPZignd2VlaycpLnRvSVNPKCk7IC8vID0+ICcyMDE0LTAzLTA5VDIzOjU5OjU5Ljk5OS0wNTowMCcsIHdlZWtzIHN0YXJ0IG9uIE1vbmRheXNcbiAgICogQGV4YW1wbGUgRGF0ZVRpbWUubG9jYWwoMjAxNCwgMywgMywgNSwgMzApLmVuZE9mKCdkYXknKS50b0lTTygpOyAvLz0+ICcyMDE0LTAzLTAzVDIzOjU5OjU5Ljk5OS0wNTowMCdcbiAgICogQGV4YW1wbGUgRGF0ZVRpbWUubG9jYWwoMjAxNCwgMywgMywgNSwgMzApLmVuZE9mKCdob3VyJykudG9JU08oKTsgLy89PiAnMjAxNC0wMy0wM1QwNTo1OTo1OS45OTktMDU6MDAnXG4gICAqIEByZXR1cm4ge0RhdGVUaW1lfVxuICAgKi9cbiAgO1xuXG4gIF9wcm90by5lbmRPZiA9IGZ1bmN0aW9uIGVuZE9mKHVuaXQpIHtcbiAgICB2YXIgX3RoaXMkcGx1cztcblxuICAgIHJldHVybiB0aGlzLmlzVmFsaWQgPyB0aGlzLnBsdXMoKF90aGlzJHBsdXMgPSB7fSwgX3RoaXMkcGx1c1t1bml0XSA9IDEsIF90aGlzJHBsdXMpKS5zdGFydE9mKHVuaXQpLm1pbnVzKDEpIDogdGhpcztcbiAgfSAvLyBPVVRQVVRcblxuICAvKipcbiAgICogUmV0dXJucyBhIHN0cmluZyByZXByZXNlbnRhdGlvbiBvZiB0aGlzIERhdGVUaW1lIGZvcm1hdHRlZCBhY2NvcmRpbmcgdG8gdGhlIHNwZWNpZmllZCBmb3JtYXQgc3RyaW5nLlxuICAgKiAqKllvdSBtYXkgbm90IHdhbnQgdGhpcy4qKiBTZWUge0BsaW5rIERhdGVUaW1lI3RvTG9jYWxlU3RyaW5nfSBmb3IgYSBtb3JlIGZsZXhpYmxlIGZvcm1hdHRpbmcgdG9vbC4gRm9yIGEgdGFibGUgb2YgdG9rZW5zIGFuZCB0aGVpciBpbnRlcnByZXRhdGlvbnMsIHNlZSBbaGVyZV0oaHR0cHM6Ly9tb21lbnQuZ2l0aHViLmlvL2x1eG9uLyMvZm9ybWF0dGluZz9pZD10YWJsZS1vZi10b2tlbnMpLlxuICAgKiBEZWZhdWx0cyB0byBlbi1VUyBpZiBubyBsb2NhbGUgaGFzIGJlZW4gc3BlY2lmaWVkLCByZWdhcmRsZXNzIG9mIHRoZSBzeXN0ZW0ncyBsb2NhbGUuXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBmbXQgLSB0aGUgZm9ybWF0IHN0cmluZ1xuICAgKiBAcGFyYW0ge09iamVjdH0gb3B0cyAtIG9wdHMgdG8gb3ZlcnJpZGUgdGhlIGNvbmZpZ3VyYXRpb24gb3B0aW9ucyBvbiB0aGlzIERhdGVUaW1lXG4gICAqIEBleGFtcGxlIERhdGVUaW1lLm5vdygpLnRvRm9ybWF0KCd5eXl5IExMTCBkZCcpIC8vPT4gJzIwMTcgQXByIDIyJ1xuICAgKiBAZXhhbXBsZSBEYXRlVGltZS5ub3coKS5zZXRMb2NhbGUoJ2ZyJykudG9Gb3JtYXQoJ3l5eXkgTExMIGRkJykgLy89PiAnMjAxNyBhdnIuIDIyJ1xuICAgKiBAZXhhbXBsZSBEYXRlVGltZS5ub3coKS50b0Zvcm1hdCgneXl5eSBMTEwgZGQnLCB7IGxvY2FsZTogXCJmclwiIH0pIC8vPT4gJzIwMTcgYXZyLiAyMidcbiAgICogQGV4YW1wbGUgRGF0ZVRpbWUubm93KCkudG9Gb3JtYXQoXCJISCAnaG91cnMgYW5kJyBtbSAnbWludXRlcydcIikgLy89PiAnMjAgaG91cnMgYW5kIDU1IG1pbnV0ZXMnXG4gICAqIEByZXR1cm4ge3N0cmluZ31cbiAgICovXG4gIDtcblxuICBfcHJvdG8udG9Gb3JtYXQgPSBmdW5jdGlvbiB0b0Zvcm1hdChmbXQsIG9wdHMpIHtcbiAgICBpZiAob3B0cyA9PT0gdm9pZCAwKSB7XG4gICAgICBvcHRzID0ge307XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXMuaXNWYWxpZCA/IEZvcm1hdHRlci5jcmVhdGUodGhpcy5sb2MucmVkZWZhdWx0VG9FTihvcHRzKSkuZm9ybWF0RGF0ZVRpbWVGcm9tU3RyaW5nKHRoaXMsIGZtdCkgOiBJTlZBTElEO1xuICB9XG4gIC8qKlxuICAgKiBSZXR1cm5zIGEgbG9jYWxpemVkIHN0cmluZyByZXByZXNlbnRpbmcgdGhpcyBkYXRlLiBBY2NlcHRzIHRoZSBzYW1lIG9wdGlvbnMgYXMgdGhlIEludGwuRGF0ZVRpbWVGb3JtYXQgY29uc3RydWN0b3IgYW5kIGFueSBwcmVzZXRzIGRlZmluZWQgYnkgTHV4b24sIHN1Y2ggYXMgYERhdGVUaW1lLkRBVEVfRlVMTGAgb3IgYERhdGVUaW1lLlRJTUVfU0lNUExFYC5cbiAgICogVGhlIGV4YWN0IGJlaGF2aW9yIG9mIHRoaXMgbWV0aG9kIGlzIGJyb3dzZXItc3BlY2lmaWMsIGJ1dCBpbiBnZW5lcmFsIGl0IHdpbGwgcmV0dXJuIGFuIGFwcHJvcHJpYXRlIHJlcHJlc2VudGF0aW9uXG4gICAqIG9mIHRoZSBEYXRlVGltZSBpbiB0aGUgYXNzaWduZWQgbG9jYWxlLlxuICAgKiBEZWZhdWx0cyB0byB0aGUgc3lzdGVtJ3MgbG9jYWxlIGlmIG5vIGxvY2FsZSBoYXMgYmVlbiBzcGVjaWZpZWRcbiAgICogQHNlZSBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9KYXZhU2NyaXB0L1JlZmVyZW5jZS9HbG9iYWxfT2JqZWN0cy9EYXRlVGltZUZvcm1hdFxuICAgKiBAcGFyYW0gZm9ybWF0T3B0cyB7T2JqZWN0fSAtIEludGwuRGF0ZVRpbWVGb3JtYXQgY29uc3RydWN0b3Igb3B0aW9ucyBhbmQgY29uZmlndXJhdGlvbiBvcHRpb25zXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRzIC0gb3B0cyB0byBvdmVycmlkZSB0aGUgY29uZmlndXJhdGlvbiBvcHRpb25zIG9uIHRoaXMgRGF0ZVRpbWVcbiAgICogQGV4YW1wbGUgRGF0ZVRpbWUubm93KCkudG9Mb2NhbGVTdHJpbmcoKTsgLy89PiA0LzIwLzIwMTdcbiAgICogQGV4YW1wbGUgRGF0ZVRpbWUubm93KCkuc2V0TG9jYWxlKCdlbi1nYicpLnRvTG9jYWxlU3RyaW5nKCk7IC8vPT4gJzIwLzA0LzIwMTcnXG4gICAqIEBleGFtcGxlIERhdGVUaW1lLm5vdygpLnRvTG9jYWxlU3RyaW5nKHsgbG9jYWxlOiAnZW4tZ2InIH0pOyAvLz0+ICcyMC8wNC8yMDE3J1xuICAgKiBAZXhhbXBsZSBEYXRlVGltZS5ub3coKS50b0xvY2FsZVN0cmluZyhEYXRlVGltZS5EQVRFX0ZVTEwpOyAvLz0+ICdBcHJpbCAyMCwgMjAxNydcbiAgICogQGV4YW1wbGUgRGF0ZVRpbWUubm93KCkudG9Mb2NhbGVTdHJpbmcoRGF0ZVRpbWUuVElNRV9TSU1QTEUpOyAvLz0+ICcxMTozMiBBTSdcbiAgICogQGV4YW1wbGUgRGF0ZVRpbWUubm93KCkudG9Mb2NhbGVTdHJpbmcoRGF0ZVRpbWUuREFURVRJTUVfU0hPUlQpOyAvLz0+ICc0LzIwLzIwMTcsIDExOjMyIEFNJ1xuICAgKiBAZXhhbXBsZSBEYXRlVGltZS5ub3coKS50b0xvY2FsZVN0cmluZyh7IHdlZWtkYXk6ICdsb25nJywgbW9udGg6ICdsb25nJywgZGF5OiAnMi1kaWdpdCcgfSk7IC8vPT4gJ1RodXJzZGF5LCBBcHJpbCAyMCdcbiAgICogQGV4YW1wbGUgRGF0ZVRpbWUubm93KCkudG9Mb2NhbGVTdHJpbmcoeyB3ZWVrZGF5OiAnc2hvcnQnLCBtb250aDogJ3Nob3J0JywgZGF5OiAnMi1kaWdpdCcsIGhvdXI6ICcyLWRpZ2l0JywgbWludXRlOiAnMi1kaWdpdCcgfSk7IC8vPT4gJ1RodSwgQXByIDIwLCAxMToyNyBBTSdcbiAgICogQGV4YW1wbGUgRGF0ZVRpbWUubm93KCkudG9Mb2NhbGVTdHJpbmcoeyBob3VyOiAnMi1kaWdpdCcsIG1pbnV0ZTogJzItZGlnaXQnLCBob3VyQ3ljbGU6ICdoMjMnIH0pOyAvLz0+ICcxMTozMidcbiAgICogQHJldHVybiB7c3RyaW5nfVxuICAgKi9cbiAgO1xuXG4gIF9wcm90by50b0xvY2FsZVN0cmluZyA9IGZ1bmN0aW9uIHRvTG9jYWxlU3RyaW5nKGZvcm1hdE9wdHMsIG9wdHMpIHtcbiAgICBpZiAoZm9ybWF0T3B0cyA9PT0gdm9pZCAwKSB7XG4gICAgICBmb3JtYXRPcHRzID0gREFURV9TSE9SVDtcbiAgICB9XG5cbiAgICBpZiAob3B0cyA9PT0gdm9pZCAwKSB7XG4gICAgICBvcHRzID0ge307XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXMuaXNWYWxpZCA/IEZvcm1hdHRlci5jcmVhdGUodGhpcy5sb2MuY2xvbmUob3B0cyksIGZvcm1hdE9wdHMpLmZvcm1hdERhdGVUaW1lKHRoaXMpIDogSU5WQUxJRDtcbiAgfVxuICAvKipcbiAgICogUmV0dXJucyBhbiBhcnJheSBvZiBmb3JtYXQgXCJwYXJ0c1wiLCBtZWFuaW5nIGluZGl2aWR1YWwgdG9rZW5zIGFsb25nIHdpdGggbWV0YWRhdGEuIFRoaXMgaXMgYWxsb3dzIGNhbGxlcnMgdG8gcG9zdC1wcm9jZXNzIGluZGl2aWR1YWwgc2VjdGlvbnMgb2YgdGhlIGZvcm1hdHRlZCBvdXRwdXQuXG4gICAqIERlZmF1bHRzIHRvIHRoZSBzeXN0ZW0ncyBsb2NhbGUgaWYgbm8gbG9jYWxlIGhhcyBiZWVuIHNwZWNpZmllZFxuICAgKiBAc2VlIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0phdmFTY3JpcHQvUmVmZXJlbmNlL0dsb2JhbF9PYmplY3RzL0RhdGVUaW1lRm9ybWF0L2Zvcm1hdFRvUGFydHNcbiAgICogQHBhcmFtIG9wdHMge09iamVjdH0gLSBJbnRsLkRhdGVUaW1lRm9ybWF0IGNvbnN0cnVjdG9yIG9wdGlvbnMsIHNhbWUgYXMgYHRvTG9jYWxlU3RyaW5nYC5cbiAgICogQGV4YW1wbGUgRGF0ZVRpbWUubm93KCkudG9Mb2NhbGVQYXJ0cygpOyAvLz0+IFtcbiAgICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vPT4gICB7IHR5cGU6ICdkYXknLCB2YWx1ZTogJzI1JyB9LFxuICAgKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy89PiAgIHsgdHlwZTogJ2xpdGVyYWwnLCB2YWx1ZTogJy8nIH0sXG4gICAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLz0+ICAgeyB0eXBlOiAnbW9udGgnLCB2YWx1ZTogJzA1JyB9LFxuICAgKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy89PiAgIHsgdHlwZTogJ2xpdGVyYWwnLCB2YWx1ZTogJy8nIH0sXG4gICAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLz0+ICAgeyB0eXBlOiAneWVhcicsIHZhbHVlOiAnMTk4MicgfVxuICAgKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy89PiBdXG4gICAqL1xuICA7XG5cbiAgX3Byb3RvLnRvTG9jYWxlUGFydHMgPSBmdW5jdGlvbiB0b0xvY2FsZVBhcnRzKG9wdHMpIHtcbiAgICBpZiAob3B0cyA9PT0gdm9pZCAwKSB7XG4gICAgICBvcHRzID0ge307XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXMuaXNWYWxpZCA/IEZvcm1hdHRlci5jcmVhdGUodGhpcy5sb2MuY2xvbmUob3B0cyksIG9wdHMpLmZvcm1hdERhdGVUaW1lUGFydHModGhpcykgOiBbXTtcbiAgfVxuICAvKipcbiAgICogUmV0dXJucyBhbiBJU08gODYwMS1jb21wbGlhbnQgc3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIHRoaXMgRGF0ZVRpbWVcbiAgICogQHBhcmFtIHtPYmplY3R9IG9wdHMgLSBvcHRpb25zXG4gICAqIEBwYXJhbSB7Ym9vbGVhbn0gW29wdHMuc3VwcHJlc3NNaWxsaXNlY29uZHM9ZmFsc2VdIC0gZXhjbHVkZSBtaWxsaXNlY29uZHMgZnJvbSB0aGUgZm9ybWF0IGlmIHRoZXkncmUgMFxuICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHRzLnN1cHByZXNzU2Vjb25kcz1mYWxzZV0gLSBleGNsdWRlIHNlY29uZHMgZnJvbSB0aGUgZm9ybWF0IGlmIHRoZXkncmUgMFxuICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHRzLmluY2x1ZGVPZmZzZXQ9dHJ1ZV0gLSBpbmNsdWRlIHRoZSBvZmZzZXQsIHN1Y2ggYXMgJ1onIG9yICctMDQ6MDAnXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBbb3B0cy5mb3JtYXQ9J2V4dGVuZGVkJ10gLSBjaG9vc2UgYmV0d2VlbiB0aGUgYmFzaWMgYW5kIGV4dGVuZGVkIGZvcm1hdFxuICAgKiBAZXhhbXBsZSBEYXRlVGltZS51dGMoMTk4MywgNSwgMjUpLnRvSVNPKCkgLy89PiAnMTk4Mi0wNS0yNVQwMDowMDowMC4wMDBaJ1xuICAgKiBAZXhhbXBsZSBEYXRlVGltZS5ub3coKS50b0lTTygpIC8vPT4gJzIwMTctMDQtMjJUMjA6NDc6MDUuMzM1LTA0OjAwJ1xuICAgKiBAZXhhbXBsZSBEYXRlVGltZS5ub3coKS50b0lTTyh7IGluY2x1ZGVPZmZzZXQ6IGZhbHNlIH0pIC8vPT4gJzIwMTctMDQtMjJUMjA6NDc6MDUuMzM1J1xuICAgKiBAZXhhbXBsZSBEYXRlVGltZS5ub3coKS50b0lTTyh7IGZvcm1hdDogJ2Jhc2ljJyB9KSAvLz0+ICcyMDE3MDQyMlQyMDQ3MDUuMzM1LTA0MDAnXG4gICAqIEByZXR1cm4ge3N0cmluZ31cbiAgICovXG4gIDtcblxuICBfcHJvdG8udG9JU08gPSBmdW5jdGlvbiB0b0lTTyhfdGVtcDMpIHtcbiAgICB2YXIgX3JlZjQgPSBfdGVtcDMgPT09IHZvaWQgMCA/IHt9IDogX3RlbXAzLFxuICAgICAgICBfcmVmNCRmb3JtYXQgPSBfcmVmNC5mb3JtYXQsXG4gICAgICAgIGZvcm1hdCA9IF9yZWY0JGZvcm1hdCA9PT0gdm9pZCAwID8gXCJleHRlbmRlZFwiIDogX3JlZjQkZm9ybWF0LFxuICAgICAgICBfcmVmNCRzdXBwcmVzc1NlY29uZHMgPSBfcmVmNC5zdXBwcmVzc1NlY29uZHMsXG4gICAgICAgIHN1cHByZXNzU2Vjb25kcyA9IF9yZWY0JHN1cHByZXNzU2Vjb25kcyA9PT0gdm9pZCAwID8gZmFsc2UgOiBfcmVmNCRzdXBwcmVzc1NlY29uZHMsXG4gICAgICAgIF9yZWY0JHN1cHByZXNzTWlsbGlzZSA9IF9yZWY0LnN1cHByZXNzTWlsbGlzZWNvbmRzLFxuICAgICAgICBzdXBwcmVzc01pbGxpc2Vjb25kcyA9IF9yZWY0JHN1cHByZXNzTWlsbGlzZSA9PT0gdm9pZCAwID8gZmFsc2UgOiBfcmVmNCRzdXBwcmVzc01pbGxpc2UsXG4gICAgICAgIF9yZWY0JGluY2x1ZGVPZmZzZXQgPSBfcmVmNC5pbmNsdWRlT2Zmc2V0LFxuICAgICAgICBpbmNsdWRlT2Zmc2V0ID0gX3JlZjQkaW5jbHVkZU9mZnNldCA9PT0gdm9pZCAwID8gdHJ1ZSA6IF9yZWY0JGluY2x1ZGVPZmZzZXQ7XG5cbiAgICBpZiAoIXRoaXMuaXNWYWxpZCkge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG4gICAgdmFyIGV4dCA9IGZvcm1hdCA9PT0gXCJleHRlbmRlZFwiO1xuXG4gICAgdmFyIGMgPSBfdG9JU09EYXRlKHRoaXMsIGV4dCk7XG5cbiAgICBjICs9IFwiVFwiO1xuICAgIGMgKz0gX3RvSVNPVGltZSh0aGlzLCBleHQsIHN1cHByZXNzU2Vjb25kcywgc3VwcHJlc3NNaWxsaXNlY29uZHMsIGluY2x1ZGVPZmZzZXQpO1xuICAgIHJldHVybiBjO1xuICB9XG4gIC8qKlxuICAgKiBSZXR1cm5zIGFuIElTTyA4NjAxLWNvbXBsaWFudCBzdHJpbmcgcmVwcmVzZW50YXRpb24gb2YgdGhpcyBEYXRlVGltZSdzIGRhdGUgY29tcG9uZW50XG4gICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRzIC0gb3B0aW9uc1xuICAgKiBAcGFyYW0ge3N0cmluZ30gW29wdHMuZm9ybWF0PSdleHRlbmRlZCddIC0gY2hvb3NlIGJldHdlZW4gdGhlIGJhc2ljIGFuZCBleHRlbmRlZCBmb3JtYXRcbiAgICogQGV4YW1wbGUgRGF0ZVRpbWUudXRjKDE5ODIsIDUsIDI1KS50b0lTT0RhdGUoKSAvLz0+ICcxOTgyLTA1LTI1J1xuICAgKiBAZXhhbXBsZSBEYXRlVGltZS51dGMoMTk4MiwgNSwgMjUpLnRvSVNPRGF0ZSh7IGZvcm1hdDogJ2Jhc2ljJyB9KSAvLz0+ICcxOTgyMDUyNSdcbiAgICogQHJldHVybiB7c3RyaW5nfVxuICAgKi9cbiAgO1xuXG4gIF9wcm90by50b0lTT0RhdGUgPSBmdW5jdGlvbiB0b0lTT0RhdGUoX3RlbXA0KSB7XG4gICAgdmFyIF9yZWY1ID0gX3RlbXA0ID09PSB2b2lkIDAgPyB7fSA6IF90ZW1wNCxcbiAgICAgICAgX3JlZjUkZm9ybWF0ID0gX3JlZjUuZm9ybWF0LFxuICAgICAgICBmb3JtYXQgPSBfcmVmNSRmb3JtYXQgPT09IHZvaWQgMCA/IFwiZXh0ZW5kZWRcIiA6IF9yZWY1JGZvcm1hdDtcblxuICAgIGlmICghdGhpcy5pc1ZhbGlkKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICByZXR1cm4gX3RvSVNPRGF0ZSh0aGlzLCBmb3JtYXQgPT09IFwiZXh0ZW5kZWRcIik7XG4gIH1cbiAgLyoqXG4gICAqIFJldHVybnMgYW4gSVNPIDg2MDEtY29tcGxpYW50IHN0cmluZyByZXByZXNlbnRhdGlvbiBvZiB0aGlzIERhdGVUaW1lJ3Mgd2VlayBkYXRlXG4gICAqIEBleGFtcGxlIERhdGVUaW1lLnV0YygxOTgyLCA1LCAyNSkudG9JU09XZWVrRGF0ZSgpIC8vPT4gJzE5ODItVzIxLTInXG4gICAqIEByZXR1cm4ge3N0cmluZ31cbiAgICovXG4gIDtcblxuICBfcHJvdG8udG9JU09XZWVrRGF0ZSA9IGZ1bmN0aW9uIHRvSVNPV2Vla0RhdGUoKSB7XG4gICAgcmV0dXJuIHRvVGVjaEZvcm1hdCh0aGlzLCBcImtra2stJ1cnV1ctY1wiKTtcbiAgfVxuICAvKipcbiAgICogUmV0dXJucyBhbiBJU08gODYwMS1jb21wbGlhbnQgc3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIHRoaXMgRGF0ZVRpbWUncyB0aW1lIGNvbXBvbmVudFxuICAgKiBAcGFyYW0ge09iamVjdH0gb3B0cyAtIG9wdGlvbnNcbiAgICogQHBhcmFtIHtib29sZWFufSBbb3B0cy5zdXBwcmVzc01pbGxpc2Vjb25kcz1mYWxzZV0gLSBleGNsdWRlIG1pbGxpc2Vjb25kcyBmcm9tIHRoZSBmb3JtYXQgaWYgdGhleSdyZSAwXG4gICAqIEBwYXJhbSB7Ym9vbGVhbn0gW29wdHMuc3VwcHJlc3NTZWNvbmRzPWZhbHNlXSAtIGV4Y2x1ZGUgc2Vjb25kcyBmcm9tIHRoZSBmb3JtYXQgaWYgdGhleSdyZSAwXG4gICAqIEBwYXJhbSB7Ym9vbGVhbn0gW29wdHMuaW5jbHVkZU9mZnNldD10cnVlXSAtIGluY2x1ZGUgdGhlIG9mZnNldCwgc3VjaCBhcyAnWicgb3IgJy0wNDowMCdcbiAgICogQHBhcmFtIHtib29sZWFufSBbb3B0cy5pbmNsdWRlUHJlZml4PWZhbHNlXSAtIGluY2x1ZGUgdGhlIGBUYCBwcmVmaXhcbiAgICogQHBhcmFtIHtzdHJpbmd9IFtvcHRzLmZvcm1hdD0nZXh0ZW5kZWQnXSAtIGNob29zZSBiZXR3ZWVuIHRoZSBiYXNpYyBhbmQgZXh0ZW5kZWQgZm9ybWF0XG4gICAqIEBleGFtcGxlIERhdGVUaW1lLnV0YygpLnNldCh7IGhvdXI6IDcsIG1pbnV0ZTogMzQgfSkudG9JU09UaW1lKCkgLy89PiAnMDc6MzQ6MTkuMzYxWidcbiAgICogQGV4YW1wbGUgRGF0ZVRpbWUudXRjKCkuc2V0KHsgaG91cjogNywgbWludXRlOiAzNCwgc2Vjb25kczogMCwgbWlsbGlzZWNvbmRzOiAwIH0pLnRvSVNPVGltZSh7IHN1cHByZXNzU2Vjb25kczogdHJ1ZSB9KSAvLz0+ICcwNzozNFonXG4gICAqIEBleGFtcGxlIERhdGVUaW1lLnV0YygpLnNldCh7IGhvdXI6IDcsIG1pbnV0ZTogMzQgfSkudG9JU09UaW1lKHsgZm9ybWF0OiAnYmFzaWMnIH0pIC8vPT4gJzA3MzQxOS4zNjFaJ1xuICAgKiBAZXhhbXBsZSBEYXRlVGltZS51dGMoKS5zZXQoeyBob3VyOiA3LCBtaW51dGU6IDM0IH0pLnRvSVNPVGltZSh7IGluY2x1ZGVQcmVmaXg6IHRydWUgfSkgLy89PiAnVDA3OjM0OjE5LjM2MVonXG4gICAqIEByZXR1cm4ge3N0cmluZ31cbiAgICovXG4gIDtcblxuICBfcHJvdG8udG9JU09UaW1lID0gZnVuY3Rpb24gdG9JU09UaW1lKF90ZW1wNSkge1xuICAgIHZhciBfcmVmNiA9IF90ZW1wNSA9PT0gdm9pZCAwID8ge30gOiBfdGVtcDUsXG4gICAgICAgIF9yZWY2JHN1cHByZXNzTWlsbGlzZSA9IF9yZWY2LnN1cHByZXNzTWlsbGlzZWNvbmRzLFxuICAgICAgICBzdXBwcmVzc01pbGxpc2Vjb25kcyA9IF9yZWY2JHN1cHByZXNzTWlsbGlzZSA9PT0gdm9pZCAwID8gZmFsc2UgOiBfcmVmNiRzdXBwcmVzc01pbGxpc2UsXG4gICAgICAgIF9yZWY2JHN1cHByZXNzU2Vjb25kcyA9IF9yZWY2LnN1cHByZXNzU2Vjb25kcyxcbiAgICAgICAgc3VwcHJlc3NTZWNvbmRzID0gX3JlZjYkc3VwcHJlc3NTZWNvbmRzID09PSB2b2lkIDAgPyBmYWxzZSA6IF9yZWY2JHN1cHByZXNzU2Vjb25kcyxcbiAgICAgICAgX3JlZjYkaW5jbHVkZU9mZnNldCA9IF9yZWY2LmluY2x1ZGVPZmZzZXQsXG4gICAgICAgIGluY2x1ZGVPZmZzZXQgPSBfcmVmNiRpbmNsdWRlT2Zmc2V0ID09PSB2b2lkIDAgPyB0cnVlIDogX3JlZjYkaW5jbHVkZU9mZnNldCxcbiAgICAgICAgX3JlZjYkaW5jbHVkZVByZWZpeCA9IF9yZWY2LmluY2x1ZGVQcmVmaXgsXG4gICAgICAgIGluY2x1ZGVQcmVmaXggPSBfcmVmNiRpbmNsdWRlUHJlZml4ID09PSB2b2lkIDAgPyBmYWxzZSA6IF9yZWY2JGluY2x1ZGVQcmVmaXgsXG4gICAgICAgIF9yZWY2JGZvcm1hdCA9IF9yZWY2LmZvcm1hdCxcbiAgICAgICAgZm9ybWF0ID0gX3JlZjYkZm9ybWF0ID09PSB2b2lkIDAgPyBcImV4dGVuZGVkXCIgOiBfcmVmNiRmb3JtYXQ7XG5cbiAgICBpZiAoIXRoaXMuaXNWYWxpZCkge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG4gICAgdmFyIGMgPSBpbmNsdWRlUHJlZml4ID8gXCJUXCIgOiBcIlwiO1xuICAgIHJldHVybiBjICsgX3RvSVNPVGltZSh0aGlzLCBmb3JtYXQgPT09IFwiZXh0ZW5kZWRcIiwgc3VwcHJlc3NTZWNvbmRzLCBzdXBwcmVzc01pbGxpc2Vjb25kcywgaW5jbHVkZU9mZnNldCk7XG4gIH1cbiAgLyoqXG4gICAqIFJldHVybnMgYW4gUkZDIDI4MjItY29tcGF0aWJsZSBzdHJpbmcgcmVwcmVzZW50YXRpb24gb2YgdGhpcyBEYXRlVGltZVxuICAgKiBAZXhhbXBsZSBEYXRlVGltZS51dGMoMjAxNCwgNywgMTMpLnRvUkZDMjgyMigpIC8vPT4gJ1N1biwgMTMgSnVsIDIwMTQgMDA6MDA6MDAgKzAwMDAnXG4gICAqIEBleGFtcGxlIERhdGVUaW1lLmxvY2FsKDIwMTQsIDcsIDEzKS50b1JGQzI4MjIoKSAvLz0+ICdTdW4sIDEzIEp1bCAyMDE0IDAwOjAwOjAwIC0wNDAwJ1xuICAgKiBAcmV0dXJuIHtzdHJpbmd9XG4gICAqL1xuICA7XG5cbiAgX3Byb3RvLnRvUkZDMjgyMiA9IGZ1bmN0aW9uIHRvUkZDMjgyMigpIHtcbiAgICByZXR1cm4gdG9UZWNoRm9ybWF0KHRoaXMsIFwiRUVFLCBkZCBMTEwgeXl5eSBISDptbTpzcyBaWlpcIiwgZmFsc2UpO1xuICB9XG4gIC8qKlxuICAgKiBSZXR1cm5zIGEgc3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIHRoaXMgRGF0ZVRpbWUgYXBwcm9wcmlhdGUgZm9yIHVzZSBpbiBIVFRQIGhlYWRlcnMuIFRoZSBvdXRwdXQgaXMgYWx3YXlzIGV4cHJlc3NlZCBpbiBHTVQuXG4gICAqIFNwZWNpZmljYWxseSwgdGhlIHN0cmluZyBjb25mb3JtcyB0byBSRkMgMTEyMy5cbiAgICogQHNlZSBodHRwczovL3d3dy53My5vcmcvUHJvdG9jb2xzL3JmYzI2MTYvcmZjMjYxNi1zZWMzLmh0bWwjc2VjMy4zLjFcbiAgICogQGV4YW1wbGUgRGF0ZVRpbWUudXRjKDIwMTQsIDcsIDEzKS50b0hUVFAoKSAvLz0+ICdTdW4sIDEzIEp1bCAyMDE0IDAwOjAwOjAwIEdNVCdcbiAgICogQGV4YW1wbGUgRGF0ZVRpbWUudXRjKDIwMTQsIDcsIDEzLCAxOSkudG9IVFRQKCkgLy89PiAnU3VuLCAxMyBKdWwgMjAxNCAxOTowMDowMCBHTVQnXG4gICAqIEByZXR1cm4ge3N0cmluZ31cbiAgICovXG4gIDtcblxuICBfcHJvdG8udG9IVFRQID0gZnVuY3Rpb24gdG9IVFRQKCkge1xuICAgIHJldHVybiB0b1RlY2hGb3JtYXQodGhpcy50b1VUQygpLCBcIkVFRSwgZGQgTExMIHl5eXkgSEg6bW06c3MgJ0dNVCdcIik7XG4gIH1cbiAgLyoqXG4gICAqIFJldHVybnMgYSBzdHJpbmcgcmVwcmVzZW50YXRpb24gb2YgdGhpcyBEYXRlVGltZSBhcHByb3ByaWF0ZSBmb3IgdXNlIGluIFNRTCBEYXRlXG4gICAqIEBleGFtcGxlIERhdGVUaW1lLnV0YygyMDE0LCA3LCAxMykudG9TUUxEYXRlKCkgLy89PiAnMjAxNC0wNy0xMydcbiAgICogQHJldHVybiB7c3RyaW5nfVxuICAgKi9cbiAgO1xuXG4gIF9wcm90by50b1NRTERhdGUgPSBmdW5jdGlvbiB0b1NRTERhdGUoKSB7XG4gICAgaWYgKCF0aGlzLmlzVmFsaWQpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIHJldHVybiBfdG9JU09EYXRlKHRoaXMsIHRydWUpO1xuICB9XG4gIC8qKlxuICAgKiBSZXR1cm5zIGEgc3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIHRoaXMgRGF0ZVRpbWUgYXBwcm9wcmlhdGUgZm9yIHVzZSBpbiBTUUwgVGltZVxuICAgKiBAcGFyYW0ge09iamVjdH0gb3B0cyAtIG9wdGlvbnNcbiAgICogQHBhcmFtIHtib29sZWFufSBbb3B0cy5pbmNsdWRlWm9uZT1mYWxzZV0gLSBpbmNsdWRlIHRoZSB6b25lLCBzdWNoIGFzICdBbWVyaWNhL05ld19Zb3JrJy4gT3ZlcnJpZGVzIGluY2x1ZGVPZmZzZXQuXG4gICAqIEBwYXJhbSB7Ym9vbGVhbn0gW29wdHMuaW5jbHVkZU9mZnNldD10cnVlXSAtIGluY2x1ZGUgdGhlIG9mZnNldCwgc3VjaCBhcyAnWicgb3IgJy0wNDowMCdcbiAgICogQGV4YW1wbGUgRGF0ZVRpbWUudXRjKCkudG9TUUwoKSAvLz0+ICcwNToxNToxNi4zNDUnXG4gICAqIEBleGFtcGxlIERhdGVUaW1lLm5vdygpLnRvU1FMKCkgLy89PiAnMDU6MTU6MTYuMzQ1IC0wNDowMCdcbiAgICogQGV4YW1wbGUgRGF0ZVRpbWUubm93KCkudG9TUUwoeyBpbmNsdWRlT2Zmc2V0OiBmYWxzZSB9KSAvLz0+ICcwNToxNToxNi4zNDUnXG4gICAqIEBleGFtcGxlIERhdGVUaW1lLm5vdygpLnRvU1FMKHsgaW5jbHVkZVpvbmU6IGZhbHNlIH0pIC8vPT4gJzA1OjE1OjE2LjM0NSBBbWVyaWNhL05ld19Zb3JrJ1xuICAgKiBAcmV0dXJuIHtzdHJpbmd9XG4gICAqL1xuICA7XG5cbiAgX3Byb3RvLnRvU1FMVGltZSA9IGZ1bmN0aW9uIHRvU1FMVGltZShfdGVtcDYpIHtcbiAgICB2YXIgX3JlZjcgPSBfdGVtcDYgPT09IHZvaWQgMCA/IHt9IDogX3RlbXA2LFxuICAgICAgICBfcmVmNyRpbmNsdWRlT2Zmc2V0ID0gX3JlZjcuaW5jbHVkZU9mZnNldCxcbiAgICAgICAgaW5jbHVkZU9mZnNldCA9IF9yZWY3JGluY2x1ZGVPZmZzZXQgPT09IHZvaWQgMCA/IHRydWUgOiBfcmVmNyRpbmNsdWRlT2Zmc2V0LFxuICAgICAgICBfcmVmNyRpbmNsdWRlWm9uZSA9IF9yZWY3LmluY2x1ZGVab25lLFxuICAgICAgICBpbmNsdWRlWm9uZSA9IF9yZWY3JGluY2x1ZGVab25lID09PSB2b2lkIDAgPyBmYWxzZSA6IF9yZWY3JGluY2x1ZGVab25lO1xuXG4gICAgdmFyIGZtdCA9IFwiSEg6bW06c3MuU1NTXCI7XG5cbiAgICBpZiAoaW5jbHVkZVpvbmUgfHwgaW5jbHVkZU9mZnNldCkge1xuICAgICAgZm10ICs9IFwiIFwiO1xuXG4gICAgICBpZiAoaW5jbHVkZVpvbmUpIHtcbiAgICAgICAgZm10ICs9IFwielwiO1xuICAgICAgfSBlbHNlIGlmIChpbmNsdWRlT2Zmc2V0KSB7XG4gICAgICAgIGZtdCArPSBcIlpaXCI7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHRvVGVjaEZvcm1hdCh0aGlzLCBmbXQsIHRydWUpO1xuICB9XG4gIC8qKlxuICAgKiBSZXR1cm5zIGEgc3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIHRoaXMgRGF0ZVRpbWUgYXBwcm9wcmlhdGUgZm9yIHVzZSBpbiBTUUwgRGF0ZVRpbWVcbiAgICogQHBhcmFtIHtPYmplY3R9IG9wdHMgLSBvcHRpb25zXG4gICAqIEBwYXJhbSB7Ym9vbGVhbn0gW29wdHMuaW5jbHVkZVpvbmU9ZmFsc2VdIC0gaW5jbHVkZSB0aGUgem9uZSwgc3VjaCBhcyAnQW1lcmljYS9OZXdfWW9yaycuIE92ZXJyaWRlcyBpbmNsdWRlT2Zmc2V0LlxuICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHRzLmluY2x1ZGVPZmZzZXQ9dHJ1ZV0gLSBpbmNsdWRlIHRoZSBvZmZzZXQsIHN1Y2ggYXMgJ1onIG9yICctMDQ6MDAnXG4gICAqIEBleGFtcGxlIERhdGVUaW1lLnV0YygyMDE0LCA3LCAxMykudG9TUUwoKSAvLz0+ICcyMDE0LTA3LTEzIDAwOjAwOjAwLjAwMCBaJ1xuICAgKiBAZXhhbXBsZSBEYXRlVGltZS5sb2NhbCgyMDE0LCA3LCAxMykudG9TUUwoKSAvLz0+ICcyMDE0LTA3LTEzIDAwOjAwOjAwLjAwMCAtMDQ6MDAnXG4gICAqIEBleGFtcGxlIERhdGVUaW1lLmxvY2FsKDIwMTQsIDcsIDEzKS50b1NRTCh7IGluY2x1ZGVPZmZzZXQ6IGZhbHNlIH0pIC8vPT4gJzIwMTQtMDctMTMgMDA6MDA6MDAuMDAwJ1xuICAgKiBAZXhhbXBsZSBEYXRlVGltZS5sb2NhbCgyMDE0LCA3LCAxMykudG9TUUwoeyBpbmNsdWRlWm9uZTogdHJ1ZSB9KSAvLz0+ICcyMDE0LTA3LTEzIDAwOjAwOjAwLjAwMCBBbWVyaWNhL05ld19Zb3JrJ1xuICAgKiBAcmV0dXJuIHtzdHJpbmd9XG4gICAqL1xuICA7XG5cbiAgX3Byb3RvLnRvU1FMID0gZnVuY3Rpb24gdG9TUUwob3B0cykge1xuICAgIGlmIChvcHRzID09PSB2b2lkIDApIHtcbiAgICAgIG9wdHMgPSB7fTtcbiAgICB9XG5cbiAgICBpZiAoIXRoaXMuaXNWYWxpZCkge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXMudG9TUUxEYXRlKCkgKyBcIiBcIiArIHRoaXMudG9TUUxUaW1lKG9wdHMpO1xuICB9XG4gIC8qKlxuICAgKiBSZXR1cm5zIGEgc3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIHRoaXMgRGF0ZVRpbWUgYXBwcm9wcmlhdGUgZm9yIGRlYnVnZ2luZ1xuICAgKiBAcmV0dXJuIHtzdHJpbmd9XG4gICAqL1xuICA7XG5cbiAgX3Byb3RvLnRvU3RyaW5nID0gZnVuY3Rpb24gdG9TdHJpbmcoKSB7XG4gICAgcmV0dXJuIHRoaXMuaXNWYWxpZCA/IHRoaXMudG9JU08oKSA6IElOVkFMSUQ7XG4gIH1cbiAgLyoqXG4gICAqIFJldHVybnMgdGhlIGVwb2NoIG1pbGxpc2Vjb25kcyBvZiB0aGlzIERhdGVUaW1lLiBBbGlhcyBvZiB7QGxpbmsgRGF0ZVRpbWUjdG9NaWxsaXN9XG4gICAqIEByZXR1cm4ge251bWJlcn1cbiAgICovXG4gIDtcblxuICBfcHJvdG8udmFsdWVPZiA9IGZ1bmN0aW9uIHZhbHVlT2YoKSB7XG4gICAgcmV0dXJuIHRoaXMudG9NaWxsaXMoKTtcbiAgfVxuICAvKipcbiAgICogUmV0dXJucyB0aGUgZXBvY2ggbWlsbGlzZWNvbmRzIG9mIHRoaXMgRGF0ZVRpbWUuXG4gICAqIEByZXR1cm4ge251bWJlcn1cbiAgICovXG4gIDtcblxuICBfcHJvdG8udG9NaWxsaXMgPSBmdW5jdGlvbiB0b01pbGxpcygpIHtcbiAgICByZXR1cm4gdGhpcy5pc1ZhbGlkID8gdGhpcy50cyA6IE5hTjtcbiAgfVxuICAvKipcbiAgICogUmV0dXJucyB0aGUgZXBvY2ggc2Vjb25kcyBvZiB0aGlzIERhdGVUaW1lLlxuICAgKiBAcmV0dXJuIHtudW1iZXJ9XG4gICAqL1xuICA7XG5cbiAgX3Byb3RvLnRvU2Vjb25kcyA9IGZ1bmN0aW9uIHRvU2Vjb25kcygpIHtcbiAgICByZXR1cm4gdGhpcy5pc1ZhbGlkID8gdGhpcy50cyAvIDEwMDAgOiBOYU47XG4gIH1cbiAgLyoqXG4gICAqIFJldHVybnMgYW4gSVNPIDg2MDEgcmVwcmVzZW50YXRpb24gb2YgdGhpcyBEYXRlVGltZSBhcHByb3ByaWF0ZSBmb3IgdXNlIGluIEpTT04uXG4gICAqIEByZXR1cm4ge3N0cmluZ31cbiAgICovXG4gIDtcblxuICBfcHJvdG8udG9KU09OID0gZnVuY3Rpb24gdG9KU09OKCkge1xuICAgIHJldHVybiB0aGlzLnRvSVNPKCk7XG4gIH1cbiAgLyoqXG4gICAqIFJldHVybnMgYSBCU09OIHNlcmlhbGl6YWJsZSBlcXVpdmFsZW50IHRvIHRoaXMgRGF0ZVRpbWUuXG4gICAqIEByZXR1cm4ge0RhdGV9XG4gICAqL1xuICA7XG5cbiAgX3Byb3RvLnRvQlNPTiA9IGZ1bmN0aW9uIHRvQlNPTigpIHtcbiAgICByZXR1cm4gdGhpcy50b0pTRGF0ZSgpO1xuICB9XG4gIC8qKlxuICAgKiBSZXR1cm5zIGEgSmF2YVNjcmlwdCBvYmplY3Qgd2l0aCB0aGlzIERhdGVUaW1lJ3MgeWVhciwgbW9udGgsIGRheSwgYW5kIHNvIG9uLlxuICAgKiBAcGFyYW0gb3B0cyAtIG9wdGlvbnMgZm9yIGdlbmVyYXRpbmcgdGhlIG9iamVjdFxuICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHRzLmluY2x1ZGVDb25maWc9ZmFsc2VdIC0gaW5jbHVkZSBjb25maWd1cmF0aW9uIGF0dHJpYnV0ZXMgaW4gdGhlIG91dHB1dFxuICAgKiBAZXhhbXBsZSBEYXRlVGltZS5ub3coKS50b09iamVjdCgpIC8vPT4geyB5ZWFyOiAyMDE3LCBtb250aDogNCwgZGF5OiAyMiwgaG91cjogMjAsIG1pbnV0ZTogNDksIHNlY29uZDogNDIsIG1pbGxpc2Vjb25kOiAyNjggfVxuICAgKiBAcmV0dXJuIHtPYmplY3R9XG4gICAqL1xuICA7XG5cbiAgX3Byb3RvLnRvT2JqZWN0ID0gZnVuY3Rpb24gdG9PYmplY3Qob3B0cykge1xuICAgIGlmIChvcHRzID09PSB2b2lkIDApIHtcbiAgICAgIG9wdHMgPSB7fTtcbiAgICB9XG5cbiAgICBpZiAoIXRoaXMuaXNWYWxpZCkgcmV0dXJuIHt9O1xuXG4gICAgdmFyIGJhc2UgPSBfZXh0ZW5kcyh7fSwgdGhpcy5jKTtcblxuICAgIGlmIChvcHRzLmluY2x1ZGVDb25maWcpIHtcbiAgICAgIGJhc2Uub3V0cHV0Q2FsZW5kYXIgPSB0aGlzLm91dHB1dENhbGVuZGFyO1xuICAgICAgYmFzZS5udW1iZXJpbmdTeXN0ZW0gPSB0aGlzLmxvYy5udW1iZXJpbmdTeXN0ZW07XG4gICAgICBiYXNlLmxvY2FsZSA9IHRoaXMubG9jLmxvY2FsZTtcbiAgICB9XG5cbiAgICByZXR1cm4gYmFzZTtcbiAgfVxuICAvKipcbiAgICogUmV0dXJucyBhIEphdmFTY3JpcHQgRGF0ZSBlcXVpdmFsZW50IHRvIHRoaXMgRGF0ZVRpbWUuXG4gICAqIEByZXR1cm4ge0RhdGV9XG4gICAqL1xuICA7XG5cbiAgX3Byb3RvLnRvSlNEYXRlID0gZnVuY3Rpb24gdG9KU0RhdGUoKSB7XG4gICAgcmV0dXJuIG5ldyBEYXRlKHRoaXMuaXNWYWxpZCA/IHRoaXMudHMgOiBOYU4pO1xuICB9IC8vIENPTVBBUkVcblxuICAvKipcbiAgICogUmV0dXJuIHRoZSBkaWZmZXJlbmNlIGJldHdlZW4gdHdvIERhdGVUaW1lcyBhcyBhIER1cmF0aW9uLlxuICAgKiBAcGFyYW0ge0RhdGVUaW1lfSBvdGhlckRhdGVUaW1lIC0gdGhlIERhdGVUaW1lIHRvIGNvbXBhcmUgdGhpcyBvbmUgdG9cbiAgICogQHBhcmFtIHtzdHJpbmd8c3RyaW5nW119IFt1bml0PVsnbWlsbGlzZWNvbmRzJ11dIC0gdGhlIHVuaXQgb3IgYXJyYXkgb2YgdW5pdHMgKHN1Y2ggYXMgJ2hvdXJzJyBvciAnZGF5cycpIHRvIGluY2x1ZGUgaW4gdGhlIGR1cmF0aW9uLlxuICAgKiBAcGFyYW0ge09iamVjdH0gb3B0cyAtIG9wdGlvbnMgdGhhdCBhZmZlY3QgdGhlIGNyZWF0aW9uIG9mIHRoZSBEdXJhdGlvblxuICAgKiBAcGFyYW0ge3N0cmluZ30gW29wdHMuY29udmVyc2lvbkFjY3VyYWN5PSdjYXN1YWwnXSAtIHRoZSBjb252ZXJzaW9uIHN5c3RlbSB0byB1c2VcbiAgICogQGV4YW1wbGVcbiAgICogdmFyIGkxID0gRGF0ZVRpbWUuZnJvbUlTTygnMTk4Mi0wNS0yNVQwOTo0NScpLFxuICAgKiAgICAgaTIgPSBEYXRlVGltZS5mcm9tSVNPKCcxOTgzLTEwLTE0VDEwOjMwJyk7XG4gICAqIGkyLmRpZmYoaTEpLnRvT2JqZWN0KCkgLy89PiB7IG1pbGxpc2Vjb25kczogNDM4MDc1MDAwMDAgfVxuICAgKiBpMi5kaWZmKGkxLCAnaG91cnMnKS50b09iamVjdCgpIC8vPT4geyBob3VyczogMTIxNjguNzUgfVxuICAgKiBpMi5kaWZmKGkxLCBbJ21vbnRocycsICdkYXlzJ10pLnRvT2JqZWN0KCkgLy89PiB7IG1vbnRoczogMTYsIGRheXM6IDE5LjAzMTI1IH1cbiAgICogaTIuZGlmZihpMSwgWydtb250aHMnLCAnZGF5cycsICdob3VycyddKS50b09iamVjdCgpIC8vPT4geyBtb250aHM6IDE2LCBkYXlzOiAxOSwgaG91cnM6IDAuNzUgfVxuICAgKiBAcmV0dXJuIHtEdXJhdGlvbn1cbiAgICovXG4gIDtcblxuICBfcHJvdG8uZGlmZiA9IGZ1bmN0aW9uIGRpZmYob3RoZXJEYXRlVGltZSwgdW5pdCwgb3B0cykge1xuICAgIGlmICh1bml0ID09PSB2b2lkIDApIHtcbiAgICAgIHVuaXQgPSBcIm1pbGxpc2Vjb25kc1wiO1xuICAgIH1cblxuICAgIGlmIChvcHRzID09PSB2b2lkIDApIHtcbiAgICAgIG9wdHMgPSB7fTtcbiAgICB9XG5cbiAgICBpZiAoIXRoaXMuaXNWYWxpZCB8fCAhb3RoZXJEYXRlVGltZS5pc1ZhbGlkKSB7XG4gICAgICByZXR1cm4gRHVyYXRpb24uaW52YWxpZChcImNyZWF0ZWQgYnkgZGlmZmluZyBhbiBpbnZhbGlkIERhdGVUaW1lXCIpO1xuICAgIH1cblxuICAgIHZhciBkdXJPcHRzID0gX2V4dGVuZHMoe1xuICAgICAgbG9jYWxlOiB0aGlzLmxvY2FsZSxcbiAgICAgIG51bWJlcmluZ1N5c3RlbTogdGhpcy5udW1iZXJpbmdTeXN0ZW1cbiAgICB9LCBvcHRzKTtcblxuICAgIHZhciB1bml0cyA9IG1heWJlQXJyYXkodW5pdCkubWFwKER1cmF0aW9uLm5vcm1hbGl6ZVVuaXQpLFxuICAgICAgICBvdGhlcklzTGF0ZXIgPSBvdGhlckRhdGVUaW1lLnZhbHVlT2YoKSA+IHRoaXMudmFsdWVPZigpLFxuICAgICAgICBlYXJsaWVyID0gb3RoZXJJc0xhdGVyID8gdGhpcyA6IG90aGVyRGF0ZVRpbWUsXG4gICAgICAgIGxhdGVyID0gb3RoZXJJc0xhdGVyID8gb3RoZXJEYXRlVGltZSA6IHRoaXMsXG4gICAgICAgIGRpZmZlZCA9IF9kaWZmKGVhcmxpZXIsIGxhdGVyLCB1bml0cywgZHVyT3B0cyk7XG5cbiAgICByZXR1cm4gb3RoZXJJc0xhdGVyID8gZGlmZmVkLm5lZ2F0ZSgpIDogZGlmZmVkO1xuICB9XG4gIC8qKlxuICAgKiBSZXR1cm4gdGhlIGRpZmZlcmVuY2UgYmV0d2VlbiB0aGlzIERhdGVUaW1lIGFuZCByaWdodCBub3cuXG4gICAqIFNlZSB7QGxpbmsgRGF0ZVRpbWUjZGlmZn1cbiAgICogQHBhcmFtIHtzdHJpbmd8c3RyaW5nW119IFt1bml0PVsnbWlsbGlzZWNvbmRzJ11dIC0gdGhlIHVuaXQgb3IgdW5pdHMgdW5pdHMgKHN1Y2ggYXMgJ2hvdXJzJyBvciAnZGF5cycpIHRvIGluY2x1ZGUgaW4gdGhlIGR1cmF0aW9uXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRzIC0gb3B0aW9ucyB0aGF0IGFmZmVjdCB0aGUgY3JlYXRpb24gb2YgdGhlIER1cmF0aW9uXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBbb3B0cy5jb252ZXJzaW9uQWNjdXJhY3k9J2Nhc3VhbCddIC0gdGhlIGNvbnZlcnNpb24gc3lzdGVtIHRvIHVzZVxuICAgKiBAcmV0dXJuIHtEdXJhdGlvbn1cbiAgICovXG4gIDtcblxuICBfcHJvdG8uZGlmZk5vdyA9IGZ1bmN0aW9uIGRpZmZOb3codW5pdCwgb3B0cykge1xuICAgIGlmICh1bml0ID09PSB2b2lkIDApIHtcbiAgICAgIHVuaXQgPSBcIm1pbGxpc2Vjb25kc1wiO1xuICAgIH1cblxuICAgIGlmIChvcHRzID09PSB2b2lkIDApIHtcbiAgICAgIG9wdHMgPSB7fTtcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcy5kaWZmKERhdGVUaW1lLm5vdygpLCB1bml0LCBvcHRzKTtcbiAgfVxuICAvKipcbiAgICogUmV0dXJuIGFuIEludGVydmFsIHNwYW5uaW5nIGJldHdlZW4gdGhpcyBEYXRlVGltZSBhbmQgYW5vdGhlciBEYXRlVGltZVxuICAgKiBAcGFyYW0ge0RhdGVUaW1lfSBvdGhlckRhdGVUaW1lIC0gdGhlIG90aGVyIGVuZCBwb2ludCBvZiB0aGUgSW50ZXJ2YWxcbiAgICogQHJldHVybiB7SW50ZXJ2YWx9XG4gICAqL1xuICA7XG5cbiAgX3Byb3RvLnVudGlsID0gZnVuY3Rpb24gdW50aWwob3RoZXJEYXRlVGltZSkge1xuICAgIHJldHVybiB0aGlzLmlzVmFsaWQgPyBJbnRlcnZhbC5mcm9tRGF0ZVRpbWVzKHRoaXMsIG90aGVyRGF0ZVRpbWUpIDogdGhpcztcbiAgfVxuICAvKipcbiAgICogUmV0dXJuIHdoZXRoZXIgdGhpcyBEYXRlVGltZSBpcyBpbiB0aGUgc2FtZSB1bml0IG9mIHRpbWUgYXMgYW5vdGhlciBEYXRlVGltZS5cbiAgICogSGlnaGVyLW9yZGVyIHVuaXRzIG11c3QgYWxzbyBiZSBpZGVudGljYWwgZm9yIHRoaXMgZnVuY3Rpb24gdG8gcmV0dXJuIGB0cnVlYC5cbiAgICogTm90ZSB0aGF0IHRpbWUgem9uZXMgYXJlICoqaWdub3JlZCoqIGluIHRoaXMgY29tcGFyaXNvbiwgd2hpY2ggY29tcGFyZXMgdGhlICoqbG9jYWwqKiBjYWxlbmRhciB0aW1lLiBVc2Uge0BsaW5rIERhdGVUaW1lI3NldFpvbmV9IHRvIGNvbnZlcnQgb25lIG9mIHRoZSBkYXRlcyBpZiBuZWVkZWQuXG4gICAqIEBwYXJhbSB7RGF0ZVRpbWV9IG90aGVyRGF0ZVRpbWUgLSB0aGUgb3RoZXIgRGF0ZVRpbWVcbiAgICogQHBhcmFtIHtzdHJpbmd9IHVuaXQgLSB0aGUgdW5pdCBvZiB0aW1lIHRvIGNoZWNrIHNhbWVuZXNzIG9uXG4gICAqIEBleGFtcGxlIERhdGVUaW1lLm5vdygpLmhhc1NhbWUob3RoZXJEVCwgJ2RheScpOyAvL34+IHRydWUgaWYgb3RoZXJEVCBpcyBpbiB0aGUgc2FtZSBjdXJyZW50IGNhbGVuZGFyIGRheVxuICAgKiBAcmV0dXJuIHtib29sZWFufVxuICAgKi9cbiAgO1xuXG4gIF9wcm90by5oYXNTYW1lID0gZnVuY3Rpb24gaGFzU2FtZShvdGhlckRhdGVUaW1lLCB1bml0KSB7XG4gICAgaWYgKCF0aGlzLmlzVmFsaWQpIHJldHVybiBmYWxzZTtcbiAgICB2YXIgaW5wdXRNcyA9IG90aGVyRGF0ZVRpbWUudmFsdWVPZigpO1xuICAgIHZhciBhZGp1c3RlZFRvWm9uZSA9IHRoaXMuc2V0Wm9uZShvdGhlckRhdGVUaW1lLnpvbmUsIHtcbiAgICAgIGtlZXBMb2NhbFRpbWU6IHRydWVcbiAgICB9KTtcbiAgICByZXR1cm4gYWRqdXN0ZWRUb1pvbmUuc3RhcnRPZih1bml0KSA8PSBpbnB1dE1zICYmIGlucHV0TXMgPD0gYWRqdXN0ZWRUb1pvbmUuZW5kT2YodW5pdCk7XG4gIH1cbiAgLyoqXG4gICAqIEVxdWFsaXR5IGNoZWNrXG4gICAqIFR3byBEYXRlVGltZXMgYXJlIGVxdWFsIGlmZiB0aGV5IHJlcHJlc2VudCB0aGUgc2FtZSBtaWxsaXNlY29uZCwgaGF2ZSB0aGUgc2FtZSB6b25lIGFuZCBsb2NhdGlvbiwgYW5kIGFyZSBib3RoIHZhbGlkLlxuICAgKiBUbyBjb21wYXJlIGp1c3QgdGhlIG1pbGxpc2Vjb25kIHZhbHVlcywgdXNlIGArZHQxID09PSArZHQyYC5cbiAgICogQHBhcmFtIHtEYXRlVGltZX0gb3RoZXIgLSB0aGUgb3RoZXIgRGF0ZVRpbWVcbiAgICogQHJldHVybiB7Ym9vbGVhbn1cbiAgICovXG4gIDtcblxuICBfcHJvdG8uZXF1YWxzID0gZnVuY3Rpb24gZXF1YWxzKG90aGVyKSB7XG4gICAgcmV0dXJuIHRoaXMuaXNWYWxpZCAmJiBvdGhlci5pc1ZhbGlkICYmIHRoaXMudmFsdWVPZigpID09PSBvdGhlci52YWx1ZU9mKCkgJiYgdGhpcy56b25lLmVxdWFscyhvdGhlci56b25lKSAmJiB0aGlzLmxvYy5lcXVhbHMob3RoZXIubG9jKTtcbiAgfVxuICAvKipcbiAgICogUmV0dXJucyBhIHN0cmluZyByZXByZXNlbnRhdGlvbiBvZiBhIHRoaXMgdGltZSByZWxhdGl2ZSB0byBub3csIHN1Y2ggYXMgXCJpbiB0d28gZGF5c1wiLiBDYW4gb25seSBpbnRlcm5hdGlvbmFsaXplIGlmIHlvdXJcbiAgICogcGxhdGZvcm0gc3VwcG9ydHMgSW50bC5SZWxhdGl2ZVRpbWVGb3JtYXQuIFJvdW5kcyBkb3duIGJ5IGRlZmF1bHQuXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zIC0gb3B0aW9ucyB0aGF0IGFmZmVjdCB0aGUgb3V0cHV0XG4gICAqIEBwYXJhbSB7RGF0ZVRpbWV9IFtvcHRpb25zLmJhc2U9RGF0ZVRpbWUubm93KCldIC0gdGhlIERhdGVUaW1lIHRvIHVzZSBhcyB0aGUgYmFzaXMgdG8gd2hpY2ggdGhpcyB0aW1lIGlzIGNvbXBhcmVkLiBEZWZhdWx0cyB0byBub3cuXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBbb3B0aW9ucy5zdHlsZT1cImxvbmdcIl0gLSB0aGUgc3R5bGUgb2YgdW5pdHMsIG11c3QgYmUgXCJsb25nXCIsIFwic2hvcnRcIiwgb3IgXCJuYXJyb3dcIlxuICAgKiBAcGFyYW0ge3N0cmluZ3xzdHJpbmdbXX0gb3B0aW9ucy51bml0IC0gdXNlIGEgc3BlY2lmaWMgdW5pdCBvciBhcnJheSBvZiB1bml0czsgaWYgb21pdHRlZCwgb3IgYW4gYXJyYXksIHRoZSBtZXRob2Qgd2lsbCBwaWNrIHRoZSBiZXN0IHVuaXQuIFVzZSBhbiBhcnJheSBvciBvbmUgb2YgXCJ5ZWFyc1wiLCBcInF1YXJ0ZXJzXCIsIFwibW9udGhzXCIsIFwid2Vla3NcIiwgXCJkYXlzXCIsIFwiaG91cnNcIiwgXCJtaW51dGVzXCIsIG9yIFwic2Vjb25kc1wiXG4gICAqIEBwYXJhbSB7Ym9vbGVhbn0gW29wdGlvbnMucm91bmQ9dHJ1ZV0gLSB3aGV0aGVyIHRvIHJvdW5kIHRoZSBudW1iZXJzIGluIHRoZSBvdXRwdXQuXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBbb3B0aW9ucy5wYWRkaW5nPTBdIC0gcGFkZGluZyBpbiBtaWxsaXNlY29uZHMuIFRoaXMgYWxsb3dzIHlvdSB0byByb3VuZCB1cCB0aGUgcmVzdWx0IGlmIGl0IGZpdHMgaW5zaWRlIHRoZSB0aHJlc2hvbGQuIERvbid0IHVzZSBpbiBjb21iaW5hdGlvbiB3aXRoIHtyb3VuZDogZmFsc2V9IGJlY2F1c2UgdGhlIGRlY2ltYWwgb3V0cHV0IHdpbGwgaW5jbHVkZSB0aGUgcGFkZGluZy5cbiAgICogQHBhcmFtIHtzdHJpbmd9IG9wdGlvbnMubG9jYWxlIC0gb3ZlcnJpZGUgdGhlIGxvY2FsZSBvZiB0aGlzIERhdGVUaW1lXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBvcHRpb25zLm51bWJlcmluZ1N5c3RlbSAtIG92ZXJyaWRlIHRoZSBudW1iZXJpbmdTeXN0ZW0gb2YgdGhpcyBEYXRlVGltZS4gVGhlIEludGwgc3lzdGVtIG1heSBjaG9vc2Ugbm90IHRvIGhvbm9yIHRoaXNcbiAgICogQGV4YW1wbGUgRGF0ZVRpbWUubm93KCkucGx1cyh7IGRheXM6IDEgfSkudG9SZWxhdGl2ZSgpIC8vPT4gXCJpbiAxIGRheVwiXG4gICAqIEBleGFtcGxlIERhdGVUaW1lLm5vdygpLnNldExvY2FsZShcImVzXCIpLnRvUmVsYXRpdmUoeyBkYXlzOiAxIH0pIC8vPT4gXCJkZW50cm8gZGUgMSBkw61hXCJcbiAgICogQGV4YW1wbGUgRGF0ZVRpbWUubm93KCkucGx1cyh7IGRheXM6IDEgfSkudG9SZWxhdGl2ZSh7IGxvY2FsZTogXCJmclwiIH0pIC8vPT4gXCJkYW5zIDIzIGhldXJlc1wiXG4gICAqIEBleGFtcGxlIERhdGVUaW1lLm5vdygpLm1pbnVzKHsgZGF5czogMiB9KS50b1JlbGF0aXZlKCkgLy89PiBcIjIgZGF5cyBhZ29cIlxuICAgKiBAZXhhbXBsZSBEYXRlVGltZS5ub3coKS5taW51cyh7IGRheXM6IDIgfSkudG9SZWxhdGl2ZSh7IHVuaXQ6IFwiaG91cnNcIiB9KSAvLz0+IFwiNDggaG91cnMgYWdvXCJcbiAgICogQGV4YW1wbGUgRGF0ZVRpbWUubm93KCkubWludXMoeyBob3VyczogMzYgfSkudG9SZWxhdGl2ZSh7IHJvdW5kOiBmYWxzZSB9KSAvLz0+IFwiMS41IGRheXMgYWdvXCJcbiAgICovXG4gIDtcblxuICBfcHJvdG8udG9SZWxhdGl2ZSA9IGZ1bmN0aW9uIHRvUmVsYXRpdmUob3B0aW9ucykge1xuICAgIGlmIChvcHRpb25zID09PSB2b2lkIDApIHtcbiAgICAgIG9wdGlvbnMgPSB7fTtcbiAgICB9XG5cbiAgICBpZiAoIXRoaXMuaXNWYWxpZCkgcmV0dXJuIG51bGw7XG4gICAgdmFyIGJhc2UgPSBvcHRpb25zLmJhc2UgfHwgRGF0ZVRpbWUuZnJvbU9iamVjdCh7fSwge1xuICAgICAgem9uZTogdGhpcy56b25lXG4gICAgfSksXG4gICAgICAgIHBhZGRpbmcgPSBvcHRpb25zLnBhZGRpbmcgPyB0aGlzIDwgYmFzZSA/IC1vcHRpb25zLnBhZGRpbmcgOiBvcHRpb25zLnBhZGRpbmcgOiAwO1xuICAgIHZhciB1bml0cyA9IFtcInllYXJzXCIsIFwibW9udGhzXCIsIFwiZGF5c1wiLCBcImhvdXJzXCIsIFwibWludXRlc1wiLCBcInNlY29uZHNcIl07XG4gICAgdmFyIHVuaXQgPSBvcHRpb25zLnVuaXQ7XG5cbiAgICBpZiAoQXJyYXkuaXNBcnJheShvcHRpb25zLnVuaXQpKSB7XG4gICAgICB1bml0cyA9IG9wdGlvbnMudW5pdDtcbiAgICAgIHVuaXQgPSB1bmRlZmluZWQ7XG4gICAgfVxuXG4gICAgcmV0dXJuIGRpZmZSZWxhdGl2ZShiYXNlLCB0aGlzLnBsdXMocGFkZGluZyksIF9leHRlbmRzKHt9LCBvcHRpb25zLCB7XG4gICAgICBudW1lcmljOiBcImFsd2F5c1wiLFxuICAgICAgdW5pdHM6IHVuaXRzLFxuICAgICAgdW5pdDogdW5pdFxuICAgIH0pKTtcbiAgfVxuICAvKipcbiAgICogUmV0dXJucyBhIHN0cmluZyByZXByZXNlbnRhdGlvbiBvZiB0aGlzIGRhdGUgcmVsYXRpdmUgdG8gdG9kYXksIHN1Y2ggYXMgXCJ5ZXN0ZXJkYXlcIiBvciBcIm5leHQgbW9udGhcIi5cbiAgICogT25seSBpbnRlcm5hdGlvbmFsaXplcyBvbiBwbGF0Zm9ybXMgdGhhdCBzdXBwb3J0cyBJbnRsLlJlbGF0aXZlVGltZUZvcm1hdC5cbiAgICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnMgLSBvcHRpb25zIHRoYXQgYWZmZWN0IHRoZSBvdXRwdXRcbiAgICogQHBhcmFtIHtEYXRlVGltZX0gW29wdGlvbnMuYmFzZT1EYXRlVGltZS5ub3coKV0gLSB0aGUgRGF0ZVRpbWUgdG8gdXNlIGFzIHRoZSBiYXNpcyB0byB3aGljaCB0aGlzIHRpbWUgaXMgY29tcGFyZWQuIERlZmF1bHRzIHRvIG5vdy5cbiAgICogQHBhcmFtIHtzdHJpbmd9IG9wdGlvbnMubG9jYWxlIC0gb3ZlcnJpZGUgdGhlIGxvY2FsZSBvZiB0aGlzIERhdGVUaW1lXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBvcHRpb25zLnVuaXQgLSB1c2UgYSBzcGVjaWZpYyB1bml0OyBpZiBvbWl0dGVkLCB0aGUgbWV0aG9kIHdpbGwgcGljayB0aGUgdW5pdC4gVXNlIG9uZSBvZiBcInllYXJzXCIsIFwicXVhcnRlcnNcIiwgXCJtb250aHNcIiwgXCJ3ZWVrc1wiLCBvciBcImRheXNcIlxuICAgKiBAcGFyYW0ge3N0cmluZ30gb3B0aW9ucy5udW1iZXJpbmdTeXN0ZW0gLSBvdmVycmlkZSB0aGUgbnVtYmVyaW5nU3lzdGVtIG9mIHRoaXMgRGF0ZVRpbWUuIFRoZSBJbnRsIHN5c3RlbSBtYXkgY2hvb3NlIG5vdCB0byBob25vciB0aGlzXG4gICAqIEBleGFtcGxlIERhdGVUaW1lLm5vdygpLnBsdXMoeyBkYXlzOiAxIH0pLnRvUmVsYXRpdmVDYWxlbmRhcigpIC8vPT4gXCJ0b21vcnJvd1wiXG4gICAqIEBleGFtcGxlIERhdGVUaW1lLm5vdygpLnNldExvY2FsZShcImVzXCIpLnBsdXMoeyBkYXlzOiAxIH0pLnRvUmVsYXRpdmUoKSAvLz0+IFwiXCJtYcOxYW5hXCJcbiAgICogQGV4YW1wbGUgRGF0ZVRpbWUubm93KCkucGx1cyh7IGRheXM6IDEgfSkudG9SZWxhdGl2ZUNhbGVuZGFyKHsgbG9jYWxlOiBcImZyXCIgfSkgLy89PiBcImRlbWFpblwiXG4gICAqIEBleGFtcGxlIERhdGVUaW1lLm5vdygpLm1pbnVzKHsgZGF5czogMiB9KS50b1JlbGF0aXZlQ2FsZW5kYXIoKSAvLz0+IFwiMiBkYXlzIGFnb1wiXG4gICAqL1xuICA7XG5cbiAgX3Byb3RvLnRvUmVsYXRpdmVDYWxlbmRhciA9IGZ1bmN0aW9uIHRvUmVsYXRpdmVDYWxlbmRhcihvcHRpb25zKSB7XG4gICAgaWYgKG9wdGlvbnMgPT09IHZvaWQgMCkge1xuICAgICAgb3B0aW9ucyA9IHt9O1xuICAgIH1cblxuICAgIGlmICghdGhpcy5pc1ZhbGlkKSByZXR1cm4gbnVsbDtcbiAgICByZXR1cm4gZGlmZlJlbGF0aXZlKG9wdGlvbnMuYmFzZSB8fCBEYXRlVGltZS5mcm9tT2JqZWN0KHt9LCB7XG4gICAgICB6b25lOiB0aGlzLnpvbmVcbiAgICB9KSwgdGhpcywgX2V4dGVuZHMoe30sIG9wdGlvbnMsIHtcbiAgICAgIG51bWVyaWM6IFwiYXV0b1wiLFxuICAgICAgdW5pdHM6IFtcInllYXJzXCIsIFwibW9udGhzXCIsIFwiZGF5c1wiXSxcbiAgICAgIGNhbGVuZGFyeTogdHJ1ZVxuICAgIH0pKTtcbiAgfVxuICAvKipcbiAgICogUmV0dXJuIHRoZSBtaW4gb2Ygc2V2ZXJhbCBkYXRlIHRpbWVzXG4gICAqIEBwYXJhbSB7Li4uRGF0ZVRpbWV9IGRhdGVUaW1lcyAtIHRoZSBEYXRlVGltZXMgZnJvbSB3aGljaCB0byBjaG9vc2UgdGhlIG1pbmltdW1cbiAgICogQHJldHVybiB7RGF0ZVRpbWV9IHRoZSBtaW4gRGF0ZVRpbWUsIG9yIHVuZGVmaW5lZCBpZiBjYWxsZWQgd2l0aCBubyBhcmd1bWVudFxuICAgKi9cbiAgO1xuXG4gIERhdGVUaW1lLm1pbiA9IGZ1bmN0aW9uIG1pbigpIHtcbiAgICBmb3IgKHZhciBfbGVuID0gYXJndW1lbnRzLmxlbmd0aCwgZGF0ZVRpbWVzID0gbmV3IEFycmF5KF9sZW4pLCBfa2V5ID0gMDsgX2tleSA8IF9sZW47IF9rZXkrKykge1xuICAgICAgZGF0ZVRpbWVzW19rZXldID0gYXJndW1lbnRzW19rZXldO1xuICAgIH1cblxuICAgIGlmICghZGF0ZVRpbWVzLmV2ZXJ5KERhdGVUaW1lLmlzRGF0ZVRpbWUpKSB7XG4gICAgICB0aHJvdyBuZXcgSW52YWxpZEFyZ3VtZW50RXJyb3IoXCJtaW4gcmVxdWlyZXMgYWxsIGFyZ3VtZW50cyBiZSBEYXRlVGltZXNcIik7XG4gICAgfVxuXG4gICAgcmV0dXJuIGJlc3RCeShkYXRlVGltZXMsIGZ1bmN0aW9uIChpKSB7XG4gICAgICByZXR1cm4gaS52YWx1ZU9mKCk7XG4gICAgfSwgTWF0aC5taW4pO1xuICB9XG4gIC8qKlxuICAgKiBSZXR1cm4gdGhlIG1heCBvZiBzZXZlcmFsIGRhdGUgdGltZXNcbiAgICogQHBhcmFtIHsuLi5EYXRlVGltZX0gZGF0ZVRpbWVzIC0gdGhlIERhdGVUaW1lcyBmcm9tIHdoaWNoIHRvIGNob29zZSB0aGUgbWF4aW11bVxuICAgKiBAcmV0dXJuIHtEYXRlVGltZX0gdGhlIG1heCBEYXRlVGltZSwgb3IgdW5kZWZpbmVkIGlmIGNhbGxlZCB3aXRoIG5vIGFyZ3VtZW50XG4gICAqL1xuICA7XG5cbiAgRGF0ZVRpbWUubWF4ID0gZnVuY3Rpb24gbWF4KCkge1xuICAgIGZvciAodmFyIF9sZW4yID0gYXJndW1lbnRzLmxlbmd0aCwgZGF0ZVRpbWVzID0gbmV3IEFycmF5KF9sZW4yKSwgX2tleTIgPSAwOyBfa2V5MiA8IF9sZW4yOyBfa2V5MisrKSB7XG4gICAgICBkYXRlVGltZXNbX2tleTJdID0gYXJndW1lbnRzW19rZXkyXTtcbiAgICB9XG5cbiAgICBpZiAoIWRhdGVUaW1lcy5ldmVyeShEYXRlVGltZS5pc0RhdGVUaW1lKSkge1xuICAgICAgdGhyb3cgbmV3IEludmFsaWRBcmd1bWVudEVycm9yKFwibWF4IHJlcXVpcmVzIGFsbCBhcmd1bWVudHMgYmUgRGF0ZVRpbWVzXCIpO1xuICAgIH1cblxuICAgIHJldHVybiBiZXN0QnkoZGF0ZVRpbWVzLCBmdW5jdGlvbiAoaSkge1xuICAgICAgcmV0dXJuIGkudmFsdWVPZigpO1xuICAgIH0sIE1hdGgubWF4KTtcbiAgfSAvLyBNSVNDXG5cbiAgLyoqXG4gICAqIEV4cGxhaW4gaG93IGEgc3RyaW5nIHdvdWxkIGJlIHBhcnNlZCBieSBmcm9tRm9ybWF0KClcbiAgICogQHBhcmFtIHtzdHJpbmd9IHRleHQgLSB0aGUgc3RyaW5nIHRvIHBhcnNlXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBmbXQgLSB0aGUgZm9ybWF0IHRoZSBzdHJpbmcgaXMgZXhwZWN0ZWQgdG8gYmUgaW4gKHNlZSBkZXNjcmlwdGlvbilcbiAgICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnMgLSBvcHRpb25zIHRha2VuIGJ5IGZyb21Gb3JtYXQoKVxuICAgKiBAcmV0dXJuIHtPYmplY3R9XG4gICAqL1xuICA7XG5cbiAgRGF0ZVRpbWUuZnJvbUZvcm1hdEV4cGxhaW4gPSBmdW5jdGlvbiBmcm9tRm9ybWF0RXhwbGFpbih0ZXh0LCBmbXQsIG9wdGlvbnMpIHtcbiAgICBpZiAob3B0aW9ucyA9PT0gdm9pZCAwKSB7XG4gICAgICBvcHRpb25zID0ge307XG4gICAgfVxuXG4gICAgdmFyIF9vcHRpb25zID0gb3B0aW9ucyxcbiAgICAgICAgX29wdGlvbnMkbG9jYWxlID0gX29wdGlvbnMubG9jYWxlLFxuICAgICAgICBsb2NhbGUgPSBfb3B0aW9ucyRsb2NhbGUgPT09IHZvaWQgMCA/IG51bGwgOiBfb3B0aW9ucyRsb2NhbGUsXG4gICAgICAgIF9vcHRpb25zJG51bWJlcmluZ1N5cyA9IF9vcHRpb25zLm51bWJlcmluZ1N5c3RlbSxcbiAgICAgICAgbnVtYmVyaW5nU3lzdGVtID0gX29wdGlvbnMkbnVtYmVyaW5nU3lzID09PSB2b2lkIDAgPyBudWxsIDogX29wdGlvbnMkbnVtYmVyaW5nU3lzLFxuICAgICAgICBsb2NhbGVUb1VzZSA9IExvY2FsZS5mcm9tT3B0cyh7XG4gICAgICBsb2NhbGU6IGxvY2FsZSxcbiAgICAgIG51bWJlcmluZ1N5c3RlbTogbnVtYmVyaW5nU3lzdGVtLFxuICAgICAgZGVmYXVsdFRvRU46IHRydWVcbiAgICB9KTtcbiAgICByZXR1cm4gZXhwbGFpbkZyb21Ub2tlbnMobG9jYWxlVG9Vc2UsIHRleHQsIGZtdCk7XG4gIH1cbiAgLyoqXG4gICAqIEBkZXByZWNhdGVkIHVzZSBmcm9tRm9ybWF0RXhwbGFpbiBpbnN0ZWFkXG4gICAqL1xuICA7XG5cbiAgRGF0ZVRpbWUuZnJvbVN0cmluZ0V4cGxhaW4gPSBmdW5jdGlvbiBmcm9tU3RyaW5nRXhwbGFpbih0ZXh0LCBmbXQsIG9wdGlvbnMpIHtcbiAgICBpZiAob3B0aW9ucyA9PT0gdm9pZCAwKSB7XG4gICAgICBvcHRpb25zID0ge307XG4gICAgfVxuXG4gICAgcmV0dXJuIERhdGVUaW1lLmZyb21Gb3JtYXRFeHBsYWluKHRleHQsIGZtdCwgb3B0aW9ucyk7XG4gIH0gLy8gRk9STUFUIFBSRVNFVFNcblxuICAvKipcbiAgICoge0BsaW5rIERhdGVUaW1lI3RvTG9jYWxlU3RyaW5nfSBmb3JtYXQgbGlrZSAxMC8xNC8xOTgzXG4gICAqIEB0eXBlIHtPYmplY3R9XG4gICAqL1xuICA7XG5cbiAgX2NyZWF0ZUNsYXNzKERhdGVUaW1lLCBbe1xuICAgIGtleTogXCJpc1ZhbGlkXCIsXG4gICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICByZXR1cm4gdGhpcy5pbnZhbGlkID09PSBudWxsO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGFuIGVycm9yIGNvZGUgaWYgdGhpcyBEYXRlVGltZSBpcyBpbnZhbGlkLCBvciBudWxsIGlmIHRoZSBEYXRlVGltZSBpcyB2YWxpZFxuICAgICAqIEB0eXBlIHtzdHJpbmd9XG4gICAgICovXG5cbiAgfSwge1xuICAgIGtleTogXCJpbnZhbGlkUmVhc29uXCIsXG4gICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICByZXR1cm4gdGhpcy5pbnZhbGlkID8gdGhpcy5pbnZhbGlkLnJlYXNvbiA6IG51bGw7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgYW4gZXhwbGFuYXRpb24gb2Ygd2h5IHRoaXMgRGF0ZVRpbWUgYmVjYW1lIGludmFsaWQsIG9yIG51bGwgaWYgdGhlIERhdGVUaW1lIGlzIHZhbGlkXG4gICAgICogQHR5cGUge3N0cmluZ31cbiAgICAgKi9cblxuICB9LCB7XG4gICAga2V5OiBcImludmFsaWRFeHBsYW5hdGlvblwiLFxuICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgcmV0dXJuIHRoaXMuaW52YWxpZCA/IHRoaXMuaW52YWxpZC5leHBsYW5hdGlvbiA6IG51bGw7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEdldCB0aGUgbG9jYWxlIG9mIGEgRGF0ZVRpbWUsIHN1Y2ggJ2VuLUdCJy4gVGhlIGxvY2FsZSBpcyB1c2VkIHdoZW4gZm9ybWF0dGluZyB0aGUgRGF0ZVRpbWVcbiAgICAgKlxuICAgICAqIEB0eXBlIHtzdHJpbmd9XG4gICAgICovXG5cbiAgfSwge1xuICAgIGtleTogXCJsb2NhbGVcIixcbiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgIHJldHVybiB0aGlzLmlzVmFsaWQgPyB0aGlzLmxvYy5sb2NhbGUgOiBudWxsO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIG51bWJlcmluZyBzeXN0ZW0gb2YgYSBEYXRlVGltZSwgc3VjaCAnYmVuZycuIFRoZSBudW1iZXJpbmcgc3lzdGVtIGlzIHVzZWQgd2hlbiBmb3JtYXR0aW5nIHRoZSBEYXRlVGltZVxuICAgICAqXG4gICAgICogQHR5cGUge3N0cmluZ31cbiAgICAgKi9cblxuICB9LCB7XG4gICAga2V5OiBcIm51bWJlcmluZ1N5c3RlbVwiLFxuICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgcmV0dXJuIHRoaXMuaXNWYWxpZCA/IHRoaXMubG9jLm51bWJlcmluZ1N5c3RlbSA6IG51bGw7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEdldCB0aGUgb3V0cHV0IGNhbGVuZGFyIG9mIGEgRGF0ZVRpbWUsIHN1Y2ggJ2lzbGFtaWMnLiBUaGUgb3V0cHV0IGNhbGVuZGFyIGlzIHVzZWQgd2hlbiBmb3JtYXR0aW5nIHRoZSBEYXRlVGltZVxuICAgICAqXG4gICAgICogQHR5cGUge3N0cmluZ31cbiAgICAgKi9cblxuICB9LCB7XG4gICAga2V5OiBcIm91dHB1dENhbGVuZGFyXCIsXG4gICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICByZXR1cm4gdGhpcy5pc1ZhbGlkID8gdGhpcy5sb2Mub3V0cHV0Q2FsZW5kYXIgOiBudWxsO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIHRpbWUgem9uZSBhc3NvY2lhdGVkIHdpdGggdGhpcyBEYXRlVGltZS5cbiAgICAgKiBAdHlwZSB7Wm9uZX1cbiAgICAgKi9cblxuICB9LCB7XG4gICAga2V5OiBcInpvbmVcIixcbiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgIHJldHVybiB0aGlzLl96b25lO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIG5hbWUgb2YgdGhlIHRpbWUgem9uZS5cbiAgICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgICAqL1xuXG4gIH0sIHtcbiAgICBrZXk6IFwiem9uZU5hbWVcIixcbiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgIHJldHVybiB0aGlzLmlzVmFsaWQgPyB0aGlzLnpvbmUubmFtZSA6IG51bGw7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEdldCB0aGUgeWVhclxuICAgICAqIEBleGFtcGxlIERhdGVUaW1lLmxvY2FsKDIwMTcsIDUsIDI1KS55ZWFyIC8vPT4gMjAxN1xuICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICovXG5cbiAgfSwge1xuICAgIGtleTogXCJ5ZWFyXCIsXG4gICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICByZXR1cm4gdGhpcy5pc1ZhbGlkID8gdGhpcy5jLnllYXIgOiBOYU47XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEdldCB0aGUgcXVhcnRlclxuICAgICAqIEBleGFtcGxlIERhdGVUaW1lLmxvY2FsKDIwMTcsIDUsIDI1KS5xdWFydGVyIC8vPT4gMlxuICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICovXG5cbiAgfSwge1xuICAgIGtleTogXCJxdWFydGVyXCIsXG4gICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICByZXR1cm4gdGhpcy5pc1ZhbGlkID8gTWF0aC5jZWlsKHRoaXMuYy5tb250aCAvIDMpIDogTmFOO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIG1vbnRoICgxLTEyKS5cbiAgICAgKiBAZXhhbXBsZSBEYXRlVGltZS5sb2NhbCgyMDE3LCA1LCAyNSkubW9udGggLy89PiA1XG4gICAgICogQHR5cGUge251bWJlcn1cbiAgICAgKi9cblxuICB9LCB7XG4gICAga2V5OiBcIm1vbnRoXCIsXG4gICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICByZXR1cm4gdGhpcy5pc1ZhbGlkID8gdGhpcy5jLm1vbnRoIDogTmFOO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIGRheSBvZiB0aGUgbW9udGggKDEtMzBpc2gpLlxuICAgICAqIEBleGFtcGxlIERhdGVUaW1lLmxvY2FsKDIwMTcsIDUsIDI1KS5kYXkgLy89PiAyNVxuICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICovXG5cbiAgfSwge1xuICAgIGtleTogXCJkYXlcIixcbiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgIHJldHVybiB0aGlzLmlzVmFsaWQgPyB0aGlzLmMuZGF5IDogTmFOO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIGhvdXIgb2YgdGhlIGRheSAoMC0yMykuXG4gICAgICogQGV4YW1wbGUgRGF0ZVRpbWUubG9jYWwoMjAxNywgNSwgMjUsIDkpLmhvdXIgLy89PiA5XG4gICAgICogQHR5cGUge251bWJlcn1cbiAgICAgKi9cblxuICB9LCB7XG4gICAga2V5OiBcImhvdXJcIixcbiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgIHJldHVybiB0aGlzLmlzVmFsaWQgPyB0aGlzLmMuaG91ciA6IE5hTjtcbiAgICB9XG4gICAgLyoqXG4gICAgICogR2V0IHRoZSBtaW51dGUgb2YgdGhlIGhvdXIgKDAtNTkpLlxuICAgICAqIEBleGFtcGxlIERhdGVUaW1lLmxvY2FsKDIwMTcsIDUsIDI1LCA5LCAzMCkubWludXRlIC8vPT4gMzBcbiAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAqL1xuXG4gIH0sIHtcbiAgICBrZXk6IFwibWludXRlXCIsXG4gICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICByZXR1cm4gdGhpcy5pc1ZhbGlkID8gdGhpcy5jLm1pbnV0ZSA6IE5hTjtcbiAgICB9XG4gICAgLyoqXG4gICAgICogR2V0IHRoZSBzZWNvbmQgb2YgdGhlIG1pbnV0ZSAoMC01OSkuXG4gICAgICogQGV4YW1wbGUgRGF0ZVRpbWUubG9jYWwoMjAxNywgNSwgMjUsIDksIDMwLCA1Mikuc2Vjb25kIC8vPT4gNTJcbiAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAqL1xuXG4gIH0sIHtcbiAgICBrZXk6IFwic2Vjb25kXCIsXG4gICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICByZXR1cm4gdGhpcy5pc1ZhbGlkID8gdGhpcy5jLnNlY29uZCA6IE5hTjtcbiAgICB9XG4gICAgLyoqXG4gICAgICogR2V0IHRoZSBtaWxsaXNlY29uZCBvZiB0aGUgc2Vjb25kICgwLTk5OSkuXG4gICAgICogQGV4YW1wbGUgRGF0ZVRpbWUubG9jYWwoMjAxNywgNSwgMjUsIDksIDMwLCA1MiwgNjU0KS5taWxsaXNlY29uZCAvLz0+IDY1NFxuICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICovXG5cbiAgfSwge1xuICAgIGtleTogXCJtaWxsaXNlY29uZFwiLFxuICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgcmV0dXJuIHRoaXMuaXNWYWxpZCA/IHRoaXMuYy5taWxsaXNlY29uZCA6IE5hTjtcbiAgICB9XG4gICAgLyoqXG4gICAgICogR2V0IHRoZSB3ZWVrIHllYXJcbiAgICAgKiBAc2VlIGh0dHBzOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL0lTT193ZWVrX2RhdGVcbiAgICAgKiBAZXhhbXBsZSBEYXRlVGltZS5sb2NhbCgyMDE0LCAxMiwgMzEpLndlZWtZZWFyIC8vPT4gMjAxNVxuICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICovXG5cbiAgfSwge1xuICAgIGtleTogXCJ3ZWVrWWVhclwiLFxuICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgcmV0dXJuIHRoaXMuaXNWYWxpZCA/IHBvc3NpYmx5Q2FjaGVkV2Vla0RhdGEodGhpcykud2Vla1llYXIgOiBOYU47XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEdldCB0aGUgd2VlayBudW1iZXIgb2YgdGhlIHdlZWsgeWVhciAoMS01MmlzaCkuXG4gICAgICogQHNlZSBodHRwczovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9JU09fd2Vla19kYXRlXG4gICAgICogQGV4YW1wbGUgRGF0ZVRpbWUubG9jYWwoMjAxNywgNSwgMjUpLndlZWtOdW1iZXIgLy89PiAyMVxuICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICovXG5cbiAgfSwge1xuICAgIGtleTogXCJ3ZWVrTnVtYmVyXCIsXG4gICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICByZXR1cm4gdGhpcy5pc1ZhbGlkID8gcG9zc2libHlDYWNoZWRXZWVrRGF0YSh0aGlzKS53ZWVrTnVtYmVyIDogTmFOO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIGRheSBvZiB0aGUgd2Vlay5cbiAgICAgKiAxIGlzIE1vbmRheSBhbmQgNyBpcyBTdW5kYXlcbiAgICAgKiBAc2VlIGh0dHBzOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL0lTT193ZWVrX2RhdGVcbiAgICAgKiBAZXhhbXBsZSBEYXRlVGltZS5sb2NhbCgyMDE0LCAxMSwgMzEpLndlZWtkYXkgLy89PiA0XG4gICAgICogQHR5cGUge251bWJlcn1cbiAgICAgKi9cblxuICB9LCB7XG4gICAga2V5OiBcIndlZWtkYXlcIixcbiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgIHJldHVybiB0aGlzLmlzVmFsaWQgPyBwb3NzaWJseUNhY2hlZFdlZWtEYXRhKHRoaXMpLndlZWtkYXkgOiBOYU47XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEdldCB0aGUgb3JkaW5hbCAobWVhbmluZyB0aGUgZGF5IG9mIHRoZSB5ZWFyKVxuICAgICAqIEBleGFtcGxlIERhdGVUaW1lLmxvY2FsKDIwMTcsIDUsIDI1KS5vcmRpbmFsIC8vPT4gMTQ1XG4gICAgICogQHR5cGUge251bWJlcnxEYXRlVGltZX1cbiAgICAgKi9cblxuICB9LCB7XG4gICAga2V5OiBcIm9yZGluYWxcIixcbiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgIHJldHVybiB0aGlzLmlzVmFsaWQgPyBncmVnb3JpYW5Ub09yZGluYWwodGhpcy5jKS5vcmRpbmFsIDogTmFOO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIGh1bWFuIHJlYWRhYmxlIHNob3J0IG1vbnRoIG5hbWUsIHN1Y2ggYXMgJ09jdCcuXG4gICAgICogRGVmYXVsdHMgdG8gdGhlIHN5c3RlbSdzIGxvY2FsZSBpZiBubyBsb2NhbGUgaGFzIGJlZW4gc3BlY2lmaWVkXG4gICAgICogQGV4YW1wbGUgRGF0ZVRpbWUubG9jYWwoMjAxNywgMTAsIDMwKS5tb250aFNob3J0IC8vPT4gT2N0XG4gICAgICogQHR5cGUge3N0cmluZ31cbiAgICAgKi9cblxuICB9LCB7XG4gICAga2V5OiBcIm1vbnRoU2hvcnRcIixcbiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgIHJldHVybiB0aGlzLmlzVmFsaWQgPyBJbmZvLm1vbnRocyhcInNob3J0XCIsIHtcbiAgICAgICAgbG9jT2JqOiB0aGlzLmxvY1xuICAgICAgfSlbdGhpcy5tb250aCAtIDFdIDogbnVsbDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogR2V0IHRoZSBodW1hbiByZWFkYWJsZSBsb25nIG1vbnRoIG5hbWUsIHN1Y2ggYXMgJ09jdG9iZXInLlxuICAgICAqIERlZmF1bHRzIHRvIHRoZSBzeXN0ZW0ncyBsb2NhbGUgaWYgbm8gbG9jYWxlIGhhcyBiZWVuIHNwZWNpZmllZFxuICAgICAqIEBleGFtcGxlIERhdGVUaW1lLmxvY2FsKDIwMTcsIDEwLCAzMCkubW9udGhMb25nIC8vPT4gT2N0b2JlclxuICAgICAqIEB0eXBlIHtzdHJpbmd9XG4gICAgICovXG5cbiAgfSwge1xuICAgIGtleTogXCJtb250aExvbmdcIixcbiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgIHJldHVybiB0aGlzLmlzVmFsaWQgPyBJbmZvLm1vbnRocyhcImxvbmdcIiwge1xuICAgICAgICBsb2NPYmo6IHRoaXMubG9jXG4gICAgICB9KVt0aGlzLm1vbnRoIC0gMV0gOiBudWxsO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIGh1bWFuIHJlYWRhYmxlIHNob3J0IHdlZWtkYXksIHN1Y2ggYXMgJ01vbicuXG4gICAgICogRGVmYXVsdHMgdG8gdGhlIHN5c3RlbSdzIGxvY2FsZSBpZiBubyBsb2NhbGUgaGFzIGJlZW4gc3BlY2lmaWVkXG4gICAgICogQGV4YW1wbGUgRGF0ZVRpbWUubG9jYWwoMjAxNywgMTAsIDMwKS53ZWVrZGF5U2hvcnQgLy89PiBNb25cbiAgICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgICAqL1xuXG4gIH0sIHtcbiAgICBrZXk6IFwid2Vla2RheVNob3J0XCIsXG4gICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICByZXR1cm4gdGhpcy5pc1ZhbGlkID8gSW5mby53ZWVrZGF5cyhcInNob3J0XCIsIHtcbiAgICAgICAgbG9jT2JqOiB0aGlzLmxvY1xuICAgICAgfSlbdGhpcy53ZWVrZGF5IC0gMV0gOiBudWxsO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIGh1bWFuIHJlYWRhYmxlIGxvbmcgd2Vla2RheSwgc3VjaCBhcyAnTW9uZGF5Jy5cbiAgICAgKiBEZWZhdWx0cyB0byB0aGUgc3lzdGVtJ3MgbG9jYWxlIGlmIG5vIGxvY2FsZSBoYXMgYmVlbiBzcGVjaWZpZWRcbiAgICAgKiBAZXhhbXBsZSBEYXRlVGltZS5sb2NhbCgyMDE3LCAxMCwgMzApLndlZWtkYXlMb25nIC8vPT4gTW9uZGF5XG4gICAgICogQHR5cGUge3N0cmluZ31cbiAgICAgKi9cblxuICB9LCB7XG4gICAga2V5OiBcIndlZWtkYXlMb25nXCIsXG4gICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICByZXR1cm4gdGhpcy5pc1ZhbGlkID8gSW5mby53ZWVrZGF5cyhcImxvbmdcIiwge1xuICAgICAgICBsb2NPYmo6IHRoaXMubG9jXG4gICAgICB9KVt0aGlzLndlZWtkYXkgLSAxXSA6IG51bGw7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEdldCB0aGUgVVRDIG9mZnNldCBvZiB0aGlzIERhdGVUaW1lIGluIG1pbnV0ZXNcbiAgICAgKiBAZXhhbXBsZSBEYXRlVGltZS5ub3coKS5vZmZzZXQgLy89PiAtMjQwXG4gICAgICogQGV4YW1wbGUgRGF0ZVRpbWUudXRjKCkub2Zmc2V0IC8vPT4gMFxuICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICovXG5cbiAgfSwge1xuICAgIGtleTogXCJvZmZzZXRcIixcbiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgIHJldHVybiB0aGlzLmlzVmFsaWQgPyArdGhpcy5vIDogTmFOO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIHNob3J0IGh1bWFuIG5hbWUgZm9yIHRoZSB6b25lJ3MgY3VycmVudCBvZmZzZXQsIGZvciBleGFtcGxlIFwiRVNUXCIgb3IgXCJFRFRcIi5cbiAgICAgKiBEZWZhdWx0cyB0byB0aGUgc3lzdGVtJ3MgbG9jYWxlIGlmIG5vIGxvY2FsZSBoYXMgYmVlbiBzcGVjaWZpZWRcbiAgICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgICAqL1xuXG4gIH0sIHtcbiAgICBrZXk6IFwib2Zmc2V0TmFtZVNob3J0XCIsXG4gICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICBpZiAodGhpcy5pc1ZhbGlkKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnpvbmUub2Zmc2V0TmFtZSh0aGlzLnRzLCB7XG4gICAgICAgICAgZm9ybWF0OiBcInNob3J0XCIsXG4gICAgICAgICAgbG9jYWxlOiB0aGlzLmxvY2FsZVxuICAgICAgICB9KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIGxvbmcgaHVtYW4gbmFtZSBmb3IgdGhlIHpvbmUncyBjdXJyZW50IG9mZnNldCwgZm9yIGV4YW1wbGUgXCJFYXN0ZXJuIFN0YW5kYXJkIFRpbWVcIiBvciBcIkVhc3Rlcm4gRGF5bGlnaHQgVGltZVwiLlxuICAgICAqIERlZmF1bHRzIHRvIHRoZSBzeXN0ZW0ncyBsb2NhbGUgaWYgbm8gbG9jYWxlIGhhcyBiZWVuIHNwZWNpZmllZFxuICAgICAqIEB0eXBlIHtzdHJpbmd9XG4gICAgICovXG5cbiAgfSwge1xuICAgIGtleTogXCJvZmZzZXROYW1lTG9uZ1wiLFxuICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgaWYgKHRoaXMuaXNWYWxpZCkge1xuICAgICAgICByZXR1cm4gdGhpcy56b25lLm9mZnNldE5hbWUodGhpcy50cywge1xuICAgICAgICAgIGZvcm1hdDogXCJsb25nXCIsXG4gICAgICAgICAgbG9jYWxlOiB0aGlzLmxvY2FsZVxuICAgICAgICB9KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBHZXQgd2hldGhlciB0aGlzIHpvbmUncyBvZmZzZXQgZXZlciBjaGFuZ2VzLCBhcyBpbiBhIERTVC5cbiAgICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICAgKi9cblxuICB9LCB7XG4gICAga2V5OiBcImlzT2Zmc2V0Rml4ZWRcIixcbiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgIHJldHVybiB0aGlzLmlzVmFsaWQgPyB0aGlzLnpvbmUuaXNVbml2ZXJzYWwgOiBudWxsO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBHZXQgd2hldGhlciB0aGUgRGF0ZVRpbWUgaXMgaW4gYSBEU1QuXG4gICAgICogQHR5cGUge2Jvb2xlYW59XG4gICAgICovXG5cbiAgfSwge1xuICAgIGtleTogXCJpc0luRFNUXCIsXG4gICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICBpZiAodGhpcy5pc09mZnNldEZpeGVkKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiB0aGlzLm9mZnNldCA+IHRoaXMuc2V0KHtcbiAgICAgICAgICBtb250aDogMVxuICAgICAgICB9KS5vZmZzZXQgfHwgdGhpcy5vZmZzZXQgPiB0aGlzLnNldCh7XG4gICAgICAgICAgbW9udGg6IDVcbiAgICAgICAgfSkub2Zmc2V0O1xuICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRydWUgaWYgdGhpcyBEYXRlVGltZSBpcyBpbiBhIGxlYXAgeWVhciwgZmFsc2Ugb3RoZXJ3aXNlXG4gICAgICogQGV4YW1wbGUgRGF0ZVRpbWUubG9jYWwoMjAxNikuaXNJbkxlYXBZZWFyIC8vPT4gdHJ1ZVxuICAgICAqIEBleGFtcGxlIERhdGVUaW1lLmxvY2FsKDIwMTMpLmlzSW5MZWFwWWVhciAvLz0+IGZhbHNlXG4gICAgICogQHR5cGUge2Jvb2xlYW59XG4gICAgICovXG5cbiAgfSwge1xuICAgIGtleTogXCJpc0luTGVhcFllYXJcIixcbiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgIHJldHVybiBpc0xlYXBZZWFyKHRoaXMueWVhcik7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdGhlIG51bWJlciBvZiBkYXlzIGluIHRoaXMgRGF0ZVRpbWUncyBtb250aFxuICAgICAqIEBleGFtcGxlIERhdGVUaW1lLmxvY2FsKDIwMTYsIDIpLmRheXNJbk1vbnRoIC8vPT4gMjlcbiAgICAgKiBAZXhhbXBsZSBEYXRlVGltZS5sb2NhbCgyMDE2LCAzKS5kYXlzSW5Nb250aCAvLz0+IDMxXG4gICAgICogQHR5cGUge251bWJlcn1cbiAgICAgKi9cblxuICB9LCB7XG4gICAga2V5OiBcImRheXNJbk1vbnRoXCIsXG4gICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICByZXR1cm4gZGF5c0luTW9udGgodGhpcy55ZWFyLCB0aGlzLm1vbnRoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0aGUgbnVtYmVyIG9mIGRheXMgaW4gdGhpcyBEYXRlVGltZSdzIHllYXJcbiAgICAgKiBAZXhhbXBsZSBEYXRlVGltZS5sb2NhbCgyMDE2KS5kYXlzSW5ZZWFyIC8vPT4gMzY2XG4gICAgICogQGV4YW1wbGUgRGF0ZVRpbWUubG9jYWwoMjAxMykuZGF5c0luWWVhciAvLz0+IDM2NVxuICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICovXG5cbiAgfSwge1xuICAgIGtleTogXCJkYXlzSW5ZZWFyXCIsXG4gICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICByZXR1cm4gdGhpcy5pc1ZhbGlkID8gZGF5c0luWWVhcih0aGlzLnllYXIpIDogTmFOO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRoZSBudW1iZXIgb2Ygd2Vla3MgaW4gdGhpcyBEYXRlVGltZSdzIHllYXJcbiAgICAgKiBAc2VlIGh0dHBzOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL0lTT193ZWVrX2RhdGVcbiAgICAgKiBAZXhhbXBsZSBEYXRlVGltZS5sb2NhbCgyMDA0KS53ZWVrc0luV2Vla1llYXIgLy89PiA1M1xuICAgICAqIEBleGFtcGxlIERhdGVUaW1lLmxvY2FsKDIwMTMpLndlZWtzSW5XZWVrWWVhciAvLz0+IDUyXG4gICAgICogQHR5cGUge251bWJlcn1cbiAgICAgKi9cblxuICB9LCB7XG4gICAga2V5OiBcIndlZWtzSW5XZWVrWWVhclwiLFxuICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgcmV0dXJuIHRoaXMuaXNWYWxpZCA/IHdlZWtzSW5XZWVrWWVhcih0aGlzLndlZWtZZWFyKSA6IE5hTjtcbiAgICB9XG4gIH1dLCBbe1xuICAgIGtleTogXCJEQVRFX1NIT1JUXCIsXG4gICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICByZXR1cm4gREFURV9TSE9SVDtcbiAgICB9XG4gICAgLyoqXG4gICAgICoge0BsaW5rIERhdGVUaW1lI3RvTG9jYWxlU3RyaW5nfSBmb3JtYXQgbGlrZSAnT2N0IDE0LCAxOTgzJ1xuICAgICAqIEB0eXBlIHtPYmplY3R9XG4gICAgICovXG5cbiAgfSwge1xuICAgIGtleTogXCJEQVRFX01FRFwiLFxuICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgcmV0dXJuIERBVEVfTUVEO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiB7QGxpbmsgRGF0ZVRpbWUjdG9Mb2NhbGVTdHJpbmd9IGZvcm1hdCBsaWtlICdGcmksIE9jdCAxNCwgMTk4MydcbiAgICAgKiBAdHlwZSB7T2JqZWN0fVxuICAgICAqL1xuXG4gIH0sIHtcbiAgICBrZXk6IFwiREFURV9NRURfV0lUSF9XRUVLREFZXCIsXG4gICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICByZXR1cm4gREFURV9NRURfV0lUSF9XRUVLREFZO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiB7QGxpbmsgRGF0ZVRpbWUjdG9Mb2NhbGVTdHJpbmd9IGZvcm1hdCBsaWtlICdPY3RvYmVyIDE0LCAxOTgzJ1xuICAgICAqIEB0eXBlIHtPYmplY3R9XG4gICAgICovXG5cbiAgfSwge1xuICAgIGtleTogXCJEQVRFX0ZVTExcIixcbiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgIHJldHVybiBEQVRFX0ZVTEw7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIHtAbGluayBEYXRlVGltZSN0b0xvY2FsZVN0cmluZ30gZm9ybWF0IGxpa2UgJ1R1ZXNkYXksIE9jdG9iZXIgMTQsIDE5ODMnXG4gICAgICogQHR5cGUge09iamVjdH1cbiAgICAgKi9cblxuICB9LCB7XG4gICAga2V5OiBcIkRBVEVfSFVHRVwiLFxuICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgcmV0dXJuIERBVEVfSFVHRTtcbiAgICB9XG4gICAgLyoqXG4gICAgICoge0BsaW5rIERhdGVUaW1lI3RvTG9jYWxlU3RyaW5nfSBmb3JtYXQgbGlrZSAnMDk6MzAgQU0nLiBPbmx5IDEyLWhvdXIgaWYgdGhlIGxvY2FsZSBpcy5cbiAgICAgKiBAdHlwZSB7T2JqZWN0fVxuICAgICAqL1xuXG4gIH0sIHtcbiAgICBrZXk6IFwiVElNRV9TSU1QTEVcIixcbiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgIHJldHVybiBUSU1FX1NJTVBMRTtcbiAgICB9XG4gICAgLyoqXG4gICAgICoge0BsaW5rIERhdGVUaW1lI3RvTG9jYWxlU3RyaW5nfSBmb3JtYXQgbGlrZSAnMDk6MzA6MjMgQU0nLiBPbmx5IDEyLWhvdXIgaWYgdGhlIGxvY2FsZSBpcy5cbiAgICAgKiBAdHlwZSB7T2JqZWN0fVxuICAgICAqL1xuXG4gIH0sIHtcbiAgICBrZXk6IFwiVElNRV9XSVRIX1NFQ09ORFNcIixcbiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgIHJldHVybiBUSU1FX1dJVEhfU0VDT05EUztcbiAgICB9XG4gICAgLyoqXG4gICAgICoge0BsaW5rIERhdGVUaW1lI3RvTG9jYWxlU3RyaW5nfSBmb3JtYXQgbGlrZSAnMDk6MzA6MjMgQU0gRURUJy4gT25seSAxMi1ob3VyIGlmIHRoZSBsb2NhbGUgaXMuXG4gICAgICogQHR5cGUge09iamVjdH1cbiAgICAgKi9cblxuICB9LCB7XG4gICAga2V5OiBcIlRJTUVfV0lUSF9TSE9SVF9PRkZTRVRcIixcbiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgIHJldHVybiBUSU1FX1dJVEhfU0hPUlRfT0ZGU0VUO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiB7QGxpbmsgRGF0ZVRpbWUjdG9Mb2NhbGVTdHJpbmd9IGZvcm1hdCBsaWtlICcwOTozMDoyMyBBTSBFYXN0ZXJuIERheWxpZ2h0IFRpbWUnLiBPbmx5IDEyLWhvdXIgaWYgdGhlIGxvY2FsZSBpcy5cbiAgICAgKiBAdHlwZSB7T2JqZWN0fVxuICAgICAqL1xuXG4gIH0sIHtcbiAgICBrZXk6IFwiVElNRV9XSVRIX0xPTkdfT0ZGU0VUXCIsXG4gICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICByZXR1cm4gVElNRV9XSVRIX0xPTkdfT0ZGU0VUO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiB7QGxpbmsgRGF0ZVRpbWUjdG9Mb2NhbGVTdHJpbmd9IGZvcm1hdCBsaWtlICcwOTozMCcsIGFsd2F5cyAyNC1ob3VyLlxuICAgICAqIEB0eXBlIHtPYmplY3R9XG4gICAgICovXG5cbiAgfSwge1xuICAgIGtleTogXCJUSU1FXzI0X1NJTVBMRVwiLFxuICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgcmV0dXJuIFRJTUVfMjRfU0lNUExFO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiB7QGxpbmsgRGF0ZVRpbWUjdG9Mb2NhbGVTdHJpbmd9IGZvcm1hdCBsaWtlICcwOTozMDoyMycsIGFsd2F5cyAyNC1ob3VyLlxuICAgICAqIEB0eXBlIHtPYmplY3R9XG4gICAgICovXG5cbiAgfSwge1xuICAgIGtleTogXCJUSU1FXzI0X1dJVEhfU0VDT05EU1wiLFxuICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgcmV0dXJuIFRJTUVfMjRfV0lUSF9TRUNPTkRTO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiB7QGxpbmsgRGF0ZVRpbWUjdG9Mb2NhbGVTdHJpbmd9IGZvcm1hdCBsaWtlICcwOTozMDoyMyBFRFQnLCBhbHdheXMgMjQtaG91ci5cbiAgICAgKiBAdHlwZSB7T2JqZWN0fVxuICAgICAqL1xuXG4gIH0sIHtcbiAgICBrZXk6IFwiVElNRV8yNF9XSVRIX1NIT1JUX09GRlNFVFwiLFxuICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgcmV0dXJuIFRJTUVfMjRfV0lUSF9TSE9SVF9PRkZTRVQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIHtAbGluayBEYXRlVGltZSN0b0xvY2FsZVN0cmluZ30gZm9ybWF0IGxpa2UgJzA5OjMwOjIzIEVhc3Rlcm4gRGF5bGlnaHQgVGltZScsIGFsd2F5cyAyNC1ob3VyLlxuICAgICAqIEB0eXBlIHtPYmplY3R9XG4gICAgICovXG5cbiAgfSwge1xuICAgIGtleTogXCJUSU1FXzI0X1dJVEhfTE9OR19PRkZTRVRcIixcbiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgIHJldHVybiBUSU1FXzI0X1dJVEhfTE9OR19PRkZTRVQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIHtAbGluayBEYXRlVGltZSN0b0xvY2FsZVN0cmluZ30gZm9ybWF0IGxpa2UgJzEwLzE0LzE5ODMsIDk6MzAgQU0nLiBPbmx5IDEyLWhvdXIgaWYgdGhlIGxvY2FsZSBpcy5cbiAgICAgKiBAdHlwZSB7T2JqZWN0fVxuICAgICAqL1xuXG4gIH0sIHtcbiAgICBrZXk6IFwiREFURVRJTUVfU0hPUlRcIixcbiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgIHJldHVybiBEQVRFVElNRV9TSE9SVDtcbiAgICB9XG4gICAgLyoqXG4gICAgICoge0BsaW5rIERhdGVUaW1lI3RvTG9jYWxlU3RyaW5nfSBmb3JtYXQgbGlrZSAnMTAvMTQvMTk4MywgOTozMDozMyBBTScuIE9ubHkgMTItaG91ciBpZiB0aGUgbG9jYWxlIGlzLlxuICAgICAqIEB0eXBlIHtPYmplY3R9XG4gICAgICovXG5cbiAgfSwge1xuICAgIGtleTogXCJEQVRFVElNRV9TSE9SVF9XSVRIX1NFQ09ORFNcIixcbiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgIHJldHVybiBEQVRFVElNRV9TSE9SVF9XSVRIX1NFQ09ORFM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIHtAbGluayBEYXRlVGltZSN0b0xvY2FsZVN0cmluZ30gZm9ybWF0IGxpa2UgJ09jdCAxNCwgMTk4MywgOTozMCBBTScuIE9ubHkgMTItaG91ciBpZiB0aGUgbG9jYWxlIGlzLlxuICAgICAqIEB0eXBlIHtPYmplY3R9XG4gICAgICovXG5cbiAgfSwge1xuICAgIGtleTogXCJEQVRFVElNRV9NRURcIixcbiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgIHJldHVybiBEQVRFVElNRV9NRUQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIHtAbGluayBEYXRlVGltZSN0b0xvY2FsZVN0cmluZ30gZm9ybWF0IGxpa2UgJ09jdCAxNCwgMTk4MywgOTozMDozMyBBTScuIE9ubHkgMTItaG91ciBpZiB0aGUgbG9jYWxlIGlzLlxuICAgICAqIEB0eXBlIHtPYmplY3R9XG4gICAgICovXG5cbiAgfSwge1xuICAgIGtleTogXCJEQVRFVElNRV9NRURfV0lUSF9TRUNPTkRTXCIsXG4gICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICByZXR1cm4gREFURVRJTUVfTUVEX1dJVEhfU0VDT05EUztcbiAgICB9XG4gICAgLyoqXG4gICAgICoge0BsaW5rIERhdGVUaW1lI3RvTG9jYWxlU3RyaW5nfSBmb3JtYXQgbGlrZSAnRnJpLCAxNCBPY3QgMTk4MywgOTozMCBBTScuIE9ubHkgMTItaG91ciBpZiB0aGUgbG9jYWxlIGlzLlxuICAgICAqIEB0eXBlIHtPYmplY3R9XG4gICAgICovXG5cbiAgfSwge1xuICAgIGtleTogXCJEQVRFVElNRV9NRURfV0lUSF9XRUVLREFZXCIsXG4gICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICByZXR1cm4gREFURVRJTUVfTUVEX1dJVEhfV0VFS0RBWTtcbiAgICB9XG4gICAgLyoqXG4gICAgICoge0BsaW5rIERhdGVUaW1lI3RvTG9jYWxlU3RyaW5nfSBmb3JtYXQgbGlrZSAnT2N0b2JlciAxNCwgMTk4MywgOTozMCBBTSBFRFQnLiBPbmx5IDEyLWhvdXIgaWYgdGhlIGxvY2FsZSBpcy5cbiAgICAgKiBAdHlwZSB7T2JqZWN0fVxuICAgICAqL1xuXG4gIH0sIHtcbiAgICBrZXk6IFwiREFURVRJTUVfRlVMTFwiLFxuICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgcmV0dXJuIERBVEVUSU1FX0ZVTEw7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIHtAbGluayBEYXRlVGltZSN0b0xvY2FsZVN0cmluZ30gZm9ybWF0IGxpa2UgJ09jdG9iZXIgMTQsIDE5ODMsIDk6MzA6MzMgQU0gRURUJy4gT25seSAxMi1ob3VyIGlmIHRoZSBsb2NhbGUgaXMuXG4gICAgICogQHR5cGUge09iamVjdH1cbiAgICAgKi9cblxuICB9LCB7XG4gICAga2V5OiBcIkRBVEVUSU1FX0ZVTExfV0lUSF9TRUNPTkRTXCIsXG4gICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICByZXR1cm4gREFURVRJTUVfRlVMTF9XSVRIX1NFQ09ORFM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIHtAbGluayBEYXRlVGltZSN0b0xvY2FsZVN0cmluZ30gZm9ybWF0IGxpa2UgJ0ZyaWRheSwgT2N0b2JlciAxNCwgMTk4MywgOTozMCBBTSBFYXN0ZXJuIERheWxpZ2h0IFRpbWUnLiBPbmx5IDEyLWhvdXIgaWYgdGhlIGxvY2FsZSBpcy5cbiAgICAgKiBAdHlwZSB7T2JqZWN0fVxuICAgICAqL1xuXG4gIH0sIHtcbiAgICBrZXk6IFwiREFURVRJTUVfSFVHRVwiLFxuICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgcmV0dXJuIERBVEVUSU1FX0hVR0U7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIHtAbGluayBEYXRlVGltZSN0b0xvY2FsZVN0cmluZ30gZm9ybWF0IGxpa2UgJ0ZyaWRheSwgT2N0b2JlciAxNCwgMTk4MywgOTozMDozMyBBTSBFYXN0ZXJuIERheWxpZ2h0IFRpbWUnLiBPbmx5IDEyLWhvdXIgaWYgdGhlIGxvY2FsZSBpcy5cbiAgICAgKiBAdHlwZSB7T2JqZWN0fVxuICAgICAqL1xuXG4gIH0sIHtcbiAgICBrZXk6IFwiREFURVRJTUVfSFVHRV9XSVRIX1NFQ09ORFNcIixcbiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgIHJldHVybiBEQVRFVElNRV9IVUdFX1dJVEhfU0VDT05EUztcbiAgICB9XG4gIH1dKTtcblxuICByZXR1cm4gRGF0ZVRpbWU7XG59KCk7XG5mdW5jdGlvbiBmcmllbmRseURhdGVUaW1lKGRhdGVUaW1laXNoKSB7XG4gIGlmIChEYXRlVGltZS5pc0RhdGVUaW1lKGRhdGVUaW1laXNoKSkge1xuICAgIHJldHVybiBkYXRlVGltZWlzaDtcbiAgfSBlbHNlIGlmIChkYXRlVGltZWlzaCAmJiBkYXRlVGltZWlzaC52YWx1ZU9mICYmIGlzTnVtYmVyKGRhdGVUaW1laXNoLnZhbHVlT2YoKSkpIHtcbiAgICByZXR1cm4gRGF0ZVRpbWUuZnJvbUpTRGF0ZShkYXRlVGltZWlzaCk7XG4gIH0gZWxzZSBpZiAoZGF0ZVRpbWVpc2ggJiYgdHlwZW9mIGRhdGVUaW1laXNoID09PSBcIm9iamVjdFwiKSB7XG4gICAgcmV0dXJuIERhdGVUaW1lLmZyb21PYmplY3QoZGF0ZVRpbWVpc2gpO1xuICB9IGVsc2Uge1xuICAgIHRocm93IG5ldyBJbnZhbGlkQXJndW1lbnRFcnJvcihcIlVua25vd24gZGF0ZXRpbWUgYXJndW1lbnQ6IFwiICsgZGF0ZVRpbWVpc2ggKyBcIiwgb2YgdHlwZSBcIiArIHR5cGVvZiBkYXRlVGltZWlzaCk7XG4gIH1cbn1cblxudmFyIFZFUlNJT04gPSBcIjIuMy4wXCI7XG5cbmV4cG9ydHMuRGF0ZVRpbWUgPSBEYXRlVGltZTtcbmV4cG9ydHMuRHVyYXRpb24gPSBEdXJhdGlvbjtcbmV4cG9ydHMuRml4ZWRPZmZzZXRab25lID0gRml4ZWRPZmZzZXRab25lO1xuZXhwb3J0cy5JQU5BWm9uZSA9IElBTkFab25lO1xuZXhwb3J0cy5JbmZvID0gSW5mbztcbmV4cG9ydHMuSW50ZXJ2YWwgPSBJbnRlcnZhbDtcbmV4cG9ydHMuSW52YWxpZFpvbmUgPSBJbnZhbGlkWm9uZTtcbmV4cG9ydHMuU2V0dGluZ3MgPSBTZXR0aW5ncztcbmV4cG9ydHMuU3lzdGVtWm9uZSA9IFN5c3RlbVpvbmU7XG5leHBvcnRzLlZFUlNJT04gPSBWRVJTSU9OO1xuZXhwb3J0cy5ab25lID0gWm9uZTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWx1eG9uLmpzLm1hcFxuIiwiaW1wb3J0IHsgRGF0ZVRpbWUsIElBTkFab25lIH0gZnJvbSBcImx1eG9uXCI7XG5cbmV4cG9ydCBmdW5jdGlvbiBpc1ZhbGlkVGltZXpvbmUoem9uZTogc3RyaW5nKSB7XG4gIHJldHVybiBJQU5BWm9uZS5pc1ZhbGlkWm9uZSh6b25lKTtcbn1cblxuLyoqXG4gKlxuICogQHBhcmFtIHNsb3QgRGF0ZVxuICogQHBhcmFtIHpvbmUgc3RyaW5nXG4gKiBAcmV0dXJucyBzdHJpbmdcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGZvcm1hdFRpbWVTbG90KHNsb3Q6IERhdGUsIHpvbmU6IHN0cmluZyk6IHN0cmluZyB7XG4gIGNvbnN0IHVuZm9ybWF0dGVkVGltZVNsb3QgPSBEYXRlVGltZS5mcm9tSlNEYXRlKHNsb3QpXG4gICAgLnRvTG9jYWxlU3RyaW5nKERhdGVUaW1lLlRJTUVfU0lNUExFKVxuICAgIC5yZXBsYWNlKC9cXC4vZywgXCJcIik7XG4gIHRyeSB7XG4gICAgY29uc3QgZGF0ZVRpbWVTbG90ID0gRGF0ZVRpbWUuZnJvbUpTRGF0ZShzbG90LCB7IHpvbmUgfSk7XG4gICAgaWYgKFxuICAgICAgIWRhdGVUaW1lU2xvdC5pc1ZhbGlkICYmXG4gICAgICAoZGF0ZVRpbWVTbG90LmludmFsaWRSZWFzb24gPT09IFwidW5zdXBwb3J0ZWQgem9uZVwiIHx8ICF6b25lKVxuICAgICkge1xuICAgICAgcmV0dXJuIHVuZm9ybWF0dGVkVGltZVNsb3Q7XG4gICAgfVxuICAgIHJldHVybiBkYXRlVGltZVNsb3QudG9Mb2NhbGVTdHJpbmcoRGF0ZVRpbWUuVElNRV9TSU1QTEUpLnJlcGxhY2UoL1xcLi9nLCBcIlwiKTtcbiAgfSBjYXRjaCAoZXJyKSB7XG4gICAgcmV0dXJuIHVuZm9ybWF0dGVkVGltZVNsb3Q7XG4gIH1cbn1cblxuLyoqXG4gKlxuICogQHBhcmFtIHNsb3QgRGF0ZVxuICogQHBhcmFtIHpvbmUgc3RyaW5nXG4gKiBAcmV0dXJucyBzdHJpbmdcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHNldFRpbWVab25lT2Zmc2V0KHNsb3Q6IERhdGUsIHpvbmU/OiBzdHJpbmcpOiBzdHJpbmcge1xuICBjb25zdCBkYXRlVGltZVNsb3QgPSBEYXRlVGltZS5mcm9tSlNEYXRlKHNsb3QsIHsgem9uZSB9KTtcbiAgaWYgKFxuICAgICh6b25lICYmICFpc1ZhbGlkVGltZXpvbmUoem9uZSkpIHx8XG4gICAgKCFkYXRlVGltZVNsb3QuaXNWYWxpZCAmJlxuICAgICAgKGRhdGVUaW1lU2xvdC5pbnZhbGlkUmVhc29uID09PSBcInVuc3VwcG9ydGVkIHpvbmVcIiB8fCAhem9uZSkpXG4gICkge1xuICAgIHJldHVybiBcIlwiO1xuICB9XG4gIHJldHVybiBkYXRlVGltZVNsb3Qub2Zmc2V0TmFtZVNob3J0O1xufVxuXG4vKipcbiAqIEBwYXJhbSB6b25lIHN0cmluZ1xuICogQHJldHVybnMgbnVtYmVyIChpbiBtaWxsaXNlY29uZHMpXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRTcGVjaWZpZWRUaW1lWm9uZU9mZnNldCh6b25lPzogc3RyaW5nKTogbnVtYmVyIHtcbiAgaWYgKCF6b25lIHx8ICFpc1ZhbGlkVGltZXpvbmUoem9uZSkpIHtcbiAgICByZXR1cm4gMDtcbiAgfVxuICBjb25zdCBkdCA9IERhdGVUaW1lLm5vdygpO1xuICBjb25zdCBkdHogPSBEYXRlVGltZS5ub3coKS5zZXRab25lKHpvbmUsIHsga2VlcExvY2FsVGltZTogdHJ1ZSB9KTtcbiAgcmV0dXJuIGR0LmRpZmYoZHR6KS5taWxsaXNlY29uZHM7XG59XG5cbi8qKlxuICogQHBhcmFtIHpvbmUgc3RyaW5nXG4gKiBAcmV0dXJucyBzdHJpbmcgKFVUQyBPZmZzZXQpXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRTcGVjaWZpZWRUaW1lWm9uZU9mZnNldE5hbWUoem9uZT86IHN0cmluZyk6IHN0cmluZyB7XG4gIGlmICghem9uZSB8fCAhaXNWYWxpZFRpbWV6b25lKHpvbmUpKSB7XG4gICAgcmV0dXJuIERhdGVUaW1lLm5vdygpLm9mZnNldE5hbWVTaG9ydDtcbiAgfVxuICBjb25zdCBkdCA9IERhdGVUaW1lLm5vdygpLnNldFpvbmUoem9uZSk7XG4gIHJldHVybiBkdC5vZmZzZXROYW1lU2hvcnQ7XG59XG5cbi8qKlxuICpcbiAqIEBwYXJhbSBkYXRlIERhdGVcbiAqIEBwYXJhbSB6b25lIHN0cmluZ1xuICogQHJldHVybnMgbnVtYmVyIChpbiBtaWxsaXNlY29uZHMpXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRUaW1lSW5UaW1lem9uZShkYXRlOiBEYXRlLCB6b25lPzogc3RyaW5nKTogbnVtYmVyIHtcbiAgY29uc3QgdGltZVZhbHVlID0gZGF0ZS5nZXRUaW1lKCk7XG4gIHJldHVybiB0aW1lVmFsdWUgKyBnZXRTcGVjaWZpZWRUaW1lWm9uZU9mZnNldCh6b25lKTtcbn1cbiIsImltcG9ydCB0eXBlIHsgVGltZXNwYW5FdmVudCB9IGZyb20gXCJAY29tbW9ucy90eXBlcy9FdmVudHNcIjtcblxuZXhwb3J0IGludGVyZmFjZSBFdmVudFBvc2l0aW9uIHtcbiAgb3ZlcmxhcHM6IFRpbWVzcGFuRXZlbnRbXTtcbiAgb2Zmc2V0OiBudW1iZXI7XG4gIGxlZnROZWlnaGJvdXI6IFRpbWVzcGFuRXZlbnQgfCBudWxsO1xuICB3aWR0aE92ZXJyaWRlPzogbnVtYmVyO1xufVxuXG4vLyBDb250cm9scyBob3cgZ3JhbnVsYXIgdGhlIHRpbWUgc2xvdCBcImJ1Y2tldHNcIiBhcmUgaW4gbWludXRlcy5cbi8vIERlY3JlYXNpbmcgdGhpcyB2YWx1ZSB3aWxsIGltcHJvdmUgZXZlbnQgb3ZlcmxhcCBjYWxjdWxhdGlvbiwgYnV0IHdpbGwgaW1wYWN0IHBlcmZvcm1hbmNlIGFuZCBtZW1vcnkuXG5jb25zdCBFVkVOVF9PVkVSTEFQX0dSQU5VTEFSSVRZID0gMTA7XG5cbmV4cG9ydCBmdW5jdGlvbiBwb3B1bGF0ZVBvc2l0aW9uTWFwKFxuICBldmVudHM6IFRpbWVzcGFuRXZlbnRbXSxcbiAgcG9zaXRpb25NYXA6IFJlY29yZDxzdHJpbmcsIEV2ZW50UG9zaXRpb24+LFxuKTogdm9pZCB7XG4gIC8vIFBvcHVsYXRlIHRoZSBwb3NpdGlvbiBtYXAgd2l0aCBlYWNoIGV2ZW50J3Mgb3ZlcmxhcHNcbiAgZXZlbnRzLmZvckVhY2goKGV2ZW50KSA9PiB7XG4gICAgcG9zaXRpb25NYXBbZXZlbnQuaWRdID0ge1xuICAgICAgb3ZlcmxhcHM6IGV2ZW50cy5maWx0ZXIoKG90aGVyOiBUaW1lc3BhbkV2ZW50KSA9PiB7XG4gICAgICAgIHJldHVybiAoXG4gICAgICAgICAgZXZlbnQuaWQgIT09IG90aGVyLmlkICYmXG4gICAgICAgICAgb3RoZXIud2hlbi5zdGFydF90aW1lIDwgZXZlbnQud2hlbi5lbmRfdGltZSAmJlxuICAgICAgICAgIG90aGVyLndoZW4uZW5kX3RpbWUgPiBldmVudC53aGVuLnN0YXJ0X3RpbWVcbiAgICAgICAgKTtcbiAgICAgIH0pLFxuICAgICAgb2Zmc2V0OiAwLFxuICAgICAgbGVmdE5laWdoYm91cjogbnVsbCxcbiAgICB9O1xuICB9KTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHVwZGF0ZUV2ZW50UG9zaXRpb24oXG4gIGV2ZW50OiBUaW1lc3BhbkV2ZW50LFxuICBwb3NpdGlvbk1hcDogUmVjb3JkPHN0cmluZywgRXZlbnRQb3NpdGlvbj4sXG4pOiB2b2lkIHtcbiAgY29uc3Qgb3ZlcmxhcHBpbmdFdmVudHMgPSBwb3NpdGlvbk1hcFtldmVudC5pZF0ub3ZlcmxhcHM7XG5cbiAgLy8gRXZlbnRzIHdpdGhvdXQgb3ZlcmxhcHMgY2FuIGJlIHBsYWNlZCB3aXRob3V0IGV4dHJhIGxvZ2ljXG4gIGlmIChvdmVybGFwcGluZ0V2ZW50cy5sZW5ndGggPT09IDApIHtcbiAgICBldmVudC5yZWxhdGl2ZU92ZXJsYXBXaWR0aCA9IDE7XG4gICAgZXZlbnQucmVsYXRpdmVPdmVybGFwT2Zmc2V0ID0gMDtcbiAgICByZXR1cm47XG4gIH1cblxuICAvLyBBIGxlZnQgbmVpZ2hib3VyIGlzIGFuIG92ZXJsYXBwaW5nIGV2ZW50IHRoYXQgaGFzIGFscmVhZHkgYmVlbiBwb3NpdGlvbmVkIHRvIHRoZSBsZWZ0IG9mIHRoaXMgZXZlbnRcbiAgY29uc3QgbGVmdE5laWdoYm91ciA9IHBvc2l0aW9uTWFwW2V2ZW50LmlkXS5sZWZ0TmVpZ2hib3VyO1xuXG4gIGlmIChcbiAgICAhIWxlZnROZWlnaGJvdXIgJiZcbiAgICBvdmVybGFwcGluZ0V2ZW50cy5maWx0ZXIoXG4gICAgICAob3ZlcmxhcHBpbmdFdmVudCkgPT5cbiAgICAgICAgZXZlbnQud2hlbi5lbmRfdGltZSAtIGV2ZW50LndoZW4uc3RhcnRfdGltZSA+PVxuICAgICAgICBvdmVybGFwcGluZ0V2ZW50LndoZW4uZW5kX3RpbWUgLSBvdmVybGFwcGluZ0V2ZW50LndoZW4uc3RhcnRfdGltZSxcbiAgICApLmxlbmd0aCA9PT0gMFxuICApIHtcbiAgICAvLyBJZiB0aGUgY3VycmVudCBldmVudCBoYXMgYSBsZWZ0IG5laWdoYm91ciBhbmQgbm8gb3ZlcmxhcHBpbmcgZXZlbnQgdGhhdCBpcyBzaG9ydGVyIHRoYW4gaXQsIHdlIGFzc3VtZVxuICAgIC8vIHRoYXQgdGhpcyB3aWxsIGJlIHRoZSByaWdodC1tb3N0IGV2ZW50LiBJbiB0aGlzIGNhc2UsIHRoZSBldmVudCBpcyBzaXplZCB0byB0YWtlIHVwIHRoZSByZW1haW5pbmcgd2lkdGguXG4gICAgZXZlbnQucmVsYXRpdmVPdmVybGFwV2lkdGggPSAxIC0gbGVmdE5laWdoYm91ci5yZWxhdGl2ZU92ZXJsYXBXaWR0aDtcbiAgfSBlbHNlIHtcbiAgICBldmVudC5yZWxhdGl2ZU92ZXJsYXBXaWR0aCA9IGNhbGN1bGF0ZUV2ZW50V2lkdGgoZXZlbnQsIG92ZXJsYXBwaW5nRXZlbnRzKTtcbiAgfVxuXG4gIC8vIFNldCB0aGUgZXZlbnQncyBvZmZzZXQgZnJvbSB0aGUgbGVmdCBtYXJnaW5cbiAgZXZlbnQucmVsYXRpdmVPdmVybGFwT2Zmc2V0ID0gcG9zaXRpb25NYXBbZXZlbnQuaWRdLm9mZnNldDtcblxuICAvLyBIYW5kbGVzIGFuIGVkZ2UgY2FzZSB3aGVyZSBhbiBldmVudCBzdHJhZGRsZXMgdHdvIGV2ZW50cywgY3JlYXRpbmcgYSBzdGFpcmNhc2UgbGF5b3V0XG4gIC8vIFRoaXMgd29ya2Fyb3VuZCByZXBvc2l0aW9ucyB0aGUgc3RyYWRkbGVkIGV2ZW50IGFzIGZhciBsZWZ0IGFzIHBvc3NpYmxlXG4gIC8vIFRPRE8gLSBJbnZlc3RpZ2F0ZSBpbXByb3Zpbmcgb3ZlcmFsbCBhbGdvcml0aG0gdG8gaGFuZGxlIHRoaXMgc2NlbmFyaW8gbW9yZSBjbGVhbmx5XG4gIGV2ZW50LnJlbGF0aXZlT3ZlcmxhcFdpZHRoID0gcG9zaXRpb25NYXBbZXZlbnQuaWRdLndpZHRoT3ZlcnJpZGVcbiAgICA/IChwb3NpdGlvbk1hcFtldmVudC5pZF0ud2lkdGhPdmVycmlkZSBhcyBudW1iZXIpXG4gICAgOiBldmVudC5yZWxhdGl2ZU92ZXJsYXBXaWR0aDtcblxuICAvLyBGaW5hbGx5LCBpbmNyZWFzZSB0aGUgcG9zaXRpb24gb2Zmc2V0IG9mIGFsbCBvdmVybGFwcGluZyBldmVudHMgdGhhdCB3aWxsXG4gIC8vIGJlIHBsYWNlZCB0byB0aGUgcmlnaHQgb2YgdGhlIGN1cnJlbnQgZXZlbnQuXG4gIG92ZXJsYXBwaW5nRXZlbnRzLmZvckVhY2goKG92ZXJsYXBwaW5nRXZlbnQpID0+IHtcbiAgICBpZiAoXG4gICAgICAhbGVmdE5laWdoYm91ciB8fFxuICAgICAgb3ZlcmxhcHBpbmdFdmVudC53aGVuLnN0YXJ0X3RpbWUgPCBsZWZ0TmVpZ2hib3VyLndoZW4uZW5kX3RpbWVcbiAgICApIHtcbiAgICAgIHBvc2l0aW9uTWFwW292ZXJsYXBwaW5nRXZlbnQuaWRdLm9mZnNldCArPSBldmVudC5yZWxhdGl2ZU92ZXJsYXBXaWR0aDtcbiAgICAgIHBvc2l0aW9uTWFwW292ZXJsYXBwaW5nRXZlbnQuaWRdLmxlZnROZWlnaGJvdXIgPSBldmVudDtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gSWYgYW4gZXZlbnQgaGFzIGEgbGVmdCBuZWlnaGJvdXIsIGFuZCBhbiBvdmVybGFwcGluZyBldmVudCB0aGF0IGJlZ2lucyBhZnRlciB0aGUgbGVmdCBuZWlnaGJvdXIgZW5kcyxcbiAgICAgIC8vIHdlIGlkZW50aWZ5IGl0IGFzIGFuIGV2ZW50IHRoYXQgc3RyYWRkbGVzIHR3byBldmVudHMsIGFuZCBjb3VsZCBjYXVzZSBhIHN0YWlyY2FzZSBsYXlvdXQuXG4gICAgICBwb3NpdGlvbk1hcFtvdmVybGFwcGluZ0V2ZW50LmlkXS53aWR0aE92ZXJyaWRlID1cbiAgICAgICAgZXZlbnQucmVsYXRpdmVPdmVybGFwT2Zmc2V0O1xuICAgIH1cbiAgfSk7XG59XG5cbmZ1bmN0aW9uIGNhbGN1bGF0ZUV2ZW50V2lkdGgoXG4gIGV2ZW50OiBUaW1lc3BhbkV2ZW50LFxuICBvdmVybGFwcGluZ0V2ZW50czogVGltZXNwYW5FdmVudFtdLFxuKTogbnVtYmVyIHtcbiAgY29uc3QgZXZlbnRUaW1lTWludXRlcyA9IE1hdGguY2VpbChcbiAgICAoZXZlbnQud2hlbi5lbmRfdGltZSAtIGV2ZW50LndoZW4uc3RhcnRfdGltZSkgL1xuICAgICAgKDYwICogRVZFTlRfT1ZFUkxBUF9HUkFOVUxBUklUWSksXG4gICk7XG5cbiAgLy8gQ3JlYXRlIGFuIGFycmF5IG9mIHRpbWUgc2xvdCBcImJ1Y2tldHNcIiB0aGF0IHdpbGwgdHJhY2sgdGhlIG51bWJlciBvZiBvdmVybGFwcGluZyBldmVudHMgaW4gZWFjaCB0aW1lIHNsb3RcbiAgY29uc3Qgb3ZlcmxhcEFyciA9IG5ldyBBcnJheShldmVudFRpbWVNaW51dGVzKS5maWxsKDEpO1xuXG4gIG92ZXJsYXBwaW5nRXZlbnRzLmZvckVhY2goKG92ZXJsYXBwaW5nRXZlbnQpID0+IHtcbiAgICAvLyBGaW5kIHdoaWNoIHRpbWUgc2xvdCBcImJ1Y2tldFwiIHRoZSBvdmVybGFwcGluZyBldmVudCBzdGFydHMgYW5kIGVuZHMgaW5cbiAgICBsZXQgc3RhcnRUaW1lID0gMDtcbiAgICBpZiAoZXZlbnQud2hlbi5zdGFydF90aW1lIDw9IG92ZXJsYXBwaW5nRXZlbnQud2hlbi5zdGFydF90aW1lKSB7XG4gICAgICBjb25zdCBsb2NhbFN0YXJ0VGltZSA9IE1hdGguY2VpbChcbiAgICAgICAgKG92ZXJsYXBwaW5nRXZlbnQud2hlbi5zdGFydF90aW1lIC0gZXZlbnQud2hlbi5zdGFydF90aW1lKSAvXG4gICAgICAgICAgKDYwICogRVZFTlRfT1ZFUkxBUF9HUkFOVUxBUklUWSksXG4gICAgICApO1xuXG4gICAgICBzdGFydFRpbWUgPSBNYXRoLm1pbihNYXRoLm1heCgwLCBsb2NhbFN0YXJ0VGltZSksIG92ZXJsYXBBcnIubGVuZ3RoIC0gMSk7XG4gICAgfVxuXG4gICAgbGV0IGVuZFRpbWUgPSBvdmVybGFwQXJyLmxlbmd0aCAtIDE7XG4gICAgaWYgKGV2ZW50LndoZW4uZW5kX3RpbWUgPj0gb3ZlcmxhcHBpbmdFdmVudC53aGVuLmVuZF90aW1lKSB7XG4gICAgICBjb25zdCBsb2NhbEVuZFRpbWUgPSBNYXRoLmNlaWwoXG4gICAgICAgIE1hdGguYWJzKG92ZXJsYXBwaW5nRXZlbnQud2hlbi5lbmRfdGltZSAtIGV2ZW50LndoZW4uZW5kX3RpbWUpIC9cbiAgICAgICAgICAoNjAgKiBFVkVOVF9PVkVSTEFQX0dSQU5VTEFSSVRZKSxcbiAgICAgICk7XG5cbiAgICAgIGVuZFRpbWUgPSBNYXRoLm1heChzdGFydFRpbWUsIG92ZXJsYXBBcnIubGVuZ3RoIC0gbG9jYWxFbmRUaW1lIC0gMSk7XG4gICAgfVxuXG4gICAgLy8gSW5jcmVtZW50IHRoZSB2YWx1ZXMgb2YgdGhlIFwiYnVja2V0c1wiIGNvbnRhaW5lZCBpbiB0aGUgb3ZlcmxhcHBpbmcgZXZlbnRcbiAgICBmb3IgKGxldCBpID0gc3RhcnRUaW1lOyBpIDw9IGVuZFRpbWU7IGkrKykge1xuICAgICAgb3ZlcmxhcEFycltpXSsrO1xuICAgIH1cbiAgfSk7XG5cbiAgLy8gVGhlIGV2ZW50IHdpZHRoIGlzIGRldGVybWluZWQgYnkgdGhlIG1heGltdW0gbnVtYmVyIG9mIG92ZXJsYXBzIGF0IGEgZ2l2ZW4gdGltZSBzbG90XG4gIHJldHVybiAxIC8gTWF0aC5tYXgoLi4ub3ZlcmxhcEFycik7XG59XG4iLCJpbXBvcnQgdHlwZSB7IEV2ZW50IH0gZnJvbSBcIkBjb21tb25zL3R5cGVzL0V2ZW50c1wiO1xuXG5mdW5jdGlvbiBnZXREeW5hbWljU3RhcnRUaW1lKGV2ZW50OiBFdmVudCk6IG51bWJlciB7XG4gIGlmICghKFwic3RhcnRfdGltZVwiIGluIGV2ZW50LndoZW4gJiYgXCJlbmRfdGltZVwiIGluIGV2ZW50LndoZW4pKSB7XG4gICAgcmV0dXJuIDA7XG4gIH1cblxuICBjb25zdCBzdGFydCA9XG4gICAgbmV3IERhdGUoZXZlbnQud2hlbi5zdGFydF90aW1lICogMTAwMCkuZ2V0VGltZSgpIC1cbiAgICBuZXcgRGF0ZShcbiAgICAgIG5ldyBEYXRlKGV2ZW50LndoZW4uc3RhcnRfdGltZSAqIDEwMDApLnNldEhvdXJzKDAsIDAsIDAsIDApLFxuICAgICkuZ2V0VGltZSgpO1xuICByZXR1cm4gc3RhcnQgLyA2MDAwMDsgLy8gaW4gbWludXRlc1xufVxuXG5mdW5jdGlvbiBnZXREeW5hbWljRW5kVGltZShldmVudDogRXZlbnQpOiBudW1iZXIge1xuICBpZiAoIShcInN0YXJ0X3RpbWVcIiBpbiBldmVudC53aGVuICYmIFwiZW5kX3RpbWVcIiBpbiBldmVudC53aGVuKSkge1xuICAgIHJldHVybiAwO1xuICB9XG5cbiAgbGV0IHN0YXJ0ID1cbiAgICBuZXcgRGF0ZShldmVudC53aGVuLnN0YXJ0X3RpbWUgKiAxMDAwKS5nZXRUaW1lKCkgLVxuICAgIG5ldyBEYXRlKFxuICAgICAgbmV3IERhdGUoZXZlbnQud2hlbi5zdGFydF90aW1lICogMTAwMCkuc2V0SG91cnMoMCwgMCwgMCwgMCksXG4gICAgKS5nZXRUaW1lKCk7XG5cbiAgc3RhcnQgPSBzdGFydCAvIDYwMDAwOyAvLyBpbiBtaW51dGVzXG4gIGxldCBydW5UaW1lID1cbiAgICBuZXcgRGF0ZShldmVudC53aGVuLmVuZF90aW1lICogMTAwMCkuZ2V0VGltZSgpIC1cbiAgICBuZXcgRGF0ZShldmVudC53aGVuLnN0YXJ0X3RpbWUgKiAxMDAwKS5nZXRUaW1lKCk7XG5cbiAgcnVuVGltZSA9IHJ1blRpbWUgLyA2MDAwMDsgLy8gaW4gbWludXRlc1xuXG4gIHJldHVybiBzdGFydCArIHJ1blRpbWU7XG59XG5cbmV4cG9ydCB7IGdldER5bmFtaWNFbmRUaW1lLCBnZXREeW5hbWljU3RhcnRUaW1lIH07XG4iLCIvKiEgQGxpY2Vuc2UgRE9NUHVyaWZ5IDIuMy41IHwgKGMpIEN1cmU1MyBhbmQgb3RoZXIgY29udHJpYnV0b3JzIHwgUmVsZWFzZWQgdW5kZXIgdGhlIEFwYWNoZSBsaWNlbnNlIDIuMCBhbmQgTW96aWxsYSBQdWJsaWMgTGljZW5zZSAyLjAgfCBnaXRodWIuY29tL2N1cmU1My9ET01QdXJpZnkvYmxvYi8yLjMuNS9MSUNFTlNFICovXG5cbihmdW5jdGlvbiAoZ2xvYmFsLCBmYWN0b3J5KSB7XG4gIHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0JyAmJiB0eXBlb2YgbW9kdWxlICE9PSAndW5kZWZpbmVkJyA/IG1vZHVsZS5leHBvcnRzID0gZmFjdG9yeSgpIDpcbiAgdHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kID8gZGVmaW5lKGZhY3RvcnkpIDpcbiAgKGdsb2JhbCA9IGdsb2JhbCB8fCBzZWxmLCBnbG9iYWwuRE9NUHVyaWZ5ID0gZmFjdG9yeSgpKTtcbn0odGhpcywgZnVuY3Rpb24gKCkgeyAndXNlIHN0cmljdCc7XG5cbiAgZnVuY3Rpb24gX3RvQ29uc3VtYWJsZUFycmF5KGFycikgeyBpZiAoQXJyYXkuaXNBcnJheShhcnIpKSB7IGZvciAodmFyIGkgPSAwLCBhcnIyID0gQXJyYXkoYXJyLmxlbmd0aCk7IGkgPCBhcnIubGVuZ3RoOyBpKyspIHsgYXJyMltpXSA9IGFycltpXTsgfSByZXR1cm4gYXJyMjsgfSBlbHNlIHsgcmV0dXJuIEFycmF5LmZyb20oYXJyKTsgfSB9XG5cbiAgdmFyIGhhc093blByb3BlcnR5ID0gT2JqZWN0Lmhhc093blByb3BlcnR5LFxuICAgICAgc2V0UHJvdG90eXBlT2YgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YsXG4gICAgICBpc0Zyb3plbiA9IE9iamVjdC5pc0Zyb3plbixcbiAgICAgIGdldFByb3RvdHlwZU9mID0gT2JqZWN0LmdldFByb3RvdHlwZU9mLFxuICAgICAgZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcjtcbiAgdmFyIGZyZWV6ZSA9IE9iamVjdC5mcmVlemUsXG4gICAgICBzZWFsID0gT2JqZWN0LnNlYWwsXG4gICAgICBjcmVhdGUgPSBPYmplY3QuY3JlYXRlOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIGltcG9ydC9uby1tdXRhYmxlLWV4cG9ydHNcblxuICB2YXIgX3JlZiA9IHR5cGVvZiBSZWZsZWN0ICE9PSAndW5kZWZpbmVkJyAmJiBSZWZsZWN0LFxuICAgICAgYXBwbHkgPSBfcmVmLmFwcGx5LFxuICAgICAgY29uc3RydWN0ID0gX3JlZi5jb25zdHJ1Y3Q7XG5cbiAgaWYgKCFhcHBseSkge1xuICAgIGFwcGx5ID0gZnVuY3Rpb24gYXBwbHkoZnVuLCB0aGlzVmFsdWUsIGFyZ3MpIHtcbiAgICAgIHJldHVybiBmdW4uYXBwbHkodGhpc1ZhbHVlLCBhcmdzKTtcbiAgICB9O1xuICB9XG5cbiAgaWYgKCFmcmVlemUpIHtcbiAgICBmcmVlemUgPSBmdW5jdGlvbiBmcmVlemUoeCkge1xuICAgICAgcmV0dXJuIHg7XG4gICAgfTtcbiAgfVxuXG4gIGlmICghc2VhbCkge1xuICAgIHNlYWwgPSBmdW5jdGlvbiBzZWFsKHgpIHtcbiAgICAgIHJldHVybiB4O1xuICAgIH07XG4gIH1cblxuICBpZiAoIWNvbnN0cnVjdCkge1xuICAgIGNvbnN0cnVjdCA9IGZ1bmN0aW9uIGNvbnN0cnVjdChGdW5jLCBhcmdzKSB7XG4gICAgICByZXR1cm4gbmV3IChGdW5jdGlvbi5wcm90b3R5cGUuYmluZC5hcHBseShGdW5jLCBbbnVsbF0uY29uY2F0KF90b0NvbnN1bWFibGVBcnJheShhcmdzKSkpKSgpO1xuICAgIH07XG4gIH1cblxuICB2YXIgYXJyYXlGb3JFYWNoID0gdW5hcHBseShBcnJheS5wcm90b3R5cGUuZm9yRWFjaCk7XG4gIHZhciBhcnJheVBvcCA9IHVuYXBwbHkoQXJyYXkucHJvdG90eXBlLnBvcCk7XG4gIHZhciBhcnJheVB1c2ggPSB1bmFwcGx5KEFycmF5LnByb3RvdHlwZS5wdXNoKTtcblxuICB2YXIgc3RyaW5nVG9Mb3dlckNhc2UgPSB1bmFwcGx5KFN0cmluZy5wcm90b3R5cGUudG9Mb3dlckNhc2UpO1xuICB2YXIgc3RyaW5nTWF0Y2ggPSB1bmFwcGx5KFN0cmluZy5wcm90b3R5cGUubWF0Y2gpO1xuICB2YXIgc3RyaW5nUmVwbGFjZSA9IHVuYXBwbHkoU3RyaW5nLnByb3RvdHlwZS5yZXBsYWNlKTtcbiAgdmFyIHN0cmluZ0luZGV4T2YgPSB1bmFwcGx5KFN0cmluZy5wcm90b3R5cGUuaW5kZXhPZik7XG4gIHZhciBzdHJpbmdUcmltID0gdW5hcHBseShTdHJpbmcucHJvdG90eXBlLnRyaW0pO1xuXG4gIHZhciByZWdFeHBUZXN0ID0gdW5hcHBseShSZWdFeHAucHJvdG90eXBlLnRlc3QpO1xuXG4gIHZhciB0eXBlRXJyb3JDcmVhdGUgPSB1bmNvbnN0cnVjdChUeXBlRXJyb3IpO1xuXG4gIGZ1bmN0aW9uIHVuYXBwbHkoZnVuYykge1xuICAgIHJldHVybiBmdW5jdGlvbiAodGhpc0FyZykge1xuICAgICAgZm9yICh2YXIgX2xlbiA9IGFyZ3VtZW50cy5sZW5ndGgsIGFyZ3MgPSBBcnJheShfbGVuID4gMSA/IF9sZW4gLSAxIDogMCksIF9rZXkgPSAxOyBfa2V5IDwgX2xlbjsgX2tleSsrKSB7XG4gICAgICAgIGFyZ3NbX2tleSAtIDFdID0gYXJndW1lbnRzW19rZXldO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gYXBwbHkoZnVuYywgdGhpc0FyZywgYXJncyk7XG4gICAgfTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHVuY29uc3RydWN0KGZ1bmMpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgICAgZm9yICh2YXIgX2xlbjIgPSBhcmd1bWVudHMubGVuZ3RoLCBhcmdzID0gQXJyYXkoX2xlbjIpLCBfa2V5MiA9IDA7IF9rZXkyIDwgX2xlbjI7IF9rZXkyKyspIHtcbiAgICAgICAgYXJnc1tfa2V5Ml0gPSBhcmd1bWVudHNbX2tleTJdO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gY29uc3RydWN0KGZ1bmMsIGFyZ3MpO1xuICAgIH07XG4gIH1cblxuICAvKiBBZGQgcHJvcGVydGllcyB0byBhIGxvb2t1cCB0YWJsZSAqL1xuICBmdW5jdGlvbiBhZGRUb1NldChzZXQsIGFycmF5KSB7XG4gICAgaWYgKHNldFByb3RvdHlwZU9mKSB7XG4gICAgICAvLyBNYWtlICdpbicgYW5kIHRydXRoeSBjaGVja3MgbGlrZSBCb29sZWFuKHNldC5jb25zdHJ1Y3RvcilcbiAgICAgIC8vIGluZGVwZW5kZW50IG9mIGFueSBwcm9wZXJ0aWVzIGRlZmluZWQgb24gT2JqZWN0LnByb3RvdHlwZS5cbiAgICAgIC8vIFByZXZlbnQgcHJvdG90eXBlIHNldHRlcnMgZnJvbSBpbnRlcmNlcHRpbmcgc2V0IGFzIGEgdGhpcyB2YWx1ZS5cbiAgICAgIHNldFByb3RvdHlwZU9mKHNldCwgbnVsbCk7XG4gICAgfVxuXG4gICAgdmFyIGwgPSBhcnJheS5sZW5ndGg7XG4gICAgd2hpbGUgKGwtLSkge1xuICAgICAgdmFyIGVsZW1lbnQgPSBhcnJheVtsXTtcbiAgICAgIGlmICh0eXBlb2YgZWxlbWVudCA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgdmFyIGxjRWxlbWVudCA9IHN0cmluZ1RvTG93ZXJDYXNlKGVsZW1lbnQpO1xuICAgICAgICBpZiAobGNFbGVtZW50ICE9PSBlbGVtZW50KSB7XG4gICAgICAgICAgLy8gQ29uZmlnIHByZXNldHMgKGUuZy4gdGFncy5qcywgYXR0cnMuanMpIGFyZSBpbW11dGFibGUuXG4gICAgICAgICAgaWYgKCFpc0Zyb3plbihhcnJheSkpIHtcbiAgICAgICAgICAgIGFycmF5W2xdID0gbGNFbGVtZW50O1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGVsZW1lbnQgPSBsY0VsZW1lbnQ7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgc2V0W2VsZW1lbnRdID0gdHJ1ZTtcbiAgICB9XG5cbiAgICByZXR1cm4gc2V0O1xuICB9XG5cbiAgLyogU2hhbGxvdyBjbG9uZSBhbiBvYmplY3QgKi9cbiAgZnVuY3Rpb24gY2xvbmUob2JqZWN0KSB7XG4gICAgdmFyIG5ld09iamVjdCA9IGNyZWF0ZShudWxsKTtcblxuICAgIHZhciBwcm9wZXJ0eSA9IHZvaWQgMDtcbiAgICBmb3IgKHByb3BlcnR5IGluIG9iamVjdCkge1xuICAgICAgaWYgKGFwcGx5KGhhc093blByb3BlcnR5LCBvYmplY3QsIFtwcm9wZXJ0eV0pKSB7XG4gICAgICAgIG5ld09iamVjdFtwcm9wZXJ0eV0gPSBvYmplY3RbcHJvcGVydHldO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBuZXdPYmplY3Q7XG4gIH1cblxuICAvKiBJRTEwIGRvZXNuJ3Qgc3VwcG9ydCBfX2xvb2t1cEdldHRlcl9fIHNvIGxldHMnXG4gICAqIHNpbXVsYXRlIGl0LiBJdCBhbHNvIGF1dG9tYXRpY2FsbHkgY2hlY2tzXG4gICAqIGlmIHRoZSBwcm9wIGlzIGZ1bmN0aW9uIG9yIGdldHRlciBhbmQgYmVoYXZlc1xuICAgKiBhY2NvcmRpbmdseS4gKi9cbiAgZnVuY3Rpb24gbG9va3VwR2V0dGVyKG9iamVjdCwgcHJvcCkge1xuICAgIHdoaWxlIChvYmplY3QgIT09IG51bGwpIHtcbiAgICAgIHZhciBkZXNjID0gZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG9iamVjdCwgcHJvcCk7XG4gICAgICBpZiAoZGVzYykge1xuICAgICAgICBpZiAoZGVzYy5nZXQpIHtcbiAgICAgICAgICByZXR1cm4gdW5hcHBseShkZXNjLmdldCk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodHlwZW9mIGRlc2MudmFsdWUgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICByZXR1cm4gdW5hcHBseShkZXNjLnZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBvYmplY3QgPSBnZXRQcm90b3R5cGVPZihvYmplY3QpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGZhbGxiYWNrVmFsdWUoZWxlbWVudCkge1xuICAgICAgY29uc29sZS53YXJuKCdmYWxsYmFjayB2YWx1ZSBmb3InLCBlbGVtZW50KTtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIHJldHVybiBmYWxsYmFja1ZhbHVlO1xuICB9XG5cbiAgdmFyIGh0bWwgPSBmcmVlemUoWydhJywgJ2FiYnInLCAnYWNyb255bScsICdhZGRyZXNzJywgJ2FyZWEnLCAnYXJ0aWNsZScsICdhc2lkZScsICdhdWRpbycsICdiJywgJ2JkaScsICdiZG8nLCAnYmlnJywgJ2JsaW5rJywgJ2Jsb2NrcXVvdGUnLCAnYm9keScsICdicicsICdidXR0b24nLCAnY2FudmFzJywgJ2NhcHRpb24nLCAnY2VudGVyJywgJ2NpdGUnLCAnY29kZScsICdjb2wnLCAnY29sZ3JvdXAnLCAnY29udGVudCcsICdkYXRhJywgJ2RhdGFsaXN0JywgJ2RkJywgJ2RlY29yYXRvcicsICdkZWwnLCAnZGV0YWlscycsICdkZm4nLCAnZGlhbG9nJywgJ2RpcicsICdkaXYnLCAnZGwnLCAnZHQnLCAnZWxlbWVudCcsICdlbScsICdmaWVsZHNldCcsICdmaWdjYXB0aW9uJywgJ2ZpZ3VyZScsICdmb250JywgJ2Zvb3RlcicsICdmb3JtJywgJ2gxJywgJ2gyJywgJ2gzJywgJ2g0JywgJ2g1JywgJ2g2JywgJ2hlYWQnLCAnaGVhZGVyJywgJ2hncm91cCcsICdocicsICdodG1sJywgJ2knLCAnaW1nJywgJ2lucHV0JywgJ2lucycsICdrYmQnLCAnbGFiZWwnLCAnbGVnZW5kJywgJ2xpJywgJ21haW4nLCAnbWFwJywgJ21hcmsnLCAnbWFycXVlZScsICdtZW51JywgJ21lbnVpdGVtJywgJ21ldGVyJywgJ25hdicsICdub2JyJywgJ29sJywgJ29wdGdyb3VwJywgJ29wdGlvbicsICdvdXRwdXQnLCAncCcsICdwaWN0dXJlJywgJ3ByZScsICdwcm9ncmVzcycsICdxJywgJ3JwJywgJ3J0JywgJ3J1YnknLCAncycsICdzYW1wJywgJ3NlY3Rpb24nLCAnc2VsZWN0JywgJ3NoYWRvdycsICdzbWFsbCcsICdzb3VyY2UnLCAnc3BhY2VyJywgJ3NwYW4nLCAnc3RyaWtlJywgJ3N0cm9uZycsICdzdHlsZScsICdzdWInLCAnc3VtbWFyeScsICdzdXAnLCAndGFibGUnLCAndGJvZHknLCAndGQnLCAndGVtcGxhdGUnLCAndGV4dGFyZWEnLCAndGZvb3QnLCAndGgnLCAndGhlYWQnLCAndGltZScsICd0cicsICd0cmFjaycsICd0dCcsICd1JywgJ3VsJywgJ3ZhcicsICd2aWRlbycsICd3YnInXSk7XG5cbiAgLy8gU1ZHXG4gIHZhciBzdmcgPSBmcmVlemUoWydzdmcnLCAnYScsICdhbHRnbHlwaCcsICdhbHRnbHlwaGRlZicsICdhbHRnbHlwaGl0ZW0nLCAnYW5pbWF0ZWNvbG9yJywgJ2FuaW1hdGVtb3Rpb24nLCAnYW5pbWF0ZXRyYW5zZm9ybScsICdjaXJjbGUnLCAnY2xpcHBhdGgnLCAnZGVmcycsICdkZXNjJywgJ2VsbGlwc2UnLCAnZmlsdGVyJywgJ2ZvbnQnLCAnZycsICdnbHlwaCcsICdnbHlwaHJlZicsICdoa2VybicsICdpbWFnZScsICdsaW5lJywgJ2xpbmVhcmdyYWRpZW50JywgJ21hcmtlcicsICdtYXNrJywgJ21ldGFkYXRhJywgJ21wYXRoJywgJ3BhdGgnLCAncGF0dGVybicsICdwb2x5Z29uJywgJ3BvbHlsaW5lJywgJ3JhZGlhbGdyYWRpZW50JywgJ3JlY3QnLCAnc3RvcCcsICdzdHlsZScsICdzd2l0Y2gnLCAnc3ltYm9sJywgJ3RleHQnLCAndGV4dHBhdGgnLCAndGl0bGUnLCAndHJlZicsICd0c3BhbicsICd2aWV3JywgJ3ZrZXJuJ10pO1xuXG4gIHZhciBzdmdGaWx0ZXJzID0gZnJlZXplKFsnZmVCbGVuZCcsICdmZUNvbG9yTWF0cml4JywgJ2ZlQ29tcG9uZW50VHJhbnNmZXInLCAnZmVDb21wb3NpdGUnLCAnZmVDb252b2x2ZU1hdHJpeCcsICdmZURpZmZ1c2VMaWdodGluZycsICdmZURpc3BsYWNlbWVudE1hcCcsICdmZURpc3RhbnRMaWdodCcsICdmZUZsb29kJywgJ2ZlRnVuY0EnLCAnZmVGdW5jQicsICdmZUZ1bmNHJywgJ2ZlRnVuY1InLCAnZmVHYXVzc2lhbkJsdXInLCAnZmVJbWFnZScsICdmZU1lcmdlJywgJ2ZlTWVyZ2VOb2RlJywgJ2ZlTW9ycGhvbG9neScsICdmZU9mZnNldCcsICdmZVBvaW50TGlnaHQnLCAnZmVTcGVjdWxhckxpZ2h0aW5nJywgJ2ZlU3BvdExpZ2h0JywgJ2ZlVGlsZScsICdmZVR1cmJ1bGVuY2UnXSk7XG5cbiAgLy8gTGlzdCBvZiBTVkcgZWxlbWVudHMgdGhhdCBhcmUgZGlzYWxsb3dlZCBieSBkZWZhdWx0LlxuICAvLyBXZSBzdGlsbCBuZWVkIHRvIGtub3cgdGhlbSBzbyB0aGF0IHdlIGNhbiBkbyBuYW1lc3BhY2VcbiAgLy8gY2hlY2tzIHByb3Blcmx5IGluIGNhc2Ugb25lIHdhbnRzIHRvIGFkZCB0aGVtIHRvXG4gIC8vIGFsbG93LWxpc3QuXG4gIHZhciBzdmdEaXNhbGxvd2VkID0gZnJlZXplKFsnYW5pbWF0ZScsICdjb2xvci1wcm9maWxlJywgJ2N1cnNvcicsICdkaXNjYXJkJywgJ2ZlZHJvcHNoYWRvdycsICdmb250LWZhY2UnLCAnZm9udC1mYWNlLWZvcm1hdCcsICdmb250LWZhY2UtbmFtZScsICdmb250LWZhY2Utc3JjJywgJ2ZvbnQtZmFjZS11cmknLCAnZm9yZWlnbm9iamVjdCcsICdoYXRjaCcsICdoYXRjaHBhdGgnLCAnbWVzaCcsICdtZXNoZ3JhZGllbnQnLCAnbWVzaHBhdGNoJywgJ21lc2hyb3cnLCAnbWlzc2luZy1nbHlwaCcsICdzY3JpcHQnLCAnc2V0JywgJ3NvbGlkY29sb3InLCAndW5rbm93bicsICd1c2UnXSk7XG5cbiAgdmFyIG1hdGhNbCA9IGZyZWV6ZShbJ21hdGgnLCAnbWVuY2xvc2UnLCAnbWVycm9yJywgJ21mZW5jZWQnLCAnbWZyYWMnLCAnbWdseXBoJywgJ21pJywgJ21sYWJlbGVkdHInLCAnbW11bHRpc2NyaXB0cycsICdtbicsICdtbycsICdtb3ZlcicsICdtcGFkZGVkJywgJ21waGFudG9tJywgJ21yb290JywgJ21yb3cnLCAnbXMnLCAnbXNwYWNlJywgJ21zcXJ0JywgJ21zdHlsZScsICdtc3ViJywgJ21zdXAnLCAnbXN1YnN1cCcsICdtdGFibGUnLCAnbXRkJywgJ210ZXh0JywgJ210cicsICdtdW5kZXInLCAnbXVuZGVyb3ZlciddKTtcblxuICAvLyBTaW1pbGFybHkgdG8gU1ZHLCB3ZSB3YW50IHRvIGtub3cgYWxsIE1hdGhNTCBlbGVtZW50cyxcbiAgLy8gZXZlbiB0aG9zZSB0aGF0IHdlIGRpc2FsbG93IGJ5IGRlZmF1bHQuXG4gIHZhciBtYXRoTWxEaXNhbGxvd2VkID0gZnJlZXplKFsnbWFjdGlvbicsICdtYWxpZ25ncm91cCcsICdtYWxpZ25tYXJrJywgJ21sb25nZGl2JywgJ21zY2FycmllcycsICdtc2NhcnJ5JywgJ21zZ3JvdXAnLCAnbXN0YWNrJywgJ21zbGluZScsICdtc3JvdycsICdzZW1hbnRpY3MnLCAnYW5ub3RhdGlvbicsICdhbm5vdGF0aW9uLXhtbCcsICdtcHJlc2NyaXB0cycsICdub25lJ10pO1xuXG4gIHZhciB0ZXh0ID0gZnJlZXplKFsnI3RleHQnXSk7XG5cbiAgdmFyIGh0bWwkMSA9IGZyZWV6ZShbJ2FjY2VwdCcsICdhY3Rpb24nLCAnYWxpZ24nLCAnYWx0JywgJ2F1dG9jYXBpdGFsaXplJywgJ2F1dG9jb21wbGV0ZScsICdhdXRvcGljdHVyZWlucGljdHVyZScsICdhdXRvcGxheScsICdiYWNrZ3JvdW5kJywgJ2JnY29sb3InLCAnYm9yZGVyJywgJ2NhcHR1cmUnLCAnY2VsbHBhZGRpbmcnLCAnY2VsbHNwYWNpbmcnLCAnY2hlY2tlZCcsICdjaXRlJywgJ2NsYXNzJywgJ2NsZWFyJywgJ2NvbG9yJywgJ2NvbHMnLCAnY29sc3BhbicsICdjb250cm9scycsICdjb250cm9sc2xpc3QnLCAnY29vcmRzJywgJ2Nyb3Nzb3JpZ2luJywgJ2RhdGV0aW1lJywgJ2RlY29kaW5nJywgJ2RlZmF1bHQnLCAnZGlyJywgJ2Rpc2FibGVkJywgJ2Rpc2FibGVwaWN0dXJlaW5waWN0dXJlJywgJ2Rpc2FibGVyZW1vdGVwbGF5YmFjaycsICdkb3dubG9hZCcsICdkcmFnZ2FibGUnLCAnZW5jdHlwZScsICdlbnRlcmtleWhpbnQnLCAnZmFjZScsICdmb3InLCAnaGVhZGVycycsICdoZWlnaHQnLCAnaGlkZGVuJywgJ2hpZ2gnLCAnaHJlZicsICdocmVmbGFuZycsICdpZCcsICdpbnB1dG1vZGUnLCAnaW50ZWdyaXR5JywgJ2lzbWFwJywgJ2tpbmQnLCAnbGFiZWwnLCAnbGFuZycsICdsaXN0JywgJ2xvYWRpbmcnLCAnbG9vcCcsICdsb3cnLCAnbWF4JywgJ21heGxlbmd0aCcsICdtZWRpYScsICdtZXRob2QnLCAnbWluJywgJ21pbmxlbmd0aCcsICdtdWx0aXBsZScsICdtdXRlZCcsICduYW1lJywgJ25vbmNlJywgJ25vc2hhZGUnLCAnbm92YWxpZGF0ZScsICdub3dyYXAnLCAnb3BlbicsICdvcHRpbXVtJywgJ3BhdHRlcm4nLCAncGxhY2Vob2xkZXInLCAncGxheXNpbmxpbmUnLCAncG9zdGVyJywgJ3ByZWxvYWQnLCAncHViZGF0ZScsICdyYWRpb2dyb3VwJywgJ3JlYWRvbmx5JywgJ3JlbCcsICdyZXF1aXJlZCcsICdyZXYnLCAncmV2ZXJzZWQnLCAncm9sZScsICdyb3dzJywgJ3Jvd3NwYW4nLCAnc3BlbGxjaGVjaycsICdzY29wZScsICdzZWxlY3RlZCcsICdzaGFwZScsICdzaXplJywgJ3NpemVzJywgJ3NwYW4nLCAnc3JjbGFuZycsICdzdGFydCcsICdzcmMnLCAnc3Jjc2V0JywgJ3N0ZXAnLCAnc3R5bGUnLCAnc3VtbWFyeScsICd0YWJpbmRleCcsICd0aXRsZScsICd0cmFuc2xhdGUnLCAndHlwZScsICd1c2VtYXAnLCAndmFsaWduJywgJ3ZhbHVlJywgJ3dpZHRoJywgJ3htbG5zJywgJ3Nsb3QnXSk7XG5cbiAgdmFyIHN2ZyQxID0gZnJlZXplKFsnYWNjZW50LWhlaWdodCcsICdhY2N1bXVsYXRlJywgJ2FkZGl0aXZlJywgJ2FsaWdubWVudC1iYXNlbGluZScsICdhc2NlbnQnLCAnYXR0cmlidXRlbmFtZScsICdhdHRyaWJ1dGV0eXBlJywgJ2F6aW11dGgnLCAnYmFzZWZyZXF1ZW5jeScsICdiYXNlbGluZS1zaGlmdCcsICdiZWdpbicsICdiaWFzJywgJ2J5JywgJ2NsYXNzJywgJ2NsaXAnLCAnY2xpcHBhdGh1bml0cycsICdjbGlwLXBhdGgnLCAnY2xpcC1ydWxlJywgJ2NvbG9yJywgJ2NvbG9yLWludGVycG9sYXRpb24nLCAnY29sb3ItaW50ZXJwb2xhdGlvbi1maWx0ZXJzJywgJ2NvbG9yLXByb2ZpbGUnLCAnY29sb3ItcmVuZGVyaW5nJywgJ2N4JywgJ2N5JywgJ2QnLCAnZHgnLCAnZHknLCAnZGlmZnVzZWNvbnN0YW50JywgJ2RpcmVjdGlvbicsICdkaXNwbGF5JywgJ2Rpdmlzb3InLCAnZHVyJywgJ2VkZ2Vtb2RlJywgJ2VsZXZhdGlvbicsICdlbmQnLCAnZmlsbCcsICdmaWxsLW9wYWNpdHknLCAnZmlsbC1ydWxlJywgJ2ZpbHRlcicsICdmaWx0ZXJ1bml0cycsICdmbG9vZC1jb2xvcicsICdmbG9vZC1vcGFjaXR5JywgJ2ZvbnQtZmFtaWx5JywgJ2ZvbnQtc2l6ZScsICdmb250LXNpemUtYWRqdXN0JywgJ2ZvbnQtc3RyZXRjaCcsICdmb250LXN0eWxlJywgJ2ZvbnQtdmFyaWFudCcsICdmb250LXdlaWdodCcsICdmeCcsICdmeScsICdnMScsICdnMicsICdnbHlwaC1uYW1lJywgJ2dseXBocmVmJywgJ2dyYWRpZW50dW5pdHMnLCAnZ3JhZGllbnR0cmFuc2Zvcm0nLCAnaGVpZ2h0JywgJ2hyZWYnLCAnaWQnLCAnaW1hZ2UtcmVuZGVyaW5nJywgJ2luJywgJ2luMicsICdrJywgJ2sxJywgJ2syJywgJ2szJywgJ2s0JywgJ2tlcm5pbmcnLCAna2V5cG9pbnRzJywgJ2tleXNwbGluZXMnLCAna2V5dGltZXMnLCAnbGFuZycsICdsZW5ndGhhZGp1c3QnLCAnbGV0dGVyLXNwYWNpbmcnLCAna2VybmVsbWF0cml4JywgJ2tlcm5lbHVuaXRsZW5ndGgnLCAnbGlnaHRpbmctY29sb3InLCAnbG9jYWwnLCAnbWFya2VyLWVuZCcsICdtYXJrZXItbWlkJywgJ21hcmtlci1zdGFydCcsICdtYXJrZXJoZWlnaHQnLCAnbWFya2VydW5pdHMnLCAnbWFya2Vyd2lkdGgnLCAnbWFza2NvbnRlbnR1bml0cycsICdtYXNrdW5pdHMnLCAnbWF4JywgJ21hc2snLCAnbWVkaWEnLCAnbWV0aG9kJywgJ21vZGUnLCAnbWluJywgJ25hbWUnLCAnbnVtb2N0YXZlcycsICdvZmZzZXQnLCAnb3BlcmF0b3InLCAnb3BhY2l0eScsICdvcmRlcicsICdvcmllbnQnLCAnb3JpZW50YXRpb24nLCAnb3JpZ2luJywgJ292ZXJmbG93JywgJ3BhaW50LW9yZGVyJywgJ3BhdGgnLCAncGF0aGxlbmd0aCcsICdwYXR0ZXJuY29udGVudHVuaXRzJywgJ3BhdHRlcm50cmFuc2Zvcm0nLCAncGF0dGVybnVuaXRzJywgJ3BvaW50cycsICdwcmVzZXJ2ZWFscGhhJywgJ3ByZXNlcnZlYXNwZWN0cmF0aW8nLCAncHJpbWl0aXZldW5pdHMnLCAncicsICdyeCcsICdyeScsICdyYWRpdXMnLCAncmVmeCcsICdyZWZ5JywgJ3JlcGVhdGNvdW50JywgJ3JlcGVhdGR1cicsICdyZXN0YXJ0JywgJ3Jlc3VsdCcsICdyb3RhdGUnLCAnc2NhbGUnLCAnc2VlZCcsICdzaGFwZS1yZW5kZXJpbmcnLCAnc3BlY3VsYXJjb25zdGFudCcsICdzcGVjdWxhcmV4cG9uZW50JywgJ3NwcmVhZG1ldGhvZCcsICdzdGFydG9mZnNldCcsICdzdGRkZXZpYXRpb24nLCAnc3RpdGNodGlsZXMnLCAnc3RvcC1jb2xvcicsICdzdG9wLW9wYWNpdHknLCAnc3Ryb2tlLWRhc2hhcnJheScsICdzdHJva2UtZGFzaG9mZnNldCcsICdzdHJva2UtbGluZWNhcCcsICdzdHJva2UtbGluZWpvaW4nLCAnc3Ryb2tlLW1pdGVybGltaXQnLCAnc3Ryb2tlLW9wYWNpdHknLCAnc3Ryb2tlJywgJ3N0cm9rZS13aWR0aCcsICdzdHlsZScsICdzdXJmYWNlc2NhbGUnLCAnc3lzdGVtbGFuZ3VhZ2UnLCAndGFiaW5kZXgnLCAndGFyZ2V0eCcsICd0YXJnZXR5JywgJ3RyYW5zZm9ybScsICd0cmFuc2Zvcm0tb3JpZ2luJywgJ3RleHQtYW5jaG9yJywgJ3RleHQtZGVjb3JhdGlvbicsICd0ZXh0LXJlbmRlcmluZycsICd0ZXh0bGVuZ3RoJywgJ3R5cGUnLCAndTEnLCAndTInLCAndW5pY29kZScsICd2YWx1ZXMnLCAndmlld2JveCcsICd2aXNpYmlsaXR5JywgJ3ZlcnNpb24nLCAndmVydC1hZHYteScsICd2ZXJ0LW9yaWdpbi14JywgJ3ZlcnQtb3JpZ2luLXknLCAnd2lkdGgnLCAnd29yZC1zcGFjaW5nJywgJ3dyYXAnLCAnd3JpdGluZy1tb2RlJywgJ3hjaGFubmVsc2VsZWN0b3InLCAneWNoYW5uZWxzZWxlY3RvcicsICd4JywgJ3gxJywgJ3gyJywgJ3htbG5zJywgJ3knLCAneTEnLCAneTInLCAneicsICd6b29tYW5kcGFuJ10pO1xuXG4gIHZhciBtYXRoTWwkMSA9IGZyZWV6ZShbJ2FjY2VudCcsICdhY2NlbnR1bmRlcicsICdhbGlnbicsICdiZXZlbGxlZCcsICdjbG9zZScsICdjb2x1bW5zYWxpZ24nLCAnY29sdW1ubGluZXMnLCAnY29sdW1uc3BhbicsICdkZW5vbWFsaWduJywgJ2RlcHRoJywgJ2RpcicsICdkaXNwbGF5JywgJ2Rpc3BsYXlzdHlsZScsICdlbmNvZGluZycsICdmZW5jZScsICdmcmFtZScsICdoZWlnaHQnLCAnaHJlZicsICdpZCcsICdsYXJnZW9wJywgJ2xlbmd0aCcsICdsaW5ldGhpY2tuZXNzJywgJ2xzcGFjZScsICdscXVvdGUnLCAnbWF0aGJhY2tncm91bmQnLCAnbWF0aGNvbG9yJywgJ21hdGhzaXplJywgJ21hdGh2YXJpYW50JywgJ21heHNpemUnLCAnbWluc2l6ZScsICdtb3ZhYmxlbGltaXRzJywgJ25vdGF0aW9uJywgJ251bWFsaWduJywgJ29wZW4nLCAncm93YWxpZ24nLCAncm93bGluZXMnLCAncm93c3BhY2luZycsICdyb3dzcGFuJywgJ3JzcGFjZScsICdycXVvdGUnLCAnc2NyaXB0bGV2ZWwnLCAnc2NyaXB0bWluc2l6ZScsICdzY3JpcHRzaXplbXVsdGlwbGllcicsICdzZWxlY3Rpb24nLCAnc2VwYXJhdG9yJywgJ3NlcGFyYXRvcnMnLCAnc3RyZXRjaHknLCAnc3Vic2NyaXB0c2hpZnQnLCAnc3Vwc2NyaXB0c2hpZnQnLCAnc3ltbWV0cmljJywgJ3ZvZmZzZXQnLCAnd2lkdGgnLCAneG1sbnMnXSk7XG5cbiAgdmFyIHhtbCA9IGZyZWV6ZShbJ3hsaW5rOmhyZWYnLCAneG1sOmlkJywgJ3hsaW5rOnRpdGxlJywgJ3htbDpzcGFjZScsICd4bWxuczp4bGluayddKTtcblxuICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgdW5pY29ybi9iZXR0ZXItcmVnZXhcbiAgdmFyIE1VU1RBQ0hFX0VYUFIgPSBzZWFsKC9cXHtcXHtbXFxzXFxTXSp8W1xcc1xcU10qXFx9XFx9L2dtKTsgLy8gU3BlY2lmeSB0ZW1wbGF0ZSBkZXRlY3Rpb24gcmVnZXggZm9yIFNBRkVfRk9SX1RFTVBMQVRFUyBtb2RlXG4gIHZhciBFUkJfRVhQUiA9IHNlYWwoLzwlW1xcc1xcU10qfFtcXHNcXFNdKiU+L2dtKTtcbiAgdmFyIERBVEFfQVRUUiA9IHNlYWwoL15kYXRhLVtcXC1cXHcuXFx1MDBCNy1cXHVGRkZGXS8pOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLXVzZWxlc3MtZXNjYXBlXG4gIHZhciBBUklBX0FUVFIgPSBzZWFsKC9eYXJpYS1bXFwtXFx3XSskLyk7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tdXNlbGVzcy1lc2NhcGVcbiAgdmFyIElTX0FMTE9XRURfVVJJID0gc2VhbCgvXig/Oig/Oig/OmZ8aHQpdHBzP3xtYWlsdG98dGVsfGNhbGx0b3xjaWR8eG1wcCk6fFteYS16XXxbYS16Ky5cXC1dKyg/OlteYS16Ky5cXC06XXwkKSkvaSAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLXVzZWxlc3MtZXNjYXBlXG4gICk7XG4gIHZhciBJU19TQ1JJUFRfT1JfREFUQSA9IHNlYWwoL14oPzpcXHcrc2NyaXB0fGRhdGEpOi9pKTtcbiAgdmFyIEFUVFJfV0hJVEVTUEFDRSA9IHNlYWwoL1tcXHUwMDAwLVxcdTAwMjBcXHUwMEEwXFx1MTY4MFxcdTE4MEVcXHUyMDAwLVxcdTIwMjlcXHUyMDVGXFx1MzAwMF0vZyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLWNvbnRyb2wtcmVnZXhcbiAgKTtcblxuICB2YXIgX3R5cGVvZiA9IHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiB0eXBlb2YgU3ltYm9sLml0ZXJhdG9yID09PSBcInN5bWJvbFwiID8gZnVuY3Rpb24gKG9iaikgeyByZXR1cm4gdHlwZW9mIG9iajsgfSA6IGZ1bmN0aW9uIChvYmopIHsgcmV0dXJuIG9iaiAmJiB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgb2JqLmNvbnN0cnVjdG9yID09PSBTeW1ib2wgJiYgb2JqICE9PSBTeW1ib2wucHJvdG90eXBlID8gXCJzeW1ib2xcIiA6IHR5cGVvZiBvYmo7IH07XG5cbiAgZnVuY3Rpb24gX3RvQ29uc3VtYWJsZUFycmF5JDEoYXJyKSB7IGlmIChBcnJheS5pc0FycmF5KGFycikpIHsgZm9yICh2YXIgaSA9IDAsIGFycjIgPSBBcnJheShhcnIubGVuZ3RoKTsgaSA8IGFyci5sZW5ndGg7IGkrKykgeyBhcnIyW2ldID0gYXJyW2ldOyB9IHJldHVybiBhcnIyOyB9IGVsc2UgeyByZXR1cm4gQXJyYXkuZnJvbShhcnIpOyB9IH1cblxuICB2YXIgZ2V0R2xvYmFsID0gZnVuY3Rpb24gZ2V0R2xvYmFsKCkge1xuICAgIHJldHVybiB0eXBlb2Ygd2luZG93ID09PSAndW5kZWZpbmVkJyA/IG51bGwgOiB3aW5kb3c7XG4gIH07XG5cbiAgLyoqXG4gICAqIENyZWF0ZXMgYSBuby1vcCBwb2xpY3kgZm9yIGludGVybmFsIHVzZSBvbmx5LlxuICAgKiBEb24ndCBleHBvcnQgdGhpcyBmdW5jdGlvbiBvdXRzaWRlIHRoaXMgbW9kdWxlIVxuICAgKiBAcGFyYW0gez9UcnVzdGVkVHlwZVBvbGljeUZhY3Rvcnl9IHRydXN0ZWRUeXBlcyBUaGUgcG9saWN5IGZhY3RvcnkuXG4gICAqIEBwYXJhbSB7RG9jdW1lbnR9IGRvY3VtZW50IFRoZSBkb2N1bWVudCBvYmplY3QgKHRvIGRldGVybWluZSBwb2xpY3kgbmFtZSBzdWZmaXgpXG4gICAqIEByZXR1cm4gez9UcnVzdGVkVHlwZVBvbGljeX0gVGhlIHBvbGljeSBjcmVhdGVkIChvciBudWxsLCBpZiBUcnVzdGVkIFR5cGVzXG4gICAqIGFyZSBub3Qgc3VwcG9ydGVkKS5cbiAgICovXG4gIHZhciBfY3JlYXRlVHJ1c3RlZFR5cGVzUG9saWN5ID0gZnVuY3Rpb24gX2NyZWF0ZVRydXN0ZWRUeXBlc1BvbGljeSh0cnVzdGVkVHlwZXMsIGRvY3VtZW50KSB7XG4gICAgaWYgKCh0eXBlb2YgdHJ1c3RlZFR5cGVzID09PSAndW5kZWZpbmVkJyA/ICd1bmRlZmluZWQnIDogX3R5cGVvZih0cnVzdGVkVHlwZXMpKSAhPT0gJ29iamVjdCcgfHwgdHlwZW9mIHRydXN0ZWRUeXBlcy5jcmVhdGVQb2xpY3kgIT09ICdmdW5jdGlvbicpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIC8vIEFsbG93IHRoZSBjYWxsZXJzIHRvIGNvbnRyb2wgdGhlIHVuaXF1ZSBwb2xpY3kgbmFtZVxuICAgIC8vIGJ5IGFkZGluZyBhIGRhdGEtdHQtcG9saWN5LXN1ZmZpeCB0byB0aGUgc2NyaXB0IGVsZW1lbnQgd2l0aCB0aGUgRE9NUHVyaWZ5LlxuICAgIC8vIFBvbGljeSBjcmVhdGlvbiB3aXRoIGR1cGxpY2F0ZSBuYW1lcyB0aHJvd3MgaW4gVHJ1c3RlZCBUeXBlcy5cbiAgICB2YXIgc3VmZml4ID0gbnVsbDtcbiAgICB2YXIgQVRUUl9OQU1FID0gJ2RhdGEtdHQtcG9saWN5LXN1ZmZpeCc7XG4gICAgaWYgKGRvY3VtZW50LmN1cnJlbnRTY3JpcHQgJiYgZG9jdW1lbnQuY3VycmVudFNjcmlwdC5oYXNBdHRyaWJ1dGUoQVRUUl9OQU1FKSkge1xuICAgICAgc3VmZml4ID0gZG9jdW1lbnQuY3VycmVudFNjcmlwdC5nZXRBdHRyaWJ1dGUoQVRUUl9OQU1FKTtcbiAgICB9XG5cbiAgICB2YXIgcG9saWN5TmFtZSA9ICdkb21wdXJpZnknICsgKHN1ZmZpeCA/ICcjJyArIHN1ZmZpeCA6ICcnKTtcblxuICAgIHRyeSB7XG4gICAgICByZXR1cm4gdHJ1c3RlZFR5cGVzLmNyZWF0ZVBvbGljeShwb2xpY3lOYW1lLCB7XG4gICAgICAgIGNyZWF0ZUhUTUw6IGZ1bmN0aW9uIGNyZWF0ZUhUTUwoaHRtbCQkMSkge1xuICAgICAgICAgIHJldHVybiBodG1sJCQxO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9IGNhdGNoIChfKSB7XG4gICAgICAvLyBQb2xpY3kgY3JlYXRpb24gZmFpbGVkIChtb3N0IGxpa2VseSBhbm90aGVyIERPTVB1cmlmeSBzY3JpcHQgaGFzXG4gICAgICAvLyBhbHJlYWR5IHJ1bikuIFNraXAgY3JlYXRpbmcgdGhlIHBvbGljeSwgYXMgdGhpcyB3aWxsIG9ubHkgY2F1c2UgZXJyb3JzXG4gICAgICAvLyBpZiBUVCBhcmUgZW5mb3JjZWQuXG4gICAgICBjb25zb2xlLndhcm4oJ1RydXN0ZWRUeXBlcyBwb2xpY3kgJyArIHBvbGljeU5hbWUgKyAnIGNvdWxkIG5vdCBiZSBjcmVhdGVkLicpO1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICB9O1xuXG4gIGZ1bmN0aW9uIGNyZWF0ZURPTVB1cmlmeSgpIHtcbiAgICB2YXIgd2luZG93ID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiBnZXRHbG9iYWwoKTtcblxuICAgIHZhciBET01QdXJpZnkgPSBmdW5jdGlvbiBET01QdXJpZnkocm9vdCkge1xuICAgICAgcmV0dXJuIGNyZWF0ZURPTVB1cmlmeShyb290KTtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogVmVyc2lvbiBsYWJlbCwgZXhwb3NlZCBmb3IgZWFzaWVyIGNoZWNrc1xuICAgICAqIGlmIERPTVB1cmlmeSBpcyB1cCB0byBkYXRlIG9yIG5vdFxuICAgICAqL1xuICAgIERPTVB1cmlmeS52ZXJzaW9uID0gJzIuMy41JztcblxuICAgIC8qKlxuICAgICAqIEFycmF5IG9mIGVsZW1lbnRzIHRoYXQgRE9NUHVyaWZ5IHJlbW92ZWQgZHVyaW5nIHNhbml0YXRpb24uXG4gICAgICogRW1wdHkgaWYgbm90aGluZyB3YXMgcmVtb3ZlZC5cbiAgICAgKi9cbiAgICBET01QdXJpZnkucmVtb3ZlZCA9IFtdO1xuXG4gICAgaWYgKCF3aW5kb3cgfHwgIXdpbmRvdy5kb2N1bWVudCB8fCB3aW5kb3cuZG9jdW1lbnQubm9kZVR5cGUgIT09IDkpIHtcbiAgICAgIC8vIE5vdCBydW5uaW5nIGluIGEgYnJvd3NlciwgcHJvdmlkZSBhIGZhY3RvcnkgZnVuY3Rpb25cbiAgICAgIC8vIHNvIHRoYXQgeW91IGNhbiBwYXNzIHlvdXIgb3duIFdpbmRvd1xuICAgICAgRE9NUHVyaWZ5LmlzU3VwcG9ydGVkID0gZmFsc2U7XG5cbiAgICAgIHJldHVybiBET01QdXJpZnk7XG4gICAgfVxuXG4gICAgdmFyIG9yaWdpbmFsRG9jdW1lbnQgPSB3aW5kb3cuZG9jdW1lbnQ7XG5cbiAgICB2YXIgZG9jdW1lbnQgPSB3aW5kb3cuZG9jdW1lbnQ7XG4gICAgdmFyIERvY3VtZW50RnJhZ21lbnQgPSB3aW5kb3cuRG9jdW1lbnRGcmFnbWVudCxcbiAgICAgICAgSFRNTFRlbXBsYXRlRWxlbWVudCA9IHdpbmRvdy5IVE1MVGVtcGxhdGVFbGVtZW50LFxuICAgICAgICBOb2RlID0gd2luZG93Lk5vZGUsXG4gICAgICAgIEVsZW1lbnQgPSB3aW5kb3cuRWxlbWVudCxcbiAgICAgICAgTm9kZUZpbHRlciA9IHdpbmRvdy5Ob2RlRmlsdGVyLFxuICAgICAgICBfd2luZG93JE5hbWVkTm9kZU1hcCA9IHdpbmRvdy5OYW1lZE5vZGVNYXAsXG4gICAgICAgIE5hbWVkTm9kZU1hcCA9IF93aW5kb3ckTmFtZWROb2RlTWFwID09PSB1bmRlZmluZWQgPyB3aW5kb3cuTmFtZWROb2RlTWFwIHx8IHdpbmRvdy5Nb3pOYW1lZEF0dHJNYXAgOiBfd2luZG93JE5hbWVkTm9kZU1hcCxcbiAgICAgICAgSFRNTEZvcm1FbGVtZW50ID0gd2luZG93LkhUTUxGb3JtRWxlbWVudCxcbiAgICAgICAgRE9NUGFyc2VyID0gd2luZG93LkRPTVBhcnNlcixcbiAgICAgICAgdHJ1c3RlZFR5cGVzID0gd2luZG93LnRydXN0ZWRUeXBlcztcblxuXG4gICAgdmFyIEVsZW1lbnRQcm90b3R5cGUgPSBFbGVtZW50LnByb3RvdHlwZTtcblxuICAgIHZhciBjbG9uZU5vZGUgPSBsb29rdXBHZXR0ZXIoRWxlbWVudFByb3RvdHlwZSwgJ2Nsb25lTm9kZScpO1xuICAgIHZhciBnZXROZXh0U2libGluZyA9IGxvb2t1cEdldHRlcihFbGVtZW50UHJvdG90eXBlLCAnbmV4dFNpYmxpbmcnKTtcbiAgICB2YXIgZ2V0Q2hpbGROb2RlcyA9IGxvb2t1cEdldHRlcihFbGVtZW50UHJvdG90eXBlLCAnY2hpbGROb2RlcycpO1xuICAgIHZhciBnZXRQYXJlbnROb2RlID0gbG9va3VwR2V0dGVyKEVsZW1lbnRQcm90b3R5cGUsICdwYXJlbnROb2RlJyk7XG5cbiAgICAvLyBBcyBwZXIgaXNzdWUgIzQ3LCB0aGUgd2ViLWNvbXBvbmVudHMgcmVnaXN0cnkgaXMgaW5oZXJpdGVkIGJ5IGFcbiAgICAvLyBuZXcgZG9jdW1lbnQgY3JlYXRlZCB2aWEgY3JlYXRlSFRNTERvY3VtZW50LiBBcyBwZXIgdGhlIHNwZWNcbiAgICAvLyAoaHR0cDovL3czYy5naXRodWIuaW8vd2ViY29tcG9uZW50cy9zcGVjL2N1c3RvbS8jY3JlYXRpbmctYW5kLXBhc3NpbmctcmVnaXN0cmllcylcbiAgICAvLyBhIG5ldyBlbXB0eSByZWdpc3RyeSBpcyB1c2VkIHdoZW4gY3JlYXRpbmcgYSB0ZW1wbGF0ZSBjb250ZW50cyBvd25lclxuICAgIC8vIGRvY3VtZW50LCBzbyB3ZSB1c2UgdGhhdCBhcyBvdXIgcGFyZW50IGRvY3VtZW50IHRvIGVuc3VyZSBub3RoaW5nXG4gICAgLy8gaXMgaW5oZXJpdGVkLlxuICAgIGlmICh0eXBlb2YgSFRNTFRlbXBsYXRlRWxlbWVudCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgdmFyIHRlbXBsYXRlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndGVtcGxhdGUnKTtcbiAgICAgIGlmICh0ZW1wbGF0ZS5jb250ZW50ICYmIHRlbXBsYXRlLmNvbnRlbnQub3duZXJEb2N1bWVudCkge1xuICAgICAgICBkb2N1bWVudCA9IHRlbXBsYXRlLmNvbnRlbnQub3duZXJEb2N1bWVudDtcbiAgICAgIH1cbiAgICB9XG5cbiAgICB2YXIgdHJ1c3RlZFR5cGVzUG9saWN5ID0gX2NyZWF0ZVRydXN0ZWRUeXBlc1BvbGljeSh0cnVzdGVkVHlwZXMsIG9yaWdpbmFsRG9jdW1lbnQpO1xuICAgIHZhciBlbXB0eUhUTUwgPSB0cnVzdGVkVHlwZXNQb2xpY3kgPyB0cnVzdGVkVHlwZXNQb2xpY3kuY3JlYXRlSFRNTCgnJykgOiAnJztcblxuICAgIHZhciBfZG9jdW1lbnQgPSBkb2N1bWVudCxcbiAgICAgICAgaW1wbGVtZW50YXRpb24gPSBfZG9jdW1lbnQuaW1wbGVtZW50YXRpb24sXG4gICAgICAgIGNyZWF0ZU5vZGVJdGVyYXRvciA9IF9kb2N1bWVudC5jcmVhdGVOb2RlSXRlcmF0b3IsXG4gICAgICAgIGNyZWF0ZURvY3VtZW50RnJhZ21lbnQgPSBfZG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCxcbiAgICAgICAgZ2V0RWxlbWVudHNCeVRhZ05hbWUgPSBfZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWU7XG4gICAgdmFyIGltcG9ydE5vZGUgPSBvcmlnaW5hbERvY3VtZW50LmltcG9ydE5vZGU7XG5cblxuICAgIHZhciBkb2N1bWVudE1vZGUgPSB7fTtcbiAgICB0cnkge1xuICAgICAgZG9jdW1lbnRNb2RlID0gY2xvbmUoZG9jdW1lbnQpLmRvY3VtZW50TW9kZSA/IGRvY3VtZW50LmRvY3VtZW50TW9kZSA6IHt9O1xuICAgIH0gY2F0Y2ggKF8pIHt9XG5cbiAgICB2YXIgaG9va3MgPSB7fTtcblxuICAgIC8qKlxuICAgICAqIEV4cG9zZSB3aGV0aGVyIHRoaXMgYnJvd3NlciBzdXBwb3J0cyBydW5uaW5nIHRoZSBmdWxsIERPTVB1cmlmeS5cbiAgICAgKi9cbiAgICBET01QdXJpZnkuaXNTdXBwb3J0ZWQgPSB0eXBlb2YgZ2V0UGFyZW50Tm9kZSA9PT0gJ2Z1bmN0aW9uJyAmJiBpbXBsZW1lbnRhdGlvbiAmJiB0eXBlb2YgaW1wbGVtZW50YXRpb24uY3JlYXRlSFRNTERvY3VtZW50ICE9PSAndW5kZWZpbmVkJyAmJiBkb2N1bWVudE1vZGUgIT09IDk7XG5cbiAgICB2YXIgTVVTVEFDSEVfRVhQUiQkMSA9IE1VU1RBQ0hFX0VYUFIsXG4gICAgICAgIEVSQl9FWFBSJCQxID0gRVJCX0VYUFIsXG4gICAgICAgIERBVEFfQVRUUiQkMSA9IERBVEFfQVRUUixcbiAgICAgICAgQVJJQV9BVFRSJCQxID0gQVJJQV9BVFRSLFxuICAgICAgICBJU19TQ1JJUFRfT1JfREFUQSQkMSA9IElTX1NDUklQVF9PUl9EQVRBLFxuICAgICAgICBBVFRSX1dISVRFU1BBQ0UkJDEgPSBBVFRSX1dISVRFU1BBQ0U7XG4gICAgdmFyIElTX0FMTE9XRURfVVJJJCQxID0gSVNfQUxMT1dFRF9VUkk7XG5cbiAgICAvKipcbiAgICAgKiBXZSBjb25zaWRlciB0aGUgZWxlbWVudHMgYW5kIGF0dHJpYnV0ZXMgYmVsb3cgdG8gYmUgc2FmZS4gSWRlYWxseVxuICAgICAqIGRvbid0IGFkZCBhbnkgbmV3IG9uZXMgYnV0IGZlZWwgZnJlZSB0byByZW1vdmUgdW53YW50ZWQgb25lcy5cbiAgICAgKi9cblxuICAgIC8qIGFsbG93ZWQgZWxlbWVudCBuYW1lcyAqL1xuXG4gICAgdmFyIEFMTE9XRURfVEFHUyA9IG51bGw7XG4gICAgdmFyIERFRkFVTFRfQUxMT1dFRF9UQUdTID0gYWRkVG9TZXQoe30sIFtdLmNvbmNhdChfdG9Db25zdW1hYmxlQXJyYXkkMShodG1sKSwgX3RvQ29uc3VtYWJsZUFycmF5JDEoc3ZnKSwgX3RvQ29uc3VtYWJsZUFycmF5JDEoc3ZnRmlsdGVycyksIF90b0NvbnN1bWFibGVBcnJheSQxKG1hdGhNbCksIF90b0NvbnN1bWFibGVBcnJheSQxKHRleHQpKSk7XG5cbiAgICAvKiBBbGxvd2VkIGF0dHJpYnV0ZSBuYW1lcyAqL1xuICAgIHZhciBBTExPV0VEX0FUVFIgPSBudWxsO1xuICAgIHZhciBERUZBVUxUX0FMTE9XRURfQVRUUiA9IGFkZFRvU2V0KHt9LCBbXS5jb25jYXQoX3RvQ29uc3VtYWJsZUFycmF5JDEoaHRtbCQxKSwgX3RvQ29uc3VtYWJsZUFycmF5JDEoc3ZnJDEpLCBfdG9Db25zdW1hYmxlQXJyYXkkMShtYXRoTWwkMSksIF90b0NvbnN1bWFibGVBcnJheSQxKHhtbCkpKTtcblxuICAgIC8qXG4gICAgICogQ29uZmlndXJlIGhvdyBET01QVXJpZnkgc2hvdWxkIGhhbmRsZSBjdXN0b20gZWxlbWVudHMgYW5kIHRoZWlyIGF0dHJpYnV0ZXMgYXMgd2VsbCBhcyBjdXN0b21pemVkIGJ1aWx0LWluIGVsZW1lbnRzLlxuICAgICAqIEBwcm9wZXJ0eSB7UmVnRXhwfEZ1bmN0aW9ufG51bGx9IHRhZ05hbWVDaGVjayBvbmUgb2YgW251bGwsIHJlZ2V4UGF0dGVybiwgcHJlZGljYXRlXS4gRGVmYXVsdDogYG51bGxgIChkaXNhbGxvdyBhbnkgY3VzdG9tIGVsZW1lbnRzKVxuICAgICAqIEBwcm9wZXJ0eSB7UmVnRXhwfEZ1bmN0aW9ufG51bGx9IGF0dHJpYnV0ZU5hbWVDaGVjayBvbmUgb2YgW251bGwsIHJlZ2V4UGF0dGVybiwgcHJlZGljYXRlXS4gRGVmYXVsdDogYG51bGxgIChkaXNhbGxvdyBhbnkgYXR0cmlidXRlcyBub3Qgb24gdGhlIGFsbG93IGxpc3QpXG4gICAgICogQHByb3BlcnR5IHtib29sZWFufSBhbGxvd0N1c3RvbWl6ZWRCdWlsdEluRWxlbWVudHMgYWxsb3cgY3VzdG9tIGVsZW1lbnRzIGRlcml2ZWQgZnJvbSBidWlsdC1pbnMgaWYgdGhleSBwYXNzIENVU1RPTV9FTEVNRU5UX0hBTkRMSU5HLnRhZ05hbWVDaGVjay4gRGVmYXVsdDogYGZhbHNlYC5cbiAgICAgKi9cbiAgICB2YXIgQ1VTVE9NX0VMRU1FTlRfSEFORExJTkcgPSBPYmplY3Quc2VhbChPYmplY3QuY3JlYXRlKG51bGwsIHtcbiAgICAgIHRhZ05hbWVDaGVjazoge1xuICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiBmYWxzZSxcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgdmFsdWU6IG51bGxcbiAgICAgIH0sXG4gICAgICBhdHRyaWJ1dGVOYW1lQ2hlY2s6IHtcbiAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogZmFsc2UsXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIHZhbHVlOiBudWxsXG4gICAgICB9LFxuICAgICAgYWxsb3dDdXN0b21pemVkQnVpbHRJbkVsZW1lbnRzOiB7XG4gICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICBjb25maWd1cmFibGU6IGZhbHNlLFxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICB2YWx1ZTogZmFsc2VcbiAgICAgIH1cbiAgICB9KSk7XG5cbiAgICAvKiBFeHBsaWNpdGx5IGZvcmJpZGRlbiB0YWdzIChvdmVycmlkZXMgQUxMT1dFRF9UQUdTL0FERF9UQUdTKSAqL1xuICAgIHZhciBGT1JCSURfVEFHUyA9IG51bGw7XG5cbiAgICAvKiBFeHBsaWNpdGx5IGZvcmJpZGRlbiBhdHRyaWJ1dGVzIChvdmVycmlkZXMgQUxMT1dFRF9BVFRSL0FERF9BVFRSKSAqL1xuICAgIHZhciBGT1JCSURfQVRUUiA9IG51bGw7XG5cbiAgICAvKiBEZWNpZGUgaWYgQVJJQSBhdHRyaWJ1dGVzIGFyZSBva2F5ICovXG4gICAgdmFyIEFMTE9XX0FSSUFfQVRUUiA9IHRydWU7XG5cbiAgICAvKiBEZWNpZGUgaWYgY3VzdG9tIGRhdGEgYXR0cmlidXRlcyBhcmUgb2theSAqL1xuICAgIHZhciBBTExPV19EQVRBX0FUVFIgPSB0cnVlO1xuXG4gICAgLyogRGVjaWRlIGlmIHVua25vd24gcHJvdG9jb2xzIGFyZSBva2F5ICovXG4gICAgdmFyIEFMTE9XX1VOS05PV05fUFJPVE9DT0xTID0gZmFsc2U7XG5cbiAgICAvKiBPdXRwdXQgc2hvdWxkIGJlIHNhZmUgZm9yIGNvbW1vbiB0ZW1wbGF0ZSBlbmdpbmVzLlxuICAgICAqIFRoaXMgbWVhbnMsIERPTVB1cmlmeSByZW1vdmVzIGRhdGEgYXR0cmlidXRlcywgbXVzdGFjaGVzIGFuZCBFUkJcbiAgICAgKi9cbiAgICB2YXIgU0FGRV9GT1JfVEVNUExBVEVTID0gZmFsc2U7XG5cbiAgICAvKiBEZWNpZGUgaWYgZG9jdW1lbnQgd2l0aCA8aHRtbD4uLi4gc2hvdWxkIGJlIHJldHVybmVkICovXG4gICAgdmFyIFdIT0xFX0RPQ1VNRU5UID0gZmFsc2U7XG5cbiAgICAvKiBUcmFjayB3aGV0aGVyIGNvbmZpZyBpcyBhbHJlYWR5IHNldCBvbiB0aGlzIGluc3RhbmNlIG9mIERPTVB1cmlmeS4gKi9cbiAgICB2YXIgU0VUX0NPTkZJRyA9IGZhbHNlO1xuXG4gICAgLyogRGVjaWRlIGlmIGFsbCBlbGVtZW50cyAoZS5nLiBzdHlsZSwgc2NyaXB0KSBtdXN0IGJlIGNoaWxkcmVuIG9mXG4gICAgICogZG9jdW1lbnQuYm9keS4gQnkgZGVmYXVsdCwgYnJvd3NlcnMgbWlnaHQgbW92ZSB0aGVtIHRvIGRvY3VtZW50LmhlYWQgKi9cbiAgICB2YXIgRk9SQ0VfQk9EWSA9IGZhbHNlO1xuXG4gICAgLyogRGVjaWRlIGlmIGEgRE9NIGBIVE1MQm9keUVsZW1lbnRgIHNob3VsZCBiZSByZXR1cm5lZCwgaW5zdGVhZCBvZiBhIGh0bWxcbiAgICAgKiBzdHJpbmcgKG9yIGEgVHJ1c3RlZEhUTUwgb2JqZWN0IGlmIFRydXN0ZWQgVHlwZXMgYXJlIHN1cHBvcnRlZCkuXG4gICAgICogSWYgYFdIT0xFX0RPQ1VNRU5UYCBpcyBlbmFibGVkIGEgYEhUTUxIdG1sRWxlbWVudGAgd2lsbCBiZSByZXR1cm5lZCBpbnN0ZWFkXG4gICAgICovXG4gICAgdmFyIFJFVFVSTl9ET00gPSBmYWxzZTtcblxuICAgIC8qIERlY2lkZSBpZiBhIERPTSBgRG9jdW1lbnRGcmFnbWVudGAgc2hvdWxkIGJlIHJldHVybmVkLCBpbnN0ZWFkIG9mIGEgaHRtbFxuICAgICAqIHN0cmluZyAgKG9yIGEgVHJ1c3RlZEhUTUwgb2JqZWN0IGlmIFRydXN0ZWQgVHlwZXMgYXJlIHN1cHBvcnRlZCkgKi9cbiAgICB2YXIgUkVUVVJOX0RPTV9GUkFHTUVOVCA9IGZhbHNlO1xuXG4gICAgLyogVHJ5IHRvIHJldHVybiBhIFRydXN0ZWQgVHlwZSBvYmplY3QgaW5zdGVhZCBvZiBhIHN0cmluZywgcmV0dXJuIGEgc3RyaW5nIGluXG4gICAgICogY2FzZSBUcnVzdGVkIFR5cGVzIGFyZSBub3Qgc3VwcG9ydGVkICAqL1xuICAgIHZhciBSRVRVUk5fVFJVU1RFRF9UWVBFID0gZmFsc2U7XG5cbiAgICAvKiBPdXRwdXQgc2hvdWxkIGJlIGZyZWUgZnJvbSBET00gY2xvYmJlcmluZyBhdHRhY2tzPyAqL1xuICAgIHZhciBTQU5JVElaRV9ET00gPSB0cnVlO1xuXG4gICAgLyogS2VlcCBlbGVtZW50IGNvbnRlbnQgd2hlbiByZW1vdmluZyBlbGVtZW50PyAqL1xuICAgIHZhciBLRUVQX0NPTlRFTlQgPSB0cnVlO1xuXG4gICAgLyogSWYgYSBgTm9kZWAgaXMgcGFzc2VkIHRvIHNhbml0aXplKCksIHRoZW4gcGVyZm9ybXMgc2FuaXRpemF0aW9uIGluLXBsYWNlIGluc3RlYWRcbiAgICAgKiBvZiBpbXBvcnRpbmcgaXQgaW50byBhIG5ldyBEb2N1bWVudCBhbmQgcmV0dXJuaW5nIGEgc2FuaXRpemVkIGNvcHkgKi9cbiAgICB2YXIgSU5fUExBQ0UgPSBmYWxzZTtcblxuICAgIC8qIEFsbG93IHVzYWdlIG9mIHByb2ZpbGVzIGxpa2UgaHRtbCwgc3ZnIGFuZCBtYXRoTWwgKi9cbiAgICB2YXIgVVNFX1BST0ZJTEVTID0ge307XG5cbiAgICAvKiBUYWdzIHRvIGlnbm9yZSBjb250ZW50IG9mIHdoZW4gS0VFUF9DT05URU5UIGlzIHRydWUgKi9cbiAgICB2YXIgRk9SQklEX0NPTlRFTlRTID0gbnVsbDtcbiAgICB2YXIgREVGQVVMVF9GT1JCSURfQ09OVEVOVFMgPSBhZGRUb1NldCh7fSwgWydhbm5vdGF0aW9uLXhtbCcsICdhdWRpbycsICdjb2xncm91cCcsICdkZXNjJywgJ2ZvcmVpZ25vYmplY3QnLCAnaGVhZCcsICdpZnJhbWUnLCAnbWF0aCcsICdtaScsICdtbicsICdtbycsICdtcycsICdtdGV4dCcsICdub2VtYmVkJywgJ25vZnJhbWVzJywgJ25vc2NyaXB0JywgJ3BsYWludGV4dCcsICdzY3JpcHQnLCAnc3R5bGUnLCAnc3ZnJywgJ3RlbXBsYXRlJywgJ3RoZWFkJywgJ3RpdGxlJywgJ3ZpZGVvJywgJ3htcCddKTtcblxuICAgIC8qIFRhZ3MgdGhhdCBhcmUgc2FmZSBmb3IgZGF0YTogVVJJcyAqL1xuICAgIHZhciBEQVRBX1VSSV9UQUdTID0gbnVsbDtcbiAgICB2YXIgREVGQVVMVF9EQVRBX1VSSV9UQUdTID0gYWRkVG9TZXQoe30sIFsnYXVkaW8nLCAndmlkZW8nLCAnaW1nJywgJ3NvdXJjZScsICdpbWFnZScsICd0cmFjayddKTtcblxuICAgIC8qIEF0dHJpYnV0ZXMgc2FmZSBmb3IgdmFsdWVzIGxpa2UgXCJqYXZhc2NyaXB0OlwiICovXG4gICAgdmFyIFVSSV9TQUZFX0FUVFJJQlVURVMgPSBudWxsO1xuICAgIHZhciBERUZBVUxUX1VSSV9TQUZFX0FUVFJJQlVURVMgPSBhZGRUb1NldCh7fSwgWydhbHQnLCAnY2xhc3MnLCAnZm9yJywgJ2lkJywgJ2xhYmVsJywgJ25hbWUnLCAncGF0dGVybicsICdwbGFjZWhvbGRlcicsICdyb2xlJywgJ3N1bW1hcnknLCAndGl0bGUnLCAndmFsdWUnLCAnc3R5bGUnLCAneG1sbnMnXSk7XG5cbiAgICB2YXIgTUFUSE1MX05BTUVTUEFDRSA9ICdodHRwOi8vd3d3LnczLm9yZy8xOTk4L01hdGgvTWF0aE1MJztcbiAgICB2YXIgU1ZHX05BTUVTUEFDRSA9ICdodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Zyc7XG4gICAgdmFyIEhUTUxfTkFNRVNQQUNFID0gJ2h0dHA6Ly93d3cudzMub3JnLzE5OTkveGh0bWwnO1xuICAgIC8qIERvY3VtZW50IG5hbWVzcGFjZSAqL1xuICAgIHZhciBOQU1FU1BBQ0UgPSBIVE1MX05BTUVTUEFDRTtcbiAgICB2YXIgSVNfRU1QVFlfSU5QVVQgPSBmYWxzZTtcblxuICAgIC8qIFBhcnNpbmcgb2Ygc3RyaWN0IFhIVE1MIGRvY3VtZW50cyAqL1xuICAgIHZhciBQQVJTRVJfTUVESUFfVFlQRSA9IHZvaWQgMDtcbiAgICB2YXIgU1VQUE9SVEVEX1BBUlNFUl9NRURJQV9UWVBFUyA9IFsnYXBwbGljYXRpb24veGh0bWwreG1sJywgJ3RleHQvaHRtbCddO1xuICAgIHZhciBERUZBVUxUX1BBUlNFUl9NRURJQV9UWVBFID0gJ3RleHQvaHRtbCc7XG4gICAgdmFyIHRyYW5zZm9ybUNhc2VGdW5jID0gdm9pZCAwO1xuXG4gICAgLyogS2VlcCBhIHJlZmVyZW5jZSB0byBjb25maWcgdG8gcGFzcyB0byBob29rcyAqL1xuICAgIHZhciBDT05GSUcgPSBudWxsO1xuXG4gICAgLyogSWRlYWxseSwgZG8gbm90IHRvdWNoIGFueXRoaW5nIGJlbG93IHRoaXMgbGluZSAqL1xuICAgIC8qIF9fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX18gKi9cblxuICAgIHZhciBmb3JtRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2Zvcm0nKTtcblxuICAgIHZhciBpc1JlZ2V4T3JGdW5jdGlvbiA9IGZ1bmN0aW9uIGlzUmVnZXhPckZ1bmN0aW9uKHRlc3RWYWx1ZSkge1xuICAgICAgcmV0dXJuIHRlc3RWYWx1ZSBpbnN0YW5jZW9mIFJlZ0V4cCB8fCB0ZXN0VmFsdWUgaW5zdGFuY2VvZiBGdW5jdGlvbjtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogX3BhcnNlQ29uZmlnXG4gICAgICpcbiAgICAgKiBAcGFyYW0gIHtPYmplY3R9IGNmZyBvcHRpb25hbCBjb25maWcgbGl0ZXJhbFxuICAgICAqL1xuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBjb21wbGV4aXR5XG4gICAgdmFyIF9wYXJzZUNvbmZpZyA9IGZ1bmN0aW9uIF9wYXJzZUNvbmZpZyhjZmcpIHtcbiAgICAgIGlmIChDT05GSUcgJiYgQ09ORklHID09PSBjZmcpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICAvKiBTaGllbGQgY29uZmlndXJhdGlvbiBvYmplY3QgZnJvbSB0YW1wZXJpbmcgKi9cbiAgICAgIGlmICghY2ZnIHx8ICh0eXBlb2YgY2ZnID09PSAndW5kZWZpbmVkJyA/ICd1bmRlZmluZWQnIDogX3R5cGVvZihjZmcpKSAhPT0gJ29iamVjdCcpIHtcbiAgICAgICAgY2ZnID0ge307XG4gICAgICB9XG5cbiAgICAgIC8qIFNoaWVsZCBjb25maWd1cmF0aW9uIG9iamVjdCBmcm9tIHByb3RvdHlwZSBwb2xsdXRpb24gKi9cbiAgICAgIGNmZyA9IGNsb25lKGNmZyk7XG5cbiAgICAgIC8qIFNldCBjb25maWd1cmF0aW9uIHBhcmFtZXRlcnMgKi9cbiAgICAgIEFMTE9XRURfVEFHUyA9ICdBTExPV0VEX1RBR1MnIGluIGNmZyA/IGFkZFRvU2V0KHt9LCBjZmcuQUxMT1dFRF9UQUdTKSA6IERFRkFVTFRfQUxMT1dFRF9UQUdTO1xuICAgICAgQUxMT1dFRF9BVFRSID0gJ0FMTE9XRURfQVRUUicgaW4gY2ZnID8gYWRkVG9TZXQoe30sIGNmZy5BTExPV0VEX0FUVFIpIDogREVGQVVMVF9BTExPV0VEX0FUVFI7XG4gICAgICBVUklfU0FGRV9BVFRSSUJVVEVTID0gJ0FERF9VUklfU0FGRV9BVFRSJyBpbiBjZmcgPyBhZGRUb1NldChjbG9uZShERUZBVUxUX1VSSV9TQUZFX0FUVFJJQlVURVMpLCBjZmcuQUREX1VSSV9TQUZFX0FUVFIpIDogREVGQVVMVF9VUklfU0FGRV9BVFRSSUJVVEVTO1xuICAgICAgREFUQV9VUklfVEFHUyA9ICdBRERfREFUQV9VUklfVEFHUycgaW4gY2ZnID8gYWRkVG9TZXQoY2xvbmUoREVGQVVMVF9EQVRBX1VSSV9UQUdTKSwgY2ZnLkFERF9EQVRBX1VSSV9UQUdTKSA6IERFRkFVTFRfREFUQV9VUklfVEFHUztcbiAgICAgIEZPUkJJRF9DT05URU5UUyA9ICdGT1JCSURfQ09OVEVOVFMnIGluIGNmZyA/IGFkZFRvU2V0KHt9LCBjZmcuRk9SQklEX0NPTlRFTlRTKSA6IERFRkFVTFRfRk9SQklEX0NPTlRFTlRTO1xuICAgICAgRk9SQklEX1RBR1MgPSAnRk9SQklEX1RBR1MnIGluIGNmZyA/IGFkZFRvU2V0KHt9LCBjZmcuRk9SQklEX1RBR1MpIDoge307XG4gICAgICBGT1JCSURfQVRUUiA9ICdGT1JCSURfQVRUUicgaW4gY2ZnID8gYWRkVG9TZXQoe30sIGNmZy5GT1JCSURfQVRUUikgOiB7fTtcbiAgICAgIFVTRV9QUk9GSUxFUyA9ICdVU0VfUFJPRklMRVMnIGluIGNmZyA/IGNmZy5VU0VfUFJPRklMRVMgOiBmYWxzZTtcbiAgICAgIEFMTE9XX0FSSUFfQVRUUiA9IGNmZy5BTExPV19BUklBX0FUVFIgIT09IGZhbHNlOyAvLyBEZWZhdWx0IHRydWVcbiAgICAgIEFMTE9XX0RBVEFfQVRUUiA9IGNmZy5BTExPV19EQVRBX0FUVFIgIT09IGZhbHNlOyAvLyBEZWZhdWx0IHRydWVcbiAgICAgIEFMTE9XX1VOS05PV05fUFJPVE9DT0xTID0gY2ZnLkFMTE9XX1VOS05PV05fUFJPVE9DT0xTIHx8IGZhbHNlOyAvLyBEZWZhdWx0IGZhbHNlXG4gICAgICBTQUZFX0ZPUl9URU1QTEFURVMgPSBjZmcuU0FGRV9GT1JfVEVNUExBVEVTIHx8IGZhbHNlOyAvLyBEZWZhdWx0IGZhbHNlXG4gICAgICBXSE9MRV9ET0NVTUVOVCA9IGNmZy5XSE9MRV9ET0NVTUVOVCB8fCBmYWxzZTsgLy8gRGVmYXVsdCBmYWxzZVxuICAgICAgUkVUVVJOX0RPTSA9IGNmZy5SRVRVUk5fRE9NIHx8IGZhbHNlOyAvLyBEZWZhdWx0IGZhbHNlXG4gICAgICBSRVRVUk5fRE9NX0ZSQUdNRU5UID0gY2ZnLlJFVFVSTl9ET01fRlJBR01FTlQgfHwgZmFsc2U7IC8vIERlZmF1bHQgZmFsc2VcbiAgICAgIFJFVFVSTl9UUlVTVEVEX1RZUEUgPSBjZmcuUkVUVVJOX1RSVVNURURfVFlQRSB8fCBmYWxzZTsgLy8gRGVmYXVsdCBmYWxzZVxuICAgICAgRk9SQ0VfQk9EWSA9IGNmZy5GT1JDRV9CT0RZIHx8IGZhbHNlOyAvLyBEZWZhdWx0IGZhbHNlXG4gICAgICBTQU5JVElaRV9ET00gPSBjZmcuU0FOSVRJWkVfRE9NICE9PSBmYWxzZTsgLy8gRGVmYXVsdCB0cnVlXG4gICAgICBLRUVQX0NPTlRFTlQgPSBjZmcuS0VFUF9DT05URU5UICE9PSBmYWxzZTsgLy8gRGVmYXVsdCB0cnVlXG4gICAgICBJTl9QTEFDRSA9IGNmZy5JTl9QTEFDRSB8fCBmYWxzZTsgLy8gRGVmYXVsdCBmYWxzZVxuICAgICAgSVNfQUxMT1dFRF9VUkkkJDEgPSBjZmcuQUxMT1dFRF9VUklfUkVHRVhQIHx8IElTX0FMTE9XRURfVVJJJCQxO1xuICAgICAgTkFNRVNQQUNFID0gY2ZnLk5BTUVTUEFDRSB8fCBIVE1MX05BTUVTUEFDRTtcbiAgICAgIGlmIChjZmcuQ1VTVE9NX0VMRU1FTlRfSEFORExJTkcgJiYgaXNSZWdleE9yRnVuY3Rpb24oY2ZnLkNVU1RPTV9FTEVNRU5UX0hBTkRMSU5HLnRhZ05hbWVDaGVjaykpIHtcbiAgICAgICAgQ1VTVE9NX0VMRU1FTlRfSEFORExJTkcudGFnTmFtZUNoZWNrID0gY2ZnLkNVU1RPTV9FTEVNRU5UX0hBTkRMSU5HLnRhZ05hbWVDaGVjaztcbiAgICAgIH1cblxuICAgICAgaWYgKGNmZy5DVVNUT01fRUxFTUVOVF9IQU5ETElORyAmJiBpc1JlZ2V4T3JGdW5jdGlvbihjZmcuQ1VTVE9NX0VMRU1FTlRfSEFORExJTkcuYXR0cmlidXRlTmFtZUNoZWNrKSkge1xuICAgICAgICBDVVNUT01fRUxFTUVOVF9IQU5ETElORy5hdHRyaWJ1dGVOYW1lQ2hlY2sgPSBjZmcuQ1VTVE9NX0VMRU1FTlRfSEFORExJTkcuYXR0cmlidXRlTmFtZUNoZWNrO1xuICAgICAgfVxuXG4gICAgICBpZiAoY2ZnLkNVU1RPTV9FTEVNRU5UX0hBTkRMSU5HICYmIHR5cGVvZiBjZmcuQ1VTVE9NX0VMRU1FTlRfSEFORExJTkcuYWxsb3dDdXN0b21pemVkQnVpbHRJbkVsZW1lbnRzID09PSAnYm9vbGVhbicpIHtcbiAgICAgICAgQ1VTVE9NX0VMRU1FTlRfSEFORExJTkcuYWxsb3dDdXN0b21pemVkQnVpbHRJbkVsZW1lbnRzID0gY2ZnLkNVU1RPTV9FTEVNRU5UX0hBTkRMSU5HLmFsbG93Q3VzdG9taXplZEJ1aWx0SW5FbGVtZW50cztcbiAgICAgIH1cblxuICAgICAgUEFSU0VSX01FRElBX1RZUEUgPVxuICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIHVuaWNvcm4vcHJlZmVyLWluY2x1ZGVzXG4gICAgICBTVVBQT1JURURfUEFSU0VSX01FRElBX1RZUEVTLmluZGV4T2YoY2ZnLlBBUlNFUl9NRURJQV9UWVBFKSA9PT0gLTEgPyBQQVJTRVJfTUVESUFfVFlQRSA9IERFRkFVTFRfUEFSU0VSX01FRElBX1RZUEUgOiBQQVJTRVJfTUVESUFfVFlQRSA9IGNmZy5QQVJTRVJfTUVESUFfVFlQRTtcblxuICAgICAgLy8gSFRNTCB0YWdzIGFuZCBhdHRyaWJ1dGVzIGFyZSBub3QgY2FzZS1zZW5zaXRpdmUsIGNvbnZlcnRpbmcgdG8gbG93ZXJjYXNlLiBLZWVwaW5nIFhIVE1MIGFzIGlzLlxuICAgICAgdHJhbnNmb3JtQ2FzZUZ1bmMgPSBQQVJTRVJfTUVESUFfVFlQRSA9PT0gJ2FwcGxpY2F0aW9uL3hodG1sK3htbCcgPyBmdW5jdGlvbiAoeCkge1xuICAgICAgICByZXR1cm4geDtcbiAgICAgIH0gOiBzdHJpbmdUb0xvd2VyQ2FzZTtcblxuICAgICAgaWYgKFNBRkVfRk9SX1RFTVBMQVRFUykge1xuICAgICAgICBBTExPV19EQVRBX0FUVFIgPSBmYWxzZTtcbiAgICAgIH1cblxuICAgICAgaWYgKFJFVFVSTl9ET01fRlJBR01FTlQpIHtcbiAgICAgICAgUkVUVVJOX0RPTSA9IHRydWU7XG4gICAgICB9XG5cbiAgICAgIC8qIFBhcnNlIHByb2ZpbGUgaW5mbyAqL1xuICAgICAgaWYgKFVTRV9QUk9GSUxFUykge1xuICAgICAgICBBTExPV0VEX1RBR1MgPSBhZGRUb1NldCh7fSwgW10uY29uY2F0KF90b0NvbnN1bWFibGVBcnJheSQxKHRleHQpKSk7XG4gICAgICAgIEFMTE9XRURfQVRUUiA9IFtdO1xuICAgICAgICBpZiAoVVNFX1BST0ZJTEVTLmh0bWwgPT09IHRydWUpIHtcbiAgICAgICAgICBhZGRUb1NldChBTExPV0VEX1RBR1MsIGh0bWwpO1xuICAgICAgICAgIGFkZFRvU2V0KEFMTE9XRURfQVRUUiwgaHRtbCQxKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChVU0VfUFJPRklMRVMuc3ZnID09PSB0cnVlKSB7XG4gICAgICAgICAgYWRkVG9TZXQoQUxMT1dFRF9UQUdTLCBzdmcpO1xuICAgICAgICAgIGFkZFRvU2V0KEFMTE9XRURfQVRUUiwgc3ZnJDEpO1xuICAgICAgICAgIGFkZFRvU2V0KEFMTE9XRURfQVRUUiwgeG1sKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChVU0VfUFJPRklMRVMuc3ZnRmlsdGVycyA9PT0gdHJ1ZSkge1xuICAgICAgICAgIGFkZFRvU2V0KEFMTE9XRURfVEFHUywgc3ZnRmlsdGVycyk7XG4gICAgICAgICAgYWRkVG9TZXQoQUxMT1dFRF9BVFRSLCBzdmckMSk7XG4gICAgICAgICAgYWRkVG9TZXQoQUxMT1dFRF9BVFRSLCB4bWwpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKFVTRV9QUk9GSUxFUy5tYXRoTWwgPT09IHRydWUpIHtcbiAgICAgICAgICBhZGRUb1NldChBTExPV0VEX1RBR1MsIG1hdGhNbCk7XG4gICAgICAgICAgYWRkVG9TZXQoQUxMT1dFRF9BVFRSLCBtYXRoTWwkMSk7XG4gICAgICAgICAgYWRkVG9TZXQoQUxMT1dFRF9BVFRSLCB4bWwpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8qIE1lcmdlIGNvbmZpZ3VyYXRpb24gcGFyYW1ldGVycyAqL1xuICAgICAgaWYgKGNmZy5BRERfVEFHUykge1xuICAgICAgICBpZiAoQUxMT1dFRF9UQUdTID09PSBERUZBVUxUX0FMTE9XRURfVEFHUykge1xuICAgICAgICAgIEFMTE9XRURfVEFHUyA9IGNsb25lKEFMTE9XRURfVEFHUyk7XG4gICAgICAgIH1cblxuICAgICAgICBhZGRUb1NldChBTExPV0VEX1RBR1MsIGNmZy5BRERfVEFHUyk7XG4gICAgICB9XG5cbiAgICAgIGlmIChjZmcuQUREX0FUVFIpIHtcbiAgICAgICAgaWYgKEFMTE9XRURfQVRUUiA9PT0gREVGQVVMVF9BTExPV0VEX0FUVFIpIHtcbiAgICAgICAgICBBTExPV0VEX0FUVFIgPSBjbG9uZShBTExPV0VEX0FUVFIpO1xuICAgICAgICB9XG5cbiAgICAgICAgYWRkVG9TZXQoQUxMT1dFRF9BVFRSLCBjZmcuQUREX0FUVFIpO1xuICAgICAgfVxuXG4gICAgICBpZiAoY2ZnLkFERF9VUklfU0FGRV9BVFRSKSB7XG4gICAgICAgIGFkZFRvU2V0KFVSSV9TQUZFX0FUVFJJQlVURVMsIGNmZy5BRERfVVJJX1NBRkVfQVRUUik7XG4gICAgICB9XG5cbiAgICAgIGlmIChjZmcuRk9SQklEX0NPTlRFTlRTKSB7XG4gICAgICAgIGlmIChGT1JCSURfQ09OVEVOVFMgPT09IERFRkFVTFRfRk9SQklEX0NPTlRFTlRTKSB7XG4gICAgICAgICAgRk9SQklEX0NPTlRFTlRTID0gY2xvbmUoRk9SQklEX0NPTlRFTlRTKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGFkZFRvU2V0KEZPUkJJRF9DT05URU5UUywgY2ZnLkZPUkJJRF9DT05URU5UUyk7XG4gICAgICB9XG5cbiAgICAgIC8qIEFkZCAjdGV4dCBpbiBjYXNlIEtFRVBfQ09OVEVOVCBpcyBzZXQgdG8gdHJ1ZSAqL1xuICAgICAgaWYgKEtFRVBfQ09OVEVOVCkge1xuICAgICAgICBBTExPV0VEX1RBR1NbJyN0ZXh0J10gPSB0cnVlO1xuICAgICAgfVxuXG4gICAgICAvKiBBZGQgaHRtbCwgaGVhZCBhbmQgYm9keSB0byBBTExPV0VEX1RBR1MgaW4gY2FzZSBXSE9MRV9ET0NVTUVOVCBpcyB0cnVlICovXG4gICAgICBpZiAoV0hPTEVfRE9DVU1FTlQpIHtcbiAgICAgICAgYWRkVG9TZXQoQUxMT1dFRF9UQUdTLCBbJ2h0bWwnLCAnaGVhZCcsICdib2R5J10pO1xuICAgICAgfVxuXG4gICAgICAvKiBBZGQgdGJvZHkgdG8gQUxMT1dFRF9UQUdTIGluIGNhc2UgdGFibGVzIGFyZSBwZXJtaXR0ZWQsIHNlZSAjMjg2LCAjMzY1ICovXG4gICAgICBpZiAoQUxMT1dFRF9UQUdTLnRhYmxlKSB7XG4gICAgICAgIGFkZFRvU2V0KEFMTE9XRURfVEFHUywgWyd0Ym9keSddKTtcbiAgICAgICAgZGVsZXRlIEZPUkJJRF9UQUdTLnRib2R5O1xuICAgICAgfVxuXG4gICAgICAvLyBQcmV2ZW50IGZ1cnRoZXIgbWFuaXB1bGF0aW9uIG9mIGNvbmZpZ3VyYXRpb24uXG4gICAgICAvLyBOb3QgYXZhaWxhYmxlIGluIElFOCwgU2FmYXJpIDUsIGV0Yy5cbiAgICAgIGlmIChmcmVlemUpIHtcbiAgICAgICAgZnJlZXplKGNmZyk7XG4gICAgICB9XG5cbiAgICAgIENPTkZJRyA9IGNmZztcbiAgICB9O1xuXG4gICAgdmFyIE1BVEhNTF9URVhUX0lOVEVHUkFUSU9OX1BPSU5UUyA9IGFkZFRvU2V0KHt9LCBbJ21pJywgJ21vJywgJ21uJywgJ21zJywgJ210ZXh0J10pO1xuXG4gICAgdmFyIEhUTUxfSU5URUdSQVRJT05fUE9JTlRTID0gYWRkVG9TZXQoe30sIFsnZm9yZWlnbm9iamVjdCcsICdkZXNjJywgJ3RpdGxlJywgJ2Fubm90YXRpb24teG1sJ10pO1xuXG4gICAgLyogS2VlcCB0cmFjayBvZiBhbGwgcG9zc2libGUgU1ZHIGFuZCBNYXRoTUwgdGFnc1xuICAgICAqIHNvIHRoYXQgd2UgY2FuIHBlcmZvcm0gdGhlIG5hbWVzcGFjZSBjaGVja3NcbiAgICAgKiBjb3JyZWN0bHkuICovXG4gICAgdmFyIEFMTF9TVkdfVEFHUyA9IGFkZFRvU2V0KHt9LCBzdmcpO1xuICAgIGFkZFRvU2V0KEFMTF9TVkdfVEFHUywgc3ZnRmlsdGVycyk7XG4gICAgYWRkVG9TZXQoQUxMX1NWR19UQUdTLCBzdmdEaXNhbGxvd2VkKTtcblxuICAgIHZhciBBTExfTUFUSE1MX1RBR1MgPSBhZGRUb1NldCh7fSwgbWF0aE1sKTtcbiAgICBhZGRUb1NldChBTExfTUFUSE1MX1RBR1MsIG1hdGhNbERpc2FsbG93ZWQpO1xuXG4gICAgLyoqXG4gICAgICpcbiAgICAgKlxuICAgICAqIEBwYXJhbSAge0VsZW1lbnR9IGVsZW1lbnQgYSBET00gZWxlbWVudCB3aG9zZSBuYW1lc3BhY2UgaXMgYmVpbmcgY2hlY2tlZFxuICAgICAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm4gZmFsc2UgaWYgdGhlIGVsZW1lbnQgaGFzIGFcbiAgICAgKiAgbmFtZXNwYWNlIHRoYXQgYSBzcGVjLWNvbXBsaWFudCBwYXJzZXIgd291bGQgbmV2ZXJcbiAgICAgKiAgcmV0dXJuLiBSZXR1cm4gdHJ1ZSBvdGhlcndpc2UuXG4gICAgICovXG4gICAgdmFyIF9jaGVja1ZhbGlkTmFtZXNwYWNlID0gZnVuY3Rpb24gX2NoZWNrVmFsaWROYW1lc3BhY2UoZWxlbWVudCkge1xuICAgICAgdmFyIHBhcmVudCA9IGdldFBhcmVudE5vZGUoZWxlbWVudCk7XG5cbiAgICAgIC8vIEluIEpTRE9NLCBpZiB3ZSdyZSBpbnNpZGUgc2hhZG93IERPTSwgdGhlbiBwYXJlbnROb2RlXG4gICAgICAvLyBjYW4gYmUgbnVsbC4gV2UganVzdCBzaW11bGF0ZSBwYXJlbnQgaW4gdGhpcyBjYXNlLlxuICAgICAgaWYgKCFwYXJlbnQgfHwgIXBhcmVudC50YWdOYW1lKSB7XG4gICAgICAgIHBhcmVudCA9IHtcbiAgICAgICAgICBuYW1lc3BhY2VVUkk6IEhUTUxfTkFNRVNQQUNFLFxuICAgICAgICAgIHRhZ05hbWU6ICd0ZW1wbGF0ZSdcbiAgICAgICAgfTtcbiAgICAgIH1cblxuICAgICAgdmFyIHRhZ05hbWUgPSBzdHJpbmdUb0xvd2VyQ2FzZShlbGVtZW50LnRhZ05hbWUpO1xuICAgICAgdmFyIHBhcmVudFRhZ05hbWUgPSBzdHJpbmdUb0xvd2VyQ2FzZShwYXJlbnQudGFnTmFtZSk7XG5cbiAgICAgIGlmIChlbGVtZW50Lm5hbWVzcGFjZVVSSSA9PT0gU1ZHX05BTUVTUEFDRSkge1xuICAgICAgICAvLyBUaGUgb25seSB3YXkgdG8gc3dpdGNoIGZyb20gSFRNTCBuYW1lc3BhY2UgdG8gU1ZHXG4gICAgICAgIC8vIGlzIHZpYSA8c3ZnPi4gSWYgaXQgaGFwcGVucyB2aWEgYW55IG90aGVyIHRhZywgdGhlblxuICAgICAgICAvLyBpdCBzaG91bGQgYmUga2lsbGVkLlxuICAgICAgICBpZiAocGFyZW50Lm5hbWVzcGFjZVVSSSA9PT0gSFRNTF9OQU1FU1BBQ0UpIHtcbiAgICAgICAgICByZXR1cm4gdGFnTmFtZSA9PT0gJ3N2Zyc7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBUaGUgb25seSB3YXkgdG8gc3dpdGNoIGZyb20gTWF0aE1MIHRvIFNWRyBpcyB2aWFcbiAgICAgICAgLy8gc3ZnIGlmIHBhcmVudCBpcyBlaXRoZXIgPGFubm90YXRpb24teG1sPiBvciBNYXRoTUxcbiAgICAgICAgLy8gdGV4dCBpbnRlZ3JhdGlvbiBwb2ludHMuXG4gICAgICAgIGlmIChwYXJlbnQubmFtZXNwYWNlVVJJID09PSBNQVRITUxfTkFNRVNQQUNFKSB7XG4gICAgICAgICAgcmV0dXJuIHRhZ05hbWUgPT09ICdzdmcnICYmIChwYXJlbnRUYWdOYW1lID09PSAnYW5ub3RhdGlvbi14bWwnIHx8IE1BVEhNTF9URVhUX0lOVEVHUkFUSU9OX1BPSU5UU1twYXJlbnRUYWdOYW1lXSk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBXZSBvbmx5IGFsbG93IGVsZW1lbnRzIHRoYXQgYXJlIGRlZmluZWQgaW4gU1ZHXG4gICAgICAgIC8vIHNwZWMuIEFsbCBvdGhlcnMgYXJlIGRpc2FsbG93ZWQgaW4gU1ZHIG5hbWVzcGFjZS5cbiAgICAgICAgcmV0dXJuIEJvb2xlYW4oQUxMX1NWR19UQUdTW3RhZ05hbWVdKTtcbiAgICAgIH1cblxuICAgICAgaWYgKGVsZW1lbnQubmFtZXNwYWNlVVJJID09PSBNQVRITUxfTkFNRVNQQUNFKSB7XG4gICAgICAgIC8vIFRoZSBvbmx5IHdheSB0byBzd2l0Y2ggZnJvbSBIVE1MIG5hbWVzcGFjZSB0byBNYXRoTUxcbiAgICAgICAgLy8gaXMgdmlhIDxtYXRoPi4gSWYgaXQgaGFwcGVucyB2aWEgYW55IG90aGVyIHRhZywgdGhlblxuICAgICAgICAvLyBpdCBzaG91bGQgYmUga2lsbGVkLlxuICAgICAgICBpZiAocGFyZW50Lm5hbWVzcGFjZVVSSSA9PT0gSFRNTF9OQU1FU1BBQ0UpIHtcbiAgICAgICAgICByZXR1cm4gdGFnTmFtZSA9PT0gJ21hdGgnO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gVGhlIG9ubHkgd2F5IHRvIHN3aXRjaCBmcm9tIFNWRyB0byBNYXRoTUwgaXMgdmlhXG4gICAgICAgIC8vIDxtYXRoPiBhbmQgSFRNTCBpbnRlZ3JhdGlvbiBwb2ludHNcbiAgICAgICAgaWYgKHBhcmVudC5uYW1lc3BhY2VVUkkgPT09IFNWR19OQU1FU1BBQ0UpIHtcbiAgICAgICAgICByZXR1cm4gdGFnTmFtZSA9PT0gJ21hdGgnICYmIEhUTUxfSU5URUdSQVRJT05fUE9JTlRTW3BhcmVudFRhZ05hbWVdO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gV2Ugb25seSBhbGxvdyBlbGVtZW50cyB0aGF0IGFyZSBkZWZpbmVkIGluIE1hdGhNTFxuICAgICAgICAvLyBzcGVjLiBBbGwgb3RoZXJzIGFyZSBkaXNhbGxvd2VkIGluIE1hdGhNTCBuYW1lc3BhY2UuXG4gICAgICAgIHJldHVybiBCb29sZWFuKEFMTF9NQVRITUxfVEFHU1t0YWdOYW1lXSk7XG4gICAgICB9XG5cbiAgICAgIGlmIChlbGVtZW50Lm5hbWVzcGFjZVVSSSA9PT0gSFRNTF9OQU1FU1BBQ0UpIHtcbiAgICAgICAgLy8gVGhlIG9ubHkgd2F5IHRvIHN3aXRjaCBmcm9tIFNWRyB0byBIVE1MIGlzIHZpYVxuICAgICAgICAvLyBIVE1MIGludGVncmF0aW9uIHBvaW50cywgYW5kIGZyb20gTWF0aE1MIHRvIEhUTUxcbiAgICAgICAgLy8gaXMgdmlhIE1hdGhNTCB0ZXh0IGludGVncmF0aW9uIHBvaW50c1xuICAgICAgICBpZiAocGFyZW50Lm5hbWVzcGFjZVVSSSA9PT0gU1ZHX05BTUVTUEFDRSAmJiAhSFRNTF9JTlRFR1JBVElPTl9QT0lOVFNbcGFyZW50VGFnTmFtZV0pIHtcbiAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAocGFyZW50Lm5hbWVzcGFjZVVSSSA9PT0gTUFUSE1MX05BTUVTUEFDRSAmJiAhTUFUSE1MX1RFWFRfSU5URUdSQVRJT05fUE9JTlRTW3BhcmVudFRhZ05hbWVdKSB7XG4gICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gQ2VydGFpbiBlbGVtZW50cyBhcmUgYWxsb3dlZCBpbiBib3RoIFNWRyBhbmQgSFRNTFxuICAgICAgICAvLyBuYW1lc3BhY2UuIFdlIG5lZWQgdG8gc3BlY2lmeSB0aGVtIGV4cGxpY2l0bHlcbiAgICAgICAgLy8gc28gdGhhdCB0aGV5IGRvbid0IGdldCBlcnJvbm91c2x5IGRlbGV0ZWQgZnJvbVxuICAgICAgICAvLyBIVE1MIG5hbWVzcGFjZS5cbiAgICAgICAgdmFyIGNvbW1vblN2Z0FuZEhUTUxFbGVtZW50cyA9IGFkZFRvU2V0KHt9LCBbJ3RpdGxlJywgJ3N0eWxlJywgJ2ZvbnQnLCAnYScsICdzY3JpcHQnXSk7XG5cbiAgICAgICAgLy8gV2UgZGlzYWxsb3cgdGFncyB0aGF0IGFyZSBzcGVjaWZpYyBmb3IgTWF0aE1MXG4gICAgICAgIC8vIG9yIFNWRyBhbmQgc2hvdWxkIG5ldmVyIGFwcGVhciBpbiBIVE1MIG5hbWVzcGFjZVxuICAgICAgICByZXR1cm4gIUFMTF9NQVRITUxfVEFHU1t0YWdOYW1lXSAmJiAoY29tbW9uU3ZnQW5kSFRNTEVsZW1lbnRzW3RhZ05hbWVdIHx8ICFBTExfU1ZHX1RBR1NbdGFnTmFtZV0pO1xuICAgICAgfVxuXG4gICAgICAvLyBUaGUgY29kZSBzaG91bGQgbmV2ZXIgcmVhY2ggdGhpcyBwbGFjZSAodGhpcyBtZWFuc1xuICAgICAgLy8gdGhhdCB0aGUgZWxlbWVudCBzb21laG93IGdvdCBuYW1lc3BhY2UgdGhhdCBpcyBub3RcbiAgICAgIC8vIEhUTUwsIFNWRyBvciBNYXRoTUwpLiBSZXR1cm4gZmFsc2UganVzdCBpbiBjYXNlLlxuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBfZm9yY2VSZW1vdmVcbiAgICAgKlxuICAgICAqIEBwYXJhbSAge05vZGV9IG5vZGUgYSBET00gbm9kZVxuICAgICAqL1xuICAgIHZhciBfZm9yY2VSZW1vdmUgPSBmdW5jdGlvbiBfZm9yY2VSZW1vdmUobm9kZSkge1xuICAgICAgYXJyYXlQdXNoKERPTVB1cmlmeS5yZW1vdmVkLCB7IGVsZW1lbnQ6IG5vZGUgfSk7XG4gICAgICB0cnkge1xuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgdW5pY29ybi9wcmVmZXItZG9tLW5vZGUtcmVtb3ZlXG4gICAgICAgIG5vZGUucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChub2RlKTtcbiAgICAgIH0gY2F0Y2ggKF8pIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBub2RlLm91dGVySFRNTCA9IGVtcHR5SFRNTDtcbiAgICAgICAgfSBjYXRjaCAoXykge1xuICAgICAgICAgIG5vZGUucmVtb3ZlKCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogX3JlbW92ZUF0dHJpYnV0ZVxuICAgICAqXG4gICAgICogQHBhcmFtICB7U3RyaW5nfSBuYW1lIGFuIEF0dHJpYnV0ZSBuYW1lXG4gICAgICogQHBhcmFtICB7Tm9kZX0gbm9kZSBhIERPTSBub2RlXG4gICAgICovXG4gICAgdmFyIF9yZW1vdmVBdHRyaWJ1dGUgPSBmdW5jdGlvbiBfcmVtb3ZlQXR0cmlidXRlKG5hbWUsIG5vZGUpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGFycmF5UHVzaChET01QdXJpZnkucmVtb3ZlZCwge1xuICAgICAgICAgIGF0dHJpYnV0ZTogbm9kZS5nZXRBdHRyaWJ1dGVOb2RlKG5hbWUpLFxuICAgICAgICAgIGZyb206IG5vZGVcbiAgICAgICAgfSk7XG4gICAgICB9IGNhdGNoIChfKSB7XG4gICAgICAgIGFycmF5UHVzaChET01QdXJpZnkucmVtb3ZlZCwge1xuICAgICAgICAgIGF0dHJpYnV0ZTogbnVsbCxcbiAgICAgICAgICBmcm9tOiBub2RlXG4gICAgICAgIH0pO1xuICAgICAgfVxuXG4gICAgICBub2RlLnJlbW92ZUF0dHJpYnV0ZShuYW1lKTtcblxuICAgICAgLy8gV2Ugdm9pZCBhdHRyaWJ1dGUgdmFsdWVzIGZvciB1bnJlbW92YWJsZSBcImlzXCJcIiBhdHRyaWJ1dGVzXG4gICAgICBpZiAobmFtZSA9PT0gJ2lzJyAmJiAhQUxMT1dFRF9BVFRSW25hbWVdKSB7XG4gICAgICAgIGlmIChSRVRVUk5fRE9NIHx8IFJFVFVSTl9ET01fRlJBR01FTlQpIHtcbiAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgX2ZvcmNlUmVtb3ZlKG5vZGUpO1xuICAgICAgICAgIH0gY2F0Y2ggKF8pIHt9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIG5vZGUuc2V0QXR0cmlidXRlKG5hbWUsICcnKTtcbiAgICAgICAgICB9IGNhdGNoIChfKSB7fVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIF9pbml0RG9jdW1lbnRcbiAgICAgKlxuICAgICAqIEBwYXJhbSAge1N0cmluZ30gZGlydHkgYSBzdHJpbmcgb2YgZGlydHkgbWFya3VwXG4gICAgICogQHJldHVybiB7RG9jdW1lbnR9IGEgRE9NLCBmaWxsZWQgd2l0aCB0aGUgZGlydHkgbWFya3VwXG4gICAgICovXG4gICAgdmFyIF9pbml0RG9jdW1lbnQgPSBmdW5jdGlvbiBfaW5pdERvY3VtZW50KGRpcnR5KSB7XG4gICAgICAvKiBDcmVhdGUgYSBIVE1MIGRvY3VtZW50ICovXG4gICAgICB2YXIgZG9jID0gdm9pZCAwO1xuICAgICAgdmFyIGxlYWRpbmdXaGl0ZXNwYWNlID0gdm9pZCAwO1xuXG4gICAgICBpZiAoRk9SQ0VfQk9EWSkge1xuICAgICAgICBkaXJ0eSA9ICc8cmVtb3ZlPjwvcmVtb3ZlPicgKyBkaXJ0eTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8qIElmIEZPUkNFX0JPRFkgaXNuJ3QgdXNlZCwgbGVhZGluZyB3aGl0ZXNwYWNlIG5lZWRzIHRvIGJlIHByZXNlcnZlZCBtYW51YWxseSAqL1xuICAgICAgICB2YXIgbWF0Y2hlcyA9IHN0cmluZ01hdGNoKGRpcnR5LCAvXltcXHJcXG5cXHQgXSsvKTtcbiAgICAgICAgbGVhZGluZ1doaXRlc3BhY2UgPSBtYXRjaGVzICYmIG1hdGNoZXNbMF07XG4gICAgICB9XG5cbiAgICAgIGlmIChQQVJTRVJfTUVESUFfVFlQRSA9PT0gJ2FwcGxpY2F0aW9uL3hodG1sK3htbCcpIHtcbiAgICAgICAgLy8gUm9vdCBvZiBYSFRNTCBkb2MgbXVzdCBjb250YWluIHhtbG5zIGRlY2xhcmF0aW9uIChzZWUgaHR0cHM6Ly93d3cudzMub3JnL1RSL3hodG1sMS9ub3JtYXRpdmUuaHRtbCNzdHJpY3QpXG4gICAgICAgIGRpcnR5ID0gJzxodG1sIHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMTk5OS94aHRtbFwiPjxoZWFkPjwvaGVhZD48Ym9keT4nICsgZGlydHkgKyAnPC9ib2R5PjwvaHRtbD4nO1xuICAgICAgfVxuXG4gICAgICB2YXIgZGlydHlQYXlsb2FkID0gdHJ1c3RlZFR5cGVzUG9saWN5ID8gdHJ1c3RlZFR5cGVzUG9saWN5LmNyZWF0ZUhUTUwoZGlydHkpIDogZGlydHk7XG4gICAgICAvKlxuICAgICAgICogVXNlIHRoZSBET01QYXJzZXIgQVBJIGJ5IGRlZmF1bHQsIGZhbGxiYWNrIGxhdGVyIGlmIG5lZWRzIGJlXG4gICAgICAgKiBET01QYXJzZXIgbm90IHdvcmsgZm9yIHN2ZyB3aGVuIGhhcyBtdWx0aXBsZSByb290IGVsZW1lbnQuXG4gICAgICAgKi9cbiAgICAgIGlmIChOQU1FU1BBQ0UgPT09IEhUTUxfTkFNRVNQQUNFKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgZG9jID0gbmV3IERPTVBhcnNlcigpLnBhcnNlRnJvbVN0cmluZyhkaXJ0eVBheWxvYWQsIFBBUlNFUl9NRURJQV9UWVBFKTtcbiAgICAgICAgfSBjYXRjaCAoXykge31cbiAgICAgIH1cblxuICAgICAgLyogVXNlIGNyZWF0ZUhUTUxEb2N1bWVudCBpbiBjYXNlIERPTVBhcnNlciBpcyBub3QgYXZhaWxhYmxlICovXG4gICAgICBpZiAoIWRvYyB8fCAhZG9jLmRvY3VtZW50RWxlbWVudCkge1xuICAgICAgICBkb2MgPSBpbXBsZW1lbnRhdGlvbi5jcmVhdGVEb2N1bWVudChOQU1FU1BBQ0UsICd0ZW1wbGF0ZScsIG51bGwpO1xuICAgICAgICB0cnkge1xuICAgICAgICAgIGRvYy5kb2N1bWVudEVsZW1lbnQuaW5uZXJIVE1MID0gSVNfRU1QVFlfSU5QVVQgPyAnJyA6IGRpcnR5UGF5bG9hZDtcbiAgICAgICAgfSBjYXRjaCAoXykge1xuICAgICAgICAgIC8vIFN5bnRheCBlcnJvciBpZiBkaXJ0eVBheWxvYWQgaXMgaW52YWxpZCB4bWxcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICB2YXIgYm9keSA9IGRvYy5ib2R5IHx8IGRvYy5kb2N1bWVudEVsZW1lbnQ7XG5cbiAgICAgIGlmIChkaXJ0eSAmJiBsZWFkaW5nV2hpdGVzcGFjZSkge1xuICAgICAgICBib2R5Lmluc2VydEJlZm9yZShkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShsZWFkaW5nV2hpdGVzcGFjZSksIGJvZHkuY2hpbGROb2Rlc1swXSB8fCBudWxsKTtcbiAgICAgIH1cblxuICAgICAgLyogV29yayBvbiB3aG9sZSBkb2N1bWVudCBvciBqdXN0IGl0cyBib2R5ICovXG4gICAgICBpZiAoTkFNRVNQQUNFID09PSBIVE1MX05BTUVTUEFDRSkge1xuICAgICAgICByZXR1cm4gZ2V0RWxlbWVudHNCeVRhZ05hbWUuY2FsbChkb2MsIFdIT0xFX0RPQ1VNRU5UID8gJ2h0bWwnIDogJ2JvZHknKVswXTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIFdIT0xFX0RPQ1VNRU5UID8gZG9jLmRvY3VtZW50RWxlbWVudCA6IGJvZHk7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIF9jcmVhdGVJdGVyYXRvclxuICAgICAqXG4gICAgICogQHBhcmFtICB7RG9jdW1lbnR9IHJvb3QgZG9jdW1lbnQvZnJhZ21lbnQgdG8gY3JlYXRlIGl0ZXJhdG9yIGZvclxuICAgICAqIEByZXR1cm4ge0l0ZXJhdG9yfSBpdGVyYXRvciBpbnN0YW5jZVxuICAgICAqL1xuICAgIHZhciBfY3JlYXRlSXRlcmF0b3IgPSBmdW5jdGlvbiBfY3JlYXRlSXRlcmF0b3Iocm9vdCkge1xuICAgICAgcmV0dXJuIGNyZWF0ZU5vZGVJdGVyYXRvci5jYWxsKHJvb3Qub3duZXJEb2N1bWVudCB8fCByb290LCByb290LCBOb2RlRmlsdGVyLlNIT1dfRUxFTUVOVCB8IE5vZGVGaWx0ZXIuU0hPV19DT01NRU5UIHwgTm9kZUZpbHRlci5TSE9XX1RFWFQsIG51bGwsIGZhbHNlKTtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogX2lzQ2xvYmJlcmVkXG4gICAgICpcbiAgICAgKiBAcGFyYW0gIHtOb2RlfSBlbG0gZWxlbWVudCB0byBjaGVjayBmb3IgY2xvYmJlcmluZyBhdHRhY2tzXG4gICAgICogQHJldHVybiB7Qm9vbGVhbn0gdHJ1ZSBpZiBjbG9iYmVyZWQsIGZhbHNlIGlmIHNhZmVcbiAgICAgKi9cbiAgICB2YXIgX2lzQ2xvYmJlcmVkID0gZnVuY3Rpb24gX2lzQ2xvYmJlcmVkKGVsbSkge1xuICAgICAgcmV0dXJuIGVsbSBpbnN0YW5jZW9mIEhUTUxGb3JtRWxlbWVudCAmJiAodHlwZW9mIGVsbS5ub2RlTmFtZSAhPT0gJ3N0cmluZycgfHwgdHlwZW9mIGVsbS50ZXh0Q29udGVudCAhPT0gJ3N0cmluZycgfHwgdHlwZW9mIGVsbS5yZW1vdmVDaGlsZCAhPT0gJ2Z1bmN0aW9uJyB8fCAhKGVsbS5hdHRyaWJ1dGVzIGluc3RhbmNlb2YgTmFtZWROb2RlTWFwKSB8fCB0eXBlb2YgZWxtLnJlbW92ZUF0dHJpYnV0ZSAhPT0gJ2Z1bmN0aW9uJyB8fCB0eXBlb2YgZWxtLnNldEF0dHJpYnV0ZSAhPT0gJ2Z1bmN0aW9uJyB8fCB0eXBlb2YgZWxtLm5hbWVzcGFjZVVSSSAhPT0gJ3N0cmluZycgfHwgdHlwZW9mIGVsbS5pbnNlcnRCZWZvcmUgIT09ICdmdW5jdGlvbicpO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBfaXNOb2RlXG4gICAgICpcbiAgICAgKiBAcGFyYW0gIHtOb2RlfSBvYmogb2JqZWN0IHRvIGNoZWNrIHdoZXRoZXIgaXQncyBhIERPTSBub2RlXG4gICAgICogQHJldHVybiB7Qm9vbGVhbn0gdHJ1ZSBpcyBvYmplY3QgaXMgYSBET00gbm9kZVxuICAgICAqL1xuICAgIHZhciBfaXNOb2RlID0gZnVuY3Rpb24gX2lzTm9kZShvYmplY3QpIHtcbiAgICAgIHJldHVybiAodHlwZW9mIE5vZGUgPT09ICd1bmRlZmluZWQnID8gJ3VuZGVmaW5lZCcgOiBfdHlwZW9mKE5vZGUpKSA9PT0gJ29iamVjdCcgPyBvYmplY3QgaW5zdGFuY2VvZiBOb2RlIDogb2JqZWN0ICYmICh0eXBlb2Ygb2JqZWN0ID09PSAndW5kZWZpbmVkJyA/ICd1bmRlZmluZWQnIDogX3R5cGVvZihvYmplY3QpKSA9PT0gJ29iamVjdCcgJiYgdHlwZW9mIG9iamVjdC5ub2RlVHlwZSA9PT0gJ251bWJlcicgJiYgdHlwZW9mIG9iamVjdC5ub2RlTmFtZSA9PT0gJ3N0cmluZyc7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIF9leGVjdXRlSG9va1xuICAgICAqIEV4ZWN1dGUgdXNlciBjb25maWd1cmFibGUgaG9va3NcbiAgICAgKlxuICAgICAqIEBwYXJhbSAge1N0cmluZ30gZW50cnlQb2ludCAgTmFtZSBvZiB0aGUgaG9vaydzIGVudHJ5IHBvaW50XG4gICAgICogQHBhcmFtICB7Tm9kZX0gY3VycmVudE5vZGUgbm9kZSB0byB3b3JrIG9uIHdpdGggdGhlIGhvb2tcbiAgICAgKiBAcGFyYW0gIHtPYmplY3R9IGRhdGEgYWRkaXRpb25hbCBob29rIHBhcmFtZXRlcnNcbiAgICAgKi9cbiAgICB2YXIgX2V4ZWN1dGVIb29rID0gZnVuY3Rpb24gX2V4ZWN1dGVIb29rKGVudHJ5UG9pbnQsIGN1cnJlbnROb2RlLCBkYXRhKSB7XG4gICAgICBpZiAoIWhvb2tzW2VudHJ5UG9pbnRdKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgYXJyYXlGb3JFYWNoKGhvb2tzW2VudHJ5UG9pbnRdLCBmdW5jdGlvbiAoaG9vaykge1xuICAgICAgICBob29rLmNhbGwoRE9NUHVyaWZ5LCBjdXJyZW50Tm9kZSwgZGF0YSwgQ09ORklHKTtcbiAgICAgIH0pO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBfc2FuaXRpemVFbGVtZW50c1xuICAgICAqXG4gICAgICogQHByb3RlY3Qgbm9kZU5hbWVcbiAgICAgKiBAcHJvdGVjdCB0ZXh0Q29udGVudFxuICAgICAqIEBwcm90ZWN0IHJlbW92ZUNoaWxkXG4gICAgICpcbiAgICAgKiBAcGFyYW0gICB7Tm9kZX0gY3VycmVudE5vZGUgdG8gY2hlY2sgZm9yIHBlcm1pc3Npb24gdG8gZXhpc3RcbiAgICAgKiBAcmV0dXJuICB7Qm9vbGVhbn0gdHJ1ZSBpZiBub2RlIHdhcyBraWxsZWQsIGZhbHNlIGlmIGxlZnQgYWxpdmVcbiAgICAgKi9cbiAgICB2YXIgX3Nhbml0aXplRWxlbWVudHMgPSBmdW5jdGlvbiBfc2FuaXRpemVFbGVtZW50cyhjdXJyZW50Tm9kZSkge1xuICAgICAgdmFyIGNvbnRlbnQgPSB2b2lkIDA7XG5cbiAgICAgIC8qIEV4ZWN1dGUgYSBob29rIGlmIHByZXNlbnQgKi9cbiAgICAgIF9leGVjdXRlSG9vaygnYmVmb3JlU2FuaXRpemVFbGVtZW50cycsIGN1cnJlbnROb2RlLCBudWxsKTtcblxuICAgICAgLyogQ2hlY2sgaWYgZWxlbWVudCBpcyBjbG9iYmVyZWQgb3IgY2FuIGNsb2JiZXIgKi9cbiAgICAgIGlmIChfaXNDbG9iYmVyZWQoY3VycmVudE5vZGUpKSB7XG4gICAgICAgIF9mb3JjZVJlbW92ZShjdXJyZW50Tm9kZSk7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfVxuXG4gICAgICAvKiBDaGVjayBpZiB0YWduYW1lIGNvbnRhaW5zIFVuaWNvZGUgKi9cbiAgICAgIGlmIChzdHJpbmdNYXRjaChjdXJyZW50Tm9kZS5ub2RlTmFtZSwgL1tcXHUwMDgwLVxcdUZGRkZdLykpIHtcbiAgICAgICAgX2ZvcmNlUmVtb3ZlKGN1cnJlbnROb2RlKTtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9XG5cbiAgICAgIC8qIE5vdyBsZXQncyBjaGVjayB0aGUgZWxlbWVudCdzIHR5cGUgYW5kIG5hbWUgKi9cbiAgICAgIHZhciB0YWdOYW1lID0gdHJhbnNmb3JtQ2FzZUZ1bmMoY3VycmVudE5vZGUubm9kZU5hbWUpO1xuXG4gICAgICAvKiBFeGVjdXRlIGEgaG9vayBpZiBwcmVzZW50ICovXG4gICAgICBfZXhlY3V0ZUhvb2soJ3Vwb25TYW5pdGl6ZUVsZW1lbnQnLCBjdXJyZW50Tm9kZSwge1xuICAgICAgICB0YWdOYW1lOiB0YWdOYW1lLFxuICAgICAgICBhbGxvd2VkVGFnczogQUxMT1dFRF9UQUdTXG4gICAgICB9KTtcblxuICAgICAgLyogRGV0ZWN0IG1YU1MgYXR0ZW1wdHMgYWJ1c2luZyBuYW1lc3BhY2UgY29uZnVzaW9uICovXG4gICAgICBpZiAoIV9pc05vZGUoY3VycmVudE5vZGUuZmlyc3RFbGVtZW50Q2hpbGQpICYmICghX2lzTm9kZShjdXJyZW50Tm9kZS5jb250ZW50KSB8fCAhX2lzTm9kZShjdXJyZW50Tm9kZS5jb250ZW50LmZpcnN0RWxlbWVudENoaWxkKSkgJiYgcmVnRXhwVGVzdCgvPFsvXFx3XS9nLCBjdXJyZW50Tm9kZS5pbm5lckhUTUwpICYmIHJlZ0V4cFRlc3QoLzxbL1xcd10vZywgY3VycmVudE5vZGUudGV4dENvbnRlbnQpKSB7XG4gICAgICAgIF9mb3JjZVJlbW92ZShjdXJyZW50Tm9kZSk7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfVxuXG4gICAgICAvKiBNaXRpZ2F0ZSBhIHByb2JsZW0gd2l0aCB0ZW1wbGF0ZXMgaW5zaWRlIHNlbGVjdCAqL1xuICAgICAgaWYgKHRhZ05hbWUgPT09ICdzZWxlY3QnICYmIHJlZ0V4cFRlc3QoLzx0ZW1wbGF0ZS9pLCBjdXJyZW50Tm9kZS5pbm5lckhUTUwpKSB7XG4gICAgICAgIF9mb3JjZVJlbW92ZShjdXJyZW50Tm9kZSk7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfVxuXG4gICAgICAvKiBSZW1vdmUgZWxlbWVudCBpZiBhbnl0aGluZyBmb3JiaWRzIGl0cyBwcmVzZW5jZSAqL1xuICAgICAgaWYgKCFBTExPV0VEX1RBR1NbdGFnTmFtZV0gfHwgRk9SQklEX1RBR1NbdGFnTmFtZV0pIHtcbiAgICAgICAgLyogS2VlcCBjb250ZW50IGV4Y2VwdCBmb3IgYmFkLWxpc3RlZCBlbGVtZW50cyAqL1xuICAgICAgICBpZiAoS0VFUF9DT05URU5UICYmICFGT1JCSURfQ09OVEVOVFNbdGFnTmFtZV0pIHtcbiAgICAgICAgICB2YXIgcGFyZW50Tm9kZSA9IGdldFBhcmVudE5vZGUoY3VycmVudE5vZGUpIHx8IGN1cnJlbnROb2RlLnBhcmVudE5vZGU7XG4gICAgICAgICAgdmFyIGNoaWxkTm9kZXMgPSBnZXRDaGlsZE5vZGVzKGN1cnJlbnROb2RlKSB8fCBjdXJyZW50Tm9kZS5jaGlsZE5vZGVzO1xuXG4gICAgICAgICAgaWYgKGNoaWxkTm9kZXMgJiYgcGFyZW50Tm9kZSkge1xuICAgICAgICAgICAgdmFyIGNoaWxkQ291bnQgPSBjaGlsZE5vZGVzLmxlbmd0aDtcblxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IGNoaWxkQ291bnQgLSAxOyBpID49IDA7IC0taSkge1xuICAgICAgICAgICAgICBwYXJlbnROb2RlLmluc2VydEJlZm9yZShjbG9uZU5vZGUoY2hpbGROb2Rlc1tpXSwgdHJ1ZSksIGdldE5leHRTaWJsaW5nKGN1cnJlbnROb2RlKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCFGT1JCSURfVEFHU1t0YWdOYW1lXSAmJiBfYmFzaWNDdXN0b21FbGVtZW50VGVzdCh0YWdOYW1lKSkge1xuICAgICAgICAgIGlmIChDVVNUT01fRUxFTUVOVF9IQU5ETElORy50YWdOYW1lQ2hlY2sgaW5zdGFuY2VvZiBSZWdFeHAgJiYgcmVnRXhwVGVzdChDVVNUT01fRUxFTUVOVF9IQU5ETElORy50YWdOYW1lQ2hlY2ssIHRhZ05hbWUpKSByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgaWYgKENVU1RPTV9FTEVNRU5UX0hBTkRMSU5HLnRhZ05hbWVDaGVjayBpbnN0YW5jZW9mIEZ1bmN0aW9uICYmIENVU1RPTV9FTEVNRU5UX0hBTkRMSU5HLnRhZ05hbWVDaGVjayh0YWdOYW1lKSkgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG5cbiAgICAgICAgX2ZvcmNlUmVtb3ZlKGN1cnJlbnROb2RlKTtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9XG5cbiAgICAgIC8qIENoZWNrIHdoZXRoZXIgZWxlbWVudCBoYXMgYSB2YWxpZCBuYW1lc3BhY2UgKi9cbiAgICAgIGlmIChjdXJyZW50Tm9kZSBpbnN0YW5jZW9mIEVsZW1lbnQgJiYgIV9jaGVja1ZhbGlkTmFtZXNwYWNlKGN1cnJlbnROb2RlKSkge1xuICAgICAgICBfZm9yY2VSZW1vdmUoY3VycmVudE5vZGUpO1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH1cblxuICAgICAgaWYgKCh0YWdOYW1lID09PSAnbm9zY3JpcHQnIHx8IHRhZ05hbWUgPT09ICdub2VtYmVkJykgJiYgcmVnRXhwVGVzdCgvPFxcL25vKHNjcmlwdHxlbWJlZCkvaSwgY3VycmVudE5vZGUuaW5uZXJIVE1MKSkge1xuICAgICAgICBfZm9yY2VSZW1vdmUoY3VycmVudE5vZGUpO1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH1cblxuICAgICAgLyogU2FuaXRpemUgZWxlbWVudCBjb250ZW50IHRvIGJlIHRlbXBsYXRlLXNhZmUgKi9cbiAgICAgIGlmIChTQUZFX0ZPUl9URU1QTEFURVMgJiYgY3VycmVudE5vZGUubm9kZVR5cGUgPT09IDMpIHtcbiAgICAgICAgLyogR2V0IHRoZSBlbGVtZW50J3MgdGV4dCBjb250ZW50ICovXG4gICAgICAgIGNvbnRlbnQgPSBjdXJyZW50Tm9kZS50ZXh0Q29udGVudDtcbiAgICAgICAgY29udGVudCA9IHN0cmluZ1JlcGxhY2UoY29udGVudCwgTVVTVEFDSEVfRVhQUiQkMSwgJyAnKTtcbiAgICAgICAgY29udGVudCA9IHN0cmluZ1JlcGxhY2UoY29udGVudCwgRVJCX0VYUFIkJDEsICcgJyk7XG4gICAgICAgIGlmIChjdXJyZW50Tm9kZS50ZXh0Q29udGVudCAhPT0gY29udGVudCkge1xuICAgICAgICAgIGFycmF5UHVzaChET01QdXJpZnkucmVtb3ZlZCwgeyBlbGVtZW50OiBjdXJyZW50Tm9kZS5jbG9uZU5vZGUoKSB9KTtcbiAgICAgICAgICBjdXJyZW50Tm9kZS50ZXh0Q29udGVudCA9IGNvbnRlbnQ7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLyogRXhlY3V0ZSBhIGhvb2sgaWYgcHJlc2VudCAqL1xuICAgICAgX2V4ZWN1dGVIb29rKCdhZnRlclNhbml0aXplRWxlbWVudHMnLCBjdXJyZW50Tm9kZSwgbnVsbCk7XG5cbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogX2lzVmFsaWRBdHRyaWJ1dGVcbiAgICAgKlxuICAgICAqIEBwYXJhbSAge3N0cmluZ30gbGNUYWcgTG93ZXJjYXNlIHRhZyBuYW1lIG9mIGNvbnRhaW5pbmcgZWxlbWVudC5cbiAgICAgKiBAcGFyYW0gIHtzdHJpbmd9IGxjTmFtZSBMb3dlcmNhc2UgYXR0cmlidXRlIG5hbWUuXG4gICAgICogQHBhcmFtICB7c3RyaW5nfSB2YWx1ZSBBdHRyaWJ1dGUgdmFsdWUuXG4gICAgICogQHJldHVybiB7Qm9vbGVhbn0gUmV0dXJucyB0cnVlIGlmIGB2YWx1ZWAgaXMgdmFsaWQsIG90aGVyd2lzZSBmYWxzZS5cbiAgICAgKi9cbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgY29tcGxleGl0eVxuICAgIHZhciBfaXNWYWxpZEF0dHJpYnV0ZSA9IGZ1bmN0aW9uIF9pc1ZhbGlkQXR0cmlidXRlKGxjVGFnLCBsY05hbWUsIHZhbHVlKSB7XG4gICAgICAvKiBNYWtlIHN1cmUgYXR0cmlidXRlIGNhbm5vdCBjbG9iYmVyICovXG4gICAgICBpZiAoU0FOSVRJWkVfRE9NICYmIChsY05hbWUgPT09ICdpZCcgfHwgbGNOYW1lID09PSAnbmFtZScpICYmICh2YWx1ZSBpbiBkb2N1bWVudCB8fCB2YWx1ZSBpbiBmb3JtRWxlbWVudCkpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuXG4gICAgICAvKiBBbGxvdyB2YWxpZCBkYXRhLSogYXR0cmlidXRlczogQXQgbGVhc3Qgb25lIGNoYXJhY3RlciBhZnRlciBcIi1cIlxuICAgICAgICAgIChodHRwczovL2h0bWwuc3BlYy53aGF0d2cub3JnL211bHRpcGFnZS9kb20uaHRtbCNlbWJlZGRpbmctY3VzdG9tLW5vbi12aXNpYmxlLWRhdGEtd2l0aC10aGUtZGF0YS0qLWF0dHJpYnV0ZXMpXG4gICAgICAgICAgWE1MLWNvbXBhdGlibGUgKGh0dHBzOi8vaHRtbC5zcGVjLndoYXR3Zy5vcmcvbXVsdGlwYWdlL2luZnJhc3RydWN0dXJlLmh0bWwjeG1sLWNvbXBhdGlibGUgYW5kIGh0dHA6Ly93d3cudzMub3JnL1RSL3htbC8jZDBlODA0KVxuICAgICAgICAgIFdlIGRvbid0IG5lZWQgdG8gY2hlY2sgdGhlIHZhbHVlOyBpdCdzIGFsd2F5cyBVUkkgc2FmZS4gKi9cbiAgICAgIGlmIChBTExPV19EQVRBX0FUVFIgJiYgIUZPUkJJRF9BVFRSW2xjTmFtZV0gJiYgcmVnRXhwVGVzdChEQVRBX0FUVFIkJDEsIGxjTmFtZSkpIDsgZWxzZSBpZiAoQUxMT1dfQVJJQV9BVFRSICYmIHJlZ0V4cFRlc3QoQVJJQV9BVFRSJCQxLCBsY05hbWUpKSA7IGVsc2UgaWYgKCFBTExPV0VEX0FUVFJbbGNOYW1lXSB8fCBGT1JCSURfQVRUUltsY05hbWVdKSB7XG4gICAgICAgIGlmIChcbiAgICAgICAgLy8gRmlyc3QgY29uZGl0aW9uIGRvZXMgYSB2ZXJ5IGJhc2ljIGNoZWNrIGlmIGEpIGl0J3MgYmFzaWNhbGx5IGEgdmFsaWQgY3VzdG9tIGVsZW1lbnQgdGFnbmFtZSBBTkRcbiAgICAgICAgLy8gYikgaWYgdGhlIHRhZ05hbWUgcGFzc2VzIHdoYXRldmVyIHRoZSB1c2VyIGhhcyBjb25maWd1cmVkIGZvciBDVVNUT01fRUxFTUVOVF9IQU5ETElORy50YWdOYW1lQ2hlY2tcbiAgICAgICAgLy8gYW5kIGMpIGlmIHRoZSBhdHRyaWJ1dGUgbmFtZSBwYXNzZXMgd2hhdGV2ZXIgdGhlIHVzZXIgaGFzIGNvbmZpZ3VyZWQgZm9yIENVU1RPTV9FTEVNRU5UX0hBTkRMSU5HLmF0dHJpYnV0ZU5hbWVDaGVja1xuICAgICAgICBfYmFzaWNDdXN0b21FbGVtZW50VGVzdChsY1RhZykgJiYgKENVU1RPTV9FTEVNRU5UX0hBTkRMSU5HLnRhZ05hbWVDaGVjayBpbnN0YW5jZW9mIFJlZ0V4cCAmJiByZWdFeHBUZXN0KENVU1RPTV9FTEVNRU5UX0hBTkRMSU5HLnRhZ05hbWVDaGVjaywgbGNUYWcpIHx8IENVU1RPTV9FTEVNRU5UX0hBTkRMSU5HLnRhZ05hbWVDaGVjayBpbnN0YW5jZW9mIEZ1bmN0aW9uICYmIENVU1RPTV9FTEVNRU5UX0hBTkRMSU5HLnRhZ05hbWVDaGVjayhsY1RhZykpICYmIChDVVNUT01fRUxFTUVOVF9IQU5ETElORy5hdHRyaWJ1dGVOYW1lQ2hlY2sgaW5zdGFuY2VvZiBSZWdFeHAgJiYgcmVnRXhwVGVzdChDVVNUT01fRUxFTUVOVF9IQU5ETElORy5hdHRyaWJ1dGVOYW1lQ2hlY2ssIGxjTmFtZSkgfHwgQ1VTVE9NX0VMRU1FTlRfSEFORExJTkcuYXR0cmlidXRlTmFtZUNoZWNrIGluc3RhbmNlb2YgRnVuY3Rpb24gJiYgQ1VTVE9NX0VMRU1FTlRfSEFORExJTkcuYXR0cmlidXRlTmFtZUNoZWNrKGxjTmFtZSkpIHx8XG4gICAgICAgIC8vIEFsdGVybmF0aXZlLCBzZWNvbmQgY29uZGl0aW9uIGNoZWNrcyBpZiBpdCdzIGFuIGBpc2AtYXR0cmlidXRlLCBBTkRcbiAgICAgICAgLy8gdGhlIHZhbHVlIHBhc3NlcyB3aGF0ZXZlciB0aGUgdXNlciBoYXMgY29uZmlndXJlZCBmb3IgQ1VTVE9NX0VMRU1FTlRfSEFORExJTkcudGFnTmFtZUNoZWNrXG4gICAgICAgIGxjTmFtZSA9PT0gJ2lzJyAmJiBDVVNUT01fRUxFTUVOVF9IQU5ETElORy5hbGxvd0N1c3RvbWl6ZWRCdWlsdEluRWxlbWVudHMgJiYgKENVU1RPTV9FTEVNRU5UX0hBTkRMSU5HLnRhZ05hbWVDaGVjayBpbnN0YW5jZW9mIFJlZ0V4cCAmJiByZWdFeHBUZXN0KENVU1RPTV9FTEVNRU5UX0hBTkRMSU5HLnRhZ05hbWVDaGVjaywgdmFsdWUpIHx8IENVU1RPTV9FTEVNRU5UX0hBTkRMSU5HLnRhZ05hbWVDaGVjayBpbnN0YW5jZW9mIEZ1bmN0aW9uICYmIENVU1RPTV9FTEVNRU5UX0hBTkRMSU5HLnRhZ05hbWVDaGVjayh2YWx1ZSkpKSA7IGVsc2Uge1xuICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICAvKiBDaGVjayB2YWx1ZSBpcyBzYWZlLiBGaXJzdCwgaXMgYXR0ciBpbmVydD8gSWYgc28sIGlzIHNhZmUgKi9cbiAgICAgIH0gZWxzZSBpZiAoVVJJX1NBRkVfQVRUUklCVVRFU1tsY05hbWVdKSA7IGVsc2UgaWYgKHJlZ0V4cFRlc3QoSVNfQUxMT1dFRF9VUkkkJDEsIHN0cmluZ1JlcGxhY2UodmFsdWUsIEFUVFJfV0hJVEVTUEFDRSQkMSwgJycpKSkgOyBlbHNlIGlmICgobGNOYW1lID09PSAnc3JjJyB8fCBsY05hbWUgPT09ICd4bGluazpocmVmJyB8fCBsY05hbWUgPT09ICdocmVmJykgJiYgbGNUYWcgIT09ICdzY3JpcHQnICYmIHN0cmluZ0luZGV4T2YodmFsdWUsICdkYXRhOicpID09PSAwICYmIERBVEFfVVJJX1RBR1NbbGNUYWddKSA7IGVsc2UgaWYgKEFMTE9XX1VOS05PV05fUFJPVE9DT0xTICYmICFyZWdFeHBUZXN0KElTX1NDUklQVF9PUl9EQVRBJCQxLCBzdHJpbmdSZXBsYWNlKHZhbHVlLCBBVFRSX1dISVRFU1BBQ0UkJDEsICcnKSkpIDsgZWxzZSBpZiAoIXZhbHVlKSA7IGVsc2Uge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBfYmFzaWNDdXN0b21FbGVtZW50Q2hlY2tcbiAgICAgKiBjaGVja3MgaWYgYXQgbGVhc3Qgb25lIGRhc2ggaXMgaW5jbHVkZWQgaW4gdGFnTmFtZSwgYW5kIGl0J3Mgbm90IHRoZSBmaXJzdCBjaGFyXG4gICAgICogZm9yIG1vcmUgc29waGlzdGljYXRlZCBjaGVja2luZyBzZWUgaHR0cHM6Ly9naXRodWIuY29tL3NpbmRyZXNvcmh1cy92YWxpZGF0ZS1lbGVtZW50LW5hbWVcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gdGFnTmFtZSBuYW1lIG9mIHRoZSB0YWcgb2YgdGhlIG5vZGUgdG8gc2FuaXRpemVcbiAgICAgKi9cbiAgICB2YXIgX2Jhc2ljQ3VzdG9tRWxlbWVudFRlc3QgPSBmdW5jdGlvbiBfYmFzaWNDdXN0b21FbGVtZW50VGVzdCh0YWdOYW1lKSB7XG4gICAgICByZXR1cm4gdGFnTmFtZS5pbmRleE9mKCctJykgPiAwO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBfc2FuaXRpemVBdHRyaWJ1dGVzXG4gICAgICpcbiAgICAgKiBAcHJvdGVjdCBhdHRyaWJ1dGVzXG4gICAgICogQHByb3RlY3Qgbm9kZU5hbWVcbiAgICAgKiBAcHJvdGVjdCByZW1vdmVBdHRyaWJ1dGVcbiAgICAgKiBAcHJvdGVjdCBzZXRBdHRyaWJ1dGVcbiAgICAgKlxuICAgICAqIEBwYXJhbSAge05vZGV9IGN1cnJlbnROb2RlIHRvIHNhbml0aXplXG4gICAgICovXG4gICAgdmFyIF9zYW5pdGl6ZUF0dHJpYnV0ZXMgPSBmdW5jdGlvbiBfc2FuaXRpemVBdHRyaWJ1dGVzKGN1cnJlbnROb2RlKSB7XG4gICAgICB2YXIgYXR0ciA9IHZvaWQgMDtcbiAgICAgIHZhciB2YWx1ZSA9IHZvaWQgMDtcbiAgICAgIHZhciBsY05hbWUgPSB2b2lkIDA7XG4gICAgICB2YXIgbCA9IHZvaWQgMDtcbiAgICAgIC8qIEV4ZWN1dGUgYSBob29rIGlmIHByZXNlbnQgKi9cbiAgICAgIF9leGVjdXRlSG9vaygnYmVmb3JlU2FuaXRpemVBdHRyaWJ1dGVzJywgY3VycmVudE5vZGUsIG51bGwpO1xuXG4gICAgICB2YXIgYXR0cmlidXRlcyA9IGN1cnJlbnROb2RlLmF0dHJpYnV0ZXM7XG5cbiAgICAgIC8qIENoZWNrIGlmIHdlIGhhdmUgYXR0cmlidXRlczsgaWYgbm90IHdlIG1pZ2h0IGhhdmUgYSB0ZXh0IG5vZGUgKi9cblxuICAgICAgaWYgKCFhdHRyaWJ1dGVzKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgdmFyIGhvb2tFdmVudCA9IHtcbiAgICAgICAgYXR0ck5hbWU6ICcnLFxuICAgICAgICBhdHRyVmFsdWU6ICcnLFxuICAgICAgICBrZWVwQXR0cjogdHJ1ZSxcbiAgICAgICAgYWxsb3dlZEF0dHJpYnV0ZXM6IEFMTE9XRURfQVRUUlxuICAgICAgfTtcbiAgICAgIGwgPSBhdHRyaWJ1dGVzLmxlbmd0aDtcblxuICAgICAgLyogR28gYmFja3dhcmRzIG92ZXIgYWxsIGF0dHJpYnV0ZXM7IHNhZmVseSByZW1vdmUgYmFkIG9uZXMgKi9cbiAgICAgIHdoaWxlIChsLS0pIHtcbiAgICAgICAgYXR0ciA9IGF0dHJpYnV0ZXNbbF07XG4gICAgICAgIHZhciBfYXR0ciA9IGF0dHIsXG4gICAgICAgICAgICBuYW1lID0gX2F0dHIubmFtZSxcbiAgICAgICAgICAgIG5hbWVzcGFjZVVSSSA9IF9hdHRyLm5hbWVzcGFjZVVSSTtcblxuICAgICAgICB2YWx1ZSA9IHN0cmluZ1RyaW0oYXR0ci52YWx1ZSk7XG4gICAgICAgIGxjTmFtZSA9IHRyYW5zZm9ybUNhc2VGdW5jKG5hbWUpO1xuXG4gICAgICAgIC8qIEV4ZWN1dGUgYSBob29rIGlmIHByZXNlbnQgKi9cbiAgICAgICAgaG9va0V2ZW50LmF0dHJOYW1lID0gbGNOYW1lO1xuICAgICAgICBob29rRXZlbnQuYXR0clZhbHVlID0gdmFsdWU7XG4gICAgICAgIGhvb2tFdmVudC5rZWVwQXR0ciA9IHRydWU7XG4gICAgICAgIGhvb2tFdmVudC5mb3JjZUtlZXBBdHRyID0gdW5kZWZpbmVkOyAvLyBBbGxvd3MgZGV2ZWxvcGVycyB0byBzZWUgdGhpcyBpcyBhIHByb3BlcnR5IHRoZXkgY2FuIHNldFxuICAgICAgICBfZXhlY3V0ZUhvb2soJ3Vwb25TYW5pdGl6ZUF0dHJpYnV0ZScsIGN1cnJlbnROb2RlLCBob29rRXZlbnQpO1xuICAgICAgICB2YWx1ZSA9IGhvb2tFdmVudC5hdHRyVmFsdWU7XG4gICAgICAgIC8qIERpZCB0aGUgaG9va3MgYXBwcm92ZSBvZiB0aGUgYXR0cmlidXRlPyAqL1xuICAgICAgICBpZiAoaG9va0V2ZW50LmZvcmNlS2VlcEF0dHIpIHtcbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qIFJlbW92ZSBhdHRyaWJ1dGUgKi9cbiAgICAgICAgX3JlbW92ZUF0dHJpYnV0ZShuYW1lLCBjdXJyZW50Tm9kZSk7XG5cbiAgICAgICAgLyogRGlkIHRoZSBob29rcyBhcHByb3ZlIG9mIHRoZSBhdHRyaWJ1dGU/ICovXG4gICAgICAgIGlmICghaG9va0V2ZW50LmtlZXBBdHRyKSB7XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cblxuICAgICAgICAvKiBXb3JrIGFyb3VuZCBhIHNlY3VyaXR5IGlzc3VlIGluIGpRdWVyeSAzLjAgKi9cbiAgICAgICAgaWYgKHJlZ0V4cFRlc3QoL1xcLz4vaSwgdmFsdWUpKSB7XG4gICAgICAgICAgX3JlbW92ZUF0dHJpYnV0ZShuYW1lLCBjdXJyZW50Tm9kZSk7XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cblxuICAgICAgICAvKiBTYW5pdGl6ZSBhdHRyaWJ1dGUgY29udGVudCB0byBiZSB0ZW1wbGF0ZS1zYWZlICovXG4gICAgICAgIGlmIChTQUZFX0ZPUl9URU1QTEFURVMpIHtcbiAgICAgICAgICB2YWx1ZSA9IHN0cmluZ1JlcGxhY2UodmFsdWUsIE1VU1RBQ0hFX0VYUFIkJDEsICcgJyk7XG4gICAgICAgICAgdmFsdWUgPSBzdHJpbmdSZXBsYWNlKHZhbHVlLCBFUkJfRVhQUiQkMSwgJyAnKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qIElzIGB2YWx1ZWAgdmFsaWQgZm9yIHRoaXMgYXR0cmlidXRlPyAqL1xuICAgICAgICB2YXIgbGNUYWcgPSB0cmFuc2Zvcm1DYXNlRnVuYyhjdXJyZW50Tm9kZS5ub2RlTmFtZSk7XG4gICAgICAgIGlmICghX2lzVmFsaWRBdHRyaWJ1dGUobGNUYWcsIGxjTmFtZSwgdmFsdWUpKSB7XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cblxuICAgICAgICAvKiBIYW5kbGUgaW52YWxpZCBkYXRhLSogYXR0cmlidXRlIHNldCBieSB0cnktY2F0Y2hpbmcgaXQgKi9cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBpZiAobmFtZXNwYWNlVVJJKSB7XG4gICAgICAgICAgICBjdXJyZW50Tm9kZS5zZXRBdHRyaWJ1dGVOUyhuYW1lc3BhY2VVUkksIG5hbWUsIHZhbHVlKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgLyogRmFsbGJhY2sgdG8gc2V0QXR0cmlidXRlKCkgZm9yIGJyb3dzZXItdW5yZWNvZ25pemVkIG5hbWVzcGFjZXMgZS5nLiBcIngtc2NoZW1hXCIuICovXG4gICAgICAgICAgICBjdXJyZW50Tm9kZS5zZXRBdHRyaWJ1dGUobmFtZSwgdmFsdWUpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGFycmF5UG9wKERPTVB1cmlmeS5yZW1vdmVkKTtcbiAgICAgICAgfSBjYXRjaCAoXykge31cbiAgICAgIH1cblxuICAgICAgLyogRXhlY3V0ZSBhIGhvb2sgaWYgcHJlc2VudCAqL1xuICAgICAgX2V4ZWN1dGVIb29rKCdhZnRlclNhbml0aXplQXR0cmlidXRlcycsIGN1cnJlbnROb2RlLCBudWxsKTtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogX3Nhbml0aXplU2hhZG93RE9NXG4gICAgICpcbiAgICAgKiBAcGFyYW0gIHtEb2N1bWVudEZyYWdtZW50fSBmcmFnbWVudCB0byBpdGVyYXRlIG92ZXIgcmVjdXJzaXZlbHlcbiAgICAgKi9cbiAgICB2YXIgX3Nhbml0aXplU2hhZG93RE9NID0gZnVuY3Rpb24gX3Nhbml0aXplU2hhZG93RE9NKGZyYWdtZW50KSB7XG4gICAgICB2YXIgc2hhZG93Tm9kZSA9IHZvaWQgMDtcbiAgICAgIHZhciBzaGFkb3dJdGVyYXRvciA9IF9jcmVhdGVJdGVyYXRvcihmcmFnbWVudCk7XG5cbiAgICAgIC8qIEV4ZWN1dGUgYSBob29rIGlmIHByZXNlbnQgKi9cbiAgICAgIF9leGVjdXRlSG9vaygnYmVmb3JlU2FuaXRpemVTaGFkb3dET00nLCBmcmFnbWVudCwgbnVsbCk7XG5cbiAgICAgIHdoaWxlIChzaGFkb3dOb2RlID0gc2hhZG93SXRlcmF0b3IubmV4dE5vZGUoKSkge1xuICAgICAgICAvKiBFeGVjdXRlIGEgaG9vayBpZiBwcmVzZW50ICovXG4gICAgICAgIF9leGVjdXRlSG9vaygndXBvblNhbml0aXplU2hhZG93Tm9kZScsIHNoYWRvd05vZGUsIG51bGwpO1xuXG4gICAgICAgIC8qIFNhbml0aXplIHRhZ3MgYW5kIGVsZW1lbnRzICovXG4gICAgICAgIGlmIChfc2FuaXRpemVFbGVtZW50cyhzaGFkb3dOb2RlKSkge1xuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG5cbiAgICAgICAgLyogRGVlcCBzaGFkb3cgRE9NIGRldGVjdGVkICovXG4gICAgICAgIGlmIChzaGFkb3dOb2RlLmNvbnRlbnQgaW5zdGFuY2VvZiBEb2N1bWVudEZyYWdtZW50KSB7XG4gICAgICAgICAgX3Nhbml0aXplU2hhZG93RE9NKHNoYWRvd05vZGUuY29udGVudCk7XG4gICAgICAgIH1cblxuICAgICAgICAvKiBDaGVjayBhdHRyaWJ1dGVzLCBzYW5pdGl6ZSBpZiBuZWNlc3NhcnkgKi9cbiAgICAgICAgX3Nhbml0aXplQXR0cmlidXRlcyhzaGFkb3dOb2RlKTtcbiAgICAgIH1cblxuICAgICAgLyogRXhlY3V0ZSBhIGhvb2sgaWYgcHJlc2VudCAqL1xuICAgICAgX2V4ZWN1dGVIb29rKCdhZnRlclNhbml0aXplU2hhZG93RE9NJywgZnJhZ21lbnQsIG51bGwpO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBTYW5pdGl6ZVxuICAgICAqIFB1YmxpYyBtZXRob2QgcHJvdmlkaW5nIGNvcmUgc2FuaXRhdGlvbiBmdW5jdGlvbmFsaXR5XG4gICAgICpcbiAgICAgKiBAcGFyYW0ge1N0cmluZ3xOb2RlfSBkaXJ0eSBzdHJpbmcgb3IgRE9NIG5vZGVcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gY29uZmlndXJhdGlvbiBvYmplY3RcbiAgICAgKi9cbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgY29tcGxleGl0eVxuICAgIERPTVB1cmlmeS5zYW5pdGl6ZSA9IGZ1bmN0aW9uIChkaXJ0eSwgY2ZnKSB7XG4gICAgICB2YXIgYm9keSA9IHZvaWQgMDtcbiAgICAgIHZhciBpbXBvcnRlZE5vZGUgPSB2b2lkIDA7XG4gICAgICB2YXIgY3VycmVudE5vZGUgPSB2b2lkIDA7XG4gICAgICB2YXIgb2xkTm9kZSA9IHZvaWQgMDtcbiAgICAgIHZhciByZXR1cm5Ob2RlID0gdm9pZCAwO1xuICAgICAgLyogTWFrZSBzdXJlIHdlIGhhdmUgYSBzdHJpbmcgdG8gc2FuaXRpemUuXG4gICAgICAgIERPIE5PVCByZXR1cm4gZWFybHksIGFzIHRoaXMgd2lsbCByZXR1cm4gdGhlIHdyb25nIHR5cGUgaWZcbiAgICAgICAgdGhlIHVzZXIgaGFzIHJlcXVlc3RlZCBhIERPTSBvYmplY3QgcmF0aGVyIHRoYW4gYSBzdHJpbmcgKi9cbiAgICAgIElTX0VNUFRZX0lOUFVUID0gIWRpcnR5O1xuICAgICAgaWYgKElTX0VNUFRZX0lOUFVUKSB7XG4gICAgICAgIGRpcnR5ID0gJzwhLS0+JztcbiAgICAgIH1cblxuICAgICAgLyogU3RyaW5naWZ5LCBpbiBjYXNlIGRpcnR5IGlzIGFuIG9iamVjdCAqL1xuICAgICAgaWYgKHR5cGVvZiBkaXJ0eSAhPT0gJ3N0cmluZycgJiYgIV9pc05vZGUoZGlydHkpKSB7XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1uZWdhdGVkLWNvbmRpdGlvblxuICAgICAgICBpZiAodHlwZW9mIGRpcnR5LnRvU3RyaW5nICE9PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgdGhyb3cgdHlwZUVycm9yQ3JlYXRlKCd0b1N0cmluZyBpcyBub3QgYSBmdW5jdGlvbicpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGRpcnR5ID0gZGlydHkudG9TdHJpbmcoKTtcbiAgICAgICAgICBpZiAodHlwZW9mIGRpcnR5ICE9PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgdGhyb3cgdHlwZUVycm9yQ3JlYXRlKCdkaXJ0eSBpcyBub3QgYSBzdHJpbmcsIGFib3J0aW5nJyk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8qIENoZWNrIHdlIGNhbiBydW4uIE90aGVyd2lzZSBmYWxsIGJhY2sgb3IgaWdub3JlICovXG4gICAgICBpZiAoIURPTVB1cmlmeS5pc1N1cHBvcnRlZCkge1xuICAgICAgICBpZiAoX3R5cGVvZih3aW5kb3cudG9TdGF0aWNIVE1MKSA9PT0gJ29iamVjdCcgfHwgdHlwZW9mIHdpbmRvdy50b1N0YXRpY0hUTUwgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICBpZiAodHlwZW9mIGRpcnR5ID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgcmV0dXJuIHdpbmRvdy50b1N0YXRpY0hUTUwoZGlydHkpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGlmIChfaXNOb2RlKGRpcnR5KSkge1xuICAgICAgICAgICAgcmV0dXJuIHdpbmRvdy50b1N0YXRpY0hUTUwoZGlydHkub3V0ZXJIVE1MKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gZGlydHk7XG4gICAgICB9XG5cbiAgICAgIC8qIEFzc2lnbiBjb25maWcgdmFycyAqL1xuICAgICAgaWYgKCFTRVRfQ09ORklHKSB7XG4gICAgICAgIF9wYXJzZUNvbmZpZyhjZmcpO1xuICAgICAgfVxuXG4gICAgICAvKiBDbGVhbiB1cCByZW1vdmVkIGVsZW1lbnRzICovXG4gICAgICBET01QdXJpZnkucmVtb3ZlZCA9IFtdO1xuXG4gICAgICAvKiBDaGVjayBpZiBkaXJ0eSBpcyBjb3JyZWN0bHkgdHlwZWQgZm9yIElOX1BMQUNFICovXG4gICAgICBpZiAodHlwZW9mIGRpcnR5ID09PSAnc3RyaW5nJykge1xuICAgICAgICBJTl9QTEFDRSA9IGZhbHNlO1xuICAgICAgfVxuXG4gICAgICBpZiAoSU5fUExBQ0UpIHtcbiAgICAgICAgLyogRG8gc29tZSBlYXJseSBwcmUtc2FuaXRpemF0aW9uIHRvIGF2b2lkIHVuc2FmZSByb290IG5vZGVzICovXG4gICAgICAgIGlmIChkaXJ0eS5ub2RlTmFtZSkge1xuICAgICAgICAgIHZhciB0YWdOYW1lID0gdHJhbnNmb3JtQ2FzZUZ1bmMoZGlydHkubm9kZU5hbWUpO1xuICAgICAgICAgIGlmICghQUxMT1dFRF9UQUdTW3RhZ05hbWVdIHx8IEZPUkJJRF9UQUdTW3RhZ05hbWVdKSB7XG4gICAgICAgICAgICB0aHJvdyB0eXBlRXJyb3JDcmVhdGUoJ3Jvb3Qgbm9kZSBpcyBmb3JiaWRkZW4gYW5kIGNhbm5vdCBiZSBzYW5pdGl6ZWQgaW4tcGxhY2UnKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAoZGlydHkgaW5zdGFuY2VvZiBOb2RlKSB7XG4gICAgICAgIC8qIElmIGRpcnR5IGlzIGEgRE9NIGVsZW1lbnQsIGFwcGVuZCB0byBhbiBlbXB0eSBkb2N1bWVudCB0byBhdm9pZFxuICAgICAgICAgICBlbGVtZW50cyBiZWluZyBzdHJpcHBlZCBieSB0aGUgcGFyc2VyICovXG4gICAgICAgIGJvZHkgPSBfaW5pdERvY3VtZW50KCc8IS0tLS0+Jyk7XG4gICAgICAgIGltcG9ydGVkTm9kZSA9IGJvZHkub3duZXJEb2N1bWVudC5pbXBvcnROb2RlKGRpcnR5LCB0cnVlKTtcbiAgICAgICAgaWYgKGltcG9ydGVkTm9kZS5ub2RlVHlwZSA9PT0gMSAmJiBpbXBvcnRlZE5vZGUubm9kZU5hbWUgPT09ICdCT0RZJykge1xuICAgICAgICAgIC8qIE5vZGUgaXMgYWxyZWFkeSBhIGJvZHksIHVzZSBhcyBpcyAqL1xuICAgICAgICAgIGJvZHkgPSBpbXBvcnRlZE5vZGU7XG4gICAgICAgIH0gZWxzZSBpZiAoaW1wb3J0ZWROb2RlLm5vZGVOYW1lID09PSAnSFRNTCcpIHtcbiAgICAgICAgICBib2R5ID0gaW1wb3J0ZWROb2RlO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSB1bmljb3JuL3ByZWZlci1kb20tbm9kZS1hcHBlbmRcbiAgICAgICAgICBib2R5LmFwcGVuZENoaWxkKGltcG9ydGVkTm9kZSk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8qIEV4aXQgZGlyZWN0bHkgaWYgd2UgaGF2ZSBub3RoaW5nIHRvIGRvICovXG4gICAgICAgIGlmICghUkVUVVJOX0RPTSAmJiAhU0FGRV9GT1JfVEVNUExBVEVTICYmICFXSE9MRV9ET0NVTUVOVCAmJlxuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgdW5pY29ybi9wcmVmZXItaW5jbHVkZXNcbiAgICAgICAgZGlydHkuaW5kZXhPZignPCcpID09PSAtMSkge1xuICAgICAgICAgIHJldHVybiB0cnVzdGVkVHlwZXNQb2xpY3kgJiYgUkVUVVJOX1RSVVNURURfVFlQRSA/IHRydXN0ZWRUeXBlc1BvbGljeS5jcmVhdGVIVE1MKGRpcnR5KSA6IGRpcnR5O1xuICAgICAgICB9XG5cbiAgICAgICAgLyogSW5pdGlhbGl6ZSB0aGUgZG9jdW1lbnQgdG8gd29yayBvbiAqL1xuICAgICAgICBib2R5ID0gX2luaXREb2N1bWVudChkaXJ0eSk7XG5cbiAgICAgICAgLyogQ2hlY2sgd2UgaGF2ZSBhIERPTSBub2RlIGZyb20gdGhlIGRhdGEgKi9cbiAgICAgICAgaWYgKCFib2R5KSB7XG4gICAgICAgICAgcmV0dXJuIFJFVFVSTl9ET00gPyBudWxsIDogUkVUVVJOX1RSVVNURURfVFlQRSA/IGVtcHR5SFRNTCA6ICcnO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8qIFJlbW92ZSBmaXJzdCBlbGVtZW50IG5vZGUgKG91cnMpIGlmIEZPUkNFX0JPRFkgaXMgc2V0ICovXG4gICAgICBpZiAoYm9keSAmJiBGT1JDRV9CT0RZKSB7XG4gICAgICAgIF9mb3JjZVJlbW92ZShib2R5LmZpcnN0Q2hpbGQpO1xuICAgICAgfVxuXG4gICAgICAvKiBHZXQgbm9kZSBpdGVyYXRvciAqL1xuICAgICAgdmFyIG5vZGVJdGVyYXRvciA9IF9jcmVhdGVJdGVyYXRvcihJTl9QTEFDRSA/IGRpcnR5IDogYm9keSk7XG5cbiAgICAgIC8qIE5vdyBzdGFydCBpdGVyYXRpbmcgb3ZlciB0aGUgY3JlYXRlZCBkb2N1bWVudCAqL1xuICAgICAgd2hpbGUgKGN1cnJlbnROb2RlID0gbm9kZUl0ZXJhdG9yLm5leHROb2RlKCkpIHtcbiAgICAgICAgLyogRml4IElFJ3Mgc3RyYW5nZSBiZWhhdmlvciB3aXRoIG1hbmlwdWxhdGVkIHRleHROb2RlcyAjODkgKi9cbiAgICAgICAgaWYgKGN1cnJlbnROb2RlLm5vZGVUeXBlID09PSAzICYmIGN1cnJlbnROb2RlID09PSBvbGROb2RlKSB7XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cblxuICAgICAgICAvKiBTYW5pdGl6ZSB0YWdzIGFuZCBlbGVtZW50cyAqL1xuICAgICAgICBpZiAoX3Nhbml0aXplRWxlbWVudHMoY3VycmVudE5vZGUpKSB7XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cblxuICAgICAgICAvKiBTaGFkb3cgRE9NIGRldGVjdGVkLCBzYW5pdGl6ZSBpdCAqL1xuICAgICAgICBpZiAoY3VycmVudE5vZGUuY29udGVudCBpbnN0YW5jZW9mIERvY3VtZW50RnJhZ21lbnQpIHtcbiAgICAgICAgICBfc2FuaXRpemVTaGFkb3dET00oY3VycmVudE5vZGUuY29udGVudCk7XG4gICAgICAgIH1cblxuICAgICAgICAvKiBDaGVjayBhdHRyaWJ1dGVzLCBzYW5pdGl6ZSBpZiBuZWNlc3NhcnkgKi9cbiAgICAgICAgX3Nhbml0aXplQXR0cmlidXRlcyhjdXJyZW50Tm9kZSk7XG5cbiAgICAgICAgb2xkTm9kZSA9IGN1cnJlbnROb2RlO1xuICAgICAgfVxuXG4gICAgICBvbGROb2RlID0gbnVsbDtcblxuICAgICAgLyogSWYgd2Ugc2FuaXRpemVkIGBkaXJ0eWAgaW4tcGxhY2UsIHJldHVybiBpdC4gKi9cbiAgICAgIGlmIChJTl9QTEFDRSkge1xuICAgICAgICByZXR1cm4gZGlydHk7XG4gICAgICB9XG5cbiAgICAgIC8qIFJldHVybiBzYW5pdGl6ZWQgc3RyaW5nIG9yIERPTSAqL1xuICAgICAgaWYgKFJFVFVSTl9ET00pIHtcbiAgICAgICAgaWYgKFJFVFVSTl9ET01fRlJBR01FTlQpIHtcbiAgICAgICAgICByZXR1cm5Ob2RlID0gY3JlYXRlRG9jdW1lbnRGcmFnbWVudC5jYWxsKGJvZHkub3duZXJEb2N1bWVudCk7XG5cbiAgICAgICAgICB3aGlsZSAoYm9keS5maXJzdENoaWxkKSB7XG4gICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgdW5pY29ybi9wcmVmZXItZG9tLW5vZGUtYXBwZW5kXG4gICAgICAgICAgICByZXR1cm5Ob2RlLmFwcGVuZENoaWxkKGJvZHkuZmlyc3RDaGlsZCk7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJldHVybk5vZGUgPSBib2R5O1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKEFMTE9XRURfQVRUUi5zaGFkb3dyb290KSB7XG4gICAgICAgICAgLypcbiAgICAgICAgICAgIEFkb3B0Tm9kZSgpIGlzIG5vdCB1c2VkIGJlY2F1c2UgaW50ZXJuYWwgc3RhdGUgaXMgbm90IHJlc2V0XG4gICAgICAgICAgICAoZS5nLiB0aGUgcGFzdCBuYW1lcyBtYXAgb2YgYSBIVE1MRm9ybUVsZW1lbnQpLCB0aGlzIGlzIHNhZmVcbiAgICAgICAgICAgIGluIHRoZW9yeSBidXQgd2Ugd291bGQgcmF0aGVyIG5vdCByaXNrIGFub3RoZXIgYXR0YWNrIHZlY3Rvci5cbiAgICAgICAgICAgIFRoZSBzdGF0ZSB0aGF0IGlzIGNsb25lZCBieSBpbXBvcnROb2RlKCkgaXMgZXhwbGljaXRseSBkZWZpbmVkXG4gICAgICAgICAgICBieSB0aGUgc3BlY3MuXG4gICAgICAgICAgKi9cbiAgICAgICAgICByZXR1cm5Ob2RlID0gaW1wb3J0Tm9kZS5jYWxsKG9yaWdpbmFsRG9jdW1lbnQsIHJldHVybk5vZGUsIHRydWUpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHJldHVybk5vZGU7XG4gICAgICB9XG5cbiAgICAgIHZhciBzZXJpYWxpemVkSFRNTCA9IFdIT0xFX0RPQ1VNRU5UID8gYm9keS5vdXRlckhUTUwgOiBib2R5LmlubmVySFRNTDtcblxuICAgICAgLyogU2FuaXRpemUgZmluYWwgc3RyaW5nIHRlbXBsYXRlLXNhZmUgKi9cbiAgICAgIGlmIChTQUZFX0ZPUl9URU1QTEFURVMpIHtcbiAgICAgICAgc2VyaWFsaXplZEhUTUwgPSBzdHJpbmdSZXBsYWNlKHNlcmlhbGl6ZWRIVE1MLCBNVVNUQUNIRV9FWFBSJCQxLCAnICcpO1xuICAgICAgICBzZXJpYWxpemVkSFRNTCA9IHN0cmluZ1JlcGxhY2Uoc2VyaWFsaXplZEhUTUwsIEVSQl9FWFBSJCQxLCAnICcpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gdHJ1c3RlZFR5cGVzUG9saWN5ICYmIFJFVFVSTl9UUlVTVEVEX1RZUEUgPyB0cnVzdGVkVHlwZXNQb2xpY3kuY3JlYXRlSFRNTChzZXJpYWxpemVkSFRNTCkgOiBzZXJpYWxpemVkSFRNTDtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogUHVibGljIG1ldGhvZCB0byBzZXQgdGhlIGNvbmZpZ3VyYXRpb24gb25jZVxuICAgICAqIHNldENvbmZpZ1xuICAgICAqXG4gICAgICogQHBhcmFtIHtPYmplY3R9IGNmZyBjb25maWd1cmF0aW9uIG9iamVjdFxuICAgICAqL1xuICAgIERPTVB1cmlmeS5zZXRDb25maWcgPSBmdW5jdGlvbiAoY2ZnKSB7XG4gICAgICBfcGFyc2VDb25maWcoY2ZnKTtcbiAgICAgIFNFVF9DT05GSUcgPSB0cnVlO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBQdWJsaWMgbWV0aG9kIHRvIHJlbW92ZSB0aGUgY29uZmlndXJhdGlvblxuICAgICAqIGNsZWFyQ29uZmlnXG4gICAgICpcbiAgICAgKi9cbiAgICBET01QdXJpZnkuY2xlYXJDb25maWcgPSBmdW5jdGlvbiAoKSB7XG4gICAgICBDT05GSUcgPSBudWxsO1xuICAgICAgU0VUX0NPTkZJRyA9IGZhbHNlO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBQdWJsaWMgbWV0aG9kIHRvIGNoZWNrIGlmIGFuIGF0dHJpYnV0ZSB2YWx1ZSBpcyB2YWxpZC5cbiAgICAgKiBVc2VzIGxhc3Qgc2V0IGNvbmZpZywgaWYgYW55LiBPdGhlcndpc2UsIHVzZXMgY29uZmlnIGRlZmF1bHRzLlxuICAgICAqIGlzVmFsaWRBdHRyaWJ1dGVcbiAgICAgKlxuICAgICAqIEBwYXJhbSAge3N0cmluZ30gdGFnIFRhZyBuYW1lIG9mIGNvbnRhaW5pbmcgZWxlbWVudC5cbiAgICAgKiBAcGFyYW0gIHtzdHJpbmd9IGF0dHIgQXR0cmlidXRlIG5hbWUuXG4gICAgICogQHBhcmFtICB7c3RyaW5nfSB2YWx1ZSBBdHRyaWJ1dGUgdmFsdWUuXG4gICAgICogQHJldHVybiB7Qm9vbGVhbn0gUmV0dXJucyB0cnVlIGlmIGB2YWx1ZWAgaXMgdmFsaWQuIE90aGVyd2lzZSwgcmV0dXJucyBmYWxzZS5cbiAgICAgKi9cbiAgICBET01QdXJpZnkuaXNWYWxpZEF0dHJpYnV0ZSA9IGZ1bmN0aW9uICh0YWcsIGF0dHIsIHZhbHVlKSB7XG4gICAgICAvKiBJbml0aWFsaXplIHNoYXJlZCBjb25maWcgdmFycyBpZiBuZWNlc3NhcnkuICovXG4gICAgICBpZiAoIUNPTkZJRykge1xuICAgICAgICBfcGFyc2VDb25maWcoe30pO1xuICAgICAgfVxuXG4gICAgICB2YXIgbGNUYWcgPSB0cmFuc2Zvcm1DYXNlRnVuYyh0YWcpO1xuICAgICAgdmFyIGxjTmFtZSA9IHRyYW5zZm9ybUNhc2VGdW5jKGF0dHIpO1xuICAgICAgcmV0dXJuIF9pc1ZhbGlkQXR0cmlidXRlKGxjVGFnLCBsY05hbWUsIHZhbHVlKTtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogQWRkSG9va1xuICAgICAqIFB1YmxpYyBtZXRob2QgdG8gYWRkIERPTVB1cmlmeSBob29rc1xuICAgICAqXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IGVudHJ5UG9pbnQgZW50cnkgcG9pbnQgZm9yIHRoZSBob29rIHRvIGFkZFxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGhvb2tGdW5jdGlvbiBmdW5jdGlvbiB0byBleGVjdXRlXG4gICAgICovXG4gICAgRE9NUHVyaWZ5LmFkZEhvb2sgPSBmdW5jdGlvbiAoZW50cnlQb2ludCwgaG9va0Z1bmN0aW9uKSB7XG4gICAgICBpZiAodHlwZW9mIGhvb2tGdW5jdGlvbiAhPT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIGhvb2tzW2VudHJ5UG9pbnRdID0gaG9va3NbZW50cnlQb2ludF0gfHwgW107XG4gICAgICBhcnJheVB1c2goaG9va3NbZW50cnlQb2ludF0sIGhvb2tGdW5jdGlvbik7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIFJlbW92ZUhvb2tcbiAgICAgKiBQdWJsaWMgbWV0aG9kIHRvIHJlbW92ZSBhIERPTVB1cmlmeSBob29rIGF0IGEgZ2l2ZW4gZW50cnlQb2ludFxuICAgICAqIChwb3BzIGl0IGZyb20gdGhlIHN0YWNrIG9mIGhvb2tzIGlmIG1vcmUgYXJlIHByZXNlbnQpXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gZW50cnlQb2ludCBlbnRyeSBwb2ludCBmb3IgdGhlIGhvb2sgdG8gcmVtb3ZlXG4gICAgICovXG4gICAgRE9NUHVyaWZ5LnJlbW92ZUhvb2sgPSBmdW5jdGlvbiAoZW50cnlQb2ludCkge1xuICAgICAgaWYgKGhvb2tzW2VudHJ5UG9pbnRdKSB7XG4gICAgICAgIGFycmF5UG9wKGhvb2tzW2VudHJ5UG9pbnRdKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogUmVtb3ZlSG9va3NcbiAgICAgKiBQdWJsaWMgbWV0aG9kIHRvIHJlbW92ZSBhbGwgRE9NUHVyaWZ5IGhvb2tzIGF0IGEgZ2l2ZW4gZW50cnlQb2ludFxuICAgICAqXG4gICAgICogQHBhcmFtICB7U3RyaW5nfSBlbnRyeVBvaW50IGVudHJ5IHBvaW50IGZvciB0aGUgaG9va3MgdG8gcmVtb3ZlXG4gICAgICovXG4gICAgRE9NUHVyaWZ5LnJlbW92ZUhvb2tzID0gZnVuY3Rpb24gKGVudHJ5UG9pbnQpIHtcbiAgICAgIGlmIChob29rc1tlbnRyeVBvaW50XSkge1xuICAgICAgICBob29rc1tlbnRyeVBvaW50XSA9IFtdO1xuICAgICAgfVxuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBSZW1vdmVBbGxIb29rc1xuICAgICAqIFB1YmxpYyBtZXRob2QgdG8gcmVtb3ZlIGFsbCBET01QdXJpZnkgaG9va3NcbiAgICAgKlxuICAgICAqL1xuICAgIERPTVB1cmlmeS5yZW1vdmVBbGxIb29rcyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIGhvb2tzID0ge307XG4gICAgfTtcblxuICAgIHJldHVybiBET01QdXJpZnk7XG4gIH1cblxuICB2YXIgcHVyaWZ5ID0gY3JlYXRlRE9NUHVyaWZ5KCk7XG5cbiAgcmV0dXJuIHB1cmlmeTtcblxufSkpO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cHVyaWZ5LmpzLm1hcFxuIiwidmFyIHQwID0gbmV3IERhdGUsXG4gICAgdDEgPSBuZXcgRGF0ZTtcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gbmV3SW50ZXJ2YWwoZmxvb3JpLCBvZmZzZXRpLCBjb3VudCwgZmllbGQpIHtcblxuICBmdW5jdGlvbiBpbnRlcnZhbChkYXRlKSB7XG4gICAgcmV0dXJuIGZsb29yaShkYXRlID0gYXJndW1lbnRzLmxlbmd0aCA9PT0gMCA/IG5ldyBEYXRlIDogbmV3IERhdGUoK2RhdGUpKSwgZGF0ZTtcbiAgfVxuXG4gIGludGVydmFsLmZsb29yID0gZnVuY3Rpb24oZGF0ZSkge1xuICAgIHJldHVybiBmbG9vcmkoZGF0ZSA9IG5ldyBEYXRlKCtkYXRlKSksIGRhdGU7XG4gIH07XG5cbiAgaW50ZXJ2YWwuY2VpbCA9IGZ1bmN0aW9uKGRhdGUpIHtcbiAgICByZXR1cm4gZmxvb3JpKGRhdGUgPSBuZXcgRGF0ZShkYXRlIC0gMSkpLCBvZmZzZXRpKGRhdGUsIDEpLCBmbG9vcmkoZGF0ZSksIGRhdGU7XG4gIH07XG5cbiAgaW50ZXJ2YWwucm91bmQgPSBmdW5jdGlvbihkYXRlKSB7XG4gICAgdmFyIGQwID0gaW50ZXJ2YWwoZGF0ZSksXG4gICAgICAgIGQxID0gaW50ZXJ2YWwuY2VpbChkYXRlKTtcbiAgICByZXR1cm4gZGF0ZSAtIGQwIDwgZDEgLSBkYXRlID8gZDAgOiBkMTtcbiAgfTtcblxuICBpbnRlcnZhbC5vZmZzZXQgPSBmdW5jdGlvbihkYXRlLCBzdGVwKSB7XG4gICAgcmV0dXJuIG9mZnNldGkoZGF0ZSA9IG5ldyBEYXRlKCtkYXRlKSwgc3RlcCA9PSBudWxsID8gMSA6IE1hdGguZmxvb3Ioc3RlcCkpLCBkYXRlO1xuICB9O1xuXG4gIGludGVydmFsLnJhbmdlID0gZnVuY3Rpb24oc3RhcnQsIHN0b3AsIHN0ZXApIHtcbiAgICB2YXIgcmFuZ2UgPSBbXSwgcHJldmlvdXM7XG4gICAgc3RhcnQgPSBpbnRlcnZhbC5jZWlsKHN0YXJ0KTtcbiAgICBzdGVwID0gc3RlcCA9PSBudWxsID8gMSA6IE1hdGguZmxvb3Ioc3RlcCk7XG4gICAgaWYgKCEoc3RhcnQgPCBzdG9wKSB8fCAhKHN0ZXAgPiAwKSkgcmV0dXJuIHJhbmdlOyAvLyBhbHNvIGhhbmRsZXMgSW52YWxpZCBEYXRlXG4gICAgZG8gcmFuZ2UucHVzaChwcmV2aW91cyA9IG5ldyBEYXRlKCtzdGFydCkpLCBvZmZzZXRpKHN0YXJ0LCBzdGVwKSwgZmxvb3JpKHN0YXJ0KTtcbiAgICB3aGlsZSAocHJldmlvdXMgPCBzdGFydCAmJiBzdGFydCA8IHN0b3ApO1xuICAgIHJldHVybiByYW5nZTtcbiAgfTtcblxuICBpbnRlcnZhbC5maWx0ZXIgPSBmdW5jdGlvbih0ZXN0KSB7XG4gICAgcmV0dXJuIG5ld0ludGVydmFsKGZ1bmN0aW9uKGRhdGUpIHtcbiAgICAgIGlmIChkYXRlID49IGRhdGUpIHdoaWxlIChmbG9vcmkoZGF0ZSksICF0ZXN0KGRhdGUpKSBkYXRlLnNldFRpbWUoZGF0ZSAtIDEpO1xuICAgIH0sIGZ1bmN0aW9uKGRhdGUsIHN0ZXApIHtcbiAgICAgIGlmIChkYXRlID49IGRhdGUpIHtcbiAgICAgICAgaWYgKHN0ZXAgPCAwKSB3aGlsZSAoKytzdGVwIDw9IDApIHtcbiAgICAgICAgICB3aGlsZSAob2Zmc2V0aShkYXRlLCAtMSksICF0ZXN0KGRhdGUpKSB7fSAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLWVtcHR5XG4gICAgICAgIH0gZWxzZSB3aGlsZSAoLS1zdGVwID49IDApIHtcbiAgICAgICAgICB3aGlsZSAob2Zmc2V0aShkYXRlLCArMSksICF0ZXN0KGRhdGUpKSB7fSAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLWVtcHR5XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KTtcbiAgfTtcblxuICBpZiAoY291bnQpIHtcbiAgICBpbnRlcnZhbC5jb3VudCA9IGZ1bmN0aW9uKHN0YXJ0LCBlbmQpIHtcbiAgICAgIHQwLnNldFRpbWUoK3N0YXJ0KSwgdDEuc2V0VGltZSgrZW5kKTtcbiAgICAgIGZsb29yaSh0MCksIGZsb29yaSh0MSk7XG4gICAgICByZXR1cm4gTWF0aC5mbG9vcihjb3VudCh0MCwgdDEpKTtcbiAgICB9O1xuXG4gICAgaW50ZXJ2YWwuZXZlcnkgPSBmdW5jdGlvbihzdGVwKSB7XG4gICAgICBzdGVwID0gTWF0aC5mbG9vcihzdGVwKTtcbiAgICAgIHJldHVybiAhaXNGaW5pdGUoc3RlcCkgfHwgIShzdGVwID4gMCkgPyBudWxsXG4gICAgICAgICAgOiAhKHN0ZXAgPiAxKSA/IGludGVydmFsXG4gICAgICAgICAgOiBpbnRlcnZhbC5maWx0ZXIoZmllbGRcbiAgICAgICAgICAgICAgPyBmdW5jdGlvbihkKSB7IHJldHVybiBmaWVsZChkKSAlIHN0ZXAgPT09IDA7IH1cbiAgICAgICAgICAgICAgOiBmdW5jdGlvbihkKSB7IHJldHVybiBpbnRlcnZhbC5jb3VudCgwLCBkKSAlIHN0ZXAgPT09IDA7IH0pO1xuICAgIH07XG4gIH1cblxuICByZXR1cm4gaW50ZXJ2YWw7XG59XG4iLCJleHBvcnQgY29uc3QgZHVyYXRpb25TZWNvbmQgPSAxMDAwO1xuZXhwb3J0IGNvbnN0IGR1cmF0aW9uTWludXRlID0gZHVyYXRpb25TZWNvbmQgKiA2MDtcbmV4cG9ydCBjb25zdCBkdXJhdGlvbkhvdXIgPSBkdXJhdGlvbk1pbnV0ZSAqIDYwO1xuZXhwb3J0IGNvbnN0IGR1cmF0aW9uRGF5ID0gZHVyYXRpb25Ib3VyICogMjQ7XG5leHBvcnQgY29uc3QgZHVyYXRpb25XZWVrID0gZHVyYXRpb25EYXkgKiA3O1xuZXhwb3J0IGNvbnN0IGR1cmF0aW9uTW9udGggPSBkdXJhdGlvbkRheSAqIDMwO1xuZXhwb3J0IGNvbnN0IGR1cmF0aW9uWWVhciA9IGR1cmF0aW9uRGF5ICogMzY1O1xuIiwiaW1wb3J0IGludGVydmFsIGZyb20gXCIuL2ludGVydmFsLmpzXCI7XG5pbXBvcnQge2R1cmF0aW9uRGF5LCBkdXJhdGlvbk1pbnV0ZX0gZnJvbSBcIi4vZHVyYXRpb24uanNcIjtcblxudmFyIGRheSA9IGludGVydmFsKFxuICBkYXRlID0+IGRhdGUuc2V0SG91cnMoMCwgMCwgMCwgMCksXG4gIChkYXRlLCBzdGVwKSA9PiBkYXRlLnNldERhdGUoZGF0ZS5nZXREYXRlKCkgKyBzdGVwKSxcbiAgKHN0YXJ0LCBlbmQpID0+IChlbmQgLSBzdGFydCAtIChlbmQuZ2V0VGltZXpvbmVPZmZzZXQoKSAtIHN0YXJ0LmdldFRpbWV6b25lT2Zmc2V0KCkpICogZHVyYXRpb25NaW51dGUpIC8gZHVyYXRpb25EYXksXG4gIGRhdGUgPT4gZGF0ZS5nZXREYXRlKCkgLSAxXG4pO1xuXG5leHBvcnQgZGVmYXVsdCBkYXk7XG5leHBvcnQgdmFyIGRheXMgPSBkYXkucmFuZ2U7XG4iLCI8c3ZlbHRlOm9wdGlvbnMgdGFnPVwibnlsYXMtYWdlbmRhXCIgaW1tdXRhYmxlPXt0cnVlfSAvPlxuXG48c2NyaXB0IGxhbmc9XCJ0c1wiPlxuICBpbXBvcnQgeyB0aWNrIH0gZnJvbSBcInN2ZWx0ZVwiO1xuICBpbXBvcnQgeyBnZXRfY3VycmVudF9jb21wb25lbnQsIG9uTW91bnQgfSBmcm9tIFwic3ZlbHRlL2ludGVybmFsXCI7XG4gIGltcG9ydCB7IHNwcmluZyB9IGZyb20gXCJzdmVsdGUvbW90aW9uXCI7XG4gIGltcG9ydCB7IENhbGVuZGFyU3RvcmUsIEV2ZW50U3RvcmUsIE1hbmlmZXN0U3RvcmUgfSBmcm9tIFwiQGNvbW1vbnNcIjtcbiAgaW1wb3J0IHtcbiAgICBidWlsZEludGVybmFsUHJvcHMsXG4gICAgZ2V0RXZlbnREaXNwYXRjaGVyLFxuICB9IGZyb20gXCJAY29tbW9ucy9tZXRob2RzL2NvbXBvbmVudFwiO1xuICBpbXBvcnQge1xuICAgIGlzVmFsaWRUaW1lem9uZSxcbiAgICBnZXRTcGVjaWZpZWRUaW1lWm9uZU9mZnNldCxcbiAgICBnZXRTcGVjaWZpZWRUaW1lWm9uZU9mZnNldE5hbWUsXG4gICAgZm9ybWF0VGltZVNsb3QsXG4gICAgZ2V0VGltZUluVGltZXpvbmUsXG4gIH0gZnJvbSBcIkBjb21tb25zL21ldGhvZHMvY29udmVydERhdGVUaW1lWm9uZVwiO1xuICBpbXBvcnQgdHlwZSB7IEV2ZW50UG9zaXRpb24gfSBmcm9tIFwiLi9tZXRob2RzL3Bvc2l0aW9uXCI7XG4gIGltcG9ydCB7IHBvcHVsYXRlUG9zaXRpb25NYXAsIHVwZGF0ZUV2ZW50UG9zaXRpb24gfSBmcm9tIFwiLi9tZXRob2RzL3Bvc2l0aW9uXCI7XG4gIGltcG9ydCB7IGdldER5bmFtaWNFbmRUaW1lLCBnZXREeW5hbWljU3RhcnRUaW1lIH0gZnJvbSBcIi4vbWV0aG9kcy90aW1lXCI7XG4gIGltcG9ydCB0eXBlIHsgQWdlbmRhUHJvcGVydGllcyB9IGZyb20gXCJAY29tbW9ucy90eXBlcy9OeWxhc1wiO1xuICBpbXBvcnQgKiBhcyBET01QdXJpZnkgZnJvbSBcImRvbXB1cmlmeVwiO1xuICBpbXBvcnQgeyB0aW1lRGF5IH0gZnJvbSBcImQzLXRpbWVcIjtcbiAgaW1wb3J0IHsgRXJyb3JTdG9yZSB9IGZyb20gXCJAY29tbW9uc1wiO1xuICBpbXBvcnQgdHlwZSB7XG4gICAgRXZlbnRRdWVyeSxcbiAgICBFdmVudCxcbiAgICBDYWxlbmRhclF1ZXJ5LFxuICAgIENhbGVuZGFyLFxuICAgIFRpbWVzcGFuRXZlbnQsXG4gICAgRGF0ZUV2ZW50LFxuICB9IGZyb20gXCJAY29tbW9ucy90eXBlcy9FdmVudHNcIjtcblxuICAvLyAjcmVnaW9uIHByb3BzXG4gIGNvbnN0IElOVEVSTkFMX0VWRU5UX1BST1BTID0gT2JqZWN0LmZyZWV6ZShbXG4gICAgXCJvdmVybGFwc1wiLFxuICAgIFwicmVsYXRpdmVPdmVybGFwT2Zmc2V0XCIsXG4gICAgXCJyZWxhdGl2ZU92ZXJsYXBXaWR0aFwiLFxuICAgIFwicmVsYXRpdmVSdW5UaW1lXCIsXG4gICAgXCJyZWxhdGl2ZVN0YXJ0VGltZVwiLFxuICBdKTtcbiAgbGV0IG1hbmlmZXN0OiBQYXJ0aWFsPEFnZW5kYVByb3BlcnRpZXM+ID0ge307XG5cbiAgZXhwb3J0IGxldCBpZDogc3RyaW5nID0gXCJcIjtcbiAgZXhwb3J0IGxldCBhY2Nlc3NfdG9rZW46IHN0cmluZyA9IFwiXCI7XG5cbiAgZXhwb3J0IGxldCBhbGxvd19kYXRlX2NoYW5nZTogYm9vbGVhbjtcbiAgZXhwb3J0IGxldCBhbGxvd19ldmVudF9jcmVhdGlvbjogYm9vbGVhbjtcbiAgZXhwb3J0IGxldCBhbGxvd2VkX2RhdGVzOiBEYXRlW10gfCBzdHJpbmc7XG4gIGV4cG9ydCBsZXQgYXV0b190aW1lX2JveDogYm9vbGVhbjtcbiAgZXhwb3J0IGxldCBlbmRfbWludXRlOiBudW1iZXI7XG4gIGV4cG9ydCBsZXQgZXZlbnRzOiBFdmVudFtdID0gW107XG4gIGV4cG9ydCBsZXQgY2FsZW5kYXJfaWQ6IHN0cmluZztcbiAgZXhwb3J0IGxldCBjYWxlbmRhcl9pZHM6IHN0cmluZztcbiAgZXhwb3J0IGxldCBjbGlja19hY3Rpb246IChcbiAgICBldmVudDogTW91c2VFdmVudCB8IEtleWJvYXJkRXZlbnQsXG4gICAgY2FsZW5kYXJFdmVudDogRXZlbnQsXG4gICkgPT4gYW55O1xuICBleHBvcnQgbGV0IGNvbG9yX2J5OiBzdHJpbmc7XG4gIGV4cG9ydCBsZXQgY29uZGVuc2VkX3ZpZXc6IGJvb2xlYW4gfCBzdHJpbmc7XG4gIGV4cG9ydCBsZXQgZWFnZXJseV9mZXRjaF9ldmVudHM6IGJvb2xlYW47XG4gIGV4cG9ydCBsZXQgZXZlbnRfc25hcF9pbnRlcnZhbDogbnVtYmVyO1xuICBleHBvcnQgbGV0IGV2ZW50X2NyZWF0ZWQ6IChcbiAgICBldmVudDogRXZlbnQsXG4gICAgY29uZmlybTogKGV2ZW50OiBUaW1lc3BhbkV2ZW50KSA9PiB2b2lkLFxuICAgIGNhbmNlbDogKCkgPT4gdm9pZCxcbiAgICB1cGRhdGVFdmVudDogKGV2ZW50OiBUaW1lc3BhbkV2ZW50KSA9PiB2b2lkLFxuICApID0+IGFueTtcbiAgZXhwb3J0IGxldCBoZWFkZXJfdHlwZTogXCJmdWxsXCIgfCBcImRheVwiIHwgXCJub25lXCI7XG4gIGV4cG9ydCBsZXQgaGlkZV9hbGxfZGF5X2V2ZW50czogYm9vbGVhbjtcbiAgZXhwb3J0IGxldCBoaWRlX2N1cnJlbnRfdGltZTogYm9vbGVhbjtcbiAgZXhwb3J0IGxldCBoaWRlX3RpY2tzOiBib29sZWFuO1xuICBleHBvcnQgbGV0IHByZXZlbnRfem9vbTogYm9vbGVhbjtcbiAgZXhwb3J0IGxldCBzZWxlY3RlZF9kYXRlOiBEYXRlO1xuICBleHBvcnQgbGV0IHNob3dfbm9fZXZlbnRzX21lc3NhZ2U6IGJvb2xlYW47XG4gIGV4cG9ydCBsZXQgc3RhcnRfbWludXRlOiBudW1iZXI7XG4gIGV4cG9ydCBsZXQgdGhlbWU6IHN0cmluZztcbiAgZXhwb3J0IGxldCB0aW1lem9uZTogc3RyaW5nO1xuICBleHBvcnQgbGV0IHRpbWV6b25lX2Fnbm9zdGljX2FsbF9kYXlfZXZlbnRzOiBib29sZWFuO1xuICBleHBvcnQgbGV0IGRpc3BsYXlfbWV0YWRhdGE6IGJvb2xlYW47XG5cbiAgY29uc3QgZGVmYXVsdFZhbHVlTWFwOiBQYXJ0aWFsPEFnZW5kYVByb3BlcnRpZXM+ID0ge1xuICAgIGFsbG93X2RhdGVfY2hhbmdlOiBmYWxzZSxcbiAgICBhbGxvd19ldmVudF9jcmVhdGlvbjogZmFsc2UsXG4gICAgYWxsb3dlZF9kYXRlczogW10sXG4gICAgYXV0b190aW1lX2JveDogZmFsc2UsXG4gICAgY2FsZW5kYXJfaWQ6IFwiXCIsXG4gICAgY2FsZW5kYXJfaWRzOiBcIlwiLFxuICAgIGNvbG9yX2J5OiBcImV2ZW50XCIsXG4gICAgY29uZGVuc2VkX3ZpZXc6IGZhbHNlLFxuICAgIGVhZ2VybHlfZmV0Y2hfZXZlbnRzOiB0cnVlLFxuICAgIGVuZF9taW51dGU6IDE0NDAsXG4gICAgZXZlbnRfc25hcF9pbnRlcnZhbDogMTUsXG4gICAgaGVhZGVyX3R5cGU6IFwiZnVsbFwiLFxuICAgIGhpZGVfYWxsX2RheV9ldmVudHM6IGZhbHNlLFxuICAgIGhpZGVfY3VycmVudF90aW1lOiBmYWxzZSxcbiAgICBoaWRlX3RpY2tzOiBmYWxzZSxcbiAgICBwcmV2ZW50X3pvb206IGZhbHNlLFxuICAgIHNob3dfbm9fZXZlbnRzX21lc3NhZ2U6IGZhbHNlLFxuICAgIHN0YXJ0X21pbnV0ZTogMCxcbiAgICB0aGVtZTogXCJ0aGVtZS0xXCIsXG4gICAgdGltZXpvbmU6IFwiXCIsXG4gICAgdGltZXpvbmVfYWdub3N0aWNfYWxsX2RheV9ldmVudHM6IHRydWUsXG4gICAgZGlzcGxheV9tZXRhZGF0YTogdHJ1ZSxcbiAgfTtcblxuICBsZXQgX3RoaXMgPSA8QWdlbmRhUHJvcGVydGllcz5idWlsZEludGVybmFsUHJvcHMoe30sIHt9LCBkZWZhdWx0VmFsdWVNYXApO1xuICBsZXQgbm93ID0gbmV3IERhdGUoKS5nZXRUaW1lKCk7XG4gIGxldCBzaG93QXNCdXN5ID0gZmFsc2U7XG5cbiAgb25Nb3VudChhc3luYyAoKSA9PiB7XG4gICAgYXdhaXQgdGljaygpO1xuICAgIGNsaWVudEhlaWdodCA9IGFnZW5kYUVsZW1lbnQ/LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLmhlaWdodDtcbiAgICBpZiAoY2xpZW50SGVpZ2h0ID09PSAwKSB7XG4gICAgICBhZ2VuZGFFbGVtZW50LnN0eWxlLmhlaWdodCA9IFwiMzAwcHhcIjtcbiAgICB9XG5cbiAgICBtYW5pZmVzdCA9ICgoYXdhaXQgJE1hbmlmZXN0U3RvcmVbXG4gICAgICBKU09OLnN0cmluZ2lmeSh7IGNvbXBvbmVudF9pZDogaWQsIGFjY2Vzc190b2tlbiB9KVxuICAgIF0pIHx8IHt9KSBhcyBBZ2VuZGFQcm9wZXJ0aWVzO1xuXG4gICAgLy8gT25seSBjb25maWd1cmFibGUgdmlhIHRoZSBtYW5pZmVzdFxuICAgIHNob3dBc0J1c3kgPSBtYW5pZmVzdD8uc2hvd19hc19idXN5ID8/IGZhbHNlO1xuXG4gICAgX3RoaXMgPSBidWlsZEludGVybmFsUHJvcHMoXG4gICAgICAkJHByb3BzLFxuICAgICAgbWFuaWZlc3QsXG4gICAgICBkZWZhdWx0VmFsdWVNYXAsXG4gICAgKSBhcyBBZ2VuZGFQcm9wZXJ0aWVzO1xuICAgIHRyYW5zZm9ybVByb3BlcnR5VmFsdWVzKCk7XG5cbiAgICBzZXRJbnRlcnZhbCgoKSA9PiB7XG4gICAgICBub3cgPSBuZXcgRGF0ZSgpLmdldFRpbWUoKTtcbiAgICB9LCAxNTAwMCk7XG4gIH0pO1xuXG4gIGNvbnN0IGRpc3BhdGNoRXZlbnQgPSBnZXRFdmVudERpc3BhdGNoZXIoZ2V0X2N1cnJlbnRfY29tcG9uZW50KCkpO1xuXG4gICQ6IGRpc3BhdGNoRXZlbnQoXCJtYW5pZmVzdExvYWRlZFwiLCBtYW5pZmVzdCk7XG5cbiAgJDogaWYgKE9iamVjdC5rZXlzKCRFcnJvclN0b3JlKS5sZW5ndGgpIHtcbiAgICBkaXNwYXRjaEV2ZW50KFwib25FcnJvclwiLCAkRXJyb3JTdG9yZSk7XG4gIH1cblxuICBsZXQgcHJldmlvdXNQcm9wcyA9ICQkcHJvcHM7XG4gICQ6IHtcbiAgICBpZiAoSlNPTi5zdHJpbmdpZnkocHJldmlvdXNQcm9wcykgIT09IEpTT04uc3RyaW5naWZ5KCQkcHJvcHMpKSB7XG4gICAgICBfdGhpcyA9IGJ1aWxkSW50ZXJuYWxQcm9wcyhcbiAgICAgICAgJCRwcm9wcyxcbiAgICAgICAgbWFuaWZlc3QsXG4gICAgICAgIGRlZmF1bHRWYWx1ZU1hcCxcbiAgICAgICkgYXMgQWdlbmRhUHJvcGVydGllcztcbiAgICAgIHRyYW5zZm9ybVByb3BlcnR5VmFsdWVzKCk7XG4gICAgICBwcmV2aW91c1Byb3BzID0gJCRwcm9wcztcbiAgICB9XG4gIH1cblxuICBsZXQgdGhlbWVVcmw6IHN0cmluZztcbiAgbGV0IHNlbGVjdGVkRGF0ZTogRGF0ZTtcbiAgbGV0IGFsbG93ZWREYXRlczogRGF0ZVtdO1xuICBsZXQgc3RhcnRNaW51dGU6IG51bWJlcjtcbiAgbGV0IGVuZE1pbnV0ZTogbnVtYmVyO1xuICBsZXQgY2FsZW5kYXJJRHM6IHN0cmluZ1tdID0gW107XG5cbiAgZnVuY3Rpb24gdHJhbnNmb3JtUHJvcGVydHlWYWx1ZXMoKSB7XG4gICAgaWYgKFxuICAgICAgISFfdGhpcy50aGVtZSAmJlxuICAgICAgKF90aGlzLnRoZW1lLnN0YXJ0c1dpdGgoXCIuXCIpIHx8IF90aGlzLnRoZW1lLnN0YXJ0c1dpdGgoXCJodHRwXCIpKVxuICAgICkge1xuICAgICAgLy8gSWYgdGhlIHRoZW1lIGlzIGEgZmlsZSBwYXRoIG9yIGEgVVJMXG4gICAgICB0aGVtZVVybCA9IF90aGlzLnRoZW1lO1xuICAgIH1cblxuICAgIGlmIChcbiAgICAgIF90aGlzLnRpbWV6b25lICYmXG4gICAgICAoIWlzVmFsaWRUaW1lem9uZShfdGhpcy50aW1lem9uZSkgfHxcbiAgICAgICAgX3RoaXMudGltZXpvbmUgPT09IEludGwuRGF0ZVRpbWVGb3JtYXQoKS5yZXNvbHZlZE9wdGlvbnMoKS50aW1lWm9uZSlcbiAgICApIHtcbiAgICAgIF90aGlzLnRpbWV6b25lID0gXCJcIjtcbiAgICB9XG5cbiAgICBpZiAoX3RoaXMuc2VsZWN0ZWRfZGF0ZSkge1xuICAgICAgY29uc3QgZGF0ZSA9IGNvbnZlcnRUb1VUQyhuZXcgRGF0ZShfdGhpcy5zZWxlY3RlZF9kYXRlKSk7XG4gICAgICBkYXRlLnNldEhvdXJzKDAsIDAsIDAsIDApO1xuICAgICAgc2VsZWN0ZWREYXRlID0gZGF0ZTtcbiAgICB9IGVsc2UgaWYgKGFsbG93ZWREYXRlcz8ubGVuZ3RoKSB7XG4gICAgICBzZWxlY3RlZERhdGUgPSBhbGxvd2VkRGF0ZXNbMF07XG4gICAgfSBlbHNlIHtcbiAgICAgIGxldCBkYXRlID0gbmV3IERhdGUoKTtcbiAgICAgIGlmIChfdGhpcy50aW1lem9uZSkge1xuICAgICAgICBkYXRlID0gbmV3IERhdGUoZ2V0VGltZUluVGltZXpvbmUoZGF0ZSwgX3RoaXMudGltZXpvbmUpKTtcbiAgICAgIH1cbiAgICAgIGRhdGUuc2V0SG91cnMoMCwgMCwgMCwgMCk7XG4gICAgICBzZWxlY3RlZERhdGUgPSBkYXRlO1xuICAgIH1cblxuICAgIF90aGlzLmhpZGVfY3VycmVudF90aW1lID1cbiAgICAgIF90aGlzLmhpZGVfY3VycmVudF90aW1lID8/XG4gICAgICBjdXJyZW50VGltZS50b0xvY2FsZURhdGVTdHJpbmcoKSAhPSBzZWxlY3RlZERhdGUudG9Mb2NhbGVEYXRlU3RyaW5nKCk7XG5cbiAgICBhbGxvd2VkRGF0ZXMgPSBnZXRBbGxvd2VkRGF0ZXMoKTtcbiAgICBjYWxlbmRhcklEcyA9IHNldENhbGVuZGFySURzKCk7XG4gIH1cblxuICBsZXQgdGltZXpvbmVPZmZzZXQ6IG51bWJlcjtcbiAgbGV0IHRpbWV6b25lT2Zmc2V0TmFtZTogc3RyaW5nO1xuICAkOiB7XG4gICAgdGltZXpvbmVPZmZzZXQgPSBnZXRTcGVjaWZpZWRUaW1lWm9uZU9mZnNldChfdGhpcy50aW1lem9uZSk7XG4gICAgdGltZXpvbmVPZmZzZXROYW1lID0gZ2V0U3BlY2lmaWVkVGltZVpvbmVPZmZzZXROYW1lKF90aGlzLnRpbWV6b25lKTtcbiAgfVxuXG4gICQ6IGNsaWNrRGVmYXVsdCA9IHR5cGVvZiBjbGlja19hY3Rpb24gPT09IFwiZnVuY3Rpb25cIiA/IFwibm9uZVwiIDogXCJleHBhbmRcIjtcbiAgLy8gI2VuZHJlZ2lvbiBwcm9wc1xuXG4gIC8vICNyZWdpb24gdGltZSBjb25zdGFudHNcbiAgZnVuY3Rpb24gY29udmVydFRvVVRDKGRhdGU6IERhdGUpOiBEYXRlIHtcbiAgICByZXR1cm4gbmV3IERhdGUoZGF0ZS5nZXRUaW1lKCkgKyBkYXRlLmdldFRpbWV6b25lT2Zmc2V0KCkgKiA2MDAwMCk7XG4gIH1cblxuICBmdW5jdGlvbiBnZXRBbGxvd2VkRGF0ZXMoKSB7XG4gICAgbGV0IGRhdGVzOiBEYXRlW10gPSBbXTtcblxuICAgIGlmIChfdGhpcy5hbGxvd2VkX2RhdGVzICYmIHR5cGVvZiBfdGhpcy5hbGxvd2VkX2RhdGVzID09PSBcInN0cmluZ1wiKSB7XG4gICAgICBpZiAoX3RoaXMuYWxsb3dlZF9kYXRlcy5pbmNsdWRlcyhcIixcIikpIHtcbiAgICAgICAgZGF0ZXMgPSBfdGhpcy5hbGxvd2VkX2RhdGVzXG4gICAgICAgICAgLnNwbGl0KFwiLFwiKVxuICAgICAgICAgIC5tYXAoKGRhdGUpOiBEYXRlID0+IG5ldyBEYXRlKGRhdGUpKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGRhdGVzID0gW25ldyBEYXRlKF90aGlzLmFsbG93ZWRfZGF0ZXMpXTtcbiAgICAgIH1cblxuICAgICAgZGF0ZXMgPSBkYXRlcy5tYXAoKGRhdGU6IERhdGUpID0+IHtcbiAgICAgICAgZGF0ZS5zZXRIb3VycygwLCAwLCAwLCAwKTtcbiAgICAgICAgcmV0dXJuIGRhdGU7XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBpZiAoX3RoaXMuYWxsb3dlZF9kYXRlcyAmJiB0eXBlb2YgX3RoaXMuYWxsb3dlZF9kYXRlcyAhPT0gXCJzdHJpbmdcIikge1xuICAgICAgZGF0ZXMgPSBfdGhpcy5hbGxvd2VkX2RhdGVzO1xuICAgIH1cblxuICAgIHJldHVybiBkYXRlcztcbiAgfVxuXG4gIC8vIGdldCBldmVudHMgZnJvbSBzdG9yeSBieSB1bmlxdWUgSUQgd2l0aCBDYWxlbmRhciBhbmQgRGF0ZVxuICBsZXQgc3RhcnRUaW1lOiBEYXRlO1xuICAkOiB7XG4gICAgbGV0IGRhdGUgPSBuZXcgRGF0ZSgpO1xuICAgIGRhdGUuc2V0SG91cnMoMCwgc3RhcnRNaW51dGUsIDAsIDApO1xuICAgIHN0YXJ0VGltZSA9IGRhdGU7XG4gIH1cblxuICBsZXQgZW5kVGltZTogRGF0ZTtcbiAgJDoge1xuICAgIGxldCBkYXRlID0gbmV3IERhdGUoKTtcbiAgICBkYXRlLnNldEhvdXJzKDAsIGVuZE1pbnV0ZSwgMCwgMCk7XG4gICAgZW5kVGltZSA9IGRhdGU7XG4gIH1cblxuICBsZXQgdGltZVNwYW46IG51bWJlcjtcbiAgJDogdGltZVNwYW4gPSBNYXRoLmZsb29yKGVuZE1pbnV0ZSAtIHN0YXJ0TWludXRlKTtcblxuICAvL3N0YXJ0T2ZEYXkgYW5kIGVuZE9mRGF5IGFyZSB1c2VkIHRvIGZldGNoIGV2ZW50cyB3aXRoaW4gdGhlIGRhdGUgcmFuZ2VcbiAgbGV0IHN0YXJ0T2ZEYXk6IG51bWJlcjtcbiAgbGV0IGVuZE9mRGF5OiBudW1iZXI7XG4gICQ6IHN0YXJ0T2ZEYXkgPSAobmV3IERhdGUoc2VsZWN0ZWREYXRlKS5nZXRUaW1lKCkgLSB0aW1lem9uZU9mZnNldCkgLyAxMDAwO1xuICAkOiBlbmRPZkRheSA9XG4gICAgKG5ldyBEYXRlKHNlbGVjdGVkRGF0ZSkuc2V0SG91cnMoMjQsIDAsIDAsIDApIC0gdGltZXpvbmVPZmZzZXQpIC8gMTAwMDtcblxuICAvLyAjZW5kcmVnaW9uIHRpbWUgY29uc3RhbnRzXG5cbiAgLy8gI3JlZ2lvbiBEYXRhIEZsb3dcblxuICBmdW5jdGlvbiBzZXRDYWxlbmRhcklEcygpIHtcbiAgICBsZXQgSURMaXN0ID0gX3RoaXMuY2FsZW5kYXJfaWRzO1xuICAgIGlmICh0eXBlb2YgSURMaXN0ID09PSBcInN0cmluZ1wiICYmIElETGlzdC5sZW5ndGgpIHtcbiAgICAgIHJldHVybiBJRExpc3Quc3BsaXQoXCIsXCIpLm1hcCgoaWQ6IHN0cmluZykgPT4gaWQudHJpbSgpKTtcbiAgICB9IGVsc2UgaWYgKGNhbGVuZGFyX2lkKSB7XG4gICAgICByZXR1cm4gW2NhbGVuZGFyX2lkXTtcbiAgICB9XG4gICAgcmV0dXJuIFtdO1xuICB9XG5cbiAgbGV0IHF1ZXJ5OiBFdmVudFF1ZXJ5O1xuICAkOiBxdWVyeSA9IHtcbiAgICBjb21wb25lbnRfaWQ6IGlkLFxuICAgIGFjY2Vzc190b2tlbjogYWNjZXNzX3Rva2VuLFxuICAgIGNhbGVuZGFySURzOiBjYWxlbmRhcklEcyxcbiAgICBzdGFydHNfYWZ0ZXI6IHN0YXJ0T2ZEYXksXG4gICAgZW5kc19iZWZvcmU6IGVuZE9mRGF5LFxuICB9O1xuXG4gIC8vIFNpYmxpbmcgUXVlcmllczogZWFnZXJseSBmZXRjaCB0aGUgZXZlbnRzIG9uIHRoZSBwcmV2aW91cyBhbmQgbmV4dCBkYXlzLFxuICAvLyBzbyB3aGVuIHRoZSB1c2VyIGNsaWNrcyB0aGVtLCB0aGUgbG9hZGluZyB3aWxsIHNlZW0gaW5zdGFudGFuZW91cy5cbiAgbGV0IHNpYmxpbmdRdWVyaWVzOiBbRXZlbnRRdWVyeSwgRXZlbnRRdWVyeV0gfCBbXSA9IFtdO1xuICAkOiBpZiAoX3RoaXMuYWxsb3dfZGF0ZV9jaGFuZ2UgJiYgX3RoaXMuZWFnZXJseV9mZXRjaF9ldmVudHMgJiYgcXVlcnkpIHtcbiAgICBsZXQgcHJldmlvdXNEYXRlO1xuICAgIGxldCBuZXh0RGF0ZTtcbiAgICBpZiAoYWxsb3dlZERhdGVzPy5sZW5ndGgpIHtcbiAgICAgIGNvbnN0IGRhdGVTcG90ID0gYWxsb3dlZERhdGVzLmZpbmRJbmRleChcbiAgICAgICAgKGRhdGU6IERhdGUpID0+IGRhdGUudG9EYXRlU3RyaW5nKCkgPT09IHNlbGVjdGVkRGF0ZS50b0RhdGVTdHJpbmcoKSxcbiAgICAgICk7XG4gICAgICBwcmV2aW91c0RhdGUgPSBhbGxvd2VkRGF0ZXNbZGF0ZVNwb3QgLSAxXSB8fCBzZWxlY3RlZERhdGU7XG4gICAgICBuZXh0RGF0ZSA9IGFsbG93ZWREYXRlc1tkYXRlU3BvdCArIDFdIHx8IHNlbGVjdGVkRGF0ZTtcbiAgICB9IGVsc2Uge1xuICAgICAgcHJldmlvdXNEYXRlID0gdGltZURheS5vZmZzZXQoc2VsZWN0ZWREYXRlLCAtMSk7XG4gICAgICBuZXh0RGF0ZSA9IHRpbWVEYXkub2Zmc2V0KHNlbGVjdGVkRGF0ZSwgMSk7XG4gICAgfVxuXG4gICAgc2libGluZ1F1ZXJpZXMgPSBbXG4gICAgICB7XG4gICAgICAgIGNvbXBvbmVudF9pZDogaWQsXG4gICAgICAgIGFjY2Vzc190b2tlbjogYWNjZXNzX3Rva2VuLFxuICAgICAgICBjYWxlbmRhcklEczogY2FsZW5kYXJJRHMsXG4gICAgICAgIHN0YXJ0c19hZnRlcjpcbiAgICAgICAgICAobmV3IERhdGUocHJldmlvdXNEYXRlKS5zZXRIb3VycygwLCAwLCAwLCAwKSAtIHRpbWV6b25lT2Zmc2V0KSAvIDEwMDAsXG4gICAgICAgIGVuZHNfYmVmb3JlOlxuICAgICAgICAgIChuZXcgRGF0ZShwcmV2aW91c0RhdGUpLnNldEhvdXJzKDI0LCAwLCAwLCAwKSAtIHRpbWV6b25lT2Zmc2V0KSAvXG4gICAgICAgICAgMTAwMCxcbiAgICAgIH0sXG4gICAgICB7XG4gICAgICAgIGNvbXBvbmVudF9pZDogaWQsXG4gICAgICAgIGFjY2Vzc190b2tlbjogYWNjZXNzX3Rva2VuLFxuICAgICAgICBjYWxlbmRhcklEczogY2FsZW5kYXJJRHMsXG4gICAgICAgIHN0YXJ0c19hZnRlcjpcbiAgICAgICAgICAobmV3IERhdGUobmV4dERhdGUpLnNldEhvdXJzKDAsIDAsIDAsIDApIC0gdGltZXpvbmVPZmZzZXQpIC8gMTAwMCxcbiAgICAgICAgZW5kc19iZWZvcmU6XG4gICAgICAgICAgKG5ldyBEYXRlKG5leHREYXRlKS5zZXRIb3VycygyNCwgMCwgMCwgMCkgLSB0aW1lem9uZU9mZnNldCkgLyAxMDAwLFxuICAgICAgfSxcbiAgICBdO1xuICB9XG5cbiAgbGV0IHF1ZXJ5S2V5OiBzdHJpbmc7XG4gICQ6IHF1ZXJ5S2V5ID0gSlNPTi5zdHJpbmdpZnkocXVlcnkpO1xuXG4gIGxldCBjYWxlbmRhcnM6IENhbGVuZGFyW10gPSBbXTtcbiAgJDogKGFzeW5jICgpID0+IHtcbiAgICBpZiAoaWQgJiYgY2FsZW5kYXJJRHM/Lmxlbmd0aCkge1xuICAgICAgY29uc3QgY2FsZW5kYXJRdWVyeTogQ2FsZW5kYXJRdWVyeSA9IHtcbiAgICAgICAgYWNjZXNzX3Rva2VuLFxuICAgICAgICBjb21wb25lbnRfaWQ6IGlkLFxuICAgICAgICBjYWxlbmRhcklEcyxcbiAgICAgIH07XG4gICAgICBjYWxlbmRhcnMgPSBhd2FpdCBDYWxlbmRhclN0b3JlLmdldENhbGVuZGFycyhjYWxlbmRhclF1ZXJ5KTtcbiAgICB9XG4gIH0pKCk7XG5cbiAgY29uc3QgeyBsb2FkaW5nRXZlbnRzIH0gPSBFdmVudFN0b3JlO1xuXG4gIGxldCBjYWxlbmRhckV2ZW50czogRXZlbnRbXSA9IFtdO1xuICBsZXQgZmV0Y2hFdmVudHNQcm9taXNlUXVldWU6IFByb21pc2U8RXZlbnRbXSB8IHVuZGVmaW5lZD5bXSA9IFtdO1xuXG4gICQ6IChhc3luYyAoKSA9PiB7XG4gICAgaWYgKF90aGlzLmV2ZW50cykge1xuICAgICAgY2FsZW5kYXJFdmVudHMgPSBfdGhpcy5ldmVudHM7XG4gICAgfSBlbHNlIHtcbiAgICAgIGZldGNoRXZlbnRzUHJvbWlzZVF1ZXVlLnB1c2goRXZlbnRTdG9yZS5nZXRFdmVudHMocXVlcnkpKTtcbiAgICAgIGNvbnN0IHJlc29sdmVkUHJvbWlzZXMgPSA8UHJvbWlzZUZ1bGZpbGxlZFJlc3VsdDxFdmVudFtdIHwgdW5kZWZpbmVkPltdPihcbiAgICAgICAgKGF3YWl0IFByb21pc2UuYWxsU2V0dGxlZChmZXRjaEV2ZW50c1Byb21pc2VRdWV1ZSkpLmZpbHRlcihcbiAgICAgICAgICAocmVzdWx0KSA9PiByZXN1bHQuc3RhdHVzICE9PSBcInJlamVjdGVkXCIsXG4gICAgICAgIClcbiAgICAgICk7XG5cbiAgICAgIGNhbGVuZGFyRXZlbnRzID0gcmVzb2x2ZWRQcm9taXNlcy5wb3AoKT8udmFsdWUgPz8gW107XG4gICAgICBmZXRjaEV2ZW50c1Byb21pc2VRdWV1ZS5sZW5ndGggPSAwOyAvLyBDbGVhciBhcnJheSB3aXRob3V0IGNoYW5naW5nIHJlZlxuICAgIH1cblxuICAgIGlmIChzaWJsaW5nUXVlcmllcz8ubGVuZ3RoKSB7XG4gICAgICBzaWJsaW5nUXVlcmllcy5mb3JFYWNoKChzaWJsaW5nUXVlcnkpID0+XG4gICAgICAgIEV2ZW50U3RvcmUuZ2V0RXZlbnRzKHNpYmxpbmdRdWVyeSksXG4gICAgICApO1xuICAgIH1cbiAgfSkoKTtcblxuICBsZXQgU3RvcmVkQWxsRGF5RXZlbnRzOiBEYXRlRXZlbnRbXSA9IFtdO1xuICAkOiB7XG4gICAgaWYgKF90aGlzLmV2ZW50cykge1xuICAgICAgU3RvcmVkQWxsRGF5RXZlbnRzID0gKDxEYXRlRXZlbnRbXT5fdGhpcy5ldmVudHMpXG4gICAgICAgIC5mbGF0KClcbiAgICAgICAgLmZpbHRlcigoZXZlbnQpID0+IGV2ZW50LndoZW4/LmRhdGUpO1xuICAgIH0gZWxzZSB7XG4gICAgICBQcm9taXNlLmFsbChPYmplY3QudmFsdWVzKCRFdmVudFN0b3JlKSkudGhlbigoZGF5czogRXZlbnRbXVtdKSA9PiB7XG4gICAgICAgIFN0b3JlZEFsbERheUV2ZW50cyA9ICg8RGF0ZUV2ZW50W11bXT5kYXlzKVxuICAgICAgICAgIC5mbGF0KClcbiAgICAgICAgICAuZmlsdGVyKChldmVudCkgPT4gZXZlbnQud2hlbj8uZGF0ZSk7XG4gICAgICB9KTtcbiAgICB9XG4gIH1cblxuICAkOiBhbGxEYXlFdmVudHMgPSBTdG9yZWRBbGxEYXlFdmVudHM/LmZpbHRlcigoZXZlbnQ6IERhdGVFdmVudCkgPT4ge1xuICAgIGlmIChfdGhpcy50aW1lem9uZV9hZ25vc3RpY19hbGxfZGF5X2V2ZW50cykge1xuICAgICAgcmV0dXJuIChcbiAgICAgICAgY29udmVydFRvVVRDKG5ldyBEYXRlKGV2ZW50LndoZW4uZGF0ZSkpLnZhbHVlT2YoKSA9PT1cbiAgICAgICAgc2VsZWN0ZWREYXRlLnZhbHVlT2YoKVxuICAgICAgKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIChcbiAgICAgICAgbmV3IERhdGUoZXZlbnQud2hlbi5kYXRlKS50b0RhdGVTdHJpbmcoKSA9PT0gc2VsZWN0ZWREYXRlLnRvRGF0ZVN0cmluZygpXG4gICAgICApO1xuICAgIH1cbiAgfSk/LnNvcnQoKGEsIGIpID0+IChhLnRpdGxlIHx8IFwiXCIpLmxvY2FsZUNvbXBhcmUoYi50aXRsZSB8fCBcIlwiKSk7XG5cbiAgJDogdGltZXNwYW5FdmVudHMgPSBjYWxlbmRhckV2ZW50c1xuICAgID8uZmlsdGVyKChldmVudCk6IGV2ZW50IGlzIFRpbWVzcGFuRXZlbnQgPT4gXCJzdGFydF90aW1lXCIgaW4gZXZlbnQud2hlbilcbiAgICA/Lm1hcCgoZXZlbnQ6IFRpbWVzcGFuRXZlbnQpID0+IHtcbiAgICAgIGxldCBhdHRlbmRlZSA9IGNhbGVuZGFycy5maW5kKChjYWwpID0+IGNhbC5pZCA9PT0gZXZlbnQuY2FsZW5kYXJfaWQpO1xuICAgICAgZXZlbnQuYXR0ZW5kZWVTdGF0dXMgPSBldmVudC5wYXJ0aWNpcGFudHM/LmZpbmQoXG4gICAgICAgIChwKSA9PiBwLmVtYWlsID09PSBhdHRlbmRlZT8ubmFtZSxcbiAgICAgICk/LnN0YXR1cztcbiAgICAgIHJldHVybiBldmVudDtcbiAgICB9KVxuICAgIC5zb3J0KChhLCBiKSA9PiBhLndoZW4uc3RhcnRfdGltZSAtIGIud2hlbi5zdGFydF90aW1lKTtcblxuICAvLyBPbmx5IGZpcmVkIGlmIG5vIGV2ZW50cyBwcm9wIHdhcyBwYXNzZWQgaW5cbiAgJDogaWYgKCFfdGhpcy5ldmVudHMpIHtcbiAgICBkaXNwYXRjaEV2ZW50KFwiZXZlbnRzTG9hZGVkXCIsIGNhbGVuZGFyRXZlbnRzKTtcbiAgfVxuXG4gIC8vIERvbid0IGxldCBldmVudHMgYmUgc21hbGxlciB0aGFuIDMwcHggdGFsbDsgaWYgdGhleSB3b3VsZCBiZSwgb3ZlcmZsb3cgdGhlIGNhbGVuZGFyIGFuZCBtYWtlIGl0IHNjcm9sbGFibGUuXG4gIGNvbnN0IG1pbkV2ZW50SGVpZ2h0ID0gMzA7XG4gIGxldCBvdmVyZmxvd2luZyA9IGZhbHNlO1xuICAkOiBvdmVyZmxvd2luZyA9IGh5ZHJhdGVkRXZlbnRzLmxlbmd0aCAqIG1pbkV2ZW50SGVpZ2h0ID4gY2xpZW50SGVpZ2h0O1xuICAkOiB7XG4gICAgaWYgKGNvbmRlbnNlZCAmJiBvdmVyZmxvd2luZykge1xuICAgICAgaHlkcmF0ZWRFdmVudHMuZm9yRWFjaCgoZXZlbnQsIGl0ZXIpID0+IHtcbiAgICAgICAgZXZlbnQucmVsYXRpdmVTdGFydFRpbWUgPSBtaW5FdmVudEhlaWdodFBlcmNlbnQgKiBpdGVyO1xuICAgICAgICBldmVudC5yZWxhdGl2ZVJ1blRpbWUgPSBtaW5FdmVudEhlaWdodFBlcmNlbnQ7XG4gICAgICB9KTtcbiAgICB9XG4gIH1cbiAgJDogbWluRXZlbnRIZWlnaHRQZXJjZW50ID0gbWluRXZlbnRIZWlnaHQgLyBjbGllbnRIZWlnaHQ7XG5cbiAgbGV0IGV2ZW50U291cmNlOiBFdmVudFtdO1xuICAkOiBldmVudFNvdXJjZSA9XG4gICAgQXJyYXkuaXNBcnJheShjYWxlbmRhckV2ZW50cykgJiYgY2FsZW5kYXJFdmVudHMubGVuZ3RoID4gMFxuICAgICAgPyBjYWxlbmRhckV2ZW50c1xuICAgICAgOiBfdGhpcy5ldmVudHMgfHwgW107XG5cbiAgLy8gY2FsZW5kYXJFdmVudHMsIGJ1dCB3aXRoIHByZXNlbnRhdGlvbmFsIGNoYW5nZXMgbWFkZSB0byBjb250ZW50LlxuICAvLyAoZmlndXJlIG91dCBob3cgZmFyIGRvd24gdGhlIHBhZ2UgYW4gZXZlbnQgbmVlZHMgdG8gYmUgcG9zaXRpb25lZCwgcmVuZGVyIGxpbmtzIGFzIGxpbmtzLCBldGMuKVxuICAvLyBHb2FsIHRpbWluZzogMC4wMm1zIHBlciBldmVudCBvciBsZXNzXG4gIGxldCBoeWRyYXRlZEV2ZW50czogRXZlbnRbXSA9IFtdO1xuICAkOiB7XG4gICAgaWYgKGV2ZW50cyB8fCAodGltZXNwYW5FdmVudHMgJiYgY2FsZW5kYXJzPy5sZW5ndGgpKSB7XG4gICAgICBoeWRyYXRlZEV2ZW50cyA9IGV2ZW50U291cmNlXG4gICAgICAgIC5maWx0ZXIoXG4gICAgICAgICAgKGV2ZW50OiBFdmVudCk6IGV2ZW50IGlzIFRpbWVzcGFuRXZlbnQgPT5cbiAgICAgICAgICAgIGV2ZW50LnN0YXR1cyAhPT0gXCJjYW5jZWxsZWRcIiAmJiBcInN0YXJ0X3RpbWVcIiBpbiBldmVudC53aGVuLFxuICAgICAgICApXG4gICAgICAgIC5tYXAoKGV2ZW50OiBUaW1lc3BhbkV2ZW50LCBpdGVyKSA9PiB7XG4gICAgICAgICAgaWYgKGNvbmRlbnNlZCkge1xuICAgICAgICAgICAgZXZlbnQucmVsYXRpdmVTdGFydFRpbWUgPVxuICAgICAgICAgICAgICAoMTAwIC8gdGltZXNwYW5FdmVudHMubGVuZ3RoIC8gMTAwKSAqIGl0ZXI7XG4gICAgICAgICAgICBldmVudC5yZWxhdGl2ZVJ1blRpbWUgPSAxMDAgLyB0aW1lc3BhbkV2ZW50cy5sZW5ndGggLyAxMDA7XG4gICAgICAgICAgICByZXR1cm4gZXZlbnQ7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgbGV0IHN0YXJ0VGltZSA9IG5ldyBEYXRlKGV2ZW50LndoZW4uc3RhcnRfdGltZSAqIDEwMDApO1xuICAgICAgICAgIGlmIChfdGhpcy50aW1lem9uZSkge1xuICAgICAgICAgICAgc3RhcnRUaW1lID0gbmV3IERhdGUoZ2V0VGltZUluVGltZXpvbmUoc3RhcnRUaW1lLCBfdGhpcy50aW1lem9uZSkpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGxldCBtaW51dGVzSW5WaXNpYmxlRGF5ID1cbiAgICAgICAgICAgIChzdGFydFRpbWUuZ2V0VGltZSgpIC0gc3RhcnRUaW1lLnNldEhvdXJzKDAsIHN0YXJ0TWludXRlLCAwLCAwKSkgL1xuICAgICAgICAgICAgNjAwMDA7IC8vIGluIG1pbnV0ZXNcblxuICAgICAgICAgIGxldCBydW5UaW1lID1cbiAgICAgICAgICAgIG5ldyBEYXRlKGV2ZW50LndoZW4uZW5kX3RpbWUgKiAxMDAwKS5nZXRUaW1lKCkgLVxuICAgICAgICAgICAgbmV3IERhdGUoZXZlbnQud2hlbi5zdGFydF90aW1lICogMTAwMCkuZ2V0VGltZSgpO1xuICAgICAgICAgIHJ1blRpbWUgPSBydW5UaW1lIC8gNjAwMDA7IC8vIGluIG1pbnV0ZXNcblxuICAgICAgICAgIGV2ZW50LnJlbGF0aXZlU3RhcnRUaW1lID0gbWludXRlc0luVmlzaWJsZURheSAvIHRpbWVTcGFuO1xuICAgICAgICAgIGV2ZW50LnJlbGF0aXZlUnVuVGltZSA9IHJ1blRpbWUgLyB0aW1lU3BhbjtcblxuICAgICAgICAgIC8vIGxvY2F0aW9uIGFzIG1lZXRpbmc/IGxldCdzIGZpeCB0aGF0IVxuICAgICAgICAgIGlmIChldmVudC5sb2NhdGlvbj8uc3RhcnRzV2l0aChcImh0dHBcIikpIHtcbiAgICAgICAgICAgIGV2ZW50LmxvY2F0aW9uU3RyaW5nID0gYExpbms6ICR7bmV3IFVSTChldmVudC5sb2NhdGlvbikuaG9zdG5hbWV9YDtcbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuIGV2ZW50O1xuICAgICAgICB9KTtcblxuICAgICAgY29uc3QgaHlkcmF0ZWRUaW1lc3BhbnM6IFRpbWVzcGFuRXZlbnRbXSA9IGh5ZHJhdGVkRXZlbnRzLmZpbHRlcihcbiAgICAgICAgKGV2ZW50KTogZXZlbnQgaXMgVGltZXNwYW5FdmVudCA9PlxuICAgICAgICAgIFwic3RhcnRfdGltZVwiIGluIGV2ZW50LndoZW4gJiYgXCJlbmRfdGltZVwiIGluIGV2ZW50LndoZW4sXG4gICAgICApO1xuXG4gICAgICBpZiAoIWNvbmRlbnNlZCkge1xuICAgICAgICAvLyBFdmVudCBPdmVybGFwIGRldGVjdGlvbiBhbmQgcG9zaXRpb25pbmdcbiAgICAgICAgY29uc3QgcG9zaXRpb25NYXA6IFJlY29yZDxzdHJpbmcsIEV2ZW50UG9zaXRpb24+ID0ge307XG4gICAgICAgIHBvcHVsYXRlUG9zaXRpb25NYXAoaHlkcmF0ZWRUaW1lc3BhbnMsIHBvc2l0aW9uTWFwKTtcblxuICAgICAgICBoeWRyYXRlZFRpbWVzcGFuc1xuICAgICAgICAgIC8vIEVuc3VyZSBsb25nZXIgZXZlbnRzIGFyZSBwcm9jZXNzZWQgZmlyc3QsIHNvIHRoZXkgY2FuIGJlIHBsYWNlZCBhcyBmYXIgbGVmdCBhcyBwb3NzaWJsZVxuICAgICAgICAgIC5zb3J0KChhLCBiKSA9PlxuICAgICAgICAgICAgYS53aGVuLmVuZF90aW1lIC0gYS53aGVuLnN0YXJ0X3RpbWUgPFxuICAgICAgICAgICAgYi53aGVuLmVuZF90aW1lIC0gYi53aGVuLnN0YXJ0X3RpbWVcbiAgICAgICAgICAgICAgPyAxXG4gICAgICAgICAgICAgIDogLTEsXG4gICAgICAgICAgKVxuICAgICAgICAgIC5mb3JFYWNoKChldmVudCkgPT4gdXBkYXRlRXZlbnRQb3NpdGlvbihldmVudCwgcG9zaXRpb25NYXApKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGh5ZHJhdGVkVGltZXNwYW5zLmZvckVhY2goKGV2ZW50KSA9PiB7XG4gICAgICAgICAgZXZlbnQucmVsYXRpdmVPdmVybGFwV2lkdGggPSAxO1xuICAgICAgICAgIGV2ZW50LnJlbGF0aXZlT3ZlcmxhcE9mZnNldCA9IDA7XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH0gZWxzZSBpZiAoJEV2ZW50U3RvcmVbcXVlcnlLZXldKSB7XG4gICAgICAvLyBpZiB0aGVyZSdzIGEgc3RvcmUgZW50cnkgYnV0IGl0J3MgZW1wdHksIGl0IG1lYW5zIHlvdSd2ZSBmZXRjaGVkIGFuZCB0aGVyZSdzIG5vdGhpbmcuXG4gICAgICBoeWRyYXRlZEV2ZW50cyA9IFtdO1xuICAgIH1cbiAgfVxuXG4gIC8vICNlbmRyZWdpb24gRGF0YSBGbG93XG5cbiAgLy8gI3JlZ2lvbiBkYXRlIHNlbGVjdGlvblxuXG4gIGxldCBkYXRlSXNGaXJzdEFsbG93ZWQ6IGJvb2xlYW47XG4gICQ6IGRhdGVJc0ZpcnN0QWxsb3dlZCA9ICEhKFxuICAgIGFsbG93ZWREYXRlcz8ubGVuZ3RoICYmXG4gICAgYWxsb3dlZERhdGVzPy5maW5kSW5kZXgoXG4gICAgICAoZGF0ZTogRGF0ZSkgPT4gZGF0ZS50b0RhdGVTdHJpbmcoKSA9PT0gc2VsZWN0ZWREYXRlLnRvRGF0ZVN0cmluZygpLFxuICAgICkgPT09IDBcbiAgKTtcblxuICBsZXQgZGF0ZUlzTGFzdEFsbG93ZWQ6IGJvb2xlYW47XG4gICQ6IGRhdGVJc0xhc3RBbGxvd2VkID0gISEoXG4gICAgYWxsb3dlZERhdGVzPy5sZW5ndGggJiZcbiAgICBhbGxvd2VkRGF0ZXM/LmZpbmRJbmRleChcbiAgICAgIChkYXRlOiBEYXRlKSA9PiBkYXRlLnRvRGF0ZVN0cmluZygpID09PSBzZWxlY3RlZERhdGUudG9EYXRlU3RyaW5nKCksXG4gICAgKSA9PT1cbiAgICAgIGFsbG93ZWREYXRlcy5sZW5ndGggLSAxXG4gICk7XG5cbiAgY29uc3QgZ29Ub05leHREYXRlID0gKCkgPT4ge1xuICAgIGlmIChpc0NyZWF0aW5nTmV3RXZlbnQpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAoYWxsb3dlZERhdGVzLmxlbmd0aCkge1xuICAgICAgY29uc3QgZGF0ZVNwb3QgPSBhbGxvd2VkRGF0ZXMuZmluZEluZGV4KFxuICAgICAgICAoZGF0ZTogRGF0ZSkgPT4gZGF0ZS50b0RhdGVTdHJpbmcoKSA9PT0gc2VsZWN0ZWREYXRlLnRvRGF0ZVN0cmluZygpLFxuICAgICAgKTtcbiAgICAgIHNlbGVjdGVkRGF0ZSA9IGFsbG93ZWREYXRlc1tkYXRlU3BvdCArIDFdIHx8IHNlbGVjdGVkRGF0ZTtcbiAgICB9IGVsc2Uge1xuICAgICAgc2VsZWN0ZWREYXRlID0gdGltZURheS5vZmZzZXQoc2VsZWN0ZWREYXRlLCAxKTtcbiAgICB9XG4gICAgZGlzcGF0Y2hFdmVudChcbiAgICAgIFwiZGF0ZUNoYW5nZVwiLFxuICAgICAgbmV3IERhdGUobmV3IERhdGUoc2VsZWN0ZWREYXRlKS5zZXRIb3VycygwLCAwLCAwLCAwKSksXG4gICAgKTtcbiAgfTtcbiAgY29uc3QgZ29Ub1ByZXZpb3VzRGF0ZSA9ICgpID0+IHtcbiAgICBpZiAoaXNDcmVhdGluZ05ld0V2ZW50KSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKGFsbG93ZWREYXRlcy5sZW5ndGgpIHtcbiAgICAgIGNvbnN0IGRhdGVTcG90ID0gYWxsb3dlZERhdGVzLmZpbmRJbmRleChcbiAgICAgICAgKGRhdGU6IERhdGUpID0+IGRhdGUudG9EYXRlU3RyaW5nKCkgPT09IHNlbGVjdGVkRGF0ZS50b0RhdGVTdHJpbmcoKSxcbiAgICAgICk7XG4gICAgICBzZWxlY3RlZERhdGUgPSBhbGxvd2VkRGF0ZXNbZGF0ZVNwb3QgLSAxXSB8fCBzZWxlY3RlZERhdGU7XG4gICAgfSBlbHNlIHtcbiAgICAgIHNlbGVjdGVkRGF0ZSA9IHRpbWVEYXkub2Zmc2V0KHNlbGVjdGVkRGF0ZSwgLTEpO1xuICAgIH1cbiAgICBkaXNwYXRjaEV2ZW50KFxuICAgICAgXCJkYXRlQ2hhbmdlXCIsXG4gICAgICBuZXcgRGF0ZShuZXcgRGF0ZShzZWxlY3RlZERhdGUpLnNldEhvdXJzKDAsIDAsIDAsIDApKSxcbiAgICApO1xuICB9O1xuICAvLyAjZW5kcmVnaW9uIGRhdGUgc2VsZWN0aW9uXG5cbiAgLy8gI3JlZ2lvbiBwb3NpdGlvbiBhbmQgem9vbVxuICAkOiB0aWNrcyA9IFsuLi5BcnJheSgyNCkua2V5cygpXS5tYXAoKGtleSkgPT4ge1xuICAgIGNvbnN0IGRhdGUgPSBuZXcgRGF0ZSgpO1xuICAgIGRhdGUuc2V0SG91cnMoa2V5LCAwLCAwLCAwKTtcblxuICAgIGxldCBtaW51dGVzSW5WaXNpYmxlRGF5ID0gZW5kVGltZS5nZXRUaW1lKCkgLSBzdGFydFRpbWUuZ2V0VGltZSgpO1xuICAgIG1pbnV0ZXNJblZpc2libGVEYXkgPSBtaW51dGVzSW5WaXNpYmxlRGF5IC8gNjAwMDA7IC8vIGluIG1pbnV0ZXNcblxuICAgIHJldHVybiB7XG4gICAgICBrZXksXG4gICAgICBmb3JtYXR0ZWQ6IGRhdGUudG9Mb2NhbGVUaW1lU3RyaW5nKFwiZW4tVVNcIiwge1xuICAgICAgICBob3VyOiBcIm51bWVyaWNcIixcbiAgICAgICAgaG91cjEyOiB0cnVlLFxuICAgICAgfSksIC8vIFwiOSBBTVwiXG4gICAgICB0aW1lU3RyaW5nOiBkYXRlLnRvSVNPU3RyaW5nKCksXG4gICAgICB0aW1lU3RhbXA6IGRhdGUuZ2V0VGltZSgpLFxuICAgICAgZGF0ZSxcbiAgICAgIC8vIHJlbGF0aXZlVGlja1Bvc2l0aW9uOiBhIDAtMSByZXByZXNlbnRhdGlvbiBvZiBob3cgZmFyIGFsb25nIHRoZSB5LWF4aXMgZWFjaCB0aWNrIHNob3VsZCBsaXZlLlxuICAgICAgcmVsYXRpdmVUaWNrUG9zaXRpb246XG4gICAgICAgIChkYXRlLmdldFRpbWUoKSAtIHN0YXJ0VGltZS5nZXRUaW1lKCkpIC8gNjAwMDAgLyBtaW51dGVzSW5WaXNpYmxlRGF5LFxuICAgIH07XG4gIH0pO1xuXG4gICQ6IGN1cnJlbnRUaW1lID0gbmV3IERhdGUobm93ICsgdGltZXpvbmVPZmZzZXQpOyAvLyBzZWVtcyByZWR1bmRhbnQsIHJpZ2h0PyBuZXcgRGF0ZSgpIGRvZXMgdGhlIHNhbWUgdGhpbmcuIEJ1dCwgdGhlIGluY2x1c2lvbiBvZiBcIm5vd1wiIG1lYW5zIHRoYXQgY2hhbmdlcyB0byBpdCBhcmUgb2JzZXJ2ZWQgLS0gYW5kIHdlIGNoYW5nZSBldmVyeSBzZXRJbnRlcnZhbCBsb29wLlxuXG4gICQ6IGN1cnJlbnRUaW1lUG9zaXRpb24gPSAoKSA9PiB7XG4gICAgbGV0IGN1cnJlbnRTdGFydCA9IG5ldyBEYXRlKGN1cnJlbnRUaW1lKTtcblxuICAgIGNvbnN0IG1pbnV0ZXNJbkRheUJlZm9yZU5vdyA9XG4gICAgICAoY3VycmVudFRpbWUuZ2V0VGltZSgpIC0gY3VycmVudFN0YXJ0LnNldEhvdXJzKDAsIHN0YXJ0TWludXRlLCAwLCAwKSkgL1xuICAgICAgNjAwMDA7XG5cbiAgICBjb25zdCBtaW51dGVzSW5WaXNpYmxlRGF5ID1cbiAgICAgIChlbmRUaW1lLmdldFRpbWUoKSAtIHN0YXJ0VGltZS5nZXRUaW1lKCkpIC8gNjAwMDA7XG5cbiAgICByZXR1cm4gKG1pbnV0ZXNJbkRheUJlZm9yZU5vdyAvIG1pbnV0ZXNJblZpc2libGVEYXkpICogMTAwO1xuICB9O1xuXG4gIGxldCBhZ2VuZGFFbGVtZW50OiBIVE1MRWxlbWVudDtcbiAgbGV0IGNsaWVudEhlaWdodDogbnVtYmVyO1xuXG4gICQ6IGNvbmRlbnNlZCA9IF90aGlzLmNvbmRlbnNlZF92aWV3IHx8IChjbGllbnRIZWlnaHQgJiYgY2xpZW50SGVpZ2h0IDwgNTAwKTtcblxuICBsZXQgc2Nyb2xsaW5nID0gZmFsc2U7XG5cbiAgY29uc3QgaGFuZGxlV2hlZWwgPSAoZXZlbnQ6IFdoZWVsRXZlbnQpID0+IHtcbiAgICBpZiAoZXhwYW5kZWRFdmVudElkKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgc2Nyb2xsaW5nID0gdHJ1ZTtcbiAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgIHNjcm9sbGluZyA9IGZhbHNlO1xuICAgIH0sIDUwMCk7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICBjb25zdCBjYW52YXMgPSBhZ2VuZGFFbGVtZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgIGNvbnN0IG1vdXNlWVBvc2l0aW9uID0gZXZlbnQuY2xpZW50WSAtIGNhbnZhcy50b3A7XG4gICAgbGV0IHZlbG9jaXR5ID0gTWF0aC5hYnMoZXZlbnQuZGVsdGFZKSAvIDEwO1xuXG4gICAgLy8gY3RybEtleSA9IFBpbmNoLXRvLXpvb21cbiAgICBpZiAoZXZlbnQuY3RybEtleSkge1xuICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgIHZlbG9jaXR5ICo9IDIwO1xuICAgIH1cblxuICAgIGNvbnN0IGRpcmVjdGlvbiA9IGV2ZW50LmRlbHRhWSA+PSAwID8gXCJvdXRcIiA6IFwiaW5cIjtcblxuICAgIC8vIHpvb20gVE8geW91ciBtb3VzZSBwb3NpdGlvbiwgbm90IGp1c3QgdGhlIG1pZHBvaW50XG4gICAgLy8gY3JlYXRlcyBhIHR1cGxlIHJlcHJlc2VudGluZyBob3cgZmFyIGRvd250IGhlIGVsZW1lbnQgeW91IGFyZTtcbiAgICAvLyBzbyA2NSUgZG93biB0aGUgZWxlbWVudCB3b3VsZCBiZSBbMC42NSwgMC4zNV1cbiAgICBjb25zdCByYXRpbyA9IFtcbiAgICAgIG1vdXNlWVBvc2l0aW9uIC8gY2FudmFzLmhlaWdodCxcbiAgICAgIChjYW52YXMuaGVpZ2h0IC0gbW91c2VZUG9zaXRpb24pIC8gY2FudmFzLmhlaWdodCxcbiAgICBdO1xuXG4gICAgaWYgKGRpcmVjdGlvbiA9PT0gXCJvdXRcIikge1xuICAgICAgaWYgKGVuZE1pbnV0ZSA8PSAxNDQwICYmIGVuZE1pbnV0ZSArIHZlbG9jaXR5IDw9IDE0NDApIHtcbiAgICAgICAgZW5kTWludXRlICs9IHZlbG9jaXR5O1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZW5kTWludXRlID0gMTQ0MDtcbiAgICAgIH1cbiAgICAgIGlmIChzdGFydE1pbnV0ZSA+PSAwICYmIHN0YXJ0TWludXRlIC0gdmVsb2NpdHkgPj0gMCkge1xuICAgICAgICBzdGFydE1pbnV0ZSAtPSB2ZWxvY2l0eTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHN0YXJ0TWludXRlID0gMDtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoZGlyZWN0aW9uID09PSBcImluXCIpIHtcbiAgICAgIC8vIGRvbnQgZW50ZXIgdGhlIHVwc2lkZS1kb3duLCB5b3UnbGwgZW5jb3VudGVyIHRoZSBkZW1vZ29yZ29uXG4gICAgICBpZiAoZW5kTWludXRlID4gc3RhcnRNaW51dGUgKyA2MCkge1xuICAgICAgICAvLyBtYXgtem9vbTogNjAgbWludXRlc1xuICAgICAgICBzdGFydE1pbnV0ZSArPSB2ZWxvY2l0eSAqIHJhdGlvWzBdO1xuICAgICAgICBlbmRNaW51dGUgLT0gdmVsb2NpdHkgKiByYXRpb1sxXTtcbiAgICAgIH1cbiAgICB9XG4gIH07XG5cbiAgLy8gQWRqdXN0IHN0YXJ0L2VuZCBtaW51dGUgKHpvb20pIGV2ZW50cyBhcmUgbG9hZGVkXG4gICQ6IHtcbiAgICBzdGFydE1pbnV0ZSA9XG4gICAgICBfdGhpcy5hdXRvX3RpbWVfYm94ICYmIHRpbWVzcGFuRXZlbnRzPy5sZW5ndGhcbiAgICAgICAgPyBnZXREeW5hbWljU3RhcnRUaW1lKHRpbWVzcGFuRXZlbnRzWzBdKSArIHRpbWV6b25lT2Zmc2V0IC8gKDEwMDAgKiA2MClcbiAgICAgICAgOiBfdGhpcy5zdGFydF9taW51dGU7XG5cbiAgICBlbmRNaW51dGUgPVxuICAgICAgX3RoaXMuYXV0b190aW1lX2JveCAmJiB0aW1lc3BhbkV2ZW50cz8ubGVuZ3RoXG4gICAgICAgID8gZ2V0RHluYW1pY0VuZFRpbWUodGltZXNwYW5FdmVudHNbdGltZXNwYW5FdmVudHMubGVuZ3RoIC0gMV0pICtcbiAgICAgICAgICB0aW1lem9uZU9mZnNldCAvICgxMDAwICogNjApXG4gICAgICAgIDogX3RoaXMuZW5kX21pbnV0ZTtcbiAgfVxuXG4gIC8vICNlbmRyZWdpb24gcG9zaXRpb24gYW5kIHpvb21cblxuICAvLyAjcmVnaW9uIGV2ZW50IGhhbmRsZXJzXG4gIGxldCBleHBhbmRlZEV2ZW50SWQ6IHN0cmluZyA9IFwiXCI7XG4gIGxldCBsYXN0U3RhcnRNaW51dGU6IG51bWJlcjtcbiAgbGV0IGxhc3RFbmRNaW51dGU6IG51bWJlcjtcblxuICBmdW5jdGlvbiBldmVudENsaWNrZWQoXG4gICAgZXZlbnQ6IE1vdXNlRXZlbnQgfCBLZXlib2FyZEV2ZW50LFxuICAgIGNhbGVuZGFyRXZlbnQ6IEV2ZW50LFxuICApIHtcbiAgICBkaXNwYXRjaEV2ZW50KFwiZXZlbnRDbGlja2VkXCIsIGNhbGVuZGFyRXZlbnQpO1xuXG4gICAgaWYgKHR5cGVvZiBjbGlja19hY3Rpb24gPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgY29uc3QgY2xvbmVkRXZlbnQgPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KGNhbGVuZGFyRXZlbnQpKTtcbiAgICAgIGZvciAoY29uc3QgaW50ZXJuYWxQcm9wIG9mIElOVEVSTkFMX0VWRU5UX1BST1BTKSB7XG4gICAgICAgIGRlbGV0ZSBjbG9uZWRFdmVudFtpbnRlcm5hbFByb3BdO1xuICAgICAgfVxuICAgICAgY2xpY2tfYWN0aW9uKGV2ZW50LCBjbG9uZWRFdmVudCk7XG4gICAgfVxuXG4gICAgaWYgKGNsaWNrRGVmYXVsdCA9PT0gXCJleHBhbmRcIiAmJiBcInN0YXJ0X3RpbWVcIiBpbiBjYWxlbmRhckV2ZW50LndoZW4pIHtcbiAgICAgIGlmIChjYWxlbmRhckV2ZW50LmlkICE9PSBleHBhbmRlZEV2ZW50SWQpIHtcbiAgICAgICAgbGFzdFN0YXJ0TWludXRlID0gc3RhcnRNaW51dGU7XG4gICAgICAgIGxhc3RFbmRNaW51dGUgPSBlbmRNaW51dGU7XG4gICAgICAgIHN0YXJ0TWludXRlID0gZ2V0RHluYW1pY1N0YXJ0VGltZShjYWxlbmRhckV2ZW50KTtcbiAgICAgICAgZW5kTWludXRlID0gZ2V0RHluYW1pY0VuZFRpbWUoY2FsZW5kYXJFdmVudCk7XG4gICAgICAgIGV4cGFuZGVkRXZlbnRJZCA9IGNhbGVuZGFyRXZlbnQuaWQ7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBleHBhbmRlZEV2ZW50SWQgPSBcIlwiO1xuICAgICAgICBzdGFydE1pbnV0ZSA9IGxhc3RTdGFydE1pbnV0ZTtcbiAgICAgICAgZW5kTWludXRlID0gbGFzdEVuZE1pbnV0ZTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBsZXQgZHJhZ1N0YXRlID0geyBoZWxkOiBmYWxzZSwgeDogMCwgeTogMCB9O1xuICBsZXQgc3RpZmZuZXNzID0gMC4yO1xuICBsZXQgZGFtcGluZyA9IDAuNztcbiAgY29uc3QgZGFtcGVuZXIgPSBzcHJpbmcoXG4gICAgeyB4OiAwIH0sXG4gICAge1xuICAgICAgc3RpZmZuZXNzLFxuICAgICAgZGFtcGluZyxcbiAgICB9LFxuICApO1xuICAkOiBpZiAoZHJhZ1N0YXRlLnggPT09IDApIGRhbXBlbmVyLnNldCh7IHg6IDAgfSk7XG4gIGNvbnN0IE1JTl9EUkFHX0RJU1RBTkNFID0gNTA7XG4gIGNvbnN0IENMSUNLX0VOQUJMRURfQUZURVIgPSAxMDA7XG5cbiAgZnVuY3Rpb24gaGVhZGVyTW91c2VEb3duKGV2ZW50OiBQb2ludGVyRXZlbnQpIHtcbiAgICBkcmFnU3RhdGUgPSB7IGhlbGQ6IHRydWUsIHg6IGV2ZW50LmNsaWVudFgsIHk6IGV2ZW50LmNsaWVudFkgfTtcbiAgICBkYW1wZW5lci5zdGlmZm5lc3MgPSAxO1xuICAgIGRhbXBlbmVyLmRhbXBpbmcgPSAxO1xuICB9XG5cbiAgZnVuY3Rpb24gaGVhZGVyTW91c2VNb3ZlKGV2ZW50OiBQb2ludGVyRXZlbnQpIHtcbiAgICBpZiAoZHJhZ1N0YXRlLmhlbGQpIHtcbiAgICAgIGRhbXBlbmVyLnVwZGF0ZSgoKSA9PiAoe1xuICAgICAgICB4OlxuICAgICAgICAgIE1hdGguc2lnbihldmVudC5jbGllbnRYIC0gZHJhZ1N0YXRlLngpICpcbiAgICAgICAgICBNYXRoLnNxcnQoTWF0aC5hYnMoZXZlbnQuY2xpZW50WCAtIGRyYWdTdGF0ZS54KSksXG4gICAgICB9KSk7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gaGVhZGVyTW91c2VVcChldmVudDogUG9pbnRlckV2ZW50KSB7XG4gICAgaWYgKGRyYWdTdGF0ZS5oZWxkKSB7XG4gICAgICBsZXQgZGlzdGFuY2UgPSBldmVudC5jbGllbnRYIC0gZHJhZ1N0YXRlLng7XG4gICAgICBpZiAoTWF0aC5hYnMoZGlzdGFuY2UpID4gTUlOX0RSQUdfRElTVEFOQ0UgJiYgX3RoaXMuYWxsb3dfZGF0ZV9jaGFuZ2UpIHtcbiAgICAgICAgLy8geW91J3ZlIGJlZW4gbW92aW5nLCBub3QgY2xpY2tpbmcuXG4gICAgICAgIGlmIChkaXN0YW5jZSA+IDApIHtcbiAgICAgICAgICBnb1RvUHJldmlvdXNEYXRlKCk7XG4gICAgICAgIH0gZWxzZSBpZiAoZGlzdGFuY2UgPCAwKSB7XG4gICAgICAgICAgZ29Ub05leHREYXRlKCk7XG4gICAgICAgIH1cbiAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgZHJhZ1N0YXRlID0geyBoZWxkOiBmYWxzZSwgeDogMCwgeTogMCB9O1xuICAgICAgICB9LCBDTElDS19FTkFCTEVEX0FGVEVSKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGRyYWdTdGF0ZSA9IHsgaGVsZDogZmFsc2UsIHg6IDAsIHk6IDAgfTtcbiAgICAgIH1cbiAgICB9XG4gICAgZGFtcGVuZXIuc3RpZmZuZXNzID0gc3RpZmZuZXNzO1xuICAgIGRhbXBlbmVyLmRhbXBpbmcgPSBkYW1waW5nO1xuICAgIGRhbXBlbmVyLnNldCh7IHg6IDAgfSk7XG4gIH1cblxuICBmdW5jdGlvbiBzbmFwU3RhcnRUaW1lVG9UaW1lc3BhbkludGVydmFsKHlQb3NpdGlvbjogbnVtYmVyKSB7XG4gICAgLy8gQ2FsY3VsYXRlIHN0YXJ0IHRpbWUgJiBhZGp1c3QgZm9yIGN1cnJlbnQgem9vbVxuICAgIGNvbnN0IHJlbGF0aXZlU3RhcnRUaW1lID1cbiAgICAgIE1hdGguYWJzKHlQb3NpdGlvbiAtIGFnZW5kYUVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkueSkgL1xuICAgICAgYWdlbmRhRWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5oZWlnaHQ7XG4gICAgY29uc3Qgem9vbUFkanVzdGVkU3RhcnRUaW1lID0gdGltZVNwYW4gKiByZWxhdGl2ZVN0YXJ0VGltZSArIHN0YXJ0TWludXRlO1xuXG4gICAgLy8gUm91bmQgdG8gbmVhcmVzdCBzbmFwIGludGVydmFsICYgY29udmVydCBiYWNrIHRvIHJlbGF0aXZlIHBvc2l0aW9uXG4gICAgY29uc3Qgc25hcHBlZFN0YXJ0VGltZSA9XG4gICAgICBNYXRoLnJvdW5kKHpvb21BZGp1c3RlZFN0YXJ0VGltZSAvIF90aGlzLmV2ZW50X3NuYXBfaW50ZXJ2YWwpICpcbiAgICAgIF90aGlzLmV2ZW50X3NuYXBfaW50ZXJ2YWw7XG4gICAgcmV0dXJuIChzbmFwcGVkU3RhcnRUaW1lIC0gc3RhcnRNaW51dGUpIC8gdGltZVNwYW47XG4gIH1cblxuICBmdW5jdGlvbiBzbmFwUnVuVGltZVRvVGltZXNwYW5JbnRlcnZhbCh5UG9zaXRpb246IG51bWJlcikge1xuICAgIC8vIENhbGN1bGF0ZSBzdGFydCB0aW1lICYgYWRqdXN0IGZvciBjdXJyZW50IHpvb21cbiAgICBjb25zdCByZWxhdGl2ZVJ1blRpbWUgPVxuICAgICAgTWF0aC5hYnMoeVBvc2l0aW9uIC0gZHJhZ1N0YXRlLnkpIC9cbiAgICAgIGFnZW5kYUVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkuaGVpZ2h0O1xuICAgIGNvbnN0IHpvb21BZGp1c3RlZFJ1blRpbWUgPSB0aW1lU3BhbiAqIHJlbGF0aXZlUnVuVGltZTtcblxuICAgIC8vIFJvdW5kIHRvIG5lYXJlc3Qgc25hcCBpbnRlcnZhbCAmIGNvbnZlcnQgYmFjayB0byByZWxhdGl2ZSBwb3NpdGlvblxuICAgIGNvbnN0IHNuYXBwZWRSdW5UaW1lID1cbiAgICAgIE1hdGgucm91bmQoem9vbUFkanVzdGVkUnVuVGltZSAvIF90aGlzLmV2ZW50X3NuYXBfaW50ZXJ2YWwpICpcbiAgICAgIF90aGlzLmV2ZW50X3NuYXBfaW50ZXJ2YWw7XG4gICAgcmV0dXJuIHNuYXBwZWRSdW5UaW1lIC8gdGltZVNwYW47XG4gIH1cblxuICBsZXQgbmV3RXZlbnQ6IFRpbWVzcGFuRXZlbnQgfCBudWxsO1xuICBsZXQgaXNDcmVhdGluZ05ld0V2ZW50ID0gZmFsc2U7XG4gIGZ1bmN0aW9uIGFnZW5kYU1vdXNlRG93bihldmVudDogUG9pbnRlckV2ZW50KSB7XG4gICAgaWYgKFxuICAgICAgX3RoaXMuYWxsb3dfZXZlbnRfY3JlYXRpb24gJiZcbiAgICAgICFpc0NyZWF0aW5nTmV3RXZlbnQgJiZcbiAgICAgIEFycmF5LmlzQXJyYXkoZXZlbnRTb3VyY2UpXG4gICAgKSB7XG4gICAgICBkcmFnU3RhdGUgPSB7IGhlbGQ6IHRydWUsIHg6IGV2ZW50LmNsaWVudFgsIHk6IGV2ZW50LmNsaWVudFkgfTtcbiAgICAgIG5ld0V2ZW50ID0gPGFueT57XG4gICAgICAgIGlkOiBgJHtldmVudFNvdXJjZS5sZW5ndGh9YCxcbiAgICAgICAgdGl0bGU6IFwiTmV3IEV2ZW50XCIsXG4gICAgICAgIHJlbGF0aXZlU3RhcnRUaW1lOiBzbmFwU3RhcnRUaW1lVG9UaW1lc3BhbkludGVydmFsKGV2ZW50LmNsaWVudFkpLFxuICAgICAgICByZWxhdGl2ZVJ1blRpbWU6IDAsXG4gICAgICAgIHJlbGF0aXZlT3ZlcmxhcFdpZHRoOiAxLFxuICAgICAgICB3aGVuOiA8YW55Pnt9LFxuICAgICAgICBpc05ld0V2ZW50OiB0cnVlLFxuICAgICAgfTtcbiAgICAgIGlzQ3JlYXRpbmdOZXdFdmVudCA9IHRydWU7XG4gICAgfVxuICB9XG5cbiAgbGV0IG5lZ2F0aXZlRHJhZ1N0YXJ0UG9zaXRpb246IG51bWJlciB8IG51bGwgPSBudWxsO1xuICBmdW5jdGlvbiBhZ2VuZGFNb3VzZU1vdmUoZXZlbnQ6IFBvaW50ZXJFdmVudCkge1xuICAgIGlmIChcbiAgICAgIF90aGlzLmFsbG93X2V2ZW50X2NyZWF0aW9uICYmXG4gICAgICBkcmFnU3RhdGUuaGVsZCAmJlxuICAgICAgISFuZXdFdmVudCAmJlxuICAgICAgZXZlbnQuY2xpZW50WSA+IGFnZW5kYUVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkueVxuICAgICkge1xuICAgICAgaWYgKGRyYWdTdGF0ZS55IDw9IGV2ZW50LmNsaWVudFkpIHtcbiAgICAgICAgLy8gSWYgdGhlIGRyYWcgaXMgZG93bndhcmQsIHVwZGF0ZSB0aGUgZXZlbnQncyBydW50aW1lXG4gICAgICAgIGlmIChuZWdhdGl2ZURyYWdTdGFydFBvc2l0aW9uICE9PSBudWxsKSB7XG4gICAgICAgICAgbmV3RXZlbnQucmVsYXRpdmVTdGFydFRpbWUgPSBuZWdhdGl2ZURyYWdTdGFydFBvc2l0aW9uO1xuICAgICAgICAgIG5lZ2F0aXZlRHJhZ1N0YXJ0UG9zaXRpb24gPSBudWxsO1xuICAgICAgICB9XG4gICAgICAgIG5ld0V2ZW50LnJlbGF0aXZlUnVuVGltZSA9IHNuYXBSdW5UaW1lVG9UaW1lc3BhbkludGVydmFsKGV2ZW50LmNsaWVudFkpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gSWYgdGhlIGRyYWcgaXMgdXB3YXJkLCB1cGRhdGUgYm90aCB0aGUgZXZlbnQncyBzdGFydCB0aW1lIGFuZCBydW50aW1lXG4gICAgICAgIGlmIChuZWdhdGl2ZURyYWdTdGFydFBvc2l0aW9uID09PSBudWxsKSB7XG4gICAgICAgICAgbmVnYXRpdmVEcmFnU3RhcnRQb3NpdGlvbiA9IG5ld0V2ZW50LnJlbGF0aXZlU3RhcnRUaW1lO1xuICAgICAgICB9XG4gICAgICAgIG5ld0V2ZW50LnJlbGF0aXZlU3RhcnRUaW1lID0gc25hcFN0YXJ0VGltZVRvVGltZXNwYW5JbnRlcnZhbChcbiAgICAgICAgICBldmVudC5jbGllbnRZLFxuICAgICAgICApO1xuICAgICAgICBuZXdFdmVudC5yZWxhdGl2ZVJ1blRpbWUgPSBNYXRoLmFicyhcbiAgICAgICAgICBuZWdhdGl2ZURyYWdTdGFydFBvc2l0aW9uIC0gbmV3RXZlbnQucmVsYXRpdmVTdGFydFRpbWUsXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgICAvLyBFbnN1cmUgZXZlbnQgaGVpZ2h0IGlzIHVwZGF0ZWQgaW4gdGhlIERPTVxuICAgICAgbmV3RXZlbnQgPSB7IC4uLm5ld0V2ZW50IH07XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gYWdlbmRhTW91c2VVcCgpIHtcbiAgICBpZiAoXG4gICAgICBfdGhpcy5hbGxvd19ldmVudF9jcmVhdGlvbiAmJlxuICAgICAgZHJhZ1N0YXRlLmhlbGQgJiZcbiAgICAgIG5ld0V2ZW50ICYmXG4gICAgICBuZXdFdmVudC5yZWxhdGl2ZVJ1blRpbWUgPiAwXG4gICAgKSB7XG4gICAgICBjb25zdCB6b29tQWRqdXN0ZWRTdGFydFRpbWUgPVxuICAgICAgICAgIHRpbWVTcGFuICogbmV3RXZlbnQucmVsYXRpdmVTdGFydFRpbWUgKyBzdGFydE1pbnV0ZSxcbiAgICAgICAgem9vbUFkanVzdGVkUnVuVGltZSA9IHRpbWVTcGFuICogbmV3RXZlbnQucmVsYXRpdmVSdW5UaW1lO1xuXG4gICAgICBjb25zdCBjdXJyZW50RGF0ZSA9IG5ldyBEYXRlKHNlbGVjdGVkRGF0ZSk7XG4gICAgICBuZXdFdmVudC53aGVuLnN0YXJ0X3RpbWUgPSBNYXRoLmZsb29yKFxuICAgICAgICAoY3VycmVudERhdGUuc2V0SG91cnMoMCwgem9vbUFkanVzdGVkU3RhcnRUaW1lLCAwLCAwKSAtXG4gICAgICAgICAgdGltZXpvbmVPZmZzZXQpIC9cbiAgICAgICAgICAxMDAwLFxuICAgICAgKTtcbiAgICAgIG5ld0V2ZW50LndoZW4uZW5kX3RpbWUgPSBNYXRoLmZsb29yKFxuICAgICAgICAoY3VycmVudERhdGUuc2V0SG91cnMoXG4gICAgICAgICAgMCxcbiAgICAgICAgICB6b29tQWRqdXN0ZWRTdGFydFRpbWUgKyB6b29tQWRqdXN0ZWRSdW5UaW1lLFxuICAgICAgICAgIDAsXG4gICAgICAgICAgMCxcbiAgICAgICAgKSAtXG4gICAgICAgICAgdGltZXpvbmVPZmZzZXQpIC9cbiAgICAgICAgICAxMDAwLFxuICAgICAgKTtcbiAgICAgIGV2ZW50U291cmNlID0gWy4uLmV2ZW50U291cmNlLCBuZXdFdmVudF07XG5cbiAgICAgIGlmIChcbiAgICAgICAgdHlwZW9mIGV2ZW50X2NyZWF0ZWQgPT09IFwiZnVuY3Rpb25cIiAmJlxuICAgICAgICBBcnJheS5pc0FycmF5KGNhbGVuZGFySURzKSAmJlxuICAgICAgICBjYWxlbmRhcklEcy5sZW5ndGggPiAwXG4gICAgICApIHtcbiAgICAgICAgbmV3RXZlbnQuY2FsZW5kYXJfaWQgPSBjYWxlbmRhcklEc1swXTtcbiAgICAgICAgZXZlbnRfY3JlYXRlZChcbiAgICAgICAgICBuZXdFdmVudCBhcyBUaW1lc3BhbkV2ZW50LFxuICAgICAgICAgIHNhdmVFdmVudCxcbiAgICAgICAgICBjYW5jZWxFdmVudCxcbiAgICAgICAgICB1cGRhdGVFdmVudCxcbiAgICAgICAgKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGlzQ3JlYXRpbmdOZXdFdmVudCA9IGZhbHNlO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBpc0NyZWF0aW5nTmV3RXZlbnQgPSBmYWxzZTtcbiAgICB9XG4gICAgbmV3RXZlbnQgPSBudWxsO1xuICAgIG5lZ2F0aXZlRHJhZ1N0YXJ0UG9zaXRpb24gPSBudWxsO1xuICAgIGRyYWdTdGF0ZSA9IHsgaGVsZDogZmFsc2UsIHg6IDAsIHk6IDAgfTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGNsZWFuRXZlbnQoZXZlbnQ6IFRpbWVzcGFuRXZlbnQpIHtcbiAgICBpZiAodHlwZW9mIGV2ZW50LndoZW4uc3RhcnRfdGltZSA9PT0gXCJvYmplY3RcIikge1xuICAgICAgZXZlbnQud2hlbi5zdGFydF90aW1lID0gTWF0aC5mbG9vcihcbiAgICAgICAgKCg8RGF0ZT5ldmVudC53aGVuLnN0YXJ0X3RpbWUpLmdldFRpbWUoKSAtIHRpbWV6b25lT2Zmc2V0KSAvIDEwMDAsXG4gICAgICApO1xuICAgIH0gZWxzZSB7XG4gICAgICBldmVudC53aGVuLnN0YXJ0X3RpbWUgPSBNYXRoLmZsb29yKFxuICAgICAgICAoZXZlbnQud2hlbi5zdGFydF90aW1lIC0gdGltZXpvbmVPZmZzZXQpIC8gMTAwMCxcbiAgICAgICk7XG4gICAgfVxuXG4gICAgaWYgKHR5cGVvZiBldmVudC53aGVuLmVuZF90aW1lID09PSBcIm9iamVjdFwiKSB7XG4gICAgICBldmVudC53aGVuLmVuZF90aW1lID0gTWF0aC5mbG9vcihcbiAgICAgICAgKCg8RGF0ZT5ldmVudC53aGVuLmVuZF90aW1lKS5nZXRUaW1lKCkgLSB0aW1lem9uZU9mZnNldCkgLyAxMDAwLFxuICAgICAgKTtcbiAgICB9IGVsc2Uge1xuICAgICAgZXZlbnQud2hlbi5lbmRfdGltZSA9IE1hdGguZmxvb3IoXG4gICAgICAgIChldmVudC53aGVuLmVuZF90aW1lIC0gdGltZXpvbmVPZmZzZXQpIC8gMTAwMCxcbiAgICAgICk7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gdXBkYXRlRXZlbnQoZXZlbnQ6IFRpbWVzcGFuRXZlbnQpIHtcbiAgICBjbGVhbkV2ZW50KGV2ZW50KTtcblxuICAgIGxldCBtaW51dGVzSW5WaXNpYmxlRGF5ID1cbiAgICAgIG5ldyBEYXRlKGV2ZW50LndoZW4uc3RhcnRfdGltZSAqIDEwMDApLmdldFRpbWUoKSAtXG4gICAgICBuZXcgRGF0ZShcbiAgICAgICAgbmV3IERhdGUoZXZlbnQud2hlbi5zdGFydF90aW1lICogMTAwMCkuc2V0SG91cnMoMCwgc3RhcnRNaW51dGUsIDAsIDApLFxuICAgICAgKS5nZXRUaW1lKCk7XG4gICAgbWludXRlc0luVmlzaWJsZURheSA9IG1pbnV0ZXNJblZpc2libGVEYXkgLyA2MDAwMDsgLy8gaW4gbWludXRlc1xuXG4gICAgbGV0IHJ1blRpbWUgPVxuICAgICAgbmV3IERhdGUoZXZlbnQud2hlbi5lbmRfdGltZSAqIDEwMDApLmdldFRpbWUoKSAtXG4gICAgICBuZXcgRGF0ZShldmVudC53aGVuLnN0YXJ0X3RpbWUgKiAxMDAwKS5nZXRUaW1lKCk7XG4gICAgcnVuVGltZSA9IHJ1blRpbWUgLyA2MDAwMDsgLy8gaW4gbWludXRlc1xuXG4gICAgZXZlbnQucmVsYXRpdmVTdGFydFRpbWUgPSBtaW51dGVzSW5WaXNpYmxlRGF5IC8gdGltZVNwYW47XG4gICAgZXZlbnQucmVsYXRpdmVSdW5UaW1lID0gcnVuVGltZSAvIHRpbWVTcGFuO1xuXG4gICAgZXZlbnRTb3VyY2VbZXZlbnRTb3VyY2UubGVuZ3RoIC0gMV0gPSBldmVudDtcbiAgICBldmVudFNvdXJjZSA9IFsuLi5ldmVudFNvdXJjZV07XG4gIH1cblxuICBmdW5jdGlvbiBzYXZlRXZlbnQoZXZlbnQ6IFRpbWVzcGFuRXZlbnQpIHtcbiAgICBpZiAodHlwZW9mIGV2ZW50ICE9PSBcIm9iamVjdFwiKSB7XG4gICAgICBjb25zb2xlLndhcm4oXCJJbnZhbGlkIGV2ZW50IG9iamVjdCBwcm92aWRlZC5cIik7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY2xlYW5FdmVudChldmVudCk7XG5cbiAgICBFdmVudFN0b3JlLmNyZWF0ZUV2ZW50KGV2ZW50LCBxdWVyeSk7XG4gICAgZXZlbnRTb3VyY2VbZXZlbnRTb3VyY2UubGVuZ3RoIC0gMV0uaXNOZXdFdmVudCA9IGZhbHNlO1xuICAgIGlzQ3JlYXRpbmdOZXdFdmVudCA9IGZhbHNlO1xuICB9XG5cbiAgZnVuY3Rpb24gY2FuY2VsRXZlbnQoKSB7XG4gICAgZXZlbnRTb3VyY2UucG9wKCk7XG4gICAgZXZlbnRTb3VyY2UgPSBbLi4uZXZlbnRTb3VyY2VdO1xuICAgIGlzQ3JlYXRpbmdOZXdFdmVudCA9IGZhbHNlO1xuICB9XG5cbiAgLy8gI2VuZHJlZ2lvbiBldmVudCBoYW5kbGVyc1xuPC9zY3JpcHQ+XG5cbjxzdHlsZSBsYW5nPVwic2Nzc1wiPlxuICBAaW1wb3J0IFwiLi9zdHlsZXMvYWdlbmRhLnNjc3NcIjtcbjwvc3R5bGU+XG5cbjxueWxhcy1lcnJvciB7aWR9IC8+XG5cbnsjaWYgdGhlbWVVcmx9XG4gIDxsaW5rIHJlbD1cInN0eWxlc2hlZXRcIiBocmVmPXt0aGVtZVVybH0gLz5cbnsvaWZ9XG5cbjxtYWluXG4gIGNsYXNzOm55bGFzLWFnZW5kYT17dHJ1ZX1cbiAgY2xhc3M6aGVhZGxlc3M9e190aGlzLmhlYWRlcl90eXBlID09PSBcIm5vbmVcIn1cbiAgY2xhc3M9eyEhdGhlbWVVcmwgPyBcImN1c3RvbVwiIDogX3RoaXMudGhlbWV9PlxuICB7I2F3YWl0IGh5ZHJhdGVkRXZlbnRzfVxuICAgIChsb2FkaW5nIGV2ZW50cylcbiAgezp0aGVuIGxvYWRlZEV2ZW50c31cbiAgICB7I2lmIF90aGlzLmhlYWRlcl90eXBlICE9PSBcIm5vbmVcIn1cbiAgICAgIDxoZWFkZXJcbiAgICAgICAgb246cG9pbnRlcmRvd249e2hlYWRlck1vdXNlRG93bn1cbiAgICAgICAgb246cG9pbnRlcm1vdmU9e2hlYWRlck1vdXNlTW92ZX1cbiAgICAgICAgb246cG9pbnRlcnVwPXtoZWFkZXJNb3VzZVVwfVxuICAgICAgICBvbjptb3VzZWxlYXZlPXtoZWFkZXJNb3VzZVVwfT5cbiAgICAgICAgeyNpZiBfdGhpcy5oZWFkZXJfdHlwZSA9PT0gXCJmdWxsXCJ9XG4gICAgICAgICAgPGRpdiBjbGFzcz1cIm1vbnRoXCI+XG4gICAgICAgICAgICA8aDE+XG4gICAgICAgICAgICAgIHtzZWxlY3RlZERhdGU/LnRvTG9jYWxlU3RyaW5nKFwiZGVmYXVsdFwiLCB7IG1vbnRoOiBcImxvbmdcIiB9KX1cbiAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJ5ZWFyXCJcbiAgICAgICAgICAgICAgICA+e3NlbGVjdGVkRGF0ZT8udG9Mb2NhbGVTdHJpbmcoXCJkZWZhdWx0XCIsIHtcbiAgICAgICAgICAgICAgICAgIHllYXI6IFwibnVtZXJpY1wiLFxuICAgICAgICAgICAgICAgIH0pfTwvc3Bhbj5cbiAgICAgICAgICAgIDwvaDE+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIHsvaWZ9XG4gICAgICAgIDxkaXYgY2xhc3M9XCJkYXlcIiBjbGFzczphbGxvd19kYXRlX2NoYW5nZT17X3RoaXMuYWxsb3dfZGF0ZV9jaGFuZ2V9PlxuICAgICAgICAgIHsjaWYgX3RoaXMuYWxsb3dfZGF0ZV9jaGFuZ2V9XG4gICAgICAgICAgICA8YnV0dG9uXG4gICAgICAgICAgICAgIGRpc2FibGVkPXtkYXRlSXNGaXJzdEFsbG93ZWR9XG4gICAgICAgICAgICAgIG9uOmNsaWNrPXtnb1RvUHJldmlvdXNEYXRlfVxuICAgICAgICAgICAgICBjbGFzcz1cInByZXYgY2hhbmdlLWRhdGVcIj5cbiAgICAgICAgICAgICAgPHN2Z1xuICAgICAgICAgICAgICAgIHdpZHRoPVwiMTRcIlxuICAgICAgICAgICAgICAgIGhlaWdodD1cIjIzXCJcbiAgICAgICAgICAgICAgICB2aWV3Qm94PVwiMCAwIDE0IDIzXCJcbiAgICAgICAgICAgICAgICB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCI+XG4gICAgICAgICAgICAgICAgPHBhdGhcbiAgICAgICAgICAgICAgICAgIGQ9XCJNMC4zNzEyNzIgMTIuNDEzTDEwLjYyNzggMjIuNDI2NEMxMS4xMjI1IDIyLjkwOTMgMTEuOTI0NSAyMi45MDkzIDEyLjQxOTEgMjIuNDI2NEwxMy42MTUzIDIxLjI1ODVDMTQuMTA5MiAyMC43NzY0IDE0LjExMDEgMTkuOTk1IDEzLjYxNzUgMTkuNTExN0w1LjQ4ODk1IDExLjUzODVMMTMuNjE3NSAzLjU2NTQxQzE0LjExMDEgMy4wODIxNiAxNC4xMDkyIDIuMzAwNzkgMTMuNjE1MyAxLjgxODY4TDEyLjQxOTEgMC42NTA3NzhDMTEuOTI0NCAwLjE2NzgzOSAxMS4xMjI0IDAuMTY3ODM5IDEwLjYyNzggMC42NTA3NzhMMC4zNzEyNzIgMTAuNjY0MUMtMC4xMjMzMzggMTEuMTQ3MSAtMC4xMjMzMzggMTEuOTMgMC4zNzEyNzIgMTIuNDEzWlwiIC8+XG4gICAgICAgICAgICAgIDwvc3ZnPlxuICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgey9pZn1cbiAgICAgICAgICA8aDI+XG4gICAgICAgICAgICB7c2VsZWN0ZWREYXRlPy50b0xvY2FsZVN0cmluZyhcImRlZmF1bHRcIiwge1xuICAgICAgICAgICAgICB3ZWVrZGF5OiBjb25kZW5zZWQgPyBcInNob3J0XCIgOiBcImxvbmdcIixcbiAgICAgICAgICAgIH0pfVxuICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJkYXRlXCJcbiAgICAgICAgICAgICAgPntzZWxlY3RlZERhdGU/LnRvTG9jYWxlU3RyaW5nKFwiZGVmYXVsdFwiLCB7XG4gICAgICAgICAgICAgICAgZGF5OiBcIm51bWVyaWNcIixcbiAgICAgICAgICAgICAgfSl9XG4gICAgICAgICAgICA8L3NwYW4+XG4gICAgICAgICAgPC9oMj5cbiAgICAgICAgICB7I2lmIF90aGlzLmFsbG93X2RhdGVfY2hhbmdlfVxuICAgICAgICAgICAgPGJ1dHRvblxuICAgICAgICAgICAgICBkaXNhYmxlZD17ZGF0ZUlzTGFzdEFsbG93ZWR9XG4gICAgICAgICAgICAgIG9uOmNsaWNrPXtnb1RvTmV4dERhdGV9XG4gICAgICAgICAgICAgIGNsYXNzPVwibmV4dCBjaGFuZ2UtZGF0ZVwiPlxuICAgICAgICAgICAgICA8c3ZnXG4gICAgICAgICAgICAgICAgd2lkdGg9XCIxNFwiXG4gICAgICAgICAgICAgICAgaGVpZ2h0PVwiMjNcIlxuICAgICAgICAgICAgICAgIHZpZXdCb3g9XCIwIDAgMTQgMjNcIlxuICAgICAgICAgICAgICAgIHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIj5cbiAgICAgICAgICAgICAgICA8cGF0aFxuICAgICAgICAgICAgICAgICAgZD1cIk0xMy42MTUzIDEwLjY2NDJMMy4zNTg3MyAwLjY1MDc3OEMyLjg2NDA3IDAuMTY3ODQgMi4wNjIxIDAuMTY3ODQgMS41Njc0OSAwLjY1MDc3OEwwLjM3MTIyOSAxLjgxODY4Qy0wLjEyMjU5IDIuMzAwNzkgLTAuMTIzNTM5IDMuMDgyMTYgMC4zNjkxMTggMy41NjU0MUw4LjQ5NzYzIDExLjUzODZMMC4zNjkxMTggMTkuNTExN0MtMC4xMjM1MzkgMTkuOTk1IC0wLjEyMjU5IDIwLjc3NjQgMC4zNzEyMjkgMjEuMjU4NUwxLjU2NzQ5IDIyLjQyNjRDMi4wNjIxNSAyMi45MDkzIDIuODY0MTIgMjIuOTA5MyAzLjM1ODczIDIyLjQyNjRMMTMuNjE1MyAxMi40MTNDMTQuMTA5OSAxMS45MzAxIDE0LjEwOTkgMTEuMTQ3MSAxMy42MTUzIDEwLjY2NDJaXCIgLz5cbiAgICAgICAgICAgICAgPC9zdmc+XG4gICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICB7L2lmfVxuICAgICAgICA8L2Rpdj5cbiAgICAgIDwvaGVhZGVyPlxuICAgIHsvaWZ9XG4gICAgPGRpdiBjbGFzcz1cImFsbC1kYXlcIj5cbiAgICAgIHsjaWYgIV90aGlzLmhpZGVfYWxsX2RheV9ldmVudHN9XG4gICAgICAgIDx1bCBjbGFzcz1cImV2ZW50cyB7X3RoaXMudGhlbWV9XCI+XG4gICAgICAgICAgeyNpZiBBcnJheS5pc0FycmF5KGFsbERheUV2ZW50cyl9XG4gICAgICAgICAgICB7I2VhY2ggYWxsRGF5RXZlbnRzIGFzIGV2ZW50fVxuICAgICAgICAgICAgICA8bGlcbiAgICAgICAgICAgICAgICB0YWJpbmRleD1cIjBcIlxuICAgICAgICAgICAgICAgIGNsYXNzPVwiZXZlbnQgc3RhdHVzLXtldmVudC5hdHRlbmRlZVN0YXR1c31cIlxuICAgICAgICAgICAgICAgIGRhdGEtY2FsZW5kYXItaWQ9e2NhbGVuZGFySURzPy5pbmRleE9mKGV2ZW50LmNhbGVuZGFyX2lkKSArIDF9XG4gICAgICAgICAgICAgICAgb246Y2xpY2s9eyhldikgPT4gZXZlbnRDbGlja2VkKGV2LCBldmVudCl9XG4gICAgICAgICAgICAgICAgb246a2V5dXA9eyhldikgPT4ge1xuICAgICAgICAgICAgICAgICAgaWYgKGV2LmtleSA9PT0gXCJFbnRlclwiKSB7XG4gICAgICAgICAgICAgICAgICAgIGV2ZW50Q2xpY2tlZChldiwgZXZlbnQpO1xuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH19PlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJpbm5lclwiPlxuICAgICAgICAgICAgICAgICAgeyNpZiAhc2hvd0FzQnVzeX1cbiAgICAgICAgICAgICAgICAgICAgPGgyPntldmVudC50aXRsZX08L2gyPlxuICAgICAgICAgICAgICAgICAgezplbHNlfVxuICAgICAgICAgICAgICAgICAgICA8aDI+QnVzeTwvaDI+XG4gICAgICAgICAgICAgICAgICB7L2lmfVxuICAgICAgICAgICAgICAgICAgeyNpZiAhc2hvd0FzQnVzeX1cbiAgICAgICAgICAgICAgICAgICAgeyNpZiBldmVudC5sb2NhdGlvbn1cbiAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cImxvY2F0aW9uXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICB7I2lmIGV2ZW50LmxvY2F0aW9uU3RyaW5nfVxuICAgICAgICAgICAgICAgICAgICAgICAgICA8YSBocmVmPXtldmVudC5sb2NhdGlvbn0gdGFyZ2V0PVwiX2JsYW5rXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge2V2ZW50LmxvY2F0aW9uU3RyaW5nfVxuICAgICAgICAgICAgICAgICAgICAgICAgICA8L2E+XG4gICAgICAgICAgICAgICAgICAgICAgICB7OmVsc2V9e2V2ZW50LmxvY2F0aW9ufXsvaWZ9XG4gICAgICAgICAgICAgICAgICAgICAgPC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICB7L2lmfVxuICAgICAgICAgICAgICAgICAgICA8cD5cbiAgICAgICAgICAgICAgICAgICAgICB7QGh0bWwgRE9NUHVyaWZ5LnNhbml0aXplKGV2ZW50LmRlc2NyaXB0aW9uID8/IFwiXCIpfVxuICAgICAgICAgICAgICAgICAgICA8L3A+XG4gICAgICAgICAgICAgICAgICAgIHsjaWYgX3RoaXMuZGlzcGxheV9tZXRhZGF0YSAmJiBldmVudC5tZXRhZGF0YSAmJiBPYmplY3Qua2V5cyhldmVudC5tZXRhZGF0YSk/Lmxlbmd0aH1cbiAgICAgICAgICAgICAgICAgICAgICA8dWwgY2xhc3M9XCJtZXRhZGF0YVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgeyNlYWNoIE9iamVjdC5lbnRyaWVzKGV2ZW50Lm1ldGFkYXRhKSBhcyBlbnRyeX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAge0Bjb25zdCBrZXkgPSBlbnRyeVswXX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAge0Bjb25zdCB2YWx1ZSA9IGVudHJ5WzFdfVxuICAgICAgICAgICAgICAgICAgICAgICAgICA8bGk+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHN0cm9uZz57a2V5fTo8L3N0cm9uZz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7dmFsdWV9XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDwvbGk+XG4gICAgICAgICAgICAgICAgICAgICAgICB7L2VhY2h9XG4gICAgICAgICAgICAgICAgICAgICAgPC91bD5cbiAgICAgICAgICAgICAgICAgICAgey9pZn1cbiAgICAgICAgICAgICAgICAgIHsvaWZ9XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgIDwvbGk+XG4gICAgICAgICAgICB7L2VhY2h9XG4gICAgICAgICAgey9pZn1cbiAgICAgICAgPC91bD5cbiAgICAgIHsvaWZ9XG4gICAgPC9kaXY+XG5cbiAgICA8ZGl2XG4gICAgICBjbGFzcz1cInRpbWVzcGFuXCJcbiAgICAgIGNsYXNzOmNvbmRlbnNlZFxuICAgICAgY2xhc3M6aGlkZS10aWNrcz17X3RoaXMuaGlkZV90aWNrc31cbiAgICAgIG9uOnNlbGVjdHN0YXJ0PXsoZXZlbnQpID0+IHtcbiAgICAgICAgaWYgKF90aGlzLmFsbG93X2V2ZW50X2NyZWF0aW9uKSB7XG4gICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgfVxuICAgICAgfX0+XG4gICAgICA8ZGl2IGNsYXNzPVwib2Zmc2V0XCI+XG4gICAgICAgIDxzcGFuPlxuICAgICAgICAgIHt0aW1lem9uZU9mZnNldE5hbWV9XG4gICAgICAgIDwvc3Bhbj5cbiAgICAgIDwvZGl2PlxuICAgICAgPGRpdiBjbGFzcz1cInRpY2tzXCI+XG4gICAgICAgIHsjZWFjaCB0aWNrcyBhcyB0aWNrfVxuICAgICAgICAgIDxzcGFuIHN0eWxlPVwidG9wOiB7dGljay5yZWxhdGl2ZVRpY2tQb3NpdGlvbiAqIDEwMH0lXCIgY2xhc3M9XCJ0aWNrXCI+XG4gICAgICAgICAgICB7dGljay5mb3JtYXR0ZWR9XG4gICAgICAgICAgPC9zcGFuPlxuICAgICAgICB7L2VhY2h9XG4gICAgICA8L2Rpdj5cbiAgICAgIDx1bFxuICAgICAgICBjbGFzcz1cImV2ZW50cyB7X3RoaXMudGhlbWV9XCJcbiAgICAgICAgY2xhc3M6ZGlmZi1ieS1jYWxlbmRhcj17X3RoaXMuY29sb3JfYnkgPT09IFwiY2FsZW5kYXJcIn1cbiAgICAgICAgY2xhc3M6ZGlmZi1ieS1ldmVudD17X3RoaXMuY29sb3JfYnkgPT09IFwiZXZlbnRcIn1cbiAgICAgICAgY2xhc3M6b3ZlcmZsb3dpbmdcbiAgICAgICAgY2xhc3M6c2Nyb2xsaW5nXG4gICAgICAgIHN0eWxlPVwidHJhbnNmb3JtOlxuICAgICAgICB0cmFuc2xhdGUoeyRkYW1wZW5lci54fXB4LDBweClcIlxuICAgICAgICBiaW5kOnRoaXM9e2FnZW5kYUVsZW1lbnR9XG4gICAgICAgIGJpbmQ6Y2xpZW50SGVpZ2h0XG4gICAgICAgIG9uOndoZWVsPXtfdGhpcy5wcmV2ZW50X3pvb20gfHwgY29uZGVuc2VkID8gKCkgPT4ge30gOiBoYW5kbGVXaGVlbH1cbiAgICAgICAgb246cG9pbnRlcmRvd249e2FnZW5kYU1vdXNlRG93bn1cbiAgICAgICAgb246cG9pbnRlcm1vdmU9e2FnZW5kYU1vdXNlTW92ZX1cbiAgICAgICAgb246cG9pbnRlcnVwPXthZ2VuZGFNb3VzZVVwfVxuICAgICAgICBvbjptb3VzZWxlYXZlPXthZ2VuZGFNb3VzZVVwfT5cbiAgICAgICAgeyNpZiBsb2FkZWRFdmVudHMubGVuZ3RoIHx8ICghX3RoaXMuc2hvd19ub19ldmVudHNfbWVzc2FnZSAmJiAhJGxvYWRpbmdFdmVudHMpfVxuICAgICAgICAgIDxkaXYgY2xhc3M9XCJob3VyLXRpY2tzXCI+XG4gICAgICAgICAgICB7I2VhY2ggdGlja3MgYXMgdGlja31cbiAgICAgICAgICAgICAgPHNwYW4gc3R5bGU9XCJ0b3A6IHt0aWNrLnJlbGF0aXZlVGlja1Bvc2l0aW9uICogMTAwfSVcIiAvPlxuICAgICAgICAgICAgey9lYWNofVxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICB7L2lmfVxuICAgICAgICB7I2lmIGxvYWRlZEV2ZW50cy5sZW5ndGh9XG4gICAgICAgICAgeyNlYWNoIFsuLi5sb2FkZWRFdmVudHMsIG5ld0V2ZW50XSBhcyBldmVudH1cbiAgICAgICAgICAgIHsjaWYgZXZlbnQgJiYgZXZlbnQucmVsYXRpdmVTdGFydFRpbWUgIT09IHVuZGVmaW5lZH1cbiAgICAgICAgICAgICAgPGxpXG4gICAgICAgICAgICAgICAgdGFiaW5kZXg9XCIwXCJcbiAgICAgICAgICAgICAgICBjbGFzczpuZXctZXZlbnQ9e2V2ZW50LmlzTmV3RXZlbnR9XG4gICAgICAgICAgICAgICAgb246Y2xpY2s9eyhldikgPT4gZXZlbnRDbGlja2VkKGV2LCBldmVudCl9XG4gICAgICAgICAgICAgICAgb246a2V5dXA9eyhldikgPT4ge1xuICAgICAgICAgICAgICAgICAgaWYgKGV2LmtleSA9PT0gXCJFbnRlclwiKSB7XG4gICAgICAgICAgICAgICAgICAgIGV2ZW50Q2xpY2tlZChldiwgZXZlbnQpO1xuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgY2xhc3M6ZXhwYW5kZWQ9e2V4cGFuZGVkRXZlbnRJZCA9PT0gZXZlbnQuaWR9XG4gICAgICAgICAgICAgICAgY2xhc3M9XCJldmVudCBzdGF0dXMte2V2ZW50LmF0dGVuZGVlU3RhdHVzfVwiXG4gICAgICAgICAgICAgICAgZGF0YS1jYWxlbmRhci1pZD17Y2FsZW5kYXJJRHM/LmluZGV4T2YoZXZlbnQuY2FsZW5kYXJfaWQpICsgMX1cbiAgICAgICAgICAgICAgICBzdHlsZT1cInRvcDoge2V2ZW50LnJlbGF0aXZlU3RhcnRUaW1lICogMTAwfSU7IGhlaWdodDogXG4gICAgICAgICAgICAgICAge2NvbmRlbnNlZFxuICAgICAgICAgICAgICAgICAgPyBgY2FsYygke2V2ZW50LnJlbGF0aXZlUnVuVGltZSAqIDEwMH0lIC0gNHB4KWBcbiAgICAgICAgICAgICAgICAgIDogYGNhbGMoJHtldmVudC5yZWxhdGl2ZVJ1blRpbWUgKiAxMDB9JSAgLSA0cHgpYH07XG4gICAgICAgICAgICAgICAgbGVmdDoge2V2ZW50LnJlbGF0aXZlT3ZlcmxhcE9mZnNldCAqIDEwMH0lOyBcbiAgICAgICAgICAgICAgICB3aWR0aDogY2FsYyh7ZXZlbnQucmVsYXRpdmVPdmVybGFwV2lkdGggKiAxMDB9JSAtIDRweClcIj5cbiAgICAgICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgICBjbGFzcz1cImlubmVyXCJcbiAgICAgICAgICAgICAgICAgIGNsYXNzOnRpbnktZXZlbnQ9e2V2ZW50LnJlbGF0aXZlUnVuVGltZSA8PSAwLjAzfT5cbiAgICAgICAgICAgICAgICAgIHsjaWYgIXNob3dBc0J1c3l9XG4gICAgICAgICAgICAgICAgICAgIDxoMj57ZXZlbnQudGl0bGV9PC9oMj5cbiAgICAgICAgICAgICAgICAgIHs6ZWxzZX1cbiAgICAgICAgICAgICAgICAgICAgPGgyPkJ1c3k8L2gyPlxuICAgICAgICAgICAgICAgICAgey9pZn1cbiAgICAgICAgICAgICAgICAgIHsjaWYgZXZlbnQud2hlbiAmJiBcInN0YXJ0X3RpbWVcIiBpbiBldmVudC53aGVufVxuICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cInRpbWVcIj5cbiAgICAgICAgICAgICAgICAgICAgICB7Zm9ybWF0VGltZVNsb3QoXG4gICAgICAgICAgICAgICAgICAgICAgICBuZXcgRGF0ZShldmVudC53aGVuLnN0YXJ0X3RpbWUgKiAxMDAwKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLnRpbWV6b25lLFxuICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgIDwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgIHsvaWZ9XG4gICAgICAgICAgICAgICAgICB7I2lmICFzaG93QXNCdXN5fVxuICAgICAgICAgICAgICAgICAgICB7I2lmIGV2ZW50LmxvY2F0aW9ufVxuICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwibG9jYXRpb25cIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIHsjaWYgZXZlbnQubG9jYXRpb25TdHJpbmd9XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxhIGhyZWY9e2V2ZW50LmxvY2F0aW9ufSB0YXJnZXQ9XCJfYmxhbmtcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ZXZlbnQubG9jYXRpb25TdHJpbmd9XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDwvYT5cbiAgICAgICAgICAgICAgICAgICAgICAgIHs6ZWxzZX17ZXZlbnQubG9jYXRpb259ey9pZn1cbiAgICAgICAgICAgICAgICAgICAgICA8L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgIHsvaWZ9XG4gICAgICAgICAgICAgICAgICAgIDxwPlxuICAgICAgICAgICAgICAgICAgICAgIHtAaHRtbCBET01QdXJpZnkuc2FuaXRpemUoZXZlbnQuZGVzY3JpcHRpb24gPz8gXCJcIil9XG4gICAgICAgICAgICAgICAgICAgIDwvcD5cbiAgICAgICAgICAgICAgICAgICAgeyNpZiBfdGhpcy5kaXNwbGF5X21ldGFkYXRhICYmIGV2ZW50Lm1ldGFkYXRhICYmIE9iamVjdC5rZXlzKGV2ZW50Lm1ldGFkYXRhKT8ubGVuZ3RofVxuICAgICAgICAgICAgICAgICAgICAgIDx1bCBjbGFzcz1cIm1ldGFkYXRhXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICB7I2VhY2ggT2JqZWN0LmVudHJpZXMoZXZlbnQubWV0YWRhdGEpIGFzIGVudHJ5fVxuICAgICAgICAgICAgICAgICAgICAgICAgICB7QGNvbnN0IGtleSA9IGVudHJ5WzBdfVxuICAgICAgICAgICAgICAgICAgICAgICAgICB7QGNvbnN0IHZhbHVlID0gZW50cnlbMV19XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxsaT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3Ryb25nPntrZXl9Ojwvc3Ryb25nPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHt2YWx1ZX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPC9saT5cbiAgICAgICAgICAgICAgICAgICAgICAgIHsvZWFjaH1cbiAgICAgICAgICAgICAgICAgICAgICA8L3VsPlxuICAgICAgICAgICAgICAgICAgICB7L2lmfVxuICAgICAgICAgICAgICAgICAgey9pZn1cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgPC9saT5cbiAgICAgICAgICAgIHsvaWZ9XG4gICAgICAgICAgey9lYWNofVxuICAgICAgICAgIHsjaWYgIV90aGlzLmhpZGVfY3VycmVudF90aW1lfVxuICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJub3dcIiBzdHlsZT1cInRvcDoge2N1cnJlbnRUaW1lUG9zaXRpb24oKX0lO1wiPlxuICAgICAgICAgICAgICA8c3ZnXG4gICAgICAgICAgICAgICAgd2lkdGg9XCIzOVwiXG4gICAgICAgICAgICAgICAgaGVpZ2h0PVwiMTZcIlxuICAgICAgICAgICAgICAgIHZpZXdCb3g9XCIwIDAgMzkgMTZcIlxuICAgICAgICAgICAgICAgIGZpbGw9XCJub25lXCJcbiAgICAgICAgICAgICAgICB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCI+XG4gICAgICAgICAgICAgICAgPHBhdGhcbiAgICAgICAgICAgICAgICAgIGQ9XCJNOCAwQzMuNTgxNzIgMCAwIDMuNTgxNzIgMCA4QzAgMTIuNDE4MyAzLjU4MTcyIDE2IDggMTZIMjRDMjcuNzI3NyAxNiAzMC44NTk5IDEzLjQ1MDUgMzEuNzQ4IDEwSDM5VjZIMzEuNzQ4QzMwLjg1OTkgMi41NDk1NSAyNy43Mjc3IDAgMjQgMEg4Wk00IDhDNCA1Ljc5MDg2IDUuNzkwODYgNCA4IDRIMjRDMjYuMjA5MSA0IDI4IDUuNzkwODYgMjggOEMyOCAxMC4yMDkxIDI2LjIwOTEgMTIgMjQgMTJIOEM1Ljc5MDg2IDEyIDQgMTAuMjA5MSA0IDhaXCIgLz5cbiAgICAgICAgICAgICAgPC9zdmc+XG4gICAgICAgICAgICA8L3NwYW4+XG4gICAgICAgICAgey9pZn1cbiAgICAgICAgezplbHNlIGlmIF90aGlzLnNob3dfbm9fZXZlbnRzX21lc3NhZ2UgJiYgISRsb2FkaW5nRXZlbnRzICYmICRFdmVudFN0b3JlW3F1ZXJ5S2V5XX1cbiAgICAgICAgICA8bGkgY2xhc3M9XCJuby1ldmVudHNcIj5cbiAgICAgICAgICAgIE5vIGV2ZW50cyBmb3Ige3NlbGVjdGVkRGF0ZS50b0RhdGVTdHJpbmcoKX1cbiAgICAgICAgICA8L2xpPlxuICAgICAgICB7L2lmfVxuICAgICAgPC91bD5cbiAgICA8L2Rpdj5cbiAgey9hd2FpdH1cbjwvbWFpbj5cbiJdLCJuYW1lcyI6WyJpbml0aWFsaXplIiwiX19zcHJlYWRQcm9wcyIsIl9fc3ByZWFkVmFsdWVzIiwiSUFOQVpvbmUiLCJEYXRlVGltZSIsInRoaXMiLCJpbnRlcnZhbCIsIkRPTVB1cmlmeS5zYW5pdGl6ZSJdLCJtYXBwaW5ncyI6Im1QQUFhLElBQWlCLE9BQU8sZUFBZSxPQUFPLEtBQ3pELE9BQU8sZ0JBRVQsT0FBTyxlQUFlLE9BQVMsQ0FBQyxLQUFpQixJQUFTLElBQ3BELGdCQUFlLElBQUksU0FHaEIsSUFBZSxFQUFNLEdBQUcsSUNQakMsYUFBZ0IsRUFFaEIsWUFBZ0IsRUFBSyxFQUFLLENBRXRCLFNBQVcsS0FBSyxHQUNaLEVBQUksR0FBSyxFQUFJLEdBQ2pCLE1BQU8sR0FFWCxZQUFvQixFQUFPLENBQ3ZCLE1BQU8sSUFBUyxNQUFPLElBQVUsVUFBWSxNQUFPLEdBQU0sTUFBUyxXQU92RSxZQUFhLEVBQUksQ0FDYixNQUFPLEtBRVgsYUFBd0IsQ0FDcEIsTUFBTyxRQUFPLE9BQU8sTUFFekIsWUFBaUIsRUFBSyxDQUNsQixFQUFJLFFBQVEsSUFFaEIsWUFBcUIsRUFBTyxDQUN4QixNQUFPLE9BQU8sSUFBVSxXQUU1QixZQUF3QixFQUFHLEVBQUcsQ0FDMUIsTUFBTyxJQUFLLEVBQUksR0FBSyxFQUFJLElBQU0sR0FBTyxHQUFLLE1BQU8sSUFBTSxVQUFhLE1BQU8sSUFBTSxXQVV0RixZQUFtQixFQUFHLEVBQUcsQ0FDckIsTUFBTyxJQUFLLEVBQUksR0FBSyxFQUFJLElBQU0sRUFFbkMsWUFBa0IsRUFBSyxDQUNuQixNQUFPLFFBQU8sS0FBSyxHQUFLLFNBQVcsRUFPdkMsWUFBbUIsS0FBVSxFQUFXLENBQ3BDLEdBQUksR0FBUyxLQUNULE1BQU8sSUFFWCxLQUFNLEdBQVEsRUFBTSxVQUFVLEdBQUcsR0FDakMsTUFBTyxHQUFNLFlBQWMsSUFBTSxFQUFNLGNBQWdCLEVBTzNELFlBQTZCLEVBQVcsRUFBTyxFQUFVLENBQ3JELEVBQVUsR0FBRyxXQUFXLEtBQUssR0FBVSxFQUFPLElBb0RsRCxZQUFnQyxFQUFPLENBQ25DLEtBQU0sR0FBUyxHQUNmLFNBQVcsS0FBSyxHQUNaLEFBQUksRUFBRSxLQUFPLEtBQ1QsR0FBTyxHQUFLLEVBQU0sSUFDMUIsTUFBTyxHQXNDWCxLQUFNLElBQVksTUFBTyxTQUFXLFlBQ3BDLEdBQUksSUFBTSxHQUNKLElBQU0sT0FBTyxZQUFZLE1BQ3pCLElBQU0sS0FBSyxNQUNiLEdBQU0sR0FBWSxHQUFNLHNCQUFzQixHQUFNLEdBU3hELEtBQU0sSUFBUSxHQUFJLEtBQ2xCLFlBQW1CLEVBQUssQ0FDcEIsR0FBTSxRQUFRLEdBQVEsQ0FDbEIsQUFBSyxFQUFLLEVBQUUsSUFDUixJQUFNLE9BQU8sR0FDYixFQUFLLE9BR1QsR0FBTSxPQUFTLEdBQ2YsR0FBSSxJQVlaLFlBQWMsRUFBVSxDQUNwQixHQUFJLEdBQ0osTUFBSSxJQUFNLE9BQVMsR0FDZixHQUFJLElBQ0QsQ0FDSCxRQUFTLEdBQUksU0FBUSxHQUFXLENBQzVCLEdBQU0sSUFBSSxFQUFPLENBQUUsRUFBRyxFQUFVLEVBQUcsTUFFdkMsT0FBUSxDQUNKLEdBQU0sT0FBTyxLQTBHekIsV0FBZ0IsRUFBUSxFQUFNLENBQzFCLEVBQU8sWUFBWSxHQW9EdkIsV0FBZ0IsRUFBUSxFQUFNLEVBQVEsQ0FDbEMsRUFBTyxhQUFhLEVBQU0sR0FBVSxNQVV4QyxXQUFnQixFQUFNLENBQ2xCLEVBQUssV0FBVyxZQUFZLEdBRWhDLFlBQXNCLEVBQVksRUFBVyxDQUN6QyxPQUFTLEdBQUksRUFBRyxFQUFJLEVBQVcsT0FBUSxHQUFLLEVBQ3hDLEFBQUksRUFBVyxJQUNYLEVBQVcsR0FBRyxFQUFFLEdBRzVCLFdBQWlCLEVBQU0sQ0FDbkIsTUFBTyxVQUFTLGNBQWMsR0FpQmxDLFlBQXFCLEVBQU0sQ0FDdkIsTUFBTyxVQUFTLGdCQUFnQiw2QkFBOEIsR0FFbEUsWUFBYyxFQUFNLENBQ2hCLE1BQU8sVUFBUyxlQUFlLEdBRW5DLGFBQWlCLENBQ2IsTUFBTyxJQUFLLEtBRWhCLGFBQWlCLENBQ2IsTUFBTyxJQUFLLElBRWhCLFlBQWdCLEVBQU0sRUFBTyxFQUFTLEVBQVMsQ0FDM0MsU0FBSyxpQkFBaUIsRUFBTyxFQUFTLEdBQy9CLElBQU0sRUFBSyxvQkFBb0IsRUFBTyxFQUFTLEdBOEIxRCxXQUFjLEVBQU0sRUFBVyxFQUFPLENBQ2xDLEFBQUksR0FBUyxLQUNULEVBQUssZ0JBQWdCLEdBQ2hCLEVBQUssYUFBYSxLQUFlLEdBQ3RDLEVBQUssYUFBYSxFQUFXLEdBNEJyQyxZQUFpQyxFQUFNLEVBQU0sRUFBTyxDQUNoRCxBQUFJLElBQVEsR0FDUixFQUFLLEdBQVEsTUFBTyxHQUFLLElBQVUsV0FBYSxJQUFVLEdBQUssR0FBTyxFQUd0RSxFQUFLLEVBQU0sRUFBTSxHQTJCekIsWUFBa0IsRUFBUyxDQUN2QixNQUFPLE9BQU0sS0FBSyxFQUFRLFlBd0g5QixZQUFrQixFQUFNLEVBQU0sQ0FDMUIsRUFBTyxHQUFLLEVBQ1IsRUFBSyxZQUFjLEdBQ25CLEdBQUssS0FBTyxHQWFwQixZQUFtQixFQUFNLEVBQUssRUFBTyxFQUFXLENBQzVDLEFBQUksSUFBVSxLQUNWLEVBQUssTUFBTSxlQUFlLEdBRzFCLEVBQUssTUFBTSxZQUFZLEVBQUssRUFBTyxFQUFZLFlBQWMsSUE0QnJFLEdBQUksSUFDSixhQUEwQixDQUN0QixHQUFJLEtBQWdCLE9BQVcsQ0FDM0IsR0FBYyxHQUNkLEdBQUksQ0FDQSxBQUFJLE1BQU8sU0FBVyxhQUFlLE9BQU8sUUFDbkMsT0FBTyxPQUFPLGVBR3BCLEVBQVAsQ0FDSSxHQUFjLElBR3RCLE1BQU8sSUFFWCxZQUE2QixFQUFNLEVBQUksQ0FFbkMsQUFBSSxBQURtQixpQkFBaUIsR0FDckIsV0FBYSxVQUM1QixHQUFLLE1BQU0sU0FBVyxZQUUxQixLQUFNLEdBQVMsRUFBUSxVQUN2QixFQUFPLGFBQWEsUUFBUywrSkFFN0IsRUFBTyxhQUFhLGNBQWUsUUFDbkMsRUFBTyxTQUFXLEdBQ2xCLEtBQU0sR0FBYyxLQUNwQixHQUFJLEdBQ0osTUFBSSxHQUNBLEdBQU8sSUFBTSxrRkFDYixFQUFjLEdBQU8sT0FBUSxVQUFXLEFBQUMsR0FBVSxDQUMvQyxBQUFJLEVBQU0sU0FBVyxFQUFPLGVBQ3hCLE9BSVIsR0FBTyxJQUFNLGNBQ2IsRUFBTyxPQUFTLElBQU0sQ0FDbEIsRUFBYyxHQUFPLEVBQU8sY0FBZSxTQUFVLEtBRzdELEVBQU8sRUFBTSxHQUNOLElBQU0sQ0FDVCxBQUFJLElBR0ssR0FBZSxFQUFPLGdCQUMzQixJQUVKLEVBQU8sSUFHZixZQUFzQixFQUFTLEVBQU0sRUFBUSxDQUN6QyxFQUFRLFVBQVUsRUFBUyxNQUFRLFVBQVUsR0ErRGpELFlBQTZCLEVBQVksQ0FDckMsS0FBTSxHQUFTLEdBQ2YsU0FBVyxLQUFhLEdBQ3BCLEVBQU8sRUFBVSxNQUFRLEVBQVUsTUFFdkMsTUFBTyxHQWlKWCxHQUFJLElBQ0osWUFBK0IsRUFBVyxDQUN0QyxHQUFvQixFQUV4QixhQUFpQyxDQUM3QixHQUFJLENBQUMsR0FDRCxLQUFNLElBQUksT0FBTSxvREFDcEIsTUFBTyxJQUtYLFlBQWlCLEVBQUksQ0FDakIsS0FBd0IsR0FBRyxTQUFTLEtBQUssR0E2QzdDLEtBQU0sSUFBbUIsR0FFbkIsR0FBb0IsR0FDcEIsR0FBbUIsR0FDbkIsR0FBa0IsR0FDbEIsR0FBbUIsUUFBUSxVQUNqQyxHQUFJLElBQW1CLEdBQ3ZCLGFBQTJCLENBQ3ZCLEFBQUssSUFDRCxJQUFtQixHQUNuQixHQUFpQixLQUFLLEtBRzlCLGFBQWdCLENBQ1osWUFDTyxHQUVYLFlBQTZCLEVBQUksQ0FDN0IsR0FBaUIsS0FBSyxHQXVCMUIsS0FBTSxJQUFpQixHQUFJLEtBQzNCLEdBQUksSUFBVyxFQUNmLGFBQWlCLENBQ2IsS0FBTSxHQUFrQixHQUN4QixFQUFHLENBR0MsS0FBTyxHQUFXLEdBQWlCLFFBQVEsQ0FDdkMsS0FBTSxHQUFZLEdBQWlCLElBQ25DLEtBQ0EsR0FBc0IsR0FDdEIsR0FBTyxFQUFVLElBS3JCLElBSEEsR0FBc0IsTUFDdEIsR0FBaUIsT0FBUyxFQUMxQixHQUFXLEVBQ0osR0FBa0IsUUFDckIsR0FBa0IsUUFJdEIsT0FBUyxHQUFJLEVBQUcsRUFBSSxHQUFpQixPQUFRLEdBQUssRUFBRyxDQUNqRCxLQUFNLEdBQVcsR0FBaUIsR0FDbEMsQUFBSyxHQUFlLElBQUksSUFFcEIsSUFBZSxJQUFJLEdBQ25CLEtBR1IsR0FBaUIsT0FBUyxRQUNyQixHQUFpQixRQUMxQixLQUFPLEdBQWdCLFFBQ25CLEdBQWdCLFFBRXBCLEdBQW1CLEdBQ25CLEdBQWUsUUFDZixHQUFzQixHQUUxQixZQUFnQixFQUFJLENBQ2hCLEdBQUksRUFBRyxXQUFhLEtBQU0sQ0FDdEIsRUFBRyxTQUNILEdBQVEsRUFBRyxlQUNYLEtBQU0sR0FBUSxFQUFHLE1BQ2pCLEVBQUcsTUFBUSxDQUFDLElBQ1osRUFBRyxVQUFZLEVBQUcsU0FBUyxFQUFFLEVBQUcsSUFBSyxHQUNyQyxFQUFHLGFBQWEsUUFBUSxLQWlCaEMsS0FBTSxJQUFXLEdBQUksS0FDckIsR0FBSSxJQUNKLGFBQXdCLENBQ3BCLEdBQVMsQ0FDTCxFQUFHLEVBQ0gsRUFBRyxHQUNILEVBQUcsSUFHWCxhQUF3QixDQUNwQixBQUFLLEdBQU8sR0FDUixHQUFRLEdBQU8sR0FFbkIsR0FBUyxHQUFPLEVBRXBCLFlBQXVCLEVBQU8sRUFBTyxDQUNqQyxBQUFJLEdBQVMsRUFBTSxHQUNmLElBQVMsT0FBTyxHQUNoQixFQUFNLEVBQUUsSUFHaEIsWUFBd0IsRUFBTyxFQUFPLEVBQVEsRUFBVSxDQUNwRCxHQUFJLEdBQVMsRUFBTSxFQUFHLENBQ2xCLEdBQUksR0FBUyxJQUFJLEdBQ2IsT0FDSixHQUFTLElBQUksR0FDYixHQUFPLEVBQUUsS0FBSyxJQUFNLENBQ2hCLEdBQVMsT0FBTyxHQUNaLEdBQ0ksSUFDQSxFQUFNLEVBQUUsR0FDWixPQUdSLEVBQU0sRUFBRSxJQXFPaEIsWUFBd0IsRUFBUyxFQUFNLENBQ25DLEtBQU0sR0FBUSxFQUFLLE1BQVEsR0FDM0IsV0FBZ0IsRUFBTSxFQUFPLEVBQUssRUFBTyxDQUNyQyxHQUFJLEVBQUssUUFBVSxFQUNmLE9BQ0osRUFBSyxTQUFXLEVBQ2hCLEdBQUksR0FBWSxFQUFLLElBQ3JCLEFBQUksSUFBUSxRQUNSLEdBQVksRUFBVSxRQUN0QixFQUFVLEdBQU8sR0FFckIsS0FBTSxHQUFRLEdBQVMsR0FBSyxRQUFVLEdBQU0sR0FDNUMsR0FBSSxHQUFjLEdBQ2xCLEFBQUksRUFBSyxPQUNMLENBQUksRUFBSyxPQUNMLEVBQUssT0FBTyxRQUFRLENBQUMsRUFBTyxJQUFNLENBQzlCLEFBQUksSUFBTSxHQUFTLEdBQ2YsTUFDQSxHQUFlLEVBQU8sRUFBRyxFQUFHLElBQU0sQ0FDOUIsQUFBSSxFQUFLLE9BQU8sS0FBTyxHQUNuQixHQUFLLE9BQU8sR0FBSyxRQUd6QixRQUtSLEVBQUssTUFBTSxFQUFFLEdBRWpCLEVBQU0sSUFDTixHQUFjLEVBQU8sR0FDckIsRUFBTSxFQUFFLEVBQUssUUFBUyxFQUFLLFFBQzNCLEVBQWMsSUFFbEIsRUFBSyxNQUFRLEVBQ1QsRUFBSyxRQUNMLEdBQUssT0FBTyxHQUFTLEdBQ3JCLEdBQ0EsS0FHUixHQUFJLEdBQVcsR0FBVSxDQUNyQixLQUFNLEdBQW9CLEtBYzFCLEdBYkEsRUFBUSxLQUFLLEdBQVMsQ0FDbEIsR0FBc0IsR0FDdEIsRUFBTyxFQUFLLEtBQU0sRUFBRyxFQUFLLE1BQU8sR0FDakMsR0FBc0IsT0FDdkIsR0FBUyxDQUlSLEdBSEEsR0FBc0IsR0FDdEIsRUFBTyxFQUFLLE1BQU8sRUFBRyxFQUFLLE1BQU8sR0FDbEMsR0FBc0IsTUFDbEIsQ0FBQyxFQUFLLFNBQ04sS0FBTSxLQUlWLEVBQUssVUFBWSxFQUFLLFFBQ3RCLFNBQU8sRUFBSyxRQUFTLEdBQ2QsT0FHVixDQUNELEdBQUksRUFBSyxVQUFZLEVBQUssS0FDdEIsU0FBTyxFQUFLLEtBQU0sRUFBRyxFQUFLLE1BQU8sR0FDMUIsR0FFWCxFQUFLLFNBQVcsR0FHeEIsWUFBbUMsRUFBTSxFQUFLLEVBQU8sQ0FDakQsS0FBTSxHQUFZLEVBQUksUUFDaEIsQ0FBRSxZQUFhLEVBQ3JCLEFBQUksRUFBSyxVQUFZLEVBQUssTUFDdEIsR0FBVSxFQUFLLE9BQVMsR0FFeEIsRUFBSyxVQUFZLEVBQUssT0FDdEIsR0FBVSxFQUFLLE9BQVMsR0FFNUIsRUFBSyxNQUFNLEVBQUUsRUFBVyxHQStWNUIsWUFBeUIsRUFBVyxFQUFRLEVBQVEsRUFBZSxDQUMvRCxLQUFNLENBQUUsV0FBVSxXQUFVLGFBQVksZ0JBQWlCLEVBQVUsR0FDbkUsR0FBWSxFQUFTLEVBQUUsRUFBUSxHQUMxQixHQUVELEdBQW9CLElBQU0sQ0FDdEIsS0FBTSxHQUFpQixFQUFTLElBQUksSUFBSyxPQUFPLElBQ2hELEFBQUksRUFDQSxFQUFXLEtBQUssR0FBRyxHQUtuQixHQUFRLEdBRVosRUFBVSxHQUFHLFNBQVcsS0FHaEMsRUFBYSxRQUFRLElBRXpCLFlBQTJCLEVBQVcsRUFBVyxDQUM3QyxLQUFNLEdBQUssRUFBVSxHQUNyQixBQUFJLEVBQUcsV0FBYSxNQUNoQixJQUFRLEVBQUcsWUFDWCxFQUFHLFVBQVksRUFBRyxTQUFTLEVBQUUsR0FHN0IsRUFBRyxXQUFhLEVBQUcsU0FBVyxLQUM5QixFQUFHLElBQU0sSUFHakIsWUFBb0IsRUFBVyxFQUFHLENBQzlCLEFBQUksRUFBVSxHQUFHLE1BQU0sS0FBTyxJQUMxQixJQUFpQixLQUFLLEdBQ3RCLEtBQ0EsRUFBVSxHQUFHLE1BQU0sS0FBSyxJQUU1QixFQUFVLEdBQUcsTUFBTyxFQUFJLEdBQU0sSUFBTyxHQUFNLEVBQUksR0FFbkQsWUFBYyxFQUFXLEVBQVMsRUFBVSxFQUFpQixFQUFXLEVBQU8sRUFBZSxFQUFRLENBQUMsSUFBSyxDQUN4RyxLQUFNLEdBQW1CLEdBQ3pCLEdBQXNCLEdBQ3RCLEtBQU0sR0FBSyxFQUFVLEdBQUssQ0FDdEIsU0FBVSxLQUNWLElBQUssS0FFTCxRQUNBLE9BQVEsR0FDUixZQUNBLE1BQU8sS0FFUCxTQUFVLEdBQ1YsV0FBWSxHQUNaLGNBQWUsR0FDZixjQUFlLEdBQ2YsYUFBYyxHQUNkLFFBQVMsR0FBSSxLQUFJLEVBQVEsU0FBWSxHQUFtQixFQUFpQixHQUFHLFFBQVUsS0FFdEYsVUFBVyxLQUNYLFFBQ0EsV0FBWSxHQUNaLEtBQU0sRUFBUSxRQUFVLEVBQWlCLEdBQUcsTUFFaEQsR0FBaUIsRUFBYyxFQUFHLE1BQ2xDLEdBQUksR0FBUSxHQWtCWixHQWpCQSxFQUFHLElBQU0sRUFDSCxFQUFTLEVBQVcsRUFBUSxPQUFTLEdBQUksQ0FBQyxFQUFHLEtBQVEsSUFBUyxDQUM1RCxLQUFNLEdBQVEsRUFBSyxPQUFTLEVBQUssR0FBSyxFQUN0QyxNQUFJLEdBQUcsS0FBTyxFQUFVLEVBQUcsSUFBSSxHQUFJLEVBQUcsSUFBSSxHQUFLLElBQ3ZDLEVBQUMsRUFBRyxZQUFjLEVBQUcsTUFBTSxJQUMzQixFQUFHLE1BQU0sR0FBRyxHQUNaLEdBQ0EsR0FBVyxFQUFXLElBRXZCLElBRVQsR0FDTixFQUFHLFNBQ0gsRUFBUSxHQUNSLEdBQVEsRUFBRyxlQUVYLEVBQUcsU0FBVyxFQUFrQixFQUFnQixFQUFHLEtBQU8sR0FDdEQsRUFBUSxPQUFRLENBQ2hCLEdBQUksRUFBUSxRQUFTLENBRWpCLEtBQU0sR0FBUSxHQUFTLEVBQVEsUUFFL0IsRUFBRyxVQUFZLEVBQUcsU0FBUyxFQUFFLEdBQzdCLEVBQU0sUUFBUSxPQUlkLEdBQUcsVUFBWSxFQUFHLFNBQVMsSUFFL0IsQUFBSSxFQUFRLE9BQ1IsR0FBYyxFQUFVLEdBQUcsVUFDL0IsR0FBZ0IsRUFBVyxFQUFRLE9BQVEsRUFBUSxPQUFRLEVBQVEsZUFFbkUsS0FFSixHQUFzQixHQUUxQixHQUFJLElBQ0osQUFBSSxNQUFPLGNBQWdCLFlBQ3ZCLElBQWdCLGFBQWMsWUFBWSxDQUN0QyxhQUFjLENBQ1YsUUFDQSxLQUFLLGFBQWEsQ0FBRSxLQUFNLFNBRTlCLG1CQUFvQixDQUNoQixLQUFNLENBQUUsWUFBYSxLQUFLLEdBQzFCLEtBQUssR0FBRyxjQUFnQixFQUFTLElBQUksSUFBSyxPQUFPLElBRWpELFNBQVcsS0FBTyxNQUFLLEdBQUcsUUFFdEIsS0FBSyxZQUFZLEtBQUssR0FBRyxRQUFRLElBR3pDLHlCQUF5QixFQUFNLEVBQVcsRUFBVSxDQUNoRCxLQUFLLEdBQVEsRUFFakIsc0JBQXVCLENBQ25CLEdBQVEsS0FBSyxHQUFHLGVBRXBCLFVBQVcsQ0FDUCxHQUFrQixLQUFNLEdBQ3hCLEtBQUssU0FBVyxHQUVwQixJQUFJLEVBQU0sRUFBVSxDQUVoQixLQUFNLEdBQWEsS0FBSyxHQUFHLFVBQVUsSUFBVSxNQUFLLEdBQUcsVUFBVSxHQUFRLElBQ3pFLFNBQVUsS0FBSyxHQUNSLElBQU0sQ0FDVCxLQUFNLEdBQVEsRUFBVSxRQUFRLEdBQ2hDLEFBQUksSUFBVSxJQUNWLEVBQVUsT0FBTyxFQUFPLElBR3BDLEtBQUssRUFBUyxDQUNWLEFBQUksS0FBSyxPQUFTLENBQUMsR0FBUyxJQUN4QixNQUFLLEdBQUcsV0FBYSxHQUNyQixLQUFLLE1BQU0sR0FDWCxLQUFLLEdBQUcsV0FBYSxPQzk0RHJDLEtBQU0sSUFBbUIsR0FNekIsWUFBa0IsRUFBTyxFQUFPLENBQzVCLE1BQU8sQ0FDSCxVQUFXLEdBQVMsRUFBTyxHQUFPLFdBUTFDLFlBQWtCLEVBQU8sRUFBUSxHQUFNLENBQ25DLEdBQUksR0FDSixLQUFNLEdBQWMsR0FBSSxLQUN4QixXQUFhLEVBQVcsQ0FDcEIsR0FBSSxHQUFlLEVBQU8sSUFDdEIsR0FBUSxFQUNKLEdBQU0sQ0FDTixLQUFNLEdBQVksQ0FBQyxHQUFpQixPQUNwQyxTQUFXLEtBQWMsR0FDckIsRUFBVyxLQUNYLEdBQWlCLEtBQUssRUFBWSxHQUV0QyxHQUFJLEVBQVcsQ0FDWCxPQUFTLEdBQUksRUFBRyxFQUFJLEdBQWlCLE9BQVEsR0FBSyxFQUM5QyxHQUFpQixHQUFHLEdBQUcsR0FBaUIsRUFBSSxJQUVoRCxHQUFpQixPQUFTLElBSzFDLFdBQWdCLEVBQUksQ0FDaEIsRUFBSSxFQUFHLElBRVgsV0FBbUIsRUFBSyxFQUFhLEdBQU0sQ0FDdkMsS0FBTSxHQUFhLENBQUMsRUFBSyxHQUN6QixTQUFZLElBQUksR0FDWixFQUFZLE9BQVMsR0FDckIsR0FBTyxFQUFNLElBQVEsSUFFekIsRUFBSSxHQUNHLElBQU0sQ0FDVCxFQUFZLE9BQU8sR0FDZixFQUFZLE9BQVMsR0FDckIsS0FDQSxFQUFPLE9BSW5CLE1BQU8sQ0FBRSxNQUFLLFNBQVEsYUFFMUIsWUFBaUIsRUFBUSxFQUFJLEVBQWUsQ0FDeEMsS0FBTSxHQUFTLENBQUMsTUFBTSxRQUFRLEdBQ3hCLEVBQWUsRUFDZixDQUFDLEdBQ0QsRUFDQSxFQUFPLEVBQUcsT0FBUyxFQUN6QixNQUFPLElBQVMsRUFBZSxBQUFDLEdBQVEsQ0FDcEMsR0FBSSxHQUFTLEdBQ2IsS0FBTSxHQUFTLEdBQ2YsR0FBSSxHQUFVLEVBQ1YsRUFBVSxHQUNkLEtBQU0sR0FBTyxJQUFNLENBQ2YsR0FBSSxFQUNBLE9BRUosSUFDQSxLQUFNLEdBQVMsRUFBRyxFQUFTLEVBQU8sR0FBSyxFQUFRLEdBQy9DLEFBQUksRUFDQSxFQUFJLEdBR0osRUFBVSxHQUFZLEdBQVUsRUFBUyxJQUczQyxFQUFnQixFQUFhLElBQUksQ0FBQyxFQUFPLElBQU0sR0FBVSxFQUFPLEFBQUMsR0FBVSxDQUM3RSxFQUFPLEdBQUssRUFDWixHQUFXLENBQUUsSUFBSyxHQUNkLEdBQ0EsS0FFTCxJQUFNLENBQ0wsR0FBWSxHQUFLLEtBRXJCLFNBQVMsR0FDVCxJQUNPLFVBQWdCLENBQ25CLEdBQVEsR0FDUixPQzdGWixZQUFpQixFQUFLLENBQ2xCLE1BQU8sUUFBTyxVQUFVLFNBQVMsS0FBSyxLQUFTLGdCQUduRCxZQUFxQixFQUFLLEVBQVksRUFBZSxFQUFjLENBQy9ELEdBQUksTUFBTyxJQUFrQixVQUFZLEdBQVEsR0FBZ0IsQ0FFN0QsS0FBTSxHQUFRLEVBQWUsRUFFdkIsRUFBWSxHQUFnQixHQUFlLEdBQUksSUFBTSxFQUFJLElBQ3pELEVBQVMsRUFBSSxLQUFLLFVBQVksRUFDOUIsRUFBUyxFQUFJLEtBQUssUUFBVSxFQUM1QixFQUFnQixHQUFTLEdBQVUsRUFBSSxTQUN2QyxFQUFLLEdBQVcsR0FBZ0IsRUFBSSxHQUMxQyxNQUFJLE1BQUssSUFBSSxHQUFLLEVBQUksS0FBSyxXQUFhLEtBQUssSUFBSSxHQUFTLEVBQUksS0FBSyxVQUN4RCxFQUdQLEdBQUksUUFBVSxHQUVQLEdBQVEsR0FDWCxHQUFJLE1BQUssRUFBYyxVQUFZLEdBQUssRUFBZ0IsT0FHL0QsSUFBSSxNQUFNLFFBQVEsR0FFbkIsTUFBTyxHQUFjLElBQUksQ0FBQyxFQUFHLElBQU0sR0FBWSxFQUFLLEVBQVcsR0FBSSxFQUFjLEdBQUksRUFBYSxLQUVqRyxHQUFJLE1BQU8sSUFBa0IsU0FBVSxDQUN4QyxLQUFNLEdBQWEsR0FDbkIsU0FBVyxLQUFLLEdBRVosRUFBVyxHQUFLLEdBQVksRUFBSyxFQUFXLEdBQUksRUFBYyxHQUFJLEVBQWEsSUFHbkYsTUFBTyxPQUdQLE1BQU0sSUFBSSxPQUFNLGlCQUFpQixNQUFPLGNBR2hELFlBQWdCLEVBQU8sRUFBTyxHQUFJLENBQzlCLEtBQU0sR0FBUSxHQUFTLEdBQ2pCLENBQUUsWUFBWSxJQUFNLFVBQVUsR0FBSyxZQUFZLEtBQVMsRUFDOUQsR0FBSSxHQUNBLEVBQ0EsRUFDQSxFQUFhLEVBQ2IsRUFBZSxFQUNmLEVBQVcsRUFDWCxFQUF5QixFQUN6QixFQUFjLEdBQ2xCLFdBQWEsRUFBVyxFQUFPLEdBQUksQ0FDL0IsRUFBZSxFQUNmLEtBQU0sSUFBUSxFQUFnQixHQUM5QixHQUFJLEdBQVMsTUFBUSxFQUFLLE1BQVMsRUFBTyxXQUFhLEdBQUssRUFBTyxTQUFXLEVBQzFFLFNBQWMsR0FDZCxFQUFZLEtBQ1osRUFBYSxFQUNiLEVBQU0sSUFBSSxFQUFRLEdBQ1gsUUFBUSxVQUVkLEdBQUksRUFBSyxLQUFNLENBQ2hCLEtBQU0sSUFBTyxFQUFLLE9BQVMsR0FBTyxHQUFLLENBQUMsRUFBSyxLQUM3QyxFQUF5QixFQUFLLElBQU8sSUFDckMsRUFBVyxFQUVmLE1BQUssSUFDRCxHQUFZLEtBQ1osRUFBYyxHQUNkLEVBQU8sR0FBSyxJQUFPLENBQ2YsR0FBSSxFQUNBLFNBQWMsR0FDZCxFQUFPLEtBQ0EsR0FFWCxFQUFXLEtBQUssSUFBSSxFQUFXLEVBQXdCLEdBQ3ZELEtBQU0sR0FBTSxDQUNSLFdBQ0EsS0FBTSxFQUNOLFFBQVMsR0FDVCxHQUFLLElBQU0sR0FBYSxHQUFLLEtBRTNCLEdBQWEsR0FBWSxFQUFLLEVBQVksRUFBTyxHQUN2RCxTQUFZLEdBQ1osRUFBYSxFQUNiLEVBQU0sSUFBSSxFQUFRLElBQ2QsRUFBSSxTQUNKLEdBQU8sTUFFSixDQUFDLEVBQUksV0FHYixHQUFJLFNBQVEsSUFBVSxDQUN6QixFQUFLLFFBQVEsS0FBSyxJQUFNLENBQ3BCLEFBQUksS0FBVSxHQUNWLFNBSWhCLEtBQU0sR0FBUyxDQUNYLE1BQ0EsT0FBUSxDQUFDLEVBQUksSUFBUyxFQUFJLEVBQUcsRUFBYyxHQUFRLEdBQ25ELFVBQVcsRUFBTSxVQUNqQixZQUNBLFVBQ0EsYUFFSixNQUFPLEdDM0dYLGFBQTRDLE9BQ25DLElBQVMsU0FHTCxJQUFhQSxzY0NMeEIsRUFDWSxVQUNSLENBQUMsRUFBUyxHQUFJLE1BQ1YsR0FBYyxLQUFNLEdBQVMsT0FBTyxLQUN4QyxBQUFDLEdBTUssR0FHRix1QkFBdUIsV0FBYixjQUF1QiwwQkFBc0IsU0FFdkQsRUFBUSxHQUFJLE9BQU0sWUFDbEIsS0FBTyxFQUFZLEtBQ2xCLFFBQVEsT0FBTyxDQUFFLFFBQVMsRUFBTyxXQUFZLEVBQVMsZUFFeEQsR0FBUyxtQkFhaEIsRUFBcUIsQ0FBRSxhQUFjLElBQ3hCLE9BQ04sQ0FDTCxPQUFRLEVBQUssUUFBVSxNQUN2QixRQUFTLENBQ1AsT0FBUSxtQkFDUixlQUFnQixtQkFDaEIsaUJBQWtCLEVBQUssY0FBZ0IsR0FDdkMsaUJBQWtCLEVBQUssY0FBZ0IsSUFFekMsS0FBTSxFQUFLLEtBQU8sS0FBSyxVQUFVLEVBQUssTUFBUSxvQkFJdEIsRUFBWSxFQUFpQyxlQUNwQixNQUFNLE1BQzlDLE9BQU8sQUFBQyxHQUFjQyxTQUFLLEdBQUwsRUFBZ0IsR0FBSyxLQUNoRCxFQUdSLEtBQU0sSUFBeUMsQ0FDN0MsTUFBTyxHQUNQLE1BQU8sV0FDUCxNQUFPLHVCQUcyQixFQUFvQixJQUNsRCxHQUFTLE1BQ1QsRUFBRyxVQUFVLEVBQUcsS0FBTyxJQUFLLE1BQ3hCLEdBQU8sRUFBRyxVQUFVLEVBQUcsR0FDekIsTUFBTyxJQUFlLElBQVUsZ0JBQ3pCLEdBQWUsVUFHUixXQUFXLG1EQUlULEVBQWMsT0M1RHpCLElBQWMsS0FBTyxJQUN6QixRQUFRLElBQ2IsRUFBTSxZQUFZLElBQUksQUFBQyxHQUNkLE1BQ0wsR0FBRyxHQUNELEVBQU0sY0FBZ0IsaUNBQ08sa0JBQXlCLEVBQU0sYUFBZSxpQkFDN0QsRUFBTSxvQ0FDdEIsR0FBZSxDQUNiLGFBQWMsRUFBTSxhQUNwQixhQUFjLEVBQU0sZ0JBR3JCLEtBQUssQUFBQyxHQUNMLEdBQTRDLElBRTdDLEtBQUssQUFBQyxHQUNFLEVBQUssWUFJakIsS0FBSyxBQUFDLEdBQ0UsRUFBVSxRQUVsQixNQUFNLEFBQUMsR0FBVSxHQUFZLEVBQU0sY0FBZ0IsVUFBVyxJQUd0RCxHQUFpQixLQUM1QixJQUVJLEVBQU0sWUFBWSxPQUNiLFFBQVEsV0FDYixFQUFNLFlBQVksSUFBSSxBQUFDLEdBQ2QsTUFDTCxHQUFHLEdBQ0QsRUFBTSxjQUFnQixpQkFDVCxJQUNmLEdBQWUsQ0FDYixhQUFjLEVBQU0sYUFDcEIsYUFBYyxFQUFNLGdCQUdyQixLQUFLLEFBQUMsR0FDTCxHQUNFLElBR0gsS0FBSyxBQUFDLEdBQ0UsRUFBSyxZQUlqQixLQUFLLEFBQUMsR0FPRSxBQU5tQixFQUN2QixPQUNDLEFBQUMsR0FDQyxFQUFTLFNBQVcsYUFFdkIsSUFBSSxBQUFDLEdBQVEsRUFBSSxPQUNLLFFBRTFCLE1BQU0sQUFBQyxHQUFVLEdBQVksRUFBTSxjQUFnQixVQUFXLElBRTFELE1BQ0wsR0FBRyxHQUFvQixFQUFNLGNBQWdCLGdCQUM3QyxHQUFlLENBQ2IsYUFBYyxFQUFNLGFBQ3BCLGFBQWMsRUFBTSxnQkFHckIsS0FBSyxBQUFDLEdBQ0wsR0FBK0MsSUFFaEQsS0FBSyxBQUFDLEdBQ0UsRUFBSyw0QkFNbEIsRUFDQSxFQUNnQixPQUNULE9BQ0wsR0FBRyxHQUFvQixFQUFNLGNBQWdCLG9CQUM3QyxHQUFlLENBQ2IsT0FBUSxPQUNSLGFBQWMsRUFBTSxhQUNwQixhQUFjLEVBQU0sYUFDcEIsS0FBTSxLQUdQLEtBQUssQUFBQyxHQUFhLEdBQTBDLElBQzdELEtBQUssQUFBQyxHQUNFLEVBQUssOGJDOUZMLElBQWUsQ0FDMUIsRUFDQSxFQUNBLElBQ3NCLElBQ2xCLEVBQU0sV0FBWSxNQUVkLEdBQWMsRUFBTSxXQUFXLE1BQU0sRUFBUSxFQUFTLFNBQ3JELFNBQVEsSUFDYixFQUFZLElBQUksS0FBTyxJQUFjLE1BRzdCLEdBQWMsR0FBRyxHQUNyQixFQUFNLHlCQUNLLHdCQUVOLE1BQU0sT0FBTSxFQUFhLEdBQWUsSUFDNUMsS0FBSyxBQUFDLEdBQ0wsR0FBMkMsSUFFNUMsS0FBSyxBQUFDLEdBQVMsRUFBSyxVQUVwQixLQUFLLEFBQUMsR0FBWSxTQUNkLEdBRGMsQ0FFakIsU0FBVSxFQUFPLFNBQVMsT0FDeEIsQUFBQyxHQUFZLEVBQVEsS0FBSyxTQUFXLEdBQUssRUFBUSxHQUFHLFNBQVcsTUFHbkUsTUFBTSxBQUFDLEdBQVUsR0FBWSxFQUFNLGFBQWMsVUFJdEQsR0FBYyxHQUFHLEdBQ25CLEVBQU0sMERBQ3NDLFlBQWdCLFVBQzFELEdBQU0sY0FDRCxRQUFRLEVBQU0sT0FBTyxRQUMxQixBQUFDLEdBQVcsRUFBYyxFQUFZLE9BQU8sSUFBSSxFQUFNLE1BQU0sRUFBTSxPQUlyRSxNQUFNLEVBQWEsR0FBZSxJQUMvQixLQUFLLEFBQUMsR0FDTCxHQUE2QyxJQUU5QyxLQUFLLEFBQUMsR0FBUyxFQUFLLFVBRXBCLEtBQUssQUFBQyxHQUNMLEVBQVEsSUFBSSxBQUFDLEdBQVksU0FDcEIsR0FEb0IsQ0FFdkIsU0FBVSxFQUFPLFNBQVMsT0FDeEIsQUFBQyxHQUFZLEVBQVEsS0FBSyxTQUFXLEdBQUssRUFBUSxHQUFHLFNBQVcsT0FJckUsTUFBTSxBQUFDLEdBQVUsR0FBWSxFQUFNLGFBQWMsaUJBSXZCLEVBQXNDLElBQ2pFLEdBQWMsR0FBRyxHQUNuQixFQUFNLG9FQUVKLEdBQU0sY0FDRCxRQUFRLEVBQU0sT0FBTyxRQUMxQixBQUFDLEdBQVcsRUFBYyxFQUFZLE9BQU8sSUFBSSxFQUFNLE1BQU0sRUFBTSxPQUluRSxFQUFNLHFCQUNPLE1BQU0sRUFBTSxtQkFHdEIsTUFBTSxFQUFhLEdBQWUsSUFDdEMsS0FBSyxBQUFDLEdBQWEsR0FBd0MsSUFDM0QsS0FBSyxBQUFDLEdBQVMsRUFBSyxTQUFTLFlBR3JCLElBQTJCLEFBQ3RDLEdBQ3NCLE1BQ2hCLEdBQWMsR0FBRyxHQUNyQixFQUFNLGtDQUNjLEVBQU0sdUNBQzFCLEVBQU0sTUFBTSxnQkFDSCxFQUFNLE1BQU0sZUFFaEIsT0FBTSxFQUFhLEdBQWUsSUFDdEMsS0FBSyxLQUFPLElBQ1gsR0FBNkMsSUFFOUMsS0FBSyxBQUFDLEdBQVMsRUFBSyxVQUNwQixNQUFNLEFBQUMsR0FBVSxHQUFZLEVBQU0sYUFBYyxLQXdCekMsR0FBZSxDQUMxQixFQUNBLElBR08sTUFDTCxHQUFHLEdBQW9CLEVBQU0seUJBQXlCLEVBQWMsS0FDcEUsR0FBZSxDQUNiLE9BQVEsTUFDUixhQUFjLEVBQU0sYUFDcEIsYUFBYyxFQUFNLGFBQ3BCLEtBQU0sQ0FDSixPQUFRLEVBQWMsT0FDdEIsUUFBUyxFQUFjLFFBQ3ZCLFVBQVcsRUFBYyxVQUN6QixVQUFXLEVBQWMsY0FJNUIsS0FBSyxBQUFDLEdBQ0wsR0FBaUQsSUFFbEQsS0FBSyxBQUFDLEdBQVMsRUFBSyxVQUNwQixNQUFNLEFBQUMsR0FBVSxHQUFZLEVBQU0sYUFBYyxJQ2pKekMsR0FBZ0IsTUFDM0IsRUFDQSxJQUVPLEtBQU0sT0FDWCxHQUFHLEdBQW9CLGNBQ3ZCLEdBQWUsQ0FDYixlQUNBLGFBQWMsS0FHZixLQUF5QixJQUN6QixLQUFLLEFBQUMsR0FBYSxFQUFTLFVBQVUsU0FDdEMsTUFBTSxBQUFDLEdBQVUsR0FBWSxFQUFJLG1XQ2tCekIsSUFBb0IsS0FDL0IsSUFFTyxNQUNMLEdBQUcsR0FBb0IsRUFBTSx1Q0FDN0IsR0FBZSxDQUNiLE9BQVEsT0FDUixhQUFjLEVBQU0sYUFDcEIsYUFBYyxFQUFNLGFBQ3BCLEtBQU0sRUFBTSxRQUdiLEtBQUssS0FBTyxJQUFnQixNQUNyQixHQUFPLEtBQU0sSUFFakIsWUFHRyxTQUFTLFdBQWEsRUFBSyxTQUFTLFdBQVcsSUFBSSxBQUFDLE1BQ2xELFdBQWEsRUFBSyxPQUFTLElBQzNCLFNBQVcsRUFBSyxLQUFPLFFBQ3JCLEdBQUssWUFDTCxHQUFLLElBQ0wsSUFFRixFQUFLLFdBRWIsTUFBTSxBQUFDLEdBQVUsR0FBWSxFQUFNLGFBQWMsSUFHekMsR0FBK0IsS0FDMUMsSUFFTyxNQUNMLEdBQUcsR0FDRCxFQUFNLG1EQUVSLEdBQWUsQ0FDYixPQUFRLE9BQ1IsYUFBYyxFQUFNLGFBQ3BCLGFBQWMsRUFBTSxhQUNwQixLQUFNLEVBQU0sUUFHYixLQUFLLEtBQU8sSUFBK0MsWUFJcEQsT0FITyxNQUFNLElBRWpCLElBRUssV0FBTCxjQUFlLElBQUksQUFBQyxNQUNOLEVBQVUsSUFBSSxBQUFDLE1BQ3BCLFdBQWEsR0FBSSxNQUFLLEVBQUssV0FBYSxPQUN4QyxTQUFXLEdBQUksTUFBSyxFQUFLLFNBQVcsS0FDbEMsSUFFRixNQUNILEdBQ0YsRUFBbUIsR0FDdkIsRUFDQSxFQUFNLEtBQUssY0FHWCxJQUFzQyxLQUd6QyxNQUFNLEFBQUMsR0FBVSxHQUFZLEVBQU0sYUFBYyxJQU10RCxZQUNFLEVBQ0EsRUFDc0IsT0FDZixHQUFlLElBQUksQUFBQyxHQUNsQixFQUFNLElBQUksQUFBQyxHQUNUQyxTQUNGLEdBQ0EsRUFBTyxLQUNSLEFBQUMsR0FDQyxFQUFTLGtCQUFrQixTQUFXLEVBQVMsT0FBTyxRQUN0RCxFQUFTLGtCQUFrQixNQUFNLEFBQUMsR0FDaEMsRUFBUyxPQUFPLFNBQVMsUUFXdkMsWUFDRSxFQUNBLE1BQ00sR0FBVyxHQUFJLFdBQ2QsR0FBZSxPQUFPLEFBQUMsR0FBVSxNQUNoQyxHQUFjLEdBQUcsRUFBTSxHQUFHLGNBQzlCLEVBQU0sRUFBTSxPQUFTLEdBQUcsaUJBRXRCLEdBQVMsSUFBSSxHQUNSLE1BRUUsSUFBSSxHQUNOLGdXQ3hJYixhQUFtRCxNQUMzQyxHQUFNLENBQ1YsRUFDQSxJQUN5QyxjQUNuQyxHQUE4QixLQUFLLE1BQU0sR0FFekMsRUFBZUEsTUFBSyxZQUNuQixHQUFhLGNBQ2QsS0FBSyxVQUFVLEdBR25CLEdBQUMsRUFBUyxjQUNWLHNCQUFXLE9BQVYsY0FBZ0IsYUFDakIsc0JBQVcsT0FBVixjQUFnQixlQUtmLENBQUMsRUFBTyxJQUFRLEVBQVMsWUFBYSxNQUNsQyxHQUFlLEdBQWtCLEtBQ2pDLE9BQU8sQUFBQyxNQUNOLEdBQU8sRUFDTixNQUVGLEdBQU8sUUFFVCxHQUFPLEtBRVYsRUFBUSxHQUFTLEdBQUksT0FBeUIsR0FBSSxDQUFFLGVBQ25ELFFDN0JULGFBQThELE1BQ3RELEdBQU0sQ0FDVixFQUNBLElBQ3lDLGNBQ25DLEdBQXlDLEtBQUssTUFBTSxNQUd4RCxHQUFDLEVBQVMsY0FDVixzQkFBVyxPQUFWLGNBQWdCLGFBQ2pCLHNCQUFXLE9BQVYsY0FBZ0IsZUFLZixDQUFDLEVBQU8sR0FBTSxNQUNWLEdBQWUsR0FBNkIsS0FDNUMsT0FBTyxBQUFDLE1BQ04sR0FBTyxFQUNOLE1BRUYsR0FBTyxRQUVULEdBQU8sS0FFVixFQUFRLEdBQVMsR0FBSSxPQUFvQyxHQUFJLENBQUUsZUFDOUQsa1dDaENULGFBQStCLE1BQ3ZCLENBQUUsWUFBVyxTQUFRLE9BQVEsR0FFakMsT0FDRSxHQUFtRCxTQUVoRCxDQUNMLFlBQ0EsYUFBYyxLQUFPLElBQXlCLE1BQ3RDLEdBQVcsS0FBSyxVQUFVLFNBRTlCLENBQUMsRUFBWSxPQUNOLGNBQWdCLEVBQU0sa0JBRWpCLEdBQVksR0FBZSxLQUNoQyxBQUFDLE1BQ0ksR0FBWSxFQUFZLEdBQzNCQSxNQUFLLE1BSVQsS0FBTSxHQUFZLElBRTNCLE1BQU8sSUFBTSxHQUNHLEtBQ1YsV0FLRyxJQUFnQiwrVkM5QjdCLGFBQTRCLE1BQ3BCLENBQUUsWUFBVyxTQUFRLE9BQVEsR0FDakMsT0FFRSxHQUE4QyxRQUM1QyxHQUFnQixHQUFTLFVBRXhCLENBQ0wsZ0JBQ0EsWUFDQSxVQUFXLEtBQU8sSUFBc0IsSUFDbEMsTUFBTSxRQUFRLEVBQU0sY0FBZ0IsRUFBTSxZQUFZLE9BQVMsRUFBRyxHQUN0RCxJQUFJLFNBRVosR0FBVyxLQUFLLFVBQVUsR0FFOUIsQ0FBQyxFQUFVLE9BQ0osY0FBZ0IsRUFBTSxrQkFFbkIsR0FBWSxHQUFZLEtBRTNCLEFBQUMsTUFDQyxHQUFZLEVBQVUsR0FDdEJBLE1BQUssV0FJVixHQUFTLEtBQU0sR0FBVSxZQUVqQixJQUFJLElBRVgsSUFHWCxZQUFhLE1BQU8sRUFBYyxJQUFzQixNQUNoRCxHQUFXLEtBQUssVUFBVSxHQUNqQixLQUFNLEdBQVUsS0FFbkIsR0FBWSxRQUFRLElBQUksQ0FDaEMsRUFBVSxHQUNWLEdBQVksRUFBTyxLQUNsQixLQUFLLEFBQUMsR0FDQSxFQUFPLFVBR04sR0FBWSxHQUFZLEVBQU8sR0FBTyxLQUFLLEFBQUMsR0FDN0MsQ0FBQyxNQUlMLEFBQUMsTUFDQyxHQUFZLEVBQVUsR0FDdEJBLE1BQUssTUFHaEIsTUFBTyxJQUFNLEdBQ0MsS0FDUixXQUtHLElBQWEsK1ZDN0MxQixrQkFBMEMsRUFBb0IsTUFDdEQsR0FBbUIsVUFFaEIsR0FBSSxFQUFHLEVBQUksRUFBWSxNQUNiLEtBQUssQ0FDcEIsU0FBVSxHQUNWLFFBQW1CLFdBR2hCLEdBR1QsYUFBNkIsTUFDckIsQ0FBRSxZQUFXLE1BQUssVUFBVyxHQUVqQyxPQUNFLEdBQWlELEdBQ2pELFFBRUcsQ0FDTCxZQUNBLE1BQ0EsV0FBWSxNQUNWLEVBQ0EsRUFDQSxFQUNBLEVBQWUsS0FDWixNQUNHLEdBQVcsS0FBSyxVQUFVLE1BRTVCLENBQUMsRUFBTSxjQUFnQixDQUFDLEVBQU0sbUJBRXpCLE1BR0wsSUFBZSxRQUFhLEVBQWMsTUFFdEMsR0FBYyxFQUFNLFdBQ3RCLEVBQU0sV0FBVyxPQUNqQixLQUFNLElBQWlCLEdBQU8sTUFBTSxJQUVwQyxNQUNXLE1BSWIsQ0FBQyxNQUFNLFFBQVEsRUFBVyxLQUFjLEVBQWMsTUFDbEQsR0FBYSxLQUFLLEtBQUssRUFBYSxLQUMvQixHQUFZLEtBQU0sSUFBMkIsTUFHdEQsTUFBTyxHQUFXLEdBQVUsSUFBaUIsa0JBRXhDLE1BQ0UsQ0FBQyxFQUFXLEdBQVUsR0FBYSxTQUFVLE1BQ2hELEdBQVUsS0FBTSxJQUNwQixFQUNBLEVBQ0EsRUFBYyxHQUNkLE1BQU0sSUFFSixNQUNTLEdBQVUsR0FBYSxRQUFVLElBQ2pDLEdBQVUsR0FBYSxTQUFXLGFBSTFDLEFBQUMsTUFDRSxHQUFZLEVBQVcsR0FDeEIsTUFBSyxLQUdQLEVBQVcsR0FBVSxHQUFhLFNBRTNDLGlCQUFrQixLQUFPLElBQXdCLElBQzNDLENBQUMsRUFBTSxjQUFnQixDQUFDLEVBQU0sbUJBQ3pCLE1BR0wsTUFBTyxJQUFlLFlBQWEsTUFDL0IsR0FBYyxLQUFNLElBQWlCLEdBQU8sTUFBTSxJQUVwRCxNQUNXLFNBR1YsSUFHVCw0QkFBNkIsTUFDM0IsRUFDQSxFQUFlLEtBQ1osSUFDQyxDQUFDLEVBQU0sY0FBZ0IsQ0FBQyxFQUFNLG1CQUN6QixRQUVILEdBQVcsS0FBSyxVQUFVLE1BRTVCLEVBQUMsTUFBTSxRQUFRLEVBQVcsS0FBYyxPQUMvQixHQUFZLEtBQU0sSUFBMkIsSUFHdEQsQ0FBQyxFQUFXLEdBQVUsR0FBRyxVQUFZLEVBQWMsTUFDL0MsR0FBc0IsS0FBTSxJQUF5QixHQUFPLE1BQ2hFLElBR0UsTUFDUyxHQUFVLEdBQUcsUUFBVSxJQUN2QixHQUFVLEdBQUcsU0FBVyxhQUdoQyxBQUFDLE1BQ0UsR0FBWSxFQUFXLEdBQ3hCLE1BQUssS0FFUCxFQUFXLEdBQVUsR0FBRyxTQUVqQyxhQUFjLE1BQ1osRUFDQSxFQUNBLEVBQ0EsRUFDQSxJQUNHLE1BQ0csR0FBUyxLQUFNLElBQWEsRUFBYSxHQUFlLE1BQzVELE9BR0UsQ0FBQyxFQUFXLEdBQVUsR0FBYSxTQUFVLE1BRXpDLEdBQVUsS0FBTSxJQUNwQixLQUFLLE1BQU0sR0FDWCxFQUNBLEVBQWMsR0FDZCxNQUFNLElBRUosTUFDUyxHQUFVLEdBQWEsUUFBVSxJQUNqQyxHQUFVLEdBQWEsU0FBVyxhQUl0QyxHQUFVLEdBQWEsUUFBVSxFQUFXLEdBQ3JELEdBQ0EsUUFBUSxJQUFJLEFBQUMsR0FDVCxJQUFVLEVBQWMsS0FBTyxFQUFPLE9BQ3hCLE9BQU8sT0FBTyxFQUFlLElBRXhDLE1BRUYsQUFBQyxNQUNFLEdBQVksRUFBVyxHQUN4QixNQUFLLEtBRVAsRUFBVyxHQUFVLEdBQWEsU0FFM0Msc0JBQXVCLENBQ3JCLEVBQ0EsRUFDQSxJQUNHLE1BQ0csR0FBVSxFQUFXLEdBQVUsR0FBYSxXQUU3QyxFQUtFLE1BQ0MsR0FBUyxFQUFRLEtBQUssQUFBQyxHQUFXLEVBQU8sS0FBTyxHQUNsRCxNQUNLLFNBQVcsQ0FBQyxFQUFPLGNBUmYsTUFDUCxHQUFpQixFQUFRLEtBQUssQUFBQyxHQUFXLEVBQU8sbUJBQzVDLEtBQVUsS0FDWixTQUFXLENBQUMsV0FRaEIsQUFBQyxNQUNFLEdBQVksRUFBVyxHQUN4QixNQUFLLEtBRVAsRUFBVyxHQUFVLEdBQWEsU0FHM0MsTUFBTyxJQUFNLEdBQ0UsS0FDVCxLQUdOLHVCQUF3QixDQUN0QixFQUNBLEVBQ0EsSUFDRyxnQkFDRyxHQUFXLEtBQUssVUFBVSxHQUUxQixVQUF5QixHQUFVLEtBQXJCLGNBQW1DLFVBQW5DLGNBQTRDLEtBQzlELEFBQUMsR0FBVyxFQUFPLEtBQU8sRUFBZ0IsY0FFeEMsRUFBYSxNQUNULFFBQTJCLFdBQVosY0FBc0IsS0FDekMsQUFBQyxHQUFZLEVBQVEsS0FBTyxFQUFnQixJQUUxQyxLQUNXLEtBQU8sRUFBZ0IsT0FDN0IsQUFBQyxHQUFZLElBQ2QsRUFBZ0IsVUFBVyxJQUN6QixHQUFpQixFQUFRLEdBQVUsR0FBYSxRQUFRLEtBQzFELEFBQUMsR0FBVyxFQUFPLEtBQU8sRUFBWSxJQUdwQyxNQUNlLEtBQUssTUFBTSxLQUFLLFVBQVUsV0FHeEMsT0FBSyxRQUtQLEFBQUMsR0FBWSxJQUNkLEVBQWdCLFVBQVcsSUFDekIsR0FBaUIsRUFBUSxHQUFVLEdBQWEsUUFBUSxLQUMxRCxBQUFDLEdBQVcsRUFBTyxLQUFPLEVBQVksT0FHcEMsRUFBZ0IsTUFDWixHQUFXLEVBQVksV0FDcEIsS0FBSyxLQUNGLFNBQVcsSUFDWCxRQUFVLEVBQWdCLFVBRTFCLE9BQVMsRUFBWSxPQUFPLE9BQ3RDLEFBQUMsR0FBVSxFQUFNLEtBQU8sRUFBZ0IsTUFFekIsS0FBSyxNQUFNLEtBQUssVUFBVSxXQUd4QyxPQUFLLFdBS1gsR0FBVyxHQUFVLEdBQWEsU0FJM0MscUJBQXNCLENBQ3BCLEVBQ0EsRUFDQSxJQUNHLGdCQUNHLEdBQVcsS0FBSyxVQUFVLEdBRTFCLFVBQXlCLEdBQVUsS0FBckIsY0FBbUMsVUFBbkMsY0FBNEMsS0FDOUQsQUFBQyxHQUFXLEVBQU8sS0FBTyxFQUFjLGNBRXRDLEVBQWEsTUFFVCxRQUF5QixTQUFaLGNBQW9CLEtBQ3JDLEFBQUMsR0FBVSxFQUFNLEtBQU8sRUFBYyxPQUdwQyxFQUFjLFVBQVcsSUFDdkIsU0FDSyxPQUFPLEVBQVksT0FDckIsTUFDQyxHQUFTLEVBQVksU0FDcEIsS0FBSyxLQUNBLE9BQVMsSUFHaEIsQUFBQyxHQUFZLElBQ2QsR0FBaUIsRUFBUSxHQUFVLEdBQWEsUUFBUSxLQUMxRCxBQUFDLEdBQVcsRUFBTyxLQUFPLEVBQVksVUFFcEMsT0FDZSxLQUFLLE1BQU0sS0FBSyxVQUFVLEtBR3RDLE1BQUssWUFJWCxHQUFXLEdBQVUsR0FBYSxlQUtsQyxJQUFlLEtBRWtDLEdBQzVELEdBQ0EsQUFBQyxHQUFrQixNQUNYLEdBQXVDLGlCQUN0QyxRQUFRLEdBQWUsUUFDNUIsQ0FBQyxDQUFDLEVBQUssS0FDSixFQUFXLEdBQU8sRUFDaEIsSUFBSSxBQUFDLEdBQW9CLEVBQWdCLFNBQ3pDLFFBRUEsSUNyVFgsYUFBK0MsTUFDdkMsR0FBTSxDQUNWLEVBQ0EsSUFDNkIsTUFDdkIsR0FBNkIsS0FBSyxNQUFNLE1BRTFDLEVBQUMsRUFBUyxpQkFFVixDQUFDLEVBQU8sR0FBTSxNQUNWLEdBQWUsR0FDbkIsRUFBUyxhQUNULEVBQVMsZ0JBRUwsT0FBTyxBQUFDLE1BQ04sR0FBTyxFQUNOLE1BRUYsR0FBTyxRQUVULEdBQU8sS0FFVixFQUFRLEdBQVMsR0FBSSxPQUFxQixHQUFJLENBQUUsZUFDL0MsUUFHSSxJQUFnQixpQkNuQ00sRUFFaEMsT0FDTSxDQUFDLEVBQWMsSUFBMEIsQ0FDMUMsRUFBVSxpQkFDRixjQUNSLEdBQUksYUFBWSxFQUFNLENBQ3BCLFNBQ0EsU0FBVSxtQkFzQmxCLEVBQ0EsRUFDQSxFQUNHLE9BQ0ksSUFBSSxPQUFNLEVBQVksQ0FDM0IsSUFBSyxDQUFDLEVBQVEsSUFDUixJQUFTLFlBQWMsSUFBUyxTQUMzQixJQUFNLEtBQUssVUFBVSxHQUcxQixRQUFRLElBQUksRUFBUSxLQUFVLE9BQ3pCLEdBQ0wsUUFBUSxJQUFJLEVBQVEsR0FDcEIsRUFBZ0IsSUFJaEIsR0FBWSxJQUFRLEdBQ2YsR0FBaUIsRUFBUyxHQUFPLEVBQWdCLElBRW5ELEVBQWdCLEdBR3pCLFFBQVMsQUFBQyxHQUFXLE1BQ2IsR0FBTyxHQUFJLEtBQUksQ0FDbkIsR0FBRyxRQUFRLFFBQVEsR0FDbkIsR0FBRyxPQUFPLEtBQUssR0FDZixHQUFHLE9BQU8sS0FBSyxXQUVWLE9BQU0sS0FBSyxJQUdwQix5QkFBMEIsQ0FBQyxFQUFRLElBQVMsWUFDdEMsR0FBaUIsUUFBUSx5QkFBeUIsRUFBUSxTQUN6RCxnQkFFRCxPQUFPLHlCQUF5QixFQUFVLEtBRDFCLE9BRWYsR0FDQyxPQUFPLHlCQUF5QixFQUFpQixLQUhuQyxPQUc2QyxDQUMzRCxhQUFjLEdBQ2QsV0FBWSxHQUNaLFNBQVUsWUFFTixlQUFlLEVBQVEsRUFBTSxJQUVoQyxpQkFLdUIsRUFBZ0IsRUFBaUIsSUFDL0QsRUFBVyxJQUNULE1BQU8sSUFBYyxnQkFDaEIsSUFBYSxNQUVsQixNQUFPLElBQWMsZUFDaEIsUUFBTyxNQUVaLFlBQXFCLFlBQ2hCLElBQUksTUFBSyxTQUliLEtBQWMsT0FBWSxVQUFhLEtBQU8sY0FJckQsRUFDUyxPQUNJLENBQUMsR0FBTSxPQUFRLEtBQU0sU0FBUyxxRENwRHBDLE9BQWMseUNBVVQsT0FBYztRQUtyQixVQUFhO1FBQ2IsWUFBTSxVQUFOLGNBQWUsVUFBZixPQUEwQjsrQ0FqQi9CLCtCQWNFLGNBQ0E7UUFDRyxVQUFhO1FBQ2IsWUFBTSxVQUFOLGNBQWUsVUFBZixPQUEwQjtzS0FMM0IsdUZBVkc7QUFBQSx3Q0FFTSxPQUFPLFNBQVMsZ0JBQWdCO0FBQUE7c0VBRnpDLGdCQUVFLHVCQUdGLHFFQVJELE1BQWEsd0ZBQWIsTUFBYSw0SkE3Q0QsR0FBQSxFQUFBLEVBQUE7OzQ1QkNBakIsT0FBTyxlQUFlLEVBQVMsYUFBYyxDQUFFLE1BQU8sS0FFdEQsV0FBMkIsRUFBUSxFQUFPLENBQ3hDLE9BQVMsR0FBSSxFQUFHLEVBQUksRUFBTSxPQUFRLElBQUssQ0FDckMsR0FBSSxHQUFhLEVBQU0sR0FDdkIsRUFBVyxXQUFhLEVBQVcsWUFBYyxHQUNqRCxFQUFXLGFBQWUsR0FDdEIsU0FBVyxJQUFZLEdBQVcsU0FBVyxJQUNqRCxPQUFPLGVBQWUsRUFBUSxFQUFXLElBQUssSUFJbEQsV0FBc0IsRUFBYSxFQUFZLEVBQWEsQ0FDMUQsTUFBSSxJQUFZLEVBQWtCLEVBQVksVUFBVyxHQUNyRCxHQUFhLEVBQWtCLEVBQWEsR0FDekMsRUFHVCxZQUFvQixDQUNsQixTQUFXLE9BQU8sUUFBVSxTQUFVLEVBQVEsQ0FDNUMsT0FBUyxHQUFJLEVBQUcsRUFBSSxVQUFVLE9BQVEsSUFBSyxDQUN6QyxHQUFJLEdBQVMsVUFBVSxHQUV2QixPQUFTLEtBQU8sR0FDZCxBQUFJLE9BQU8sVUFBVSxlQUFlLEtBQUssRUFBUSxJQUMvQyxHQUFPLEdBQU8sRUFBTyxJQUszQixNQUFPLElBR0YsRUFBUyxNQUFNLEtBQU0sV0FHOUIsV0FBd0IsRUFBVSxFQUFZLENBQzVDLEVBQVMsVUFBWSxPQUFPLE9BQU8sRUFBVyxXQUM5QyxFQUFTLFVBQVUsWUFBYyxFQUVqQyxFQUFnQixFQUFVLEdBRzVCLFdBQXlCLEVBQUcsQ0FDMUIsU0FBa0IsT0FBTyxlQUFpQixPQUFPLGVBQWlCLFNBQXlCLEVBQUcsQ0FDNUYsTUFBTyxHQUFFLFdBQWEsT0FBTyxlQUFlLElBRXZDLEVBQWdCLEdBR3pCLFdBQXlCLEVBQUcsRUFBRyxDQUM3QixTQUFrQixPQUFPLGdCQUFrQixTQUF5QixFQUFHLEVBQUcsQ0FDeEUsU0FBRSxVQUFZLEVBQ1AsR0FHRixFQUFnQixFQUFHLEdBRzVCLFlBQXFDLENBRW5DLEdBREksTUFBTyxVQUFZLGFBQWUsQ0FBQyxRQUFRLFdBQzNDLFFBQVEsVUFBVSxLQUFNLE1BQU8sR0FDbkMsR0FBSSxNQUFPLFFBQVUsV0FBWSxNQUFPLEdBRXhDLEdBQUksQ0FDRixlQUFRLFVBQVUsUUFBUSxLQUFLLFFBQVEsVUFBVSxRQUFTLEdBQUksVUFBWSxLQUNuRSxTQUNBLEVBQVAsQ0FDQSxNQUFPLElBSVgsV0FBb0IsRUFBUSxFQUFNLEVBQU8sQ0FDdkMsTUFBSSxLQUNGLEVBQWEsUUFBUSxVQUVyQixFQUFhLFNBQW9CLEVBQVEsRUFBTSxFQUFPLENBQ3BELEdBQUksR0FBSSxDQUFDLE1BQ1QsRUFBRSxLQUFLLE1BQU0sRUFBRyxHQUNoQixHQUFJLEdBQWMsU0FBUyxLQUFLLE1BQU0sRUFBUSxHQUMxQyxFQUFXLEdBQUksR0FDbkIsTUFBSSxJQUFPLEVBQWdCLEVBQVUsRUFBTSxXQUNwQyxHQUlKLEVBQVcsTUFBTSxLQUFNLFdBR2hDLFdBQTJCLEVBQUksQ0FDN0IsTUFBTyxVQUFTLFNBQVMsS0FBSyxHQUFJLFFBQVEsbUJBQXFCLEdBR2pFLFdBQTBCLEVBQU8sQ0FDL0IsR0FBSSxHQUFTLE1BQU8sTUFBUSxXQUFhLEdBQUksS0FBUSxPQUVyRCxTQUFtQixTQUEwQixFQUFPLENBQ2xELEdBQUksSUFBVSxNQUFRLENBQUMsRUFBa0IsR0FBUSxNQUFPLEdBRXhELEdBQUksTUFBTyxJQUFVLFdBQ25CLEtBQU0sSUFBSSxXQUFVLHNEQUd0QixHQUFJLE1BQU8sSUFBVyxZQUFhLENBQ2pDLEdBQUksRUFBTyxJQUFJLEdBQVEsTUFBTyxHQUFPLElBQUksR0FFekMsRUFBTyxJQUFJLEVBQU8sR0FHcEIsWUFBbUIsQ0FDakIsTUFBTyxHQUFXLEVBQU8sVUFBVyxFQUFnQixNQUFNLGFBRzVELFNBQVEsVUFBWSxPQUFPLE9BQU8sRUFBTSxVQUFXLENBQ2pELFlBQWEsQ0FDWCxNQUFPLEVBQ1AsV0FBWSxHQUNaLFNBQVUsR0FDVixhQUFjLE1BR1gsRUFBZ0IsRUFBUyxJQUczQixFQUFpQixHQUcxQixXQUF1QyxFQUFRLEVBQVUsQ0FDdkQsR0FBSSxHQUFVLEtBQU0sTUFBTyxHQUMzQixHQUFJLEdBQVMsR0FDVCxFQUFhLE9BQU8sS0FBSyxHQUN6QixFQUFLLEVBRVQsSUFBSyxFQUFJLEVBQUcsRUFBSSxFQUFXLE9BQVEsSUFFakMsQUFEQSxFQUFNLEVBQVcsR0FDYixJQUFTLFFBQVEsSUFBUSxJQUM3QixHQUFPLEdBQU8sRUFBTyxJQUd2QixNQUFPLEdBR1QsV0FBcUMsRUFBRyxFQUFRLENBQzlDLEdBQUksRUFBQyxFQUNMLElBQUksTUFBTyxJQUFNLFNBQVUsTUFBTyxHQUFrQixFQUFHLEdBQ3ZELEdBQUksR0FBSSxPQUFPLFVBQVUsU0FBUyxLQUFLLEdBQUcsTUFBTSxFQUFHLElBRW5ELEdBREksSUFBTSxVQUFZLEVBQUUsYUFBYSxHQUFJLEVBQUUsWUFBWSxNQUNuRCxJQUFNLE9BQVMsSUFBTSxNQUFPLE1BQU8sT0FBTSxLQUFLLEdBQ2xELEdBQUksSUFBTSxhQUFlLDJDQUEyQyxLQUFLLEdBQUksTUFBTyxHQUFrQixFQUFHLElBRzNHLFdBQTJCLEVBQUssRUFBSyxDQUNuQyxBQUFJLElBQU8sTUFBUSxFQUFNLEVBQUksU0FBUSxHQUFNLEVBQUksUUFFL0MsT0FBUyxHQUFJLEVBQUcsRUFBTyxHQUFJLE9BQU0sR0FBTSxFQUFJLEVBQUssSUFBSyxFQUFLLEdBQUssRUFBSSxHQUVuRSxNQUFPLEdBR1QsV0FBeUMsRUFBRyxFQUFnQixDQUMxRCxHQUFJLEdBQUssTUFBTyxTQUFXLGFBQWUsRUFBRSxPQUFPLFdBQWEsRUFBRSxjQUNsRSxHQUFJLEVBQUksTUFBUSxHQUFLLEVBQUcsS0FBSyxJQUFJLEtBQUssS0FBSyxHQUUzQyxHQUFJLE1BQU0sUUFBUSxJQUFPLEdBQUssRUFBNEIsS0FBTyxHQUFrQixHQUFLLE1BQU8sR0FBRSxRQUFXLFNBQVUsQ0FDcEgsQUFBSSxHQUFJLEdBQUksR0FDWixHQUFJLEdBQUksRUFDUixNQUFPLFdBQVksQ0FDakIsTUFBSSxJQUFLLEVBQUUsT0FBZSxDQUN4QixLQUFNLElBRUQsQ0FDTCxLQUFNLEdBQ04sTUFBTyxFQUFFLE9BS2YsS0FBTSxJQUFJLFdBQVU7QUFBQSxxRkFRdEIsR0FBSSxHQUEwQixTQUFVLEVBQVEsQ0FDOUMsRUFBZSxFQUFZLEdBRTNCLFlBQXNCLENBQ3BCLE1BQU8sR0FBTyxNQUFNLEtBQU0sWUFBYyxLQUcxQyxNQUFPLElBQ08sRUFBaUIsUUFNN0IsRUFBb0MsU0FBVSxFQUFhLENBQzdELEVBQWUsRUFBc0IsR0FFckMsV0FBOEIsRUFBUSxDQUNwQyxNQUFPLEdBQVksS0FBSyxLQUFNLHFCQUF1QixFQUFPLGNBQWdCLEtBRzlFLE1BQU8sSUFDUCxHQUtFLEdBQW9DLFNBQVUsRUFBYyxDQUM5RCxFQUFlLEVBQXNCLEdBRXJDLFdBQThCLEVBQVEsQ0FDcEMsTUFBTyxHQUFhLEtBQUssS0FBTSxxQkFBdUIsRUFBTyxjQUFnQixLQUcvRSxNQUFPLElBQ1AsR0FLRSxHQUFvQyxTQUFVLEVBQWMsQ0FDOUQsRUFBZSxFQUFzQixHQUVyQyxXQUE4QixFQUFRLENBQ3BDLE1BQU8sR0FBYSxLQUFLLEtBQU0scUJBQXVCLEVBQU8sY0FBZ0IsS0FHL0UsTUFBTyxJQUNQLEdBS0UsRUFBNkMsU0FBVSxFQUFjLENBQ3ZFLEVBQWUsRUFBK0IsR0FFOUMsWUFBeUMsQ0FDdkMsTUFBTyxHQUFhLE1BQU0sS0FBTSxZQUFjLEtBR2hELE1BQU8sSUFDUCxHQUtFLEdBQWdDLFNBQVUsRUFBYyxDQUMxRCxFQUFlLEVBQWtCLEdBRWpDLFdBQTBCLEVBQU0sQ0FDOUIsTUFBTyxHQUFhLEtBQUssS0FBTSxnQkFBa0IsSUFBUyxLQUc1RCxNQUFPLElBQ1AsR0FLRSxHQUFvQyxTQUFVLEVBQWMsQ0FDOUQsRUFBZSxFQUFzQixHQUVyQyxZQUFnQyxDQUM5QixNQUFPLEdBQWEsTUFBTSxLQUFNLFlBQWMsS0FHaEQsTUFBTyxJQUNQLEdBS0UsR0FBbUMsU0FBVSxFQUFjLENBQzdELEVBQWUsRUFBcUIsR0FFcEMsWUFBK0IsQ0FDN0IsTUFBTyxHQUFhLEtBQUssS0FBTSw4QkFBZ0MsS0FHakUsTUFBTyxJQUNQLEdBS0UsRUFBSSxVQUNKLEdBQUksUUFDSixFQUFJLE9BQ0osR0FBYSxDQUNmLEtBQU0sRUFDTixNQUFPLEVBQ1AsSUFBSyxHQUVILEdBQVcsQ0FDYixLQUFNLEVBQ04sTUFBTyxHQUNQLElBQUssR0FFSCxHQUF3QixDQUMxQixLQUFNLEVBQ04sTUFBTyxHQUNQLElBQUssRUFDTCxRQUFTLElBRVAsR0FBWSxDQUNkLEtBQU0sRUFDTixNQUFPLEVBQ1AsSUFBSyxHQUVILEdBQVksQ0FDZCxLQUFNLEVBQ04sTUFBTyxFQUNQLElBQUssRUFDTCxRQUFTLEdBRVAsR0FBYyxDQUNoQixLQUFNLEVBQ04sT0FBUSxHQUVOLEdBQW9CLENBQ3RCLEtBQU0sRUFDTixPQUFRLEVBQ1IsT0FBUSxHQUVOLEdBQXlCLENBQzNCLEtBQU0sRUFDTixPQUFRLEVBQ1IsT0FBUSxFQUNSLGFBQWMsSUFFWixHQUF3QixDQUMxQixLQUFNLEVBQ04sT0FBUSxFQUNSLE9BQVEsRUFDUixhQUFjLEdBRVosR0FBaUIsQ0FDbkIsS0FBTSxFQUNOLE9BQVEsRUFDUixVQUFXLE9BRVQsR0FBdUIsQ0FDekIsS0FBTSxFQUNOLE9BQVEsRUFDUixPQUFRLEVBQ1IsVUFBVyxPQUVULEdBQTRCLENBQzlCLEtBQU0sRUFDTixPQUFRLEVBQ1IsT0FBUSxFQUNSLFVBQVcsTUFDWCxhQUFjLElBRVosR0FBMkIsQ0FDN0IsS0FBTSxFQUNOLE9BQVEsRUFDUixPQUFRLEVBQ1IsVUFBVyxNQUNYLGFBQWMsR0FFWixHQUFpQixDQUNuQixLQUFNLEVBQ04sTUFBTyxFQUNQLElBQUssRUFDTCxLQUFNLEVBQ04sT0FBUSxHQUVOLEdBQThCLENBQ2hDLEtBQU0sRUFDTixNQUFPLEVBQ1AsSUFBSyxFQUNMLEtBQU0sRUFDTixPQUFRLEVBQ1IsT0FBUSxHQUVOLEdBQWUsQ0FDakIsS0FBTSxFQUNOLE1BQU8sR0FDUCxJQUFLLEVBQ0wsS0FBTSxFQUNOLE9BQVEsR0FFTixHQUE0QixDQUM5QixLQUFNLEVBQ04sTUFBTyxHQUNQLElBQUssRUFDTCxLQUFNLEVBQ04sT0FBUSxFQUNSLE9BQVEsR0FFTixHQUE0QixDQUM5QixLQUFNLEVBQ04sTUFBTyxHQUNQLElBQUssRUFDTCxRQUFTLEdBQ1QsS0FBTSxFQUNOLE9BQVEsR0FFTixHQUFnQixDQUNsQixLQUFNLEVBQ04sTUFBTyxFQUNQLElBQUssRUFDTCxLQUFNLEVBQ04sT0FBUSxFQUNSLGFBQWMsSUFFWixHQUE2QixDQUMvQixLQUFNLEVBQ04sTUFBTyxFQUNQLElBQUssRUFDTCxLQUFNLEVBQ04sT0FBUSxFQUNSLE9BQVEsRUFDUixhQUFjLElBRVosR0FBZ0IsQ0FDbEIsS0FBTSxFQUNOLE1BQU8sRUFDUCxJQUFLLEVBQ0wsUUFBUyxFQUNULEtBQU0sRUFDTixPQUFRLEVBQ1IsYUFBYyxHQUVaLEdBQTZCLENBQy9CLEtBQU0sRUFDTixNQUFPLEVBQ1AsSUFBSyxFQUNMLFFBQVMsRUFDVCxLQUFNLEVBQ04sT0FBUSxFQUNSLE9BQVEsRUFDUixhQUFjLEdBUWhCLFlBQXFCLEVBQUcsQ0FDdEIsTUFBTyxPQUFPLElBQU0sWUFFdEIsV0FBa0IsRUFBRyxDQUNuQixNQUFPLE9BQU8sSUFBTSxTQUV0QixZQUFtQixFQUFHLENBQ3BCLE1BQU8sT0FBTyxJQUFNLFVBQVksRUFBSSxHQUFNLEVBRTVDLFlBQWtCLEVBQUcsQ0FDbkIsTUFBTyxPQUFPLElBQU0sU0FFdEIsV0FBZ0IsRUFBRyxDQUNqQixNQUFPLFFBQU8sVUFBVSxTQUFTLEtBQUssS0FBTyxnQkFHL0MsWUFBdUIsQ0FDckIsR0FBSSxDQUNGLE1BQU8sT0FBTyxPQUFTLGFBQWUsQ0FBQyxDQUFDLEtBQUsseUJBQ3RDLEVBQVAsQ0FDQSxNQUFPLElBSVgsWUFBb0IsRUFBTyxDQUN6QixNQUFPLE9BQU0sUUFBUSxHQUFTLEVBQVEsQ0FBQyxHQUV6QyxXQUFnQixFQUFLLEVBQUksRUFBUyxDQUNoQyxHQUFJLEVBQUksU0FBVyxFQUluQixNQUFPLEdBQUksT0FBTyxTQUFVLEVBQU0sRUFBTSxDQUN0QyxHQUFJLEdBQU8sQ0FBQyxFQUFHLEdBQU8sR0FFdEIsTUFBSyxJQUVNLEVBQVEsRUFBSyxHQUFJLEVBQUssTUFBUSxFQUFLLEdBQ3JDLEVBRkEsR0FNUixNQUFNLEdBRVgsV0FBYyxFQUFLLEVBQU0sQ0FDdkIsTUFBTyxHQUFLLE9BQU8sU0FBVSxFQUFHLEVBQUcsQ0FDakMsU0FBRSxHQUFLLEVBQUksR0FDSixHQUNOLElBRUwsWUFBd0IsRUFBSyxFQUFNLENBQ2pDLE1BQU8sUUFBTyxVQUFVLGVBQWUsS0FBSyxFQUFLLEdBR25ELFlBQXdCLEVBQU8sRUFBUSxFQUFLLENBQzFDLE1BQU8sSUFBVSxJQUFVLEdBQVMsR0FBVSxHQUFTLEVBR3pELFlBQWtCLEVBQUcsRUFBRyxDQUN0QixNQUFPLEdBQUksRUFBSSxLQUFLLE1BQU0sRUFBSSxHQUVoQyxZQUFrQixFQUFPLEVBQUcsQ0FDMUIsQUFBSSxJQUFNLFFBQ1IsR0FBSSxHQUdOLEdBQUksR0FBUSxFQUFRLEVBQ2hCLEVBRUosTUFBSSxHQUNGLEVBQVMsSUFBTyxJQUFLLENBQUMsR0FBTyxTQUFTLEVBQUcsS0FFekMsRUFBVSxJQUFLLEdBQU8sU0FBUyxFQUFHLEtBRzdCLEVBRVQsWUFBc0IsRUFBUSxDQUM1QixHQUFJLEtBQVksSUFBVyxJQUFXLE1BQVEsSUFBVyxJQUd2RCxNQUFPLFVBQVMsRUFBUSxJQUc1QixZQUF1QixFQUFRLENBQzdCLEdBQUksS0FBWSxJQUFXLElBQVcsTUFBUSxJQUFXLElBR3ZELE1BQU8sWUFBVyxHQUd0QixZQUFxQixFQUFVLENBRTdCLEdBQUksS0FBWSxJQUFhLElBQWEsTUFBUSxJQUFhLElBRXhELENBQ0wsR0FBSSxHQUFJLFdBQVcsS0FBTyxHQUFZLElBQ3RDLE1BQU8sTUFBSyxNQUFNLElBR3RCLFlBQWlCLEVBQVEsRUFBUSxFQUFZLENBQzNDLEFBQUksSUFBZSxRQUNqQixHQUFhLElBR2YsR0FBSSxHQUFTLEtBQUssSUFBSSxHQUFJLEdBQ3RCLEVBQVUsRUFBYSxLQUFLLE1BQVEsS0FBSyxNQUM3QyxNQUFPLEdBQVEsRUFBUyxHQUFVLEVBR3BDLFlBQW9CLEVBQU0sQ0FDeEIsTUFBTyxHQUFPLEdBQU0sR0FBTSxHQUFPLEtBQVEsR0FBSyxFQUFPLEtBQVEsR0FFL0QsWUFBb0IsRUFBTSxDQUN4QixNQUFPLElBQVcsR0FBUSxJQUFNLElBRWxDLFlBQXFCLEVBQU0sRUFBTyxDQUNoQyxHQUFJLEdBQVcsR0FBUyxFQUFRLEVBQUcsSUFBTSxFQUNyQyxFQUFVLEVBQVEsR0FBUSxHQUFZLEdBRTFDLE1BQUksS0FBYSxFQUNSLEdBQVcsR0FBVyxHQUFLLEdBRTNCLENBQUMsR0FBSSxLQUFNLEdBQUksR0FBSSxHQUFJLEdBQUksR0FBSSxHQUFJLEdBQUksR0FBSSxHQUFJLElBQUksRUFBVyxHQUl6RSxZQUFzQixFQUFLLENBQ3pCLEdBQUksR0FBSSxLQUFLLElBQUksRUFBSSxLQUFNLEVBQUksTUFBUSxFQUFHLEVBQUksSUFBSyxFQUFJLEtBQU0sRUFBSSxPQUFRLEVBQUksT0FBUSxFQUFJLGFBRXpGLE1BQUksR0FBSSxLQUFPLEtBQU8sRUFBSSxNQUFRLEdBQ2hDLEdBQUksR0FBSSxNQUFLLEdBQ2IsRUFBRSxlQUFlLEVBQUUsaUJBQW1CLE9BR2pDLENBQUMsRUFFVixZQUF5QixFQUFVLENBQ2pDLEdBQUksR0FBTSxHQUFXLEtBQUssTUFBTSxFQUFXLEdBQUssS0FBSyxNQUFNLEVBQVcsS0FBTyxLQUFLLE1BQU0sRUFBVyxNQUFRLEVBQ3ZHLEVBQU8sRUFBVyxFQUNsQixFQUFNLEdBQU8sS0FBSyxNQUFNLEVBQU8sR0FBSyxLQUFLLE1BQU0sRUFBTyxLQUFPLEtBQUssTUFBTSxFQUFPLE1BQVEsRUFDM0YsTUFBTyxLQUFPLEdBQUssSUFBTyxFQUFJLEdBQUssR0FFckMsWUFBd0IsRUFBTSxDQUM1QixNQUFJLEdBQU8sR0FDRixFQUNLLEVBQU8sR0FBSyxLQUFPLEVBQU8sSUFBTyxFQUdqRCxZQUF1QixFQUFJLEVBQWMsRUFBUSxFQUFVLENBQ3pELEFBQUksSUFBYSxRQUNmLEdBQVcsTUFHYixHQUFJLEdBQU8sR0FBSSxNQUFLLEdBQ2hCLEVBQVcsQ0FDYixVQUFXLE1BQ1gsS0FBTSxVQUNOLE1BQU8sVUFDUCxJQUFLLFVBQ0wsS0FBTSxVQUNOLE9BQVEsV0FHVixBQUFJLEdBQ0YsR0FBUyxTQUFXLEdBR3RCLEdBQUksR0FBVyxFQUFTLENBQ3RCLGFBQWMsR0FDYixHQUVDLEVBQVMsR0FBSSxNQUFLLGVBQWUsRUFBUSxHQUFVLGNBQWMsR0FBTSxLQUFLLFNBQVUsRUFBRyxDQUMzRixNQUFPLEdBQUUsS0FBSyxnQkFBa0IsaUJBRWxDLE1BQU8sR0FBUyxFQUFPLE1BQVEsS0FHakMsWUFBc0IsRUFBWSxFQUFjLENBQzlDLEdBQUksR0FBVSxTQUFTLEVBQVksSUFFbkMsQUFBSSxPQUFPLE1BQU0sSUFDZixHQUFVLEdBR1osR0FBSSxHQUFTLFNBQVMsRUFBYyxLQUFPLEVBQ3ZDLEVBQWUsRUFBVSxHQUFLLE9BQU8sR0FBRyxFQUFTLElBQU0sQ0FBQyxFQUFTLEVBQ3JFLE1BQU8sR0FBVSxHQUFLLEVBR3hCLFlBQWtCLEVBQU8sQ0FDdkIsR0FBSSxHQUFlLE9BQU8sR0FDMUIsR0FBSSxNQUFPLElBQVUsV0FBYSxJQUFVLElBQU0sT0FBTyxNQUFNLEdBQWUsS0FBTSxJQUFJLElBQXFCLHNCQUF3QixHQUNySSxNQUFPLEdBRVQsWUFBeUIsRUFBSyxFQUFZLENBQ3hDLEdBQUksR0FBYSxHQUVqQixPQUFTLEtBQUssR0FDWixHQUFJLEdBQWUsRUFBSyxHQUFJLENBQzFCLEdBQUksR0FBSSxFQUFJLEdBQ1osR0FBSSxBQUFtQixHQUFNLEtBQU0sU0FDbkMsRUFBVyxFQUFXLElBQU0sR0FBUyxHQUl6QyxNQUFPLEdBRVQsWUFBc0IsRUFBUSxFQUFRLENBQ3BDLEdBQUksR0FBUSxLQUFLLE1BQU0sS0FBSyxJQUFJLEVBQVMsS0FDckMsRUFBVSxLQUFLLE1BQU0sS0FBSyxJQUFJLEVBQVMsS0FDdkMsRUFBTyxHQUFVLEVBQUksSUFBTSxJQUUvQixPQUFRLE9BQ0QsUUFDSCxNQUFPLEdBQUssRUFBTyxHQUFTLEVBQU8sR0FBSyxJQUFNLEdBQVMsRUFBUyxPQUU3RCxTQUNILE1BQU8sR0FBSyxFQUFPLEVBQVMsR0FBVSxFQUFJLElBQU0sRUFBVSxRQUV2RCxTQUNILE1BQU8sR0FBSyxFQUFPLEdBQVMsRUFBTyxHQUFLLEdBQVMsRUFBUyxXQUcxRCxLQUFNLElBQUksWUFBVyxnQkFBa0IsRUFBUyx5Q0FHdEQsWUFBb0IsRUFBSyxDQUN2QixNQUFPLEdBQUssRUFBSyxDQUFDLE9BQVEsU0FBVSxTQUFVLGdCQUVoRCxHQUFJLElBQVksMkVBT1osR0FBYSxDQUFDLFVBQVcsV0FBWSxRQUFTLFFBQVMsTUFBTyxPQUFRLE9BQVEsU0FBVSxZQUFhLFVBQVcsV0FBWSxZQUM1SCxHQUFjLENBQUMsTUFBTyxNQUFPLE1BQU8sTUFBTyxNQUFPLE1BQU8sTUFBTyxNQUFPLE1BQU8sTUFBTyxNQUFPLE9BQzVGLEdBQWUsQ0FBQyxJQUFLLElBQUssSUFBSyxJQUFLLElBQUssSUFBSyxJQUFLLElBQUssSUFBSyxJQUFLLElBQUssS0FDM0UsWUFBZ0IsRUFBUSxDQUN0QixPQUFRLE9BQ0QsU0FDSCxNQUFPLEdBQUcsT0FBTyxRQUVkLFFBQ0gsTUFBTyxHQUFHLE9BQU8sUUFFZCxPQUNILE1BQU8sR0FBRyxPQUFPLFFBRWQsVUFDSCxNQUFPLENBQUMsSUFBSyxJQUFLLElBQUssSUFBSyxJQUFLLElBQUssSUFBSyxJQUFLLElBQUssS0FBTSxLQUFNLFVBRTlELFVBQ0gsTUFBTyxDQUFDLEtBQU0sS0FBTSxLQUFNLEtBQU0sS0FBTSxLQUFNLEtBQU0sS0FBTSxLQUFNLEtBQU0sS0FBTSxjQUcxRSxNQUFPLE9BR2IsR0FBSSxJQUFlLENBQUMsU0FBVSxVQUFXLFlBQWEsV0FBWSxTQUFVLFdBQVksVUFDcEYsR0FBZ0IsQ0FBQyxNQUFPLE1BQU8sTUFBTyxNQUFPLE1BQU8sTUFBTyxPQUMzRCxHQUFpQixDQUFDLElBQUssSUFBSyxJQUFLLElBQUssSUFBSyxJQUFLLEtBQ3BELFlBQWtCLEVBQVEsQ0FDeEIsT0FBUSxPQUNELFNBQ0gsTUFBTyxHQUFHLE9BQU8sUUFFZCxRQUNILE1BQU8sR0FBRyxPQUFPLFFBRWQsT0FDSCxNQUFPLEdBQUcsT0FBTyxRQUVkLFVBQ0gsTUFBTyxDQUFDLElBQUssSUFBSyxJQUFLLElBQUssSUFBSyxJQUFLLGFBR3RDLE1BQU8sT0FHYixHQUFJLElBQVksQ0FBQyxLQUFNLE1BQ25CLEdBQVcsQ0FBQyxnQkFBaUIsZUFDN0IsR0FBWSxDQUFDLEtBQU0sTUFDbkIsR0FBYSxDQUFDLElBQUssS0FDdkIsWUFBYyxFQUFRLENBQ3BCLE9BQVEsT0FDRCxTQUNILE1BQU8sR0FBRyxPQUFPLFFBRWQsUUFDSCxNQUFPLEdBQUcsT0FBTyxRQUVkLE9BQ0gsTUFBTyxHQUFHLE9BQU8sWUFHakIsTUFBTyxPQUdiLFlBQTZCLEVBQUksQ0FDL0IsTUFBTyxJQUFVLEVBQUcsS0FBTyxHQUFLLEVBQUksR0FFdEMsWUFBNEIsRUFBSSxFQUFRLENBQ3RDLE1BQU8sSUFBUyxHQUFRLEVBQUcsUUFBVSxHQUV2QyxZQUEwQixFQUFJLEVBQVEsQ0FDcEMsTUFBTyxJQUFPLEdBQVEsRUFBRyxNQUFRLEdBRW5DLFlBQXdCLEVBQUksRUFBUSxDQUNsQyxNQUFPLElBQUssR0FBUSxFQUFHLEtBQU8sRUFBSSxFQUFJLEdBRXhDLFlBQTRCLEVBQU0sRUFBTyxFQUFTLEVBQVEsQ0FDeEQsQUFBSSxJQUFZLFFBQ2QsR0FBVSxVQUdSLElBQVcsUUFDYixHQUFTLElBR1gsR0FBSSxHQUFRLENBQ1YsTUFBTyxDQUFDLE9BQVEsT0FDaEIsU0FBVSxDQUFDLFVBQVcsUUFDdEIsT0FBUSxDQUFDLFFBQVMsT0FDbEIsTUFBTyxDQUFDLE9BQVEsT0FDaEIsS0FBTSxDQUFDLE1BQU8sTUFBTyxRQUNyQixNQUFPLENBQUMsT0FBUSxPQUNoQixRQUFTLENBQUMsU0FBVSxRQUNwQixRQUFTLENBQUMsU0FBVSxTQUVsQixFQUFXLENBQUMsUUFBUyxVQUFXLFdBQVcsUUFBUSxLQUFVLEdBRWpFLEdBQUksSUFBWSxRQUFVLEVBQVUsQ0FDbEMsR0FBSSxHQUFRLElBQVMsT0FFckIsT0FBUSxPQUNELEdBQ0gsTUFBTyxHQUFRLFdBQWEsUUFBVSxFQUFNLEdBQU0sT0FFL0MsR0FDSCxNQUFPLEdBQVEsWUFBYyxRQUFVLEVBQU0sR0FBTSxPQUVoRCxHQUNILE1BQU8sR0FBUSxRQUFVLFFBQVUsRUFBTSxHQUFNLElBS3JELEdBQUksR0FBVyxPQUFPLEdBQUcsRUFBTyxLQUFPLEVBQVEsRUFDM0MsRUFBVyxLQUFLLElBQUksR0FDcEIsRUFBVyxJQUFhLEVBQ3hCLEVBQVcsRUFBTSxHQUNqQixFQUFVLEVBQVMsRUFBVyxFQUFTLEdBQUssRUFBUyxJQUFNLEVBQVMsR0FBSyxFQUFXLEVBQU0sR0FBTSxHQUFLLEVBQ3pHLE1BQU8sR0FBVyxFQUFXLElBQU0sRUFBVSxPQUFTLE1BQVEsRUFBVyxJQUFNLEVBR2pGLFlBQXlCLEVBQVEsRUFBZSxDQUc5QyxPQUZJLEdBQUksR0FFQyxFQUFZLEVBQWdDLEdBQVMsRUFBTyxDQUFFLEdBQVEsS0FBYSxNQUFPLENBQ2pHLEdBQUksR0FBUSxFQUFNLE1BRWxCLEFBQUksRUFBTSxRQUNSLEdBQUssRUFBTSxJQUVYLEdBQUssRUFBYyxFQUFNLEtBSTdCLE1BQU8sR0FHVCxHQUFJLElBQTBCLENBQzVCLEVBQUcsR0FDSCxHQUFJLEdBQ0osSUFBSyxHQUNMLEtBQU0sR0FDTixFQUFHLEdBQ0gsR0FBSSxHQUNKLElBQUssR0FDTCxLQUFNLEdBQ04sRUFBRyxHQUNILEdBQUksR0FDSixJQUFLLEdBQ0wsS0FBTSxHQUNOLEVBQUcsR0FDSCxHQUFJLEdBQ0osSUFBSyxHQUNMLEtBQU0sR0FDTixFQUFHLEdBQ0gsR0FBSSxHQUNKLElBQUssR0FDTCxLQUFNLElBTUosR0FBeUIsVUFBWSxDQUN2QyxFQUFVLE9BQVMsU0FBZ0IsRUFBUSxFQUFNLENBQy9DLE1BQUksS0FBUyxRQUNYLEdBQU8sSUFHRixHQUFJLEdBQVUsRUFBUSxJQUcvQixFQUFVLFlBQWMsU0FBcUIsRUFBSyxDQU1oRCxPQUxJLEdBQVUsS0FDVixFQUFjLEdBQ2QsRUFBWSxHQUNaLEVBQVMsR0FFSixFQUFJLEVBQUcsRUFBSSxFQUFJLE9BQVEsSUFBSyxDQUNuQyxHQUFJLEdBQUksRUFBSSxPQUFPLEdBRW5CLEFBQUksSUFBTSxJQUNKLEdBQVksT0FBUyxHQUN2QixFQUFPLEtBQUssQ0FDVixRQUFTLEVBQ1QsSUFBSyxJQUlULEVBQVUsS0FDVixFQUFjLEdBQ2QsRUFBWSxDQUFDLEdBQ1IsQUFBSSxHQUVBLElBQU0sRUFEZixHQUFlLEVBSVgsR0FBWSxPQUFTLEdBQ3ZCLEVBQU8sS0FBSyxDQUNWLFFBQVMsR0FDVCxJQUFLLElBSVQsRUFBYyxFQUNkLEVBQVUsR0FJZCxNQUFJLEdBQVksT0FBUyxHQUN2QixFQUFPLEtBQUssQ0FDVixRQUFTLEVBQ1QsSUFBSyxJQUlGLEdBR1QsRUFBVSx1QkFBeUIsU0FBZ0MsRUFBTyxDQUN4RSxNQUFPLElBQXdCLElBR2pDLFdBQW1CLEVBQVEsRUFBWSxDQUNyQyxLQUFLLEtBQU8sRUFDWixLQUFLLElBQU0sRUFDWCxLQUFLLFVBQVksS0FHbkIsR0FBSSxHQUFTLEVBQVUsVUFFdkIsU0FBTyx3QkFBMEIsU0FBaUMsRUFBSSxFQUFNLENBQzFFLEFBQUksS0FBSyxZQUFjLE1BQ3JCLE1BQUssVUFBWSxLQUFLLElBQUkscUJBRzVCLEdBQUksR0FBSyxLQUFLLFVBQVUsWUFBWSxFQUFJLEVBQVMsR0FBSSxLQUFLLEtBQU0sSUFDaEUsTUFBTyxHQUFHLFVBR1osRUFBTyxlQUFpQixTQUF3QixFQUFJLEVBQU0sQ0FDeEQsQUFBSSxJQUFTLFFBQ1gsR0FBTyxJQUdULEdBQUksR0FBSyxLQUFLLElBQUksWUFBWSxFQUFJLEVBQVMsR0FBSSxLQUFLLEtBQU0sSUFDMUQsTUFBTyxHQUFHLFVBR1osRUFBTyxvQkFBc0IsU0FBNkIsRUFBSSxFQUFNLENBQ2xFLEFBQUksSUFBUyxRQUNYLEdBQU8sSUFHVCxHQUFJLEdBQUssS0FBSyxJQUFJLFlBQVksRUFBSSxFQUFTLEdBQUksS0FBSyxLQUFNLElBQzFELE1BQU8sR0FBRyxpQkFHWixFQUFPLGdCQUFrQixTQUF5QixFQUFJLEVBQU0sQ0FDMUQsQUFBSSxJQUFTLFFBQ1gsR0FBTyxJQUdULEdBQUksR0FBSyxLQUFLLElBQUksWUFBWSxFQUFJLEVBQVMsR0FBSSxLQUFLLEtBQU0sSUFDMUQsTUFBTyxHQUFHLG1CQUdaLEVBQU8sSUFBTSxTQUFhLEVBQUcsRUFBRyxDQU05QixHQUxJLElBQU0sUUFDUixHQUFJLEdBSUYsS0FBSyxLQUFLLFlBQ1osTUFBTyxJQUFTLEVBQUcsR0FHckIsR0FBSSxHQUFPLEVBQVMsR0FBSSxLQUFLLE1BRTdCLE1BQUksR0FBSSxHQUNOLEdBQUssTUFBUSxHQUdSLEtBQUssSUFBSSxnQkFBZ0IsR0FBTSxPQUFPLElBRy9DLEVBQU8seUJBQTJCLFNBQWtDLEVBQUksRUFBSyxDQUMzRSxHQUFJLEdBQVEsS0FFUixFQUFlLEtBQUssSUFBSSxnQkFBa0IsS0FDMUMsRUFBdUIsS0FBSyxJQUFJLGdCQUFrQixLQUFLLElBQUksaUJBQW1CLFVBQzlFLEVBQVMsU0FBZ0IsRUFBTSxHQUFTLENBQzFDLE1BQU8sR0FBTSxJQUFJLFFBQVEsRUFBSSxFQUFNLEtBRWpDLEVBQWUsU0FBc0IsRUFBTSxDQUM3QyxNQUFJLEdBQUcsZUFBaUIsRUFBRyxTQUFXLEdBQUssRUFBSyxPQUN2QyxJQUdGLEVBQUcsUUFBVSxFQUFHLEtBQUssYUFBYSxFQUFHLEdBQUksRUFBSyxRQUFVLElBRTdELEVBQVcsVUFBb0IsQ0FDakMsTUFBTyxHQUFlLEdBQW9CLEdBQU0sRUFBTyxDQUNyRCxLQUFNLFVBQ04sVUFBVyxPQUNWLGNBRUQsRUFBUSxTQUFlLEVBQVEsR0FBWSxDQUM3QyxNQUFPLEdBQWUsR0FBaUIsRUFBSSxHQUFVLEVBQU8sR0FBYSxDQUN2RSxNQUFPLEdBQ0wsQ0FDRixNQUFPLEVBQ1AsSUFBSyxXQUNKLFVBRUQsRUFBVSxTQUFpQixFQUFRLEdBQVksQ0FDakQsTUFBTyxHQUFlLEdBQW1CLEVBQUksR0FBVSxFQUFPLEdBQWEsQ0FDekUsUUFBUyxHQUNQLENBQ0YsUUFBUyxFQUNULE1BQU8sT0FDUCxJQUFLLFdBQ0osWUFFRCxFQUFhLFNBQW9CLEVBQU8sQ0FDMUMsR0FBSSxJQUFhLEVBQVUsdUJBQXVCLEdBRWxELE1BQUksSUFDSyxFQUFNLHdCQUF3QixFQUFJLElBRWxDLEdBR1AsRUFBTSxTQUFhLEVBQVEsQ0FDN0IsTUFBTyxHQUFlLEdBQWUsRUFBSSxHQUFVLEVBQU8sQ0FDeEQsSUFBSyxHQUNKLFFBRUQsR0FBZ0IsU0FBdUIsRUFBTyxDQUVoRCxPQUFRLE9BRUQsSUFDSCxNQUFPLEdBQU0sSUFBSSxFQUFHLGlCQUVqQixRQUVBLE1BQ0gsTUFBTyxHQUFNLElBQUksRUFBRyxZQUFhLE9BRzlCLElBQ0gsTUFBTyxHQUFNLElBQUksRUFBRyxZQUVqQixLQUNILE1BQU8sR0FBTSxJQUFJLEVBQUcsT0FBUSxPQUd6QixLQUNILE1BQU8sR0FBTSxJQUFJLEtBQUssTUFBTSxFQUFHLFlBQWMsSUFBSyxPQUUvQyxNQUNILE1BQU8sR0FBTSxJQUFJLEtBQUssTUFBTSxFQUFHLFlBQWMsVUFHMUMsSUFDSCxNQUFPLEdBQU0sSUFBSSxFQUFHLFlBRWpCLEtBQ0gsTUFBTyxHQUFNLElBQUksRUFBRyxPQUFRLE9BR3pCLElBQ0gsTUFBTyxHQUFNLElBQUksRUFBRyxLQUFPLElBQU8sRUFBSSxHQUFLLEVBQUcsS0FBTyxRQUVsRCxLQUNILE1BQU8sR0FBTSxJQUFJLEVBQUcsS0FBTyxJQUFPLEVBQUksR0FBSyxFQUFHLEtBQU8sR0FBSSxPQUV0RCxJQUNILE1BQU8sR0FBTSxJQUFJLEVBQUcsVUFFakIsS0FDSCxNQUFPLEdBQU0sSUFBSSxFQUFHLEtBQU0sT0FHdkIsSUFFSCxNQUFPLEdBQWEsQ0FDbEIsT0FBUSxTQUNSLE9BQVEsRUFBTSxLQUFLLGFBR2xCLEtBRUgsTUFBTyxHQUFhLENBQ2xCLE9BQVEsUUFDUixPQUFRLEVBQU0sS0FBSyxhQUdsQixNQUVILE1BQU8sR0FBYSxDQUNsQixPQUFRLFNBQ1IsT0FBUSxFQUFNLEtBQUssYUFHbEIsT0FFSCxNQUFPLEdBQUcsS0FBSyxXQUFXLEVBQUcsR0FBSSxDQUMvQixPQUFRLFFBQ1IsT0FBUSxFQUFNLElBQUksYUFHakIsUUFFSCxNQUFPLEdBQUcsS0FBSyxXQUFXLEVBQUcsR0FBSSxDQUMvQixPQUFRLE9BQ1IsT0FBUSxFQUFNLElBQUksYUFJakIsSUFFSCxNQUFPLEdBQUcsYUFHUCxJQUNILE1BQU8sU0FHSixJQUNILE1BQU8sR0FBdUIsRUFBTyxDQUNuQyxJQUFLLFdBQ0osT0FBUyxFQUFNLElBQUksRUFBRyxTQUV0QixLQUNILE1BQU8sR0FBdUIsRUFBTyxDQUNuQyxJQUFLLFdBQ0osT0FBUyxFQUFNLElBQUksRUFBRyxJQUFLLE9BRzNCLElBRUgsTUFBTyxHQUFNLElBQUksRUFBRyxhQUVqQixNQUVILE1BQU8sR0FBUSxRQUFTLFFBRXJCLE9BRUgsTUFBTyxHQUFRLE9BQVEsUUFFcEIsUUFFSCxNQUFPLEdBQVEsU0FBVSxRQUd0QixJQUVILE1BQU8sR0FBTSxJQUFJLEVBQUcsYUFFakIsTUFFSCxNQUFPLEdBQVEsUUFBUyxRQUVyQixPQUVILE1BQU8sR0FBUSxPQUFRLFFBRXBCLFFBRUgsTUFBTyxHQUFRLFNBQVUsUUFHdEIsSUFFSCxNQUFPLEdBQXVCLEVBQU8sQ0FDbkMsTUFBTyxVQUNQLElBQUssV0FDSixTQUFXLEVBQU0sSUFBSSxFQUFHLFdBRXhCLEtBRUgsTUFBTyxHQUF1QixFQUFPLENBQ25DLE1BQU8sVUFDUCxJQUFLLFdBQ0osU0FBVyxFQUFNLElBQUksRUFBRyxNQUFPLE9BRS9CLE1BRUgsTUFBTyxHQUFNLFFBQVMsUUFFbkIsT0FFSCxNQUFPLEdBQU0sT0FBUSxRQUVsQixRQUVILE1BQU8sR0FBTSxTQUFVLFFBR3BCLElBRUgsTUFBTyxHQUF1QixFQUFPLENBQ25DLE1BQU8sV0FDTixTQUFXLEVBQU0sSUFBSSxFQUFHLFdBRXhCLEtBRUgsTUFBTyxHQUF1QixFQUFPLENBQ25DLE1BQU8sV0FDTixTQUFXLEVBQU0sSUFBSSxFQUFHLE1BQU8sT0FFL0IsTUFFSCxNQUFPLEdBQU0sUUFBUyxRQUVuQixPQUVILE1BQU8sR0FBTSxPQUFRLFFBRWxCLFFBRUgsTUFBTyxHQUFNLFNBQVUsUUFHcEIsSUFFSCxNQUFPLEdBQXVCLEVBQU8sQ0FDbkMsS0FBTSxXQUNMLFFBQVUsRUFBTSxJQUFJLEVBQUcsVUFFdkIsS0FFSCxNQUFPLEdBQXVCLEVBQU8sQ0FDbkMsS0FBTSxXQUNMLFFBQVUsRUFBTSxJQUFJLEVBQUcsS0FBSyxXQUFXLE1BQU0sSUFBSyxPQUVsRCxPQUVILE1BQU8sR0FBdUIsRUFBTyxDQUNuQyxLQUFNLFdBQ0wsUUFBVSxFQUFNLElBQUksRUFBRyxLQUFNLE9BRTdCLFNBRUgsTUFBTyxHQUF1QixFQUFPLENBQ25DLEtBQU0sV0FDTCxRQUFVLEVBQU0sSUFBSSxFQUFHLEtBQU0sT0FHN0IsSUFFSCxNQUFPLEdBQUksYUFFUixLQUVILE1BQU8sR0FBSSxZQUVSLFFBQ0gsTUFBTyxHQUFJLGNBRVIsS0FDSCxNQUFPLEdBQU0sSUFBSSxFQUFHLFNBQVMsV0FBVyxNQUFNLElBQUssT0FFaEQsT0FDSCxNQUFPLEdBQU0sSUFBSSxFQUFHLFNBQVUsT0FFM0IsSUFDSCxNQUFPLEdBQU0sSUFBSSxFQUFHLGdCQUVqQixLQUNILE1BQU8sR0FBTSxJQUFJLEVBQUcsV0FBWSxPQUU3QixJQUNILE1BQU8sR0FBTSxJQUFJLEVBQUcsYUFFakIsTUFDSCxNQUFPLEdBQU0sSUFBSSxFQUFHLFFBQVMsT0FFMUIsSUFFSCxNQUFPLEdBQU0sSUFBSSxFQUFHLGFBRWpCLEtBRUgsTUFBTyxHQUFNLElBQUksRUFBRyxRQUFTLE9BRTFCLElBQ0gsTUFBTyxHQUFNLElBQUksS0FBSyxNQUFNLEVBQUcsR0FBSyxVQUVqQyxJQUNILE1BQU8sR0FBTSxJQUFJLEVBQUcsWUFHcEIsTUFBTyxHQUFXLEtBSXhCLE1BQU8sSUFBZ0IsRUFBVSxZQUFZLEdBQU0sS0FHckQsRUFBTyx5QkFBMkIsU0FBa0MsRUFBSyxFQUFLLENBQzVFLEdBQUksR0FBUyxLQUVULEVBQWUsU0FBc0IsRUFBTyxDQUM5QyxPQUFRLEVBQU0sUUFDUCxJQUNILE1BQU8sa0JBRUosSUFDSCxNQUFPLGFBRUosSUFDSCxNQUFPLGFBRUosSUFDSCxNQUFPLFdBRUosSUFDSCxNQUFPLFVBRUosSUFDSCxNQUFPLFlBRUosSUFDSCxNQUFPLGVBR1AsTUFBTyxRQUdULEVBQWdCLFNBQXVCLEVBQVEsQ0FDakQsTUFBTyxVQUFVLEVBQU8sQ0FDdEIsR0FBSSxHQUFTLEVBQWEsR0FFMUIsTUFBSSxHQUNLLEVBQU8sSUFBSSxFQUFPLElBQUksR0FBUyxFQUFNLFFBRXJDLElBSVQsRUFBUyxFQUFVLFlBQVksR0FDL0IsRUFBYSxFQUFPLE9BQU8sU0FBVSxFQUFPLEVBQU0sQ0FDcEQsR0FBSSxHQUFVLEVBQUssUUFDZixFQUFNLEVBQUssSUFDZixNQUFPLEdBQVUsRUFBUSxFQUFNLE9BQU8sSUFDckMsSUFDQyxFQUFZLEVBQUksUUFBUSxNQUFNLEVBQUssRUFBVyxJQUFJLEdBQWMsT0FBTyxTQUFVLEVBQUcsQ0FDdEYsTUFBTyxNQUdULE1BQU8sSUFBZ0IsRUFBUSxFQUFjLEtBR3hDLEtBR0wsR0FBdUIsVUFBWSxDQUNyQyxXQUFpQixFQUFRLEVBQWEsQ0FDcEMsS0FBSyxPQUFTLEVBQ2QsS0FBSyxZQUFjLEVBR3JCLEdBQUksR0FBUyxFQUFRLFVBRXJCLFNBQU8sVUFBWSxVQUFxQixDQUN0QyxNQUFJLE1BQUssWUFDQSxLQUFLLE9BQVMsS0FBTyxLQUFLLFlBRTFCLEtBQUssUUFJVCxLQU9MLEdBQW9CLFVBQVksQ0FDbEMsWUFBZ0IsRUFFaEIsR0FBSSxHQUFTLEVBQUssVUFXbEIsU0FBTyxXQUFhLFNBQW9CLEVBQUksRUFBTSxDQUNoRCxLQUFNLElBQUksS0FZWixFQUFPLGFBQWUsU0FBc0IsRUFBSSxFQUFRLENBQ3RELEtBQU0sSUFBSSxLQVVaLEVBQU8sT0FBUyxTQUFnQixFQUFJLENBQ2xDLEtBQU0sSUFBSSxLQVVaLEVBQU8sT0FBUyxTQUFnQixFQUFXLENBQ3pDLEtBQU0sSUFBSSxLQVNaLEVBQWEsRUFBTSxDQUFDLENBQ2xCLElBQUssT0FDTCxJQU1BLFVBQWUsQ0FDYixLQUFNLElBQUksTUFRWCxDQUNELElBQUssT0FDTCxJQUFLLFVBQWUsQ0FDbEIsS0FBTSxJQUFJLE1BUVgsQ0FDRCxJQUFLLGNBQ0wsSUFBSyxVQUFlLENBQ2xCLEtBQU0sSUFBSSxNQUVYLENBQ0QsSUFBSyxVQUNMLElBQUssVUFBZSxDQUNsQixLQUFNLElBQUksUUFJUCxLQUdMLEdBQWMsS0FNZCxHQUEwQixTQUFVLEVBQU8sQ0FDN0MsRUFBZSxFQUFZLEdBRTNCLFlBQXNCLENBQ3BCLE1BQU8sR0FBTSxNQUFNLEtBQU0sWUFBYyxLQUd6QyxHQUFJLEdBQVMsRUFBVyxVQUd4QixTQUFPLFdBQWEsU0FBb0IsRUFBSSxFQUFNLENBQ2hELEdBQUksR0FBUyxFQUFLLE9BQ2QsRUFBUyxFQUFLLE9BQ2xCLE1BQU8sSUFBYyxFQUFJLEVBQVEsSUFLbkMsRUFBTyxhQUFlLFNBQXdCLEVBQUksRUFBUSxDQUN4RCxNQUFPLElBQWEsS0FBSyxPQUFPLEdBQUssSUFLdkMsRUFBTyxPQUFTLFNBQWdCLEVBQUksQ0FDbEMsTUFBTyxDQUFDLEdBQUksTUFBSyxHQUFJLHFCQUt2QixFQUFPLE9BQVMsU0FBZ0IsRUFBVyxDQUN6QyxNQUFPLEdBQVUsT0FBUyxVQUs1QixFQUFhLEVBQVksQ0FBQyxDQUN4QixJQUFLLE9BQ0wsSUFFQSxVQUFlLENBQ2IsTUFBTyxXQUlSLENBQ0QsSUFBSyxPQUNMLElBQUssVUFBZSxDQUNsQixNQUFPLElBQUksTUFBSyxpQkFBaUIsa0JBQWtCLFdBSXBELENBQ0QsSUFBSyxjQUNMLElBQUssVUFBZSxDQUNsQixNQUFPLEtBRVIsQ0FDRCxJQUFLLFVBQ0wsSUFBSyxVQUFlLENBQ2xCLE1BQU8sTUFFUCxDQUFDLENBQ0gsSUFBSyxXQUNMLElBS0EsVUFBZSxDQUNiLE1BQUksTUFBZ0IsTUFDbEIsSUFBYyxHQUFJLElBR2IsT0FJSixHQUNQLElBRUUsR0FBZ0IsT0FBTyxJQUFNLEdBQVUsT0FBUyxLQUNoRCxHQUFXLEdBRWYsWUFBaUIsRUFBTSxDQUNyQixNQUFLLElBQVMsSUFDWixJQUFTLEdBQVEsR0FBSSxNQUFLLGVBQWUsUUFBUyxDQUNoRCxPQUFRLEdBQ1IsU0FBVSxFQUNWLEtBQU0sVUFDTixNQUFPLFVBQ1AsSUFBSyxVQUNMLEtBQU0sVUFDTixPQUFRLFVBQ1IsT0FBUSxhQUlMLEdBQVMsR0FHbEIsR0FBSSxJQUFZLENBQ2QsS0FBTSxFQUNOLE1BQU8sRUFDUCxJQUFLLEVBQ0wsS0FBTSxFQUNOLE9BQVEsRUFDUixPQUFRLEdBR1YsWUFBcUIsRUFBSyxFQUFNLENBQzlCLEdBQUksR0FBWSxFQUFJLE9BQU8sR0FBTSxRQUFRLFVBQVcsSUFDaEQsRUFBUywwQ0FBMEMsS0FBSyxHQUN4RCxFQUFTLEVBQU8sR0FDaEIsRUFBTyxFQUFPLEdBQ2QsRUFBUSxFQUFPLEdBQ2YsRUFBUSxFQUFPLEdBQ2YsRUFBVSxFQUFPLEdBQ2pCLEVBQVUsRUFBTyxHQUNyQixNQUFPLENBQUMsRUFBTyxFQUFRLEVBQU0sRUFBTyxFQUFTLEdBRy9DLFlBQXFCLEVBQUssRUFBTSxDQUk5QixPQUhJLEdBQVksRUFBSSxjQUFjLEdBQzlCLEVBQVMsR0FFSixFQUFJLEVBQUcsRUFBSSxFQUFVLE9BQVEsSUFBSyxDQUN6QyxHQUFJLEdBQWUsRUFBVSxHQUN6QixFQUFPLEVBQWEsS0FDcEIsRUFBUSxFQUFhLE1BQ3JCLEVBQU0sR0FBVSxHQUVwQixBQUFLLEdBQVksSUFDZixHQUFPLEdBQU8sU0FBUyxFQUFPLEtBSWxDLE1BQU8sR0FHVCxHQUFJLElBQWdCLEdBTWhCLEdBQXdCLFNBQVUsRUFBTyxDQUMzQyxFQUFlLEVBQVUsR0FNekIsRUFBUyxPQUFTLFNBQWdCLEVBQU0sQ0FDdEMsTUFBSyxJQUFjLElBQ2pCLElBQWMsR0FBUSxHQUFJLEdBQVMsSUFHOUIsR0FBYyxJQVF2QixFQUFTLFdBQWEsVUFBc0IsQ0FDMUMsR0FBZ0IsR0FDaEIsR0FBVyxJQVliLEVBQVMsaUJBQW1CLFNBQTBCLEVBQUcsQ0FDdkQsTUFBTyxDQUFDLENBQUUsSUFBSyxFQUFFLE1BQU0sTUFZekIsRUFBUyxZQUFjLFNBQXFCLEVBQU0sQ0FDaEQsR0FBSSxDQUFDLEVBQ0gsTUFBTyxHQUdULEdBQUksQ0FDRixVQUFJLE1BQUssZUFBZSxRQUFTLENBQy9CLFNBQVUsSUFDVCxTQUNJLFNBQ0EsRUFBUCxDQUNBLE1BQU8sS0FJWCxXQUFrQixFQUFNLENBQ3RCLEdBQUksR0FFSixTQUFRLEVBQU0sS0FBSyxPQUFTLEtBRzVCLEVBQU0sU0FBVyxFQUdqQixFQUFNLE1BQVEsRUFBUyxZQUFZLEdBQzVCLEVBS1QsR0FBSSxHQUFTLEVBQVMsVUFHdEIsU0FBTyxXQUFhLFNBQW9CLEVBQUksRUFBTSxDQUNoRCxHQUFJLEdBQVMsRUFBSyxPQUNkLEVBQVMsRUFBSyxPQUNsQixNQUFPLElBQWMsRUFBSSxFQUFRLEVBQVEsS0FBSyxPQUtoRCxFQUFPLGFBQWUsU0FBd0IsRUFBSSxFQUFRLENBQ3hELE1BQU8sSUFBYSxLQUFLLE9BQU8sR0FBSyxJQUt2QyxFQUFPLE9BQVMsU0FBZ0IsRUFBSSxDQUNsQyxHQUFJLEdBQU8sR0FBSSxNQUFLLEdBQ3BCLEdBQUksTUFBTSxHQUFPLE1BQU8sS0FFeEIsR0FBSSxHQUFNLEdBQVEsS0FBSyxNQUNuQixFQUFRLEVBQUksY0FBZ0IsR0FBWSxFQUFLLEdBQVEsR0FBWSxFQUFLLEdBQ3RFLEVBQU8sRUFBTSxHQUNiLEVBQVEsRUFBTSxHQUNkLEVBQU0sRUFBTSxHQUNaLEVBQU8sRUFBTSxHQUNiLEVBQVMsRUFBTSxHQUNmLEVBQVMsRUFBTSxHQUdmLEVBQWUsSUFBUyxHQUFLLEVBQUksRUFDakMsR0FBUSxHQUFhLENBQ3ZCLEtBQU0sRUFDTixNQUFPLEVBQ1AsSUFBSyxFQUNMLEtBQU0sRUFDTixPQUFRLEVBQ1IsT0FBUSxFQUNSLFlBQWEsSUFFWCxHQUFPLENBQUMsRUFDUixFQUFPLEdBQU8sSUFDbEIsV0FBUSxHQUFRLEVBQUksRUFBTyxJQUFPLEVBQzFCLElBQVEsSUFBUyxJQUFLLE1BS2hDLEVBQU8sT0FBUyxTQUFnQixFQUFXLENBQ3pDLE1BQU8sR0FBVSxPQUFTLFFBQVUsRUFBVSxPQUFTLEtBQUssTUFLOUQsRUFBYSxFQUFVLENBQUMsQ0FDdEIsSUFBSyxPQUNMLElBQUssVUFBZSxDQUNsQixNQUFPLFNBSVIsQ0FDRCxJQUFLLE9BQ0wsSUFBSyxVQUFlLENBQ2xCLE1BQU8sTUFBSyxXQUliLENBQ0QsSUFBSyxjQUNMLElBQUssVUFBZSxDQUNsQixNQUFPLEtBRVIsQ0FDRCxJQUFLLFVBQ0wsSUFBSyxVQUFlLENBQ2xCLE1BQU8sTUFBSyxVQUlULEdBQ1AsSUFFRSxHQUFZLEtBTVosR0FBK0IsU0FBVSxFQUFPLENBQ2xELEVBQWUsRUFBaUIsR0FPaEMsRUFBZ0IsU0FBVyxTQUFrQixFQUFRLENBQ25ELE1BQU8sS0FBVyxFQUFJLEVBQWdCLFlBQWMsR0FBSSxHQUFnQixJQVkxRSxFQUFnQixlQUFpQixTQUF3QixFQUFHLENBQzFELEdBQUksRUFBRyxDQUNMLEdBQUksR0FBSSxFQUFFLE1BQU0seUNBRWhCLEdBQUksRUFDRixNQUFPLElBQUksR0FBZ0IsR0FBYSxFQUFFLEdBQUksRUFBRSxLQUlwRCxNQUFPLE9BR1QsV0FBeUIsRUFBUSxDQUMvQixHQUFJLEdBRUosU0FBUSxFQUFNLEtBQUssT0FBUyxLQUc1QixFQUFNLE1BQVEsRUFDUCxFQUtULEdBQUksR0FBUyxFQUFnQixVQUc3QixTQUFPLFdBQWEsVUFBc0IsQ0FDeEMsTUFBTyxNQUFLLE1BS2QsRUFBTyxhQUFlLFNBQXdCLEVBQUksRUFBUSxDQUN4RCxNQUFPLElBQWEsS0FBSyxNQUFPLElBTWxDLEVBQU8sT0FBUyxVQUFrQixDQUNoQyxNQUFPLE1BQUssT0FLZCxFQUFPLE9BQVMsU0FBZ0IsRUFBVyxDQUN6QyxNQUFPLEdBQVUsT0FBUyxTQUFXLEVBQVUsUUFBVSxLQUFLLE9BS2hFLEVBQWEsRUFBaUIsQ0FBQyxDQUM3QixJQUFLLE9BQ0wsSUFBSyxVQUFlLENBQ2xCLE1BQU8sVUFJUixDQUNELElBQUssT0FDTCxJQUFLLFVBQWUsQ0FDbEIsTUFBTyxNQUFLLFFBQVUsRUFBSSxNQUFRLE1BQVEsR0FBYSxLQUFLLE1BQU8sWUFFcEUsQ0FDRCxJQUFLLGNBQ0wsSUFBSyxVQUFlLENBQ2xCLE1BQU8sS0FFUixDQUNELElBQUssVUFDTCxJQUFLLFVBQWUsQ0FDbEIsTUFBTyxNQUVQLENBQUMsQ0FDSCxJQUFLLGNBQ0wsSUFLQSxVQUFlLENBQ2IsTUFBSSxNQUFjLE1BQ2hCLElBQVksR0FBSSxHQUFnQixJQUczQixPQUlKLEdBQ1AsSUFPRSxHQUEyQixTQUFVLEVBQU8sQ0FDOUMsRUFBZSxFQUFhLEdBRTVCLFdBQXFCLEVBQVUsQ0FDN0IsR0FBSSxHQUVKLFNBQVEsRUFBTSxLQUFLLE9BQVMsS0FHNUIsRUFBTSxTQUFXLEVBQ1YsRUFLVCxHQUFJLEdBQVMsRUFBWSxVQUd6QixTQUFPLFdBQWEsVUFBc0IsQ0FDeEMsTUFBTyxPQUtULEVBQU8sYUFBZSxVQUF3QixDQUM1QyxNQUFPLElBS1QsRUFBTyxPQUFTLFVBQWtCLENBQ2hDLE1BQU8sTUFLVCxFQUFPLE9BQVMsVUFBa0IsQ0FDaEMsTUFBTyxJQUtULEVBQWEsRUFBYSxDQUFDLENBQ3pCLElBQUssT0FDTCxJQUFLLFVBQWUsQ0FDbEIsTUFBTyxZQUlSLENBQ0QsSUFBSyxPQUNMLElBQUssVUFBZSxDQUNsQixNQUFPLE1BQUssV0FJYixDQUNELElBQUssY0FDTCxJQUFLLFVBQWUsQ0FDbEIsTUFBTyxLQUVSLENBQ0QsSUFBSyxVQUNMLElBQUssVUFBZSxDQUNsQixNQUFPLE9BSUosR0FDUCxJQUtGLFlBQXVCLEVBQU8sRUFBYSxDQUV6QyxHQUFJLEdBQVksSUFBVSxJQUFVLEtBQ2xDLE1BQU8sR0FDRixHQUFJLFlBQWlCLElBQzFCLE1BQU8sR0FDRixHQUFJLEdBQVMsR0FBUSxDQUMxQixHQUFJLEdBQVUsRUFBTSxjQUNwQixNQUFJLEtBQVksU0FBVyxJQUFZLFNBQWlCLEVBQXFCLElBQVksT0FBUyxJQUFZLE1BQWMsR0FBZ0IsWUFBcUIsR0FBUyxpQkFBaUIsR0FBaUIsR0FBUyxPQUFPLEdBQW1CLEdBQWdCLGVBQWUsSUFBWSxHQUFJLElBQVksT0FDclMsT0FBSSxHQUFTLEdBQ1gsR0FBZ0IsU0FBUyxHQUN2QixNQUFPLElBQVUsVUFBWSxFQUFNLFFBQVUsTUFBTyxHQUFNLFFBQVcsU0FHdkUsRUFFQSxHQUFJLElBQVksR0FJM0IsR0FBSSxJQUFNLFVBQWUsQ0FDdkIsTUFBTyxNQUFLLE9BRVYsR0FBYyxTQUNkLEVBQWdCLEtBQ2hCLEVBQXlCLEtBQ3pCLEVBQXdCLEtBQ3hCLEdBTUEsR0FBd0IsVUFBWSxDQUN0QyxZQUFvQixFQU1wQixTQUFTLFlBQWMsVUFBdUIsQ0FDNUMsR0FBTyxhQUNQLEdBQVMsY0FHWCxFQUFhLEVBQVUsS0FBTSxDQUFDLENBQzVCLElBQUssTUFDTCxJQUtBLFVBQWUsQ0FDYixNQUFPLEtBVVQsSUFBSyxTQUFhLEVBQUcsQ0FDbkIsR0FBTSxJQVFQLENBQ0QsSUFBSyxjQUNMLElBTUEsVUFBZSxDQUNiLE1BQU8sSUFBYyxHQUFhLEdBQVcsV0FPL0MsSUFBSyxTQUFhLEVBQU0sQ0FDdEIsR0FBYyxJQUVmLENBQ0QsSUFBSyxnQkFDTCxJQUFLLFVBQWUsQ0FDbEIsTUFBTyxJQU9ULElBQUssU0FBYSxFQUFRLENBQ3hCLEVBQWdCLElBT2pCLENBQ0QsSUFBSyx5QkFDTCxJQUFLLFVBQWUsQ0FDbEIsTUFBTyxJQU9ULElBQUssU0FBYSxFQUFpQixDQUNqQyxFQUF5QixJQU8xQixDQUNELElBQUssd0JBQ0wsSUFBSyxVQUFlLENBQ2xCLE1BQU8sSUFPVCxJQUFLLFNBQWEsRUFBZ0IsQ0FDaEMsRUFBd0IsSUFPekIsQ0FDRCxJQUFLLGlCQUNMLElBQUssVUFBZSxDQUNsQixNQUFPLEtBT1QsSUFBSyxTQUFhLEVBQUcsQ0FDbkIsR0FBaUIsTUFJZCxLQUdMLEdBQVksQ0FBQyxRQUNiLEdBQWEsQ0FBQyxRQUFTLFNBRXZCLEdBQWMsR0FFbEIsWUFBcUIsRUFBVyxFQUFNLENBQ3BDLEFBQUksSUFBUyxRQUNYLEdBQU8sSUFHVCxHQUFJLEdBQU0sS0FBSyxVQUFVLENBQUMsRUFBVyxJQUNqQyxFQUFNLEdBQVksR0FFdEIsTUFBSyxJQUNILEdBQU0sR0FBSSxNQUFLLFdBQVcsRUFBVyxHQUNyQyxHQUFZLEdBQU8sR0FHZCxFQUdULEdBQUksSUFBYyxHQUVsQixZQUFzQixFQUFXLEVBQU0sQ0FDckMsQUFBSSxJQUFTLFFBQ1gsR0FBTyxJQUdULEdBQUksR0FBTSxLQUFLLFVBQVUsQ0FBQyxFQUFXLElBQ2pDLEVBQU0sR0FBWSxHQUV0QixNQUFLLElBQ0gsR0FBTSxHQUFJLE1BQUssZUFBZSxFQUFXLEdBQ3pDLEdBQVksR0FBTyxHQUdkLEVBR1QsR0FBSSxJQUFlLEdBRW5CLFlBQXNCLEVBQVcsRUFBTSxDQUNyQyxBQUFJLElBQVMsUUFDWCxHQUFPLElBR1QsR0FBSSxHQUFNLEtBQUssVUFBVSxDQUFDLEVBQVcsSUFDakMsRUFBTSxHQUFhLEdBRXZCLE1BQUssSUFDSCxHQUFNLEdBQUksTUFBSyxhQUFhLEVBQVcsR0FDdkMsR0FBYSxHQUFPLEdBR2YsRUFHVCxHQUFJLElBQWUsR0FFbkIsWUFBc0IsRUFBVyxFQUFNLENBQ3JDLEFBQUksSUFBUyxRQUNYLEdBQU8sSUFHVCxHQUFJLEdBQVEsRUFDUixFQUFNLEtBQ04sR0FBSSxHQUFlLEVBQThCLEVBQU8sSUFHeEQsRUFBTSxLQUFLLFVBQVUsQ0FBQyxFQUFXLElBQ2pDLEVBQU0sR0FBYSxHQUV2QixNQUFLLElBQ0gsR0FBTSxHQUFJLE1BQUssbUJBQW1CLEVBQVcsR0FDN0MsR0FBYSxHQUFPLEdBR2YsRUFHVCxHQUFJLElBQWlCLEtBRXJCLGFBQXdCLENBQ3RCLE1BQUksS0FHRixJQUFpQixHQUFJLE1BQUssaUJBQWlCLGtCQUFrQixPQUN0RCxJQUlYLFlBQTJCLEVBQVcsQ0FPcEMsR0FBSSxHQUFTLEVBQVUsUUFBUSxPQUUvQixHQUFJLElBQVcsR0FDYixNQUFPLENBQUMsR0FFUixHQUFJLEdBQ0EsRUFBVSxFQUFVLFVBQVUsRUFBRyxHQUVyQyxHQUFJLENBQ0YsRUFBVSxHQUFhLEdBQVcsd0JBQzNCLEVBQVAsQ0FDQSxFQUFVLEdBQWEsR0FBUyxrQkFHbEMsR0FBSSxHQUFXLEVBQ1gsRUFBa0IsRUFBUyxnQkFDM0IsRUFBVyxFQUFTLFNBRXhCLE1BQU8sQ0FBQyxFQUFTLEVBQWlCLEdBSXRDLFlBQTBCLEVBQVcsRUFBaUIsRUFBZ0IsQ0FDcEUsTUFBSSxJQUFrQixJQUNwQixJQUFhLEtBRVQsR0FDRixJQUFhLE9BQVMsR0FHcEIsR0FDRixJQUFhLE9BQVMsSUFHakIsRUFNWCxZQUFtQixFQUFHLENBR3BCLE9BRkksR0FBSyxHQUVBLEVBQUksRUFBRyxHQUFLLEdBQUksSUFBSyxDQUM1QixHQUFJLEdBQUssR0FBUyxJQUFJLEtBQU0sRUFBRyxHQUMvQixFQUFHLEtBQUssRUFBRSxJQUdaLE1BQU8sR0FHVCxZQUFxQixFQUFHLENBR3RCLE9BRkksR0FBSyxHQUVBLEVBQUksRUFBRyxHQUFLLEVBQUcsSUFBSyxDQUMzQixHQUFJLEdBQUssR0FBUyxJQUFJLEtBQU0sR0FBSSxHQUFLLEdBQ3JDLEVBQUcsS0FBSyxFQUFFLElBR1osTUFBTyxHQUdULFlBQW1CLEVBQUssRUFBUSxFQUFXLEVBQVcsRUFBUSxDQUM1RCxHQUFJLEdBQU8sRUFBSSxZQUFZLEdBRTNCLE1BQUksS0FBUyxRQUNKLEtBQ0UsSUFBUyxLQUNYLEVBQVUsR0FFVixFQUFPLEdBSWxCLFlBQTZCLEVBQUssQ0FDaEMsTUFBSSxHQUFJLGlCQUFtQixFQUFJLGtCQUFvQixPQUMxQyxHQUVBLEVBQUksa0JBQW9CLFFBQVUsQ0FBQyxFQUFJLFFBQVUsRUFBSSxPQUFPLFdBQVcsT0FBUyxHQUFJLE1BQUssZUFBZSxFQUFJLE1BQU0sa0JBQWtCLGtCQUFvQixPQVFuSyxHQUFJLElBQW1DLFVBQVksQ0FDakQsV0FBNkIsRUFBTSxFQUFhLEVBQU0sQ0FDcEQsS0FBSyxNQUFRLEVBQUssT0FBUyxFQUMzQixLQUFLLE1BQVEsRUFBSyxPQUFTLEdBRTNCLEVBQUssTUFDRCxFQUFLLE1BQ0wsR0FBSSxHQUFZLEVBQThCLEVBQU0sSUFFeEQsR0FBSSxDQUFDLEdBQWUsT0FBTyxLQUFLLEdBQVcsT0FBUyxFQUFHLENBQ3JELEdBQUksR0FBVyxFQUFTLENBQ3RCLFlBQWEsSUFDWixHQUVILEFBQUksRUFBSyxNQUFRLEdBQUcsR0FBUyxxQkFBdUIsRUFBSyxPQUN6RCxLQUFLLElBQU0sR0FBYSxFQUFNLElBSWxDLEdBQUksR0FBUyxFQUFvQixVQUVqQyxTQUFPLE9BQVMsU0FBZ0IsRUFBRyxDQUNqQyxHQUFJLEtBQUssSUFBSyxDQUNaLEdBQUksR0FBUSxLQUFLLE1BQVEsS0FBSyxNQUFNLEdBQUssRUFDekMsTUFBTyxNQUFLLElBQUksT0FBTyxPQUNsQixDQUVMLEdBQUksR0FBUyxLQUFLLE1BQVEsS0FBSyxNQUFNLEdBQUssR0FBUSxFQUFHLEdBRXJELE1BQU8sSUFBUyxFQUFRLEtBQUssU0FJMUIsS0FPTCxHQUFpQyxVQUFZLENBQy9DLFdBQTJCLEVBQUksRUFBTSxFQUFNLENBQ3pDLEtBQUssS0FBTyxFQUNaLEdBQUksR0FFSixHQUFJLEVBQUcsS0FBSyxZQUFhLENBT3ZCLEdBQUksR0FBWSxHQUFNLEdBQUcsT0FBUyxJQUM5QixFQUFVLEdBQWEsRUFBSSxXQUFhLEVBQVksVUFBWSxFQUVwRSxBQUFJLEVBQUcsU0FBVyxHQUFLLEdBQVMsT0FBTyxHQUFTLE1BQzlDLEdBQUksRUFDSixLQUFLLEdBQUssR0FTVixHQUFJLE1BRUosQUFBSSxFQUFLLGFBQ1AsS0FBSyxHQUFLLEVBRVYsS0FBSyxHQUFLLEVBQUcsU0FBVyxFQUFJLEVBQUssR0FBUyxXQUFXLEVBQUcsR0FBSyxFQUFHLE9BQVMsR0FBSyxVQUc3RSxBQUFJLEdBQUcsS0FBSyxPQUFTLFNBQzFCLEtBQUssR0FBSyxFQUVWLE1BQUssR0FBSyxFQUNWLEVBQUksRUFBRyxLQUFLLE1BR2QsR0FBSSxHQUFXLEVBQVMsR0FBSSxLQUFLLE1BRWpDLEFBQUksR0FDRixHQUFTLFNBQVcsR0FHdEIsS0FBSyxJQUFNLEdBQWEsRUFBTSxHQUdoQyxHQUFJLEdBQVUsRUFBa0IsVUFFaEMsU0FBUSxPQUFTLFVBQWtCLENBQ2pDLE1BQU8sTUFBSyxJQUFJLE9BQU8sS0FBSyxHQUFHLGFBR2pDLEVBQVEsY0FBZ0IsVUFBeUIsQ0FDL0MsTUFBTyxNQUFLLElBQUksY0FBYyxLQUFLLEdBQUcsYUFHeEMsRUFBUSxnQkFBa0IsVUFBMkIsQ0FDbkQsTUFBTyxNQUFLLElBQUksbUJBR1gsS0FPTCxHQUFnQyxVQUFZLENBQzlDLFdBQTBCLEVBQU0sRUFBVyxFQUFNLENBQy9DLEtBQUssS0FBTyxFQUFTLENBQ25CLE1BQU8sUUFDTixHQUVDLENBQUMsR0FBYSxLQUNoQixNQUFLLElBQU0sR0FBYSxFQUFNLElBSWxDLEdBQUksR0FBVSxFQUFpQixVQUUvQixTQUFRLE9BQVMsU0FBZ0IsRUFBTyxFQUFNLENBQzVDLE1BQUksTUFBSyxJQUNBLEtBQUssSUFBSSxPQUFPLEVBQU8sR0FFdkIsR0FBbUIsRUFBTSxFQUFPLEtBQUssS0FBSyxRQUFTLEtBQUssS0FBSyxRQUFVLFNBSWxGLEVBQVEsY0FBZ0IsU0FBdUIsRUFBTyxFQUFNLENBQzFELE1BQUksTUFBSyxJQUNBLEtBQUssSUFBSSxjQUFjLEVBQU8sR0FFOUIsSUFJSixLQU9MLEdBQXNCLFVBQVksQ0FDcEMsRUFBTyxTQUFXLFNBQWtCLEVBQU0sQ0FDeEMsTUFBTyxHQUFPLE9BQU8sRUFBSyxPQUFRLEVBQUssZ0JBQWlCLEVBQUssZUFBZ0IsRUFBSyxjQUdwRixFQUFPLE9BQVMsU0FBZ0IsRUFBUSxFQUFpQixFQUFnQixFQUFhLENBQ3BGLEFBQUksSUFBZ0IsUUFDbEIsR0FBYyxJQUdoQixHQUFJLEdBQWtCLEdBQVUsR0FBUyxjQUVyQyxFQUFVLEdBQW9CLEdBQWMsUUFBVSxNQUN0RCxFQUFtQixHQUFtQixHQUFTLHVCQUMvQyxFQUFrQixHQUFrQixHQUFTLHNCQUNqRCxNQUFPLElBQUksR0FBTyxFQUFTLEVBQWtCLEVBQWlCLElBR2hFLEVBQU8sV0FBYSxVQUFzQixDQUN4QyxHQUFpQixLQUNqQixHQUFjLEdBQ2QsR0FBZSxHQUNmLEdBQWUsSUFHakIsRUFBTyxXQUFhLFNBQW9CLEVBQU8sQ0FDN0MsR0FBSSxHQUFPLElBQVUsT0FBUyxHQUFLLEVBQy9CLEVBQVMsRUFBSyxPQUNkLEVBQWtCLEVBQUssZ0JBQ3ZCLEVBQWlCLEVBQUssZUFFMUIsTUFBTyxHQUFPLE9BQU8sRUFBUSxFQUFpQixJQUdoRCxXQUFnQixFQUFRLEVBQVcsRUFBZ0IsRUFBaUIsQ0FDbEUsR0FBSSxHQUFxQixHQUFrQixHQUN2QyxFQUFlLEVBQW1CLEdBQ2xDLEVBQXdCLEVBQW1CLEdBQzNDLEVBQXVCLEVBQW1CLEdBRTlDLEtBQUssT0FBUyxFQUNkLEtBQUssZ0JBQWtCLEdBQWEsR0FBeUIsS0FDN0QsS0FBSyxlQUFpQixHQUFrQixHQUF3QixLQUNoRSxLQUFLLEtBQU8sR0FBaUIsS0FBSyxPQUFRLEtBQUssZ0JBQWlCLEtBQUssZ0JBQ3JFLEtBQUssY0FBZ0IsQ0FDbkIsT0FBUSxHQUNSLFdBQVksSUFFZCxLQUFLLFlBQWMsQ0FDakIsT0FBUSxHQUNSLFdBQVksSUFFZCxLQUFLLGNBQWdCLEtBQ3JCLEtBQUssU0FBVyxHQUNoQixLQUFLLGdCQUFrQixFQUN2QixLQUFLLGtCQUFvQixLQUczQixHQUFJLEdBQVUsRUFBTyxVQUVyQixTQUFRLFlBQWMsVUFBdUIsQ0FDM0MsR0FBSSxHQUFlLEtBQUssWUFDcEIsRUFBa0IsTUFBSyxrQkFBb0IsTUFBUSxLQUFLLGtCQUFvQixTQUFZLE1BQUssaUJBQW1CLE1BQVEsS0FBSyxpQkFBbUIsV0FDcEosTUFBTyxJQUFnQixFQUFpQixLQUFPLFFBR2pELEVBQVEsTUFBUSxTQUFlLEVBQU0sQ0FDbkMsTUFBSSxDQUFDLEdBQVEsT0FBTyxvQkFBb0IsR0FBTSxTQUFXLEVBQ2hELEtBRUEsRUFBTyxPQUFPLEVBQUssUUFBVSxLQUFLLGdCQUFpQixFQUFLLGlCQUFtQixLQUFLLGdCQUFpQixFQUFLLGdCQUFrQixLQUFLLGVBQWdCLEVBQUssYUFBZSxLQUk1SyxFQUFRLGNBQWdCLFNBQXVCLEVBQU0sQ0FDbkQsTUFBSSxLQUFTLFFBQ1gsR0FBTyxJQUdGLEtBQUssTUFBTSxFQUFTLEdBQUksRUFBTSxDQUNuQyxZQUFhLE9BSWpCLEVBQVEsa0JBQW9CLFNBQTJCLEVBQU0sQ0FDM0QsTUFBSSxLQUFTLFFBQ1gsR0FBTyxJQUdGLEtBQUssTUFBTSxFQUFTLEdBQUksRUFBTSxDQUNuQyxZQUFhLE9BSWpCLEVBQVEsT0FBUyxTQUFrQixFQUFRLEVBQVEsRUFBVyxDQUM1RCxHQUFJLEdBQVEsS0FFWixNQUFJLEtBQVcsUUFDYixHQUFTLElBR1AsSUFBYyxRQUNoQixHQUFZLElBR1AsR0FBVSxLQUFNLEVBQVEsRUFBVyxHQUFRLFVBQVksQ0FDNUQsR0FBSSxHQUFPLEVBQVMsQ0FDbEIsTUFBTyxFQUNQLElBQUssV0FDSCxDQUNGLE1BQU8sR0FFTCxFQUFZLEVBQVMsU0FBVyxhQUVwQyxNQUFLLEdBQU0sWUFBWSxHQUFXLElBQ2hDLEdBQU0sWUFBWSxHQUFXLEdBQVUsR0FBVSxTQUFVLEVBQUksQ0FDN0QsTUFBTyxHQUFNLFFBQVEsRUFBSSxFQUFNLFlBSTVCLEVBQU0sWUFBWSxHQUFXLE1BSXhDLEVBQVEsU0FBVyxTQUFvQixFQUFRLEVBQVEsRUFBVyxDQUNoRSxHQUFJLEdBQVMsS0FFYixNQUFJLEtBQVcsUUFDYixHQUFTLElBR1AsSUFBYyxRQUNoQixHQUFZLElBR1AsR0FBVSxLQUFNLEVBQVEsRUFBVyxHQUFVLFVBQVksQ0FDOUQsR0FBSSxHQUFPLEVBQVMsQ0FDbEIsUUFBUyxFQUNULEtBQU0sVUFDTixNQUFPLE9BQ1AsSUFBSyxXQUNILENBQ0YsUUFBUyxHQUVQLEVBQVksRUFBUyxTQUFXLGFBRXBDLE1BQUssR0FBTyxjQUFjLEdBQVcsSUFDbkMsR0FBTyxjQUFjLEdBQVcsR0FBVSxHQUFZLFNBQVUsRUFBSSxDQUNsRSxNQUFPLEdBQU8sUUFBUSxFQUFJLEVBQU0sY0FJN0IsRUFBTyxjQUFjLEdBQVcsTUFJM0MsRUFBUSxVQUFZLFNBQXFCLEVBQVcsQ0FDbEQsR0FBSSxHQUFTLEtBRWIsTUFBSSxLQUFjLFFBQ2hCLEdBQVksSUFHUCxHQUFVLEtBQU0sT0FBVyxFQUFXLFVBQVksQ0FDdkQsTUFBTyxLQUNOLFVBQVksQ0FHYixHQUFJLENBQUMsRUFBTyxjQUFlLENBQ3pCLEdBQUksR0FBTyxDQUNULEtBQU0sVUFDTixVQUFXLE9BRWIsRUFBTyxjQUFnQixDQUFDLEdBQVMsSUFBSSxLQUFNLEdBQUksR0FBSSxHQUFJLEdBQVMsSUFBSSxLQUFNLEdBQUksR0FBSSxLQUFLLElBQUksU0FBVSxFQUFJLENBQ3ZHLE1BQU8sR0FBTyxRQUFRLEVBQUksRUFBTSxlQUlwQyxNQUFPLEdBQU8saUJBSWxCLEVBQVEsS0FBTyxTQUFnQixFQUFRLEVBQVcsQ0FDaEQsR0FBSSxHQUFTLEtBRWIsTUFBSSxLQUFjLFFBQ2hCLEdBQVksSUFHUCxHQUFVLEtBQU0sRUFBUSxFQUFXLEdBQU0sVUFBWSxDQUMxRCxHQUFJLEdBQU8sQ0FDVCxJQUFLLEdBSVAsTUFBSyxHQUFPLFNBQVMsSUFDbkIsR0FBTyxTQUFTLEdBQVUsQ0FBQyxHQUFTLElBQUksSUFBSyxFQUFHLEdBQUksR0FBUyxJQUFJLEtBQU0sRUFBRyxJQUFJLElBQUksU0FBVSxFQUFJLENBQzlGLE1BQU8sR0FBTyxRQUFRLEVBQUksRUFBTSxVQUk3QixFQUFPLFNBQVMsTUFJM0IsRUFBUSxRQUFVLFNBQWlCLEVBQUksRUFBVSxFQUFPLENBQ3RELEdBQUksR0FBSyxLQUFLLFlBQVksRUFBSSxHQUMxQixFQUFVLEVBQUcsZ0JBQ2IsRUFBVyxFQUFRLEtBQUssU0FBVSxFQUFHLENBQ3ZDLE1BQU8sR0FBRSxLQUFLLGdCQUFrQixJQUVsQyxNQUFPLEdBQVcsRUFBUyxNQUFRLE1BR3JDLEVBQVEsZ0JBQWtCLFNBQXlCLEVBQU0sQ0FDdkQsTUFBSSxLQUFTLFFBQ1gsR0FBTyxJQUtGLEdBQUksSUFBb0IsS0FBSyxLQUFNLEVBQUssYUFBZSxLQUFLLFlBQWEsSUFHbEYsRUFBUSxZQUFjLFNBQXFCLEVBQUksRUFBVSxDQUN2RCxNQUFJLEtBQWEsUUFDZixHQUFXLElBR04sR0FBSSxJQUFrQixFQUFJLEtBQUssS0FBTSxJQUc5QyxFQUFRLGFBQWUsU0FBc0IsRUFBTSxDQUNqRCxNQUFJLEtBQVMsUUFDWCxHQUFPLElBR0YsR0FBSSxJQUFpQixLQUFLLEtBQU0sS0FBSyxZQUFhLElBRzNELEVBQVEsY0FBZ0IsU0FBdUIsRUFBTSxDQUNuRCxNQUFJLEtBQVMsUUFDWCxHQUFPLElBR0YsR0FBWSxLQUFLLEtBQU0sSUFHaEMsRUFBUSxVQUFZLFVBQXFCLENBQ3ZDLE1BQU8sTUFBSyxTQUFXLE1BQVEsS0FBSyxPQUFPLGdCQUFrQixTQUFXLEdBQUksTUFBSyxlQUFlLEtBQUssTUFBTSxrQkFBa0IsT0FBTyxXQUFXLFVBR2pKLEVBQVEsT0FBUyxTQUFnQixFQUFPLENBQ3RDLE1BQU8sTUFBSyxTQUFXLEVBQU0sUUFBVSxLQUFLLGtCQUFvQixFQUFNLGlCQUFtQixLQUFLLGlCQUFtQixFQUFNLGdCQUd6SCxFQUFhLEVBQVEsQ0FBQyxDQUNwQixJQUFLLGNBQ0wsSUFBSyxVQUFlLENBQ2xCLE1BQUksTUFBSyxtQkFBcUIsTUFDNUIsTUFBSyxrQkFBb0IsR0FBb0IsT0FHeEMsS0FBSyxzQkFJVCxLQWFULGFBQTBCLENBQ3hCLE9BQVMsR0FBTyxVQUFVLE9BQVEsRUFBVSxHQUFJLE9BQU0sR0FBTyxFQUFPLEVBQUcsRUFBTyxFQUFNLElBQ2xGLEVBQVEsR0FBUSxVQUFVLEdBRzVCLEdBQUksR0FBTyxFQUFRLE9BQU8sU0FBVSxFQUFHLEVBQUcsQ0FDeEMsTUFBTyxHQUFJLEVBQUUsUUFDWixJQUNILE1BQU8sUUFBTyxJQUFNLEVBQU8sS0FHN0IsYUFBNkIsQ0FDM0IsT0FBUyxHQUFRLFVBQVUsT0FBUSxFQUFhLEdBQUksT0FBTSxHQUFRLEVBQVEsRUFBRyxFQUFRLEVBQU8sSUFDMUYsRUFBVyxHQUFTLFVBQVUsR0FHaEMsTUFBTyxVQUFVLEVBQUcsQ0FDbEIsTUFBTyxHQUFXLE9BQU8sU0FBVSxFQUFNLEVBQUksQ0FDM0MsR0FBSSxHQUFhLEVBQUssR0FDbEIsRUFBYSxFQUFLLEdBQ2xCLEVBQVMsRUFBSyxHQUVkLEVBQU0sRUFBRyxFQUFHLEdBQ1osRUFBTSxFQUFJLEdBQ1YsRUFBTyxFQUFJLEdBQ1gsRUFBTyxFQUFJLEdBRWYsTUFBTyxDQUFDLEVBQVMsR0FBSSxFQUFZLEdBQU0sR0FBYyxFQUFNLElBQzFELENBQUMsR0FBSSxLQUFNLElBQUksTUFBTSxFQUFHLElBSS9CLFdBQWUsRUFBRyxDQUNoQixHQUFJLEdBQUssS0FDUCxNQUFPLENBQUMsS0FBTSxNQUdoQixPQUFTLEdBQVEsVUFBVSxPQUFRLEVBQVcsR0FBSSxPQUFNLEVBQVEsRUFBSSxFQUFRLEVBQUksR0FBSSxFQUFRLEVBQUcsRUFBUSxFQUFPLElBQzVHLEVBQVMsRUFBUSxHQUFLLFVBQVUsR0FHbEMsT0FBUyxHQUFLLEVBQUcsRUFBWSxFQUFVLEVBQUssRUFBVSxPQUFRLElBQU0sQ0FDbEUsR0FBSSxHQUFlLEVBQVUsR0FDekIsRUFBUSxFQUFhLEdBQ3JCLEVBQVksRUFBYSxHQUN6QixFQUFJLEVBQU0sS0FBSyxHQUVuQixHQUFJLEVBQ0YsTUFBTyxHQUFVLEdBSXJCLE1BQU8sQ0FBQyxLQUFNLE1BR2hCLFlBQXVCLENBQ3JCLE9BQVMsR0FBUSxVQUFVLE9BQVEsRUFBTyxHQUFJLE9BQU0sR0FBUSxFQUFRLEVBQUcsRUFBUSxFQUFPLElBQ3BGLEVBQUssR0FBUyxVQUFVLEdBRzFCLE1BQU8sVUFBVSxFQUFPLEVBQVEsQ0FDOUIsR0FBSSxHQUFNLEdBQ04sRUFFSixJQUFLLEVBQUksRUFBRyxFQUFJLEVBQUssT0FBUSxJQUMzQixFQUFJLEVBQUssSUFBTSxHQUFhLEVBQU0sRUFBUyxJQUc3QyxNQUFPLENBQUMsRUFBSyxLQUFNLEVBQVMsSUFLaEMsR0FBSSxHQUFjLGtDQUNkLEVBQW1CLHNEQUNuQixHQUFlLE9BQU8sR0FBSyxFQUFpQixPQUFTLEVBQVksT0FBUyxLQUMxRSxHQUF3QixPQUFPLE9BQVMsR0FBYSxPQUFTLE1BQzlELEdBQWMsOENBQ2QsR0FBZSw4QkFDZixHQUFrQixtQkFDbEIsR0FBcUIsRUFBWSxXQUFZLGFBQWMsV0FDM0QsR0FBd0IsRUFBWSxPQUFRLFdBQzVDLEdBQWMsd0JBRWxCLEdBQWUsT0FBTyxFQUFpQixPQUFTLFFBQVUsRUFBWSxPQUFTLEtBQU8sR0FBVSxPQUFTLE9BQ3JHLEdBQXdCLE9BQU8sT0FBUyxHQUFhLE9BQVMsTUFFbEUsWUFBYSxFQUFPLEVBQUssRUFBVSxDQUNqQyxHQUFJLEdBQUksRUFBTSxHQUNkLE1BQU8sSUFBWSxHQUFLLEVBQVcsR0FBYSxHQUdsRCxZQUF1QixFQUFPLEVBQVEsQ0FDcEMsR0FBSSxHQUFPLENBQ1QsS0FBTSxHQUFJLEVBQU8sR0FDakIsTUFBTyxHQUFJLEVBQU8sRUFBUyxFQUFHLEdBQzlCLElBQUssR0FBSSxFQUFPLEVBQVMsRUFBRyxJQUU5QixNQUFPLENBQUMsRUFBTSxLQUFNLEVBQVMsR0FHL0IsWUFBd0IsRUFBTyxFQUFRLENBQ3JDLEdBQUksR0FBTyxDQUNULE1BQU8sR0FBSSxFQUFPLEVBQVEsR0FDMUIsUUFBUyxHQUFJLEVBQU8sRUFBUyxFQUFHLEdBQ2hDLFFBQVMsR0FBSSxFQUFPLEVBQVMsRUFBRyxHQUNoQyxhQUFjLEdBQVksRUFBTSxFQUFTLEtBRTNDLE1BQU8sQ0FBQyxFQUFNLEtBQU0sRUFBUyxHQUcvQixZQUEwQixFQUFPLEVBQVEsQ0FDdkMsR0FBSSxHQUFRLENBQUMsRUFBTSxJQUFXLENBQUMsRUFBTSxFQUFTLEdBQzFDLEVBQWEsR0FBYSxFQUFNLEVBQVMsR0FBSSxFQUFNLEVBQVMsSUFDNUQsRUFBTyxFQUFRLEtBQU8sR0FBZ0IsU0FBUyxHQUNuRCxNQUFPLENBQUMsR0FBSSxFQUFNLEVBQVMsR0FHN0IsWUFBeUIsRUFBTyxFQUFRLENBQ3RDLEdBQUksR0FBTyxFQUFNLEdBQVUsR0FBUyxPQUFPLEVBQU0sSUFBVyxLQUM1RCxNQUFPLENBQUMsR0FBSSxFQUFNLEVBQVMsR0FJN0IsR0FBSSxJQUFjLE9BQU8sTUFBUSxFQUFpQixPQUFTLEtBRXZELEdBQWMsa1BBRWxCLFlBQTRCLEVBQU8sQ0FDakMsR0FBSSxHQUFJLEVBQU0sR0FDVixFQUFVLEVBQU0sR0FDaEIsRUFBVyxFQUFNLEdBQ2pCLEVBQVUsRUFBTSxHQUNoQixFQUFTLEVBQU0sR0FDZixFQUFVLEVBQU0sR0FDaEIsRUFBWSxFQUFNLEdBQ2xCLEVBQVksRUFBTSxHQUNsQixFQUFrQixFQUFNLEdBQ3hCLEVBQW9CLEVBQUUsS0FBTyxJQUM3QixFQUFrQixHQUFhLEVBQVUsS0FBTyxJQUVoRCxFQUFjLFNBQXFCLEVBQUssR0FBTyxDQUNqRCxNQUFJLE1BQVUsUUFDWixJQUFRLElBR0gsSUFBUSxRQUFjLEtBQVMsR0FBTyxHQUFxQixDQUFDLEVBQU0sR0FHM0UsTUFBTyxDQUFDLENBQ04sTUFBTyxFQUFZLEdBQWMsSUFDakMsT0FBUSxFQUFZLEdBQWMsSUFDbEMsTUFBTyxFQUFZLEdBQWMsSUFDakMsS0FBTSxFQUFZLEdBQWMsSUFDaEMsTUFBTyxFQUFZLEdBQWMsSUFDakMsUUFBUyxFQUFZLEdBQWMsSUFDbkMsUUFBUyxFQUFZLEdBQWMsR0FBWSxJQUFjLE1BQzdELGFBQWMsRUFBWSxHQUFZLEdBQWtCLEtBTzVELEdBQUksSUFBYSxDQUNmLElBQUssRUFDTCxJQUFLLEdBQUssR0FDVixJQUFLLEdBQUssR0FDVixJQUFLLEdBQUssR0FDVixJQUFLLEdBQUssR0FDVixJQUFLLEdBQUssR0FDVixJQUFLLEdBQUssR0FDVixJQUFLLEdBQUssR0FDVixJQUFLLEdBQUssSUFHWixZQUFxQixFQUFZLEVBQVMsRUFBVSxFQUFRLEVBQVMsRUFBVyxFQUFXLENBQ3pGLEdBQUksR0FBUyxDQUNYLEtBQU0sRUFBUSxTQUFXLEVBQUksR0FBZSxHQUFhLElBQVksR0FBYSxHQUNsRixNQUFPLEdBQVksUUFBUSxHQUFZLEVBQ3ZDLElBQUssR0FBYSxHQUNsQixLQUFNLEdBQWEsR0FDbkIsT0FBUSxHQUFhLElBRXZCLE1BQUksSUFBVyxHQUFPLE9BQVMsR0FBYSxJQUV4QyxHQUNGLEdBQU8sUUFBVSxFQUFXLE9BQVMsRUFBSSxHQUFhLFFBQVEsR0FBYyxFQUFJLEdBQWMsUUFBUSxHQUFjLEdBRy9HLEVBSVQsR0FBSSxJQUFVLGtNQUVkLFlBQXdCLEVBQU8sQ0FDN0IsR0FBSSxHQUFhLEVBQU0sR0FDbkIsRUFBUyxFQUFNLEdBQ2YsRUFBVyxFQUFNLEdBQ2pCLEVBQVUsRUFBTSxHQUNoQixFQUFVLEVBQU0sR0FDaEIsRUFBWSxFQUFNLEdBQ2xCLEVBQVksRUFBTSxHQUNsQixFQUFZLEVBQU0sR0FDbEIsRUFBWSxFQUFNLEdBQ2xCLEVBQWEsRUFBTSxJQUNuQixFQUFlLEVBQU0sSUFDckIsRUFBUyxHQUFZLEVBQVksRUFBUyxFQUFVLEVBQVEsRUFBUyxFQUFXLEdBQ2hGLEVBRUosTUFBSSxHQUNGLEVBQVMsR0FBVyxHQUNmLEFBQUksRUFDVCxFQUFTLEVBRVQsRUFBUyxHQUFhLEVBQVksR0FHN0IsQ0FBQyxFQUFRLEdBQUksSUFBZ0IsSUFHdEMsWUFBMkIsRUFBRyxDQUU1QixNQUFPLEdBQUUsUUFBUSxvQkFBcUIsS0FBSyxRQUFRLFdBQVksS0FBSyxPQUl0RSxHQUFJLElBQVUsNkhBQ1YsR0FBUyx1SkFDVCxHQUFRLDRIQUVaLFlBQTZCLEVBQU8sQ0FDbEMsR0FBSSxHQUFhLEVBQU0sR0FDbkIsRUFBUyxFQUFNLEdBQ2YsRUFBVyxFQUFNLEdBQ2pCLEVBQVUsRUFBTSxHQUNoQixFQUFVLEVBQU0sR0FDaEIsRUFBWSxFQUFNLEdBQ2xCLEVBQVksRUFBTSxHQUNsQixFQUFTLEdBQVksRUFBWSxFQUFTLEVBQVUsRUFBUSxFQUFTLEVBQVcsR0FDcEYsTUFBTyxDQUFDLEVBQVEsR0FBZ0IsYUFHbEMsWUFBc0IsRUFBTyxDQUMzQixHQUFJLEdBQWEsRUFBTSxHQUNuQixFQUFXLEVBQU0sR0FDakIsRUFBUyxFQUFNLEdBQ2YsRUFBVSxFQUFNLEdBQ2hCLEVBQVksRUFBTSxHQUNsQixFQUFZLEVBQU0sR0FDbEIsRUFBVSxFQUFNLEdBQ2hCLEVBQVMsR0FBWSxFQUFZLEVBQVMsRUFBVSxFQUFRLEVBQVMsRUFBVyxHQUNwRixNQUFPLENBQUMsRUFBUSxHQUFnQixhQUdsQyxHQUFJLElBQStCLEdBQWUsR0FBYSxJQUMzRCxHQUFnQyxHQUFlLEdBQWMsSUFDN0QsR0FBbUMsR0FBZSxHQUFpQixJQUNuRSxHQUF1QixHQUFlLElBQ3RDLEdBQTZCLEdBQWtCLEdBQWUsR0FBZ0IsSUFDOUUsR0FBOEIsR0FBa0IsR0FBb0IsR0FBZ0IsSUFDcEYsR0FBK0IsR0FBa0IsR0FBdUIsR0FBZ0IsSUFDeEYsR0FBMEIsR0FBa0IsR0FBZ0IsSUFLaEUsWUFBc0IsRUFBRyxDQUN2QixNQUFPLEdBQU0sRUFBRyxDQUFDLEdBQThCLElBQTZCLENBQUMsR0FBK0IsSUFBOEIsQ0FBQyxHQUFrQyxJQUErQixDQUFDLEdBQXNCLEtBRXJPLFlBQTBCLEVBQUcsQ0FDM0IsTUFBTyxHQUFNLEdBQWtCLEdBQUksQ0FBQyxHQUFTLEtBRS9DLFlBQXVCLEVBQUcsQ0FDeEIsTUFBTyxHQUFNLEVBQUcsQ0FBQyxHQUFTLElBQXNCLENBQUMsR0FBUSxJQUFzQixDQUFDLEdBQU8sS0FFekYsWUFBMEIsRUFBRyxDQUMzQixNQUFPLEdBQU0sRUFBRyxDQUFDLEdBQWEsS0FFaEMsR0FBSSxJQUFxQixHQUFrQixJQUMzQyxZQUEwQixFQUFHLENBQzNCLE1BQU8sR0FBTSxFQUFHLENBQUMsR0FBYSxLQUVoQyxHQUFJLElBQStCLEdBQWUsR0FBYSxJQUMzRCxHQUF1QixHQUFlLElBQ3RDLEdBQXFDLEdBQWtCLEdBQWUsR0FBZ0IsR0FBa0IsSUFDeEcsR0FBa0MsR0FBa0IsR0FBZ0IsR0FBa0IsSUFDMUYsWUFBa0IsRUFBRyxDQUNuQixNQUFPLEdBQU0sRUFBRyxDQUFDLEdBQThCLElBQXFDLENBQUMsR0FBc0IsS0FHN0csR0FBSSxJQUFZLG1CQUVaLEdBQWlCLENBQ25CLE1BQU8sQ0FDTCxLQUFNLEVBQ04sTUFBTyxFQUFJLEdBQ1gsUUFBUyxFQUFJLEdBQUssR0FDbEIsUUFBUyxFQUFJLEdBQUssR0FBSyxHQUN2QixhQUFjLEVBQUksR0FBSyxHQUFLLEdBQUssS0FFbkMsS0FBTSxDQUNKLE1BQU8sR0FDUCxRQUFTLEdBQUssR0FDZCxRQUFTLEdBQUssR0FBSyxHQUNuQixhQUFjLEdBQUssR0FBSyxHQUFLLEtBRS9CLE1BQU8sQ0FDTCxRQUFTLEdBQ1QsUUFBUyxHQUFLLEdBQ2QsYUFBYyxHQUFLLEdBQUssS0FFMUIsUUFBUyxDQUNQLFFBQVMsR0FDVCxhQUFjLEdBQUssS0FFckIsUUFBUyxDQUNQLGFBQWMsTUFHZCxHQUFlLEVBQVMsQ0FDMUIsTUFBTyxDQUNMLFNBQVUsRUFDVixPQUFRLEdBQ1IsTUFBTyxHQUNQLEtBQU0sSUFDTixNQUFPLElBQU0sR0FDYixRQUFTLElBQU0sR0FBSyxHQUNwQixRQUFTLElBQU0sR0FBSyxHQUFLLEdBQ3pCLGFBQWMsSUFBTSxHQUFLLEdBQUssR0FBSyxLQUVyQyxTQUFVLENBQ1IsT0FBUSxFQUNSLE1BQU8sR0FDUCxLQUFNLEdBQ04sTUFBTyxHQUFLLEdBQ1osUUFBUyxHQUFLLEdBQUssR0FDbkIsUUFBUyxHQUFLLEdBQUssR0FBSyxHQUN4QixhQUFjLEdBQUssR0FBSyxHQUFLLEdBQUssS0FFcEMsT0FBUSxDQUNOLE1BQU8sRUFDUCxLQUFNLEdBQ04sTUFBTyxHQUFLLEdBQ1osUUFBUyxHQUFLLEdBQUssR0FDbkIsUUFBUyxHQUFLLEdBQUssR0FBSyxHQUN4QixhQUFjLEdBQUssR0FBSyxHQUFLLEdBQUssTUFFbkMsSUFDQyxHQUFxQixPQUFXLElBQ2hDLEdBQXNCLE9BQVcsS0FDakMsR0FBaUIsRUFBUyxDQUM1QixNQUFPLENBQ0wsU0FBVSxFQUNWLE9BQVEsR0FDUixNQUFPLEdBQXFCLEVBQzVCLEtBQU0sR0FDTixNQUFPLEdBQXFCLEdBQzVCLFFBQVMsR0FBcUIsR0FBSyxHQUNuQyxRQUFTLEdBQXFCLEdBQUssR0FBSyxHQUN4QyxhQUFjLEdBQXFCLEdBQUssR0FBSyxHQUFLLEtBRXBELFNBQVUsQ0FDUixPQUFRLEVBQ1IsTUFBTyxHQUFxQixHQUM1QixLQUFNLEdBQXFCLEVBQzNCLE1BQU8sR0FBcUIsR0FBSyxFQUNqQyxRQUFTLEdBQXFCLEdBQUssR0FBSyxFQUN4QyxRQUFTLEdBQXFCLEdBQUssR0FBSyxHQUFLLEVBQzdDLGFBQWMsR0FBcUIsR0FBSyxHQUFLLEdBQUssSUFBTyxHQUUzRCxPQUFRLENBQ04sTUFBTyxHQUFzQixFQUM3QixLQUFNLEdBQ04sTUFBTyxHQUFzQixHQUM3QixRQUFTLEdBQXNCLEdBQUssR0FDcEMsUUFBUyxHQUFzQixHQUFLLEdBQUssR0FDekMsYUFBYyxHQUFzQixHQUFLLEdBQUssR0FBSyxNQUVwRCxJQUVDLEdBQWlCLENBQUMsUUFBUyxXQUFZLFNBQVUsUUFBUyxPQUFRLFFBQVMsVUFBVyxVQUFXLGdCQUNqRyxHQUFlLEdBQWUsTUFBTSxHQUFHLFVBRTNDLFlBQWlCLEVBQUssRUFBTSxFQUFPLENBQ2pDLEFBQUksSUFBVSxRQUNaLEdBQVEsSUFJVixHQUFJLEdBQU8sQ0FDVCxPQUFRLEVBQVEsRUFBSyxPQUFTLEVBQVMsR0FBSSxFQUFJLE9BQVEsRUFBSyxRQUFVLElBQ3RFLElBQUssRUFBSSxJQUFJLE1BQU0sRUFBSyxLQUN4QixtQkFBb0IsRUFBSyxvQkFBc0IsRUFBSSxvQkFFckQsTUFBTyxJQUFJLElBQVMsR0FHdEIsWUFBbUIsRUFBRyxDQUNwQixNQUFPLEdBQUksRUFBSSxLQUFLLE1BQU0sR0FBSyxLQUFLLEtBQUssR0FJM0MsWUFBaUIsRUFBUSxFQUFTLEVBQVUsRUFBTyxFQUFRLENBQ3pELEdBQUksR0FBTyxFQUFPLEdBQVEsR0FDdEIsRUFBTSxFQUFRLEdBQVksRUFDMUIsRUFBVyxLQUFLLEtBQUssS0FBUyxLQUFLLEtBQUssRUFBTSxJQUVsRCxFQUFRLENBQUMsR0FBWSxFQUFNLEtBQVksR0FBSyxLQUFLLElBQUksSUFBUSxFQUFJLEdBQVUsR0FBTyxLQUFLLE1BQU0sR0FDN0YsRUFBTSxJQUFXLEVBQ2pCLEVBQVEsSUFBYSxFQUFRLEVBSS9CLFlBQXlCLEVBQVEsRUFBTSxDQUNyQyxHQUFhLE9BQU8sU0FBVSxFQUFVLEVBQVMsQ0FDL0MsTUFBSyxJQUFZLEVBQUssSUFPYixFQU5ILElBQ0YsR0FBUSxFQUFRLEVBQU0sRUFBVSxFQUFNLEdBR2pDLElBSVIsTUFpQkwsR0FBSSxJQUF3QixVQUFZLENBSXRDLFdBQWtCLEVBQVEsQ0FDeEIsR0FBSSxHQUFXLEVBQU8scUJBQXVCLFlBQWMsR0FLM0QsS0FBSyxPQUFTLEVBQU8sT0FLckIsS0FBSyxJQUFNLEVBQU8sS0FBTyxHQUFPLFNBS2hDLEtBQUssbUJBQXFCLEVBQVcsV0FBYSxTQUtsRCxLQUFLLFFBQVUsRUFBTyxTQUFXLEtBS2pDLEtBQUssT0FBUyxFQUFXLEdBQWlCLEdBSzFDLEtBQUssZ0JBQWtCLEdBYXpCLEVBQVMsV0FBYSxTQUFvQixFQUFPLEVBQU0sQ0FDckQsTUFBTyxHQUFTLFdBQVcsQ0FDekIsYUFBYyxHQUNiLElBdUJMLEVBQVMsV0FBYSxTQUFvQixFQUFLLEVBQU0sQ0FLbkQsR0FKSSxJQUFTLFFBQ1gsR0FBTyxJQUdMLEdBQU8sTUFBUSxNQUFPLElBQVEsU0FDaEMsS0FBTSxJQUFJLElBQXFCLCtEQUFrRSxLQUFRLEtBQU8sT0FBUyxNQUFPLEtBR2xJLE1BQU8sSUFBSSxHQUFTLENBQ2xCLE9BQVEsR0FBZ0IsRUFBSyxFQUFTLGVBQ3RDLElBQUssR0FBTyxXQUFXLEdBQ3ZCLG1CQUFvQixFQUFLLHNCQWU3QixFQUFTLGlCQUFtQixTQUEwQixFQUFjLENBQ2xFLEdBQUksRUFBUyxHQUNYLE1BQU8sR0FBUyxXQUFXLEdBQ3RCLEdBQUksRUFBUyxXQUFXLEdBQzdCLE1BQU8sR0FDRixHQUFJLE1BQU8sSUFBaUIsU0FDakMsTUFBTyxHQUFTLFdBQVcsR0FFM0IsS0FBTSxJQUFJLElBQXFCLDZCQUErQixFQUFlLFlBQWMsTUFBTyxLQWtCdEcsRUFBUyxRQUFVLFNBQWlCLEVBQU0sRUFBTSxDQUM5QyxHQUFJLEdBQW9CLEdBQWlCLEdBQ3JDLEVBQVMsRUFBa0IsR0FFL0IsTUFBSSxHQUNLLEVBQVMsV0FBVyxFQUFRLEdBRTVCLEVBQVMsUUFBUSxhQUFjLGNBQWlCLEVBQU8sa0NBb0JsRSxFQUFTLFlBQWMsU0FBcUIsRUFBTSxFQUFNLENBQ3RELEdBQUksR0FBb0IsR0FBaUIsR0FDckMsRUFBUyxFQUFrQixHQUUvQixNQUFJLEdBQ0ssRUFBUyxXQUFXLEVBQVEsR0FFNUIsRUFBUyxRQUFRLGFBQWMsY0FBaUIsRUFBTyxrQ0FXbEUsRUFBUyxRQUFVLFNBQWlCLEVBQVEsRUFBYSxDQUt2RCxHQUpJLElBQWdCLFFBQ2xCLEdBQWMsTUFHWixDQUFDLEVBQ0gsS0FBTSxJQUFJLElBQXFCLG9EQUdqQyxHQUFJLEdBQVUsWUFBa0IsSUFBVSxFQUFTLEdBQUksSUFBUSxFQUFRLEdBRXZFLEdBQUksR0FBUyxlQUNYLEtBQU0sSUFBSSxJQUFxQixHQUUvQixNQUFPLElBQUksR0FBUyxDQUNsQixRQUFTLEtBU2YsRUFBUyxjQUFnQixTQUF1QixFQUFNLENBQ3BELEdBQUksR0FBYSxDQUNmLEtBQU0sUUFDTixNQUFPLFFBQ1AsUUFBUyxXQUNULFNBQVUsV0FDVixNQUFPLFNBQ1AsT0FBUSxTQUNSLEtBQU0sUUFDTixNQUFPLFFBQ1AsSUFBSyxPQUNMLEtBQU0sT0FDTixLQUFNLFFBQ04sTUFBTyxRQUNQLE9BQVEsVUFDUixRQUFTLFVBQ1QsT0FBUSxVQUNSLFFBQVMsVUFDVCxZQUFhLGVBQ2IsYUFBYyxnQkFDZCxHQUFPLEVBQUssZUFDZCxHQUFJLENBQUMsRUFBWSxLQUFNLElBQUksSUFBaUIsR0FDNUMsTUFBTyxJQVNULEVBQVMsV0FBYSxTQUFvQixFQUFHLENBQzNDLE1BQU8sSUFBSyxFQUFFLGlCQUFtQixJQVFuQyxHQUFJLEdBQVMsRUFBUyxVQXNCdEIsU0FBTyxTQUFXLFNBQWtCLEVBQUssRUFBTSxDQUM3QyxBQUFJLElBQVMsUUFDWCxHQUFPLElBSVQsR0FBSSxHQUFVLEVBQVMsR0FBSSxFQUFNLENBQy9CLE1BQU8sRUFBSyxRQUFVLElBQVMsRUFBSyxRQUFVLEtBR2hELE1BQU8sTUFBSyxRQUFVLEdBQVUsT0FBTyxLQUFLLElBQUssR0FBUyx5QkFBeUIsS0FBTSxHQUFPLElBZ0JsRyxFQUFPLFFBQVUsU0FBaUIsRUFBTSxDQUN0QyxHQUFJLEdBQVEsS0FFWixBQUFJLElBQVMsUUFDWCxHQUFPLElBR1QsR0FBSSxHQUFJLEdBQWUsSUFBSSxTQUFVLEVBQU0sQ0FDekMsR0FBSSxHQUFNLEVBQU0sT0FBTyxHQUV2QixNQUFJLElBQVksR0FDUCxLQUdGLEVBQU0sSUFBSSxnQkFBZ0IsRUFBUyxDQUN4QyxNQUFPLE9BQ1AsWUFBYSxRQUNaLEVBQU0sQ0FDUCxLQUFNLEVBQUssTUFBTSxFQUFHLE9BQ2xCLE9BQU8sS0FDVixPQUFPLFNBQVUsRUFBRyxDQUNyQixNQUFPLEtBRVQsTUFBTyxNQUFLLElBQUksY0FBYyxFQUFTLENBQ3JDLEtBQU0sY0FDTixNQUFPLEVBQUssV0FBYSxVQUN4QixJQUFPLE9BQU8sSUFTbkIsRUFBTyxTQUFXLFVBQW9CLENBQ3BDLE1BQUssTUFBSyxRQUNILEVBQVMsR0FBSSxLQUFLLFFBREMsSUFlNUIsRUFBTyxNQUFRLFVBQWlCLENBRTlCLEdBQUksQ0FBQyxLQUFLLFFBQVMsTUFBTyxNQUMxQixHQUFJLEdBQUksSUFDUixNQUFJLE1BQUssUUFBVSxHQUFHLElBQUssS0FBSyxNQUFRLEtBQ3BDLE1BQUssU0FBVyxHQUFLLEtBQUssV0FBYSxJQUFHLElBQUssS0FBSyxPQUFTLEtBQUssU0FBVyxFQUFJLEtBQ2pGLEtBQUssUUFBVSxHQUFHLElBQUssS0FBSyxNQUFRLEtBQ3BDLEtBQUssT0FBUyxHQUFHLElBQUssS0FBSyxLQUFPLEtBQ2xDLE1BQUssUUFBVSxHQUFLLEtBQUssVUFBWSxHQUFLLEtBQUssVUFBWSxHQUFLLEtBQUssZUFBaUIsSUFBRyxJQUFLLEtBQzlGLEtBQUssUUFBVSxHQUFHLElBQUssS0FBSyxNQUFRLEtBQ3BDLEtBQUssVUFBWSxHQUFHLElBQUssS0FBSyxRQUFVLEtBQ3hDLE1BQUssVUFBWSxHQUFLLEtBQUssZUFBaUIsSUFFOUMsSUFBSyxHQUFRLEtBQUssUUFBVSxLQUFLLGFBQWUsSUFBTSxHQUFLLEtBQ3pELElBQU0sS0FBSyxJQUFLLE9BQ2IsR0FvQlQsRUFBTyxVQUFZLFNBQW1CLEVBQU0sQ0FLMUMsR0FKSSxJQUFTLFFBQ1gsR0FBTyxJQUdMLENBQUMsS0FBSyxRQUFTLE1BQU8sTUFDMUIsR0FBSSxHQUFTLEtBQUssV0FDbEIsR0FBSSxFQUFTLEdBQUssR0FBVSxNQUFVLE1BQU8sTUFDN0MsRUFBTyxFQUFTLENBQ2QscUJBQXNCLEdBQ3RCLGdCQUFpQixHQUNqQixjQUFlLEdBQ2YsT0FBUSxZQUNQLEdBQ0gsR0FBSSxHQUFRLEtBQUssUUFBUSxRQUFTLFVBQVcsVUFBVyxnQkFDcEQsRUFBTSxFQUFLLFNBQVcsUUFBVSxPQUFTLFFBRTdDLEFBQUksRUFBQyxFQUFLLGlCQUFtQixFQUFNLFVBQVksR0FBSyxFQUFNLGVBQWlCLElBQ3pFLElBQU8sRUFBSyxTQUFXLFFBQVUsS0FBTyxNQUVwQyxFQUFDLEVBQUssc0JBQXdCLEVBQU0sZUFBaUIsSUFDdkQsSUFBTyxTQUlYLEdBQUksR0FBTSxFQUFNLFNBQVMsR0FFekIsTUFBSSxHQUFLLGVBQ1AsR0FBTSxJQUFNLEdBR1AsR0FRVCxFQUFPLE9BQVMsVUFBa0IsQ0FDaEMsTUFBTyxNQUFLLFNBUWQsRUFBTyxTQUFXLFVBQW9CLENBQ3BDLE1BQU8sTUFBSyxTQVFkLEVBQU8sU0FBVyxVQUFvQixDQUNwQyxNQUFPLE1BQUssR0FBRyxpQkFRakIsRUFBTyxRQUFVLFVBQW1CLENBQ2xDLE1BQU8sTUFBSyxZQVNkLEVBQU8sS0FBTyxTQUFjLEVBQVUsQ0FDcEMsR0FBSSxDQUFDLEtBQUssUUFBUyxNQUFPLE1BSTFCLE9BSEksR0FBTSxFQUFTLGlCQUFpQixHQUNoQyxFQUFTLEdBRUosRUFBWSxFQUFnQyxJQUFpQixFQUFPLENBQUUsR0FBUSxLQUFhLE1BQU8sQ0FDekcsR0FBSSxHQUFJLEVBQU0sTUFFZCxBQUFJLElBQWUsRUFBSSxPQUFRLElBQU0sR0FBZSxLQUFLLE9BQVEsS0FDL0QsR0FBTyxHQUFLLEVBQUksSUFBSSxHQUFLLEtBQUssSUFBSSxJQUl0QyxNQUFPLElBQVEsS0FBTSxDQUNuQixPQUFRLEdBQ1AsS0FTTCxFQUFPLE1BQVEsU0FBZSxFQUFVLENBQ3RDLEdBQUksQ0FBQyxLQUFLLFFBQVMsTUFBTyxNQUMxQixHQUFJLEdBQU0sRUFBUyxpQkFBaUIsR0FDcEMsTUFBTyxNQUFLLEtBQUssRUFBSSxXQVd2QixFQUFPLFNBQVcsU0FBa0IsRUFBSSxDQUN0QyxHQUFJLENBQUMsS0FBSyxRQUFTLE1BQU8sTUFHMUIsT0FGSSxHQUFTLEdBRUosRUFBSyxFQUFHLEVBQWUsT0FBTyxLQUFLLEtBQUssUUFBUyxFQUFLLEVBQWEsT0FBUSxJQUFNLENBQ3hGLEdBQUksR0FBSSxFQUFhLEdBQ3JCLEVBQU8sR0FBSyxHQUFTLEVBQUcsS0FBSyxPQUFPLEdBQUksSUFHMUMsTUFBTyxJQUFRLEtBQU0sQ0FDbkIsT0FBUSxHQUNQLEtBWUwsRUFBTyxJQUFNLFNBQWEsRUFBTSxDQUM5QixNQUFPLE1BQUssRUFBUyxjQUFjLEtBV3JDLEVBQU8sSUFBTSxTQUFhLEVBQVEsQ0FDaEMsR0FBSSxDQUFDLEtBQUssUUFBUyxNQUFPLE1BRTFCLEdBQUksR0FBUSxFQUFTLEdBQUksS0FBSyxPQUFRLEdBQWdCLEVBQVEsRUFBUyxnQkFFdkUsTUFBTyxJQUFRLEtBQU0sQ0FDbkIsT0FBUSxLQVVaLEVBQU8sWUFBYyxTQUFxQixFQUFPLENBQy9DLEdBQUksR0FBTyxJQUFVLE9BQVMsR0FBSyxFQUMvQixFQUFTLEVBQUssT0FDZCxFQUFrQixFQUFLLGdCQUN2QixFQUFxQixFQUFLLG1CQUUxQixFQUFNLEtBQUssSUFBSSxNQUFNLENBQ3ZCLE9BQVEsRUFDUixnQkFBaUIsSUFFZixFQUFPLENBQ1QsSUFBSyxHQUdQLE1BQUksSUFDRixHQUFLLG1CQUFxQixHQUdyQixHQUFRLEtBQU0sSUFZdkIsRUFBTyxHQUFLLFNBQVksRUFBTSxDQUM1QixNQUFPLE1BQUssUUFBVSxLQUFLLFFBQVEsR0FBTSxJQUFJLEdBQVEsS0FVdkQsRUFBTyxVQUFZLFVBQXFCLENBQ3RDLEdBQUksQ0FBQyxLQUFLLFFBQVMsTUFBTyxNQUMxQixHQUFJLEdBQU8sS0FBSyxXQUNoQixVQUFnQixLQUFLLE9BQVEsR0FDdEIsR0FBUSxLQUFNLENBQ25CLE9BQVEsR0FDUCxLQVNMLEVBQU8sUUFBVSxVQUFtQixDQUNsQyxPQUFTLEdBQU8sVUFBVSxPQUFRLEVBQVEsR0FBSSxPQUFNLEdBQU8sRUFBTyxFQUFHLEVBQU8sRUFBTSxJQUNoRixFQUFNLEdBQVEsVUFBVSxHQUcxQixHQUFJLENBQUMsS0FBSyxRQUFTLE1BQU8sTUFFMUIsR0FBSSxFQUFNLFNBQVcsRUFDbkIsTUFBTyxNQUdULEVBQVEsRUFBTSxJQUFJLFNBQVUsR0FBRyxDQUM3QixNQUFPLEdBQVMsY0FBYyxNQU9oQyxPQUxJLEdBQVEsR0FDUixFQUFjLEdBQ2QsRUFBTyxLQUFLLFdBQ1osRUFFSyxFQUFhLEVBQWdDLElBQWlCLEVBQVEsQ0FBRSxHQUFTLEtBQWMsTUFBTyxDQUM3RyxHQUFJLEdBQUksRUFBTyxNQUVmLEdBQUksRUFBTSxRQUFRLElBQU0sRUFBRyxDQUN6QixFQUFXLEVBQ1gsR0FBSSxHQUFNLEVBRVYsT0FBUyxLQUFNLEdBQ2IsR0FBTyxLQUFLLE9BQU8sR0FBSSxHQUFLLEVBQVksR0FDeEMsRUFBWSxHQUFNLEVBSXBCLEFBQUksRUFBUyxFQUFLLEtBQ2hCLElBQU8sRUFBSyxJQUdkLEdBQUksSUFBSSxLQUFLLE1BQU0sR0FDbkIsRUFBTSxHQUFLLEdBQ1gsRUFBWSxHQUFNLEdBQU0sSUFBTyxHQUFJLEtBQVEsSUFFM0MsT0FBUyxNQUFRLEdBQ2YsQUFBSSxHQUFlLFFBQVEsSUFBUSxHQUFlLFFBQVEsSUFDeEQsR0FBUSxLQUFLLE9BQVEsRUFBTSxHQUFNLEVBQU8sT0FJdkMsQUFBSSxHQUFTLEVBQUssS0FDdkIsR0FBWSxHQUFLLEVBQUssSUFNMUIsT0FBUyxLQUFPLEdBQ2QsQUFBSSxFQUFZLEtBQVMsR0FDdkIsR0FBTSxJQUFhLElBQVEsRUFBVyxFQUFZLEdBQU8sRUFBWSxHQUFPLEtBQUssT0FBTyxHQUFVLElBSXRHLE1BQU8sSUFBUSxLQUFNLENBQ25CLE9BQVEsR0FDUCxJQUFNLGFBU1gsRUFBTyxPQUFTLFVBQWtCLENBQ2hDLEdBQUksQ0FBQyxLQUFLLFFBQVMsTUFBTyxNQUcxQixPQUZJLEdBQVUsR0FFTCxFQUFNLEVBQUcsRUFBZ0IsT0FBTyxLQUFLLEtBQUssUUFBUyxFQUFNLEVBQWMsT0FBUSxJQUFPLENBQzdGLEdBQUksR0FBSSxFQUFjLEdBQ3RCLEVBQVEsR0FBSyxDQUFDLEtBQUssT0FBTyxHQUc1QixNQUFPLElBQVEsS0FBTSxDQUNuQixPQUFRLEdBQ1AsS0FjTCxFQUFPLE9BQVMsU0FBZ0IsRUFBTyxDQUtyQyxHQUpJLENBQUMsS0FBSyxTQUFXLENBQUMsRUFBTSxTQUl4QixDQUFDLEtBQUssSUFBSSxPQUFPLEVBQU0sS0FDekIsTUFBTyxHQUdULFdBQVksRUFBSSxFQUFJLENBRWxCLE1BQUksS0FBTyxRQUFhLElBQU8sRUFBVSxJQUFPLFFBQWEsSUFBTyxFQUM3RCxJQUFPLEVBR2hCLE9BQVMsR0FBYSxFQUFnQyxJQUFpQixFQUFRLENBQUUsR0FBUyxLQUFjLE1BQU8sQ0FDN0csR0FBSSxHQUFJLEVBQU8sTUFFZixHQUFJLENBQUMsRUFBRyxLQUFLLE9BQU8sR0FBSSxFQUFNLE9BQU8sSUFDbkMsTUFBTyxHQUlYLE1BQU8sSUFHVCxFQUFhLEVBQVUsQ0FBQyxDQUN0QixJQUFLLFNBQ0wsSUFBSyxVQUFlLENBQ2xCLE1BQU8sTUFBSyxRQUFVLEtBQUssSUFBSSxPQUFTLE9BUXpDLENBQ0QsSUFBSyxrQkFDTCxJQUFLLFVBQWUsQ0FDbEIsTUFBTyxNQUFLLFFBQVUsS0FBSyxJQUFJLGdCQUFrQixPQUVsRCxDQUNELElBQUssUUFDTCxJQUFLLFVBQWUsQ0FDbEIsTUFBTyxNQUFLLFFBQVUsS0FBSyxPQUFPLE9BQVMsRUFBSSxNQU9oRCxDQUNELElBQUssV0FDTCxJQUFLLFVBQWUsQ0FDbEIsTUFBTyxNQUFLLFFBQVUsS0FBSyxPQUFPLFVBQVksRUFBSSxNQU9uRCxDQUNELElBQUssU0FDTCxJQUFLLFVBQWUsQ0FDbEIsTUFBTyxNQUFLLFFBQVUsS0FBSyxPQUFPLFFBQVUsRUFBSSxNQU9qRCxDQUNELElBQUssUUFDTCxJQUFLLFVBQWUsQ0FDbEIsTUFBTyxNQUFLLFFBQVUsS0FBSyxPQUFPLE9BQVMsRUFBSSxNQU9oRCxDQUNELElBQUssT0FDTCxJQUFLLFVBQWUsQ0FDbEIsTUFBTyxNQUFLLFFBQVUsS0FBSyxPQUFPLE1BQVEsRUFBSSxNQU8vQyxDQUNELElBQUssUUFDTCxJQUFLLFVBQWUsQ0FDbEIsTUFBTyxNQUFLLFFBQVUsS0FBSyxPQUFPLE9BQVMsRUFBSSxNQU9oRCxDQUNELElBQUssVUFDTCxJQUFLLFVBQWUsQ0FDbEIsTUFBTyxNQUFLLFFBQVUsS0FBSyxPQUFPLFNBQVcsRUFBSSxNQU9sRCxDQUNELElBQUssVUFDTCxJQUFLLFVBQWUsQ0FDbEIsTUFBTyxNQUFLLFFBQVUsS0FBSyxPQUFPLFNBQVcsRUFBSSxNQU9sRCxDQUNELElBQUssZUFDTCxJQUFLLFVBQWUsQ0FDbEIsTUFBTyxNQUFLLFFBQVUsS0FBSyxPQUFPLGNBQWdCLEVBQUksTUFRdkQsQ0FDRCxJQUFLLFVBQ0wsSUFBSyxVQUFlLENBQ2xCLE1BQU8sTUFBSyxVQUFZLE9BT3pCLENBQ0QsSUFBSyxnQkFDTCxJQUFLLFVBQWUsQ0FDbEIsTUFBTyxNQUFLLFFBQVUsS0FBSyxRQUFRLE9BQVMsT0FPN0MsQ0FDRCxJQUFLLHFCQUNMLElBQUssVUFBZSxDQUNsQixNQUFPLE1BQUssUUFBVSxLQUFLLFFBQVEsWUFBYyxTQUk5QyxLQUdMLEdBQVksbUJBRWhCLFlBQTBCLEVBQU8sRUFBSyxDQUNwQyxNQUFJLENBQUMsR0FBUyxDQUFDLEVBQU0sUUFDWixHQUFTLFFBQVEsNEJBQ2YsQ0FBQyxHQUFPLENBQUMsRUFBSSxRQUNmLEdBQVMsUUFBUSwwQkFDZixFQUFNLEVBQ1IsR0FBUyxRQUFRLG1CQUFvQixxRUFBdUUsRUFBTSxRQUFVLFlBQWMsRUFBSSxTQUU5SSxLQWlCWCxHQUFJLElBQXdCLFVBQVksQ0FJdEMsV0FBa0IsRUFBUSxDQUl4QixLQUFLLEVBQUksRUFBTyxNQUtoQixLQUFLLEVBQUksRUFBTyxJQUtoQixLQUFLLFFBQVUsRUFBTyxTQUFXLEtBS2pDLEtBQUssZ0JBQWtCLEdBVXpCLEVBQVMsUUFBVSxTQUFpQixFQUFRLEVBQWEsQ0FLdkQsR0FKSSxJQUFnQixRQUNsQixHQUFjLE1BR1osQ0FBQyxFQUNILEtBQU0sSUFBSSxJQUFxQixvREFHakMsR0FBSSxHQUFVLFlBQWtCLElBQVUsRUFBUyxHQUFJLElBQVEsRUFBUSxHQUV2RSxHQUFJLEdBQVMsZUFDWCxLQUFNLElBQUksSUFBcUIsR0FFL0IsTUFBTyxJQUFJLEdBQVMsQ0FDbEIsUUFBUyxLQVlmLEVBQVMsY0FBZ0IsU0FBdUIsRUFBTyxFQUFLLENBQzFELEdBQUksR0FBYSxHQUFpQixHQUM5QixFQUFXLEdBQWlCLEdBQzVCLEVBQWdCLEdBQWlCLEVBQVksR0FFakQsTUFBSSxJQUFpQixLQUNaLEdBQUksR0FBUyxDQUNsQixNQUFPLEVBQ1AsSUFBSyxJQUdBLEdBV1gsRUFBUyxNQUFRLFNBQWUsRUFBTyxFQUFVLENBQy9DLEdBQUksR0FBTSxHQUFTLGlCQUFpQixHQUNoQyxFQUFLLEdBQWlCLEdBQzFCLE1BQU8sR0FBUyxjQUFjLEVBQUksRUFBRyxLQUFLLEtBVTVDLEVBQVMsT0FBUyxTQUFnQixFQUFLLEVBQVUsQ0FDL0MsR0FBSSxHQUFNLEdBQVMsaUJBQWlCLEdBQ2hDLEVBQUssR0FBaUIsR0FDMUIsTUFBTyxHQUFTLGNBQWMsRUFBRyxNQUFNLEdBQU0sSUFZL0MsRUFBUyxRQUFVLFNBQWlCLEVBQU0sRUFBTSxDQUM5QyxHQUFJLEdBQVUsSUFBUSxJQUFJLE1BQU0sSUFBSyxHQUNqQyxFQUFJLEVBQU8sR0FDWCxFQUFJLEVBQU8sR0FFZixHQUFJLEdBQUssRUFBRyxDQUNWLEdBQUksR0FBTyxFQUVYLEdBQUksQ0FDRixFQUFRLEdBQVMsUUFBUSxFQUFHLEdBQzVCLEVBQWUsRUFBTSxjQUNkLEVBQVAsQ0FDQSxFQUFlLEdBR2pCLEdBQUksR0FBSyxFQUVULEdBQUksQ0FDRixFQUFNLEdBQVMsUUFBUSxFQUFHLEdBQzFCLEVBQWEsRUFBSSxjQUNWLEVBQVAsQ0FDQSxFQUFhLEdBR2YsR0FBSSxHQUFnQixFQUNsQixNQUFPLEdBQVMsY0FBYyxFQUFPLEdBR3ZDLEdBQUksRUFBYyxDQUNoQixHQUFJLEdBQU0sR0FBUyxRQUFRLEVBQUcsR0FFOUIsR0FBSSxFQUFJLFFBQ04sTUFBTyxHQUFTLE1BQU0sRUFBTyxXQUV0QixFQUFZLENBQ3JCLEdBQUksR0FBTyxHQUFTLFFBQVEsRUFBRyxHQUUvQixHQUFJLEVBQUssUUFDUCxNQUFPLEdBQVMsT0FBTyxFQUFLLElBS2xDLE1BQU8sR0FBUyxRQUFRLGFBQWMsY0FBaUIsRUFBTyxrQ0FTaEUsRUFBUyxXQUFhLFNBQW9CLEVBQUcsQ0FDM0MsTUFBTyxJQUFLLEVBQUUsaUJBQW1CLElBUW5DLEdBQUksR0FBUyxFQUFTLFVBT3RCLFNBQU8sT0FBUyxTQUFnQixFQUFNLENBQ3BDLE1BQUksS0FBUyxRQUNYLEdBQU8sZ0JBR0YsS0FBSyxRQUFVLEtBQUssV0FBVyxNQUFNLEtBQU0sQ0FBQyxJQUFPLElBQUksR0FBUSxLQVd4RSxFQUFPLE1BQVEsU0FBZSxFQUFNLENBS2xDLEdBSkksSUFBUyxRQUNYLEdBQU8sZ0JBR0wsQ0FBQyxLQUFLLFFBQVMsTUFBTyxLQUMxQixHQUFJLEdBQVEsS0FBSyxNQUFNLFFBQVEsR0FDM0IsRUFBTSxLQUFLLElBQUksUUFBUSxHQUMzQixNQUFPLE1BQUssTUFBTSxFQUFJLEtBQUssRUFBTyxHQUFNLElBQUksSUFBUyxHQVN2RCxFQUFPLFFBQVUsU0FBaUIsRUFBTSxDQUN0QyxNQUFPLE1BQUssUUFBVSxLQUFLLFdBQWEsS0FBSyxFQUFFLE1BQU0sR0FBRyxRQUFRLEtBQUssRUFBRyxHQUFRLElBUWxGLEVBQU8sUUFBVSxVQUFtQixDQUNsQyxNQUFPLE1BQUssRUFBRSxZQUFjLEtBQUssRUFBRSxXQVNyQyxFQUFPLFFBQVUsU0FBaUIsRUFBVSxDQUMxQyxNQUFLLE1BQUssUUFDSCxLQUFLLEVBQUksRUFEVSxJQVU1QixFQUFPLFNBQVcsU0FBa0IsRUFBVSxDQUM1QyxNQUFLLE1BQUssUUFDSCxLQUFLLEdBQUssRUFEUyxJQVU1QixFQUFPLFNBQVcsU0FBa0IsRUFBVSxDQUM1QyxNQUFLLE1BQUssUUFDSCxLQUFLLEdBQUssR0FBWSxLQUFLLEVBQUksRUFEWixJQVk1QixFQUFPLElBQU0sU0FBYSxFQUFPLENBQy9CLEdBQUksR0FBTyxJQUFVLE9BQVMsR0FBSyxFQUMvQixFQUFRLEVBQUssTUFDYixFQUFNLEVBQUssSUFFZixNQUFLLE1BQUssUUFDSCxFQUFTLGNBQWMsR0FBUyxLQUFLLEVBQUcsR0FBTyxLQUFLLEdBRGpDLE1BVTVCLEVBQU8sUUFBVSxVQUFtQixDQUNsQyxHQUFJLEdBQVEsS0FFWixHQUFJLENBQUMsS0FBSyxRQUFTLE1BQU8sR0FFMUIsT0FBUyxHQUFPLFVBQVUsT0FBUSxFQUFZLEdBQUksT0FBTSxHQUFPLEVBQU8sRUFBRyxFQUFPLEVBQU0sSUFDcEYsRUFBVSxHQUFRLFVBQVUsR0FVOUIsT0FQSSxHQUFTLEVBQVUsSUFBSSxJQUFrQixPQUFPLFNBQVUsRUFBRyxDQUMvRCxNQUFPLEdBQU0sU0FBUyxLQUNyQixPQUNDLEVBQVUsR0FDVixFQUFJLEtBQUssRUFDVCxFQUFJLEVBRUQsRUFBSSxLQUFLLEdBQUcsQ0FDakIsR0FBSSxHQUFRLEVBQU8sSUFBTSxLQUFLLEVBQzFCLEVBQU8sQ0FBQyxFQUFRLENBQUMsS0FBSyxFQUFJLEtBQUssRUFBSSxFQUN2QyxFQUFRLEtBQUssRUFBUyxjQUFjLEVBQUcsSUFDdkMsRUFBSSxFQUNKLEdBQUssRUFHUCxNQUFPLElBVVQsRUFBTyxRQUFVLFNBQWlCLEVBQVUsQ0FDMUMsR0FBSSxHQUFNLEdBQVMsaUJBQWlCLEdBRXBDLEdBQUksQ0FBQyxLQUFLLFNBQVcsQ0FBQyxFQUFJLFNBQVcsRUFBSSxHQUFHLGtCQUFvQixFQUM5RCxNQUFPLEdBUVQsT0FMSSxHQUFJLEtBQUssRUFDVCxFQUFNLEVBQ04sRUFDQSxFQUFVLEdBRVAsRUFBSSxLQUFLLEdBQUcsQ0FDakIsR0FBSSxHQUFRLEtBQUssTUFBTSxLQUFLLEVBQUksU0FBUyxTQUFVLEVBQUcsQ0FDcEQsTUFBTyxHQUFJLEtBRWIsRUFBTyxDQUFDLEVBQVEsQ0FBQyxLQUFLLEVBQUksS0FBSyxFQUFJLEVBQ25DLEVBQVEsS0FBSyxFQUFTLGNBQWMsRUFBRyxJQUN2QyxFQUFJLEVBQ0osR0FBTyxFQUdULE1BQU8sSUFTVCxFQUFPLGNBQWdCLFNBQXVCLEVBQWUsQ0FDM0QsTUFBSyxNQUFLLFFBQ0gsS0FBSyxRQUFRLEtBQUssU0FBVyxHQUFlLE1BQU0sRUFBRyxHQURsQyxJQVU1QixFQUFPLFNBQVcsU0FBa0IsRUFBTyxDQUN6QyxNQUFPLE1BQUssRUFBSSxFQUFNLEdBQUssS0FBSyxFQUFJLEVBQU0sR0FTNUMsRUFBTyxXQUFhLFNBQW9CLEVBQU8sQ0FDN0MsTUFBSyxNQUFLLFFBQ0gsQ0FBQyxLQUFLLEdBQU0sQ0FBQyxFQUFNLEVBREEsSUFVNUIsRUFBTyxTQUFXLFNBQWtCLEVBQU8sQ0FDekMsTUFBSyxNQUFLLFFBQ0gsQ0FBQyxFQUFNLEdBQU0sQ0FBQyxLQUFLLEVBREEsSUFVNUIsRUFBTyxRQUFVLFNBQWlCLEVBQU8sQ0FDdkMsTUFBSyxNQUFLLFFBQ0gsS0FBSyxHQUFLLEVBQU0sR0FBSyxLQUFLLEdBQUssRUFBTSxFQURsQixJQVU1QixFQUFPLE9BQVMsU0FBZ0IsRUFBTyxDQUNyQyxNQUFJLENBQUMsS0FBSyxTQUFXLENBQUMsRUFBTSxRQUNuQixHQUdGLEtBQUssRUFBRSxPQUFPLEVBQU0sSUFBTSxLQUFLLEVBQUUsT0FBTyxFQUFNLElBV3ZELEVBQU8sYUFBZSxTQUFzQixFQUFPLENBQ2pELEdBQUksQ0FBQyxLQUFLLFFBQVMsTUFBTyxNQUMxQixHQUFJLEdBQUksS0FBSyxFQUFJLEVBQU0sRUFBSSxLQUFLLEVBQUksRUFBTSxFQUN0QyxFQUFJLEtBQUssRUFBSSxFQUFNLEVBQUksS0FBSyxFQUFJLEVBQU0sRUFFMUMsTUFBSSxJQUFLLEVBQ0EsS0FFQSxFQUFTLGNBQWMsRUFBRyxJQVdyQyxFQUFPLE1BQVEsU0FBZSxFQUFPLENBQ25DLEdBQUksQ0FBQyxLQUFLLFFBQVMsTUFBTyxNQUMxQixHQUFJLEdBQUksS0FBSyxFQUFJLEVBQU0sRUFBSSxLQUFLLEVBQUksRUFBTSxFQUN0QyxFQUFJLEtBQUssRUFBSSxFQUFNLEVBQUksS0FBSyxFQUFJLEVBQU0sRUFDMUMsTUFBTyxHQUFTLGNBQWMsRUFBRyxJQVVuQyxFQUFTLE1BQVEsU0FBZSxFQUFXLENBQ3pDLEdBQUksR0FBd0IsRUFBVSxLQUFLLFNBQVUsRUFBRyxFQUFHLENBQ3pELE1BQU8sR0FBRSxFQUFJLEVBQUUsSUFDZCxPQUFPLFNBQVUsRUFBTyxFQUFNLENBQy9CLEdBQUksR0FBUSxFQUFNLEdBQ2QsRUFBVSxFQUFNLEdBRXBCLE1BQUssR0FFTSxFQUFRLFNBQVMsSUFBUyxFQUFRLFdBQVcsR0FDL0MsQ0FBQyxFQUFPLEVBQVEsTUFBTSxJQUV0QixDQUFDLEVBQU0sT0FBTyxDQUFDLElBQVcsR0FKMUIsQ0FBQyxFQUFPLElBTWhCLENBQUMsR0FBSSxPQUNKLEVBQVEsRUFBc0IsR0FDOUIsRUFBUSxFQUFzQixHQUVsQyxNQUFJLElBQ0YsRUFBTSxLQUFLLEdBR04sR0FTVCxFQUFTLElBQU0sU0FBYSxFQUFXLENBcUJyQyxPQXBCSSxHQUVBLEVBQVEsS0FDUixFQUFlLEVBRWYsRUFBVSxHQUNWLEVBQU8sRUFBVSxJQUFJLFNBQVUsRUFBRyxDQUNwQyxNQUFPLENBQUMsQ0FDTixLQUFNLEVBQUUsRUFDUixLQUFNLEtBQ0wsQ0FDRCxLQUFNLEVBQUUsRUFDUixLQUFNLFFBR04sRUFBYSxHQUFtQixNQUFNLFdBQVcsT0FBTyxNQUFNLEVBQWtCLEdBQ2hGLEVBQU0sRUFBVSxLQUFLLFNBQVUsRUFBRyxHQUFHLENBQ3ZDLE1BQU8sR0FBRSxLQUFPLEdBQUUsT0FHWCxFQUFZLEVBQWdDLEdBQU0sRUFBTyxDQUFFLEdBQVEsS0FBYSxNQUFPLENBQzlGLEdBQUksR0FBSSxFQUFNLE1BQ2QsR0FBZ0IsRUFBRSxPQUFTLElBQU0sRUFBSSxHQUVyQyxBQUFJLElBQWlCLEVBQ25CLEVBQVEsRUFBRSxLQUVOLElBQVMsQ0FBQyxHQUFVLENBQUMsRUFBRSxNQUN6QixFQUFRLEtBQUssRUFBUyxjQUFjLEVBQU8sRUFBRSxPQUcvQyxFQUFRLE1BSVosTUFBTyxHQUFTLE1BQU0sSUFTeEIsRUFBTyxXQUFhLFVBQXNCLENBR3hDLE9BRkksR0FBUyxLQUVKLEVBQVEsVUFBVSxPQUFRLEVBQVksR0FBSSxPQUFNLEdBQVEsRUFBUSxFQUFHLEVBQVEsRUFBTyxJQUN6RixFQUFVLEdBQVMsVUFBVSxHQUcvQixNQUFPLEdBQVMsSUFBSSxDQUFDLE1BQU0sT0FBTyxJQUFZLElBQUksU0FBVSxFQUFHLENBQzdELE1BQU8sR0FBTyxhQUFhLEtBQzFCLE9BQU8sU0FBVSxFQUFHLENBQ3JCLE1BQU8sSUFBSyxDQUFDLEVBQUUsYUFTbkIsRUFBTyxTQUFXLFVBQW9CLENBQ3BDLE1BQUssTUFBSyxRQUNILElBQU0sS0FBSyxFQUFFLFFBQVUsV0FBYSxLQUFLLEVBQUUsUUFBVSxJQURsQyxJQVc1QixFQUFPLE1BQVEsU0FBZSxFQUFNLENBQ2xDLE1BQUssTUFBSyxRQUNILEtBQUssRUFBRSxNQUFNLEdBQVEsSUFBTSxLQUFLLEVBQUUsTUFBTSxHQURyQixJQVc1QixFQUFPLFVBQVksVUFBcUIsQ0FDdEMsTUFBSyxNQUFLLFFBQ0gsS0FBSyxFQUFFLFlBQWMsSUFBTSxLQUFLLEVBQUUsWUFEZixJQVk1QixFQUFPLFVBQVksU0FBbUIsRUFBTSxDQUMxQyxNQUFLLE1BQUssUUFDSCxLQUFLLEVBQUUsVUFBVSxHQUFRLElBQU0sS0FBSyxFQUFFLFVBQVUsR0FEN0IsSUFZNUIsRUFBTyxTQUFXLFNBQWtCLEVBQVksRUFBUSxDQUN0RCxHQUFJLEdBQVEsSUFBVyxPQUFTLEdBQUssRUFDakMsRUFBa0IsRUFBTSxVQUN4QixFQUFZLElBQW9CLE9BQVMsV0FBUSxFQUVyRCxNQUFLLE1BQUssUUFDSCxHQUFLLEtBQUssRUFBRSxTQUFTLEdBQWMsRUFBWSxLQUFLLEVBQUUsU0FBUyxHQUQ1QyxJQWlCNUIsRUFBTyxXQUFhLFNBQW9CLEVBQU0sRUFBTSxDQUNsRCxNQUFLLE1BQUssUUFJSCxLQUFLLEVBQUUsS0FBSyxLQUFLLEVBQUcsRUFBTSxHQUh4QixHQUFTLFFBQVEsS0FBSyxnQkFjakMsRUFBTyxhQUFlLFNBQXNCLEVBQU8sQ0FDakQsTUFBTyxHQUFTLGNBQWMsRUFBTSxLQUFLLEdBQUksRUFBTSxLQUFLLEtBRzFELEVBQWEsRUFBVSxDQUFDLENBQ3RCLElBQUssUUFDTCxJQUFLLFVBQWUsQ0FDbEIsTUFBTyxNQUFLLFFBQVUsS0FBSyxFQUFJLE9BT2hDLENBQ0QsSUFBSyxNQUNMLElBQUssVUFBZSxDQUNsQixNQUFPLE1BQUssUUFBVSxLQUFLLEVBQUksT0FPaEMsQ0FDRCxJQUFLLFVBQ0wsSUFBSyxVQUFlLENBQ2xCLE1BQU8sTUFBSyxnQkFBa0IsT0FPL0IsQ0FDRCxJQUFLLGdCQUNMLElBQUssVUFBZSxDQUNsQixNQUFPLE1BQUssUUFBVSxLQUFLLFFBQVEsT0FBUyxPQU83QyxDQUNELElBQUsscUJBQ0wsSUFBSyxVQUFlLENBQ2xCLE1BQU8sTUFBSyxRQUFVLEtBQUssUUFBUSxZQUFjLFNBSTlDLEtBT0wsR0FBb0IsVUFBWSxDQUNsQyxZQUFnQixFQU9oQixTQUFLLE9BQVMsU0FBZ0IsRUFBTSxDQUNsQyxBQUFJLElBQVMsUUFDWCxHQUFPLEdBQVMsYUFHbEIsR0FBSSxHQUFRLEdBQVMsTUFBTSxRQUFRLEdBQU0sSUFBSSxDQUMzQyxNQUFPLEtBRVQsTUFBTyxDQUFDLEVBQUssYUFBZSxFQUFNLFNBQVcsRUFBTSxJQUFJLENBQ3JELE1BQU8sSUFDTixRQVNMLEVBQUssZ0JBQWtCLFNBQXlCLEVBQU0sQ0FDcEQsTUFBTyxJQUFTLGlCQUFpQixJQUFTLEdBQVMsWUFBWSxJQWtCakUsRUFBSyxjQUFnQixTQUF5QixFQUFPLENBQ25ELE1BQU8sSUFBYyxFQUFPLEdBQVMsY0FxQnZDLEVBQUssT0FBUyxTQUFnQixFQUFRLEVBQU8sQ0FDM0MsQUFBSSxJQUFXLFFBQ2IsR0FBUyxRQUdYLEdBQUksR0FBTyxJQUFVLE9BQVMsR0FBSyxFQUMvQixFQUFjLEVBQUssT0FDbkIsRUFBUyxJQUFnQixPQUFTLEtBQU8sRUFDekMsRUFBdUIsRUFBSyxnQkFDNUIsRUFBa0IsSUFBeUIsT0FBUyxLQUFPLEVBQzNELEVBQWMsRUFBSyxPQUNuQixFQUFTLElBQWdCLE9BQVMsS0FBTyxFQUN6QyxFQUFzQixFQUFLLGVBQzNCLEVBQWlCLElBQXdCLE9BQVMsVUFBWSxFQUVsRSxNQUFRLElBQVUsR0FBTyxPQUFPLEVBQVEsRUFBaUIsSUFBaUIsT0FBTyxJQWlCbkYsRUFBSyxhQUFlLFNBQXNCLEVBQVEsRUFBUSxDQUN4RCxBQUFJLElBQVcsUUFDYixHQUFTLFFBR1gsR0FBSSxHQUFRLElBQVcsT0FBUyxHQUFLLEVBQ2pDLEVBQWUsRUFBTSxPQUNyQixFQUFTLElBQWlCLE9BQVMsS0FBTyxFQUMxQyxFQUF3QixFQUFNLGdCQUM5QixFQUFrQixJQUEwQixPQUFTLEtBQU8sRUFDNUQsRUFBZSxFQUFNLE9BQ3JCLEVBQVMsSUFBaUIsT0FBUyxLQUFPLEVBQzFDLEVBQXVCLEVBQU0sZUFDN0IsRUFBaUIsSUFBeUIsT0FBUyxVQUFZLEVBRW5FLE1BQVEsSUFBVSxHQUFPLE9BQU8sRUFBUSxFQUFpQixJQUFpQixPQUFPLEVBQVEsS0FrQjNGLEVBQUssU0FBVyxTQUFrQixFQUFRLEVBQVEsQ0FDaEQsQUFBSSxJQUFXLFFBQ2IsR0FBUyxRQUdYLEdBQUksR0FBUSxJQUFXLE9BQVMsR0FBSyxFQUNqQyxFQUFlLEVBQU0sT0FDckIsRUFBUyxJQUFpQixPQUFTLEtBQU8sRUFDMUMsRUFBd0IsRUFBTSxnQkFDOUIsRUFBa0IsSUFBMEIsT0FBUyxLQUFPLEVBQzVELEVBQWUsRUFBTSxPQUNyQixFQUFTLElBQWlCLE9BQVMsS0FBTyxFQUU5QyxNQUFRLElBQVUsR0FBTyxPQUFPLEVBQVEsRUFBaUIsT0FBTyxTQUFTLElBZ0IzRSxFQUFLLGVBQWlCLFNBQXdCLEVBQVEsRUFBUSxDQUM1RCxBQUFJLElBQVcsUUFDYixHQUFTLFFBR1gsR0FBSSxHQUFRLElBQVcsT0FBUyxHQUFLLEVBQ2pDLEVBQWUsRUFBTSxPQUNyQixFQUFTLElBQWlCLE9BQVMsS0FBTyxFQUMxQyxFQUF3QixFQUFNLGdCQUM5QixFQUFrQixJQUEwQixPQUFTLEtBQU8sRUFDNUQsRUFBZSxFQUFNLE9BQ3JCLEVBQVMsSUFBaUIsT0FBUyxLQUFPLEVBRTlDLE1BQVEsSUFBVSxHQUFPLE9BQU8sRUFBUSxFQUFpQixPQUFPLFNBQVMsRUFBUSxLQVluRixFQUFLLFVBQVksU0FBbUIsRUFBUSxDQUMxQyxHQUFJLEdBQVEsSUFBVyxPQUFTLEdBQUssRUFDakMsRUFBZSxFQUFNLE9BQ3JCLEVBQVMsSUFBaUIsT0FBUyxLQUFPLEVBRTlDLE1BQU8sSUFBTyxPQUFPLEdBQVEsYUFjL0IsRUFBSyxLQUFPLFNBQWMsRUFBUSxFQUFRLENBQ3hDLEFBQUksSUFBVyxRQUNiLEdBQVMsU0FHWCxHQUFJLEdBQVEsSUFBVyxPQUFTLEdBQUssRUFDakMsRUFBZSxFQUFNLE9BQ3JCLEVBQVMsSUFBaUIsT0FBUyxLQUFPLEVBRTlDLE1BQU8sSUFBTyxPQUFPLEVBQVEsS0FBTSxXQUFXLEtBQUssSUFZckQsRUFBSyxTQUFXLFVBQW9CLENBQ2xDLE1BQU8sQ0FDTCxTQUFVLE1BSVAsS0FHVCxZQUFpQixFQUFTLEVBQU8sQ0FDL0IsR0FBSSxHQUFjLFNBQXFCLEVBQUksQ0FDekMsTUFBTyxHQUFHLE1BQU0sRUFBRyxDQUNqQixjQUFlLEtBQ2QsUUFBUSxPQUFPLFdBRWhCLEVBQUssRUFBWSxHQUFTLEVBQVksR0FFMUMsTUFBTyxNQUFLLE1BQU0sR0FBUyxXQUFXLEdBQUksR0FBRyxTQUcvQyxZQUF3QixFQUFRLEVBQU8sRUFBTyxDQWM1QyxPQWJJLEdBQVUsQ0FBQyxDQUFDLFFBQVMsU0FBVSxHQUFHLEdBQUcsQ0FDdkMsTUFBTyxJQUFFLEtBQU8sR0FBRSxPQUNoQixDQUFDLFdBQVksU0FBVSxHQUFHLEdBQUcsQ0FDL0IsTUFBTyxJQUFFLFFBQVUsR0FBRSxVQUNuQixDQUFDLFNBQVUsU0FBVSxHQUFHLEdBQUcsQ0FDN0IsTUFBTyxJQUFFLE1BQVEsR0FBRSxNQUFTLElBQUUsS0FBTyxHQUFFLE1BQVEsS0FDN0MsQ0FBQyxRQUFTLFNBQVUsR0FBRyxHQUFHLENBQzVCLEdBQUksR0FBTyxHQUFRLEdBQUcsSUFDdEIsTUFBUSxHQUFPLEVBQU8sR0FBSyxJQUN6QixDQUFDLE9BQVEsS0FDVCxFQUFVLEdBQ1YsRUFBYSxFQUVSLEVBQUssRUFBRyxFQUFXLEVBQVMsRUFBSyxFQUFTLE9BQVEsSUFBTSxDQUMvRCxHQUFJLEdBQWMsRUFBUyxHQUN2QixFQUFPLEVBQVksR0FDbkIsRUFBUyxFQUFZLEdBRXpCLEdBQUksRUFBTSxRQUFRLElBQVMsRUFBRyxDQUM1QixHQUFJLEdBRUosRUFBYyxFQUNkLEdBQUksR0FBUSxFQUFPLEVBQVEsR0FHM0IsR0FGQSxFQUFZLEVBQU8sS0FBTSxHQUFlLEdBQUksRUFBYSxHQUFRLEVBQU8sSUFFcEUsRUFBWSxFQUFPLENBQ3JCLEdBQUksR0FFSixFQUFTLEVBQU8sS0FBTSxHQUFnQixHQUFJLEVBQWMsR0FBUSxFQUFRLEVBQUcsSUFDM0UsR0FBUyxNQUVULEdBQVMsRUFHWCxFQUFRLEdBQVEsR0FJcEIsTUFBTyxDQUFDLEVBQVEsRUFBUyxFQUFXLEdBR3RDLFlBQWdCLEVBQVMsRUFBTyxFQUFPLEVBQU0sQ0FDM0MsR0FBSSxHQUFrQixHQUFlLEVBQVMsRUFBTyxHQUNqRCxFQUFTLEVBQWdCLEdBQ3pCLEVBQVUsRUFBZ0IsR0FDMUIsRUFBWSxFQUFnQixHQUM1QixFQUFjLEVBQWdCLEdBRTlCLEVBQWtCLEVBQVEsRUFDMUIsRUFBa0IsRUFBTSxPQUFPLFNBQVUsRUFBRyxDQUM5QyxNQUFPLENBQUMsUUFBUyxVQUFXLFVBQVcsZ0JBQWdCLFFBQVEsSUFBTSxJQUd2RSxHQUFJLEVBQWdCLFNBQVcsRUFBRyxDQUNoQyxHQUFJLEVBQVksRUFBTyxDQUNyQixHQUFJLEdBRUosRUFBWSxFQUFPLEtBQU0sR0FBZ0IsR0FBSSxFQUFjLEdBQWUsRUFBRyxJQUcvRSxBQUFJLElBQWMsR0FDaEIsR0FBUSxHQUFnQixHQUFRLElBQWdCLEdBQUssRUFBbUIsR0FBWSxJQUl4RixHQUFJLEdBQVcsR0FBUyxXQUFXLEVBQVMsR0FFNUMsR0FBSSxFQUFnQixPQUFTLEVBQUcsQ0FDOUIsR0FBSSxHQUVKLE1BQVEsR0FBdUIsR0FBUyxXQUFXLEVBQWlCLElBQU8sUUFBUSxNQUFNLEVBQXNCLEdBQWlCLEtBQUssT0FFckksT0FBTyxHQUlYLEdBQUksSUFBbUIsQ0FDckIsS0FBTSxrQkFDTixRQUFTLGtCQUNULEtBQU0sa0JBQ04sS0FBTSxrQkFDTixLQUFNLGtCQUNOLFNBQVUsa0JBQ1YsS0FBTSxrQkFDTixRQUFTLDBFQUNULEtBQU0sa0JBQ04sS0FBTSxrQkFDTixLQUFNLGtCQUNOLEtBQU0sa0JBQ04sS0FBTSxrQkFDTixLQUFNLGtCQUNOLEtBQU0sa0JBQ04sS0FBTSxrQkFDTixRQUFTLGtCQUNULEtBQU0sa0JBQ04sS0FBTSxrQkFDTixLQUFNLGtCQUNOLEtBQU0sT0FFSixHQUF3QixDQUMxQixLQUFNLENBQUMsS0FBTSxNQUNiLFFBQVMsQ0FBQyxLQUFNLE1BQ2hCLEtBQU0sQ0FBQyxLQUFNLE1BQ2IsS0FBTSxDQUFDLEtBQU0sTUFDYixLQUFNLENBQUMsS0FBTSxNQUNiLFNBQVUsQ0FBQyxNQUFPLE9BQ2xCLEtBQU0sQ0FBQyxLQUFNLE1BQ2IsS0FBTSxDQUFDLEtBQU0sTUFDYixLQUFNLENBQUMsS0FBTSxNQUNiLEtBQU0sQ0FBQyxLQUFNLE1BQ2IsS0FBTSxDQUFDLEtBQU0sTUFDYixLQUFNLENBQUMsS0FBTSxNQUNiLEtBQU0sQ0FBQyxLQUFNLE1BQ2IsS0FBTSxDQUFDLEtBQU0sTUFDYixLQUFNLENBQUMsS0FBTSxNQUNiLFFBQVMsQ0FBQyxLQUFNLE1BQ2hCLEtBQU0sQ0FBQyxLQUFNLE1BQ2IsS0FBTSxDQUFDLEtBQU0sTUFDYixLQUFNLENBQUMsS0FBTSxPQUVYLEdBQWUsR0FBaUIsUUFBUSxRQUFRLFdBQVksSUFBSSxNQUFNLElBQzFFLFlBQXFCLEVBQUssQ0FDeEIsR0FBSSxHQUFRLFNBQVMsRUFBSyxJQUUxQixHQUFJLE1BQU0sR0FBUSxDQUNoQixFQUFRLEdBRVIsT0FBUyxHQUFJLEVBQUcsRUFBSSxFQUFJLE9BQVEsSUFBSyxDQUNuQyxHQUFJLEdBQU8sRUFBSSxXQUFXLEdBRTFCLEdBQUksRUFBSSxHQUFHLE9BQU8sR0FBaUIsV0FBYSxHQUM5QyxHQUFTLEdBQWEsUUFBUSxFQUFJLFFBRWxDLFFBQVMsS0FBTyxJQUF1QixDQUNyQyxHQUFJLEdBQXVCLEdBQXNCLEdBQzdDLEVBQU0sRUFBcUIsR0FDM0IsRUFBTSxFQUFxQixHQUUvQixBQUFJLEdBQVEsR0FBTyxHQUFRLEdBQ3pCLElBQVMsRUFBTyxJQU14QixNQUFPLFVBQVMsRUFBTyxRQUV2QixPQUFPLEdBR1gsWUFBb0IsRUFBTSxFQUFRLENBQ2hDLEdBQUksR0FBa0IsRUFBSyxnQkFFM0IsTUFBSSxLQUFXLFFBQ2IsR0FBUyxJQUdKLEdBQUksUUFBTyxHQUFLLEdBQWlCLEdBQW1CLFFBQVUsR0FHdkUsR0FBSSxJQUFjLG9EQUVsQixZQUFpQixFQUFPLEVBQU0sQ0FDNUIsTUFBSSxLQUFTLFFBQ1gsR0FBTyxTQUFjLEVBQUcsQ0FDdEIsTUFBTyxLQUlKLENBQ0wsTUFBTyxFQUNQLE1BQU8sU0FBZSxFQUFNLENBQzFCLEdBQUksR0FBSSxFQUFLLEdBQ2IsTUFBTyxHQUFLLEdBQVksTUFLOUIsR0FBSSxJQUFPLE9BQU8sYUFBYSxLQUMzQixHQUFjLE1BQVEsR0FBTyxJQUM3QixHQUFvQixHQUFJLFFBQU8sR0FBYSxLQUVoRCxZQUFzQixFQUFHLENBR3ZCLE1BQU8sR0FBRSxRQUFRLE1BQU8sUUFBUSxRQUFRLEdBQW1CLElBRzdELFlBQThCLEVBQUcsQ0FDL0IsTUFBTyxHQUFFLFFBQVEsTUFBTyxJQUN2QixRQUFRLEdBQW1CLEtBQzNCLGNBR0gsWUFBZSxFQUFTLEVBQVksQ0FDbEMsTUFBSSxLQUFZLEtBQ1AsS0FFQSxDQUNMLE1BQU8sT0FBTyxFQUFRLElBQUksSUFBYyxLQUFLLE1BQzdDLE1BQU8sU0FBZSxFQUFPLENBQzNCLEdBQUksR0FBSSxFQUFNLEdBQ2QsTUFBTyxHQUFRLFVBQVUsU0FBVSxFQUFHLENBQ3BDLE1BQU8sSUFBcUIsS0FBTyxHQUFxQixLQUNyRCxJQU1iLFlBQWdCLEVBQU8sRUFBUSxDQUM3QixNQUFPLENBQ0wsTUFBTyxFQUNQLE1BQU8sU0FBZSxFQUFPLENBQzNCLEdBQUksR0FBSSxFQUFNLEdBQ1YsRUFBSSxFQUFNLEdBQ2QsTUFBTyxJQUFhLEVBQUcsSUFFekIsT0FBUSxHQUlaLFlBQWdCLEVBQU8sQ0FDckIsTUFBTyxDQUNMLE1BQU8sRUFDUCxNQUFPLFNBQWUsRUFBTyxDQUMzQixHQUFJLEdBQUksRUFBTSxHQUNkLE1BQU8sS0FLYixZQUFxQixFQUFPLENBQzFCLE1BQU8sR0FBTSxRQUFRLDhCQUErQixRQUd0RCxZQUFzQixFQUFPLEVBQUssQ0FDaEMsR0FBSSxHQUFNLEdBQVcsR0FDakIsRUFBTSxHQUFXLEVBQUssT0FDdEIsRUFBUSxHQUFXLEVBQUssT0FDeEIsRUFBTyxHQUFXLEVBQUssT0FDdkIsRUFBTSxHQUFXLEVBQUssT0FDdEIsRUFBVyxHQUFXLEVBQUssU0FDM0IsRUFBYSxHQUFXLEVBQUssU0FDN0IsRUFBVyxHQUFXLEVBQUssU0FDM0IsRUFBWSxHQUFXLEVBQUssU0FDNUIsRUFBWSxHQUFXLEVBQUssU0FDNUIsRUFBWSxHQUFXLEVBQUssU0FDNUIsRUFBVSxTQUFpQixFQUFHLENBQ2hDLE1BQU8sQ0FDTCxNQUFPLE9BQU8sR0FBWSxFQUFFLE1BQzVCLE1BQU8sU0FBZSxHQUFPLENBQzNCLEdBQUksSUFBSSxHQUFNLEdBQ2QsTUFBTyxLQUVULFFBQVMsS0FHVCxFQUFVLFNBQWlCLEVBQUcsQ0FDaEMsR0FBSSxFQUFNLFFBQ1IsTUFBTyxHQUFRLEdBR2pCLE9BQVEsRUFBRSxTQUVILElBQ0gsTUFBTyxJQUFNLEVBQUksS0FBSyxRQUFTLElBQVEsT0FFcEMsS0FDSCxNQUFPLElBQU0sRUFBSSxLQUFLLE9BQVEsSUFBUSxPQUduQyxJQUNILE1BQU8sSUFBUSxPQUVaLEtBQ0gsTUFBTyxJQUFRLEVBQVcsUUFFdkIsT0FDSCxNQUFPLElBQVEsT0FFWixRQUNILE1BQU8sSUFBUSxPQUVaLFNBQ0gsTUFBTyxJQUFRLE9BR1osSUFDSCxNQUFPLElBQVEsT0FFWixLQUNILE1BQU8sSUFBUSxPQUVaLE1BQ0gsTUFBTyxJQUFNLEVBQUksT0FBTyxRQUFTLEdBQU0sSUFBUSxPQUU1QyxPQUNILE1BQU8sSUFBTSxFQUFJLE9BQU8sT0FBUSxHQUFNLElBQVEsT0FFM0MsSUFDSCxNQUFPLElBQVEsT0FFWixLQUNILE1BQU8sSUFBUSxPQUVaLE1BQ0gsTUFBTyxJQUFNLEVBQUksT0FBTyxRQUFTLEdBQU8sSUFBUSxPQUU3QyxPQUNILE1BQU8sSUFBTSxFQUFJLE9BQU8sT0FBUSxHQUFPLElBQVEsT0FHNUMsSUFDSCxNQUFPLElBQVEsT0FFWixLQUNILE1BQU8sSUFBUSxPQUdaLElBQ0gsTUFBTyxJQUFRLE9BRVosTUFDSCxNQUFPLElBQVEsT0FHWixLQUNILE1BQU8sSUFBUSxPQUVaLElBQ0gsTUFBTyxJQUFRLE9BRVosS0FDSCxNQUFPLElBQVEsT0FFWixJQUNILE1BQU8sSUFBUSxPQUVaLEtBQ0gsTUFBTyxJQUFRLE9BRVosSUFDSCxNQUFPLElBQVEsT0FFWixJQUNILE1BQU8sSUFBUSxPQUVaLEtBQ0gsTUFBTyxJQUFRLE9BRVosSUFDSCxNQUFPLElBQVEsT0FFWixLQUNILE1BQU8sSUFBUSxPQUVaLElBQ0gsTUFBTyxJQUFRLE9BRVosTUFDSCxNQUFPLElBQVEsT0FFWixJQUNILE1BQU8sSUFBTyxPQUVYLEtBQ0gsTUFBTyxJQUFPLE9BRVgsTUFDSCxNQUFPLElBQVEsT0FHWixJQUNILE1BQU8sSUFBTSxFQUFJLFlBQWEsT0FHM0IsT0FDSCxNQUFPLElBQVEsT0FFWixLQUNILE1BQU8sSUFBUSxFQUFXLFFBR3ZCLElBQ0gsTUFBTyxJQUFRLE9BRVosS0FDSCxNQUFPLElBQVEsT0FHWixRQUNBLElBQ0gsTUFBTyxJQUFRLE9BRVosTUFDSCxNQUFPLElBQU0sRUFBSSxTQUFTLFFBQVMsR0FBTyxJQUFRLE9BRS9DLE9BQ0gsTUFBTyxJQUFNLEVBQUksU0FBUyxPQUFRLEdBQU8sSUFBUSxPQUU5QyxNQUNILE1BQU8sSUFBTSxFQUFJLFNBQVMsUUFBUyxHQUFNLElBQVEsT0FFOUMsT0FDSCxNQUFPLElBQU0sRUFBSSxTQUFTLE9BQVEsR0FBTSxJQUFRLE9BRzdDLFFBQ0EsS0FDSCxNQUFPLElBQU8sR0FBSSxRQUFPLFFBQVUsRUFBUyxPQUFTLFNBQVcsRUFBSSxPQUFTLE9BQVEsT0FFbEYsTUFDSCxNQUFPLElBQU8sR0FBSSxRQUFPLFFBQVUsRUFBUyxPQUFTLEtBQU8sRUFBSSxPQUFTLE1BQU8sT0FJN0UsSUFDSCxNQUFPLElBQU8sOEJBR2QsTUFBTyxHQUFRLEtBSWpCLEdBQU8sRUFBUSxJQUFVLENBQzNCLGNBQWUsSUFFakIsVUFBSyxNQUFRLEVBQ04sR0FHVCxHQUFJLElBQTBCLENBQzVCLEtBQU0sQ0FDSixVQUFXLEtBQ1gsUUFBUyxTQUVYLE1BQU8sQ0FDTCxRQUFTLElBQ1QsVUFBVyxLQUNYLE1BQU8sTUFDUCxLQUFNLFFBRVIsSUFBSyxDQUNILFFBQVMsSUFDVCxVQUFXLE1BRWIsUUFBUyxDQUNQLE1BQU8sTUFDUCxLQUFNLFFBRVIsVUFBVyxJQUNYLFVBQVcsSUFDWCxLQUFNLENBQ0osUUFBUyxJQUNULFVBQVcsTUFFYixPQUFRLENBQ04sUUFBUyxJQUNULFVBQVcsTUFFYixPQUFRLENBQ04sUUFBUyxJQUNULFVBQVcsT0FJZixZQUFzQixFQUFNLEVBQVEsRUFBWSxDQUM5QyxHQUFJLEdBQU8sRUFBSyxLQUNaLEVBQVEsRUFBSyxNQUVqQixHQUFJLElBQVMsVUFDWCxNQUFPLENBQ0wsUUFBUyxHQUNULElBQUssR0FJVCxHQUFJLEdBQVEsRUFBVyxHQUNuQixFQUFNLEdBQXdCLEdBTWxDLEdBSkksTUFBTyxJQUFRLFVBQ2pCLEdBQU0sRUFBSSxJQUdSLEVBQ0YsTUFBTyxDQUNMLFFBQVMsR0FDVCxJQUFLLEdBT1gsWUFBb0IsRUFBTyxDQUN6QixHQUFJLEdBQUssRUFBTSxJQUFJLFNBQVUsRUFBRyxDQUM5QixNQUFPLEdBQUUsUUFDUixPQUFPLFNBQVUsRUFBRyxFQUFHLENBQ3hCLE1BQU8sR0FBSSxJQUFNLEVBQUUsT0FBUyxLQUMzQixJQUNILE1BQU8sQ0FBQyxJQUFNLEVBQUssSUFBSyxHQUcxQixZQUFlLEVBQU8sRUFBTyxFQUFVLENBQ3JDLEdBQUksR0FBVSxFQUFNLE1BQU0sR0FFMUIsR0FBSSxFQUFTLENBQ1gsR0FBSSxHQUFNLEdBQ04sRUFBYSxFQUVqQixPQUFTLEtBQUssR0FDWixHQUFJLEdBQWUsRUFBVSxHQUFJLENBQy9CLEdBQUksR0FBSSxFQUFTLEdBQ2IsRUFBUyxFQUFFLE9BQVMsRUFBRSxPQUFTLEVBQUksRUFFdkMsQUFBSSxDQUFDLEVBQUUsU0FBVyxFQUFFLE9BQ2xCLEdBQUksRUFBRSxNQUFNLElBQUksSUFBTSxFQUFFLE1BQU0sRUFBUSxNQUFNLEVBQVksRUFBYSxLQUd2RSxHQUFjLEVBSWxCLE1BQU8sQ0FBQyxFQUFTLE9BRWpCLE9BQU8sQ0FBQyxFQUFTLElBSXJCLFlBQTZCLEVBQVMsQ0FDcEMsR0FBSSxHQUFVLFNBQWlCLEVBQU8sQ0FDcEMsT0FBUSxPQUNELElBQ0gsTUFBTyxrQkFFSixJQUNILE1BQU8sYUFFSixJQUNILE1BQU8sYUFFSixRQUNBLElBQ0gsTUFBTyxXQUVKLElBQ0gsTUFBTyxVQUVKLElBQ0gsTUFBTyxjQUVKLFFBQ0EsSUFDSCxNQUFPLFlBRUosSUFDSCxNQUFPLFdBRUosUUFDQSxJQUNILE1BQU8sY0FFSixJQUNILE1BQU8saUJBRUosSUFDSCxNQUFPLGVBRUosSUFDSCxNQUFPLGtCQUdQLE1BQU8sUUFJVCxFQUFPLEtBQ1AsRUFFSixBQUFLLEdBQVksRUFBUSxJQUN2QixHQUFPLEdBQVMsT0FBTyxFQUFRLElBRzVCLEdBQVksRUFBUSxJQUNsQixJQUNILEdBQU8sR0FBSSxJQUFnQixFQUFRLElBR3JDLEVBQWlCLEVBQVEsR0FHdEIsR0FBWSxFQUFRLElBQ3ZCLEdBQVEsRUFBSyxHQUFRLEVBQUksR0FBSyxFQUFJLEdBRy9CLEdBQVksRUFBUSxJQUN2QixDQUFJLEVBQVEsRUFBSSxJQUFNLEVBQVEsSUFBTSxFQUNsQyxFQUFRLEdBQUssR0FDSixFQUFRLElBQU0sSUFBTSxFQUFRLElBQU0sR0FDM0MsR0FBUSxFQUFJLElBSVosRUFBUSxJQUFNLEdBQUssRUFBUSxHQUM3QixHQUFRLEVBQUksQ0FBQyxFQUFRLEdBR2xCLEdBQVksRUFBUSxJQUN2QixHQUFRLEVBQUksR0FBWSxFQUFRLElBR2xDLEdBQUksR0FBTyxPQUFPLEtBQUssR0FBUyxPQUFPLFNBQVUsRUFBRyxFQUFHLENBQ3JELEdBQUksR0FBSSxFQUFRLEdBRWhCLE1BQUksSUFDRixHQUFFLEdBQUssRUFBUSxJQUdWLEdBQ04sSUFDSCxNQUFPLENBQUMsRUFBTSxFQUFNLEdBR3RCLEdBQUksSUFBcUIsS0FFekIsYUFBNEIsQ0FDMUIsTUFBSyxLQUNILElBQXFCLEdBQVMsV0FBVyxnQkFHcEMsR0FHVCxZQUErQixFQUFPLEVBQVEsQ0FDNUMsR0FBSSxFQUFNLFFBQ1IsTUFBTyxHQUdULEdBQUksR0FBYSxHQUFVLHVCQUF1QixFQUFNLEtBRXhELEdBQUksQ0FBQyxFQUNILE1BQU8sR0FHVCxHQUFJLEdBQVksR0FBVSxPQUFPLEVBQVEsR0FDckMsRUFBUSxFQUFVLG9CQUFvQixNQUN0QyxFQUFTLEVBQU0sSUFBSSxTQUFVLEVBQUcsQ0FDbEMsTUFBTyxJQUFhLEVBQUcsRUFBUSxLQUdqQyxNQUFJLEdBQU8sU0FBUyxRQUNYLEVBR0YsRUFHVCxZQUEyQixFQUFRLEVBQVEsQ0FDekMsR0FBSSxHQUVKLE1BQVEsR0FBbUIsTUFBTSxXQUFXLE9BQU8sTUFBTSxFQUFrQixFQUFPLElBQUksU0FBVSxFQUFHLENBQ2pHLE1BQU8sSUFBc0IsRUFBRyxNQVFwQyxZQUEyQixFQUFRLEVBQU8sRUFBUSxDQUNoRCxHQUFJLEdBQVMsR0FBa0IsR0FBVSxZQUFZLEdBQVMsR0FDMUQsRUFBUSxFQUFPLElBQUksU0FBVSxFQUFHLENBQ2xDLE1BQU8sSUFBYSxFQUFHLEtBRXJCLEVBQW9CLEVBQU0sS0FBSyxTQUFVLEVBQUcsQ0FDOUMsTUFBTyxHQUFFLGdCQUdYLEdBQUksRUFDRixNQUFPLENBQ0wsTUFBTyxFQUNQLE9BQVEsRUFDUixjQUFlLEVBQWtCLGVBR25DLEdBQUksR0FBYyxHQUFXLEdBQ3pCLEVBQWMsRUFBWSxHQUMxQixFQUFXLEVBQVksR0FDdkIsRUFBUSxPQUFPLEVBQWEsS0FDNUIsRUFBUyxHQUFNLEVBQU8sRUFBTyxHQUM3QixFQUFhLEVBQU8sR0FDcEIsRUFBVSxFQUFPLEdBQ2pCLEVBQVEsRUFBVSxHQUFvQixHQUFXLENBQUMsS0FBTSxLQUFNLFFBQzlELEVBQVMsRUFBTSxHQUNmLEdBQU8sRUFBTSxHQUNiLEdBQWlCLEVBQU0sR0FFM0IsR0FBSSxHQUFlLEVBQVMsTUFBUSxHQUFlLEVBQVMsS0FDMUQsS0FBTSxJQUFJLEdBQThCLHlEQUcxQyxNQUFPLENBQ0wsTUFBTyxFQUNQLE9BQVEsRUFDUixNQUFPLEVBQ1AsV0FBWSxFQUNaLFFBQVMsRUFDVCxPQUFRLEVBQ1IsS0FBTSxHQUNOLGVBQWdCLElBSXRCLFlBQXlCLEVBQVEsRUFBTyxFQUFRLENBQzlDLEdBQUksR0FBcUIsR0FBa0IsRUFBUSxFQUFPLEdBQ3RELEVBQVMsRUFBbUIsT0FDNUIsRUFBTyxFQUFtQixLQUMxQixFQUFpQixFQUFtQixlQUNwQyxFQUFnQixFQUFtQixjQUV2QyxNQUFPLENBQUMsRUFBUSxFQUFNLEVBQWdCLEdBR3hDLEdBQUksSUFBZ0IsQ0FBQyxFQUFHLEdBQUksR0FBSSxHQUFJLElBQUssSUFBSyxJQUFLLElBQUssSUFBSyxJQUFLLElBQUssS0FDbkUsR0FBYSxDQUFDLEVBQUcsR0FBSSxHQUFJLEdBQUksSUFBSyxJQUFLLElBQUssSUFBSyxJQUFLLElBQUssSUFBSyxLQUVwRSxZQUF3QixFQUFNLEVBQU8sQ0FDbkMsTUFBTyxJQUFJLElBQVEsb0JBQXFCLGlCQUFtQixFQUFRLGFBQWUsTUFBTyxHQUFRLFVBQVksRUFBTyxzQkFHdEgsWUFBbUIsRUFBTSxFQUFPLEVBQUssQ0FDbkMsR0FBSSxHQUFLLEdBQUksTUFBSyxLQUFLLElBQUksRUFBTSxFQUFRLEVBQUcsSUFBTSxZQUNsRCxNQUFPLEtBQU8sRUFBSSxFQUFJLEVBR3hCLFlBQXdCLEVBQU0sRUFBTyxFQUFLLENBQ3hDLE1BQU8sR0FBTyxJQUFXLEdBQVEsR0FBYSxJQUFlLEVBQVEsR0FHdkUsWUFBMEIsRUFBTSxFQUFTLENBQ3ZDLEdBQUksR0FBUSxHQUFXLEdBQVEsR0FBYSxHQUN4QyxFQUFTLEVBQU0sVUFBVSxTQUFVLEVBQUcsQ0FDeEMsTUFBTyxHQUFJLElBRVQsRUFBTSxFQUFVLEVBQU0sR0FDMUIsTUFBTyxDQUNMLE1BQU8sRUFBUyxFQUNoQixJQUFLLEdBUVQsWUFBeUIsRUFBUyxDQUNoQyxHQUFJLEdBQU8sRUFBUSxLQUNmLEVBQVEsRUFBUSxNQUNoQixFQUFNLEVBQVEsSUFDZCxFQUFVLEdBQWUsRUFBTSxFQUFPLEdBQ3RDLEVBQVUsR0FBVSxFQUFNLEVBQU8sR0FDakMsRUFBYSxLQUFLLE1BQU8sR0FBVSxFQUFVLElBQU0sR0FDbkQsRUFFSixNQUFJLEdBQWEsRUFDZixHQUFXLEVBQU8sRUFDbEIsRUFBYSxHQUFnQixJQUN4QixBQUFJLEVBQWEsR0FBZ0IsR0FDdEMsR0FBVyxFQUFPLEVBQ2xCLEVBQWEsR0FFYixFQUFXLEVBR04sRUFBUyxDQUNkLFNBQVUsRUFDVixXQUFZLEVBQ1osUUFBUyxHQUNSLEdBQVcsSUFFaEIsWUFBeUIsRUFBVSxDQUNqQyxHQUFJLEdBQVcsRUFBUyxTQUNwQixFQUFhLEVBQVMsV0FDdEIsRUFBVSxFQUFTLFFBQ25CLEVBQWdCLEdBQVUsRUFBVSxFQUFHLEdBQ3ZDLEVBQWEsR0FBVyxHQUN4QixFQUFVLEVBQWEsRUFBSSxFQUFVLEVBQWdCLEVBQ3JELEVBRUosQUFBSSxFQUFVLEVBQ1osR0FBTyxFQUFXLEVBQ2xCLEdBQVcsR0FBVyxJQUNqQixBQUFJLEVBQVUsRUFDbkIsR0FBTyxFQUFXLEVBQ2xCLEdBQVcsR0FBVyxJQUV0QixFQUFPLEVBR1QsR0FBSSxHQUFvQixHQUFpQixFQUFNLEdBQzNDLEVBQVEsRUFBa0IsTUFDMUIsRUFBTSxFQUFrQixJQUU1QixNQUFPLEdBQVMsQ0FDZCxLQUFNLEVBQ04sTUFBTyxFQUNQLElBQUssR0FDSixHQUFXLElBRWhCLFlBQTRCLEVBQVUsQ0FDcEMsR0FBSSxHQUFPLEVBQVMsS0FDaEIsRUFBUSxFQUFTLE1BQ2pCLEVBQU0sRUFBUyxJQUNmLEVBQVUsR0FBZSxFQUFNLEVBQU8sR0FDMUMsTUFBTyxHQUFTLENBQ2QsS0FBTSxFQUNOLFFBQVMsR0FDUixHQUFXLElBRWhCLFlBQTRCLEVBQWEsQ0FDdkMsR0FBSSxHQUFPLEVBQVksS0FDbkIsRUFBVSxFQUFZLFFBRXRCLEVBQXFCLEdBQWlCLEVBQU0sR0FDNUMsRUFBUSxFQUFtQixNQUMzQixFQUFNLEVBQW1CLElBRTdCLE1BQU8sR0FBUyxDQUNkLEtBQU0sRUFDTixNQUFPLEVBQ1AsSUFBSyxHQUNKLEdBQVcsSUFFaEIsWUFBNEIsRUFBSyxDQUMvQixHQUFJLEdBQVksR0FBVSxFQUFJLFVBQzFCLEVBQVksR0FBZSxFQUFJLFdBQVksRUFBRyxHQUFnQixFQUFJLFdBQ2xFLEVBQWUsR0FBZSxFQUFJLFFBQVMsRUFBRyxHQUVsRCxNQUFLLEdBRU8sRUFFQSxFQUVFLEdBREwsR0FBZSxVQUFXLEVBQUksU0FGOUIsR0FBZSxPQUFRLEVBQUksTUFGM0IsR0FBZSxXQUFZLEVBQUksVUFPMUMsWUFBK0IsRUFBSyxDQUNsQyxHQUFJLEdBQVksR0FBVSxFQUFJLE1BQzFCLEVBQWUsR0FBZSxFQUFJLFFBQVMsRUFBRyxHQUFXLEVBQUksT0FFakUsTUFBSyxHQUVPLEVBRUUsR0FETCxHQUFlLFVBQVcsRUFBSSxTQUY5QixHQUFlLE9BQVEsRUFBSSxNQUt0QyxZQUFpQyxFQUFLLENBQ3BDLEdBQUksR0FBWSxHQUFVLEVBQUksTUFDMUIsRUFBYSxHQUFlLEVBQUksTUFBTyxFQUFHLElBQzFDLEVBQVcsR0FBZSxFQUFJLElBQUssRUFBRyxHQUFZLEVBQUksS0FBTSxFQUFJLFFBRXBFLE1BQUssR0FFTyxFQUVBLEVBRUUsR0FETCxHQUFlLE1BQU8sRUFBSSxLQUYxQixHQUFlLFFBQVMsRUFBSSxPQUY1QixHQUFlLE9BQVEsRUFBSSxNQU90QyxZQUE0QixFQUFLLENBQy9CLEdBQUksR0FBTyxFQUFJLEtBQ1gsRUFBUyxFQUFJLE9BQ2IsRUFBUyxFQUFJLE9BQ2IsRUFBYyxFQUFJLFlBQ2xCLEVBQVksR0FBZSxFQUFNLEVBQUcsS0FBTyxJQUFTLElBQU0sSUFBVyxHQUFLLElBQVcsR0FBSyxJQUFnQixFQUMxRyxFQUFjLEdBQWUsRUFBUSxFQUFHLElBQ3hDLEVBQWMsR0FBZSxFQUFRLEVBQUcsSUFDeEMsRUFBbUIsR0FBZSxFQUFhLEVBQUcsS0FFdEQsTUFBSyxHQUVPLEVBRUEsRUFFQSxFQUVFLEdBREwsR0FBZSxjQUFlLEdBRjlCLEdBQWUsU0FBVSxHQUZ6QixHQUFlLFNBQVUsR0FGekIsR0FBZSxPQUFRLEdBVWxDLEdBQUksSUFBVSxtQkFDVixHQUFXLE9BRWYsWUFBeUIsRUFBTSxDQUM3QixNQUFPLElBQUksSUFBUSxtQkFBb0IsYUFBZ0IsRUFBSyxLQUFPLHNCQUlyRSxZQUFnQyxFQUFJLENBQ2xDLE1BQUksR0FBRyxXQUFhLE1BQ2xCLEdBQUcsU0FBVyxHQUFnQixFQUFHLElBRzVCLEVBQUcsU0FLWixZQUFlLEVBQU0sRUFBTSxDQUN6QixHQUFJLEdBQVUsQ0FDWixHQUFJLEVBQUssR0FDVCxLQUFNLEVBQUssS0FDWCxFQUFHLEVBQUssRUFDUixFQUFHLEVBQUssRUFDUixJQUFLLEVBQUssSUFDVixRQUFTLEVBQUssU0FFaEIsTUFBTyxJQUFJLElBQVMsRUFBUyxHQUFJLEVBQVMsRUFBTSxDQUM5QyxJQUFLLEtBTVQsWUFBbUIsRUFBUyxFQUFHLEVBQUksQ0FFakMsR0FBSSxHQUFXLEVBQVUsRUFBSSxHQUFLLElBRTlCLEVBQUssRUFBRyxPQUFPLEdBRW5CLEdBQUksSUFBTSxFQUNSLE1BQU8sQ0FBQyxFQUFVLEdBSXBCLEdBQWEsR0FBSyxHQUFLLEdBQUssSUFFNUIsR0FBSSxHQUFLLEVBQUcsT0FBTyxHQUVuQixNQUFJLEtBQU8sRUFDRixDQUFDLEVBQVUsR0FJYixDQUFDLEVBQVUsS0FBSyxJQUFJLEVBQUksR0FBTSxHQUFLLElBQU0sS0FBSyxJQUFJLEVBQUksSUFJL0QsWUFBaUIsRUFBSSxFQUFRLENBQzNCLEdBQU0sRUFBUyxHQUFLLElBQ3BCLEdBQUksR0FBSSxHQUFJLE1BQUssR0FDakIsTUFBTyxDQUNMLEtBQU0sRUFBRSxpQkFDUixNQUFPLEVBQUUsY0FBZ0IsRUFDekIsSUFBSyxFQUFFLGFBQ1AsS0FBTSxFQUFFLGNBQ1IsT0FBUSxFQUFFLGdCQUNWLE9BQVEsRUFBRSxnQkFDVixZQUFhLEVBQUUsc0JBS25CLFlBQWlCLEVBQUssRUFBUSxFQUFNLENBQ2xDLE1BQU8sSUFBVSxHQUFhLEdBQU0sRUFBUSxHQUk5QyxZQUFvQixFQUFNLEVBQUssQ0FDN0IsR0FBSSxHQUFPLEVBQUssRUFDWixFQUFPLEVBQUssRUFBRSxLQUFPLEtBQUssTUFBTSxFQUFJLE9BQ3BDLEVBQVEsRUFBSyxFQUFFLE1BQVEsS0FBSyxNQUFNLEVBQUksUUFBVSxLQUFLLE1BQU0sRUFBSSxVQUFZLEVBQzNFLEVBQUksRUFBUyxHQUFJLEVBQUssRUFBRyxDQUMzQixLQUFNLEVBQ04sTUFBTyxFQUNQLElBQUssS0FBSyxJQUFJLEVBQUssRUFBRSxJQUFLLEdBQVksRUFBTSxJQUFVLEtBQUssTUFBTSxFQUFJLE1BQVEsS0FBSyxNQUFNLEVBQUksT0FBUyxJQUVuRyxFQUFjLEdBQVMsV0FBVyxDQUNwQyxNQUFPLEVBQUksTUFBUSxLQUFLLE1BQU0sRUFBSSxPQUNsQyxTQUFVLEVBQUksU0FBVyxLQUFLLE1BQU0sRUFBSSxVQUN4QyxPQUFRLEVBQUksT0FBUyxLQUFLLE1BQU0sRUFBSSxRQUNwQyxNQUFPLEVBQUksTUFBUSxLQUFLLE1BQU0sRUFBSSxPQUNsQyxLQUFNLEVBQUksS0FBTyxLQUFLLE1BQU0sRUFBSSxNQUNoQyxNQUFPLEVBQUksTUFDWCxRQUFTLEVBQUksUUFDYixRQUFTLEVBQUksUUFDYixhQUFjLEVBQUksZUFDakIsR0FBRyxnQkFDRixFQUFVLEdBQWEsR0FFdkIsRUFBYSxHQUFVLEVBQVMsRUFBTSxFQUFLLE1BQzNDLEVBQUssRUFBVyxHQUNoQixFQUFJLEVBQVcsR0FFbkIsTUFBSSxLQUFnQixHQUNsQixJQUFNLEVBRU4sRUFBSSxFQUFLLEtBQUssT0FBTyxJQUdoQixDQUNMLEdBQUksRUFDSixFQUFHLEdBTVAsWUFBNkIsRUFBUSxFQUFZLEVBQU0sRUFBUSxFQUFNLEVBQWdCLENBQ25GLEdBQUksR0FBVSxFQUFLLFFBQ2YsRUFBTyxFQUFLLEtBRWhCLEdBQUksR0FBVSxPQUFPLEtBQUssR0FBUSxTQUFXLEVBQUcsQ0FDOUMsR0FBSSxHQUFxQixHQUFjLEVBQ25DLEVBQU8sR0FBUyxXQUFXLEVBQVEsRUFBUyxHQUFJLEVBQU0sQ0FDeEQsS0FBTSxFQUNOLGVBQWdCLEtBRWxCLE1BQU8sR0FBVSxFQUFPLEVBQUssUUFBUSxPQUVyQyxPQUFPLElBQVMsUUFBUSxHQUFJLElBQVEsYUFBYyxjQUFpQixFQUFPLHdCQUEyQixJQU16RyxZQUFzQixFQUFJLEVBQVEsRUFBUSxDQUN4QyxNQUFJLEtBQVcsUUFDYixHQUFTLElBR0osRUFBRyxRQUFVLEdBQVUsT0FBTyxHQUFPLE9BQU8sU0FBVSxDQUMzRCxPQUFRLEVBQ1IsWUFBYSxLQUNaLHlCQUF5QixFQUFJLEdBQVUsS0FHNUMsWUFBb0IsRUFBRyxFQUFVLENBQy9CLEdBQUksR0FBYSxFQUFFLEVBQUUsS0FBTyxNQUFRLEVBQUUsRUFBRSxLQUFPLEVBQzNDLEVBQUksR0FDUixNQUFJLElBQWMsRUFBRSxFQUFFLE1BQVEsR0FBRyxJQUFLLEtBQ3RDLEdBQUssR0FBUyxFQUFFLEVBQUUsS0FBTSxFQUFhLEVBQUksR0FFekMsQUFBSSxFQUNGLElBQUssSUFDTCxHQUFLLEdBQVMsRUFBRSxFQUFFLE9BQ2xCLEdBQUssSUFDTCxHQUFLLEdBQVMsRUFBRSxFQUFFLE1BRWxCLElBQUssR0FBUyxFQUFFLEVBQUUsT0FDbEIsR0FBSyxHQUFTLEVBQUUsRUFBRSxNQUdiLEVBR1QsWUFBb0IsRUFBRyxFQUFVLEVBQWlCLEVBQXNCLEVBQWUsQ0FDckYsR0FBSSxHQUFJLEdBQVMsRUFBRSxFQUFFLE1BRXJCLE1BQUksR0FDRixJQUFLLElBQ0wsR0FBSyxHQUFTLEVBQUUsRUFBRSxRQUVkLEdBQUUsRUFBRSxTQUFXLEdBQUssQ0FBQyxJQUN2QixJQUFLLE1BR1AsR0FBSyxHQUFTLEVBQUUsRUFBRSxRQUdoQixHQUFFLEVBQUUsU0FBVyxHQUFLLENBQUMsSUFDdkIsSUFBSyxHQUFTLEVBQUUsRUFBRSxRQUVkLEdBQUUsRUFBRSxjQUFnQixHQUFLLENBQUMsSUFDNUIsSUFBSyxJQUNMLEdBQUssR0FBUyxFQUFFLEVBQUUsWUFBYSxLQUkvQixHQUNGLENBQUksRUFBRSxlQUFpQixFQUFFLFNBQVcsRUFDbEMsR0FBSyxJQUNBLEFBQUksRUFBRSxFQUFJLEVBQ2YsSUFBSyxJQUNMLEdBQUssR0FBUyxLQUFLLE1BQU0sQ0FBQyxFQUFFLEVBQUksS0FDaEMsR0FBSyxJQUNMLEdBQUssR0FBUyxLQUFLLE1BQU0sQ0FBQyxFQUFFLEVBQUksTUFFaEMsSUFBSyxJQUNMLEdBQUssR0FBUyxLQUFLLE1BQU0sRUFBRSxFQUFJLEtBQy9CLEdBQUssSUFDTCxHQUFLLEdBQVMsS0FBSyxNQUFNLEVBQUUsRUFBSSxPQUk1QixFQUlULEdBQUksSUFBb0IsQ0FDdEIsTUFBTyxFQUNQLElBQUssRUFDTCxLQUFNLEVBQ04sT0FBUSxFQUNSLE9BQVEsRUFDUixZQUFhLEdBRVgsR0FBd0IsQ0FDMUIsV0FBWSxFQUNaLFFBQVMsRUFDVCxLQUFNLEVBQ04sT0FBUSxFQUNSLE9BQVEsRUFDUixZQUFhLEdBRVgsR0FBMkIsQ0FDN0IsUUFBUyxFQUNULEtBQU0sRUFDTixPQUFRLEVBQ1IsT0FBUSxFQUNSLFlBQWEsR0FHWCxHQUFlLENBQUMsT0FBUSxRQUFTLE1BQU8sT0FBUSxTQUFVLFNBQVUsZUFDcEUsR0FBbUIsQ0FBQyxXQUFZLGFBQWMsVUFBVyxPQUFRLFNBQVUsU0FBVSxlQUNyRixHQUFzQixDQUFDLE9BQVEsVUFBVyxPQUFRLFNBQVUsU0FBVSxlQUUxRSxZQUF1QixFQUFNLENBQzNCLEdBQUksR0FBYSxDQUNmLEtBQU0sT0FDTixNQUFPLE9BQ1AsTUFBTyxRQUNQLE9BQVEsUUFDUixJQUFLLE1BQ0wsS0FBTSxNQUNOLEtBQU0sT0FDTixNQUFPLE9BQ1AsT0FBUSxTQUNSLFFBQVMsU0FDVCxRQUFTLFVBQ1QsU0FBVSxVQUNWLE9BQVEsU0FDUixRQUFTLFNBQ1QsWUFBYSxjQUNiLGFBQWMsY0FDZCxRQUFTLFVBQ1QsU0FBVSxVQUNWLFdBQVksYUFDWixZQUFhLGFBQ2IsWUFBYSxhQUNiLFNBQVUsV0FDVixVQUFXLFdBQ1gsUUFBUyxXQUNULEVBQUssZUFDUCxHQUFJLENBQUMsRUFBWSxLQUFNLElBQUksSUFBaUIsR0FDNUMsTUFBTyxHQVNULFlBQWlCLEVBQUssRUFBTSxDQUMxQixHQUFJLEdBQU8sR0FBYyxFQUFLLEtBQU0sR0FBUyxhQUN6QyxFQUFNLEdBQU8sV0FBVyxHQUN4QixFQUFRLEdBQVMsTUFDakIsRUFBSSxFQUVSLEdBQUssR0FBWSxFQUFJLE1Bc0JuQixFQUFLLE1BdEJxQixDQUMxQixPQUFTLEdBQVksRUFBZ0MsSUFBZSxFQUFPLENBQUUsR0FBUSxLQUFhLE1BQU8sQ0FDdkcsR0FBSSxHQUFJLEVBQU0sTUFFZCxBQUFJLEdBQVksRUFBSSxLQUNsQixHQUFJLEdBQUssR0FBa0IsSUFJL0IsR0FBSSxHQUFVLEdBQXdCLElBQVEsR0FBbUIsR0FFakUsR0FBSSxFQUNGLE1BQU8sSUFBUyxRQUFRLEdBRzFCLEdBQUksR0FBZSxFQUFLLE9BQU8sR0FFM0IsRUFBVyxHQUFRLEVBQUssRUFBYyxHQUUxQyxFQUFLLEVBQVMsR0FDZCxFQUFJLEVBQVMsR0FLZixNQUFPLElBQUksSUFBUyxDQUNsQixHQUFJLEVBQ0osS0FBTSxFQUNOLElBQUssRUFDTCxFQUFHLElBSVAsWUFBc0IsRUFBTyxFQUFLLEVBQU0sQ0FDdEMsR0FBSSxHQUFRLEdBQVksRUFBSyxPQUFTLEdBQU8sRUFBSyxNQUM5QyxFQUFTLFNBQWdCLEVBQUcsRUFBTSxDQUNwQyxFQUFJLEdBQVEsRUFBRyxHQUFTLEVBQUssVUFBWSxFQUFJLEVBQUcsSUFDaEQsR0FBSSxHQUFZLEVBQUksSUFBSSxNQUFNLEdBQU0sYUFBYSxHQUNqRCxNQUFPLEdBQVUsT0FBTyxFQUFHLElBRXpCLEVBQVMsU0FBZ0IsRUFBTSxDQUNqQyxNQUFJLEdBQUssVUFDRixFQUFJLFFBQVEsRUFBTyxHQUVWLEVBREwsRUFBSSxRQUFRLEdBQU0sS0FBSyxFQUFNLFFBQVEsR0FBTyxHQUFNLElBQUksR0FHeEQsRUFBSSxLQUFLLEVBQU8sR0FBTSxJQUFJLElBSXJDLEdBQUksRUFBSyxLQUNQLE1BQU8sR0FBTyxFQUFPLEVBQUssTUFBTyxFQUFLLE1BR3hDLE9BQVMsR0FBYSxFQUFnQyxFQUFLLE9BQVEsRUFBUSxDQUFFLEdBQVMsS0FBYyxNQUFPLENBQ3pHLEdBQUksR0FBTyxFQUFPLE1BQ2QsRUFBUSxFQUFPLEdBRW5CLEdBQUksS0FBSyxJQUFJLElBQVUsRUFDckIsTUFBTyxHQUFPLEVBQU8sR0FJekIsTUFBTyxHQUFPLEVBQVEsRUFBTSxHQUFLLEVBQUcsRUFBSyxNQUFNLEVBQUssTUFBTSxPQUFTLElBR3JFLFlBQWtCLEVBQVMsQ0FDekIsR0FBSSxHQUFPLEdBQ1AsRUFFSixNQUFJLEdBQVEsT0FBUyxHQUFLLE1BQU8sR0FBUSxFQUFRLE9BQVMsSUFBTyxTQUMvRCxHQUFPLEVBQVEsRUFBUSxPQUFTLEdBQ2hDLEVBQU8sTUFBTSxLQUFLLEdBQVMsTUFBTSxFQUFHLEVBQVEsT0FBUyxJQUVyRCxFQUFPLE1BQU0sS0FBSyxHQUdiLENBQUMsRUFBTSxHQXdCaEIsR0FBSSxJQUF3QixVQUFZLENBSXRDLFdBQWtCLEVBQVEsQ0FDeEIsR0FBSSxHQUFPLEVBQU8sTUFBUSxHQUFTLFlBQy9CLEVBQVUsRUFBTyxTQUFZLFFBQU8sTUFBTSxFQUFPLElBQU0sR0FBSSxJQUFRLGlCQUFtQixPQUFVLENBQUMsRUFBSyxRQUFrQyxLQUF4QixHQUFnQixJQUtwSSxLQUFLLEdBQUssR0FBWSxFQUFPLElBQU0sR0FBUyxNQUFRLEVBQU8sR0FDM0QsR0FBSSxHQUFJLEtBQ0osRUFBSSxLQUVSLEdBQUksQ0FBQyxFQUFTLENBQ1osR0FBSSxHQUFZLEVBQU8sS0FBTyxFQUFPLElBQUksS0FBTyxLQUFLLElBQU0sRUFBTyxJQUFJLEtBQUssT0FBTyxHQUVsRixHQUFJLEVBQVcsQ0FDYixHQUFJLEdBQU8sQ0FBQyxFQUFPLElBQUksRUFBRyxFQUFPLElBQUksR0FDckMsRUFBSSxFQUFLLEdBQ1QsRUFBSSxFQUFLLE9BQ0osQ0FDTCxHQUFJLEdBQUssRUFBSyxPQUFPLEtBQUssSUFDMUIsRUFBSSxHQUFRLEtBQUssR0FBSSxHQUNyQixFQUFVLE9BQU8sTUFBTSxFQUFFLE1BQVEsR0FBSSxJQUFRLGlCQUFtQixLQUNoRSxFQUFJLEVBQVUsS0FBTyxFQUNyQixFQUFJLEVBQVUsS0FBTyxHQVF6QixLQUFLLE1BQVEsRUFLYixLQUFLLElBQU0sRUFBTyxLQUFPLEdBQU8sU0FLaEMsS0FBSyxRQUFVLEVBS2YsS0FBSyxTQUFXLEtBS2hCLEtBQUssRUFBSSxFQUtULEtBQUssRUFBSSxFQUtULEtBQUssZ0JBQWtCLEdBWXpCLEVBQVMsSUFBTSxVQUFlLENBQzVCLE1BQU8sSUFBSSxHQUFTLEtBeUJ0QixFQUFTLE1BQVEsVUFBaUIsQ0FDaEMsR0FBSSxHQUFZLEdBQVMsV0FDckIsRUFBTyxFQUFVLEdBQ2pCLEVBQU8sRUFBVSxHQUNqQixFQUFPLEVBQUssR0FDWixFQUFRLEVBQUssR0FDYixFQUFNLEVBQUssR0FDWCxFQUFPLEVBQUssR0FDWixFQUFTLEVBQUssR0FDZCxFQUFTLEVBQUssR0FDZCxFQUFjLEVBQUssR0FFdkIsTUFBTyxJQUFRLENBQ2IsS0FBTSxFQUNOLE1BQU8sRUFDUCxJQUFLLEVBQ0wsS0FBTSxFQUNOLE9BQVEsRUFDUixPQUFRLEVBQ1IsWUFBYSxHQUNaLElBNEJMLEVBQVMsSUFBTSxVQUFlLENBQzVCLEdBQUksR0FBYSxHQUFTLFdBQ3RCLEVBQU8sRUFBVyxHQUNsQixFQUFPLEVBQVcsR0FDbEIsRUFBTyxFQUFLLEdBQ1osRUFBUSxFQUFLLEdBQ2IsRUFBTSxFQUFLLEdBQ1gsRUFBTyxFQUFLLEdBQ1osRUFBUyxFQUFLLEdBQ2QsRUFBUyxFQUFLLEdBQ2QsRUFBYyxFQUFLLEdBRXZCLFNBQUssS0FBTyxHQUFnQixZQUNyQixHQUFRLENBQ2IsS0FBTSxFQUNOLE1BQU8sRUFDUCxJQUFLLEVBQ0wsS0FBTSxFQUNOLE9BQVEsRUFDUixPQUFRLEVBQ1IsWUFBYSxHQUNaLElBV0wsRUFBUyxXQUFhLFNBQW9CLEVBQU0sRUFBUyxDQUN2RCxBQUFJLElBQVksUUFDZCxHQUFVLElBR1osR0FBSSxHQUFLLEVBQU8sR0FBUSxFQUFLLFVBQVksSUFFekMsR0FBSSxPQUFPLE1BQU0sR0FDZixNQUFPLEdBQVMsUUFBUSxpQkFHMUIsR0FBSSxHQUFZLEdBQWMsRUFBUSxLQUFNLEdBQVMsYUFFckQsTUFBSyxHQUFVLFFBSVIsR0FBSSxHQUFTLENBQ2xCLEdBQUksRUFDSixLQUFNLEVBQ04sSUFBSyxHQUFPLFdBQVcsS0FOaEIsRUFBUyxRQUFRLEdBQWdCLEtBcUI1QyxFQUFTLFdBQWEsU0FBb0IsRUFBYyxFQUFTLENBSy9ELEdBSkksSUFBWSxRQUNkLEdBQVUsSUFHUCxFQUFTLEdBRVAsTUFBSSxHQUFlLENBQUMsSUFBWSxFQUFlLEdBRTdDLEVBQVMsUUFBUSwwQkFFakIsR0FBSSxHQUFTLENBQ2xCLEdBQUksRUFDSixLQUFNLEdBQWMsRUFBUSxLQUFNLEdBQVMsYUFDM0MsSUFBSyxHQUFPLFdBQVcsS0FSekIsS0FBTSxJQUFJLElBQXFCLHlEQUEyRCxNQUFPLEdBQWUsZUFBaUIsSUF3QnJJLEVBQVMsWUFBYyxTQUFxQixFQUFTLEVBQVMsQ0FLNUQsR0FKSSxJQUFZLFFBQ2QsR0FBVSxJQUdQLEVBQVMsR0FHWixNQUFPLElBQUksR0FBUyxDQUNsQixHQUFJLEVBQVUsSUFDZCxLQUFNLEdBQWMsRUFBUSxLQUFNLEdBQVMsYUFDM0MsSUFBSyxHQUFPLFdBQVcsS0FMekIsS0FBTSxJQUFJLElBQXFCLDJDQXVDbkMsRUFBUyxXQUFhLFNBQW9CLEVBQUssRUFBTSxDQUNuRCxBQUFJLElBQVMsUUFDWCxHQUFPLElBR1QsRUFBTSxHQUFPLEdBQ2IsR0FBSSxHQUFZLEdBQWMsRUFBSyxLQUFNLEdBQVMsYUFFbEQsR0FBSSxDQUFDLEVBQVUsUUFDYixNQUFPLEdBQVMsUUFBUSxHQUFnQixJQUcxQyxHQUFJLEdBQVEsR0FBUyxNQUNqQixFQUFlLEFBQUMsR0FBWSxFQUFLLGdCQUF3QyxFQUFVLE9BQU8sR0FBdkMsRUFBSyxlQUN4RCxFQUFhLEdBQWdCLEVBQUssSUFDbEMsRUFBa0IsQ0FBQyxHQUFZLEVBQVcsU0FDMUMsRUFBcUIsQ0FBQyxHQUFZLEVBQVcsTUFDN0MsRUFBbUIsQ0FBQyxHQUFZLEVBQVcsUUFBVSxDQUFDLEdBQVksRUFBVyxLQUM3RSxFQUFpQixHQUFzQixFQUN2QyxFQUFrQixFQUFXLFVBQVksRUFBVyxXQUNwRCxFQUFNLEdBQU8sV0FBVyxHQU01QixHQUFLLElBQWtCLElBQW9CLEVBQ3pDLEtBQU0sSUFBSSxHQUE4Qix1RUFHMUMsR0FBSSxHQUFvQixFQUN0QixLQUFNLElBQUksR0FBOEIsMENBRzFDLEdBQUksSUFBYyxHQUFtQixFQUFXLFNBQVcsQ0FBQyxFQUV4RCxHQUNBLEVBQ0EsR0FBUyxHQUFRLEVBQU8sR0FFNUIsQUFBSSxHQUNGLElBQVEsR0FDUixFQUFnQixHQUNoQixHQUFTLEdBQWdCLEtBQ3BCLEFBQUksRUFDVCxJQUFRLEdBQ1IsRUFBZ0IsR0FDaEIsR0FBUyxHQUFtQixLQUU1QixJQUFRLEdBQ1IsRUFBZ0IsSUFNbEIsT0FGSSxJQUFhLEdBRVIsR0FBYSxFQUFnQyxJQUFRLEdBQVEsQ0FBRSxJQUFTLE1BQWMsTUFBTyxDQUNwRyxHQUFJLElBQUksR0FBTyxNQUNYLEdBQUksRUFBVyxJQUVuQixBQUFLLEdBQVksSUFFVixBQUFJLEdBQ1QsRUFBVyxJQUFLLEVBQWMsSUFFOUIsRUFBVyxJQUFLLEdBQU8sSUFKdkIsR0FBYSxHQVNqQixHQUFJLElBQXFCLEdBQWMsR0FBbUIsR0FBYyxFQUFrQixHQUFzQixHQUFjLEdBQXdCLEdBQ2xKLEdBQVUsSUFBc0IsR0FBbUIsR0FFdkQsR0FBSSxHQUNGLE1BQU8sR0FBUyxRQUFRLElBSTFCLEdBQUksSUFBWSxHQUFjLEdBQWdCLEdBQWMsRUFBa0IsR0FBbUIsR0FBYyxFQUMzRyxHQUFZLEdBQVEsR0FBVyxFQUFjLEdBQzdDLEdBQVUsR0FBVSxHQUNwQixHQUFjLEdBQVUsR0FDeEIsR0FBTyxHQUFJLEdBQVMsQ0FDdEIsR0FBSSxHQUNKLEtBQU0sRUFDTixFQUFHLEdBQ0gsSUFBSyxJQUlQLE1BQUksR0FBVyxTQUFXLEdBQWtCLEVBQUksVUFBWSxHQUFLLFFBQ3hELEVBQVMsUUFBUSxxQkFBc0IsdUNBQXlDLEVBQVcsUUFBVSxrQkFBb0IsR0FBSyxTQUdoSSxJQW9CVCxFQUFTLFFBQVUsU0FBaUIsRUFBTSxFQUFNLENBQzlDLEFBQUksSUFBUyxRQUNYLEdBQU8sSUFHVCxHQUFJLEdBQWdCLEdBQWEsR0FDN0IsRUFBTyxFQUFjLEdBQ3JCLEVBQWEsRUFBYyxHQUUvQixNQUFPLElBQW9CLEVBQU0sRUFBWSxFQUFNLFdBQVksSUFrQmpFLEVBQVMsWUFBYyxTQUFxQixFQUFNLEVBQU0sQ0FDdEQsQUFBSSxJQUFTLFFBQ1gsR0FBTyxJQUdULEdBQUksR0FBb0IsR0FBaUIsR0FDckMsRUFBTyxFQUFrQixHQUN6QixFQUFhLEVBQWtCLEdBRW5DLE1BQU8sSUFBb0IsRUFBTSxFQUFZLEVBQU0sV0FBWSxJQW1CakUsRUFBUyxTQUFXLFNBQWtCLEVBQU0sRUFBTSxDQUNoRCxBQUFJLElBQVMsUUFDWCxHQUFPLElBR1QsR0FBSSxHQUFpQixHQUFjLEdBQy9CLEVBQU8sRUFBZSxHQUN0QixFQUFhLEVBQWUsR0FFaEMsTUFBTyxJQUFvQixFQUFNLEVBQVksRUFBTSxPQUFRLElBaUI3RCxFQUFTLFdBQWEsU0FBb0IsRUFBTSxFQUFLLEVBQU0sQ0FLekQsR0FKSSxJQUFTLFFBQ1gsR0FBTyxJQUdMLEdBQVksSUFBUyxHQUFZLEdBQ25DLEtBQU0sSUFBSSxJQUFxQixvREFHakMsR0FBSSxHQUFRLEVBQ1IsRUFBZSxFQUFNLE9BQ3JCLEVBQVMsSUFBaUIsT0FBUyxLQUFPLEVBQzFDLEVBQXdCLEVBQU0sZ0JBQzlCLEVBQWtCLElBQTBCLE9BQVMsS0FBTyxFQUM1RCxFQUFjLEdBQU8sU0FBUyxDQUNoQyxPQUFRLEVBQ1IsZ0JBQWlCLEVBQ2pCLFlBQWEsS0FFWCxFQUFtQixHQUFnQixFQUFhLEVBQU0sR0FDdEQsRUFBTyxFQUFpQixHQUN4QixFQUFhLEVBQWlCLEdBQzlCLEdBQWlCLEVBQWlCLEdBQ2xDLEdBQVUsRUFBaUIsR0FFL0IsTUFBSSxJQUNLLEVBQVMsUUFBUSxJQUVqQixHQUFvQixFQUFNLEVBQVksRUFBTSxVQUFZLEVBQUssRUFBTSxLQVE5RSxFQUFTLFdBQWEsU0FBb0IsRUFBTSxFQUFLLEVBQU0sQ0FDekQsTUFBSSxLQUFTLFFBQ1gsR0FBTyxJQUdGLEVBQVMsV0FBVyxFQUFNLEVBQUssSUF3QnhDLEVBQVMsUUFBVSxTQUFpQixFQUFNLEVBQU0sQ0FDOUMsQUFBSSxJQUFTLFFBQ1gsR0FBTyxJQUdULEdBQUksR0FBWSxHQUFTLEdBQ3JCLEVBQU8sRUFBVSxHQUNqQixFQUFhLEVBQVUsR0FFM0IsTUFBTyxJQUFvQixFQUFNLEVBQVksRUFBTSxNQUFPLElBVTVELEVBQVMsUUFBVSxTQUFpQixFQUFRLEVBQWEsQ0FLdkQsR0FKSSxJQUFnQixRQUNsQixHQUFjLE1BR1osQ0FBQyxFQUNILEtBQU0sSUFBSSxJQUFxQixvREFHakMsR0FBSSxHQUFVLFlBQWtCLElBQVUsRUFBUyxHQUFJLElBQVEsRUFBUSxHQUV2RSxHQUFJLEdBQVMsZUFDWCxLQUFNLElBQUksR0FBcUIsR0FFL0IsTUFBTyxJQUFJLEdBQVMsQ0FDbEIsUUFBUyxLQVdmLEVBQVMsV0FBYSxTQUFvQixFQUFHLENBQzNDLE1BQU8sSUFBSyxFQUFFLGlCQUFtQixJQVluQyxHQUFJLEdBQVMsRUFBUyxVQUV0QixTQUFPLElBQU0sU0FBYSxFQUFNLENBQzlCLE1BQU8sTUFBSyxJQWdCZCxFQUFPLHNCQUF3QixTQUErQixFQUFNLENBQ2xFLEFBQUksSUFBUyxRQUNYLEdBQU8sSUFHVCxHQUFJLEdBQXdCLEdBQVUsT0FBTyxLQUFLLElBQUksTUFBTSxHQUFPLEdBQU0sZ0JBQWdCLE1BQ3JGLEVBQVMsRUFBc0IsT0FDL0IsRUFBa0IsRUFBc0IsZ0JBQ3hDLEVBQVcsRUFBc0IsU0FFckMsTUFBTyxDQUNMLE9BQVEsRUFDUixnQkFBaUIsRUFDakIsZUFBZ0IsSUFjcEIsRUFBTyxNQUFRLFNBQWUsRUFBUSxFQUFNLENBQzFDLE1BQUksS0FBVyxRQUNiLEdBQVMsR0FHUCxJQUFTLFFBQ1gsR0FBTyxJQUdGLEtBQUssUUFBUSxHQUFnQixTQUFTLEdBQVMsSUFVeEQsRUFBTyxRQUFVLFVBQW1CLENBQ2xDLE1BQU8sTUFBSyxRQUFRLEdBQVMsY0FhL0IsRUFBTyxRQUFVLFNBQWlCLEVBQU0sRUFBTyxDQUM3QyxHQUFJLEdBQVEsSUFBVSxPQUFTLEdBQUssRUFDaEMsRUFBc0IsRUFBTSxjQUM1QixFQUFnQixJQUF3QixPQUFTLEdBQVEsRUFDekQsRUFBd0IsRUFBTSxpQkFDOUIsRUFBbUIsSUFBMEIsT0FBUyxHQUFRLEVBSWxFLEdBRkEsRUFBTyxHQUFjLEVBQU0sR0FBUyxhQUVoQyxFQUFLLE9BQU8sS0FBSyxNQUNuQixNQUFPLE1BQ0YsR0FBSyxFQUFLLFFBRVYsQ0FDTCxHQUFJLEdBQVEsS0FBSyxHQUVqQixHQUFJLEdBQWlCLEVBQWtCLENBQ3JDLEdBQUksR0FBYyxFQUFLLE9BQU8sS0FBSyxJQUMvQixFQUFRLEtBQUssV0FFYixFQUFZLEdBQVEsRUFBTyxFQUFhLEdBRTVDLEVBQVEsRUFBVSxHQUdwQixNQUFPLElBQU0sS0FBTSxDQUNqQixHQUFJLEVBQ0osS0FBTSxRQWZSLE9BQU8sR0FBUyxRQUFRLEdBQWdCLEtBMkI1QyxFQUFPLFlBQWMsU0FBcUIsRUFBUSxDQUNoRCxHQUFJLEdBQVEsSUFBVyxPQUFTLEdBQUssRUFDakMsRUFBUyxFQUFNLE9BQ2YsRUFBa0IsRUFBTSxnQkFDeEIsRUFBaUIsRUFBTSxlQUV2QixFQUFNLEtBQUssSUFBSSxNQUFNLENBQ3ZCLE9BQVEsRUFDUixnQkFBaUIsRUFDakIsZUFBZ0IsSUFFbEIsTUFBTyxJQUFNLEtBQU0sQ0FDakIsSUFBSyxLQVdULEVBQU8sVUFBWSxTQUFtQixFQUFRLENBQzVDLE1BQU8sTUFBSyxZQUFZLENBQ3RCLE9BQVEsS0FlWixFQUFPLElBQU0sU0FBYSxFQUFRLENBQ2hDLEdBQUksQ0FBQyxLQUFLLFFBQVMsTUFBTyxNQUMxQixHQUFJLEdBQWEsR0FBZ0IsRUFBUSxJQUNyQyxFQUFtQixDQUFDLEdBQVksRUFBVyxXQUFhLENBQUMsR0FBWSxFQUFXLGFBQWUsQ0FBQyxHQUFZLEVBQVcsU0FDdkgsRUFBa0IsQ0FBQyxHQUFZLEVBQVcsU0FDMUMsRUFBcUIsQ0FBQyxHQUFZLEVBQVcsTUFDN0MsRUFBbUIsQ0FBQyxHQUFZLEVBQVcsUUFBVSxDQUFDLEdBQVksRUFBVyxLQUM3RSxFQUFpQixHQUFzQixFQUN2QyxFQUFrQixFQUFXLFVBQVksRUFBVyxXQUV4RCxHQUFLLElBQWtCLElBQW9CLEVBQ3pDLEtBQU0sSUFBSSxHQUE4Qix1RUFHMUMsR0FBSSxHQUFvQixFQUN0QixLQUFNLElBQUksR0FBOEIsMENBRzFDLEdBQUksR0FFSixBQUFJLEVBQ0YsRUFBUSxHQUFnQixFQUFTLEdBQUksR0FBZ0IsS0FBSyxHQUFJLElBQ3pELEFBQUssR0FBWSxFQUFXLFNBR2pDLEdBQVEsRUFBUyxHQUFJLEtBQUssV0FBWSxHQUdsQyxHQUFZLEVBQVcsTUFDekIsR0FBTSxJQUFNLEtBQUssSUFBSSxHQUFZLEVBQU0sS0FBTSxFQUFNLE9BQVEsRUFBTSxPQU5uRSxFQUFRLEdBQW1CLEVBQVMsR0FBSSxHQUFtQixLQUFLLEdBQUksSUFVdEUsR0FBSSxHQUFZLEdBQVEsRUFBTyxLQUFLLEVBQUcsS0FBSyxNQUN4QyxFQUFLLEVBQVUsR0FDZixFQUFJLEVBQVUsR0FFbEIsTUFBTyxJQUFNLEtBQU0sQ0FDakIsR0FBSSxFQUNKLEVBQUcsS0FrQlAsRUFBTyxLQUFPLFNBQWMsRUFBVSxDQUNwQyxHQUFJLENBQUMsS0FBSyxRQUFTLE1BQU8sTUFDMUIsR0FBSSxHQUFNLEdBQVMsaUJBQWlCLEdBQ3BDLE1BQU8sSUFBTSxLQUFNLEdBQVcsS0FBTSxLQVV0QyxFQUFPLE1BQVEsU0FBZSxFQUFVLENBQ3RDLEdBQUksQ0FBQyxLQUFLLFFBQVMsTUFBTyxNQUMxQixHQUFJLEdBQU0sR0FBUyxpQkFBaUIsR0FBVSxTQUM5QyxNQUFPLElBQU0sS0FBTSxHQUFXLEtBQU0sS0FjdEMsRUFBTyxRQUFVLFNBQWlCLEVBQU0sQ0FDdEMsR0FBSSxDQUFDLEtBQUssUUFBUyxNQUFPLE1BQzFCLEdBQUksR0FBSSxHQUNKLEVBQWlCLEdBQVMsY0FBYyxHQUU1QyxPQUFRLE9BQ0QsUUFDSCxFQUFFLE1BQVEsTUFHUCxlQUNBLFNBQ0gsRUFBRSxJQUFNLE1BR0wsWUFDQSxPQUNILEVBQUUsS0FBTyxNQUdOLFFBQ0gsRUFBRSxPQUFTLE1BR1IsVUFDSCxFQUFFLE9BQVMsTUFHUixVQUNILEVBQUUsWUFBYyxFQUNoQixNQVFKLEdBSkksSUFBbUIsU0FDckIsR0FBRSxRQUFVLEdBR1YsSUFBbUIsV0FBWSxDQUNqQyxHQUFJLEdBQUksS0FBSyxLQUFLLEtBQUssTUFBUSxHQUMvQixFQUFFLE1BQVMsR0FBSSxHQUFLLEVBQUksRUFHMUIsTUFBTyxNQUFLLElBQUksSUFjbEIsRUFBTyxNQUFRLFNBQWUsRUFBTSxDQUNsQyxHQUFJLEdBRUosTUFBTyxNQUFLLFFBQVUsS0FBSyxLQUFNLEdBQWEsR0FBSSxFQUFXLEdBQVEsRUFBRyxJQUFhLFFBQVEsR0FBTSxNQUFNLEdBQUssTUFpQmhILEVBQU8sU0FBVyxTQUFrQixFQUFLLEVBQU0sQ0FDN0MsTUFBSSxLQUFTLFFBQ1gsR0FBTyxJQUdGLEtBQUssUUFBVSxHQUFVLE9BQU8sS0FBSyxJQUFJLGNBQWMsSUFBTyx5QkFBeUIsS0FBTSxHQUFPLElBdUI3RyxFQUFPLGVBQWlCLFNBQXdCLEVBQVksRUFBTSxDQUNoRSxNQUFJLEtBQWUsUUFDakIsR0FBYSxJQUdYLElBQVMsUUFDWCxHQUFPLElBR0YsS0FBSyxRQUFVLEdBQVUsT0FBTyxLQUFLLElBQUksTUFBTSxHQUFPLEdBQVksZUFBZSxNQUFRLElBaUJsRyxFQUFPLGNBQWdCLFNBQXVCLEVBQU0sQ0FDbEQsTUFBSSxLQUFTLFFBQ1gsR0FBTyxJQUdGLEtBQUssUUFBVSxHQUFVLE9BQU8sS0FBSyxJQUFJLE1BQU0sR0FBTyxHQUFNLG9CQUFvQixNQUFRLElBaUJqRyxFQUFPLE1BQVEsU0FBZSxFQUFRLENBQ3BDLEdBQUksR0FBUSxJQUFXLE9BQVMsR0FBSyxFQUNqQyxFQUFlLEVBQU0sT0FDckIsRUFBUyxJQUFpQixPQUFTLFdBQWEsRUFDaEQsRUFBd0IsRUFBTSxnQkFDOUIsRUFBa0IsSUFBMEIsT0FBUyxHQUFRLEVBQzdELEVBQXdCLEVBQU0scUJBQzlCLEVBQXVCLElBQTBCLE9BQVMsR0FBUSxFQUNsRSxFQUFzQixFQUFNLGNBQzVCLEVBQWdCLElBQXdCLE9BQVMsR0FBTyxFQUU1RCxHQUFJLENBQUMsS0FBSyxRQUNSLE1BQU8sTUFHVCxHQUFJLEdBQU0sSUFBVyxXQUVqQixFQUFJLEdBQVcsS0FBTSxHQUV6QixVQUFLLElBQ0wsR0FBSyxHQUFXLEtBQU0sRUFBSyxFQUFpQixFQUFzQixHQUMzRCxHQVlULEVBQU8sVUFBWSxTQUFtQixFQUFRLENBQzVDLEdBQUksR0FBUSxJQUFXLE9BQVMsR0FBSyxFQUNqQyxFQUFlLEVBQU0sT0FDckIsRUFBUyxJQUFpQixPQUFTLFdBQWEsRUFFcEQsTUFBSyxNQUFLLFFBSUgsR0FBVyxLQUFNLElBQVcsWUFIMUIsTUFZWCxFQUFPLGNBQWdCLFVBQXlCLENBQzlDLE1BQU8sSUFBYSxLQUFNLGlCQWtCNUIsRUFBTyxVQUFZLFNBQW1CLEVBQVEsQ0FDNUMsR0FBSSxHQUFRLElBQVcsT0FBUyxHQUFLLEVBQ2pDLEVBQXdCLEVBQU0scUJBQzlCLEVBQXVCLElBQTBCLE9BQVMsR0FBUSxFQUNsRSxFQUF3QixFQUFNLGdCQUM5QixFQUFrQixJQUEwQixPQUFTLEdBQVEsRUFDN0QsRUFBc0IsRUFBTSxjQUM1QixFQUFnQixJQUF3QixPQUFTLEdBQU8sRUFDeEQsRUFBc0IsRUFBTSxjQUM1QixFQUFnQixJQUF3QixPQUFTLEdBQVEsRUFDekQsRUFBZSxFQUFNLE9BQ3JCLEVBQVMsSUFBaUIsT0FBUyxXQUFhLEVBRXBELEdBQUksQ0FBQyxLQUFLLFFBQ1IsTUFBTyxNQUdULEdBQUksSUFBSSxFQUFnQixJQUFNLEdBQzlCLE1BQU8sSUFBSSxHQUFXLEtBQU0sSUFBVyxXQUFZLEVBQWlCLEVBQXNCLElBVTVGLEVBQU8sVUFBWSxVQUFxQixDQUN0QyxNQUFPLElBQWEsS0FBTSxnQ0FBaUMsS0FZN0QsRUFBTyxPQUFTLFVBQWtCLENBQ2hDLE1BQU8sSUFBYSxLQUFLLFFBQVMsb0NBU3BDLEVBQU8sVUFBWSxVQUFxQixDQUN0QyxNQUFLLE1BQUssUUFJSCxHQUFXLEtBQU0sSUFIZixNQWtCWCxFQUFPLFVBQVksU0FBbUIsRUFBUSxDQUM1QyxHQUFJLEdBQVEsSUFBVyxPQUFTLEdBQUssRUFDakMsRUFBc0IsRUFBTSxjQUM1QixFQUFnQixJQUF3QixPQUFTLEdBQU8sRUFDeEQsRUFBb0IsRUFBTSxZQUMxQixFQUFjLElBQXNCLE9BQVMsR0FBUSxFQUVyRCxFQUFNLGVBRVYsTUFBSSxJQUFlLElBQ2pCLElBQU8sSUFFUCxBQUFJLEVBQ0YsR0FBTyxJQUNFLEdBQ1QsSUFBTyxPQUlKLEdBQWEsS0FBTSxFQUFLLEtBZWpDLEVBQU8sTUFBUSxTQUFlLEVBQU0sQ0FLbEMsTUFKSSxLQUFTLFFBQ1gsR0FBTyxJQUdMLEFBQUMsS0FBSyxRQUlILEtBQUssWUFBYyxJQUFNLEtBQUssVUFBVSxHQUh0QyxNQVdYLEVBQU8sU0FBVyxVQUFvQixDQUNwQyxNQUFPLE1BQUssUUFBVSxLQUFLLFFBQVUsSUFRdkMsRUFBTyxRQUFVLFVBQW1CLENBQ2xDLE1BQU8sTUFBSyxZQVFkLEVBQU8sU0FBVyxVQUFvQixDQUNwQyxNQUFPLE1BQUssUUFBVSxLQUFLLEdBQUssS0FRbEMsRUFBTyxVQUFZLFVBQXFCLENBQ3RDLE1BQU8sTUFBSyxRQUFVLEtBQUssR0FBSyxJQUFPLEtBUXpDLEVBQU8sT0FBUyxVQUFrQixDQUNoQyxNQUFPLE1BQUssU0FRZCxFQUFPLE9BQVMsVUFBa0IsQ0FDaEMsTUFBTyxNQUFLLFlBV2QsRUFBTyxTQUFXLFNBQWtCLEVBQU0sQ0FLeEMsR0FKSSxJQUFTLFFBQ1gsR0FBTyxJQUdMLENBQUMsS0FBSyxRQUFTLE1BQU8sR0FFMUIsR0FBSSxHQUFPLEVBQVMsR0FBSSxLQUFLLEdBRTdCLE1BQUksR0FBSyxlQUNQLEdBQUssZUFBaUIsS0FBSyxlQUMzQixFQUFLLGdCQUFrQixLQUFLLElBQUksZ0JBQ2hDLEVBQUssT0FBUyxLQUFLLElBQUksUUFHbEIsR0FRVCxFQUFPLFNBQVcsVUFBb0IsQ0FDcEMsTUFBTyxJQUFJLE1BQUssS0FBSyxRQUFVLEtBQUssR0FBSyxNQW9CM0MsRUFBTyxLQUFPLFNBQWMsRUFBZSxFQUFNLEVBQU0sQ0FTckQsR0FSSSxJQUFTLFFBQ1gsR0FBTyxnQkFHTCxJQUFTLFFBQ1gsR0FBTyxJQUdMLENBQUMsS0FBSyxTQUFXLENBQUMsRUFBYyxRQUNsQyxNQUFPLElBQVMsUUFBUSwwQ0FHMUIsR0FBSSxHQUFVLEVBQVMsQ0FDckIsT0FBUSxLQUFLLE9BQ2IsZ0JBQWlCLEtBQUssaUJBQ3JCLEdBRUMsRUFBUSxHQUFXLEdBQU0sSUFBSSxHQUFTLGVBQ3RDLEVBQWUsRUFBYyxVQUFZLEtBQUssVUFDOUMsRUFBVSxFQUFlLEtBQU8sRUFDaEMsRUFBUSxFQUFlLEVBQWdCLEtBQ3ZDLEVBQVMsR0FBTSxFQUFTLEVBQU8sRUFBTyxHQUUxQyxNQUFPLEdBQWUsRUFBTyxTQUFXLEdBWTFDLEVBQU8sUUFBVSxTQUFpQixFQUFNLEVBQU0sQ0FDNUMsTUFBSSxLQUFTLFFBQ1gsR0FBTyxnQkFHTCxJQUFTLFFBQ1gsR0FBTyxJQUdGLEtBQUssS0FBSyxFQUFTLE1BQU8sRUFBTSxJQVN6QyxFQUFPLE1BQVEsU0FBZSxFQUFlLENBQzNDLE1BQU8sTUFBSyxRQUFVLEdBQVMsY0FBYyxLQUFNLEdBQWlCLE1BYXRFLEVBQU8sUUFBVSxTQUFpQixFQUFlLEVBQU0sQ0FDckQsR0FBSSxDQUFDLEtBQUssUUFBUyxNQUFPLEdBQzFCLEdBQUksR0FBVSxFQUFjLFVBQ3hCLEVBQWlCLEtBQUssUUFBUSxFQUFjLEtBQU0sQ0FDcEQsY0FBZSxLQUVqQixNQUFPLEdBQWUsUUFBUSxJQUFTLEdBQVcsR0FBVyxFQUFlLE1BQU0sSUFXcEYsRUFBTyxPQUFTLFNBQWdCLEVBQU8sQ0FDckMsTUFBTyxNQUFLLFNBQVcsRUFBTSxTQUFXLEtBQUssWUFBYyxFQUFNLFdBQWEsS0FBSyxLQUFLLE9BQU8sRUFBTSxPQUFTLEtBQUssSUFBSSxPQUFPLEVBQU0sTUFzQnRJLEVBQU8sV0FBYSxTQUFvQixFQUFTLENBSy9DLEdBSkksSUFBWSxRQUNkLEdBQVUsSUFHUixDQUFDLEtBQUssUUFBUyxNQUFPLE1BQzFCLEdBQUksR0FBTyxFQUFRLE1BQVEsRUFBUyxXQUFXLEdBQUksQ0FDakQsS0FBTSxLQUFLLE9BRVQsRUFBVSxFQUFRLFFBQVUsS0FBTyxFQUFPLENBQUMsRUFBUSxRQUFVLEVBQVEsUUFBVSxFQUMvRSxFQUFRLENBQUMsUUFBUyxTQUFVLE9BQVEsUUFBUyxVQUFXLFdBQ3hELEVBQU8sRUFBUSxLQUVuQixNQUFJLE9BQU0sUUFBUSxFQUFRLE9BQ3hCLEdBQVEsRUFBUSxLQUNoQixFQUFPLFFBR0YsR0FBYSxFQUFNLEtBQUssS0FBSyxHQUFVLEVBQVMsR0FBSSxFQUFTLENBQ2xFLFFBQVMsU0FDVCxNQUFPLEVBQ1AsS0FBTSxNQWtCVixFQUFPLG1CQUFxQixTQUE0QixFQUFTLENBSy9ELE1BSkksS0FBWSxRQUNkLEdBQVUsSUFHUixBQUFDLEtBQUssUUFDSCxHQUFhLEVBQVEsTUFBUSxFQUFTLFdBQVcsR0FBSSxDQUMxRCxLQUFNLEtBQUssT0FDVCxLQUFNLEVBQVMsR0FBSSxFQUFTLENBQzlCLFFBQVMsT0FDVCxNQUFPLENBQUMsUUFBUyxTQUFVLFFBQzNCLFVBQVcsTUFOYSxNQWdCNUIsRUFBUyxJQUFNLFVBQWUsQ0FDNUIsT0FBUyxHQUFPLFVBQVUsT0FBUSxFQUFZLEdBQUksT0FBTSxHQUFPLEVBQU8sRUFBRyxFQUFPLEVBQU0sSUFDcEYsRUFBVSxHQUFRLFVBQVUsR0FHOUIsR0FBSSxDQUFDLEVBQVUsTUFBTSxFQUFTLFlBQzVCLEtBQU0sSUFBSSxJQUFxQiwyQ0FHakMsTUFBTyxHQUFPLEVBQVcsU0FBVSxFQUFHLENBQ3BDLE1BQU8sR0FBRSxXQUNSLEtBQUssTUFTVixFQUFTLElBQU0sVUFBZSxDQUM1QixPQUFTLEdBQVEsVUFBVSxPQUFRLEVBQVksR0FBSSxPQUFNLEdBQVEsRUFBUSxFQUFHLEVBQVEsRUFBTyxJQUN6RixFQUFVLEdBQVMsVUFBVSxHQUcvQixHQUFJLENBQUMsRUFBVSxNQUFNLEVBQVMsWUFDNUIsS0FBTSxJQUFJLElBQXFCLDJDQUdqQyxNQUFPLEdBQU8sRUFBVyxTQUFVLEVBQUcsQ0FDcEMsTUFBTyxHQUFFLFdBQ1IsS0FBSyxNQVlWLEVBQVMsa0JBQW9CLFNBQTJCLEVBQU0sRUFBSyxFQUFTLENBQzFFLEFBQUksSUFBWSxRQUNkLEdBQVUsSUFHWixHQUFJLEdBQVcsRUFDWCxFQUFrQixFQUFTLE9BQzNCLEVBQVMsSUFBb0IsT0FBUyxLQUFPLEVBQzdDLEVBQXdCLEVBQVMsZ0JBQ2pDLEVBQWtCLElBQTBCLE9BQVMsS0FBTyxFQUM1RCxFQUFjLEdBQU8sU0FBUyxDQUNoQyxPQUFRLEVBQ1IsZ0JBQWlCLEVBQ2pCLFlBQWEsS0FFZixNQUFPLElBQWtCLEVBQWEsRUFBTSxJQU85QyxFQUFTLGtCQUFvQixTQUEyQixFQUFNLEVBQUssRUFBUyxDQUMxRSxNQUFJLEtBQVksUUFDZCxHQUFVLElBR0wsRUFBUyxrQkFBa0IsRUFBTSxFQUFLLElBUy9DLEVBQWEsRUFBVSxDQUFDLENBQ3RCLElBQUssVUFDTCxJQUFLLFVBQWUsQ0FDbEIsTUFBTyxNQUFLLFVBQVksT0FPekIsQ0FDRCxJQUFLLGdCQUNMLElBQUssVUFBZSxDQUNsQixNQUFPLE1BQUssUUFBVSxLQUFLLFFBQVEsT0FBUyxPQU83QyxDQUNELElBQUsscUJBQ0wsSUFBSyxVQUFlLENBQ2xCLE1BQU8sTUFBSyxRQUFVLEtBQUssUUFBUSxZQUFjLE9BUWxELENBQ0QsSUFBSyxTQUNMLElBQUssVUFBZSxDQUNsQixNQUFPLE1BQUssUUFBVSxLQUFLLElBQUksT0FBUyxPQVF6QyxDQUNELElBQUssa0JBQ0wsSUFBSyxVQUFlLENBQ2xCLE1BQU8sTUFBSyxRQUFVLEtBQUssSUFBSSxnQkFBa0IsT0FRbEQsQ0FDRCxJQUFLLGlCQUNMLElBQUssVUFBZSxDQUNsQixNQUFPLE1BQUssUUFBVSxLQUFLLElBQUksZUFBaUIsT0FPakQsQ0FDRCxJQUFLLE9BQ0wsSUFBSyxVQUFlLENBQ2xCLE1BQU8sTUFBSyxRQU9iLENBQ0QsSUFBSyxXQUNMLElBQUssVUFBZSxDQUNsQixNQUFPLE1BQUssUUFBVSxLQUFLLEtBQUssS0FBTyxPQVF4QyxDQUNELElBQUssT0FDTCxJQUFLLFVBQWUsQ0FDbEIsTUFBTyxNQUFLLFFBQVUsS0FBSyxFQUFFLEtBQU8sTUFRckMsQ0FDRCxJQUFLLFVBQ0wsSUFBSyxVQUFlLENBQ2xCLE1BQU8sTUFBSyxRQUFVLEtBQUssS0FBSyxLQUFLLEVBQUUsTUFBUSxHQUFLLE1BUXJELENBQ0QsSUFBSyxRQUNMLElBQUssVUFBZSxDQUNsQixNQUFPLE1BQUssUUFBVSxLQUFLLEVBQUUsTUFBUSxNQVF0QyxDQUNELElBQUssTUFDTCxJQUFLLFVBQWUsQ0FDbEIsTUFBTyxNQUFLLFFBQVUsS0FBSyxFQUFFLElBQU0sTUFRcEMsQ0FDRCxJQUFLLE9BQ0wsSUFBSyxVQUFlLENBQ2xCLE1BQU8sTUFBSyxRQUFVLEtBQUssRUFBRSxLQUFPLE1BUXJDLENBQ0QsSUFBSyxTQUNMLElBQUssVUFBZSxDQUNsQixNQUFPLE1BQUssUUFBVSxLQUFLLEVBQUUsT0FBUyxNQVF2QyxDQUNELElBQUssU0FDTCxJQUFLLFVBQWUsQ0FDbEIsTUFBTyxNQUFLLFFBQVUsS0FBSyxFQUFFLE9BQVMsTUFRdkMsQ0FDRCxJQUFLLGNBQ0wsSUFBSyxVQUFlLENBQ2xCLE1BQU8sTUFBSyxRQUFVLEtBQUssRUFBRSxZQUFjLE1BUzVDLENBQ0QsSUFBSyxXQUNMLElBQUssVUFBZSxDQUNsQixNQUFPLE1BQUssUUFBVSxHQUF1QixNQUFNLFNBQVcsTUFTL0QsQ0FDRCxJQUFLLGFBQ0wsSUFBSyxVQUFlLENBQ2xCLE1BQU8sTUFBSyxRQUFVLEdBQXVCLE1BQU0sV0FBYSxNQVVqRSxDQUNELElBQUssVUFDTCxJQUFLLFVBQWUsQ0FDbEIsTUFBTyxNQUFLLFFBQVUsR0FBdUIsTUFBTSxRQUFVLE1BUTlELENBQ0QsSUFBSyxVQUNMLElBQUssVUFBZSxDQUNsQixNQUFPLE1BQUssUUFBVSxHQUFtQixLQUFLLEdBQUcsUUFBVSxNQVM1RCxDQUNELElBQUssYUFDTCxJQUFLLFVBQWUsQ0FDbEIsTUFBTyxNQUFLLFFBQVUsR0FBSyxPQUFPLFFBQVMsQ0FDekMsT0FBUSxLQUFLLE1BQ1osS0FBSyxNQUFRLEdBQUssT0FTdEIsQ0FDRCxJQUFLLFlBQ0wsSUFBSyxVQUFlLENBQ2xCLE1BQU8sTUFBSyxRQUFVLEdBQUssT0FBTyxPQUFRLENBQ3hDLE9BQVEsS0FBSyxNQUNaLEtBQUssTUFBUSxHQUFLLE9BU3RCLENBQ0QsSUFBSyxlQUNMLElBQUssVUFBZSxDQUNsQixNQUFPLE1BQUssUUFBVSxHQUFLLFNBQVMsUUFBUyxDQUMzQyxPQUFRLEtBQUssTUFDWixLQUFLLFFBQVUsR0FBSyxPQVN4QixDQUNELElBQUssY0FDTCxJQUFLLFVBQWUsQ0FDbEIsTUFBTyxNQUFLLFFBQVUsR0FBSyxTQUFTLE9BQVEsQ0FDMUMsT0FBUSxLQUFLLE1BQ1osS0FBSyxRQUFVLEdBQUssT0FTeEIsQ0FDRCxJQUFLLFNBQ0wsSUFBSyxVQUFlLENBQ2xCLE1BQU8sTUFBSyxRQUFVLENBQUMsS0FBSyxFQUFJLE1BUWpDLENBQ0QsSUFBSyxrQkFDTCxJQUFLLFVBQWUsQ0FDbEIsTUFBSSxNQUFLLFFBQ0EsS0FBSyxLQUFLLFdBQVcsS0FBSyxHQUFJLENBQ25DLE9BQVEsUUFDUixPQUFRLEtBQUssU0FHUixPQVNWLENBQ0QsSUFBSyxpQkFDTCxJQUFLLFVBQWUsQ0FDbEIsTUFBSSxNQUFLLFFBQ0EsS0FBSyxLQUFLLFdBQVcsS0FBSyxHQUFJLENBQ25DLE9BQVEsT0FDUixPQUFRLEtBQUssU0FHUixPQVFWLENBQ0QsSUFBSyxnQkFDTCxJQUFLLFVBQWUsQ0FDbEIsTUFBTyxNQUFLLFFBQVUsS0FBSyxLQUFLLFlBQWMsT0FPL0MsQ0FDRCxJQUFLLFVBQ0wsSUFBSyxVQUFlLENBQ2xCLE1BQUksTUFBSyxjQUNBLEdBRUEsS0FBSyxPQUFTLEtBQUssSUFBSSxDQUM1QixNQUFPLElBQ04sUUFBVSxLQUFLLE9BQVMsS0FBSyxJQUFJLENBQ2xDLE1BQU8sSUFDTixTQVVOLENBQ0QsSUFBSyxlQUNMLElBQUssVUFBZSxDQUNsQixNQUFPLElBQVcsS0FBSyxRQVN4QixDQUNELElBQUssY0FDTCxJQUFLLFVBQWUsQ0FDbEIsTUFBTyxJQUFZLEtBQUssS0FBTSxLQUFLLFNBU3BDLENBQ0QsSUFBSyxhQUNMLElBQUssVUFBZSxDQUNsQixNQUFPLE1BQUssUUFBVSxHQUFXLEtBQUssTUFBUSxNQVUvQyxDQUNELElBQUssa0JBQ0wsSUFBSyxVQUFlLENBQ2xCLE1BQU8sTUFBSyxRQUFVLEdBQWdCLEtBQUssVUFBWSxPQUV2RCxDQUFDLENBQ0gsSUFBSyxhQUNMLElBQUssVUFBZSxDQUNsQixNQUFPLE1BT1IsQ0FDRCxJQUFLLFdBQ0wsSUFBSyxVQUFlLENBQ2xCLE1BQU8sTUFPUixDQUNELElBQUssd0JBQ0wsSUFBSyxVQUFlLENBQ2xCLE1BQU8sTUFPUixDQUNELElBQUssWUFDTCxJQUFLLFVBQWUsQ0FDbEIsTUFBTyxNQU9SLENBQ0QsSUFBSyxZQUNMLElBQUssVUFBZSxDQUNsQixNQUFPLE1BT1IsQ0FDRCxJQUFLLGNBQ0wsSUFBSyxVQUFlLENBQ2xCLE1BQU8sTUFPUixDQUNELElBQUssb0JBQ0wsSUFBSyxVQUFlLENBQ2xCLE1BQU8sTUFPUixDQUNELElBQUsseUJBQ0wsSUFBSyxVQUFlLENBQ2xCLE1BQU8sTUFPUixDQUNELElBQUssd0JBQ0wsSUFBSyxVQUFlLENBQ2xCLE1BQU8sTUFPUixDQUNELElBQUssaUJBQ0wsSUFBSyxVQUFlLENBQ2xCLE1BQU8sTUFPUixDQUNELElBQUssdUJBQ0wsSUFBSyxVQUFlLENBQ2xCLE1BQU8sTUFPUixDQUNELElBQUssNEJBQ0wsSUFBSyxVQUFlLENBQ2xCLE1BQU8sTUFPUixDQUNELElBQUssMkJBQ0wsSUFBSyxVQUFlLENBQ2xCLE1BQU8sTUFPUixDQUNELElBQUssaUJBQ0wsSUFBSyxVQUFlLENBQ2xCLE1BQU8sTUFPUixDQUNELElBQUssOEJBQ0wsSUFBSyxVQUFlLENBQ2xCLE1BQU8sTUFPUixDQUNELElBQUssZUFDTCxJQUFLLFVBQWUsQ0FDbEIsTUFBTyxNQU9SLENBQ0QsSUFBSyw0QkFDTCxJQUFLLFVBQWUsQ0FDbEIsTUFBTyxNQU9SLENBQ0QsSUFBSyw0QkFDTCxJQUFLLFVBQWUsQ0FDbEIsTUFBTyxNQU9SLENBQ0QsSUFBSyxnQkFDTCxJQUFLLFVBQWUsQ0FDbEIsTUFBTyxNQU9SLENBQ0QsSUFBSyw2QkFDTCxJQUFLLFVBQWUsQ0FDbEIsTUFBTyxNQU9SLENBQ0QsSUFBSyxnQkFDTCxJQUFLLFVBQWUsQ0FDbEIsTUFBTyxNQU9SLENBQ0QsSUFBSyw2QkFDTCxJQUFLLFVBQWUsQ0FDbEIsTUFBTyxRQUlKLEtBRVQsWUFBMEIsRUFBYSxDQUNyQyxHQUFJLEdBQVMsV0FBVyxHQUN0QixNQUFPLEdBQ0YsR0FBSSxHQUFlLEVBQVksU0FBVyxFQUFTLEVBQVksV0FDcEUsTUFBTyxJQUFTLFdBQVcsR0FDdEIsR0FBSSxHQUFlLE1BQU8sSUFBZ0IsU0FDL0MsTUFBTyxJQUFTLFdBQVcsR0FFM0IsS0FBTSxJQUFJLElBQXFCLDhCQUFnQyxFQUFjLGFBQWUsTUFBTyxJQUl2RyxHQUFJLElBQVUsUUFFZCxXQUFtQixHQUNuQixXQUFtQixHQUNuQixrQkFBMEIsR0FDMUIsV0FBbUIsR0FDbkIsT0FBZSxHQUNmLFdBQW1CLEdBQ25CLGNBQXNCLEdBQ3RCLFdBQW1CLEdBQ25CLGFBQXFCLEdBQ3JCLFVBQWtCLEdBQ2xCLE9BQWUsaUJDcnhRaUIsRUFBYyxPQUNyQ0MsYUFBUyxZQUFZLGVBU0MsRUFBWSxFQUFzQixNQUN6RCxHQUFzQkMsWUFBUyxXQUFXLEdBQzdDLGVBQWVBLFlBQVMsYUFDeEIsUUFBUSxNQUFPLE9BQ2QsTUFDSSxHQUFlQSxZQUFTLFdBQVcsRUFBTSxDQUFFLGVBRS9DLENBQUMsRUFBYSxZQUNBLGdCQUFrQixvQkFBc0IsQ0FBQyxHQUVoRCxFQUVGLEVBQWEsZUFBZUEsWUFBUyxhQUFhLFFBQVEsTUFBTyxVQUNqRSxTQUNBLGdCQTBCZ0MsRUFBdUIsSUFDNUQsQ0FBQyxHQUFRLENBQUMsR0FBZ0IsU0FDckIsUUFFSCxHQUFLQSxZQUFTLE1BQ2QsRUFBTUEsWUFBUyxNQUFNLFFBQVEsRUFBTSxDQUFFLGNBQWUsV0FDbkQsR0FBRyxLQUFLLEdBQUsseUJBT3lCLEVBQXVCLE9BQ2hFLENBQUMsR0FBUSxDQUFDLEdBQWdCLEdBQ3JCQSxZQUFTLE1BQU0sZ0JBR2pCLEFBRElBLFlBQVMsTUFBTSxRQUFRLEdBQ3hCLDRCQVNzQixFQUFZLEVBQXVCLE9BRTVELEFBRFcsR0FBSyxVQUNKLEdBQTJCLEdDdEVoRCxLQUFNLElBQTRCLGVBR2hDLEVBQ0EsRUFDTSxHQUVDLFFBQVEsQUFBQyxHQUFVLEdBQ1osRUFBTSxJQUFNLENBQ3RCLFNBQVUsRUFBTyxPQUFPLEFBQUMsR0FFckIsRUFBTSxLQUFPLEVBQU0sSUFDbkIsRUFBTSxLQUFLLFdBQWEsRUFBTSxLQUFLLFVBQ25DLEVBQU0sS0FBSyxTQUFXLEVBQU0sS0FBSyxZQUdyQyxPQUFRLEVBQ1IsY0FBZSxvQkFNbkIsRUFDQSxFQUNNLE1BQ0EsR0FBb0IsRUFBWSxFQUFNLElBQUksWUFHNUMsRUFBa0IsU0FBVyxFQUFHLEdBQzVCLHFCQUF1QixJQUN2QixzQkFBd0IsY0FLMUIsR0FBZ0IsRUFBWSxFQUFNLElBQUksY0FHMUMsQ0FBQyxDQUFDLEdBQ0YsRUFBa0IsT0FDaEIsQUFBQyxHQUNDLEVBQU0sS0FBSyxTQUFXLEVBQU0sS0FBSyxZQUNqQyxFQUFpQixLQUFLLFNBQVcsRUFBaUIsS0FBSyxZQUN6RCxTQUFXLElBSVAscUJBQXVCLEVBQUksRUFBYyx1QkFFekMscUJBQXVCLEdBQW9CLEVBQU8sS0FJcEQsc0JBQXdCLEVBQVksRUFBTSxJQUFJLFNBSzlDLHFCQUF1QixFQUFZLEVBQU0sSUFBSSxjQUM5QyxFQUFZLEVBQU0sSUFBSSxjQUN2QixFQUFNLHVCQUlRLFFBQVEsQUFBQyxHQUFxQixDQUU1QyxDQUFDLEdBQ0QsRUFBaUIsS0FBSyxXQUFhLEVBQWMsS0FBSyxZQUUxQyxFQUFpQixJQUFJLFFBQVUsRUFBTSx1QkFDckMsRUFBaUIsSUFBSSxjQUFnQixLQUlyQyxFQUFpQixJQUFJLGNBQy9CLEVBQU0sd0JBS2QsWUFDRSxFQUNBLEVBQ1EsTUFDRixHQUFtQixLQUFLLFFBQ3JCLEtBQUssU0FBVyxFQUFNLEtBQUssZ0JBQzFCLEtBSUosRUFBYSxHQUFJLE9BQU0sR0FBa0IsS0FBSyxZQUVsQyxRQUFRLEFBQUMsR0FBcUIsSUFFMUMsR0FBWSxLQUNaLEVBQU0sS0FBSyxZQUFjLEVBQWlCLEtBQUssV0FBWSxNQUN2RCxHQUFpQixLQUFLLFFBQ1IsS0FBSyxXQUFhLEVBQU0sS0FBSyxnQkFDdkMsT0FHRSxLQUFLLElBQUksS0FBSyxJQUFJLEVBQUcsR0FBaUIsRUFBVyxPQUFTLE1BR3BFLEdBQVUsRUFBVyxPQUFTLEtBQzlCLEVBQU0sS0FBSyxVQUFZLEVBQWlCLEtBQUssU0FBVSxNQUNuRCxHQUFlLEtBQUssS0FDeEIsS0FBSyxJQUFJLEVBQWlCLEtBQUssU0FBVyxFQUFNLEtBQUssY0FDN0MsT0FHQSxLQUFLLElBQUksRUFBVyxFQUFXLE9BQVMsRUFBZSxVQUkxRCxHQUFJLEVBQVcsR0FBSyxFQUFTLE1BQ3pCLE9BS1IsRUFBSSxLQUFLLElBQUksR0FBRyxHQ25JekIsWUFBNkIsRUFBc0IscUJBQzNCLEdBQU0sTUFBUSxZQUFjLEdBQU0sS0FTakQsQUFKTCxJQUFJLE1BQUssRUFBTSxLQUFLLFdBQWEsS0FBTSxVQUN2QyxHQUFJLE1BQ0YsR0FBSSxNQUFLLEVBQU0sS0FBSyxXQUFhLEtBQU0sU0FBUyxFQUFHLEVBQUcsRUFBRyxJQUN6RCxXQUNXLElBUk4sRUFXWCxZQUEyQixFQUFzQixJQUMzQyxnQkFBa0IsR0FBTSxNQUFRLFlBQWMsR0FBTSxZQUMvQyxNQUdMLEdBQ0YsR0FBSSxNQUFLLEVBQU0sS0FBSyxXQUFhLEtBQU0sVUFDdkMsR0FBSSxNQUNGLEdBQUksTUFBSyxFQUFNLEtBQUssV0FBYSxLQUFNLFNBQVMsRUFBRyxFQUFHLEVBQUcsSUFDekQsWUFFSSxFQUFRLE9BQ1osR0FDRixHQUFJLE1BQUssRUFBTSxLQUFLLFNBQVcsS0FBTSxVQUNyQyxHQUFJLE1BQUssRUFBTSxLQUFLLFdBQWEsS0FBTSxtQkFFL0IsRUFBVSxJQUViLEVBQVEsMEJDakNqQiwyTEFFQSxBQUFDLFVBQVUsRUFBUSxFQUFTLENBQ3FDLFVBQWlCLE1BR2hGQyxHQUFNLFVBQVksQ0FFbEIsV0FBNEIsRUFBSyxDQUFFLEdBQUksTUFBTSxRQUFRLEdBQU0sQ0FBRSxPQUFTLEdBQUksRUFBRyxHQUFPLE1BQU0sRUFBSSxRQUFTLEVBQUksRUFBSSxPQUFRLElBQU8sR0FBSyxHQUFLLEVBQUksR0FBTSxNQUFPLFFBQWUsT0FBTyxPQUFNLEtBQUssR0FFMUwsR0FBSSxHQUFpQixPQUFPLGVBQ3hCLEVBQWlCLE9BQU8sZUFDeEIsRUFBVyxPQUFPLFNBQ2xCLEVBQWlCLE9BQU8sZUFDeEIsRUFBMkIsT0FBTyx5QkFDbEMsRUFBUyxPQUFPLE9BQ2hCLEVBQU8sT0FBTyxLQUNkLEVBQVMsT0FBTyxPQUVoQixFQUFPLE1BQU8sVUFBWSxhQUFlLFFBQ3pDLEVBQVEsRUFBSyxNQUNiLEVBQVksRUFBSyxVQUVyQixBQUFLLEdBQ0gsR0FBUSxTQUFlLEVBQUssR0FBVyxFQUFNLENBQzNDLE1BQU8sR0FBSSxNQUFNLEdBQVcsS0FJM0IsR0FDSCxHQUFTLFNBQWdCLEVBQUcsQ0FDMUIsTUFBTyxLQUlOLEdBQ0gsR0FBTyxTQUFjLEVBQUcsQ0FDdEIsTUFBTyxLQUlOLEdBQ0gsR0FBWSxTQUFtQixFQUFNLEdBQU0sQ0FDekMsTUFBTyxJQUFLLFVBQVMsVUFBVSxLQUFLLE1BQU0sRUFBTSxDQUFDLE1BQU0sT0FBTyxFQUFtQixTQUlyRixHQUFJLEdBQWUsRUFBUSxNQUFNLFVBQVUsU0FDdkMsRUFBVyxFQUFRLE1BQU0sVUFBVSxLQUNuQyxFQUFZLEVBQVEsTUFBTSxVQUFVLE1BRXBDLEVBQW9CLEVBQVEsT0FBTyxVQUFVLGFBQzdDLEdBQWMsRUFBUSxPQUFPLFVBQVUsT0FDdkMsR0FBZ0IsRUFBUSxPQUFPLFVBQVUsU0FDekMsRUFBZ0IsRUFBUSxPQUFPLFVBQVUsU0FDekMsR0FBYSxFQUFRLE9BQU8sVUFBVSxNQUV0QyxHQUFhLEVBQVEsT0FBTyxVQUFVLE1BRXRDLEdBQWtCLEdBQVksV0FFbEMsV0FBaUIsRUFBTSxDQUNyQixNQUFPLFVBQVUsRUFBUyxDQUN4QixPQUFTLElBQU8sVUFBVSxPQUFRLEVBQU8sTUFBTSxHQUFPLEVBQUksR0FBTyxFQUFJLEdBQUksRUFBTyxFQUFHLEVBQU8sR0FBTSxJQUM5RixFQUFLLEVBQU8sR0FBSyxVQUFVLEdBRzdCLE1BQU8sR0FBTSxFQUFNLEVBQVMsSUFJaEMsWUFBcUIsRUFBTSxDQUN6QixNQUFPLFdBQVksQ0FDakIsT0FBUyxHQUFRLFVBQVUsT0FBUSxHQUFPLE1BQU0sR0FBUSxFQUFRLEVBQUcsRUFBUSxFQUFPLElBQ2hGLEdBQUssR0FBUyxVQUFVLEdBRzFCLE1BQU8sR0FBVSxFQUFNLEtBSzNCLFdBQWtCLEVBQUssRUFBTyxDQUM1QixBQUFJLEdBSUYsRUFBZSxFQUFLLE1BSXRCLE9BREksSUFBSSxFQUFNLE9BQ1AsTUFBSyxDQUNWLEdBQUksR0FBVSxFQUFNLElBQ3BCLEdBQUksTUFBTyxJQUFZLFNBQVUsQ0FDL0IsR0FBSSxHQUFZLEVBQWtCLEdBQ2xDLEFBQUksSUFBYyxHQUVYLEdBQVMsSUFDWixHQUFNLElBQUssR0FHYixFQUFVLEdBSWQsRUFBSSxHQUFXLEdBR2pCLE1BQU8sR0FJVCxZQUFlLEVBQVEsQ0FDckIsR0FBSSxHQUFZLEVBQU8sTUFFbkIsR0FBVyxPQUNmLElBQUssS0FBWSxHQUNmLEFBQUksRUFBTSxFQUFnQixFQUFRLENBQUMsTUFDakMsR0FBVSxJQUFZLEVBQU8sS0FJakMsTUFBTyxHQU9ULFlBQXNCLEVBQVEsRUFBTSxDQUNsQyxLQUFPLElBQVcsTUFBTSxDQUN0QixHQUFJLElBQU8sRUFBeUIsRUFBUSxHQUM1QyxHQUFJLEdBQU0sQ0FDUixHQUFJLEdBQUssSUFDUCxNQUFPLEdBQVEsR0FBSyxLQUd0QixHQUFJLE1BQU8sSUFBSyxPQUFVLFdBQ3hCLE1BQU8sR0FBUSxHQUFLLE9BSXhCLEVBQVMsRUFBZSxHQUcxQixXQUF1QixFQUFTLENBQzlCLGVBQVEsS0FBSyxxQkFBc0IsR0FDNUIsS0FHVCxNQUFPLEdBR1QsR0FBSSxJQUFPLEVBQU8sQ0FBQyxJQUFLLE9BQVEsVUFBVyxVQUFXLE9BQVEsVUFBVyxRQUFTLFFBQVMsSUFBSyxNQUFPLE1BQU8sTUFBTyxRQUFTLGFBQWMsT0FBUSxLQUFNLFNBQVUsU0FBVSxVQUFXLFNBQVUsT0FBUSxPQUFRLE1BQU8sV0FBWSxVQUFXLE9BQVEsV0FBWSxLQUFNLFlBQWEsTUFBTyxVQUFXLE1BQU8sU0FBVSxNQUFPLE1BQU8sS0FBTSxLQUFNLFVBQVcsS0FBTSxXQUFZLGFBQWMsU0FBVSxPQUFRLFNBQVUsT0FBUSxLQUFNLEtBQU0sS0FBTSxLQUFNLEtBQU0sS0FBTSxPQUFRLFNBQVUsU0FBVSxLQUFNLE9BQVEsSUFBSyxNQUFPLFFBQVMsTUFBTyxNQUFPLFFBQVMsU0FBVSxLQUFNLE9BQVEsTUFBTyxPQUFRLFVBQVcsT0FBUSxXQUFZLFFBQVMsTUFBTyxPQUFRLEtBQU0sV0FBWSxTQUFVLFNBQVUsSUFBSyxVQUFXLE1BQU8sV0FBWSxJQUFLLEtBQU0sS0FBTSxPQUFRLElBQUssT0FBUSxVQUFXLFNBQVUsU0FBVSxRQUFTLFNBQVUsU0FBVSxPQUFRLFNBQVUsU0FBVSxRQUFTLE1BQU8sVUFBVyxNQUFPLFFBQVMsUUFBUyxLQUFNLFdBQVksV0FBWSxRQUFTLEtBQU0sUUFBUyxPQUFRLEtBQU0sUUFBUyxLQUFNLElBQUssS0FBTSxNQUFPLFFBQVMsUUFHaitCLEdBQU0sRUFBTyxDQUFDLE1BQU8sSUFBSyxXQUFZLGNBQWUsZUFBZ0IsZUFBZ0IsZ0JBQWlCLG1CQUFvQixTQUFVLFdBQVksT0FBUSxPQUFRLFVBQVcsU0FBVSxPQUFRLElBQUssUUFBUyxXQUFZLFFBQVMsUUFBUyxPQUFRLGlCQUFrQixTQUFVLE9BQVEsV0FBWSxRQUFTLE9BQVEsVUFBVyxVQUFXLFdBQVksaUJBQWtCLE9BQVEsT0FBUSxRQUFTLFNBQVUsU0FBVSxPQUFRLFdBQVksUUFBUyxPQUFRLFFBQVMsT0FBUSxVQUV6YyxHQUFhLEVBQU8sQ0FBQyxVQUFXLGdCQUFpQixzQkFBdUIsY0FBZSxtQkFBb0Isb0JBQXFCLG9CQUFxQixpQkFBa0IsVUFBVyxVQUFXLFVBQVcsVUFBVyxVQUFXLGlCQUFrQixVQUFXLFVBQVcsY0FBZSxlQUFnQixXQUFZLGVBQWdCLHFCQUFzQixjQUFlLFNBQVUsaUJBTWhYLEdBQWdCLEVBQU8sQ0FBQyxVQUFXLGdCQUFpQixTQUFVLFVBQVcsZUFBZ0IsWUFBYSxtQkFBb0IsaUJBQWtCLGdCQUFpQixnQkFBaUIsZ0JBQWlCLFFBQVMsWUFBYSxPQUFRLGVBQWdCLFlBQWEsVUFBVyxnQkFBaUIsU0FBVSxNQUFPLGFBQWMsVUFBVyxRQUVoVSxHQUFTLEVBQU8sQ0FBQyxPQUFRLFdBQVksU0FBVSxVQUFXLFFBQVMsU0FBVSxLQUFNLGFBQWMsZ0JBQWlCLEtBQU0sS0FBTSxRQUFTLFVBQVcsV0FBWSxRQUFTLE9BQVEsS0FBTSxTQUFVLFFBQVMsU0FBVSxPQUFRLE9BQVEsVUFBVyxTQUFVLE1BQU8sUUFBUyxNQUFPLFNBQVUsZUFJeFIsR0FBbUIsRUFBTyxDQUFDLFVBQVcsY0FBZSxhQUFjLFdBQVksWUFBYSxVQUFXLFVBQVcsU0FBVSxTQUFVLFFBQVMsWUFBYSxhQUFjLGlCQUFrQixjQUFlLFNBRTNNLEdBQU8sRUFBTyxDQUFDLFVBRWYsR0FBUyxFQUFPLENBQUMsU0FBVSxTQUFVLFFBQVMsTUFBTyxpQkFBa0IsZUFBZ0IsdUJBQXdCLFdBQVksYUFBYyxVQUFXLFNBQVUsVUFBVyxjQUFlLGNBQWUsVUFBVyxPQUFRLFFBQVMsUUFBUyxRQUFTLE9BQVEsVUFBVyxXQUFZLGVBQWdCLFNBQVUsY0FBZSxXQUFZLFdBQVksVUFBVyxNQUFPLFdBQVksMEJBQTJCLHdCQUF5QixXQUFZLFlBQWEsVUFBVyxlQUFnQixPQUFRLE1BQU8sVUFBVyxTQUFVLFNBQVUsT0FBUSxPQUFRLFdBQVksS0FBTSxZQUFhLFlBQWEsUUFBUyxPQUFRLFFBQVMsT0FBUSxPQUFRLFVBQVcsT0FBUSxNQUFPLE1BQU8sWUFBYSxRQUFTLFNBQVUsTUFBTyxZQUFhLFdBQVksUUFBUyxPQUFRLFFBQVMsVUFBVyxhQUFjLFNBQVUsT0FBUSxVQUFXLFVBQVcsY0FBZSxjQUFlLFNBQVUsVUFBVyxVQUFXLGFBQWMsV0FBWSxNQUFPLFdBQVksTUFBTyxXQUFZLE9BQVEsT0FBUSxVQUFXLGFBQWMsUUFBUyxXQUFZLFFBQVMsT0FBUSxRQUFTLE9BQVEsVUFBVyxRQUFTLE1BQU8sU0FBVSxPQUFRLFFBQVMsVUFBVyxXQUFZLFFBQVMsWUFBYSxPQUFRLFNBQVUsU0FBVSxRQUFTLFFBQVMsUUFBUyxTQUVucUMsR0FBUSxFQUFPLENBQUMsZ0JBQWlCLGFBQWMsV0FBWSxxQkFBc0IsU0FBVSxnQkFBaUIsZ0JBQWlCLFVBQVcsZ0JBQWlCLGlCQUFrQixRQUFTLE9BQVEsS0FBTSxRQUFTLE9BQVEsZ0JBQWlCLFlBQWEsWUFBYSxRQUFTLHNCQUF1Qiw4QkFBK0IsZ0JBQWlCLGtCQUFtQixLQUFNLEtBQU0sSUFBSyxLQUFNLEtBQU0sa0JBQW1CLFlBQWEsVUFBVyxVQUFXLE1BQU8sV0FBWSxZQUFhLE1BQU8sT0FBUSxlQUFnQixZQUFhLFNBQVUsY0FBZSxjQUFlLGdCQUFpQixjQUFlLFlBQWEsbUJBQW9CLGVBQWdCLGFBQWMsZUFBZ0IsY0FBZSxLQUFNLEtBQU0sS0FBTSxLQUFNLGFBQWMsV0FBWSxnQkFBaUIsb0JBQXFCLFNBQVUsT0FBUSxLQUFNLGtCQUFtQixLQUFNLE1BQU8sSUFBSyxLQUFNLEtBQU0sS0FBTSxLQUFNLFVBQVcsWUFBYSxhQUFjLFdBQVksT0FBUSxlQUFnQixpQkFBa0IsZUFBZ0IsbUJBQW9CLGlCQUFrQixRQUFTLGFBQWMsYUFBYyxlQUFnQixlQUFnQixjQUFlLGNBQWUsbUJBQW9CLFlBQWEsTUFBTyxPQUFRLFFBQVMsU0FBVSxPQUFRLE1BQU8sT0FBUSxhQUFjLFNBQVUsV0FBWSxVQUFXLFFBQVMsU0FBVSxjQUFlLFNBQVUsV0FBWSxjQUFlLE9BQVEsYUFBYyxzQkFBdUIsbUJBQW9CLGVBQWdCLFNBQVUsZ0JBQWlCLHNCQUF1QixpQkFBa0IsSUFBSyxLQUFNLEtBQU0sU0FBVSxPQUFRLE9BQVEsY0FBZSxZQUFhLFVBQVcsU0FBVSxTQUFVLFFBQVMsT0FBUSxrQkFBbUIsbUJBQW9CLG1CQUFvQixlQUFnQixjQUFlLGVBQWdCLGNBQWUsYUFBYyxlQUFnQixtQkFBb0Isb0JBQXFCLGlCQUFrQixrQkFBbUIsb0JBQXFCLGlCQUFrQixTQUFVLGVBQWdCLFFBQVMsZUFBZ0IsaUJBQWtCLFdBQVksVUFBVyxVQUFXLFlBQWEsbUJBQW9CLGNBQWUsa0JBQW1CLGlCQUFrQixhQUFjLE9BQVEsS0FBTSxLQUFNLFVBQVcsU0FBVSxVQUFXLGFBQWMsVUFBVyxhQUFjLGdCQUFpQixnQkFBaUIsUUFBUyxlQUFnQixPQUFRLGVBQWdCLG1CQUFvQixtQkFBb0IsSUFBSyxLQUFNLEtBQU0sUUFBUyxJQUFLLEtBQU0sS0FBTSxJQUFLLGVBRWh3RSxHQUFXLEVBQU8sQ0FBQyxTQUFVLGNBQWUsUUFBUyxXQUFZLFFBQVMsZUFBZ0IsY0FBZSxhQUFjLGFBQWMsUUFBUyxNQUFPLFVBQVcsZUFBZ0IsV0FBWSxRQUFTLFFBQVMsU0FBVSxPQUFRLEtBQU0sVUFBVyxTQUFVLGdCQUFpQixTQUFVLFNBQVUsaUJBQWtCLFlBQWEsV0FBWSxjQUFlLFVBQVcsVUFBVyxnQkFBaUIsV0FBWSxXQUFZLE9BQVEsV0FBWSxXQUFZLGFBQWMsVUFBVyxTQUFVLFNBQVUsY0FBZSxnQkFBaUIsdUJBQXdCLFlBQWEsWUFBYSxhQUFjLFdBQVksaUJBQWtCLGlCQUFrQixZQUFhLFVBQVcsUUFBUyxVQUV2cEIsR0FBTSxFQUFPLENBQUMsYUFBYyxTQUFVLGNBQWUsWUFBYSxnQkFHbEUsR0FBZ0IsRUFBSyw2QkFDckIsR0FBVyxFQUFLLHlCQUNoQixHQUFZLEVBQUssOEJBQ2pCLEdBQVksRUFBSyxrQkFDakIsR0FBaUIsRUFBSyx5RkFFdEIsR0FBb0IsRUFBSyx5QkFDekIsR0FBa0IsRUFBSywrREFHdkIsR0FBVSxNQUFPLFNBQVcsWUFBYyxNQUFPLFFBQU8sVUFBYSxTQUFXLFNBQVUsRUFBSyxDQUFFLE1BQU8sT0FBTyxJQUFTLFNBQVUsRUFBSyxDQUFFLE1BQU8sSUFBTyxNQUFPLFNBQVcsWUFBYyxFQUFJLGNBQWdCLFFBQVUsSUFBUSxPQUFPLFVBQVksU0FBVyxNQUFPLElBRXRRLFlBQThCLEVBQUssQ0FBRSxHQUFJLE1BQU0sUUFBUSxHQUFNLENBQUUsT0FBUyxHQUFJLEVBQUcsR0FBTyxNQUFNLEVBQUksUUFBUyxFQUFJLEVBQUksT0FBUSxJQUFPLEdBQUssR0FBSyxFQUFJLEdBQU0sTUFBTyxRQUFlLE9BQU8sT0FBTSxLQUFLLEdBRTVMLEdBQUksSUFBWSxVQUFxQixDQUNuQyxNQUFPLE9BQU8sU0FBVyxZQUFjLEtBQU8sUUFXNUMsRUFBNEIsU0FBbUMsRUFBYyxHQUFVLENBQ3pGLEdBQUssT0FBTyxJQUFpQixZQUFjLFlBQWMsR0FBUSxNQUFtQixVQUFZLE1BQU8sR0FBYSxjQUFpQixXQUNuSSxNQUFPLE1BTVQsR0FBSSxHQUFTLEtBQ1QsRUFBWSx3QkFDaEIsQUFBSSxHQUFTLGVBQWlCLEdBQVMsY0FBYyxhQUFhLElBQ2hFLEdBQVMsR0FBUyxjQUFjLGFBQWEsSUFHL0MsR0FBSSxJQUFhLFlBQWUsR0FBUyxJQUFNLEVBQVMsSUFFeEQsR0FBSSxDQUNGLE1BQU8sR0FBYSxhQUFhLEdBQVksQ0FDM0MsV0FBWSxTQUFvQixHQUFTLENBQ3ZDLE1BQU8sYUFHSixHQUFQLENBSUEsZUFBUSxLQUFLLHVCQUF5QixHQUFhLDBCQUM1QyxPQUlYLGFBQTJCLENBQ3pCLEdBQUksR0FBUyxVQUFVLE9BQVMsR0FBSyxVQUFVLEtBQU8sT0FBWSxVQUFVLEdBQUssS0FFN0UsRUFBWSxTQUFtQixFQUFNLENBQ3ZDLE1BQU8sSUFBZ0IsSUFlekIsR0FSQSxFQUFVLFFBQVUsUUFNcEIsRUFBVSxRQUFVLEdBRWhCLENBQUMsR0FBVSxDQUFDLEVBQU8sVUFBWSxFQUFPLFNBQVMsV0FBYSxFQUc5RCxTQUFVLFlBQWMsR0FFakIsRUFHVCxHQUFJLElBQW1CLEVBQU8sU0FFMUIsRUFBVyxFQUFPLFNBQ2xCLEVBQW1CLEVBQU8saUJBQzFCLEdBQXNCLEVBQU8sb0JBQzdCLEdBQU8sRUFBTyxLQUNkLEdBQVUsRUFBTyxRQUNqQixHQUFhLEVBQU8sV0FDcEIsR0FBdUIsRUFBTyxhQUM5QixHQUFlLEtBQXlCLE9BQVksRUFBTyxjQUFnQixFQUFPLGdCQUFrQixHQUNwRyxHQUFrQixFQUFPLGdCQUN6QixHQUFZLEVBQU8sVUFDbkIsR0FBZSxFQUFPLGFBR3RCLEdBQW1CLEdBQVEsVUFFM0IsR0FBWSxHQUFhLEdBQWtCLGFBQzNDLEdBQWlCLEdBQWEsR0FBa0IsZUFDaEQsR0FBZ0IsR0FBYSxHQUFrQixjQUMvQyxHQUFnQixHQUFhLEdBQWtCLGNBUW5ELEdBQUksTUFBTyxLQUF3QixXQUFZLENBQzdDLEdBQUksSUFBVyxFQUFTLGNBQWMsWUFDdEMsQUFBSSxHQUFTLFNBQVcsR0FBUyxRQUFRLGVBQ3ZDLEdBQVcsR0FBUyxRQUFRLGVBSWhDLEdBQUksSUFBcUIsRUFBMEIsR0FBYyxJQUM3RCxHQUFZLEdBQXFCLEdBQW1CLFdBQVcsSUFBTSxHQUVyRSxHQUFZLEVBQ1osR0FBaUIsR0FBVSxlQUMzQixHQUFxQixHQUFVLG1CQUMvQixHQUF5QixHQUFVLHVCQUNuQyxHQUF1QixHQUFVLHFCQUNqQyxHQUFhLEdBQWlCLFdBRzlCLEdBQWUsR0FDbkIsR0FBSSxDQUNGLEdBQWUsR0FBTSxHQUFVLGFBQWUsRUFBUyxhQUFlLFNBQy9ELEVBQVAsRUFFRixHQUFJLElBQVEsR0FLWixFQUFVLFlBQWMsTUFBTyxLQUFrQixZQUFjLElBQWtCLE1BQU8sSUFBZSxvQkFBdUIsYUFBZSxLQUFpQixFQUU5SixHQUFJLElBQW1CLEdBQ25CLEdBQWMsR0FDZCxHQUFlLEdBQ2YsR0FBZSxHQUNmLEdBQXVCLEdBQ3ZCLEdBQXFCLEdBQ3JCLEdBQW9CLEdBU3BCLEdBQWUsS0FDZixHQUF1QixFQUFTLEdBQUksR0FBRyxPQUFPLEdBQXFCLElBQU8sR0FBcUIsSUFBTSxHQUFxQixJQUFhLEdBQXFCLElBQVMsR0FBcUIsTUFHMUwsR0FBZSxLQUNmLEdBQXVCLEVBQVMsR0FBSSxHQUFHLE9BQU8sR0FBcUIsSUFBUyxHQUFxQixJQUFRLEdBQXFCLElBQVcsR0FBcUIsTUFROUosR0FBMEIsT0FBTyxLQUFLLE9BQU8sT0FBTyxLQUFNLENBQzVELGFBQWMsQ0FDWixTQUFVLEdBQ1YsYUFBYyxHQUNkLFdBQVksR0FDWixNQUFPLE1BRVQsbUJBQW9CLENBQ2xCLFNBQVUsR0FDVixhQUFjLEdBQ2QsV0FBWSxHQUNaLE1BQU8sTUFFVCwrQkFBZ0MsQ0FDOUIsU0FBVSxHQUNWLGFBQWMsR0FDZCxXQUFZLEdBQ1osTUFBTyxPQUtQLEdBQWMsS0FHZCxHQUFjLEtBR2QsR0FBa0IsR0FHbEIsR0FBa0IsR0FHbEIsR0FBMEIsR0FLMUIsR0FBcUIsR0FHckIsR0FBaUIsR0FHakIsR0FBYSxHQUliLEdBQWEsR0FNYixHQUFhLEdBSWIsR0FBc0IsR0FJdEIsR0FBc0IsR0FHdEIsR0FBZSxHQUdmLEdBQWUsR0FJZixHQUFXLEdBR1gsR0FBZSxHQUdmLEdBQWtCLEtBQ2xCLEdBQTBCLEVBQVMsR0FBSSxDQUFDLGlCQUFrQixRQUFTLFdBQVksT0FBUSxnQkFBaUIsT0FBUSxTQUFVLE9BQVEsS0FBTSxLQUFNLEtBQU0sS0FBTSxRQUFTLFVBQVcsV0FBWSxXQUFZLFlBQWEsU0FBVSxRQUFTLE1BQU8sV0FBWSxRQUFTLFFBQVMsUUFBUyxRQUdwUixHQUFnQixLQUNoQixHQUF3QixFQUFTLEdBQUksQ0FBQyxRQUFTLFFBQVMsTUFBTyxTQUFVLFFBQVMsVUFHbEYsR0FBc0IsS0FDdEIsR0FBOEIsRUFBUyxHQUFJLENBQUMsTUFBTyxRQUFTLE1BQU8sS0FBTSxRQUFTLE9BQVEsVUFBVyxjQUFlLE9BQVEsVUFBVyxRQUFTLFFBQVMsUUFBUyxVQUVsSyxHQUFtQixxQ0FDbkIsRUFBZ0IsNkJBQ2hCLEVBQWlCLCtCQUVqQixFQUFZLEVBQ1osR0FBaUIsR0FHakIsR0FBb0IsT0FDcEIsR0FBK0IsQ0FBQyx3QkFBeUIsYUFDekQsR0FBNEIsWUFDNUIsR0FBb0IsT0FHcEIsR0FBUyxLQUtULEdBQWMsRUFBUyxjQUFjLFFBRXJDLEdBQW9CLFNBQTJCLEVBQVcsQ0FDNUQsTUFBTyxhQUFxQixTQUFVLFlBQXFCLFdBU3pELEdBQWUsU0FBc0IsRUFBSyxDQUM1QyxBQUFJLElBQVUsS0FBVyxHQUtyQixHQUFDLEdBQVEsT0FBTyxJQUFRLFlBQWMsWUFBYyxHQUFRLE1BQVUsV0FDeEUsR0FBTSxJQUlSLEVBQU0sR0FBTSxHQUdaLEdBQWUsZ0JBQWtCLEdBQU0sRUFBUyxHQUFJLEVBQUksY0FBZ0IsR0FDeEUsR0FBZSxnQkFBa0IsR0FBTSxFQUFTLEdBQUksRUFBSSxjQUFnQixHQUN4RSxHQUFzQixxQkFBdUIsR0FBTSxFQUFTLEdBQU0sSUFBOEIsRUFBSSxtQkFBcUIsR0FDekgsR0FBZ0IscUJBQXVCLEdBQU0sRUFBUyxHQUFNLElBQXdCLEVBQUksbUJBQXFCLEdBQzdHLEdBQWtCLG1CQUFxQixHQUFNLEVBQVMsR0FBSSxFQUFJLGlCQUFtQixHQUNqRixHQUFjLGVBQWlCLEdBQU0sRUFBUyxHQUFJLEVBQUksYUFBZSxHQUNyRSxHQUFjLGVBQWlCLEdBQU0sRUFBUyxHQUFJLEVBQUksYUFBZSxHQUNyRSxHQUFlLGdCQUFrQixHQUFNLEVBQUksYUFBZSxHQUMxRCxHQUFrQixFQUFJLGtCQUFvQixHQUMxQyxHQUFrQixFQUFJLGtCQUFvQixHQUMxQyxHQUEwQixFQUFJLHlCQUEyQixHQUN6RCxHQUFxQixFQUFJLG9CQUFzQixHQUMvQyxHQUFpQixFQUFJLGdCQUFrQixHQUN2QyxHQUFhLEVBQUksWUFBYyxHQUMvQixHQUFzQixFQUFJLHFCQUF1QixHQUNqRCxHQUFzQixFQUFJLHFCQUF1QixHQUNqRCxHQUFhLEVBQUksWUFBYyxHQUMvQixHQUFlLEVBQUksZUFBaUIsR0FDcEMsR0FBZSxFQUFJLGVBQWlCLEdBQ3BDLEdBQVcsRUFBSSxVQUFZLEdBQzNCLEdBQW9CLEVBQUksb0JBQXNCLEdBQzlDLEVBQVksRUFBSSxXQUFhLEVBQ3pCLEVBQUkseUJBQTJCLEdBQWtCLEVBQUksd0JBQXdCLGVBQy9FLElBQXdCLGFBQWUsRUFBSSx3QkFBd0IsY0FHakUsRUFBSSx5QkFBMkIsR0FBa0IsRUFBSSx3QkFBd0IscUJBQy9FLElBQXdCLG1CQUFxQixFQUFJLHdCQUF3QixvQkFHdkUsRUFBSSx5QkFBMkIsTUFBTyxHQUFJLHdCQUF3QixnQ0FBbUMsV0FDdkcsSUFBd0IsK0JBQWlDLEVBQUksd0JBQXdCLGdDQUd2RixHQUVBLEdBQTZCLFFBQVEsRUFBSSxxQkFBdUIsR0FBSyxHQUFvQixHQUE0QixHQUFvQixFQUFJLGtCQUc3SSxHQUFvQixLQUFzQix3QkFBMEIsU0FBVSxFQUFHLENBQy9FLE1BQU8sSUFDTCxFQUVBLElBQ0YsSUFBa0IsSUFHaEIsSUFDRixJQUFhLElBSVgsSUFDRixJQUFlLEVBQVMsR0FBSSxHQUFHLE9BQU8sR0FBcUIsTUFDM0QsR0FBZSxHQUNYLEdBQWEsT0FBUyxJQUN4QixHQUFTLEdBQWMsSUFDdkIsRUFBUyxHQUFjLEtBR3JCLEdBQWEsTUFBUSxJQUN2QixHQUFTLEdBQWMsSUFDdkIsRUFBUyxHQUFjLElBQ3ZCLEVBQVMsR0FBYyxLQUdyQixHQUFhLGFBQWUsSUFDOUIsR0FBUyxHQUFjLElBQ3ZCLEVBQVMsR0FBYyxJQUN2QixFQUFTLEdBQWMsS0FHckIsR0FBYSxTQUFXLElBQzFCLEdBQVMsR0FBYyxJQUN2QixFQUFTLEdBQWMsSUFDdkIsRUFBUyxHQUFjLE1BS3ZCLEVBQUksVUFDRixNQUFpQixJQUNuQixJQUFlLEdBQU0sS0FHdkIsRUFBUyxHQUFjLEVBQUksV0FHekIsRUFBSSxVQUNGLE1BQWlCLElBQ25CLElBQWUsR0FBTSxLQUd2QixFQUFTLEdBQWMsRUFBSSxXQUd6QixFQUFJLG1CQUNOLEVBQVMsR0FBcUIsRUFBSSxtQkFHaEMsRUFBSSxpQkFDRixNQUFvQixJQUN0QixJQUFrQixHQUFNLEtBRzFCLEVBQVMsR0FBaUIsRUFBSSxrQkFJNUIsSUFDRixJQUFhLFNBQVcsSUFJdEIsSUFDRixFQUFTLEdBQWMsQ0FBQyxPQUFRLE9BQVEsU0FJdEMsR0FBYSxPQUNmLEdBQVMsR0FBYyxDQUFDLFVBQ3hCLE1BQU8sSUFBWSxPQUtqQixHQUNGLEVBQU8sR0FHVCxHQUFTLElBR1AsR0FBaUMsRUFBUyxHQUFJLENBQUMsS0FBTSxLQUFNLEtBQU0sS0FBTSxVQUV2RSxHQUEwQixFQUFTLEdBQUksQ0FBQyxnQkFBaUIsT0FBUSxRQUFTLG1CQUsxRSxHQUFlLEVBQVMsR0FBSSxJQUNoQyxFQUFTLEdBQWMsSUFDdkIsRUFBUyxHQUFjLElBRXZCLEdBQUksSUFBa0IsRUFBUyxHQUFJLElBQ25DLEVBQVMsR0FBaUIsSUFVMUIsR0FBSSxJQUF1QixTQUE4QixFQUFTLENBQ2hFLEdBQUksR0FBUyxHQUFjLEdBSTNCLEFBQUksRUFBQyxHQUFVLENBQUMsRUFBTyxVQUNyQixHQUFTLENBQ1AsYUFBYyxFQUNkLFFBQVMsYUFJYixHQUFJLEdBQVUsRUFBa0IsRUFBUSxTQUNwQyxHQUFnQixFQUFrQixFQUFPLFNBRTdDLEdBQUksRUFBUSxlQUFpQixFQUkzQixNQUFJLEdBQU8sZUFBaUIsRUFDbkIsSUFBWSxNQU1qQixFQUFPLGVBQWlCLEdBQ25CLElBQVksT0FBVSxNQUFrQixrQkFBb0IsR0FBK0IsS0FLN0YsUUFBUSxHQUFhLElBRzlCLEdBQUksRUFBUSxlQUFpQixHQUkzQixNQUFJLEdBQU8sZUFBaUIsRUFDbkIsSUFBWSxPQUtqQixFQUFPLGVBQWlCLEVBQ25CLElBQVksUUFBVSxHQUF3QixJQUtoRCxRQUFRLEdBQWdCLElBR2pDLEdBQUksRUFBUSxlQUFpQixFQUFnQixDQVEzQyxHQUpJLEVBQU8sZUFBaUIsR0FBaUIsQ0FBQyxHQUF3QixLQUlsRSxFQUFPLGVBQWlCLElBQW9CLENBQUMsR0FBK0IsSUFDOUUsTUFBTyxHQU9ULEdBQUksSUFBMkIsRUFBUyxHQUFJLENBQUMsUUFBUyxRQUFTLE9BQVEsSUFBSyxXQUk1RSxNQUFPLENBQUMsR0FBZ0IsSUFBYSxJQUF5QixJQUFZLENBQUMsR0FBYSxJQU0xRixNQUFPLElBUUwsR0FBZSxTQUFzQixFQUFNLENBQzdDLEVBQVUsRUFBVSxRQUFTLENBQUUsUUFBUyxJQUN4QyxHQUFJLENBRUYsRUFBSyxXQUFXLFlBQVksU0FDckIsRUFBUCxDQUNBLEdBQUksQ0FDRixFQUFLLFVBQVksU0FDVixFQUFQLENBQ0EsRUFBSyxZQVdQLEdBQW1CLFNBQTBCLEVBQU0sRUFBTSxDQUMzRCxHQUFJLENBQ0YsRUFBVSxFQUFVLFFBQVMsQ0FDM0IsVUFBVyxFQUFLLGlCQUFpQixHQUNqQyxLQUFNLFVBRUQsRUFBUCxDQUNBLEVBQVUsRUFBVSxRQUFTLENBQzNCLFVBQVcsS0FDWCxLQUFNLElBT1YsR0FIQSxFQUFLLGdCQUFnQixHQUdqQixJQUFTLE1BQVEsQ0FBQyxHQUFhLEdBQ2pDLEdBQUksSUFBYyxHQUNoQixHQUFJLENBQ0YsR0FBYSxTQUNOLEVBQVAsTUFFRixJQUFJLENBQ0YsRUFBSyxhQUFhLEVBQU0sVUFDakIsRUFBUCxJQVdKLEdBQWdCLFNBQXVCLEVBQU8sQ0FFaEQsR0FBSSxHQUFNLE9BQ04sRUFBb0IsT0FFeEIsR0FBSSxHQUNGLEVBQVEsb0JBQXNCLE1BQ3pCLENBRUwsR0FBSSxJQUFVLEdBQVksRUFBTyxlQUNqQyxFQUFvQixJQUFXLEdBQVEsR0FHekMsQUFBSSxLQUFzQix5QkFFeEIsR0FBUSxpRUFBbUUsRUFBUSxrQkFHckYsR0FBSSxJQUFlLEdBQXFCLEdBQW1CLFdBQVcsR0FBUyxFQUsvRSxHQUFJLElBQWMsRUFDaEIsR0FBSSxDQUNGLEVBQU0sR0FBSSxNQUFZLGdCQUFnQixHQUFjLFVBQzdDLEdBQVAsRUFJSixHQUFJLENBQUMsR0FBTyxDQUFDLEVBQUksZ0JBQWlCLENBQ2hDLEVBQU0sR0FBZSxlQUFlLEVBQVcsV0FBWSxNQUMzRCxHQUFJLENBQ0YsRUFBSSxnQkFBZ0IsVUFBWSxHQUFpQixHQUFLLFNBQy9DLEdBQVAsR0FLSixHQUFJLElBQU8sRUFBSSxNQUFRLEVBQUksZ0JBTzNCLE1BTEksSUFBUyxHQUNYLEdBQUssYUFBYSxFQUFTLGVBQWUsR0FBb0IsR0FBSyxXQUFXLElBQU0sTUFJbEYsSUFBYyxFQUNULEdBQXFCLEtBQUssRUFBSyxHQUFpQixPQUFTLFFBQVEsR0FHbkUsR0FBaUIsRUFBSSxnQkFBa0IsSUFTNUMsR0FBa0IsU0FBeUIsRUFBTSxDQUNuRCxNQUFPLElBQW1CLEtBQUssRUFBSyxlQUFpQixFQUFNLEVBQU0sR0FBVyxhQUFlLEdBQVcsYUFBZSxHQUFXLFVBQVcsS0FBTSxLQVMvSSxHQUFlLFNBQXNCLEVBQUssQ0FDNUMsTUFBTyxhQUFlLEtBQW9CLE9BQU8sR0FBSSxVQUFhLFVBQVksTUFBTyxHQUFJLGFBQWdCLFVBQVksTUFBTyxHQUFJLGFBQWdCLFlBQWMsQ0FBRSxHQUFJLHFCQUFzQixNQUFpQixNQUFPLEdBQUksaUJBQW9CLFlBQWMsTUFBTyxHQUFJLGNBQWlCLFlBQWMsTUFBTyxHQUFJLGNBQWlCLFVBQVksTUFBTyxHQUFJLGNBQWlCLGFBU3BXLEdBQVUsU0FBaUIsRUFBUSxDQUNyQyxNQUFRLE9BQU8sS0FBUyxZQUFjLFlBQWMsR0FBUSxPQUFXLFNBQVcsWUFBa0IsSUFBTyxHQUFXLE9BQU8sSUFBVyxZQUFjLFlBQWMsR0FBUSxNQUFhLFVBQVksTUFBTyxHQUFPLFVBQWEsVUFBWSxNQUFPLEdBQU8sVUFBYSxVQVdyUSxHQUFlLFNBQXNCLEVBQVksRUFBYSxFQUFNLENBQ3RFLEFBQUksQ0FBQyxHQUFNLElBSVgsRUFBYSxHQUFNLEdBQWEsU0FBVSxHQUFNLENBQzlDLEdBQUssS0FBSyxFQUFXLEVBQWEsRUFBTSxPQWN4QyxHQUFvQixTQUEyQixFQUFhLENBQzlELEdBQUksR0FBVSxPQVlkLEdBVEEsR0FBYSx5QkFBMEIsRUFBYSxNQUdoRCxHQUFhLElBTWIsR0FBWSxFQUFZLFNBQVUsbUJBQ3BDLFVBQWEsR0FDTixHQUlULEdBQUksR0FBVSxHQUFrQixFQUFZLFVBZTVDLEdBWkEsR0FBYSxzQkFBdUIsRUFBYSxDQUMvQyxRQUFTLEVBQ1QsWUFBYSxLQUlYLENBQUMsR0FBUSxFQUFZLG9CQUF1QixFQUFDLEdBQVEsRUFBWSxVQUFZLENBQUMsR0FBUSxFQUFZLFFBQVEscUJBQXVCLEdBQVcsVUFBVyxFQUFZLFlBQWMsR0FBVyxVQUFXLEVBQVksY0FNbk4sSUFBWSxVQUFZLEdBQVcsYUFBYyxFQUFZLFdBQy9ELFVBQWEsR0FDTixHQUlULEdBQUksQ0FBQyxHQUFhLElBQVksR0FBWSxHQUFVLENBRWxELEdBQUksSUFBZ0IsQ0FBQyxHQUFnQixHQUFVLENBQzdDLEdBQUksSUFBYSxHQUFjLElBQWdCLEVBQVksV0FDdkQsR0FBYSxHQUFjLElBQWdCLEVBQVksV0FFM0QsR0FBSSxJQUFjLEdBR2hCLE9BRkksSUFBYSxHQUFXLE9BRW5CLEdBQUksR0FBYSxFQUFHLElBQUssRUFBRyxFQUFFLEdBQ3JDLEdBQVcsYUFBYSxHQUFVLEdBQVcsSUFBSSxJQUFPLEdBQWUsSUFLN0UsTUFBSSxDQUFDLEdBQVksSUFBWSxHQUF3QixJQUMvQyxJQUF3Qix1QkFBd0IsU0FBVSxHQUFXLEdBQXdCLGFBQWMsSUFDM0csR0FBd0IsdUJBQXdCLFdBQVksR0FBd0IsYUFBYSxJQUFpQixHQUd4SCxJQUFhLEdBQ04sSUFTVCxNQUxJLGFBQXVCLEtBQVcsQ0FBQyxHQUFxQixJQUt2RCxLQUFZLFlBQWMsSUFBWSxZQUFjLEdBQVcsdUJBQXdCLEVBQVksV0FDdEcsSUFBYSxHQUNOLElBSUwsS0FBc0IsRUFBWSxXQUFhLEdBRWpELEdBQVUsRUFBWSxZQUN0QixFQUFVLEdBQWMsRUFBUyxHQUFrQixLQUNuRCxFQUFVLEdBQWMsRUFBUyxHQUFhLEtBQzFDLEVBQVksY0FBZ0IsR0FDOUIsR0FBVSxFQUFVLFFBQVMsQ0FBRSxRQUFTLEVBQVksY0FDcEQsRUFBWSxZQUFjLElBSzlCLEdBQWEsd0JBQXlCLEVBQWEsTUFFNUMsS0FZTCxHQUFvQixTQUEyQixFQUFPLEVBQVEsRUFBTyxDQUV2RSxHQUFJLElBQWlCLEtBQVcsTUFBUSxJQUFXLFNBQVksS0FBUyxJQUFZLElBQVMsS0FDM0YsTUFBTyxHQU9ULEdBQUksTUFBbUIsQ0FBQyxHQUFZLElBQVcsR0FBVyxHQUFjLEtBQWdCLEdBQUksTUFBbUIsR0FBVyxHQUFjLEtBQWdCLEdBQUksQ0FBQyxHQUFhLElBQVcsR0FBWSxJQUMvTCxHQUlBLEtBQXdCLElBQVcsSUFBd0IsdUJBQXdCLFNBQVUsR0FBVyxHQUF3QixhQUFjLElBQVUsR0FBd0IsdUJBQXdCLFdBQVksR0FBd0IsYUFBYSxLQUFZLElBQXdCLDZCQUE4QixTQUFVLEdBQVcsR0FBd0IsbUJBQW9CLElBQVcsR0FBd0IsNkJBQThCLFdBQVksR0FBd0IsbUJBQW1CLEtBR3BmLElBQVcsTUFBUSxHQUF3QixnQ0FBbUMsSUFBd0IsdUJBQXdCLFNBQVUsR0FBVyxHQUF3QixhQUFjLElBQVUsR0FBd0IsdUJBQXdCLFdBQVksR0FBd0IsYUFBYSxLQUNsUyxNQUFPLFdBR0EsSUFBb0IsSUFBZ0IsR0FBSSxJQUFXLEdBQW1CLEdBQWMsRUFBTyxHQUFvQixNQUFhLEdBQUssT0FBVyxPQUFTLElBQVcsY0FBZ0IsSUFBVyxTQUFXLElBQVUsVUFBWSxFQUFjLEVBQU8sV0FBYSxHQUFLLEdBQWMsS0FBZSxHQUFJLE1BQTJCLENBQUMsR0FBVyxHQUFzQixHQUFjLEVBQU8sR0FBb0IsT0FBYSxHQUFLLEVBQ3JhLE1BQU8sUUFHVCxNQUFPLElBU0wsR0FBMEIsU0FBaUMsRUFBUyxDQUN0RSxNQUFPLEdBQVEsUUFBUSxLQUFPLEdBYTVCLEdBQXNCLFNBQTZCLEVBQWEsQ0FDbEUsR0FBSSxHQUFPLE9BQ1AsRUFBUSxPQUNSLEdBQVMsT0FDVCxHQUFJLE9BRVIsR0FBYSwyQkFBNEIsRUFBYSxNQUV0RCxHQUFJLElBQWEsRUFBWSxXQUk3QixHQUFJLEVBQUMsR0FJTCxJQUFJLElBQVksQ0FDZCxTQUFVLEdBQ1YsVUFBVyxHQUNYLFNBQVUsR0FDVixrQkFBbUIsSUFLckIsSUFIQSxHQUFJLEdBQVcsT0FHUixNQUFLLENBQ1YsRUFBTyxHQUFXLElBQ2xCLEdBQUksSUFBUSxFQUNSLEdBQU8sR0FBTSxLQUNiLEdBQWUsR0FBTSxhQWF6QixHQVhBLEVBQVEsR0FBVyxFQUFLLE9BQ3hCLEdBQVMsR0FBa0IsSUFHM0IsR0FBVSxTQUFXLEdBQ3JCLEdBQVUsVUFBWSxFQUN0QixHQUFVLFNBQVcsR0FDckIsR0FBVSxjQUFnQixPQUMxQixHQUFhLHdCQUF5QixFQUFhLElBQ25ELEVBQVEsR0FBVSxVQUVkLElBQVUsZUFLZCxJQUFpQixHQUFNLEdBR25CLEVBQUMsR0FBVSxVQUtmLElBQUksR0FBVyxPQUFRLEdBQVEsQ0FDN0IsR0FBaUIsR0FBTSxHQUN2QixTQUlGLEFBQUksSUFDRixHQUFRLEdBQWMsRUFBTyxHQUFrQixLQUMvQyxFQUFRLEdBQWMsRUFBTyxHQUFhLE1BSTVDLEdBQUksSUFBUSxHQUFrQixFQUFZLFVBQzFDLEdBQUksRUFBQyxHQUFrQixHQUFPLEdBQVEsR0FLdEMsR0FBSSxDQUNGLEFBQUksR0FDRixFQUFZLGVBQWUsR0FBYyxHQUFNLEdBRy9DLEVBQVksYUFBYSxHQUFNLEdBR2pDLEVBQVMsRUFBVSxlQUNaLEdBQVAsSUFJSixHQUFhLDBCQUEyQixFQUFhLFFBUW5ELEdBQXFCLFdBQTRCLEVBQVUsQ0FDN0QsR0FBSSxHQUFhLE9BQ2IsRUFBaUIsR0FBZ0IsR0FLckMsSUFGQSxHQUFhLDBCQUEyQixFQUFVLE1BRTNDLEVBQWEsRUFBZSxZQUtqQyxBQUhBLEdBQWEseUJBQTBCLEVBQVksTUFHL0MsSUFBa0IsSUFLbEIsR0FBVyxrQkFBbUIsSUFDaEMsRUFBbUIsRUFBVyxTQUloQyxHQUFvQixJQUl0QixHQUFhLHlCQUEwQixFQUFVLE9BV25ELFNBQVUsU0FBVyxTQUFVLEVBQU8sRUFBSyxDQUN6QyxHQUFJLEdBQU8sT0FDUCxFQUFlLE9BQ2YsR0FBYyxPQUNkLEdBQVUsT0FDVixHQUFhLE9BVWpCLEdBTkEsR0FBaUIsQ0FBQyxFQUNkLElBQ0YsR0FBUSxTQUlOLE1BQU8sSUFBVSxVQUFZLENBQUMsR0FBUSxHQUFRLENBRWhELEdBQUksTUFBTyxHQUFNLFVBQWEsV0FDNUIsS0FBTSxJQUFnQiw4QkFHdEIsR0FEQSxFQUFRLEVBQU0sV0FDVixNQUFPLElBQVUsU0FDbkIsS0FBTSxJQUFnQixtQ0FNNUIsR0FBSSxDQUFDLEVBQVUsWUFBYSxDQUMxQixHQUFJLEdBQVEsRUFBTyxnQkFBa0IsVUFBWSxNQUFPLEdBQU8sY0FBaUIsV0FBWSxDQUMxRixHQUFJLE1BQU8sSUFBVSxTQUNuQixNQUFPLEdBQU8sYUFBYSxHQUc3QixHQUFJLEdBQVEsR0FDVixNQUFPLEdBQU8sYUFBYSxFQUFNLFdBSXJDLE1BQU8sR0FnQlQsR0FaSyxJQUNILEdBQWEsR0FJZixFQUFVLFFBQVUsR0FHaEIsTUFBTyxJQUFVLFVBQ25CLElBQVcsSUFHVCxJQUVGLEdBQUksRUFBTSxTQUFVLENBQ2xCLEdBQUksSUFBVSxHQUFrQixFQUFNLFVBQ3RDLEdBQUksQ0FBQyxHQUFhLEtBQVksR0FBWSxJQUN4QyxLQUFNLElBQWdCLG9FQUdqQixZQUFpQixJQUcxQixFQUFPLEdBQWMsV0FDckIsRUFBZSxFQUFLLGNBQWMsV0FBVyxFQUFPLElBQ3BELEFBQUksRUFBYSxXQUFhLEdBQUssRUFBYSxXQUFhLFFBR2xELEVBQWEsV0FBYSxPQURuQyxFQUFPLEVBS1AsRUFBSyxZQUFZLE9BRWQsQ0FFTCxHQUFJLENBQUMsSUFBYyxDQUFDLElBQXNCLENBQUMsSUFFM0MsRUFBTSxRQUFRLE9BQVMsR0FDckIsTUFBTyxLQUFzQixHQUFzQixHQUFtQixXQUFXLEdBQVMsRUFPNUYsR0FIQSxFQUFPLEdBQWMsR0FHakIsQ0FBQyxFQUNILE1BQU8sSUFBYSxLQUFPLEdBQXNCLEdBQVksR0FLakUsQUFBSSxHQUFRLElBQ1YsR0FBYSxFQUFLLFlBT3BCLE9BSEksSUFBZSxHQUFnQixHQUFXLEVBQVEsR0FHL0MsR0FBYyxHQUFhLFlBRWhDLEFBQUksR0FBWSxXQUFhLEdBQUssS0FBZ0IsSUFLOUMsR0FBa0IsS0FLbEIsSUFBWSxrQkFBbUIsSUFDakMsR0FBbUIsR0FBWSxTQUlqQyxHQUFvQixJQUVwQixHQUFVLElBTVosR0FIQSxHQUFVLEtBR04sR0FDRixNQUFPLEdBSVQsR0FBSSxHQUFZLENBQ2QsR0FBSSxHQUdGLElBRkEsR0FBYSxHQUF1QixLQUFLLEVBQUssZUFFdkMsRUFBSyxZQUVWLEdBQVcsWUFBWSxFQUFLLGdCQUc5QixJQUFhLEVBR2YsTUFBSSxJQUFhLFlBUWYsSUFBYSxHQUFXLEtBQUssR0FBa0IsR0FBWSxLQUd0RCxHQUdULEdBQUksSUFBaUIsR0FBaUIsRUFBSyxVQUFZLEVBQUssVUFHNUQsTUFBSSxLQUNGLElBQWlCLEdBQWMsR0FBZ0IsR0FBa0IsS0FDakUsR0FBaUIsR0FBYyxHQUFnQixHQUFhLE1BR3ZELElBQXNCLEdBQXNCLEdBQW1CLFdBQVcsSUFBa0IsSUFTckcsRUFBVSxVQUFZLFNBQVUsRUFBSyxDQUNuQyxHQUFhLEdBQ2IsR0FBYSxJQVFmLEVBQVUsWUFBYyxVQUFZLENBQ2xDLEdBQVMsS0FDVCxHQUFhLElBYWYsRUFBVSxpQkFBbUIsU0FBVSxFQUFLLEVBQU0sRUFBTyxDQUV2RCxBQUFLLElBQ0gsR0FBYSxJQUdmLEdBQUksR0FBUSxHQUFrQixHQUMxQixHQUFTLEdBQWtCLEdBQy9CLE1BQU8sSUFBa0IsRUFBTyxHQUFRLElBVTFDLEVBQVUsUUFBVSxTQUFVLEVBQVksRUFBYyxDQUN0RCxBQUFJLE1BQU8sSUFBaUIsWUFJNUIsSUFBTSxHQUFjLEdBQU0sSUFBZSxHQUN6QyxFQUFVLEdBQU0sR0FBYSxLQVUvQixFQUFVLFdBQWEsU0FBVSxFQUFZLENBQzNDLEFBQUksR0FBTSxJQUNSLEVBQVMsR0FBTSxLQVVuQixFQUFVLFlBQWMsU0FBVSxFQUFZLENBQzVDLEFBQUksR0FBTSxJQUNSLElBQU0sR0FBYyxLQVN4QixFQUFVLGVBQWlCLFVBQVksQ0FDckMsR0FBUSxJQUdILEVBR1QsR0FBSSxJQUFTLEtBRWIsTUFBTyxRQ3Q2Q0wsR0FBSyxHQUFJLE1BQ1QsR0FBSyxHQUFJLE1BRUUsWUFBcUIsRUFBUSxFQUFTLEVBQU8sRUFBTyxDQUVqRSxXQUFrQixFQUFNLENBQ3RCLE1BQU8sR0FBTyxFQUFPLFVBQVUsU0FBVyxFQUFJLEdBQUksTUFBTyxHQUFJLE1BQUssQ0FBQyxJQUFRLEVBRzdFLFNBQVMsTUFBUSxTQUFTLEVBQU0sQ0FDOUIsTUFBTyxHQUFPLEVBQU8sR0FBSSxNQUFLLENBQUMsSUFBUSxHQUd6QyxFQUFTLEtBQU8sU0FBUyxFQUFNLENBQzdCLE1BQU8sR0FBTyxFQUFPLEdBQUksTUFBSyxFQUFPLElBQUssRUFBUSxFQUFNLEdBQUksRUFBTyxHQUFPLEdBRzVFLEVBQVMsTUFBUSxTQUFTLEVBQU0sQ0FDOUIsR0FBSSxHQUFLLEVBQVMsR0FDZCxFQUFLLEVBQVMsS0FBSyxHQUN2QixNQUFPLEdBQU8sRUFBSyxFQUFLLEVBQU8sRUFBSyxHQUd0QyxFQUFTLE9BQVMsU0FBUyxFQUFNLEVBQU0sQ0FDckMsTUFBTyxHQUFRLEVBQU8sR0FBSSxNQUFLLENBQUMsR0FBTyxHQUFRLEtBQU8sRUFBSSxLQUFLLE1BQU0sSUFBUSxHQUcvRSxFQUFTLE1BQVEsU0FBUyxFQUFPLEVBQU0sRUFBTSxDQUMzQyxHQUFJLEdBQVEsR0FBSSxFQUdoQixHQUZBLEVBQVEsRUFBUyxLQUFLLEdBQ3RCLEVBQU8sR0FBUSxLQUFPLEVBQUksS0FBSyxNQUFNLEdBQ2pDLENBQUUsR0FBUSxJQUFTLENBQUUsR0FBTyxHQUFJLE1BQU8sR0FDM0MsRUFBRyxHQUFNLEtBQUssRUFBVyxHQUFJLE1BQUssQ0FBQyxJQUFTLEVBQVEsRUFBTyxHQUFPLEVBQU8sU0FDbEUsRUFBVyxHQUFTLEVBQVEsR0FDbkMsTUFBTyxJQUdULEVBQVMsT0FBUyxTQUFTLEVBQU0sQ0FDL0IsTUFBTyxJQUFZLFNBQVMsRUFBTSxDQUNoQyxHQUFJLEdBQVEsRUFBTSxLQUFPLEVBQU8sR0FBTyxDQUFDLEVBQUssSUFBTyxFQUFLLFFBQVEsRUFBTyxJQUN2RSxTQUFTLEVBQU0sRUFBTSxDQUN0QixHQUFJLEdBQVEsRUFDVixHQUFJLEVBQU8sRUFBRyxLQUFPLEVBQUUsR0FBUSxHQUM3QixLQUFPLEVBQVEsRUFBTSxJQUFLLENBQUMsRUFBSyxJQUFPLEtBQ2xDLE1BQU8sRUFBRSxHQUFRLEdBQ3RCLEtBQU8sRUFBUSxFQUFNLEdBQUssQ0FBQyxFQUFLLElBQU8sS0FNM0MsR0FDRixHQUFTLE1BQVEsU0FBUyxFQUFPLEVBQUssQ0FDcEMsVUFBRyxRQUFRLENBQUMsR0FBUSxHQUFHLFFBQVEsQ0FBQyxHQUNoQyxFQUFPLElBQUssRUFBTyxJQUNaLEtBQUssTUFBTSxFQUFNLEdBQUksTUFHOUIsRUFBUyxNQUFRLFNBQVMsRUFBTSxDQUM5QixTQUFPLEtBQUssTUFBTSxHQUNYLENBQUMsU0FBUyxJQUFTLENBQUUsR0FBTyxHQUFLLEtBQ2xDLEFBQUUsRUFBTyxFQUNULEVBQVMsT0FBTyxFQUNaLFNBQVMsRUFBRyxDQUFFLE1BQU8sR0FBTSxHQUFLLEdBQVMsR0FDekMsU0FBUyxFQUFHLENBQUUsTUFBTyxHQUFTLE1BQU0sRUFBRyxHQUFLLEdBQVMsSUFIM0MsSUFPakIsRUNuRUYsS0FBTSxJQUFpQixBQURBLElBQ2lCLEdBRWxDLEdBQWMsQUFEQyxHQUFpQixHQUNILEdDQTFDLEdBQUksSUFBTUMsR0FDUixHQUFRLEVBQUssU0FBUyxFQUFHLEVBQUcsRUFBRyxHQUMvQixDQUFDLEVBQU0sSUFBUyxFQUFLLFFBQVEsRUFBSyxVQUFZLEdBQzlDLENBQUMsRUFBTyxJQUFTLEdBQU0sRUFBUyxHQUFJLG9CQUFzQixFQUFNLHFCQUF1QixJQUFrQixHQUN6RyxHQUFRLEVBQUssVUFBWSxzSEMwcUNhLE9BQU0sb0JBQ0osT0FBTSw0UEFuSFIsT0FBTSxvQkFDSixPQUFNLG9HQTdHakIsZUFBN0IsdUNBQTZCLHVIQVV0QixLQUFNLGNBQWdCLGtCQThEbkIsS0FBTSw4QkFxRUgsOEJBQUwsMENBcUJHLFFBQWEsU0FBWSxLQUFNLHlCQUEyQixtQ0FPMUQsUUFBYSxvQkFnRlIsTUFBTSx5QkFBMkIsUUFBa0IsT0FBWSx5SUFoSHRFLHdNQVdZLEtBQU0scUNBTVYsTUFBVSwyREFMRyxLQUFNLFdBQWEsaUNBQ3RCLEtBQU0sV0FBYSwySEFyQnhCLEtBQU0sNENBMUQxQixxQ0F1REEsVUFTRSxPQUNFLHFCQUlGLDZEQU9BLCtHQVVZLEtBQU0sY0FBZ0IsUUFBdUIsUUFBN0MsTUFBTSxjQUFnQixRQUF1QixrREFDdkMsMEJBQ0Esd0JBQ0YseUJBQ0MseURBdkpkLEtBQU0sY0FBZ0IseUVBOERuQixLQUFNLHNHQWlFUCx3QkFJSSw0QkFBTCw4SUFBQSxPQXFCRyxPQUFhLFNBQVksS0FBTSx5QkFBMkIseUtBZGhELEtBQU0sbUVBTVYsTUFBVSw2Q0FMRyxLQUFNLFdBQWEseUNBQ3RCLEtBQU0sV0FBYSwySUFyQnhCLEtBQU0sZ0xBckZqQixZQUFBLGVBQWMsZUFBZSxXQUM1QixRQUFTLEtBQVksUUFBVSxxQkFHN0IsWUFBQSxlQUFjLGVBQWUsV0FDN0IsSUFBSywwQkFqQ1IsS0FBTSxjQUFnQixnQkFZcEIsS0FBTSwyQkF5Qk4sS0FBTSwwTkExQjZCLEtBQU0sNEJBaEJsRCxnQ0FnQkUsNkJBZ0JFLHFCQUlFLDhEQW5DWSwwQkFDQSx3QkFDRix5QkFDQyxpQ0FDVixLQUFNLGNBQWdCLCtEQVlwQixLQUFNLDRGQWdCUixZQUFBLGVBQWMsZUFBZSxXQUM1QixRQUFTLEtBQVksUUFBVSx1Q0FHN0IsWUFBQSxlQUFjLGVBQWUsV0FDN0IsSUFBSywwQkFJTixLQUFNLCtHQTFCNkIsS0FBTSwwR0FSekMsV0FBQSxjQUFjLGVBQWUsV0FBYSxNQUFPLHFCQUU5QyxXQUFBLGNBQWMsZUFBZSxXQUM3QixLQUFNLHNJQUxkLFNBQ0UscUJBRUUsNkNBREMsV0FBQSxjQUFjLGVBQWUsV0FBYSxNQUFPLHNDQUU5QyxXQUFBLGNBQWMsZUFBZSxXQUM3QixLQUFNLGltQkFRQSw4Q0FEWixTQUlFLE9BS0UsMEJBUFEsNkNBREEsMGxCQXlCQSw4Q0FEWixTQUlFLE9BS0UsMEJBUFEsNkNBREEsdURBbUJULE1BQU0sUUFBUSwwRUFERixLQUFNLGVBQXpCLGlEQUNPLE1BQU0sUUFBUSw2RkFERixLQUFNLHVFQUVkLDJCQUFMLDRLQUFLLHdCQUFMLHVJQUFBLHVHQWVNLHFEQUZLLE9BQU0sZ0RBQVgsNkNBQUssT0FBTSxvRUFlRkMsWUFBbUIsVUFBTSxjQUFOLE9BQXFCLFdBRTVDLEtBQU0sa0JBQW9CLE9BQU0sVUFBWSxXQUFPLEtBQUssT0FBTSxZQUFsQixjQUE2QixZQVp6RSxPQUFNLG1IQVNYLHFFQVRLLE9BQU0sZ0dBVUZBLFlBQW1CLFVBQU0sY0FBTixPQUFxQiwwQ0FFNUMsS0FBTSxrQkFBb0IsT0FBTSxVQUFZLFdBQU8sS0FBSyxPQUFNLFlBQWxCLGNBQTZCLG9MQVZyRSxRQUFNLG9HQURiLHdJQUtVLE9BQU0sK0VBQU4sT0FBTSw2REFGVCxPQUFNLCtEQURBLE9BQU0seUNBQWYsNkNBQ0csT0FBTSxpREFEQSxPQUFNLGdFQVdWLE9BQU8sUUFBUSxPQUFNLCtCQUExQix5SEFESiwrRUFDUyxPQUFPLFFBQVEsT0FBTSw0QkFBMUIsK0hBQUEseURBSVcsa0JBQ1IsOERBRFksbUNBRGYsU0FDRSx1RUFBUyx5Q0FDUiw2RkF6Qkwsa0NBS0EsNk9BZGEsT0FBTSx5Q0FDVCxXQUFBLGNBQWEsUUFBUSxPQUFNLGNBQWUsV0FIOUQsU0FVRSw2S0FNUSxxR0FkYSxPQUFNLHFEQUNULFdBQUEsY0FBYSxRQUFRLE9BQU0sY0FBZSwrRkFnRS9ELE9BQUssa0VBRFcsT0FBSyxxQkFBdUIscUNBQS9DLG9EQUNHLE9BQUssZ0RBRFcsT0FBSyxxQkFBdUIsZ0RBc0J0QywyQkFBTCw0SEFESiwrRUFDUyx3QkFBTCwrSEFBQSx1RkFDbUIsT0FBSyxxQkFBdUIsaUJBQS9DLDBDQUFtQixPQUFLLHFCQUF1QixrREFzRmxDLEtBQWEsOENBRFQsMkRBQXJCLDhDQUNpQixLQUFhLHlFQWpGbkIsT0FBYyw0QkFBdkIsc0NBa0VJLEtBQU0sK01BbEVELE9BQWMseUJBQXZCLHVJQUFBLE9Ba0VJLEtBQU0sdUxBM0NFLGlDQUtELE9BQU0sTUFBUSxjQUFnQixRQUFNLGVBUW5DLHNOQWRZLE9BQU0saUJBQW1CLHVEQVZ4QixPQUFNLHlDQUNULFdBQUEsY0FBYSxRQUFRLE9BQU0sY0FBZSxjQUMvQyxPQUFNLGtCQUFvQix1QkFDdEMsYUFDVyxPQUFNLGdCQUFrQixzQkFDeEIsT0FBTSxnQkFBa0IsNEJBQzdCLE9BQU0sc0JBQXdCLDhCQUN4QixPQUFNLHFCQUF1QixpQ0FmekIsT0FBTSw0QkFPUCxRQUFvQixPQUFNLFlBVDVDLFNBa0JFLDZMQVFPLE9BQU0sTUFBUSxjQUFnQixRQUFNLDREQVFuQywrRkFkWSxPQUFNLGlCQUFtQix5Q0FWeEIsT0FBTSxvREFDVCxZQUFBLGVBQWEsUUFBUSxPQUFNLGNBQWUsc0RBQy9DLE9BQU0sa0JBQW9CLG9DQUN0QyxhQUNXLE9BQU0sZ0JBQWtCLHNCQUN4QixPQUFNLGdCQUFrQix5Q0FDN0IsT0FBTSxzQkFBd0IsMkNBQ3hCLE9BQU0scUJBQXVCLDhDQWZ6QixPQUFNLHlDQU9QLFFBQW9CLE9BQU0sOEhBZXRDLHFEQUZLLE9BQU0sZ0RBQVgsNENBQUssT0FBTSwwREFNUixNQUNLLE1BQUssT0FBTSxLQUFLLFdBQWEsS0FDakMsS0FBTSwwRUFIViw0Q0FDRyxNQUNLLE1BQUssT0FBTSxLQUFLLFdBQWEsS0FDakMsS0FBTSx3RUFlREEsWUFBbUIsVUFBTSxjQUFOLE9BQXFCLFdBRTVDLEtBQU0sa0JBQW9CLE9BQU0sVUFBWSxXQUFPLEtBQUssT0FBTSxZQUFsQixjQUE2QixZQVp6RSxPQUFNLG1IQVNYLHFFQVRLLE9BQU0sK0ZBVUZBLFlBQW1CLFVBQU0sY0FBTixPQUFxQix5Q0FFNUMsS0FBTSxrQkFBb0IsT0FBTSxVQUFZLFdBQU8sS0FBSyxPQUFNLFlBQWxCLGNBQTZCLG9MQVZyRSxRQUFNLG9HQURiLHdJQUtVLE9BQU0sOEVBQU4sT0FBTSw2REFGVCxPQUFNLCtEQURBLE9BQU0seUNBQWYsNENBQ0csT0FBTSxnREFEQSxPQUFNLGdFQVdWLE9BQU8sUUFBUSxPQUFNLCtCQUExQix5SEFESiw4RUFDUyxPQUFPLFFBQVEsT0FBTSw0QkFBMUIsK0hBQUEseURBSVcsa0JBQ1IsNERBRFksNEJBRGYsU0FDRSwrREFBUyx3Q0FDUiwyREF2RFosUUFBUyxPQUFNLG9CQUFzQiw4RUFBckMsUUFBUyxPQUFNLG9CQUFzQixnbEJBa0VYLHFCQUEvQixTQUNFLE9BTUUsd0NBUDJCLGtFQXRPbkIsMkZBUm5CLDZHQVFLLHVIQURDLE1BQVcsU0FBVyxLQUFNLDJCQUZqQixvQkFDSixLQUFNLGNBQWdCLGdCQVJ4Qyx1Q0FNQSxvR0FKSyxnR0FRSyw0Q0FEQyxNQUFXLFNBQVcsS0FBTSxzREFGakIsK0JBQ0osS0FBTSxjQUFnQixnV0F0OUJ2QixHQUFBLE1BQUEsS0FBQSxvQkFBQSxFQUFBLEVBQUEsRUFBQSwrL05BaWlDVSxJQUFPLEdBQWEsRUFBSSxTQUN4QixLQUNMLEVBQUcsTUFBUSxTQUNiLEdBQWEsRUFBSSxVQTRGVixJQUFPLEdBQWEsRUFBSSxTQUN4QixLQUNMLEVBQUcsTUFBUSxTQUNiLEdBQWEsRUFBSSwrQ0F2QmxCLG9FQXpCSSxJQUNYLEVBQU0sc0JBQ1IsRUFBTTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OyJ9
