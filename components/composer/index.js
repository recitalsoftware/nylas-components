(function($t,j){typeof exports=="object"&&typeof module!="undefined"?module.exports=j():typeof define=="function"&&define.amd?define(j):($t=typeof globalThis!="undefined"?globalThis:$t||self,$t.app=j())})(this,function(){"use strict";const $t=window.customElements.define.bind(window.customElements);window.customElements.define=(r,...e)=>{if(!customElements.get(r))return $t(r,...e)};function j(){}function $(r,e){for(const t in e)r[t]=e[t];return r}function Hr(r){return r()}function en(){return Object.create(null)}function et(r){r.forEach(Hr)}function er(r){return typeof r=="function"}function He(r,e){return r!=r?e==e:r!==e||r&&typeof r=="object"||typeof r=="function"}function _r(r,e){return r!=r?e==e:r!==e}function tn(r){return Object.keys(r).length===0}function rn(r,...e){if(r==null)return j;const t=r.subscribe(...e);return t.unsubscribe?()=>t.unsubscribe():t}function pr(r,e,t){r.$$.on_destroy.push(rn(e,t))}function pe(r){const e={};for(const t in r)t[0]!=="$"&&(e[t]=r[t]);return e}let gr=!1;function Yi(){gr=!0}function Vi(){gr=!1}function Xi(r,e,t,n){for(;r<e;){const i=r+(e-r>>1);t(i)<=n?r=i+1:e=i}return r}function Ki(r){if(r.hydrate_init)return;r.hydrate_init=!0;let e=r.childNodes;if(r.nodeName==="HEAD"){const o=[];for(let a=0;a<e.length;a++){const f=e[a];f.claim_order!==void 0&&o.push(f)}e=o}const t=new Int32Array(e.length+1),n=new Int32Array(e.length);t[0]=-1;let i=0;for(let o=0;o<e.length;o++){const a=e[o].claim_order,f=(i>0&&e[t[i]].claim_order<=a?i+1:Xi(1,i,g=>e[t[g]].claim_order,a))-1;n[o]=t[f]+1;const u=f+1;t[u]=o,i=Math.max(u,i)}const l=[],s=[];let c=e.length-1;for(let o=t[i]+1;o!=0;o=n[o-1]){for(l.push(e[o-1]);c>=o;c--)s.push(e[c]);c--}for(;c>=0;c--)s.push(e[c]);l.reverse(),s.sort((o,a)=>o.claim_order-a.claim_order);for(let o=0,a=0;o<s.length;o++){for(;a<l.length&&s[o].claim_order>=l[a].claim_order;)a++;const f=a<l.length?l[a]:null;r.insertBefore(s[o],f)}}function p(r,e){r.appendChild(e)}function T(r,e){if(gr){for(Ki(r),(r.actual_end_child===void 0||r.actual_end_child!==null&&r.actual_end_child.parentElement!==r)&&(r.actual_end_child=r.firstChild);r.actual_end_child!==null&&r.actual_end_child.claim_order===void 0;)r.actual_end_child=r.actual_end_child.nextSibling;e!==r.actual_end_child?(e.claim_order!==void 0||e.parentNode!==r)&&r.insertBefore(e,r.actual_end_child):r.actual_end_child=e.nextSibling}else(e.parentNode!==r||e.nextSibling!==null)&&r.appendChild(e)}function x(r,e,t){r.insertBefore(e,t||null)}function Ve(r,e,t){gr&&!t?T(r,e):(e.parentNode!==r||e.nextSibling!=t)&&r.insertBefore(e,t||null)}function h(r){r.parentNode.removeChild(r)}function jr(r,e){for(let t=0;t<r.length;t+=1)r[t]&&r[t].d(e)}function w(r){return document.createElement(r)}function E(r){return document.createElementNS("http://www.w3.org/2000/svg",r)}function te(r){return document.createTextNode(r)}function H(){return te(" ")}function st(){return te("")}function he(r,e,t,n){return r.addEventListener(e,t,n),()=>r.removeEventListener(e,t,n)}function Qi(r){return function(e){return e.preventDefault(),r.call(this,e)}}function qi(r){return function(e){return e.stopPropagation(),r.call(this,e)}}function d(r,e,t){t==null?r.removeAttribute(e):r.getAttribute(e)!==t&&r.setAttribute(e,t)}function ye(r,e){for(const t in e)d(r,t,e[t])}function q(r,e,t){e in r?r[e]=typeof r[e]=="boolean"&&t===""?!0:t:d(r,e,t)}function C(r){return Array.from(r.childNodes)}function $i(r){r.claim_info===void 0&&(r.claim_info={last_index:0,total_claimed:0})}function nn(r,e,t,n,i=!1){$i(r);const l=(()=>{for(let s=r.claim_info.last_index;s<r.length;s++){const c=r[s];if(e(c)){const o=t(c);return o===void 0?r.splice(s,1):r[s]=o,i||(r.claim_info.last_index=s),c}}for(let s=r.claim_info.last_index-1;s>=0;s--){const c=r[s];if(e(c)){const o=t(c);return o===void 0?r.splice(s,1):r[s]=o,i?o===void 0&&r.claim_info.last_index--:r.claim_info.last_index=s,c}}return n()})();return l.claim_order=r.claim_info.total_claimed,r.claim_info.total_claimed+=1,l}function eo(r,e,t,n){return nn(r,i=>i.nodeName===e,i=>{const l=[];for(let s=0;s<i.attributes.length;s++){const c=i.attributes[s];t[c.name]||l.push(c.name)}l.forEach(s=>i.removeAttribute(s))},()=>n(e))}function S(r,e,t){return eo(r,e,t,E)}function vt(r,e){return nn(r,t=>t.nodeType===3,t=>{const n=""+e;if(t.data.startsWith(n)){if(t.data.length!==n.length)return t.splitText(n.length)}else t.data=n},()=>te(e),!0)}function Ae(r,e){e=""+e,r.wholeText!==e&&(r.data=e)}function on(r,e){r.value=e==null?"":e}function br(r,e){for(let t=0;t<r.options.length;t+=1){const n=r.options[t];if(n.__value===e){n.selected=!0;return}}r.selectedIndex=-1}function Fe(r,e,t){r.classList[t?"add":"remove"](e)}function Et(r){const e={};for(const t of r)e[t.name]=t.value;return e}let tr;function rr(r){tr=r}function ln(){if(!tr)throw new Error("Function called outside component initialization");return tr}function to(r){ln().$$.on_mount.push(r)}const nr=[],Ct=[],vr=[],sn=[],an=Promise.resolve();let Br=!1;function cn(){Br||(Br=!0,an.then(z))}function wr(){return cn(),an}function yr(r){vr.push(r)}const Ur=new Set;let kr=0;function z(){const r=tr;do{for(;kr<nr.length;){const e=nr[kr];kr++,rr(e),ro(e.$$)}for(rr(null),nr.length=0,kr=0;Ct.length;)Ct.pop()();for(let e=0;e<vr.length;e+=1){const t=vr[e];Ur.has(t)||(Ur.add(t),t())}vr.length=0}while(nr.length);for(;sn.length;)sn.pop()();Br=!1,Ur.clear(),rr(r)}function ro(r){if(r.fragment!==null){r.update(),et(r.before_update);const e=r.dirty;r.dirty=[-1],r.fragment&&r.fragment.p(r.ctx,e),r.after_update.forEach(yr)}}const xr=new Set;let zt;function We(){zt={r:0,c:[],p:zt}}function Ze(){zt.r||et(zt.c),zt=zt.p}function W(r,e){r&&r.i&&(xr.delete(r),r.i(e))}function re(r,e,t,n){if(r&&r.o){if(xr.has(r))return;xr.add(r),zt.c.push(()=>{xr.delete(r),n&&(t&&r.d(1),n())}),r.o(e)}}function Er(r,e){r.d(1),e.delete(r.key)}function Cr(r,e,t,n,i,l,s,c,o,a,f,u){let g=r.length,b=l.length,v=g;const A={};for(;v--;)A[r[v].key]=v;const y=[],O=new Map,R=new Map;for(v=b;v--;){const P=u(i,l,v),M=t(P);let U=s.get(M);U?n&&U.p(P,e):(U=a(M,P),U.c()),O.set(M,y[v]=U),M in A&&R.set(M,Math.abs(v-A[M]))}const G=new Set,le=new Set;function ee(P){W(P,1),P.m(c,f),s.set(P.key,P),f=P.first,b--}for(;g&&b;){const P=y[b-1],M=r[g-1],U=P.key,fe=M.key;P===M?(f=P.first,g--,b--):O.has(fe)?!s.has(U)||G.has(U)?ee(P):le.has(fe)?g--:R.get(U)>R.get(fe)?(le.add(U),ee(P)):(G.add(fe),g--):(o(M,s),g--)}for(;g--;){const P=r[g];O.has(P.key)||o(P,s)}for(;b;)ee(y[b-1]);return y}function Xe(r,e){const t={},n={},i={$$scope:1};let l=r.length;for(;l--;){const s=r[l],c=e[l];if(c){for(const o in s)o in c||(n[o]=1);for(const o in c)i[o]||(t[o]=c[o],i[o]=1);r[l]=c}else for(const o in s)i[o]=1}for(const s in n)s in t||(t[s]=void 0);return t}function nt(r){r&&r.c()}function rt(r,e,t,n){const{fragment:i,on_mount:l,on_destroy:s,after_update:c}=r.$$;i&&i.m(e,t),n||yr(()=>{const o=l.map(Hr).filter(er);s?s.push(...o):et(o),r.$$.on_mount=[]}),c.forEach(yr)}function tt(r,e){const t=r.$$;t.fragment!==null&&(et(t.on_destroy),t.fragment&&t.fragment.d(e),t.on_destroy=t.fragment=null,t.ctx=[])}function no(r,e){r.$$.dirty[0]===-1&&(nr.push(r),cn(),r.$$.dirty.fill(0)),r.$$.dirty[e/31|0]|=1<<e%31}function Me(r,e,t,n,i,l,s,c=[-1]){const o=tr;rr(r);const a=r.$$={fragment:null,ctx:null,props:l,update:j,not_equal:i,bound:en(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(o?o.$$.context:[])),callbacks:en(),dirty:c,skip_bound:!1,root:e.target||o.$$.root};s&&s(a.root);let f=!1;if(a.ctx=t?t(r,e.props||{},(u,g,...b)=>{const v=b.length?b[0]:g;return a.ctx&&i(a.ctx[u],a.ctx[u]=v)&&(!a.skip_bound&&a.bound[u]&&a.bound[u](v),f&&no(r,u)),g}):[],a.update(),f=!0,et(a.before_update),a.fragment=n?n(a.ctx):!1,e.target){if(e.hydrate){Yi();const u=C(e.target);a.fragment&&a.fragment.l(u),u.forEach(h)}else a.fragment&&a.fragment.c();e.intro&&W(r.$$.fragment),rt(r,e.target,e.anchor,e.customElement),Vi(),z()}rr(o)}let wt;typeof HTMLElement=="function"&&(wt=class extends HTMLElement{constructor(){super();this.attachShadow({mode:"open"})}connectedCallback(){const{on_mount:r}=this.$$;this.$$.on_disconnect=r.map(Hr).filter(er);for(const e in this.$$.slotted)this.appendChild(this.$$.slotted[e])}attributeChangedCallback(r,e,t){this[r]=t}disconnectedCallback(){et(this.$$.on_disconnect)}$destroy(){tt(this,1),this.$destroy=j}$on(r,e){const t=this.$$.callbacks[r]||(this.$$.callbacks[r]=[]);return t.push(e),()=>{const n=t.indexOf(e);n!==-1&&t.splice(n,1)}}$set(r){this.$$set&&!tn(r)&&(this.$$.skip_bound=!0,this.$$set(r),this.$$.skip_bound=!1)}});class Ke{$destroy(){tt(this,1),this.$destroy=j}$on(e,t){const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(t),()=>{const i=n.indexOf(t);i!==-1&&n.splice(i,1)}}$set(e){this.$$set&&!tn(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}function io(r){let e,t,n,i,l,s=[{width:"256px"},{height:"256px"},{viewBox:"0 0 256 256"},{version:"1.1"},{xmlns:"http://www.w3.org/2000/svg"},{"xmlns:xlink":"http://www.w3.org/1999/xlink"},r[0]],c={};for(let o=0;o<s.length;o+=1)c=$(c,s[o]);return{c(){e=E("svg"),t=E("title"),n=te("icon-bold-complete"),i=E("g"),l=E("path"),this.h()},l(o){e=S(o,"svg",{width:!0,height:!0,viewBox:!0,version:!0,xmlns:!0,"xmlns:xlink":!0});var a=C(e);t=S(a,"title",{});var f=C(t);n=vt(f,"icon-bold-complete"),f.forEach(h),i=S(a,"g",{id:!0,stroke:!0,"stroke-width":!0,"fill-rule":!0});var u=C(i);l=S(u,"path",{d:!0,id:!0,"fill-rule":!0}),C(l).forEach(h),u.forEach(h),a.forEach(h),this.h()},h(){d(l,"d","M128.159574,256 C143.489362,256 157.12234,254.037978 169.058511,250.113933 C180.994681,246.189888 191.029255,240.743079 199.162234,233.773507 C207.295213,226.803935 213.468085,218.633722 217.680851,209.262869 C221.893617,199.892016 224,189.75978 224,178.866163 C224,164.341341 219.962766,152.510638 211.888298,143.374056 C203.81383,134.237474 191.351064,127.619309 174.5,123.519561 C182.223404,120.708305 188.835106,117.369938 194.335106,113.504461 C199.835106,109.638984 204.340426,105.392816 207.851064,100.765957 C211.361702,96.1390986 213.93617,91.1608328 215.574468,85.8311599 C217.212766,80.5014871 218.031915,74.9668268 218.031915,69.2271791 C218.031915,58.6849691 216.24734,49.1384123 212.678191,40.5875086 C209.109043,32.0366049 203.404255,24.7741935 195.56383,18.8002745 C187.723404,12.8263555 177.601064,8.19949668 165.196809,4.91969801 C152.792553,1.63989934 137.755319,0 120.085106,0 L120.085106,0 L26,0 L26,256 L128.159574,256 Z M116.736842,108 L86,108 L86,45 L120.578947,45 C127.215311,45 132.949362,45.525 137.7811,46.575 C142.612839,47.625 146.600478,49.375 149.744019,51.825 C152.88756,54.275 155.216108,57.5125 156.729665,61.5375 C158.243222,65.5625 159,70.6083333 159,76.675 C159,82.8583333 158.039474,87.9916667 156.118421,92.075 C154.197368,96.1583333 151.40311,99.3666667 147.735646,101.7 C144.068182,104.033333 139.614833,105.666667 134.375598,106.6 C129.136364,107.533333 123.256778,108 116.736842,108 L116.736842,108 Z M126.754386,211 L85,211 L85,147 L126.403509,147 C133.888889,147 140.087719,147.705234 145,149.115702 C149.912281,150.526171 153.859649,152.524334 156.842105,155.110193 C159.824561,157.696051 161.929825,160.869605 163.157895,164.630854 C164.385965,168.392103 165,172.623508 165,177.325069 C165,181.438935 164.473684,185.494031 163.421053,189.490358 C162.368421,193.486685 160.438596,197.071625 157.631579,200.245179 C154.824561,203.418733 150.935673,206.004591 145.964912,208.002755 C140.994152,210.000918 134.590643,211 126.754386,211 L126.754386,211 Z"),d(l,"id","B"),d(l,"fill-rule","nonzero"),d(i,"id","icon-bold-complete"),d(i,"stroke","none"),d(i,"stroke-width","1"),d(i,"fill-rule","evenodd"),ye(e,c)},m(o,a){Ve(o,e,a),T(e,t),T(t,n),T(e,i),T(i,l)},p(o,[a]){ye(e,c=Xe(s,[{width:"256px"},{height:"256px"},{viewBox:"0 0 256 256"},{version:"1.1"},{xmlns:"http://www.w3.org/2000/svg"},{"xmlns:xlink":"http://www.w3.org/1999/xlink"},a&1&&o[0]]))},i:j,o:j,d(o){o&&h(e)}}}function oo(r,e,t){return r.$$set=n=>{t(0,e=$($({},e),pe(n)))},e=pe(e),[e]}class lo extends Ke{constructor(e){super();Me(this,e,oo,io,He,{})}}function so(r){let e,t,n,i,l,s=[{width:"256px"},{height:"256px"},{viewBox:"0 0 256 256"},{version:"1.1"},{xmlns:"http://www.w3.org/2000/svg"},{"xmlns:xlink":"http://www.w3.org/1999/xlink"},r[0]],c={};for(let o=0;o<s.length;o+=1)c=$(c,s[o]);return{c(){e=E("svg"),t=E("title"),n=te("icon-italic-complete"),i=E("g"),l=E("polygon"),this.h()},l(o){e=S(o,"svg",{width:!0,height:!0,viewBox:!0,version:!0,xmlns:!0,"xmlns:xlink":!0});var a=C(e);t=S(a,"title",{});var f=C(t);n=vt(f,"icon-italic-complete"),f.forEach(h),i=S(a,"g",{id:!0,stroke:!0,"stroke-width":!0,"fill-rule":!0});var u=C(i);l=S(u,"polygon",{id:!0,"fill-rule":!0,points:!0}),C(l).forEach(h),u.forEach(h),a.forEach(h),this.h()},h(){d(l,"id","I"),d(l,"fill-rule","nonzero"),d(l,"points","141.0907 256 172.399 -1.13686838e-13 114.7073 -1.13686838e-13 83.399 256"),d(i,"id","icon-italic-complete"),d(i,"stroke","none"),d(i,"stroke-width","1"),d(i,"fill-rule","evenodd"),ye(e,c)},m(o,a){Ve(o,e,a),T(e,t),T(t,n),T(e,i),T(i,l)},p(o,[a]){ye(e,c=Xe(s,[{width:"256px"},{height:"256px"},{viewBox:"0 0 256 256"},{version:"1.1"},{xmlns:"http://www.w3.org/2000/svg"},{"xmlns:xlink":"http://www.w3.org/1999/xlink"},a&1&&o[0]]))},i:j,o:j,d(o){o&&h(e)}}}function ao(r,e,t){return r.$$set=n=>{t(0,e=$($({},e),pe(n)))},e=pe(e),[e]}class co extends Ke{constructor(e){super();Me(this,e,ao,so,He,{})}}function fo(r){let e,t,n,i,l,s=[{width:"256px"},{height:"256px"},{viewBox:"0 0 256 256"},{version:"1.1"},{xmlns:"http://www.w3.org/2000/svg"},{"xmlns:xlink":"http://www.w3.org/1999/xlink"},r[0]],c={};for(let o=0;o<s.length;o+=1)c=$(c,s[o]);return{c(){e=E("svg"),t=E("title"),n=te("icon-underline-complete"),i=E("g"),l=E("path"),this.h()},l(o){e=S(o,"svg",{width:!0,height:!0,viewBox:!0,version:!0,xmlns:!0,"xmlns:xlink":!0});var a=C(e);t=S(a,"title",{});var f=C(t);n=vt(f,"icon-underline-complete"),f.forEach(h),i=S(a,"g",{id:!0,stroke:!0,"stroke-width":!0,"fill-rule":!0});var u=C(i);l=S(u,"path",{d:!0,id:!0,"fill-rule":!0}),C(l).forEach(h),u.forEach(h),a.forEach(h),this.h()},h(){d(l,"d","M218,232.537 L218,255.861 L39,255.861 L39,232.537 L218,232.537 Z M85.0543131,0.199 L85.0543131,123.091057 L85.0584142,123.932008 C85.1267664,130.910932 86.0495208,137.164899 87.8266773,142.693908 C89.6749201,148.444078 92.3525027,153.338851 95.8594249,157.378226 C99.3663472,161.417601 103.655218,164.506536 108.726038,166.645029 C113.796858,168.783521 119.554846,169.852768 126,169.852768 C132.445154,169.852768 138.203142,168.783521 143.273962,166.645029 C148.344782,164.506536 152.633653,161.441363 156.140575,157.449509 C159.647497,153.457656 162.32508,148.586644 164.173323,142.836475 C166.021565,137.086305 166.945687,130.552021 166.945687,123.233623 L166.945687,123.233623 L166.945687,0.199 L215,0.199 L215,123.233623 L214.995482,124.263974 C214.887062,136.600688 212.827066,147.947665 208.815495,158.304906 C204.692492,168.949849 198.792332,178.121607 191.115016,185.820181 C183.4377,193.518756 174.101704,199.506536 163.107029,203.783521 C152.112354,208.060507 139.743344,210.199 126,210.199 C112.161874,210.199 99.7454739,208.060507 88.7507987,203.783521 C77.7561235,199.506536 68.4201278,193.518756 60.7428115,185.820181 C53.0654952,178.121607 47.1890309,168.949849 43.1134185,158.304906 C39.0378062,147.659964 37,135.969536 37,123.233623 L37,123.233623 L37,0.199 L85.0543131,0.199 Z"),d(l,"id","Combined-Shape"),d(l,"fill-rule","nonzero"),d(i,"id","icon-underline-complete"),d(i,"stroke","none"),d(i,"stroke-width","1"),d(i,"fill-rule","evenodd"),ye(e,c)},m(o,a){Ve(o,e,a),T(e,t),T(t,n),T(e,i),T(i,l)},p(o,[a]){ye(e,c=Xe(s,[{width:"256px"},{height:"256px"},{viewBox:"0 0 256 256"},{version:"1.1"},{xmlns:"http://www.w3.org/2000/svg"},{"xmlns:xlink":"http://www.w3.org/1999/xlink"},a&1&&o[0]]))},i:j,o:j,d(o){o&&h(e)}}}function uo(r,e,t){return r.$$set=n=>{t(0,e=$($({},e),pe(n)))},e=pe(e),[e]}class ho extends Ke{constructor(e){super();Me(this,e,uo,fo,He,{})}}function mo(r){let e,t,n,i,l,s=[{width:"256px"},{height:"256px"},{viewBox:"0 0 256 256"},{version:"1.1"},{xmlns:"http://www.w3.org/2000/svg"},{"xmlns:xlink":"http://www.w3.org/1999/xlink"},r[0]],c={};for(let o=0;o<s.length;o+=1)c=$(c,s[o]);return{c(){e=E("svg"),t=E("title"),n=te("icon-list-complete"),i=E("g"),l=E("path"),this.h()},l(o){e=S(o,"svg",{width:!0,height:!0,viewBox:!0,version:!0,xmlns:!0,"xmlns:xlink":!0});var a=C(e);t=S(a,"title",{});var f=C(t);n=vt(f,"icon-list-complete"),f.forEach(h),i=S(a,"g",{id:!0,stroke:!0,"stroke-width":!0,"fill-rule":!0});var u=C(i);l=S(u,"path",{d:!0,id:!0,"fill-rule":!0}),C(l).forEach(h),u.forEach(h),a.forEach(h),this.h()},h(){d(l,"d","M15.9026369,188 C18.5422583,188 20.8248817,188.27794 22.7505071,188.833819 C24.6761325,189.389699 26.2555781,190.159378 27.4888438,191.142857 C28.7221095,192.126336 29.6308316,193.280855 30.2150101,194.606414 C30.7991886,195.931973 31.0912779,197.364431 31.0912779,198.90379 C31.0912779,201.469388 30.5179175,203.511176 29.3711968,205.029155 C28.224476,206.547133 26.8505747,207.733722 25.2494929,208.588921 C27.1534821,209.358601 28.7545639,210.51312 30.0527383,212.052478 C31.3509128,213.591837 32,215.665695 32,218.274052 C32,220.326531 31.6538201,222.186589 30.9614604,223.854227 C30.2691007,225.521866 29.2305612,226.965015 27.8458418,228.183673 C26.4611224,229.402332 24.7085869,230.343052 22.5882353,231.005831 C20.4678837,231.66861 17.9580798,232 15.0588235,232 C11.8999324,232 9.40094659,231.72206 7.56186613,231.166181 C5.72278567,230.610301 4.21906694,230.011662 3.05070994,229.370262 C2.14198783,228.899903 1.42799189,228.290573 0.90872211,227.542274 C0.389452333,226.793975 0.129817444,226.056365 0.129817444,225.329446 C0.129817444,224.474247 0.346179851,223.512148 0.778904665,222.443149 C1.21162948,221.37415 2.07707911,219.856171 3.37525355,217.889213 C4.63015551,219.000972 6.1663286,220.005831 7.98377282,220.90379 C9.80121704,221.801749 11.8133874,222.250729 14.020284,222.250729 C15.4915483,222.250729 16.6707235,221.876579 17.5578093,221.12828 C18.4448952,220.379981 18.8884381,219.278912 18.8884381,217.825073 C18.8884381,216.884354 18.7261663,216.136054 18.4016227,215.580175 C18.0770791,215.024295 17.6768087,214.596696 17.2008114,214.297376 C16.7248141,213.998056 16.1947262,213.794947 15.6105477,213.688047 C15.0263692,213.581147 14.4530088,213.527697 13.8904665,213.527697 L13.8904665,213.527697 L9.28194726,213.527697 L9.28194726,204.676385 L13.8255578,204.676385 L14.0831643,204.669704 C15.020284,204.620708 15.8755916,204.302235 16.6490872,203.714286 C17.4929006,203.072886 17.9148073,202.153547 17.9148073,200.956268 C17.9148073,199.758989 17.525355,198.90379 16.7464503,198.390671 C15.9675456,197.877551 14.9506423,197.620991 13.6957404,197.620991 C12.0513861,197.620991 10.4719405,197.941691 8.95740365,198.58309 C7.4428668,199.22449 5.71196755,200.229349 3.76470588,201.597668 C2.59634888,200.272109 1.67680865,199.09621 1.00608519,198.069971 C0.335361731,197.043732 0,196.060253 0,195.119534 C0,194.307094 0.227180527,193.622935 0.681541582,193.067055 C1.13590264,192.511176 1.66599053,192.019436 2.27180527,191.591837 C3.52670723,190.736638 5.29006085,189.924198 7.56186613,189.154519 C9.8336714,188.38484 12.6139283,188 15.9026369,188 Z M256,191 L256,231 L58,231 L58,191 L256,191 Z M256,110 L256,150 L58,150 L58,110 L256,110 Z M17.0752475,106 C19.1663366,106 21.1485149,106.224292 23.0217822,106.672876 C24.8950495,107.121461 26.539604,107.85842 27.9554455,108.883756 C29.3712871,109.909091 30.4930693,111.244163 31.3207921,112.888972 C32.1485149,114.53378 32.5623762,116.531048 32.5623762,118.880775 C32.5623762,120.418778 32.3445545,121.903378 31.9089109,123.334575 C31.4732673,124.765772 30.8742574,126.143567 30.1118812,127.467958 C29.349505,128.79235 28.4673267,130.074019 27.4653465,131.312966 C26.4633663,132.551913 25.3960396,133.726776 24.2633663,134.837556 C23.4792079,135.606557 22.6950495,136.364878 21.9108911,137.112519 C21.1267327,137.860159 20.3207921,138.575758 19.4930693,139.259314 L19.4930693,139.259314 L27.0079208,139.259314 L27.3805372,139.263765 C29.4640295,139.314201 31.0715072,139.793343 32.2029703,140.701192 C33.4009901,141.662444 34,143.147044 34,145.154993 C34,145.753105 33.9891089,146.276453 33.9673267,146.725037 C33.9455446,147.173621 33.9346535,147.568803 33.9346535,147.910581 C33.8910891,148.337804 33.8693069,148.700944 33.8693069,149 L33.8693069,149 L2.11089109,149 L2.11089109,140.4769 L2.48896747,140.195064 C3.25445545,139.617005 4.07595474,138.952629 4.95346535,138.201937 C5.97722772,137.32613 7.04455446,136.39692 8.15544554,135.414307 C9.26633663,134.431694 10.3772277,133.395678 11.4881188,132.306259 C12.5990099,131.216841 13.6772277,130.138102 14.7227723,129.070045 C16.2039604,127.532042 17.3584158,126.090164 18.1861386,124.744411 C19.0138614,123.398659 19.4277228,121.956781 19.4277228,120.418778 C19.4277228,119.564332 19.2861386,118.859414 19.0029703,118.304024 C18.719802,117.748634 18.349505,117.30005 17.8920792,116.958271 C17.4346535,116.616493 16.9118812,116.37084 16.3237624,116.221311 C15.7356436,116.071783 15.1584158,115.997019 14.5920792,115.997019 C12.849505,115.997019 11.1613861,116.402881 9.52772277,117.214605 C7.89405941,118.026329 6.42376238,118.96622 5.11683168,120.034277 C3.94059406,118.709886 2.96039604,117.460258 2.17623762,116.285395 C1.39207921,115.110532 1,114.095877 1,113.241431 C1,112.557874 1.18514851,111.959762 1.55544554,111.447094 C1.92574257,110.934426 2.43762376,110.44312 3.09108911,109.973174 C3.7009901,109.545951 4.44158416,109.097367 5.31287129,108.627422 C6.18415842,108.157476 7.1970297,107.730253 8.35148515,107.345753 C9.50594059,106.961252 10.8019802,106.640835 12.239604,106.384501 C13.6772277,106.128167 15.2891089,106 17.0752475,106 Z M256,28 L256,68 L58,68 L58,28 L256,28 Z M22.9369863,25 C24.1643836,25 25.1945205,25.1401003 26.0273973,25.4203008 C26.860274,25.7005013 27.5178082,25.9914787 28,26.2932331 L28,26.2932331 L28,68 L15.0465753,68 L15.0465753,40.0015038 L7.41917808,43.6225564 L6.9260274,42.8686015 C6.27726027,41.8581554 5.66356164,40.8270175 5.08493151,39.775188 C4.36164384,38.460401 4,37.2426065 4,36.1218045 C4,35.0010025 4.23013699,34.1496241 4.69041096,33.5676692 C5.15068493,32.9857143 6.03835616,32.3498747 7.35342466,31.6601504 L7.35342466,31.6601504 L17.1506849,26.6165414 L17.6091324,26.3866332 C18.3701674,26.0154275 19.1159817,25.7040936 19.8465753,25.4526316 C20.7232877,25.1508772 21.7534247,25 22.9369863,25 Z"),d(l,"id","Combined-Shape"),d(l,"fill-rule","nonzero"),d(i,"id","icon-list-complete"),d(i,"stroke","none"),d(i,"stroke-width","1"),d(i,"fill-rule","evenodd"),ye(e,c)},m(o,a){Ve(o,e,a),T(e,t),T(t,n),T(e,i),T(i,l)},p(o,[a]){ye(e,c=Xe(s,[{width:"256px"},{height:"256px"},{viewBox:"0 0 256 256"},{version:"1.1"},{xmlns:"http://www.w3.org/2000/svg"},{"xmlns:xlink":"http://www.w3.org/1999/xlink"},a&1&&o[0]]))},i:j,o:j,d(o){o&&h(e)}}}function _o(r,e,t){return r.$$set=n=>{t(0,e=$($({},e),pe(n)))},e=pe(e),[e]}class po extends Ke{constructor(e){super();Me(this,e,_o,mo,He,{})}}function go(r){let e,t,n,i,l,s=[{width:"256px"},{height:"256px"},{viewBox:"0 0 256 256"},{version:"1.1"},{xmlns:"http://www.w3.org/2000/svg"},{"xmlns:xlink":"http://www.w3.org/1999/xlink"},r[0]],c={};for(let o=0;o<s.length;o+=1)c=$(c,s[o]);return{c(){e=E("svg"),t=E("title"),n=te("icon-bullet-complete"),i=E("g"),l=E("path"),this.h()},l(o){e=S(o,"svg",{width:!0,height:!0,viewBox:!0,version:!0,xmlns:!0,"xmlns:xlink":!0});var a=C(e);t=S(a,"title",{});var f=C(t);n=vt(f,"icon-bullet-complete"),f.forEach(h),i=S(a,"g",{id:!0,stroke:!0,"stroke-width":!0,"fill-rule":!0});var u=C(i);l=S(u,"path",{d:!0,id:!0,"fill-rule":!0}),C(l).forEach(h),u.forEach(h),a.forEach(h),this.h()},h(){d(l,"d","M256,188 L256,227 L67,227 L67,188 L256,188 Z M41,188 L41,227 L0,227 L0,188 L41,188 Z M256,109 L256,148 L67,148 L67,109 L256,109 Z M41,109 L41,148 L0,148 L0,109 L41,109 Z M256,30 L256,69 L67,69 L67,30 L256,30 Z M41,30 L41,69 L0,69 L0,30 L41,30 Z"),d(l,"id","Combined-Shape"),d(l,"fill-rule","nonzero"),d(i,"id","icon-bullet-complete"),d(i,"stroke","none"),d(i,"stroke-width","1"),d(i,"fill-rule","evenodd"),ye(e,c)},m(o,a){Ve(o,e,a),T(e,t),T(t,n),T(e,i),T(i,l)},p(o,[a]){ye(e,c=Xe(s,[{width:"256px"},{height:"256px"},{viewBox:"0 0 256 256"},{version:"1.1"},{xmlns:"http://www.w3.org/2000/svg"},{"xmlns:xlink":"http://www.w3.org/1999/xlink"},a&1&&o[0]]))},i:j,o:j,d(o){o&&h(e)}}}function bo(r,e,t){return r.$$set=n=>{t(0,e=$($({},e),pe(n)))},e=pe(e),[e]}class vo extends Ke{constructor(e){super();Me(this,e,bo,go,He,{})}}function wo(r){let e,t,n,i,l,s=[{width:"256px"},{height:"256px"},{viewBox:"0 0 256 256"},{version:"1.1"},{xmlns:"http://www.w3.org/2000/svg"},{"xmlns:xlink":"http://www.w3.org/1999/xlink"},r[0]],c={};for(let o=0;o<s.length;o+=1)c=$(c,s[o]);return{c(){e=E("svg"),t=E("title"),n=te("icon-aligned-left-complete"),i=E("g"),l=E("path"),this.h()},l(o){e=S(o,"svg",{width:!0,height:!0,viewBox:!0,version:!0,xmlns:!0,"xmlns:xlink":!0});var a=C(e);t=S(a,"title",{});var f=C(t);n=vt(f,"icon-aligned-left-complete"),f.forEach(h),i=S(a,"g",{id:!0,stroke:!0,"stroke-width":!0,"fill-rule":!0});var u=C(i);l=S(u,"path",{d:!0,id:!0,"fill-rule":!0}),C(l).forEach(h),u.forEach(h),a.forEach(h),this.h()},h(){d(l,"d","M256,190 L256,232 L0,232 L0,190 L256,190 Z M162,107 L162,149 L0,149 L0,107 L162,107 Z M256,24 L256,66 L0,66 L0,24 L256,24 Z"),d(l,"id","Combined-Shape"),d(l,"fill-rule","nonzero"),d(i,"id","icon-aligned-left-complete"),d(i,"stroke","none"),d(i,"stroke-width","1"),d(i,"fill-rule","evenodd"),ye(e,c)},m(o,a){Ve(o,e,a),T(e,t),T(t,n),T(e,i),T(i,l)},p(o,[a]){ye(e,c=Xe(s,[{width:"256px"},{height:"256px"},{viewBox:"0 0 256 256"},{version:"1.1"},{xmlns:"http://www.w3.org/2000/svg"},{"xmlns:xlink":"http://www.w3.org/1999/xlink"},a&1&&o[0]]))},i:j,o:j,d(o){o&&h(e)}}}function yo(r,e,t){return r.$$set=n=>{t(0,e=$($({},e),pe(n)))},e=pe(e),[e]}class ko extends Ke{constructor(e){super();Me(this,e,yo,wo,He,{})}}function xo(r){let e,t,n,i,l,s=[{width:"256px"},{height:"256px"},{viewBox:"0 0 256 256"},{version:"1.1"},{xmlns:"http://www.w3.org/2000/svg"},{"xmlns:xlink":"http://www.w3.org/1999/xlink"},r[0]],c={};for(let o=0;o<s.length;o+=1)c=$(c,s[o]);return{c(){e=E("svg"),t=E("title"),n=te("icon-aligned-right-complete"),i=E("g"),l=E("path"),this.h()},l(o){e=S(o,"svg",{width:!0,height:!0,viewBox:!0,version:!0,xmlns:!0,"xmlns:xlink":!0});var a=C(e);t=S(a,"title",{});var f=C(t);n=vt(f,"icon-aligned-right-complete"),f.forEach(h),i=S(a,"g",{id:!0,stroke:!0,"stroke-width":!0,"fill-rule":!0});var u=C(i);l=S(u,"path",{d:!0,id:!0,"fill-rule":!0,transform:!0}),C(l).forEach(h),u.forEach(h),a.forEach(h),this.h()},h(){d(l,"d","M256,190 L256,232 L0,232 L0,190 L256,190 Z M162,107 L162,149 L0,149 L0,107 L162,107 Z M256,24 L256,66 L0,66 L0,24 L256,24 Z"),d(l,"id","Combined-Shape"),d(l,"fill-rule","nonzero"),d(l,"transform","translate(128.000000, 128.000000) scale(-1, 1) translate(-128.000000, -128.000000) "),d(i,"id","icon-aligned-right-complete"),d(i,"stroke","none"),d(i,"stroke-width","1"),d(i,"fill-rule","evenodd"),ye(e,c)},m(o,a){Ve(o,e,a),T(e,t),T(t,n),T(e,i),T(i,l)},p(o,[a]){ye(e,c=Xe(s,[{width:"256px"},{height:"256px"},{viewBox:"0 0 256 256"},{version:"1.1"},{xmlns:"http://www.w3.org/2000/svg"},{"xmlns:xlink":"http://www.w3.org/1999/xlink"},a&1&&o[0]]))},i:j,o:j,d(o){o&&h(e)}}}function Eo(r,e,t){return r.$$set=n=>{t(0,e=$($({},e),pe(n)))},e=pe(e),[e]}class Co extends Ke{constructor(e){super();Me(this,e,Eo,xo,He,{})}}function So(r){let e,t,n,i,l,s=[{width:"256px"},{height:"256px"},{viewBox:"0 0 256 256"},{version:"1.1"},{xmlns:"http://www.w3.org/2000/svg"},{"xmlns:xlink":"http://www.w3.org/1999/xlink"},r[0]],c={};for(let o=0;o<s.length;o+=1)c=$(c,s[o]);return{c(){e=E("svg"),t=E("title"),n=te("icon-centered-complete"),i=E("g"),l=E("path"),this.h()},l(o){e=S(o,"svg",{width:!0,height:!0,viewBox:!0,version:!0,xmlns:!0,"xmlns:xlink":!0});var a=C(e);t=S(a,"title",{});var f=C(t);n=vt(f,"icon-centered-complete"),f.forEach(h),i=S(a,"g",{id:!0,stroke:!0,"stroke-width":!0,"fill-rule":!0});var u=C(i);l=S(u,"path",{d:!0,id:!0,"fill-rule":!0}),C(l).forEach(h),u.forEach(h),a.forEach(h),this.h()},h(){d(l,"d","M204,186 L204,224 L52,224 L52,186 L204,186 Z M257,110 L257,148 L0,148 L0,110 L257,110 Z M204,32 L204,70 L52,70 L52,32 L204,32 Z"),d(l,"id","Combined-Shape"),d(l,"fill-rule","nonzero"),d(i,"id","icon-centered-complete"),d(i,"stroke","none"),d(i,"stroke-width","1"),d(i,"fill-rule","evenodd"),ye(e,c)},m(o,a){Ve(o,e,a),T(e,t),T(t,n),T(e,i),T(i,l)},p(o,[a]){ye(e,c=Xe(s,[{width:"256px"},{height:"256px"},{viewBox:"0 0 256 256"},{version:"1.1"},{xmlns:"http://www.w3.org/2000/svg"},{"xmlns:xlink":"http://www.w3.org/1999/xlink"},a&1&&o[0]]))},i:j,o:j,d(o){o&&h(e)}}}function To(r,e,t){return r.$$set=n=>{t(0,e=$($({},e),pe(n)))},e=pe(e),[e]}class Lo extends Ke{constructor(e){super();Me(this,e,To,So,He,{})}}function Ao(r){let e,t,n,i,l,s=[{width:"256px"},{height:"256px"},{viewBox:"0 0 256 256"},{version:"1.1"},{xmlns:"http://www.w3.org/2000/svg"},{"xmlns:xlink":"http://www.w3.org/1999/xlink"},r[0]],c={};for(let o=0;o<s.length;o+=1)c=$(c,s[o]);return{c(){e=E("svg"),t=E("title"),n=te("icon-justified-complete"),i=E("g"),l=E("path"),this.h()},l(o){e=S(o,"svg",{width:!0,height:!0,viewBox:!0,version:!0,xmlns:!0,"xmlns:xlink":!0});var a=C(e);t=S(a,"title",{});var f=C(t);n=vt(f,"icon-justified-complete"),f.forEach(h),i=S(a,"g",{id:!0,stroke:!0,"stroke-width":!0,"fill-rule":!0});var u=C(i);l=S(u,"path",{d:!0,id:!0,"fill-rule":!0}),C(l).forEach(h),u.forEach(h),a.forEach(h),this.h()},h(){d(l,"d","M257,186 L257,224 L0,224 L0,186 L257,186 Z M257,110 L257,148 L0,148 L0,110 L257,110 Z M256,32 L256,70 L0,70 L0,32 L256,32 Z"),d(l,"id","Combined-Shape"),d(l,"fill-rule","nonzero"),d(i,"id","icon-justified-complete"),d(i,"stroke","none"),d(i,"stroke-width","1"),d(i,"fill-rule","evenodd"),ye(e,c)},m(o,a){Ve(o,e,a),T(e,t),T(t,n),T(e,i),T(i,l)},p(o,[a]){ye(e,c=Xe(s,[{width:"256px"},{height:"256px"},{viewBox:"0 0 256 256"},{version:"1.1"},{xmlns:"http://www.w3.org/2000/svg"},{"xmlns:xlink":"http://www.w3.org/1999/xlink"},a&1&&o[0]]))},i:j,o:j,d(o){o&&h(e)}}}function Oo(r,e,t){return r.$$set=n=>{t(0,e=$($({},e),pe(n)))},e=pe(e),[e]}class Mo extends Ke{constructor(e){super();Me(this,e,Oo,Ao,He,{})}}function No(r){let e,t,n,i,l,s,c=[{version:"1.1"},{id:"Capa_1"},{xmlns:"http://www.w3.org/2000/svg"},{"xmlns:xlink":"http://www.w3.org/1999/xlink"},{x:"0px"},{y:"0px"},{viewBox:"0 0 511.997 511.997"},{style:"enable-background:new 0 0 511.997 511.997;"},{"xml:space":"preserve"},r[0]],o={};for(let a=0;a<c.length;a+=1)o=$(o,c[a]);return{c(){e=E("svg"),t=E("g"),n=E("g"),i=E("g"),l=E("path"),s=E("path"),this.h()},l(a){e=S(a,"svg",{version:!0,id:!0,xmlns:!0,"xmlns:xlink":!0,x:!0,y:!0,viewBox:!0,style:!0,"xml:space":!0});var f=C(e);t=S(f,"g",{transform:!0});var u=C(t);n=S(u,"g",{});var g=C(n);i=S(g,"g",{});var b=C(i);l=S(b,"path",{d:!0}),C(l).forEach(h),s=S(b,"path",{d:!0}),C(s).forEach(h),b.forEach(h),g.forEach(h),u.forEach(h),f.forEach(h),this.h()},h(){d(l,"d",`M211.26,389.24l-60.331,60.331c-25.012,25.012-65.517,25.012-90.508,0.005c-24.996-24.996-24.996-65.505-0.005-90.496
				l120.683-120.683c24.991-24.992,65.5-24.992,90.491,0c8.331,8.331,21.839,8.331,30.17,0c8.331-8.331,8.331-21.839,0-30.17
				c-41.654-41.654-109.177-41.654-150.831,0L30.247,328.909c-41.654,41.654-41.654,109.177,0,150.831
				c41.649,41.676,109.177,41.676,150.853,0l60.331-60.331c8.331-8.331,8.331-21.839,0-30.17S219.591,380.909,211.26,389.24z`),d(s,"d",`M479.751,30.24c-41.654-41.654-109.199-41.654-150.853,0l-72.384,72.384c-8.331,8.331-8.331,21.839,0,30.17
				c8.331,8.331,21.839,8.331,30.17,0l72.384-72.384c24.991-24.992,65.521-24.992,90.513,0c24.991,24.991,24.991,65.5,0,90.491
				L316.845,283.638c-24.992,24.992-65.5,24.992-90.491,0c-8.331-8.331-21.839-8.331-30.17,0s-8.331,21.839,0,30.17
				c41.654,41.654,109.177,41.654,150.831,0l132.736-132.736C521.405,139.418,521.405,71.894,479.751,30.24z`),d(t,"transform","translate(1 1)"),ye(e,o)},m(a,f){Ve(a,e,f),T(e,t),T(t,n),T(n,i),T(i,l),T(i,s)},p(a,[f]){ye(e,o=Xe(c,[{version:"1.1"},{id:"Capa_1"},{xmlns:"http://www.w3.org/2000/svg"},{"xmlns:xlink":"http://www.w3.org/1999/xlink"},{x:"0px"},{y:"0px"},{viewBox:"0 0 511.997 511.997"},{style:"enable-background:new 0 0 511.997 511.997;"},{"xml:space":"preserve"},f&1&&a[0]]))},i:j,o:j,d(a){a&&h(e)}}}function Do(r,e,t){return r.$$set=n=>{t(0,e=$($({},e),pe(n)))},e=pe(e),[e]}class zo extends Ke{constructor(e){super();Me(this,e,Do,No,He,{})}}const Rt=r=>document.queryCommandState(r),ht=(r,e)=>document.execCommand(r,!1,e),Ro=[{title:"Bold",state:()=>Rt("bold"),result:()=>ht("bold"),icon:lo},{title:"Italic",state:()=>Rt("italic"),result:()=>ht("italic"),icon:co},{title:"Underline",state:()=>Rt("underline"),result:()=>ht("underline"),icon:ho},{title:"Justify Left",state:()=>Rt("justifyLeft"),result:()=>ht("justifyLeft"),icon:ko},{title:"Justify Right",state:()=>Rt("justifyRight"),result:()=>ht("justifyRight"),icon:Co},{title:"Justify Center",state:()=>Rt("justifyCenter"),result:()=>ht("justifyCenter"),icon:Lo},{title:"Justify Full",state:()=>Rt("justifyFull"),result:()=>ht("justifyFull"),icon:Mo},{title:"Ordered List",result:()=>ht("insertOrderedList"),icon:po},{title:"Unordered List",result:()=>ht("insertUnorderedList"),icon:vo},{title:"Link",result:()=>{const r=prompt("Enter a URL:","http://");return ht("createLink",r||"")},icon:zo}];function fn(r,e,t){const n=r.slice();return n[13]=e[t],n}function un(r){let e,t,n=r[3],i=[];for(let s=0;s<n.length;s+=1)i[s]=dn(fn(r,n,s));const l=s=>re(i[s],1,1,()=>{i[s]=null});return{c(){e=w("div");for(let s=0;s<i.length;s+=1)i[s].c();d(e,"class","toolbar")},m(s,c){x(s,e,c);for(let o=0;o<i.length;o+=1)i[o].m(e,null);t=!0},p(s,c){if(c&24){n=s[3];let o;for(o=0;o<n.length;o+=1){const a=fn(s,n,o);i[o]?(i[o].p(a,c),W(i[o],1)):(i[o]=dn(a),i[o].c(),W(i[o],1),i[o].m(e,null))}for(We(),o=n.length;o<i.length;o+=1)l(o);Ze()}},i(s){if(!t){for(let c=0;c<n.length;c+=1)W(i[c]);t=!0}},o(s){i=i.filter(Boolean);for(let c=0;c<i.length;c+=1)re(i[c]);t=!1},d(s){s&&h(e),jr(i,s)}}}function Fo(r){let e=r[13].title.charAt(0)+"",t;return{c(){t=te(e)},m(n,i){x(n,t,i)},p(n,i){i&8&&e!==(e=n[13].title.charAt(0)+"")&&Ae(t,e)},i:j,o:j,d(n){n&&h(t)}}}function Io(r){let e,t,n;var i=r[13].icon;function l(s){return{props:{class:"icon",style:"fill: var(--composer-icons-color, #666774) !important; width: 12px; height: 12px;"}}}return i&&(e=new i(l())),{c(){e&&nt(e.$$.fragment),t=st()},m(s,c){e&&rt(e,s,c),x(s,t,c),n=!0},p(s,c){if(i!==(i=s[13].icon)){if(e){We();const o=e;re(o.$$.fragment,1,0,()=>{tt(o,1)}),Ze()}i?(e=new i(l()),nt(e.$$.fragment),W(e.$$.fragment,1),rt(e,t.parentNode,t)):e=null}},i(s){n||(e&&W(e.$$.fragment,s),n=!0)},o(s){e&&re(e.$$.fragment,s),n=!1},d(s){s&&h(t),e&&tt(e,s)}}}function dn(r){let e,t,n,i,l,s,c,o,a;const f=[Io,Fo],u=[];function g(b,v){return b[13].icon?0:1}return t=g(r),n=u[t]=f[t](r),{c(){e=w("button"),n.c(),i=H(),d(e,"title",l=r[13].title),d(e,"class",s=r[13].state&&r[13].state()?"active":"")},m(b,v){x(b,e,v),u[t].m(e,null),p(e,i),c=!0,o||(a=he(e,"click",qi(function(){er(r[4](r[13]))&&r[4](r[13]).apply(this,arguments)}),!0),o=!0)},p(b,v){r=b;let A=t;t=g(r),t===A?u[t].p(r,v):(We(),re(u[A],1,1,()=>{u[A]=null}),Ze(),n=u[t],n?n.p(r,v):(n=u[t]=f[t](r),n.c()),W(n,1),n.m(e,i)),(!c||v&8&&l!==(l=r[13].title))&&d(e,"title",l),(!c||v&8&&s!==(s=r[13].state&&r[13].state()?"active":""))&&d(e,"class",s)},i(b){c||(W(n),c=!0)},o(b){re(n),c=!1},d(b){b&&h(e),u[t].d(),o=!1,a()}}}function Po(r){let e,t,n,i,l,s,c,o=r[1]&&un(r);return{c(){e=w("div"),o&&o.c(),t=H(),n=H(),i=w("div"),this.c=j,d(i,"contenteditable","true"),d(i,"class","html-editor-content"),d(i,"role","textbox"),d(i,"aria-label","HTML Editor"),r[0]===void 0&&yr(()=>r[11].call(i)),d(e,"class","html-editor")},m(a,f){x(a,e,f),o&&o.m(e,null),p(e,t),p(e,n),p(e,i),r[10](i),r[0]!==void 0&&(i.innerHTML=r[0]),l=!0,s||(c=[he(i,"input",r[11]),he(i,"focus",r[6]),he(i,"keyup",r[5]),he(i,"mouseup",r[5])],s=!0)},p(a,[f]){a[1]?o?(o.p(a,f),f&2&&W(o,1)):(o=un(a),o.c(),W(o,1),o.m(e,t)):o&&(We(),re(o,1,1,()=>{o=null}),Ze()),f&1&&a[0]!==i.innerHTML&&(i.innerHTML=a[0])},i(a){l||(W(o),l=!0)},o(a){re(o),l=!1},d(a){a&&h(e),o&&o.d(),r[10](null),s=!1,et(c)}}}function hn(r,e){const t=document.createRange(),n=window.getSelection();t.selectNode(r),t.setStart(r,e),t.collapse(!0),t.detach(),n==null||n.removeAllRanges(),n==null||n.addRange(t)}function Ho(r,e,t){let{onchange:n=y=>Promise.resolve({})}=e,{html:i=""}=e,{show_editor_toolbar:l=!0}=e,{replace_fields:s=null}=e,{focus_body_onload:c=!1}=e,o,a=Ro;const f=y=>()=>{y.result&&(o&&o.focus(),y.result()),u()};function u(){t(3,a=a.map(y=>(y.state&&(y.active=y.state()),y)))}let g=!1;const b=()=>{if(g?g=!1:(g=!0,setTimeout(()=>{o.blur(),o.focus()},0)),o.innerHTML===""){t(2,o.innerHTML="\xA0",o);const y=window.getSelection(),O=document.createRange();O.selectNodeContents(o),O.collapse(!1),y.removeAllRanges(),y.addRange(O)}};function v(y){Ct[y?"unshift":"push"](()=>{o=y,t(2,o)})}function A(){i=this.innerHTML,t(0,i),t(7,s),t(8,n)}return r.$$set=y=>{"onchange"in y&&t(8,n=y.onchange),"html"in y&&t(0,i=y.html),"show_editor_toolbar"in y&&t(1,l=y.show_editor_toolbar),"replace_fields"in y&&t(7,s=y.replace_fields),"focus_body_onload"in y&&t(9,c=y.focus_body_onload)},r.$$.update=()=>{if(r.$$.dirty&516&&c&&o&&(o.focus(),b()),r.$$.dirty&385&&i){const y=window.getSelection();if(typeof s=="string"&&t(7,s=JSON.parse(s)),y&&Array.isArray(s))for(const O of s){t(0,i=i.replaceAll(O.from,O.to));const R=y.focusNode,G=y.focusOffset;if(R&&R.textContent&&R.textContent.includes(O.from)){const le=R.textContent.split(O.from).length-1,ee=document.createTextNode(R.textContent.replaceAll(O.from,O.to));R.replaceWith(ee),y.focusNode&&y.focusNode.nodeType===Node.TEXT_NODE&&(le>1?hn(ee,G+(O.to.length-O.from.length)+(le-1)):hn(ee,G+O.to.length-O.from.length))}}n&&n(i)}},[i,l,o,a,f,u,b,s,n,c,v,A]}class jo extends wt{constructor(e){super();this.shadowRoot.innerHTML="<style>.html-editor{min-height:var(--composer-editor-min-height, 220px);max-height:var(--composer-editor-max-height, 480px)}.html-editor *:focus{outline:5px auto var(--composer-primary-color, #5c77ff)}.html-editor-content{min-height:var(--composer-editor-min-height, 220px);max-height:var(--composer-editor-max-height, 480px)}a{color:var(--composer-primary-color, #5c77ff)}a:hover{color:var(--composer-primary-dark-color, #294dff)}[contenteditable]{padding:var(--composer-outer-padding, 15px) var(--composer-outer-padding, 15px);margin:0;outline:0;line-height:1.3;color:var(--composer-text-color, black);overflow-y:auto}.toolbar{display:flex;font-size:10px;align-items:center;justify-content:flex-start;border-bottom:1px solid var(--composer-border-color, #f7f7f7);padding:0 calc(var(--composer-outer-padding, 15px) / 2)}.toolbar button{color:var(--composer-text-light-color, #6e6e7a);background:none;border:0;cursor:pointer;display:flex;padding:8px;margin:2px;outline:0;border-radius:calc(var(--composer-border-radius, 6px) / 2);transition:background-color 0.3s}.toolbar button.active{background:var(--composer-background-muted-color, #f0f2ff)}.toolbar button:first-child{margin-left:0}.toolbar button:hover{background:var(--composer-background-muted-color, #f0f2ff)}</style>",Me(this,{target:this.shadowRoot,props:Et(this.attributes),customElement:!0},Ho,Po,He,{onchange:8,html:0,show_editor_toolbar:1,replace_fields:7,focus_body_onload:9},null),e&&(e.target&&x(e.target,this,e.anchor),e.props&&(this.$set(e.props),z()))}static get observedAttributes(){return["onchange","html","show_editor_toolbar","replace_fields","focus_body_onload"]}get onchange(){return this.$$.ctx[8]}set onchange(e){this.$$set({onchange:e}),z()}get html(){return this.$$.ctx[0]}set html(e){this.$$set({html:e}),z()}get show_editor_toolbar(){return this.$$.ctx[1]}set show_editor_toolbar(e){this.$$set({show_editor_toolbar:e}),z()}get replace_fields(){return this.$$.ctx[7]}set replace_fields(e){this.$$set({replace_fields:e}),z()}get focus_body_onload(){return this.$$.ctx[9]}set focus_body_onload(e){this.$$set({focus_body_onload:e}),z()}}customElements.define("nylas-html-editor",jo);function mn(r){let e,t,n,i,l=r[2]&&_n(r);return{c(){e=w("div"),t=w("div"),n=w("div"),n.innerHTML="<slot></slot>",i=H(),l&&l.c(),d(n,"class","alert-bar__text"),d(t,"class","alert-bar__container"),d(e,"class","alert-bar"),Fe(e,"success",r[1]==="success"),Fe(e,"warning",r[1]==="warning"),Fe(e,"danger",r[1]==="danger"),Fe(e,"primary",r[1]==="primary"),Fe(e,"info",r[1]==="info")},m(s,c){x(s,e,c),p(e,t),p(t,n),p(t,i),l&&l.m(t,null)},p(s,c){s[2]?l?l.p(s,c):(l=_n(s),l.c(),l.m(t,null)):l&&(l.d(1),l=null),c&2&&Fe(e,"success",s[1]==="success"),c&2&&Fe(e,"warning",s[1]==="warning"),c&2&&Fe(e,"danger",s[1]==="danger"),c&2&&Fe(e,"primary",s[1]==="primary"),c&2&&Fe(e,"info",s[1]==="info")},d(s){s&&h(e),l&&l.d()}}}function _n(r){let e,t,n;return{c(){e=w("button"),e.textContent="\xD7",d(e,"class","alert-bar__close")},m(i,l){x(i,e,l),t||(n=he(e,"click",r[3]),t=!0)},p:j,d(i){i&&h(e),t=!1,n()}}}function Bo(r){let e,t=r[0]&&mn(r);return{c(){t&&t.c(),e=st(),this.c=j},m(n,i){t&&t.m(n,i),x(n,e,i)},p(n,[i]){n[0]?t?t.p(n,i):(t=mn(n),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},i:j,o:j,d(n){t&&t.d(n),n&&h(e)}}}function Uo(r,e,t){let{type:n="primary"}=e,{dismissible:i=!0}=e,{visible:l=!0}=e,{ondismiss:s=null}=e;const c=()=>{s&&s(),t(0,l=!1)};return r.$$set=o=>{"type"in o&&t(1,n=o.type),"dismissible"in o&&t(2,i=o.dismissible),"visible"in o&&t(0,l=o.visible),"ondismiss"in o&&t(4,s=o.ondismiss)},[l,n,i,c,s]}class Go extends wt{constructor(e){super();this.shadowRoot.innerHTML="<style>.alert-bar{padding:var(--composer-outer-padding, 15px);text-align:center;font-size:var(--composer-font-size-small, 12px);border-bottom-left-radius:var(--composer-border-color, #f7f7f7-radius);border-bottom-right-radius:var(--composer-border-radius, 6px)}.alert-bar__container{display:flex;align-items:center;justify-content:between}.alert-bar__text{flex-grow:1}.alert-bar__close{outline:0;border:0;background:none;font-size:18px;opacity:0.8;cursor:pointer}.alert-bar__close:hover{opacity:1}.alert-bar *:focus{outline:5px auto Highlight;outline:5px auto -webkit-focus-ring-color}.alert-bar.success{background:var(--composer-success-light-color, var(--composer-primary-color, #5c77ff));color:var(--composer-success-color, var(--composer-background-color, white))}.alert-bar.success .alert-bar__close{color:var(--composer-success-color, var(--composer-background-color, white))}.alert-bar.danger{background:var(--composer-danger-light-color, #ffe3e3);color:var(--composer-danger-color, #ff5c5c)}.alert-bar.danger .alert-bar__close{color:var(--composer-danger-color, #ff5c5c)}.alert-bar.info{background:var(--composer-info-light-color, var(--composer-primary-light-color, #f0f2ff));color:var(--composer-info-color, var(--composer-primary-color, #5c77ff))}.alert-bar.info .alert-bar__close{color:var(--composer-info-color, var(--composer-primary-color, #5c77ff))}</style>",Me(this,{target:this.shadowRoot,props:Et(this.attributes),customElement:!0},Uo,Bo,He,{type:1,dismissible:2,visible:0,ondismiss:4},null),e&&(e.target&&x(e.target,this,e.anchor),e.props&&(this.$set(e.props),z()))}static get observedAttributes(){return["type","dismissible","visible","ondismiss"]}get type(){return this.$$.ctx[1]}set type(e){this.$$set({type:e}),z()}get dismissible(){return this.$$.ctx[2]}set dismissible(e){this.$$set({dismissible:e}),z()}get visible(){return this.$$.ctx[0]}set visible(e){this.$$set({visible:e}),z()}get ondismiss(){return this.$$.ctx[4]}set ondismiss(e){this.$$set({ondismiss:e}),z()}}customElements.define("nylas-composer-alert-bar",Go);function Jo(r){let e,t,n=[{height:"10"},{viewBox:"0 0 329.26933 329"},{width:"10"},{xmlns:"http://www.w3.org/2000/svg"},r[0]],i={};for(let l=0;l<n.length;l+=1)i=$(i,n[l]);return{c(){e=E("svg"),t=E("path"),this.h()},l(l){e=S(l,"svg",{height:!0,viewBox:!0,width:!0,xmlns:!0});var s=C(e);t=S(s,"path",{d:!0}),C(t).forEach(h),s.forEach(h),this.h()},h(){d(t,"d","m194.800781 164.769531 128.210938-128.214843c8.34375-8.339844 8.34375-21.824219 0-30.164063-8.339844-8.339844-21.824219-8.339844-30.164063 0l-128.214844 128.214844-128.210937-128.214844c-8.34375-8.339844-21.824219-8.339844-30.164063 0-8.34375 8.339844-8.34375 21.824219 0 30.164063l128.210938 128.214843-128.210938 128.214844c-8.34375 8.339844-8.34375 21.824219 0 30.164063 4.15625 4.160156 9.621094 6.25 15.082032 6.25 5.460937 0 10.921875-2.089844 15.082031-6.25l128.210937-128.214844 128.214844 128.214844c4.160156 4.160156 9.621094 6.25 15.082032 6.25 5.460937 0 10.921874-2.089844 15.082031-6.25 8.34375-8.339844 8.34375-21.824219 0-30.164063zm0 0"),ye(e,i)},m(l,s){Ve(l,e,s),T(e,t)},p(l,[s]){ye(e,i=Xe(n,[{height:"10"},{viewBox:"0 0 329.26933 329"},{width:"10"},{xmlns:"http://www.w3.org/2000/svg"},s&1&&l[0]]))},i:j,o:j,d(l){l&&h(e)}}}function Wo(r,e,t){return r.$$set=n=>{t(0,e=$($({},e),pe(n)))},e=pe(e),[e]}class ir extends Ke{constructor(e){super();Me(this,e,Wo,Jo,He,{})}}function Zo(r){let e,t,n,i,l,s,c,o,a,f,u,g=[{id:"Capa_1"},{"enable-background":"new 0 0 497 497"},{height:"512"},{viewBox:"0 0 497 497"},{width:"512"},{xmlns:"http://www.w3.org/2000/svg"},r[0]],b={};for(let v=0;v<g.length;v+=1)b=$(b,g[v]);return{c(){e=E("svg"),t=E("g"),n=E("circle"),i=E("circle"),l=E("circle"),s=E("ellipse"),c=E("ellipse"),o=E("ellipse"),a=E("ellipse"),f=E("ellipse"),u=E("circle"),this.h()},l(v){e=S(v,"svg",{id:!0,"enable-background":!0,height:!0,viewBox:!0,width:!0,xmlns:!0});var A=C(e);t=S(A,"g",{});var y=C(t);n=S(y,"circle",{cx:!0,cy:!0,fill:!0,r:!0}),C(n).forEach(h),i=S(y,"circle",{cx:!0,cy:!0,fill:!0,r:!0}),C(i).forEach(h),l=S(y,"circle",{cx:!0,cy:!0,fill:!0,r:!0}),C(l).forEach(h),s=S(y,"ellipse",{cx:!0,cy:!0,fill:!0,rx:!0,ry:!0}),C(s).forEach(h),c=S(y,"ellipse",{cx:!0,cy:!0,fill:!0,rx:!0,ry:!0}),C(c).forEach(h),o=S(y,"ellipse",{cx:!0,cy:!0,fill:!0,rx:!0,ry:!0}),C(o).forEach(h),a=S(y,"ellipse",{cx:!0,cy:!0,fill:!0,rx:!0,ry:!0}),C(a).forEach(h),f=S(y,"ellipse",{cx:!0,cy:!0,fill:!0,rx:!0,ry:!0}),C(f).forEach(h),u=S(y,"circle",{cx:!0,cy:!0,fill:!0,r:!0}),C(u).forEach(h),y.forEach(h),A.forEach(h),this.h()},h(){d(n,"cx","98"),d(n,"cy","376"),d(n,"fill","#909ba6"),d(n,"r","53"),d(i,"cx","439"),d(i,"cy","336"),d(i,"fill","#c8d2dc"),d(i,"r","46"),d(l,"cx","397"),d(l,"cy","112"),d(l,"fill","#e9edf1"),d(l,"r","38"),d(s,"cx","56.245"),d(s,"cy","244.754"),d(s,"fill","#7e8b96"),d(s,"rx","56.245"),d(s,"ry","54.874"),d(c,"cx","217.821"),d(c,"cy","447.175"),d(c,"fill","#a2abb8"),d(c,"rx","51.132"),d(c,"ry","49.825"),d(o,"cx","349.229"),d(o,"cy","427.873"),d(o,"fill","#b9c3cd"),d(o,"rx","48.575"),d(o,"ry","47.297"),d(a,"cx","117.092"),d(a,"cy","114.794"),d(a,"fill","#5f6c75"),d(a,"rx","58.801"),d(a,"ry","57.397"),d(f,"cx","453.538"),d(f,"cy","216.477"),d(f,"fill","#dce6eb"),d(f,"rx","43.462"),d(f,"ry","42.656"),d(u,"cx","263"),d(u,"cy","62"),d(u,"fill","#4e5a61"),d(u,"r","62"),ye(e,b)},m(v,A){Ve(v,e,A),T(e,t),T(t,n),T(t,i),T(t,l),T(t,s),T(t,c),T(t,o),T(t,a),T(t,f),T(t,u)},p(v,[A]){ye(e,b=Xe(g,[{id:"Capa_1"},{"enable-background":"new 0 0 497 497"},{height:"512"},{viewBox:"0 0 497 497"},{width:"512"},{xmlns:"http://www.w3.org/2000/svg"},A&1&&v[0]]))},i:j,o:j,d(v){v&&h(e)}}}function Yo(r,e,t){return r.$$set=n=>{t(0,e=$($({},e),pe(n)))},e=pe(e),[e]}class pn extends Ke{constructor(e){super();Me(this,e,Yo,Zo,He,{})}}function gn(r){let e,t,n,i,l,s,c,o,a=!r[0].error&&bn(r),f=r[0].loading&&vn(),u=r[0].error&&wn(r),g=!r[0].loading&&yn(r);return{c(){e=w("div"),t=w("div"),n=w("div"),a&&a.c(),i=H(),l=w("div"),f&&f.c(),s=H(),u&&u.c(),c=H(),g&&g.c(),d(n,"class","file-info"),d(l,"class","file-info__right"),d(t,"class","file-item"),d(e,"class","wrapper")},m(b,v){x(b,e,v),p(e,t),p(t,n),a&&a.m(n,null),p(t,i),p(t,l),f&&f.m(l,null),p(l,s),u&&u.m(l,null),p(l,c),g&&g.m(l,null),o=!0},p(b,v){b[0].error?a&&(a.d(1),a=null):a?a.p(b,v):(a=bn(b),a.c(),a.m(n,null)),b[0].loading?f?v&1&&W(f,1):(f=vn(),f.c(),W(f,1),f.m(l,s)):f&&(We(),re(f,1,1,()=>{f=null}),Ze()),b[0].error?u?u.p(b,v):(u=wn(b),u.c(),u.m(l,c)):u&&(u.d(1),u=null),b[0].loading?g&&(We(),re(g,1,1,()=>{g=null}),Ze()):g?(g.p(b,v),v&1&&W(g,1)):(g=yn(b),g.c(),W(g,1),g.m(l,null))},i(b){o||(W(f),W(g),o=!0)},o(b){re(f),re(g),o=!1},d(b){b&&h(e),a&&a.d(),f&&f.d(),u&&u.d(),g&&g.d()}}}function bn(r){let e,t=r[0].filename+"",n,i,l,s=r[2](r[0].size)+"",c;return{c(){e=w("div"),n=te(t),i=H(),l=w("span"),c=te(s),d(l,"class","file-item__size")},m(o,a){x(o,e,a),p(e,n),x(o,i,a),x(o,l,a),p(l,c)},p(o,a){a&1&&t!==(t=o[0].filename+"")&&Ae(n,t),a&1&&s!==(s=o[2](o[0].size)+"")&&Ae(c,s)},d(o){o&&h(e),o&&h(i),o&&h(l)}}}function vn(r){let e,t;return e=new pn({props:{style:"fill: var(--composer-icons-color, #666774); width: 15px; height: 15px; animation: rotate 0.5s infinite linear;"}}),{c(){nt(e.$$.fragment)},m(n,i){rt(e,n,i),t=!0},i(n){t||(W(e.$$.fragment,n),t=!0)},o(n){re(e.$$.fragment,n),t=!1},d(n){tt(e,n)}}}function wn(r){var i;let e,t=((i=r[0].errorMessage)!=null?i:"Error: Please try attaching the file again.")+"",n;return{c(){e=w("span"),n=te(t),d(e,"class","file-info__error")},m(l,s){x(l,e,s),p(e,n)},p(l,s){var c;s&1&&t!==(t=((c=l[0].errorMessage)!=null?c:"Error: Please try attaching the file again.")+"")&&Ae(n,t)},d(l){l&&h(e)}}}function yn(r){let e,t,n,i,l;return t=new ir({props:{class:"CloseIcon"}}),{c(){e=w("button"),nt(t.$$.fragment),d(e,"class","close-btn")},m(s,c){x(s,e,c),rt(t,e,null),n=!0,i||(l=he(e,"click",r[3]),i=!0)},p:j,i(s){n||(W(t.$$.fragment,s),n=!0)},o(s){re(t.$$.fragment,s),n=!1},d(s){s&&h(e),tt(t),i=!1,l()}}}function Vo(r){let e,t,n=r[0]&&gn(r);return{c(){n&&n.c(),e=st(),this.c=j},m(i,l){n&&n.m(i,l),x(i,e,l),t=!0},p(i,[l]){i[0]?n?(n.p(i,l),l&1&&W(n,1)):(n=gn(i),n.c(),W(n,1),n.m(e.parentNode,e)):n&&(We(),re(n,1,1,()=>{n=null}),Ze())},i(i){t||(W(n),t=!0)},o(i){re(n),t=!1},d(i){n&&n.d(i),i&&h(e)}}}function Xo(r,e,t){let{attachment:n}=e,{remove:i}=e;const l=c=>{const o=Math.floor(Math.log(c)/Math.log(1024));return`${(c/Math.pow(1024,o)).toFixed(2)*1}
      ${["B","kB","MB","GB","TB"][o]}`},s=()=>i(n);return r.$$set=c=>{"attachment"in c&&t(0,n=c.attachment),"remove"in c&&t(1,i=c.remove)},[n,i,l,s]}class Ko extends wt{constructor(e){super();this.shadowRoot.innerHTML="<style>.wrapper{padding:0.3rem 0}.file-item{display:flex;align-items:center;justify-content:space-between;padding:0.8rem;color:var(--composer-text-color, black);font-weight:700;background:var(--composer-background-muted-color, #f0f2ff);border-radius:var(--composer-border-radius, 6px)}.close-btn{background:none;border:none;cursor:pointer;margin-left:10px;flex-shrink:0}.file-info{display:flex;color:var(--composer-text-color, black);flex-direction:column}.file-info__error{color:var(--composer-danger-color, #ff5c5c);font-size:var(--composer-font-size-small, 12px);margin-right:5px}.file-info__right{display:flex;align-items:center;justify-content:flex-end;flex-shrink:0;margin-left:10px}.file-item__size{flex-shrink:0;word-break:keep-all;color:var(--composer-text-light-color, #6e6e7a);margin-top:10px;font-size:var(--composer-font-size-small, 12px)}@keyframes rotate{to{transform:rotate(360deg)}}@media(min-width: 640px){.file-info{flex-direction:row;align-items:center;max-width:90%}.file-item__size{margin:0 0 0 5px}}</style>",Me(this,{target:this.shadowRoot,props:Et(this.attributes),customElement:!0},Xo,Vo,He,{attachment:0,remove:1},null),e&&(e.target&&x(e.target,this,e.anchor),e.props&&(this.$set(e.props),z()))}static get observedAttributes(){return["attachment","remove"]}get attachment(){return this.$$.ctx[0]}set attachment(e){this.$$set({attachment:e}),z()}get remove(){return this.$$.ctx[1]}set remove(e){this.$$set({remove:e}),z()}}customElements.define("nylas-composer-attachment",Ko);function kn(r,e,t){const n=r.slice();return n[41]=e[t],n}function xn(r,e,t){const n=r.slice();return n[44]=e[t],n}function En(r,e,t){const n=r.slice();return n[47]=e[t],n}function Cn(r,e){let t,n,i=e[47].day+"",l,s,c,o,a;function f(){return e[24](e[47])}return{key:r,first:null,c(){t=w("div"),n=w("button"),l=te(i),c=H(),n.disabled=s=e[47].isDisabled,Fe(n,"label",!e[47].activeMonth),Fe(n,"current",e[47].activeMonth),Fe(n,"selected",e[47].isSelected),this.first=t},m(u,g){x(u,t,g),p(t,n),p(n,l),p(t,c),o||(a=he(n,"click",f),o=!0)},p(u,g){e=u,g[0]&4&&i!==(i=e[47].day+"")&&Ae(l,i),g[0]&4&&s!==(s=e[47].isDisabled)&&(n.disabled=s),g[0]&4&&Fe(n,"label",!e[47].activeMonth),g[0]&4&&Fe(n,"current",e[47].activeMonth),g[0]&4&&Fe(n,"selected",e[47].isSelected)},d(u){u&&h(t),o=!1,a()}}}function Sn(r){let e,t,n,i,l,s=[],c=new Map,o,a,f,u=[],g=new Map,b,v,A,y,O,R,G,le,ee,P,M,U,fe,B,ve=r[3];const me=J=>J[44];for(let J=0;J<ve.length;J+=1){let V=xn(r,ve,J),ue=me(V);c.set(ue,s[J]=Tn(ue,V))}let we=r[4];const Ne=J=>J[41];for(let J=0;J<we.length;J+=1){let V=kn(r,we,J),ue=Ne(V);g.set(ue,u[J]=Ln(ue,V))}return{c(){e=w("div"),t=w("p"),t.textContent="Set time",n=H(),i=w("div"),l=w("select");for(let J=0;J<s.length;J+=1)s[J].c();a=H(),f=w("select");for(let J=0;J<u.length;J+=1)u[J].c();v=H(),A=w("div"),y=w("button"),O=te("AM"),le=H(),ee=w("button"),P=te("PM"),d(l,"class","picker"),d(f,"class","picker"),d(i,"class","time"),d(y,"class",R=r[1].getHours()<12?"clock-button clock-button-active":"clock-button"),y.disabled=G=r[8](),d(ee,"class",M=r[1].getHours()>=12?"clock-button clock-button-active":"clock-button"),ee.disabled=U=r[7](),d(A,"class","clock"),d(e,"class","timepicker")},m(J,V){x(J,e,V),p(e,t),p(e,n),p(e,i),p(i,l);for(let ue=0;ue<s.length;ue+=1)s[ue].m(l,null);br(l,r[1].getHours()),r[25](l),p(i,a),p(i,f);for(let ue=0;ue<u.length;ue+=1)u[ue].m(f,null);br(f,r[1].getMinutes()),r[27](f),p(e,v),p(e,A),p(A,y),p(y,O),p(A,le),p(A,ee),p(ee,P),fe||(B=[he(l,"blur",r[26]),he(f,"blur",r[28]),he(y,"click",r[29]),he(ee,"click",r[30])],fe=!0)},p(J,V){V[0]&10&&(ve=J[3],s=Cr(s,V,me,1,J,ve,c,l,Er,Tn,null,xn)),V[0]&2&&o!==(o=J[1].getHours())&&br(l,J[1].getHours()),V[0]&16&&(we=J[4],u=Cr(u,V,Ne,1,J,we,g,f,Er,Ln,null,kn)),V[0]&2&&b!==(b=J[1].getMinutes())&&br(f,J[1].getMinutes()),V[0]&2&&R!==(R=J[1].getHours()<12?"clock-button clock-button-active":"clock-button")&&d(y,"class",R),V[0]&256&&G!==(G=J[8]())&&(y.disabled=G),V[0]&2&&M!==(M=J[1].getHours()>=12?"clock-button clock-button-active":"clock-button")&&d(ee,"class",M),V[0]&128&&U!==(U=J[7]())&&(ee.disabled=U)},d(J){J&&h(e);for(let V=0;V<s.length;V+=1)s[V].d();r[25](null);for(let V=0;V<u.length;V+=1)u[V].d();r[27](null),fe=!1,et(B)}}}function Qo(r){let e,t=r[44].text+"",n,i,l,s;return{c(){e=w("option"),n=te(t),i=H(),e.__value=l=r[44].value,e.value=e.__value,e.disabled=s=r[44].disabled},m(c,o){x(c,e,o),p(e,n),p(e,i)},p(c,o){o[0]&8&&t!==(t=c[44].text+"")&&Ae(n,t),o[0]&8&&l!==(l=c[44].value)&&(e.__value=l,e.value=e.__value),o[0]&8&&s!==(s=c[44].disabled)&&(e.disabled=s)},d(c){c&&h(e)}}}function qo(r){let e,t=r[44].text+"",n,i,l,s;return{c(){e=w("option"),n=te(t),i=H(),e.__value=l=r[44].value,e.value=e.__value,e.disabled=s=r[44].disabled},m(c,o){x(c,e,o),p(e,n),p(e,i)},p(c,o){o[0]&8&&t!==(t=c[44].text+"")&&Ae(n,t),o[0]&8&&l!==(l=c[44].value)&&(e.__value=l,e.value=e.__value),o[0]&8&&s!==(s=c[44].disabled)&&(e.disabled=s)},d(c){c&&h(e)}}}function Tn(r,e){let t,n,i,l;function s(a,f){if(f[0]&10&&(n=null),f[0]&10&&(i=null),n==null&&(n=a[1].getHours()>=12&&a[44].value>=12),n)return qo;if(i==null&&(i=a[1].getHours()<12&&a[44].value<12),i)return Qo}let c=s(e,[-1,-1]),o=c&&c(e);return{key:r,first:null,c(){t=st(),o&&o.c(),l=st(),this.first=t},m(a,f){x(a,t,f),o&&o.m(a,f),x(a,l,f)},p(a,f){e=a,c===(c=s(e,f))&&o?o.p(e,f):(o&&o.d(1),o=c&&c(e),o&&(o.c(),o.m(l.parentNode,l)))},d(a){a&&h(t),o&&o.d(a),a&&h(l)}}}function Ln(r,e){let t,n=e[41].text+"",i,l,s,c;return{key:r,first:null,c(){t=w("option"),i=te(n),l=H(),t.__value=s=e[41].value,t.value=t.__value,t.disabled=c=e[41].disabled,this.first=t},m(o,a){x(o,t,a),p(t,i),p(t,l)},p(o,a){e=o,a[0]&16&&n!==(n=e[41].text+"")&&Ae(i,n),a[0]&16&&s!==(s=e[41].value)&&(t.__value=s,t.value=t.__value),a[0]&16&&c!==(c=e[41].disabled)&&(t.disabled=c)},d(o){o&&h(t)}}}function $o(r){let e,t,n,i,l,s=(r[0]?" and time":"")+"",c,o,a,f,u,g=r[11][r[10]]+"",b,v,A,y,O,R,G,le,ee,P,M,U,fe,B,ve,me,we,Ne,J,V=[],ue=new Map,Ue,ze,I,_e=r[2];const ke=oe=>oe[47];for(let oe=0;oe<_e.length;oe+=1){let se=En(r,_e,oe),Re=ke(se);ue.set(Re,V[oe]=Cn(Re,se))}let ce=r[0]&&Sn(r);return{c(){e=w("div"),t=w("div"),n=w("div"),i=w("h2"),l=te(`Pick a date
        `),c=te(s),o=H(),a=w("div"),f=w("div"),u=w("h3"),b=te(g),v=H(),A=te(r[9]),y=H(),O=w("div"),R=w("div"),G=w("button"),G.textContent="\u2039",le=H(),ee=w("span"),ee.textContent="Previous month",P=H(),M=w("div"),U=w("button"),U.textContent="\u203A",fe=H(),B=w("span"),B.textContent="Next month",ve=H(),me=w("div"),we=w("div"),we.innerHTML=`<div class="day label">SUN</div> 
          <div class="day label">MON</div> 
          <div class="day label">TUE</div> 
          <div class="day label">WED</div> 
          <div class="day label">THU</div> 
          <div class="day label">FRI</div> 
          <div class="day label">SAT</div>`,Ne=H(),J=w("div");for(let oe=0;oe<V.length;oe+=1)V[oe].c();Ue=H(),ce&&ce.c(),this.c=j,d(i,"class","datepicker-header"),d(f,"class","current-month"),d(G,"class","datepicker-btn"),d(ee,"class","tooltiptext"),d(R,"class","tooltip"),d(U,"class","datepicker-btn"),d(B,"class","tooltiptext"),d(M,"class","tooltip"),d(a,"class","datepicker-controls"),d(we,"class","label-days"),d(J,"id","calendarDays"),d(J,"class","days"),d(me,"class","datepicker-dates"),d(n,"class","datepicker-wrapper"),d(t,"class","datepicker"),d(t,"id","datepicker")},m(oe,se){x(oe,e,se),p(e,t),p(t,n),p(n,i),p(i,l),p(i,c),p(n,o),p(n,a),p(a,f),p(f,u),p(u,b),p(u,v),p(u,A),p(a,y),p(a,O),p(O,R),p(R,G),p(R,le),p(R,ee),p(O,P),p(O,M),p(M,U),p(M,fe),p(M,B),p(n,ve),p(n,me),p(me,we),p(me,Ne),p(me,J);for(let Re=0;Re<V.length;Re+=1)V[Re].m(J,null);p(me,Ue),ce&&ce.m(me,null),ze||(I=[he(G,"click",r[22]),he(U,"click",r[23])],ze=!0)},p(oe,se){se[0]&1&&s!==(s=(oe[0]?" and time":"")+"")&&Ae(c,s),se[0]&1024&&g!==(g=oe[11][oe[10]]+"")&&Ae(b,g),se[0]&512&&Ae(A,oe[9]),se[0]&8196&&(_e=oe[2],V=Cr(V,se,ke,1,oe,_e,ue,J,Er,Cn,null,En)),oe[0]?ce?ce.p(oe,se):(ce=Sn(oe),ce.c(),ce.m(me,null)):ce&&(ce.d(1),ce=null)},i:j,o:j,d(oe){oe&&h(e);for(let se=0;se<V.length;se+=1)V[se].d();ce&&ce.d(),ze=!1,et(I)}}}const An=8634e4;function ge(r){let e=""+(r.getMonth()+1),t=""+r.getDate(),n=r.getFullYear();return e.length<2&&(e="0"+e),t.length<2&&(t="0"+t),[n,e,t].join("-")}function el(r,e,t){let n,i,l,s;const c=["January","February","March","April","May","June","July","August","September","October","November","December"];let{value:o=new Date}=e,{min:a}=e,{max:f}=e,{timepicker:u=!1}=e,{change:g}=e,b=new Date,v=new Date,A=[],y=[],O=[],R,G;const le=()=>{o&&t(1,v=o),u&&(me(),Ne())},ee=(L,ae,Te=1)=>new Date(L,ae+Te,0).getDate(),P=L=>{t(21,b=new Date(b.setMonth(b.getMonth()+L))),ue()},M=L=>{const ae=new Date(L);u&&(ae.setHours(parseInt(R.value)),ae.setMinutes(parseInt(G.value))),t(1,v=new Date(ae)),a&&ge(a)===ge(L)&&t(1,v=new Date(a)),f&&ge(f)===ge(L)&&t(1,v=new Date(f)),V(),u&&(we(),J())},U=()=>{t(1,v=new Date(v.setHours(parseInt(R.value)))),a&&!f?ge(a)===ge(v)&&t(1,v=new Date(v.setMinutes(a.getMinutes()))):f&&!a?ge(f)===ge(v)&&t(1,v=new Date(v.setMinutes(f.getMinutes()))):f&&a&&(ge(a)===ge(v)?t(1,v=new Date(v.setMinutes(a.getMinutes()))):ge(f)===ge(v)&&t(1,v=new Date(v.setMinutes(f.getMinutes())))),J()},fe=()=>{t(1,v=new Date(v.setMinutes(parseInt(G.value))))},B=L=>{t(1,v=new Date(v.setHours(v.getHours()+L)))},ve=L=>(L=L>12?L-12:L===0?12:L,`${L}`.length<2?`0${L}`:`${L}`),me=()=>{const L=[];for(let ae=0;ae<24;ae++)L.push({value:ae,text:ve(ae),disabled:!1});t(3,y=L),we()},we=()=>t(3,y=y.map(L=>(L.disabled=!1,a&&!f?ge(a)===ge(v)&&(L.disabled=L.value<a.getHours()):f&&!a?ge(f)===ge(v)&&(L.disabled=L.value>f.getHours()):f&&a&&(ge(a)===ge(v)?L.disabled=L.value<a.getHours():ge(f)===ge(v)&&(L.disabled=L.value>f.getHours())),L))),Ne=()=>{const L=[];for(let ae=0;ae<60;ae++)L.push({value:ae,text:`${ae}`.length<2?`0${ae}`:`${ae}`,disabled:!1});t(4,O=L),J()},J=()=>t(4,O=O.map(L=>(L.disabled=!1,a&&!f?ge(a)===ge(v)&&v.getHours()===a.getHours()&&(L.disabled=L.value<a.getMinutes()):f&&!a?ge(f)===ge(v)&&v.getHours()===f.getHours()&&(L.disabled=L.value>f.getMinutes()):f&&a&&(ge(a)===ge(v)&&v.getHours()===a.getHours()?L.disabled=L.value<a.getMinutes():ge(f)===ge(v)&&v.getHours()===f.getHours()&&(L.disabled=L.value>f.getMinutes())),L))),V=()=>t(2,A=A.map(L=>(a&&!f&&(L.isDisabled=L.date.getTime()+An<a.getTime()),f&&!a&&(L.isDisabled=L.date.getTime()>f.getTime()),f&&a&&(L.isDisabled=L.date.getTime()+An<a.getTime()||L.date.getTime()>f.getTime()),L.isSelected=ge(L.date)===ge(v)&&!L.isDisabled,L))),ue=()=>{t(2,A=[]),t(21,b=new Date(b.setDate(1)));const L=ee(b.getFullYear(),b.getMonth()),ae=ee(b.getFullYear(),b.getMonth(),0);for(let ne=b.getDay();ne>0;ne--)t(2,A=[...A,{day:ae-ne+1,activeMonth:!1,date:new Date(b.getFullYear(),b.getMonth()-1,ae-ne+1)}]);for(let ne=1;ne<=L;ne++)t(2,A=[...A,{day:ne,activeMonth:!0,date:new Date(b.getFullYear(),b.getMonth(),ne)}]);const Te=42-A.length;for(let ne=1;ne<=Te;ne++)t(2,A=[...A,{day:ne,activeMonth:!1,date:new Date(b.getFullYear(),b.getMonth()+1,ne)}]);V()};ue();const Ue=()=>P(-1),ze=()=>P(1),I=L=>M(L.date);function _e(L){Ct[L?"unshift":"push"](()=>{R=L,t(5,R),t(3,y)})}const ke=()=>U();function ce(L){Ct[L?"unshift":"push"](()=>{G=L,t(6,G),t(4,O)})}const oe=()=>fe(),se=()=>v.getHours()>=12&&B(-12),Re=()=>v.getHours()<12&&B(12);return r.$$set=L=>{"value"in L&&t(17,o=L.value),"min"in L&&t(18,a=L.min),"max"in L&&t(19,f=L.max),"timepicker"in L&&t(0,u=L.timepicker),"change"in L&&t(20,g=L.change)},r.$$.update=()=>{r.$$.dirty[0]&1048578&&v&&g&&wr().then(()=>{g(v)}),r.$$.dirty[0]&2097152&&t(10,n=b.getMonth()),r.$$.dirty[0]&2097152&&t(9,i=b.getFullYear()),r.$$.dirty[0]&4&&A.filter(L=>L.activeMonth&&!L.isDisabled).length,r.$$.dirty[0]&917505&&(o||a||f||u)&&(le(),V()),r.$$.dirty[0]&262146&&t(8,l=()=>{if(a)return ge(a)===ge(v)?a.getHours()>=12:!1}),r.$$.dirty[0]&524290&&t(7,s=()=>{if(f)return ge(f)===ge(v)?f.getHours()<12:!1})},[u,v,A,y,O,R,G,s,l,i,n,c,P,M,U,fe,B,o,a,f,g,b,Ue,ze,I,_e,ke,ce,oe,se,Re]}class tl extends wt{constructor(e){super();this.shadowRoot.innerHTML="<style>.datepicker{font-family:var(--font);width:100%;font-size:var(--font-size);background:var(--background);font-family:sans-serif;font-size:14px}.datepicker-wrapper{padding:1rem}.datepicker-dates{display:flex;flex-direction:column}.label-days{flex:1;display:flex;flex-wrap:wrap}.datepicker-header{padding:10px;color:var(--text);margin:0px}.datepicker-controls{display:flex;align-items:center;justify-content:space-between;padding:10px}.datepicker-btn{height:31px;width:31px;background:var(--background);font-size:18px;cursor:pointer;font-weight:700;border-radius:50px;border:none;color:var(--text)}.datepicker-btn:hover{background:var(--primary-dark) !important;color:var(--button-active-text)}.datepicker-btn:focus{outline:none}.label-days>div{flex-basis:14.2857142857%;text-align:center}.days{width:100%;display:flex;flex-wrap:wrap}.label{color:var(--text-light);font-size:10px}.current{font-weight:700}.current-month h3{color:var(--text);margin:0px}.selected{background:var(--primary) !important;color:var(--button-active-text) !important;font-weight:700}.days div{flex-basis:14.2857142857%;text-align:center;margin-top:3px;box-sizing:border-box;margin-bottom:3px}.days div button{border-radius:50px;background:var(--background);color:var(--text);width:30px;font-size:12px;font-weight:500;height:30px;padding:0;text-align:center;cursor:pointer;border:none}.days div button:focus{outline:0}.days div button:hover{background:var(--primary-dark);color:var(--button-active-text) !important}.days div button:disabled{color:var(--text-light);opacity:0.6;cursor:not-allowed}.timepicker{display:flex;justify-content:space-between;align-items:center;padding:10px 10px}.timepicker div{display:flex}.timepicker p{margin:0;color:var(--text-light)}.picker{border-radius:4px;border:none;color:var(--text);padding:5px 0px;background:var(--background);margin:0px 3px;width:100%}.clock{border-radius:4px;display:flex;width:75px;background:var(--background)}.time{flex:1}.clock-button{border-radius:4px;color:#a4aaad;background:none;cursor:pointer;flex:1;padding:5px 0px;border:none;outline:0}.clock-button:disabled{cursor:not-allowed}.clock-button-active{color:#fff;background:var(--primary)}.tooltip{position:relative;display:inline-block}.tooltip .tooltiptext{opacity:0;visibility:hidden;width:120px;background-color:white;color:#000;text-align:center;border-radius:6px;padding:5px 0;box-shadow:0 1px 10px rgba(0, 0, 0, 0.11), 0 3px 10px rgba(0, 0, 0, 0.12);position:absolute;z-index:1;top:110%;left:50%;margin-left:-60px;transition:opacity 0.3s;transition-delay:1s}.tooltip:hover .tooltiptext{opacity:1;visibility:visible}</style>",Me(this,{target:this.shadowRoot,props:Et(this.attributes),customElement:!0},el,$o,_r,{value:17,min:18,max:19,timepicker:0,change:20},null,[-1,-1]),e&&(e.target&&x(e.target,this,e.anchor),e.props&&(this.$set(e.props),z()))}static get observedAttributes(){return["value","min","max","timepicker","change"]}get value(){return this.$$.ctx[17]}set value(e){this.$$set({value:e}),z()}get min(){return this.$$.ctx[18]}set min(e){this.$$set({min:e}),z()}get max(){return this.$$.ctx[19]}set max(e){this.$$set({max:e}),z()}get timepicker(){return this.$$.ctx[0]}set timepicker(e){this.$$set({timepicker:e}),z()}get change(){return this.$$.ctx[20]}set change(e){this.$$set({change:e}),z()}}customElements.define("nylas-datepicker",tl);function rl(r){let e,t,n,i,l,s,c,o,a,f,u;return i=new ir({props:{class:"CloseIcon"}}),{c(){e=w("div"),t=w("div"),n=w("span"),nt(i.$$.fragment),l=H(),s=w("nylas-datepicker"),c=H(),o=w("button"),o.textContent="Schedule send",this.c=j,d(n,"class","close"),q(s,"change",r[1]),q(s,"timepicker",!0),q(s,"min",new Date),d(o,"class","save-btn"),d(t,"class","modal-content"),d(e,"class","datepicker-modal")},m(g,b){x(g,e,b),p(e,t),p(t,n),rt(i,n,null),p(t,l),p(t,s),p(t,c),p(t,o),a=!0,f||(u=[he(n,"click",function(){er(r[0])&&r[0].apply(this,arguments)}),he(o,"click",r[2])],f=!0)},p(g,[b]){r=g},i(g){a||(W(i.$$.fragment,g),a=!0)},o(g){re(i.$$.fragment,g),a=!1},d(g){g&&h(e),tt(i),f=!1,et(u)}}}function nl(r,e,t){let n,{schedule:i}=e,{close:l}=e;const s=o=>{n=o},c=()=>{i(Math.trunc(n.getTime()/1e3))};return r.$$set=o=>{"schedule"in o&&t(3,i=o.schedule),"close"in o&&t(0,l=o.close)},[l,s,c,i]}class il extends wt{constructor(e){super();this.shadowRoot.innerHTML="<style>.modal-content{display:block;box-shadow:var(--composer-shadow, 0 1px 10px rgba(0, 0, 0, 0.11), 0 3px 36px rgba(0, 0, 0, 0.12));border-radius:var(--composer-border-radius, 6px)}.close{color:var(--composer-text-light-color, #6e6e7a);float:right;padding-right:10px;font-size:28px;font-weight:bold}.close:hover,.close:focus{color:var(--composer-text-color, black);text-decoration:none;cursor:pointer}.save-btn{border:0;background:var(--composer-primary-color, #5c77ff);width:100%;color:white;cursor:pointer;padding:10px 25px;font-weight:bold;border-radius:0 0 var(--composer-border-radius, 6px) var(--composer-border-radius, 6px);font-family:var(--composer-font, sans-serif)}.save-btn:disabled{opacity:0.5}.save-btn:hover{background:var(--composer-primary-dark-color, #294dff)}.datepicker-modal{position:absolute;bottom:calc(var(--composer-outer-padding, 15px) * 0.85);right:calc(var(--composer-outer-padding, 15px) * 0.85);left:calc(var(--composer-outer-padding, 15px) * 0.85)}</style>",Me(this,{target:this.shadowRoot,props:Et(this.attributes),customElement:!0},nl,rl,He,{schedule:3,close:0},null),e&&(e.target&&x(e.target,this,e.anchor),e.props&&(this.$set(e.props),z()))}static get observedAttributes(){return["schedule","close"]}get schedule(){return this.$$.ctx[3]}set schedule(e){this.$$set({schedule:e}),z()}get close(){return this.$$.ctx[0]}set close(e){this.$$set({close:e}),z()}}customElements.define("nylas-composer-datepicker-modal",il);var ol=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};function ll(r,e,t){return t={path:e,exports:{},require:function(n,i){return sl(n,i==null?t.path:i)}},r(t,t.exports),t.exports}function sl(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}var al=ll(function(r,e){/*! @license DOMPurify 2.3.5 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/2.3.5/LICENSE */(function(t,n){r.exports=n()})(ol,function(){function t(D){if(Array.isArray(D)){for(var F=0,Y=Array(D.length);F<D.length;F++)Y[F]=D[F];return Y}else return Array.from(D)}var n=Object.hasOwnProperty,i=Object.setPrototypeOf,l=Object.isFrozen,s=Object.getPrototypeOf,c=Object.getOwnPropertyDescriptor,o=Object.freeze,a=Object.seal,f=Object.create,u=typeof Reflect!="undefined"&&Reflect,g=u.apply,b=u.construct;g||(g=function(F,Y,ie){return F.apply(Y,ie)}),o||(o=function(F){return F}),a||(a=function(F){return F}),b||(b=function(F,Y){return new(Function.prototype.bind.apply(F,[null].concat(t(Y))))});var v=U(Array.prototype.forEach),A=U(Array.prototype.pop),y=U(Array.prototype.push),O=U(String.prototype.toLowerCase),R=U(String.prototype.match),G=U(String.prototype.replace),le=U(String.prototype.indexOf),ee=U(String.prototype.trim),P=U(RegExp.prototype.test),M=fe(TypeError);function U(D){return function(F){for(var Y=arguments.length,ie=Array(Y>1?Y-1:0),be=1;be<Y;be++)ie[be-1]=arguments[be];return g(D,F,ie)}}function fe(D){return function(){for(var F=arguments.length,Y=Array(F),ie=0;ie<F;ie++)Y[ie]=arguments[ie];return b(D,Y)}}function B(D,F){i&&i(D,null);for(var Y=F.length;Y--;){var ie=F[Y];if(typeof ie=="string"){var be=O(ie);be!==ie&&(l(F)||(F[Y]=be),ie=be)}D[ie]=!0}return D}function ve(D){var F=f(null),Y=void 0;for(Y in D)g(n,D,[Y])&&(F[Y]=D[Y]);return F}function me(D,F){for(;D!==null;){var Y=c(D,F);if(Y){if(Y.get)return U(Y.get);if(typeof Y.value=="function")return U(Y.value)}D=s(D)}function ie(be){return console.warn("fallback value for",be),null}return ie}var we=o(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),Ne=o(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),J=o(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),V=o(["animate","color-profile","cursor","discard","fedropshadow","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),ue=o(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover"]),Ue=o(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),ze=o(["#text"]),I=o(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),_e=o(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),ke=o(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),ce=o(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),oe=a(/\{\{[\s\S]*|[\s\S]*\}\}/gm),se=a(/<%[\s\S]*|[\s\S]*%>/gm),Re=a(/^data-[\-\w.\u00B7-\uFFFF]/),L=a(/^aria-[\-\w]+$/),ae=a(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),Te=a(/^(?:\w+script|data):/i),ne=a(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),xe=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(D){return typeof D}:function(D){return D&&typeof Symbol=="function"&&D.constructor===Symbol&&D!==Symbol.prototype?"symbol":typeof D};function Ce(D){if(Array.isArray(D)){for(var F=0,Y=Array(D.length);F<D.length;F++)Y[F]=D[F];return Y}else return Array.from(D)}var Ge=function(){return typeof window=="undefined"?null:window},Oe=function(F,Y){if((typeof F=="undefined"?"undefined":xe(F))!=="object"||typeof F.createPolicy!="function")return null;var ie=null,be="data-tt-policy-suffix";Y.currentScript&&Y.currentScript.hasAttribute(be)&&(ie=Y.currentScript.getAttribute(be));var k="dompurify"+(ie?"#"+ie:"");try{return F.createPolicy(k,{createHTML:function(ct){return ct}})}catch(K){return console.warn("TrustedTypes policy "+k+" could not be created."),null}};function Le(){var D=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Ge(),F=function(m){return Le(m)};if(F.version="2.3.5",F.removed=[],!D||!D.document||D.document.nodeType!==9)return F.isSupported=!1,F;var Y=D.document,ie=D.document,be=D.DocumentFragment,k=D.HTMLTemplateElement,K=D.Node,ct=D.Element,Qe=D.NodeFilter,Lr=D.NamedNodeMap,Wr=Lr===void 0?D.NamedNodeMap||D.MozNamedAttrMap:Lr,or=D.HTMLFormElement,de=D.DOMParser,St=D.trustedTypes,Tt=ct.prototype,Zt=me(Tt,"cloneNode"),lr=me(Tt,"nextSibling"),Ar=me(Tt,"childNodes"),ft=me(Tt,"parentNode");if(typeof k=="function"){var mt=ie.createElement("template");mt.content&&mt.content.ownerDocument&&(ie=mt.content.ownerDocument)}var _t=Oe(St,Y),Or=_t?_t.createHTML(""):"",Yt=ie,sr=Yt.implementation,Zr=Yt.createNodeIterator,Yr=Yt.createDocumentFragment,Vr=Yt.getElementsByTagName,Xr=Y.importNode,Vt={};try{Vt=ve(ie).documentMode?ie.documentMode:{}}catch(X){}var Je={};F.isSupported=typeof ft=="function"&&sr&&typeof sr.createHTMLDocument!="undefined"&&Vt!==9;var Lt=oe,pt=se,Mr=Re,gt=L,ar=Te,yt=ne,cr=ae,Ie=null,Xt=B({},[].concat(Ce(we),Ce(Ne),Ce(J),Ce(ue),Ce(ze))),Pe=null,Ht=B({},[].concat(Ce(I),Ce(_e),Ce(ke),Ce(ce))),De=Object.seal(Object.create(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),jt=null,fr=null,Nr=!0,ur=!0,Dr=!1,At=!1,Ot=!1,dr=!1,hr=!1,Mt=!1,Kt=!1,_=!1,Q=!0,Ee=!0,Be=!1,Nt={},ut=null,Bt=B({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]),zr=null,Rr=B({},["audio","video","img","source","image","track"]),Ut=null,bt=B({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),Gt="http://www.w3.org/1998/Math/MathML",Kr="http://www.w3.org/2000/svg",Dt="http://www.w3.org/1999/xhtml",Fr=Dt,Qr=!1,Qt=void 0,Vs=["application/xhtml+xml","text/html"],Xs="text/html",Jt=void 0,qt=null,Ks=ie.createElement("form"),Fi=function(m){return m instanceof RegExp||m instanceof Function},qr=function(m){qt&&qt===m||((!m||(typeof m=="undefined"?"undefined":xe(m))!=="object")&&(m={}),m=ve(m),Ie="ALLOWED_TAGS"in m?B({},m.ALLOWED_TAGS):Xt,Pe="ALLOWED_ATTR"in m?B({},m.ALLOWED_ATTR):Ht,Ut="ADD_URI_SAFE_ATTR"in m?B(ve(bt),m.ADD_URI_SAFE_ATTR):bt,zr="ADD_DATA_URI_TAGS"in m?B(ve(Rr),m.ADD_DATA_URI_TAGS):Rr,ut="FORBID_CONTENTS"in m?B({},m.FORBID_CONTENTS):Bt,jt="FORBID_TAGS"in m?B({},m.FORBID_TAGS):{},fr="FORBID_ATTR"in m?B({},m.FORBID_ATTR):{},Nt="USE_PROFILES"in m?m.USE_PROFILES:!1,Nr=m.ALLOW_ARIA_ATTR!==!1,ur=m.ALLOW_DATA_ATTR!==!1,Dr=m.ALLOW_UNKNOWN_PROTOCOLS||!1,At=m.SAFE_FOR_TEMPLATES||!1,Ot=m.WHOLE_DOCUMENT||!1,Mt=m.RETURN_DOM||!1,Kt=m.RETURN_DOM_FRAGMENT||!1,_=m.RETURN_TRUSTED_TYPE||!1,hr=m.FORCE_BODY||!1,Q=m.SANITIZE_DOM!==!1,Ee=m.KEEP_CONTENT!==!1,Be=m.IN_PLACE||!1,cr=m.ALLOWED_URI_REGEXP||cr,Fr=m.NAMESPACE||Dt,m.CUSTOM_ELEMENT_HANDLING&&Fi(m.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(De.tagNameCheck=m.CUSTOM_ELEMENT_HANDLING.tagNameCheck),m.CUSTOM_ELEMENT_HANDLING&&Fi(m.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(De.attributeNameCheck=m.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),m.CUSTOM_ELEMENT_HANDLING&&typeof m.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(De.allowCustomizedBuiltInElements=m.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),Qt=Vs.indexOf(m.PARSER_MEDIA_TYPE)===-1?Qt=Xs:Qt=m.PARSER_MEDIA_TYPE,Jt=Qt==="application/xhtml+xml"?function(N){return N}:O,At&&(ur=!1),Kt&&(Mt=!0),Nt&&(Ie=B({},[].concat(Ce(ze))),Pe=[],Nt.html===!0&&(B(Ie,we),B(Pe,I)),Nt.svg===!0&&(B(Ie,Ne),B(Pe,_e),B(Pe,ce)),Nt.svgFilters===!0&&(B(Ie,J),B(Pe,_e),B(Pe,ce)),Nt.mathMl===!0&&(B(Ie,ue),B(Pe,ke),B(Pe,ce))),m.ADD_TAGS&&(Ie===Xt&&(Ie=ve(Ie)),B(Ie,m.ADD_TAGS)),m.ADD_ATTR&&(Pe===Ht&&(Pe=ve(Pe)),B(Pe,m.ADD_ATTR)),m.ADD_URI_SAFE_ATTR&&B(Ut,m.ADD_URI_SAFE_ATTR),m.FORBID_CONTENTS&&(ut===Bt&&(ut=ve(ut)),B(ut,m.FORBID_CONTENTS)),Ee&&(Ie["#text"]=!0),Ot&&B(Ie,["html","head","body"]),Ie.table&&(B(Ie,["tbody"]),delete jt.tbody),o&&o(m),qt=m)},Ii=B({},["mi","mo","mn","ms","mtext"]),Pi=B({},["foreignobject","desc","title","annotation-xml"]),Ir=B({},Ne);B(Ir,J),B(Ir,V);var $r=B({},ue);B($r,Ue);var Qs=function(m){var N=ft(m);(!N||!N.tagName)&&(N={namespaceURI:Dt,tagName:"template"});var Z=O(m.tagName),Se=O(N.tagName);if(m.namespaceURI===Kr)return N.namespaceURI===Dt?Z==="svg":N.namespaceURI===Gt?Z==="svg"&&(Se==="annotation-xml"||Ii[Se]):Boolean(Ir[Z]);if(m.namespaceURI===Gt)return N.namespaceURI===Dt?Z==="math":N.namespaceURI===Kr?Z==="math"&&Pi[Se]:Boolean($r[Z]);if(m.namespaceURI===Dt){if(N.namespaceURI===Kr&&!Pi[Se]||N.namespaceURI===Gt&&!Ii[Se])return!1;var qe=B({},["title","style","font","a","script"]);return!$r[Z]&&(qe[Z]||!Ir[Z])}return!1},kt=function(m){y(F.removed,{element:m});try{m.parentNode.removeChild(m)}catch(N){try{m.outerHTML=Or}catch(Z){m.remove()}}},Hi=function(m,N){try{y(F.removed,{attribute:N.getAttributeNode(m),from:N})}catch(Z){y(F.removed,{attribute:null,from:N})}if(N.removeAttribute(m),m==="is"&&!Pe[m])if(Mt||Kt)try{kt(N)}catch(Z){}else try{N.setAttribute(m,"")}catch(Z){}},ji=function(m){var N=void 0,Z=void 0;if(hr)m="<remove></remove>"+m;else{var Se=R(m,/^[\r\n\t ]+/);Z=Se&&Se[0]}Qt==="application/xhtml+xml"&&(m='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+m+"</body></html>");var qe=_t?_t.createHTML(m):m;if(Fr===Dt)try{N=new de().parseFromString(qe,Qt)}catch(Ye){}if(!N||!N.documentElement){N=sr.createDocument(Fr,"template",null);try{N.documentElement.innerHTML=Qr?"":qe}catch(Ye){}}var $e=N.body||N.documentElement;return m&&Z&&$e.insertBefore(ie.createTextNode(Z),$e.childNodes[0]||null),Fr===Dt?Vr.call(N,Ot?"html":"body")[0]:Ot?N.documentElement:$e},Bi=function(m){return Zr.call(m.ownerDocument||m,m,Qe.SHOW_ELEMENT|Qe.SHOW_COMMENT|Qe.SHOW_TEXT,null,!1)},qs=function(m){return m instanceof or&&(typeof m.nodeName!="string"||typeof m.textContent!="string"||typeof m.removeChild!="function"||!(m.attributes instanceof Wr)||typeof m.removeAttribute!="function"||typeof m.setAttribute!="function"||typeof m.namespaceURI!="string"||typeof m.insertBefore!="function")},mr=function(m){return(typeof K=="undefined"?"undefined":xe(K))==="object"?m instanceof K:m&&(typeof m=="undefined"?"undefined":xe(m))==="object"&&typeof m.nodeType=="number"&&typeof m.nodeName=="string"},xt=function(m,N,Z){!Je[m]||v(Je[m],function(Se){Se.call(F,N,Z,qt)})},Ui=function(m){var N=void 0;if(xt("beforeSanitizeElements",m,null),qs(m)||R(m.nodeName,/[\u0080-\uFFFF]/))return kt(m),!0;var Z=Jt(m.nodeName);if(xt("uponSanitizeElement",m,{tagName:Z,allowedTags:Ie}),!mr(m.firstElementChild)&&(!mr(m.content)||!mr(m.content.firstElementChild))&&P(/<[/\w]/g,m.innerHTML)&&P(/<[/\w]/g,m.textContent)||Z==="select"&&P(/<template/i,m.innerHTML))return kt(m),!0;if(!Ie[Z]||jt[Z]){if(Ee&&!ut[Z]){var Se=ft(m)||m.parentNode,qe=Ar(m)||m.childNodes;if(qe&&Se)for(var $e=qe.length,Ye=$e-1;Ye>=0;--Ye)Se.insertBefore(Zt(qe[Ye],!0),lr(m))}return!jt[Z]&&Ji(Z)&&(De.tagNameCheck instanceof RegExp&&P(De.tagNameCheck,Z)||De.tagNameCheck instanceof Function&&De.tagNameCheck(Z))?!1:(kt(m),!0)}return m instanceof ct&&!Qs(m)||(Z==="noscript"||Z==="noembed")&&P(/<\/no(script|embed)/i,m.innerHTML)?(kt(m),!0):(At&&m.nodeType===3&&(N=m.textContent,N=G(N,Lt," "),N=G(N,pt," "),m.textContent!==N&&(y(F.removed,{element:m.cloneNode()}),m.textContent=N)),xt("afterSanitizeElements",m,null),!1)},Gi=function(m,N,Z){if(Q&&(N==="id"||N==="name")&&(Z in ie||Z in Ks))return!1;if(!(ur&&!fr[N]&&P(Mr,N))){if(!(Nr&&P(gt,N))){if(!Pe[N]||fr[N]){if(!(Ji(m)&&(De.tagNameCheck instanceof RegExp&&P(De.tagNameCheck,m)||De.tagNameCheck instanceof Function&&De.tagNameCheck(m))&&(De.attributeNameCheck instanceof RegExp&&P(De.attributeNameCheck,N)||De.attributeNameCheck instanceof Function&&De.attributeNameCheck(N))||N==="is"&&De.allowCustomizedBuiltInElements&&(De.tagNameCheck instanceof RegExp&&P(De.tagNameCheck,Z)||De.tagNameCheck instanceof Function&&De.tagNameCheck(Z))))return!1}else if(!Ut[N]){if(!P(cr,G(Z,yt,""))){if(!((N==="src"||N==="xlink:href"||N==="href")&&m!=="script"&&le(Z,"data:")===0&&zr[m])){if(!(Dr&&!P(ar,G(Z,yt,"")))){if(Z)return!1}}}}}}return!0},Ji=function(m){return m.indexOf("-")>0},Wi=function(m){var N=void 0,Z=void 0,Se=void 0,qe=void 0;xt("beforeSanitizeAttributes",m,null);var $e=m.attributes;if(!!$e){var Ye={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:Pe};for(qe=$e.length;qe--;){N=$e[qe];var Pr=N,dt=Pr.name,Zi=Pr.namespaceURI;if(Z=ee(N.value),Se=Jt(dt),Ye.attrName=Se,Ye.attrValue=Z,Ye.keepAttr=!0,Ye.forceKeepAttr=void 0,xt("uponSanitizeAttribute",m,Ye),Z=Ye.attrValue,!Ye.forceKeepAttr&&(Hi(dt,m),!!Ye.keepAttr)){if(P(/\/>/i,Z)){Hi(dt,m);continue}At&&(Z=G(Z,Lt," "),Z=G(Z,pt," "));var ea=Jt(m.nodeName);if(!!Gi(ea,Se,Z))try{Zi?m.setAttributeNS(Zi,dt,Z):m.setAttribute(dt,Z),A(F.removed)}catch(ta){}}}xt("afterSanitizeAttributes",m,null)}},$s=function X(m){var N=void 0,Z=Bi(m);for(xt("beforeSanitizeShadowDOM",m,null);N=Z.nextNode();)xt("uponSanitizeShadowNode",N,null),!Ui(N)&&(N.content instanceof be&&X(N.content),Wi(N));xt("afterSanitizeShadowDOM",m,null)};return F.sanitize=function(X,m){var N=void 0,Z=void 0,Se=void 0,qe=void 0,$e=void 0;if(Qr=!X,Qr&&(X="<!-->"),typeof X!="string"&&!mr(X)){if(typeof X.toString!="function")throw M("toString is not a function");if(X=X.toString(),typeof X!="string")throw M("dirty is not a string, aborting")}if(!F.isSupported){if(xe(D.toStaticHTML)==="object"||typeof D.toStaticHTML=="function"){if(typeof X=="string")return D.toStaticHTML(X);if(mr(X))return D.toStaticHTML(X.outerHTML)}return X}if(dr||qr(m),F.removed=[],typeof X=="string"&&(Be=!1),Be){if(X.nodeName){var Ye=Jt(X.nodeName);if(!Ie[Ye]||jt[Ye])throw M("root node is forbidden and cannot be sanitized in-place")}}else if(X instanceof K)N=ji("<!---->"),Z=N.ownerDocument.importNode(X,!0),Z.nodeType===1&&Z.nodeName==="BODY"||Z.nodeName==="HTML"?N=Z:N.appendChild(Z);else{if(!Mt&&!At&&!Ot&&X.indexOf("<")===-1)return _t&&_?_t.createHTML(X):X;if(N=ji(X),!N)return Mt?null:_?Or:""}N&&hr&&kt(N.firstChild);for(var Pr=Bi(Be?X:N);Se=Pr.nextNode();)Se.nodeType===3&&Se===qe||Ui(Se)||(Se.content instanceof be&&$s(Se.content),Wi(Se),qe=Se);if(qe=null,Be)return X;if(Mt){if(Kt)for($e=Yr.call(N.ownerDocument);N.firstChild;)$e.appendChild(N.firstChild);else $e=N;return Pe.shadowroot&&($e=Xr.call(Y,$e,!0)),$e}var dt=Ot?N.outerHTML:N.innerHTML;return At&&(dt=G(dt,Lt," "),dt=G(dt,pt," ")),_t&&_?_t.createHTML(dt):dt},F.setConfig=function(X){qr(X),dr=!0},F.clearConfig=function(){qt=null,dr=!1},F.isValidAttribute=function(X,m,N){qt||qr({});var Z=Jt(X),Se=Jt(m);return Gi(Z,Se,N)},F.addHook=function(X,m){typeof m=="function"&&(Je[X]=Je[X]||[],y(Je[X],m))},F.removeHook=function(X){Je[X]&&A(Je[X])},F.removeHooks=function(X){Je[X]&&(Je[X]=[])},F.removeAllHooks=function(){Je={}},F}var je=Le();return je})});const cl=(r,e)=>{let t;return function(...i){const l=()=>{clearTimeout(t),r(...i)};clearTimeout(t),t=setTimeout(l,e)}},fl=r=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(r),ul=r=>{var e,t,n,i;return r?((i=(n=(t=(e=al.sanitize(r,{ALLOWED_TAGS:[],KEEP_CONTENT:!0}))==null?void 0:e.replace(/(&.+?;)/g,""))==null?void 0:t.replace(/\s+/g," "))==null?void 0:n.trim())==null?void 0:i.substring(0,190))+(r.length>190?"...":""):""},dl=r=>"email"in r&&"name"in r,On=r=>r.reduce((t,n)=>{var i,l,s;return dl(n)?t.push(n):"emails"in n&&((i=n.emails)==null?void 0:i.length)>0&&t.push({name:`${(l=n.given_name)!=null?l:""} ${(s=n.surname)!=null?s:""}`,email:n.emails[0].email,contact:n}),t},[]);function Mn(r,e,t){const n=r.slice();return n[33]=e[t],n[35]=t,n}function Nn(r,e,t){const n=r.slice();return n[33]=e[t],n}function hl(r){let e=r[33].email+"",t;return{c(){t=te(e)},m(n,i){x(n,t,i)},p(n,i){i[0]&8&&e!==(e=n[33].email+"")&&Ae(t,e)},d(n){n&&h(t)}}}function ml(r){let e,t=r[33].name+"",n,i,l=`<${r[33].email}>`,s;return{c(){e=w("strong"),n=te(t),i=H(),s=te(l)},m(c,o){x(c,e,o),p(e,n),x(c,i,o),x(c,s,o)},p(c,o){o[0]&8&&t!==(t=c[33].name+"")&&Ae(n,t),o[0]&8&&l!==(l=`<${c[33].email}>`)&&Ae(s,l)},d(c){c&&h(e),c&&h(i),c&&h(s)}}}function Dn(r,e){let t,n,i,l,s,c,o;function a(b,v){return b[33].name?ml:hl}let f=a(e),u=f(e);function g(){return e[22](e[33])}return{key:r,first:null,c(){t=w("div"),n=w("span"),u.c(),i=H(),l=w("button"),l.textContent="\xD7",s=H(),d(n,"class","contact-item__name"),d(l,"type","button"),d(l,"name","term"),d(t,"class","contact-item"),this.first=t},m(b,v){x(b,t,v),p(t,n),u.m(n,null),p(t,i),p(t,l),p(t,s),c||(o=he(l,"click",g),c=!0)},p(b,v){e=b,f===(f=a(e))&&u?u.p(e,v):(u.d(1),u=f(e),u&&(u.c(),u.m(n,null)))},d(b){b&&h(t),u.d(),c=!1,o()}}}function zn(r){let e,t,n,i;return{c(){e=w("form"),t=w("input"),d(t,"data-cy","contacts-search-field"),d(t,"type","text"),d(t,"name","email"),d(t,"autocomplete","off"),d(t,"class","search-field"),d(e,"class","search-form")},m(l,s){x(l,e,s),p(e,t),r[23](t),on(t,r[4]),n||(i=[he(t,"keydown",r[14]),he(t,"blur",r[24]),he(t,"input",r[25]),he(e,"submit",Qi(r[16]))],n=!0)},p(l,s){s[0]&16&&t.value!==l[4]&&on(t,l[4])},d(l){l&&h(e),r[23](null),n=!1,et(i)}}}function Rn(r){let e;function t(l,s){if(l[9]&&!l[7].length)return pl;if(l[7].length)return _l}let n=t(r),i=n&&n(r);return{c(){e=w("div"),i&&i.c(),d(e,"class","dropdown-content")},m(l,s){x(l,e,s),i&&i.m(e,null)},p(l,s){n===(n=t(l))&&i?i.p(l,s):(i&&i.d(1),i=n&&n(l),i&&(i.c(),i.m(e,null)))},d(l){l&&h(e),i&&i.d()}}}function _l(r){let e,t=r[7],n=[];for(let i=0;i<t.length;i+=1)n[i]=Fn(Mn(r,t,i));return{c(){for(let i=0;i<n.length;i+=1)n[i].c();e=st()},m(i,l){for(let s=0;s<n.length;s+=1)n[s].m(i,l);x(i,e,l)},p(i,l){if(l[0]&166272){t=i[7];let s;for(s=0;s<t.length;s+=1){const c=Mn(i,t,s);n[s]?n[s].p(c,l):(n[s]=Fn(c),n[s].c(),n[s].m(e.parentNode,e))}for(;s<n.length;s+=1)n[s].d(1);n.length=t.length}},d(i){jr(n,i),i&&h(e)}}}function pl(r){let e;return{c(){e=w("p"),e.textContent="Loading...",d(e,"class","dropdown-item")},m(t,n){x(t,e,n)},p:j,d(t){t&&h(e)}}}function gl(r){let e,t=r[33].email+"",n;return{c(){e=w("div"),n=te(t),d(e,"class","dropdown-item__name")},m(i,l){x(i,e,l),p(e,n)},p(i,l){l[0]&128&&t!==(t=i[33].email+"")&&Ae(n,t)},d(i){i&&h(e)}}}function bl(r){let e,t=r[33].name+"",n,i,l,s=r[33].email+"",c;return{c(){e=w("div"),n=te(t),i=H(),l=w("div"),c=te(s),d(e,"class","dropdown-item__name"),d(l,"class","dropdown-item__email")},m(o,a){x(o,e,a),p(e,n),x(o,i,a),x(o,l,a),p(l,c)},p(o,a){a[0]&128&&t!==(t=o[33].name+"")&&Ae(n,t),a[0]&128&&s!==(s=o[33].email+"")&&Ae(c,s)},d(o){o&&h(e),o&&h(i),o&&h(l)}}}function Fn(r){let e,t,n,i;function l(f,u){return f[33].name?bl:gl}let s=l(r),c=s(r);function o(){return r[26](r[33])}function a(){return r[27](r[35])}return{c(){e=w("div"),c.c(),t=H(),d(e,"class","dropdown-item"),Fe(e,"active",r[8]===r[35]),Fe(e,"selected",r[17](r[33].email))},m(f,u){x(f,e,u),c.m(e,null),p(e,t),n||(i=[he(e,"mousedown",o),he(e,"mouseenter",a)],n=!0)},p(f,u){r=f,s===(s=l(r))&&c?c.p(r,u):(c.d(1),c=s(r),c&&(c.c(),c.m(e,t))),u[0]&256&&Fe(e,"active",r[8]===r[35]),u[0]&131200&&Fe(e,"selected",r[17](r[33].email))},d(f){f&&h(e),c.d(),n=!1,et(i)}}}function vl(r){let e,t,n,i,l,s,c,o=[],a=new Map,f,u,g,b,v=r[3];const A=R=>R[33].email;for(let R=0;R<v.length;R+=1){let G=Nn(r,v,R),le=A(G);a.set(le,o[R]=Dn(le,G))}let y=(r[1]&&!r[3].length||!r[1])&&zn(r),O=r[6]&&r[2]&&Rn(r);return{c(){e=w("div"),t=w("div"),n=w("div"),i=w("div"),l=te(r[0]),s=H(),c=w("div");for(let R=0;R<o.length;R+=1)o[R].c();f=H(),y&&y.c(),u=H(),O&&O.c(),this.c=j,d(i,"class","contacts-placeholder"),d(c,"class","contacts-results-inner"),d(n,"class","contacts-results"),d(t,"class","contacts-container"),d(e,"class","dropdown")},m(R,G){x(R,e,G),p(e,t),p(t,n),p(n,i),p(i,l),p(n,s),p(n,c);for(let le=0;le<o.length;le+=1)o[le].m(c,null);p(t,f),y&&y.m(t,null),p(e,u),O&&O.m(e,null),g||(b=he(t,"click",r[12]),g=!0)},p(R,G){G[0]&1&&Ae(l,R[0]),G[0]&1032&&(v=R[3],o=Cr(o,G,A,1,R,v,a,c,Er,Dn,null,Nn)),R[1]&&!R[3].length||!R[1]?y?y.p(R,G):(y=zn(R),y.c(),y.m(t,null)):y&&(y.d(1),y=null),R[6]&&R[2]?O?O.p(R,G):(O=Rn(R),O.c(),O.m(e,null)):O&&(O.d(1),O=null)},i:j,o:j,d(R){R&&h(e);for(let G=0;G<o.length;G+=1)o[G].d();y&&y.d(),O&&O.d(),g=!1,b()}}}function wl(r,e,t){let n;var i=this&&this.__awaiter||function(I,_e,ke,ce){function oe(se){return se instanceof ke?se:new ke(function(Re){Re(se)})}return new(ke||(ke=Promise))(function(se,Re){function L(ne){try{Te(ce.next(ne))}catch(xe){Re(xe)}}function ae(ne){try{Te(ce.throw(ne))}catch(xe){Re(xe)}}function Te(ne){ne.done?se(ne.value):oe(ne.value).then(L,ae)}Te((ce=ce.apply(I,_e||[])).next())})};let{contacts:l}=e,{value:s=[]}=e,{placeholder:c="To"}=e,{single:o=!1}=e,{change:a}=e,{show_dropdown:f=!0}=e,u=[],g="",b=0,v=!1,A,y=[],O=!1;const R=()=>{Array.isArray(l)&&t(21,y=On(l)),Array.isArray(s)&&t(3,u=s)},G=()=>[],le=I=>{t(9,v=!0),t(21,y=[]),ee(I)},ee=cl(I=>i(void 0,void 0,void 0,function*(){t(9,v=!0);const _e=typeof l=="function"?l:G;try{const ke=yield _e(I);Array.isArray(ke)&&t(21,y=On(ke)),t(9,v=!1)}catch(ke){t(9,v=!1)}}),350),P=I=>{t(3,u=u.filter(_e=>_e.email!==I)),U()},M=I=>{if(o&&u.length===1){t(3,u=[I]),t(6,O=!1);return}we(I.email)||t(3,u=[...u,I]),U()},U=I=>{(I==null?void 0:I.target)&&A&&(!o||!u.length)&&(I.target.tagName!=="INPUT"&&A.focus(),t(6,O=!0))},fe=(I={})=>{setTimeout(()=>{I.addContact&&!n.length&&g&&me(),t(6,O=!1),t(4,g=""),A&&A.blur()},I.blurIn||250)},B=I=>{U(),I.key==="Backspace"&&u.length&&!g&&t(3,u=u.slice(0,u.length-1)),I.key==="Tab"&&me(),I.key==="ArrowDown"&&y.length&&b<=y.length&&t(8,b+=1),I.key==="ArrowUp"&&y.length&&b!=0&&t(8,b-=1),I.key==="Escape"&&y.length&&fe()},ve=I=>{t(8,b=I)},me=()=>{o&&u.length===1||(n.length&&(we(n[b].email)||(t(3,u=[...u,n[b]]),t(8,b=0),fe({blurIn:0}))),!we(g)&&g&&fl(g)&&(t(3,u=[...u,{email:g}]),t(8,b=0),fe({blurIn:0})))},we=I=>u.map(_e=>_e.email).includes(I),Ne=I=>P(I.email);function J(I){Ct[I?"unshift":"push"](()=>{A=I,t(5,A)})}const V=()=>{fe({addContact:!0})};function ue(){g=this.value,t(4,g)}const Ue=I=>M(I),ze=I=>ve(I);return r.$$set=I=>{"contacts"in I&&t(18,l=I.contacts),"value"in I&&t(19,s=I.value),"placeholder"in I&&t(0,c=I.placeholder),"single"in I&&t(1,o=I.single),"change"in I&&t(20,a=I.change),"show_dropdown"in I&&t(2,f=I.show_dropdown)},r.$$.update=()=>{r.$$.dirty[0]&32&&A&&(A.setAttribute("tabindex","-1"),A.focus(),A.removeAttribute("tabindex")),r.$$.dirty[0]&1048584&&u&&a&&wr().then(()=>{a(u)}),r.$$.dirty[0]&786432&&(l||s)&&R(),r.$$.dirty[0]&262224&&O&&typeof l=="function"&&le(g),r.$$.dirty[0]&2097168&&t(7,n=y.filter(I=>{const _e=g?g.toLowerCase():"",ke=I.name?I.name.toLowerCase():"",ce=I.email?I.email.toLowerCase():"",oe=ke.includes(_e),se=ce.includes(_e);return(oe||se)&&!we(I.email)})),r.$$.dirty[0]&128&&n&&t(8,b=0)},[c,o,f,u,g,A,O,n,b,v,P,M,U,fe,B,ve,me,we,l,s,a,y,Ne,J,V,ue,Ue,ze]}class yl extends wt{constructor(e){super();this.shadowRoot.innerHTML="<style>:root{font-family:sans-serif}.contacts-container{display:flex;align-items:center;flex-wrap:wrap;padding:0.4rem var(--outer-padding);border-bottom:1px solid var(--border)}.contacts-container *:focus{outline:5px auto var(--primary)}.contacts-container>div{padding-bottom:0.1rem;padding-right:0.1rem}.contact-item{display:inline-flex;background:var(--primary-light);color:var(--primary);align-items:center;border-radius:calc(var(--border-radius) / 2);padding:0.2rem 0.8rem;margin-right:0.25rem;margin-top:2px;margin-bottom:2px}.contact-item>button{color:var(--text-secondary);border:none;background:none;padding:2px 4px;font-weight:bold;font-size:13px;cursor:pointer}.contact-item__name{color:var(--text-secondary);font-size:12px;padding-right:0.75rem}.dropdown{width:100%;position:relative;display:inline-block}.dropdown-content{display:block;position:absolute;max-height:350px;background:var(--background);left:calc(var(--outer-padding) / 2);right:calc(var(--outer-padding) / 2);overflow-y:auto;color:var(--text);box-shadow:var(--shadow);z-index:1;border-radius:calc(var(--border-radius) / 2)}.dropdown-item{cursor:pointer;padding:var(--outer-padding);font-size:var(--font-size-small);background:var(--primary-light)}.dropdown-item.active{background-color:var(--primary);color:white}.dropdown-item.active .dropdown-item__email{color:var(--bg) !important}.dropdown-item.selected{opacity:0.3}.dropdown-item__name{font-weight:bold;display:inline-flex}.dropdown-item__email{color:var(--text-light);display:inline-flex;margin-left:0.25rem}.search-field{border:none;color:var(--text);background:var(--bg);min-width:100%}.search-field:focus{width:100px}.search-form{display:flex;padding-top:0.5rem;padding-bottom:0.5rem;align-items:center;min-width:320px}.contacts-results{display:flex;align-items:center}.contacts-placeholder{font-size:var(--font-size-small);margin-right:10px;min-width:30px;display:flex;color:var(--text-light)}</style>",Me(this,{target:this.shadowRoot,props:Et(this.attributes),customElement:!0},wl,vl,_r,{contacts:18,value:19,placeholder:0,single:1,change:20,show_dropdown:2},null,[-1,-1]),e&&(e.target&&x(e.target,this,e.anchor),e.props&&(this.$set(e.props),z()))}static get observedAttributes(){return["contacts","value","placeholder","single","change","show_dropdown"]}get contacts(){return this.$$.ctx[18]}set contacts(e){this.$$set({contacts:e}),z()}get value(){return this.$$.ctx[19]}set value(e){this.$$set({value:e}),z()}get placeholder(){return this.$$.ctx[0]}set placeholder(e){this.$$set({placeholder:e}),z()}get single(){return this.$$.ctx[1]}set single(e){this.$$set({single:e}),z()}get change(){return this.$$.ctx[20]}set change(e){this.$$set({change:e}),z()}get show_dropdown(){return this.$$.ctx[2]}set show_dropdown(e){this.$$set({show_dropdown:e}),z()}}customElements.define("nylas-contacts-search",yl);const kl=["message/delivery-status","message/rfc822"],xl=r=>r.content_disposition==="attachment"&&!!r.filename&&!kl.includes(r.content_type),Wt=[];function El(r,e){return{subscribe:Ft(r,e).subscribe}}function Ft(r,e=j){let t;const n=new Set;function i(c){if(He(r,c)&&(r=c,t)){const o=!Wt.length;for(const a of n)a[1](),Wt.push(a,r);if(o){for(let a=0;a<Wt.length;a+=2)Wt[a][0](Wt[a+1]);Wt.length=0}}}function l(c){i(c(r))}function s(c,o=j){const a=[c,o];return n.add(a),n.size===1&&(t=e(i)||j),c(r),()=>{n.delete(a),n.size===0&&(t(),t=null)}}return{set:i,update:l,subscribe:s}}function Cl(r,e,t){const n=!Array.isArray(r),i=n?[r]:r,l=e.length<2;return El(t,s=>{let c=!1;const o=[];let a=0,f=j;const u=()=>{if(a)return;f();const b=e(n?o[0]:o,s);l?s(b):f=er(b)?b:j},g=i.map((b,v)=>rn(b,A=>{o[v]=A,a&=~(1<<v),c&&u()},()=>{a|=1<<v}));return c=!0,u(),function(){et(g),f()}})}function Sl(){return Ft({})}const Gr=Sl();var Tl=Object.defineProperty,Ll=Object.defineProperties,Al=Object.getOwnPropertyDescriptors,In=Object.getOwnPropertySymbols,Ol=Object.prototype.hasOwnProperty,Ml=Object.prototype.propertyIsEnumerable,Pn=(r,e,t)=>e in r?Tl(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,Nl=(r,e)=>{for(var t in e||(e={}))Ol.call(e,t)&&Pn(r,t,e[t]);if(In)for(var t of In(e))Ml.call(e,t)&&Pn(r,t,e[t]);return r},Dl=(r,e)=>Ll(r,Al(e));async function it(r){var e;if(!r.ok){const t=await r.json().then(l=>l),n=((e=t==null?void 0:t.response)==null?void 0:e.error)||(t==null?void 0:t.message),i=new Error(n);return i.name=t.name,Promise.reject({message:i,statusCode:r.status})}return r.json()}function ot(r={component_id:""}){return{method:r.method||"GET",headers:{Accept:"application/json","Content-Type":"application/json","X-Component-Id":r.component_id||"","X-Access-Token":r.access_token||""},body:r.body?JSON.stringify(r.body):void 0}}function at(r,e){throw console.error(e),Gr.update(t=>Dl(Nl({},t),{[r]:e})),e}const Hn={"001":"","002":"ireland-","003":"canada-"};function lt(r){let e="";if(r.substring(3,4)==="-"){const n=r.substring(0,3);typeof Hn[n]!="undefined"&&(e=Hn[n])}return`https://${e}web-components.nylas.com/middleware`}function It(r){}var zl=Object.defineProperty,Rl=Object.defineProperties,Fl=Object.getOwnPropertyDescriptors,jn=Object.getOwnPropertySymbols,Il=Object.prototype.hasOwnProperty,Pl=Object.prototype.propertyIsEnumerable,Bn=(r,e,t)=>e in r?zl(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,Un=(r,e)=>{for(var t in e||(e={}))Il.call(e,t)&&Bn(r,t,e[t]);if(jn)for(var t of jn(e))Pl.call(e,t)&&Bn(r,t,e[t]);return r},Gn=(r,e)=>Rl(r,Fl(e));const Jn=(r,e,t)=>{if(r.thread_ids){const i=r.thread_ids.slice(t,t+e);return Promise.all(i.map(async l=>{const s=`${lt(r.component_id)}/threads/${l}?view=expanded`;return await fetch(s,ot(r)).then(c=>it(c)).then(c=>c.response).then(c=>Gn(Un({},c),{messages:c.messages.filter(o=>o.from.length!==0||o.to.length!==0)})).catch(c=>at(r.component_id,c))}))}let n=`${lt(r.component_id)}/threads?view=expanded&not_in=trash&limit=${e}&offset=${t}`;return r.query&&Object.entries(r.query).forEach(i=>n=n.concat(`&${i[0]}=${i[1]}`)),fetch(n,ot(r)).then(i=>it(i)).then(i=>i.response).then(i=>i.map(l=>Gn(Un({},l),{messages:l.messages.filter(s=>s.from.length!==0||s.to.length!==0)}))).catch(i=>at(r.component_id,i))};function Wn(r){let e=`${lt(r.component_id)}/threads?view=expanded&not_in=trash&view=count`;return r.query&&Object.entries(r.query).forEach(t=>e=e.concat(`&${t[0]}=${t[1]}`)),r.keywordToSearch&&(e+=`&q=${r.keywordToSearch}`),fetch(e,ot(r)).then(t=>it(t)).then(t=>t.response.count)}const Hl=r=>{const e=`${lt(r.component_id)}/threads/search?q=${r.keywordToSearch}&view=expanded&limit=${r.query.limit}&offset=${r.query.offset}`;return fetch(e,ot(r)).then(async t=>it(t)).then(t=>t.response).catch(t=>at(r.component_id,t))},jl=(r,e)=>fetch(`${lt(r.component_id)}/threads/${e.id}`,ot({method:"PUT",component_id:r.component_id,access_token:r.access_token,body:{unread:e.unread,starred:e.starred,folder_id:e.folder_id,label_ids:e.label_ids}})).then(t=>it(t)).then(t=>t.response).catch(t=>at(r.component_id,t)),Bl=async(r,e)=>await fetch(`${lt(r)}/manifest`,ot({access_token:e,component_id:r})).then(it).then(t=>t.component.theming).catch(t=>at(r,t)),Ul=async(r,e,t)=>await fetch(`${lt(r)}/send`,ot({method:"POST",component_id:r,access_token:t,body:e})).then(n=>it(n)).then(n=>n.response).catch(n=>at(r,n)),Gl=async(r,e,t)=>{const n=ot({method:"POST",component_id:r,access_token:t}),i=new FormData;return i.append("file",e),typeof n.headers!="undefined"&&"Content-Type"in n.headers&&delete n.headers["Content-Type"],n.body=i,await fetch(`${lt(r)}/files`,n).then(l=>it(l)).then(l=>Array.isArray(l.response)?l.response[0]:l.response).catch(at.bind(0,r))},Jl=async(r,e,t)=>await fetch(`${lt(r)}/drafts`,ot({method:"POST",component_id:r,access_token:t,body:e})).then(n=>it(n)).then(n=>n.response).catch(n=>at(r,n)),Zn=async(r,e,t)=>await fetch(`${lt(r)}/drafts/${e.id}`,ot({method:"PUT",component_id:r,access_token:t,body:e})).then(n=>it(n)).then(n=>n.response).catch(n=>at(r,n)),Wl=async r=>await fetch(`${lt(r.component_id)}/account`,ot(r)).then(t=>it(t)).then(t=>t.response).catch(t=>at(r.component_id,t));var Zl=Object.defineProperty,Yn=Object.getOwnPropertySymbols,Yl=Object.prototype.hasOwnProperty,Vl=Object.prototype.propertyIsEnumerable,Vn=(r,e,t)=>e in r?Zl(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,Xn=(r,e)=>{for(var t in e||(e={}))Yl.call(e,t)&&Vn(r,t,e[t]);if(Yn)for(var t of Yn(e))Vl.call(e,t)&&Vn(r,t,e[t]);return r};const Xl=async r=>fetch(`${lt(r.component_id)}/calendars/availability`,ot({method:"POST",component_id:r.component_id,access_token:r.access_token,body:r.body})).then(async e=>{const t=await it(e);return t.response.time_slots=t.response.time_slots.map(n=>(n.start_time=n.start||0,n.end_time=n.end||0,delete n.start,delete n.end,n)),t.response}).catch(e=>at(r.component_id,e)),Kl=async r=>fetch(`${lt(r.component_id)}/calendars/availability/consecutive`,ot({method:"POST",component_id:r.component_id,access_token:r.access_token,body:r.body})).then(async e=>{var t;const i=((t=(await it(e)).response)==null?void 0:t.map(c=>(c=c.map(o=>(o.start_time=new Date(o.start_time*1e3),o.end_time=new Date(o.end_time*1e3),o)),c)))||[],l=Ql(i,r.body.events);return ql(l)}).catch(e=>at(r.component_id,e));function Ql(r,e){return r.map(t=>t.map(n=>Xn(Xn({},n),e.find(i=>i.participantEmails.length===n.emails.length&&i.participantEmails.every(l=>n.emails.includes(l))))))}function ql(r){const e=new Set;return r.filter(t=>{const n=`${t[0].start_time}_${t[t.length-1].end_time}`;return e.has(n)?!1:(e.add(n),!0)})}var $l=Object.defineProperty,Kn=Object.getOwnPropertySymbols,es=Object.prototype.hasOwnProperty,ts=Object.prototype.propertyIsEnumerable,Qn=(r,e,t)=>e in r?$l(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,rs=(r,e)=>{for(var t in e||(e={}))es.call(e,t)&&Qn(r,t,e[t]);if(Kn)for(var t of Kn(e))ts.call(e,t)&&Qn(r,t,e[t]);return r};function ns(){const r=(t,n)=>{var i,l;const s=JSON.parse(n),c=rs({},s);if(delete c.forceReload,n=JSON.stringify(c),!(!s.component_id||!((i=s==null?void 0:s.body)==null?void 0:i.start_time)||!((l=s==null?void 0:s.body)==null?void 0:l.end_time))){if(!t[n]||s.forceReload){const o=Xl(s);e.update(a=>(a[n]=o,a)),t[n]=o}return t[n]}},e=Ft(new Proxy({},{get:r}));return e}ns();function is(){const r=(t,n)=>{var i,l;const s=JSON.parse(n);if(!(!s.component_id||!((i=s==null?void 0:s.body)==null?void 0:i.start_time)||!((l=s==null?void 0:s.body)==null?void 0:l.end_time))){if(!t[n]){const c=Kl(s);e.update(o=>(o[n]=c,o)),t[n]=c}return t[n]}},e=Ft(new Proxy({},{get:r}));return e}is();var os=Object.defineProperty,qn=Object.getOwnPropertySymbols,ls=Object.prototype.hasOwnProperty,ss=Object.prototype.propertyIsEnumerable,$n=(r,e,t)=>e in r?os(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,Pt=(r,e)=>{for(var t in e||(e={}))ls.call(e,t)&&$n(r,t,e[t]);if(qn)for(var t of qn(e))ss.call(e,t)&&$n(r,t,e[t]);return r};async function ei(r){const e=[];for(let t=0;t<r;t++)e.push({isLoaded:!1,threads:[]});return e}function as(){const{subscribe:r,set:e,update:t}=Ft({});let n={},i;return{subscribe:r,set:e,getThreads:async(l,s,c,o=!1)=>{const a=JSON.stringify(l);if(!l.component_id&&!l.access_token)return[];if(i===void 0||o){const f=l.thread_ids?l.thread_ids.length:await Wn(l).catch(It);f&&(i=f)}if(!Array.isArray(n[a])||o){const f=Math.ceil(i/c);n[a]=await ei(f)}if(typeof n[a][s]=="undefined")return[];if(!n[a][s].isLoaded){const f=await Jn(l,c,s*c).catch(It);f&&(n[a][s].threads=f,n[a][s].isLoaded=!0)}return t(f=>(f[a]=n[a],Pt({},f))),n[a][s].threads},getNumberOfItems:async l=>{if(!l.component_id&&!l.access_token)return 0;if(typeof i=="undefined"){const s=await Wn(l).catch(It);s&&(i=s)}return i},getThreadsWithSearchKeyword:async(l,s=!1)=>{if(!l.component_id&&!l.access_token)return[];const c=JSON.stringify(l);if((!Array.isArray(n[c])||s)&&(n[c]=await ei(1)),!n[c][0].isLoaded||s){const o=await Hl(l).catch(It);o&&(n[c][0].threads=o,n[c][0].isLoaded=!0)}return t(o=>(o[c]=n[c],Pt({},o))),n[c][0].threads},updateThread:async(l,s,c,o,a)=>{const f=await jl(l,c).catch(It);if(!n[s][o].isLoaded){const u=await Jn(JSON.parse(s),a,o*a).catch(It);u&&(n[s][o].threads=u,n[s][o].isLoaded=!0)}return n[s][o].threads=n[s][o].threads.map(u=>(f&&u.id===f.id&&(u=Object.assign(u,f)),u)),t(u=>(u[s]=n[s],Pt({},u))),n[s][o].threads},updateThreadSelection:(l,s,c)=>{const o=n[l][s].threads;if(c){const a=o.find(f=>f.id===c);a&&(a.selected=!a.selected)}else{const a=o.some(f=>f.selected);for(const f of o)f.selected=!a}return t(a=>(a[l]=n[l],Pt({},a))),n[l][s].threads},reset:()=>{n={},e({})},hydrateMessageInThread:(l,s,c)=>{var o,a,f;const u=JSON.stringify(s),g=(a=(o=n[u][c])==null?void 0:o.threads)==null?void 0:a.find(b=>b.id===l.thread_id);if(g){const b=(f=g.messages)==null?void 0:f.find(v=>v.id===l.id);b?(b.body=l.body,t(v=>{if(l.thread_id){let A=v[u][c].threads.find(y=>y.id===g.id);A&&(A=JSON.parse(JSON.stringify(g)))}return Pt({},v)})):t(v=>{if(l.thread_id){let A=v[u][c].threads.find(y=>y.id===g.id);if(A){const y=g.messages;y.push(l),g.messages=y,g.snippet=l.snippet,g.drafts=g.drafts.filter(O=>O.id!==l.id),A=JSON.parse(JSON.stringify(g))}}return Pt({},v)})}return n[u][c].threads},hydrateDraftInThread:(l,s,c)=>{var o,a,f;const u=JSON.stringify(s),g=(a=(o=n[u][c])==null?void 0:o.threads)==null?void 0:a.find(b=>b.id===l.thread_id);if(g){const b=(f=g.drafts)==null?void 0:f.find(v=>v.id===l.id);if(l.thread_id){if(b)Object.assign(b,l);else{const v=g.drafts;v.push(l),g.drafts=v}t(v=>{let A=v[u][c].threads.find(y=>y.id===g.id);return A&&(A=JSON.parse(JSON.stringify(g))),Pt({},v)})}}return n[u][c].threads}}}const cs=as();Cl(cs,r=>{const e={};return Object.entries(r).forEach(([t,n])=>e[t]=n.map(i=>i.threads).flat()),e});function fs(){const r=(t,n)=>{const i=JSON.parse(n);if(!!i.component_id){if(!t[n]){const l=Bl(i.component_id,i.access_token);e.update(s=>(s[n]=l,s)),t[n]=l}return t[n]}},e=Ft(new Proxy({},{get:r}));return e}const us=fs();function ds(r){return(e,t)=>{r.dispatchEvent&&r.dispatchEvent(new CustomEvent(e,{detail:t,composed:!0}))}}function Jr(r,e,t){return new Proxy(r,{get:(n,i)=>i==="toString"||i==="toJSON"?()=>JSON.stringify(n):Reflect.get(n,i)!==void 0?ti(Reflect.get(n,i),t[i]):e&&i in e?ti(e[i],t[i]):t[i],ownKeys:n=>{const i=new Set([...Reflect.ownKeys(n),...Object.keys(e),...Object.keys(t)]);return Array.from(i)},getOwnPropertyDescriptor:(n,i)=>{var l,s;let c=Reflect.getOwnPropertyDescriptor(n,i);return c||(c=(s=(l=e&&Object.getOwnPropertyDescriptor(e,i))!=null?l:t&&Object.getOwnPropertyDescriptor(t,i))!=null?s:{configurable:!0,enumerable:!0,writable:!0},Reflect.defineProperty(n,i,c)),c}})}function ti(r,e){if(r){if(typeof e=="boolean")return hs(r);if(typeof e=="number")return Number(r);if(e instanceof Date)return new Date(r)}return r===void 0?e!=null?e:null:r}function hs(r){return[!0,"true","1"].includes(r)}function ri(r){let e,t,n,i,l,s;function c(f,u){if(f[2]==="HostDomainNotAllowedError")return _s;if(f[2]==="IncompatibleProperties")return ms}let o=c(r),a=o&&o(r);return{c(){var f,u;e=w("div"),a&&a.c(),t=H(),n=w("span"),n.textContent="Debug info:",i=H(),l=w("textarea"),d(n,"class","details"),d(l,"class","details"),l.readOnly=!0,l.value=s=`
      `+r[2]+": "+r[0]+`
      `+((u=(f=r[1].message)==null?void 0:f.message)!=null?u:"")+`
    `,d(e,"class","message-container")},m(f,u){x(f,e,u),a&&a.m(e,null),p(e,t),p(e,n),p(e,i),p(e,l)},p(f,u){var g,b;o===(o=c(f))&&a?a.p(f,u):(a&&a.d(1),a=o&&o(f),a&&(a.c(),a.m(e,t))),u&7&&s!==(s=`
      `+f[2]+": "+f[0]+`
      `+((b=(g=f[1].message)==null?void 0:g.message)!=null?b:"")+`
    `)&&(l.value=s)},d(f){f&&h(e),a&&a.d()}}}function ms(r){let e;return{c(){e=w("h3"),e.textContent="Your component properties do not work with each other."},m(t,n){x(t,e,n)},p:j,d(t){t&&h(e)}}}function _s(r){let e,t,n,i,l,s;return{c(){e=w("h3"),t=te(`You are trying to access this component from\xA0
        `),n=w("code"),n.textContent=`${window.location.hostname}`,i=te(`. The component's settings do not
        allow access from this domain.`),l=H(),s=w("h4"),s.innerHTML=`The list of allowed domains can be modified in your\xA0
        <a href="https://dashboard.nylas.com">Dashboard</a>.`},m(c,o){x(c,e,o),p(e,t),p(e,n),p(e,i),x(c,l,o),x(c,s,o)},p:j,d(c){c&&h(e),c&&h(l),c&&h(s)}}}function ps(r){let e,t=r[2]&&r[3]&&ri(r);return{c(){t&&t.c(),e=st(),this.c=j},m(n,i){t&&t.m(n,i),x(n,e,i)},p(n,[i]){n[2]&&n[3]?t?t.p(n,i):(t=ri(n),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},i:j,o:j,d(n){t&&t.d(n),n&&h(e)}}}function gs(r,e,t){let n;pr(r,Gr,g=>t(8,n=g));var i,l,s,c;let{id:o}=e,a,f;const u=window.location.href.includes("localhost")||window.location.href.includes("127.0.0.1");return r.$$set=g=>{"id"in g&&t(0,o=g.id)},r.$$.update=()=>{r.$$.dirty&499&&(t(1,a=t(4,i=n[o])!==null&&i!==void 0?i:{name:""}),t(2,f=t(7,c=t(5,l=a.name)!==null&&l!==void 0?l:t(6,s=a.message)===null||s===void 0?void 0:s.name)!==null&&c!==void 0?c:""))},[o,a,f,u,i,l,s,c,n]}class bs extends wt{constructor(e){super();this.shadowRoot.innerHTML=`<style>.message-container{background:#fff6f6;border-radius:5px;box-shadow:0 0 0 1px #aa92a0 inset, 0 0 0 0 transparent;color:#9f3a38;font-size:1.25rem;padding:10px;margin:0 auto;transition:opacity 500ms ease, color 500ms ease,
      background-color 500ms ease, box-shadow 500ms ease,
      -webkit-box-shadow 500ms ease}.message-container *:focus{outline:5px auto Highlight;outline:5px auto -webkit-focus-ring-color}.details{color:#494949;font-size:0.75rem;width:100%}</style>`,Me(this,{target:this.shadowRoot,props:Et(this.attributes),customElement:!0},gs,ps,_r,{id:0},null),e&&(e.target&&x(e.target,this,e.anchor),e.props&&(this.$set(e.props),z()))}static get observedAttributes(){return["id"]}get id(){return this.$$.ctx[0]}set id(e){this.$$set({id:e}),z()}}customElements.define("nylas-error",bs);var vs="@nylas/components-composer",ws="1.1.6-canary.20",ys={type:"git",url:"github:nylas/components.git",directory:"components/composer"},ks={build:"rollup -c",dev:"rollup -c -w",tscheck:'tsc && svelte-check --compiler-warnings "missing-custom-element-compile-options:ignore"',start:"echo 'Nothing to start'"},xs="index.js",Es="cca94159c114ecff613f41caa0a4468e0f698e2c",Cs={name:vs,version:ws,repository:ys,scripts:ks,main:xs,gitHead:Es},Ss=Object.defineProperty,ni=Object.getOwnPropertySymbols,Ts=Object.prototype.hasOwnProperty,Ls=Object.prototype.propertyIsEnumerable,ii=(r,e,t)=>e in r?Ss(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,oi=(r,e)=>{for(var t in e||(e={}))Ts.call(e,t)&&ii(r,t,e[t]);if(ni)for(var t of ni(e))Ls.call(e,t)&&ii(r,t,e[t]);return r};const Sr={from:[],to:[],cc:[],bcc:[],body:"",subject:"New Message",send_at:null,file_ids:[]},li=[],si=(r,e)=>r.update(t=>t.map(n=>n.filename).includes(e.filename)?t:[...t,e]),ai=(r,e,t)=>r.update(n=>n.map(i=>i.filename===e?oi(oi({},i),t):i)),As=(r,e)=>r.update(t=>[...t.filter(n=>n.filename!==e.filename)]),Tr=r=>{r.set(JSON.parse(JSON.stringify(li)))},ci=r=>`${["January","February","March","April","May","June","July","August","September","October","November","December"][r.getMonth()]} ${r.getDate()}, ${r.getHours()}:${r.getMinutes()} ${r.getHours()>=12?"PM":"AM"}`;function Os(r){let e,t,n,i,l,s,c,o,a,f,u,g,b,v,A,y,O,R,G,le=[{version:"1.1"},{id:"Capa_1"},{xmlns:"http://www.w3.org/2000/svg"},{"xmlns:xlink":"http://www.w3.org/1999/xlink"},{x:"0px"},{y:"0px"},{width:"357px"},{height:"357px"},{viewBox:"0 0 357 357"},{style:"enable-background:new 0 0 357 357;"},{"xml:space":"preserve"},r[0]],ee={};for(let P=0;P<le.length;P+=1)ee=$(ee,le[P]);return{c(){e=E("svg"),t=E("g"),n=E("g"),i=E("path"),l=E("g"),s=E("g"),c=E("g"),o=E("g"),a=E("g"),f=E("g"),u=E("g"),g=E("g"),b=E("g"),v=E("g"),A=E("g"),y=E("g"),O=E("g"),R=E("g"),G=E("g"),this.h()},l(P){e=S(P,"svg",{version:!0,id:!0,xmlns:!0,"xmlns:xlink":!0,x:!0,y:!0,width:!0,height:!0,viewBox:!0,style:!0,"xml:space":!0});var M=C(e);t=S(M,"g",{});var U=C(t);n=S(U,"g",{id:!0});var fe=C(n);i=S(fe,"path",{d:!0}),C(i).forEach(h),fe.forEach(h),U.forEach(h),l=S(M,"g",{});var B=C(l);B.forEach(h),s=S(M,"g",{});var ve=C(s);ve.forEach(h),c=S(M,"g",{});var me=C(c);me.forEach(h),o=S(M,"g",{});var we=C(o);we.forEach(h),a=S(M,"g",{});var Ne=C(a);Ne.forEach(h),f=S(M,"g",{});var J=C(f);J.forEach(h),u=S(M,"g",{});var V=C(u);V.forEach(h),g=S(M,"g",{});var ue=C(g);ue.forEach(h),b=S(M,"g",{});var Ue=C(b);Ue.forEach(h),v=S(M,"g",{});var ze=C(v);ze.forEach(h),A=S(M,"g",{});var I=C(A);I.forEach(h),y=S(M,"g",{});var _e=C(y);_e.forEach(h),O=S(M,"g",{});var ke=C(O);ke.forEach(h),R=S(M,"g",{});var ce=C(R);ce.forEach(h),G=S(M,"g",{});var oe=C(G);oe.forEach(h),M.forEach(h),this.h()},h(){d(i,"d","M357,204H0v-51h357V204z"),d(n,"id","remove"),ye(e,ee)},m(P,M){Ve(P,e,M),T(e,t),T(t,n),T(n,i),T(e,l),T(e,s),T(e,c),T(e,o),T(e,a),T(e,f),T(e,u),T(e,g),T(e,b),T(e,v),T(e,A),T(e,y),T(e,O),T(e,R),T(e,G)},p(P,[M]){ye(e,ee=Xe(le,[{version:"1.1"},{id:"Capa_1"},{xmlns:"http://www.w3.org/2000/svg"},{"xmlns:xlink":"http://www.w3.org/1999/xlink"},{x:"0px"},{y:"0px"},{width:"357px"},{height:"357px"},{viewBox:"0 0 357 357"},{style:"enable-background:new 0 0 357 357;"},{"xml:space":"preserve"},M&1&&P[0]]))},i:j,o:j,d(P){P&&h(e)}}}function Ms(r,e,t){return r.$$set=n=>{t(0,e=$($({},e),pe(n)))},e=pe(e),[e]}class Ns extends Ke{constructor(e){super();Me(this,e,Ms,Os,He,{})}}function Ds(r){let e,t,n=[{height:"512pt"},{viewBox:"-96 0 512 512"},{width:"512pt"},{xmlns:"http://www.w3.org/2000/svg"},r[0]],i={};for(let l=0;l<n.length;l+=1)i=$(i,n[l]);return{c(){e=E("svg"),t=E("path"),this.h()},l(l){e=S(l,"svg",{height:!0,viewBox:!0,width:!0,xmlns:!0});var s=C(e);t=S(s,"path",{d:!0}),C(t).forEach(h),s.forEach(h),this.h()},h(){d(t,"d","m160 512c-88.234375 0-160-71.765625-160-160v-224c0-11.796875 9.558594-21.332031 21.332031-21.332031 11.777344 0 21.335938 9.535156 21.335938 21.332031v224c0 64.683594 52.628906 117.332031 117.332031 117.332031s117.332031-52.648437 117.332031-117.332031v-234.667969c0-41.171875-33.492187-74.664062-74.664062-74.664062-41.175781 0-74.667969 33.492187-74.667969 74.664062v213.335938c0 17.640625 14.355469 32 32 32s32-14.359375 32-32v-202.667969c0-11.796875 9.558594-21.332031 21.332031-21.332031 11.777344 0 21.335938 9.535156 21.335938 21.332031v202.667969c0 41.171875-33.496094 74.664062-74.667969 74.664062s-74.667969-33.492187-74.667969-74.664062v-213.335938c0-64.679687 52.628907-117.332031 117.335938-117.332031 64.703125 0 117.332031 52.652344 117.332031 117.332031v234.667969c0 88.234375-71.765625 160-160 160zm0 0"),ye(e,i)},m(l,s){Ve(l,e,s),T(e,t)},p(l,[s]){ye(e,i=Xe(n,[{height:"512pt"},{viewBox:"-96 0 512 512"},{width:"512pt"},{xmlns:"http://www.w3.org/2000/svg"},s&1&&l[0]]))},i:j,o:j,d(l){l&&h(e)}}}function zs(r,e,t){return r.$$set=n=>{t(0,e=$($({},e),pe(n)))},e=pe(e),[e]}class Rs extends Ke{constructor(e){super();Me(this,e,zs,Ds,He,{})}}function Fs(r){let e,t,n,i=[{xmlns:"http://www.w3.org/2000/svg"},{height:"24px"},{viewBox:"0 0 24 24"},{width:"24px"},{fill:"#000000"},r[0]],l={};for(let s=0;s<i.length;s+=1)l=$(l,i[s]);return{c(){e=E("svg"),t=E("path"),n=E("path"),this.h()},l(s){e=S(s,"svg",{xmlns:!0,height:!0,viewBox:!0,width:!0,fill:!0});var c=C(e);t=S(c,"path",{d:!0,fill:!0}),C(t).forEach(h),n=S(c,"path",{d:!0}),C(n).forEach(h),c.forEach(h),this.h()},h(){d(t,"d","M0 0h24v24H0V0z"),d(t,"fill","none"),d(n,"d","M21.99 8c0-.72-.37-1.35-.94-1.7L12 1 2.95 6.3C2.38 6.65 2 7.28 2 8v10c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2l-.01-10zm-2 0v.01L12 13 4 8l8-4.68L19.99 8zM4 18v-7.66l8 5.02 7.99-4.99L20 18H4z"),ye(e,l)},m(s,c){Ve(s,e,c),T(e,t),T(e,n)},p(s,[c]){ye(e,l=Xe(i,[{xmlns:"http://www.w3.org/2000/svg"},{height:"24px"},{viewBox:"0 0 24 24"},{width:"24px"},{fill:"#000000"},c&1&&s[0]]))},i:j,o:j,d(s){s&&h(e)}}}function Is(r,e,t){return r.$$set=n=>{t(0,e=$($({},e),pe(n)))},e=pe(e),[e]}class Ps extends Ke{constructor(e){super();Me(this,e,Is,Fs,He,{})}}function Hs(r){let e,t,n,i,l,s,c,o,a,f,u,g,b,v,A,y,O,R,G,le=[{version:"1.1"},{id:"Capa_1"},{xmlns:"http://www.w3.org/2000/svg"},{"xmlns:xlink":"http://www.w3.org/1999/xlink"},{x:"0px"},{y:"0px"},{width:"306px"},{height:"306px"},{viewBox:"0 0 306 306"},{style:"enable-background:new 0 0 306 306;"},{"xml:space":"preserve"},r[0]],ee={};for(let P=0;P<le.length;P+=1)ee=$(ee,le[P]);return{c(){e=E("svg"),t=E("g"),n=E("g"),i=E("polygon"),l=E("g"),s=E("g"),c=E("g"),o=E("g"),a=E("g"),f=E("g"),u=E("g"),g=E("g"),b=E("g"),v=E("g"),A=E("g"),y=E("g"),O=E("g"),R=E("g"),G=E("g"),this.h()},l(P){e=S(P,"svg",{version:!0,id:!0,xmlns:!0,"xmlns:xlink":!0,x:!0,y:!0,width:!0,height:!0,viewBox:!0,style:!0,"xml:space":!0});var M=C(e);t=S(M,"g",{});var U=C(t);n=S(U,"g",{id:!0});var fe=C(n);i=S(fe,"polygon",{points:!0}),C(i).forEach(h),fe.forEach(h),U.forEach(h),l=S(M,"g",{});var B=C(l);B.forEach(h),s=S(M,"g",{});var ve=C(s);ve.forEach(h),c=S(M,"g",{});var me=C(c);me.forEach(h),o=S(M,"g",{});var we=C(o);we.forEach(h),a=S(M,"g",{});var Ne=C(a);Ne.forEach(h),f=S(M,"g",{});var J=C(f);J.forEach(h),u=S(M,"g",{});var V=C(u);V.forEach(h),g=S(M,"g",{});var ue=C(g);ue.forEach(h),b=S(M,"g",{});var Ue=C(b);Ue.forEach(h),v=S(M,"g",{});var ze=C(v);ze.forEach(h),A=S(M,"g",{});var I=C(A);I.forEach(h),y=S(M,"g",{});var _e=C(y);_e.forEach(h),O=S(M,"g",{});var ke=C(O);ke.forEach(h),R=S(M,"g",{});var ce=C(R);ce.forEach(h),G=S(M,"g",{});var oe=C(G);oe.forEach(h),M.forEach(h),this.h()},h(){d(i,"points","153,58.65 0,211.65 35.7,247.35 153,130.05 270.3,247.35 306,211.65 		"),d(n,"id","expand-less"),ye(e,ee)},m(P,M){Ve(P,e,M),T(e,t),T(t,n),T(n,i),T(e,l),T(e,s),T(e,c),T(e,o),T(e,a),T(e,f),T(e,u),T(e,g),T(e,b),T(e,v),T(e,A),T(e,y),T(e,O),T(e,R),T(e,G)},p(P,[M]){ye(e,ee=Xe(le,[{version:"1.1"},{id:"Capa_1"},{xmlns:"http://www.w3.org/2000/svg"},{"xmlns:xlink":"http://www.w3.org/1999/xlink"},{x:"0px"},{y:"0px"},{width:"306px"},{height:"306px"},{viewBox:"0 0 306 306"},{style:"enable-background:new 0 0 306 306;"},{"xml:space":"preserve"},M&1&&P[0]]))},i:j,o:j,d(P){P&&h(e)}}}function js(r,e,t){return r.$$set=n=>{t(0,e=$($({},e),pe(n)))},e=pe(e),[e]}class Bs extends Ke{constructor(e){super();Me(this,e,js,Hs,He,{})}}function fi(r,e,t){const n=r.slice();return n[104]=e[t],n}function ui(r){let e,t,n;return{c(){e=w("link"),d(e,"rel","stylesheet"),d(e,"href",r[21])},m(i,l){x(i,e,l),t||(n=[he(e,"load",r[85]),he(e,"error",r[86])],t=!0)},p(i,l){l[0]&2097152&&d(e,"href",i[21])},d(i){i&&h(e),t=!1,et(n)}}}function di(r){let e,t,n,i,l;return t=new pn({props:{class:"nylas-composer__spinner"}}),{c(){e=w("div"),nt(t.$$.fragment),n=H(),i=w("div"),i.textContent="Loading",d(e,"class","nylas-composer nylas-composer__loader")},m(s,c){x(s,e,c),rt(t,e,null),p(e,n),p(e,i),l=!0},i(s){l||(W(t.$$.fragment,s),l=!0)},o(s){re(t.$$.fragment,s),l=!1},d(s){s&&h(e),tt(t)}}}function hi(r){let e,t,n,i=r[8].show_header&&mi(r),l=!r[8].minimized&&gi(r);return{c(){e=w("div"),i&&i.c(),t=H(),l&&l.c(),d(e,"class","nylas-composer"),d(e,"data-cy","nylas-composer"),Fe(e,"minimized",r[8].minimized)},m(s,c){x(s,e,c),i&&i.m(e,null),p(e,t),l&&l.m(e,null),n=!0},p(s,c){s[8].show_header?i?(i.p(s,c),c[0]&256&&W(i,1)):(i=mi(s),i.c(),W(i,1),i.m(e,t)):i&&(We(),re(i,1,1,()=>{i=null}),Ze()),s[8].minimized?l&&(We(),re(l,1,1,()=>{l=null}),Ze()):l?(l.p(s,c),c[0]&256&&W(l,1)):(l=gi(s),l.c(),W(l,1),l.m(e,null)),c[0]&256&&Fe(e,"minimized",s[8].minimized)},i(s){n||(W(i),W(l),n=!0)},o(s){re(i),re(l),n=!1},d(s){s&&h(e),i&&i.d(),l&&l.d()}}}function mi(r){let e,t,n,i,l,s,c,o,a=r[8].show_minimize_button&&_i(r),f=r[8].show_close_button&&pi(r);return{c(){e=w("header"),t=w("span"),n=te(r[14]),i=H(),l=w("div"),a&&a.c(),s=H(),f&&f.c(),d(e,"class",c=r[8].minimized?"minimized":void 0)},m(u,g){x(u,e,g),p(e,t),p(t,n),p(e,i),p(e,l),a&&a.m(l,null),p(l,s),f&&f.m(l,null),o=!0},p(u,g){(!o||g[0]&16384)&&Ae(n,u[14]),u[8].show_minimize_button?a?(a.p(u,g),g[0]&256&&W(a,1)):(a=_i(u),a.c(),W(a,1),a.m(l,s)):a&&(We(),re(a,1,1,()=>{a=null}),Ze()),u[8].show_close_button?f?(f.p(u,g),g[0]&256&&W(f,1)):(f=pi(u),f.c(),W(f,1),f.m(l,null)):f&&(We(),re(f,1,1,()=>{f=null}),Ze()),(!o||g[0]&256&&c!==(c=u[8].minimized?"minimized":void 0))&&d(e,"class",c)},i(u){o||(W(a),W(f),o=!0)},o(u){re(a),re(f),o=!1},d(u){u&&h(e),a&&a.d(),f&&f.d()}}}function _i(r){let e,t,n,i;const l=[Gs,Us],s=[];function c(o,a){return o[8].minimized?0:1}return e=c(r),t=s[e]=l[e](r),{c(){t.c(),n=st()},m(o,a){s[e].m(o,a),x(o,n,a),i=!0},p(o,a){let f=e;e=c(o),e===f?s[e].p(o,a):(We(),re(s[f],1,1,()=>{s[f]=null}),Ze(),t=s[e],t?t.p(o,a):(t=s[e]=l[e](o),t.c()),W(t,1),t.m(n.parentNode,n))},i(o){i||(W(t),i=!0)},o(o){re(t),i=!1},d(o){s[e].d(o),o&&h(n)}}}function Us(r){let e,t,n,i,l,s,c;return i=new Ns({props:{class:"MinimizeIcon"}}),{c(){e=w("button"),t=w("span"),t.textContent="Collapse Composer",n=H(),nt(i.$$.fragment),d(t,"class","sr-only"),d(e,"class","composer-btn")},m(o,a){x(o,e,a),p(e,t),p(e,n),rt(i,e,null),l=!0,s||(c=he(e,"click",r[88]),s=!0)},p:j,i(o){l||(W(i.$$.fragment,o),l=!0)},o(o){re(i.$$.fragment,o),l=!1},d(o){o&&h(e),tt(i),s=!1,c()}}}function Gs(r){let e,t,n,i,l,s,c;return i=new Bs({props:{class:"ExpandIcon"}}),{c(){e=w("button"),t=w("span"),t.textContent="Expand Composer",n=H(),nt(i.$$.fragment),d(t,"class","sr-only"),d(e,"class","composer-btn")},m(o,a){x(o,e,a),p(e,t),p(e,n),rt(i,e,null),l=!0,s||(c=he(e,"click",r[87]),s=!0)},p:j,i(o){l||(W(i.$$.fragment,o),l=!0)},o(o){re(i.$$.fragment,o),l=!1},d(o){o&&h(e),tt(i),s=!1,c()}}}function pi(r){let e,t,n,i,l,s,c;return i=new ir({props:{class:"CloseIcon"}}),{c(){e=w("button"),t=w("span"),t.textContent="Close Composer",n=H(),nt(i.$$.fragment),d(t,"class","sr-only"),d(e,"class","composer-btn")},m(o,a){x(o,e,a),p(e,t),p(e,n),rt(i,e,null),l=!0,s||(c=he(e,"click",r[6]),s=!0)},p:j,i(o){l||(W(i.$$.fragment,o),l=!0)},o(o){re(i.$$.fragment,o),l=!1},d(o){o&&h(e),tt(i),s=!1,c()}}}function gi(r){let e,t,n,i,l,s,c,o,a,f,u,g,b,v,A,y,O,R,G,le,ee,P,M,U,fe,B,ve,me,we,Ne,J,V,ue,Ue,ze,I,_e,ke,ce,oe,se,Re,L,ae=r[8].show_from&&bi(r),Te=r[8].show_to&&wi(r),ne=r[8].show_cc&&yi(r),xe=r[8].show_bcc&&ki(r),Ce=r[8].show_subject&&xi(r),Ge=r[26].length&&Ei(r),Oe=r[8].show_save_as_draft&&Si(r),Le=r[8].show_attachment_button&&(r[0]||r[5])&&Ti(r),je=r[11]&&Ai(r),D=r[7].send_at&&!r[16]&&!r[17]&&Oi(r),F=r[16]&&Mi(),Y=r[17]&&Ni(),ie=r[18]&&Di(),be=r[19]&&zi();return{c(){e=w("main"),t=w("div"),ae&&ae.c(),n=H(),Te&&Te.c(),i=H(),l=w("div"),s=w("button"),c=te("CC"),a=H(),f=w("button"),u=te("BCC"),b=H(),ne&&ne.c(),v=H(),xe&&xe.c(),A=H(),Ce&&Ce.c(),y=H(),O=w("nylas-html-editor"),P=H(),Ge&&Ge.c(),M=H(),U=w("footer"),fe=w("div"),B=w("button"),ve=te(r[20]),we=H(),Oe&&Oe.c(),Ne=H(),Le&&Le.c(),J=H(),V=w("form"),ue=w("input"),Ue=H(),je&&je.c(),ze=H(),D&&D.c(),I=H(),F&&F.c(),_e=H(),Y&&Y.c(),ke=H(),ie&&ie.c(),ce=H(),be&&be.c(),oe=st(),d(s,"data-cy","toggle-cc-field-btn"),d(s,"type","button"),s.hidden=o=r[8].show_cc&&!r[8].show_cc_button&&!!r[8].show_to,d(f,"data-cy","toggle-bcc-field-btn"),d(f,"type","button"),f.hidden=g=r[8].show_bcc&&!r[8].show_bcc_button&&!!r[8].show_to,d(l,"class","addons"),d(t,"class","contacts-wrapper"),q(O,"data-cy","html-editor"),q(O,"html",R=r[7].body||r[4]),q(O,"onchange",r[29]),q(O,"focus_body_onload",G=r[8].focus_body_onload),q(O,"replace_fields",le=r[8].replace_fields),q(O,"show_editor_toolbar",ee=r[8].show_editor_toolbar),d(B,"class","send-btn"),B.disabled=me=!r[24],d(fe,"class","btn-group"),ue.hidden=!0,d(ue,"type","file"),d(ue,"id","file-upload"),d(V,"action",""),d(V,"enctype","multipart/form-data")},m(k,K){x(k,e,K),p(e,t),ae&&ae.m(t,null),p(t,n),Te&&Te.m(t,null),p(t,i),p(t,l),p(l,s),p(s,c),r[89](s),p(l,a),p(l,f),p(f,u),r[91](f),p(e,b),ne&&ne.m(e,null),p(e,v),xe&&xe.m(e,null),p(e,A),Ce&&Ce.m(e,null),p(e,y),p(e,O),p(e,P),Ge&&Ge.m(e,null),x(k,M,K),x(k,U,K),p(U,fe),p(fe,B),p(B,ve),p(U,we),Oe&&Oe.m(U,null),p(U,Ne),Le&&Le.m(U,null),p(U,J),p(U,V),p(V,ue),x(k,Ue,K),je&&je.m(k,K),x(k,ze,K),D&&D.m(k,K),x(k,I,K),F&&F.m(k,K),x(k,_e,K),Y&&Y.m(k,K),x(k,ke,K),ie&&ie.m(k,K),x(k,ce,K),be&&be.m(k,K),x(k,oe,K),se=!0,Re||(L=[he(s,"click",r[90]),he(f,"click",r[92]),he(O,"keydown",r[40]),he(B,"click",r[37]),he(ue,"change",r[34])],Re=!0)},p(k,K){k[8].show_from?ae?ae.p(k,K):(ae=bi(k),ae.c(),ae.m(t,n)):ae&&(ae.d(1),ae=null),k[8].show_to?Te?Te.p(k,K):(Te=wi(k),Te.c(),Te.m(t,i)):Te&&(Te.d(1),Te=null),(!se||K[0]&256&&o!==(o=k[8].show_cc&&!k[8].show_cc_button&&!!k[8].show_to))&&(s.hidden=o),(!se||K[0]&256&&g!==(g=k[8].show_bcc&&!k[8].show_bcc_button&&!!k[8].show_to))&&(f.hidden=g),k[8].show_cc?ne?(ne.p(k,K),K[0]&256&&W(ne,1)):(ne=yi(k),ne.c(),W(ne,1),ne.m(e,v)):ne&&(We(),re(ne,1,1,()=>{ne=null}),Ze()),k[8].show_bcc?xe?(xe.p(k,K),K[0]&256&&W(xe,1)):(xe=ki(k),xe.c(),W(xe,1),xe.m(e,A)):xe&&(We(),re(xe,1,1,()=>{xe=null}),Ze()),k[8].show_subject?Ce?Ce.p(k,K):(Ce=xi(k),Ce.c(),Ce.m(e,y)):Ce&&(Ce.d(1),Ce=null),(!se||K[0]&144&&R!==(R=k[7].body||k[4]))&&q(O,"html",R),(!se||K[0]&256&&G!==(G=k[8].focus_body_onload))&&q(O,"focus_body_onload",G),(!se||K[0]&256&&le!==(le=k[8].replace_fields))&&q(O,"replace_fields",le),(!se||K[0]&256&&ee!==(ee=k[8].show_editor_toolbar))&&q(O,"show_editor_toolbar",ee),k[26].length?Ge?Ge.p(k,K):(Ge=Ei(k),Ge.c(),Ge.m(e,null)):Ge&&(Ge.d(1),Ge=null),(!se||K[0]&1048576)&&Ae(ve,k[20]),(!se||K[0]&16777216&&me!==(me=!k[24]))&&(B.disabled=me),k[8].show_save_as_draft?Oe?(Oe.p(k,K),K[0]&256&&W(Oe,1)):(Oe=Si(k),Oe.c(),W(Oe,1),Oe.m(U,Ne)):Oe&&(We(),re(Oe,1,1,()=>{Oe=null}),Ze()),k[8].show_attachment_button&&(k[0]||k[5])?Le?(Le.p(k,K),K[0]&289&&W(Le,1)):(Le=Ti(k),Le.c(),W(Le,1),Le.m(U,J)):Le&&(We(),re(Le,1,1,()=>{Le=null}),Ze()),k[11]?je?je.p(k,K):(je=Ai(k),je.c(),je.m(ze.parentNode,ze)):je&&(je.d(1),je=null),k[7].send_at&&!k[16]&&!k[17]?D?D.p(k,K):(D=Oi(k),D.c(),D.m(I.parentNode,I)):D&&(D.d(1),D=null),k[16]?F||(F=Mi(),F.c(),F.m(_e.parentNode,_e)):F&&(F.d(1),F=null),k[17]?Y||(Y=Ni(),Y.c(),Y.m(ke.parentNode,ke)):Y&&(Y.d(1),Y=null),k[18]?ie||(ie=Di(),ie.c(),ie.m(ce.parentNode,ce)):ie&&(ie.d(1),ie=null),k[19]?be||(be=zi(),be.c(),be.m(oe.parentNode,oe)):be&&(be.d(1),be=null)},i(k){se||(W(ne),W(xe),W(Oe),W(Le),se=!0)},o(k){re(ne),re(xe),re(Oe),re(Le),se=!1},d(k){k&&h(e),ae&&ae.d(),Te&&Te.d(),r[89](null),r[91](null),ne&&ne.d(),xe&&xe.d(),Ce&&Ce.d(),Ge&&Ge.d(),k&&h(M),k&&h(U),Oe&&Oe.d(),Le&&Le.d(),k&&h(Ue),je&&je.d(k),k&&h(ze),D&&D.d(k),k&&h(I),F&&F.d(k),k&&h(_e),Y&&Y.d(k),k&&h(ke),ie&&ie.d(k),k&&h(ce),be&&be.d(k),k&&h(oe),Re=!1,et(L)}}}function bi(r){let e,t,n,i,l,s,c,o=r[7].from.length>0&&vi(r);return{c(){e=w("div"),t=w("div"),n=w("div"),n.textContent="From:",i=H(),l=w("div"),s=w("div"),c=w("span"),o&&o.c(),d(n,"class","contacts-placeholder"),d(c,"class","contact-item__name"),d(s,"class","contact-item"),d(s,"data-cy","from-field"),d(l,"class","contacts-results-inner"),d(t,"class","contact-from"),d(e,"class","contacts-container")},m(a,f){x(a,e,f),p(e,t),p(t,n),p(t,i),p(t,l),p(l,s),p(s,c),o&&o.m(c,null)},p(a,f){a[7].from.length>0?o?o.p(a,f):(o=vi(a),o.c(),o.m(c,null)):o&&(o.d(1),o=null)},d(a){a&&h(e),o&&o.d()}}}function vi(r){let e;function t(l,s){return l[7].from[0].name?Ws:Js}let n=t(r),i=n(r);return{c(){i.c(),e=st()},m(l,s){i.m(l,s),x(l,e,s)},p(l,s){n===(n=t(l))&&i?i.p(l,s):(i.d(1),i=n(l),i&&(i.c(),i.m(e.parentNode,e)))},d(l){i.d(l),l&&h(e)}}}function Js(r){let e=r[7].from[0].email+"",t;return{c(){t=te(e)},m(n,i){x(n,t,i)},p(n,i){i[0]&128&&e!==(e=n[7].from[0].email+"")&&Ae(t,e)},d(n){n&&h(t)}}}function Ws(r){let e,t=r[7].from[0].name+"",n,i,l=`<${r[7].from[0].email}>`,s;return{c(){e=w("strong"),n=te(t),i=H(),s=te(l)},m(c,o){x(c,e,o),p(e,n),x(c,i,o),x(c,s,o)},p(c,o){o[0]&128&&t!==(t=c[7].from[0].name+"")&&Ae(n,t),o[0]&128&&l!==(l=`<${c[7].from[0].email}>`)&&Ae(s,l)},d(c){c&&h(e),c&&h(i),c&&h(s)}}}function wi(r){let e,t;return{c(){e=w("nylas-contacts-search"),q(e,"data-cy","to-field"),q(e,"placeholder","To:"),q(e,"change",r[30]("to")),q(e,"contacts",r[1]),q(e,"value",t=r[7].to)},m(n,i){x(n,e,i)},p(n,i){i[0]&2&&q(e,"contacts",n[1]),i[0]&128&&t!==(t=n[7].to)&&q(e,"value",t)},d(n){n&&h(e)}}}function yi(r){let e,t,n,i,l,s,c,o,a;return s=new ir({props:{class:"CloseIcon"}}),{c(){e=w("div"),t=w("nylas-contacts-search"),i=H(),l=w("button"),nt(s.$$.fragment),q(t,"data-cy","cc-field"),q(t,"placeholder","CC:"),q(t,"contacts",r[2]),q(t,"value",n=r[7].cc),q(t,"change",r[30]("cc")),d(l,"type","button"),d(l,"class","composer-btn cc-btn"),d(l,"aria-label","remove carbon copy field"),d(e,"class","cc-container")},m(f,u){x(f,e,u),p(e,t),p(e,i),p(e,l),rt(s,l,null),c=!0,o||(a=he(l,"click",r[93]),o=!0)},p(f,u){(!c||u[0]&4)&&q(t,"contacts",f[2]),(!c||u[0]&128&&n!==(n=f[7].cc))&&q(t,"value",n)},i(f){c||(W(s.$$.fragment,f),c=!0)},o(f){re(s.$$.fragment,f),c=!1},d(f){f&&h(e),tt(s),o=!1,a()}}}function ki(r){let e,t,n,i,l,s,c,o,a;return s=new ir({props:{class:"CloseIcon"}}),{c(){e=w("div"),t=w("nylas-contacts-search"),i=H(),l=w("button"),nt(s.$$.fragment),q(t,"data-cy","bcc-field"),q(t,"placeholder","BCC:"),q(t,"contacts",r[3]),q(t,"value",n=r[7].bcc),q(t,"change",r[30]("bcc")),d(l,"type","button"),d(l,"class","composer-btn cc-btn"),d(l,"aria-label","remove blind carbon copy field"),d(e,"class","cc-container")},m(f,u){x(f,e,u),p(e,t),p(e,i),p(e,l),rt(s,l,null),c=!0,o||(a=he(l,"click",r[94]),o=!0)},p(f,u){(!c||u[0]&8)&&q(t,"contacts",f[3]),(!c||u[0]&128&&n!==(n=f[7].bcc))&&q(t,"value",n)},i(f){c||(W(s.$$.fragment,f),c=!0)},o(f){re(s.$$.fragment,f),c=!1},d(f){f&&h(e),tt(s),o=!1,a()}}}function xi(r){let e,t,n,i,l,s;return{c(){e=w("label"),t=w("span"),t.textContent="Email subject",n=H(),i=w("input"),d(t,"class","sr-only"),d(i,"type","text"),d(i,"placeholder","Subject"),d(i,"class","subject"),i.value=r[14],d(i,"name","subject")},m(c,o){x(c,e,o),p(e,t),p(e,n),p(e,i),l||(s=he(i,"input",r[28]),l=!0)},p(c,o){o[0]&16384&&i.value!==c[14]&&(i.value=c[14])},d(c){c&&h(e),l=!1,s()}}}function Ei(r){let e,t,n,i,l=r[26],s=[];for(let c=0;c<l.length;c+=1)s[c]=Ci(fi(r,l,c));return{c(){e=w("div"),t=w("div"),n=w("div"),n.textContent="Attachments:",i=H();for(let c=0;c<s.length;c+=1)s[c].c();d(n,"class","attachments-caption"),d(t,"class","attachments-wrapper"),d(e,"class","nylas-attachments")},m(c,o){x(c,e,o),p(e,t),p(t,n),p(t,i);for(let a=0;a<s.length;a+=1)s[a].m(t,null)},p(c,o){if(o[0]&67108864|o[1]&16){l=c[26];let a;for(a=0;a<l.length;a+=1){const f=fi(c,l,a);s[a]?s[a].p(f,o):(s[a]=Ci(f),s[a].c(),s[a].m(t,null))}for(;a<s.length;a+=1)s[a].d(1);s.length=l.length}},d(c){c&&h(e),jr(s,c)}}}function Ci(r){let e,t;return{c(){e=w("nylas-composer-attachment"),q(e,"attachment",t=r[104]),q(e,"remove",r[35])},m(n,i){x(n,e,i)},p(n,i){i[0]&67108864&&t!==(t=n[104])&&q(e,"attachment",t)},d(n){n&&h(e)}}}function Si(r){let e,t,n,i,l,s,c;return t=new Ps({props:{class:"FooterIcon"}}),{c(){e=w("button"),nt(t.$$.fragment),n=H(),i=w("span"),i.textContent="Save Draft",d(i,"class","sr-only"),d(e,"for","save-draft"),d(e,"class","composer-btn save-draft"),d(e,"title","Save Email As Draft")},m(o,a){x(o,e,a),rt(t,e,null),p(e,n),p(e,i),l=!0,s||(c=he(e,"click",r[38]),s=!0)},p:j,i(o){l||(W(t.$$.fragment,o),l=!0)},o(o){re(t.$$.fragment,o),l=!1},d(o){o&&h(e),tt(t),s=!1,c()}}}function Ti(r){let e,t,n,i,l,s,c,o;t=new Rs({props:{class:"FooterIcon"}});let a=r[8].show_max_file_size&&Li(r);return{c(){e=w("label"),nt(t.$$.fragment),n=H(),i=w("span"),i.textContent="Attach Files",s=H(),a&&a.c(),c=st(),d(i,"class","sr-only"),d(e,"for","file-upload"),d(e,"class","composer-btn file-upload"),d(e,"title",l="Attach Files (up to "+r[15]+"MB)"),d(e,"tabindex","0")},m(f,u){x(f,e,u),rt(t,e,null),p(e,n),p(e,i),x(f,s,u),a&&a.m(f,u),x(f,c,u),o=!0},p(f,u){(!o||u[0]&32768&&l!==(l="Attach Files (up to "+f[15]+"MB)"))&&d(e,"title",l),f[8].show_max_file_size?a?a.p(f,u):(a=Li(f),a.c(),a.m(c.parentNode,c)):a&&(a.d(1),a=null)},i(f){o||(W(t.$$.fragment,f),o=!0)},o(f){re(t.$$.fragment,f),o=!1},d(f){f&&h(e),tt(t),f&&h(s),a&&a.d(f),f&&h(c)}}}function Li(r){let e,t,n,i,l;return{c(){e=w("div"),t=w("span"),n=te("Max file size: "),i=te(r[15]),l=te("MB"),d(e,"class","file-size")},m(s,c){x(s,e,c),p(e,t),p(t,n),p(t,i),p(t,l)},p(s,c){c[0]&32768&&Ae(i,s[15])},d(s){s&&h(e)}}}function Ai(r){let e;return{c(){e=w("nylas-composer-datepicker-modal"),q(e,"close",r[33]),q(e,"schedule",r[31])},m(t,n){x(t,e,n)},p:j,d(t){t&&h(e)}}}function Oi(r){let e,t,n,i=ci(new Date(r[25]))+"",l;return{c(){e=w("nylas-composer-alert-bar"),t=te(`Send scheduled for
          `),n=w("span"),l=te(i),q(e,"type","info"),q(e,"dismissible",!0),q(e,"ondismiss",r[32])},m(s,c){x(s,e,c),p(e,t),p(e,n),p(n,l)},p(s,c){c[0]&33554432&&i!==(i=ci(new Date(s[25]))+"")&&Ae(l,i)},d(s){s&&h(e)}}}function Mi(r){let e;return{c(){e=w("nylas-composer-alert-bar"),e.textContent="Error: Failed to send the message.",q(e,"type","danger"),q(e,"dismissible",!0)},m(t,n){x(t,e,n)},d(t){t&&h(e)}}}function Ni(r){let e;return{c(){e=w("nylas-composer-alert-bar"),e.textContent="Message sent successfully!",q(e,"type","success"),q(e,"dismissible",!0)},m(t,n){x(t,e,n)},d(t){t&&h(e)}}}function Di(r){let e;return{c(){e=w("nylas-composer-alert-bar"),e.textContent="Error: Failed to save the draft.",q(e,"type","danger"),q(e,"dismissible",!0)},m(t,n){x(t,e,n)},d(t){t&&h(e)}}}function zi(r){let e;return{c(){e=w("nylas-composer-alert-bar"),e.textContent="Message draft saved successfully!",q(e,"type","success"),q(e,"dismissible",!0)},m(t,n){x(t,e,n)},d(t){t&&h(e)}}}function Zs(r){let e,t,n,i,l,s,c=r[21]&&ui(r),o=r[13]&&r[10]&&di(),a=r[13]&&r[12]&&!r[10]&&hi(r);return{c(){e=w("nylas-error"),t=H(),c&&c.c(),n=H(),o&&o.c(),i=H(),a&&a.c(),l=st(),this.c=j,q(e,"id",r[0])},m(f,u){x(f,e,u),x(f,t,u),c&&c.m(f,u),x(f,n,u),o&&o.m(f,u),x(f,i,u),a&&a.m(f,u),x(f,l,u),s=!0},p(f,u){(!s||u[0]&1)&&q(e,"id",f[0]),f[21]?c?c.p(f,u):(c=ui(f),c.c(),c.m(n.parentNode,n)):c&&(c.d(1),c=null),f[13]&&f[10]?o?u[0]&9216&&W(o,1):(o=di(),o.c(),W(o,1),o.m(i.parentNode,i)):o&&(We(),re(o,1,1,()=>{o=null}),Ze()),f[13]&&f[12]&&!f[10]?a?(a.p(f,u),u[0]&13312&&W(a,1)):(a=hi(f),a.c(),W(a,1),a.m(l.parentNode,l)):a&&(We(),re(a,1,1,()=>{a=null}),Ze())},i(f){s||(W(o),W(a),s=!0)},o(f){re(o),re(a),s=!1},d(f){f&&h(e),f&&h(t),c&&c.d(f),f&&h(n),o&&o.d(f),f&&h(i),a&&a.d(f),f&&h(l)}}}function Ys(r,e,t){let n,i,l,s,c;pr(r,us,_=>t(97,l=_)),pr(r,Gr,_=>t(84,s=_));var o=this&&this.__awaiter||function(_,Q,Ee,Be){function Nt(ut){return ut instanceof Ee?ut:new Ee(function(Bt){Bt(ut)})}return new(Ee||(Ee=Promise))(function(ut,Bt){function zr(bt){try{Ut(Be.next(bt))}catch(Gt){Bt(Gt)}}function Rr(bt){try{Ut(Be.throw(bt))}catch(Gt){Bt(Gt)}}function Ut(bt){bt.done?ut(bt.value):Nt(bt.value).then(zr,Rr)}Ut((Be=Be.apply(_,Q||[])).next())})},a,f,u;const g=ds(ln());let{id:b}=e,{access_token:v=""}=e,{value:A}=e,{to:y=[]}=e,{from:O=[]}=e,{cc:R=[]}=e,{bcc:G=[]}=e,{send:le}=e,{save:ee}=e,{change:P=null}=e,{beforeSend:M}=e,{afterSendSuccess:U=null}=e,{afterSendError:fe=null}=e,{afterSaveSuccess:B=null}=e,{afterSaveError:ve=null}=e,{template:me=""}=e,{tracking:we=null}=e,{minimized:Ne}=e,{reset_after_send:J}=e,{reset_after_close:V}=e,{show_from:ue}=e,{show_to:Ue}=e,{show_header:ze}=e,{show_subject:I}=e,{show_close_button:_e}=e,{show_minimize_button:ke}=e,{show_cc:ce}=e,{show_bcc:oe}=e,{show_cc_button:se}=e,{show_bcc_button:Re}=e,{show_attachment_button:L}=e,{max_file_size:ae}=e,{show_max_file_size:Te}=e,{show_save_as_draft:ne}=e,{show_editor_toolbar:xe}=e,{theme:Ce}=e,{replace_fields:Ge=null}=e,{beforeFileUpload:Oe=null}=e,{afterFileUploadSuccess:Le=null}=e,{afterFileUploadError:je=null}=e,{uploadFile:D=null}=e,{beforeFileRemove:F=null}=e,{afterFileRemove:Y=null}=e,{focus_body_onload:ie}=e;const be={show_to:!0,show_from:!0,minimized:!1,reset_after_send:!0,show_header:!1,show_subject:!1,show_close_button:!0,show_minimize_button:!0,show_cc:!0,show_bcc:!0,show_cc_button:!0,show_bcc_button:!0,show_attachment_button:!0,max_file_size:0,show_max_file_size:!0,show_save_as_draft:!0,show_editor_toolbar:!0,theme:"auto",focus_body_onload:!1};let k=JSON.parse(JSON.stringify(Sr));const K=(_,Q)=>{t(7,k=Object.assign(Object.assign({},k),{[_]:Q}))},ct=_=>{t(7,k=Object.assign(Object.assign({},k),_))},Qe=Ft(JSON.parse(JSON.stringify(li)));pr(r,Qe,_=>t(26,c=_));const Lr=()=>{t(13,lr=!0),de.reset_after_send&&t(17,pt=!1),g("composerOpened",{})},Wr=()=>{const _=k;_.active=!1,t(13,lr=!1),(de.reset_after_send||de.reset_after_close)&&(t(17,pt=!1),t(19,yt=!1)),de.reset_after_close&&(t(7,k=Object.assign(Object.assign({},k),Sr)),Tr(Qe)),_.snippet=ul(_.body),Qe.update(()=>[]),g("composerClosed",{message:_})};let or=!1,de=Jr({},{},be),St,Tt=!1,Zt=!1,lr=!0,Ar=(f=(a=de.value)===null||a===void 0?void 0:a.subject)!==null&&f!==void 0?f:k.subject;to(()=>o(void 0,void 0,void 0,function*(){if(t(10,or=!0),yield wr(),t(81,St=(yield l[JSON.stringify({component_id:b,access_token:v})])||{}),St&&b){const _=yield Wl({component_id:b,access_token:v}).catch(It);_&&K("from",[{name:_.name,email:_.email_address}])}t(8,de=Jr(e,St,be)),we&&K("tracking",we),t(10,or=!1),t(12,Zt=!0)}));let ft=e,mt;const _t=_=>{if(!_.target)return;const Q=_.target;K(Q.name,Q.value)},Or=_=>K("body",_),Yt=_=>Q=>K(_,Q),sr=_=>{t(11,Tt=!1),K("send_at",_)},Zr=()=>{K("send_at",null)},Yr=()=>{t(11,Tt=!1)};function Vr(_){return o(this,void 0,void 0,function*(){const Q=_.target;if(!(Q==null?void 0:Q.files))return;const Ee=Q.files[0];try{if(si(Qe,{filename:Ee.name,size:Ee.size,content_type:Ee.type,loading:!0,error:!1}),Q.value="",Oe&&Oe(Ee),mt>0&&Ee.size>=mt*1e6)throw`Maximum file size is ${mt}MB. Please upload a different file.`;const Be=D?yield D(Ee):b&&(yield Gl(b,Ee,v));ai(Qe,Ee.name,{loading:!1,id:Be.id}),Be.id&&ct({file_ids:[...k.file_ids,Be.id],files:[...k.files||[],Object.assign(Object.assign({},Be),{content_disposition:"attachment"})]}),Le&&Le(Be)}catch(Be){ai(Qe,Ee.name,{loading:!1,error:!0,errorMessage:typeof Be=="string"?Be:void 0}),je&&je(Be)}})}const Xr=_=>{var Q;F&&F(_),As(Qe,_),_.id&&ct({file_ids:k.file_ids.filter(Ee=>Ee!==_.id),files:(Q=k.files)===null||Q===void 0?void 0:Q.filter(Ee=>Ee.id!==_.id)}),Y&&Y(_)},Vt=_=>{t(8,de.minimized=_,de),t(9,ft=de),g(de.minimized?"composerMinimized":"composerMaximized",{})};let Je=!1,Lt=!1,pt=!1;const Mr=()=>o(void 0,void 0,void 0,function*(){t(82,Je=!0),t(16,Lt=!1),t(17,pt=!1);let _=k;if(M){const Q=M(k);Q&&(_=Q)}if(le)le(_).then(Q=>{U&&U(Q),t(82,Je=!1),t(17,pt=!0)}).catch(Q=>{fe&&fe(Q),de.reset_after_send&&(t(7,k=Object.assign(Object.assign({},k),Sr)),Tr(Qe)),t(82,Je=!1),t(16,Lt=!0)});else if(b){if(_.object==="draft"){const Q=yield Zn(b,_,v);Q.id&&(ct(Object.assign({},Q)),_=Object.assign({draft_id:Q.id},Q))}console.log(JSON.stringify(_,null,2)),Ul(b,_,v).then(Q=>{U&&U(Q),de.reset_after_send&&(t(7,k=Object.assign(Object.assign({},k),Sr)),Tr(Qe)),t(82,Je=!1),t(17,pt=!0),g("messageSent",{message:Q})}).catch(Q=>{fe&&fe(Q),t(82,Je=!1),t(16,Lt=!0)})}});let gt=!1,ar=!1,yt=!1;const cr=()=>o(void 0,void 0,void 0,function*(){t(83,gt=!0),t(18,ar=!1),t(19,yt=!1);let _=k;try{if(ee){const Q=yield ee(_);B&&B(Q),t(83,gt=!1),t(19,yt=!0)}else if(b)if(_.id&&_.version!=null){const Q=yield Zn(b,_,v);Q.id&&ct(Object.assign({},Q)),B&&B(Q),t(83,gt=!1),t(19,yt=!0),g("draftUpdated",{message:Q})}else{const Q=yield Jl(b,_,v);Q.id&&ct(Object.assign({},Q)),B&&B(Q),t(83,gt=!1),t(19,yt=!0),g("draftSaved",{message:Q})}}catch(Q){ve&&ve(Q),t(83,gt=!1),t(18,ar=!0)}});let Ie="Send",Xt,Pe,Ht;const De=_=>o(void 0,void 0,void 0,function*(){yield wr(),_&&(_.setAttribute("tabindex","-1"),_.focus(),_.removeAttribute("tabindex"))}),jt=_=>{_.key==="Enter"&&_.metaKey&&i&&Mr()},fr=()=>t(12,Zt=!0),Nr=()=>t(12,Zt=!0),ur=()=>Vt(!1),Dr=()=>Vt(!0);function At(_){Ct[_?"unshift":"push"](()=>{Ht=_,t(23,Ht)})}const Ot=()=>{t(8,de.show_cc=!0,de),t(9,ft=de)};function dr(_){Ct[_?"unshift":"push"](()=>{Pe=_,t(22,Pe)})}const hr=()=>{t(8,de.show_bcc=!0,de),t(9,ft=de)},Mt=()=>{De(Ht),t(8,de.show_cc=!1,de),t(9,ft=de)},Kt=()=>{De(Pe),t(8,de.show_bcc=!1,de),t(9,ft=de)};return r.$$set=_=>{t(103,e=$($({},e),pe(_))),"id"in _&&t(0,b=_.id),"access_token"in _&&t(41,v=_.access_token),"value"in _&&t(42,A=_.value),"to"in _&&t(1,y=_.to),"from"in _&&t(43,O=_.from),"cc"in _&&t(2,R=_.cc),"bcc"in _&&t(3,G=_.bcc),"send"in _&&t(44,le=_.send),"save"in _&&t(45,ee=_.save),"change"in _&&t(46,P=_.change),"beforeSend"in _&&t(47,M=_.beforeSend),"afterSendSuccess"in _&&t(48,U=_.afterSendSuccess),"afterSendError"in _&&t(49,fe=_.afterSendError),"afterSaveSuccess"in _&&t(50,B=_.afterSaveSuccess),"afterSaveError"in _&&t(51,ve=_.afterSaveError),"template"in _&&t(4,me=_.template),"tracking"in _&&t(52,we=_.tracking),"minimized"in _&&t(53,Ne=_.minimized),"reset_after_send"in _&&t(54,J=_.reset_after_send),"reset_after_close"in _&&t(55,V=_.reset_after_close),"show_from"in _&&t(56,ue=_.show_from),"show_to"in _&&t(57,Ue=_.show_to),"show_header"in _&&t(58,ze=_.show_header),"show_subject"in _&&t(59,I=_.show_subject),"show_close_button"in _&&t(60,_e=_.show_close_button),"show_minimize_button"in _&&t(61,ke=_.show_minimize_button),"show_cc"in _&&t(62,ce=_.show_cc),"show_bcc"in _&&t(63,oe=_.show_bcc),"show_cc_button"in _&&t(64,se=_.show_cc_button),"show_bcc_button"in _&&t(65,Re=_.show_bcc_button),"show_attachment_button"in _&&t(66,L=_.show_attachment_button),"max_file_size"in _&&t(67,ae=_.max_file_size),"show_max_file_size"in _&&t(68,Te=_.show_max_file_size),"show_save_as_draft"in _&&t(69,ne=_.show_save_as_draft),"show_editor_toolbar"in _&&t(70,xe=_.show_editor_toolbar),"theme"in _&&t(71,Ce=_.theme),"replace_fields"in _&&t(72,Ge=_.replace_fields),"beforeFileUpload"in _&&t(73,Oe=_.beforeFileUpload),"afterFileUploadSuccess"in _&&t(74,Le=_.afterFileUploadSuccess),"afterFileUploadError"in _&&t(75,je=_.afterFileUploadError),"uploadFile"in _&&t(5,D=_.uploadFile),"beforeFileRemove"in _&&t(76,F=_.beforeFileRemove),"afterFileRemove"in _&&t(77,Y=_.afterFileRemove),"focus_body_onload"in _&&t(78,ie=_.focus_body_onload)},r.$$.update=()=>{if(r.$$.dirty[2]&524288&&g("manifestLoaded",St),r.$$.dirty[2]&4194304&&Object.keys(s).length&&g("onError",s),r.$$.dirty[0]&128&&t(14,Ar=k.subject),JSON.stringify(ft)!==JSON.stringify(e)&&(t(8,de=Jr(e,St,be)),t(9,ft=e)),r.$$.dirty[1]&2048|r.$$.dirty[2]&262144&&A&&(ct(A),(t(80,u=A.files)===null||u===void 0?void 0:u.length)>0)){let _=[];Tr(Qe);for(const[Q,Ee]of A.files.entries())_.push(Ee.id),xl(Ee)&&si(Qe,{account_id:A.account_id,id:Ee.id,filename:Ee.filename,size:Ee.size,content_type:Ee.content_type});ct({file_ids:_})}r.$$.dirty[0]&288&&(D?t(15,mt=de.max_file_size):t(15,mt=de.max_file_size&&de.max_file_size<4&&de.max_file_size>0?de.max_file_size:4)),r.$$.dirty[0]&128|r.$$.dirty[1]&32768&&k&&P&&P(k),r.$$.dirty[0]&128&&t(25,n=k.send_at*1e3),r.$$.dirty[2]&3145728&&(Je?t(20,Ie="Sending"):gt?t(20,Ie="Saving"):t(20,Ie="Send")),r.$$.dirty[0]&129|r.$$.dirty[1]&8192|r.$$.dirty[2]&3145728&&t(24,i=!Je&&!gt&&(b||le)&&k.from.length&&(k.to.length||k.cc.length||k.bcc.length)),r.$$.dirty[0]&256&&de.theme&&(de.theme.startsWith(".")||de.theme.startsWith("http")?t(21,Xt=de.theme):de.theme&&t(21,Xt=`https://unpkg.com/@nylas/components-composer@${Cs.version}/themes/${de.theme}.css`))},e=pe(e),[b,y,R,G,me,D,Wr,k,de,ft,or,Tt,Zt,lr,Ar,mt,Lt,pt,ar,yt,Ie,Xt,Pe,Ht,i,n,c,Qe,_t,Or,Yt,sr,Zr,Yr,Vr,Xr,Vt,Mr,cr,De,jt,v,A,O,le,ee,P,M,U,fe,B,ve,we,Ne,J,V,ue,Ue,ze,I,_e,ke,ce,oe,se,Re,L,ae,Te,ne,xe,Ce,Ge,Oe,Le,je,F,Y,ie,Lr,u,St,Je,gt,s,fr,Nr,ur,Dr,At,Ot,dr,hr,Mt,Kt]}class Ri extends wt{constructor(e){super();this.shadowRoot.innerHTML="<style>*{margin:0;padding:0;border:0;font-size:100%;font:inherit;vertical-align:baseline;list-style:none}.sr-only{position:absolute;left:-10000px;top:auto;width:1px;height:1px;overflow:hidden}.nylas-composer{--outer-padding:var(--composer-outer-width, 15px);--font-size-small:var(--composer-font-size-small, 12px);--text-light:var(--composer-text-light-color, #6e6e7a);--border:var(--composer-border-color, #f7f7f7);--border-radius:var(--composer-border-radius, 6px);--primary:var(--composer-primary-color, #5c77ff);--primary-light:var(--composer-primary-light-color, #f0f2ff);--text-secondary:var(--composer-text-secondary-color, #2247ff);width:var(--width, 100%);min-width:300px;height:var(--height, 100%);min-height:300px;background:var(--composer-background-color, white);border-radius:var(--composer-border-radius, 6px);box-shadow:var(--composer-shadow, 0 1px 10px rgba(0, 0, 0, 0.11), 0 3px 36px rgba(0, 0, 0, 0.12));font-family:var(--composer-font, sans-serif);font-size:var(--composer-font-size, 14px);position:relative;display:grid;grid-template-rows:auto 1fr auto}.nylas-composer.popup{position:fixed;bottom:10px;right:10px;z-index:var(--z-index, 1000)}.nylas-composer.minimized{height:auto;min-height:0}.nylas-composer__loader{min-height:var(--composer-editor-max-height, 480px);display:flex;align-items:center;justify-content:center;color:var(--composer-text-light-color, #6e6e7a);box-shadow:none}.nylas-composer__spinner{margin-right:10px;width:18px;animation:rotate 2s linear infinite}.nylas-composer *:focus{outline:5px auto var(--composer-primary-color, #5c77ff)}@keyframes rotate{to{transform:rotate(360deg)}}main{background:var(--bg);overflow:auto}input{font-family:var(--composer-font, sans-serif)}header{border-top-left-radius:var(--composer-border-radius, 6px);border-top-right-radius:var(--composer-border-radius, 6px);border-bottom:1px solid var(--composer-border-color, #f7f7f7);color:var(--composer-text-color, black);padding:15px var(--composer-outer-padding, 15px);display:flex;font-weight:600;align-items:center;justify-content:space-between;background:var(--composer-header-background-color, var(--composer-background-color, white))}header.minimized{border-bottom-left-radius:var(--composer-border-radius, 6px);border-bottom-right-radius:var(--composer-border-radius, 6px)}footer{padding:15px var(--composer-outer-padding, 15px);border-top:1px solid var(--composer-border-color, #f7f7f7);display:flex;align-items:center;justify-content:flex-start;background:var(--bg)}.send-btn{border:0;background:var(--composer-primary-color, #5c77ff);color:white;cursor:pointer;padding:10px 25px;font-weight:bold;border-radius:var(--composer-border-radius, 6px);font-family:var(--composer-font, sans-serif);transition:background-color 0.3s}.send-btn:disabled{opacity:0.5}.send-btn:hover{background:var(--composer-primary-dark-color, #294dff)}.send-btn.send-later{padding:10px 10px;border-radius:var(--composer-border-radius, 6px);border-top-left-radius:0;border-bottom-left-radius:0;margin-left:-4px}.subject{display:block;font-size:var(--composer-font-size, 14px);border:none;border-bottom:1px solid var(--composer-border-color, #f7f7f7);color:var(--composer-text-color, black);width:100%;background:var(--bg);font-weight:600;box-sizing:border-box;padding:15px var(--composer-outer-padding, 15px);outline:0}.subject::placeholer{font-weight:500}.contacts-wrapper{position:relative;text-decoration:none;color:var(--composer-text-color, black)}.contacts-wrapper .contacts-container{display:flex;align-items:center;flex-wrap:wrap;padding:0.4rem var(--outer-padding);border-bottom:1px solid var(--border)}.contacts-wrapper .contact-from{display:flex;align-items:center;padding-bottom:0.1rem;padding-right:0.1rem}.contacts-wrapper .contact-item{display:inline-flex;background:var(--primary-light);color:var(--primary);align-items:center;border-radius:calc(var(--border-radius) / 2);padding:0.2rem 0.8rem;margin-right:0.25rem;margin-top:2px;margin-bottom:2px}.contacts-wrapper .contact-item__name{color:var(--text-secondary);font-size:12px;padding-right:0.75rem}.contacts-wrapper .contacts-placeholder{font-size:var(--font-size-small);margin-right:10px;min-width:30px;display:flex;color:var(--text-light)}.close-btn{background:none;border:none;outline:0;cursor:pointer}.composer-btn{background:none;border:none;outline:0;width:28px;height:28px;border-radius:var(--composer-border-radius, 6px);cursor:pointer}.composer-btn:hover{background:var(--composer-background-muted-color, #f0f2ff)}.composer-btn.file-upload,.composer-btn.save-draft{margin-left:6px;width:32px;height:32px;display:flex;justify-content:center;align-items:center}.file-size{margin-left:6px;color:var(--composer-icons-color, #666774);height:32px;width:auto;display:flex;justify-content:center;align-items:center}.cc-btn{position:absolute;right:10px}.attachments-wrapper{display:flex;padding:15px var(--composer-outer-padding, 15px);flex-direction:column}.addons{font-size:var(--composer-font-size-small, 12px);letter-spacing:1.2px;font-weight:600;position:absolute;right:10px;bottom:16px;color:var(--composer-text-light-color, #6e6e7a)}.addons button{background:transparent;box-shadow:none;border:none;color:var(--composer-text-light-color, #6e6e7a);cursor:pointer;margin-right:10px;padding:5px}.cc-container{display:flex;justify-content:space-between;align-items:center;position:relative}.cc-container>nylas-contacts-search{flex:1}.attachments-caption{font-size:var(--composer-font-size-small, 12px);margin-bottom:5px;color:var(--composer-text-light-color, #6e6e7a)}@media only screen and (max-width: 600px){.nylas-composer{width:100%}.contacts-wrapper{position:initial}.addons{position:initial;float:right;padding:5px}}[class$=Icon]{fill:var(--composer-icons-color, #666774);width:10px;height:10px}[class$=FooterIcon]{width:16px;height:16px}.ExpandIcon{transform:translateY(1px)}.MinimizeIcon{transform:translateY(4px)}</style>",Me(this,{target:this.shadowRoot,props:Et(this.attributes),customElement:!0},Ys,Zs,_r,{id:0,access_token:41,value:42,to:1,from:43,cc:2,bcc:3,send:44,save:45,change:46,beforeSend:47,afterSendSuccess:48,afterSendError:49,afterSaveSuccess:50,afterSaveError:51,template:4,tracking:52,minimized:53,reset_after_send:54,reset_after_close:55,show_from:56,show_to:57,show_header:58,show_subject:59,show_close_button:60,show_minimize_button:61,show_cc:62,show_bcc:63,show_cc_button:64,show_bcc_button:65,show_attachment_button:66,max_file_size:67,show_max_file_size:68,show_save_as_draft:69,show_editor_toolbar:70,theme:71,replace_fields:72,beforeFileUpload:73,afterFileUploadSuccess:74,afterFileUploadError:75,uploadFile:5,beforeFileRemove:76,afterFileRemove:77,focus_body_onload:78,open:79,close:6},null,[-1,-1,-1,-1]),e&&(e.target&&x(e.target,this,e.anchor),e.props&&(this.$set(e.props),z()))}static get observedAttributes(){return["id","access_token","value","to","from","cc","bcc","send","save","change","beforeSend","afterSendSuccess","afterSendError","afterSaveSuccess","afterSaveError","template","tracking","minimized","reset_after_send","reset_after_close","show_from","show_to","show_header","show_subject","show_close_button","show_minimize_button","show_cc","show_bcc","show_cc_button","show_bcc_button","show_attachment_button","max_file_size","show_max_file_size","show_save_as_draft","show_editor_toolbar","theme","replace_fields","beforeFileUpload","afterFileUploadSuccess","afterFileUploadError","uploadFile","beforeFileRemove","afterFileRemove","focus_body_onload","open","close"]}get id(){return this.$$.ctx[0]}set id(e){this.$$set({id:e}),z()}get access_token(){return this.$$.ctx[41]}set access_token(e){this.$$set({access_token:e}),z()}get value(){return this.$$.ctx[42]}set value(e){this.$$set({value:e}),z()}get to(){return this.$$.ctx[1]}set to(e){this.$$set({to:e}),z()}get from(){return this.$$.ctx[43]}set from(e){this.$$set({from:e}),z()}get cc(){return this.$$.ctx[2]}set cc(e){this.$$set({cc:e}),z()}get bcc(){return this.$$.ctx[3]}set bcc(e){this.$$set({bcc:e}),z()}get send(){return this.$$.ctx[44]}set send(e){this.$$set({send:e}),z()}get save(){return this.$$.ctx[45]}set save(e){this.$$set({save:e}),z()}get change(){return this.$$.ctx[46]}set change(e){this.$$set({change:e}),z()}get beforeSend(){return this.$$.ctx[47]}set beforeSend(e){this.$$set({beforeSend:e}),z()}get afterSendSuccess(){return this.$$.ctx[48]}set afterSendSuccess(e){this.$$set({afterSendSuccess:e}),z()}get afterSendError(){return this.$$.ctx[49]}set afterSendError(e){this.$$set({afterSendError:e}),z()}get afterSaveSuccess(){return this.$$.ctx[50]}set afterSaveSuccess(e){this.$$set({afterSaveSuccess:e}),z()}get afterSaveError(){return this.$$.ctx[51]}set afterSaveError(e){this.$$set({afterSaveError:e}),z()}get template(){return this.$$.ctx[4]}set template(e){this.$$set({template:e}),z()}get tracking(){return this.$$.ctx[52]}set tracking(e){this.$$set({tracking:e}),z()}get minimized(){return this.$$.ctx[53]}set minimized(e){this.$$set({minimized:e}),z()}get reset_after_send(){return this.$$.ctx[54]}set reset_after_send(e){this.$$set({reset_after_send:e}),z()}get reset_after_close(){return this.$$.ctx[55]}set reset_after_close(e){this.$$set({reset_after_close:e}),z()}get show_from(){return this.$$.ctx[56]}set show_from(e){this.$$set({show_from:e}),z()}get show_to(){return this.$$.ctx[57]}set show_to(e){this.$$set({show_to:e}),z()}get show_header(){return this.$$.ctx[58]}set show_header(e){this.$$set({show_header:e}),z()}get show_subject(){return this.$$.ctx[59]}set show_subject(e){this.$$set({show_subject:e}),z()}get show_close_button(){return this.$$.ctx[60]}set show_close_button(e){this.$$set({show_close_button:e}),z()}get show_minimize_button(){return this.$$.ctx[61]}set show_minimize_button(e){this.$$set({show_minimize_button:e}),z()}get show_cc(){return this.$$.ctx[62]}set show_cc(e){this.$$set({show_cc:e}),z()}get show_bcc(){return this.$$.ctx[63]}set show_bcc(e){this.$$set({show_bcc:e}),z()}get show_cc_button(){return this.$$.ctx[64]}set show_cc_button(e){this.$$set({show_cc_button:e}),z()}get show_bcc_button(){return this.$$.ctx[65]}set show_bcc_button(e){this.$$set({show_bcc_button:e}),z()}get show_attachment_button(){return this.$$.ctx[66]}set show_attachment_button(e){this.$$set({show_attachment_button:e}),z()}get max_file_size(){return this.$$.ctx[67]}set max_file_size(e){this.$$set({max_file_size:e}),z()}get show_max_file_size(){return this.$$.ctx[68]}set show_max_file_size(e){this.$$set({show_max_file_size:e}),z()}get show_save_as_draft(){return this.$$.ctx[69]}set show_save_as_draft(e){this.$$set({show_save_as_draft:e}),z()}get show_editor_toolbar(){return this.$$.ctx[70]}set show_editor_toolbar(e){this.$$set({show_editor_toolbar:e}),z()}get theme(){return this.$$.ctx[71]}set theme(e){this.$$set({theme:e}),z()}get replace_fields(){return this.$$.ctx[72]}set replace_fields(e){this.$$set({replace_fields:e}),z()}get beforeFileUpload(){return this.$$.ctx[73]}set beforeFileUpload(e){this.$$set({beforeFileUpload:e}),z()}get afterFileUploadSuccess(){return this.$$.ctx[74]}set afterFileUploadSuccess(e){this.$$set({afterFileUploadSuccess:e}),z()}get afterFileUploadError(){return this.$$.ctx[75]}set afterFileUploadError(e){this.$$set({afterFileUploadError:e}),z()}get uploadFile(){return this.$$.ctx[5]}set uploadFile(e){this.$$set({uploadFile:e}),z()}get beforeFileRemove(){return this.$$.ctx[76]}set beforeFileRemove(e){this.$$set({beforeFileRemove:e}),z()}get afterFileRemove(){return this.$$.ctx[77]}set afterFileRemove(e){this.$$set({afterFileRemove:e}),z()}get focus_body_onload(){return this.$$.ctx[78]}set focus_body_onload(e){this.$$set({focus_body_onload:e}),z()}get open(){return this.$$.ctx[79]}get close(){return this.$$.ctx[6]}}return customElements.define("nylas-composer",Ri),Ri});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5kZXguanMiLCJzb3VyY2VzIjpbIi4uLy4uL2NvbW1vbnMvc3JjL2RlZmluZS1jb21wb25lbnQtcGF0Y2gudHMiLCIuLi8uLi9ub2RlX21vZHVsZXMvc3ZlbHRlL2ludGVybmFsL2luZGV4Lm1qcyIsInNyYy9hc3NldHMvYm9sZC5zdmciLCJzcmMvYXNzZXRzL2l0YWxpYy5zdmciLCJzcmMvYXNzZXRzL3VuZGVybGluZS5zdmciLCJzcmMvYXNzZXRzL2xpc3Quc3ZnIiwic3JjL2Fzc2V0cy9idWxsZXQuc3ZnIiwic3JjL2Fzc2V0cy9hbGlnbmVkLWxlZnQuc3ZnIiwic3JjL2Fzc2V0cy9hbGlnbmVkLXJpZ2h0LnN2ZyIsInNyYy9hc3NldHMvY2VudGVyZWQuc3ZnIiwic3JjL2Fzc2V0cy9qdXN0aWZpZWQuc3ZnIiwic3JjL2Fzc2V0cy9saW5rLnN2ZyIsInNyYy9saWIvaHRtbC1lZGl0b3IudHMiLCJzcmMvY29tcG9uZW50cy9IVE1MRWRpdG9yLnN2ZWx0ZSIsInNyYy9jb21wb25lbnRzL0FsZXJ0QmFyLnN2ZWx0ZSIsInNyYy9hc3NldHMvY2xvc2Uuc3ZnIiwic3JjL2Fzc2V0cy9sb2FkaW5nLnN2ZyIsInNyYy9jb21wb25lbnRzL0F0dGFjaG1lbnQuc3ZlbHRlIiwiLi4vZGF0ZXBpY2tlci9zcmMvRGF0ZXBpY2tlci5zdmVsdGUiLCJzcmMvY29tcG9uZW50cy9EYXRlcGlja2VyTW9kYWwuc3ZlbHRlIiwiLi4vLi4vbm9kZV9tb2R1bGVzL2RvbXB1cmlmeS9kaXN0L3B1cmlmeS5qcyIsInNyYy9saWIvdXRpbHMudHMiLCIuLi8uLi9jb21tb25zL3NyYy9tZXRob2RzL3BhcnRpY2lwYW50cy50cyIsInNyYy9jb21wb25lbnRzL0NvbnRhY3RzU2VhcmNoLnN2ZWx0ZSIsIi4uLy4uL2NvbW1vbnMvc3JjL2NvbnN0YW50cy9hdHRhY2htZW50LWNvbnRlbnQtdHlwZXMudHMiLCIuLi8uLi9jb21tb25zL3NyYy9tZXRob2RzL2lzRmlsZUFuQXR0YWNobWVudC50cyIsIi4uLy4uL25vZGVfbW9kdWxlcy9zdmVsdGUvc3RvcmUvaW5kZXgubWpzIiwiLi4vLi4vY29tbW9ucy9zcmMvc3RvcmUvZXJyb3IudHMiLCIuLi8uLi9jb21tb25zL3NyYy9tZXRob2RzL2FwaS50cyIsIi4uLy4uL2NvbW1vbnMvc3JjL2Nvbm5lY3Rpb25zL3RocmVhZHMudHMiLCIuLi8uLi9jb21tb25zL3NyYy9jb25uZWN0aW9ucy9tYW5pZmVzdC50cyIsIi4uLy4uL2NvbW1vbnMvc3JjL2Nvbm5lY3Rpb25zL21lc3NhZ2VzLnRzIiwiLi4vLi4vY29tbW9ucy9zcmMvY29ubmVjdGlvbnMvYWNjb3VudHMudHMiLCIuLi8uLi9jb21tb25zL3NyYy9jb25uZWN0aW9ucy9hdmFpbGFiaWxpdHkudHMiLCIuLi8uLi9jb21tb25zL3NyYy9zdG9yZS9hdmFpbGFiaWxpdHkudHMiLCIuLi8uLi9jb21tb25zL3NyYy9zdG9yZS9jb25zZWN1dGl2ZS1hdmFpbGFiaWxpdHkudHMiLCIuLi8uLi9jb21tb25zL3NyYy9zdG9yZS9tYWlsYm94LnRzIiwiLi4vLi4vY29tbW9ucy9zcmMvc3RvcmUvbWFuaWZlc3QudHMiLCIuLi8uLi9jb21tb25zL3NyYy9tZXRob2RzL2NvbXBvbmVudC50cyIsIi4uLy4uL2NvbW1vbnMvc3JjL2NvbXBvbmVudHMvTkVycm9yLnN2ZWx0ZSIsInNyYy9saWIvc3RvcmUudHMiLCJzcmMvbGliL2Zvcm1hdC1kYXRlLnRzIiwic3JjL2Fzc2V0cy9kYXNoLnN2ZyIsInNyYy9hc3NldHMvYXR0YWNobWVudC5zdmciLCJzcmMvYXNzZXRzL2RyYWZ0cy5zdmciLCJzcmMvYXNzZXRzL2V4cGFuZC5zdmciLCJzcmMvQ29tcG9zZXIuc3ZlbHRlIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBjb25zdCBvcmlnaW5hbERlZmluZSA9IHdpbmRvdy5jdXN0b21FbGVtZW50cy5kZWZpbmUuYmluZChcbiAgd2luZG93LmN1c3RvbUVsZW1lbnRzLFxuKTtcbndpbmRvdy5jdXN0b21FbGVtZW50cy5kZWZpbmUgPSAobmFtZTogc3RyaW5nLCAuLi5hcmdzKSA9PiB7XG4gIGlmIChjdXN0b21FbGVtZW50cy5nZXQobmFtZSkpIHtcbiAgICByZXR1cm47XG4gIH1cbiAgcmV0dXJuIG9yaWdpbmFsRGVmaW5lKG5hbWUsIC4uLmFyZ3MpO1xufTtcbiIsImZ1bmN0aW9uIG5vb3AoKSB7IH1cbmNvbnN0IGlkZW50aXR5ID0geCA9PiB4O1xuZnVuY3Rpb24gYXNzaWduKHRhciwgc3JjKSB7XG4gICAgLy8gQHRzLWlnbm9yZVxuICAgIGZvciAoY29uc3QgayBpbiBzcmMpXG4gICAgICAgIHRhcltrXSA9IHNyY1trXTtcbiAgICByZXR1cm4gdGFyO1xufVxuZnVuY3Rpb24gaXNfcHJvbWlzZSh2YWx1ZSkge1xuICAgIHJldHVybiB2YWx1ZSAmJiB0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnICYmIHR5cGVvZiB2YWx1ZS50aGVuID09PSAnZnVuY3Rpb24nO1xufVxuZnVuY3Rpb24gYWRkX2xvY2F0aW9uKGVsZW1lbnQsIGZpbGUsIGxpbmUsIGNvbHVtbiwgY2hhcikge1xuICAgIGVsZW1lbnQuX19zdmVsdGVfbWV0YSA9IHtcbiAgICAgICAgbG9jOiB7IGZpbGUsIGxpbmUsIGNvbHVtbiwgY2hhciB9XG4gICAgfTtcbn1cbmZ1bmN0aW9uIHJ1bihmbikge1xuICAgIHJldHVybiBmbigpO1xufVxuZnVuY3Rpb24gYmxhbmtfb2JqZWN0KCkge1xuICAgIHJldHVybiBPYmplY3QuY3JlYXRlKG51bGwpO1xufVxuZnVuY3Rpb24gcnVuX2FsbChmbnMpIHtcbiAgICBmbnMuZm9yRWFjaChydW4pO1xufVxuZnVuY3Rpb24gaXNfZnVuY3Rpb24odGhpbmcpIHtcbiAgICByZXR1cm4gdHlwZW9mIHRoaW5nID09PSAnZnVuY3Rpb24nO1xufVxuZnVuY3Rpb24gc2FmZV9ub3RfZXF1YWwoYSwgYikge1xuICAgIHJldHVybiBhICE9IGEgPyBiID09IGIgOiBhICE9PSBiIHx8ICgoYSAmJiB0eXBlb2YgYSA9PT0gJ29iamVjdCcpIHx8IHR5cGVvZiBhID09PSAnZnVuY3Rpb24nKTtcbn1cbmxldCBzcmNfdXJsX2VxdWFsX2FuY2hvcjtcbmZ1bmN0aW9uIHNyY191cmxfZXF1YWwoZWxlbWVudF9zcmMsIHVybCkge1xuICAgIGlmICghc3JjX3VybF9lcXVhbF9hbmNob3IpIHtcbiAgICAgICAgc3JjX3VybF9lcXVhbF9hbmNob3IgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJyk7XG4gICAgfVxuICAgIHNyY191cmxfZXF1YWxfYW5jaG9yLmhyZWYgPSB1cmw7XG4gICAgcmV0dXJuIGVsZW1lbnRfc3JjID09PSBzcmNfdXJsX2VxdWFsX2FuY2hvci5ocmVmO1xufVxuZnVuY3Rpb24gbm90X2VxdWFsKGEsIGIpIHtcbiAgICByZXR1cm4gYSAhPSBhID8gYiA9PSBiIDogYSAhPT0gYjtcbn1cbmZ1bmN0aW9uIGlzX2VtcHR5KG9iaikge1xuICAgIHJldHVybiBPYmplY3Qua2V5cyhvYmopLmxlbmd0aCA9PT0gMDtcbn1cbmZ1bmN0aW9uIHZhbGlkYXRlX3N0b3JlKHN0b3JlLCBuYW1lKSB7XG4gICAgaWYgKHN0b3JlICE9IG51bGwgJiYgdHlwZW9mIHN0b3JlLnN1YnNjcmliZSAhPT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYCcke25hbWV9JyBpcyBub3QgYSBzdG9yZSB3aXRoIGEgJ3N1YnNjcmliZScgbWV0aG9kYCk7XG4gICAgfVxufVxuZnVuY3Rpb24gc3Vic2NyaWJlKHN0b3JlLCAuLi5jYWxsYmFja3MpIHtcbiAgICBpZiAoc3RvcmUgPT0gbnVsbCkge1xuICAgICAgICByZXR1cm4gbm9vcDtcbiAgICB9XG4gICAgY29uc3QgdW5zdWIgPSBzdG9yZS5zdWJzY3JpYmUoLi4uY2FsbGJhY2tzKTtcbiAgICByZXR1cm4gdW5zdWIudW5zdWJzY3JpYmUgPyAoKSA9PiB1bnN1Yi51bnN1YnNjcmliZSgpIDogdW5zdWI7XG59XG5mdW5jdGlvbiBnZXRfc3RvcmVfdmFsdWUoc3RvcmUpIHtcbiAgICBsZXQgdmFsdWU7XG4gICAgc3Vic2NyaWJlKHN0b3JlLCBfID0+IHZhbHVlID0gXykoKTtcbiAgICByZXR1cm4gdmFsdWU7XG59XG5mdW5jdGlvbiBjb21wb25lbnRfc3Vic2NyaWJlKGNvbXBvbmVudCwgc3RvcmUsIGNhbGxiYWNrKSB7XG4gICAgY29tcG9uZW50LiQkLm9uX2Rlc3Ryb3kucHVzaChzdWJzY3JpYmUoc3RvcmUsIGNhbGxiYWNrKSk7XG59XG5mdW5jdGlvbiBjcmVhdGVfc2xvdChkZWZpbml0aW9uLCBjdHgsICQkc2NvcGUsIGZuKSB7XG4gICAgaWYgKGRlZmluaXRpb24pIHtcbiAgICAgICAgY29uc3Qgc2xvdF9jdHggPSBnZXRfc2xvdF9jb250ZXh0KGRlZmluaXRpb24sIGN0eCwgJCRzY29wZSwgZm4pO1xuICAgICAgICByZXR1cm4gZGVmaW5pdGlvblswXShzbG90X2N0eCk7XG4gICAgfVxufVxuZnVuY3Rpb24gZ2V0X3Nsb3RfY29udGV4dChkZWZpbml0aW9uLCBjdHgsICQkc2NvcGUsIGZuKSB7XG4gICAgcmV0dXJuIGRlZmluaXRpb25bMV0gJiYgZm5cbiAgICAgICAgPyBhc3NpZ24oJCRzY29wZS5jdHguc2xpY2UoKSwgZGVmaW5pdGlvblsxXShmbihjdHgpKSlcbiAgICAgICAgOiAkJHNjb3BlLmN0eDtcbn1cbmZ1bmN0aW9uIGdldF9zbG90X2NoYW5nZXMoZGVmaW5pdGlvbiwgJCRzY29wZSwgZGlydHksIGZuKSB7XG4gICAgaWYgKGRlZmluaXRpb25bMl0gJiYgZm4pIHtcbiAgICAgICAgY29uc3QgbGV0cyA9IGRlZmluaXRpb25bMl0oZm4oZGlydHkpKTtcbiAgICAgICAgaWYgKCQkc2NvcGUuZGlydHkgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgcmV0dXJuIGxldHM7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHR5cGVvZiBsZXRzID09PSAnb2JqZWN0Jykge1xuICAgICAgICAgICAgY29uc3QgbWVyZ2VkID0gW107XG4gICAgICAgICAgICBjb25zdCBsZW4gPSBNYXRoLm1heCgkJHNjb3BlLmRpcnR5Lmxlbmd0aCwgbGV0cy5sZW5ndGgpO1xuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsZW47IGkgKz0gMSkge1xuICAgICAgICAgICAgICAgIG1lcmdlZFtpXSA9ICQkc2NvcGUuZGlydHlbaV0gfCBsZXRzW2ldO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIG1lcmdlZDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gJCRzY29wZS5kaXJ0eSB8IGxldHM7XG4gICAgfVxuICAgIHJldHVybiAkJHNjb3BlLmRpcnR5O1xufVxuZnVuY3Rpb24gdXBkYXRlX3Nsb3RfYmFzZShzbG90LCBzbG90X2RlZmluaXRpb24sIGN0eCwgJCRzY29wZSwgc2xvdF9jaGFuZ2VzLCBnZXRfc2xvdF9jb250ZXh0X2ZuKSB7XG4gICAgaWYgKHNsb3RfY2hhbmdlcykge1xuICAgICAgICBjb25zdCBzbG90X2NvbnRleHQgPSBnZXRfc2xvdF9jb250ZXh0KHNsb3RfZGVmaW5pdGlvbiwgY3R4LCAkJHNjb3BlLCBnZXRfc2xvdF9jb250ZXh0X2ZuKTtcbiAgICAgICAgc2xvdC5wKHNsb3RfY29udGV4dCwgc2xvdF9jaGFuZ2VzKTtcbiAgICB9XG59XG5mdW5jdGlvbiB1cGRhdGVfc2xvdChzbG90LCBzbG90X2RlZmluaXRpb24sIGN0eCwgJCRzY29wZSwgZGlydHksIGdldF9zbG90X2NoYW5nZXNfZm4sIGdldF9zbG90X2NvbnRleHRfZm4pIHtcbiAgICBjb25zdCBzbG90X2NoYW5nZXMgPSBnZXRfc2xvdF9jaGFuZ2VzKHNsb3RfZGVmaW5pdGlvbiwgJCRzY29wZSwgZGlydHksIGdldF9zbG90X2NoYW5nZXNfZm4pO1xuICAgIHVwZGF0ZV9zbG90X2Jhc2Uoc2xvdCwgc2xvdF9kZWZpbml0aW9uLCBjdHgsICQkc2NvcGUsIHNsb3RfY2hhbmdlcywgZ2V0X3Nsb3RfY29udGV4dF9mbik7XG59XG5mdW5jdGlvbiBnZXRfYWxsX2RpcnR5X2Zyb21fc2NvcGUoJCRzY29wZSkge1xuICAgIGlmICgkJHNjb3BlLmN0eC5sZW5ndGggPiAzMikge1xuICAgICAgICBjb25zdCBkaXJ0eSA9IFtdO1xuICAgICAgICBjb25zdCBsZW5ndGggPSAkJHNjb3BlLmN0eC5sZW5ndGggLyAzMjtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgZGlydHlbaV0gPSAtMTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZGlydHk7XG4gICAgfVxuICAgIHJldHVybiAtMTtcbn1cbmZ1bmN0aW9uIGV4Y2x1ZGVfaW50ZXJuYWxfcHJvcHMocHJvcHMpIHtcbiAgICBjb25zdCByZXN1bHQgPSB7fTtcbiAgICBmb3IgKGNvbnN0IGsgaW4gcHJvcHMpXG4gICAgICAgIGlmIChrWzBdICE9PSAnJCcpXG4gICAgICAgICAgICByZXN1bHRba10gPSBwcm9wc1trXTtcbiAgICByZXR1cm4gcmVzdWx0O1xufVxuZnVuY3Rpb24gY29tcHV0ZV9yZXN0X3Byb3BzKHByb3BzLCBrZXlzKSB7XG4gICAgY29uc3QgcmVzdCA9IHt9O1xuICAgIGtleXMgPSBuZXcgU2V0KGtleXMpO1xuICAgIGZvciAoY29uc3QgayBpbiBwcm9wcylcbiAgICAgICAgaWYgKCFrZXlzLmhhcyhrKSAmJiBrWzBdICE9PSAnJCcpXG4gICAgICAgICAgICByZXN0W2tdID0gcHJvcHNba107XG4gICAgcmV0dXJuIHJlc3Q7XG59XG5mdW5jdGlvbiBjb21wdXRlX3Nsb3RzKHNsb3RzKSB7XG4gICAgY29uc3QgcmVzdWx0ID0ge307XG4gICAgZm9yIChjb25zdCBrZXkgaW4gc2xvdHMpIHtcbiAgICAgICAgcmVzdWx0W2tleV0gPSB0cnVlO1xuICAgIH1cbiAgICByZXR1cm4gcmVzdWx0O1xufVxuZnVuY3Rpb24gb25jZShmbikge1xuICAgIGxldCByYW4gPSBmYWxzZTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKC4uLmFyZ3MpIHtcbiAgICAgICAgaWYgKHJhbilcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgcmFuID0gdHJ1ZTtcbiAgICAgICAgZm4uY2FsbCh0aGlzLCAuLi5hcmdzKTtcbiAgICB9O1xufVxuZnVuY3Rpb24gbnVsbF90b19lbXB0eSh2YWx1ZSkge1xuICAgIHJldHVybiB2YWx1ZSA9PSBudWxsID8gJycgOiB2YWx1ZTtcbn1cbmZ1bmN0aW9uIHNldF9zdG9yZV92YWx1ZShzdG9yZSwgcmV0LCB2YWx1ZSkge1xuICAgIHN0b3JlLnNldCh2YWx1ZSk7XG4gICAgcmV0dXJuIHJldDtcbn1cbmNvbnN0IGhhc19wcm9wID0gKG9iaiwgcHJvcCkgPT4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwgcHJvcCk7XG5mdW5jdGlvbiBhY3Rpb25fZGVzdHJveWVyKGFjdGlvbl9yZXN1bHQpIHtcbiAgICByZXR1cm4gYWN0aW9uX3Jlc3VsdCAmJiBpc19mdW5jdGlvbihhY3Rpb25fcmVzdWx0LmRlc3Ryb3kpID8gYWN0aW9uX3Jlc3VsdC5kZXN0cm95IDogbm9vcDtcbn1cblxuY29uc3QgaXNfY2xpZW50ID0gdHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCc7XG5sZXQgbm93ID0gaXNfY2xpZW50XG4gICAgPyAoKSA9PiB3aW5kb3cucGVyZm9ybWFuY2Uubm93KClcbiAgICA6ICgpID0+IERhdGUubm93KCk7XG5sZXQgcmFmID0gaXNfY2xpZW50ID8gY2IgPT4gcmVxdWVzdEFuaW1hdGlvbkZyYW1lKGNiKSA6IG5vb3A7XG4vLyB1c2VkIGludGVybmFsbHkgZm9yIHRlc3RpbmdcbmZ1bmN0aW9uIHNldF9ub3coZm4pIHtcbiAgICBub3cgPSBmbjtcbn1cbmZ1bmN0aW9uIHNldF9yYWYoZm4pIHtcbiAgICByYWYgPSBmbjtcbn1cblxuY29uc3QgdGFza3MgPSBuZXcgU2V0KCk7XG5mdW5jdGlvbiBydW5fdGFza3Mobm93KSB7XG4gICAgdGFza3MuZm9yRWFjaCh0YXNrID0+IHtcbiAgICAgICAgaWYgKCF0YXNrLmMobm93KSkge1xuICAgICAgICAgICAgdGFza3MuZGVsZXRlKHRhc2spO1xuICAgICAgICAgICAgdGFzay5mKCk7XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICBpZiAodGFza3Muc2l6ZSAhPT0gMClcbiAgICAgICAgcmFmKHJ1bl90YXNrcyk7XG59XG4vKipcbiAqIEZvciB0ZXN0aW5nIHB1cnBvc2VzIG9ubHkhXG4gKi9cbmZ1bmN0aW9uIGNsZWFyX2xvb3BzKCkge1xuICAgIHRhc2tzLmNsZWFyKCk7XG59XG4vKipcbiAqIENyZWF0ZXMgYSBuZXcgdGFzayB0aGF0IHJ1bnMgb24gZWFjaCByYWYgZnJhbWVcbiAqIHVudGlsIGl0IHJldHVybnMgYSBmYWxzeSB2YWx1ZSBvciBpcyBhYm9ydGVkXG4gKi9cbmZ1bmN0aW9uIGxvb3AoY2FsbGJhY2spIHtcbiAgICBsZXQgdGFzaztcbiAgICBpZiAodGFza3Muc2l6ZSA9PT0gMClcbiAgICAgICAgcmFmKHJ1bl90YXNrcyk7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgcHJvbWlzZTogbmV3IFByb21pc2UoZnVsZmlsbCA9PiB7XG4gICAgICAgICAgICB0YXNrcy5hZGQodGFzayA9IHsgYzogY2FsbGJhY2ssIGY6IGZ1bGZpbGwgfSk7XG4gICAgICAgIH0pLFxuICAgICAgICBhYm9ydCgpIHtcbiAgICAgICAgICAgIHRhc2tzLmRlbGV0ZSh0YXNrKTtcbiAgICAgICAgfVxuICAgIH07XG59XG5cbi8vIFRyYWNrIHdoaWNoIG5vZGVzIGFyZSBjbGFpbWVkIGR1cmluZyBoeWRyYXRpb24uIFVuY2xhaW1lZCBub2RlcyBjYW4gdGhlbiBiZSByZW1vdmVkIGZyb20gdGhlIERPTVxuLy8gYXQgdGhlIGVuZCBvZiBoeWRyYXRpb24gd2l0aG91dCB0b3VjaGluZyB0aGUgcmVtYWluaW5nIG5vZGVzLlxubGV0IGlzX2h5ZHJhdGluZyA9IGZhbHNlO1xuZnVuY3Rpb24gc3RhcnRfaHlkcmF0aW5nKCkge1xuICAgIGlzX2h5ZHJhdGluZyA9IHRydWU7XG59XG5mdW5jdGlvbiBlbmRfaHlkcmF0aW5nKCkge1xuICAgIGlzX2h5ZHJhdGluZyA9IGZhbHNlO1xufVxuZnVuY3Rpb24gdXBwZXJfYm91bmQobG93LCBoaWdoLCBrZXksIHZhbHVlKSB7XG4gICAgLy8gUmV0dXJuIGZpcnN0IGluZGV4IG9mIHZhbHVlIGxhcmdlciB0aGFuIGlucHV0IHZhbHVlIGluIHRoZSByYW5nZSBbbG93LCBoaWdoKVxuICAgIHdoaWxlIChsb3cgPCBoaWdoKSB7XG4gICAgICAgIGNvbnN0IG1pZCA9IGxvdyArICgoaGlnaCAtIGxvdykgPj4gMSk7XG4gICAgICAgIGlmIChrZXkobWlkKSA8PSB2YWx1ZSkge1xuICAgICAgICAgICAgbG93ID0gbWlkICsgMTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGhpZ2ggPSBtaWQ7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGxvdztcbn1cbmZ1bmN0aW9uIGluaXRfaHlkcmF0ZSh0YXJnZXQpIHtcbiAgICBpZiAodGFyZ2V0Lmh5ZHJhdGVfaW5pdClcbiAgICAgICAgcmV0dXJuO1xuICAgIHRhcmdldC5oeWRyYXRlX2luaXQgPSB0cnVlO1xuICAgIC8vIFdlIGtub3cgdGhhdCBhbGwgY2hpbGRyZW4gaGF2ZSBjbGFpbV9vcmRlciB2YWx1ZXMgc2luY2UgdGhlIHVuY2xhaW1lZCBoYXZlIGJlZW4gZGV0YWNoZWQgaWYgdGFyZ2V0IGlzIG5vdCA8aGVhZD5cbiAgICBsZXQgY2hpbGRyZW4gPSB0YXJnZXQuY2hpbGROb2RlcztcbiAgICAvLyBJZiB0YXJnZXQgaXMgPGhlYWQ+LCB0aGVyZSBtYXkgYmUgY2hpbGRyZW4gd2l0aG91dCBjbGFpbV9vcmRlclxuICAgIGlmICh0YXJnZXQubm9kZU5hbWUgPT09ICdIRUFEJykge1xuICAgICAgICBjb25zdCBteUNoaWxkcmVuID0gW107XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY2hpbGRyZW4ubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGNvbnN0IG5vZGUgPSBjaGlsZHJlbltpXTtcbiAgICAgICAgICAgIGlmIChub2RlLmNsYWltX29yZGVyICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICBteUNoaWxkcmVuLnB1c2gobm9kZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgY2hpbGRyZW4gPSBteUNoaWxkcmVuO1xuICAgIH1cbiAgICAvKlxuICAgICogUmVvcmRlciBjbGFpbWVkIGNoaWxkcmVuIG9wdGltYWxseS5cbiAgICAqIFdlIGNhbiByZW9yZGVyIGNsYWltZWQgY2hpbGRyZW4gb3B0aW1hbGx5IGJ5IGZpbmRpbmcgdGhlIGxvbmdlc3Qgc3Vic2VxdWVuY2Ugb2ZcbiAgICAqIG5vZGVzIHRoYXQgYXJlIGFscmVhZHkgY2xhaW1lZCBpbiBvcmRlciBhbmQgb25seSBtb3ZpbmcgdGhlIHJlc3QuIFRoZSBsb25nZXN0XG4gICAgKiBzdWJzZXF1ZW5jZSBzdWJzZXF1ZW5jZSBvZiBub2RlcyB0aGF0IGFyZSBjbGFpbWVkIGluIG9yZGVyIGNhbiBiZSBmb3VuZCBieVxuICAgICogY29tcHV0aW5nIHRoZSBsb25nZXN0IGluY3JlYXNpbmcgc3Vic2VxdWVuY2Ugb2YgLmNsYWltX29yZGVyIHZhbHVlcy5cbiAgICAqXG4gICAgKiBUaGlzIGFsZ29yaXRobSBpcyBvcHRpbWFsIGluIGdlbmVyYXRpbmcgdGhlIGxlYXN0IGFtb3VudCBvZiByZW9yZGVyIG9wZXJhdGlvbnNcbiAgICAqIHBvc3NpYmxlLlxuICAgICpcbiAgICAqIFByb29mOlxuICAgICogV2Uga25vdyB0aGF0LCBnaXZlbiBhIHNldCBvZiByZW9yZGVyaW5nIG9wZXJhdGlvbnMsIHRoZSBub2RlcyB0aGF0IGRvIG5vdCBtb3ZlXG4gICAgKiBhbHdheXMgZm9ybSBhbiBpbmNyZWFzaW5nIHN1YnNlcXVlbmNlLCBzaW5jZSB0aGV5IGRvIG5vdCBtb3ZlIGFtb25nIGVhY2ggb3RoZXJcbiAgICAqIG1lYW5pbmcgdGhhdCB0aGV5IG11c3QgYmUgYWxyZWFkeSBvcmRlcmVkIGFtb25nIGVhY2ggb3RoZXIuIFRodXMsIHRoZSBtYXhpbWFsXG4gICAgKiBzZXQgb2Ygbm9kZXMgdGhhdCBkbyBub3QgbW92ZSBmb3JtIGEgbG9uZ2VzdCBpbmNyZWFzaW5nIHN1YnNlcXVlbmNlLlxuICAgICovXG4gICAgLy8gQ29tcHV0ZSBsb25nZXN0IGluY3JlYXNpbmcgc3Vic2VxdWVuY2VcbiAgICAvLyBtOiBzdWJzZXF1ZW5jZSBsZW5ndGggaiA9PiBpbmRleCBrIG9mIHNtYWxsZXN0IHZhbHVlIHRoYXQgZW5kcyBhbiBpbmNyZWFzaW5nIHN1YnNlcXVlbmNlIG9mIGxlbmd0aCBqXG4gICAgY29uc3QgbSA9IG5ldyBJbnQzMkFycmF5KGNoaWxkcmVuLmxlbmd0aCArIDEpO1xuICAgIC8vIFByZWRlY2Vzc29yIGluZGljZXMgKyAxXG4gICAgY29uc3QgcCA9IG5ldyBJbnQzMkFycmF5KGNoaWxkcmVuLmxlbmd0aCk7XG4gICAgbVswXSA9IC0xO1xuICAgIGxldCBsb25nZXN0ID0gMDtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGNoaWxkcmVuLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGNvbnN0IGN1cnJlbnQgPSBjaGlsZHJlbltpXS5jbGFpbV9vcmRlcjtcbiAgICAgICAgLy8gRmluZCB0aGUgbGFyZ2VzdCBzdWJzZXF1ZW5jZSBsZW5ndGggc3VjaCB0aGF0IGl0IGVuZHMgaW4gYSB2YWx1ZSBsZXNzIHRoYW4gb3VyIGN1cnJlbnQgdmFsdWVcbiAgICAgICAgLy8gdXBwZXJfYm91bmQgcmV0dXJucyBmaXJzdCBncmVhdGVyIHZhbHVlLCBzbyB3ZSBzdWJ0cmFjdCBvbmVcbiAgICAgICAgLy8gd2l0aCBmYXN0IHBhdGggZm9yIHdoZW4gd2UgYXJlIG9uIHRoZSBjdXJyZW50IGxvbmdlc3Qgc3Vic2VxdWVuY2VcbiAgICAgICAgY29uc3Qgc2VxTGVuID0gKChsb25nZXN0ID4gMCAmJiBjaGlsZHJlblttW2xvbmdlc3RdXS5jbGFpbV9vcmRlciA8PSBjdXJyZW50KSA/IGxvbmdlc3QgKyAxIDogdXBwZXJfYm91bmQoMSwgbG9uZ2VzdCwgaWR4ID0+IGNoaWxkcmVuW21baWR4XV0uY2xhaW1fb3JkZXIsIGN1cnJlbnQpKSAtIDE7XG4gICAgICAgIHBbaV0gPSBtW3NlcUxlbl0gKyAxO1xuICAgICAgICBjb25zdCBuZXdMZW4gPSBzZXFMZW4gKyAxO1xuICAgICAgICAvLyBXZSBjYW4gZ3VhcmFudGVlIHRoYXQgY3VycmVudCBpcyB0aGUgc21hbGxlc3QgdmFsdWUuIE90aGVyd2lzZSwgd2Ugd291bGQgaGF2ZSBnZW5lcmF0ZWQgYSBsb25nZXIgc2VxdWVuY2UuXG4gICAgICAgIG1bbmV3TGVuXSA9IGk7XG4gICAgICAgIGxvbmdlc3QgPSBNYXRoLm1heChuZXdMZW4sIGxvbmdlc3QpO1xuICAgIH1cbiAgICAvLyBUaGUgbG9uZ2VzdCBpbmNyZWFzaW5nIHN1YnNlcXVlbmNlIG9mIG5vZGVzIChpbml0aWFsbHkgcmV2ZXJzZWQpXG4gICAgY29uc3QgbGlzID0gW107XG4gICAgLy8gVGhlIHJlc3Qgb2YgdGhlIG5vZGVzLCBub2RlcyB0aGF0IHdpbGwgYmUgbW92ZWRcbiAgICBjb25zdCB0b01vdmUgPSBbXTtcbiAgICBsZXQgbGFzdCA9IGNoaWxkcmVuLmxlbmd0aCAtIDE7XG4gICAgZm9yIChsZXQgY3VyID0gbVtsb25nZXN0XSArIDE7IGN1ciAhPSAwOyBjdXIgPSBwW2N1ciAtIDFdKSB7XG4gICAgICAgIGxpcy5wdXNoKGNoaWxkcmVuW2N1ciAtIDFdKTtcbiAgICAgICAgZm9yICg7IGxhc3QgPj0gY3VyOyBsYXN0LS0pIHtcbiAgICAgICAgICAgIHRvTW92ZS5wdXNoKGNoaWxkcmVuW2xhc3RdKTtcbiAgICAgICAgfVxuICAgICAgICBsYXN0LS07XG4gICAgfVxuICAgIGZvciAoOyBsYXN0ID49IDA7IGxhc3QtLSkge1xuICAgICAgICB0b01vdmUucHVzaChjaGlsZHJlbltsYXN0XSk7XG4gICAgfVxuICAgIGxpcy5yZXZlcnNlKCk7XG4gICAgLy8gV2Ugc29ydCB0aGUgbm9kZXMgYmVpbmcgbW92ZWQgdG8gZ3VhcmFudGVlIHRoYXQgdGhlaXIgaW5zZXJ0aW9uIG9yZGVyIG1hdGNoZXMgdGhlIGNsYWltIG9yZGVyXG4gICAgdG9Nb3ZlLnNvcnQoKGEsIGIpID0+IGEuY2xhaW1fb3JkZXIgLSBiLmNsYWltX29yZGVyKTtcbiAgICAvLyBGaW5hbGx5LCB3ZSBtb3ZlIHRoZSBub2Rlc1xuICAgIGZvciAobGV0IGkgPSAwLCBqID0gMDsgaSA8IHRvTW92ZS5sZW5ndGg7IGkrKykge1xuICAgICAgICB3aGlsZSAoaiA8IGxpcy5sZW5ndGggJiYgdG9Nb3ZlW2ldLmNsYWltX29yZGVyID49IGxpc1tqXS5jbGFpbV9vcmRlcikge1xuICAgICAgICAgICAgaisrO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGFuY2hvciA9IGogPCBsaXMubGVuZ3RoID8gbGlzW2pdIDogbnVsbDtcbiAgICAgICAgdGFyZ2V0Lmluc2VydEJlZm9yZSh0b01vdmVbaV0sIGFuY2hvcik7XG4gICAgfVxufVxuZnVuY3Rpb24gYXBwZW5kKHRhcmdldCwgbm9kZSkge1xuICAgIHRhcmdldC5hcHBlbmRDaGlsZChub2RlKTtcbn1cbmZ1bmN0aW9uIGFwcGVuZF9zdHlsZXModGFyZ2V0LCBzdHlsZV9zaGVldF9pZCwgc3R5bGVzKSB7XG4gICAgY29uc3QgYXBwZW5kX3N0eWxlc190byA9IGdldF9yb290X2Zvcl9zdHlsZSh0YXJnZXQpO1xuICAgIGlmICghYXBwZW5kX3N0eWxlc190by5nZXRFbGVtZW50QnlJZChzdHlsZV9zaGVldF9pZCkpIHtcbiAgICAgICAgY29uc3Qgc3R5bGUgPSBlbGVtZW50KCdzdHlsZScpO1xuICAgICAgICBzdHlsZS5pZCA9IHN0eWxlX3NoZWV0X2lkO1xuICAgICAgICBzdHlsZS50ZXh0Q29udGVudCA9IHN0eWxlcztcbiAgICAgICAgYXBwZW5kX3N0eWxlc2hlZXQoYXBwZW5kX3N0eWxlc190bywgc3R5bGUpO1xuICAgIH1cbn1cbmZ1bmN0aW9uIGdldF9yb290X2Zvcl9zdHlsZShub2RlKSB7XG4gICAgaWYgKCFub2RlKVxuICAgICAgICByZXR1cm4gZG9jdW1lbnQ7XG4gICAgY29uc3Qgcm9vdCA9IG5vZGUuZ2V0Um9vdE5vZGUgPyBub2RlLmdldFJvb3ROb2RlKCkgOiBub2RlLm93bmVyRG9jdW1lbnQ7XG4gICAgaWYgKHJvb3QgJiYgcm9vdC5ob3N0KSB7XG4gICAgICAgIHJldHVybiByb290O1xuICAgIH1cbiAgICByZXR1cm4gbm9kZS5vd25lckRvY3VtZW50O1xufVxuZnVuY3Rpb24gYXBwZW5kX2VtcHR5X3N0eWxlc2hlZXQobm9kZSkge1xuICAgIGNvbnN0IHN0eWxlX2VsZW1lbnQgPSBlbGVtZW50KCdzdHlsZScpO1xuICAgIGFwcGVuZF9zdHlsZXNoZWV0KGdldF9yb290X2Zvcl9zdHlsZShub2RlKSwgc3R5bGVfZWxlbWVudCk7XG4gICAgcmV0dXJuIHN0eWxlX2VsZW1lbnQuc2hlZXQ7XG59XG5mdW5jdGlvbiBhcHBlbmRfc3R5bGVzaGVldChub2RlLCBzdHlsZSkge1xuICAgIGFwcGVuZChub2RlLmhlYWQgfHwgbm9kZSwgc3R5bGUpO1xufVxuZnVuY3Rpb24gYXBwZW5kX2h5ZHJhdGlvbih0YXJnZXQsIG5vZGUpIHtcbiAgICBpZiAoaXNfaHlkcmF0aW5nKSB7XG4gICAgICAgIGluaXRfaHlkcmF0ZSh0YXJnZXQpO1xuICAgICAgICBpZiAoKHRhcmdldC5hY3R1YWxfZW5kX2NoaWxkID09PSB1bmRlZmluZWQpIHx8ICgodGFyZ2V0LmFjdHVhbF9lbmRfY2hpbGQgIT09IG51bGwpICYmICh0YXJnZXQuYWN0dWFsX2VuZF9jaGlsZC5wYXJlbnRFbGVtZW50ICE9PSB0YXJnZXQpKSkge1xuICAgICAgICAgICAgdGFyZ2V0LmFjdHVhbF9lbmRfY2hpbGQgPSB0YXJnZXQuZmlyc3RDaGlsZDtcbiAgICAgICAgfVxuICAgICAgICAvLyBTa2lwIG5vZGVzIG9mIHVuZGVmaW5lZCBvcmRlcmluZ1xuICAgICAgICB3aGlsZSAoKHRhcmdldC5hY3R1YWxfZW5kX2NoaWxkICE9PSBudWxsKSAmJiAodGFyZ2V0LmFjdHVhbF9lbmRfY2hpbGQuY2xhaW1fb3JkZXIgPT09IHVuZGVmaW5lZCkpIHtcbiAgICAgICAgICAgIHRhcmdldC5hY3R1YWxfZW5kX2NoaWxkID0gdGFyZ2V0LmFjdHVhbF9lbmRfY2hpbGQubmV4dFNpYmxpbmc7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG5vZGUgIT09IHRhcmdldC5hY3R1YWxfZW5kX2NoaWxkKSB7XG4gICAgICAgICAgICAvLyBXZSBvbmx5IGluc2VydCBpZiB0aGUgb3JkZXJpbmcgb2YgdGhpcyBub2RlIHNob3VsZCBiZSBtb2RpZmllZCBvciB0aGUgcGFyZW50IG5vZGUgaXMgbm90IHRhcmdldFxuICAgICAgICAgICAgaWYgKG5vZGUuY2xhaW1fb3JkZXIgIT09IHVuZGVmaW5lZCB8fCBub2RlLnBhcmVudE5vZGUgIT09IHRhcmdldCkge1xuICAgICAgICAgICAgICAgIHRhcmdldC5pbnNlcnRCZWZvcmUobm9kZSwgdGFyZ2V0LmFjdHVhbF9lbmRfY2hpbGQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGFyZ2V0LmFjdHVhbF9lbmRfY2hpbGQgPSBub2RlLm5leHRTaWJsaW5nO1xuICAgICAgICB9XG4gICAgfVxuICAgIGVsc2UgaWYgKG5vZGUucGFyZW50Tm9kZSAhPT0gdGFyZ2V0IHx8IG5vZGUubmV4dFNpYmxpbmcgIT09IG51bGwpIHtcbiAgICAgICAgdGFyZ2V0LmFwcGVuZENoaWxkKG5vZGUpO1xuICAgIH1cbn1cbmZ1bmN0aW9uIGluc2VydCh0YXJnZXQsIG5vZGUsIGFuY2hvcikge1xuICAgIHRhcmdldC5pbnNlcnRCZWZvcmUobm9kZSwgYW5jaG9yIHx8IG51bGwpO1xufVxuZnVuY3Rpb24gaW5zZXJ0X2h5ZHJhdGlvbih0YXJnZXQsIG5vZGUsIGFuY2hvcikge1xuICAgIGlmIChpc19oeWRyYXRpbmcgJiYgIWFuY2hvcikge1xuICAgICAgICBhcHBlbmRfaHlkcmF0aW9uKHRhcmdldCwgbm9kZSk7XG4gICAgfVxuICAgIGVsc2UgaWYgKG5vZGUucGFyZW50Tm9kZSAhPT0gdGFyZ2V0IHx8IG5vZGUubmV4dFNpYmxpbmcgIT0gYW5jaG9yKSB7XG4gICAgICAgIHRhcmdldC5pbnNlcnRCZWZvcmUobm9kZSwgYW5jaG9yIHx8IG51bGwpO1xuICAgIH1cbn1cbmZ1bmN0aW9uIGRldGFjaChub2RlKSB7XG4gICAgbm9kZS5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKG5vZGUpO1xufVxuZnVuY3Rpb24gZGVzdHJveV9lYWNoKGl0ZXJhdGlvbnMsIGRldGFjaGluZykge1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgaXRlcmF0aW9ucy5sZW5ndGg7IGkgKz0gMSkge1xuICAgICAgICBpZiAoaXRlcmF0aW9uc1tpXSlcbiAgICAgICAgICAgIGl0ZXJhdGlvbnNbaV0uZChkZXRhY2hpbmcpO1xuICAgIH1cbn1cbmZ1bmN0aW9uIGVsZW1lbnQobmFtZSkge1xuICAgIHJldHVybiBkb2N1bWVudC5jcmVhdGVFbGVtZW50KG5hbWUpO1xufVxuZnVuY3Rpb24gZWxlbWVudF9pcyhuYW1lLCBpcykge1xuICAgIHJldHVybiBkb2N1bWVudC5jcmVhdGVFbGVtZW50KG5hbWUsIHsgaXMgfSk7XG59XG5mdW5jdGlvbiBvYmplY3Rfd2l0aG91dF9wcm9wZXJ0aWVzKG9iaiwgZXhjbHVkZSkge1xuICAgIGNvbnN0IHRhcmdldCA9IHt9O1xuICAgIGZvciAoY29uc3QgayBpbiBvYmopIHtcbiAgICAgICAgaWYgKGhhc19wcm9wKG9iaiwgaylcbiAgICAgICAgICAgIC8vIEB0cy1pZ25vcmVcbiAgICAgICAgICAgICYmIGV4Y2x1ZGUuaW5kZXhPZihrKSA9PT0gLTEpIHtcbiAgICAgICAgICAgIC8vIEB0cy1pZ25vcmVcbiAgICAgICAgICAgIHRhcmdldFtrXSA9IG9ialtrXTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdGFyZ2V0O1xufVxuZnVuY3Rpb24gc3ZnX2VsZW1lbnQobmFtZSkge1xuICAgIHJldHVybiBkb2N1bWVudC5jcmVhdGVFbGVtZW50TlMoJ2h0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnJywgbmFtZSk7XG59XG5mdW5jdGlvbiB0ZXh0KGRhdGEpIHtcbiAgICByZXR1cm4gZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoZGF0YSk7XG59XG5mdW5jdGlvbiBzcGFjZSgpIHtcbiAgICByZXR1cm4gdGV4dCgnICcpO1xufVxuZnVuY3Rpb24gZW1wdHkoKSB7XG4gICAgcmV0dXJuIHRleHQoJycpO1xufVxuZnVuY3Rpb24gbGlzdGVuKG5vZGUsIGV2ZW50LCBoYW5kbGVyLCBvcHRpb25zKSB7XG4gICAgbm9kZS5hZGRFdmVudExpc3RlbmVyKGV2ZW50LCBoYW5kbGVyLCBvcHRpb25zKTtcbiAgICByZXR1cm4gKCkgPT4gbm9kZS5yZW1vdmVFdmVudExpc3RlbmVyKGV2ZW50LCBoYW5kbGVyLCBvcHRpb25zKTtcbn1cbmZ1bmN0aW9uIHByZXZlbnRfZGVmYXVsdChmbikge1xuICAgIHJldHVybiBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgLy8gQHRzLWlnbm9yZVxuICAgICAgICByZXR1cm4gZm4uY2FsbCh0aGlzLCBldmVudCk7XG4gICAgfTtcbn1cbmZ1bmN0aW9uIHN0b3BfcHJvcGFnYXRpb24oZm4pIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICAvLyBAdHMtaWdub3JlXG4gICAgICAgIHJldHVybiBmbi5jYWxsKHRoaXMsIGV2ZW50KTtcbiAgICB9O1xufVxuZnVuY3Rpb24gc2VsZihmbikge1xuICAgIHJldHVybiBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgLy8gQHRzLWlnbm9yZVxuICAgICAgICBpZiAoZXZlbnQudGFyZ2V0ID09PSB0aGlzKVxuICAgICAgICAgICAgZm4uY2FsbCh0aGlzLCBldmVudCk7XG4gICAgfTtcbn1cbmZ1bmN0aW9uIHRydXN0ZWQoZm4pIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgIC8vIEB0cy1pZ25vcmVcbiAgICAgICAgaWYgKGV2ZW50LmlzVHJ1c3RlZClcbiAgICAgICAgICAgIGZuLmNhbGwodGhpcywgZXZlbnQpO1xuICAgIH07XG59XG5mdW5jdGlvbiBhdHRyKG5vZGUsIGF0dHJpYnV0ZSwgdmFsdWUpIHtcbiAgICBpZiAodmFsdWUgPT0gbnVsbClcbiAgICAgICAgbm9kZS5yZW1vdmVBdHRyaWJ1dGUoYXR0cmlidXRlKTtcbiAgICBlbHNlIGlmIChub2RlLmdldEF0dHJpYnV0ZShhdHRyaWJ1dGUpICE9PSB2YWx1ZSlcbiAgICAgICAgbm9kZS5zZXRBdHRyaWJ1dGUoYXR0cmlidXRlLCB2YWx1ZSk7XG59XG5mdW5jdGlvbiBzZXRfYXR0cmlidXRlcyhub2RlLCBhdHRyaWJ1dGVzKSB7XG4gICAgLy8gQHRzLWlnbm9yZVxuICAgIGNvbnN0IGRlc2NyaXB0b3JzID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMobm9kZS5fX3Byb3RvX18pO1xuICAgIGZvciAoY29uc3Qga2V5IGluIGF0dHJpYnV0ZXMpIHtcbiAgICAgICAgaWYgKGF0dHJpYnV0ZXNba2V5XSA9PSBudWxsKSB7XG4gICAgICAgICAgICBub2RlLnJlbW92ZUF0dHJpYnV0ZShrZXkpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGtleSA9PT0gJ3N0eWxlJykge1xuICAgICAgICAgICAgbm9kZS5zdHlsZS5jc3NUZXh0ID0gYXR0cmlidXRlc1trZXldO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGtleSA9PT0gJ19fdmFsdWUnKSB7XG4gICAgICAgICAgICBub2RlLnZhbHVlID0gbm9kZVtrZXldID0gYXR0cmlidXRlc1trZXldO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGRlc2NyaXB0b3JzW2tleV0gJiYgZGVzY3JpcHRvcnNba2V5XS5zZXQpIHtcbiAgICAgICAgICAgIG5vZGVba2V5XSA9IGF0dHJpYnV0ZXNba2V5XTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGF0dHIobm9kZSwga2V5LCBhdHRyaWJ1dGVzW2tleV0pO1xuICAgICAgICB9XG4gICAgfVxufVxuZnVuY3Rpb24gc2V0X3N2Z19hdHRyaWJ1dGVzKG5vZGUsIGF0dHJpYnV0ZXMpIHtcbiAgICBmb3IgKGNvbnN0IGtleSBpbiBhdHRyaWJ1dGVzKSB7XG4gICAgICAgIGF0dHIobm9kZSwga2V5LCBhdHRyaWJ1dGVzW2tleV0pO1xuICAgIH1cbn1cbmZ1bmN0aW9uIHNldF9jdXN0b21fZWxlbWVudF9kYXRhKG5vZGUsIHByb3AsIHZhbHVlKSB7XG4gICAgaWYgKHByb3AgaW4gbm9kZSkge1xuICAgICAgICBub2RlW3Byb3BdID0gdHlwZW9mIG5vZGVbcHJvcF0gPT09ICdib29sZWFuJyAmJiB2YWx1ZSA9PT0gJycgPyB0cnVlIDogdmFsdWU7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBhdHRyKG5vZGUsIHByb3AsIHZhbHVlKTtcbiAgICB9XG59XG5mdW5jdGlvbiB4bGlua19hdHRyKG5vZGUsIGF0dHJpYnV0ZSwgdmFsdWUpIHtcbiAgICBub2RlLnNldEF0dHJpYnV0ZU5TKCdodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rJywgYXR0cmlidXRlLCB2YWx1ZSk7XG59XG5mdW5jdGlvbiBnZXRfYmluZGluZ19ncm91cF92YWx1ZShncm91cCwgX192YWx1ZSwgY2hlY2tlZCkge1xuICAgIGNvbnN0IHZhbHVlID0gbmV3IFNldCgpO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZ3JvdXAubGVuZ3RoOyBpICs9IDEpIHtcbiAgICAgICAgaWYgKGdyb3VwW2ldLmNoZWNrZWQpXG4gICAgICAgICAgICB2YWx1ZS5hZGQoZ3JvdXBbaV0uX192YWx1ZSk7XG4gICAgfVxuICAgIGlmICghY2hlY2tlZCkge1xuICAgICAgICB2YWx1ZS5kZWxldGUoX192YWx1ZSk7XG4gICAgfVxuICAgIHJldHVybiBBcnJheS5mcm9tKHZhbHVlKTtcbn1cbmZ1bmN0aW9uIHRvX251bWJlcih2YWx1ZSkge1xuICAgIHJldHVybiB2YWx1ZSA9PT0gJycgPyBudWxsIDogK3ZhbHVlO1xufVxuZnVuY3Rpb24gdGltZV9yYW5nZXNfdG9fYXJyYXkocmFuZ2VzKSB7XG4gICAgY29uc3QgYXJyYXkgPSBbXTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHJhbmdlcy5sZW5ndGg7IGkgKz0gMSkge1xuICAgICAgICBhcnJheS5wdXNoKHsgc3RhcnQ6IHJhbmdlcy5zdGFydChpKSwgZW5kOiByYW5nZXMuZW5kKGkpIH0pO1xuICAgIH1cbiAgICByZXR1cm4gYXJyYXk7XG59XG5mdW5jdGlvbiBjaGlsZHJlbihlbGVtZW50KSB7XG4gICAgcmV0dXJuIEFycmF5LmZyb20oZWxlbWVudC5jaGlsZE5vZGVzKTtcbn1cbmZ1bmN0aW9uIGluaXRfY2xhaW1faW5mbyhub2Rlcykge1xuICAgIGlmIChub2Rlcy5jbGFpbV9pbmZvID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgbm9kZXMuY2xhaW1faW5mbyA9IHsgbGFzdF9pbmRleDogMCwgdG90YWxfY2xhaW1lZDogMCB9O1xuICAgIH1cbn1cbmZ1bmN0aW9uIGNsYWltX25vZGUobm9kZXMsIHByZWRpY2F0ZSwgcHJvY2Vzc05vZGUsIGNyZWF0ZU5vZGUsIGRvbnRVcGRhdGVMYXN0SW5kZXggPSBmYWxzZSkge1xuICAgIC8vIFRyeSB0byBmaW5kIG5vZGVzIGluIGFuIG9yZGVyIHN1Y2ggdGhhdCB3ZSBsZW5ndGhlbiB0aGUgbG9uZ2VzdCBpbmNyZWFzaW5nIHN1YnNlcXVlbmNlXG4gICAgaW5pdF9jbGFpbV9pbmZvKG5vZGVzKTtcbiAgICBjb25zdCByZXN1bHROb2RlID0gKCgpID0+IHtcbiAgICAgICAgLy8gV2UgZmlyc3QgdHJ5IHRvIGZpbmQgYW4gZWxlbWVudCBhZnRlciB0aGUgcHJldmlvdXMgb25lXG4gICAgICAgIGZvciAobGV0IGkgPSBub2Rlcy5jbGFpbV9pbmZvLmxhc3RfaW5kZXg7IGkgPCBub2Rlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgY29uc3Qgbm9kZSA9IG5vZGVzW2ldO1xuICAgICAgICAgICAgaWYgKHByZWRpY2F0ZShub2RlKSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlcGxhY2VtZW50ID0gcHJvY2Vzc05vZGUobm9kZSk7XG4gICAgICAgICAgICAgICAgaWYgKHJlcGxhY2VtZW50ID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgbm9kZXMuc3BsaWNlKGksIDEpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgbm9kZXNbaV0gPSByZXBsYWNlbWVudDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKCFkb250VXBkYXRlTGFzdEluZGV4KSB7XG4gICAgICAgICAgICAgICAgICAgIG5vZGVzLmNsYWltX2luZm8ubGFzdF9pbmRleCA9IGk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiBub2RlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIC8vIE90aGVyd2lzZSwgd2UgdHJ5IHRvIGZpbmQgb25lIGJlZm9yZVxuICAgICAgICAvLyBXZSBpdGVyYXRlIGluIHJldmVyc2Ugc28gdGhhdCB3ZSBkb24ndCBnbyB0b28gZmFyIGJhY2tcbiAgICAgICAgZm9yIChsZXQgaSA9IG5vZGVzLmNsYWltX2luZm8ubGFzdF9pbmRleCAtIDE7IGkgPj0gMDsgaS0tKSB7XG4gICAgICAgICAgICBjb25zdCBub2RlID0gbm9kZXNbaV07XG4gICAgICAgICAgICBpZiAocHJlZGljYXRlKG5vZGUpKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgcmVwbGFjZW1lbnQgPSBwcm9jZXNzTm9kZShub2RlKTtcbiAgICAgICAgICAgICAgICBpZiAocmVwbGFjZW1lbnQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICBub2Rlcy5zcGxpY2UoaSwgMSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBub2Rlc1tpXSA9IHJlcGxhY2VtZW50O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoIWRvbnRVcGRhdGVMYXN0SW5kZXgpIHtcbiAgICAgICAgICAgICAgICAgICAgbm9kZXMuY2xhaW1faW5mby5sYXN0X2luZGV4ID0gaTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAocmVwbGFjZW1lbnQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICAvLyBTaW5jZSB3ZSBzcGxpY2VkIGJlZm9yZSB0aGUgbGFzdF9pbmRleCwgd2UgZGVjcmVhc2UgaXRcbiAgICAgICAgICAgICAgICAgICAgbm9kZXMuY2xhaW1faW5mby5sYXN0X2luZGV4LS07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiBub2RlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIC8vIElmIHdlIGNhbid0IGZpbmQgYW55IG1hdGNoaW5nIG5vZGUsIHdlIGNyZWF0ZSBhIG5ldyBvbmVcbiAgICAgICAgcmV0dXJuIGNyZWF0ZU5vZGUoKTtcbiAgICB9KSgpO1xuICAgIHJlc3VsdE5vZGUuY2xhaW1fb3JkZXIgPSBub2Rlcy5jbGFpbV9pbmZvLnRvdGFsX2NsYWltZWQ7XG4gICAgbm9kZXMuY2xhaW1faW5mby50b3RhbF9jbGFpbWVkICs9IDE7XG4gICAgcmV0dXJuIHJlc3VsdE5vZGU7XG59XG5mdW5jdGlvbiBjbGFpbV9lbGVtZW50X2Jhc2Uobm9kZXMsIG5hbWUsIGF0dHJpYnV0ZXMsIGNyZWF0ZV9lbGVtZW50KSB7XG4gICAgcmV0dXJuIGNsYWltX25vZGUobm9kZXMsIChub2RlKSA9PiBub2RlLm5vZGVOYW1lID09PSBuYW1lLCAobm9kZSkgPT4ge1xuICAgICAgICBjb25zdCByZW1vdmUgPSBbXTtcbiAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCBub2RlLmF0dHJpYnV0ZXMubGVuZ3RoOyBqKyspIHtcbiAgICAgICAgICAgIGNvbnN0IGF0dHJpYnV0ZSA9IG5vZGUuYXR0cmlidXRlc1tqXTtcbiAgICAgICAgICAgIGlmICghYXR0cmlidXRlc1thdHRyaWJ1dGUubmFtZV0pIHtcbiAgICAgICAgICAgICAgICByZW1vdmUucHVzaChhdHRyaWJ1dGUubmFtZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmVtb3ZlLmZvckVhY2godiA9PiBub2RlLnJlbW92ZUF0dHJpYnV0ZSh2KSk7XG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfSwgKCkgPT4gY3JlYXRlX2VsZW1lbnQobmFtZSkpO1xufVxuZnVuY3Rpb24gY2xhaW1fZWxlbWVudChub2RlcywgbmFtZSwgYXR0cmlidXRlcykge1xuICAgIHJldHVybiBjbGFpbV9lbGVtZW50X2Jhc2Uobm9kZXMsIG5hbWUsIGF0dHJpYnV0ZXMsIGVsZW1lbnQpO1xufVxuZnVuY3Rpb24gY2xhaW1fc3ZnX2VsZW1lbnQobm9kZXMsIG5hbWUsIGF0dHJpYnV0ZXMpIHtcbiAgICByZXR1cm4gY2xhaW1fZWxlbWVudF9iYXNlKG5vZGVzLCBuYW1lLCBhdHRyaWJ1dGVzLCBzdmdfZWxlbWVudCk7XG59XG5mdW5jdGlvbiBjbGFpbV90ZXh0KG5vZGVzLCBkYXRhKSB7XG4gICAgcmV0dXJuIGNsYWltX25vZGUobm9kZXMsIChub2RlKSA9PiBub2RlLm5vZGVUeXBlID09PSAzLCAobm9kZSkgPT4ge1xuICAgICAgICBjb25zdCBkYXRhU3RyID0gJycgKyBkYXRhO1xuICAgICAgICBpZiAobm9kZS5kYXRhLnN0YXJ0c1dpdGgoZGF0YVN0cikpIHtcbiAgICAgICAgICAgIGlmIChub2RlLmRhdGEubGVuZ3RoICE9PSBkYXRhU3RyLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBub2RlLnNwbGl0VGV4dChkYXRhU3RyLmxlbmd0aCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBub2RlLmRhdGEgPSBkYXRhU3RyO1xuICAgICAgICB9XG4gICAgfSwgKCkgPT4gdGV4dChkYXRhKSwgdHJ1ZSAvLyBUZXh0IG5vZGVzIHNob3VsZCBub3QgdXBkYXRlIGxhc3QgaW5kZXggc2luY2UgaXQgaXMgbGlrZWx5IG5vdCB3b3J0aCBpdCB0byBlbGltaW5hdGUgYW4gaW5jcmVhc2luZyBzdWJzZXF1ZW5jZSBvZiBhY3R1YWwgZWxlbWVudHNcbiAgICApO1xufVxuZnVuY3Rpb24gY2xhaW1fc3BhY2Uobm9kZXMpIHtcbiAgICByZXR1cm4gY2xhaW1fdGV4dChub2RlcywgJyAnKTtcbn1cbmZ1bmN0aW9uIGZpbmRfY29tbWVudChub2RlcywgdGV4dCwgc3RhcnQpIHtcbiAgICBmb3IgKGxldCBpID0gc3RhcnQ7IGkgPCBub2Rlcy5sZW5ndGg7IGkgKz0gMSkge1xuICAgICAgICBjb25zdCBub2RlID0gbm9kZXNbaV07XG4gICAgICAgIGlmIChub2RlLm5vZGVUeXBlID09PSA4IC8qIGNvbW1lbnQgbm9kZSAqLyAmJiBub2RlLnRleHRDb250ZW50LnRyaW0oKSA9PT0gdGV4dCkge1xuICAgICAgICAgICAgcmV0dXJuIGk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG5vZGVzLmxlbmd0aDtcbn1cbmZ1bmN0aW9uIGNsYWltX2h0bWxfdGFnKG5vZGVzKSB7XG4gICAgLy8gZmluZCBodG1sIG9wZW5pbmcgdGFnXG4gICAgY29uc3Qgc3RhcnRfaW5kZXggPSBmaW5kX2NvbW1lbnQobm9kZXMsICdIVE1MX1RBR19TVEFSVCcsIDApO1xuICAgIGNvbnN0IGVuZF9pbmRleCA9IGZpbmRfY29tbWVudChub2RlcywgJ0hUTUxfVEFHX0VORCcsIHN0YXJ0X2luZGV4KTtcbiAgICBpZiAoc3RhcnRfaW5kZXggPT09IGVuZF9pbmRleCkge1xuICAgICAgICByZXR1cm4gbmV3IEh0bWxUYWdIeWRyYXRpb24oKTtcbiAgICB9XG4gICAgaW5pdF9jbGFpbV9pbmZvKG5vZGVzKTtcbiAgICBjb25zdCBodG1sX3RhZ19ub2RlcyA9IG5vZGVzLnNwbGljZShzdGFydF9pbmRleCwgZW5kX2luZGV4IC0gc3RhcnRfaW5kZXggKyAxKTtcbiAgICBkZXRhY2goaHRtbF90YWdfbm9kZXNbMF0pO1xuICAgIGRldGFjaChodG1sX3RhZ19ub2Rlc1todG1sX3RhZ19ub2Rlcy5sZW5ndGggLSAxXSk7XG4gICAgY29uc3QgY2xhaW1lZF9ub2RlcyA9IGh0bWxfdGFnX25vZGVzLnNsaWNlKDEsIGh0bWxfdGFnX25vZGVzLmxlbmd0aCAtIDEpO1xuICAgIGZvciAoY29uc3QgbiBvZiBjbGFpbWVkX25vZGVzKSB7XG4gICAgICAgIG4uY2xhaW1fb3JkZXIgPSBub2Rlcy5jbGFpbV9pbmZvLnRvdGFsX2NsYWltZWQ7XG4gICAgICAgIG5vZGVzLmNsYWltX2luZm8udG90YWxfY2xhaW1lZCArPSAxO1xuICAgIH1cbiAgICByZXR1cm4gbmV3IEh0bWxUYWdIeWRyYXRpb24oY2xhaW1lZF9ub2Rlcyk7XG59XG5mdW5jdGlvbiBzZXRfZGF0YSh0ZXh0LCBkYXRhKSB7XG4gICAgZGF0YSA9ICcnICsgZGF0YTtcbiAgICBpZiAodGV4dC53aG9sZVRleHQgIT09IGRhdGEpXG4gICAgICAgIHRleHQuZGF0YSA9IGRhdGE7XG59XG5mdW5jdGlvbiBzZXRfaW5wdXRfdmFsdWUoaW5wdXQsIHZhbHVlKSB7XG4gICAgaW5wdXQudmFsdWUgPSB2YWx1ZSA9PSBudWxsID8gJycgOiB2YWx1ZTtcbn1cbmZ1bmN0aW9uIHNldF9pbnB1dF90eXBlKGlucHV0LCB0eXBlKSB7XG4gICAgdHJ5IHtcbiAgICAgICAgaW5wdXQudHlwZSA9IHR5cGU7XG4gICAgfVxuICAgIGNhdGNoIChlKSB7XG4gICAgICAgIC8vIGRvIG5vdGhpbmdcbiAgICB9XG59XG5mdW5jdGlvbiBzZXRfc3R5bGUobm9kZSwga2V5LCB2YWx1ZSwgaW1wb3J0YW50KSB7XG4gICAgaWYgKHZhbHVlID09PSBudWxsKSB7XG4gICAgICAgIG5vZGUuc3R5bGUucmVtb3ZlUHJvcGVydHkoa2V5KTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIG5vZGUuc3R5bGUuc2V0UHJvcGVydHkoa2V5LCB2YWx1ZSwgaW1wb3J0YW50ID8gJ2ltcG9ydGFudCcgOiAnJyk7XG4gICAgfVxufVxuZnVuY3Rpb24gc2VsZWN0X29wdGlvbihzZWxlY3QsIHZhbHVlKSB7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzZWxlY3Qub3B0aW9ucy5sZW5ndGg7IGkgKz0gMSkge1xuICAgICAgICBjb25zdCBvcHRpb24gPSBzZWxlY3Qub3B0aW9uc1tpXTtcbiAgICAgICAgaWYgKG9wdGlvbi5fX3ZhbHVlID09PSB2YWx1ZSkge1xuICAgICAgICAgICAgb3B0aW9uLnNlbGVjdGVkID0gdHJ1ZTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgIH1cbiAgICBzZWxlY3Quc2VsZWN0ZWRJbmRleCA9IC0xOyAvLyBubyBvcHRpb24gc2hvdWxkIGJlIHNlbGVjdGVkXG59XG5mdW5jdGlvbiBzZWxlY3Rfb3B0aW9ucyhzZWxlY3QsIHZhbHVlKSB7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzZWxlY3Qub3B0aW9ucy5sZW5ndGg7IGkgKz0gMSkge1xuICAgICAgICBjb25zdCBvcHRpb24gPSBzZWxlY3Qub3B0aW9uc1tpXTtcbiAgICAgICAgb3B0aW9uLnNlbGVjdGVkID0gfnZhbHVlLmluZGV4T2Yob3B0aW9uLl9fdmFsdWUpO1xuICAgIH1cbn1cbmZ1bmN0aW9uIHNlbGVjdF92YWx1ZShzZWxlY3QpIHtcbiAgICBjb25zdCBzZWxlY3RlZF9vcHRpb24gPSBzZWxlY3QucXVlcnlTZWxlY3RvcignOmNoZWNrZWQnKSB8fCBzZWxlY3Qub3B0aW9uc1swXTtcbiAgICByZXR1cm4gc2VsZWN0ZWRfb3B0aW9uICYmIHNlbGVjdGVkX29wdGlvbi5fX3ZhbHVlO1xufVxuZnVuY3Rpb24gc2VsZWN0X211bHRpcGxlX3ZhbHVlKHNlbGVjdCkge1xuICAgIHJldHVybiBbXS5tYXAuY2FsbChzZWxlY3QucXVlcnlTZWxlY3RvckFsbCgnOmNoZWNrZWQnKSwgb3B0aW9uID0+IG9wdGlvbi5fX3ZhbHVlKTtcbn1cbi8vIHVuZm9ydHVuYXRlbHkgdGhpcyBjYW4ndCBiZSBhIGNvbnN0YW50IGFzIHRoYXQgd291bGRuJ3QgYmUgdHJlZS1zaGFrZWFibGVcbi8vIHNvIHdlIGNhY2hlIHRoZSByZXN1bHQgaW5zdGVhZFxubGV0IGNyb3Nzb3JpZ2luO1xuZnVuY3Rpb24gaXNfY3Jvc3NvcmlnaW4oKSB7XG4gICAgaWYgKGNyb3Nzb3JpZ2luID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgY3Jvc3NvcmlnaW4gPSBmYWxzZTtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGlmICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyAmJiB3aW5kb3cucGFyZW50KSB7XG4gICAgICAgICAgICAgICAgdm9pZCB3aW5kb3cucGFyZW50LmRvY3VtZW50O1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgY3Jvc3NvcmlnaW4gPSB0cnVlO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBjcm9zc29yaWdpbjtcbn1cbmZ1bmN0aW9uIGFkZF9yZXNpemVfbGlzdGVuZXIobm9kZSwgZm4pIHtcbiAgICBjb25zdCBjb21wdXRlZF9zdHlsZSA9IGdldENvbXB1dGVkU3R5bGUobm9kZSk7XG4gICAgaWYgKGNvbXB1dGVkX3N0eWxlLnBvc2l0aW9uID09PSAnc3RhdGljJykge1xuICAgICAgICBub2RlLnN0eWxlLnBvc2l0aW9uID0gJ3JlbGF0aXZlJztcbiAgICB9XG4gICAgY29uc3QgaWZyYW1lID0gZWxlbWVudCgnaWZyYW1lJyk7XG4gICAgaWZyYW1lLnNldEF0dHJpYnV0ZSgnc3R5bGUnLCAnZGlzcGxheTogYmxvY2s7IHBvc2l0aW9uOiBhYnNvbHV0ZTsgdG9wOiAwOyBsZWZ0OiAwOyB3aWR0aDogMTAwJTsgaGVpZ2h0OiAxMDAlOyAnICtcbiAgICAgICAgJ292ZXJmbG93OiBoaWRkZW47IGJvcmRlcjogMDsgb3BhY2l0eTogMDsgcG9pbnRlci1ldmVudHM6IG5vbmU7IHotaW5kZXg6IC0xOycpO1xuICAgIGlmcmFtZS5zZXRBdHRyaWJ1dGUoJ2FyaWEtaGlkZGVuJywgJ3RydWUnKTtcbiAgICBpZnJhbWUudGFiSW5kZXggPSAtMTtcbiAgICBjb25zdCBjcm9zc29yaWdpbiA9IGlzX2Nyb3Nzb3JpZ2luKCk7XG4gICAgbGV0IHVuc3Vic2NyaWJlO1xuICAgIGlmIChjcm9zc29yaWdpbikge1xuICAgICAgICBpZnJhbWUuc3JjID0gXCJkYXRhOnRleHQvaHRtbCw8c2NyaXB0Pm9ucmVzaXplPWZ1bmN0aW9uKCl7cGFyZW50LnBvc3RNZXNzYWdlKDAsJyonKX08L3NjcmlwdD5cIjtcbiAgICAgICAgdW5zdWJzY3JpYmUgPSBsaXN0ZW4od2luZG93LCAnbWVzc2FnZScsIChldmVudCkgPT4ge1xuICAgICAgICAgICAgaWYgKGV2ZW50LnNvdXJjZSA9PT0gaWZyYW1lLmNvbnRlbnRXaW5kb3cpXG4gICAgICAgICAgICAgICAgZm4oKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBpZnJhbWUuc3JjID0gJ2Fib3V0OmJsYW5rJztcbiAgICAgICAgaWZyYW1lLm9ubG9hZCA9ICgpID0+IHtcbiAgICAgICAgICAgIHVuc3Vic2NyaWJlID0gbGlzdGVuKGlmcmFtZS5jb250ZW50V2luZG93LCAncmVzaXplJywgZm4pO1xuICAgICAgICB9O1xuICAgIH1cbiAgICBhcHBlbmQobm9kZSwgaWZyYW1lKTtcbiAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgICBpZiAoY3Jvc3NvcmlnaW4pIHtcbiAgICAgICAgICAgIHVuc3Vic2NyaWJlKCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAodW5zdWJzY3JpYmUgJiYgaWZyYW1lLmNvbnRlbnRXaW5kb3cpIHtcbiAgICAgICAgICAgIHVuc3Vic2NyaWJlKCk7XG4gICAgICAgIH1cbiAgICAgICAgZGV0YWNoKGlmcmFtZSk7XG4gICAgfTtcbn1cbmZ1bmN0aW9uIHRvZ2dsZV9jbGFzcyhlbGVtZW50LCBuYW1lLCB0b2dnbGUpIHtcbiAgICBlbGVtZW50LmNsYXNzTGlzdFt0b2dnbGUgPyAnYWRkJyA6ICdyZW1vdmUnXShuYW1lKTtcbn1cbmZ1bmN0aW9uIGN1c3RvbV9ldmVudCh0eXBlLCBkZXRhaWwsIGJ1YmJsZXMgPSBmYWxzZSkge1xuICAgIGNvbnN0IGUgPSBkb2N1bWVudC5jcmVhdGVFdmVudCgnQ3VzdG9tRXZlbnQnKTtcbiAgICBlLmluaXRDdXN0b21FdmVudCh0eXBlLCBidWJibGVzLCBmYWxzZSwgZGV0YWlsKTtcbiAgICByZXR1cm4gZTtcbn1cbmZ1bmN0aW9uIHF1ZXJ5X3NlbGVjdG9yX2FsbChzZWxlY3RvciwgcGFyZW50ID0gZG9jdW1lbnQuYm9keSkge1xuICAgIHJldHVybiBBcnJheS5mcm9tKHBhcmVudC5xdWVyeVNlbGVjdG9yQWxsKHNlbGVjdG9yKSk7XG59XG5jbGFzcyBIdG1sVGFnIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgdGhpcy5lID0gdGhpcy5uID0gbnVsbDtcbiAgICB9XG4gICAgYyhodG1sKSB7XG4gICAgICAgIHRoaXMuaChodG1sKTtcbiAgICB9XG4gICAgbShodG1sLCB0YXJnZXQsIGFuY2hvciA9IG51bGwpIHtcbiAgICAgICAgaWYgKCF0aGlzLmUpIHtcbiAgICAgICAgICAgIHRoaXMuZSA9IGVsZW1lbnQodGFyZ2V0Lm5vZGVOYW1lKTtcbiAgICAgICAgICAgIHRoaXMudCA9IHRhcmdldDtcbiAgICAgICAgICAgIHRoaXMuYyhodG1sKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmkoYW5jaG9yKTtcbiAgICB9XG4gICAgaChodG1sKSB7XG4gICAgICAgIHRoaXMuZS5pbm5lckhUTUwgPSBodG1sO1xuICAgICAgICB0aGlzLm4gPSBBcnJheS5mcm9tKHRoaXMuZS5jaGlsZE5vZGVzKTtcbiAgICB9XG4gICAgaShhbmNob3IpIHtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLm4ubGVuZ3RoOyBpICs9IDEpIHtcbiAgICAgICAgICAgIGluc2VydCh0aGlzLnQsIHRoaXMubltpXSwgYW5jaG9yKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBwKGh0bWwpIHtcbiAgICAgICAgdGhpcy5kKCk7XG4gICAgICAgIHRoaXMuaChodG1sKTtcbiAgICAgICAgdGhpcy5pKHRoaXMuYSk7XG4gICAgfVxuICAgIGQoKSB7XG4gICAgICAgIHRoaXMubi5mb3JFYWNoKGRldGFjaCk7XG4gICAgfVxufVxuY2xhc3MgSHRtbFRhZ0h5ZHJhdGlvbiBleHRlbmRzIEh0bWxUYWcge1xuICAgIGNvbnN0cnVjdG9yKGNsYWltZWRfbm9kZXMpIHtcbiAgICAgICAgc3VwZXIoKTtcbiAgICAgICAgdGhpcy5lID0gdGhpcy5uID0gbnVsbDtcbiAgICAgICAgdGhpcy5sID0gY2xhaW1lZF9ub2RlcztcbiAgICB9XG4gICAgYyhodG1sKSB7XG4gICAgICAgIGlmICh0aGlzLmwpIHtcbiAgICAgICAgICAgIHRoaXMubiA9IHRoaXMubDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHN1cGVyLmMoaHRtbCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgaShhbmNob3IpIHtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLm4ubGVuZ3RoOyBpICs9IDEpIHtcbiAgICAgICAgICAgIGluc2VydF9oeWRyYXRpb24odGhpcy50LCB0aGlzLm5baV0sIGFuY2hvcik7XG4gICAgICAgIH1cbiAgICB9XG59XG5mdW5jdGlvbiBhdHRyaWJ1dGVfdG9fb2JqZWN0KGF0dHJpYnV0ZXMpIHtcbiAgICBjb25zdCByZXN1bHQgPSB7fTtcbiAgICBmb3IgKGNvbnN0IGF0dHJpYnV0ZSBvZiBhdHRyaWJ1dGVzKSB7XG4gICAgICAgIHJlc3VsdFthdHRyaWJ1dGUubmFtZV0gPSBhdHRyaWJ1dGUudmFsdWU7XG4gICAgfVxuICAgIHJldHVybiByZXN1bHQ7XG59XG5mdW5jdGlvbiBnZXRfY3VzdG9tX2VsZW1lbnRzX3Nsb3RzKGVsZW1lbnQpIHtcbiAgICBjb25zdCByZXN1bHQgPSB7fTtcbiAgICBlbGVtZW50LmNoaWxkTm9kZXMuZm9yRWFjaCgobm9kZSkgPT4ge1xuICAgICAgICByZXN1bHRbbm9kZS5zbG90IHx8ICdkZWZhdWx0J10gPSB0cnVlO1xuICAgIH0pO1xuICAgIHJldHVybiByZXN1bHQ7XG59XG5cbi8vIHdlIG5lZWQgdG8gc3RvcmUgdGhlIGluZm9ybWF0aW9uIGZvciBtdWx0aXBsZSBkb2N1bWVudHMgYmVjYXVzZSBhIFN2ZWx0ZSBhcHBsaWNhdGlvbiBjb3VsZCBhbHNvIGNvbnRhaW4gaWZyYW1lc1xuLy8gaHR0cHM6Ly9naXRodWIuY29tL3N2ZWx0ZWpzL3N2ZWx0ZS9pc3N1ZXMvMzYyNFxuY29uc3QgbWFuYWdlZF9zdHlsZXMgPSBuZXcgTWFwKCk7XG5sZXQgYWN0aXZlID0gMDtcbi8vIGh0dHBzOi8vZ2l0aHViLmNvbS9kYXJrc2t5YXBwL3N0cmluZy1oYXNoL2Jsb2IvbWFzdGVyL2luZGV4LmpzXG5mdW5jdGlvbiBoYXNoKHN0cikge1xuICAgIGxldCBoYXNoID0gNTM4MTtcbiAgICBsZXQgaSA9IHN0ci5sZW5ndGg7XG4gICAgd2hpbGUgKGktLSlcbiAgICAgICAgaGFzaCA9ICgoaGFzaCA8PCA1KSAtIGhhc2gpIF4gc3RyLmNoYXJDb2RlQXQoaSk7XG4gICAgcmV0dXJuIGhhc2ggPj4+IDA7XG59XG5mdW5jdGlvbiBjcmVhdGVfc3R5bGVfaW5mb3JtYXRpb24oZG9jLCBub2RlKSB7XG4gICAgY29uc3QgaW5mbyA9IHsgc3R5bGVzaGVldDogYXBwZW5kX2VtcHR5X3N0eWxlc2hlZXQobm9kZSksIHJ1bGVzOiB7fSB9O1xuICAgIG1hbmFnZWRfc3R5bGVzLnNldChkb2MsIGluZm8pO1xuICAgIHJldHVybiBpbmZvO1xufVxuZnVuY3Rpb24gY3JlYXRlX3J1bGUobm9kZSwgYSwgYiwgZHVyYXRpb24sIGRlbGF5LCBlYXNlLCBmbiwgdWlkID0gMCkge1xuICAgIGNvbnN0IHN0ZXAgPSAxNi42NjYgLyBkdXJhdGlvbjtcbiAgICBsZXQga2V5ZnJhbWVzID0gJ3tcXG4nO1xuICAgIGZvciAobGV0IHAgPSAwOyBwIDw9IDE7IHAgKz0gc3RlcCkge1xuICAgICAgICBjb25zdCB0ID0gYSArIChiIC0gYSkgKiBlYXNlKHApO1xuICAgICAgICBrZXlmcmFtZXMgKz0gcCAqIDEwMCArIGAleyR7Zm4odCwgMSAtIHQpfX1cXG5gO1xuICAgIH1cbiAgICBjb25zdCBydWxlID0ga2V5ZnJhbWVzICsgYDEwMCUgeyR7Zm4oYiwgMSAtIGIpfX1cXG59YDtcbiAgICBjb25zdCBuYW1lID0gYF9fc3ZlbHRlXyR7aGFzaChydWxlKX1fJHt1aWR9YDtcbiAgICBjb25zdCBkb2MgPSBnZXRfcm9vdF9mb3Jfc3R5bGUobm9kZSk7XG4gICAgY29uc3QgeyBzdHlsZXNoZWV0LCBydWxlcyB9ID0gbWFuYWdlZF9zdHlsZXMuZ2V0KGRvYykgfHwgY3JlYXRlX3N0eWxlX2luZm9ybWF0aW9uKGRvYywgbm9kZSk7XG4gICAgaWYgKCFydWxlc1tuYW1lXSkge1xuICAgICAgICBydWxlc1tuYW1lXSA9IHRydWU7XG4gICAgICAgIHN0eWxlc2hlZXQuaW5zZXJ0UnVsZShgQGtleWZyYW1lcyAke25hbWV9ICR7cnVsZX1gLCBzdHlsZXNoZWV0LmNzc1J1bGVzLmxlbmd0aCk7XG4gICAgfVxuICAgIGNvbnN0IGFuaW1hdGlvbiA9IG5vZGUuc3R5bGUuYW5pbWF0aW9uIHx8ICcnO1xuICAgIG5vZGUuc3R5bGUuYW5pbWF0aW9uID0gYCR7YW5pbWF0aW9uID8gYCR7YW5pbWF0aW9ufSwgYCA6ICcnfSR7bmFtZX0gJHtkdXJhdGlvbn1tcyBsaW5lYXIgJHtkZWxheX1tcyAxIGJvdGhgO1xuICAgIGFjdGl2ZSArPSAxO1xuICAgIHJldHVybiBuYW1lO1xufVxuZnVuY3Rpb24gZGVsZXRlX3J1bGUobm9kZSwgbmFtZSkge1xuICAgIGNvbnN0IHByZXZpb3VzID0gKG5vZGUuc3R5bGUuYW5pbWF0aW9uIHx8ICcnKS5zcGxpdCgnLCAnKTtcbiAgICBjb25zdCBuZXh0ID0gcHJldmlvdXMuZmlsdGVyKG5hbWVcbiAgICAgICAgPyBhbmltID0+IGFuaW0uaW5kZXhPZihuYW1lKSA8IDAgLy8gcmVtb3ZlIHNwZWNpZmljIGFuaW1hdGlvblxuICAgICAgICA6IGFuaW0gPT4gYW5pbS5pbmRleE9mKCdfX3N2ZWx0ZScpID09PSAtMSAvLyByZW1vdmUgYWxsIFN2ZWx0ZSBhbmltYXRpb25zXG4gICAgKTtcbiAgICBjb25zdCBkZWxldGVkID0gcHJldmlvdXMubGVuZ3RoIC0gbmV4dC5sZW5ndGg7XG4gICAgaWYgKGRlbGV0ZWQpIHtcbiAgICAgICAgbm9kZS5zdHlsZS5hbmltYXRpb24gPSBuZXh0LmpvaW4oJywgJyk7XG4gICAgICAgIGFjdGl2ZSAtPSBkZWxldGVkO1xuICAgICAgICBpZiAoIWFjdGl2ZSlcbiAgICAgICAgICAgIGNsZWFyX3J1bGVzKCk7XG4gICAgfVxufVxuZnVuY3Rpb24gY2xlYXJfcnVsZXMoKSB7XG4gICAgcmFmKCgpID0+IHtcbiAgICAgICAgaWYgKGFjdGl2ZSlcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgbWFuYWdlZF9zdHlsZXMuZm9yRWFjaChpbmZvID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHsgc3R5bGVzaGVldCB9ID0gaW5mbztcbiAgICAgICAgICAgIGxldCBpID0gc3R5bGVzaGVldC5jc3NSdWxlcy5sZW5ndGg7XG4gICAgICAgICAgICB3aGlsZSAoaS0tKVxuICAgICAgICAgICAgICAgIHN0eWxlc2hlZXQuZGVsZXRlUnVsZShpKTtcbiAgICAgICAgICAgIGluZm8ucnVsZXMgPSB7fTtcbiAgICAgICAgfSk7XG4gICAgICAgIG1hbmFnZWRfc3R5bGVzLmNsZWFyKCk7XG4gICAgfSk7XG59XG5cbmZ1bmN0aW9uIGNyZWF0ZV9hbmltYXRpb24obm9kZSwgZnJvbSwgZm4sIHBhcmFtcykge1xuICAgIGlmICghZnJvbSlcbiAgICAgICAgcmV0dXJuIG5vb3A7XG4gICAgY29uc3QgdG8gPSBub2RlLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgIGlmIChmcm9tLmxlZnQgPT09IHRvLmxlZnQgJiYgZnJvbS5yaWdodCA9PT0gdG8ucmlnaHQgJiYgZnJvbS50b3AgPT09IHRvLnRvcCAmJiBmcm9tLmJvdHRvbSA9PT0gdG8uYm90dG9tKVxuICAgICAgICByZXR1cm4gbm9vcDtcbiAgICBjb25zdCB7IGRlbGF5ID0gMCwgZHVyYXRpb24gPSAzMDAsIGVhc2luZyA9IGlkZW50aXR5LCBcbiAgICAvLyBAdHMtaWdub3JlIHRvZG86IHNob3VsZCB0aGlzIGJlIHNlcGFyYXRlZCBmcm9tIGRlc3RydWN0dXJpbmc/IE9yIHN0YXJ0L2VuZCBhZGRlZCB0byBwdWJsaWMgYXBpIGFuZCBkb2N1bWVudGF0aW9uP1xuICAgIHN0YXJ0OiBzdGFydF90aW1lID0gbm93KCkgKyBkZWxheSwgXG4gICAgLy8gQHRzLWlnbm9yZSB0b2RvOlxuICAgIGVuZCA9IHN0YXJ0X3RpbWUgKyBkdXJhdGlvbiwgdGljayA9IG5vb3AsIGNzcyB9ID0gZm4obm9kZSwgeyBmcm9tLCB0byB9LCBwYXJhbXMpO1xuICAgIGxldCBydW5uaW5nID0gdHJ1ZTtcbiAgICBsZXQgc3RhcnRlZCA9IGZhbHNlO1xuICAgIGxldCBuYW1lO1xuICAgIGZ1bmN0aW9uIHN0YXJ0KCkge1xuICAgICAgICBpZiAoY3NzKSB7XG4gICAgICAgICAgICBuYW1lID0gY3JlYXRlX3J1bGUobm9kZSwgMCwgMSwgZHVyYXRpb24sIGRlbGF5LCBlYXNpbmcsIGNzcyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFkZWxheSkge1xuICAgICAgICAgICAgc3RhcnRlZCA9IHRydWU7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZnVuY3Rpb24gc3RvcCgpIHtcbiAgICAgICAgaWYgKGNzcylcbiAgICAgICAgICAgIGRlbGV0ZV9ydWxlKG5vZGUsIG5hbWUpO1xuICAgICAgICBydW5uaW5nID0gZmFsc2U7XG4gICAgfVxuICAgIGxvb3Aobm93ID0+IHtcbiAgICAgICAgaWYgKCFzdGFydGVkICYmIG5vdyA+PSBzdGFydF90aW1lKSB7XG4gICAgICAgICAgICBzdGFydGVkID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoc3RhcnRlZCAmJiBub3cgPj0gZW5kKSB7XG4gICAgICAgICAgICB0aWNrKDEsIDApO1xuICAgICAgICAgICAgc3RvcCgpO1xuICAgICAgICB9XG4gICAgICAgIGlmICghcnVubmluZykge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIGlmIChzdGFydGVkKSB7XG4gICAgICAgICAgICBjb25zdCBwID0gbm93IC0gc3RhcnRfdGltZTtcbiAgICAgICAgICAgIGNvbnN0IHQgPSAwICsgMSAqIGVhc2luZyhwIC8gZHVyYXRpb24pO1xuICAgICAgICAgICAgdGljayh0LCAxIC0gdCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfSk7XG4gICAgc3RhcnQoKTtcbiAgICB0aWNrKDAsIDEpO1xuICAgIHJldHVybiBzdG9wO1xufVxuZnVuY3Rpb24gZml4X3Bvc2l0aW9uKG5vZGUpIHtcbiAgICBjb25zdCBzdHlsZSA9IGdldENvbXB1dGVkU3R5bGUobm9kZSk7XG4gICAgaWYgKHN0eWxlLnBvc2l0aW9uICE9PSAnYWJzb2x1dGUnICYmIHN0eWxlLnBvc2l0aW9uICE9PSAnZml4ZWQnKSB7XG4gICAgICAgIGNvbnN0IHsgd2lkdGgsIGhlaWdodCB9ID0gc3R5bGU7XG4gICAgICAgIGNvbnN0IGEgPSBub2RlLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgICAgICBub2RlLnN0eWxlLnBvc2l0aW9uID0gJ2Fic29sdXRlJztcbiAgICAgICAgbm9kZS5zdHlsZS53aWR0aCA9IHdpZHRoO1xuICAgICAgICBub2RlLnN0eWxlLmhlaWdodCA9IGhlaWdodDtcbiAgICAgICAgYWRkX3RyYW5zZm9ybShub2RlLCBhKTtcbiAgICB9XG59XG5mdW5jdGlvbiBhZGRfdHJhbnNmb3JtKG5vZGUsIGEpIHtcbiAgICBjb25zdCBiID0gbm9kZS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICBpZiAoYS5sZWZ0ICE9PSBiLmxlZnQgfHwgYS50b3AgIT09IGIudG9wKSB7XG4gICAgICAgIGNvbnN0IHN0eWxlID0gZ2V0Q29tcHV0ZWRTdHlsZShub2RlKTtcbiAgICAgICAgY29uc3QgdHJhbnNmb3JtID0gc3R5bGUudHJhbnNmb3JtID09PSAnbm9uZScgPyAnJyA6IHN0eWxlLnRyYW5zZm9ybTtcbiAgICAgICAgbm9kZS5zdHlsZS50cmFuc2Zvcm0gPSBgJHt0cmFuc2Zvcm19IHRyYW5zbGF0ZSgke2EubGVmdCAtIGIubGVmdH1weCwgJHthLnRvcCAtIGIudG9wfXB4KWA7XG4gICAgfVxufVxuXG5sZXQgY3VycmVudF9jb21wb25lbnQ7XG5mdW5jdGlvbiBzZXRfY3VycmVudF9jb21wb25lbnQoY29tcG9uZW50KSB7XG4gICAgY3VycmVudF9jb21wb25lbnQgPSBjb21wb25lbnQ7XG59XG5mdW5jdGlvbiBnZXRfY3VycmVudF9jb21wb25lbnQoKSB7XG4gICAgaWYgKCFjdXJyZW50X2NvbXBvbmVudClcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdGdW5jdGlvbiBjYWxsZWQgb3V0c2lkZSBjb21wb25lbnQgaW5pdGlhbGl6YXRpb24nKTtcbiAgICByZXR1cm4gY3VycmVudF9jb21wb25lbnQ7XG59XG5mdW5jdGlvbiBiZWZvcmVVcGRhdGUoZm4pIHtcbiAgICBnZXRfY3VycmVudF9jb21wb25lbnQoKS4kJC5iZWZvcmVfdXBkYXRlLnB1c2goZm4pO1xufVxuZnVuY3Rpb24gb25Nb3VudChmbikge1xuICAgIGdldF9jdXJyZW50X2NvbXBvbmVudCgpLiQkLm9uX21vdW50LnB1c2goZm4pO1xufVxuZnVuY3Rpb24gYWZ0ZXJVcGRhdGUoZm4pIHtcbiAgICBnZXRfY3VycmVudF9jb21wb25lbnQoKS4kJC5hZnRlcl91cGRhdGUucHVzaChmbik7XG59XG5mdW5jdGlvbiBvbkRlc3Ryb3koZm4pIHtcbiAgICBnZXRfY3VycmVudF9jb21wb25lbnQoKS4kJC5vbl9kZXN0cm95LnB1c2goZm4pO1xufVxuZnVuY3Rpb24gY3JlYXRlRXZlbnREaXNwYXRjaGVyKCkge1xuICAgIGNvbnN0IGNvbXBvbmVudCA9IGdldF9jdXJyZW50X2NvbXBvbmVudCgpO1xuICAgIHJldHVybiAodHlwZSwgZGV0YWlsKSA9PiB7XG4gICAgICAgIGNvbnN0IGNhbGxiYWNrcyA9IGNvbXBvbmVudC4kJC5jYWxsYmFja3NbdHlwZV07XG4gICAgICAgIGlmIChjYWxsYmFja3MpIHtcbiAgICAgICAgICAgIC8vIFRPRE8gYXJlIHRoZXJlIHNpdHVhdGlvbnMgd2hlcmUgZXZlbnRzIGNvdWxkIGJlIGRpc3BhdGNoZWRcbiAgICAgICAgICAgIC8vIGluIGEgc2VydmVyIChub24tRE9NKSBlbnZpcm9ubWVudD9cbiAgICAgICAgICAgIGNvbnN0IGV2ZW50ID0gY3VzdG9tX2V2ZW50KHR5cGUsIGRldGFpbCk7XG4gICAgICAgICAgICBjYWxsYmFja3Muc2xpY2UoKS5mb3JFYWNoKGZuID0+IHtcbiAgICAgICAgICAgICAgICBmbi5jYWxsKGNvbXBvbmVudCwgZXZlbnQpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9O1xufVxuZnVuY3Rpb24gc2V0Q29udGV4dChrZXksIGNvbnRleHQpIHtcbiAgICBnZXRfY3VycmVudF9jb21wb25lbnQoKS4kJC5jb250ZXh0LnNldChrZXksIGNvbnRleHQpO1xufVxuZnVuY3Rpb24gZ2V0Q29udGV4dChrZXkpIHtcbiAgICByZXR1cm4gZ2V0X2N1cnJlbnRfY29tcG9uZW50KCkuJCQuY29udGV4dC5nZXQoa2V5KTtcbn1cbmZ1bmN0aW9uIGdldEFsbENvbnRleHRzKCkge1xuICAgIHJldHVybiBnZXRfY3VycmVudF9jb21wb25lbnQoKS4kJC5jb250ZXh0O1xufVxuZnVuY3Rpb24gaGFzQ29udGV4dChrZXkpIHtcbiAgICByZXR1cm4gZ2V0X2N1cnJlbnRfY29tcG9uZW50KCkuJCQuY29udGV4dC5oYXMoa2V5KTtcbn1cbi8vIFRPRE8gZmlndXJlIG91dCBpZiB3ZSBzdGlsbCB3YW50IHRvIHN1cHBvcnRcbi8vIHNob3J0aGFuZCBldmVudHMsIG9yIGlmIHdlIHdhbnQgdG8gaW1wbGVtZW50XG4vLyBhIHJlYWwgYnViYmxpbmcgbWVjaGFuaXNtXG5mdW5jdGlvbiBidWJibGUoY29tcG9uZW50LCBldmVudCkge1xuICAgIGNvbnN0IGNhbGxiYWNrcyA9IGNvbXBvbmVudC4kJC5jYWxsYmFja3NbZXZlbnQudHlwZV07XG4gICAgaWYgKGNhbGxiYWNrcykge1xuICAgICAgICAvLyBAdHMtaWdub3JlXG4gICAgICAgIGNhbGxiYWNrcy5zbGljZSgpLmZvckVhY2goZm4gPT4gZm4uY2FsbCh0aGlzLCBldmVudCkpO1xuICAgIH1cbn1cblxuY29uc3QgZGlydHlfY29tcG9uZW50cyA9IFtdO1xuY29uc3QgaW50cm9zID0geyBlbmFibGVkOiBmYWxzZSB9O1xuY29uc3QgYmluZGluZ19jYWxsYmFja3MgPSBbXTtcbmNvbnN0IHJlbmRlcl9jYWxsYmFja3MgPSBbXTtcbmNvbnN0IGZsdXNoX2NhbGxiYWNrcyA9IFtdO1xuY29uc3QgcmVzb2x2ZWRfcHJvbWlzZSA9IFByb21pc2UucmVzb2x2ZSgpO1xubGV0IHVwZGF0ZV9zY2hlZHVsZWQgPSBmYWxzZTtcbmZ1bmN0aW9uIHNjaGVkdWxlX3VwZGF0ZSgpIHtcbiAgICBpZiAoIXVwZGF0ZV9zY2hlZHVsZWQpIHtcbiAgICAgICAgdXBkYXRlX3NjaGVkdWxlZCA9IHRydWU7XG4gICAgICAgIHJlc29sdmVkX3Byb21pc2UudGhlbihmbHVzaCk7XG4gICAgfVxufVxuZnVuY3Rpb24gdGljaygpIHtcbiAgICBzY2hlZHVsZV91cGRhdGUoKTtcbiAgICByZXR1cm4gcmVzb2x2ZWRfcHJvbWlzZTtcbn1cbmZ1bmN0aW9uIGFkZF9yZW5kZXJfY2FsbGJhY2soZm4pIHtcbiAgICByZW5kZXJfY2FsbGJhY2tzLnB1c2goZm4pO1xufVxuZnVuY3Rpb24gYWRkX2ZsdXNoX2NhbGxiYWNrKGZuKSB7XG4gICAgZmx1c2hfY2FsbGJhY2tzLnB1c2goZm4pO1xufVxuLy8gZmx1c2goKSBjYWxscyBjYWxsYmFja3MgaW4gdGhpcyBvcmRlcjpcbi8vIDEuIEFsbCBiZWZvcmVVcGRhdGUgY2FsbGJhY2tzLCBpbiBvcmRlcjogcGFyZW50cyBiZWZvcmUgY2hpbGRyZW5cbi8vIDIuIEFsbCBiaW5kOnRoaXMgY2FsbGJhY2tzLCBpbiByZXZlcnNlIG9yZGVyOiBjaGlsZHJlbiBiZWZvcmUgcGFyZW50cy5cbi8vIDMuIEFsbCBhZnRlclVwZGF0ZSBjYWxsYmFja3MsIGluIG9yZGVyOiBwYXJlbnRzIGJlZm9yZSBjaGlsZHJlbi4gRVhDRVBUXG4vLyAgICBmb3IgYWZ0ZXJVcGRhdGVzIGNhbGxlZCBkdXJpbmcgdGhlIGluaXRpYWwgb25Nb3VudCwgd2hpY2ggYXJlIGNhbGxlZCBpblxuLy8gICAgcmV2ZXJzZSBvcmRlcjogY2hpbGRyZW4gYmVmb3JlIHBhcmVudHMuXG4vLyBTaW5jZSBjYWxsYmFja3MgbWlnaHQgdXBkYXRlIGNvbXBvbmVudCB2YWx1ZXMsIHdoaWNoIGNvdWxkIHRyaWdnZXIgYW5vdGhlclxuLy8gY2FsbCB0byBmbHVzaCgpLCB0aGUgZm9sbG93aW5nIHN0ZXBzIGd1YXJkIGFnYWluc3QgdGhpczpcbi8vIDEuIER1cmluZyBiZWZvcmVVcGRhdGUsIGFueSB1cGRhdGVkIGNvbXBvbmVudHMgd2lsbCBiZSBhZGRlZCB0byB0aGVcbi8vICAgIGRpcnR5X2NvbXBvbmVudHMgYXJyYXkgYW5kIHdpbGwgY2F1c2UgYSByZWVudHJhbnQgY2FsbCB0byBmbHVzaCgpLiBCZWNhdXNlXG4vLyAgICB0aGUgZmx1c2ggaW5kZXggaXMga2VwdCBvdXRzaWRlIHRoZSBmdW5jdGlvbiwgdGhlIHJlZW50cmFudCBjYWxsIHdpbGwgcGlja1xuLy8gICAgdXAgd2hlcmUgdGhlIGVhcmxpZXIgY2FsbCBsZWZ0IG9mZiBhbmQgZ28gdGhyb3VnaCBhbGwgZGlydHkgY29tcG9uZW50cy4gVGhlXG4vLyAgICBjdXJyZW50X2NvbXBvbmVudCB2YWx1ZSBpcyBzYXZlZCBhbmQgcmVzdG9yZWQgc28gdGhhdCB0aGUgcmVlbnRyYW50IGNhbGwgd2lsbFxuLy8gICAgbm90IGludGVyZmVyZSB3aXRoIHRoZSBcInBhcmVudFwiIGZsdXNoKCkgY2FsbC5cbi8vIDIuIGJpbmQ6dGhpcyBjYWxsYmFja3MgY2Fubm90IHRyaWdnZXIgbmV3IGZsdXNoKCkgY2FsbHMuXG4vLyAzLiBEdXJpbmcgYWZ0ZXJVcGRhdGUsIGFueSB1cGRhdGVkIGNvbXBvbmVudHMgd2lsbCBOT1QgaGF2ZSB0aGVpciBhZnRlclVwZGF0ZVxuLy8gICAgY2FsbGJhY2sgY2FsbGVkIGEgc2Vjb25kIHRpbWU7IHRoZSBzZWVuX2NhbGxiYWNrcyBzZXQsIG91dHNpZGUgdGhlIGZsdXNoKClcbi8vICAgIGZ1bmN0aW9uLCBndWFyYW50ZWVzIHRoaXMgYmVoYXZpb3IuXG5jb25zdCBzZWVuX2NhbGxiYWNrcyA9IG5ldyBTZXQoKTtcbmxldCBmbHVzaGlkeCA9IDA7IC8vIERvICpub3QqIG1vdmUgdGhpcyBpbnNpZGUgdGhlIGZsdXNoKCkgZnVuY3Rpb25cbmZ1bmN0aW9uIGZsdXNoKCkge1xuICAgIGNvbnN0IHNhdmVkX2NvbXBvbmVudCA9IGN1cnJlbnRfY29tcG9uZW50O1xuICAgIGRvIHtcbiAgICAgICAgLy8gZmlyc3QsIGNhbGwgYmVmb3JlVXBkYXRlIGZ1bmN0aW9uc1xuICAgICAgICAvLyBhbmQgdXBkYXRlIGNvbXBvbmVudHNcbiAgICAgICAgd2hpbGUgKGZsdXNoaWR4IDwgZGlydHlfY29tcG9uZW50cy5sZW5ndGgpIHtcbiAgICAgICAgICAgIGNvbnN0IGNvbXBvbmVudCA9IGRpcnR5X2NvbXBvbmVudHNbZmx1c2hpZHhdO1xuICAgICAgICAgICAgZmx1c2hpZHgrKztcbiAgICAgICAgICAgIHNldF9jdXJyZW50X2NvbXBvbmVudChjb21wb25lbnQpO1xuICAgICAgICAgICAgdXBkYXRlKGNvbXBvbmVudC4kJCk7XG4gICAgICAgIH1cbiAgICAgICAgc2V0X2N1cnJlbnRfY29tcG9uZW50KG51bGwpO1xuICAgICAgICBkaXJ0eV9jb21wb25lbnRzLmxlbmd0aCA9IDA7XG4gICAgICAgIGZsdXNoaWR4ID0gMDtcbiAgICAgICAgd2hpbGUgKGJpbmRpbmdfY2FsbGJhY2tzLmxlbmd0aClcbiAgICAgICAgICAgIGJpbmRpbmdfY2FsbGJhY2tzLnBvcCgpKCk7XG4gICAgICAgIC8vIHRoZW4sIG9uY2UgY29tcG9uZW50cyBhcmUgdXBkYXRlZCwgY2FsbFxuICAgICAgICAvLyBhZnRlclVwZGF0ZSBmdW5jdGlvbnMuIFRoaXMgbWF5IGNhdXNlXG4gICAgICAgIC8vIHN1YnNlcXVlbnQgdXBkYXRlcy4uLlxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHJlbmRlcl9jYWxsYmFja3MubGVuZ3RoOyBpICs9IDEpIHtcbiAgICAgICAgICAgIGNvbnN0IGNhbGxiYWNrID0gcmVuZGVyX2NhbGxiYWNrc1tpXTtcbiAgICAgICAgICAgIGlmICghc2Vlbl9jYWxsYmFja3MuaGFzKGNhbGxiYWNrKSkge1xuICAgICAgICAgICAgICAgIC8vIC4uLnNvIGd1YXJkIGFnYWluc3QgaW5maW5pdGUgbG9vcHNcbiAgICAgICAgICAgICAgICBzZWVuX2NhbGxiYWNrcy5hZGQoY2FsbGJhY2spO1xuICAgICAgICAgICAgICAgIGNhbGxiYWNrKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmVuZGVyX2NhbGxiYWNrcy5sZW5ndGggPSAwO1xuICAgIH0gd2hpbGUgKGRpcnR5X2NvbXBvbmVudHMubGVuZ3RoKTtcbiAgICB3aGlsZSAoZmx1c2hfY2FsbGJhY2tzLmxlbmd0aCkge1xuICAgICAgICBmbHVzaF9jYWxsYmFja3MucG9wKCkoKTtcbiAgICB9XG4gICAgdXBkYXRlX3NjaGVkdWxlZCA9IGZhbHNlO1xuICAgIHNlZW5fY2FsbGJhY2tzLmNsZWFyKCk7XG4gICAgc2V0X2N1cnJlbnRfY29tcG9uZW50KHNhdmVkX2NvbXBvbmVudCk7XG59XG5mdW5jdGlvbiB1cGRhdGUoJCQpIHtcbiAgICBpZiAoJCQuZnJhZ21lbnQgIT09IG51bGwpIHtcbiAgICAgICAgJCQudXBkYXRlKCk7XG4gICAgICAgIHJ1bl9hbGwoJCQuYmVmb3JlX3VwZGF0ZSk7XG4gICAgICAgIGNvbnN0IGRpcnR5ID0gJCQuZGlydHk7XG4gICAgICAgICQkLmRpcnR5ID0gWy0xXTtcbiAgICAgICAgJCQuZnJhZ21lbnQgJiYgJCQuZnJhZ21lbnQucCgkJC5jdHgsIGRpcnR5KTtcbiAgICAgICAgJCQuYWZ0ZXJfdXBkYXRlLmZvckVhY2goYWRkX3JlbmRlcl9jYWxsYmFjayk7XG4gICAgfVxufVxuXG5sZXQgcHJvbWlzZTtcbmZ1bmN0aW9uIHdhaXQoKSB7XG4gICAgaWYgKCFwcm9taXNlKSB7XG4gICAgICAgIHByb21pc2UgPSBQcm9taXNlLnJlc29sdmUoKTtcbiAgICAgICAgcHJvbWlzZS50aGVuKCgpID0+IHtcbiAgICAgICAgICAgIHByb21pc2UgPSBudWxsO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgcmV0dXJuIHByb21pc2U7XG59XG5mdW5jdGlvbiBkaXNwYXRjaChub2RlLCBkaXJlY3Rpb24sIGtpbmQpIHtcbiAgICBub2RlLmRpc3BhdGNoRXZlbnQoY3VzdG9tX2V2ZW50KGAke2RpcmVjdGlvbiA/ICdpbnRybycgOiAnb3V0cm8nfSR7a2luZH1gKSk7XG59XG5jb25zdCBvdXRyb2luZyA9IG5ldyBTZXQoKTtcbmxldCBvdXRyb3M7XG5mdW5jdGlvbiBncm91cF9vdXRyb3MoKSB7XG4gICAgb3V0cm9zID0ge1xuICAgICAgICByOiAwLFxuICAgICAgICBjOiBbXSxcbiAgICAgICAgcDogb3V0cm9zIC8vIHBhcmVudCBncm91cFxuICAgIH07XG59XG5mdW5jdGlvbiBjaGVja19vdXRyb3MoKSB7XG4gICAgaWYgKCFvdXRyb3Mucikge1xuICAgICAgICBydW5fYWxsKG91dHJvcy5jKTtcbiAgICB9XG4gICAgb3V0cm9zID0gb3V0cm9zLnA7XG59XG5mdW5jdGlvbiB0cmFuc2l0aW9uX2luKGJsb2NrLCBsb2NhbCkge1xuICAgIGlmIChibG9jayAmJiBibG9jay5pKSB7XG4gICAgICAgIG91dHJvaW5nLmRlbGV0ZShibG9jayk7XG4gICAgICAgIGJsb2NrLmkobG9jYWwpO1xuICAgIH1cbn1cbmZ1bmN0aW9uIHRyYW5zaXRpb25fb3V0KGJsb2NrLCBsb2NhbCwgZGV0YWNoLCBjYWxsYmFjaykge1xuICAgIGlmIChibG9jayAmJiBibG9jay5vKSB7XG4gICAgICAgIGlmIChvdXRyb2luZy5oYXMoYmxvY2spKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICBvdXRyb2luZy5hZGQoYmxvY2spO1xuICAgICAgICBvdXRyb3MuYy5wdXNoKCgpID0+IHtcbiAgICAgICAgICAgIG91dHJvaW5nLmRlbGV0ZShibG9jayk7XG4gICAgICAgICAgICBpZiAoY2FsbGJhY2spIHtcbiAgICAgICAgICAgICAgICBpZiAoZGV0YWNoKVxuICAgICAgICAgICAgICAgICAgICBibG9jay5kKDEpO1xuICAgICAgICAgICAgICAgIGNhbGxiYWNrKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICBibG9jay5vKGxvY2FsKTtcbiAgICB9XG59XG5jb25zdCBudWxsX3RyYW5zaXRpb24gPSB7IGR1cmF0aW9uOiAwIH07XG5mdW5jdGlvbiBjcmVhdGVfaW5fdHJhbnNpdGlvbihub2RlLCBmbiwgcGFyYW1zKSB7XG4gICAgbGV0IGNvbmZpZyA9IGZuKG5vZGUsIHBhcmFtcyk7XG4gICAgbGV0IHJ1bm5pbmcgPSBmYWxzZTtcbiAgICBsZXQgYW5pbWF0aW9uX25hbWU7XG4gICAgbGV0IHRhc2s7XG4gICAgbGV0IHVpZCA9IDA7XG4gICAgZnVuY3Rpb24gY2xlYW51cCgpIHtcbiAgICAgICAgaWYgKGFuaW1hdGlvbl9uYW1lKVxuICAgICAgICAgICAgZGVsZXRlX3J1bGUobm9kZSwgYW5pbWF0aW9uX25hbWUpO1xuICAgIH1cbiAgICBmdW5jdGlvbiBnbygpIHtcbiAgICAgICAgY29uc3QgeyBkZWxheSA9IDAsIGR1cmF0aW9uID0gMzAwLCBlYXNpbmcgPSBpZGVudGl0eSwgdGljayA9IG5vb3AsIGNzcyB9ID0gY29uZmlnIHx8IG51bGxfdHJhbnNpdGlvbjtcbiAgICAgICAgaWYgKGNzcylcbiAgICAgICAgICAgIGFuaW1hdGlvbl9uYW1lID0gY3JlYXRlX3J1bGUobm9kZSwgMCwgMSwgZHVyYXRpb24sIGRlbGF5LCBlYXNpbmcsIGNzcywgdWlkKyspO1xuICAgICAgICB0aWNrKDAsIDEpO1xuICAgICAgICBjb25zdCBzdGFydF90aW1lID0gbm93KCkgKyBkZWxheTtcbiAgICAgICAgY29uc3QgZW5kX3RpbWUgPSBzdGFydF90aW1lICsgZHVyYXRpb247XG4gICAgICAgIGlmICh0YXNrKVxuICAgICAgICAgICAgdGFzay5hYm9ydCgpO1xuICAgICAgICBydW5uaW5nID0gdHJ1ZTtcbiAgICAgICAgYWRkX3JlbmRlcl9jYWxsYmFjaygoKSA9PiBkaXNwYXRjaChub2RlLCB0cnVlLCAnc3RhcnQnKSk7XG4gICAgICAgIHRhc2sgPSBsb29wKG5vdyA9PiB7XG4gICAgICAgICAgICBpZiAocnVubmluZykge1xuICAgICAgICAgICAgICAgIGlmIChub3cgPj0gZW5kX3RpbWUpIHtcbiAgICAgICAgICAgICAgICAgICAgdGljaygxLCAwKTtcbiAgICAgICAgICAgICAgICAgICAgZGlzcGF0Y2gobm9kZSwgdHJ1ZSwgJ2VuZCcpO1xuICAgICAgICAgICAgICAgICAgICBjbGVhbnVwKCk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBydW5uaW5nID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChub3cgPj0gc3RhcnRfdGltZSkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCB0ID0gZWFzaW5nKChub3cgLSBzdGFydF90aW1lKSAvIGR1cmF0aW9uKTtcbiAgICAgICAgICAgICAgICAgICAgdGljayh0LCAxIC0gdCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHJ1bm5pbmc7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBsZXQgc3RhcnRlZCA9IGZhbHNlO1xuICAgIHJldHVybiB7XG4gICAgICAgIHN0YXJ0KCkge1xuICAgICAgICAgICAgaWYgKHN0YXJ0ZWQpXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgc3RhcnRlZCA9IHRydWU7XG4gICAgICAgICAgICBkZWxldGVfcnVsZShub2RlKTtcbiAgICAgICAgICAgIGlmIChpc19mdW5jdGlvbihjb25maWcpKSB7XG4gICAgICAgICAgICAgICAgY29uZmlnID0gY29uZmlnKCk7XG4gICAgICAgICAgICAgICAgd2FpdCgpLnRoZW4oZ28pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgZ28oKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgaW52YWxpZGF0ZSgpIHtcbiAgICAgICAgICAgIHN0YXJ0ZWQgPSBmYWxzZTtcbiAgICAgICAgfSxcbiAgICAgICAgZW5kKCkge1xuICAgICAgICAgICAgaWYgKHJ1bm5pbmcpIHtcbiAgICAgICAgICAgICAgICBjbGVhbnVwKCk7XG4gICAgICAgICAgICAgICAgcnVubmluZyA9IGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfTtcbn1cbmZ1bmN0aW9uIGNyZWF0ZV9vdXRfdHJhbnNpdGlvbihub2RlLCBmbiwgcGFyYW1zKSB7XG4gICAgbGV0IGNvbmZpZyA9IGZuKG5vZGUsIHBhcmFtcyk7XG4gICAgbGV0IHJ1bm5pbmcgPSB0cnVlO1xuICAgIGxldCBhbmltYXRpb25fbmFtZTtcbiAgICBjb25zdCBncm91cCA9IG91dHJvcztcbiAgICBncm91cC5yICs9IDE7XG4gICAgZnVuY3Rpb24gZ28oKSB7XG4gICAgICAgIGNvbnN0IHsgZGVsYXkgPSAwLCBkdXJhdGlvbiA9IDMwMCwgZWFzaW5nID0gaWRlbnRpdHksIHRpY2sgPSBub29wLCBjc3MgfSA9IGNvbmZpZyB8fCBudWxsX3RyYW5zaXRpb247XG4gICAgICAgIGlmIChjc3MpXG4gICAgICAgICAgICBhbmltYXRpb25fbmFtZSA9IGNyZWF0ZV9ydWxlKG5vZGUsIDEsIDAsIGR1cmF0aW9uLCBkZWxheSwgZWFzaW5nLCBjc3MpO1xuICAgICAgICBjb25zdCBzdGFydF90aW1lID0gbm93KCkgKyBkZWxheTtcbiAgICAgICAgY29uc3QgZW5kX3RpbWUgPSBzdGFydF90aW1lICsgZHVyYXRpb247XG4gICAgICAgIGFkZF9yZW5kZXJfY2FsbGJhY2soKCkgPT4gZGlzcGF0Y2gobm9kZSwgZmFsc2UsICdzdGFydCcpKTtcbiAgICAgICAgbG9vcChub3cgPT4ge1xuICAgICAgICAgICAgaWYgKHJ1bm5pbmcpIHtcbiAgICAgICAgICAgICAgICBpZiAobm93ID49IGVuZF90aW1lKSB7XG4gICAgICAgICAgICAgICAgICAgIHRpY2soMCwgMSk7XG4gICAgICAgICAgICAgICAgICAgIGRpc3BhdGNoKG5vZGUsIGZhbHNlLCAnZW5kJyk7XG4gICAgICAgICAgICAgICAgICAgIGlmICghLS1ncm91cC5yKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyB0aGlzIHdpbGwgcmVzdWx0IGluIGBlbmQoKWAgYmVpbmcgY2FsbGVkLFxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gc28gd2UgZG9uJ3QgbmVlZCB0byBjbGVhbiB1cCBoZXJlXG4gICAgICAgICAgICAgICAgICAgICAgICBydW5fYWxsKGdyb3VwLmMpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKG5vdyA+PSBzdGFydF90aW1lKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHQgPSBlYXNpbmcoKG5vdyAtIHN0YXJ0X3RpbWUpIC8gZHVyYXRpb24pO1xuICAgICAgICAgICAgICAgICAgICB0aWNrKDEgLSB0LCB0KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gcnVubmluZztcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGlmIChpc19mdW5jdGlvbihjb25maWcpKSB7XG4gICAgICAgIHdhaXQoKS50aGVuKCgpID0+IHtcbiAgICAgICAgICAgIC8vIEB0cy1pZ25vcmVcbiAgICAgICAgICAgIGNvbmZpZyA9IGNvbmZpZygpO1xuICAgICAgICAgICAgZ28oKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBnbygpO1xuICAgIH1cbiAgICByZXR1cm4ge1xuICAgICAgICBlbmQocmVzZXQpIHtcbiAgICAgICAgICAgIGlmIChyZXNldCAmJiBjb25maWcudGljaykge1xuICAgICAgICAgICAgICAgIGNvbmZpZy50aWNrKDEsIDApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHJ1bm5pbmcpIHtcbiAgICAgICAgICAgICAgICBpZiAoYW5pbWF0aW9uX25hbWUpXG4gICAgICAgICAgICAgICAgICAgIGRlbGV0ZV9ydWxlKG5vZGUsIGFuaW1hdGlvbl9uYW1lKTtcbiAgICAgICAgICAgICAgICBydW5uaW5nID0gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xufVxuZnVuY3Rpb24gY3JlYXRlX2JpZGlyZWN0aW9uYWxfdHJhbnNpdGlvbihub2RlLCBmbiwgcGFyYW1zLCBpbnRybykge1xuICAgIGxldCBjb25maWcgPSBmbihub2RlLCBwYXJhbXMpO1xuICAgIGxldCB0ID0gaW50cm8gPyAwIDogMTtcbiAgICBsZXQgcnVubmluZ19wcm9ncmFtID0gbnVsbDtcbiAgICBsZXQgcGVuZGluZ19wcm9ncmFtID0gbnVsbDtcbiAgICBsZXQgYW5pbWF0aW9uX25hbWUgPSBudWxsO1xuICAgIGZ1bmN0aW9uIGNsZWFyX2FuaW1hdGlvbigpIHtcbiAgICAgICAgaWYgKGFuaW1hdGlvbl9uYW1lKVxuICAgICAgICAgICAgZGVsZXRlX3J1bGUobm9kZSwgYW5pbWF0aW9uX25hbWUpO1xuICAgIH1cbiAgICBmdW5jdGlvbiBpbml0KHByb2dyYW0sIGR1cmF0aW9uKSB7XG4gICAgICAgIGNvbnN0IGQgPSAocHJvZ3JhbS5iIC0gdCk7XG4gICAgICAgIGR1cmF0aW9uICo9IE1hdGguYWJzKGQpO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgYTogdCxcbiAgICAgICAgICAgIGI6IHByb2dyYW0uYixcbiAgICAgICAgICAgIGQsXG4gICAgICAgICAgICBkdXJhdGlvbixcbiAgICAgICAgICAgIHN0YXJ0OiBwcm9ncmFtLnN0YXJ0LFxuICAgICAgICAgICAgZW5kOiBwcm9ncmFtLnN0YXJ0ICsgZHVyYXRpb24sXG4gICAgICAgICAgICBncm91cDogcHJvZ3JhbS5ncm91cFxuICAgICAgICB9O1xuICAgIH1cbiAgICBmdW5jdGlvbiBnbyhiKSB7XG4gICAgICAgIGNvbnN0IHsgZGVsYXkgPSAwLCBkdXJhdGlvbiA9IDMwMCwgZWFzaW5nID0gaWRlbnRpdHksIHRpY2sgPSBub29wLCBjc3MgfSA9IGNvbmZpZyB8fCBudWxsX3RyYW5zaXRpb247XG4gICAgICAgIGNvbnN0IHByb2dyYW0gPSB7XG4gICAgICAgICAgICBzdGFydDogbm93KCkgKyBkZWxheSxcbiAgICAgICAgICAgIGJcbiAgICAgICAgfTtcbiAgICAgICAgaWYgKCFiKSB7XG4gICAgICAgICAgICAvLyBAdHMtaWdub3JlIHRvZG86IGltcHJvdmUgdHlwaW5nc1xuICAgICAgICAgICAgcHJvZ3JhbS5ncm91cCA9IG91dHJvcztcbiAgICAgICAgICAgIG91dHJvcy5yICs9IDE7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHJ1bm5pbmdfcHJvZ3JhbSB8fCBwZW5kaW5nX3Byb2dyYW0pIHtcbiAgICAgICAgICAgIHBlbmRpbmdfcHJvZ3JhbSA9IHByb2dyYW07XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAvLyBpZiB0aGlzIGlzIGFuIGludHJvLCBhbmQgdGhlcmUncyBhIGRlbGF5LCB3ZSBuZWVkIHRvIGRvXG4gICAgICAgICAgICAvLyBhbiBpbml0aWFsIHRpY2sgYW5kL29yIGFwcGx5IENTUyBhbmltYXRpb24gaW1tZWRpYXRlbHlcbiAgICAgICAgICAgIGlmIChjc3MpIHtcbiAgICAgICAgICAgICAgICBjbGVhcl9hbmltYXRpb24oKTtcbiAgICAgICAgICAgICAgICBhbmltYXRpb25fbmFtZSA9IGNyZWF0ZV9ydWxlKG5vZGUsIHQsIGIsIGR1cmF0aW9uLCBkZWxheSwgZWFzaW5nLCBjc3MpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGIpXG4gICAgICAgICAgICAgICAgdGljaygwLCAxKTtcbiAgICAgICAgICAgIHJ1bm5pbmdfcHJvZ3JhbSA9IGluaXQocHJvZ3JhbSwgZHVyYXRpb24pO1xuICAgICAgICAgICAgYWRkX3JlbmRlcl9jYWxsYmFjaygoKSA9PiBkaXNwYXRjaChub2RlLCBiLCAnc3RhcnQnKSk7XG4gICAgICAgICAgICBsb29wKG5vdyA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKHBlbmRpbmdfcHJvZ3JhbSAmJiBub3cgPiBwZW5kaW5nX3Byb2dyYW0uc3RhcnQpIHtcbiAgICAgICAgICAgICAgICAgICAgcnVubmluZ19wcm9ncmFtID0gaW5pdChwZW5kaW5nX3Byb2dyYW0sIGR1cmF0aW9uKTtcbiAgICAgICAgICAgICAgICAgICAgcGVuZGluZ19wcm9ncmFtID0gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgZGlzcGF0Y2gobm9kZSwgcnVubmluZ19wcm9ncmFtLmIsICdzdGFydCcpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoY3NzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjbGVhcl9hbmltYXRpb24oKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFuaW1hdGlvbl9uYW1lID0gY3JlYXRlX3J1bGUobm9kZSwgdCwgcnVubmluZ19wcm9ncmFtLmIsIHJ1bm5pbmdfcHJvZ3JhbS5kdXJhdGlvbiwgMCwgZWFzaW5nLCBjb25maWcuY3NzKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAocnVubmluZ19wcm9ncmFtKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChub3cgPj0gcnVubmluZ19wcm9ncmFtLmVuZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGljayh0ID0gcnVubmluZ19wcm9ncmFtLmIsIDEgLSB0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRpc3BhdGNoKG5vZGUsIHJ1bm5pbmdfcHJvZ3JhbS5iLCAnZW5kJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXBlbmRpbmdfcHJvZ3JhbSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHdlJ3JlIGRvbmVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocnVubmluZ19wcm9ncmFtLmIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gaW50cm8g4oCUIHdlIGNhbiB0aWR5IHVwIGltbWVkaWF0ZWx5XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsZWFyX2FuaW1hdGlvbigpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gb3V0cm8g4oCUIG5lZWRzIHRvIGJlIGNvb3JkaW5hdGVkXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghLS1ydW5uaW5nX3Byb2dyYW0uZ3JvdXAucilcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJ1bl9hbGwocnVubmluZ19wcm9ncmFtLmdyb3VwLmMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHJ1bm5pbmdfcHJvZ3JhbSA9IG51bGw7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAobm93ID49IHJ1bm5pbmdfcHJvZ3JhbS5zdGFydCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcCA9IG5vdyAtIHJ1bm5pbmdfcHJvZ3JhbS5zdGFydDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHQgPSBydW5uaW5nX3Byb2dyYW0uYSArIHJ1bm5pbmdfcHJvZ3JhbS5kICogZWFzaW5nKHAgLyBydW5uaW5nX3Byb2dyYW0uZHVyYXRpb24pO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGljayh0LCAxIC0gdCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuICEhKHJ1bm5pbmdfcHJvZ3JhbSB8fCBwZW5kaW5nX3Byb2dyYW0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHtcbiAgICAgICAgcnVuKGIpIHtcbiAgICAgICAgICAgIGlmIChpc19mdW5jdGlvbihjb25maWcpKSB7XG4gICAgICAgICAgICAgICAgd2FpdCgpLnRoZW4oKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAvLyBAdHMtaWdub3JlXG4gICAgICAgICAgICAgICAgICAgIGNvbmZpZyA9IGNvbmZpZygpO1xuICAgICAgICAgICAgICAgICAgICBnbyhiKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGdvKGIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBlbmQoKSB7XG4gICAgICAgICAgICBjbGVhcl9hbmltYXRpb24oKTtcbiAgICAgICAgICAgIHJ1bm5pbmdfcHJvZ3JhbSA9IHBlbmRpbmdfcHJvZ3JhbSA9IG51bGw7XG4gICAgICAgIH1cbiAgICB9O1xufVxuXG5mdW5jdGlvbiBoYW5kbGVfcHJvbWlzZShwcm9taXNlLCBpbmZvKSB7XG4gICAgY29uc3QgdG9rZW4gPSBpbmZvLnRva2VuID0ge307XG4gICAgZnVuY3Rpb24gdXBkYXRlKHR5cGUsIGluZGV4LCBrZXksIHZhbHVlKSB7XG4gICAgICAgIGlmIChpbmZvLnRva2VuICE9PSB0b2tlbilcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgaW5mby5yZXNvbHZlZCA9IHZhbHVlO1xuICAgICAgICBsZXQgY2hpbGRfY3R4ID0gaW5mby5jdHg7XG4gICAgICAgIGlmIChrZXkgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgY2hpbGRfY3R4ID0gY2hpbGRfY3R4LnNsaWNlKCk7XG4gICAgICAgICAgICBjaGlsZF9jdHhba2V5XSA9IHZhbHVlO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGJsb2NrID0gdHlwZSAmJiAoaW5mby5jdXJyZW50ID0gdHlwZSkoY2hpbGRfY3R4KTtcbiAgICAgICAgbGV0IG5lZWRzX2ZsdXNoID0gZmFsc2U7XG4gICAgICAgIGlmIChpbmZvLmJsb2NrKSB7XG4gICAgICAgICAgICBpZiAoaW5mby5ibG9ja3MpIHtcbiAgICAgICAgICAgICAgICBpbmZvLmJsb2Nrcy5mb3JFYWNoKChibG9jaywgaSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBpZiAoaSAhPT0gaW5kZXggJiYgYmxvY2spIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGdyb3VwX291dHJvcygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdHJhbnNpdGlvbl9vdXQoYmxvY2ssIDEsIDEsICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaW5mby5ibG9ja3NbaV0gPT09IGJsb2NrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluZm8uYmxvY2tzW2ldID0gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNoZWNrX291dHJvcygpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBpbmZvLmJsb2NrLmQoMSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBibG9jay5jKCk7XG4gICAgICAgICAgICB0cmFuc2l0aW9uX2luKGJsb2NrLCAxKTtcbiAgICAgICAgICAgIGJsb2NrLm0oaW5mby5tb3VudCgpLCBpbmZvLmFuY2hvcik7XG4gICAgICAgICAgICBuZWVkc19mbHVzaCA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgaW5mby5ibG9jayA9IGJsb2NrO1xuICAgICAgICBpZiAoaW5mby5ibG9ja3MpXG4gICAgICAgICAgICBpbmZvLmJsb2Nrc1tpbmRleF0gPSBibG9jaztcbiAgICAgICAgaWYgKG5lZWRzX2ZsdXNoKSB7XG4gICAgICAgICAgICBmbHVzaCgpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGlmIChpc19wcm9taXNlKHByb21pc2UpKSB7XG4gICAgICAgIGNvbnN0IGN1cnJlbnRfY29tcG9uZW50ID0gZ2V0X2N1cnJlbnRfY29tcG9uZW50KCk7XG4gICAgICAgIHByb21pc2UudGhlbih2YWx1ZSA9PiB7XG4gICAgICAgICAgICBzZXRfY3VycmVudF9jb21wb25lbnQoY3VycmVudF9jb21wb25lbnQpO1xuICAgICAgICAgICAgdXBkYXRlKGluZm8udGhlbiwgMSwgaW5mby52YWx1ZSwgdmFsdWUpO1xuICAgICAgICAgICAgc2V0X2N1cnJlbnRfY29tcG9uZW50KG51bGwpO1xuICAgICAgICB9LCBlcnJvciA9PiB7XG4gICAgICAgICAgICBzZXRfY3VycmVudF9jb21wb25lbnQoY3VycmVudF9jb21wb25lbnQpO1xuICAgICAgICAgICAgdXBkYXRlKGluZm8uY2F0Y2gsIDIsIGluZm8uZXJyb3IsIGVycm9yKTtcbiAgICAgICAgICAgIHNldF9jdXJyZW50X2NvbXBvbmVudChudWxsKTtcbiAgICAgICAgICAgIGlmICghaW5mby5oYXNDYXRjaCkge1xuICAgICAgICAgICAgICAgIHRocm93IGVycm9yO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgLy8gaWYgd2UgcHJldmlvdXNseSBoYWQgYSB0aGVuL2NhdGNoIGJsb2NrLCBkZXN0cm95IGl0XG4gICAgICAgIGlmIChpbmZvLmN1cnJlbnQgIT09IGluZm8ucGVuZGluZykge1xuICAgICAgICAgICAgdXBkYXRlKGluZm8ucGVuZGluZywgMCk7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgaWYgKGluZm8uY3VycmVudCAhPT0gaW5mby50aGVuKSB7XG4gICAgICAgICAgICB1cGRhdGUoaW5mby50aGVuLCAxLCBpbmZvLnZhbHVlLCBwcm9taXNlKTtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGluZm8ucmVzb2x2ZWQgPSBwcm9taXNlO1xuICAgIH1cbn1cbmZ1bmN0aW9uIHVwZGF0ZV9hd2FpdF9ibG9ja19icmFuY2goaW5mbywgY3R4LCBkaXJ0eSkge1xuICAgIGNvbnN0IGNoaWxkX2N0eCA9IGN0eC5zbGljZSgpO1xuICAgIGNvbnN0IHsgcmVzb2x2ZWQgfSA9IGluZm87XG4gICAgaWYgKGluZm8uY3VycmVudCA9PT0gaW5mby50aGVuKSB7XG4gICAgICAgIGNoaWxkX2N0eFtpbmZvLnZhbHVlXSA9IHJlc29sdmVkO1xuICAgIH1cbiAgICBpZiAoaW5mby5jdXJyZW50ID09PSBpbmZvLmNhdGNoKSB7XG4gICAgICAgIGNoaWxkX2N0eFtpbmZvLmVycm9yXSA9IHJlc29sdmVkO1xuICAgIH1cbiAgICBpbmZvLmJsb2NrLnAoY2hpbGRfY3R4LCBkaXJ0eSk7XG59XG5cbmNvbnN0IGdsb2JhbHMgPSAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCdcbiAgICA/IHdpbmRvd1xuICAgIDogdHlwZW9mIGdsb2JhbFRoaXMgIT09ICd1bmRlZmluZWQnXG4gICAgICAgID8gZ2xvYmFsVGhpc1xuICAgICAgICA6IGdsb2JhbCk7XG5cbmZ1bmN0aW9uIGRlc3Ryb3lfYmxvY2soYmxvY2ssIGxvb2t1cCkge1xuICAgIGJsb2NrLmQoMSk7XG4gICAgbG9va3VwLmRlbGV0ZShibG9jay5rZXkpO1xufVxuZnVuY3Rpb24gb3V0cm9fYW5kX2Rlc3Ryb3lfYmxvY2soYmxvY2ssIGxvb2t1cCkge1xuICAgIHRyYW5zaXRpb25fb3V0KGJsb2NrLCAxLCAxLCAoKSA9PiB7XG4gICAgICAgIGxvb2t1cC5kZWxldGUoYmxvY2sua2V5KTtcbiAgICB9KTtcbn1cbmZ1bmN0aW9uIGZpeF9hbmRfZGVzdHJveV9ibG9jayhibG9jaywgbG9va3VwKSB7XG4gICAgYmxvY2suZigpO1xuICAgIGRlc3Ryb3lfYmxvY2soYmxvY2ssIGxvb2t1cCk7XG59XG5mdW5jdGlvbiBmaXhfYW5kX291dHJvX2FuZF9kZXN0cm95X2Jsb2NrKGJsb2NrLCBsb29rdXApIHtcbiAgICBibG9jay5mKCk7XG4gICAgb3V0cm9fYW5kX2Rlc3Ryb3lfYmxvY2soYmxvY2ssIGxvb2t1cCk7XG59XG5mdW5jdGlvbiB1cGRhdGVfa2V5ZWRfZWFjaChvbGRfYmxvY2tzLCBkaXJ0eSwgZ2V0X2tleSwgZHluYW1pYywgY3R4LCBsaXN0LCBsb29rdXAsIG5vZGUsIGRlc3Ryb3ksIGNyZWF0ZV9lYWNoX2Jsb2NrLCBuZXh0LCBnZXRfY29udGV4dCkge1xuICAgIGxldCBvID0gb2xkX2Jsb2Nrcy5sZW5ndGg7XG4gICAgbGV0IG4gPSBsaXN0Lmxlbmd0aDtcbiAgICBsZXQgaSA9IG87XG4gICAgY29uc3Qgb2xkX2luZGV4ZXMgPSB7fTtcbiAgICB3aGlsZSAoaS0tKVxuICAgICAgICBvbGRfaW5kZXhlc1tvbGRfYmxvY2tzW2ldLmtleV0gPSBpO1xuICAgIGNvbnN0IG5ld19ibG9ja3MgPSBbXTtcbiAgICBjb25zdCBuZXdfbG9va3VwID0gbmV3IE1hcCgpO1xuICAgIGNvbnN0IGRlbHRhcyA9IG5ldyBNYXAoKTtcbiAgICBpID0gbjtcbiAgICB3aGlsZSAoaS0tKSB7XG4gICAgICAgIGNvbnN0IGNoaWxkX2N0eCA9IGdldF9jb250ZXh0KGN0eCwgbGlzdCwgaSk7XG4gICAgICAgIGNvbnN0IGtleSA9IGdldF9rZXkoY2hpbGRfY3R4KTtcbiAgICAgICAgbGV0IGJsb2NrID0gbG9va3VwLmdldChrZXkpO1xuICAgICAgICBpZiAoIWJsb2NrKSB7XG4gICAgICAgICAgICBibG9jayA9IGNyZWF0ZV9lYWNoX2Jsb2NrKGtleSwgY2hpbGRfY3R4KTtcbiAgICAgICAgICAgIGJsb2NrLmMoKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChkeW5hbWljKSB7XG4gICAgICAgICAgICBibG9jay5wKGNoaWxkX2N0eCwgZGlydHkpO1xuICAgICAgICB9XG4gICAgICAgIG5ld19sb29rdXAuc2V0KGtleSwgbmV3X2Jsb2Nrc1tpXSA9IGJsb2NrKTtcbiAgICAgICAgaWYgKGtleSBpbiBvbGRfaW5kZXhlcylcbiAgICAgICAgICAgIGRlbHRhcy5zZXQoa2V5LCBNYXRoLmFicyhpIC0gb2xkX2luZGV4ZXNba2V5XSkpO1xuICAgIH1cbiAgICBjb25zdCB3aWxsX21vdmUgPSBuZXcgU2V0KCk7XG4gICAgY29uc3QgZGlkX21vdmUgPSBuZXcgU2V0KCk7XG4gICAgZnVuY3Rpb24gaW5zZXJ0KGJsb2NrKSB7XG4gICAgICAgIHRyYW5zaXRpb25faW4oYmxvY2ssIDEpO1xuICAgICAgICBibG9jay5tKG5vZGUsIG5leHQpO1xuICAgICAgICBsb29rdXAuc2V0KGJsb2NrLmtleSwgYmxvY2spO1xuICAgICAgICBuZXh0ID0gYmxvY2suZmlyc3Q7XG4gICAgICAgIG4tLTtcbiAgICB9XG4gICAgd2hpbGUgKG8gJiYgbikge1xuICAgICAgICBjb25zdCBuZXdfYmxvY2sgPSBuZXdfYmxvY2tzW24gLSAxXTtcbiAgICAgICAgY29uc3Qgb2xkX2Jsb2NrID0gb2xkX2Jsb2Nrc1tvIC0gMV07XG4gICAgICAgIGNvbnN0IG5ld19rZXkgPSBuZXdfYmxvY2sua2V5O1xuICAgICAgICBjb25zdCBvbGRfa2V5ID0gb2xkX2Jsb2NrLmtleTtcbiAgICAgICAgaWYgKG5ld19ibG9jayA9PT0gb2xkX2Jsb2NrKSB7XG4gICAgICAgICAgICAvLyBkbyBub3RoaW5nXG4gICAgICAgICAgICBuZXh0ID0gbmV3X2Jsb2NrLmZpcnN0O1xuICAgICAgICAgICAgby0tO1xuICAgICAgICAgICAgbi0tO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKCFuZXdfbG9va3VwLmhhcyhvbGRfa2V5KSkge1xuICAgICAgICAgICAgLy8gcmVtb3ZlIG9sZCBibG9ja1xuICAgICAgICAgICAgZGVzdHJveShvbGRfYmxvY2ssIGxvb2t1cCk7XG4gICAgICAgICAgICBvLS07XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoIWxvb2t1cC5oYXMobmV3X2tleSkgfHwgd2lsbF9tb3ZlLmhhcyhuZXdfa2V5KSkge1xuICAgICAgICAgICAgaW5zZXJ0KG5ld19ibG9jayk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoZGlkX21vdmUuaGFzKG9sZF9rZXkpKSB7XG4gICAgICAgICAgICBvLS07XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoZGVsdGFzLmdldChuZXdfa2V5KSA+IGRlbHRhcy5nZXQob2xkX2tleSkpIHtcbiAgICAgICAgICAgIGRpZF9tb3ZlLmFkZChuZXdfa2V5KTtcbiAgICAgICAgICAgIGluc2VydChuZXdfYmxvY2spO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgd2lsbF9tb3ZlLmFkZChvbGRfa2V5KTtcbiAgICAgICAgICAgIG8tLTtcbiAgICAgICAgfVxuICAgIH1cbiAgICB3aGlsZSAoby0tKSB7XG4gICAgICAgIGNvbnN0IG9sZF9ibG9jayA9IG9sZF9ibG9ja3Nbb107XG4gICAgICAgIGlmICghbmV3X2xvb2t1cC5oYXMob2xkX2Jsb2NrLmtleSkpXG4gICAgICAgICAgICBkZXN0cm95KG9sZF9ibG9jaywgbG9va3VwKTtcbiAgICB9XG4gICAgd2hpbGUgKG4pXG4gICAgICAgIGluc2VydChuZXdfYmxvY2tzW24gLSAxXSk7XG4gICAgcmV0dXJuIG5ld19ibG9ja3M7XG59XG5mdW5jdGlvbiB2YWxpZGF0ZV9lYWNoX2tleXMoY3R4LCBsaXN0LCBnZXRfY29udGV4dCwgZ2V0X2tleSkge1xuICAgIGNvbnN0IGtleXMgPSBuZXcgU2V0KCk7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsaXN0Lmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGNvbnN0IGtleSA9IGdldF9rZXkoZ2V0X2NvbnRleHQoY3R4LCBsaXN0LCBpKSk7XG4gICAgICAgIGlmIChrZXlzLmhhcyhrZXkpKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0Nhbm5vdCBoYXZlIGR1cGxpY2F0ZSBrZXlzIGluIGEga2V5ZWQgZWFjaCcpO1xuICAgICAgICB9XG4gICAgICAgIGtleXMuYWRkKGtleSk7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBnZXRfc3ByZWFkX3VwZGF0ZShsZXZlbHMsIHVwZGF0ZXMpIHtcbiAgICBjb25zdCB1cGRhdGUgPSB7fTtcbiAgICBjb25zdCB0b19udWxsX291dCA9IHt9O1xuICAgIGNvbnN0IGFjY291bnRlZF9mb3IgPSB7ICQkc2NvcGU6IDEgfTtcbiAgICBsZXQgaSA9IGxldmVscy5sZW5ndGg7XG4gICAgd2hpbGUgKGktLSkge1xuICAgICAgICBjb25zdCBvID0gbGV2ZWxzW2ldO1xuICAgICAgICBjb25zdCBuID0gdXBkYXRlc1tpXTtcbiAgICAgICAgaWYgKG4pIHtcbiAgICAgICAgICAgIGZvciAoY29uc3Qga2V5IGluIG8pIHtcbiAgICAgICAgICAgICAgICBpZiAoIShrZXkgaW4gbikpXG4gICAgICAgICAgICAgICAgICAgIHRvX251bGxfb3V0W2tleV0gPSAxO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZm9yIChjb25zdCBrZXkgaW4gbikge1xuICAgICAgICAgICAgICAgIGlmICghYWNjb3VudGVkX2ZvcltrZXldKSB7XG4gICAgICAgICAgICAgICAgICAgIHVwZGF0ZVtrZXldID0gbltrZXldO1xuICAgICAgICAgICAgICAgICAgICBhY2NvdW50ZWRfZm9yW2tleV0gPSAxO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGxldmVsc1tpXSA9IG47XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IGtleSBpbiBvKSB7XG4gICAgICAgICAgICAgICAgYWNjb3VudGVkX2ZvcltrZXldID0gMTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBmb3IgKGNvbnN0IGtleSBpbiB0b19udWxsX291dCkge1xuICAgICAgICBpZiAoIShrZXkgaW4gdXBkYXRlKSlcbiAgICAgICAgICAgIHVwZGF0ZVtrZXldID0gdW5kZWZpbmVkO1xuICAgIH1cbiAgICByZXR1cm4gdXBkYXRlO1xufVxuZnVuY3Rpb24gZ2V0X3NwcmVhZF9vYmplY3Qoc3ByZWFkX3Byb3BzKSB7XG4gICAgcmV0dXJuIHR5cGVvZiBzcHJlYWRfcHJvcHMgPT09ICdvYmplY3QnICYmIHNwcmVhZF9wcm9wcyAhPT0gbnVsbCA/IHNwcmVhZF9wcm9wcyA6IHt9O1xufVxuXG4vLyBzb3VyY2U6IGh0dHBzOi8vaHRtbC5zcGVjLndoYXR3Zy5vcmcvbXVsdGlwYWdlL2luZGljZXMuaHRtbFxuY29uc3QgYm9vbGVhbl9hdHRyaWJ1dGVzID0gbmV3IFNldChbXG4gICAgJ2FsbG93ZnVsbHNjcmVlbicsXG4gICAgJ2FsbG93cGF5bWVudHJlcXVlc3QnLFxuICAgICdhc3luYycsXG4gICAgJ2F1dG9mb2N1cycsXG4gICAgJ2F1dG9wbGF5JyxcbiAgICAnY2hlY2tlZCcsXG4gICAgJ2NvbnRyb2xzJyxcbiAgICAnZGVmYXVsdCcsXG4gICAgJ2RlZmVyJyxcbiAgICAnZGlzYWJsZWQnLFxuICAgICdmb3Jtbm92YWxpZGF0ZScsXG4gICAgJ2hpZGRlbicsXG4gICAgJ2lzbWFwJyxcbiAgICAnbG9vcCcsXG4gICAgJ211bHRpcGxlJyxcbiAgICAnbXV0ZWQnLFxuICAgICdub21vZHVsZScsXG4gICAgJ25vdmFsaWRhdGUnLFxuICAgICdvcGVuJyxcbiAgICAncGxheXNpbmxpbmUnLFxuICAgICdyZWFkb25seScsXG4gICAgJ3JlcXVpcmVkJyxcbiAgICAncmV2ZXJzZWQnLFxuICAgICdzZWxlY3RlZCdcbl0pO1xuXG5jb25zdCBpbnZhbGlkX2F0dHJpYnV0ZV9uYW1lX2NoYXJhY3RlciA9IC9bXFxzJ1wiPi89XFx1e0ZERDB9LVxcdXtGREVGfVxcdXtGRkZFfVxcdXtGRkZGfVxcdXsxRkZGRX1cXHV7MUZGRkZ9XFx1ezJGRkZFfVxcdXsyRkZGRn1cXHV7M0ZGRkV9XFx1ezNGRkZGfVxcdXs0RkZGRX1cXHV7NEZGRkZ9XFx1ezVGRkZFfVxcdXs1RkZGRn1cXHV7NkZGRkV9XFx1ezZGRkZGfVxcdXs3RkZGRX1cXHV7N0ZGRkZ9XFx1ezhGRkZFfVxcdXs4RkZGRn1cXHV7OUZGRkV9XFx1ezlGRkZGfVxcdXtBRkZGRX1cXHV7QUZGRkZ9XFx1e0JGRkZFfVxcdXtCRkZGRn1cXHV7Q0ZGRkV9XFx1e0NGRkZGfVxcdXtERkZGRX1cXHV7REZGRkZ9XFx1e0VGRkZFfVxcdXtFRkZGRn1cXHV7RkZGRkV9XFx1e0ZGRkZGfVxcdXsxMEZGRkV9XFx1ezEwRkZGRn1dL3U7XG4vLyBodHRwczovL2h0bWwuc3BlYy53aGF0d2cub3JnL211bHRpcGFnZS9zeW50YXguaHRtbCNhdHRyaWJ1dGVzLTJcbi8vIGh0dHBzOi8vaW5mcmEuc3BlYy53aGF0d2cub3JnLyNub25jaGFyYWN0ZXJcbmZ1bmN0aW9uIHNwcmVhZChhcmdzLCBhdHRyc190b19hZGQpIHtcbiAgICBjb25zdCBhdHRyaWJ1dGVzID0gT2JqZWN0LmFzc2lnbih7fSwgLi4uYXJncyk7XG4gICAgaWYgKGF0dHJzX3RvX2FkZCkge1xuICAgICAgICBjb25zdCBjbGFzc2VzX3RvX2FkZCA9IGF0dHJzX3RvX2FkZC5jbGFzc2VzO1xuICAgICAgICBjb25zdCBzdHlsZXNfdG9fYWRkID0gYXR0cnNfdG9fYWRkLnN0eWxlcztcbiAgICAgICAgaWYgKGNsYXNzZXNfdG9fYWRkKSB7XG4gICAgICAgICAgICBpZiAoYXR0cmlidXRlcy5jbGFzcyA9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgYXR0cmlidXRlcy5jbGFzcyA9IGNsYXNzZXNfdG9fYWRkO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgYXR0cmlidXRlcy5jbGFzcyArPSAnICcgKyBjbGFzc2VzX3RvX2FkZDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoc3R5bGVzX3RvX2FkZCkge1xuICAgICAgICAgICAgaWYgKGF0dHJpYnV0ZXMuc3R5bGUgPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIGF0dHJpYnV0ZXMuc3R5bGUgPSBzdHlsZV9vYmplY3RfdG9fc3RyaW5nKHN0eWxlc190b19hZGQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgYXR0cmlidXRlcy5zdHlsZSA9IHN0eWxlX29iamVjdF90b19zdHJpbmcobWVyZ2Vfc3NyX3N0eWxlcyhhdHRyaWJ1dGVzLnN0eWxlLCBzdHlsZXNfdG9fYWRkKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgbGV0IHN0ciA9ICcnO1xuICAgIE9iamVjdC5rZXlzKGF0dHJpYnV0ZXMpLmZvckVhY2gobmFtZSA9PiB7XG4gICAgICAgIGlmIChpbnZhbGlkX2F0dHJpYnV0ZV9uYW1lX2NoYXJhY3Rlci50ZXN0KG5hbWUpKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICBjb25zdCB2YWx1ZSA9IGF0dHJpYnV0ZXNbbmFtZV07XG4gICAgICAgIGlmICh2YWx1ZSA9PT0gdHJ1ZSlcbiAgICAgICAgICAgIHN0ciArPSAnICcgKyBuYW1lO1xuICAgICAgICBlbHNlIGlmIChib29sZWFuX2F0dHJpYnV0ZXMuaGFzKG5hbWUudG9Mb3dlckNhc2UoKSkpIHtcbiAgICAgICAgICAgIGlmICh2YWx1ZSlcbiAgICAgICAgICAgICAgICBzdHIgKz0gJyAnICsgbmFtZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh2YWx1ZSAhPSBudWxsKSB7XG4gICAgICAgICAgICBzdHIgKz0gYCAke25hbWV9PVwiJHt2YWx1ZX1cImA7XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICByZXR1cm4gc3RyO1xufVxuZnVuY3Rpb24gbWVyZ2Vfc3NyX3N0eWxlcyhzdHlsZV9hdHRyaWJ1dGUsIHN0eWxlX2RpcmVjdGl2ZSkge1xuICAgIGNvbnN0IHN0eWxlX29iamVjdCA9IHt9O1xuICAgIGZvciAoY29uc3QgaW5kaXZpZHVhbF9zdHlsZSBvZiBzdHlsZV9hdHRyaWJ1dGUuc3BsaXQoJzsnKSkge1xuICAgICAgICBjb25zdCBjb2xvbl9pbmRleCA9IGluZGl2aWR1YWxfc3R5bGUuaW5kZXhPZignOicpO1xuICAgICAgICBjb25zdCBuYW1lID0gaW5kaXZpZHVhbF9zdHlsZS5zbGljZSgwLCBjb2xvbl9pbmRleCkudHJpbSgpO1xuICAgICAgICBjb25zdCB2YWx1ZSA9IGluZGl2aWR1YWxfc3R5bGUuc2xpY2UoY29sb25faW5kZXggKyAxKS50cmltKCk7XG4gICAgICAgIGlmICghbmFtZSlcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICBzdHlsZV9vYmplY3RbbmFtZV0gPSB2YWx1ZTtcbiAgICB9XG4gICAgZm9yIChjb25zdCBuYW1lIGluIHN0eWxlX2RpcmVjdGl2ZSkge1xuICAgICAgICBjb25zdCB2YWx1ZSA9IHN0eWxlX2RpcmVjdGl2ZVtuYW1lXTtcbiAgICAgICAgaWYgKHZhbHVlKSB7XG4gICAgICAgICAgICBzdHlsZV9vYmplY3RbbmFtZV0gPSB2YWx1ZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGRlbGV0ZSBzdHlsZV9vYmplY3RbbmFtZV07XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHN0eWxlX29iamVjdDtcbn1cbmNvbnN0IGVzY2FwZWQgPSB7XG4gICAgJ1wiJzogJyZxdW90OycsXG4gICAgXCInXCI6ICcmIzM5OycsXG4gICAgJyYnOiAnJmFtcDsnLFxuICAgICc8JzogJyZsdDsnLFxuICAgICc+JzogJyZndDsnXG59O1xuZnVuY3Rpb24gZXNjYXBlKGh0bWwpIHtcbiAgICByZXR1cm4gU3RyaW5nKGh0bWwpLnJlcGxhY2UoL1tcIicmPD5dL2csIG1hdGNoID0+IGVzY2FwZWRbbWF0Y2hdKTtcbn1cbmZ1bmN0aW9uIGVzY2FwZV9hdHRyaWJ1dGVfdmFsdWUodmFsdWUpIHtcbiAgICByZXR1cm4gdHlwZW9mIHZhbHVlID09PSAnc3RyaW5nJyA/IGVzY2FwZSh2YWx1ZSkgOiB2YWx1ZTtcbn1cbmZ1bmN0aW9uIGVzY2FwZV9vYmplY3Qob2JqKSB7XG4gICAgY29uc3QgcmVzdWx0ID0ge307XG4gICAgZm9yIChjb25zdCBrZXkgaW4gb2JqKSB7XG4gICAgICAgIHJlc3VsdFtrZXldID0gZXNjYXBlX2F0dHJpYnV0ZV92YWx1ZShvYmpba2V5XSk7XG4gICAgfVxuICAgIHJldHVybiByZXN1bHQ7XG59XG5mdW5jdGlvbiBlYWNoKGl0ZW1zLCBmbikge1xuICAgIGxldCBzdHIgPSAnJztcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGl0ZW1zLmxlbmd0aDsgaSArPSAxKSB7XG4gICAgICAgIHN0ciArPSBmbihpdGVtc1tpXSwgaSk7XG4gICAgfVxuICAgIHJldHVybiBzdHI7XG59XG5jb25zdCBtaXNzaW5nX2NvbXBvbmVudCA9IHtcbiAgICAkJHJlbmRlcjogKCkgPT4gJydcbn07XG5mdW5jdGlvbiB2YWxpZGF0ZV9jb21wb25lbnQoY29tcG9uZW50LCBuYW1lKSB7XG4gICAgaWYgKCFjb21wb25lbnQgfHwgIWNvbXBvbmVudC4kJHJlbmRlcikge1xuICAgICAgICBpZiAobmFtZSA9PT0gJ3N2ZWx0ZTpjb21wb25lbnQnKVxuICAgICAgICAgICAgbmFtZSArPSAnIHRoaXM9ey4uLn0nO1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYDwke25hbWV9PiBpcyBub3QgYSB2YWxpZCBTU1IgY29tcG9uZW50LiBZb3UgbWF5IG5lZWQgdG8gcmV2aWV3IHlvdXIgYnVpbGQgY29uZmlnIHRvIGVuc3VyZSB0aGF0IGRlcGVuZGVuY2llcyBhcmUgY29tcGlsZWQsIHJhdGhlciB0aGFuIGltcG9ydGVkIGFzIHByZS1jb21waWxlZCBtb2R1bGVzYCk7XG4gICAgfVxuICAgIHJldHVybiBjb21wb25lbnQ7XG59XG5mdW5jdGlvbiBkZWJ1ZyhmaWxlLCBsaW5lLCBjb2x1bW4sIHZhbHVlcykge1xuICAgIGNvbnNvbGUubG9nKGB7QGRlYnVnfSAke2ZpbGUgPyBmaWxlICsgJyAnIDogJyd9KCR7bGluZX06JHtjb2x1bW59KWApOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLWNvbnNvbGVcbiAgICBjb25zb2xlLmxvZyh2YWx1ZXMpOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLWNvbnNvbGVcbiAgICByZXR1cm4gJyc7XG59XG5sZXQgb25fZGVzdHJveTtcbmZ1bmN0aW9uIGNyZWF0ZV9zc3JfY29tcG9uZW50KGZuKSB7XG4gICAgZnVuY3Rpb24gJCRyZW5kZXIocmVzdWx0LCBwcm9wcywgYmluZGluZ3MsIHNsb3RzLCBjb250ZXh0KSB7XG4gICAgICAgIGNvbnN0IHBhcmVudF9jb21wb25lbnQgPSBjdXJyZW50X2NvbXBvbmVudDtcbiAgICAgICAgY29uc3QgJCQgPSB7XG4gICAgICAgICAgICBvbl9kZXN0cm95LFxuICAgICAgICAgICAgY29udGV4dDogbmV3IE1hcChjb250ZXh0IHx8IChwYXJlbnRfY29tcG9uZW50ID8gcGFyZW50X2NvbXBvbmVudC4kJC5jb250ZXh0IDogW10pKSxcbiAgICAgICAgICAgIC8vIHRoZXNlIHdpbGwgYmUgaW1tZWRpYXRlbHkgZGlzY2FyZGVkXG4gICAgICAgICAgICBvbl9tb3VudDogW10sXG4gICAgICAgICAgICBiZWZvcmVfdXBkYXRlOiBbXSxcbiAgICAgICAgICAgIGFmdGVyX3VwZGF0ZTogW10sXG4gICAgICAgICAgICBjYWxsYmFja3M6IGJsYW5rX29iamVjdCgpXG4gICAgICAgIH07XG4gICAgICAgIHNldF9jdXJyZW50X2NvbXBvbmVudCh7ICQkIH0pO1xuICAgICAgICBjb25zdCBodG1sID0gZm4ocmVzdWx0LCBwcm9wcywgYmluZGluZ3MsIHNsb3RzKTtcbiAgICAgICAgc2V0X2N1cnJlbnRfY29tcG9uZW50KHBhcmVudF9jb21wb25lbnQpO1xuICAgICAgICByZXR1cm4gaHRtbDtcbiAgICB9XG4gICAgcmV0dXJuIHtcbiAgICAgICAgcmVuZGVyOiAocHJvcHMgPSB7fSwgeyAkJHNsb3RzID0ge30sIGNvbnRleHQgPSBuZXcgTWFwKCkgfSA9IHt9KSA9PiB7XG4gICAgICAgICAgICBvbl9kZXN0cm95ID0gW107XG4gICAgICAgICAgICBjb25zdCByZXN1bHQgPSB7IHRpdGxlOiAnJywgaGVhZDogJycsIGNzczogbmV3IFNldCgpIH07XG4gICAgICAgICAgICBjb25zdCBodG1sID0gJCRyZW5kZXIocmVzdWx0LCBwcm9wcywge30sICQkc2xvdHMsIGNvbnRleHQpO1xuICAgICAgICAgICAgcnVuX2FsbChvbl9kZXN0cm95KTtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgaHRtbCxcbiAgICAgICAgICAgICAgICBjc3M6IHtcbiAgICAgICAgICAgICAgICAgICAgY29kZTogQXJyYXkuZnJvbShyZXN1bHQuY3NzKS5tYXAoY3NzID0+IGNzcy5jb2RlKS5qb2luKCdcXG4nKSxcbiAgICAgICAgICAgICAgICAgICAgbWFwOiBudWxsIC8vIFRPRE9cbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGhlYWQ6IHJlc3VsdC50aXRsZSArIHJlc3VsdC5oZWFkXG4gICAgICAgICAgICB9O1xuICAgICAgICB9LFxuICAgICAgICAkJHJlbmRlclxuICAgIH07XG59XG5mdW5jdGlvbiBhZGRfYXR0cmlidXRlKG5hbWUsIHZhbHVlLCBib29sZWFuKSB7XG4gICAgaWYgKHZhbHVlID09IG51bGwgfHwgKGJvb2xlYW4gJiYgIXZhbHVlKSlcbiAgICAgICAgcmV0dXJuICcnO1xuICAgIHJldHVybiBgICR7bmFtZX0ke3ZhbHVlID09PSB0cnVlICYmIGJvb2xlYW5fYXR0cmlidXRlcy5oYXMobmFtZSkgPyAnJyA6IGA9JHt0eXBlb2YgdmFsdWUgPT09ICdzdHJpbmcnID8gSlNPTi5zdHJpbmdpZnkoZXNjYXBlKHZhbHVlKSkgOiBgXCIke3ZhbHVlfVwiYH1gfWA7XG59XG5mdW5jdGlvbiBhZGRfY2xhc3NlcyhjbGFzc2VzKSB7XG4gICAgcmV0dXJuIGNsYXNzZXMgPyBgIGNsYXNzPVwiJHtjbGFzc2VzfVwiYCA6ICcnO1xufVxuZnVuY3Rpb24gc3R5bGVfb2JqZWN0X3RvX3N0cmluZyhzdHlsZV9vYmplY3QpIHtcbiAgICByZXR1cm4gT2JqZWN0LmtleXMoc3R5bGVfb2JqZWN0KVxuICAgICAgICAuZmlsdGVyKGtleSA9PiBzdHlsZV9vYmplY3Rba2V5XSlcbiAgICAgICAgLm1hcChrZXkgPT4gYCR7a2V5fTogJHtzdHlsZV9vYmplY3Rba2V5XX07YClcbiAgICAgICAgLmpvaW4oJyAnKTtcbn1cbmZ1bmN0aW9uIGFkZF9zdHlsZXMoc3R5bGVfb2JqZWN0KSB7XG4gICAgY29uc3Qgc3R5bGVzID0gc3R5bGVfb2JqZWN0X3RvX3N0cmluZyhzdHlsZV9vYmplY3QpO1xuICAgIHJldHVybiBzdHlsZXMgPyBgIHN0eWxlPVwiJHtzdHlsZXN9XCJgIDogJyc7XG59XG5cbmZ1bmN0aW9uIGJpbmQoY29tcG9uZW50LCBuYW1lLCBjYWxsYmFjaykge1xuICAgIGNvbnN0IGluZGV4ID0gY29tcG9uZW50LiQkLnByb3BzW25hbWVdO1xuICAgIGlmIChpbmRleCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIGNvbXBvbmVudC4kJC5ib3VuZFtpbmRleF0gPSBjYWxsYmFjaztcbiAgICAgICAgY2FsbGJhY2soY29tcG9uZW50LiQkLmN0eFtpbmRleF0pO1xuICAgIH1cbn1cbmZ1bmN0aW9uIGNyZWF0ZV9jb21wb25lbnQoYmxvY2spIHtcbiAgICBibG9jayAmJiBibG9jay5jKCk7XG59XG5mdW5jdGlvbiBjbGFpbV9jb21wb25lbnQoYmxvY2ssIHBhcmVudF9ub2Rlcykge1xuICAgIGJsb2NrICYmIGJsb2NrLmwocGFyZW50X25vZGVzKTtcbn1cbmZ1bmN0aW9uIG1vdW50X2NvbXBvbmVudChjb21wb25lbnQsIHRhcmdldCwgYW5jaG9yLCBjdXN0b21FbGVtZW50KSB7XG4gICAgY29uc3QgeyBmcmFnbWVudCwgb25fbW91bnQsIG9uX2Rlc3Ryb3ksIGFmdGVyX3VwZGF0ZSB9ID0gY29tcG9uZW50LiQkO1xuICAgIGZyYWdtZW50ICYmIGZyYWdtZW50Lm0odGFyZ2V0LCBhbmNob3IpO1xuICAgIGlmICghY3VzdG9tRWxlbWVudCkge1xuICAgICAgICAvLyBvbk1vdW50IGhhcHBlbnMgYmVmb3JlIHRoZSBpbml0aWFsIGFmdGVyVXBkYXRlXG4gICAgICAgIGFkZF9yZW5kZXJfY2FsbGJhY2soKCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgbmV3X29uX2Rlc3Ryb3kgPSBvbl9tb3VudC5tYXAocnVuKS5maWx0ZXIoaXNfZnVuY3Rpb24pO1xuICAgICAgICAgICAgaWYgKG9uX2Rlc3Ryb3kpIHtcbiAgICAgICAgICAgICAgICBvbl9kZXN0cm95LnB1c2goLi4ubmV3X29uX2Rlc3Ryb3kpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgLy8gRWRnZSBjYXNlIC0gY29tcG9uZW50IHdhcyBkZXN0cm95ZWQgaW1tZWRpYXRlbHksXG4gICAgICAgICAgICAgICAgLy8gbW9zdCBsaWtlbHkgYXMgYSByZXN1bHQgb2YgYSBiaW5kaW5nIGluaXRpYWxpc2luZ1xuICAgICAgICAgICAgICAgIHJ1bl9hbGwobmV3X29uX2Rlc3Ryb3kpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29tcG9uZW50LiQkLm9uX21vdW50ID0gW107XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBhZnRlcl91cGRhdGUuZm9yRWFjaChhZGRfcmVuZGVyX2NhbGxiYWNrKTtcbn1cbmZ1bmN0aW9uIGRlc3Ryb3lfY29tcG9uZW50KGNvbXBvbmVudCwgZGV0YWNoaW5nKSB7XG4gICAgY29uc3QgJCQgPSBjb21wb25lbnQuJCQ7XG4gICAgaWYgKCQkLmZyYWdtZW50ICE9PSBudWxsKSB7XG4gICAgICAgIHJ1bl9hbGwoJCQub25fZGVzdHJveSk7XG4gICAgICAgICQkLmZyYWdtZW50ICYmICQkLmZyYWdtZW50LmQoZGV0YWNoaW5nKTtcbiAgICAgICAgLy8gVE9ETyBudWxsIG91dCBvdGhlciByZWZzLCBpbmNsdWRpbmcgY29tcG9uZW50LiQkIChidXQgbmVlZCB0b1xuICAgICAgICAvLyBwcmVzZXJ2ZSBmaW5hbCBzdGF0ZT8pXG4gICAgICAgICQkLm9uX2Rlc3Ryb3kgPSAkJC5mcmFnbWVudCA9IG51bGw7XG4gICAgICAgICQkLmN0eCA9IFtdO1xuICAgIH1cbn1cbmZ1bmN0aW9uIG1ha2VfZGlydHkoY29tcG9uZW50LCBpKSB7XG4gICAgaWYgKGNvbXBvbmVudC4kJC5kaXJ0eVswXSA9PT0gLTEpIHtcbiAgICAgICAgZGlydHlfY29tcG9uZW50cy5wdXNoKGNvbXBvbmVudCk7XG4gICAgICAgIHNjaGVkdWxlX3VwZGF0ZSgpO1xuICAgICAgICBjb21wb25lbnQuJCQuZGlydHkuZmlsbCgwKTtcbiAgICB9XG4gICAgY29tcG9uZW50LiQkLmRpcnR5WyhpIC8gMzEpIHwgMF0gfD0gKDEgPDwgKGkgJSAzMSkpO1xufVxuZnVuY3Rpb24gaW5pdChjb21wb25lbnQsIG9wdGlvbnMsIGluc3RhbmNlLCBjcmVhdGVfZnJhZ21lbnQsIG5vdF9lcXVhbCwgcHJvcHMsIGFwcGVuZF9zdHlsZXMsIGRpcnR5ID0gWy0xXSkge1xuICAgIGNvbnN0IHBhcmVudF9jb21wb25lbnQgPSBjdXJyZW50X2NvbXBvbmVudDtcbiAgICBzZXRfY3VycmVudF9jb21wb25lbnQoY29tcG9uZW50KTtcbiAgICBjb25zdCAkJCA9IGNvbXBvbmVudC4kJCA9IHtcbiAgICAgICAgZnJhZ21lbnQ6IG51bGwsXG4gICAgICAgIGN0eDogbnVsbCxcbiAgICAgICAgLy8gc3RhdGVcbiAgICAgICAgcHJvcHMsXG4gICAgICAgIHVwZGF0ZTogbm9vcCxcbiAgICAgICAgbm90X2VxdWFsLFxuICAgICAgICBib3VuZDogYmxhbmtfb2JqZWN0KCksXG4gICAgICAgIC8vIGxpZmVjeWNsZVxuICAgICAgICBvbl9tb3VudDogW10sXG4gICAgICAgIG9uX2Rlc3Ryb3k6IFtdLFxuICAgICAgICBvbl9kaXNjb25uZWN0OiBbXSxcbiAgICAgICAgYmVmb3JlX3VwZGF0ZTogW10sXG4gICAgICAgIGFmdGVyX3VwZGF0ZTogW10sXG4gICAgICAgIGNvbnRleHQ6IG5ldyBNYXAob3B0aW9ucy5jb250ZXh0IHx8IChwYXJlbnRfY29tcG9uZW50ID8gcGFyZW50X2NvbXBvbmVudC4kJC5jb250ZXh0IDogW10pKSxcbiAgICAgICAgLy8gZXZlcnl0aGluZyBlbHNlXG4gICAgICAgIGNhbGxiYWNrczogYmxhbmtfb2JqZWN0KCksXG4gICAgICAgIGRpcnR5LFxuICAgICAgICBza2lwX2JvdW5kOiBmYWxzZSxcbiAgICAgICAgcm9vdDogb3B0aW9ucy50YXJnZXQgfHwgcGFyZW50X2NvbXBvbmVudC4kJC5yb290XG4gICAgfTtcbiAgICBhcHBlbmRfc3R5bGVzICYmIGFwcGVuZF9zdHlsZXMoJCQucm9vdCk7XG4gICAgbGV0IHJlYWR5ID0gZmFsc2U7XG4gICAgJCQuY3R4ID0gaW5zdGFuY2VcbiAgICAgICAgPyBpbnN0YW5jZShjb21wb25lbnQsIG9wdGlvbnMucHJvcHMgfHwge30sIChpLCByZXQsIC4uLnJlc3QpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHZhbHVlID0gcmVzdC5sZW5ndGggPyByZXN0WzBdIDogcmV0O1xuICAgICAgICAgICAgaWYgKCQkLmN0eCAmJiBub3RfZXF1YWwoJCQuY3R4W2ldLCAkJC5jdHhbaV0gPSB2YWx1ZSkpIHtcbiAgICAgICAgICAgICAgICBpZiAoISQkLnNraXBfYm91bmQgJiYgJCQuYm91bmRbaV0pXG4gICAgICAgICAgICAgICAgICAgICQkLmJvdW5kW2ldKHZhbHVlKTtcbiAgICAgICAgICAgICAgICBpZiAocmVhZHkpXG4gICAgICAgICAgICAgICAgICAgIG1ha2VfZGlydHkoY29tcG9uZW50LCBpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiByZXQ7XG4gICAgICAgIH0pXG4gICAgICAgIDogW107XG4gICAgJCQudXBkYXRlKCk7XG4gICAgcmVhZHkgPSB0cnVlO1xuICAgIHJ1bl9hbGwoJCQuYmVmb3JlX3VwZGF0ZSk7XG4gICAgLy8gYGZhbHNlYCBhcyBhIHNwZWNpYWwgY2FzZSBvZiBubyBET00gY29tcG9uZW50XG4gICAgJCQuZnJhZ21lbnQgPSBjcmVhdGVfZnJhZ21lbnQgPyBjcmVhdGVfZnJhZ21lbnQoJCQuY3R4KSA6IGZhbHNlO1xuICAgIGlmIChvcHRpb25zLnRhcmdldCkge1xuICAgICAgICBpZiAob3B0aW9ucy5oeWRyYXRlKSB7XG4gICAgICAgICAgICBzdGFydF9oeWRyYXRpbmcoKTtcbiAgICAgICAgICAgIGNvbnN0IG5vZGVzID0gY2hpbGRyZW4ob3B0aW9ucy50YXJnZXQpO1xuICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1ub24tbnVsbC1hc3NlcnRpb25cbiAgICAgICAgICAgICQkLmZyYWdtZW50ICYmICQkLmZyYWdtZW50Lmwobm9kZXMpO1xuICAgICAgICAgICAgbm9kZXMuZm9yRWFjaChkZXRhY2gpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1ub24tbnVsbC1hc3NlcnRpb25cbiAgICAgICAgICAgICQkLmZyYWdtZW50ICYmICQkLmZyYWdtZW50LmMoKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAob3B0aW9ucy5pbnRybylcbiAgICAgICAgICAgIHRyYW5zaXRpb25faW4oY29tcG9uZW50LiQkLmZyYWdtZW50KTtcbiAgICAgICAgbW91bnRfY29tcG9uZW50KGNvbXBvbmVudCwgb3B0aW9ucy50YXJnZXQsIG9wdGlvbnMuYW5jaG9yLCBvcHRpb25zLmN1c3RvbUVsZW1lbnQpO1xuICAgICAgICBlbmRfaHlkcmF0aW5nKCk7XG4gICAgICAgIGZsdXNoKCk7XG4gICAgfVxuICAgIHNldF9jdXJyZW50X2NvbXBvbmVudChwYXJlbnRfY29tcG9uZW50KTtcbn1cbmxldCBTdmVsdGVFbGVtZW50O1xuaWYgKHR5cGVvZiBIVE1MRWxlbWVudCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgIFN2ZWx0ZUVsZW1lbnQgPSBjbGFzcyBleHRlbmRzIEhUTUxFbGVtZW50IHtcbiAgICAgICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgICAgICBzdXBlcigpO1xuICAgICAgICAgICAgdGhpcy5hdHRhY2hTaGFkb3coeyBtb2RlOiAnb3BlbicgfSk7XG4gICAgICAgIH1cbiAgICAgICAgY29ubmVjdGVkQ2FsbGJhY2soKSB7XG4gICAgICAgICAgICBjb25zdCB7IG9uX21vdW50IH0gPSB0aGlzLiQkO1xuICAgICAgICAgICAgdGhpcy4kJC5vbl9kaXNjb25uZWN0ID0gb25fbW91bnQubWFwKHJ1bikuZmlsdGVyKGlzX2Z1bmN0aW9uKTtcbiAgICAgICAgICAgIC8vIEB0cy1pZ25vcmUgdG9kbzogaW1wcm92ZSB0eXBpbmdzXG4gICAgICAgICAgICBmb3IgKGNvbnN0IGtleSBpbiB0aGlzLiQkLnNsb3R0ZWQpIHtcbiAgICAgICAgICAgICAgICAvLyBAdHMtaWdub3JlIHRvZG86IGltcHJvdmUgdHlwaW5nc1xuICAgICAgICAgICAgICAgIHRoaXMuYXBwZW5kQ2hpbGQodGhpcy4kJC5zbG90dGVkW2tleV0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGF0dHJpYnV0ZUNoYW5nZWRDYWxsYmFjayhhdHRyLCBfb2xkVmFsdWUsIG5ld1ZhbHVlKSB7XG4gICAgICAgICAgICB0aGlzW2F0dHJdID0gbmV3VmFsdWU7XG4gICAgICAgIH1cbiAgICAgICAgZGlzY29ubmVjdGVkQ2FsbGJhY2soKSB7XG4gICAgICAgICAgICBydW5fYWxsKHRoaXMuJCQub25fZGlzY29ubmVjdCk7XG4gICAgICAgIH1cbiAgICAgICAgJGRlc3Ryb3koKSB7XG4gICAgICAgICAgICBkZXN0cm95X2NvbXBvbmVudCh0aGlzLCAxKTtcbiAgICAgICAgICAgIHRoaXMuJGRlc3Ryb3kgPSBub29wO1xuICAgICAgICB9XG4gICAgICAgICRvbih0eXBlLCBjYWxsYmFjaykge1xuICAgICAgICAgICAgLy8gVE9ETyBzaG91bGQgdGhpcyBkZWxlZ2F0ZSB0byBhZGRFdmVudExpc3RlbmVyP1xuICAgICAgICAgICAgY29uc3QgY2FsbGJhY2tzID0gKHRoaXMuJCQuY2FsbGJhY2tzW3R5cGVdIHx8ICh0aGlzLiQkLmNhbGxiYWNrc1t0eXBlXSA9IFtdKSk7XG4gICAgICAgICAgICBjYWxsYmFja3MucHVzaChjYWxsYmFjayk7XG4gICAgICAgICAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IGluZGV4ID0gY2FsbGJhY2tzLmluZGV4T2YoY2FsbGJhY2spO1xuICAgICAgICAgICAgICAgIGlmIChpbmRleCAhPT0gLTEpXG4gICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrcy5zcGxpY2UoaW5kZXgsIDEpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgICAkc2V0KCQkcHJvcHMpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLiQkc2V0ICYmICFpc19lbXB0eSgkJHByb3BzKSkge1xuICAgICAgICAgICAgICAgIHRoaXMuJCQuc2tpcF9ib3VuZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgdGhpcy4kJHNldCgkJHByb3BzKTtcbiAgICAgICAgICAgICAgICB0aGlzLiQkLnNraXBfYm91bmQgPSBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG59XG4vKipcbiAqIEJhc2UgY2xhc3MgZm9yIFN2ZWx0ZSBjb21wb25lbnRzLiBVc2VkIHdoZW4gZGV2PWZhbHNlLlxuICovXG5jbGFzcyBTdmVsdGVDb21wb25lbnQge1xuICAgICRkZXN0cm95KCkge1xuICAgICAgICBkZXN0cm95X2NvbXBvbmVudCh0aGlzLCAxKTtcbiAgICAgICAgdGhpcy4kZGVzdHJveSA9IG5vb3A7XG4gICAgfVxuICAgICRvbih0eXBlLCBjYWxsYmFjaykge1xuICAgICAgICBjb25zdCBjYWxsYmFja3MgPSAodGhpcy4kJC5jYWxsYmFja3NbdHlwZV0gfHwgKHRoaXMuJCQuY2FsbGJhY2tzW3R5cGVdID0gW10pKTtcbiAgICAgICAgY2FsbGJhY2tzLnB1c2goY2FsbGJhY2spO1xuICAgICAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgaW5kZXggPSBjYWxsYmFja3MuaW5kZXhPZihjYWxsYmFjayk7XG4gICAgICAgICAgICBpZiAoaW5kZXggIT09IC0xKVxuICAgICAgICAgICAgICAgIGNhbGxiYWNrcy5zcGxpY2UoaW5kZXgsIDEpO1xuICAgICAgICB9O1xuICAgIH1cbiAgICAkc2V0KCQkcHJvcHMpIHtcbiAgICAgICAgaWYgKHRoaXMuJCRzZXQgJiYgIWlzX2VtcHR5KCQkcHJvcHMpKSB7XG4gICAgICAgICAgICB0aGlzLiQkLnNraXBfYm91bmQgPSB0cnVlO1xuICAgICAgICAgICAgdGhpcy4kJHNldCgkJHByb3BzKTtcbiAgICAgICAgICAgIHRoaXMuJCQuc2tpcF9ib3VuZCA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgfVxufVxuXG5mdW5jdGlvbiBkaXNwYXRjaF9kZXYodHlwZSwgZGV0YWlsKSB7XG4gICAgZG9jdW1lbnQuZGlzcGF0Y2hFdmVudChjdXN0b21fZXZlbnQodHlwZSwgT2JqZWN0LmFzc2lnbih7IHZlcnNpb246ICczLjQ2LjQnIH0sIGRldGFpbCksIHRydWUpKTtcbn1cbmZ1bmN0aW9uIGFwcGVuZF9kZXYodGFyZ2V0LCBub2RlKSB7XG4gICAgZGlzcGF0Y2hfZGV2KCdTdmVsdGVET01JbnNlcnQnLCB7IHRhcmdldCwgbm9kZSB9KTtcbiAgICBhcHBlbmQodGFyZ2V0LCBub2RlKTtcbn1cbmZ1bmN0aW9uIGFwcGVuZF9oeWRyYXRpb25fZGV2KHRhcmdldCwgbm9kZSkge1xuICAgIGRpc3BhdGNoX2RldignU3ZlbHRlRE9NSW5zZXJ0JywgeyB0YXJnZXQsIG5vZGUgfSk7XG4gICAgYXBwZW5kX2h5ZHJhdGlvbih0YXJnZXQsIG5vZGUpO1xufVxuZnVuY3Rpb24gaW5zZXJ0X2Rldih0YXJnZXQsIG5vZGUsIGFuY2hvcikge1xuICAgIGRpc3BhdGNoX2RldignU3ZlbHRlRE9NSW5zZXJ0JywgeyB0YXJnZXQsIG5vZGUsIGFuY2hvciB9KTtcbiAgICBpbnNlcnQodGFyZ2V0LCBub2RlLCBhbmNob3IpO1xufVxuZnVuY3Rpb24gaW5zZXJ0X2h5ZHJhdGlvbl9kZXYodGFyZ2V0LCBub2RlLCBhbmNob3IpIHtcbiAgICBkaXNwYXRjaF9kZXYoJ1N2ZWx0ZURPTUluc2VydCcsIHsgdGFyZ2V0LCBub2RlLCBhbmNob3IgfSk7XG4gICAgaW5zZXJ0X2h5ZHJhdGlvbih0YXJnZXQsIG5vZGUsIGFuY2hvcik7XG59XG5mdW5jdGlvbiBkZXRhY2hfZGV2KG5vZGUpIHtcbiAgICBkaXNwYXRjaF9kZXYoJ1N2ZWx0ZURPTVJlbW92ZScsIHsgbm9kZSB9KTtcbiAgICBkZXRhY2gobm9kZSk7XG59XG5mdW5jdGlvbiBkZXRhY2hfYmV0d2Vlbl9kZXYoYmVmb3JlLCBhZnRlcikge1xuICAgIHdoaWxlIChiZWZvcmUubmV4dFNpYmxpbmcgJiYgYmVmb3JlLm5leHRTaWJsaW5nICE9PSBhZnRlcikge1xuICAgICAgICBkZXRhY2hfZGV2KGJlZm9yZS5uZXh0U2libGluZyk7XG4gICAgfVxufVxuZnVuY3Rpb24gZGV0YWNoX2JlZm9yZV9kZXYoYWZ0ZXIpIHtcbiAgICB3aGlsZSAoYWZ0ZXIucHJldmlvdXNTaWJsaW5nKSB7XG4gICAgICAgIGRldGFjaF9kZXYoYWZ0ZXIucHJldmlvdXNTaWJsaW5nKTtcbiAgICB9XG59XG5mdW5jdGlvbiBkZXRhY2hfYWZ0ZXJfZGV2KGJlZm9yZSkge1xuICAgIHdoaWxlIChiZWZvcmUubmV4dFNpYmxpbmcpIHtcbiAgICAgICAgZGV0YWNoX2RldihiZWZvcmUubmV4dFNpYmxpbmcpO1xuICAgIH1cbn1cbmZ1bmN0aW9uIGxpc3Rlbl9kZXYobm9kZSwgZXZlbnQsIGhhbmRsZXIsIG9wdGlvbnMsIGhhc19wcmV2ZW50X2RlZmF1bHQsIGhhc19zdG9wX3Byb3BhZ2F0aW9uKSB7XG4gICAgY29uc3QgbW9kaWZpZXJzID0gb3B0aW9ucyA9PT0gdHJ1ZSA/IFsnY2FwdHVyZSddIDogb3B0aW9ucyA/IEFycmF5LmZyb20oT2JqZWN0LmtleXMob3B0aW9ucykpIDogW107XG4gICAgaWYgKGhhc19wcmV2ZW50X2RlZmF1bHQpXG4gICAgICAgIG1vZGlmaWVycy5wdXNoKCdwcmV2ZW50RGVmYXVsdCcpO1xuICAgIGlmIChoYXNfc3RvcF9wcm9wYWdhdGlvbilcbiAgICAgICAgbW9kaWZpZXJzLnB1c2goJ3N0b3BQcm9wYWdhdGlvbicpO1xuICAgIGRpc3BhdGNoX2RldignU3ZlbHRlRE9NQWRkRXZlbnRMaXN0ZW5lcicsIHsgbm9kZSwgZXZlbnQsIGhhbmRsZXIsIG1vZGlmaWVycyB9KTtcbiAgICBjb25zdCBkaXNwb3NlID0gbGlzdGVuKG5vZGUsIGV2ZW50LCBoYW5kbGVyLCBvcHRpb25zKTtcbiAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgICBkaXNwYXRjaF9kZXYoJ1N2ZWx0ZURPTVJlbW92ZUV2ZW50TGlzdGVuZXInLCB7IG5vZGUsIGV2ZW50LCBoYW5kbGVyLCBtb2RpZmllcnMgfSk7XG4gICAgICAgIGRpc3Bvc2UoKTtcbiAgICB9O1xufVxuZnVuY3Rpb24gYXR0cl9kZXYobm9kZSwgYXR0cmlidXRlLCB2YWx1ZSkge1xuICAgIGF0dHIobm9kZSwgYXR0cmlidXRlLCB2YWx1ZSk7XG4gICAgaWYgKHZhbHVlID09IG51bGwpXG4gICAgICAgIGRpc3BhdGNoX2RldignU3ZlbHRlRE9NUmVtb3ZlQXR0cmlidXRlJywgeyBub2RlLCBhdHRyaWJ1dGUgfSk7XG4gICAgZWxzZVxuICAgICAgICBkaXNwYXRjaF9kZXYoJ1N2ZWx0ZURPTVNldEF0dHJpYnV0ZScsIHsgbm9kZSwgYXR0cmlidXRlLCB2YWx1ZSB9KTtcbn1cbmZ1bmN0aW9uIHByb3BfZGV2KG5vZGUsIHByb3BlcnR5LCB2YWx1ZSkge1xuICAgIG5vZGVbcHJvcGVydHldID0gdmFsdWU7XG4gICAgZGlzcGF0Y2hfZGV2KCdTdmVsdGVET01TZXRQcm9wZXJ0eScsIHsgbm9kZSwgcHJvcGVydHksIHZhbHVlIH0pO1xufVxuZnVuY3Rpb24gZGF0YXNldF9kZXYobm9kZSwgcHJvcGVydHksIHZhbHVlKSB7XG4gICAgbm9kZS5kYXRhc2V0W3Byb3BlcnR5XSA9IHZhbHVlO1xuICAgIGRpc3BhdGNoX2RldignU3ZlbHRlRE9NU2V0RGF0YXNldCcsIHsgbm9kZSwgcHJvcGVydHksIHZhbHVlIH0pO1xufVxuZnVuY3Rpb24gc2V0X2RhdGFfZGV2KHRleHQsIGRhdGEpIHtcbiAgICBkYXRhID0gJycgKyBkYXRhO1xuICAgIGlmICh0ZXh0Lndob2xlVGV4dCA9PT0gZGF0YSlcbiAgICAgICAgcmV0dXJuO1xuICAgIGRpc3BhdGNoX2RldignU3ZlbHRlRE9NU2V0RGF0YScsIHsgbm9kZTogdGV4dCwgZGF0YSB9KTtcbiAgICB0ZXh0LmRhdGEgPSBkYXRhO1xufVxuZnVuY3Rpb24gdmFsaWRhdGVfZWFjaF9hcmd1bWVudChhcmcpIHtcbiAgICBpZiAodHlwZW9mIGFyZyAhPT0gJ3N0cmluZycgJiYgIShhcmcgJiYgdHlwZW9mIGFyZyA9PT0gJ29iamVjdCcgJiYgJ2xlbmd0aCcgaW4gYXJnKSkge1xuICAgICAgICBsZXQgbXNnID0gJ3sjZWFjaH0gb25seSBpdGVyYXRlcyBvdmVyIGFycmF5LWxpa2Ugb2JqZWN0cy4nO1xuICAgICAgICBpZiAodHlwZW9mIFN5bWJvbCA9PT0gJ2Z1bmN0aW9uJyAmJiBhcmcgJiYgU3ltYm9sLml0ZXJhdG9yIGluIGFyZykge1xuICAgICAgICAgICAgbXNnICs9ICcgWW91IGNhbiB1c2UgYSBzcHJlYWQgdG8gY29udmVydCB0aGlzIGl0ZXJhYmxlIGludG8gYW4gYXJyYXkuJztcbiAgICAgICAgfVxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IobXNnKTtcbiAgICB9XG59XG5mdW5jdGlvbiB2YWxpZGF0ZV9zbG90cyhuYW1lLCBzbG90LCBrZXlzKSB7XG4gICAgZm9yIChjb25zdCBzbG90X2tleSBvZiBPYmplY3Qua2V5cyhzbG90KSkge1xuICAgICAgICBpZiAoIX5rZXlzLmluZGV4T2Yoc2xvdF9rZXkpKSB7XG4gICAgICAgICAgICBjb25zb2xlLndhcm4oYDwke25hbWV9PiByZWNlaXZlZCBhbiB1bmV4cGVjdGVkIHNsb3QgXCIke3Nsb3Rfa2V5fVwiLmApO1xuICAgICAgICB9XG4gICAgfVxufVxuLyoqXG4gKiBCYXNlIGNsYXNzIGZvciBTdmVsdGUgY29tcG9uZW50cyB3aXRoIHNvbWUgbWlub3IgZGV2LWVuaGFuY2VtZW50cy4gVXNlZCB3aGVuIGRldj10cnVlLlxuICovXG5jbGFzcyBTdmVsdGVDb21wb25lbnREZXYgZXh0ZW5kcyBTdmVsdGVDb21wb25lbnQge1xuICAgIGNvbnN0cnVjdG9yKG9wdGlvbnMpIHtcbiAgICAgICAgaWYgKCFvcHRpb25zIHx8ICghb3B0aW9ucy50YXJnZXQgJiYgIW9wdGlvbnMuJCRpbmxpbmUpKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCIndGFyZ2V0JyBpcyBhIHJlcXVpcmVkIG9wdGlvblwiKTtcbiAgICAgICAgfVxuICAgICAgICBzdXBlcigpO1xuICAgIH1cbiAgICAkZGVzdHJveSgpIHtcbiAgICAgICAgc3VwZXIuJGRlc3Ryb3koKTtcbiAgICAgICAgdGhpcy4kZGVzdHJveSA9ICgpID0+IHtcbiAgICAgICAgICAgIGNvbnNvbGUud2FybignQ29tcG9uZW50IHdhcyBhbHJlYWR5IGRlc3Ryb3llZCcpOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLWNvbnNvbGVcbiAgICAgICAgfTtcbiAgICB9XG4gICAgJGNhcHR1cmVfc3RhdGUoKSB7IH1cbiAgICAkaW5qZWN0X3N0YXRlKCkgeyB9XG59XG4vKipcbiAqIEJhc2UgY2xhc3MgdG8gY3JlYXRlIHN0cm9uZ2x5IHR5cGVkIFN2ZWx0ZSBjb21wb25lbnRzLlxuICogVGhpcyBvbmx5IGV4aXN0cyBmb3IgdHlwaW5nIHB1cnBvc2VzIGFuZCBzaG91bGQgYmUgdXNlZCBpbiBgLmQudHNgIGZpbGVzLlxuICpcbiAqICMjIyBFeGFtcGxlOlxuICpcbiAqIFlvdSBoYXZlIGNvbXBvbmVudCBsaWJyYXJ5IG9uIG5wbSBjYWxsZWQgYGNvbXBvbmVudC1saWJyYXJ5YCwgZnJvbSB3aGljaFxuICogeW91IGV4cG9ydCBhIGNvbXBvbmVudCBjYWxsZWQgYE15Q29tcG9uZW50YC4gRm9yIFN2ZWx0ZStUeXBlU2NyaXB0IHVzZXJzLFxuICogeW91IHdhbnQgdG8gcHJvdmlkZSB0eXBpbmdzLiBUaGVyZWZvcmUgeW91IGNyZWF0ZSBhIGBpbmRleC5kLnRzYDpcbiAqIGBgYHRzXG4gKiBpbXBvcnQgeyBTdmVsdGVDb21wb25lbnRUeXBlZCB9IGZyb20gXCJzdmVsdGVcIjtcbiAqIGV4cG9ydCBjbGFzcyBNeUNvbXBvbmVudCBleHRlbmRzIFN2ZWx0ZUNvbXBvbmVudFR5cGVkPHtmb286IHN0cmluZ30+IHt9XG4gKiBgYGBcbiAqIFR5cGluZyB0aGlzIG1ha2VzIGl0IHBvc3NpYmxlIGZvciBJREVzIGxpa2UgVlMgQ29kZSB3aXRoIHRoZSBTdmVsdGUgZXh0ZW5zaW9uXG4gKiB0byBwcm92aWRlIGludGVsbGlzZW5zZSBhbmQgdG8gdXNlIHRoZSBjb21wb25lbnQgbGlrZSB0aGlzIGluIGEgU3ZlbHRlIGZpbGVcbiAqIHdpdGggVHlwZVNjcmlwdDpcbiAqIGBgYHN2ZWx0ZVxuICogPHNjcmlwdCBsYW5nPVwidHNcIj5cbiAqIFx0aW1wb3J0IHsgTXlDb21wb25lbnQgfSBmcm9tIFwiY29tcG9uZW50LWxpYnJhcnlcIjtcbiAqIDwvc2NyaXB0PlxuICogPE15Q29tcG9uZW50IGZvbz17J2Jhcid9IC8+XG4gKiBgYGBcbiAqXG4gKiAjIyMjIFdoeSBub3QgbWFrZSB0aGlzIHBhcnQgb2YgYFN2ZWx0ZUNvbXBvbmVudChEZXYpYD9cbiAqIEJlY2F1c2VcbiAqIGBgYHRzXG4gKiBjbGFzcyBBU3ViY2xhc3NPZlN2ZWx0ZUNvbXBvbmVudCBleHRlbmRzIFN2ZWx0ZUNvbXBvbmVudDx7Zm9vOiBzdHJpbmd9PiB7fVxuICogY29uc3QgY29tcG9uZW50OiB0eXBlb2YgU3ZlbHRlQ29tcG9uZW50ID0gQVN1YmNsYXNzT2ZTdmVsdGVDb21wb25lbnQ7XG4gKiBgYGBcbiAqIHdpbGwgdGhyb3cgYSB0eXBlIGVycm9yLCBzbyB3ZSBuZWVkIHRvIHNlcGFyYXRlIHRoZSBtb3JlIHN0cmljdGx5IHR5cGVkIGNsYXNzLlxuICovXG5jbGFzcyBTdmVsdGVDb21wb25lbnRUeXBlZCBleHRlbmRzIFN2ZWx0ZUNvbXBvbmVudERldiB7XG4gICAgY29uc3RydWN0b3Iob3B0aW9ucykge1xuICAgICAgICBzdXBlcihvcHRpb25zKTtcbiAgICB9XG59XG5mdW5jdGlvbiBsb29wX2d1YXJkKHRpbWVvdXQpIHtcbiAgICBjb25zdCBzdGFydCA9IERhdGUubm93KCk7XG4gICAgcmV0dXJuICgpID0+IHtcbiAgICAgICAgaWYgKERhdGUubm93KCkgLSBzdGFydCA+IHRpbWVvdXQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignSW5maW5pdGUgbG9vcCBkZXRlY3RlZCcpO1xuICAgICAgICB9XG4gICAgfTtcbn1cblxuZXhwb3J0IHsgSHRtbFRhZywgSHRtbFRhZ0h5ZHJhdGlvbiwgU3ZlbHRlQ29tcG9uZW50LCBTdmVsdGVDb21wb25lbnREZXYsIFN2ZWx0ZUNvbXBvbmVudFR5cGVkLCBTdmVsdGVFbGVtZW50LCBhY3Rpb25fZGVzdHJveWVyLCBhZGRfYXR0cmlidXRlLCBhZGRfY2xhc3NlcywgYWRkX2ZsdXNoX2NhbGxiYWNrLCBhZGRfbG9jYXRpb24sIGFkZF9yZW5kZXJfY2FsbGJhY2ssIGFkZF9yZXNpemVfbGlzdGVuZXIsIGFkZF9zdHlsZXMsIGFkZF90cmFuc2Zvcm0sIGFmdGVyVXBkYXRlLCBhcHBlbmQsIGFwcGVuZF9kZXYsIGFwcGVuZF9lbXB0eV9zdHlsZXNoZWV0LCBhcHBlbmRfaHlkcmF0aW9uLCBhcHBlbmRfaHlkcmF0aW9uX2RldiwgYXBwZW5kX3N0eWxlcywgYXNzaWduLCBhdHRyLCBhdHRyX2RldiwgYXR0cmlidXRlX3RvX29iamVjdCwgYmVmb3JlVXBkYXRlLCBiaW5kLCBiaW5kaW5nX2NhbGxiYWNrcywgYmxhbmtfb2JqZWN0LCBidWJibGUsIGNoZWNrX291dHJvcywgY2hpbGRyZW4sIGNsYWltX2NvbXBvbmVudCwgY2xhaW1fZWxlbWVudCwgY2xhaW1faHRtbF90YWcsIGNsYWltX3NwYWNlLCBjbGFpbV9zdmdfZWxlbWVudCwgY2xhaW1fdGV4dCwgY2xlYXJfbG9vcHMsIGNvbXBvbmVudF9zdWJzY3JpYmUsIGNvbXB1dGVfcmVzdF9wcm9wcywgY29tcHV0ZV9zbG90cywgY3JlYXRlRXZlbnREaXNwYXRjaGVyLCBjcmVhdGVfYW5pbWF0aW9uLCBjcmVhdGVfYmlkaXJlY3Rpb25hbF90cmFuc2l0aW9uLCBjcmVhdGVfY29tcG9uZW50LCBjcmVhdGVfaW5fdHJhbnNpdGlvbiwgY3JlYXRlX291dF90cmFuc2l0aW9uLCBjcmVhdGVfc2xvdCwgY3JlYXRlX3Nzcl9jb21wb25lbnQsIGN1cnJlbnRfY29tcG9uZW50LCBjdXN0b21fZXZlbnQsIGRhdGFzZXRfZGV2LCBkZWJ1ZywgZGVzdHJveV9ibG9jaywgZGVzdHJveV9jb21wb25lbnQsIGRlc3Ryb3lfZWFjaCwgZGV0YWNoLCBkZXRhY2hfYWZ0ZXJfZGV2LCBkZXRhY2hfYmVmb3JlX2RldiwgZGV0YWNoX2JldHdlZW5fZGV2LCBkZXRhY2hfZGV2LCBkaXJ0eV9jb21wb25lbnRzLCBkaXNwYXRjaF9kZXYsIGVhY2gsIGVsZW1lbnQsIGVsZW1lbnRfaXMsIGVtcHR5LCBlbmRfaHlkcmF0aW5nLCBlc2NhcGUsIGVzY2FwZV9hdHRyaWJ1dGVfdmFsdWUsIGVzY2FwZV9vYmplY3QsIGVzY2FwZWQsIGV4Y2x1ZGVfaW50ZXJuYWxfcHJvcHMsIGZpeF9hbmRfZGVzdHJveV9ibG9jaywgZml4X2FuZF9vdXRyb19hbmRfZGVzdHJveV9ibG9jaywgZml4X3Bvc2l0aW9uLCBmbHVzaCwgZ2V0QWxsQ29udGV4dHMsIGdldENvbnRleHQsIGdldF9hbGxfZGlydHlfZnJvbV9zY29wZSwgZ2V0X2JpbmRpbmdfZ3JvdXBfdmFsdWUsIGdldF9jdXJyZW50X2NvbXBvbmVudCwgZ2V0X2N1c3RvbV9lbGVtZW50c19zbG90cywgZ2V0X3Jvb3RfZm9yX3N0eWxlLCBnZXRfc2xvdF9jaGFuZ2VzLCBnZXRfc3ByZWFkX29iamVjdCwgZ2V0X3NwcmVhZF91cGRhdGUsIGdldF9zdG9yZV92YWx1ZSwgZ2xvYmFscywgZ3JvdXBfb3V0cm9zLCBoYW5kbGVfcHJvbWlzZSwgaGFzQ29udGV4dCwgaGFzX3Byb3AsIGlkZW50aXR5LCBpbml0LCBpbnNlcnQsIGluc2VydF9kZXYsIGluc2VydF9oeWRyYXRpb24sIGluc2VydF9oeWRyYXRpb25fZGV2LCBpbnRyb3MsIGludmFsaWRfYXR0cmlidXRlX25hbWVfY2hhcmFjdGVyLCBpc19jbGllbnQsIGlzX2Nyb3Nzb3JpZ2luLCBpc19lbXB0eSwgaXNfZnVuY3Rpb24sIGlzX3Byb21pc2UsIGxpc3RlbiwgbGlzdGVuX2RldiwgbG9vcCwgbG9vcF9ndWFyZCwgbWVyZ2Vfc3NyX3N0eWxlcywgbWlzc2luZ19jb21wb25lbnQsIG1vdW50X2NvbXBvbmVudCwgbm9vcCwgbm90X2VxdWFsLCBub3csIG51bGxfdG9fZW1wdHksIG9iamVjdF93aXRob3V0X3Byb3BlcnRpZXMsIG9uRGVzdHJveSwgb25Nb3VudCwgb25jZSwgb3V0cm9fYW5kX2Rlc3Ryb3lfYmxvY2ssIHByZXZlbnRfZGVmYXVsdCwgcHJvcF9kZXYsIHF1ZXJ5X3NlbGVjdG9yX2FsbCwgcmFmLCBydW4sIHJ1bl9hbGwsIHNhZmVfbm90X2VxdWFsLCBzY2hlZHVsZV91cGRhdGUsIHNlbGVjdF9tdWx0aXBsZV92YWx1ZSwgc2VsZWN0X29wdGlvbiwgc2VsZWN0X29wdGlvbnMsIHNlbGVjdF92YWx1ZSwgc2VsZiwgc2V0Q29udGV4dCwgc2V0X2F0dHJpYnV0ZXMsIHNldF9jdXJyZW50X2NvbXBvbmVudCwgc2V0X2N1c3RvbV9lbGVtZW50X2RhdGEsIHNldF9kYXRhLCBzZXRfZGF0YV9kZXYsIHNldF9pbnB1dF90eXBlLCBzZXRfaW5wdXRfdmFsdWUsIHNldF9ub3csIHNldF9yYWYsIHNldF9zdG9yZV92YWx1ZSwgc2V0X3N0eWxlLCBzZXRfc3ZnX2F0dHJpYnV0ZXMsIHNwYWNlLCBzcHJlYWQsIHNyY191cmxfZXF1YWwsIHN0YXJ0X2h5ZHJhdGluZywgc3RvcF9wcm9wYWdhdGlvbiwgc3Vic2NyaWJlLCBzdmdfZWxlbWVudCwgdGV4dCwgdGljaywgdGltZV9yYW5nZXNfdG9fYXJyYXksIHRvX251bWJlciwgdG9nZ2xlX2NsYXNzLCB0cmFuc2l0aW9uX2luLCB0cmFuc2l0aW9uX291dCwgdHJ1c3RlZCwgdXBkYXRlX2F3YWl0X2Jsb2NrX2JyYW5jaCwgdXBkYXRlX2tleWVkX2VhY2gsIHVwZGF0ZV9zbG90LCB1cGRhdGVfc2xvdF9iYXNlLCB2YWxpZGF0ZV9jb21wb25lbnQsIHZhbGlkYXRlX2VhY2hfYXJndW1lbnQsIHZhbGlkYXRlX2VhY2hfa2V5cywgdmFsaWRhdGVfc2xvdHMsIHZhbGlkYXRlX3N0b3JlLCB4bGlua19hdHRyIH07XG4iLCI8P3htbCB2ZXJzaW9uPVwiMS4wXCIgZW5jb2Rpbmc9XCJVVEYtOFwiPz5cbjxzdmcgd2lkdGg9XCIyNTZweFwiIGhlaWdodD1cIjI1NnB4XCIgdmlld0JveD1cIjAgMCAyNTYgMjU2XCIgdmVyc2lvbj1cIjEuMVwiIHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIiB4bWxuczp4bGluaz1cImh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmtcIj5cbiAgICA8dGl0bGU+aWNvbi1ib2xkLWNvbXBsZXRlPC90aXRsZT5cbiAgICA8ZyBpZD1cImljb24tYm9sZC1jb21wbGV0ZVwiIHN0cm9rZT1cIm5vbmVcIiBzdHJva2Utd2lkdGg9XCIxXCIgIGZpbGwtcnVsZT1cImV2ZW5vZGRcIj5cbiAgICAgICAgPHBhdGggZD1cIk0xMjguMTU5NTc0LDI1NiBDMTQzLjQ4OTM2MiwyNTYgMTU3LjEyMjM0LDI1NC4wMzc5NzggMTY5LjA1ODUxMSwyNTAuMTEzOTMzIEMxODAuOTk0NjgxLDI0Ni4xODk4ODggMTkxLjAyOTI1NSwyNDAuNzQzMDc5IDE5OS4xNjIyMzQsMjMzLjc3MzUwNyBDMjA3LjI5NTIxMywyMjYuODAzOTM1IDIxMy40NjgwODUsMjE4LjYzMzcyMiAyMTcuNjgwODUxLDIwOS4yNjI4NjkgQzIyMS44OTM2MTcsMTk5Ljg5MjAxNiAyMjQsMTg5Ljc1OTc4IDIyNCwxNzguODY2MTYzIEMyMjQsMTY0LjM0MTM0MSAyMTkuOTYyNzY2LDE1Mi41MTA2MzggMjExLjg4ODI5OCwxNDMuMzc0MDU2IEMyMDMuODEzODMsMTM0LjIzNzQ3NCAxOTEuMzUxMDY0LDEyNy42MTkzMDkgMTc0LjUsMTIzLjUxOTU2MSBDMTgyLjIyMzQwNCwxMjAuNzA4MzA1IDE4OC44MzUxMDYsMTE3LjM2OTkzOCAxOTQuMzM1MTA2LDExMy41MDQ0NjEgQzE5OS44MzUxMDYsMTA5LjYzODk4NCAyMDQuMzQwNDI2LDEwNS4zOTI4MTYgMjA3Ljg1MTA2NCwxMDAuNzY1OTU3IEMyMTEuMzYxNzAyLDk2LjEzOTA5ODYgMjEzLjkzNjE3LDkxLjE2MDgzMjggMjE1LjU3NDQ2OCw4NS44MzExNTk5IEMyMTcuMjEyNzY2LDgwLjUwMTQ4NzEgMjE4LjAzMTkxNSw3NC45NjY4MjY4IDIxOC4wMzE5MTUsNjkuMjI3MTc5MSBDMjE4LjAzMTkxNSw1OC42ODQ5NjkxIDIxNi4yNDczNCw0OS4xMzg0MTIzIDIxMi42NzgxOTEsNDAuNTg3NTA4NiBDMjA5LjEwOTA0MywzMi4wMzY2MDQ5IDIwMy40MDQyNTUsMjQuNzc0MTkzNSAxOTUuNTYzODMsMTguODAwMjc0NSBDMTg3LjcyMzQwNCwxMi44MjYzNTU1IDE3Ny42MDEwNjQsOC4xOTk0OTY2OCAxNjUuMTk2ODA5LDQuOTE5Njk4MDEgQzE1Mi43OTI1NTMsMS42Mzk4OTkzNCAxMzcuNzU1MzE5LDAgMTIwLjA4NTEwNiwwIEwxMjAuMDg1MTA2LDAgTDI2LDAgTDI2LDI1NiBMMTI4LjE1OTU3NCwyNTYgWiBNMTE2LjczNjg0MiwxMDggTDg2LDEwOCBMODYsNDUgTDEyMC41Nzg5NDcsNDUgQzEyNy4yMTUzMTEsNDUgMTMyLjk0OTM2Miw0NS41MjUgMTM3Ljc4MTEsNDYuNTc1IEMxNDIuNjEyODM5LDQ3LjYyNSAxNDYuNjAwNDc4LDQ5LjM3NSAxNDkuNzQ0MDE5LDUxLjgyNSBDMTUyLjg4NzU2LDU0LjI3NSAxNTUuMjE2MTA4LDU3LjUxMjUgMTU2LjcyOTY2NSw2MS41Mzc1IEMxNTguMjQzMjIyLDY1LjU2MjUgMTU5LDcwLjYwODMzMzMgMTU5LDc2LjY3NSBDMTU5LDgyLjg1ODMzMzMgMTU4LjAzOTQ3NCw4Ny45OTE2NjY3IDE1Ni4xMTg0MjEsOTIuMDc1IEMxNTQuMTk3MzY4LDk2LjE1ODMzMzMgMTUxLjQwMzExLDk5LjM2NjY2NjcgMTQ3LjczNTY0NiwxMDEuNyBDMTQ0LjA2ODE4MiwxMDQuMDMzMzMzIDEzOS42MTQ4MzMsMTA1LjY2NjY2NyAxMzQuMzc1NTk4LDEwNi42IEMxMjkuMTM2MzY0LDEwNy41MzMzMzMgMTIzLjI1Njc3OCwxMDggMTE2LjczNjg0MiwxMDggTDExNi43MzY4NDIsMTA4IFogTTEyNi43NTQzODYsMjExIEw4NSwyMTEgTDg1LDE0NyBMMTI2LjQwMzUwOSwxNDcgQzEzMy44ODg4ODksMTQ3IDE0MC4wODc3MTksMTQ3LjcwNTIzNCAxNDUsMTQ5LjExNTcwMiBDMTQ5LjkxMjI4MSwxNTAuNTI2MTcxIDE1My44NTk2NDksMTUyLjUyNDMzNCAxNTYuODQyMTA1LDE1NS4xMTAxOTMgQzE1OS44MjQ1NjEsMTU3LjY5NjA1MSAxNjEuOTI5ODI1LDE2MC44Njk2MDUgMTYzLjE1Nzg5NSwxNjQuNjMwODU0IEMxNjQuMzg1OTY1LDE2OC4zOTIxMDMgMTY1LDE3Mi42MjM1MDggMTY1LDE3Ny4zMjUwNjkgQzE2NSwxODEuNDM4OTM1IDE2NC40NzM2ODQsMTg1LjQ5NDAzMSAxNjMuNDIxMDUzLDE4OS40OTAzNTggQzE2Mi4zNjg0MjEsMTkzLjQ4NjY4NSAxNjAuNDM4NTk2LDE5Ny4wNzE2MjUgMTU3LjYzMTU3OSwyMDAuMjQ1MTc5IEMxNTQuODI0NTYxLDIwMy40MTg3MzMgMTUwLjkzNTY3MywyMDYuMDA0NTkxIDE0NS45NjQ5MTIsMjA4LjAwMjc1NSBDMTQwLjk5NDE1MiwyMTAuMDAwOTE4IDEzNC41OTA2NDMsMjExIDEyNi43NTQzODYsMjExIEwxMjYuNzU0Mzg2LDIxMSBaXCIgaWQ9XCJCXCIgIGZpbGwtcnVsZT1cIm5vbnplcm9cIj48L3BhdGg+XG4gICAgPC9nPlxuPC9zdmc+IiwiPD94bWwgdmVyc2lvbj1cIjEuMFwiIGVuY29kaW5nPVwiVVRGLThcIj8+XG48c3ZnIHdpZHRoPVwiMjU2cHhcIiBoZWlnaHQ9XCIyNTZweFwiIHZpZXdCb3g9XCIwIDAgMjU2IDI1NlwiIHZlcnNpb249XCIxLjFcIiB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIgeG1sbnM6eGxpbms9XCJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rXCI+XG4gICAgPHRpdGxlPmljb24taXRhbGljLWNvbXBsZXRlPC90aXRsZT5cbiAgICA8ZyBpZD1cImljb24taXRhbGljLWNvbXBsZXRlXCIgc3Ryb2tlPVwibm9uZVwiIHN0cm9rZS13aWR0aD1cIjFcIiAgZmlsbC1ydWxlPVwiZXZlbm9kZFwiPlxuICAgICAgICA8cG9seWdvbiBpZD1cIklcIiBmaWxsLXJ1bGU9XCJub256ZXJvXCIgcG9pbnRzPVwiMTQxLjA5MDcgMjU2IDE3Mi4zOTkgLTEuMTM2ODY4MzhlLTEzIDExNC43MDczIC0xLjEzNjg2ODM4ZS0xMyA4My4zOTkgMjU2XCI+PC9wb2x5Z29uPlxuICAgIDwvZz5cbjwvc3ZnPiIsIjw/eG1sIHZlcnNpb249XCIxLjBcIiBlbmNvZGluZz1cIlVURi04XCI/PlxuPHN2ZyB3aWR0aD1cIjI1NnB4XCIgaGVpZ2h0PVwiMjU2cHhcIiB2aWV3Qm94PVwiMCAwIDI1NiAyNTZcIiB2ZXJzaW9uPVwiMS4xXCIgeG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiIHhtbG5zOnhsaW5rPVwiaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGlua1wiPlxuICAgIDx0aXRsZT5pY29uLXVuZGVybGluZS1jb21wbGV0ZTwvdGl0bGU+XG4gICAgPGcgaWQ9XCJpY29uLXVuZGVybGluZS1jb21wbGV0ZVwiIHN0cm9rZT1cIm5vbmVcIiBzdHJva2Utd2lkdGg9XCIxXCIgIGZpbGwtcnVsZT1cImV2ZW5vZGRcIj5cbiAgICAgICAgPHBhdGggZD1cIk0yMTgsMjMyLjUzNyBMMjE4LDI1NS44NjEgTDM5LDI1NS44NjEgTDM5LDIzMi41MzcgTDIxOCwyMzIuNTM3IFogTTg1LjA1NDMxMzEsMC4xOTkgTDg1LjA1NDMxMzEsMTIzLjA5MTA1NyBMODUuMDU4NDE0MiwxMjMuOTMyMDA4IEM4NS4xMjY3NjY0LDEzMC45MTA5MzIgODYuMDQ5NTIwOCwxMzcuMTY0ODk5IDg3LjgyNjY3NzMsMTQyLjY5MzkwOCBDODkuNjc0OTIwMSwxNDguNDQ0MDc4IDkyLjM1MjUwMjcsMTUzLjMzODg1MSA5NS44NTk0MjQ5LDE1Ny4zNzgyMjYgQzk5LjM2NjM0NzIsMTYxLjQxNzYwMSAxMDMuNjU1MjE4LDE2NC41MDY1MzYgMTA4LjcyNjAzOCwxNjYuNjQ1MDI5IEMxMTMuNzk2ODU4LDE2OC43ODM1MjEgMTE5LjU1NDg0NiwxNjkuODUyNzY4IDEyNiwxNjkuODUyNzY4IEMxMzIuNDQ1MTU0LDE2OS44NTI3NjggMTM4LjIwMzE0MiwxNjguNzgzNTIxIDE0My4yNzM5NjIsMTY2LjY0NTAyOSBDMTQ4LjM0NDc4MiwxNjQuNTA2NTM2IDE1Mi42MzM2NTMsMTYxLjQ0MTM2MyAxNTYuMTQwNTc1LDE1Ny40NDk1MDkgQzE1OS42NDc0OTcsMTUzLjQ1NzY1NiAxNjIuMzI1MDgsMTQ4LjU4NjY0NCAxNjQuMTczMzIzLDE0Mi44MzY0NzUgQzE2Ni4wMjE1NjUsMTM3LjA4NjMwNSAxNjYuOTQ1Njg3LDEzMC41NTIwMjEgMTY2Ljk0NTY4NywxMjMuMjMzNjIzIEwxNjYuOTQ1Njg3LDEyMy4yMzM2MjMgTDE2Ni45NDU2ODcsMC4xOTkgTDIxNSwwLjE5OSBMMjE1LDEyMy4yMzM2MjMgTDIxNC45OTU0ODIsMTI0LjI2Mzk3NCBDMjE0Ljg4NzA2MiwxMzYuNjAwNjg4IDIxMi44MjcwNjYsMTQ3Ljk0NzY2NSAyMDguODE1NDk1LDE1OC4zMDQ5MDYgQzIwNC42OTI0OTIsMTY4Ljk0OTg0OSAxOTguNzkyMzMyLDE3OC4xMjE2MDcgMTkxLjExNTAxNiwxODUuODIwMTgxIEMxODMuNDM3NywxOTMuNTE4NzU2IDE3NC4xMDE3MDQsMTk5LjUwNjUzNiAxNjMuMTA3MDI5LDIwMy43ODM1MjEgQzE1Mi4xMTIzNTQsMjA4LjA2MDUwNyAxMzkuNzQzMzQ0LDIxMC4xOTkgMTI2LDIxMC4xOTkgQzExMi4xNjE4NzQsMjEwLjE5OSA5OS43NDU0NzM5LDIwOC4wNjA1MDcgODguNzUwNzk4NywyMDMuNzgzNTIxIEM3Ny43NTYxMjM1LDE5OS41MDY1MzYgNjguNDIwMTI3OCwxOTMuNTE4NzU2IDYwLjc0MjgxMTUsMTg1LjgyMDE4MSBDNTMuMDY1NDk1MiwxNzguMTIxNjA3IDQ3LjE4OTAzMDksMTY4Ljk0OTg0OSA0My4xMTM0MTg1LDE1OC4zMDQ5MDYgQzM5LjAzNzgwNjIsMTQ3LjY1OTk2NCAzNywxMzUuOTY5NTM2IDM3LDEyMy4yMzM2MjMgTDM3LDEyMy4yMzM2MjMgTDM3LDAuMTk5IEw4NS4wNTQzMTMxLDAuMTk5IFpcIiBpZD1cIkNvbWJpbmVkLVNoYXBlXCIgZmlsbC1ydWxlPVwibm9uemVyb1wiPjwvcGF0aD5cbiAgICA8L2c+XG48L3N2Zz4iLCI8P3htbCB2ZXJzaW9uPVwiMS4wXCIgZW5jb2Rpbmc9XCJVVEYtOFwiPz5cbjxzdmcgd2lkdGg9XCIyNTZweFwiIGhlaWdodD1cIjI1NnB4XCIgdmlld0JveD1cIjAgMCAyNTYgMjU2XCIgdmVyc2lvbj1cIjEuMVwiIHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIiB4bWxuczp4bGluaz1cImh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmtcIj5cbiAgICA8dGl0bGU+aWNvbi1saXN0LWNvbXBsZXRlPC90aXRsZT5cbiAgICA8ZyBpZD1cImljb24tbGlzdC1jb21wbGV0ZVwiIHN0cm9rZT1cIm5vbmVcIiBzdHJva2Utd2lkdGg9XCIxXCIgZmlsbC1ydWxlPVwiZXZlbm9kZFwiPlxuICAgICAgICA8cGF0aCBkPVwiTTE1LjkwMjYzNjksMTg4IEMxOC41NDIyNTgzLDE4OCAyMC44MjQ4ODE3LDE4OC4yNzc5NCAyMi43NTA1MDcxLDE4OC44MzM4MTkgQzI0LjY3NjEzMjUsMTg5LjM4OTY5OSAyNi4yNTU1NzgxLDE5MC4xNTkzNzggMjcuNDg4ODQzOCwxOTEuMTQyODU3IEMyOC43MjIxMDk1LDE5Mi4xMjYzMzYgMjkuNjMwODMxNiwxOTMuMjgwODU1IDMwLjIxNTAxMDEsMTk0LjYwNjQxNCBDMzAuNzk5MTg4NiwxOTUuOTMxOTczIDMxLjA5MTI3NzksMTk3LjM2NDQzMSAzMS4wOTEyNzc5LDE5OC45MDM3OSBDMzEuMDkxMjc3OSwyMDEuNDY5Mzg4IDMwLjUxNzkxNzUsMjAzLjUxMTE3NiAyOS4zNzExOTY4LDIwNS4wMjkxNTUgQzI4LjIyNDQ3NiwyMDYuNTQ3MTMzIDI2Ljg1MDU3NDcsMjA3LjczMzcyMiAyNS4yNDk0OTI5LDIwOC41ODg5MjEgQzI3LjE1MzQ4MjEsMjA5LjM1ODYwMSAyOC43NTQ1NjM5LDIxMC41MTMxMiAzMC4wNTI3MzgzLDIxMi4wNTI0NzggQzMxLjM1MDkxMjgsMjEzLjU5MTgzNyAzMiwyMTUuNjY1Njk1IDMyLDIxOC4yNzQwNTIgQzMyLDIyMC4zMjY1MzEgMzEuNjUzODIwMSwyMjIuMTg2NTg5IDMwLjk2MTQ2MDQsMjIzLjg1NDIyNyBDMzAuMjY5MTAwNywyMjUuNTIxODY2IDI5LjIzMDU2MTIsMjI2Ljk2NTAxNSAyNy44NDU4NDE4LDIyOC4xODM2NzMgQzI2LjQ2MTEyMjQsMjI5LjQwMjMzMiAyNC43MDg1ODY5LDIzMC4zNDMwNTIgMjIuNTg4MjM1MywyMzEuMDA1ODMxIEMyMC40Njc4ODM3LDIzMS42Njg2MSAxNy45NTgwNzk4LDIzMiAxNS4wNTg4MjM1LDIzMiBDMTEuODk5OTMyNCwyMzIgOS40MDA5NDY1OSwyMzEuNzIyMDYgNy41NjE4NjYxMywyMzEuMTY2MTgxIEM1LjcyMjc4NTY3LDIzMC42MTAzMDEgNC4yMTkwNjY5NCwyMzAuMDExNjYyIDMuMDUwNzA5OTQsMjI5LjM3MDI2MiBDMi4xNDE5ODc4MywyMjguODk5OTAzIDEuNDI3OTkxODksMjI4LjI5MDU3MyAwLjkwODcyMjExLDIyNy41NDIyNzQgQzAuMzg5NDUyMzMzLDIyNi43OTM5NzUgMC4xMjk4MTc0NDQsMjI2LjA1NjM2NSAwLjEyOTgxNzQ0NCwyMjUuMzI5NDQ2IEMwLjEyOTgxNzQ0NCwyMjQuNDc0MjQ3IDAuMzQ2MTc5ODUxLDIyMy41MTIxNDggMC43Nzg5MDQ2NjUsMjIyLjQ0MzE0OSBDMS4yMTE2Mjk0OCwyMjEuMzc0MTUgMi4wNzcwNzkxMSwyMTkuODU2MTcxIDMuMzc1MjUzNTUsMjE3Ljg4OTIxMyBDNC42MzAxNTU1MSwyMTkuMDAwOTcyIDYuMTY2MzI4NiwyMjAuMDA1ODMxIDcuOTgzNzcyODIsMjIwLjkwMzc5IEM5LjgwMTIxNzA0LDIyMS44MDE3NDkgMTEuODEzMzg3NCwyMjIuMjUwNzI5IDE0LjAyMDI4NCwyMjIuMjUwNzI5IEMxNS40OTE1NDgzLDIyMi4yNTA3MjkgMTYuNjcwNzIzNSwyMjEuODc2NTc5IDE3LjU1NzgwOTMsMjIxLjEyODI4IEMxOC40NDQ4OTUyLDIyMC4zNzk5ODEgMTguODg4NDM4MSwyMTkuMjc4OTEyIDE4Ljg4ODQzODEsMjE3LjgyNTA3MyBDMTguODg4NDM4MSwyMTYuODg0MzU0IDE4LjcyNjE2NjMsMjE2LjEzNjA1NCAxOC40MDE2MjI3LDIxNS41ODAxNzUgQzE4LjA3NzA3OTEsMjE1LjAyNDI5NSAxNy42NzY4MDg3LDIxNC41OTY2OTYgMTcuMjAwODExNCwyMTQuMjk3Mzc2IEMxNi43MjQ4MTQxLDIxMy45OTgwNTYgMTYuMTk0NzI2MiwyMTMuNzk0OTQ3IDE1LjYxMDU0NzcsMjEzLjY4ODA0NyBDMTUuMDI2MzY5MiwyMTMuNTgxMTQ3IDE0LjQ1MzAwODgsMjEzLjUyNzY5NyAxMy44OTA0NjY1LDIxMy41Mjc2OTcgTDEzLjg5MDQ2NjUsMjEzLjUyNzY5NyBMOS4yODE5NDcyNiwyMTMuNTI3Njk3IEw5LjI4MTk0NzI2LDIwNC42NzYzODUgTDEzLjgyNTU1NzgsMjA0LjY3NjM4NSBMMTQuMDgzMTY0MywyMDQuNjY5NzA0IEMxNS4wMjAyODQsMjA0LjYyMDcwOCAxNS44NzU1OTE2LDIwNC4zMDIyMzUgMTYuNjQ5MDg3MiwyMDMuNzE0Mjg2IEMxNy40OTI5MDA2LDIwMy4wNzI4ODYgMTcuOTE0ODA3MywyMDIuMTUzNTQ3IDE3LjkxNDgwNzMsMjAwLjk1NjI2OCBDMTcuOTE0ODA3MywxOTkuNzU4OTg5IDE3LjUyNTM1NSwxOTguOTAzNzkgMTYuNzQ2NDUwMywxOTguMzkwNjcxIEMxNS45Njc1NDU2LDE5Ny44Nzc1NTEgMTQuOTUwNjQyMywxOTcuNjIwOTkxIDEzLjY5NTc0MDQsMTk3LjYyMDk5MSBDMTIuMDUxMzg2MSwxOTcuNjIwOTkxIDEwLjQ3MTk0MDUsMTk3Ljk0MTY5MSA4Ljk1NzQwMzY1LDE5OC41ODMwOSBDNy40NDI4NjY4LDE5OS4yMjQ0OSA1LjcxMTk2NzU1LDIwMC4yMjkzNDkgMy43NjQ3MDU4OCwyMDEuNTk3NjY4IEMyLjU5NjM0ODg4LDIwMC4yNzIxMDkgMS42NzY4MDg2NSwxOTkuMDk2MjEgMS4wMDYwODUxOSwxOTguMDY5OTcxIEMwLjMzNTM2MTczMSwxOTcuMDQzNzMyIDAsMTk2LjA2MDI1MyAwLDE5NS4xMTk1MzQgQzAsMTk0LjMwNzA5NCAwLjIyNzE4MDUyNywxOTMuNjIyOTM1IDAuNjgxNTQxNTgyLDE5My4wNjcwNTUgQzEuMTM1OTAyNjQsMTkyLjUxMTE3NiAxLjY2NTk5MDUzLDE5Mi4wMTk0MzYgMi4yNzE4MDUyNywxOTEuNTkxODM3IEMzLjUyNjcwNzIzLDE5MC43MzY2MzggNS4yOTAwNjA4NSwxODkuOTI0MTk4IDcuNTYxODY2MTMsMTg5LjE1NDUxOSBDOS44MzM2NzE0LDE4OC4zODQ4NCAxMi42MTM5MjgzLDE4OCAxNS45MDI2MzY5LDE4OCBaIE0yNTYsMTkxIEwyNTYsMjMxIEw1OCwyMzEgTDU4LDE5MSBMMjU2LDE5MSBaIE0yNTYsMTEwIEwyNTYsMTUwIEw1OCwxNTAgTDU4LDExMCBMMjU2LDExMCBaIE0xNy4wNzUyNDc1LDEwNiBDMTkuMTY2MzM2NiwxMDYgMjEuMTQ4NTE0OSwxMDYuMjI0MjkyIDIzLjAyMTc4MjIsMTA2LjY3Mjg3NiBDMjQuODk1MDQ5NSwxMDcuMTIxNDYxIDI2LjUzOTYwNCwxMDcuODU4NDIgMjcuOTU1NDQ1NSwxMDguODgzNzU2IEMyOS4zNzEyODcxLDEwOS45MDkwOTEgMzAuNDkzMDY5MywxMTEuMjQ0MTYzIDMxLjMyMDc5MjEsMTEyLjg4ODk3MiBDMzIuMTQ4NTE0OSwxMTQuNTMzNzggMzIuNTYyMzc2MiwxMTYuNTMxMDQ4IDMyLjU2MjM3NjIsMTE4Ljg4MDc3NSBDMzIuNTYyMzc2MiwxMjAuNDE4Nzc4IDMyLjM0NDU1NDUsMTIxLjkwMzM3OCAzMS45MDg5MTA5LDEyMy4zMzQ1NzUgQzMxLjQ3MzI2NzMsMTI0Ljc2NTc3MiAzMC44NzQyNTc0LDEyNi4xNDM1NjcgMzAuMTExODgxMiwxMjcuNDY3OTU4IEMyOS4zNDk1MDUsMTI4Ljc5MjM1IDI4LjQ2NzMyNjcsMTMwLjA3NDAxOSAyNy40NjUzNDY1LDEzMS4zMTI5NjYgQzI2LjQ2MzM2NjMsMTMyLjU1MTkxMyAyNS4zOTYwMzk2LDEzMy43MjY3NzYgMjQuMjYzMzY2MywxMzQuODM3NTU2IEMyMy40NzkyMDc5LDEzNS42MDY1NTcgMjIuNjk1MDQ5NSwxMzYuMzY0ODc4IDIxLjkxMDg5MTEsMTM3LjExMjUxOSBDMjEuMTI2NzMyNywxMzcuODYwMTU5IDIwLjMyMDc5MjEsMTM4LjU3NTc1OCAxOS40OTMwNjkzLDEzOS4yNTkzMTQgTDE5LjQ5MzA2OTMsMTM5LjI1OTMxNCBMMjcuMDA3OTIwOCwxMzkuMjU5MzE0IEwyNy4zODA1MzcyLDEzOS4yNjM3NjUgQzI5LjQ2NDAyOTUsMTM5LjMxNDIwMSAzMS4wNzE1MDcyLDEzOS43OTMzNDMgMzIuMjAyOTcwMywxNDAuNzAxMTkyIEMzMy40MDA5OTAxLDE0MS42NjI0NDQgMzQsMTQzLjE0NzA0NCAzNCwxNDUuMTU0OTkzIEMzNCwxNDUuNzUzMTA1IDMzLjk4OTEwODksMTQ2LjI3NjQ1MyAzMy45NjczMjY3LDE0Ni43MjUwMzcgQzMzLjk0NTU0NDYsMTQ3LjE3MzYyMSAzMy45MzQ2NTM1LDE0Ny41Njg4MDMgMzMuOTM0NjUzNSwxNDcuOTEwNTgxIEMzMy44OTEwODkxLDE0OC4zMzc4MDQgMzMuODY5MzA2OSwxNDguNzAwOTQ0IDMzLjg2OTMwNjksMTQ5IEwzMy44NjkzMDY5LDE0OSBMMi4xMTA4OTEwOSwxNDkgTDIuMTEwODkxMDksMTQwLjQ3NjkgTDIuNDg4OTY3NDcsMTQwLjE5NTA2NCBDMy4yNTQ0NTU0NSwxMzkuNjE3MDA1IDQuMDc1OTU0NzQsMTM4Ljk1MjYyOSA0Ljk1MzQ2NTM1LDEzOC4yMDE5MzcgQzUuOTc3MjI3NzIsMTM3LjMyNjEzIDcuMDQ0NTU0NDYsMTM2LjM5NjkyIDguMTU1NDQ1NTQsMTM1LjQxNDMwNyBDOS4yNjYzMzY2MywxMzQuNDMxNjk0IDEwLjM3NzIyNzcsMTMzLjM5NTY3OCAxMS40ODgxMTg4LDEzMi4zMDYyNTkgQzEyLjU5OTAwOTksMTMxLjIxNjg0MSAxMy42NzcyMjc3LDEzMC4xMzgxMDIgMTQuNzIyNzcyMywxMjkuMDcwMDQ1IEMxNi4yMDM5NjA0LDEyNy41MzIwNDIgMTcuMzU4NDE1OCwxMjYuMDkwMTY0IDE4LjE4NjEzODYsMTI0Ljc0NDQxMSBDMTkuMDEzODYxNCwxMjMuMzk4NjU5IDE5LjQyNzcyMjgsMTIxLjk1Njc4MSAxOS40Mjc3MjI4LDEyMC40MTg3NzggQzE5LjQyNzcyMjgsMTE5LjU2NDMzMiAxOS4yODYxMzg2LDExOC44NTk0MTQgMTkuMDAyOTcwMywxMTguMzA0MDI0IEMxOC43MTk4MDIsMTE3Ljc0ODYzNCAxOC4zNDk1MDUsMTE3LjMwMDA1IDE3Ljg5MjA3OTIsMTE2Ljk1ODI3MSBDMTcuNDM0NjUzNSwxMTYuNjE2NDkzIDE2LjkxMTg4MTIsMTE2LjM3MDg0IDE2LjMyMzc2MjQsMTE2LjIyMTMxMSBDMTUuNzM1NjQzNiwxMTYuMDcxNzgzIDE1LjE1ODQxNTgsMTE1Ljk5NzAxOSAxNC41OTIwNzkyLDExNS45OTcwMTkgQzEyLjg0OTUwNSwxMTUuOTk3MDE5IDExLjE2MTM4NjEsMTE2LjQwMjg4MSA5LjUyNzcyMjc3LDExNy4yMTQ2MDUgQzcuODk0MDU5NDEsMTE4LjAyNjMyOSA2LjQyMzc2MjM4LDExOC45NjYyMiA1LjExNjgzMTY4LDEyMC4wMzQyNzcgQzMuOTQwNTk0MDYsMTE4LjcwOTg4NiAyLjk2MDM5NjA0LDExNy40NjAyNTggMi4xNzYyMzc2MiwxMTYuMjg1Mzk1IEMxLjM5MjA3OTIxLDExNS4xMTA1MzIgMSwxMTQuMDk1ODc3IDEsMTEzLjI0MTQzMSBDMSwxMTIuNTU3ODc0IDEuMTg1MTQ4NTEsMTExLjk1OTc2MiAxLjU1NTQ0NTU0LDExMS40NDcwOTQgQzEuOTI1NzQyNTcsMTEwLjkzNDQyNiAyLjQzNzYyMzc2LDExMC40NDMxMiAzLjA5MTA4OTExLDEwOS45NzMxNzQgQzMuNzAwOTkwMSwxMDkuNTQ1OTUxIDQuNDQxNTg0MTYsMTA5LjA5NzM2NyA1LjMxMjg3MTI5LDEwOC42Mjc0MjIgQzYuMTg0MTU4NDIsMTA4LjE1NzQ3NiA3LjE5NzAyOTcsMTA3LjczMDI1MyA4LjM1MTQ4NTE1LDEwNy4zNDU3NTMgQzkuNTA1OTQwNTksMTA2Ljk2MTI1MiAxMC44MDE5ODAyLDEwNi42NDA4MzUgMTIuMjM5NjA0LDEwNi4zODQ1MDEgQzEzLjY3NzIyNzcsMTA2LjEyODE2NyAxNS4yODkxMDg5LDEwNiAxNy4wNzUyNDc1LDEwNiBaIE0yNTYsMjggTDI1Niw2OCBMNTgsNjggTDU4LDI4IEwyNTYsMjggWiBNMjIuOTM2OTg2MywyNSBDMjQuMTY0MzgzNiwyNSAyNS4xOTQ1MjA1LDI1LjE0MDEwMDMgMjYuMDI3Mzk3MywyNS40MjAzMDA4IEMyNi44NjAyNzQsMjUuNzAwNTAxMyAyNy41MTc4MDgyLDI1Ljk5MTQ3ODcgMjgsMjYuMjkzMjMzMSBMMjgsMjYuMjkzMjMzMSBMMjgsNjggTDE1LjA0NjU3NTMsNjggTDE1LjA0NjU3NTMsNDAuMDAxNTAzOCBMNy40MTkxNzgwOCw0My42MjI1NTY0IEw2LjkyNjAyNzQsNDIuODY4NjAxNSBDNi4yNzcyNjAyNyw0MS44NTgxNTU0IDUuNjYzNTYxNjQsNDAuODI3MDE3NSA1LjA4NDkzMTUxLDM5Ljc3NTE4OCBDNC4zNjE2NDM4NCwzOC40NjA0MDEgNCwzNy4yNDI2MDY1IDQsMzYuMTIxODA0NSBDNCwzNS4wMDEwMDI1IDQuMjMwMTM2OTksMzQuMTQ5NjI0MSA0LjY5MDQxMDk2LDMzLjU2NzY2OTIgQzUuMTUwNjg0OTMsMzIuOTg1NzE0MyA2LjAzODM1NjE2LDMyLjM0OTg3NDcgNy4zNTM0MjQ2NiwzMS42NjAxNTA0IEw3LjM1MzQyNDY2LDMxLjY2MDE1MDQgTDE3LjE1MDY4NDksMjYuNjE2NTQxNCBMMTcuNjA5MTMyNCwyNi4zODY2MzMyIEMxOC4zNzAxNjc0LDI2LjAxNTQyNzUgMTkuMTE1OTgxNywyNS43MDQwOTM2IDE5Ljg0NjU3NTMsMjUuNDUyNjMxNiBDMjAuNzIzMjg3NywyNS4xNTA4NzcyIDIxLjc1MzQyNDcsMjUgMjIuOTM2OTg2MywyNSBaXCIgaWQ9XCJDb21iaW5lZC1TaGFwZVwiICBmaWxsLXJ1bGU9XCJub256ZXJvXCI+PC9wYXRoPlxuICAgIDwvZz5cbjwvc3ZnPiIsIjw/eG1sIHZlcnNpb249XCIxLjBcIiBlbmNvZGluZz1cIlVURi04XCI/PlxuPHN2ZyB3aWR0aD1cIjI1NnB4XCIgaGVpZ2h0PVwiMjU2cHhcIiB2aWV3Qm94PVwiMCAwIDI1NiAyNTZcIiB2ZXJzaW9uPVwiMS4xXCIgeG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiIHhtbG5zOnhsaW5rPVwiaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGlua1wiPlxuICAgIDx0aXRsZT5pY29uLWJ1bGxldC1jb21wbGV0ZTwvdGl0bGU+XG4gICAgPGcgaWQ9XCJpY29uLWJ1bGxldC1jb21wbGV0ZVwiIHN0cm9rZT1cIm5vbmVcIiBzdHJva2Utd2lkdGg9XCIxXCIgIGZpbGwtcnVsZT1cImV2ZW5vZGRcIj5cbiAgICAgICAgPHBhdGggZD1cIk0yNTYsMTg4IEwyNTYsMjI3IEw2NywyMjcgTDY3LDE4OCBMMjU2LDE4OCBaIE00MSwxODggTDQxLDIyNyBMMCwyMjcgTDAsMTg4IEw0MSwxODggWiBNMjU2LDEwOSBMMjU2LDE0OCBMNjcsMTQ4IEw2NywxMDkgTDI1NiwxMDkgWiBNNDEsMTA5IEw0MSwxNDggTDAsMTQ4IEwwLDEwOSBMNDEsMTA5IFogTTI1NiwzMCBMMjU2LDY5IEw2Nyw2OSBMNjcsMzAgTDI1NiwzMCBaIE00MSwzMCBMNDEsNjkgTDAsNjkgTDAsMzAgTDQxLDMwIFpcIiBpZD1cIkNvbWJpbmVkLVNoYXBlXCIgIGZpbGwtcnVsZT1cIm5vbnplcm9cIj48L3BhdGg+XG4gICAgPC9nPlxuPC9zdmc+IiwiPD94bWwgdmVyc2lvbj1cIjEuMFwiIGVuY29kaW5nPVwiVVRGLThcIj8+XG48c3ZnIHdpZHRoPVwiMjU2cHhcIiBoZWlnaHQ9XCIyNTZweFwiIHZpZXdCb3g9XCIwIDAgMjU2IDI1NlwiIHZlcnNpb249XCIxLjFcIiB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIgeG1sbnM6eGxpbms9XCJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rXCI+XG4gICAgPHRpdGxlPmljb24tYWxpZ25lZC1sZWZ0LWNvbXBsZXRlPC90aXRsZT5cbiAgICA8ZyBpZD1cImljb24tYWxpZ25lZC1sZWZ0LWNvbXBsZXRlXCIgc3Ryb2tlPVwibm9uZVwiIHN0cm9rZS13aWR0aD1cIjFcIiAgZmlsbC1ydWxlPVwiZXZlbm9kZFwiPlxuICAgICAgICA8cGF0aCBkPVwiTTI1NiwxOTAgTDI1NiwyMzIgTDAsMjMyIEwwLDE5MCBMMjU2LDE5MCBaIE0xNjIsMTA3IEwxNjIsMTQ5IEwwLDE0OSBMMCwxMDcgTDE2MiwxMDcgWiBNMjU2LDI0IEwyNTYsNjYgTDAsNjYgTDAsMjQgTDI1NiwyNCBaXCIgaWQ9XCJDb21iaW5lZC1TaGFwZVwiICBmaWxsLXJ1bGU9XCJub256ZXJvXCI+PC9wYXRoPlxuICAgIDwvZz5cbjwvc3ZnPiIsIjw/eG1sIHZlcnNpb249XCIxLjBcIiBlbmNvZGluZz1cIlVURi04XCI/PlxuPHN2ZyB3aWR0aD1cIjI1NnB4XCIgaGVpZ2h0PVwiMjU2cHhcIiB2aWV3Qm94PVwiMCAwIDI1NiAyNTZcIiB2ZXJzaW9uPVwiMS4xXCIgeG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiIHhtbG5zOnhsaW5rPVwiaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGlua1wiPlxuICAgIDx0aXRsZT5pY29uLWFsaWduZWQtcmlnaHQtY29tcGxldGU8L3RpdGxlPlxuICAgIDxnIGlkPVwiaWNvbi1hbGlnbmVkLXJpZ2h0LWNvbXBsZXRlXCIgc3Ryb2tlPVwibm9uZVwiIHN0cm9rZS13aWR0aD1cIjFcIiBmaWxsLXJ1bGU9XCJldmVub2RkXCI+XG4gICAgICAgIDxwYXRoIGQ9XCJNMjU2LDE5MCBMMjU2LDIzMiBMMCwyMzIgTDAsMTkwIEwyNTYsMTkwIFogTTE2MiwxMDcgTDE2MiwxNDkgTDAsMTQ5IEwwLDEwNyBMMTYyLDEwNyBaIE0yNTYsMjQgTDI1Niw2NiBMMCw2NiBMMCwyNCBMMjU2LDI0IFpcIiBpZD1cIkNvbWJpbmVkLVNoYXBlXCIgIGZpbGwtcnVsZT1cIm5vbnplcm9cIiB0cmFuc2Zvcm09XCJ0cmFuc2xhdGUoMTI4LjAwMDAwMCwgMTI4LjAwMDAwMCkgc2NhbGUoLTEsIDEpIHRyYW5zbGF0ZSgtMTI4LjAwMDAwMCwgLTEyOC4wMDAwMDApIFwiPjwvcGF0aD5cbiAgICA8L2c+XG48L3N2Zz4iLCI8P3htbCB2ZXJzaW9uPVwiMS4wXCIgZW5jb2Rpbmc9XCJVVEYtOFwiPz5cbjxzdmcgd2lkdGg9XCIyNTZweFwiIGhlaWdodD1cIjI1NnB4XCIgdmlld0JveD1cIjAgMCAyNTYgMjU2XCIgdmVyc2lvbj1cIjEuMVwiIHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIiB4bWxuczp4bGluaz1cImh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmtcIj5cbiAgICA8dGl0bGU+aWNvbi1jZW50ZXJlZC1jb21wbGV0ZTwvdGl0bGU+XG4gICAgPGcgaWQ9XCJpY29uLWNlbnRlcmVkLWNvbXBsZXRlXCIgc3Ryb2tlPVwibm9uZVwiIHN0cm9rZS13aWR0aD1cIjFcIiAgZmlsbC1ydWxlPVwiZXZlbm9kZFwiPlxuICAgICAgICA8cGF0aCBkPVwiTTIwNCwxODYgTDIwNCwyMjQgTDUyLDIyNCBMNTIsMTg2IEwyMDQsMTg2IFogTTI1NywxMTAgTDI1NywxNDggTDAsMTQ4IEwwLDExMCBMMjU3LDExMCBaIE0yMDQsMzIgTDIwNCw3MCBMNTIsNzAgTDUyLDMyIEwyMDQsMzIgWlwiIGlkPVwiQ29tYmluZWQtU2hhcGVcIiBmaWxsLXJ1bGU9XCJub256ZXJvXCI+PC9wYXRoPlxuICAgIDwvZz5cbjwvc3ZnPiIsIjw/eG1sIHZlcnNpb249XCIxLjBcIiBlbmNvZGluZz1cIlVURi04XCI/PlxuPHN2ZyB3aWR0aD1cIjI1NnB4XCIgaGVpZ2h0PVwiMjU2cHhcIiB2aWV3Qm94PVwiMCAwIDI1NiAyNTZcIiB2ZXJzaW9uPVwiMS4xXCIgeG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiIHhtbG5zOnhsaW5rPVwiaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGlua1wiPlxuICAgIDx0aXRsZT5pY29uLWp1c3RpZmllZC1jb21wbGV0ZTwvdGl0bGU+XG4gICAgPGcgaWQ9XCJpY29uLWp1c3RpZmllZC1jb21wbGV0ZVwiIHN0cm9rZT1cIm5vbmVcIiBzdHJva2Utd2lkdGg9XCIxXCIgIGZpbGwtcnVsZT1cImV2ZW5vZGRcIj5cbiAgICAgICAgPHBhdGggZD1cIk0yNTcsMTg2IEwyNTcsMjI0IEwwLDIyNCBMMCwxODYgTDI1NywxODYgWiBNMjU3LDExMCBMMjU3LDE0OCBMMCwxNDggTDAsMTEwIEwyNTcsMTEwIFogTTI1NiwzMiBMMjU2LDcwIEwwLDcwIEwwLDMyIEwyNTYsMzIgWlwiIGlkPVwiQ29tYmluZWQtU2hhcGVcIiBmaWxsLXJ1bGU9XCJub256ZXJvXCI+PC9wYXRoPlxuICAgIDwvZz5cbjwvc3ZnPiIsIjw/eG1sIHZlcnNpb249XCIxLjBcIiBlbmNvZGluZz1cImlzby04ODU5LTFcIj8+XG48c3ZnIHZlcnNpb249XCIxLjFcIiBpZD1cIkNhcGFfMVwiIHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIiB4bWxuczp4bGluaz1cImh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmtcIiB4PVwiMHB4XCIgeT1cIjBweFwiXG5cdCB2aWV3Qm94PVwiMCAwIDUxMS45OTcgNTExLjk5N1wiIHN0eWxlPVwiZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA1MTEuOTk3IDUxMS45OTc7XCIgeG1sOnNwYWNlPVwicHJlc2VydmVcIj5cbjxnIHRyYW5zZm9ybT1cInRyYW5zbGF0ZSgxIDEpXCI+XG5cdDxnPlxuXHRcdDxnPlxuXHRcdFx0PHBhdGggZD1cIk0yMTEuMjYsMzg5LjI0bC02MC4zMzEsNjAuMzMxYy0yNS4wMTIsMjUuMDEyLTY1LjUxNywyNS4wMTItOTAuNTA4LDAuMDA1Yy0yNC45OTYtMjQuOTk2LTI0Ljk5Ni02NS41MDUtMC4wMDUtOTAuNDk2XG5cdFx0XHRcdGwxMjAuNjgzLTEyMC42ODNjMjQuOTkxLTI0Ljk5Miw2NS41LTI0Ljk5Miw5MC40OTEsMGM4LjMzMSw4LjMzMSwyMS44MzksOC4zMzEsMzAuMTcsMGM4LjMzMS04LjMzMSw4LjMzMS0yMS44MzksMC0zMC4xN1xuXHRcdFx0XHRjLTQxLjY1NC00MS42NTQtMTA5LjE3Ny00MS42NTQtMTUwLjgzMSwwTDMwLjI0NywzMjguOTA5Yy00MS42NTQsNDEuNjU0LTQxLjY1NCwxMDkuMTc3LDAsMTUwLjgzMVxuXHRcdFx0XHRjNDEuNjQ5LDQxLjY3NiwxMDkuMTc3LDQxLjY3NiwxNTAuODUzLDBsNjAuMzMxLTYwLjMzMWM4LjMzMS04LjMzMSw4LjMzMS0yMS44MzksMC0zMC4xN1MyMTkuNTkxLDM4MC45MDksMjExLjI2LDM4OS4yNHpcIi8+XG5cdFx0XHQ8cGF0aCBkPVwiTTQ3OS43NTEsMzAuMjRjLTQxLjY1NC00MS42NTQtMTA5LjE5OS00MS42NTQtMTUwLjg1MywwbC03Mi4zODQsNzIuMzg0Yy04LjMzMSw4LjMzMS04LjMzMSwyMS44MzksMCwzMC4xN1xuXHRcdFx0XHRjOC4zMzEsOC4zMzEsMjEuODM5LDguMzMxLDMwLjE3LDBsNzIuMzg0LTcyLjM4NGMyNC45OTEtMjQuOTkyLDY1LjUyMS0yNC45OTIsOTAuNTEzLDBjMjQuOTkxLDI0Ljk5MSwyNC45OTEsNjUuNSwwLDkwLjQ5MVxuXHRcdFx0XHRMMzE2Ljg0NSwyODMuNjM4Yy0yNC45OTIsMjQuOTkyLTY1LjUsMjQuOTkyLTkwLjQ5MSwwYy04LjMzMS04LjMzMS0yMS44MzktOC4zMzEtMzAuMTcsMHMtOC4zMzEsMjEuODM5LDAsMzAuMTdcblx0XHRcdFx0YzQxLjY1NCw0MS42NTQsMTA5LjE3Nyw0MS42NTQsMTUwLjgzMSwwbDEzMi43MzYtMTMyLjczNkM1MjEuNDA1LDEzOS40MTgsNTIxLjQwNSw3MS44OTQsNDc5Ljc1MSwzMC4yNHpcIi8+XG5cdFx0PC9nPlxuXHQ8L2c+XG48L2c+XG48L3N2Zz5cbiIsImltcG9ydCBCb2xkSWNvbiBmcm9tIFwiLi4vYXNzZXRzL2JvbGQuc3ZnXCI7XG5pbXBvcnQgSXRhbGljSWNvbiBmcm9tIFwiLi4vYXNzZXRzL2l0YWxpYy5zdmdcIjtcbmltcG9ydCBVbmRlcmxpbmVJY29uIGZyb20gXCIuLi9hc3NldHMvdW5kZXJsaW5lLnN2Z1wiO1xuaW1wb3J0IExpc3RJY29uIGZyb20gXCIuLi9hc3NldHMvbGlzdC5zdmdcIjtcbmltcG9ydCBCdWxsZXRJY29uIGZyb20gXCIuLi9hc3NldHMvYnVsbGV0LnN2Z1wiO1xuaW1wb3J0IEp1c3RpZnlMZWZ0SWNvbiBmcm9tIFwiLi4vYXNzZXRzL2FsaWduZWQtbGVmdC5zdmdcIjtcbmltcG9ydCBKdXN0aWZ5UmlnaHRJY29uIGZyb20gXCIuLi9hc3NldHMvYWxpZ25lZC1yaWdodC5zdmdcIjtcbmltcG9ydCBKdXN0aWZ5Q2VudGVySWNvbiBmcm9tIFwiLi4vYXNzZXRzL2NlbnRlcmVkLnN2Z1wiO1xuaW1wb3J0IEp1c3RpZnlJY29uIGZyb20gXCIuLi9hc3NldHMvanVzdGlmaWVkLnN2Z1wiO1xuaW1wb3J0IExpbmtJY29uIGZyb20gXCIuLi9hc3NldHMvbGluay5zdmdcIjtcbmltcG9ydCB0eXBlIHsgVG9vbGJhckl0ZW0gfSBmcm9tIFwiQGNvbW1vbnMvdHlwZXMvQ29tcG9zZXJcIjtcblxuY29uc3QgcXVlcnlDb21tYW5kU3RhdGUgPSAoY29tbWFuZDogc3RyaW5nKTogYm9vbGVhbiA9PlxuICBkb2N1bWVudC5xdWVyeUNvbW1hbmRTdGF0ZShjb21tYW5kKTtcbmV4cG9ydCBjb25zdCBleGVjID0gKGNvbW1hbmQ6IHN0cmluZywgdmFsdWU/OiBzdHJpbmcpOiBib29sZWFuID0+XG4gIGRvY3VtZW50LmV4ZWNDb21tYW5kKGNvbW1hbmQsIGZhbHNlLCB2YWx1ZSk7XG5cbmV4cG9ydCBjb25zdCBkZWZhdWx0QWN0aW9uczogVG9vbGJhckl0ZW1bXSA9IFtcbiAge1xuICAgIHRpdGxlOiBcIkJvbGRcIixcbiAgICBzdGF0ZTogKCk6IGJvb2xlYW4gPT4gcXVlcnlDb21tYW5kU3RhdGUoXCJib2xkXCIpLFxuICAgIHJlc3VsdDogKCk6IGJvb2xlYW4gPT4gZXhlYyhcImJvbGRcIiksXG4gICAgaWNvbjogQm9sZEljb24sXG4gIH0sXG4gIHtcbiAgICB0aXRsZTogXCJJdGFsaWNcIixcbiAgICBzdGF0ZTogKCk6IGJvb2xlYW4gPT4gcXVlcnlDb21tYW5kU3RhdGUoXCJpdGFsaWNcIiksXG4gICAgcmVzdWx0OiAoKTogYm9vbGVhbiA9PiBleGVjKFwiaXRhbGljXCIpLFxuICAgIGljb246IEl0YWxpY0ljb24sXG4gIH0sXG4gIHtcbiAgICB0aXRsZTogXCJVbmRlcmxpbmVcIixcbiAgICBzdGF0ZTogKCk6IGJvb2xlYW4gPT4gcXVlcnlDb21tYW5kU3RhdGUoXCJ1bmRlcmxpbmVcIiksXG4gICAgcmVzdWx0OiAoKTogYm9vbGVhbiA9PiBleGVjKFwidW5kZXJsaW5lXCIpLFxuICAgIGljb246IFVuZGVybGluZUljb24sXG4gIH0sXG4gIHtcbiAgICB0aXRsZTogXCJKdXN0aWZ5IExlZnRcIixcbiAgICBzdGF0ZTogKCk6IGJvb2xlYW4gPT4gcXVlcnlDb21tYW5kU3RhdGUoXCJqdXN0aWZ5TGVmdFwiKSxcbiAgICByZXN1bHQ6ICgpOiBib29sZWFuID0+IGV4ZWMoXCJqdXN0aWZ5TGVmdFwiKSxcbiAgICBpY29uOiBKdXN0aWZ5TGVmdEljb24sXG4gIH0sXG4gIHtcbiAgICB0aXRsZTogXCJKdXN0aWZ5IFJpZ2h0XCIsXG4gICAgc3RhdGU6ICgpOiBib29sZWFuID0+IHF1ZXJ5Q29tbWFuZFN0YXRlKFwianVzdGlmeVJpZ2h0XCIpLFxuICAgIHJlc3VsdDogKCk6IGJvb2xlYW4gPT4gZXhlYyhcImp1c3RpZnlSaWdodFwiKSxcbiAgICBpY29uOiBKdXN0aWZ5UmlnaHRJY29uLFxuICB9LFxuICB7XG4gICAgdGl0bGU6IFwiSnVzdGlmeSBDZW50ZXJcIixcbiAgICBzdGF0ZTogKCk6IGJvb2xlYW4gPT4gcXVlcnlDb21tYW5kU3RhdGUoXCJqdXN0aWZ5Q2VudGVyXCIpLFxuICAgIHJlc3VsdDogKCk6IGJvb2xlYW4gPT4gZXhlYyhcImp1c3RpZnlDZW50ZXJcIiksXG4gICAgaWNvbjogSnVzdGlmeUNlbnRlckljb24sXG4gIH0sXG4gIHtcbiAgICB0aXRsZTogXCJKdXN0aWZ5IEZ1bGxcIixcbiAgICBzdGF0ZTogKCk6IGJvb2xlYW4gPT4gcXVlcnlDb21tYW5kU3RhdGUoXCJqdXN0aWZ5RnVsbFwiKSxcbiAgICByZXN1bHQ6ICgpOiBib29sZWFuID0+IGV4ZWMoXCJqdXN0aWZ5RnVsbFwiKSxcbiAgICBpY29uOiBKdXN0aWZ5SWNvbixcbiAgfSxcbiAge1xuICAgIHRpdGxlOiBcIk9yZGVyZWQgTGlzdFwiLFxuICAgIHJlc3VsdDogKCk6IGJvb2xlYW4gPT4gZXhlYyhcImluc2VydE9yZGVyZWRMaXN0XCIpLFxuICAgIGljb246IExpc3RJY29uLFxuICB9LFxuICB7XG4gICAgdGl0bGU6IFwiVW5vcmRlcmVkIExpc3RcIixcbiAgICByZXN1bHQ6ICgpOiBib29sZWFuID0+IGV4ZWMoXCJpbnNlcnRVbm9yZGVyZWRMaXN0XCIpLFxuICAgIGljb246IEJ1bGxldEljb24sXG4gIH0sXG4gIHtcbiAgICB0aXRsZTogXCJMaW5rXCIsXG4gICAgcmVzdWx0OiAoKTogYm9vbGVhbiA9PiB7XG4gICAgICBjb25zdCB1cmwgPSBwcm9tcHQoXCJFbnRlciBhIFVSTDpcIiwgXCJodHRwOi8vXCIpO1xuICAgICAgcmV0dXJuIGV4ZWMoXCJjcmVhdGVMaW5rXCIsIHVybCB8fCBcIlwiKTtcbiAgICB9LFxuICAgIGljb246IExpbmtJY29uLFxuICB9LFxuXTtcbiIsIjxzdmVsdGU6b3B0aW9ucyB0YWc9XCJueWxhcy1odG1sLWVkaXRvclwiIC8+XG5cbjxzY3JpcHQgbGFuZz1cInRzXCI+XG4gIGltcG9ydCB7IGRlZmF1bHRBY3Rpb25zIH0gZnJvbSBcIi4uL2xpYi9odG1sLWVkaXRvclwiO1xuICBpbXBvcnQgdHlwZSB7IFJlcGxhY2VGaWVsZHMsIFRvb2xiYXJJdGVtIH0gZnJvbSBcIkBjb21tb25zL3R5cGVzL0NvbXBvc2VyXCI7XG5cbiAgZXhwb3J0IGxldCBvbmNoYW5nZSA9IChfaHRtbDogc3RyaW5nKSA9PiBQcm9taXNlLnJlc29sdmUoe30pO1xuICBleHBvcnQgbGV0IGh0bWwgPSBcIlwiO1xuICBleHBvcnQgbGV0IHNob3dfZWRpdG9yX3Rvb2xiYXIgPSB0cnVlO1xuICBleHBvcnQgbGV0IHJlcGxhY2VfZmllbGRzOiBSZXBsYWNlRmllbGRzW10gfCBudWxsID0gbnVsbDtcbiAgZXhwb3J0IGxldCBmb2N1c19ib2R5X29ubG9hZDogYm9vbGVhbiA9IGZhbHNlO1xuXG4gIGxldCBjb250YWluZXI6IEhUTUxEaXZFbGVtZW50O1xuICBsZXQgdG9vbGJhcjogVG9vbGJhckl0ZW1bXSA9IGRlZmF1bHRBY3Rpb25zO1xuXG4gICQ6IGlmIChmb2N1c19ib2R5X29ubG9hZCAmJiBjb250YWluZXIpIHtcbiAgICBjb250YWluZXIuZm9jdXMoKTtcbiAgICBoYW5kbGVIdG1sQm9keUZvY3VzKCk7XG4gIH1cblxuICAkOiBpZiAoaHRtbCkge1xuICAgIGNvbnN0IHNlbGVjdGlvbiA9IHdpbmRvdy5nZXRTZWxlY3Rpb24oKTtcblxuICAgIGlmICh0eXBlb2YgcmVwbGFjZV9maWVsZHMgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgIHJlcGxhY2VfZmllbGRzID0gSlNPTi5wYXJzZShyZXBsYWNlX2ZpZWxkcyk7XG4gICAgfVxuICAgIGlmIChzZWxlY3Rpb24gJiYgQXJyYXkuaXNBcnJheShyZXBsYWNlX2ZpZWxkcykpIHtcbiAgICAgIGZvciAoY29uc3QgZmllbGQgb2YgcmVwbGFjZV9maWVsZHMpIHtcbiAgICAgICAgaHRtbCA9IGh0bWwucmVwbGFjZUFsbChmaWVsZC5mcm9tLCBmaWVsZC50byk7XG4gICAgICAgIGNvbnN0IGN1cnJlbnRGb2N1c2VkTm9kZSA9IHNlbGVjdGlvbi5mb2N1c05vZGU7XG4gICAgICAgIGNvbnN0IGN1cnJlbnRDYXJldFBvc2l0aW9uID0gc2VsZWN0aW9uLmZvY3VzT2Zmc2V0O1xuXG4gICAgICAgIGlmIChjdXJyZW50Rm9jdXNlZE5vZGUgJiYgY3VycmVudEZvY3VzZWROb2RlLnRleHRDb250ZW50KSB7XG4gICAgICAgICAgaWYgKGN1cnJlbnRGb2N1c2VkTm9kZS50ZXh0Q29udGVudC5pbmNsdWRlcyhmaWVsZC5mcm9tKSkge1xuICAgICAgICAgICAgY29uc3QgbWF0Y2hDb3VudCA9XG4gICAgICAgICAgICAgIGN1cnJlbnRGb2N1c2VkTm9kZS50ZXh0Q29udGVudC5zcGxpdChmaWVsZC5mcm9tKS5sZW5ndGggLSAxO1xuICAgICAgICAgICAgY29uc3QgcmVwbGFjZU5vZGUgPSBkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShcbiAgICAgICAgICAgICAgY3VycmVudEZvY3VzZWROb2RlLnRleHRDb250ZW50LnJlcGxhY2VBbGwoZmllbGQuZnJvbSwgZmllbGQudG8pLFxuICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgY3VycmVudEZvY3VzZWROb2RlLnJlcGxhY2VXaXRoKHJlcGxhY2VOb2RlKTtcblxuICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICBzZWxlY3Rpb24uZm9jdXNOb2RlICYmXG4gICAgICAgICAgICAgIHNlbGVjdGlvbi5mb2N1c05vZGUubm9kZVR5cGUgPT09IE5vZGUuVEVYVF9OT0RFXG4gICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgaWYgKG1hdGNoQ291bnQgPiAxKSB7XG4gICAgICAgICAgICAgICAgc2V0Q2FyZXRQb3NpdGlvbihcbiAgICAgICAgICAgICAgICAgIHJlcGxhY2VOb2RlLFxuICAgICAgICAgICAgICAgICAgY3VycmVudENhcmV0UG9zaXRpb24gK1xuICAgICAgICAgICAgICAgICAgICAoZmllbGQudG8ubGVuZ3RoIC0gZmllbGQuZnJvbS5sZW5ndGgpICtcbiAgICAgICAgICAgICAgICAgICAgKG1hdGNoQ291bnQgLSAxKSxcbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHNldENhcmV0UG9zaXRpb24oXG4gICAgICAgICAgICAgICAgICByZXBsYWNlTm9kZSxcbiAgICAgICAgICAgICAgICAgIGN1cnJlbnRDYXJldFBvc2l0aW9uICsgZmllbGQudG8ubGVuZ3RoIC0gZmllbGQuZnJvbS5sZW5ndGgsXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICBpZiAob25jaGFuZ2UpIG9uY2hhbmdlKGh0bWwpO1xuICB9XG4gIC8qKlxuICAgKiBTZXRzIHRoZSBjYXJldCBwb3NpdGlvbiBhdCBhIGdpdmVuIG9mZnNldCBmb3IgYSBzcGVjaWZpY1xuICAgKiBub2RlLlxuICAgKlxuICAgKiBAcGFyYW0gbm9kZSBOb2RlXG4gICAqIEBwYXJhbSBvZmZzZXQgTnVtYmVyXG4gICAqL1xuICBmdW5jdGlvbiBzZXRDYXJldFBvc2l0aW9uKG5vZGU6IE5vZGUsIG9mZnNldDogbnVtYmVyKSB7XG4gICAgY29uc3QgcmFuZ2UgPSBkb2N1bWVudC5jcmVhdGVSYW5nZSgpO1xuICAgIGNvbnN0IHNlbGVjdGlvbiA9IHdpbmRvdy5nZXRTZWxlY3Rpb24oKTtcbiAgICByYW5nZS5zZWxlY3ROb2RlKG5vZGUpO1xuICAgIHJhbmdlLnNldFN0YXJ0KG5vZGUsIG9mZnNldCk7XG4gICAgcmFuZ2UuY29sbGFwc2UodHJ1ZSk7XG4gICAgcmFuZ2UuZGV0YWNoKCk7XG4gICAgc2VsZWN0aW9uPy5yZW1vdmVBbGxSYW5nZXMoKTtcbiAgICBzZWxlY3Rpb24/LmFkZFJhbmdlKHJhbmdlKTtcbiAgfVxuXG4gIGNvbnN0IGhhbmRsZUFjdGlvbiA9IChpdGVtOiBUb29sYmFySXRlbSkgPT4gKCkgPT4ge1xuICAgIGlmIChpdGVtLnJlc3VsdCkge1xuICAgICAgaWYgKGNvbnRhaW5lcikge1xuICAgICAgICBjb250YWluZXIuZm9jdXMoKTtcbiAgICAgIH1cbiAgICAgIGl0ZW0ucmVzdWx0KCk7XG4gICAgfVxuXG4gICAgdXBkYXRlVG9vbGJhclVJKCk7XG4gIH07XG5cbiAgLy8gVGhpcyBmdW5jdGlvbiB1cGRhdGVzIHRoZSB0b29sYmFyIFVJIHN0YXRlIHdoZW4geW91IHNlbGVjdCB0ZXh0IChlZy4gc2VsZWN0IGJvbGQgdGV4dClcbiAgZnVuY3Rpb24gdXBkYXRlVG9vbGJhclVJKCkge1xuICAgIHRvb2xiYXIgPSB0b29sYmFyLm1hcCgoaXRlbTogVG9vbGJhckl0ZW0pID0+IHtcbiAgICAgIGlmIChpdGVtLnN0YXRlKSB7XG4gICAgICAgIGl0ZW0uYWN0aXZlID0gaXRlbS5zdGF0ZSgpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGl0ZW07XG4gICAgfSk7XG4gIH1cblxuICBsZXQgZm9jdXNpbmcgPSBmYWxzZTtcbiAgY29uc3QgaGFuZGxlSHRtbEJvZHlGb2N1cyA9ICgpID0+IHtcbiAgICAvLyByZWZvY3VzIGVkaXRvciB0byByZXR1cm4gY3Vyc29yIHRvIGVkaXRvciAtIHdvcmthcm91bmQgZm9yXG4gICAgLy8gZmlyZWZveCBzZWxlY3Rpb24gQVBJIC8gc2hhZG93IERPTSBpc3N1ZXMpXG4gICAgaWYgKGZvY3VzaW5nKSB7XG4gICAgICBmb2N1c2luZyA9IGZhbHNlO1xuICAgIH0gZWxzZSB7XG4gICAgICBmb2N1c2luZyA9IHRydWU7XG4gICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgY29udGFpbmVyLmJsdXIoKTtcbiAgICAgICAgY29udGFpbmVyLmZvY3VzKCk7XG4gICAgICB9LCAwKTtcbiAgICB9XG5cbiAgICAvLyBpZiBjb250ZW50ZWRpdGFibGUgYXJlYSBpcyBlbXB0eSB3ZSBuZWVkIHRvIGFkZCBzb21ldGhpbmcgdG8gYWRkIHJhbmdlXG4gICAgaWYgKGNvbnRhaW5lci5pbm5lckhUTUwgPT09IFwiXCIpIHtcbiAgICAgIGNvbnRhaW5lci5pbm5lckhUTUwgPSBcIlxcdTAwYTBcIjtcbiAgICAgIGNvbnN0IHNlbGVjdGlvbiA9IHdpbmRvdy5nZXRTZWxlY3Rpb24oKTtcbiAgICAgIGNvbnN0IHJhbmdlID0gZG9jdW1lbnQuY3JlYXRlUmFuZ2UoKTtcbiAgICAgIHJhbmdlLnNlbGVjdE5vZGVDb250ZW50cyhjb250YWluZXIpO1xuICAgICAgcmFuZ2UuY29sbGFwc2UoZmFsc2UpOyAvLyBjb2xsYXBzZSByYW5nZSB0byB0aGUgZW5kXG5cbiAgICAgIHNlbGVjdGlvbi5yZW1vdmVBbGxSYW5nZXMoKTtcbiAgICAgIHNlbGVjdGlvbi5hZGRSYW5nZShyYW5nZSk7XG4gICAgfVxuICB9O1xuPC9zY3JpcHQ+XG5cbjxzdHlsZSBsYW5nPVwic2Nzc1wiPlxuICAuaHRtbC1lZGl0b3Ige1xuICAgIG1pbi1oZWlnaHQ6IHZhcigtLWNvbXBvc2VyLWVkaXRvci1taW4taGVpZ2h0LCAyMjBweCk7XG4gICAgbWF4LWhlaWdodDogdmFyKC0tY29tcG9zZXItZWRpdG9yLW1heC1oZWlnaHQsIDQ4MHB4KTtcbiAgICAqOmZvY3VzIHtcbiAgICAgIG91dGxpbmU6IDVweCBhdXRvIHZhcigtLWNvbXBvc2VyLXByaW1hcnktY29sb3IsICM1Yzc3ZmYpO1xuICAgIH1cbiAgfVxuICAuaHRtbC1lZGl0b3ItY29udGVudCB7XG4gICAgbWluLWhlaWdodDogdmFyKC0tY29tcG9zZXItZWRpdG9yLW1pbi1oZWlnaHQsIDIyMHB4KTtcbiAgICBtYXgtaGVpZ2h0OiB2YXIoLS1jb21wb3Nlci1lZGl0b3ItbWF4LWhlaWdodCwgNDgwcHgpO1xuICB9XG4gIGEge1xuICAgIGNvbG9yOiB2YXIoLS1jb21wb3Nlci1wcmltYXJ5LWNvbG9yLCAjNWM3N2ZmKTtcbiAgICAmOmhvdmVyIHtcbiAgICAgIGNvbG9yOiB2YXIoLS1jb21wb3Nlci1wcmltYXJ5LWRhcmstY29sb3IsICMyOTRkZmYpO1xuICAgIH1cbiAgfVxuICBbY29udGVudGVkaXRhYmxlXSB7XG4gICAgcGFkZGluZzogdmFyKC0tY29tcG9zZXItb3V0ZXItcGFkZGluZywgMTVweClcbiAgICAgIHZhcigtLWNvbXBvc2VyLW91dGVyLXBhZGRpbmcsIDE1cHgpO1xuICAgIG1hcmdpbjogMDtcbiAgICBvdXRsaW5lOiAwO1xuICAgIGxpbmUtaGVpZ2h0OiAxLjM7XG4gICAgY29sb3I6IHZhcigtLWNvbXBvc2VyLXRleHQtY29sb3IsIGJsYWNrKTtcbiAgICBvdmVyZmxvdy15OiBhdXRvO1xuICB9XG4gIC50b29sYmFyIHtcbiAgICBkaXNwbGF5OiBmbGV4O1xuICAgIGZvbnQtc2l6ZTogMTBweDtcbiAgICBhbGlnbi1pdGVtczogY2VudGVyO1xuICAgIGp1c3RpZnktY29udGVudDogZmxleC1zdGFydDtcbiAgICBib3JkZXItYm90dG9tOiAxcHggc29saWQgdmFyKC0tY29tcG9zZXItYm9yZGVyLWNvbG9yLCAjZjdmN2Y3KTtcbiAgICBwYWRkaW5nOiAwIGNhbGModmFyKC0tY29tcG9zZXItb3V0ZXItcGFkZGluZywgMTVweCkgLyAyKTtcblxuICAgIGJ1dHRvbiB7XG4gICAgICBjb2xvcjogdmFyKC0tY29tcG9zZXItdGV4dC1saWdodC1jb2xvciwgIzZlNmU3YSk7XG4gICAgICBiYWNrZ3JvdW5kOiBub25lO1xuICAgICAgYm9yZGVyOiAwO1xuICAgICAgY3Vyc29yOiBwb2ludGVyO1xuICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgIHBhZGRpbmc6IDhweDtcbiAgICAgIG1hcmdpbjogMnB4O1xuICAgICAgb3V0bGluZTogMDtcbiAgICAgIGJvcmRlci1yYWRpdXM6IGNhbGModmFyKC0tY29tcG9zZXItYm9yZGVyLXJhZGl1cywgNnB4KSAvIDIpO1xuICAgICAgdHJhbnNpdGlvbjogYmFja2dyb3VuZC1jb2xvciAwLjNzO1xuXG4gICAgICAmLmFjdGl2ZSB7XG4gICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWNvbXBvc2VyLWJhY2tncm91bmQtbXV0ZWQtY29sb3IsICNmMGYyZmYpO1xuICAgICAgfVxuICAgICAgJjpmaXJzdC1jaGlsZCB7XG4gICAgICAgIG1hcmdpbi1sZWZ0OiAwO1xuICAgICAgfVxuICAgICAgJjpob3ZlciB7XG4gICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWNvbXBvc2VyLWJhY2tncm91bmQtbXV0ZWQtY29sb3IsICNmMGYyZmYpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuPC9zdHlsZT5cblxuPCEtLSBUb29sYmFyIC0tPlxuPGRpdiBjbGFzcz1cImh0bWwtZWRpdG9yXCI+XG4gIHsjaWYgc2hvd19lZGl0b3JfdG9vbGJhcn1cbiAgICA8ZGl2IGNsYXNzPVwidG9vbGJhclwiPlxuICAgICAgeyNlYWNoIHRvb2xiYXIgYXMgaXRlbX1cbiAgICAgICAgPGJ1dHRvblxuICAgICAgICAgIG9uOmNsaWNrfHN0b3BQcm9wYWdhdGlvbnxjYXB0dXJlPXtoYW5kbGVBY3Rpb24oaXRlbSl9XG4gICAgICAgICAgdGl0bGU9e2l0ZW0udGl0bGV9XG4gICAgICAgICAgY2xhc3M9e2l0ZW0uc3RhdGUgJiYgaXRlbS5zdGF0ZSgpID8gXCJhY3RpdmVcIiA6IFwiXCJ9PlxuICAgICAgICAgIHsjaWYgaXRlbS5pY29ufVxuICAgICAgICAgICAgPHN2ZWx0ZTpjb21wb25lbnRcbiAgICAgICAgICAgICAgdGhpcz17aXRlbS5pY29ufVxuICAgICAgICAgICAgICBjbGFzcz1cImljb25cIlxuICAgICAgICAgICAgICBzdHlsZT1cImZpbGw6IHZhcigtLWNvbXBvc2VyLWljb25zLWNvbG9yLCAjNjY2Nzc0KSAhaW1wb3J0YW50OyB3aWR0aDogMTJweDsgaGVpZ2h0OiAxMnB4O1wiIC8+XG4gICAgICAgICAgezplbHNlfXtpdGVtLnRpdGxlLmNoYXJBdCgwKX17L2lmfVxuICAgICAgICA8L2J1dHRvbj5cbiAgICAgIHsvZWFjaH1cbiAgICA8L2Rpdj5cbiAgey9pZn1cblxuICB7I2lmIGZhbHNlfVxuICAgIDwhLS0gVGhlIGZvbGxvd2luZyBpZiBzdGF0ZW1lbnQgZXhpc3RzIHRvIHByZXZlbnQgc3ZlbHRlIGZyb20gc3RyaXBwaW5nIHN0eWxpbmcgYXNzb2NpYXRlZFxuICAgICAgd2l0aCB0aGUgSFRNTCB0YWdzIHdpdGhpbiB0aGlzIGlmIHN0YXRlbWVudC4gVGhpcyBpcyByZXF1aXJlZCB0byBhZGQgc3R5bGluZyB0byB0aGUgXG4gICAgICBIVE1MIGFkZGVkIGluIHRoZSBXWVNJV1lHIGVkaXRvci5cblxuICAgICAgVGhpcyBoYWNrIHdhcyBpbXBsZW1lbnRlZCBiZWNhdXNlIHN2ZWx0ZSBkb2VzIG5vdCBwYXJzZSB0aGUgOmdsb2JhbCgpIHNlbGVjdG9yIGluXG4gICAgICBjdXN0b20gZWxlbWVudHMuXG5cbiAgICAgIE5vdGU6IFdoaWxlIHRoZSBDU1MgZ2V0cyBhZGRlZCBpbiB0aGUgZmluYWwgYnVuZGxlLCBub25lIG9mIHRoZSBIVE1MIGlzIGdlbmVyYXRlZC5cbiAgLS0+XG4gICAgPCEtLSBzdmVsdGUtaWdub3JlIGExMXktaW52YWxpZC1hdHRyaWJ1dGUgLS0+XG4gICAgPCEtLSBzdmVsdGUtaWdub3JlIGExMXktbWlzc2luZy1hdHRyaWJ1dGUgLS0+XG4gICAgPCEtLSBzdmVsdGUtaWdub3JlIGExMXktbWlzc2luZy1jb250ZW50IC0tPlxuICAgIDxhIC8+XG4gIHsvaWZ9XG5cbiAgPGRpdlxuICAgIGJpbmQ6dGhpcz17Y29udGFpbmVyfVxuICAgIGJpbmQ6aW5uZXJIVE1MPXtodG1sfVxuICAgIG9uOmZvY3VzPXtoYW5kbGVIdG1sQm9keUZvY3VzfVxuICAgIGNvbnRlbnRlZGl0YWJsZT1cInRydWVcIlxuICAgIGNsYXNzPVwiaHRtbC1lZGl0b3ItY29udGVudFwiXG4gICAgcm9sZT1cInRleHRib3hcIlxuICAgIGFyaWEtbGFiZWw9XCJIVE1MIEVkaXRvclwiXG4gICAgb246a2V5dXA9e3VwZGF0ZVRvb2xiYXJVSX1cbiAgICBvbjptb3VzZXVwPXt1cGRhdGVUb29sYmFyVUl9IC8+XG48L2Rpdj5cbiIsIjxzdmVsdGU6b3B0aW9ucyB0YWc9XCJueWxhcy1jb21wb3Nlci1hbGVydC1iYXJcIiAvPlxuXG48c2NyaXB0PlxuICBleHBvcnQgbGV0IHR5cGUgPSBcInByaW1hcnlcIjtcbiAgZXhwb3J0IGxldCBkaXNtaXNzaWJsZSA9IHRydWU7XG4gIGV4cG9ydCBsZXQgdmlzaWJsZSA9IHRydWU7XG4gIGV4cG9ydCBsZXQgb25kaXNtaXNzID0gbnVsbDtcblxuICBjb25zdCBjbG9zZSA9ICgpID0+IHtcbiAgICBpZiAob25kaXNtaXNzKSBvbmRpc21pc3MoKTtcbiAgICB2aXNpYmxlID0gZmFsc2U7XG4gIH07XG48L3NjcmlwdD5cblxuPHN0eWxlIGxhbmc9XCJzY3NzXCI+XG4gIC5hbGVydC1iYXIge1xuICAgIHBhZGRpbmc6IHZhcigtLWNvbXBvc2VyLW91dGVyLXBhZGRpbmcsIDE1cHgpO1xuICAgIHRleHQtYWxpZ246IGNlbnRlcjtcbiAgICBmb250LXNpemU6IHZhcigtLWNvbXBvc2VyLWZvbnQtc2l6ZS1zbWFsbCwgMTJweCk7XG4gICAgYm9yZGVyLWJvdHRvbS1sZWZ0LXJhZGl1czogdmFyKC0tY29tcG9zZXItYm9yZGVyLWNvbG9yLCAjZjdmN2Y3LXJhZGl1cyk7XG4gICAgYm9yZGVyLWJvdHRvbS1yaWdodC1yYWRpdXM6IHZhcigtLWNvbXBvc2VyLWJvcmRlci1yYWRpdXMsIDZweCk7XG4gICAgJl9fY29udGFpbmVyIHtcbiAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICBhbGlnbi1pdGVtczogY2VudGVyO1xuICAgICAganVzdGlmeS1jb250ZW50OiBiZXR3ZWVuO1xuICAgIH1cbiAgICAmX190ZXh0IHtcbiAgICAgIGZsZXgtZ3JvdzogMTtcbiAgICB9XG4gICAgJl9fY2xvc2Uge1xuICAgICAgb3V0bGluZTogMDtcbiAgICAgIGJvcmRlcjogMDtcbiAgICAgIGJhY2tncm91bmQ6IG5vbmU7XG4gICAgICBmb250LXNpemU6IDE4cHg7XG4gICAgICBvcGFjaXR5OiAwLjg7XG4gICAgICBjdXJzb3I6IHBvaW50ZXI7XG4gICAgICAmOmhvdmVyIHtcbiAgICAgICAgb3BhY2l0eTogMTtcbiAgICAgIH1cbiAgICB9XG4gICAgKjpmb2N1cyB7XG4gICAgICBvdXRsaW5lOiA1cHggYXV0byBIaWdobGlnaHQ7XG4gICAgICBvdXRsaW5lOiA1cHggYXV0byAtd2Via2l0LWZvY3VzLXJpbmctY29sb3I7XG4gICAgfVxuICAgIC8vIE1vZGlmaWVyc1xuICAgICYuc3VjY2VzcyB7XG4gICAgICBiYWNrZ3JvdW5kOiB2YXIoXG4gICAgICAgIC0tY29tcG9zZXItc3VjY2Vzcy1saWdodC1jb2xvcixcbiAgICAgICAgdmFyKC0tY29tcG9zZXItcHJpbWFyeS1jb2xvciwgIzVjNzdmZilcbiAgICAgICk7XG4gICAgICBjb2xvcjogdmFyKFxuICAgICAgICAtLWNvbXBvc2VyLXN1Y2Nlc3MtY29sb3IsXG4gICAgICAgIHZhcigtLWNvbXBvc2VyLWJhY2tncm91bmQtY29sb3IsIHdoaXRlKVxuICAgICAgKTtcbiAgICAgIC5hbGVydC1iYXJfX2Nsb3NlIHtcbiAgICAgICAgY29sb3I6IHZhcihcbiAgICAgICAgICAtLWNvbXBvc2VyLXN1Y2Nlc3MtY29sb3IsXG4gICAgICAgICAgdmFyKC0tY29tcG9zZXItYmFja2dyb3VuZC1jb2xvciwgd2hpdGUpXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgfVxuICAgICYuZGFuZ2VyIHtcbiAgICAgIGJhY2tncm91bmQ6IHZhcigtLWNvbXBvc2VyLWRhbmdlci1saWdodC1jb2xvciwgI2ZmZTNlMyk7XG4gICAgICBjb2xvcjogdmFyKC0tY29tcG9zZXItZGFuZ2VyLWNvbG9yLCAjZmY1YzVjKTtcbiAgICAgIC5hbGVydC1iYXJfX2Nsb3NlIHtcbiAgICAgICAgY29sb3I6IHZhcigtLWNvbXBvc2VyLWRhbmdlci1jb2xvciwgI2ZmNWM1Yyk7XG4gICAgICB9XG4gICAgfVxuICAgICYuaW5mbyB7XG4gICAgICBiYWNrZ3JvdW5kOiB2YXIoXG4gICAgICAgIC0tY29tcG9zZXItaW5mby1saWdodC1jb2xvcixcbiAgICAgICAgdmFyKC0tY29tcG9zZXItcHJpbWFyeS1saWdodC1jb2xvciwgI2YwZjJmZilcbiAgICAgICk7XG4gICAgICBjb2xvcjogdmFyKC0tY29tcG9zZXItaW5mby1jb2xvciwgdmFyKC0tY29tcG9zZXItcHJpbWFyeS1jb2xvciwgIzVjNzdmZikpO1xuICAgICAgLmFsZXJ0LWJhcl9fY2xvc2Uge1xuICAgICAgICBjb2xvcjogdmFyKFxuICAgICAgICAgIC0tY29tcG9zZXItaW5mby1jb2xvcixcbiAgICAgICAgICB2YXIoLS1jb21wb3Nlci1wcmltYXJ5LWNvbG9yLCAjNWM3N2ZmKVxuICAgICAgICApO1xuICAgICAgfVxuICAgIH1cbiAgfVxuPC9zdHlsZT5cblxueyNpZiB2aXNpYmxlfVxuICA8ZGl2XG4gICAgY2xhc3M9XCJhbGVydC1iYXJcIlxuICAgIGNsYXNzOnN1Y2Nlc3M9e3R5cGUgPT09IFwic3VjY2Vzc1wifVxuICAgIGNsYXNzOndhcm5pbmc9e3R5cGUgPT09IFwid2FybmluZ1wifVxuICAgIGNsYXNzOmRhbmdlcj17dHlwZSA9PT0gXCJkYW5nZXJcIn1cbiAgICBjbGFzczpwcmltYXJ5PXt0eXBlID09PSBcInByaW1hcnlcIn1cbiAgICBjbGFzczppbmZvPXt0eXBlID09PSBcImluZm9cIn1cbiAgPlxuICAgIDxkaXYgY2xhc3M9XCJhbGVydC1iYXJfX2NvbnRhaW5lclwiPlxuICAgICAgPGRpdiBjbGFzcz1cImFsZXJ0LWJhcl9fdGV4dFwiPlxuICAgICAgICA8c2xvdCAvPlxuICAgICAgPC9kaXY+XG4gICAgICB7I2lmIGRpc21pc3NpYmxlfVxuICAgICAgICA8YnV0dG9uIGNsYXNzPVwiYWxlcnQtYmFyX19jbG9zZVwiIG9uOmNsaWNrPXtjbG9zZX0+JnRpbWVzOzwvYnV0dG9uPlxuICAgICAgey9pZn1cbiAgICA8L2Rpdj5cbiAgPC9kaXY+XG57L2lmfVxuIiwiPHN2ZyBoZWlnaHQ9XCIxMFwiIHZpZXdCb3g9XCIwIDAgMzI5LjI2OTMzIDMyOVwiIHdpZHRoPVwiMTBcIiB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCI+PHBhdGggZD1cIm0xOTQuODAwNzgxIDE2NC43Njk1MzEgMTI4LjIxMDkzOC0xMjguMjE0ODQzYzguMzQzNzUtOC4zMzk4NDQgOC4zNDM3NS0yMS44MjQyMTkgMC0zMC4xNjQwNjMtOC4zMzk4NDQtOC4zMzk4NDQtMjEuODI0MjE5LTguMzM5ODQ0LTMwLjE2NDA2MyAwbC0xMjguMjE0ODQ0IDEyOC4yMTQ4NDQtMTI4LjIxMDkzNy0xMjguMjE0ODQ0Yy04LjM0Mzc1LTguMzM5ODQ0LTIxLjgyNDIxOS04LjMzOTg0NC0zMC4xNjQwNjMgMC04LjM0Mzc1IDguMzM5ODQ0LTguMzQzNzUgMjEuODI0MjE5IDAgMzAuMTY0MDYzbDEyOC4yMTA5MzggMTI4LjIxNDg0My0xMjguMjEwOTM4IDEyOC4yMTQ4NDRjLTguMzQzNzUgOC4zMzk4NDQtOC4zNDM3NSAyMS44MjQyMTkgMCAzMC4xNjQwNjMgNC4xNTYyNSA0LjE2MDE1NiA5LjYyMTA5NCA2LjI1IDE1LjA4MjAzMiA2LjI1IDUuNDYwOTM3IDAgMTAuOTIxODc1LTIuMDg5ODQ0IDE1LjA4MjAzMS02LjI1bDEyOC4yMTA5MzctMTI4LjIxNDg0NCAxMjguMjE0ODQ0IDEyOC4yMTQ4NDRjNC4xNjAxNTYgNC4xNjAxNTYgOS42MjEwOTQgNi4yNSAxNS4wODIwMzIgNi4yNSA1LjQ2MDkzNyAwIDEwLjkyMTg3NC0yLjA4OTg0NCAxNS4wODIwMzEtNi4yNSA4LjM0Mzc1LTguMzM5ODQ0IDguMzQzNzUtMjEuODI0MjE5IDAtMzAuMTY0MDYzem0wIDBcIi8+PC9zdmc+IiwiPHN2ZyBpZD1cIkNhcGFfMVwiIGVuYWJsZS1iYWNrZ3JvdW5kPVwibmV3IDAgMCA0OTcgNDk3XCIgaGVpZ2h0PVwiNTEyXCIgdmlld0JveD1cIjAgMCA0OTcgNDk3XCIgd2lkdGg9XCI1MTJcIiB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCI+PGc+PGNpcmNsZSBjeD1cIjk4XCIgY3k9XCIzNzZcIiBmaWxsPVwiIzkwOWJhNlwiIHI9XCI1M1wiLz48Y2lyY2xlIGN4PVwiNDM5XCIgY3k9XCIzMzZcIiBmaWxsPVwiI2M4ZDJkY1wiIHI9XCI0NlwiLz48Y2lyY2xlIGN4PVwiMzk3XCIgY3k9XCIxMTJcIiBmaWxsPVwiI2U5ZWRmMVwiIHI9XCIzOFwiLz48ZWxsaXBzZSBjeD1cIjU2LjI0NVwiIGN5PVwiMjQ0Ljc1NFwiIGZpbGw9XCIjN2U4Yjk2XCIgcng9XCI1Ni4yNDVcIiByeT1cIjU0Ljg3NFwiLz48ZWxsaXBzZSBjeD1cIjIxNy44MjFcIiBjeT1cIjQ0Ny4xNzVcIiBmaWxsPVwiI2EyYWJiOFwiIHJ4PVwiNTEuMTMyXCIgcnk9XCI0OS44MjVcIi8+PGVsbGlwc2UgY3g9XCIzNDkuMjI5XCIgY3k9XCI0MjcuODczXCIgZmlsbD1cIiNiOWMzY2RcIiByeD1cIjQ4LjU3NVwiIHJ5PVwiNDcuMjk3XCIvPjxlbGxpcHNlIGN4PVwiMTE3LjA5MlwiIGN5PVwiMTE0Ljc5NFwiIGZpbGw9XCIjNWY2Yzc1XCIgcng9XCI1OC44MDFcIiByeT1cIjU3LjM5N1wiLz48ZWxsaXBzZSBjeD1cIjQ1My41MzhcIiBjeT1cIjIxNi40NzdcIiBmaWxsPVwiI2RjZTZlYlwiIHJ4PVwiNDMuNDYyXCIgcnk9XCI0Mi42NTZcIi8+PGNpcmNsZSBjeD1cIjI2M1wiIGN5PVwiNjJcIiBmaWxsPVwiIzRlNWE2MVwiIHI9XCI2MlwiLz48L2c+PC9zdmc+IiwiPHN2ZWx0ZTpvcHRpb25zIHRhZz1cIm55bGFzLWNvbXBvc2VyLWF0dGFjaG1lbnRcIiAvPlxuXG48c2NyaXB0IGxhbmc9XCJ0c1wiPlxuICBpbXBvcnQgQ2xvc2VJY29uIGZyb20gXCIuLi9hc3NldHMvY2xvc2Uuc3ZnXCI7XG4gIGltcG9ydCBMb2FkaW5nSWNvbiBmcm9tIFwiLi4vYXNzZXRzL2xvYWRpbmcuc3ZnXCI7XG4gIGltcG9ydCB0eXBlIHsgQXR0YWNobWVudCB9IGZyb20gXCJAY29tbW9ucy90eXBlcy9Db21wb3NlclwiO1xuXG4gIGV4cG9ydCBsZXQgYXR0YWNobWVudDogQXR0YWNobWVudDtcbiAgZXhwb3J0IGxldCByZW1vdmU6IChhdHRhY2htZW50OiBBdHRhY2htZW50KSA9PiB2b2lkO1xuXG4gIC8vIENyZWF0ZXMgaHVtYW4tcmVhZGFibGUgc2l6ZVxuICBjb25zdCBwcmV0dHlTaXplID0gKHNpemU6IG51bWJlcik6IHN0cmluZyA9PiB7XG4gICAgY29uc3QgaSA9IE1hdGguZmxvb3IoTWF0aC5sb2coc2l6ZSkgLyBNYXRoLmxvZygxMDI0KSk7XG4gICAgLy8gQHRzLWlnbm9yZVxuICAgIHJldHVybiBgJHsoc2l6ZSAvIE1hdGgucG93KDEwMjQsIGkpKS50b0ZpeGVkKDIpICogMX1cbiAgICAgICR7W1wiQlwiLCBcImtCXCIsIFwiTUJcIiwgXCJHQlwiLCBcIlRCXCJdW2ldfWA7XG4gIH07XG48L3NjcmlwdD5cblxuPHN0eWxlIGxhbmc9XCJzY3NzXCI+XG4gIEBpbXBvcnQgXCIuLi8uLi8uLi90aGVtaW5nL3ZhcmlhYmxlcy5zY3NzXCI7XG4gIC53cmFwcGVyIHtcbiAgICBwYWRkaW5nOiAwLjNyZW0gMDtcbiAgfVxuXG4gIC5maWxlLWl0ZW0ge1xuICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgICBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47XG4gICAgcGFkZGluZzogMC44cmVtO1xuICAgIGNvbG9yOiB2YXIoLS1jb21wb3Nlci10ZXh0LWNvbG9yLCBibGFjayk7XG4gICAgZm9udC13ZWlnaHQ6IDcwMDtcbiAgICBiYWNrZ3JvdW5kOiB2YXIoLS1jb21wb3Nlci1iYWNrZ3JvdW5kLW11dGVkLWNvbG9yLCAjZjBmMmZmKTtcbiAgICBib3JkZXItcmFkaXVzOiB2YXIoLS1jb21wb3Nlci1ib3JkZXItcmFkaXVzLCA2cHgpO1xuICB9XG5cbiAgLmNsb3NlLWJ0biB7XG4gICAgYmFja2dyb3VuZDogbm9uZTtcbiAgICBib3JkZXI6IG5vbmU7XG4gICAgY3Vyc29yOiBwb2ludGVyO1xuICAgIG1hcmdpbi1sZWZ0OiAxMHB4O1xuICAgIGZsZXgtc2hyaW5rOiAwO1xuICB9XG5cbiAgLmZpbGUtaW5mbyB7XG4gICAgZGlzcGxheTogZmxleDtcbiAgICBjb2xvcjogdmFyKC0tY29tcG9zZXItdGV4dC1jb2xvciwgYmxhY2spO1xuICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG4gICAgJl9fZXJyb3Ige1xuICAgICAgY29sb3I6IHZhcigtLWNvbXBvc2VyLWRhbmdlci1jb2xvciwgI2ZmNWM1Yyk7XG4gICAgICBmb250LXNpemU6IHZhcigtLWNvbXBvc2VyLWZvbnQtc2l6ZS1zbWFsbCwgMTJweCk7XG4gICAgICBtYXJnaW4tcmlnaHQ6IDVweDtcbiAgICB9XG4gICAgJl9fcmlnaHQge1xuICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gICAgICBqdXN0aWZ5LWNvbnRlbnQ6IGZsZXgtZW5kO1xuICAgICAgZmxleC1zaHJpbms6IDA7XG4gICAgICBtYXJnaW4tbGVmdDogMTBweDtcbiAgICB9XG4gIH1cblxuICAuZmlsZS1pdGVtX19zaXplIHtcbiAgICBmbGV4LXNocmluazogMDtcbiAgICB3b3JkLWJyZWFrOiBrZWVwLWFsbDtcbiAgICBjb2xvcjogdmFyKC0tY29tcG9zZXItdGV4dC1saWdodC1jb2xvciwgIzZlNmU3YSk7XG4gICAgbWFyZ2luLXRvcDogMTBweDtcbiAgICBmb250LXNpemU6IHZhcigtLWNvbXBvc2VyLWZvbnQtc2l6ZS1zbWFsbCwgMTJweCk7XG4gIH1cblxuICBAa2V5ZnJhbWVzIHJvdGF0ZSB7XG4gICAgdG8ge1xuICAgICAgdHJhbnNmb3JtOiByb3RhdGUoMzYwZGVnKTtcbiAgICB9XG4gIH1cblxuICBAbWVkaWEgI3skZGVza3RvcH0ge1xuICAgIC5maWxlLWluZm8ge1xuICAgICAgZmxleC1kaXJlY3Rpb246IHJvdztcbiAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gICAgICBtYXgtd2lkdGg6IDkwJTtcbiAgICB9XG4gICAgLmZpbGUtaXRlbV9fc2l6ZSB7XG4gICAgICBtYXJnaW46IDAgMCAwIDVweDtcbiAgICB9XG4gIH1cbjwvc3R5bGU+XG5cbnsjaWYgYXR0YWNobWVudH1cbiAgPGRpdiBjbGFzcz1cIndyYXBwZXJcIj5cbiAgICA8ZGl2IGNsYXNzPVwiZmlsZS1pdGVtXCI+XG4gICAgICA8ZGl2IGNsYXNzPVwiZmlsZS1pbmZvXCI+XG4gICAgICAgIHsjaWYgIWF0dGFjaG1lbnQuZXJyb3J9XG4gICAgICAgICAgPGRpdj57YXR0YWNobWVudC5maWxlbmFtZX08L2Rpdj5cbiAgICAgICAgICA8c3BhbiBjbGFzcz1cImZpbGUtaXRlbV9fc2l6ZVwiPntwcmV0dHlTaXplKGF0dGFjaG1lbnQuc2l6ZSl9PC9zcGFuPlxuICAgICAgICB7L2lmfVxuICAgICAgPC9kaXY+XG4gICAgICA8ZGl2IGNsYXNzPVwiZmlsZS1pbmZvX19yaWdodFwiPlxuICAgICAgICB7I2lmIGF0dGFjaG1lbnQubG9hZGluZ31cbiAgICAgICAgICA8TG9hZGluZ0ljb25cbiAgICAgICAgICAgIHN0eWxlPVwiZmlsbDogdmFyKC0tY29tcG9zZXItaWNvbnMtY29sb3IsICM2NjY3NzQpOyB3aWR0aDogMTVweDsgaGVpZ2h0OiAxNXB4OyBhbmltYXRpb246IHJvdGF0ZSAwLjVzIGluZmluaXRlIGxpbmVhcjtcIlxuICAgICAgICAgIC8+XG4gICAgICAgIHsvaWZ9XG4gICAgICAgIHsjaWYgYXR0YWNobWVudC5lcnJvcn1cbiAgICAgICAgICA8c3BhbiBjbGFzcz1cImZpbGUtaW5mb19fZXJyb3JcIj5cbiAgICAgICAgICAgIHthdHRhY2htZW50LmVycm9yTWVzc2FnZSA/P1xuICAgICAgICAgICAgICBcIkVycm9yOiBQbGVhc2UgdHJ5IGF0dGFjaGluZyB0aGUgZmlsZSBhZ2Fpbi5cIn1cbiAgICAgICAgICA8L3NwYW4+XG4gICAgICAgIHsvaWZ9XG4gICAgICAgIHsjaWYgIWF0dGFjaG1lbnQubG9hZGluZ31cbiAgICAgICAgICA8YnV0dG9uIGNsYXNzPVwiY2xvc2UtYnRuXCIgb246Y2xpY2s9eygpID0+IHJlbW92ZShhdHRhY2htZW50KX0+XG4gICAgICAgICAgICA8Q2xvc2VJY29uIGNsYXNzPVwiQ2xvc2VJY29uXCIgLz5cbiAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgey9pZn1cbiAgICAgIDwvZGl2PlxuICAgIDwvZGl2PlxuICA8L2Rpdj5cbnsvaWZ9XG4iLCI8c3ZlbHRlOm9wdGlvbnMgdGFnPVwibnlsYXMtZGF0ZXBpY2tlclwiIGltbXV0YWJsZT17dHJ1ZX0gLz5cblxuPHNjcmlwdCBsYW5nPVwidHNcIj5cbiAgaW1wb3J0IHsgdGljayB9IGZyb20gXCJzdmVsdGVcIjtcbiAgY29uc3QgbW9udGhzOiBzdHJpbmdbXSA9IFtcbiAgICBcIkphbnVhcnlcIixcbiAgICBcIkZlYnJ1YXJ5XCIsXG4gICAgXCJNYXJjaFwiLFxuICAgIFwiQXByaWxcIixcbiAgICBcIk1heVwiLFxuICAgIFwiSnVuZVwiLFxuICAgIFwiSnVseVwiLFxuICAgIFwiQXVndXN0XCIsXG4gICAgXCJTZXB0ZW1iZXJcIixcbiAgICBcIk9jdG9iZXJcIixcbiAgICBcIk5vdmVtYmVyXCIsXG4gICAgXCJEZWNlbWJlclwiLFxuICBdO1xuICBleHBvcnQgbGV0IHZhbHVlOiBEYXRlID0gbmV3IERhdGUoKTtcbiAgZXhwb3J0IGxldCBtaW46IERhdGUgfCBudWxsO1xuICBleHBvcnQgbGV0IG1heDogRGF0ZSB8IG51bGw7XG4gIGV4cG9ydCBsZXQgdGltZXBpY2tlcjogYm9vbGVhbiA9IGZhbHNlO1xuICBleHBvcnQgbGV0IGNoYW5nZTogRGF0ZXBpY2tlci5DaGFuZ2VDYWxsYmFjayB8IHZvaWQ7XG4gIGxldCBjdXJyZW50RGF0ZTogRGF0ZSA9IG5ldyBEYXRlKCk7XG4gIGxldCBzZWxlY3RlZERhdGU6IERhdGUgPSBuZXcgRGF0ZSgpO1xuICBsZXQgZGF0ZXM6IERhdGVwaWNrZXIuRGF0ZXNbXSA9IFtdO1xuICBsZXQgaG91cnM6IERhdGVwaWNrZXIuVGltZVtdID0gW107XG4gIGxldCBtaW51dGVzOiBEYXRlcGlja2VyLlRpbWVbXSA9IFtdO1xuICBsZXQgaG91cnNTZWxlY3Q6IEhUTUxTZWxlY3RFbGVtZW50O1xuICBsZXQgbWludXRlc1NlbGVjdDogSFRNTFNlbGVjdEVsZW1lbnQ7XG4gIGNvbnN0IFVOSVhEQVk6IG51bWJlciA9IDg2MzQwMDAwOyAvLyAyM2ggNTltXG4gIGNvbnN0IHBvcHVsYXRlID0gKCkgPT4ge1xuICAgIC8vIFNldCBpbml0aWFsIHZhbHVlc1xuICAgIGlmICh2YWx1ZSkge1xuICAgICAgc2VsZWN0ZWREYXRlID0gdmFsdWU7XG4gICAgfVxuICAgIGlmICh0aW1lcGlja2VyKSB7XG4gICAgICBnZXRIb3VycygpO1xuICAgICAgZ2V0TWludXRlcygpO1xuICAgIH1cbiAgfTtcbiAgLy8gUmV0dXJucyBudW1iZXIgb2YgZGF5cyBvZiB0aGUgbW9udGhcbiAgY29uc3QgZGF5c0luTW9udGggPSAoXG4gICAgeWVhcjogbnVtYmVyLFxuICAgIG1vbnRoOiBudW1iZXIsXG4gICAgbW9kaWZpZXI6IG51bWJlciA9IDEsXG4gICk6IG51bWJlciA9PiB7XG4gICAgbGV0IGQgPSBuZXcgRGF0ZSh5ZWFyLCBtb250aCArIG1vZGlmaWVyLCAwKTtcbiAgICByZXR1cm4gZC5nZXREYXRlKCk7XG4gIH07XG4gIC8vIENoYW5nZXMgbW9udGhcbiAgY29uc3QgY2hhbmdlTW9udGggPSAoeDogbnVtYmVyKSA9PiB7XG4gICAgY3VycmVudERhdGUgPSBuZXcgRGF0ZShjdXJyZW50RGF0ZS5zZXRNb250aChjdXJyZW50RGF0ZS5nZXRNb250aCgpICsgeCkpO1xuICAgIHNldERheXMoKTtcbiAgfTtcbiAgY29uc3Qgc2V0RGF0ZSA9IChkYXRlOiBEYXRlKSA9PiB7XG4gICAgY29uc3QgZGF0ZVRvU2VsZWN0ID0gbmV3IERhdGUoZGF0ZSk7XG4gICAgLy8gaWYgdGltZXBpY2tlciBhY3RpdmUgc2V0IHRpbWUgYXMgd2VsbFxuICAgIGlmICh0aW1lcGlja2VyKSB7XG4gICAgICBkYXRlVG9TZWxlY3Quc2V0SG91cnMocGFyc2VJbnQoaG91cnNTZWxlY3QudmFsdWUpKTtcbiAgICAgIGRhdGVUb1NlbGVjdC5zZXRNaW51dGVzKHBhcnNlSW50KG1pbnV0ZXNTZWxlY3QudmFsdWUpKTtcbiAgICB9XG4gICAgc2VsZWN0ZWREYXRlID0gbmV3IERhdGUoZGF0ZVRvU2VsZWN0KTtcblxuICAgIGlmIChtaW4pIHtcbiAgICAgIGlmIChmb3JtYXREYXRlKG1pbikgPT09IGZvcm1hdERhdGUoZGF0ZSkpIHtcbiAgICAgICAgc2VsZWN0ZWREYXRlID0gbmV3IERhdGUobWluKTtcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKG1heCkge1xuICAgICAgaWYgKGZvcm1hdERhdGUobWF4KSA9PT0gZm9ybWF0RGF0ZShkYXRlKSkge1xuICAgICAgICBzZWxlY3RlZERhdGUgPSBuZXcgRGF0ZShtYXgpO1xuICAgICAgfVxuICAgIH1cbiAgICBzZXRTZWxlY3RlZCgpO1xuICAgIGlmICh0aW1lcGlja2VyKSB7XG4gICAgICBzZXRIb3VycygpO1xuICAgICAgc2V0TWludXRlcygpO1xuICAgIH1cbiAgfTtcbiAgY29uc3Qgc2V0SG91ciA9ICgpID0+IHtcbiAgICBzZWxlY3RlZERhdGUgPSBuZXcgRGF0ZShzZWxlY3RlZERhdGUuc2V0SG91cnMocGFyc2VJbnQoaG91cnNTZWxlY3QudmFsdWUpKSk7XG4gICAgaWYgKG1pbiAmJiAhbWF4KSB7XG4gICAgICBpZiAoZm9ybWF0RGF0ZShtaW4pID09PSBmb3JtYXREYXRlKHNlbGVjdGVkRGF0ZSkpIHtcbiAgICAgICAgc2VsZWN0ZWREYXRlID0gbmV3IERhdGUoc2VsZWN0ZWREYXRlLnNldE1pbnV0ZXMobWluLmdldE1pbnV0ZXMoKSkpO1xuICAgICAgfVxuICAgIH0gZWxzZSBpZiAobWF4ICYmICFtaW4pIHtcbiAgICAgIGlmIChmb3JtYXREYXRlKG1heCkgPT09IGZvcm1hdERhdGUoc2VsZWN0ZWREYXRlKSkge1xuICAgICAgICBzZWxlY3RlZERhdGUgPSBuZXcgRGF0ZShzZWxlY3RlZERhdGUuc2V0TWludXRlcyhtYXguZ2V0TWludXRlcygpKSk7XG4gICAgICB9XG4gICAgfSBlbHNlIGlmIChtYXggJiYgbWluKSB7XG4gICAgICBpZiAoZm9ybWF0RGF0ZShtaW4pID09PSBmb3JtYXREYXRlKHNlbGVjdGVkRGF0ZSkpIHtcbiAgICAgICAgc2VsZWN0ZWREYXRlID0gbmV3IERhdGUoc2VsZWN0ZWREYXRlLnNldE1pbnV0ZXMobWluLmdldE1pbnV0ZXMoKSkpO1xuICAgICAgfSBlbHNlIGlmIChmb3JtYXREYXRlKG1heCkgPT09IGZvcm1hdERhdGUoc2VsZWN0ZWREYXRlKSkge1xuICAgICAgICBzZWxlY3RlZERhdGUgPSBuZXcgRGF0ZShzZWxlY3RlZERhdGUuc2V0TWludXRlcyhtYXguZ2V0TWludXRlcygpKSk7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICB9XG4gICAgc2V0TWludXRlcygpO1xuICB9O1xuICBjb25zdCBzZXRNaW51dGUgPSAoKSA9PiB7XG4gICAgc2VsZWN0ZWREYXRlID0gbmV3IERhdGUoXG4gICAgICBzZWxlY3RlZERhdGUuc2V0TWludXRlcyhwYXJzZUludChtaW51dGVzU2VsZWN0LnZhbHVlKSksXG4gICAgKTtcbiAgfTtcbiAgY29uc3Qgc2V0Q2xvY2sgPSAoaG91cnM6IG51bWJlcikgPT4ge1xuICAgIHNlbGVjdGVkRGF0ZSA9IG5ldyBEYXRlKFxuICAgICAgc2VsZWN0ZWREYXRlLnNldEhvdXJzKHNlbGVjdGVkRGF0ZS5nZXRIb3VycygpICsgaG91cnMpLFxuICAgICk7XG4gIH07XG4gIGNvbnN0IGZvcm1hdEhvdXJzID0gKHg6IG51bWJlcik6IHN0cmluZyA9PiB7XG4gICAgeCA9IHggPiAxMiA/IHggLSAxMiA6IHggPT09IDAgPyAxMiA6IHg7XG4gICAgcmV0dXJuIGAke3h9YC5sZW5ndGggPCAyID8gYDAke3h9YCA6IGAke3h9YDtcbiAgfTtcbiAgY29uc3QgZ2V0SG91cnMgPSAoKSA9PiB7XG4gICAgY29uc3QgaG91ckxpc3Q6IERhdGVwaWNrZXIuVGltZVtdID0gW107XG4gICAgZm9yIChsZXQgeCA9IDA7IHggPCAyNDsgeCsrKSB7XG4gICAgICBob3VyTGlzdC5wdXNoKHtcbiAgICAgICAgdmFsdWU6IHgsXG4gICAgICAgIHRleHQ6IGZvcm1hdEhvdXJzKHgpLFxuICAgICAgICBkaXNhYmxlZDogZmFsc2UsXG4gICAgICB9KTtcbiAgICB9XG4gICAgaG91cnMgPSBob3VyTGlzdDtcbiAgICBzZXRIb3VycygpO1xuICB9O1xuICBjb25zdCBzZXRIb3VycyA9ICgpID0+XG4gICAgKGhvdXJzID0gaG91cnMubWFwKChob3VyOiBEYXRlcGlja2VyLlRpbWUpID0+IHtcbiAgICAgIGhvdXIuZGlzYWJsZWQgPSBmYWxzZTtcbiAgICAgIGlmIChtaW4gJiYgIW1heCkge1xuICAgICAgICBpZiAoZm9ybWF0RGF0ZShtaW4pID09PSBmb3JtYXREYXRlKHNlbGVjdGVkRGF0ZSkpIHtcbiAgICAgICAgICBob3VyLmRpc2FibGVkID0gaG91ci52YWx1ZSA8IG1pbi5nZXRIb3VycygpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKG1heCAmJiAhbWluKSB7XG4gICAgICAgIGlmIChmb3JtYXREYXRlKG1heCkgPT09IGZvcm1hdERhdGUoc2VsZWN0ZWREYXRlKSkge1xuICAgICAgICAgIGhvdXIuZGlzYWJsZWQgPSBob3VyLnZhbHVlID4gbWF4LmdldEhvdXJzKCk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAobWF4ICYmIG1pbikge1xuICAgICAgICBpZiAoZm9ybWF0RGF0ZShtaW4pID09PSBmb3JtYXREYXRlKHNlbGVjdGVkRGF0ZSkpIHtcbiAgICAgICAgICBob3VyLmRpc2FibGVkID0gaG91ci52YWx1ZSA8IG1pbi5nZXRIb3VycygpO1xuICAgICAgICB9IGVsc2UgaWYgKGZvcm1hdERhdGUobWF4KSA9PT0gZm9ybWF0RGF0ZShzZWxlY3RlZERhdGUpKSB7XG4gICAgICAgICAgaG91ci5kaXNhYmxlZCA9IGhvdXIudmFsdWUgPiBtYXguZ2V0SG91cnMoKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIGhvdXI7XG4gICAgfSkpO1xuICBjb25zdCBnZXRNaW51dGVzID0gKCkgPT4ge1xuICAgIGNvbnN0IG1pbnV0ZUxpc3Q6IERhdGVwaWNrZXIuVGltZVtdID0gW107XG4gICAgZm9yIChsZXQgeCA9IDA7IHggPCA2MDsgeCsrKSB7XG4gICAgICBtaW51dGVMaXN0LnB1c2goe1xuICAgICAgICB2YWx1ZTogeCxcbiAgICAgICAgdGV4dDogYCR7eH1gLmxlbmd0aCA8IDIgPyBgMCR7eH1gIDogYCR7eH1gLFxuICAgICAgICBkaXNhYmxlZDogZmFsc2UsXG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBtaW51dGVzID0gbWludXRlTGlzdDtcbiAgICBzZXRNaW51dGVzKCk7XG4gIH07XG4gIGNvbnN0IHNldE1pbnV0ZXMgPSAoKSA9PlxuICAgIChtaW51dGVzID0gbWludXRlcy5tYXAoKG1pbnV0ZTogRGF0ZXBpY2tlci5UaW1lKSA9PiB7XG4gICAgICBtaW51dGUuZGlzYWJsZWQgPSBmYWxzZTtcblxuICAgICAgaWYgKG1pbiAmJiAhbWF4KSB7XG4gICAgICAgIGlmIChcbiAgICAgICAgICBmb3JtYXREYXRlKG1pbikgPT09IGZvcm1hdERhdGUoc2VsZWN0ZWREYXRlKSAmJlxuICAgICAgICAgIHNlbGVjdGVkRGF0ZS5nZXRIb3VycygpID09PSBtaW4uZ2V0SG91cnMoKVxuICAgICAgICApIHtcbiAgICAgICAgICBtaW51dGUuZGlzYWJsZWQgPSBtaW51dGUudmFsdWUgPCBtaW4uZ2V0TWludXRlcygpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKG1heCAmJiAhbWluKSB7XG4gICAgICAgIGlmIChcbiAgICAgICAgICBmb3JtYXREYXRlKG1heCkgPT09IGZvcm1hdERhdGUoc2VsZWN0ZWREYXRlKSAmJlxuICAgICAgICAgIHNlbGVjdGVkRGF0ZS5nZXRIb3VycygpID09PSBtYXguZ2V0SG91cnMoKVxuICAgICAgICApIHtcbiAgICAgICAgICBtaW51dGUuZGlzYWJsZWQgPSBtaW51dGUudmFsdWUgPiBtYXguZ2V0TWludXRlcygpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKG1heCAmJiBtaW4pIHtcbiAgICAgICAgaWYgKFxuICAgICAgICAgIGZvcm1hdERhdGUobWluKSA9PT0gZm9ybWF0RGF0ZShzZWxlY3RlZERhdGUpICYmXG4gICAgICAgICAgc2VsZWN0ZWREYXRlLmdldEhvdXJzKCkgPT09IG1pbi5nZXRIb3VycygpXG4gICAgICAgICkge1xuICAgICAgICAgIG1pbnV0ZS5kaXNhYmxlZCA9IG1pbnV0ZS52YWx1ZSA8IG1pbi5nZXRNaW51dGVzKCk7XG4gICAgICAgIH0gZWxzZSBpZiAoXG4gICAgICAgICAgZm9ybWF0RGF0ZShtYXgpID09PSBmb3JtYXREYXRlKHNlbGVjdGVkRGF0ZSkgJiZcbiAgICAgICAgICBzZWxlY3RlZERhdGUuZ2V0SG91cnMoKSA9PT0gbWF4LmdldEhvdXJzKClcbiAgICAgICAgKSB7XG4gICAgICAgICAgbWludXRlLmRpc2FibGVkID0gbWludXRlLnZhbHVlID4gbWF4LmdldE1pbnV0ZXMoKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIG1pbnV0ZTtcbiAgICB9KSk7XG4gIGZ1bmN0aW9uIGZvcm1hdERhdGUoZGF0ZTogRGF0ZSk6IHN0cmluZyB7XG4gICAgbGV0IG1vbnRoID0gXCJcIiArIChkYXRlLmdldE1vbnRoKCkgKyAxKSxcbiAgICAgIGRheSA9IFwiXCIgKyBkYXRlLmdldERhdGUoKSxcbiAgICAgIHllYXIgPSBkYXRlLmdldEZ1bGxZZWFyKCk7XG5cbiAgICBpZiAobW9udGgubGVuZ3RoIDwgMikgbW9udGggPSBcIjBcIiArIG1vbnRoO1xuICAgIGlmIChkYXkubGVuZ3RoIDwgMikgZGF5ID0gXCIwXCIgKyBkYXk7XG5cbiAgICByZXR1cm4gW3llYXIsIG1vbnRoLCBkYXldLmpvaW4oXCItXCIpO1xuICB9XG4gIGNvbnN0IHNldFNlbGVjdGVkID0gKCkgPT5cbiAgICAoZGF0ZXMgPSBkYXRlcy5tYXAoKGQ6IERhdGVwaWNrZXIuRGF0ZXMpID0+IHtcbiAgICAgIGlmIChtaW4gJiYgIW1heCkge1xuICAgICAgICBkLmlzRGlzYWJsZWQgPSBkLmRhdGUuZ2V0VGltZSgpICsgVU5JWERBWSA8IG1pbi5nZXRUaW1lKCk7XG4gICAgICB9XG4gICAgICBpZiAobWF4ICYmICFtaW4pIHtcbiAgICAgICAgZC5pc0Rpc2FibGVkID0gZC5kYXRlLmdldFRpbWUoKSA+IG1heC5nZXRUaW1lKCk7XG4gICAgICB9XG4gICAgICBpZiAobWF4ICYmIG1pbikge1xuICAgICAgICBkLmlzRGlzYWJsZWQgPVxuICAgICAgICAgIGQuZGF0ZS5nZXRUaW1lKCkgKyBVTklYREFZIDwgbWluLmdldFRpbWUoKSB8fFxuICAgICAgICAgIGQuZGF0ZS5nZXRUaW1lKCkgPiBtYXguZ2V0VGltZSgpO1xuICAgICAgfVxuICAgICAgZC5pc1NlbGVjdGVkID1cbiAgICAgICAgZm9ybWF0RGF0ZShkLmRhdGUpID09PSBmb3JtYXREYXRlKHNlbGVjdGVkRGF0ZSkgJiYgIWQuaXNEaXNhYmxlZFxuICAgICAgICAgID8gdHJ1ZVxuICAgICAgICAgIDogZmFsc2U7XG4gICAgICByZXR1cm4gZDtcbiAgICB9KSk7XG4gIGNvbnN0IHNldERheXMgPSAoKSA9PiB7XG4gICAgZGF0ZXMgPSBbXTtcbiAgICBjdXJyZW50RGF0ZSA9IG5ldyBEYXRlKGN1cnJlbnREYXRlLnNldERhdGUoMSkpO1xuICAgIGNvbnN0IGxhc3REYXkgPSBkYXlzSW5Nb250aChcbiAgICAgIGN1cnJlbnREYXRlLmdldEZ1bGxZZWFyKCksXG4gICAgICBjdXJyZW50RGF0ZS5nZXRNb250aCgpLFxuICAgICk7XG4gICAgY29uc3QgbGFzdFByZXZEYXkgPSBkYXlzSW5Nb250aChcbiAgICAgIGN1cnJlbnREYXRlLmdldEZ1bGxZZWFyKCksXG4gICAgICBjdXJyZW50RGF0ZS5nZXRNb250aCgpLFxuICAgICAgMCxcbiAgICApO1xuICAgIC8vIERheXMgaW4gcHJldmlvdXMgbW9udGhcbiAgICBmb3IgKGxldCB4ID0gY3VycmVudERhdGUuZ2V0RGF5KCk7IHggPiAwOyB4LS0pIHtcbiAgICAgIGRhdGVzID0gW1xuICAgICAgICAuLi5kYXRlcyxcbiAgICAgICAge1xuICAgICAgICAgIGRheTogbGFzdFByZXZEYXkgLSB4ICsgMSxcbiAgICAgICAgICBhY3RpdmVNb250aDogZmFsc2UsXG4gICAgICAgICAgZGF0ZTogbmV3IERhdGUoXG4gICAgICAgICAgICBjdXJyZW50RGF0ZS5nZXRGdWxsWWVhcigpLFxuICAgICAgICAgICAgY3VycmVudERhdGUuZ2V0TW9udGgoKSAtIDEsXG4gICAgICAgICAgICBsYXN0UHJldkRheSAtIHggKyAxLFxuICAgICAgICAgICksXG4gICAgICAgIH0sXG4gICAgICBdO1xuICAgIH1cbiAgICAvLyBEYXlzIGluIGN1cnJlbnQgbW9udGhcbiAgICBmb3IgKGxldCB4ID0gMTsgeCA8PSBsYXN0RGF5OyB4KyspIHtcbiAgICAgIGRhdGVzID0gW1xuICAgICAgICAuLi5kYXRlcyxcbiAgICAgICAge1xuICAgICAgICAgIGRheTogeCxcbiAgICAgICAgICBhY3RpdmVNb250aDogdHJ1ZSxcbiAgICAgICAgICBkYXRlOiBuZXcgRGF0ZShjdXJyZW50RGF0ZS5nZXRGdWxsWWVhcigpLCBjdXJyZW50RGF0ZS5nZXRNb250aCgpLCB4KSxcbiAgICAgICAgfSxcbiAgICAgIF07XG4gICAgfVxuICAgIC8vIERheXMgaW4gbmV4dCBtb250aFxuICAgIGNvbnN0IG5leHREYXlzID0gNDIgLSBkYXRlcy5sZW5ndGg7XG4gICAgZm9yIChsZXQgeCA9IDE7IHggPD0gbmV4dERheXM7IHgrKykge1xuICAgICAgZGF0ZXMgPSBbXG4gICAgICAgIC4uLmRhdGVzLFxuICAgICAgICB7XG4gICAgICAgICAgZGF5OiB4LFxuICAgICAgICAgIGFjdGl2ZU1vbnRoOiBmYWxzZSxcbiAgICAgICAgICBkYXRlOiBuZXcgRGF0ZShcbiAgICAgICAgICAgIGN1cnJlbnREYXRlLmdldEZ1bGxZZWFyKCksXG4gICAgICAgICAgICBjdXJyZW50RGF0ZS5nZXRNb250aCgpICsgMSxcbiAgICAgICAgICAgIHgsXG4gICAgICAgICAgKSxcbiAgICAgICAgfSxcbiAgICAgIF07XG4gICAgfVxuICAgIC8vIFVwZGF0ZSBTZWxlY3RlZCBkYXRlXG4gICAgc2V0U2VsZWN0ZWQoKTtcbiAgfTtcbiAgc2V0RGF5cygpO1xuXG4gICQ6IGlmIChzZWxlY3RlZERhdGUgJiYgY2hhbmdlKSB7XG4gICAgdGljaygpLnRoZW4oKCkgPT4ge1xuICAgICAgLy8gQHRzLWlnbm9yZVxuICAgICAgY2hhbmdlKHNlbGVjdGVkRGF0ZSk7XG4gICAgfSk7XG4gIH1cbiAgJDogY3VycmVudE1vbnRoID0gY3VycmVudERhdGUuZ2V0TW9udGgoKTtcbiAgJDogY3VycmVudFllYXIgPSBjdXJyZW50RGF0ZS5nZXRGdWxsWWVhcigpO1xuICAkOiBzZWxlY3RhYmxlTW9udGggPSBkYXRlcy5maWx0ZXIoKGQpID0+IGQuYWN0aXZlTW9udGggJiYgIWQuaXNEaXNhYmxlZClcbiAgICAubGVuZ3RoO1xuICAkOiBpZiAodmFsdWUgfHwgbWluIHx8IG1heCB8fCB0aW1lcGlja2VyKSB7XG4gICAgcG9wdWxhdGUoKTtcblxuICAgIHNldFNlbGVjdGVkKCk7XG4gIH1cbiAgJDogaXNBbURpc2FibGVkID0gKCkgPT4ge1xuICAgIGlmIChtaW4pIHtcbiAgICAgIGlmIChmb3JtYXREYXRlKG1pbikgPT09IGZvcm1hdERhdGUoc2VsZWN0ZWREYXRlKSkge1xuICAgICAgICByZXR1cm4gbWluLmdldEhvdXJzKCkgPj0gMTI7XG4gICAgICB9XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICB9O1xuICAkOiBpc1BtRGlzYWJsZWQgPSAoKSA9PiB7XG4gICAgaWYgKG1heCkge1xuICAgICAgaWYgKGZvcm1hdERhdGUobWF4KSA9PT0gZm9ybWF0RGF0ZShzZWxlY3RlZERhdGUpKSB7XG4gICAgICAgIHJldHVybiBtYXguZ2V0SG91cnMoKSA8IDEyO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgfTtcbjwvc2NyaXB0PlxuXG48c3R5bGUgbGFuZz1cInNjc3NcIj5cbiAgLy9Ub3RhbCB3aWR0aCBkaXZpZGVkIGJ5IGRheXMgaW4gYSB3ZWVrXG4gICRkYXktYmxvY2std2lkdGg6IDEwMCUvNztcbiAgJGRheS10ZXh0LXNlbGVjdGVkLWNvbG9yOiB2YXIoLS1iYWNrZ3JvdW5kKTtcbiAgJGRheS1iYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1iYWNrZ3JvdW5kKTtcbiAgJGRheS1iYWNrZ3JvdW5kLWhvdmVyLWNvbG9yOiB2YXIoLS1wcmltYXJ5LWRhcmspO1xuICAkZGF5LWJhY2tncm91bmQtc2VsZWN0ZWQtY29sb3I6IHZhcigtLXByaW1hcnkpO1xuXG4gIC5ueWxhcy1kYXRlcGlja2VyIHtcbiAgICAtLWZvbnQ6IHNhbnMtc2VyaWY7XG4gICAgLS1iYWNrZ3JvdW5kOiB3aGl0ZTtcbiAgICAtLXRleHQ6IGJsYWNrO1xuICAgIC0tdGV4dC1saWdodDogIzZlNmU3YTtcbiAgICAtLWJvcmRlci1yYWRpdXM6IDE2cHg7XG4gICAgLS1zaGFkb3c6IDAgMXB4IDEwcHggcmdiYSgwLCAwLCAwLCAwLjExKSwgMCAzcHggMzZweCByZ2JhKDAsIDAsIDAsIDAuMTIpO1xuICAgIC0tZm9udDogc2Fucy1zZXJpZjtcbiAgICAtLWZvbnQtc2l6ZTogMTJweDtcbiAgICAtLWJvcmRlcjogI2Y3ZjdmNztcbiAgICAtLXByaW1hcnk6ICM1Yzc3ZmY7XG4gIH1cbiAgLmRhdGVwaWNrZXIge1xuICAgIGZvbnQtZmFtaWx5OiB2YXIoLS1mb250KTtcbiAgICB3aWR0aDogMTAwJTtcbiAgICBmb250LXNpemU6IHZhcigtLWZvbnQtc2l6ZSk7XG4gICAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZCk7XG4gICAgZm9udC1mYW1pbHk6IHNhbnMtc2VyaWY7XG4gICAgZm9udC1zaXplOiAxNHB4O1xuICB9XG4gIC5kYXRlcGlja2VyLXdyYXBwZXIge1xuICAgIHBhZGRpbmc6IDFyZW07XG4gIH1cbiAgLmRhdGVwaWNrZXItZGF0ZXMge1xuICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcbiAgfVxuICAubGFiZWwtZGF5cyB7XG4gICAgZmxleDogMTtcbiAgICBkaXNwbGF5OiBmbGV4O1xuICAgIGZsZXgtd3JhcDogd3JhcDtcbiAgfVxuICAuZGF0ZXBpY2tlci1oZWFkZXIge1xuICAgIHBhZGRpbmc6IDEwcHg7XG4gICAgY29sb3I6IHZhcigtLXRleHQpO1xuICAgIG1hcmdpbjogMHB4O1xuICB9XG4gIC5kYXRlcGlja2VyLWNvbnRyb2xzIHtcbiAgICBkaXNwbGF5OiBmbGV4O1xuICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gICAganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuO1xuICAgIHBhZGRpbmc6IDEwcHg7XG4gIH1cbiAgLmRhdGVwaWNrZXItYnRuIHtcbiAgICBoZWlnaHQ6IDMxcHg7XG4gICAgd2lkdGg6IDMxcHg7XG4gICAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZCk7XG4gICAgZm9udC1zaXplOiAxOHB4O1xuICAgIGN1cnNvcjogcG9pbnRlcjtcbiAgICBmb250LXdlaWdodDogNzAwO1xuICAgIGJvcmRlci1yYWRpdXM6IDUwcHg7XG4gICAgYm9yZGVyOiBub25lO1xuICAgIGNvbG9yOiB2YXIoLS10ZXh0KTtcbiAgfVxuICAuZGF0ZXBpY2tlci1idG46aG92ZXIge1xuICAgIGJhY2tncm91bmQ6ICRkYXktYmFja2dyb3VuZC1ob3Zlci1jb2xvciAhaW1wb3J0YW50O1xuICAgIGNvbG9yOiB2YXIoLS1idXR0b24tYWN0aXZlLXRleHQpO1xuICB9XG4gIC5kYXRlcGlja2VyLWJ0bjpmb2N1cyB7XG4gICAgb3V0bGluZTogbm9uZTtcbiAgfVxuICAubGFiZWwtZGF5cyA+IGRpdiB7XG4gICAgZmxleC1iYXNpczogJGRheS1ibG9jay13aWR0aDtcbiAgICB0ZXh0LWFsaWduOiBjZW50ZXI7XG4gIH1cbiAgLmRheXMge1xuICAgIHdpZHRoOiAxMDAlO1xuICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgZmxleC13cmFwOiB3cmFwO1xuICB9XG4gIC5sYWJlbCB7XG4gICAgY29sb3I6IHZhcigtLXRleHQtbGlnaHQpO1xuICAgIGZvbnQtc2l6ZTogMTBweDtcbiAgfVxuICAuY3VycmVudCB7XG4gICAgZm9udC13ZWlnaHQ6IDcwMDtcbiAgfVxuICAuY3VycmVudC1tb250aCBoMyB7XG4gICAgY29sb3I6IHZhcigtLXRleHQpO1xuICAgIG1hcmdpbjogMHB4O1xuICB9XG4gIC5zZWxlY3RlZCB7XG4gICAgYmFja2dyb3VuZDogJGRheS1iYWNrZ3JvdW5kLXNlbGVjdGVkLWNvbG9yICFpbXBvcnRhbnQ7XG4gICAgY29sb3I6IHZhcigtLWJ1dHRvbi1hY3RpdmUtdGV4dCkgIWltcG9ydGFudDtcbiAgICBmb250LXdlaWdodDogNzAwO1xuICB9XG4gIC5kYXlzIGRpdiB7XG4gICAgZmxleC1iYXNpczogJGRheS1ibG9jay13aWR0aDtcbiAgICB0ZXh0LWFsaWduOiBjZW50ZXI7XG4gICAgbWFyZ2luLXRvcDogM3B4O1xuICAgIGJveC1zaXppbmc6IGJvcmRlci1ib3g7XG4gICAgbWFyZ2luLWJvdHRvbTogM3B4O1xuICB9XG4gIC5kYXlzIGRpdiBidXR0b24ge1xuICAgIGJvcmRlci1yYWRpdXM6IDUwcHg7XG4gICAgYmFja2dyb3VuZDogJGRheS1iYWNrZ3JvdW5kLWNvbG9yO1xuICAgIGNvbG9yOiB2YXIoLS10ZXh0KTtcbiAgICB3aWR0aDogMzBweDtcbiAgICBmb250LXNpemU6IDEycHg7XG4gICAgZm9udC13ZWlnaHQ6IDUwMDtcbiAgICBoZWlnaHQ6IDMwcHg7XG4gICAgcGFkZGluZzogMDtcbiAgICB0ZXh0LWFsaWduOiBjZW50ZXI7XG4gICAgY3Vyc29yOiBwb2ludGVyO1xuICAgIGJvcmRlcjogbm9uZTtcbiAgfVxuICAuZGF5cyBkaXYgYnV0dG9uOmZvY3VzIHtcbiAgICBvdXRsaW5lOiAwO1xuICB9XG4gIC5kYXlzIGRpdiBidXR0b246aG92ZXIge1xuICAgIGJhY2tncm91bmQ6ICRkYXktYmFja2dyb3VuZC1ob3Zlci1jb2xvcjtcbiAgICBjb2xvcjogdmFyKC0tYnV0dG9uLWFjdGl2ZS10ZXh0KSAhaW1wb3J0YW50O1xuICB9XG4gIC5kYXlzIGRpdiBidXR0b246ZGlzYWJsZWQge1xuICAgIGNvbG9yOiB2YXIoLS10ZXh0LWxpZ2h0KTtcbiAgICBvcGFjaXR5OiAwLjY7XG4gICAgY3Vyc29yOiBub3QtYWxsb3dlZDtcbiAgfVxuICAudGltZXBpY2tlciB7XG4gICAgZGlzcGxheTogZmxleDtcbiAgICBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47XG4gICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgICBwYWRkaW5nOiAxMHB4IDEwcHg7XG4gIH1cbiAgLnRpbWVwaWNrZXIgZGl2IHtcbiAgICBkaXNwbGF5OiBmbGV4O1xuICB9XG4gIC50aW1lcGlja2VyIHAge1xuICAgIG1hcmdpbjogMDtcbiAgICBjb2xvcjogdmFyKC0tdGV4dC1saWdodCk7XG4gIH1cbiAgLnBpY2tlciB7XG4gICAgYm9yZGVyLXJhZGl1czogNHB4O1xuICAgIGJvcmRlcjogbm9uZTtcbiAgICBjb2xvcjogdmFyKC0tdGV4dCk7XG4gICAgcGFkZGluZzogNXB4IDBweDtcbiAgICBiYWNrZ3JvdW5kOiAkZGF5LWJhY2tncm91bmQtY29sb3I7XG4gICAgbWFyZ2luOiAwcHggM3B4O1xuICAgIHdpZHRoOiAxMDAlO1xuICB9XG4gIC5jbG9jayB7XG4gICAgYm9yZGVyLXJhZGl1czogNHB4O1xuICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgd2lkdGg6IDc1cHg7XG4gICAgYmFja2dyb3VuZDogJGRheS1iYWNrZ3JvdW5kLWNvbG9yO1xuICAgIC8vIGJvcmRlcjogbm9uZTtcbiAgfVxuICAudGltZSB7XG4gICAgZmxleDogMTtcbiAgICAvLyBib3JkZXI6IG5vbmU7XG4gIH1cbiAgLmNsb2NrLWJ1dHRvbiB7XG4gICAgYm9yZGVyLXJhZGl1czogNHB4O1xuICAgIGNvbG9yOiAjYTRhYWFkO1xuICAgIGJhY2tncm91bmQ6IG5vbmU7XG4gICAgY3Vyc29yOiBwb2ludGVyO1xuICAgIGZsZXg6IDE7XG4gICAgcGFkZGluZzogNXB4IDBweDtcbiAgICBib3JkZXI6IG5vbmU7XG4gICAgb3V0bGluZTogMDtcbiAgfVxuICAuY2xvY2stYnV0dG9uOmRpc2FibGVkIHtcbiAgICBjdXJzb3I6IG5vdC1hbGxvd2VkO1xuICB9XG4gIC5jbG9jay1idXR0b24tYWN0aXZlIHtcbiAgICBjb2xvcjogI2ZmZjtcbiAgICBiYWNrZ3JvdW5kOiB2YXIoLS1wcmltYXJ5KTtcbiAgfVxuICAudG9vbHRpcCB7XG4gICAgcG9zaXRpb246IHJlbGF0aXZlO1xuICAgIGRpc3BsYXk6IGlubGluZS1ibG9jaztcbiAgfVxuXG4gIC50b29sdGlwIC50b29sdGlwdGV4dCB7XG4gICAgb3BhY2l0eTogMDtcbiAgICB2aXNpYmlsaXR5OiBoaWRkZW47XG4gICAgd2lkdGg6IDEyMHB4O1xuICAgIGJhY2tncm91bmQtY29sb3I6IHdoaXRlO1xuICAgIGNvbG9yOiAjMDAwO1xuICAgIHRleHQtYWxpZ246IGNlbnRlcjtcbiAgICBib3JkZXItcmFkaXVzOiA2cHg7XG4gICAgcGFkZGluZzogNXB4IDA7XG4gICAgYm94LXNoYWRvdzogMCAxcHggMTBweCByZ2JhKDAsIDAsIDAsIDAuMTEpLCAwIDNweCAxMHB4IHJnYmEoMCwgMCwgMCwgMC4xMik7XG4gICAgLyogUG9zaXRpb24gdGhlIHRvb2x0aXAgKi9cbiAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAgei1pbmRleDogMTtcbiAgICB0b3A6IDExMCU7XG4gICAgbGVmdDogNTAlO1xuICAgIG1hcmdpbi1sZWZ0OiAtNjBweDtcbiAgICB0cmFuc2l0aW9uOiBvcGFjaXR5IDAuM3M7XG4gICAgdHJhbnNpdGlvbi1kZWxheTogMXM7XG4gIH1cbiAgLnRvb2x0aXA6aG92ZXIgLnRvb2x0aXB0ZXh0IHtcbiAgICBvcGFjaXR5OiAxO1xuICAgIHZpc2liaWxpdHk6IHZpc2libGU7XG4gIH1cbiAgLmVycm9yIHtcbiAgICBiYWNrZ3JvdW5kOiAjZmZlM2UzO1xuICAgIHRleHQtYWxpZ246IGNlbnRlcjtcbiAgICBib3JkZXItcmFkaXVzOiAwcHggMHB4IDEwcHggMTBweDtcbiAgICBwYWRkaW5nOiAwLjdyZW07XG4gICAgY29sb3I6ICNmZjYwNjA7XG4gIH1cbjwvc3R5bGU+XG5cbjxkaXY+XG4gIDxkaXYgY2xhc3M9XCJkYXRlcGlja2VyXCIgaWQ9XCJkYXRlcGlja2VyXCI+XG4gICAgPGRpdiBjbGFzcz1cImRhdGVwaWNrZXItd3JhcHBlclwiPlxuICAgICAgPGgyIGNsYXNzPVwiZGF0ZXBpY2tlci1oZWFkZXJcIj5cbiAgICAgICAgUGljayBhIGRhdGVcbiAgICAgICAge3RpbWVwaWNrZXIgPyBcIiBhbmQgdGltZVwiIDogXCJcIn1cbiAgICAgIDwvaDI+XG4gICAgICA8ZGl2IGNsYXNzPVwiZGF0ZXBpY2tlci1jb250cm9sc1wiPlxuICAgICAgICA8ZGl2IGNsYXNzPVwiY3VycmVudC1tb250aFwiPlxuICAgICAgICAgIDxoMz57bW9udGhzW2N1cnJlbnRNb250aF19IHtjdXJyZW50WWVhcn08L2gzPlxuICAgICAgICA8L2Rpdj5cbiAgICAgICAgPGRpdj5cbiAgICAgICAgICA8ZGl2IGNsYXNzPVwidG9vbHRpcFwiPlxuICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz1cImRhdGVwaWNrZXItYnRuXCIgb246Y2xpY2s9eygpID0+IGNoYW5nZU1vbnRoKC0xKX0+XG4gICAgICAgICAgICAgICZsc2FxdW87XG4gICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwidG9vbHRpcHRleHRcIj5QcmV2aW91cyBtb250aDwvc3Bhbj5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8ZGl2IGNsYXNzPVwidG9vbHRpcFwiPlxuICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz1cImRhdGVwaWNrZXItYnRuXCIgb246Y2xpY2s9eygpID0+IGNoYW5nZU1vbnRoKDEpfT5cbiAgICAgICAgICAgICAgJnJzYXF1bztcbiAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJ0b29sdGlwdGV4dFwiPk5leHQgbW9udGg8L3NwYW4+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9kaXY+XG5cbiAgICAgIDxkaXYgY2xhc3M9XCJkYXRlcGlja2VyLWRhdGVzXCI+XG4gICAgICAgIDxkaXYgY2xhc3M9XCJsYWJlbC1kYXlzXCI+XG4gICAgICAgICAgPGRpdiBjbGFzcz1cImRheSBsYWJlbFwiPlNVTjwvZGl2PlxuICAgICAgICAgIDxkaXYgY2xhc3M9XCJkYXkgbGFiZWxcIj5NT048L2Rpdj5cbiAgICAgICAgICA8ZGl2IGNsYXNzPVwiZGF5IGxhYmVsXCI+VFVFPC9kaXY+XG4gICAgICAgICAgPGRpdiBjbGFzcz1cImRheSBsYWJlbFwiPldFRDwvZGl2PlxuICAgICAgICAgIDxkaXYgY2xhc3M9XCJkYXkgbGFiZWxcIj5USFU8L2Rpdj5cbiAgICAgICAgICA8ZGl2IGNsYXNzPVwiZGF5IGxhYmVsXCI+RlJJPC9kaXY+XG4gICAgICAgICAgPGRpdiBjbGFzcz1cImRheSBsYWJlbFwiPlNBVDwvZGl2PlxuICAgICAgICA8L2Rpdj5cblxuICAgICAgICA8ZGl2IGlkPVwiY2FsZW5kYXJEYXlzXCIgY2xhc3M9XCJkYXlzXCI+XG4gICAgICAgICAgeyNlYWNoIGRhdGVzIGFzIGRhdGUgKGRhdGUpfVxuICAgICAgICAgICAgPGRpdj5cbiAgICAgICAgICAgICAgPGJ1dHRvblxuICAgICAgICAgICAgICAgIGNsYXNzOmxhYmVsPXshZGF0ZS5hY3RpdmVNb250aH1cbiAgICAgICAgICAgICAgICBjbGFzczpjdXJyZW50PXtkYXRlLmFjdGl2ZU1vbnRofVxuICAgICAgICAgICAgICAgIGNsYXNzOnNlbGVjdGVkPXtkYXRlLmlzU2VsZWN0ZWR9XG4gICAgICAgICAgICAgICAgZGlzYWJsZWQ9e2RhdGUuaXNEaXNhYmxlZH1cbiAgICAgICAgICAgICAgICBvbjpjbGljaz17KCkgPT4gc2V0RGF0ZShkYXRlLmRhdGUpfT57ZGF0ZS5kYXl9PC9idXR0b25cbiAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgey9lYWNofVxuICAgICAgICA8L2Rpdj5cbiAgICAgICAgeyNpZiB0aW1lcGlja2VyfVxuICAgICAgICAgIDxkaXYgY2xhc3M9XCJ0aW1lcGlja2VyXCI+XG4gICAgICAgICAgICA8cD5TZXQgdGltZTwvcD5cbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJ0aW1lXCI+XG4gICAgICAgICAgICAgIDxzZWxlY3RcbiAgICAgICAgICAgICAgICBjbGFzcz1cInBpY2tlclwiXG4gICAgICAgICAgICAgICAgdmFsdWU9e3NlbGVjdGVkRGF0ZS5nZXRIb3VycygpfVxuICAgICAgICAgICAgICAgIGJpbmQ6dGhpcz17aG91cnNTZWxlY3R9XG4gICAgICAgICAgICAgICAgb246Ymx1cj17KCkgPT4gc2V0SG91cigpfVxuICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgeyNlYWNoIGhvdXJzIGFzIGhvdXIgKGhvdXIpfVxuICAgICAgICAgICAgICAgICAgeyNpZiBzZWxlY3RlZERhdGUuZ2V0SG91cnMoKSA+PSAxMiAmJiBob3VyLnZhbHVlID49IDEyfVxuICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPXtob3VyLnZhbHVlfSBkaXNhYmxlZD17aG91ci5kaXNhYmxlZH0+XG4gICAgICAgICAgICAgICAgICAgICAge2hvdXIudGV4dH1cbiAgICAgICAgICAgICAgICAgICAgPC9vcHRpb24+XG4gICAgICAgICAgICAgICAgICB7OmVsc2UgaWYgc2VsZWN0ZWREYXRlLmdldEhvdXJzKCkgPCAxMiAmJiBob3VyLnZhbHVlIDwgMTJ9XG4gICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9e2hvdXIudmFsdWV9IGRpc2FibGVkPXtob3VyLmRpc2FibGVkfT5cbiAgICAgICAgICAgICAgICAgICAgICB7aG91ci50ZXh0fVxuICAgICAgICAgICAgICAgICAgICA8L29wdGlvbj5cbiAgICAgICAgICAgICAgICAgIHsvaWZ9XG4gICAgICAgICAgICAgICAgey9lYWNofVxuICAgICAgICAgICAgICA8L3NlbGVjdD5cbiAgICAgICAgICAgICAgPHNlbGVjdFxuICAgICAgICAgICAgICAgIGNsYXNzPVwicGlja2VyXCJcbiAgICAgICAgICAgICAgICBiaW5kOnRoaXM9e21pbnV0ZXNTZWxlY3R9XG4gICAgICAgICAgICAgICAgb246Ymx1cj17KCkgPT4gc2V0TWludXRlKCl9XG4gICAgICAgICAgICAgICAgdmFsdWU9e3NlbGVjdGVkRGF0ZS5nZXRNaW51dGVzKCl9XG4gICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICB7I2VhY2ggbWludXRlcyBhcyBtaW51dGUgKG1pbnV0ZSl9XG4gICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPXttaW51dGUudmFsdWV9IGRpc2FibGVkPXttaW51dGUuZGlzYWJsZWR9PlxuICAgICAgICAgICAgICAgICAgICB7bWludXRlLnRleHR9XG4gICAgICAgICAgICAgICAgICA8L29wdGlvbj5cbiAgICAgICAgICAgICAgICB7L2VhY2h9XG4gICAgICAgICAgICAgIDwvc2VsZWN0PlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwiY2xvY2tcIj5cbiAgICAgICAgICAgICAgPGJ1dHRvblxuICAgICAgICAgICAgICAgIGNsYXNzPXtzZWxlY3RlZERhdGUuZ2V0SG91cnMoKSA8IDEyXG4gICAgICAgICAgICAgICAgICA/IFwiY2xvY2stYnV0dG9uIGNsb2NrLWJ1dHRvbi1hY3RpdmVcIlxuICAgICAgICAgICAgICAgICAgOiBcImNsb2NrLWJ1dHRvblwifVxuICAgICAgICAgICAgICAgIG9uOmNsaWNrPXsoKSA9PiBzZWxlY3RlZERhdGUuZ2V0SG91cnMoKSA+PSAxMiAmJiBzZXRDbG9jaygtMTIpfVxuICAgICAgICAgICAgICAgIGRpc2FibGVkPXtpc0FtRGlzYWJsZWQoKX0+QU08L2J1dHRvblxuICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgIDxidXR0b25cbiAgICAgICAgICAgICAgICBjbGFzcz17c2VsZWN0ZWREYXRlLmdldEhvdXJzKCkgPj0gMTJcbiAgICAgICAgICAgICAgICAgID8gXCJjbG9jay1idXR0b24gY2xvY2stYnV0dG9uLWFjdGl2ZVwiXG4gICAgICAgICAgICAgICAgICA6IFwiY2xvY2stYnV0dG9uXCJ9XG4gICAgICAgICAgICAgICAgb246Y2xpY2s9eygpID0+IHNlbGVjdGVkRGF0ZS5nZXRIb3VycygpIDwgMTIgJiYgc2V0Q2xvY2soMTIpfVxuICAgICAgICAgICAgICAgIGRpc2FibGVkPXtpc1BtRGlzYWJsZWQoKX0+UE08L2J1dHRvblxuICAgICAgICAgICAgICA+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgey9pZn1cbiAgICAgIDwvZGl2PlxuICAgIDwvZGl2PlxuICA8L2Rpdj5cbjwvZGl2PlxuIiwiPHN2ZWx0ZTpvcHRpb25zIHRhZz1cIm55bGFzLWNvbXBvc2VyLWRhdGVwaWNrZXItbW9kYWxcIiAvPlxuXG48c2NyaXB0IHR5cGU9XCJ0c1wiPlxuICBpbXBvcnQgXCIuLi8uLi8uLi9kYXRlcGlja2VyL3NyYy9EYXRlcGlja2VyLnN2ZWx0ZVwiOyAvLyBUT0RPOiBmb3IgbG9jYWwgZGV2ZWxvcG1lbnQuIFRoaXMnbGwgdXBkYXRlIHlvdXIgYnVuZGxlIG9uIGNvbW1vbnMgY2hhbmdlcy5cbiAgaW1wb3J0IENsb3NlSWNvbiBmcm9tIFwiLi4vYXNzZXRzL2Nsb3NlLnN2Z1wiO1xuICBpbXBvcnQgdHlwZSB7XG4gICAgRGF0ZXBpY2tlckNhbGxiYWNrLFxuICAgIERhdGVwaWNrZXJDbG9zZUNhbGxiYWNrLFxuICB9IGZyb20gXCJAY29tbW9ucy90eXBlcy9Db21wb3NlclwiO1xuXG4gIGxldCBzZWxlY3RlZERhdGU6IERhdGU7XG4gIGV4cG9ydCBsZXQgc2NoZWR1bGU6IERhdGVwaWNrZXJDYWxsYmFjaztcbiAgZXhwb3J0IGxldCBjbG9zZTogRGF0ZXBpY2tlckNsb3NlQ2FsbGJhY2s7XG4gIGNvbnN0IGNoYW5nZSA9IChkYXRlOiBEYXRlKSA9PiB7XG4gICAgc2VsZWN0ZWREYXRlID0gZGF0ZTtcbiAgfTtcblxuICBjb25zdCBzdWJtaXQgPSAoKSA9PiB7XG4gICAgc2NoZWR1bGUoTWF0aC50cnVuYyhzZWxlY3RlZERhdGUuZ2V0VGltZSgpIC8gMTAwMCkpO1xuICB9O1xuPC9zY3JpcHQ+XG5cbjxzdHlsZSB0eXBlPVwic2Nzc1wiPlxuICAvLyAubW9kYWwge1xuXG4gIC8vICAgb3ZlcmZsb3c6IGF1dG87IC8qIEVuYWJsZSBzY3JvbGwgaWYgbmVlZGVkICovXG4gIC8vICAgYmFja2dyb3VuZC1jb2xvcjogcmdiKDAsIDAsIDApOyAvKiBGYWxsYmFjayBjb2xvciAqL1xuICAvLyAgIGJhY2tncm91bmQtY29sb3I6IHJnYmEoMCwgMCwgMCwgMC40KTsgLyogQmxhY2sgdy8gb3BhY2l0eSAqL1xuICAvLyB9XG5cbiAgLyogTW9kYWwgQ29udGVudC9Cb3ggKi9cbiAgLm1vZGFsLWNvbnRlbnQge1xuICAgIGRpc3BsYXk6IGJsb2NrOyAvKiBIaWRkZW4gYnkgZGVmYXVsdCAqL1xuICAgIGJveC1zaGFkb3c6IHZhcihcbiAgICAgIC0tY29tcG9zZXItc2hhZG93LFxuICAgICAgMCAxcHggMTBweCByZ2JhKDAsIDAsIDAsIDAuMTEpLFxuICAgICAgMCAzcHggMzZweCByZ2JhKDAsIDAsIDAsIDAuMTIpXG4gICAgKTtcbiAgICBib3JkZXItcmFkaXVzOiB2YXIoLS1jb21wb3Nlci1ib3JkZXItcmFkaXVzLCA2cHgpO1xuICB9XG5cbiAgLyogVGhlIENsb3NlIEJ1dHRvbiAqL1xuICAuY2xvc2Uge1xuICAgIGNvbG9yOiB2YXIoLS1jb21wb3Nlci10ZXh0LWxpZ2h0LWNvbG9yLCAjNmU2ZTdhKTtcbiAgICBmbG9hdDogcmlnaHQ7XG4gICAgcGFkZGluZy1yaWdodDogMTBweDtcbiAgICBmb250LXNpemU6IDI4cHg7XG4gICAgZm9udC13ZWlnaHQ6IGJvbGQ7XG4gIH1cblxuICAuY2xvc2U6aG92ZXIsXG4gIC5jbG9zZTpmb2N1cyB7XG4gICAgY29sb3I6IHZhcigtLWNvbXBvc2VyLXRleHQtY29sb3IsIGJsYWNrKTtcbiAgICB0ZXh0LWRlY29yYXRpb246IG5vbmU7XG4gICAgY3Vyc29yOiBwb2ludGVyO1xuICB9XG5cbiAgLnNhdmUtYnRuIHtcbiAgICBib3JkZXI6IDA7XG4gICAgYmFja2dyb3VuZDogdmFyKC0tY29tcG9zZXItcHJpbWFyeS1jb2xvciwgIzVjNzdmZik7XG4gICAgd2lkdGg6IDEwMCU7XG4gICAgY29sb3I6IHdoaXRlO1xuICAgIGN1cnNvcjogcG9pbnRlcjtcbiAgICBwYWRkaW5nOiAxMHB4IDI1cHg7XG4gICAgZm9udC13ZWlnaHQ6IGJvbGQ7XG4gICAgYm9yZGVyLXJhZGl1czogMCAwIHZhcigtLWNvbXBvc2VyLWJvcmRlci1yYWRpdXMsIDZweClcbiAgICAgIHZhcigtLWNvbXBvc2VyLWJvcmRlci1yYWRpdXMsIDZweCk7XG4gICAgZm9udC1mYW1pbHk6IHZhcigtLWNvbXBvc2VyLWZvbnQsIHNhbnMtc2VyaWYpO1xuICAgICY6ZGlzYWJsZWQge1xuICAgICAgb3BhY2l0eTogMC41O1xuICAgIH1cbiAgICAmOmhvdmVyIHtcbiAgICAgIGJhY2tncm91bmQ6IHZhcigtLWNvbXBvc2VyLXByaW1hcnktZGFyay1jb2xvciwgIzI5NGRmZik7XG4gICAgfVxuICB9XG5cbiAgLmRhdGVwaWNrZXItbW9kYWwge1xuICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICBib3R0b206IGNhbGModmFyKC0tY29tcG9zZXItb3V0ZXItcGFkZGluZywgMTVweCkgKiAwLjg1KTtcbiAgICByaWdodDogY2FsYyh2YXIoLS1jb21wb3Nlci1vdXRlci1wYWRkaW5nLCAxNXB4KSAqIDAuODUpO1xuICAgIGxlZnQ6IGNhbGModmFyKC0tY29tcG9zZXItb3V0ZXItcGFkZGluZywgMTVweCkgKiAwLjg1KTtcbiAgfVxuXG4gIC5DbG9zZUljb24ge1xuICAgIGZpbGw6IHZhcigtLWNvbXBvc2VyLWljb25zLWNvbG9yLCAjNjY2Nzc0KTtcbiAgICB3aWR0aDogMTBweDtcbiAgICBoZWlnaHQ6IDEwcHg7XG4gIH1cbjwvc3R5bGU+XG5cbjwhLS0gTW9kYWwgY29udGVudCAtLT5cblxuPGRpdiBjbGFzcz1cImRhdGVwaWNrZXItbW9kYWxcIj5cbiAgPGRpdiBjbGFzcz1cIm1vZGFsLWNvbnRlbnRcIj5cbiAgICA8c3BhbiBjbGFzcz1cImNsb3NlXCIgb246Y2xpY2s9e2Nsb3NlfT5cbiAgICAgIDxDbG9zZUljb24gY2xhc3M9XCJDbG9zZUljb25cIiAvPlxuICAgIDwvc3Bhbj5cbiAgICA8bnlsYXMtZGF0ZXBpY2tlciB7Y2hhbmdlfSB0aW1lcGlja2VyPXt0cnVlfSBtaW49e25ldyBEYXRlKCl9IC8+XG4gICAgPGJ1dHRvbiBjbGFzcz1cInNhdmUtYnRuXCIgb246Y2xpY2s9e3N1Ym1pdH0+IFNjaGVkdWxlIHNlbmQgPC9idXR0b24+XG4gIDwvZGl2PlxuPC9kaXY+XG4iLCIvKiEgQGxpY2Vuc2UgRE9NUHVyaWZ5IDIuMy41IHwgKGMpIEN1cmU1MyBhbmQgb3RoZXIgY29udHJpYnV0b3JzIHwgUmVsZWFzZWQgdW5kZXIgdGhlIEFwYWNoZSBsaWNlbnNlIDIuMCBhbmQgTW96aWxsYSBQdWJsaWMgTGljZW5zZSAyLjAgfCBnaXRodWIuY29tL2N1cmU1My9ET01QdXJpZnkvYmxvYi8yLjMuNS9MSUNFTlNFICovXG5cbihmdW5jdGlvbiAoZ2xvYmFsLCBmYWN0b3J5KSB7XG4gIHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0JyAmJiB0eXBlb2YgbW9kdWxlICE9PSAndW5kZWZpbmVkJyA/IG1vZHVsZS5leHBvcnRzID0gZmFjdG9yeSgpIDpcbiAgdHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kID8gZGVmaW5lKGZhY3RvcnkpIDpcbiAgKGdsb2JhbCA9IGdsb2JhbCB8fCBzZWxmLCBnbG9iYWwuRE9NUHVyaWZ5ID0gZmFjdG9yeSgpKTtcbn0odGhpcywgZnVuY3Rpb24gKCkgeyAndXNlIHN0cmljdCc7XG5cbiAgZnVuY3Rpb24gX3RvQ29uc3VtYWJsZUFycmF5KGFycikgeyBpZiAoQXJyYXkuaXNBcnJheShhcnIpKSB7IGZvciAodmFyIGkgPSAwLCBhcnIyID0gQXJyYXkoYXJyLmxlbmd0aCk7IGkgPCBhcnIubGVuZ3RoOyBpKyspIHsgYXJyMltpXSA9IGFycltpXTsgfSByZXR1cm4gYXJyMjsgfSBlbHNlIHsgcmV0dXJuIEFycmF5LmZyb20oYXJyKTsgfSB9XG5cbiAgdmFyIGhhc093blByb3BlcnR5ID0gT2JqZWN0Lmhhc093blByb3BlcnR5LFxuICAgICAgc2V0UHJvdG90eXBlT2YgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YsXG4gICAgICBpc0Zyb3plbiA9IE9iamVjdC5pc0Zyb3plbixcbiAgICAgIGdldFByb3RvdHlwZU9mID0gT2JqZWN0LmdldFByb3RvdHlwZU9mLFxuICAgICAgZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcjtcbiAgdmFyIGZyZWV6ZSA9IE9iamVjdC5mcmVlemUsXG4gICAgICBzZWFsID0gT2JqZWN0LnNlYWwsXG4gICAgICBjcmVhdGUgPSBPYmplY3QuY3JlYXRlOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIGltcG9ydC9uby1tdXRhYmxlLWV4cG9ydHNcblxuICB2YXIgX3JlZiA9IHR5cGVvZiBSZWZsZWN0ICE9PSAndW5kZWZpbmVkJyAmJiBSZWZsZWN0LFxuICAgICAgYXBwbHkgPSBfcmVmLmFwcGx5LFxuICAgICAgY29uc3RydWN0ID0gX3JlZi5jb25zdHJ1Y3Q7XG5cbiAgaWYgKCFhcHBseSkge1xuICAgIGFwcGx5ID0gZnVuY3Rpb24gYXBwbHkoZnVuLCB0aGlzVmFsdWUsIGFyZ3MpIHtcbiAgICAgIHJldHVybiBmdW4uYXBwbHkodGhpc1ZhbHVlLCBhcmdzKTtcbiAgICB9O1xuICB9XG5cbiAgaWYgKCFmcmVlemUpIHtcbiAgICBmcmVlemUgPSBmdW5jdGlvbiBmcmVlemUoeCkge1xuICAgICAgcmV0dXJuIHg7XG4gICAgfTtcbiAgfVxuXG4gIGlmICghc2VhbCkge1xuICAgIHNlYWwgPSBmdW5jdGlvbiBzZWFsKHgpIHtcbiAgICAgIHJldHVybiB4O1xuICAgIH07XG4gIH1cblxuICBpZiAoIWNvbnN0cnVjdCkge1xuICAgIGNvbnN0cnVjdCA9IGZ1bmN0aW9uIGNvbnN0cnVjdChGdW5jLCBhcmdzKSB7XG4gICAgICByZXR1cm4gbmV3IChGdW5jdGlvbi5wcm90b3R5cGUuYmluZC5hcHBseShGdW5jLCBbbnVsbF0uY29uY2F0KF90b0NvbnN1bWFibGVBcnJheShhcmdzKSkpKSgpO1xuICAgIH07XG4gIH1cblxuICB2YXIgYXJyYXlGb3JFYWNoID0gdW5hcHBseShBcnJheS5wcm90b3R5cGUuZm9yRWFjaCk7XG4gIHZhciBhcnJheVBvcCA9IHVuYXBwbHkoQXJyYXkucHJvdG90eXBlLnBvcCk7XG4gIHZhciBhcnJheVB1c2ggPSB1bmFwcGx5KEFycmF5LnByb3RvdHlwZS5wdXNoKTtcblxuICB2YXIgc3RyaW5nVG9Mb3dlckNhc2UgPSB1bmFwcGx5KFN0cmluZy5wcm90b3R5cGUudG9Mb3dlckNhc2UpO1xuICB2YXIgc3RyaW5nTWF0Y2ggPSB1bmFwcGx5KFN0cmluZy5wcm90b3R5cGUubWF0Y2gpO1xuICB2YXIgc3RyaW5nUmVwbGFjZSA9IHVuYXBwbHkoU3RyaW5nLnByb3RvdHlwZS5yZXBsYWNlKTtcbiAgdmFyIHN0cmluZ0luZGV4T2YgPSB1bmFwcGx5KFN0cmluZy5wcm90b3R5cGUuaW5kZXhPZik7XG4gIHZhciBzdHJpbmdUcmltID0gdW5hcHBseShTdHJpbmcucHJvdG90eXBlLnRyaW0pO1xuXG4gIHZhciByZWdFeHBUZXN0ID0gdW5hcHBseShSZWdFeHAucHJvdG90eXBlLnRlc3QpO1xuXG4gIHZhciB0eXBlRXJyb3JDcmVhdGUgPSB1bmNvbnN0cnVjdChUeXBlRXJyb3IpO1xuXG4gIGZ1bmN0aW9uIHVuYXBwbHkoZnVuYykge1xuICAgIHJldHVybiBmdW5jdGlvbiAodGhpc0FyZykge1xuICAgICAgZm9yICh2YXIgX2xlbiA9IGFyZ3VtZW50cy5sZW5ndGgsIGFyZ3MgPSBBcnJheShfbGVuID4gMSA/IF9sZW4gLSAxIDogMCksIF9rZXkgPSAxOyBfa2V5IDwgX2xlbjsgX2tleSsrKSB7XG4gICAgICAgIGFyZ3NbX2tleSAtIDFdID0gYXJndW1lbnRzW19rZXldO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gYXBwbHkoZnVuYywgdGhpc0FyZywgYXJncyk7XG4gICAgfTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHVuY29uc3RydWN0KGZ1bmMpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgICAgZm9yICh2YXIgX2xlbjIgPSBhcmd1bWVudHMubGVuZ3RoLCBhcmdzID0gQXJyYXkoX2xlbjIpLCBfa2V5MiA9IDA7IF9rZXkyIDwgX2xlbjI7IF9rZXkyKyspIHtcbiAgICAgICAgYXJnc1tfa2V5Ml0gPSBhcmd1bWVudHNbX2tleTJdO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gY29uc3RydWN0KGZ1bmMsIGFyZ3MpO1xuICAgIH07XG4gIH1cblxuICAvKiBBZGQgcHJvcGVydGllcyB0byBhIGxvb2t1cCB0YWJsZSAqL1xuICBmdW5jdGlvbiBhZGRUb1NldChzZXQsIGFycmF5KSB7XG4gICAgaWYgKHNldFByb3RvdHlwZU9mKSB7XG4gICAgICAvLyBNYWtlICdpbicgYW5kIHRydXRoeSBjaGVja3MgbGlrZSBCb29sZWFuKHNldC5jb25zdHJ1Y3RvcilcbiAgICAgIC8vIGluZGVwZW5kZW50IG9mIGFueSBwcm9wZXJ0aWVzIGRlZmluZWQgb24gT2JqZWN0LnByb3RvdHlwZS5cbiAgICAgIC8vIFByZXZlbnQgcHJvdG90eXBlIHNldHRlcnMgZnJvbSBpbnRlcmNlcHRpbmcgc2V0IGFzIGEgdGhpcyB2YWx1ZS5cbiAgICAgIHNldFByb3RvdHlwZU9mKHNldCwgbnVsbCk7XG4gICAgfVxuXG4gICAgdmFyIGwgPSBhcnJheS5sZW5ndGg7XG4gICAgd2hpbGUgKGwtLSkge1xuICAgICAgdmFyIGVsZW1lbnQgPSBhcnJheVtsXTtcbiAgICAgIGlmICh0eXBlb2YgZWxlbWVudCA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgdmFyIGxjRWxlbWVudCA9IHN0cmluZ1RvTG93ZXJDYXNlKGVsZW1lbnQpO1xuICAgICAgICBpZiAobGNFbGVtZW50ICE9PSBlbGVtZW50KSB7XG4gICAgICAgICAgLy8gQ29uZmlnIHByZXNldHMgKGUuZy4gdGFncy5qcywgYXR0cnMuanMpIGFyZSBpbW11dGFibGUuXG4gICAgICAgICAgaWYgKCFpc0Zyb3plbihhcnJheSkpIHtcbiAgICAgICAgICAgIGFycmF5W2xdID0gbGNFbGVtZW50O1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGVsZW1lbnQgPSBsY0VsZW1lbnQ7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgc2V0W2VsZW1lbnRdID0gdHJ1ZTtcbiAgICB9XG5cbiAgICByZXR1cm4gc2V0O1xuICB9XG5cbiAgLyogU2hhbGxvdyBjbG9uZSBhbiBvYmplY3QgKi9cbiAgZnVuY3Rpb24gY2xvbmUob2JqZWN0KSB7XG4gICAgdmFyIG5ld09iamVjdCA9IGNyZWF0ZShudWxsKTtcblxuICAgIHZhciBwcm9wZXJ0eSA9IHZvaWQgMDtcbiAgICBmb3IgKHByb3BlcnR5IGluIG9iamVjdCkge1xuICAgICAgaWYgKGFwcGx5KGhhc093blByb3BlcnR5LCBvYmplY3QsIFtwcm9wZXJ0eV0pKSB7XG4gICAgICAgIG5ld09iamVjdFtwcm9wZXJ0eV0gPSBvYmplY3RbcHJvcGVydHldO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBuZXdPYmplY3Q7XG4gIH1cblxuICAvKiBJRTEwIGRvZXNuJ3Qgc3VwcG9ydCBfX2xvb2t1cEdldHRlcl9fIHNvIGxldHMnXG4gICAqIHNpbXVsYXRlIGl0LiBJdCBhbHNvIGF1dG9tYXRpY2FsbHkgY2hlY2tzXG4gICAqIGlmIHRoZSBwcm9wIGlzIGZ1bmN0aW9uIG9yIGdldHRlciBhbmQgYmVoYXZlc1xuICAgKiBhY2NvcmRpbmdseS4gKi9cbiAgZnVuY3Rpb24gbG9va3VwR2V0dGVyKG9iamVjdCwgcHJvcCkge1xuICAgIHdoaWxlIChvYmplY3QgIT09IG51bGwpIHtcbiAgICAgIHZhciBkZXNjID0gZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG9iamVjdCwgcHJvcCk7XG4gICAgICBpZiAoZGVzYykge1xuICAgICAgICBpZiAoZGVzYy5nZXQpIHtcbiAgICAgICAgICByZXR1cm4gdW5hcHBseShkZXNjLmdldCk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodHlwZW9mIGRlc2MudmFsdWUgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICByZXR1cm4gdW5hcHBseShkZXNjLnZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBvYmplY3QgPSBnZXRQcm90b3R5cGVPZihvYmplY3QpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGZhbGxiYWNrVmFsdWUoZWxlbWVudCkge1xuICAgICAgY29uc29sZS53YXJuKCdmYWxsYmFjayB2YWx1ZSBmb3InLCBlbGVtZW50KTtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIHJldHVybiBmYWxsYmFja1ZhbHVlO1xuICB9XG5cbiAgdmFyIGh0bWwgPSBmcmVlemUoWydhJywgJ2FiYnInLCAnYWNyb255bScsICdhZGRyZXNzJywgJ2FyZWEnLCAnYXJ0aWNsZScsICdhc2lkZScsICdhdWRpbycsICdiJywgJ2JkaScsICdiZG8nLCAnYmlnJywgJ2JsaW5rJywgJ2Jsb2NrcXVvdGUnLCAnYm9keScsICdicicsICdidXR0b24nLCAnY2FudmFzJywgJ2NhcHRpb24nLCAnY2VudGVyJywgJ2NpdGUnLCAnY29kZScsICdjb2wnLCAnY29sZ3JvdXAnLCAnY29udGVudCcsICdkYXRhJywgJ2RhdGFsaXN0JywgJ2RkJywgJ2RlY29yYXRvcicsICdkZWwnLCAnZGV0YWlscycsICdkZm4nLCAnZGlhbG9nJywgJ2RpcicsICdkaXYnLCAnZGwnLCAnZHQnLCAnZWxlbWVudCcsICdlbScsICdmaWVsZHNldCcsICdmaWdjYXB0aW9uJywgJ2ZpZ3VyZScsICdmb250JywgJ2Zvb3RlcicsICdmb3JtJywgJ2gxJywgJ2gyJywgJ2gzJywgJ2g0JywgJ2g1JywgJ2g2JywgJ2hlYWQnLCAnaGVhZGVyJywgJ2hncm91cCcsICdocicsICdodG1sJywgJ2knLCAnaW1nJywgJ2lucHV0JywgJ2lucycsICdrYmQnLCAnbGFiZWwnLCAnbGVnZW5kJywgJ2xpJywgJ21haW4nLCAnbWFwJywgJ21hcmsnLCAnbWFycXVlZScsICdtZW51JywgJ21lbnVpdGVtJywgJ21ldGVyJywgJ25hdicsICdub2JyJywgJ29sJywgJ29wdGdyb3VwJywgJ29wdGlvbicsICdvdXRwdXQnLCAncCcsICdwaWN0dXJlJywgJ3ByZScsICdwcm9ncmVzcycsICdxJywgJ3JwJywgJ3J0JywgJ3J1YnknLCAncycsICdzYW1wJywgJ3NlY3Rpb24nLCAnc2VsZWN0JywgJ3NoYWRvdycsICdzbWFsbCcsICdzb3VyY2UnLCAnc3BhY2VyJywgJ3NwYW4nLCAnc3RyaWtlJywgJ3N0cm9uZycsICdzdHlsZScsICdzdWInLCAnc3VtbWFyeScsICdzdXAnLCAndGFibGUnLCAndGJvZHknLCAndGQnLCAndGVtcGxhdGUnLCAndGV4dGFyZWEnLCAndGZvb3QnLCAndGgnLCAndGhlYWQnLCAndGltZScsICd0cicsICd0cmFjaycsICd0dCcsICd1JywgJ3VsJywgJ3ZhcicsICd2aWRlbycsICd3YnInXSk7XG5cbiAgLy8gU1ZHXG4gIHZhciBzdmcgPSBmcmVlemUoWydzdmcnLCAnYScsICdhbHRnbHlwaCcsICdhbHRnbHlwaGRlZicsICdhbHRnbHlwaGl0ZW0nLCAnYW5pbWF0ZWNvbG9yJywgJ2FuaW1hdGVtb3Rpb24nLCAnYW5pbWF0ZXRyYW5zZm9ybScsICdjaXJjbGUnLCAnY2xpcHBhdGgnLCAnZGVmcycsICdkZXNjJywgJ2VsbGlwc2UnLCAnZmlsdGVyJywgJ2ZvbnQnLCAnZycsICdnbHlwaCcsICdnbHlwaHJlZicsICdoa2VybicsICdpbWFnZScsICdsaW5lJywgJ2xpbmVhcmdyYWRpZW50JywgJ21hcmtlcicsICdtYXNrJywgJ21ldGFkYXRhJywgJ21wYXRoJywgJ3BhdGgnLCAncGF0dGVybicsICdwb2x5Z29uJywgJ3BvbHlsaW5lJywgJ3JhZGlhbGdyYWRpZW50JywgJ3JlY3QnLCAnc3RvcCcsICdzdHlsZScsICdzd2l0Y2gnLCAnc3ltYm9sJywgJ3RleHQnLCAndGV4dHBhdGgnLCAndGl0bGUnLCAndHJlZicsICd0c3BhbicsICd2aWV3JywgJ3ZrZXJuJ10pO1xuXG4gIHZhciBzdmdGaWx0ZXJzID0gZnJlZXplKFsnZmVCbGVuZCcsICdmZUNvbG9yTWF0cml4JywgJ2ZlQ29tcG9uZW50VHJhbnNmZXInLCAnZmVDb21wb3NpdGUnLCAnZmVDb252b2x2ZU1hdHJpeCcsICdmZURpZmZ1c2VMaWdodGluZycsICdmZURpc3BsYWNlbWVudE1hcCcsICdmZURpc3RhbnRMaWdodCcsICdmZUZsb29kJywgJ2ZlRnVuY0EnLCAnZmVGdW5jQicsICdmZUZ1bmNHJywgJ2ZlRnVuY1InLCAnZmVHYXVzc2lhbkJsdXInLCAnZmVJbWFnZScsICdmZU1lcmdlJywgJ2ZlTWVyZ2VOb2RlJywgJ2ZlTW9ycGhvbG9neScsICdmZU9mZnNldCcsICdmZVBvaW50TGlnaHQnLCAnZmVTcGVjdWxhckxpZ2h0aW5nJywgJ2ZlU3BvdExpZ2h0JywgJ2ZlVGlsZScsICdmZVR1cmJ1bGVuY2UnXSk7XG5cbiAgLy8gTGlzdCBvZiBTVkcgZWxlbWVudHMgdGhhdCBhcmUgZGlzYWxsb3dlZCBieSBkZWZhdWx0LlxuICAvLyBXZSBzdGlsbCBuZWVkIHRvIGtub3cgdGhlbSBzbyB0aGF0IHdlIGNhbiBkbyBuYW1lc3BhY2VcbiAgLy8gY2hlY2tzIHByb3Blcmx5IGluIGNhc2Ugb25lIHdhbnRzIHRvIGFkZCB0aGVtIHRvXG4gIC8vIGFsbG93LWxpc3QuXG4gIHZhciBzdmdEaXNhbGxvd2VkID0gZnJlZXplKFsnYW5pbWF0ZScsICdjb2xvci1wcm9maWxlJywgJ2N1cnNvcicsICdkaXNjYXJkJywgJ2ZlZHJvcHNoYWRvdycsICdmb250LWZhY2UnLCAnZm9udC1mYWNlLWZvcm1hdCcsICdmb250LWZhY2UtbmFtZScsICdmb250LWZhY2Utc3JjJywgJ2ZvbnQtZmFjZS11cmknLCAnZm9yZWlnbm9iamVjdCcsICdoYXRjaCcsICdoYXRjaHBhdGgnLCAnbWVzaCcsICdtZXNoZ3JhZGllbnQnLCAnbWVzaHBhdGNoJywgJ21lc2hyb3cnLCAnbWlzc2luZy1nbHlwaCcsICdzY3JpcHQnLCAnc2V0JywgJ3NvbGlkY29sb3InLCAndW5rbm93bicsICd1c2UnXSk7XG5cbiAgdmFyIG1hdGhNbCA9IGZyZWV6ZShbJ21hdGgnLCAnbWVuY2xvc2UnLCAnbWVycm9yJywgJ21mZW5jZWQnLCAnbWZyYWMnLCAnbWdseXBoJywgJ21pJywgJ21sYWJlbGVkdHInLCAnbW11bHRpc2NyaXB0cycsICdtbicsICdtbycsICdtb3ZlcicsICdtcGFkZGVkJywgJ21waGFudG9tJywgJ21yb290JywgJ21yb3cnLCAnbXMnLCAnbXNwYWNlJywgJ21zcXJ0JywgJ21zdHlsZScsICdtc3ViJywgJ21zdXAnLCAnbXN1YnN1cCcsICdtdGFibGUnLCAnbXRkJywgJ210ZXh0JywgJ210cicsICdtdW5kZXInLCAnbXVuZGVyb3ZlciddKTtcblxuICAvLyBTaW1pbGFybHkgdG8gU1ZHLCB3ZSB3YW50IHRvIGtub3cgYWxsIE1hdGhNTCBlbGVtZW50cyxcbiAgLy8gZXZlbiB0aG9zZSB0aGF0IHdlIGRpc2FsbG93IGJ5IGRlZmF1bHQuXG4gIHZhciBtYXRoTWxEaXNhbGxvd2VkID0gZnJlZXplKFsnbWFjdGlvbicsICdtYWxpZ25ncm91cCcsICdtYWxpZ25tYXJrJywgJ21sb25nZGl2JywgJ21zY2FycmllcycsICdtc2NhcnJ5JywgJ21zZ3JvdXAnLCAnbXN0YWNrJywgJ21zbGluZScsICdtc3JvdycsICdzZW1hbnRpY3MnLCAnYW5ub3RhdGlvbicsICdhbm5vdGF0aW9uLXhtbCcsICdtcHJlc2NyaXB0cycsICdub25lJ10pO1xuXG4gIHZhciB0ZXh0ID0gZnJlZXplKFsnI3RleHQnXSk7XG5cbiAgdmFyIGh0bWwkMSA9IGZyZWV6ZShbJ2FjY2VwdCcsICdhY3Rpb24nLCAnYWxpZ24nLCAnYWx0JywgJ2F1dG9jYXBpdGFsaXplJywgJ2F1dG9jb21wbGV0ZScsICdhdXRvcGljdHVyZWlucGljdHVyZScsICdhdXRvcGxheScsICdiYWNrZ3JvdW5kJywgJ2JnY29sb3InLCAnYm9yZGVyJywgJ2NhcHR1cmUnLCAnY2VsbHBhZGRpbmcnLCAnY2VsbHNwYWNpbmcnLCAnY2hlY2tlZCcsICdjaXRlJywgJ2NsYXNzJywgJ2NsZWFyJywgJ2NvbG9yJywgJ2NvbHMnLCAnY29sc3BhbicsICdjb250cm9scycsICdjb250cm9sc2xpc3QnLCAnY29vcmRzJywgJ2Nyb3Nzb3JpZ2luJywgJ2RhdGV0aW1lJywgJ2RlY29kaW5nJywgJ2RlZmF1bHQnLCAnZGlyJywgJ2Rpc2FibGVkJywgJ2Rpc2FibGVwaWN0dXJlaW5waWN0dXJlJywgJ2Rpc2FibGVyZW1vdGVwbGF5YmFjaycsICdkb3dubG9hZCcsICdkcmFnZ2FibGUnLCAnZW5jdHlwZScsICdlbnRlcmtleWhpbnQnLCAnZmFjZScsICdmb3InLCAnaGVhZGVycycsICdoZWlnaHQnLCAnaGlkZGVuJywgJ2hpZ2gnLCAnaHJlZicsICdocmVmbGFuZycsICdpZCcsICdpbnB1dG1vZGUnLCAnaW50ZWdyaXR5JywgJ2lzbWFwJywgJ2tpbmQnLCAnbGFiZWwnLCAnbGFuZycsICdsaXN0JywgJ2xvYWRpbmcnLCAnbG9vcCcsICdsb3cnLCAnbWF4JywgJ21heGxlbmd0aCcsICdtZWRpYScsICdtZXRob2QnLCAnbWluJywgJ21pbmxlbmd0aCcsICdtdWx0aXBsZScsICdtdXRlZCcsICduYW1lJywgJ25vbmNlJywgJ25vc2hhZGUnLCAnbm92YWxpZGF0ZScsICdub3dyYXAnLCAnb3BlbicsICdvcHRpbXVtJywgJ3BhdHRlcm4nLCAncGxhY2Vob2xkZXInLCAncGxheXNpbmxpbmUnLCAncG9zdGVyJywgJ3ByZWxvYWQnLCAncHViZGF0ZScsICdyYWRpb2dyb3VwJywgJ3JlYWRvbmx5JywgJ3JlbCcsICdyZXF1aXJlZCcsICdyZXYnLCAncmV2ZXJzZWQnLCAncm9sZScsICdyb3dzJywgJ3Jvd3NwYW4nLCAnc3BlbGxjaGVjaycsICdzY29wZScsICdzZWxlY3RlZCcsICdzaGFwZScsICdzaXplJywgJ3NpemVzJywgJ3NwYW4nLCAnc3JjbGFuZycsICdzdGFydCcsICdzcmMnLCAnc3Jjc2V0JywgJ3N0ZXAnLCAnc3R5bGUnLCAnc3VtbWFyeScsICd0YWJpbmRleCcsICd0aXRsZScsICd0cmFuc2xhdGUnLCAndHlwZScsICd1c2VtYXAnLCAndmFsaWduJywgJ3ZhbHVlJywgJ3dpZHRoJywgJ3htbG5zJywgJ3Nsb3QnXSk7XG5cbiAgdmFyIHN2ZyQxID0gZnJlZXplKFsnYWNjZW50LWhlaWdodCcsICdhY2N1bXVsYXRlJywgJ2FkZGl0aXZlJywgJ2FsaWdubWVudC1iYXNlbGluZScsICdhc2NlbnQnLCAnYXR0cmlidXRlbmFtZScsICdhdHRyaWJ1dGV0eXBlJywgJ2F6aW11dGgnLCAnYmFzZWZyZXF1ZW5jeScsICdiYXNlbGluZS1zaGlmdCcsICdiZWdpbicsICdiaWFzJywgJ2J5JywgJ2NsYXNzJywgJ2NsaXAnLCAnY2xpcHBhdGh1bml0cycsICdjbGlwLXBhdGgnLCAnY2xpcC1ydWxlJywgJ2NvbG9yJywgJ2NvbG9yLWludGVycG9sYXRpb24nLCAnY29sb3ItaW50ZXJwb2xhdGlvbi1maWx0ZXJzJywgJ2NvbG9yLXByb2ZpbGUnLCAnY29sb3ItcmVuZGVyaW5nJywgJ2N4JywgJ2N5JywgJ2QnLCAnZHgnLCAnZHknLCAnZGlmZnVzZWNvbnN0YW50JywgJ2RpcmVjdGlvbicsICdkaXNwbGF5JywgJ2Rpdmlzb3InLCAnZHVyJywgJ2VkZ2Vtb2RlJywgJ2VsZXZhdGlvbicsICdlbmQnLCAnZmlsbCcsICdmaWxsLW9wYWNpdHknLCAnZmlsbC1ydWxlJywgJ2ZpbHRlcicsICdmaWx0ZXJ1bml0cycsICdmbG9vZC1jb2xvcicsICdmbG9vZC1vcGFjaXR5JywgJ2ZvbnQtZmFtaWx5JywgJ2ZvbnQtc2l6ZScsICdmb250LXNpemUtYWRqdXN0JywgJ2ZvbnQtc3RyZXRjaCcsICdmb250LXN0eWxlJywgJ2ZvbnQtdmFyaWFudCcsICdmb250LXdlaWdodCcsICdmeCcsICdmeScsICdnMScsICdnMicsICdnbHlwaC1uYW1lJywgJ2dseXBocmVmJywgJ2dyYWRpZW50dW5pdHMnLCAnZ3JhZGllbnR0cmFuc2Zvcm0nLCAnaGVpZ2h0JywgJ2hyZWYnLCAnaWQnLCAnaW1hZ2UtcmVuZGVyaW5nJywgJ2luJywgJ2luMicsICdrJywgJ2sxJywgJ2syJywgJ2szJywgJ2s0JywgJ2tlcm5pbmcnLCAna2V5cG9pbnRzJywgJ2tleXNwbGluZXMnLCAna2V5dGltZXMnLCAnbGFuZycsICdsZW5ndGhhZGp1c3QnLCAnbGV0dGVyLXNwYWNpbmcnLCAna2VybmVsbWF0cml4JywgJ2tlcm5lbHVuaXRsZW5ndGgnLCAnbGlnaHRpbmctY29sb3InLCAnbG9jYWwnLCAnbWFya2VyLWVuZCcsICdtYXJrZXItbWlkJywgJ21hcmtlci1zdGFydCcsICdtYXJrZXJoZWlnaHQnLCAnbWFya2VydW5pdHMnLCAnbWFya2Vyd2lkdGgnLCAnbWFza2NvbnRlbnR1bml0cycsICdtYXNrdW5pdHMnLCAnbWF4JywgJ21hc2snLCAnbWVkaWEnLCAnbWV0aG9kJywgJ21vZGUnLCAnbWluJywgJ25hbWUnLCAnbnVtb2N0YXZlcycsICdvZmZzZXQnLCAnb3BlcmF0b3InLCAnb3BhY2l0eScsICdvcmRlcicsICdvcmllbnQnLCAnb3JpZW50YXRpb24nLCAnb3JpZ2luJywgJ292ZXJmbG93JywgJ3BhaW50LW9yZGVyJywgJ3BhdGgnLCAncGF0aGxlbmd0aCcsICdwYXR0ZXJuY29udGVudHVuaXRzJywgJ3BhdHRlcm50cmFuc2Zvcm0nLCAncGF0dGVybnVuaXRzJywgJ3BvaW50cycsICdwcmVzZXJ2ZWFscGhhJywgJ3ByZXNlcnZlYXNwZWN0cmF0aW8nLCAncHJpbWl0aXZldW5pdHMnLCAncicsICdyeCcsICdyeScsICdyYWRpdXMnLCAncmVmeCcsICdyZWZ5JywgJ3JlcGVhdGNvdW50JywgJ3JlcGVhdGR1cicsICdyZXN0YXJ0JywgJ3Jlc3VsdCcsICdyb3RhdGUnLCAnc2NhbGUnLCAnc2VlZCcsICdzaGFwZS1yZW5kZXJpbmcnLCAnc3BlY3VsYXJjb25zdGFudCcsICdzcGVjdWxhcmV4cG9uZW50JywgJ3NwcmVhZG1ldGhvZCcsICdzdGFydG9mZnNldCcsICdzdGRkZXZpYXRpb24nLCAnc3RpdGNodGlsZXMnLCAnc3RvcC1jb2xvcicsICdzdG9wLW9wYWNpdHknLCAnc3Ryb2tlLWRhc2hhcnJheScsICdzdHJva2UtZGFzaG9mZnNldCcsICdzdHJva2UtbGluZWNhcCcsICdzdHJva2UtbGluZWpvaW4nLCAnc3Ryb2tlLW1pdGVybGltaXQnLCAnc3Ryb2tlLW9wYWNpdHknLCAnc3Ryb2tlJywgJ3N0cm9rZS13aWR0aCcsICdzdHlsZScsICdzdXJmYWNlc2NhbGUnLCAnc3lzdGVtbGFuZ3VhZ2UnLCAndGFiaW5kZXgnLCAndGFyZ2V0eCcsICd0YXJnZXR5JywgJ3RyYW5zZm9ybScsICd0cmFuc2Zvcm0tb3JpZ2luJywgJ3RleHQtYW5jaG9yJywgJ3RleHQtZGVjb3JhdGlvbicsICd0ZXh0LXJlbmRlcmluZycsICd0ZXh0bGVuZ3RoJywgJ3R5cGUnLCAndTEnLCAndTInLCAndW5pY29kZScsICd2YWx1ZXMnLCAndmlld2JveCcsICd2aXNpYmlsaXR5JywgJ3ZlcnNpb24nLCAndmVydC1hZHYteScsICd2ZXJ0LW9yaWdpbi14JywgJ3ZlcnQtb3JpZ2luLXknLCAnd2lkdGgnLCAnd29yZC1zcGFjaW5nJywgJ3dyYXAnLCAnd3JpdGluZy1tb2RlJywgJ3hjaGFubmVsc2VsZWN0b3InLCAneWNoYW5uZWxzZWxlY3RvcicsICd4JywgJ3gxJywgJ3gyJywgJ3htbG5zJywgJ3knLCAneTEnLCAneTInLCAneicsICd6b29tYW5kcGFuJ10pO1xuXG4gIHZhciBtYXRoTWwkMSA9IGZyZWV6ZShbJ2FjY2VudCcsICdhY2NlbnR1bmRlcicsICdhbGlnbicsICdiZXZlbGxlZCcsICdjbG9zZScsICdjb2x1bW5zYWxpZ24nLCAnY29sdW1ubGluZXMnLCAnY29sdW1uc3BhbicsICdkZW5vbWFsaWduJywgJ2RlcHRoJywgJ2RpcicsICdkaXNwbGF5JywgJ2Rpc3BsYXlzdHlsZScsICdlbmNvZGluZycsICdmZW5jZScsICdmcmFtZScsICdoZWlnaHQnLCAnaHJlZicsICdpZCcsICdsYXJnZW9wJywgJ2xlbmd0aCcsICdsaW5ldGhpY2tuZXNzJywgJ2xzcGFjZScsICdscXVvdGUnLCAnbWF0aGJhY2tncm91bmQnLCAnbWF0aGNvbG9yJywgJ21hdGhzaXplJywgJ21hdGh2YXJpYW50JywgJ21heHNpemUnLCAnbWluc2l6ZScsICdtb3ZhYmxlbGltaXRzJywgJ25vdGF0aW9uJywgJ251bWFsaWduJywgJ29wZW4nLCAncm93YWxpZ24nLCAncm93bGluZXMnLCAncm93c3BhY2luZycsICdyb3dzcGFuJywgJ3JzcGFjZScsICdycXVvdGUnLCAnc2NyaXB0bGV2ZWwnLCAnc2NyaXB0bWluc2l6ZScsICdzY3JpcHRzaXplbXVsdGlwbGllcicsICdzZWxlY3Rpb24nLCAnc2VwYXJhdG9yJywgJ3NlcGFyYXRvcnMnLCAnc3RyZXRjaHknLCAnc3Vic2NyaXB0c2hpZnQnLCAnc3Vwc2NyaXB0c2hpZnQnLCAnc3ltbWV0cmljJywgJ3ZvZmZzZXQnLCAnd2lkdGgnLCAneG1sbnMnXSk7XG5cbiAgdmFyIHhtbCA9IGZyZWV6ZShbJ3hsaW5rOmhyZWYnLCAneG1sOmlkJywgJ3hsaW5rOnRpdGxlJywgJ3htbDpzcGFjZScsICd4bWxuczp4bGluayddKTtcblxuICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgdW5pY29ybi9iZXR0ZXItcmVnZXhcbiAgdmFyIE1VU1RBQ0hFX0VYUFIgPSBzZWFsKC9cXHtcXHtbXFxzXFxTXSp8W1xcc1xcU10qXFx9XFx9L2dtKTsgLy8gU3BlY2lmeSB0ZW1wbGF0ZSBkZXRlY3Rpb24gcmVnZXggZm9yIFNBRkVfRk9SX1RFTVBMQVRFUyBtb2RlXG4gIHZhciBFUkJfRVhQUiA9IHNlYWwoLzwlW1xcc1xcU10qfFtcXHNcXFNdKiU+L2dtKTtcbiAgdmFyIERBVEFfQVRUUiA9IHNlYWwoL15kYXRhLVtcXC1cXHcuXFx1MDBCNy1cXHVGRkZGXS8pOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLXVzZWxlc3MtZXNjYXBlXG4gIHZhciBBUklBX0FUVFIgPSBzZWFsKC9eYXJpYS1bXFwtXFx3XSskLyk7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tdXNlbGVzcy1lc2NhcGVcbiAgdmFyIElTX0FMTE9XRURfVVJJID0gc2VhbCgvXig/Oig/Oig/OmZ8aHQpdHBzP3xtYWlsdG98dGVsfGNhbGx0b3xjaWR8eG1wcCk6fFteYS16XXxbYS16Ky5cXC1dKyg/OlteYS16Ky5cXC06XXwkKSkvaSAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLXVzZWxlc3MtZXNjYXBlXG4gICk7XG4gIHZhciBJU19TQ1JJUFRfT1JfREFUQSA9IHNlYWwoL14oPzpcXHcrc2NyaXB0fGRhdGEpOi9pKTtcbiAgdmFyIEFUVFJfV0hJVEVTUEFDRSA9IHNlYWwoL1tcXHUwMDAwLVxcdTAwMjBcXHUwMEEwXFx1MTY4MFxcdTE4MEVcXHUyMDAwLVxcdTIwMjlcXHUyMDVGXFx1MzAwMF0vZyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLWNvbnRyb2wtcmVnZXhcbiAgKTtcblxuICB2YXIgX3R5cGVvZiA9IHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiB0eXBlb2YgU3ltYm9sLml0ZXJhdG9yID09PSBcInN5bWJvbFwiID8gZnVuY3Rpb24gKG9iaikgeyByZXR1cm4gdHlwZW9mIG9iajsgfSA6IGZ1bmN0aW9uIChvYmopIHsgcmV0dXJuIG9iaiAmJiB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgb2JqLmNvbnN0cnVjdG9yID09PSBTeW1ib2wgJiYgb2JqICE9PSBTeW1ib2wucHJvdG90eXBlID8gXCJzeW1ib2xcIiA6IHR5cGVvZiBvYmo7IH07XG5cbiAgZnVuY3Rpb24gX3RvQ29uc3VtYWJsZUFycmF5JDEoYXJyKSB7IGlmIChBcnJheS5pc0FycmF5KGFycikpIHsgZm9yICh2YXIgaSA9IDAsIGFycjIgPSBBcnJheShhcnIubGVuZ3RoKTsgaSA8IGFyci5sZW5ndGg7IGkrKykgeyBhcnIyW2ldID0gYXJyW2ldOyB9IHJldHVybiBhcnIyOyB9IGVsc2UgeyByZXR1cm4gQXJyYXkuZnJvbShhcnIpOyB9IH1cblxuICB2YXIgZ2V0R2xvYmFsID0gZnVuY3Rpb24gZ2V0R2xvYmFsKCkge1xuICAgIHJldHVybiB0eXBlb2Ygd2luZG93ID09PSAndW5kZWZpbmVkJyA/IG51bGwgOiB3aW5kb3c7XG4gIH07XG5cbiAgLyoqXG4gICAqIENyZWF0ZXMgYSBuby1vcCBwb2xpY3kgZm9yIGludGVybmFsIHVzZSBvbmx5LlxuICAgKiBEb24ndCBleHBvcnQgdGhpcyBmdW5jdGlvbiBvdXRzaWRlIHRoaXMgbW9kdWxlIVxuICAgKiBAcGFyYW0gez9UcnVzdGVkVHlwZVBvbGljeUZhY3Rvcnl9IHRydXN0ZWRUeXBlcyBUaGUgcG9saWN5IGZhY3RvcnkuXG4gICAqIEBwYXJhbSB7RG9jdW1lbnR9IGRvY3VtZW50IFRoZSBkb2N1bWVudCBvYmplY3QgKHRvIGRldGVybWluZSBwb2xpY3kgbmFtZSBzdWZmaXgpXG4gICAqIEByZXR1cm4gez9UcnVzdGVkVHlwZVBvbGljeX0gVGhlIHBvbGljeSBjcmVhdGVkIChvciBudWxsLCBpZiBUcnVzdGVkIFR5cGVzXG4gICAqIGFyZSBub3Qgc3VwcG9ydGVkKS5cbiAgICovXG4gIHZhciBfY3JlYXRlVHJ1c3RlZFR5cGVzUG9saWN5ID0gZnVuY3Rpb24gX2NyZWF0ZVRydXN0ZWRUeXBlc1BvbGljeSh0cnVzdGVkVHlwZXMsIGRvY3VtZW50KSB7XG4gICAgaWYgKCh0eXBlb2YgdHJ1c3RlZFR5cGVzID09PSAndW5kZWZpbmVkJyA/ICd1bmRlZmluZWQnIDogX3R5cGVvZih0cnVzdGVkVHlwZXMpKSAhPT0gJ29iamVjdCcgfHwgdHlwZW9mIHRydXN0ZWRUeXBlcy5jcmVhdGVQb2xpY3kgIT09ICdmdW5jdGlvbicpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIC8vIEFsbG93IHRoZSBjYWxsZXJzIHRvIGNvbnRyb2wgdGhlIHVuaXF1ZSBwb2xpY3kgbmFtZVxuICAgIC8vIGJ5IGFkZGluZyBhIGRhdGEtdHQtcG9saWN5LXN1ZmZpeCB0byB0aGUgc2NyaXB0IGVsZW1lbnQgd2l0aCB0aGUgRE9NUHVyaWZ5LlxuICAgIC8vIFBvbGljeSBjcmVhdGlvbiB3aXRoIGR1cGxpY2F0ZSBuYW1lcyB0aHJvd3MgaW4gVHJ1c3RlZCBUeXBlcy5cbiAgICB2YXIgc3VmZml4ID0gbnVsbDtcbiAgICB2YXIgQVRUUl9OQU1FID0gJ2RhdGEtdHQtcG9saWN5LXN1ZmZpeCc7XG4gICAgaWYgKGRvY3VtZW50LmN1cnJlbnRTY3JpcHQgJiYgZG9jdW1lbnQuY3VycmVudFNjcmlwdC5oYXNBdHRyaWJ1dGUoQVRUUl9OQU1FKSkge1xuICAgICAgc3VmZml4ID0gZG9jdW1lbnQuY3VycmVudFNjcmlwdC5nZXRBdHRyaWJ1dGUoQVRUUl9OQU1FKTtcbiAgICB9XG5cbiAgICB2YXIgcG9saWN5TmFtZSA9ICdkb21wdXJpZnknICsgKHN1ZmZpeCA/ICcjJyArIHN1ZmZpeCA6ICcnKTtcblxuICAgIHRyeSB7XG4gICAgICByZXR1cm4gdHJ1c3RlZFR5cGVzLmNyZWF0ZVBvbGljeShwb2xpY3lOYW1lLCB7XG4gICAgICAgIGNyZWF0ZUhUTUw6IGZ1bmN0aW9uIGNyZWF0ZUhUTUwoaHRtbCQkMSkge1xuICAgICAgICAgIHJldHVybiBodG1sJCQxO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9IGNhdGNoIChfKSB7XG4gICAgICAvLyBQb2xpY3kgY3JlYXRpb24gZmFpbGVkIChtb3N0IGxpa2VseSBhbm90aGVyIERPTVB1cmlmeSBzY3JpcHQgaGFzXG4gICAgICAvLyBhbHJlYWR5IHJ1bikuIFNraXAgY3JlYXRpbmcgdGhlIHBvbGljeSwgYXMgdGhpcyB3aWxsIG9ubHkgY2F1c2UgZXJyb3JzXG4gICAgICAvLyBpZiBUVCBhcmUgZW5mb3JjZWQuXG4gICAgICBjb25zb2xlLndhcm4oJ1RydXN0ZWRUeXBlcyBwb2xpY3kgJyArIHBvbGljeU5hbWUgKyAnIGNvdWxkIG5vdCBiZSBjcmVhdGVkLicpO1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICB9O1xuXG4gIGZ1bmN0aW9uIGNyZWF0ZURPTVB1cmlmeSgpIHtcbiAgICB2YXIgd2luZG93ID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiBnZXRHbG9iYWwoKTtcblxuICAgIHZhciBET01QdXJpZnkgPSBmdW5jdGlvbiBET01QdXJpZnkocm9vdCkge1xuICAgICAgcmV0dXJuIGNyZWF0ZURPTVB1cmlmeShyb290KTtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogVmVyc2lvbiBsYWJlbCwgZXhwb3NlZCBmb3IgZWFzaWVyIGNoZWNrc1xuICAgICAqIGlmIERPTVB1cmlmeSBpcyB1cCB0byBkYXRlIG9yIG5vdFxuICAgICAqL1xuICAgIERPTVB1cmlmeS52ZXJzaW9uID0gJzIuMy41JztcblxuICAgIC8qKlxuICAgICAqIEFycmF5IG9mIGVsZW1lbnRzIHRoYXQgRE9NUHVyaWZ5IHJlbW92ZWQgZHVyaW5nIHNhbml0YXRpb24uXG4gICAgICogRW1wdHkgaWYgbm90aGluZyB3YXMgcmVtb3ZlZC5cbiAgICAgKi9cbiAgICBET01QdXJpZnkucmVtb3ZlZCA9IFtdO1xuXG4gICAgaWYgKCF3aW5kb3cgfHwgIXdpbmRvdy5kb2N1bWVudCB8fCB3aW5kb3cuZG9jdW1lbnQubm9kZVR5cGUgIT09IDkpIHtcbiAgICAgIC8vIE5vdCBydW5uaW5nIGluIGEgYnJvd3NlciwgcHJvdmlkZSBhIGZhY3RvcnkgZnVuY3Rpb25cbiAgICAgIC8vIHNvIHRoYXQgeW91IGNhbiBwYXNzIHlvdXIgb3duIFdpbmRvd1xuICAgICAgRE9NUHVyaWZ5LmlzU3VwcG9ydGVkID0gZmFsc2U7XG5cbiAgICAgIHJldHVybiBET01QdXJpZnk7XG4gICAgfVxuXG4gICAgdmFyIG9yaWdpbmFsRG9jdW1lbnQgPSB3aW5kb3cuZG9jdW1lbnQ7XG5cbiAgICB2YXIgZG9jdW1lbnQgPSB3aW5kb3cuZG9jdW1lbnQ7XG4gICAgdmFyIERvY3VtZW50RnJhZ21lbnQgPSB3aW5kb3cuRG9jdW1lbnRGcmFnbWVudCxcbiAgICAgICAgSFRNTFRlbXBsYXRlRWxlbWVudCA9IHdpbmRvdy5IVE1MVGVtcGxhdGVFbGVtZW50LFxuICAgICAgICBOb2RlID0gd2luZG93Lk5vZGUsXG4gICAgICAgIEVsZW1lbnQgPSB3aW5kb3cuRWxlbWVudCxcbiAgICAgICAgTm9kZUZpbHRlciA9IHdpbmRvdy5Ob2RlRmlsdGVyLFxuICAgICAgICBfd2luZG93JE5hbWVkTm9kZU1hcCA9IHdpbmRvdy5OYW1lZE5vZGVNYXAsXG4gICAgICAgIE5hbWVkTm9kZU1hcCA9IF93aW5kb3ckTmFtZWROb2RlTWFwID09PSB1bmRlZmluZWQgPyB3aW5kb3cuTmFtZWROb2RlTWFwIHx8IHdpbmRvdy5Nb3pOYW1lZEF0dHJNYXAgOiBfd2luZG93JE5hbWVkTm9kZU1hcCxcbiAgICAgICAgSFRNTEZvcm1FbGVtZW50ID0gd2luZG93LkhUTUxGb3JtRWxlbWVudCxcbiAgICAgICAgRE9NUGFyc2VyID0gd2luZG93LkRPTVBhcnNlcixcbiAgICAgICAgdHJ1c3RlZFR5cGVzID0gd2luZG93LnRydXN0ZWRUeXBlcztcblxuXG4gICAgdmFyIEVsZW1lbnRQcm90b3R5cGUgPSBFbGVtZW50LnByb3RvdHlwZTtcblxuICAgIHZhciBjbG9uZU5vZGUgPSBsb29rdXBHZXR0ZXIoRWxlbWVudFByb3RvdHlwZSwgJ2Nsb25lTm9kZScpO1xuICAgIHZhciBnZXROZXh0U2libGluZyA9IGxvb2t1cEdldHRlcihFbGVtZW50UHJvdG90eXBlLCAnbmV4dFNpYmxpbmcnKTtcbiAgICB2YXIgZ2V0Q2hpbGROb2RlcyA9IGxvb2t1cEdldHRlcihFbGVtZW50UHJvdG90eXBlLCAnY2hpbGROb2RlcycpO1xuICAgIHZhciBnZXRQYXJlbnROb2RlID0gbG9va3VwR2V0dGVyKEVsZW1lbnRQcm90b3R5cGUsICdwYXJlbnROb2RlJyk7XG5cbiAgICAvLyBBcyBwZXIgaXNzdWUgIzQ3LCB0aGUgd2ViLWNvbXBvbmVudHMgcmVnaXN0cnkgaXMgaW5oZXJpdGVkIGJ5IGFcbiAgICAvLyBuZXcgZG9jdW1lbnQgY3JlYXRlZCB2aWEgY3JlYXRlSFRNTERvY3VtZW50LiBBcyBwZXIgdGhlIHNwZWNcbiAgICAvLyAoaHR0cDovL3czYy5naXRodWIuaW8vd2ViY29tcG9uZW50cy9zcGVjL2N1c3RvbS8jY3JlYXRpbmctYW5kLXBhc3NpbmctcmVnaXN0cmllcylcbiAgICAvLyBhIG5ldyBlbXB0eSByZWdpc3RyeSBpcyB1c2VkIHdoZW4gY3JlYXRpbmcgYSB0ZW1wbGF0ZSBjb250ZW50cyBvd25lclxuICAgIC8vIGRvY3VtZW50LCBzbyB3ZSB1c2UgdGhhdCBhcyBvdXIgcGFyZW50IGRvY3VtZW50IHRvIGVuc3VyZSBub3RoaW5nXG4gICAgLy8gaXMgaW5oZXJpdGVkLlxuICAgIGlmICh0eXBlb2YgSFRNTFRlbXBsYXRlRWxlbWVudCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgdmFyIHRlbXBsYXRlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndGVtcGxhdGUnKTtcbiAgICAgIGlmICh0ZW1wbGF0ZS5jb250ZW50ICYmIHRlbXBsYXRlLmNvbnRlbnQub3duZXJEb2N1bWVudCkge1xuICAgICAgICBkb2N1bWVudCA9IHRlbXBsYXRlLmNvbnRlbnQub3duZXJEb2N1bWVudDtcbiAgICAgIH1cbiAgICB9XG5cbiAgICB2YXIgdHJ1c3RlZFR5cGVzUG9saWN5ID0gX2NyZWF0ZVRydXN0ZWRUeXBlc1BvbGljeSh0cnVzdGVkVHlwZXMsIG9yaWdpbmFsRG9jdW1lbnQpO1xuICAgIHZhciBlbXB0eUhUTUwgPSB0cnVzdGVkVHlwZXNQb2xpY3kgPyB0cnVzdGVkVHlwZXNQb2xpY3kuY3JlYXRlSFRNTCgnJykgOiAnJztcblxuICAgIHZhciBfZG9jdW1lbnQgPSBkb2N1bWVudCxcbiAgICAgICAgaW1wbGVtZW50YXRpb24gPSBfZG9jdW1lbnQuaW1wbGVtZW50YXRpb24sXG4gICAgICAgIGNyZWF0ZU5vZGVJdGVyYXRvciA9IF9kb2N1bWVudC5jcmVhdGVOb2RlSXRlcmF0b3IsXG4gICAgICAgIGNyZWF0ZURvY3VtZW50RnJhZ21lbnQgPSBfZG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCxcbiAgICAgICAgZ2V0RWxlbWVudHNCeVRhZ05hbWUgPSBfZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWU7XG4gICAgdmFyIGltcG9ydE5vZGUgPSBvcmlnaW5hbERvY3VtZW50LmltcG9ydE5vZGU7XG5cblxuICAgIHZhciBkb2N1bWVudE1vZGUgPSB7fTtcbiAgICB0cnkge1xuICAgICAgZG9jdW1lbnRNb2RlID0gY2xvbmUoZG9jdW1lbnQpLmRvY3VtZW50TW9kZSA/IGRvY3VtZW50LmRvY3VtZW50TW9kZSA6IHt9O1xuICAgIH0gY2F0Y2ggKF8pIHt9XG5cbiAgICB2YXIgaG9va3MgPSB7fTtcblxuICAgIC8qKlxuICAgICAqIEV4cG9zZSB3aGV0aGVyIHRoaXMgYnJvd3NlciBzdXBwb3J0cyBydW5uaW5nIHRoZSBmdWxsIERPTVB1cmlmeS5cbiAgICAgKi9cbiAgICBET01QdXJpZnkuaXNTdXBwb3J0ZWQgPSB0eXBlb2YgZ2V0UGFyZW50Tm9kZSA9PT0gJ2Z1bmN0aW9uJyAmJiBpbXBsZW1lbnRhdGlvbiAmJiB0eXBlb2YgaW1wbGVtZW50YXRpb24uY3JlYXRlSFRNTERvY3VtZW50ICE9PSAndW5kZWZpbmVkJyAmJiBkb2N1bWVudE1vZGUgIT09IDk7XG5cbiAgICB2YXIgTVVTVEFDSEVfRVhQUiQkMSA9IE1VU1RBQ0hFX0VYUFIsXG4gICAgICAgIEVSQl9FWFBSJCQxID0gRVJCX0VYUFIsXG4gICAgICAgIERBVEFfQVRUUiQkMSA9IERBVEFfQVRUUixcbiAgICAgICAgQVJJQV9BVFRSJCQxID0gQVJJQV9BVFRSLFxuICAgICAgICBJU19TQ1JJUFRfT1JfREFUQSQkMSA9IElTX1NDUklQVF9PUl9EQVRBLFxuICAgICAgICBBVFRSX1dISVRFU1BBQ0UkJDEgPSBBVFRSX1dISVRFU1BBQ0U7XG4gICAgdmFyIElTX0FMTE9XRURfVVJJJCQxID0gSVNfQUxMT1dFRF9VUkk7XG5cbiAgICAvKipcbiAgICAgKiBXZSBjb25zaWRlciB0aGUgZWxlbWVudHMgYW5kIGF0dHJpYnV0ZXMgYmVsb3cgdG8gYmUgc2FmZS4gSWRlYWxseVxuICAgICAqIGRvbid0IGFkZCBhbnkgbmV3IG9uZXMgYnV0IGZlZWwgZnJlZSB0byByZW1vdmUgdW53YW50ZWQgb25lcy5cbiAgICAgKi9cblxuICAgIC8qIGFsbG93ZWQgZWxlbWVudCBuYW1lcyAqL1xuXG4gICAgdmFyIEFMTE9XRURfVEFHUyA9IG51bGw7XG4gICAgdmFyIERFRkFVTFRfQUxMT1dFRF9UQUdTID0gYWRkVG9TZXQoe30sIFtdLmNvbmNhdChfdG9Db25zdW1hYmxlQXJyYXkkMShodG1sKSwgX3RvQ29uc3VtYWJsZUFycmF5JDEoc3ZnKSwgX3RvQ29uc3VtYWJsZUFycmF5JDEoc3ZnRmlsdGVycyksIF90b0NvbnN1bWFibGVBcnJheSQxKG1hdGhNbCksIF90b0NvbnN1bWFibGVBcnJheSQxKHRleHQpKSk7XG5cbiAgICAvKiBBbGxvd2VkIGF0dHJpYnV0ZSBuYW1lcyAqL1xuICAgIHZhciBBTExPV0VEX0FUVFIgPSBudWxsO1xuICAgIHZhciBERUZBVUxUX0FMTE9XRURfQVRUUiA9IGFkZFRvU2V0KHt9LCBbXS5jb25jYXQoX3RvQ29uc3VtYWJsZUFycmF5JDEoaHRtbCQxKSwgX3RvQ29uc3VtYWJsZUFycmF5JDEoc3ZnJDEpLCBfdG9Db25zdW1hYmxlQXJyYXkkMShtYXRoTWwkMSksIF90b0NvbnN1bWFibGVBcnJheSQxKHhtbCkpKTtcblxuICAgIC8qXG4gICAgICogQ29uZmlndXJlIGhvdyBET01QVXJpZnkgc2hvdWxkIGhhbmRsZSBjdXN0b20gZWxlbWVudHMgYW5kIHRoZWlyIGF0dHJpYnV0ZXMgYXMgd2VsbCBhcyBjdXN0b21pemVkIGJ1aWx0LWluIGVsZW1lbnRzLlxuICAgICAqIEBwcm9wZXJ0eSB7UmVnRXhwfEZ1bmN0aW9ufG51bGx9IHRhZ05hbWVDaGVjayBvbmUgb2YgW251bGwsIHJlZ2V4UGF0dGVybiwgcHJlZGljYXRlXS4gRGVmYXVsdDogYG51bGxgIChkaXNhbGxvdyBhbnkgY3VzdG9tIGVsZW1lbnRzKVxuICAgICAqIEBwcm9wZXJ0eSB7UmVnRXhwfEZ1bmN0aW9ufG51bGx9IGF0dHJpYnV0ZU5hbWVDaGVjayBvbmUgb2YgW251bGwsIHJlZ2V4UGF0dGVybiwgcHJlZGljYXRlXS4gRGVmYXVsdDogYG51bGxgIChkaXNhbGxvdyBhbnkgYXR0cmlidXRlcyBub3Qgb24gdGhlIGFsbG93IGxpc3QpXG4gICAgICogQHByb3BlcnR5IHtib29sZWFufSBhbGxvd0N1c3RvbWl6ZWRCdWlsdEluRWxlbWVudHMgYWxsb3cgY3VzdG9tIGVsZW1lbnRzIGRlcml2ZWQgZnJvbSBidWlsdC1pbnMgaWYgdGhleSBwYXNzIENVU1RPTV9FTEVNRU5UX0hBTkRMSU5HLnRhZ05hbWVDaGVjay4gRGVmYXVsdDogYGZhbHNlYC5cbiAgICAgKi9cbiAgICB2YXIgQ1VTVE9NX0VMRU1FTlRfSEFORExJTkcgPSBPYmplY3Quc2VhbChPYmplY3QuY3JlYXRlKG51bGwsIHtcbiAgICAgIHRhZ05hbWVDaGVjazoge1xuICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiBmYWxzZSxcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgdmFsdWU6IG51bGxcbiAgICAgIH0sXG4gICAgICBhdHRyaWJ1dGVOYW1lQ2hlY2s6IHtcbiAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogZmFsc2UsXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIHZhbHVlOiBudWxsXG4gICAgICB9LFxuICAgICAgYWxsb3dDdXN0b21pemVkQnVpbHRJbkVsZW1lbnRzOiB7XG4gICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICBjb25maWd1cmFibGU6IGZhbHNlLFxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICB2YWx1ZTogZmFsc2VcbiAgICAgIH1cbiAgICB9KSk7XG5cbiAgICAvKiBFeHBsaWNpdGx5IGZvcmJpZGRlbiB0YWdzIChvdmVycmlkZXMgQUxMT1dFRF9UQUdTL0FERF9UQUdTKSAqL1xuICAgIHZhciBGT1JCSURfVEFHUyA9IG51bGw7XG5cbiAgICAvKiBFeHBsaWNpdGx5IGZvcmJpZGRlbiBhdHRyaWJ1dGVzIChvdmVycmlkZXMgQUxMT1dFRF9BVFRSL0FERF9BVFRSKSAqL1xuICAgIHZhciBGT1JCSURfQVRUUiA9IG51bGw7XG5cbiAgICAvKiBEZWNpZGUgaWYgQVJJQSBhdHRyaWJ1dGVzIGFyZSBva2F5ICovXG4gICAgdmFyIEFMTE9XX0FSSUFfQVRUUiA9IHRydWU7XG5cbiAgICAvKiBEZWNpZGUgaWYgY3VzdG9tIGRhdGEgYXR0cmlidXRlcyBhcmUgb2theSAqL1xuICAgIHZhciBBTExPV19EQVRBX0FUVFIgPSB0cnVlO1xuXG4gICAgLyogRGVjaWRlIGlmIHVua25vd24gcHJvdG9jb2xzIGFyZSBva2F5ICovXG4gICAgdmFyIEFMTE9XX1VOS05PV05fUFJPVE9DT0xTID0gZmFsc2U7XG5cbiAgICAvKiBPdXRwdXQgc2hvdWxkIGJlIHNhZmUgZm9yIGNvbW1vbiB0ZW1wbGF0ZSBlbmdpbmVzLlxuICAgICAqIFRoaXMgbWVhbnMsIERPTVB1cmlmeSByZW1vdmVzIGRhdGEgYXR0cmlidXRlcywgbXVzdGFjaGVzIGFuZCBFUkJcbiAgICAgKi9cbiAgICB2YXIgU0FGRV9GT1JfVEVNUExBVEVTID0gZmFsc2U7XG5cbiAgICAvKiBEZWNpZGUgaWYgZG9jdW1lbnQgd2l0aCA8aHRtbD4uLi4gc2hvdWxkIGJlIHJldHVybmVkICovXG4gICAgdmFyIFdIT0xFX0RPQ1VNRU5UID0gZmFsc2U7XG5cbiAgICAvKiBUcmFjayB3aGV0aGVyIGNvbmZpZyBpcyBhbHJlYWR5IHNldCBvbiB0aGlzIGluc3RhbmNlIG9mIERPTVB1cmlmeS4gKi9cbiAgICB2YXIgU0VUX0NPTkZJRyA9IGZhbHNlO1xuXG4gICAgLyogRGVjaWRlIGlmIGFsbCBlbGVtZW50cyAoZS5nLiBzdHlsZSwgc2NyaXB0KSBtdXN0IGJlIGNoaWxkcmVuIG9mXG4gICAgICogZG9jdW1lbnQuYm9keS4gQnkgZGVmYXVsdCwgYnJvd3NlcnMgbWlnaHQgbW92ZSB0aGVtIHRvIGRvY3VtZW50LmhlYWQgKi9cbiAgICB2YXIgRk9SQ0VfQk9EWSA9IGZhbHNlO1xuXG4gICAgLyogRGVjaWRlIGlmIGEgRE9NIGBIVE1MQm9keUVsZW1lbnRgIHNob3VsZCBiZSByZXR1cm5lZCwgaW5zdGVhZCBvZiBhIGh0bWxcbiAgICAgKiBzdHJpbmcgKG9yIGEgVHJ1c3RlZEhUTUwgb2JqZWN0IGlmIFRydXN0ZWQgVHlwZXMgYXJlIHN1cHBvcnRlZCkuXG4gICAgICogSWYgYFdIT0xFX0RPQ1VNRU5UYCBpcyBlbmFibGVkIGEgYEhUTUxIdG1sRWxlbWVudGAgd2lsbCBiZSByZXR1cm5lZCBpbnN0ZWFkXG4gICAgICovXG4gICAgdmFyIFJFVFVSTl9ET00gPSBmYWxzZTtcblxuICAgIC8qIERlY2lkZSBpZiBhIERPTSBgRG9jdW1lbnRGcmFnbWVudGAgc2hvdWxkIGJlIHJldHVybmVkLCBpbnN0ZWFkIG9mIGEgaHRtbFxuICAgICAqIHN0cmluZyAgKG9yIGEgVHJ1c3RlZEhUTUwgb2JqZWN0IGlmIFRydXN0ZWQgVHlwZXMgYXJlIHN1cHBvcnRlZCkgKi9cbiAgICB2YXIgUkVUVVJOX0RPTV9GUkFHTUVOVCA9IGZhbHNlO1xuXG4gICAgLyogVHJ5IHRvIHJldHVybiBhIFRydXN0ZWQgVHlwZSBvYmplY3QgaW5zdGVhZCBvZiBhIHN0cmluZywgcmV0dXJuIGEgc3RyaW5nIGluXG4gICAgICogY2FzZSBUcnVzdGVkIFR5cGVzIGFyZSBub3Qgc3VwcG9ydGVkICAqL1xuICAgIHZhciBSRVRVUk5fVFJVU1RFRF9UWVBFID0gZmFsc2U7XG5cbiAgICAvKiBPdXRwdXQgc2hvdWxkIGJlIGZyZWUgZnJvbSBET00gY2xvYmJlcmluZyBhdHRhY2tzPyAqL1xuICAgIHZhciBTQU5JVElaRV9ET00gPSB0cnVlO1xuXG4gICAgLyogS2VlcCBlbGVtZW50IGNvbnRlbnQgd2hlbiByZW1vdmluZyBlbGVtZW50PyAqL1xuICAgIHZhciBLRUVQX0NPTlRFTlQgPSB0cnVlO1xuXG4gICAgLyogSWYgYSBgTm9kZWAgaXMgcGFzc2VkIHRvIHNhbml0aXplKCksIHRoZW4gcGVyZm9ybXMgc2FuaXRpemF0aW9uIGluLXBsYWNlIGluc3RlYWRcbiAgICAgKiBvZiBpbXBvcnRpbmcgaXQgaW50byBhIG5ldyBEb2N1bWVudCBhbmQgcmV0dXJuaW5nIGEgc2FuaXRpemVkIGNvcHkgKi9cbiAgICB2YXIgSU5fUExBQ0UgPSBmYWxzZTtcblxuICAgIC8qIEFsbG93IHVzYWdlIG9mIHByb2ZpbGVzIGxpa2UgaHRtbCwgc3ZnIGFuZCBtYXRoTWwgKi9cbiAgICB2YXIgVVNFX1BST0ZJTEVTID0ge307XG5cbiAgICAvKiBUYWdzIHRvIGlnbm9yZSBjb250ZW50IG9mIHdoZW4gS0VFUF9DT05URU5UIGlzIHRydWUgKi9cbiAgICB2YXIgRk9SQklEX0NPTlRFTlRTID0gbnVsbDtcbiAgICB2YXIgREVGQVVMVF9GT1JCSURfQ09OVEVOVFMgPSBhZGRUb1NldCh7fSwgWydhbm5vdGF0aW9uLXhtbCcsICdhdWRpbycsICdjb2xncm91cCcsICdkZXNjJywgJ2ZvcmVpZ25vYmplY3QnLCAnaGVhZCcsICdpZnJhbWUnLCAnbWF0aCcsICdtaScsICdtbicsICdtbycsICdtcycsICdtdGV4dCcsICdub2VtYmVkJywgJ25vZnJhbWVzJywgJ25vc2NyaXB0JywgJ3BsYWludGV4dCcsICdzY3JpcHQnLCAnc3R5bGUnLCAnc3ZnJywgJ3RlbXBsYXRlJywgJ3RoZWFkJywgJ3RpdGxlJywgJ3ZpZGVvJywgJ3htcCddKTtcblxuICAgIC8qIFRhZ3MgdGhhdCBhcmUgc2FmZSBmb3IgZGF0YTogVVJJcyAqL1xuICAgIHZhciBEQVRBX1VSSV9UQUdTID0gbnVsbDtcbiAgICB2YXIgREVGQVVMVF9EQVRBX1VSSV9UQUdTID0gYWRkVG9TZXQoe30sIFsnYXVkaW8nLCAndmlkZW8nLCAnaW1nJywgJ3NvdXJjZScsICdpbWFnZScsICd0cmFjayddKTtcblxuICAgIC8qIEF0dHJpYnV0ZXMgc2FmZSBmb3IgdmFsdWVzIGxpa2UgXCJqYXZhc2NyaXB0OlwiICovXG4gICAgdmFyIFVSSV9TQUZFX0FUVFJJQlVURVMgPSBudWxsO1xuICAgIHZhciBERUZBVUxUX1VSSV9TQUZFX0FUVFJJQlVURVMgPSBhZGRUb1NldCh7fSwgWydhbHQnLCAnY2xhc3MnLCAnZm9yJywgJ2lkJywgJ2xhYmVsJywgJ25hbWUnLCAncGF0dGVybicsICdwbGFjZWhvbGRlcicsICdyb2xlJywgJ3N1bW1hcnknLCAndGl0bGUnLCAndmFsdWUnLCAnc3R5bGUnLCAneG1sbnMnXSk7XG5cbiAgICB2YXIgTUFUSE1MX05BTUVTUEFDRSA9ICdodHRwOi8vd3d3LnczLm9yZy8xOTk4L01hdGgvTWF0aE1MJztcbiAgICB2YXIgU1ZHX05BTUVTUEFDRSA9ICdodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Zyc7XG4gICAgdmFyIEhUTUxfTkFNRVNQQUNFID0gJ2h0dHA6Ly93d3cudzMub3JnLzE5OTkveGh0bWwnO1xuICAgIC8qIERvY3VtZW50IG5hbWVzcGFjZSAqL1xuICAgIHZhciBOQU1FU1BBQ0UgPSBIVE1MX05BTUVTUEFDRTtcbiAgICB2YXIgSVNfRU1QVFlfSU5QVVQgPSBmYWxzZTtcblxuICAgIC8qIFBhcnNpbmcgb2Ygc3RyaWN0IFhIVE1MIGRvY3VtZW50cyAqL1xuICAgIHZhciBQQVJTRVJfTUVESUFfVFlQRSA9IHZvaWQgMDtcbiAgICB2YXIgU1VQUE9SVEVEX1BBUlNFUl9NRURJQV9UWVBFUyA9IFsnYXBwbGljYXRpb24veGh0bWwreG1sJywgJ3RleHQvaHRtbCddO1xuICAgIHZhciBERUZBVUxUX1BBUlNFUl9NRURJQV9UWVBFID0gJ3RleHQvaHRtbCc7XG4gICAgdmFyIHRyYW5zZm9ybUNhc2VGdW5jID0gdm9pZCAwO1xuXG4gICAgLyogS2VlcCBhIHJlZmVyZW5jZSB0byBjb25maWcgdG8gcGFzcyB0byBob29rcyAqL1xuICAgIHZhciBDT05GSUcgPSBudWxsO1xuXG4gICAgLyogSWRlYWxseSwgZG8gbm90IHRvdWNoIGFueXRoaW5nIGJlbG93IHRoaXMgbGluZSAqL1xuICAgIC8qIF9fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX18gKi9cblxuICAgIHZhciBmb3JtRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2Zvcm0nKTtcblxuICAgIHZhciBpc1JlZ2V4T3JGdW5jdGlvbiA9IGZ1bmN0aW9uIGlzUmVnZXhPckZ1bmN0aW9uKHRlc3RWYWx1ZSkge1xuICAgICAgcmV0dXJuIHRlc3RWYWx1ZSBpbnN0YW5jZW9mIFJlZ0V4cCB8fCB0ZXN0VmFsdWUgaW5zdGFuY2VvZiBGdW5jdGlvbjtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogX3BhcnNlQ29uZmlnXG4gICAgICpcbiAgICAgKiBAcGFyYW0gIHtPYmplY3R9IGNmZyBvcHRpb25hbCBjb25maWcgbGl0ZXJhbFxuICAgICAqL1xuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBjb21wbGV4aXR5XG4gICAgdmFyIF9wYXJzZUNvbmZpZyA9IGZ1bmN0aW9uIF9wYXJzZUNvbmZpZyhjZmcpIHtcbiAgICAgIGlmIChDT05GSUcgJiYgQ09ORklHID09PSBjZmcpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICAvKiBTaGllbGQgY29uZmlndXJhdGlvbiBvYmplY3QgZnJvbSB0YW1wZXJpbmcgKi9cbiAgICAgIGlmICghY2ZnIHx8ICh0eXBlb2YgY2ZnID09PSAndW5kZWZpbmVkJyA/ICd1bmRlZmluZWQnIDogX3R5cGVvZihjZmcpKSAhPT0gJ29iamVjdCcpIHtcbiAgICAgICAgY2ZnID0ge307XG4gICAgICB9XG5cbiAgICAgIC8qIFNoaWVsZCBjb25maWd1cmF0aW9uIG9iamVjdCBmcm9tIHByb3RvdHlwZSBwb2xsdXRpb24gKi9cbiAgICAgIGNmZyA9IGNsb25lKGNmZyk7XG5cbiAgICAgIC8qIFNldCBjb25maWd1cmF0aW9uIHBhcmFtZXRlcnMgKi9cbiAgICAgIEFMTE9XRURfVEFHUyA9ICdBTExPV0VEX1RBR1MnIGluIGNmZyA/IGFkZFRvU2V0KHt9LCBjZmcuQUxMT1dFRF9UQUdTKSA6IERFRkFVTFRfQUxMT1dFRF9UQUdTO1xuICAgICAgQUxMT1dFRF9BVFRSID0gJ0FMTE9XRURfQVRUUicgaW4gY2ZnID8gYWRkVG9TZXQoe30sIGNmZy5BTExPV0VEX0FUVFIpIDogREVGQVVMVF9BTExPV0VEX0FUVFI7XG4gICAgICBVUklfU0FGRV9BVFRSSUJVVEVTID0gJ0FERF9VUklfU0FGRV9BVFRSJyBpbiBjZmcgPyBhZGRUb1NldChjbG9uZShERUZBVUxUX1VSSV9TQUZFX0FUVFJJQlVURVMpLCBjZmcuQUREX1VSSV9TQUZFX0FUVFIpIDogREVGQVVMVF9VUklfU0FGRV9BVFRSSUJVVEVTO1xuICAgICAgREFUQV9VUklfVEFHUyA9ICdBRERfREFUQV9VUklfVEFHUycgaW4gY2ZnID8gYWRkVG9TZXQoY2xvbmUoREVGQVVMVF9EQVRBX1VSSV9UQUdTKSwgY2ZnLkFERF9EQVRBX1VSSV9UQUdTKSA6IERFRkFVTFRfREFUQV9VUklfVEFHUztcbiAgICAgIEZPUkJJRF9DT05URU5UUyA9ICdGT1JCSURfQ09OVEVOVFMnIGluIGNmZyA/IGFkZFRvU2V0KHt9LCBjZmcuRk9SQklEX0NPTlRFTlRTKSA6IERFRkFVTFRfRk9SQklEX0NPTlRFTlRTO1xuICAgICAgRk9SQklEX1RBR1MgPSAnRk9SQklEX1RBR1MnIGluIGNmZyA/IGFkZFRvU2V0KHt9LCBjZmcuRk9SQklEX1RBR1MpIDoge307XG4gICAgICBGT1JCSURfQVRUUiA9ICdGT1JCSURfQVRUUicgaW4gY2ZnID8gYWRkVG9TZXQoe30sIGNmZy5GT1JCSURfQVRUUikgOiB7fTtcbiAgICAgIFVTRV9QUk9GSUxFUyA9ICdVU0VfUFJPRklMRVMnIGluIGNmZyA/IGNmZy5VU0VfUFJPRklMRVMgOiBmYWxzZTtcbiAgICAgIEFMTE9XX0FSSUFfQVRUUiA9IGNmZy5BTExPV19BUklBX0FUVFIgIT09IGZhbHNlOyAvLyBEZWZhdWx0IHRydWVcbiAgICAgIEFMTE9XX0RBVEFfQVRUUiA9IGNmZy5BTExPV19EQVRBX0FUVFIgIT09IGZhbHNlOyAvLyBEZWZhdWx0IHRydWVcbiAgICAgIEFMTE9XX1VOS05PV05fUFJPVE9DT0xTID0gY2ZnLkFMTE9XX1VOS05PV05fUFJPVE9DT0xTIHx8IGZhbHNlOyAvLyBEZWZhdWx0IGZhbHNlXG4gICAgICBTQUZFX0ZPUl9URU1QTEFURVMgPSBjZmcuU0FGRV9GT1JfVEVNUExBVEVTIHx8IGZhbHNlOyAvLyBEZWZhdWx0IGZhbHNlXG4gICAgICBXSE9MRV9ET0NVTUVOVCA9IGNmZy5XSE9MRV9ET0NVTUVOVCB8fCBmYWxzZTsgLy8gRGVmYXVsdCBmYWxzZVxuICAgICAgUkVUVVJOX0RPTSA9IGNmZy5SRVRVUk5fRE9NIHx8IGZhbHNlOyAvLyBEZWZhdWx0IGZhbHNlXG4gICAgICBSRVRVUk5fRE9NX0ZSQUdNRU5UID0gY2ZnLlJFVFVSTl9ET01fRlJBR01FTlQgfHwgZmFsc2U7IC8vIERlZmF1bHQgZmFsc2VcbiAgICAgIFJFVFVSTl9UUlVTVEVEX1RZUEUgPSBjZmcuUkVUVVJOX1RSVVNURURfVFlQRSB8fCBmYWxzZTsgLy8gRGVmYXVsdCBmYWxzZVxuICAgICAgRk9SQ0VfQk9EWSA9IGNmZy5GT1JDRV9CT0RZIHx8IGZhbHNlOyAvLyBEZWZhdWx0IGZhbHNlXG4gICAgICBTQU5JVElaRV9ET00gPSBjZmcuU0FOSVRJWkVfRE9NICE9PSBmYWxzZTsgLy8gRGVmYXVsdCB0cnVlXG4gICAgICBLRUVQX0NPTlRFTlQgPSBjZmcuS0VFUF9DT05URU5UICE9PSBmYWxzZTsgLy8gRGVmYXVsdCB0cnVlXG4gICAgICBJTl9QTEFDRSA9IGNmZy5JTl9QTEFDRSB8fCBmYWxzZTsgLy8gRGVmYXVsdCBmYWxzZVxuICAgICAgSVNfQUxMT1dFRF9VUkkkJDEgPSBjZmcuQUxMT1dFRF9VUklfUkVHRVhQIHx8IElTX0FMTE9XRURfVVJJJCQxO1xuICAgICAgTkFNRVNQQUNFID0gY2ZnLk5BTUVTUEFDRSB8fCBIVE1MX05BTUVTUEFDRTtcbiAgICAgIGlmIChjZmcuQ1VTVE9NX0VMRU1FTlRfSEFORExJTkcgJiYgaXNSZWdleE9yRnVuY3Rpb24oY2ZnLkNVU1RPTV9FTEVNRU5UX0hBTkRMSU5HLnRhZ05hbWVDaGVjaykpIHtcbiAgICAgICAgQ1VTVE9NX0VMRU1FTlRfSEFORExJTkcudGFnTmFtZUNoZWNrID0gY2ZnLkNVU1RPTV9FTEVNRU5UX0hBTkRMSU5HLnRhZ05hbWVDaGVjaztcbiAgICAgIH1cblxuICAgICAgaWYgKGNmZy5DVVNUT01fRUxFTUVOVF9IQU5ETElORyAmJiBpc1JlZ2V4T3JGdW5jdGlvbihjZmcuQ1VTVE9NX0VMRU1FTlRfSEFORExJTkcuYXR0cmlidXRlTmFtZUNoZWNrKSkge1xuICAgICAgICBDVVNUT01fRUxFTUVOVF9IQU5ETElORy5hdHRyaWJ1dGVOYW1lQ2hlY2sgPSBjZmcuQ1VTVE9NX0VMRU1FTlRfSEFORExJTkcuYXR0cmlidXRlTmFtZUNoZWNrO1xuICAgICAgfVxuXG4gICAgICBpZiAoY2ZnLkNVU1RPTV9FTEVNRU5UX0hBTkRMSU5HICYmIHR5cGVvZiBjZmcuQ1VTVE9NX0VMRU1FTlRfSEFORExJTkcuYWxsb3dDdXN0b21pemVkQnVpbHRJbkVsZW1lbnRzID09PSAnYm9vbGVhbicpIHtcbiAgICAgICAgQ1VTVE9NX0VMRU1FTlRfSEFORExJTkcuYWxsb3dDdXN0b21pemVkQnVpbHRJbkVsZW1lbnRzID0gY2ZnLkNVU1RPTV9FTEVNRU5UX0hBTkRMSU5HLmFsbG93Q3VzdG9taXplZEJ1aWx0SW5FbGVtZW50cztcbiAgICAgIH1cblxuICAgICAgUEFSU0VSX01FRElBX1RZUEUgPVxuICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIHVuaWNvcm4vcHJlZmVyLWluY2x1ZGVzXG4gICAgICBTVVBQT1JURURfUEFSU0VSX01FRElBX1RZUEVTLmluZGV4T2YoY2ZnLlBBUlNFUl9NRURJQV9UWVBFKSA9PT0gLTEgPyBQQVJTRVJfTUVESUFfVFlQRSA9IERFRkFVTFRfUEFSU0VSX01FRElBX1RZUEUgOiBQQVJTRVJfTUVESUFfVFlQRSA9IGNmZy5QQVJTRVJfTUVESUFfVFlQRTtcblxuICAgICAgLy8gSFRNTCB0YWdzIGFuZCBhdHRyaWJ1dGVzIGFyZSBub3QgY2FzZS1zZW5zaXRpdmUsIGNvbnZlcnRpbmcgdG8gbG93ZXJjYXNlLiBLZWVwaW5nIFhIVE1MIGFzIGlzLlxuICAgICAgdHJhbnNmb3JtQ2FzZUZ1bmMgPSBQQVJTRVJfTUVESUFfVFlQRSA9PT0gJ2FwcGxpY2F0aW9uL3hodG1sK3htbCcgPyBmdW5jdGlvbiAoeCkge1xuICAgICAgICByZXR1cm4geDtcbiAgICAgIH0gOiBzdHJpbmdUb0xvd2VyQ2FzZTtcblxuICAgICAgaWYgKFNBRkVfRk9SX1RFTVBMQVRFUykge1xuICAgICAgICBBTExPV19EQVRBX0FUVFIgPSBmYWxzZTtcbiAgICAgIH1cblxuICAgICAgaWYgKFJFVFVSTl9ET01fRlJBR01FTlQpIHtcbiAgICAgICAgUkVUVVJOX0RPTSA9IHRydWU7XG4gICAgICB9XG5cbiAgICAgIC8qIFBhcnNlIHByb2ZpbGUgaW5mbyAqL1xuICAgICAgaWYgKFVTRV9QUk9GSUxFUykge1xuICAgICAgICBBTExPV0VEX1RBR1MgPSBhZGRUb1NldCh7fSwgW10uY29uY2F0KF90b0NvbnN1bWFibGVBcnJheSQxKHRleHQpKSk7XG4gICAgICAgIEFMTE9XRURfQVRUUiA9IFtdO1xuICAgICAgICBpZiAoVVNFX1BST0ZJTEVTLmh0bWwgPT09IHRydWUpIHtcbiAgICAgICAgICBhZGRUb1NldChBTExPV0VEX1RBR1MsIGh0bWwpO1xuICAgICAgICAgIGFkZFRvU2V0KEFMTE9XRURfQVRUUiwgaHRtbCQxKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChVU0VfUFJPRklMRVMuc3ZnID09PSB0cnVlKSB7XG4gICAgICAgICAgYWRkVG9TZXQoQUxMT1dFRF9UQUdTLCBzdmcpO1xuICAgICAgICAgIGFkZFRvU2V0KEFMTE9XRURfQVRUUiwgc3ZnJDEpO1xuICAgICAgICAgIGFkZFRvU2V0KEFMTE9XRURfQVRUUiwgeG1sKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChVU0VfUFJPRklMRVMuc3ZnRmlsdGVycyA9PT0gdHJ1ZSkge1xuICAgICAgICAgIGFkZFRvU2V0KEFMTE9XRURfVEFHUywgc3ZnRmlsdGVycyk7XG4gICAgICAgICAgYWRkVG9TZXQoQUxMT1dFRF9BVFRSLCBzdmckMSk7XG4gICAgICAgICAgYWRkVG9TZXQoQUxMT1dFRF9BVFRSLCB4bWwpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKFVTRV9QUk9GSUxFUy5tYXRoTWwgPT09IHRydWUpIHtcbiAgICAgICAgICBhZGRUb1NldChBTExPV0VEX1RBR1MsIG1hdGhNbCk7XG4gICAgICAgICAgYWRkVG9TZXQoQUxMT1dFRF9BVFRSLCBtYXRoTWwkMSk7XG4gICAgICAgICAgYWRkVG9TZXQoQUxMT1dFRF9BVFRSLCB4bWwpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8qIE1lcmdlIGNvbmZpZ3VyYXRpb24gcGFyYW1ldGVycyAqL1xuICAgICAgaWYgKGNmZy5BRERfVEFHUykge1xuICAgICAgICBpZiAoQUxMT1dFRF9UQUdTID09PSBERUZBVUxUX0FMTE9XRURfVEFHUykge1xuICAgICAgICAgIEFMTE9XRURfVEFHUyA9IGNsb25lKEFMTE9XRURfVEFHUyk7XG4gICAgICAgIH1cblxuICAgICAgICBhZGRUb1NldChBTExPV0VEX1RBR1MsIGNmZy5BRERfVEFHUyk7XG4gICAgICB9XG5cbiAgICAgIGlmIChjZmcuQUREX0FUVFIpIHtcbiAgICAgICAgaWYgKEFMTE9XRURfQVRUUiA9PT0gREVGQVVMVF9BTExPV0VEX0FUVFIpIHtcbiAgICAgICAgICBBTExPV0VEX0FUVFIgPSBjbG9uZShBTExPV0VEX0FUVFIpO1xuICAgICAgICB9XG5cbiAgICAgICAgYWRkVG9TZXQoQUxMT1dFRF9BVFRSLCBjZmcuQUREX0FUVFIpO1xuICAgICAgfVxuXG4gICAgICBpZiAoY2ZnLkFERF9VUklfU0FGRV9BVFRSKSB7XG4gICAgICAgIGFkZFRvU2V0KFVSSV9TQUZFX0FUVFJJQlVURVMsIGNmZy5BRERfVVJJX1NBRkVfQVRUUik7XG4gICAgICB9XG5cbiAgICAgIGlmIChjZmcuRk9SQklEX0NPTlRFTlRTKSB7XG4gICAgICAgIGlmIChGT1JCSURfQ09OVEVOVFMgPT09IERFRkFVTFRfRk9SQklEX0NPTlRFTlRTKSB7XG4gICAgICAgICAgRk9SQklEX0NPTlRFTlRTID0gY2xvbmUoRk9SQklEX0NPTlRFTlRTKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGFkZFRvU2V0KEZPUkJJRF9DT05URU5UUywgY2ZnLkZPUkJJRF9DT05URU5UUyk7XG4gICAgICB9XG5cbiAgICAgIC8qIEFkZCAjdGV4dCBpbiBjYXNlIEtFRVBfQ09OVEVOVCBpcyBzZXQgdG8gdHJ1ZSAqL1xuICAgICAgaWYgKEtFRVBfQ09OVEVOVCkge1xuICAgICAgICBBTExPV0VEX1RBR1NbJyN0ZXh0J10gPSB0cnVlO1xuICAgICAgfVxuXG4gICAgICAvKiBBZGQgaHRtbCwgaGVhZCBhbmQgYm9keSB0byBBTExPV0VEX1RBR1MgaW4gY2FzZSBXSE9MRV9ET0NVTUVOVCBpcyB0cnVlICovXG4gICAgICBpZiAoV0hPTEVfRE9DVU1FTlQpIHtcbiAgICAgICAgYWRkVG9TZXQoQUxMT1dFRF9UQUdTLCBbJ2h0bWwnLCAnaGVhZCcsICdib2R5J10pO1xuICAgICAgfVxuXG4gICAgICAvKiBBZGQgdGJvZHkgdG8gQUxMT1dFRF9UQUdTIGluIGNhc2UgdGFibGVzIGFyZSBwZXJtaXR0ZWQsIHNlZSAjMjg2LCAjMzY1ICovXG4gICAgICBpZiAoQUxMT1dFRF9UQUdTLnRhYmxlKSB7XG4gICAgICAgIGFkZFRvU2V0KEFMTE9XRURfVEFHUywgWyd0Ym9keSddKTtcbiAgICAgICAgZGVsZXRlIEZPUkJJRF9UQUdTLnRib2R5O1xuICAgICAgfVxuXG4gICAgICAvLyBQcmV2ZW50IGZ1cnRoZXIgbWFuaXB1bGF0aW9uIG9mIGNvbmZpZ3VyYXRpb24uXG4gICAgICAvLyBOb3QgYXZhaWxhYmxlIGluIElFOCwgU2FmYXJpIDUsIGV0Yy5cbiAgICAgIGlmIChmcmVlemUpIHtcbiAgICAgICAgZnJlZXplKGNmZyk7XG4gICAgICB9XG5cbiAgICAgIENPTkZJRyA9IGNmZztcbiAgICB9O1xuXG4gICAgdmFyIE1BVEhNTF9URVhUX0lOVEVHUkFUSU9OX1BPSU5UUyA9IGFkZFRvU2V0KHt9LCBbJ21pJywgJ21vJywgJ21uJywgJ21zJywgJ210ZXh0J10pO1xuXG4gICAgdmFyIEhUTUxfSU5URUdSQVRJT05fUE9JTlRTID0gYWRkVG9TZXQoe30sIFsnZm9yZWlnbm9iamVjdCcsICdkZXNjJywgJ3RpdGxlJywgJ2Fubm90YXRpb24teG1sJ10pO1xuXG4gICAgLyogS2VlcCB0cmFjayBvZiBhbGwgcG9zc2libGUgU1ZHIGFuZCBNYXRoTUwgdGFnc1xuICAgICAqIHNvIHRoYXQgd2UgY2FuIHBlcmZvcm0gdGhlIG5hbWVzcGFjZSBjaGVja3NcbiAgICAgKiBjb3JyZWN0bHkuICovXG4gICAgdmFyIEFMTF9TVkdfVEFHUyA9IGFkZFRvU2V0KHt9LCBzdmcpO1xuICAgIGFkZFRvU2V0KEFMTF9TVkdfVEFHUywgc3ZnRmlsdGVycyk7XG4gICAgYWRkVG9TZXQoQUxMX1NWR19UQUdTLCBzdmdEaXNhbGxvd2VkKTtcblxuICAgIHZhciBBTExfTUFUSE1MX1RBR1MgPSBhZGRUb1NldCh7fSwgbWF0aE1sKTtcbiAgICBhZGRUb1NldChBTExfTUFUSE1MX1RBR1MsIG1hdGhNbERpc2FsbG93ZWQpO1xuXG4gICAgLyoqXG4gICAgICpcbiAgICAgKlxuICAgICAqIEBwYXJhbSAge0VsZW1lbnR9IGVsZW1lbnQgYSBET00gZWxlbWVudCB3aG9zZSBuYW1lc3BhY2UgaXMgYmVpbmcgY2hlY2tlZFxuICAgICAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm4gZmFsc2UgaWYgdGhlIGVsZW1lbnQgaGFzIGFcbiAgICAgKiAgbmFtZXNwYWNlIHRoYXQgYSBzcGVjLWNvbXBsaWFudCBwYXJzZXIgd291bGQgbmV2ZXJcbiAgICAgKiAgcmV0dXJuLiBSZXR1cm4gdHJ1ZSBvdGhlcndpc2UuXG4gICAgICovXG4gICAgdmFyIF9jaGVja1ZhbGlkTmFtZXNwYWNlID0gZnVuY3Rpb24gX2NoZWNrVmFsaWROYW1lc3BhY2UoZWxlbWVudCkge1xuICAgICAgdmFyIHBhcmVudCA9IGdldFBhcmVudE5vZGUoZWxlbWVudCk7XG5cbiAgICAgIC8vIEluIEpTRE9NLCBpZiB3ZSdyZSBpbnNpZGUgc2hhZG93IERPTSwgdGhlbiBwYXJlbnROb2RlXG4gICAgICAvLyBjYW4gYmUgbnVsbC4gV2UganVzdCBzaW11bGF0ZSBwYXJlbnQgaW4gdGhpcyBjYXNlLlxuICAgICAgaWYgKCFwYXJlbnQgfHwgIXBhcmVudC50YWdOYW1lKSB7XG4gICAgICAgIHBhcmVudCA9IHtcbiAgICAgICAgICBuYW1lc3BhY2VVUkk6IEhUTUxfTkFNRVNQQUNFLFxuICAgICAgICAgIHRhZ05hbWU6ICd0ZW1wbGF0ZSdcbiAgICAgICAgfTtcbiAgICAgIH1cblxuICAgICAgdmFyIHRhZ05hbWUgPSBzdHJpbmdUb0xvd2VyQ2FzZShlbGVtZW50LnRhZ05hbWUpO1xuICAgICAgdmFyIHBhcmVudFRhZ05hbWUgPSBzdHJpbmdUb0xvd2VyQ2FzZShwYXJlbnQudGFnTmFtZSk7XG5cbiAgICAgIGlmIChlbGVtZW50Lm5hbWVzcGFjZVVSSSA9PT0gU1ZHX05BTUVTUEFDRSkge1xuICAgICAgICAvLyBUaGUgb25seSB3YXkgdG8gc3dpdGNoIGZyb20gSFRNTCBuYW1lc3BhY2UgdG8gU1ZHXG4gICAgICAgIC8vIGlzIHZpYSA8c3ZnPi4gSWYgaXQgaGFwcGVucyB2aWEgYW55IG90aGVyIHRhZywgdGhlblxuICAgICAgICAvLyBpdCBzaG91bGQgYmUga2lsbGVkLlxuICAgICAgICBpZiAocGFyZW50Lm5hbWVzcGFjZVVSSSA9PT0gSFRNTF9OQU1FU1BBQ0UpIHtcbiAgICAgICAgICByZXR1cm4gdGFnTmFtZSA9PT0gJ3N2Zyc7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBUaGUgb25seSB3YXkgdG8gc3dpdGNoIGZyb20gTWF0aE1MIHRvIFNWRyBpcyB2aWFcbiAgICAgICAgLy8gc3ZnIGlmIHBhcmVudCBpcyBlaXRoZXIgPGFubm90YXRpb24teG1sPiBvciBNYXRoTUxcbiAgICAgICAgLy8gdGV4dCBpbnRlZ3JhdGlvbiBwb2ludHMuXG4gICAgICAgIGlmIChwYXJlbnQubmFtZXNwYWNlVVJJID09PSBNQVRITUxfTkFNRVNQQUNFKSB7XG4gICAgICAgICAgcmV0dXJuIHRhZ05hbWUgPT09ICdzdmcnICYmIChwYXJlbnRUYWdOYW1lID09PSAnYW5ub3RhdGlvbi14bWwnIHx8IE1BVEhNTF9URVhUX0lOVEVHUkFUSU9OX1BPSU5UU1twYXJlbnRUYWdOYW1lXSk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBXZSBvbmx5IGFsbG93IGVsZW1lbnRzIHRoYXQgYXJlIGRlZmluZWQgaW4gU1ZHXG4gICAgICAgIC8vIHNwZWMuIEFsbCBvdGhlcnMgYXJlIGRpc2FsbG93ZWQgaW4gU1ZHIG5hbWVzcGFjZS5cbiAgICAgICAgcmV0dXJuIEJvb2xlYW4oQUxMX1NWR19UQUdTW3RhZ05hbWVdKTtcbiAgICAgIH1cblxuICAgICAgaWYgKGVsZW1lbnQubmFtZXNwYWNlVVJJID09PSBNQVRITUxfTkFNRVNQQUNFKSB7XG4gICAgICAgIC8vIFRoZSBvbmx5IHdheSB0byBzd2l0Y2ggZnJvbSBIVE1MIG5hbWVzcGFjZSB0byBNYXRoTUxcbiAgICAgICAgLy8gaXMgdmlhIDxtYXRoPi4gSWYgaXQgaGFwcGVucyB2aWEgYW55IG90aGVyIHRhZywgdGhlblxuICAgICAgICAvLyBpdCBzaG91bGQgYmUga2lsbGVkLlxuICAgICAgICBpZiAocGFyZW50Lm5hbWVzcGFjZVVSSSA9PT0gSFRNTF9OQU1FU1BBQ0UpIHtcbiAgICAgICAgICByZXR1cm4gdGFnTmFtZSA9PT0gJ21hdGgnO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gVGhlIG9ubHkgd2F5IHRvIHN3aXRjaCBmcm9tIFNWRyB0byBNYXRoTUwgaXMgdmlhXG4gICAgICAgIC8vIDxtYXRoPiBhbmQgSFRNTCBpbnRlZ3JhdGlvbiBwb2ludHNcbiAgICAgICAgaWYgKHBhcmVudC5uYW1lc3BhY2VVUkkgPT09IFNWR19OQU1FU1BBQ0UpIHtcbiAgICAgICAgICByZXR1cm4gdGFnTmFtZSA9PT0gJ21hdGgnICYmIEhUTUxfSU5URUdSQVRJT05fUE9JTlRTW3BhcmVudFRhZ05hbWVdO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gV2Ugb25seSBhbGxvdyBlbGVtZW50cyB0aGF0IGFyZSBkZWZpbmVkIGluIE1hdGhNTFxuICAgICAgICAvLyBzcGVjLiBBbGwgb3RoZXJzIGFyZSBkaXNhbGxvd2VkIGluIE1hdGhNTCBuYW1lc3BhY2UuXG4gICAgICAgIHJldHVybiBCb29sZWFuKEFMTF9NQVRITUxfVEFHU1t0YWdOYW1lXSk7XG4gICAgICB9XG5cbiAgICAgIGlmIChlbGVtZW50Lm5hbWVzcGFjZVVSSSA9PT0gSFRNTF9OQU1FU1BBQ0UpIHtcbiAgICAgICAgLy8gVGhlIG9ubHkgd2F5IHRvIHN3aXRjaCBmcm9tIFNWRyB0byBIVE1MIGlzIHZpYVxuICAgICAgICAvLyBIVE1MIGludGVncmF0aW9uIHBvaW50cywgYW5kIGZyb20gTWF0aE1MIHRvIEhUTUxcbiAgICAgICAgLy8gaXMgdmlhIE1hdGhNTCB0ZXh0IGludGVncmF0aW9uIHBvaW50c1xuICAgICAgICBpZiAocGFyZW50Lm5hbWVzcGFjZVVSSSA9PT0gU1ZHX05BTUVTUEFDRSAmJiAhSFRNTF9JTlRFR1JBVElPTl9QT0lOVFNbcGFyZW50VGFnTmFtZV0pIHtcbiAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAocGFyZW50Lm5hbWVzcGFjZVVSSSA9PT0gTUFUSE1MX05BTUVTUEFDRSAmJiAhTUFUSE1MX1RFWFRfSU5URUdSQVRJT05fUE9JTlRTW3BhcmVudFRhZ05hbWVdKSB7XG4gICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gQ2VydGFpbiBlbGVtZW50cyBhcmUgYWxsb3dlZCBpbiBib3RoIFNWRyBhbmQgSFRNTFxuICAgICAgICAvLyBuYW1lc3BhY2UuIFdlIG5lZWQgdG8gc3BlY2lmeSB0aGVtIGV4cGxpY2l0bHlcbiAgICAgICAgLy8gc28gdGhhdCB0aGV5IGRvbid0IGdldCBlcnJvbm91c2x5IGRlbGV0ZWQgZnJvbVxuICAgICAgICAvLyBIVE1MIG5hbWVzcGFjZS5cbiAgICAgICAgdmFyIGNvbW1vblN2Z0FuZEhUTUxFbGVtZW50cyA9IGFkZFRvU2V0KHt9LCBbJ3RpdGxlJywgJ3N0eWxlJywgJ2ZvbnQnLCAnYScsICdzY3JpcHQnXSk7XG5cbiAgICAgICAgLy8gV2UgZGlzYWxsb3cgdGFncyB0aGF0IGFyZSBzcGVjaWZpYyBmb3IgTWF0aE1MXG4gICAgICAgIC8vIG9yIFNWRyBhbmQgc2hvdWxkIG5ldmVyIGFwcGVhciBpbiBIVE1MIG5hbWVzcGFjZVxuICAgICAgICByZXR1cm4gIUFMTF9NQVRITUxfVEFHU1t0YWdOYW1lXSAmJiAoY29tbW9uU3ZnQW5kSFRNTEVsZW1lbnRzW3RhZ05hbWVdIHx8ICFBTExfU1ZHX1RBR1NbdGFnTmFtZV0pO1xuICAgICAgfVxuXG4gICAgICAvLyBUaGUgY29kZSBzaG91bGQgbmV2ZXIgcmVhY2ggdGhpcyBwbGFjZSAodGhpcyBtZWFuc1xuICAgICAgLy8gdGhhdCB0aGUgZWxlbWVudCBzb21laG93IGdvdCBuYW1lc3BhY2UgdGhhdCBpcyBub3RcbiAgICAgIC8vIEhUTUwsIFNWRyBvciBNYXRoTUwpLiBSZXR1cm4gZmFsc2UganVzdCBpbiBjYXNlLlxuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBfZm9yY2VSZW1vdmVcbiAgICAgKlxuICAgICAqIEBwYXJhbSAge05vZGV9IG5vZGUgYSBET00gbm9kZVxuICAgICAqL1xuICAgIHZhciBfZm9yY2VSZW1vdmUgPSBmdW5jdGlvbiBfZm9yY2VSZW1vdmUobm9kZSkge1xuICAgICAgYXJyYXlQdXNoKERPTVB1cmlmeS5yZW1vdmVkLCB7IGVsZW1lbnQ6IG5vZGUgfSk7XG4gICAgICB0cnkge1xuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgdW5pY29ybi9wcmVmZXItZG9tLW5vZGUtcmVtb3ZlXG4gICAgICAgIG5vZGUucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChub2RlKTtcbiAgICAgIH0gY2F0Y2ggKF8pIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBub2RlLm91dGVySFRNTCA9IGVtcHR5SFRNTDtcbiAgICAgICAgfSBjYXRjaCAoXykge1xuICAgICAgICAgIG5vZGUucmVtb3ZlKCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogX3JlbW92ZUF0dHJpYnV0ZVxuICAgICAqXG4gICAgICogQHBhcmFtICB7U3RyaW5nfSBuYW1lIGFuIEF0dHJpYnV0ZSBuYW1lXG4gICAgICogQHBhcmFtICB7Tm9kZX0gbm9kZSBhIERPTSBub2RlXG4gICAgICovXG4gICAgdmFyIF9yZW1vdmVBdHRyaWJ1dGUgPSBmdW5jdGlvbiBfcmVtb3ZlQXR0cmlidXRlKG5hbWUsIG5vZGUpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGFycmF5UHVzaChET01QdXJpZnkucmVtb3ZlZCwge1xuICAgICAgICAgIGF0dHJpYnV0ZTogbm9kZS5nZXRBdHRyaWJ1dGVOb2RlKG5hbWUpLFxuICAgICAgICAgIGZyb206IG5vZGVcbiAgICAgICAgfSk7XG4gICAgICB9IGNhdGNoIChfKSB7XG4gICAgICAgIGFycmF5UHVzaChET01QdXJpZnkucmVtb3ZlZCwge1xuICAgICAgICAgIGF0dHJpYnV0ZTogbnVsbCxcbiAgICAgICAgICBmcm9tOiBub2RlXG4gICAgICAgIH0pO1xuICAgICAgfVxuXG4gICAgICBub2RlLnJlbW92ZUF0dHJpYnV0ZShuYW1lKTtcblxuICAgICAgLy8gV2Ugdm9pZCBhdHRyaWJ1dGUgdmFsdWVzIGZvciB1bnJlbW92YWJsZSBcImlzXCJcIiBhdHRyaWJ1dGVzXG4gICAgICBpZiAobmFtZSA9PT0gJ2lzJyAmJiAhQUxMT1dFRF9BVFRSW25hbWVdKSB7XG4gICAgICAgIGlmIChSRVRVUk5fRE9NIHx8IFJFVFVSTl9ET01fRlJBR01FTlQpIHtcbiAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgX2ZvcmNlUmVtb3ZlKG5vZGUpO1xuICAgICAgICAgIH0gY2F0Y2ggKF8pIHt9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIG5vZGUuc2V0QXR0cmlidXRlKG5hbWUsICcnKTtcbiAgICAgICAgICB9IGNhdGNoIChfKSB7fVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIF9pbml0RG9jdW1lbnRcbiAgICAgKlxuICAgICAqIEBwYXJhbSAge1N0cmluZ30gZGlydHkgYSBzdHJpbmcgb2YgZGlydHkgbWFya3VwXG4gICAgICogQHJldHVybiB7RG9jdW1lbnR9IGEgRE9NLCBmaWxsZWQgd2l0aCB0aGUgZGlydHkgbWFya3VwXG4gICAgICovXG4gICAgdmFyIF9pbml0RG9jdW1lbnQgPSBmdW5jdGlvbiBfaW5pdERvY3VtZW50KGRpcnR5KSB7XG4gICAgICAvKiBDcmVhdGUgYSBIVE1MIGRvY3VtZW50ICovXG4gICAgICB2YXIgZG9jID0gdm9pZCAwO1xuICAgICAgdmFyIGxlYWRpbmdXaGl0ZXNwYWNlID0gdm9pZCAwO1xuXG4gICAgICBpZiAoRk9SQ0VfQk9EWSkge1xuICAgICAgICBkaXJ0eSA9ICc8cmVtb3ZlPjwvcmVtb3ZlPicgKyBkaXJ0eTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8qIElmIEZPUkNFX0JPRFkgaXNuJ3QgdXNlZCwgbGVhZGluZyB3aGl0ZXNwYWNlIG5lZWRzIHRvIGJlIHByZXNlcnZlZCBtYW51YWxseSAqL1xuICAgICAgICB2YXIgbWF0Y2hlcyA9IHN0cmluZ01hdGNoKGRpcnR5LCAvXltcXHJcXG5cXHQgXSsvKTtcbiAgICAgICAgbGVhZGluZ1doaXRlc3BhY2UgPSBtYXRjaGVzICYmIG1hdGNoZXNbMF07XG4gICAgICB9XG5cbiAgICAgIGlmIChQQVJTRVJfTUVESUFfVFlQRSA9PT0gJ2FwcGxpY2F0aW9uL3hodG1sK3htbCcpIHtcbiAgICAgICAgLy8gUm9vdCBvZiBYSFRNTCBkb2MgbXVzdCBjb250YWluIHhtbG5zIGRlY2xhcmF0aW9uIChzZWUgaHR0cHM6Ly93d3cudzMub3JnL1RSL3hodG1sMS9ub3JtYXRpdmUuaHRtbCNzdHJpY3QpXG4gICAgICAgIGRpcnR5ID0gJzxodG1sIHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMTk5OS94aHRtbFwiPjxoZWFkPjwvaGVhZD48Ym9keT4nICsgZGlydHkgKyAnPC9ib2R5PjwvaHRtbD4nO1xuICAgICAgfVxuXG4gICAgICB2YXIgZGlydHlQYXlsb2FkID0gdHJ1c3RlZFR5cGVzUG9saWN5ID8gdHJ1c3RlZFR5cGVzUG9saWN5LmNyZWF0ZUhUTUwoZGlydHkpIDogZGlydHk7XG4gICAgICAvKlxuICAgICAgICogVXNlIHRoZSBET01QYXJzZXIgQVBJIGJ5IGRlZmF1bHQsIGZhbGxiYWNrIGxhdGVyIGlmIG5lZWRzIGJlXG4gICAgICAgKiBET01QYXJzZXIgbm90IHdvcmsgZm9yIHN2ZyB3aGVuIGhhcyBtdWx0aXBsZSByb290IGVsZW1lbnQuXG4gICAgICAgKi9cbiAgICAgIGlmIChOQU1FU1BBQ0UgPT09IEhUTUxfTkFNRVNQQUNFKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgZG9jID0gbmV3IERPTVBhcnNlcigpLnBhcnNlRnJvbVN0cmluZyhkaXJ0eVBheWxvYWQsIFBBUlNFUl9NRURJQV9UWVBFKTtcbiAgICAgICAgfSBjYXRjaCAoXykge31cbiAgICAgIH1cblxuICAgICAgLyogVXNlIGNyZWF0ZUhUTUxEb2N1bWVudCBpbiBjYXNlIERPTVBhcnNlciBpcyBub3QgYXZhaWxhYmxlICovXG4gICAgICBpZiAoIWRvYyB8fCAhZG9jLmRvY3VtZW50RWxlbWVudCkge1xuICAgICAgICBkb2MgPSBpbXBsZW1lbnRhdGlvbi5jcmVhdGVEb2N1bWVudChOQU1FU1BBQ0UsICd0ZW1wbGF0ZScsIG51bGwpO1xuICAgICAgICB0cnkge1xuICAgICAgICAgIGRvYy5kb2N1bWVudEVsZW1lbnQuaW5uZXJIVE1MID0gSVNfRU1QVFlfSU5QVVQgPyAnJyA6IGRpcnR5UGF5bG9hZDtcbiAgICAgICAgfSBjYXRjaCAoXykge1xuICAgICAgICAgIC8vIFN5bnRheCBlcnJvciBpZiBkaXJ0eVBheWxvYWQgaXMgaW52YWxpZCB4bWxcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICB2YXIgYm9keSA9IGRvYy5ib2R5IHx8IGRvYy5kb2N1bWVudEVsZW1lbnQ7XG5cbiAgICAgIGlmIChkaXJ0eSAmJiBsZWFkaW5nV2hpdGVzcGFjZSkge1xuICAgICAgICBib2R5Lmluc2VydEJlZm9yZShkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShsZWFkaW5nV2hpdGVzcGFjZSksIGJvZHkuY2hpbGROb2Rlc1swXSB8fCBudWxsKTtcbiAgICAgIH1cblxuICAgICAgLyogV29yayBvbiB3aG9sZSBkb2N1bWVudCBvciBqdXN0IGl0cyBib2R5ICovXG4gICAgICBpZiAoTkFNRVNQQUNFID09PSBIVE1MX05BTUVTUEFDRSkge1xuICAgICAgICByZXR1cm4gZ2V0RWxlbWVudHNCeVRhZ05hbWUuY2FsbChkb2MsIFdIT0xFX0RPQ1VNRU5UID8gJ2h0bWwnIDogJ2JvZHknKVswXTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIFdIT0xFX0RPQ1VNRU5UID8gZG9jLmRvY3VtZW50RWxlbWVudCA6IGJvZHk7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIF9jcmVhdGVJdGVyYXRvclxuICAgICAqXG4gICAgICogQHBhcmFtICB7RG9jdW1lbnR9IHJvb3QgZG9jdW1lbnQvZnJhZ21lbnQgdG8gY3JlYXRlIGl0ZXJhdG9yIGZvclxuICAgICAqIEByZXR1cm4ge0l0ZXJhdG9yfSBpdGVyYXRvciBpbnN0YW5jZVxuICAgICAqL1xuICAgIHZhciBfY3JlYXRlSXRlcmF0b3IgPSBmdW5jdGlvbiBfY3JlYXRlSXRlcmF0b3Iocm9vdCkge1xuICAgICAgcmV0dXJuIGNyZWF0ZU5vZGVJdGVyYXRvci5jYWxsKHJvb3Qub3duZXJEb2N1bWVudCB8fCByb290LCByb290LCBOb2RlRmlsdGVyLlNIT1dfRUxFTUVOVCB8IE5vZGVGaWx0ZXIuU0hPV19DT01NRU5UIHwgTm9kZUZpbHRlci5TSE9XX1RFWFQsIG51bGwsIGZhbHNlKTtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogX2lzQ2xvYmJlcmVkXG4gICAgICpcbiAgICAgKiBAcGFyYW0gIHtOb2RlfSBlbG0gZWxlbWVudCB0byBjaGVjayBmb3IgY2xvYmJlcmluZyBhdHRhY2tzXG4gICAgICogQHJldHVybiB7Qm9vbGVhbn0gdHJ1ZSBpZiBjbG9iYmVyZWQsIGZhbHNlIGlmIHNhZmVcbiAgICAgKi9cbiAgICB2YXIgX2lzQ2xvYmJlcmVkID0gZnVuY3Rpb24gX2lzQ2xvYmJlcmVkKGVsbSkge1xuICAgICAgcmV0dXJuIGVsbSBpbnN0YW5jZW9mIEhUTUxGb3JtRWxlbWVudCAmJiAodHlwZW9mIGVsbS5ub2RlTmFtZSAhPT0gJ3N0cmluZycgfHwgdHlwZW9mIGVsbS50ZXh0Q29udGVudCAhPT0gJ3N0cmluZycgfHwgdHlwZW9mIGVsbS5yZW1vdmVDaGlsZCAhPT0gJ2Z1bmN0aW9uJyB8fCAhKGVsbS5hdHRyaWJ1dGVzIGluc3RhbmNlb2YgTmFtZWROb2RlTWFwKSB8fCB0eXBlb2YgZWxtLnJlbW92ZUF0dHJpYnV0ZSAhPT0gJ2Z1bmN0aW9uJyB8fCB0eXBlb2YgZWxtLnNldEF0dHJpYnV0ZSAhPT0gJ2Z1bmN0aW9uJyB8fCB0eXBlb2YgZWxtLm5hbWVzcGFjZVVSSSAhPT0gJ3N0cmluZycgfHwgdHlwZW9mIGVsbS5pbnNlcnRCZWZvcmUgIT09ICdmdW5jdGlvbicpO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBfaXNOb2RlXG4gICAgICpcbiAgICAgKiBAcGFyYW0gIHtOb2RlfSBvYmogb2JqZWN0IHRvIGNoZWNrIHdoZXRoZXIgaXQncyBhIERPTSBub2RlXG4gICAgICogQHJldHVybiB7Qm9vbGVhbn0gdHJ1ZSBpcyBvYmplY3QgaXMgYSBET00gbm9kZVxuICAgICAqL1xuICAgIHZhciBfaXNOb2RlID0gZnVuY3Rpb24gX2lzTm9kZShvYmplY3QpIHtcbiAgICAgIHJldHVybiAodHlwZW9mIE5vZGUgPT09ICd1bmRlZmluZWQnID8gJ3VuZGVmaW5lZCcgOiBfdHlwZW9mKE5vZGUpKSA9PT0gJ29iamVjdCcgPyBvYmplY3QgaW5zdGFuY2VvZiBOb2RlIDogb2JqZWN0ICYmICh0eXBlb2Ygb2JqZWN0ID09PSAndW5kZWZpbmVkJyA/ICd1bmRlZmluZWQnIDogX3R5cGVvZihvYmplY3QpKSA9PT0gJ29iamVjdCcgJiYgdHlwZW9mIG9iamVjdC5ub2RlVHlwZSA9PT0gJ251bWJlcicgJiYgdHlwZW9mIG9iamVjdC5ub2RlTmFtZSA9PT0gJ3N0cmluZyc7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIF9leGVjdXRlSG9va1xuICAgICAqIEV4ZWN1dGUgdXNlciBjb25maWd1cmFibGUgaG9va3NcbiAgICAgKlxuICAgICAqIEBwYXJhbSAge1N0cmluZ30gZW50cnlQb2ludCAgTmFtZSBvZiB0aGUgaG9vaydzIGVudHJ5IHBvaW50XG4gICAgICogQHBhcmFtICB7Tm9kZX0gY3VycmVudE5vZGUgbm9kZSB0byB3b3JrIG9uIHdpdGggdGhlIGhvb2tcbiAgICAgKiBAcGFyYW0gIHtPYmplY3R9IGRhdGEgYWRkaXRpb25hbCBob29rIHBhcmFtZXRlcnNcbiAgICAgKi9cbiAgICB2YXIgX2V4ZWN1dGVIb29rID0gZnVuY3Rpb24gX2V4ZWN1dGVIb29rKGVudHJ5UG9pbnQsIGN1cnJlbnROb2RlLCBkYXRhKSB7XG4gICAgICBpZiAoIWhvb2tzW2VudHJ5UG9pbnRdKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgYXJyYXlGb3JFYWNoKGhvb2tzW2VudHJ5UG9pbnRdLCBmdW5jdGlvbiAoaG9vaykge1xuICAgICAgICBob29rLmNhbGwoRE9NUHVyaWZ5LCBjdXJyZW50Tm9kZSwgZGF0YSwgQ09ORklHKTtcbiAgICAgIH0pO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBfc2FuaXRpemVFbGVtZW50c1xuICAgICAqXG4gICAgICogQHByb3RlY3Qgbm9kZU5hbWVcbiAgICAgKiBAcHJvdGVjdCB0ZXh0Q29udGVudFxuICAgICAqIEBwcm90ZWN0IHJlbW92ZUNoaWxkXG4gICAgICpcbiAgICAgKiBAcGFyYW0gICB7Tm9kZX0gY3VycmVudE5vZGUgdG8gY2hlY2sgZm9yIHBlcm1pc3Npb24gdG8gZXhpc3RcbiAgICAgKiBAcmV0dXJuICB7Qm9vbGVhbn0gdHJ1ZSBpZiBub2RlIHdhcyBraWxsZWQsIGZhbHNlIGlmIGxlZnQgYWxpdmVcbiAgICAgKi9cbiAgICB2YXIgX3Nhbml0aXplRWxlbWVudHMgPSBmdW5jdGlvbiBfc2FuaXRpemVFbGVtZW50cyhjdXJyZW50Tm9kZSkge1xuICAgICAgdmFyIGNvbnRlbnQgPSB2b2lkIDA7XG5cbiAgICAgIC8qIEV4ZWN1dGUgYSBob29rIGlmIHByZXNlbnQgKi9cbiAgICAgIF9leGVjdXRlSG9vaygnYmVmb3JlU2FuaXRpemVFbGVtZW50cycsIGN1cnJlbnROb2RlLCBudWxsKTtcblxuICAgICAgLyogQ2hlY2sgaWYgZWxlbWVudCBpcyBjbG9iYmVyZWQgb3IgY2FuIGNsb2JiZXIgKi9cbiAgICAgIGlmIChfaXNDbG9iYmVyZWQoY3VycmVudE5vZGUpKSB7XG4gICAgICAgIF9mb3JjZVJlbW92ZShjdXJyZW50Tm9kZSk7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfVxuXG4gICAgICAvKiBDaGVjayBpZiB0YWduYW1lIGNvbnRhaW5zIFVuaWNvZGUgKi9cbiAgICAgIGlmIChzdHJpbmdNYXRjaChjdXJyZW50Tm9kZS5ub2RlTmFtZSwgL1tcXHUwMDgwLVxcdUZGRkZdLykpIHtcbiAgICAgICAgX2ZvcmNlUmVtb3ZlKGN1cnJlbnROb2RlKTtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9XG5cbiAgICAgIC8qIE5vdyBsZXQncyBjaGVjayB0aGUgZWxlbWVudCdzIHR5cGUgYW5kIG5hbWUgKi9cbiAgICAgIHZhciB0YWdOYW1lID0gdHJhbnNmb3JtQ2FzZUZ1bmMoY3VycmVudE5vZGUubm9kZU5hbWUpO1xuXG4gICAgICAvKiBFeGVjdXRlIGEgaG9vayBpZiBwcmVzZW50ICovXG4gICAgICBfZXhlY3V0ZUhvb2soJ3Vwb25TYW5pdGl6ZUVsZW1lbnQnLCBjdXJyZW50Tm9kZSwge1xuICAgICAgICB0YWdOYW1lOiB0YWdOYW1lLFxuICAgICAgICBhbGxvd2VkVGFnczogQUxMT1dFRF9UQUdTXG4gICAgICB9KTtcblxuICAgICAgLyogRGV0ZWN0IG1YU1MgYXR0ZW1wdHMgYWJ1c2luZyBuYW1lc3BhY2UgY29uZnVzaW9uICovXG4gICAgICBpZiAoIV9pc05vZGUoY3VycmVudE5vZGUuZmlyc3RFbGVtZW50Q2hpbGQpICYmICghX2lzTm9kZShjdXJyZW50Tm9kZS5jb250ZW50KSB8fCAhX2lzTm9kZShjdXJyZW50Tm9kZS5jb250ZW50LmZpcnN0RWxlbWVudENoaWxkKSkgJiYgcmVnRXhwVGVzdCgvPFsvXFx3XS9nLCBjdXJyZW50Tm9kZS5pbm5lckhUTUwpICYmIHJlZ0V4cFRlc3QoLzxbL1xcd10vZywgY3VycmVudE5vZGUudGV4dENvbnRlbnQpKSB7XG4gICAgICAgIF9mb3JjZVJlbW92ZShjdXJyZW50Tm9kZSk7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfVxuXG4gICAgICAvKiBNaXRpZ2F0ZSBhIHByb2JsZW0gd2l0aCB0ZW1wbGF0ZXMgaW5zaWRlIHNlbGVjdCAqL1xuICAgICAgaWYgKHRhZ05hbWUgPT09ICdzZWxlY3QnICYmIHJlZ0V4cFRlc3QoLzx0ZW1wbGF0ZS9pLCBjdXJyZW50Tm9kZS5pbm5lckhUTUwpKSB7XG4gICAgICAgIF9mb3JjZVJlbW92ZShjdXJyZW50Tm9kZSk7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfVxuXG4gICAgICAvKiBSZW1vdmUgZWxlbWVudCBpZiBhbnl0aGluZyBmb3JiaWRzIGl0cyBwcmVzZW5jZSAqL1xuICAgICAgaWYgKCFBTExPV0VEX1RBR1NbdGFnTmFtZV0gfHwgRk9SQklEX1RBR1NbdGFnTmFtZV0pIHtcbiAgICAgICAgLyogS2VlcCBjb250ZW50IGV4Y2VwdCBmb3IgYmFkLWxpc3RlZCBlbGVtZW50cyAqL1xuICAgICAgICBpZiAoS0VFUF9DT05URU5UICYmICFGT1JCSURfQ09OVEVOVFNbdGFnTmFtZV0pIHtcbiAgICAgICAgICB2YXIgcGFyZW50Tm9kZSA9IGdldFBhcmVudE5vZGUoY3VycmVudE5vZGUpIHx8IGN1cnJlbnROb2RlLnBhcmVudE5vZGU7XG4gICAgICAgICAgdmFyIGNoaWxkTm9kZXMgPSBnZXRDaGlsZE5vZGVzKGN1cnJlbnROb2RlKSB8fCBjdXJyZW50Tm9kZS5jaGlsZE5vZGVzO1xuXG4gICAgICAgICAgaWYgKGNoaWxkTm9kZXMgJiYgcGFyZW50Tm9kZSkge1xuICAgICAgICAgICAgdmFyIGNoaWxkQ291bnQgPSBjaGlsZE5vZGVzLmxlbmd0aDtcblxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IGNoaWxkQ291bnQgLSAxOyBpID49IDA7IC0taSkge1xuICAgICAgICAgICAgICBwYXJlbnROb2RlLmluc2VydEJlZm9yZShjbG9uZU5vZGUoY2hpbGROb2Rlc1tpXSwgdHJ1ZSksIGdldE5leHRTaWJsaW5nKGN1cnJlbnROb2RlKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCFGT1JCSURfVEFHU1t0YWdOYW1lXSAmJiBfYmFzaWNDdXN0b21FbGVtZW50VGVzdCh0YWdOYW1lKSkge1xuICAgICAgICAgIGlmIChDVVNUT01fRUxFTUVOVF9IQU5ETElORy50YWdOYW1lQ2hlY2sgaW5zdGFuY2VvZiBSZWdFeHAgJiYgcmVnRXhwVGVzdChDVVNUT01fRUxFTUVOVF9IQU5ETElORy50YWdOYW1lQ2hlY2ssIHRhZ05hbWUpKSByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgaWYgKENVU1RPTV9FTEVNRU5UX0hBTkRMSU5HLnRhZ05hbWVDaGVjayBpbnN0YW5jZW9mIEZ1bmN0aW9uICYmIENVU1RPTV9FTEVNRU5UX0hBTkRMSU5HLnRhZ05hbWVDaGVjayh0YWdOYW1lKSkgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG5cbiAgICAgICAgX2ZvcmNlUmVtb3ZlKGN1cnJlbnROb2RlKTtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9XG5cbiAgICAgIC8qIENoZWNrIHdoZXRoZXIgZWxlbWVudCBoYXMgYSB2YWxpZCBuYW1lc3BhY2UgKi9cbiAgICAgIGlmIChjdXJyZW50Tm9kZSBpbnN0YW5jZW9mIEVsZW1lbnQgJiYgIV9jaGVja1ZhbGlkTmFtZXNwYWNlKGN1cnJlbnROb2RlKSkge1xuICAgICAgICBfZm9yY2VSZW1vdmUoY3VycmVudE5vZGUpO1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH1cblxuICAgICAgaWYgKCh0YWdOYW1lID09PSAnbm9zY3JpcHQnIHx8IHRhZ05hbWUgPT09ICdub2VtYmVkJykgJiYgcmVnRXhwVGVzdCgvPFxcL25vKHNjcmlwdHxlbWJlZCkvaSwgY3VycmVudE5vZGUuaW5uZXJIVE1MKSkge1xuICAgICAgICBfZm9yY2VSZW1vdmUoY3VycmVudE5vZGUpO1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH1cblxuICAgICAgLyogU2FuaXRpemUgZWxlbWVudCBjb250ZW50IHRvIGJlIHRlbXBsYXRlLXNhZmUgKi9cbiAgICAgIGlmIChTQUZFX0ZPUl9URU1QTEFURVMgJiYgY3VycmVudE5vZGUubm9kZVR5cGUgPT09IDMpIHtcbiAgICAgICAgLyogR2V0IHRoZSBlbGVtZW50J3MgdGV4dCBjb250ZW50ICovXG4gICAgICAgIGNvbnRlbnQgPSBjdXJyZW50Tm9kZS50ZXh0Q29udGVudDtcbiAgICAgICAgY29udGVudCA9IHN0cmluZ1JlcGxhY2UoY29udGVudCwgTVVTVEFDSEVfRVhQUiQkMSwgJyAnKTtcbiAgICAgICAgY29udGVudCA9IHN0cmluZ1JlcGxhY2UoY29udGVudCwgRVJCX0VYUFIkJDEsICcgJyk7XG4gICAgICAgIGlmIChjdXJyZW50Tm9kZS50ZXh0Q29udGVudCAhPT0gY29udGVudCkge1xuICAgICAgICAgIGFycmF5UHVzaChET01QdXJpZnkucmVtb3ZlZCwgeyBlbGVtZW50OiBjdXJyZW50Tm9kZS5jbG9uZU5vZGUoKSB9KTtcbiAgICAgICAgICBjdXJyZW50Tm9kZS50ZXh0Q29udGVudCA9IGNvbnRlbnQ7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLyogRXhlY3V0ZSBhIGhvb2sgaWYgcHJlc2VudCAqL1xuICAgICAgX2V4ZWN1dGVIb29rKCdhZnRlclNhbml0aXplRWxlbWVudHMnLCBjdXJyZW50Tm9kZSwgbnVsbCk7XG5cbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogX2lzVmFsaWRBdHRyaWJ1dGVcbiAgICAgKlxuICAgICAqIEBwYXJhbSAge3N0cmluZ30gbGNUYWcgTG93ZXJjYXNlIHRhZyBuYW1lIG9mIGNvbnRhaW5pbmcgZWxlbWVudC5cbiAgICAgKiBAcGFyYW0gIHtzdHJpbmd9IGxjTmFtZSBMb3dlcmNhc2UgYXR0cmlidXRlIG5hbWUuXG4gICAgICogQHBhcmFtICB7c3RyaW5nfSB2YWx1ZSBBdHRyaWJ1dGUgdmFsdWUuXG4gICAgICogQHJldHVybiB7Qm9vbGVhbn0gUmV0dXJucyB0cnVlIGlmIGB2YWx1ZWAgaXMgdmFsaWQsIG90aGVyd2lzZSBmYWxzZS5cbiAgICAgKi9cbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgY29tcGxleGl0eVxuICAgIHZhciBfaXNWYWxpZEF0dHJpYnV0ZSA9IGZ1bmN0aW9uIF9pc1ZhbGlkQXR0cmlidXRlKGxjVGFnLCBsY05hbWUsIHZhbHVlKSB7XG4gICAgICAvKiBNYWtlIHN1cmUgYXR0cmlidXRlIGNhbm5vdCBjbG9iYmVyICovXG4gICAgICBpZiAoU0FOSVRJWkVfRE9NICYmIChsY05hbWUgPT09ICdpZCcgfHwgbGNOYW1lID09PSAnbmFtZScpICYmICh2YWx1ZSBpbiBkb2N1bWVudCB8fCB2YWx1ZSBpbiBmb3JtRWxlbWVudCkpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuXG4gICAgICAvKiBBbGxvdyB2YWxpZCBkYXRhLSogYXR0cmlidXRlczogQXQgbGVhc3Qgb25lIGNoYXJhY3RlciBhZnRlciBcIi1cIlxuICAgICAgICAgIChodHRwczovL2h0bWwuc3BlYy53aGF0d2cub3JnL211bHRpcGFnZS9kb20uaHRtbCNlbWJlZGRpbmctY3VzdG9tLW5vbi12aXNpYmxlLWRhdGEtd2l0aC10aGUtZGF0YS0qLWF0dHJpYnV0ZXMpXG4gICAgICAgICAgWE1MLWNvbXBhdGlibGUgKGh0dHBzOi8vaHRtbC5zcGVjLndoYXR3Zy5vcmcvbXVsdGlwYWdlL2luZnJhc3RydWN0dXJlLmh0bWwjeG1sLWNvbXBhdGlibGUgYW5kIGh0dHA6Ly93d3cudzMub3JnL1RSL3htbC8jZDBlODA0KVxuICAgICAgICAgIFdlIGRvbid0IG5lZWQgdG8gY2hlY2sgdGhlIHZhbHVlOyBpdCdzIGFsd2F5cyBVUkkgc2FmZS4gKi9cbiAgICAgIGlmIChBTExPV19EQVRBX0FUVFIgJiYgIUZPUkJJRF9BVFRSW2xjTmFtZV0gJiYgcmVnRXhwVGVzdChEQVRBX0FUVFIkJDEsIGxjTmFtZSkpIDsgZWxzZSBpZiAoQUxMT1dfQVJJQV9BVFRSICYmIHJlZ0V4cFRlc3QoQVJJQV9BVFRSJCQxLCBsY05hbWUpKSA7IGVsc2UgaWYgKCFBTExPV0VEX0FUVFJbbGNOYW1lXSB8fCBGT1JCSURfQVRUUltsY05hbWVdKSB7XG4gICAgICAgIGlmIChcbiAgICAgICAgLy8gRmlyc3QgY29uZGl0aW9uIGRvZXMgYSB2ZXJ5IGJhc2ljIGNoZWNrIGlmIGEpIGl0J3MgYmFzaWNhbGx5IGEgdmFsaWQgY3VzdG9tIGVsZW1lbnQgdGFnbmFtZSBBTkRcbiAgICAgICAgLy8gYikgaWYgdGhlIHRhZ05hbWUgcGFzc2VzIHdoYXRldmVyIHRoZSB1c2VyIGhhcyBjb25maWd1cmVkIGZvciBDVVNUT01fRUxFTUVOVF9IQU5ETElORy50YWdOYW1lQ2hlY2tcbiAgICAgICAgLy8gYW5kIGMpIGlmIHRoZSBhdHRyaWJ1dGUgbmFtZSBwYXNzZXMgd2hhdGV2ZXIgdGhlIHVzZXIgaGFzIGNvbmZpZ3VyZWQgZm9yIENVU1RPTV9FTEVNRU5UX0hBTkRMSU5HLmF0dHJpYnV0ZU5hbWVDaGVja1xuICAgICAgICBfYmFzaWNDdXN0b21FbGVtZW50VGVzdChsY1RhZykgJiYgKENVU1RPTV9FTEVNRU5UX0hBTkRMSU5HLnRhZ05hbWVDaGVjayBpbnN0YW5jZW9mIFJlZ0V4cCAmJiByZWdFeHBUZXN0KENVU1RPTV9FTEVNRU5UX0hBTkRMSU5HLnRhZ05hbWVDaGVjaywgbGNUYWcpIHx8IENVU1RPTV9FTEVNRU5UX0hBTkRMSU5HLnRhZ05hbWVDaGVjayBpbnN0YW5jZW9mIEZ1bmN0aW9uICYmIENVU1RPTV9FTEVNRU5UX0hBTkRMSU5HLnRhZ05hbWVDaGVjayhsY1RhZykpICYmIChDVVNUT01fRUxFTUVOVF9IQU5ETElORy5hdHRyaWJ1dGVOYW1lQ2hlY2sgaW5zdGFuY2VvZiBSZWdFeHAgJiYgcmVnRXhwVGVzdChDVVNUT01fRUxFTUVOVF9IQU5ETElORy5hdHRyaWJ1dGVOYW1lQ2hlY2ssIGxjTmFtZSkgfHwgQ1VTVE9NX0VMRU1FTlRfSEFORExJTkcuYXR0cmlidXRlTmFtZUNoZWNrIGluc3RhbmNlb2YgRnVuY3Rpb24gJiYgQ1VTVE9NX0VMRU1FTlRfSEFORExJTkcuYXR0cmlidXRlTmFtZUNoZWNrKGxjTmFtZSkpIHx8XG4gICAgICAgIC8vIEFsdGVybmF0aXZlLCBzZWNvbmQgY29uZGl0aW9uIGNoZWNrcyBpZiBpdCdzIGFuIGBpc2AtYXR0cmlidXRlLCBBTkRcbiAgICAgICAgLy8gdGhlIHZhbHVlIHBhc3NlcyB3aGF0ZXZlciB0aGUgdXNlciBoYXMgY29uZmlndXJlZCBmb3IgQ1VTVE9NX0VMRU1FTlRfSEFORExJTkcudGFnTmFtZUNoZWNrXG4gICAgICAgIGxjTmFtZSA9PT0gJ2lzJyAmJiBDVVNUT01fRUxFTUVOVF9IQU5ETElORy5hbGxvd0N1c3RvbWl6ZWRCdWlsdEluRWxlbWVudHMgJiYgKENVU1RPTV9FTEVNRU5UX0hBTkRMSU5HLnRhZ05hbWVDaGVjayBpbnN0YW5jZW9mIFJlZ0V4cCAmJiByZWdFeHBUZXN0KENVU1RPTV9FTEVNRU5UX0hBTkRMSU5HLnRhZ05hbWVDaGVjaywgdmFsdWUpIHx8IENVU1RPTV9FTEVNRU5UX0hBTkRMSU5HLnRhZ05hbWVDaGVjayBpbnN0YW5jZW9mIEZ1bmN0aW9uICYmIENVU1RPTV9FTEVNRU5UX0hBTkRMSU5HLnRhZ05hbWVDaGVjayh2YWx1ZSkpKSA7IGVsc2Uge1xuICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICAvKiBDaGVjayB2YWx1ZSBpcyBzYWZlLiBGaXJzdCwgaXMgYXR0ciBpbmVydD8gSWYgc28sIGlzIHNhZmUgKi9cbiAgICAgIH0gZWxzZSBpZiAoVVJJX1NBRkVfQVRUUklCVVRFU1tsY05hbWVdKSA7IGVsc2UgaWYgKHJlZ0V4cFRlc3QoSVNfQUxMT1dFRF9VUkkkJDEsIHN0cmluZ1JlcGxhY2UodmFsdWUsIEFUVFJfV0hJVEVTUEFDRSQkMSwgJycpKSkgOyBlbHNlIGlmICgobGNOYW1lID09PSAnc3JjJyB8fCBsY05hbWUgPT09ICd4bGluazpocmVmJyB8fCBsY05hbWUgPT09ICdocmVmJykgJiYgbGNUYWcgIT09ICdzY3JpcHQnICYmIHN0cmluZ0luZGV4T2YodmFsdWUsICdkYXRhOicpID09PSAwICYmIERBVEFfVVJJX1RBR1NbbGNUYWddKSA7IGVsc2UgaWYgKEFMTE9XX1VOS05PV05fUFJPVE9DT0xTICYmICFyZWdFeHBUZXN0KElTX1NDUklQVF9PUl9EQVRBJCQxLCBzdHJpbmdSZXBsYWNlKHZhbHVlLCBBVFRSX1dISVRFU1BBQ0UkJDEsICcnKSkpIDsgZWxzZSBpZiAoIXZhbHVlKSA7IGVsc2Uge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBfYmFzaWNDdXN0b21FbGVtZW50Q2hlY2tcbiAgICAgKiBjaGVja3MgaWYgYXQgbGVhc3Qgb25lIGRhc2ggaXMgaW5jbHVkZWQgaW4gdGFnTmFtZSwgYW5kIGl0J3Mgbm90IHRoZSBmaXJzdCBjaGFyXG4gICAgICogZm9yIG1vcmUgc29waGlzdGljYXRlZCBjaGVja2luZyBzZWUgaHR0cHM6Ly9naXRodWIuY29tL3NpbmRyZXNvcmh1cy92YWxpZGF0ZS1lbGVtZW50LW5hbWVcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gdGFnTmFtZSBuYW1lIG9mIHRoZSB0YWcgb2YgdGhlIG5vZGUgdG8gc2FuaXRpemVcbiAgICAgKi9cbiAgICB2YXIgX2Jhc2ljQ3VzdG9tRWxlbWVudFRlc3QgPSBmdW5jdGlvbiBfYmFzaWNDdXN0b21FbGVtZW50VGVzdCh0YWdOYW1lKSB7XG4gICAgICByZXR1cm4gdGFnTmFtZS5pbmRleE9mKCctJykgPiAwO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBfc2FuaXRpemVBdHRyaWJ1dGVzXG4gICAgICpcbiAgICAgKiBAcHJvdGVjdCBhdHRyaWJ1dGVzXG4gICAgICogQHByb3RlY3Qgbm9kZU5hbWVcbiAgICAgKiBAcHJvdGVjdCByZW1vdmVBdHRyaWJ1dGVcbiAgICAgKiBAcHJvdGVjdCBzZXRBdHRyaWJ1dGVcbiAgICAgKlxuICAgICAqIEBwYXJhbSAge05vZGV9IGN1cnJlbnROb2RlIHRvIHNhbml0aXplXG4gICAgICovXG4gICAgdmFyIF9zYW5pdGl6ZUF0dHJpYnV0ZXMgPSBmdW5jdGlvbiBfc2FuaXRpemVBdHRyaWJ1dGVzKGN1cnJlbnROb2RlKSB7XG4gICAgICB2YXIgYXR0ciA9IHZvaWQgMDtcbiAgICAgIHZhciB2YWx1ZSA9IHZvaWQgMDtcbiAgICAgIHZhciBsY05hbWUgPSB2b2lkIDA7XG4gICAgICB2YXIgbCA9IHZvaWQgMDtcbiAgICAgIC8qIEV4ZWN1dGUgYSBob29rIGlmIHByZXNlbnQgKi9cbiAgICAgIF9leGVjdXRlSG9vaygnYmVmb3JlU2FuaXRpemVBdHRyaWJ1dGVzJywgY3VycmVudE5vZGUsIG51bGwpO1xuXG4gICAgICB2YXIgYXR0cmlidXRlcyA9IGN1cnJlbnROb2RlLmF0dHJpYnV0ZXM7XG5cbiAgICAgIC8qIENoZWNrIGlmIHdlIGhhdmUgYXR0cmlidXRlczsgaWYgbm90IHdlIG1pZ2h0IGhhdmUgYSB0ZXh0IG5vZGUgKi9cblxuICAgICAgaWYgKCFhdHRyaWJ1dGVzKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgdmFyIGhvb2tFdmVudCA9IHtcbiAgICAgICAgYXR0ck5hbWU6ICcnLFxuICAgICAgICBhdHRyVmFsdWU6ICcnLFxuICAgICAgICBrZWVwQXR0cjogdHJ1ZSxcbiAgICAgICAgYWxsb3dlZEF0dHJpYnV0ZXM6IEFMTE9XRURfQVRUUlxuICAgICAgfTtcbiAgICAgIGwgPSBhdHRyaWJ1dGVzLmxlbmd0aDtcblxuICAgICAgLyogR28gYmFja3dhcmRzIG92ZXIgYWxsIGF0dHJpYnV0ZXM7IHNhZmVseSByZW1vdmUgYmFkIG9uZXMgKi9cbiAgICAgIHdoaWxlIChsLS0pIHtcbiAgICAgICAgYXR0ciA9IGF0dHJpYnV0ZXNbbF07XG4gICAgICAgIHZhciBfYXR0ciA9IGF0dHIsXG4gICAgICAgICAgICBuYW1lID0gX2F0dHIubmFtZSxcbiAgICAgICAgICAgIG5hbWVzcGFjZVVSSSA9IF9hdHRyLm5hbWVzcGFjZVVSSTtcblxuICAgICAgICB2YWx1ZSA9IHN0cmluZ1RyaW0oYXR0ci52YWx1ZSk7XG4gICAgICAgIGxjTmFtZSA9IHRyYW5zZm9ybUNhc2VGdW5jKG5hbWUpO1xuXG4gICAgICAgIC8qIEV4ZWN1dGUgYSBob29rIGlmIHByZXNlbnQgKi9cbiAgICAgICAgaG9va0V2ZW50LmF0dHJOYW1lID0gbGNOYW1lO1xuICAgICAgICBob29rRXZlbnQuYXR0clZhbHVlID0gdmFsdWU7XG4gICAgICAgIGhvb2tFdmVudC5rZWVwQXR0ciA9IHRydWU7XG4gICAgICAgIGhvb2tFdmVudC5mb3JjZUtlZXBBdHRyID0gdW5kZWZpbmVkOyAvLyBBbGxvd3MgZGV2ZWxvcGVycyB0byBzZWUgdGhpcyBpcyBhIHByb3BlcnR5IHRoZXkgY2FuIHNldFxuICAgICAgICBfZXhlY3V0ZUhvb2soJ3Vwb25TYW5pdGl6ZUF0dHJpYnV0ZScsIGN1cnJlbnROb2RlLCBob29rRXZlbnQpO1xuICAgICAgICB2YWx1ZSA9IGhvb2tFdmVudC5hdHRyVmFsdWU7XG4gICAgICAgIC8qIERpZCB0aGUgaG9va3MgYXBwcm92ZSBvZiB0aGUgYXR0cmlidXRlPyAqL1xuICAgICAgICBpZiAoaG9va0V2ZW50LmZvcmNlS2VlcEF0dHIpIHtcbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qIFJlbW92ZSBhdHRyaWJ1dGUgKi9cbiAgICAgICAgX3JlbW92ZUF0dHJpYnV0ZShuYW1lLCBjdXJyZW50Tm9kZSk7XG5cbiAgICAgICAgLyogRGlkIHRoZSBob29rcyBhcHByb3ZlIG9mIHRoZSBhdHRyaWJ1dGU/ICovXG4gICAgICAgIGlmICghaG9va0V2ZW50LmtlZXBBdHRyKSB7XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cblxuICAgICAgICAvKiBXb3JrIGFyb3VuZCBhIHNlY3VyaXR5IGlzc3VlIGluIGpRdWVyeSAzLjAgKi9cbiAgICAgICAgaWYgKHJlZ0V4cFRlc3QoL1xcLz4vaSwgdmFsdWUpKSB7XG4gICAgICAgICAgX3JlbW92ZUF0dHJpYnV0ZShuYW1lLCBjdXJyZW50Tm9kZSk7XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cblxuICAgICAgICAvKiBTYW5pdGl6ZSBhdHRyaWJ1dGUgY29udGVudCB0byBiZSB0ZW1wbGF0ZS1zYWZlICovXG4gICAgICAgIGlmIChTQUZFX0ZPUl9URU1QTEFURVMpIHtcbiAgICAgICAgICB2YWx1ZSA9IHN0cmluZ1JlcGxhY2UodmFsdWUsIE1VU1RBQ0hFX0VYUFIkJDEsICcgJyk7XG4gICAgICAgICAgdmFsdWUgPSBzdHJpbmdSZXBsYWNlKHZhbHVlLCBFUkJfRVhQUiQkMSwgJyAnKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qIElzIGB2YWx1ZWAgdmFsaWQgZm9yIHRoaXMgYXR0cmlidXRlPyAqL1xuICAgICAgICB2YXIgbGNUYWcgPSB0cmFuc2Zvcm1DYXNlRnVuYyhjdXJyZW50Tm9kZS5ub2RlTmFtZSk7XG4gICAgICAgIGlmICghX2lzVmFsaWRBdHRyaWJ1dGUobGNUYWcsIGxjTmFtZSwgdmFsdWUpKSB7XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cblxuICAgICAgICAvKiBIYW5kbGUgaW52YWxpZCBkYXRhLSogYXR0cmlidXRlIHNldCBieSB0cnktY2F0Y2hpbmcgaXQgKi9cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBpZiAobmFtZXNwYWNlVVJJKSB7XG4gICAgICAgICAgICBjdXJyZW50Tm9kZS5zZXRBdHRyaWJ1dGVOUyhuYW1lc3BhY2VVUkksIG5hbWUsIHZhbHVlKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgLyogRmFsbGJhY2sgdG8gc2V0QXR0cmlidXRlKCkgZm9yIGJyb3dzZXItdW5yZWNvZ25pemVkIG5hbWVzcGFjZXMgZS5nLiBcIngtc2NoZW1hXCIuICovXG4gICAgICAgICAgICBjdXJyZW50Tm9kZS5zZXRBdHRyaWJ1dGUobmFtZSwgdmFsdWUpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGFycmF5UG9wKERPTVB1cmlmeS5yZW1vdmVkKTtcbiAgICAgICAgfSBjYXRjaCAoXykge31cbiAgICAgIH1cblxuICAgICAgLyogRXhlY3V0ZSBhIGhvb2sgaWYgcHJlc2VudCAqL1xuICAgICAgX2V4ZWN1dGVIb29rKCdhZnRlclNhbml0aXplQXR0cmlidXRlcycsIGN1cnJlbnROb2RlLCBudWxsKTtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogX3Nhbml0aXplU2hhZG93RE9NXG4gICAgICpcbiAgICAgKiBAcGFyYW0gIHtEb2N1bWVudEZyYWdtZW50fSBmcmFnbWVudCB0byBpdGVyYXRlIG92ZXIgcmVjdXJzaXZlbHlcbiAgICAgKi9cbiAgICB2YXIgX3Nhbml0aXplU2hhZG93RE9NID0gZnVuY3Rpb24gX3Nhbml0aXplU2hhZG93RE9NKGZyYWdtZW50KSB7XG4gICAgICB2YXIgc2hhZG93Tm9kZSA9IHZvaWQgMDtcbiAgICAgIHZhciBzaGFkb3dJdGVyYXRvciA9IF9jcmVhdGVJdGVyYXRvcihmcmFnbWVudCk7XG5cbiAgICAgIC8qIEV4ZWN1dGUgYSBob29rIGlmIHByZXNlbnQgKi9cbiAgICAgIF9leGVjdXRlSG9vaygnYmVmb3JlU2FuaXRpemVTaGFkb3dET00nLCBmcmFnbWVudCwgbnVsbCk7XG5cbiAgICAgIHdoaWxlIChzaGFkb3dOb2RlID0gc2hhZG93SXRlcmF0b3IubmV4dE5vZGUoKSkge1xuICAgICAgICAvKiBFeGVjdXRlIGEgaG9vayBpZiBwcmVzZW50ICovXG4gICAgICAgIF9leGVjdXRlSG9vaygndXBvblNhbml0aXplU2hhZG93Tm9kZScsIHNoYWRvd05vZGUsIG51bGwpO1xuXG4gICAgICAgIC8qIFNhbml0aXplIHRhZ3MgYW5kIGVsZW1lbnRzICovXG4gICAgICAgIGlmIChfc2FuaXRpemVFbGVtZW50cyhzaGFkb3dOb2RlKSkge1xuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG5cbiAgICAgICAgLyogRGVlcCBzaGFkb3cgRE9NIGRldGVjdGVkICovXG4gICAgICAgIGlmIChzaGFkb3dOb2RlLmNvbnRlbnQgaW5zdGFuY2VvZiBEb2N1bWVudEZyYWdtZW50KSB7XG4gICAgICAgICAgX3Nhbml0aXplU2hhZG93RE9NKHNoYWRvd05vZGUuY29udGVudCk7XG4gICAgICAgIH1cblxuICAgICAgICAvKiBDaGVjayBhdHRyaWJ1dGVzLCBzYW5pdGl6ZSBpZiBuZWNlc3NhcnkgKi9cbiAgICAgICAgX3Nhbml0aXplQXR0cmlidXRlcyhzaGFkb3dOb2RlKTtcbiAgICAgIH1cblxuICAgICAgLyogRXhlY3V0ZSBhIGhvb2sgaWYgcHJlc2VudCAqL1xuICAgICAgX2V4ZWN1dGVIb29rKCdhZnRlclNhbml0aXplU2hhZG93RE9NJywgZnJhZ21lbnQsIG51bGwpO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBTYW5pdGl6ZVxuICAgICAqIFB1YmxpYyBtZXRob2QgcHJvdmlkaW5nIGNvcmUgc2FuaXRhdGlvbiBmdW5jdGlvbmFsaXR5XG4gICAgICpcbiAgICAgKiBAcGFyYW0ge1N0cmluZ3xOb2RlfSBkaXJ0eSBzdHJpbmcgb3IgRE9NIG5vZGVcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gY29uZmlndXJhdGlvbiBvYmplY3RcbiAgICAgKi9cbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgY29tcGxleGl0eVxuICAgIERPTVB1cmlmeS5zYW5pdGl6ZSA9IGZ1bmN0aW9uIChkaXJ0eSwgY2ZnKSB7XG4gICAgICB2YXIgYm9keSA9IHZvaWQgMDtcbiAgICAgIHZhciBpbXBvcnRlZE5vZGUgPSB2b2lkIDA7XG4gICAgICB2YXIgY3VycmVudE5vZGUgPSB2b2lkIDA7XG4gICAgICB2YXIgb2xkTm9kZSA9IHZvaWQgMDtcbiAgICAgIHZhciByZXR1cm5Ob2RlID0gdm9pZCAwO1xuICAgICAgLyogTWFrZSBzdXJlIHdlIGhhdmUgYSBzdHJpbmcgdG8gc2FuaXRpemUuXG4gICAgICAgIERPIE5PVCByZXR1cm4gZWFybHksIGFzIHRoaXMgd2lsbCByZXR1cm4gdGhlIHdyb25nIHR5cGUgaWZcbiAgICAgICAgdGhlIHVzZXIgaGFzIHJlcXVlc3RlZCBhIERPTSBvYmplY3QgcmF0aGVyIHRoYW4gYSBzdHJpbmcgKi9cbiAgICAgIElTX0VNUFRZX0lOUFVUID0gIWRpcnR5O1xuICAgICAgaWYgKElTX0VNUFRZX0lOUFVUKSB7XG4gICAgICAgIGRpcnR5ID0gJzwhLS0+JztcbiAgICAgIH1cblxuICAgICAgLyogU3RyaW5naWZ5LCBpbiBjYXNlIGRpcnR5IGlzIGFuIG9iamVjdCAqL1xuICAgICAgaWYgKHR5cGVvZiBkaXJ0eSAhPT0gJ3N0cmluZycgJiYgIV9pc05vZGUoZGlydHkpKSB7XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1uZWdhdGVkLWNvbmRpdGlvblxuICAgICAgICBpZiAodHlwZW9mIGRpcnR5LnRvU3RyaW5nICE9PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgdGhyb3cgdHlwZUVycm9yQ3JlYXRlKCd0b1N0cmluZyBpcyBub3QgYSBmdW5jdGlvbicpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGRpcnR5ID0gZGlydHkudG9TdHJpbmcoKTtcbiAgICAgICAgICBpZiAodHlwZW9mIGRpcnR5ICE9PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgdGhyb3cgdHlwZUVycm9yQ3JlYXRlKCdkaXJ0eSBpcyBub3QgYSBzdHJpbmcsIGFib3J0aW5nJyk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8qIENoZWNrIHdlIGNhbiBydW4uIE90aGVyd2lzZSBmYWxsIGJhY2sgb3IgaWdub3JlICovXG4gICAgICBpZiAoIURPTVB1cmlmeS5pc1N1cHBvcnRlZCkge1xuICAgICAgICBpZiAoX3R5cGVvZih3aW5kb3cudG9TdGF0aWNIVE1MKSA9PT0gJ29iamVjdCcgfHwgdHlwZW9mIHdpbmRvdy50b1N0YXRpY0hUTUwgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICBpZiAodHlwZW9mIGRpcnR5ID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgcmV0dXJuIHdpbmRvdy50b1N0YXRpY0hUTUwoZGlydHkpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGlmIChfaXNOb2RlKGRpcnR5KSkge1xuICAgICAgICAgICAgcmV0dXJuIHdpbmRvdy50b1N0YXRpY0hUTUwoZGlydHkub3V0ZXJIVE1MKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gZGlydHk7XG4gICAgICB9XG5cbiAgICAgIC8qIEFzc2lnbiBjb25maWcgdmFycyAqL1xuICAgICAgaWYgKCFTRVRfQ09ORklHKSB7XG4gICAgICAgIF9wYXJzZUNvbmZpZyhjZmcpO1xuICAgICAgfVxuXG4gICAgICAvKiBDbGVhbiB1cCByZW1vdmVkIGVsZW1lbnRzICovXG4gICAgICBET01QdXJpZnkucmVtb3ZlZCA9IFtdO1xuXG4gICAgICAvKiBDaGVjayBpZiBkaXJ0eSBpcyBjb3JyZWN0bHkgdHlwZWQgZm9yIElOX1BMQUNFICovXG4gICAgICBpZiAodHlwZW9mIGRpcnR5ID09PSAnc3RyaW5nJykge1xuICAgICAgICBJTl9QTEFDRSA9IGZhbHNlO1xuICAgICAgfVxuXG4gICAgICBpZiAoSU5fUExBQ0UpIHtcbiAgICAgICAgLyogRG8gc29tZSBlYXJseSBwcmUtc2FuaXRpemF0aW9uIHRvIGF2b2lkIHVuc2FmZSByb290IG5vZGVzICovXG4gICAgICAgIGlmIChkaXJ0eS5ub2RlTmFtZSkge1xuICAgICAgICAgIHZhciB0YWdOYW1lID0gdHJhbnNmb3JtQ2FzZUZ1bmMoZGlydHkubm9kZU5hbWUpO1xuICAgICAgICAgIGlmICghQUxMT1dFRF9UQUdTW3RhZ05hbWVdIHx8IEZPUkJJRF9UQUdTW3RhZ05hbWVdKSB7XG4gICAgICAgICAgICB0aHJvdyB0eXBlRXJyb3JDcmVhdGUoJ3Jvb3Qgbm9kZSBpcyBmb3JiaWRkZW4gYW5kIGNhbm5vdCBiZSBzYW5pdGl6ZWQgaW4tcGxhY2UnKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAoZGlydHkgaW5zdGFuY2VvZiBOb2RlKSB7XG4gICAgICAgIC8qIElmIGRpcnR5IGlzIGEgRE9NIGVsZW1lbnQsIGFwcGVuZCB0byBhbiBlbXB0eSBkb2N1bWVudCB0byBhdm9pZFxuICAgICAgICAgICBlbGVtZW50cyBiZWluZyBzdHJpcHBlZCBieSB0aGUgcGFyc2VyICovXG4gICAgICAgIGJvZHkgPSBfaW5pdERvY3VtZW50KCc8IS0tLS0+Jyk7XG4gICAgICAgIGltcG9ydGVkTm9kZSA9IGJvZHkub3duZXJEb2N1bWVudC5pbXBvcnROb2RlKGRpcnR5LCB0cnVlKTtcbiAgICAgICAgaWYgKGltcG9ydGVkTm9kZS5ub2RlVHlwZSA9PT0gMSAmJiBpbXBvcnRlZE5vZGUubm9kZU5hbWUgPT09ICdCT0RZJykge1xuICAgICAgICAgIC8qIE5vZGUgaXMgYWxyZWFkeSBhIGJvZHksIHVzZSBhcyBpcyAqL1xuICAgICAgICAgIGJvZHkgPSBpbXBvcnRlZE5vZGU7XG4gICAgICAgIH0gZWxzZSBpZiAoaW1wb3J0ZWROb2RlLm5vZGVOYW1lID09PSAnSFRNTCcpIHtcbiAgICAgICAgICBib2R5ID0gaW1wb3J0ZWROb2RlO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSB1bmljb3JuL3ByZWZlci1kb20tbm9kZS1hcHBlbmRcbiAgICAgICAgICBib2R5LmFwcGVuZENoaWxkKGltcG9ydGVkTm9kZSk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8qIEV4aXQgZGlyZWN0bHkgaWYgd2UgaGF2ZSBub3RoaW5nIHRvIGRvICovXG4gICAgICAgIGlmICghUkVUVVJOX0RPTSAmJiAhU0FGRV9GT1JfVEVNUExBVEVTICYmICFXSE9MRV9ET0NVTUVOVCAmJlxuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgdW5pY29ybi9wcmVmZXItaW5jbHVkZXNcbiAgICAgICAgZGlydHkuaW5kZXhPZignPCcpID09PSAtMSkge1xuICAgICAgICAgIHJldHVybiB0cnVzdGVkVHlwZXNQb2xpY3kgJiYgUkVUVVJOX1RSVVNURURfVFlQRSA/IHRydXN0ZWRUeXBlc1BvbGljeS5jcmVhdGVIVE1MKGRpcnR5KSA6IGRpcnR5O1xuICAgICAgICB9XG5cbiAgICAgICAgLyogSW5pdGlhbGl6ZSB0aGUgZG9jdW1lbnQgdG8gd29yayBvbiAqL1xuICAgICAgICBib2R5ID0gX2luaXREb2N1bWVudChkaXJ0eSk7XG5cbiAgICAgICAgLyogQ2hlY2sgd2UgaGF2ZSBhIERPTSBub2RlIGZyb20gdGhlIGRhdGEgKi9cbiAgICAgICAgaWYgKCFib2R5KSB7XG4gICAgICAgICAgcmV0dXJuIFJFVFVSTl9ET00gPyBudWxsIDogUkVUVVJOX1RSVVNURURfVFlQRSA/IGVtcHR5SFRNTCA6ICcnO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8qIFJlbW92ZSBmaXJzdCBlbGVtZW50IG5vZGUgKG91cnMpIGlmIEZPUkNFX0JPRFkgaXMgc2V0ICovXG4gICAgICBpZiAoYm9keSAmJiBGT1JDRV9CT0RZKSB7XG4gICAgICAgIF9mb3JjZVJlbW92ZShib2R5LmZpcnN0Q2hpbGQpO1xuICAgICAgfVxuXG4gICAgICAvKiBHZXQgbm9kZSBpdGVyYXRvciAqL1xuICAgICAgdmFyIG5vZGVJdGVyYXRvciA9IF9jcmVhdGVJdGVyYXRvcihJTl9QTEFDRSA/IGRpcnR5IDogYm9keSk7XG5cbiAgICAgIC8qIE5vdyBzdGFydCBpdGVyYXRpbmcgb3ZlciB0aGUgY3JlYXRlZCBkb2N1bWVudCAqL1xuICAgICAgd2hpbGUgKGN1cnJlbnROb2RlID0gbm9kZUl0ZXJhdG9yLm5leHROb2RlKCkpIHtcbiAgICAgICAgLyogRml4IElFJ3Mgc3RyYW5nZSBiZWhhdmlvciB3aXRoIG1hbmlwdWxhdGVkIHRleHROb2RlcyAjODkgKi9cbiAgICAgICAgaWYgKGN1cnJlbnROb2RlLm5vZGVUeXBlID09PSAzICYmIGN1cnJlbnROb2RlID09PSBvbGROb2RlKSB7XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cblxuICAgICAgICAvKiBTYW5pdGl6ZSB0YWdzIGFuZCBlbGVtZW50cyAqL1xuICAgICAgICBpZiAoX3Nhbml0aXplRWxlbWVudHMoY3VycmVudE5vZGUpKSB7XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cblxuICAgICAgICAvKiBTaGFkb3cgRE9NIGRldGVjdGVkLCBzYW5pdGl6ZSBpdCAqL1xuICAgICAgICBpZiAoY3VycmVudE5vZGUuY29udGVudCBpbnN0YW5jZW9mIERvY3VtZW50RnJhZ21lbnQpIHtcbiAgICAgICAgICBfc2FuaXRpemVTaGFkb3dET00oY3VycmVudE5vZGUuY29udGVudCk7XG4gICAgICAgIH1cblxuICAgICAgICAvKiBDaGVjayBhdHRyaWJ1dGVzLCBzYW5pdGl6ZSBpZiBuZWNlc3NhcnkgKi9cbiAgICAgICAgX3Nhbml0aXplQXR0cmlidXRlcyhjdXJyZW50Tm9kZSk7XG5cbiAgICAgICAgb2xkTm9kZSA9IGN1cnJlbnROb2RlO1xuICAgICAgfVxuXG4gICAgICBvbGROb2RlID0gbnVsbDtcblxuICAgICAgLyogSWYgd2Ugc2FuaXRpemVkIGBkaXJ0eWAgaW4tcGxhY2UsIHJldHVybiBpdC4gKi9cbiAgICAgIGlmIChJTl9QTEFDRSkge1xuICAgICAgICByZXR1cm4gZGlydHk7XG4gICAgICB9XG5cbiAgICAgIC8qIFJldHVybiBzYW5pdGl6ZWQgc3RyaW5nIG9yIERPTSAqL1xuICAgICAgaWYgKFJFVFVSTl9ET00pIHtcbiAgICAgICAgaWYgKFJFVFVSTl9ET01fRlJBR01FTlQpIHtcbiAgICAgICAgICByZXR1cm5Ob2RlID0gY3JlYXRlRG9jdW1lbnRGcmFnbWVudC5jYWxsKGJvZHkub3duZXJEb2N1bWVudCk7XG5cbiAgICAgICAgICB3aGlsZSAoYm9keS5maXJzdENoaWxkKSB7XG4gICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgdW5pY29ybi9wcmVmZXItZG9tLW5vZGUtYXBwZW5kXG4gICAgICAgICAgICByZXR1cm5Ob2RlLmFwcGVuZENoaWxkKGJvZHkuZmlyc3RDaGlsZCk7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJldHVybk5vZGUgPSBib2R5O1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKEFMTE9XRURfQVRUUi5zaGFkb3dyb290KSB7XG4gICAgICAgICAgLypcbiAgICAgICAgICAgIEFkb3B0Tm9kZSgpIGlzIG5vdCB1c2VkIGJlY2F1c2UgaW50ZXJuYWwgc3RhdGUgaXMgbm90IHJlc2V0XG4gICAgICAgICAgICAoZS5nLiB0aGUgcGFzdCBuYW1lcyBtYXAgb2YgYSBIVE1MRm9ybUVsZW1lbnQpLCB0aGlzIGlzIHNhZmVcbiAgICAgICAgICAgIGluIHRoZW9yeSBidXQgd2Ugd291bGQgcmF0aGVyIG5vdCByaXNrIGFub3RoZXIgYXR0YWNrIHZlY3Rvci5cbiAgICAgICAgICAgIFRoZSBzdGF0ZSB0aGF0IGlzIGNsb25lZCBieSBpbXBvcnROb2RlKCkgaXMgZXhwbGljaXRseSBkZWZpbmVkXG4gICAgICAgICAgICBieSB0aGUgc3BlY3MuXG4gICAgICAgICAgKi9cbiAgICAgICAgICByZXR1cm5Ob2RlID0gaW1wb3J0Tm9kZS5jYWxsKG9yaWdpbmFsRG9jdW1lbnQsIHJldHVybk5vZGUsIHRydWUpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHJldHVybk5vZGU7XG4gICAgICB9XG5cbiAgICAgIHZhciBzZXJpYWxpemVkSFRNTCA9IFdIT0xFX0RPQ1VNRU5UID8gYm9keS5vdXRlckhUTUwgOiBib2R5LmlubmVySFRNTDtcblxuICAgICAgLyogU2FuaXRpemUgZmluYWwgc3RyaW5nIHRlbXBsYXRlLXNhZmUgKi9cbiAgICAgIGlmIChTQUZFX0ZPUl9URU1QTEFURVMpIHtcbiAgICAgICAgc2VyaWFsaXplZEhUTUwgPSBzdHJpbmdSZXBsYWNlKHNlcmlhbGl6ZWRIVE1MLCBNVVNUQUNIRV9FWFBSJCQxLCAnICcpO1xuICAgICAgICBzZXJpYWxpemVkSFRNTCA9IHN0cmluZ1JlcGxhY2Uoc2VyaWFsaXplZEhUTUwsIEVSQl9FWFBSJCQxLCAnICcpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gdHJ1c3RlZFR5cGVzUG9saWN5ICYmIFJFVFVSTl9UUlVTVEVEX1RZUEUgPyB0cnVzdGVkVHlwZXNQb2xpY3kuY3JlYXRlSFRNTChzZXJpYWxpemVkSFRNTCkgOiBzZXJpYWxpemVkSFRNTDtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogUHVibGljIG1ldGhvZCB0byBzZXQgdGhlIGNvbmZpZ3VyYXRpb24gb25jZVxuICAgICAqIHNldENvbmZpZ1xuICAgICAqXG4gICAgICogQHBhcmFtIHtPYmplY3R9IGNmZyBjb25maWd1cmF0aW9uIG9iamVjdFxuICAgICAqL1xuICAgIERPTVB1cmlmeS5zZXRDb25maWcgPSBmdW5jdGlvbiAoY2ZnKSB7XG4gICAgICBfcGFyc2VDb25maWcoY2ZnKTtcbiAgICAgIFNFVF9DT05GSUcgPSB0cnVlO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBQdWJsaWMgbWV0aG9kIHRvIHJlbW92ZSB0aGUgY29uZmlndXJhdGlvblxuICAgICAqIGNsZWFyQ29uZmlnXG4gICAgICpcbiAgICAgKi9cbiAgICBET01QdXJpZnkuY2xlYXJDb25maWcgPSBmdW5jdGlvbiAoKSB7XG4gICAgICBDT05GSUcgPSBudWxsO1xuICAgICAgU0VUX0NPTkZJRyA9IGZhbHNlO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBQdWJsaWMgbWV0aG9kIHRvIGNoZWNrIGlmIGFuIGF0dHJpYnV0ZSB2YWx1ZSBpcyB2YWxpZC5cbiAgICAgKiBVc2VzIGxhc3Qgc2V0IGNvbmZpZywgaWYgYW55LiBPdGhlcndpc2UsIHVzZXMgY29uZmlnIGRlZmF1bHRzLlxuICAgICAqIGlzVmFsaWRBdHRyaWJ1dGVcbiAgICAgKlxuICAgICAqIEBwYXJhbSAge3N0cmluZ30gdGFnIFRhZyBuYW1lIG9mIGNvbnRhaW5pbmcgZWxlbWVudC5cbiAgICAgKiBAcGFyYW0gIHtzdHJpbmd9IGF0dHIgQXR0cmlidXRlIG5hbWUuXG4gICAgICogQHBhcmFtICB7c3RyaW5nfSB2YWx1ZSBBdHRyaWJ1dGUgdmFsdWUuXG4gICAgICogQHJldHVybiB7Qm9vbGVhbn0gUmV0dXJucyB0cnVlIGlmIGB2YWx1ZWAgaXMgdmFsaWQuIE90aGVyd2lzZSwgcmV0dXJucyBmYWxzZS5cbiAgICAgKi9cbiAgICBET01QdXJpZnkuaXNWYWxpZEF0dHJpYnV0ZSA9IGZ1bmN0aW9uICh0YWcsIGF0dHIsIHZhbHVlKSB7XG4gICAgICAvKiBJbml0aWFsaXplIHNoYXJlZCBjb25maWcgdmFycyBpZiBuZWNlc3NhcnkuICovXG4gICAgICBpZiAoIUNPTkZJRykge1xuICAgICAgICBfcGFyc2VDb25maWcoe30pO1xuICAgICAgfVxuXG4gICAgICB2YXIgbGNUYWcgPSB0cmFuc2Zvcm1DYXNlRnVuYyh0YWcpO1xuICAgICAgdmFyIGxjTmFtZSA9IHRyYW5zZm9ybUNhc2VGdW5jKGF0dHIpO1xuICAgICAgcmV0dXJuIF9pc1ZhbGlkQXR0cmlidXRlKGxjVGFnLCBsY05hbWUsIHZhbHVlKTtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogQWRkSG9va1xuICAgICAqIFB1YmxpYyBtZXRob2QgdG8gYWRkIERPTVB1cmlmeSBob29rc1xuICAgICAqXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IGVudHJ5UG9pbnQgZW50cnkgcG9pbnQgZm9yIHRoZSBob29rIHRvIGFkZFxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGhvb2tGdW5jdGlvbiBmdW5jdGlvbiB0byBleGVjdXRlXG4gICAgICovXG4gICAgRE9NUHVyaWZ5LmFkZEhvb2sgPSBmdW5jdGlvbiAoZW50cnlQb2ludCwgaG9va0Z1bmN0aW9uKSB7XG4gICAgICBpZiAodHlwZW9mIGhvb2tGdW5jdGlvbiAhPT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIGhvb2tzW2VudHJ5UG9pbnRdID0gaG9va3NbZW50cnlQb2ludF0gfHwgW107XG4gICAgICBhcnJheVB1c2goaG9va3NbZW50cnlQb2ludF0sIGhvb2tGdW5jdGlvbik7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIFJlbW92ZUhvb2tcbiAgICAgKiBQdWJsaWMgbWV0aG9kIHRvIHJlbW92ZSBhIERPTVB1cmlmeSBob29rIGF0IGEgZ2l2ZW4gZW50cnlQb2ludFxuICAgICAqIChwb3BzIGl0IGZyb20gdGhlIHN0YWNrIG9mIGhvb2tzIGlmIG1vcmUgYXJlIHByZXNlbnQpXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gZW50cnlQb2ludCBlbnRyeSBwb2ludCBmb3IgdGhlIGhvb2sgdG8gcmVtb3ZlXG4gICAgICovXG4gICAgRE9NUHVyaWZ5LnJlbW92ZUhvb2sgPSBmdW5jdGlvbiAoZW50cnlQb2ludCkge1xuICAgICAgaWYgKGhvb2tzW2VudHJ5UG9pbnRdKSB7XG4gICAgICAgIGFycmF5UG9wKGhvb2tzW2VudHJ5UG9pbnRdKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogUmVtb3ZlSG9va3NcbiAgICAgKiBQdWJsaWMgbWV0aG9kIHRvIHJlbW92ZSBhbGwgRE9NUHVyaWZ5IGhvb2tzIGF0IGEgZ2l2ZW4gZW50cnlQb2ludFxuICAgICAqXG4gICAgICogQHBhcmFtICB7U3RyaW5nfSBlbnRyeVBvaW50IGVudHJ5IHBvaW50IGZvciB0aGUgaG9va3MgdG8gcmVtb3ZlXG4gICAgICovXG4gICAgRE9NUHVyaWZ5LnJlbW92ZUhvb2tzID0gZnVuY3Rpb24gKGVudHJ5UG9pbnQpIHtcbiAgICAgIGlmIChob29rc1tlbnRyeVBvaW50XSkge1xuICAgICAgICBob29rc1tlbnRyeVBvaW50XSA9IFtdO1xuICAgICAgfVxuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBSZW1vdmVBbGxIb29rc1xuICAgICAqIFB1YmxpYyBtZXRob2QgdG8gcmVtb3ZlIGFsbCBET01QdXJpZnkgaG9va3NcbiAgICAgKlxuICAgICAqL1xuICAgIERPTVB1cmlmeS5yZW1vdmVBbGxIb29rcyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIGhvb2tzID0ge307XG4gICAgfTtcblxuICAgIHJldHVybiBET01QdXJpZnk7XG4gIH1cblxuICB2YXIgcHVyaWZ5ID0gY3JlYXRlRE9NUHVyaWZ5KCk7XG5cbiAgcmV0dXJuIHB1cmlmeTtcblxufSkpO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cHVyaWZ5LmpzLm1hcFxuIiwiaW1wb3J0IHR5cGUgeyBDYWxsYmFja0RlYm91bmNlRnVuY3Rpb24gfSBmcm9tIFwiQGNvbW1vbnMvdHlwZXMvQ29udGFjdHNTZWFyY2hcIjtcbmltcG9ydCAqIGFzIERPTVB1cmlmeSBmcm9tIFwiZG9tcHVyaWZ5XCI7XG5cbmV4cG9ydCBjb25zdCBkZWJvdW5jZSA9IChcbiAgZnVuYzogQ2FsbGJhY2tEZWJvdW5jZUZ1bmN0aW9uLFxuICB3YWl0OiBudW1iZXIsXG4pOiBDYWxsYmFja0RlYm91bmNlRnVuY3Rpb24gPT4ge1xuICBsZXQgdGltZW91dDogUmV0dXJuVHlwZTx0eXBlb2Ygc2V0VGltZW91dD47XG5cbiAgcmV0dXJuIGZ1bmN0aW9uIGV4ZWN1dGVkRnVuY3Rpb24oLi4uYXJnczogdW5rbm93bltdKTogdm9pZCB7XG4gICAgY29uc3QgbGF0ZXIgPSAoKSA9PiB7XG4gICAgICBjbGVhclRpbWVvdXQodGltZW91dCk7XG4gICAgICBmdW5jKC4uLmFyZ3MpO1xuICAgIH07XG5cbiAgICBjbGVhclRpbWVvdXQodGltZW91dCk7XG4gICAgdGltZW91dCA9IHNldFRpbWVvdXQobGF0ZXIsIHdhaXQpO1xuICB9O1xufTtcblxuZXhwb3J0IGNvbnN0IGlzVmFsaWRFbWFpbCA9IChlbWFpbDogc3RyaW5nKTogYm9vbGVhbiA9PiB7XG4gIHJldHVybiAvXlteXFxzQF0rQFteXFxzQF0rXFwuW15cXHNAXSskLy50ZXN0KGVtYWlsKTtcbn07XG5cbmV4cG9ydCBjb25zdCBjbGVhbk1lc3NhZ2VGb3JTbmlwcGV0ID0gKGJvZHk6IHN0cmluZyk6IHN0cmluZyA9PiB7XG4gIGlmICghYm9keSkgcmV0dXJuIFwiXCI7XG4gIHJldHVybiAoXG4gICAgRE9NUHVyaWZ5LnNhbml0aXplKGJvZHksIHtcbiAgICAgIEFMTE9XRURfVEFHUzogW10sXG4gICAgICBLRUVQX0NPTlRFTlQ6IHRydWUsXG4gICAgfSlcbiAgICAgIC8vUmVtb3ZlIGFsbCBIVE1MIGVudGl0aWVzXG4gICAgICA/LnJlcGxhY2UoLygmLis/OykvZywgXCJcIilcbiAgICAgIC8vIFJlbW92ZSBleHRyYSBzcGFjZXNcbiAgICAgID8ucmVwbGFjZSgvXFxzKy9nLCBcIiBcIilcbiAgICAgIC8vIFJlbW92ZSBsZWFkaW5nIGFuZCB0cmFpbGluZyBzcGFjZVxuICAgICAgPy50cmltKClcbiAgICAgIC8vIEFkZCAuLi4gZm9yIGxvbmdlciBtZXNzYWdlXG4gICAgICA/LnN1YnN0cmluZygwLCAxOTApICsgKGJvZHkubGVuZ3RoID4gMTkwID8gXCIuLi5cIiA6IFwiXCIpXG4gICk7XG59O1xuIiwiaW1wb3J0IHR5cGUgeyBNZXNzYWdlLCBQYXJ0aWNpcGFudCB9IGZyb20gXCJAY29tbW9ucy90eXBlcy9OeWxhc1wiO1xuXG5leHBvcnQgZnVuY3Rpb24gaW5jbHVkZXNNeUVtYWlsKFxuICBteUVtYWlsOiBzdHJpbmcsXG4gIG1lc3NhZ2U6IE1lc3NhZ2UsXG4gIGZpZWxkOiBcInRvXCIgfCBcImZyb21cIiB8IFwiY2NcIiB8IFwiYmNjXCIsXG4pOiBib29sZWFuIHtcbiAgaWYgKCFteUVtYWlsKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgcmV0dXJuIG1lc3NhZ2VbZmllbGRdLnNvbWUoXG4gICAgKGUpID0+IGUuZW1haWwudG9Mb3dlckNhc2UoKSA9PT0gbXlFbWFpbC50b0xvd2VyQ2FzZSgpLFxuICApO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gcGFydGljaXBhbnRzV2l0aG91dEdpdmVuRW1haWxzKFxuICBlbWFpbHM6IHN0cmluZ1tdLFxuICBtZXNzYWdlOiBNZXNzYWdlLFxuKTogUGFydGljaXBhbnRbXSB7XG4gIGNvbnN0IGFsbFBhcnRpY2lwYW50cyA9IFtcbiAgICAuLi5tZXNzYWdlLmZyb20sXG4gICAgLi4ubWVzc2FnZS50byxcbiAgICAuLi5tZXNzYWdlLmNjLFxuICAgIC4uLm1lc3NhZ2UuYmNjLFxuICBdO1xuICByZXR1cm4gYWxsUGFydGljaXBhbnRzLmZpbHRlcigoZSkgPT4gIWVtYWlscy5pbmNsdWRlcyhlLmVtYWlsKSk7XG59XG5cbnR5cGUgQnVpbGRQYXJ0aWNpcGFudCA9IHtcbiAgbXlFbWFpbDogc3RyaW5nO1xuICBtZXNzYWdlOiBNZXNzYWdlO1xuICB0eXBlOiBcInJlcGx5XCIgfCBcInJlcGx5X2FsbFwiO1xufTtcblxuZXhwb3J0IGZ1bmN0aW9uIGJ1aWxkUGFydGljaXBhbnRzKHtcbiAgbXlFbWFpbCxcbiAgbWVzc2FnZSxcbiAgdHlwZSxcbn06IEJ1aWxkUGFydGljaXBhbnQpOiBSZWNvcmQ8c3RyaW5nLCBQYXJ0aWNpcGFudFtdPiB7XG4gIGxldCB0bzogUGFydGljaXBhbnRbXSA9IFtdO1xuICBsZXQgY2M6IFBhcnRpY2lwYW50W10gPSBbXTtcbiAgdG8gPSBtZXNzYWdlLnJlcGx5X3RvLmZpbHRlcigoZSkgPT4gZS5lbWFpbCAhPT0gbXlFbWFpbCk7XG4gIC8vIGlmIG1lc3NhZ2UgZG9lcyBub3QgaGF2ZSAncmVwbHlfdG8nOlxuICAvLyAtIEFORCBpZiBtZXNzYWdlIGZyb20gc2VsZiBzZXQgJ3RvJyBhcyB0aGUgZGVmYXVsdCAndG8nXG4gIC8vIC0gZWxzZSBzZXQgJ2Zyb20nIGFzIHRoZSBkZWZhdWx0ICd0bydcbiAgaWYgKCF0by5sZW5ndGgpIHtcbiAgICBpZiAoaW5jbHVkZXNNeUVtYWlsKG15RW1haWwsIG1lc3NhZ2UsIFwiZnJvbVwiKSkge1xuICAgICAgdG8gPSBtZXNzYWdlLnRvO1xuICAgIH0gZWxzZSB7XG4gICAgICB0byA9IG1lc3NhZ2UuZnJvbTtcbiAgICB9XG4gIH1cblxuICBpZiAodHlwZSA9PT0gXCJyZXBseV9hbGxcIikge1xuICAgIGNvbnN0IGZyb21FbWFpbHMgPSBtZXNzYWdlLmZyb20/Lm1hcCgoaSkgPT4gaS5lbWFpbCk7XG4gICAgY2MgPSBbLi4ucGFydGljaXBhbnRzV2l0aG91dEdpdmVuRW1haWxzKFsuLi5mcm9tRW1haWxzLCBteUVtYWlsXSwgbWVzc2FnZSldO1xuICB9XG5cbiAgcmV0dXJuIHsgdG8sIGNjIH07XG59XG5cbmV4cG9ydCBjb25zdCBpc1ZhbGlkUGFydGljaXBhbnQgPSAocGFydGljaXBhbnQ6IFBhcnRpY2lwYW50KTogYm9vbGVhbiA9PiB7XG4gIGlmIChcImVtYWlsXCIgaW4gcGFydGljaXBhbnQgJiYgXCJuYW1lXCIgaW4gcGFydGljaXBhbnQpIHtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuICByZXR1cm4gZmFsc2U7XG59O1xuXG5leHBvcnQgY29uc3QgY2xlYW5QYXJ0aWNpcGFudHMgPSAoY29udGFjdHM6IGFueVtdKTogUGFydGljaXBhbnRbXSA9PiB7XG4gIGNvbnN0IHBhcnRpY2lwYW50cyA9IGNvbnRhY3RzLnJlZHVjZSgocmVzdWx0OiBQYXJ0aWNpcGFudFtdLCBjb250YWN0KSA9PiB7XG4gICAgaWYgKGlzVmFsaWRQYXJ0aWNpcGFudChjb250YWN0KSkge1xuICAgICAgLy8gSWYgaXQgaXMgYSB2YWxpZCBQYXJ0aWNpcGFudCB0eXBlXG4gICAgICByZXN1bHQucHVzaChjb250YWN0KTtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gSWYgaXQgaXMgYSBDb250YWN0IHR5cGUsIGNvbnN1bWVkIC9jb250YWN0cyBhcGlcbiAgICAgIGlmIChcImVtYWlsc1wiIGluIGNvbnRhY3QgJiYgY29udGFjdC5lbWFpbHM/Lmxlbmd0aCA+IDApIHtcbiAgICAgICAgcmVzdWx0LnB1c2goe1xuICAgICAgICAgIG5hbWU6IGAke2NvbnRhY3QuZ2l2ZW5fbmFtZSA/PyBcIlwifSAke2NvbnRhY3Quc3VybmFtZSA/PyBcIlwifWAsXG4gICAgICAgICAgZW1haWw6IGNvbnRhY3QuZW1haWxzWzBdLmVtYWlsLFxuICAgICAgICAgIGNvbnRhY3QsXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gcmVzdWx0O1xuICB9LCBbXSk7XG4gIHJldHVybiBwYXJ0aWNpcGFudHM7XG59O1xuIiwiPHN2ZWx0ZTpvcHRpb25zIHRhZz1cIm55bGFzLWNvbnRhY3RzLXNlYXJjaFwiIGltbXV0YWJsZT17dHJ1ZX0gLz5cblxuPHNjcmlwdCBsYW5nPVwidHNcIj5cbiAgaW1wb3J0IHsgZGVib3VuY2UsIGlzVmFsaWRFbWFpbCB9IGZyb20gXCIuLi9saWIvdXRpbHNcIjtcbiAgaW1wb3J0IHsgdGljayB9IGZyb20gXCJzdmVsdGVcIjtcbiAgaW1wb3J0IHsgY2xlYW5QYXJ0aWNpcGFudHMgfSBmcm9tIFwiQGNvbW1vbnMvbWV0aG9kcy9wYXJ0aWNpcGFudHNcIjtcbiAgaW1wb3J0IHR5cGUgeyBQYXJ0aWNpcGFudCB9IGZyb20gXCJAY29tbW9ucy90eXBlcy9OeWxhc1wiO1xuICBpbXBvcnQgdHlwZSB7XG4gICAgRmV0Y2hDb250YWN0c0NhbGxiYWNrLFxuICAgIENoYW5nZUNhbGxiYWNrLFxuICAgIEJsdXJPcHRpb25zLFxuICB9IGZyb20gXCJAY29tbW9ucy90eXBlcy9Db250YWN0c1NlYXJjaFwiO1xuXG4gIGV4cG9ydCBsZXQgY29udGFjdHM6IFBhcnRpY2lwYW50W10gfCBGZXRjaENvbnRhY3RzQ2FsbGJhY2s7XG5cbiAgZXhwb3J0IGxldCB2YWx1ZTogUGFydGljaXBhbnRbXSA9IFtdO1xuICBleHBvcnQgbGV0IHBsYWNlaG9sZGVyOiBzdHJpbmcgPSBcIlRvXCI7XG4gIGV4cG9ydCBsZXQgc2luZ2xlOiBib29sZWFuID0gZmFsc2U7XG4gIGV4cG9ydCBsZXQgY2hhbmdlOiBDaGFuZ2VDYWxsYmFjayB8IHZvaWQ7XG4gIGV4cG9ydCBsZXQgc2hvd19kcm9wZG93bjogYm9vbGVhbiA9IHRydWU7XG5cbiAgbGV0IHNlbGVjdGVkQ29udGFjdHM6IFBhcnRpY2lwYW50W10gPSBbXTtcbiAgbGV0IHRlcm06IHN0cmluZyA9IFwiXCI7IC8vIFRPRE86IHJlbmFtZSB0byBcInRlcm1cIlxuICBsZXQgY3VycmVudENvbnRhY3RJbmRleCA9IDA7XG4gIGxldCBsb2FkaW5nID0gZmFsc2U7XG4gIGxldCBzZWFyY2hGaWVsZDogSFRNTElucHV0RWxlbWVudDtcbiAgbGV0IGNvbnRhY3RzTGlzdDogUGFydGljaXBhbnRbXSA9IFtdO1xuICBsZXQgaXNPcGVuID0gZmFsc2U7XG5cbiAgLy8gSW5pdGlhbCBzdGF0ZSBzZXR1cFxuICBjb25zdCBpbml0aWFsU2V0dXAgPSAoKSA9PiB7XG4gICAgaWYgKEFycmF5LmlzQXJyYXkoY29udGFjdHMpKSB7XG4gICAgICBjb250YWN0c0xpc3QgPSBjbGVhblBhcnRpY2lwYW50cyhjb250YWN0cyk7XG4gICAgfVxuICAgIGlmIChBcnJheS5pc0FycmF5KHZhbHVlKSkge1xuICAgICAgc2VsZWN0ZWRDb250YWN0cyA9IHZhbHVlO1xuICAgIH1cbiAgfTtcblxuICBjb25zdCBueWxhc0NvbnRhY3RzID0gKCk6IGFueVtdID0+IHtcbiAgICByZXR1cm4gW107XG4gIH07XG4gIGNvbnN0IGdldENvbnRhY3RzU2V0dXAgPSAodGVybTogc3RyaW5nKSA9PiB7XG4gICAgbG9hZGluZyA9IHRydWU7XG4gICAgY29udGFjdHNMaXN0ID0gW107XG4gICAgZ2V0Q29udGFjdHModGVybSk7XG4gIH07XG4gIGNvbnN0IGdldENvbnRhY3RzID0gZGVib3VuY2UoYXN5bmMgKHRlcm06IHN0cmluZykgPT4ge1xuICAgIGxvYWRpbmcgPSB0cnVlO1xuICAgIC8vIEB0cy1pZ25vcmVcbiAgICBjb25zdCBnZXRDb250YWN0c0Z1bmMgPVxuICAgICAgdHlwZW9mIGNvbnRhY3RzID09PSBcImZ1bmN0aW9uXCIgPyBjb250YWN0cyA6IG55bGFzQ29udGFjdHM7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IGNvbnRhY3RzUmVzcG9uc2UgPSBhd2FpdCBnZXRDb250YWN0c0Z1bmModGVybSk7XG4gICAgICBpZiAoQXJyYXkuaXNBcnJheShjb250YWN0c1Jlc3BvbnNlKSkge1xuICAgICAgICBjb250YWN0c0xpc3QgPSBjbGVhblBhcnRpY2lwYW50cyhjb250YWN0c1Jlc3BvbnNlKTtcbiAgICAgIH1cblxuICAgICAgbG9hZGluZyA9IGZhbHNlO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAvLyBUT0RPOiBhZGQgZXJyb3IgaGFuZGxpbmdcbiAgICAgIGxvYWRpbmcgPSBmYWxzZTtcbiAgICB9XG4gIH0sIDM1MCk7XG5cbiAgY29uc3QgcmVtb3ZlQ29udGFjdCA9IChlbWFpbDogc3RyaW5nKSA9PiB7XG4gICAgc2VsZWN0ZWRDb250YWN0cyA9IHNlbGVjdGVkQ29udGFjdHMuZmlsdGVyKChjKSA9PiBjLmVtYWlsICE9PSBlbWFpbCk7XG4gICAgZm9jdXNTZWFyY2goKTtcbiAgfTtcbiAgY29uc3Qgc2VsZWN0Q29udGFjdCA9IChjb250YWN0OiBQYXJ0aWNpcGFudCkgPT4ge1xuICAgIGlmIChzaW5nbGUgJiYgc2VsZWN0ZWRDb250YWN0cy5sZW5ndGggPT09IDEpIHtcbiAgICAgIHNlbGVjdGVkQ29udGFjdHMgPSBbY29udGFjdF07XG4gICAgICBpc09wZW4gPSBmYWxzZTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYgKCFpc1NlbGVjdGVkKGNvbnRhY3QuZW1haWwpKSB7XG4gICAgICBzZWxlY3RlZENvbnRhY3RzID0gWy4uLnNlbGVjdGVkQ29udGFjdHMsIGNvbnRhY3RdO1xuICAgIH1cbiAgICBmb2N1c1NlYXJjaCgpO1xuICB9O1xuXG4gIGNvbnN0IGZvY3VzU2VhcmNoID0gKGU/OiBNb3VzZUV2ZW50KSA9PiB7XG4gICAgaWYgKGU/LnRhcmdldCAmJiBzZWFyY2hGaWVsZCAmJiAoIXNpbmdsZSB8fCAhc2VsZWN0ZWRDb250YWN0cy5sZW5ndGgpKSB7XG4gICAgICBjb25zdCBlbGVtZW50ID0gZS50YXJnZXQgYXMgSFRNTEVsZW1lbnQ7XG4gICAgICBpZiAoZWxlbWVudC50YWdOYW1lICE9PSBcIklOUFVUXCIpIHtcbiAgICAgICAgLy8gaGFuZGxlcyBidWcgd2hlbiBpbnB1dCBpcyBjbGlja2VkLCB0aGUgaW5wdXQgaXMgYmx1cnJlZFxuICAgICAgICBzZWFyY2hGaWVsZC5mb2N1cygpO1xuICAgICAgfVxuICAgICAgaXNPcGVuID0gdHJ1ZTtcbiAgICB9XG4gIH07XG5cbiAgJDogaWYgKHNlYXJjaEZpZWxkKSB7XG4gICAgc2VhcmNoRmllbGQuc2V0QXR0cmlidXRlKFwidGFiaW5kZXhcIiwgXCItMVwiKTtcbiAgICBzZWFyY2hGaWVsZC5mb2N1cygpO1xuICAgIHNlYXJjaEZpZWxkLnJlbW92ZUF0dHJpYnV0ZShcInRhYmluZGV4XCIpO1xuICB9XG5cbiAgY29uc3QgYmx1clNlYXJjaCA9IChvcHRpb25zOiBCbHVyT3B0aW9ucyA9IHt9KSA9PiB7XG4gICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICBpZiAob3B0aW9ucy5hZGRDb250YWN0ICYmICFmaWx0ZXJlZENvbnRhY3RzLmxlbmd0aCAmJiB0ZXJtKSB7XG4gICAgICAgIGhhbmRsZVN1Ym1pdCgpO1xuICAgICAgfVxuICAgICAgaXNPcGVuID0gZmFsc2U7XG4gICAgICB0ZXJtID0gXCJcIjtcbiAgICAgIGlmIChzZWFyY2hGaWVsZCkge1xuICAgICAgICBzZWFyY2hGaWVsZC5ibHVyKCk7XG4gICAgICB9XG4gICAgfSwgb3B0aW9ucy5ibHVySW4gfHwgMjUwKTtcbiAgfTtcbiAgY29uc3QgaGFuZGxlS2V5ZG93biA9IChldmVudDogS2V5Ym9hcmRFdmVudCkgPT4ge1xuICAgIC8vIEJhY2tzcGFjZVxuICAgIGZvY3VzU2VhcmNoKCk7XG5cbiAgICBpZiAoZXZlbnQua2V5ID09PSBcIkJhY2tzcGFjZVwiICYmIHNlbGVjdGVkQ29udGFjdHMubGVuZ3RoICYmICF0ZXJtKSB7XG4gICAgICBzZWxlY3RlZENvbnRhY3RzID0gc2VsZWN0ZWRDb250YWN0cy5zbGljZSgwLCBzZWxlY3RlZENvbnRhY3RzLmxlbmd0aCAtIDEpO1xuICAgIH1cbiAgICBpZiAoZXZlbnQua2V5ID09PSBcIlRhYlwiKSB7XG4gICAgICBoYW5kbGVTdWJtaXQoKTtcbiAgICB9XG4gICAgLy8gRG93bkFycm93XG4gICAgaWYgKGV2ZW50LmtleSA9PT0gXCJBcnJvd0Rvd25cIiAmJiBjb250YWN0c0xpc3QubGVuZ3RoKSB7XG4gICAgICBpZiAoY3VycmVudENvbnRhY3RJbmRleCA8PSBjb250YWN0c0xpc3QubGVuZ3RoKSB7XG4gICAgICAgIGN1cnJlbnRDb250YWN0SW5kZXggKz0gMTtcbiAgICAgIH1cbiAgICB9XG4gICAgLy8gVXBBcnJvd1xuICAgIGlmIChldmVudC5rZXkgPT09IFwiQXJyb3dVcFwiICYmIGNvbnRhY3RzTGlzdC5sZW5ndGgpIHtcbiAgICAgIGlmIChjdXJyZW50Q29udGFjdEluZGV4ICE9IDApIHtcbiAgICAgICAgY3VycmVudENvbnRhY3RJbmRleCAtPSAxO1xuICAgICAgfVxuICAgIH1cbiAgICBpZiAoZXZlbnQua2V5ID09PSBcIkVzY2FwZVwiICYmIGNvbnRhY3RzTGlzdC5sZW5ndGgpIHtcbiAgICAgIGJsdXJTZWFyY2goKTtcbiAgICB9XG4gIH07XG4gIGNvbnN0IHNldEFjdGl2ZUNvbnRhY3QgPSAoaW5kZXg6IG51bWJlcikgPT4ge1xuICAgIGN1cnJlbnRDb250YWN0SW5kZXggPSBpbmRleDtcbiAgfTtcbiAgY29uc3QgaGFuZGxlU3VibWl0ID0gKCkgPT4ge1xuICAgIGlmIChzaW5nbGUgJiYgc2VsZWN0ZWRDb250YWN0cy5sZW5ndGggPT09IDEpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYgKGZpbHRlcmVkQ29udGFjdHMubGVuZ3RoKSB7XG4gICAgICBpZiAoIWlzU2VsZWN0ZWQoZmlsdGVyZWRDb250YWN0c1tjdXJyZW50Q29udGFjdEluZGV4XS5lbWFpbCkpIHtcbiAgICAgICAgc2VsZWN0ZWRDb250YWN0cyA9IFtcbiAgICAgICAgICAuLi5zZWxlY3RlZENvbnRhY3RzLFxuICAgICAgICAgIGZpbHRlcmVkQ29udGFjdHNbY3VycmVudENvbnRhY3RJbmRleF0sXG4gICAgICAgIF07XG4gICAgICAgIGN1cnJlbnRDb250YWN0SW5kZXggPSAwO1xuICAgICAgICBibHVyU2VhcmNoKHsgYmx1ckluOiAwIH0pO1xuICAgICAgfVxuICAgIH1cbiAgICBpZiAoIWlzU2VsZWN0ZWQodGVybSkgJiYgdGVybSkge1xuICAgICAgaWYgKGlzVmFsaWRFbWFpbCh0ZXJtKSkge1xuICAgICAgICBzZWxlY3RlZENvbnRhY3RzID0gWy4uLnNlbGVjdGVkQ29udGFjdHMsIHsgZW1haWw6IHRlcm0gfV07XG4gICAgICAgIGN1cnJlbnRDb250YWN0SW5kZXggPSAwO1xuICAgICAgICBibHVyU2VhcmNoKHsgYmx1ckluOiAwIH0pO1xuICAgICAgfVxuICAgIH1cbiAgfTtcbiAgY29uc3QgaXNTZWxlY3RlZCA9IChlbWFpbDogc3RyaW5nKSA9PiB7XG4gICAgcmV0dXJuIHNlbGVjdGVkQ29udGFjdHMubWFwKChjKSA9PiBjLmVtYWlsKS5pbmNsdWRlcyhlbWFpbCk7XG4gIH07XG5cbiAgJDogaWYgKHNlbGVjdGVkQ29udGFjdHMgJiYgY2hhbmdlKSB7XG4gICAgdGljaygpLnRoZW4oKCkgPT4ge1xuICAgICAgLy8gQHRzLWlnbm9yZVxuICAgICAgY2hhbmdlKHNlbGVjdGVkQ29udGFjdHMpO1xuICAgIH0pO1xuICB9XG4gICQ6IGlmIChjb250YWN0cyB8fCB2YWx1ZSkgaW5pdGlhbFNldHVwKCk7XG4gICQ6IGlmIChpc09wZW4gJiYgdHlwZW9mIGNvbnRhY3RzID09PSBcImZ1bmN0aW9uXCIpIGdldENvbnRhY3RzU2V0dXAodGVybSk7XG4gICQ6IGZpbHRlcmVkQ29udGFjdHMgPSBjb250YWN0c0xpc3QuZmlsdGVyKChpdGVtKSA9PiB7XG4gICAgY29uc3QgdHJtOiBzdHJpbmcgPSB0ZXJtID8gdGVybS50b0xvd2VyQ2FzZSgpIDogXCJcIjtcbiAgICBjb25zdCBuYW1lOiBzdHJpbmcgPSBpdGVtLm5hbWUgPyBpdGVtLm5hbWUudG9Mb3dlckNhc2UoKSA6IFwiXCI7XG4gICAgY29uc3QgZW1haWw6IHN0cmluZyA9IGl0ZW0uZW1haWwgPyBpdGVtLmVtYWlsLnRvTG93ZXJDYXNlKCkgOiBcIlwiO1xuICAgIGNvbnN0IGluY2x1ZGVzTmFtZSA9IG5hbWUuaW5jbHVkZXModHJtKTtcbiAgICBjb25zdCBpbmNsdWRlc0VtYWlsID0gZW1haWwuaW5jbHVkZXModHJtKTtcbiAgICBjb25zdCBtYXRjaGVkID0gaW5jbHVkZXNOYW1lIHx8IGluY2x1ZGVzRW1haWw7XG4gICAgcmV0dXJuIG1hdGNoZWQgJiYgIWlzU2VsZWN0ZWQoaXRlbS5lbWFpbCk7XG4gIH0pO1xuICAkOiBpZiAoZmlsdGVyZWRDb250YWN0cykge1xuICAgIGN1cnJlbnRDb250YWN0SW5kZXggPSAwO1xuICB9XG48L3NjcmlwdD5cblxuPHN0eWxlIGxhbmc9XCJzY3NzXCI+XG4gIDpyb290IHtcbiAgICBmb250LWZhbWlseTogc2Fucy1zZXJpZjtcbiAgfVxuICAuY29udGFjdHMtY29udGFpbmVyIHtcbiAgICBkaXNwbGF5OiBmbGV4O1xuICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gICAgZmxleC13cmFwOiB3cmFwO1xuICAgIHBhZGRpbmc6IDAuNHJlbSB2YXIoLS1vdXRlci1wYWRkaW5nKTtcbiAgICBib3JkZXItYm90dG9tOiAxcHggc29saWQgdmFyKC0tYm9yZGVyKTtcbiAgICAqOmZvY3VzIHtcbiAgICAgIG91dGxpbmU6IDVweCBhdXRvIHZhcigtLXByaW1hcnkpO1xuICAgIH1cbiAgfVxuICAuY29udGFjdHMtY29udGFpbmVyID4gZGl2IHtcbiAgICBwYWRkaW5nLWJvdHRvbTogMC4xcmVtO1xuICAgIHBhZGRpbmctcmlnaHQ6IDAuMXJlbTtcbiAgfVxuICAuY29udGFjdC1pdGVtIHtcbiAgICBkaXNwbGF5OiBpbmxpbmUtZmxleDtcbiAgICBiYWNrZ3JvdW5kOiB2YXIoLS1wcmltYXJ5LWxpZ2h0KTtcbiAgICBjb2xvcjogdmFyKC0tcHJpbWFyeSk7XG4gICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgICBib3JkZXItcmFkaXVzOiBjYWxjKHZhcigtLWJvcmRlci1yYWRpdXMpIC8gMik7XG4gICAgcGFkZGluZzogMC4ycmVtIDAuOHJlbTtcbiAgICBtYXJnaW4tcmlnaHQ6IDAuMjVyZW07XG4gICAgbWFyZ2luLXRvcDogMnB4O1xuICAgIG1hcmdpbi1ib3R0b206IDJweDtcbiAgfVxuICAuY29udGFjdC1pdGVtID4gYnV0dG9uIHtcbiAgICBjb2xvcjogdmFyKC0tdGV4dC1zZWNvbmRhcnkpO1xuICAgIGJvcmRlcjogbm9uZTtcbiAgICBiYWNrZ3JvdW5kOiBub25lO1xuICAgIHBhZGRpbmc6IDJweCA0cHg7XG4gICAgZm9udC13ZWlnaHQ6IGJvbGQ7XG4gICAgZm9udC1zaXplOiAxM3B4O1xuICAgIGN1cnNvcjogcG9pbnRlcjtcbiAgfVxuICAuY29udGFjdC1pdGVtX19uYW1lIHtcbiAgICBjb2xvcjogdmFyKC0tdGV4dC1zZWNvbmRhcnkpO1xuICAgIGZvbnQtc2l6ZTogMTJweDtcbiAgICBwYWRkaW5nLXJpZ2h0OiAwLjc1cmVtO1xuICB9XG4gIC5kcm9wZG93biB7XG4gICAgd2lkdGg6IDEwMCU7XG4gICAgcG9zaXRpb246IHJlbGF0aXZlO1xuICAgIGRpc3BsYXk6IGlubGluZS1ibG9jaztcbiAgfVxuXG4gIC5kcm9wZG93bi1jb250ZW50IHtcbiAgICBkaXNwbGF5OiBibG9jaztcbiAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAgbWF4LWhlaWdodDogMzUwcHg7XG4gICAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZCk7XG4gICAgbGVmdDogY2FsYyh2YXIoLS1vdXRlci1wYWRkaW5nKSAvIDIpO1xuICAgIHJpZ2h0OiBjYWxjKHZhcigtLW91dGVyLXBhZGRpbmcpIC8gMik7XG4gICAgb3ZlcmZsb3cteTogYXV0bztcbiAgICBjb2xvcjogdmFyKC0tdGV4dCk7XG4gICAgYm94LXNoYWRvdzogdmFyKC0tc2hhZG93KTtcbiAgICB6LWluZGV4OiAxO1xuICAgIGJvcmRlci1yYWRpdXM6IGNhbGModmFyKC0tYm9yZGVyLXJhZGl1cykgLyAyKTtcbiAgfVxuXG4gIC5kcm9wZG93bi1pdGVtIHtcbiAgICBjdXJzb3I6IHBvaW50ZXI7XG4gICAgcGFkZGluZzogdmFyKC0tb3V0ZXItcGFkZGluZyk7XG4gICAgZm9udC1zaXplOiB2YXIoLS1mb250LXNpemUtc21hbGwpO1xuICAgIGJhY2tncm91bmQ6IHZhcigtLXByaW1hcnktbGlnaHQpO1xuXG4gICAgJi5hY3RpdmUge1xuICAgICAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tcHJpbWFyeSk7XG4gICAgICBjb2xvcjogd2hpdGU7XG4gICAgICAuZHJvcGRvd24taXRlbV9fZW1haWwge1xuICAgICAgICBjb2xvcjogdmFyKC0tYmcpICFpbXBvcnRhbnQ7XG4gICAgICB9XG4gICAgfVxuICAgICYuc2VsZWN0ZWQge1xuICAgICAgb3BhY2l0eTogMC4zO1xuICAgIH1cbiAgICAmX19uYW1lIHtcbiAgICAgIGZvbnQtd2VpZ2h0OiBib2xkO1xuICAgICAgZGlzcGxheTogaW5saW5lLWZsZXg7XG4gICAgfVxuICAgICZfX2VtYWlsIHtcbiAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LWxpZ2h0KTtcbiAgICAgIGRpc3BsYXk6IGlubGluZS1mbGV4O1xuICAgICAgbWFyZ2luLWxlZnQ6IDAuMjVyZW07XG4gICAgfVxuICB9XG4gIC5zZWFyY2gtZmllbGQge1xuICAgIGJvcmRlcjogbm9uZTtcbiAgICBjb2xvcjogdmFyKC0tdGV4dCk7XG4gICAgYmFja2dyb3VuZDogdmFyKC0tYmcpO1xuICAgIG1pbi13aWR0aDogMTAwJTtcbiAgICAmOmZvY3VzIHtcbiAgICAgIHdpZHRoOiAxMDBweDtcbiAgICB9XG4gIH1cbiAgLnNlYXJjaC1mb3JtIHtcbiAgICBkaXNwbGF5OiBmbGV4O1xuICAgIHBhZGRpbmctdG9wOiAwLjVyZW07XG4gICAgcGFkZGluZy1ib3R0b206IDAuNXJlbTtcbiAgICBhbGlnbi1pdGVtczogY2VudGVyO1xuICAgIG1pbi13aWR0aDogMzIwcHg7XG4gIH1cblxuICAuY29udGFjdHMtcmVzdWx0cyB7XG4gICAgZGlzcGxheTogZmxleDtcbiAgICBhbGlnbi1pdGVtczogY2VudGVyO1xuICB9XG5cbiAgLmNvbnRhY3RzLXBsYWNlaG9sZGVyIHtcbiAgICBmb250LXNpemU6IHZhcigtLWZvbnQtc2l6ZS1zbWFsbCk7XG4gICAgbWFyZ2luLXJpZ2h0OiAxMHB4O1xuICAgIG1pbi13aWR0aDogMzBweDtcbiAgICBkaXNwbGF5OiBmbGV4O1xuICAgIGNvbG9yOiB2YXIoLS10ZXh0LWxpZ2h0KTtcbiAgfVxuPC9zdHlsZT5cblxuPGRpdiBjbGFzcz1cImRyb3Bkb3duXCI+XG4gIDxkaXYgY2xhc3M9XCJjb250YWN0cy1jb250YWluZXJcIiBvbjpjbGljaz17Zm9jdXNTZWFyY2h9PlxuICAgIDxkaXYgY2xhc3M9XCJjb250YWN0cy1yZXN1bHRzXCI+XG4gICAgICA8ZGl2IGNsYXNzPVwiY29udGFjdHMtcGxhY2Vob2xkZXJcIj57cGxhY2Vob2xkZXJ9PC9kaXY+XG4gICAgICA8ZGl2IGNsYXNzPVwiY29udGFjdHMtcmVzdWx0cy1pbm5lclwiPlxuICAgICAgICB7I2VhY2ggc2VsZWN0ZWRDb250YWN0cyBhcyBjb250YWN0IChjb250YWN0LmVtYWlsKX1cbiAgICAgICAgICA8ZGl2IGNsYXNzPVwiY29udGFjdC1pdGVtXCI+XG4gICAgICAgICAgICA8c3BhbiBjbGFzcz1cImNvbnRhY3QtaXRlbV9fbmFtZVwiPlxuICAgICAgICAgICAgICB7I2lmIGNvbnRhY3QubmFtZX1cbiAgICAgICAgICAgICAgICA8c3Ryb25nPntjb250YWN0Lm5hbWV9PC9zdHJvbmc+XG4gICAgICAgICAgICAgICAge2A8JHtjb250YWN0LmVtYWlsfT5gfVxuICAgICAgICAgICAgICB7OmVsc2V9e2NvbnRhY3QuZW1haWx9ey9pZn1cbiAgICAgICAgICAgIDwvc3Bhbj5cbiAgICAgICAgICAgIDxidXR0b25cbiAgICAgICAgICAgICAgdHlwZT1cImJ1dHRvblwiXG4gICAgICAgICAgICAgIG5hbWU9XCJ0ZXJtXCJcbiAgICAgICAgICAgICAgb246Y2xpY2s9eygpID0+IHJlbW92ZUNvbnRhY3QoY29udGFjdC5lbWFpbCl9PiZ0aW1lczs8L2J1dHRvbj5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgey9lYWNofVxuICAgICAgPC9kaXY+XG4gICAgPC9kaXY+XG5cbiAgICB7I2lmIChzaW5nbGUgJiYgIXNlbGVjdGVkQ29udGFjdHMubGVuZ3RoKSB8fCAhc2luZ2xlfVxuICAgICAgPGZvcm0gb246c3VibWl0fHByZXZlbnREZWZhdWx0PXtoYW5kbGVTdWJtaXR9IGNsYXNzPVwic2VhcmNoLWZvcm1cIj5cbiAgICAgICAgPGlucHV0XG4gICAgICAgICAgZGF0YS1jeT1cImNvbnRhY3RzLXNlYXJjaC1maWVsZFwiXG4gICAgICAgICAgdHlwZT1cInRleHRcIlxuICAgICAgICAgIG5hbWU9XCJlbWFpbFwiXG4gICAgICAgICAgYXV0b2NvbXBsZXRlPVwib2ZmXCJcbiAgICAgICAgICBjbGFzcz1cInNlYXJjaC1maWVsZFwiXG4gICAgICAgICAgYmluZDp0aGlzPXtzZWFyY2hGaWVsZH1cbiAgICAgICAgICBvbjprZXlkb3duPXtoYW5kbGVLZXlkb3dufVxuICAgICAgICAgIG9uOmJsdXI9eygpID0+IHtcbiAgICAgICAgICAgIGJsdXJTZWFyY2goeyBhZGRDb250YWN0OiB0cnVlIH0pO1xuICAgICAgICAgIH19XG4gICAgICAgICAgYmluZDp2YWx1ZT17dGVybX0gLz5cbiAgICAgIDwvZm9ybT5cbiAgICB7L2lmfVxuICA8L2Rpdj5cbiAgeyNpZiBpc09wZW4gJiYgc2hvd19kcm9wZG93bn1cbiAgICA8ZGl2IGNsYXNzPVwiZHJvcGRvd24tY29udGVudFwiPlxuICAgICAgeyNpZiBsb2FkaW5nICYmICFmaWx0ZXJlZENvbnRhY3RzLmxlbmd0aH1cbiAgICAgICAgPHAgY2xhc3M9XCJkcm9wZG93bi1pdGVtXCI+TG9hZGluZy4uLjwvcD5cbiAgICAgIHs6ZWxzZSBpZiBmaWx0ZXJlZENvbnRhY3RzLmxlbmd0aH1cbiAgICAgICAgeyNlYWNoIGZpbHRlcmVkQ29udGFjdHMgYXMgY29udGFjdCwgaX1cbiAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICBjbGFzcz1cImRyb3Bkb3duLWl0ZW1cIlxuICAgICAgICAgICAgY2xhc3M6YWN0aXZlPXtjdXJyZW50Q29udGFjdEluZGV4ID09PSBpfVxuICAgICAgICAgICAgY2xhc3M6c2VsZWN0ZWQ9e2lzU2VsZWN0ZWQoY29udGFjdC5lbWFpbCl9XG4gICAgICAgICAgICBvbjptb3VzZWRvd249eygpID0+IHNlbGVjdENvbnRhY3QoY29udGFjdCl9XG4gICAgICAgICAgICBvbjptb3VzZWVudGVyPXsoKSA9PiBzZXRBY3RpdmVDb250YWN0KGkpfT5cbiAgICAgICAgICAgIHsjaWYgY29udGFjdC5uYW1lfVxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZHJvcGRvd24taXRlbV9fbmFtZVwiPntjb250YWN0Lm5hbWV9PC9kaXY+XG4gICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJkcm9wZG93bi1pdGVtX19lbWFpbFwiPntjb250YWN0LmVtYWlsfTwvZGl2PlxuICAgICAgICAgICAgezplbHNlfVxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZHJvcGRvd24taXRlbV9fbmFtZVwiPntjb250YWN0LmVtYWlsfTwvZGl2PlxuICAgICAgICAgICAgey9pZn1cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgey9lYWNofVxuICAgICAgey9pZn1cbiAgICA8L2Rpdj5cbiAgey9pZn1cbjwvZGl2PlxuIiwiZXhwb3J0IGNvbnN0IERpc2FsbG93ZWRDb250ZW50VHlwZXMgPSBbXG4gIFwibWVzc2FnZS9kZWxpdmVyeS1zdGF0dXNcIixcbiAgXCJtZXNzYWdlL3JmYzgyMlwiLFxuXTtcblxuZXhwb3J0IGNvbnN0IElubGluZUltYWdlVHlwZXMgPSBbXG4gIFwiaW1hZ2UvcG5nXCIsXG4gIFwiaW1hZ2UvYXBuZ1wiLFxuICBcImltYWdlL2F2aWZcIixcbiAgXCJpbWFnZS9naWZcIixcbiAgXCJpbWFnZS9qcGVnXCIsXG4gIFwiaW1hZ2Uvc3ZnK3htbFwiLFxuXTtcbiIsImltcG9ydCB0eXBlIHsgRmlsZSB9IGZyb20gXCJAY29tbW9ucy90eXBlcy9OeWxhc1wiO1xuaW1wb3J0IHsgRGlzYWxsb3dlZENvbnRlbnRUeXBlcyB9IGZyb20gXCJAY29tbW9ucy9jb25zdGFudHMvYXR0YWNobWVudC1jb250ZW50LXR5cGVzXCI7XG5cbmV4cG9ydCBjb25zdCBpc0ZpbGVBbkF0dGFjaG1lbnQgPSAoZmlsZTogRmlsZSk6IGJvb2xlYW4gPT5cbiAgZmlsZS5jb250ZW50X2Rpc3Bvc2l0aW9uID09PSBcImF0dGFjaG1lbnRcIiAmJlxuICAhIWZpbGUuZmlsZW5hbWUgJiZcbiAgIURpc2FsbG93ZWRDb250ZW50VHlwZXMuaW5jbHVkZXMoZmlsZS5jb250ZW50X3R5cGUpO1xuIiwiaW1wb3J0IHsgbm9vcCwgc2FmZV9ub3RfZXF1YWwsIHN1YnNjcmliZSwgcnVuX2FsbCwgaXNfZnVuY3Rpb24gfSBmcm9tICcuLi9pbnRlcm5hbC9pbmRleC5tanMnO1xuZXhwb3J0IHsgZ2V0X3N0b3JlX3ZhbHVlIGFzIGdldCB9IGZyb20gJy4uL2ludGVybmFsL2luZGV4Lm1qcyc7XG5cbmNvbnN0IHN1YnNjcmliZXJfcXVldWUgPSBbXTtcbi8qKlxuICogQ3JlYXRlcyBhIGBSZWFkYWJsZWAgc3RvcmUgdGhhdCBhbGxvd3MgcmVhZGluZyBieSBzdWJzY3JpcHRpb24uXG4gKiBAcGFyYW0gdmFsdWUgaW5pdGlhbCB2YWx1ZVxuICogQHBhcmFtIHtTdGFydFN0b3BOb3RpZmllcn1zdGFydCBzdGFydCBhbmQgc3RvcCBub3RpZmljYXRpb25zIGZvciBzdWJzY3JpcHRpb25zXG4gKi9cbmZ1bmN0aW9uIHJlYWRhYmxlKHZhbHVlLCBzdGFydCkge1xuICAgIHJldHVybiB7XG4gICAgICAgIHN1YnNjcmliZTogd3JpdGFibGUodmFsdWUsIHN0YXJ0KS5zdWJzY3JpYmVcbiAgICB9O1xufVxuLyoqXG4gKiBDcmVhdGUgYSBgV3JpdGFibGVgIHN0b3JlIHRoYXQgYWxsb3dzIGJvdGggdXBkYXRpbmcgYW5kIHJlYWRpbmcgYnkgc3Vic2NyaXB0aW9uLlxuICogQHBhcmFtIHsqPX12YWx1ZSBpbml0aWFsIHZhbHVlXG4gKiBAcGFyYW0ge1N0YXJ0U3RvcE5vdGlmaWVyPX1zdGFydCBzdGFydCBhbmQgc3RvcCBub3RpZmljYXRpb25zIGZvciBzdWJzY3JpcHRpb25zXG4gKi9cbmZ1bmN0aW9uIHdyaXRhYmxlKHZhbHVlLCBzdGFydCA9IG5vb3ApIHtcbiAgICBsZXQgc3RvcDtcbiAgICBjb25zdCBzdWJzY3JpYmVycyA9IG5ldyBTZXQoKTtcbiAgICBmdW5jdGlvbiBzZXQobmV3X3ZhbHVlKSB7XG4gICAgICAgIGlmIChzYWZlX25vdF9lcXVhbCh2YWx1ZSwgbmV3X3ZhbHVlKSkge1xuICAgICAgICAgICAgdmFsdWUgPSBuZXdfdmFsdWU7XG4gICAgICAgICAgICBpZiAoc3RvcCkgeyAvLyBzdG9yZSBpcyByZWFkeVxuICAgICAgICAgICAgICAgIGNvbnN0IHJ1bl9xdWV1ZSA9ICFzdWJzY3JpYmVyX3F1ZXVlLmxlbmd0aDtcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IHN1YnNjcmliZXIgb2Ygc3Vic2NyaWJlcnMpIHtcbiAgICAgICAgICAgICAgICAgICAgc3Vic2NyaWJlclsxXSgpO1xuICAgICAgICAgICAgICAgICAgICBzdWJzY3JpYmVyX3F1ZXVlLnB1c2goc3Vic2NyaWJlciwgdmFsdWUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAocnVuX3F1ZXVlKSB7XG4gICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc3Vic2NyaWJlcl9xdWV1ZS5sZW5ndGg7IGkgKz0gMikge1xuICAgICAgICAgICAgICAgICAgICAgICAgc3Vic2NyaWJlcl9xdWV1ZVtpXVswXShzdWJzY3JpYmVyX3F1ZXVlW2kgKyAxXSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgc3Vic2NyaWJlcl9xdWV1ZS5sZW5ndGggPSAwO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBmdW5jdGlvbiB1cGRhdGUoZm4pIHtcbiAgICAgICAgc2V0KGZuKHZhbHVlKSk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIHN1YnNjcmliZShydW4sIGludmFsaWRhdGUgPSBub29wKSB7XG4gICAgICAgIGNvbnN0IHN1YnNjcmliZXIgPSBbcnVuLCBpbnZhbGlkYXRlXTtcbiAgICAgICAgc3Vic2NyaWJlcnMuYWRkKHN1YnNjcmliZXIpO1xuICAgICAgICBpZiAoc3Vic2NyaWJlcnMuc2l6ZSA9PT0gMSkge1xuICAgICAgICAgICAgc3RvcCA9IHN0YXJ0KHNldCkgfHwgbm9vcDtcbiAgICAgICAgfVxuICAgICAgICBydW4odmFsdWUpO1xuICAgICAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgICAgICAgc3Vic2NyaWJlcnMuZGVsZXRlKHN1YnNjcmliZXIpO1xuICAgICAgICAgICAgaWYgKHN1YnNjcmliZXJzLnNpemUgPT09IDApIHtcbiAgICAgICAgICAgICAgICBzdG9wKCk7XG4gICAgICAgICAgICAgICAgc3RvcCA9IG51bGw7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgfVxuICAgIHJldHVybiB7IHNldCwgdXBkYXRlLCBzdWJzY3JpYmUgfTtcbn1cbmZ1bmN0aW9uIGRlcml2ZWQoc3RvcmVzLCBmbiwgaW5pdGlhbF92YWx1ZSkge1xuICAgIGNvbnN0IHNpbmdsZSA9ICFBcnJheS5pc0FycmF5KHN0b3Jlcyk7XG4gICAgY29uc3Qgc3RvcmVzX2FycmF5ID0gc2luZ2xlXG4gICAgICAgID8gW3N0b3Jlc11cbiAgICAgICAgOiBzdG9yZXM7XG4gICAgY29uc3QgYXV0byA9IGZuLmxlbmd0aCA8IDI7XG4gICAgcmV0dXJuIHJlYWRhYmxlKGluaXRpYWxfdmFsdWUsIChzZXQpID0+IHtcbiAgICAgICAgbGV0IGluaXRlZCA9IGZhbHNlO1xuICAgICAgICBjb25zdCB2YWx1ZXMgPSBbXTtcbiAgICAgICAgbGV0IHBlbmRpbmcgPSAwO1xuICAgICAgICBsZXQgY2xlYW51cCA9IG5vb3A7XG4gICAgICAgIGNvbnN0IHN5bmMgPSAoKSA9PiB7XG4gICAgICAgICAgICBpZiAocGVuZGluZykge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNsZWFudXAoKTtcbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGZuKHNpbmdsZSA/IHZhbHVlc1swXSA6IHZhbHVlcywgc2V0KTtcbiAgICAgICAgICAgIGlmIChhdXRvKSB7XG4gICAgICAgICAgICAgICAgc2V0KHJlc3VsdCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBjbGVhbnVwID0gaXNfZnVuY3Rpb24ocmVzdWx0KSA/IHJlc3VsdCA6IG5vb3A7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIGNvbnN0IHVuc3Vic2NyaWJlcnMgPSBzdG9yZXNfYXJyYXkubWFwKChzdG9yZSwgaSkgPT4gc3Vic2NyaWJlKHN0b3JlLCAodmFsdWUpID0+IHtcbiAgICAgICAgICAgIHZhbHVlc1tpXSA9IHZhbHVlO1xuICAgICAgICAgICAgcGVuZGluZyAmPSB+KDEgPDwgaSk7XG4gICAgICAgICAgICBpZiAoaW5pdGVkKSB7XG4gICAgICAgICAgICAgICAgc3luYygpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LCAoKSA9PiB7XG4gICAgICAgICAgICBwZW5kaW5nIHw9ICgxIDw8IGkpO1xuICAgICAgICB9KSk7XG4gICAgICAgIGluaXRlZCA9IHRydWU7XG4gICAgICAgIHN5bmMoKTtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIHN0b3AoKSB7XG4gICAgICAgICAgICBydW5fYWxsKHVuc3Vic2NyaWJlcnMpO1xuICAgICAgICAgICAgY2xlYW51cCgpO1xuICAgICAgICB9O1xuICAgIH0pO1xufVxuXG5leHBvcnQgeyBkZXJpdmVkLCByZWFkYWJsZSwgd3JpdGFibGUgfTtcbiIsImltcG9ydCB7IFdyaXRhYmxlLCB3cml0YWJsZSB9IGZyb20gXCJzdmVsdGUvc3RvcmVcIjtcbmltcG9ydCB0eXBlIHsgTWFuaWZlc3QgfSBmcm9tIFwiQGNvbW1vbnMvdHlwZXMvTnlsYXNcIjtcblxudHlwZSBFcnJvclN0b3JlID0gUmVjb3JkPHN0cmluZywgTWFuaWZlc3RbXCJlcnJvclwiXT47XG5cbmZ1bmN0aW9uIGluaXRpYWxpemUoKTogV3JpdGFibGU8RXJyb3JTdG9yZT4ge1xuICByZXR1cm4gd3JpdGFibGUoe30pO1xufVxuXG5leHBvcnQgY29uc3QgRXJyb3JTdG9yZSA9IGluaXRpYWxpemUoKTtcbiIsImltcG9ydCB7IEVycm9yU3RvcmUgfSBmcm9tIFwiLi4vc3RvcmUvZXJyb3JcIjtcbmltcG9ydCB0eXBlIHsgTWFuaWZlc3QgfSBmcm9tIFwiQGNvbW1vbnMvdHlwZXMvTnlsYXNcIjtcblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGhhbmRsZVJlc3BvbnNlPFQgPSB1bmtub3duPihcbiAgcmVzcG9uc2U6IFJlc3BvbnNlLFxuKTogUHJvbWlzZTxUPiB7XG4gIGlmICghcmVzcG9uc2Uub2spIHtcbiAgICBjb25zdCBwYXNzZWRFcnJvciA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKS50aGVuKFxuICAgICAgKGpzb246IHtcbiAgICAgICAgbWVzc2FnZTogc3RyaW5nO1xuICAgICAgICBuYW1lOiBzdHJpbmc7XG4gICAgICAgIHJlc3BvbnNlPzoge1xuICAgICAgICAgIGVycm9yPzogc3RyaW5nO1xuICAgICAgICB9O1xuICAgICAgfSkgPT4ganNvbixcbiAgICApO1xuXG4gICAgY29uc3QgbWVzc2FnZSA9IHBhc3NlZEVycm9yPy5yZXNwb25zZT8uZXJyb3IgfHwgcGFzc2VkRXJyb3I/Lm1lc3NhZ2U7XG5cbiAgICBjb25zdCBlcnJvciA9IG5ldyBFcnJvcihtZXNzYWdlKTtcbiAgICBlcnJvci5uYW1lID0gcGFzc2VkRXJyb3IubmFtZTtcbiAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoeyBtZXNzYWdlOiBlcnJvciwgc3RhdHVzQ29kZTogcmVzcG9uc2Uuc3RhdHVzIH0pO1xuICB9XG4gIHJldHVybiByZXNwb25zZS5qc29uKCk7XG59XG5cbnR5cGUgSFRUUE1ldGhvZCA9IFwiUE9TVFwiIHwgXCJHRVRcIiB8IFwiUFVUXCIgfCBcIlBBVENIXCIgfCBcIk9QVElPTlNcIiB8IHVuZGVmaW5lZDtcblxudHlwZSBGZXRjaE9wdGlvbnMgPSB7XG4gIGJvZHk/OiB1bmtub3duO1xuICBtZXRob2Q/OiBIVFRQTWV0aG9kO1xuICBjb21wb25lbnRfaWQ/OiBzdHJpbmc7XG4gIGFjY2Vzc190b2tlbj86IHN0cmluZztcbn07XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRGZXRjaENvbmZpZyhcbiAgb3B0czogRmV0Y2hPcHRpb25zID0geyBjb21wb25lbnRfaWQ6IFwiXCIgfSxcbik6IFJlcXVlc3RJbml0IHtcbiAgcmV0dXJuIHtcbiAgICBtZXRob2Q6IG9wdHMubWV0aG9kIHx8IFwiR0VUXCIsIC8vIEdFVCBpcyBkZWZhdWx0IG1ldGhvZFxuICAgIGhlYWRlcnM6IHtcbiAgICAgIEFjY2VwdDogXCJhcHBsaWNhdGlvbi9qc29uXCIsXG4gICAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIixcbiAgICAgIFwiWC1Db21wb25lbnQtSWRcIjogb3B0cy5jb21wb25lbnRfaWQgfHwgXCJcIiwgLy8gQ29tcG9uZW50IElEIGlzIHBhc3NlZCBhcyBoZWFkZXJcbiAgICAgIFwiWC1BY2Nlc3MtVG9rZW5cIjogb3B0cy5hY2Nlc3NfdG9rZW4gfHwgXCJcIiwgLy8gQWNjZXNzIFRva2VuIGlzIHBhc3NlZCBhcyBoZWFkZXJcbiAgICB9LFxuICAgIGJvZHk6IG9wdHMuYm9keSA/IEpTT04uc3RyaW5naWZ5KG9wdHMuYm9keSkgOiB1bmRlZmluZWQsXG4gIH07XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBoYW5kbGVFcnJvcihpZDogc3RyaW5nLCBlcnJvcjogTWFuaWZlc3RbXCJlcnJvclwiXSk6IG5ldmVyIHtcbiAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikgY29uc29sZS5lcnJvcihlcnJvcik7XG4gIEVycm9yU3RvcmUudXBkYXRlKChlcnJvck1hcCkgPT4gKHsgLi4uZXJyb3JNYXAsIFtpZF06IGVycm9yIH0pKTtcbiAgdGhyb3cgZXJyb3I7XG59XG5cbmNvbnN0IFJFR0lPTl9NQVBQSU5HOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+ID0ge1xuICBcIjAwMVwiOiBcIlwiLCAvLyBVU1xuICBcIjAwMlwiOiBcImlyZWxhbmQtXCIsIC8vIEVVXG4gIFwiMDAzXCI6IFwiY2FuYWRhLVwiLCAvLyBDYW5hZGFcbn07XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRNaWRkbGV3YXJlQXBpVXJsKGlkOiBzdHJpbmcpOiBzdHJpbmcge1xuICBsZXQgcmVnaW9uID0gXCJcIjtcbiAgaWYgKGlkLnN1YnN0cmluZygzLCA0KSA9PT0gXCItXCIpIHtcbiAgICBjb25zdCBjb2RlID0gaWQuc3Vic3RyaW5nKDAsIDMpO1xuICAgIGlmICh0eXBlb2YgUkVHSU9OX01BUFBJTkdbY29kZV0gIT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgIHJlZ2lvbiA9IFJFR0lPTl9NQVBQSU5HW2NvZGVdO1xuICAgIH1cbiAgfVxuICBjb25zdCBBUElfR0FURVdBWSA9IGBodHRwczovLyR7cmVnaW9ufSR7cHJvY2Vzcy5lbnYuQVBJX0dBVEVXQVl9YDtcbiAgcmV0dXJuIEFQSV9HQVRFV0FZO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gc2lsZW5jZShlcnJvcjogRXJyb3IpIHt9XG5cbmV4cG9ydCBmdW5jdGlvbiBidWlsZFF1ZXJ5UGFyYW1zKHBhcmFtczogUmVjb3JkPHN0cmluZywgYW55Pik6IHN0cmluZyB7XG4gIHJldHVybiBPYmplY3Qua2V5cyhwYXJhbXMpXG4gICAgLnJlZHVjZSgoYWNjLCBrZXkpID0+IHtcbiAgICAgIGlmIChwYXJhbXNba2V5XSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIGFjYy5hcHBlbmQoa2V5LCBwYXJhbXNba2V5XSk7XG4gICAgICB9XG4gICAgICByZXR1cm4gYWNjO1xuICAgIH0sIG5ldyBVUkxTZWFyY2hQYXJhbXMoKSlcbiAgICAudG9TdHJpbmcoKTtcbn1cbiIsImltcG9ydCB7XG4gIGdldEZldGNoQ29uZmlnLFxuICBoYW5kbGVFcnJvcixcbiAgaGFuZGxlUmVzcG9uc2UsXG4gIGdldE1pZGRsZXdhcmVBcGlVcmwsXG59IGZyb20gXCIuLi9tZXRob2RzL2FwaVwiO1xuaW1wb3J0IHR5cGUge1xuICBNYWlsYm94UXVlcnksXG4gIFRocmVhZCxcbiAgQ29udmVyc2F0aW9uUXVlcnksXG4gIENvbnZlcnNhdGlvbixcbiAgTWlkZGxld2FyZVJlc3BvbnNlLFxufSBmcm9tIFwiQGNvbW1vbnMvdHlwZXMvTnlsYXNcIjtcblxuZXhwb3J0IGNvbnN0IGZldGNoVGhyZWFkcyA9IChcbiAgcXVlcnk6IE1haWxib3hRdWVyeSxcbiAgbGltaXQ6IG51bWJlcixcbiAgb2Zmc2V0OiBudW1iZXIsXG4pOiBQcm9taXNlPFRocmVhZFtdPiA9PiB7XG4gIGlmIChxdWVyeS50aHJlYWRfaWRzKSB7XG4gICAgLy8gJmxpbWl0PSR7bGltaXR9Jm9mZnNldD0ke29mZnNldH1cbiAgICBjb25zdCBwYWdlX29mX2lkcyA9IHF1ZXJ5LnRocmVhZF9pZHMuc2xpY2Uob2Zmc2V0LCBvZmZzZXQgKyBsaW1pdCk7XG4gICAgcmV0dXJuIFByb21pc2UuYWxsKFxuICAgICAgcGFnZV9vZl9pZHMubWFwKGFzeW5jICh0aHJlYWRfaWQpID0+IHtcbiAgICAgICAgLy8gTnlsYXMgQVBJIGRvZXMgbm90IHN1cHBvcnQgZmV0Y2hpbmcgdGhyZWFkcyBpbiBidWxrLCBzbyBtdXN0IGZldGNoIHRoZW0gb25lXG4gICAgICAgIC8vIGF0IGEgdGltZSA6KFxuICAgICAgICBjb25zdCBxdWVyeVN0cmluZyA9IGAke2dldE1pZGRsZXdhcmVBcGlVcmwoXG4gICAgICAgICAgcXVlcnkuY29tcG9uZW50X2lkLFxuICAgICAgICApfS90aHJlYWRzLyR7dGhyZWFkX2lkfT92aWV3PWV4cGFuZGVkYDtcbiAgICAgICAgLy8gVE9ETzogaWRlYWxseSB0aGlzIHdvdWxkbid0IHJlcGxpY2F0ZSBtdWNoIG9mIHRoZSBjb2RlIGZyb20gYmVsb3dcbiAgICAgICAgcmV0dXJuIGF3YWl0IGZldGNoKHF1ZXJ5U3RyaW5nLCBnZXRGZXRjaENvbmZpZyhxdWVyeSkpXG4gICAgICAgICAgLnRoZW4oKHJlc3BvbnNlKSA9PlxuICAgICAgICAgICAgaGFuZGxlUmVzcG9uc2U8TWlkZGxld2FyZVJlc3BvbnNlPFRocmVhZD4+KHJlc3BvbnNlKSxcbiAgICAgICAgICApXG4gICAgICAgICAgLnRoZW4oKGpzb24pID0+IGpzb24ucmVzcG9uc2UpXG4gICAgICAgICAgLy8gVE9ETzogUmVtb3ZlIHRoaXMgdWdseSBoYWNrIHdoZW4gd2UgZml4IHRoZSBBUEkgZnJvbSByZXR1cm5pbmcgZ2hvc3QgbWVzc2FnZXMgKGUuZy4gdy9vIGEgZnJvbS90byBmaWVsZClcbiAgICAgICAgICAudGhlbigodGhyZWFkKSA9PiAoe1xuICAgICAgICAgICAgLi4udGhyZWFkLFxuICAgICAgICAgICAgbWVzc2FnZXM6IHRocmVhZC5tZXNzYWdlcy5maWx0ZXIoXG4gICAgICAgICAgICAgIChtZXNzYWdlKSA9PiBtZXNzYWdlLmZyb20ubGVuZ3RoICE9PSAwIHx8IG1lc3NhZ2UudG8ubGVuZ3RoICE9PSAwLFxuICAgICAgICAgICAgKSxcbiAgICAgICAgICB9KSlcbiAgICAgICAgICAuY2F0Y2goKGVycm9yKSA9PiBoYW5kbGVFcnJvcihxdWVyeS5jb21wb25lbnRfaWQsIGVycm9yKSk7XG4gICAgICB9KSxcbiAgICApO1xuICB9XG4gIGxldCBxdWVyeVN0cmluZyA9IGAke2dldE1pZGRsZXdhcmVBcGlVcmwoXG4gICAgcXVlcnkuY29tcG9uZW50X2lkLFxuICApfS90aHJlYWRzP3ZpZXc9ZXhwYW5kZWQmbm90X2luPXRyYXNoJmxpbWl0PSR7bGltaXR9Jm9mZnNldD0ke29mZnNldH1gO1xuICBpZiAocXVlcnkucXVlcnkpIHtcbiAgICBPYmplY3QuZW50cmllcyhxdWVyeS5xdWVyeSkuZm9yRWFjaChcbiAgICAgIChwYXJhbSkgPT4gKHF1ZXJ5U3RyaW5nID0gcXVlcnlTdHJpbmcuY29uY2F0KGAmJHtwYXJhbVswXX09JHtwYXJhbVsxXX1gKSksXG4gICAgKTtcbiAgfVxuICByZXR1cm4gKFxuICAgIGZldGNoKHF1ZXJ5U3RyaW5nLCBnZXRGZXRjaENvbmZpZyhxdWVyeSkpXG4gICAgICAudGhlbigocmVzcG9uc2UpID0+XG4gICAgICAgIGhhbmRsZVJlc3BvbnNlPE1pZGRsZXdhcmVSZXNwb25zZTxUaHJlYWRbXT4+KHJlc3BvbnNlKSxcbiAgICAgIClcbiAgICAgIC50aGVuKChqc29uKSA9PiBqc29uLnJlc3BvbnNlKVxuICAgICAgLy8gVE9ETzogUmVtb3ZlIHRoaXMgdWdseSBoYWNrIHdoZW4gd2UgZml4IHRoZSBBUEkgZnJvbSByZXR1cm5pbmcgZ2hvc3QgbWVzc2FnZXMgKGUuZy4gdy9vIGEgZnJvbS90byBmaWVsZClcbiAgICAgIC50aGVuKCh0aHJlYWRzKSA9PlxuICAgICAgICB0aHJlYWRzLm1hcCgodGhyZWFkKSA9PiAoe1xuICAgICAgICAgIC4uLnRocmVhZCxcbiAgICAgICAgICBtZXNzYWdlczogdGhyZWFkLm1lc3NhZ2VzLmZpbHRlcihcbiAgICAgICAgICAgIChtZXNzYWdlKSA9PiBtZXNzYWdlLmZyb20ubGVuZ3RoICE9PSAwIHx8IG1lc3NhZ2UudG8ubGVuZ3RoICE9PSAwLFxuICAgICAgICAgICksXG4gICAgICAgIH0pKSxcbiAgICAgIClcbiAgICAgIC5jYXRjaCgoZXJyb3IpID0+IGhhbmRsZUVycm9yKHF1ZXJ5LmNvbXBvbmVudF9pZCwgZXJyb3IpKVxuICApO1xufTtcblxuZXhwb3J0IGZ1bmN0aW9uIGZldGNoVGhyZWFkQ291bnQocXVlcnk6IE1haWxib3hRdWVyeSk6IFByb21pc2U8bnVtYmVyPiB7XG4gIGxldCBxdWVyeVN0cmluZyA9IGAke2dldE1pZGRsZXdhcmVBcGlVcmwoXG4gICAgcXVlcnkuY29tcG9uZW50X2lkLFxuICApfS90aHJlYWRzP3ZpZXc9ZXhwYW5kZWQmbm90X2luPXRyYXNoJnZpZXc9Y291bnRgO1xuICBpZiAocXVlcnkucXVlcnkpIHtcbiAgICBPYmplY3QuZW50cmllcyhxdWVyeS5xdWVyeSkuZm9yRWFjaChcbiAgICAgIChwYXJhbSkgPT4gKHF1ZXJ5U3RyaW5nID0gcXVlcnlTdHJpbmcuY29uY2F0KGAmJHtwYXJhbVswXX09JHtwYXJhbVsxXX1gKSksXG4gICAgKTtcbiAgfVxuXG4gIGlmIChxdWVyeS5rZXl3b3JkVG9TZWFyY2gpIHtcbiAgICBxdWVyeVN0cmluZyArPSBgJnE9JHtxdWVyeS5rZXl3b3JkVG9TZWFyY2h9YDtcbiAgfVxuXG4gIHJldHVybiBmZXRjaChxdWVyeVN0cmluZywgZ2V0RmV0Y2hDb25maWcocXVlcnkpKVxuICAgIC50aGVuKChyZXNwb25zZSkgPT4gaGFuZGxlUmVzcG9uc2U8TWlkZGxld2FyZVJlc3BvbnNlPGFueT4+KHJlc3BvbnNlKSlcbiAgICAudGhlbigoanNvbikgPT4ganNvbi5yZXNwb25zZS5jb3VudCk7XG59XG5cbmV4cG9ydCBjb25zdCBmZXRjaFNlYXJjaFJlc3VsdFRocmVhZHMgPSAoXG4gIHF1ZXJ5OiBNYWlsYm94UXVlcnksXG4pOiBQcm9taXNlPFRocmVhZFtdPiA9PiB7XG4gIGNvbnN0IHF1ZXJ5U3RyaW5nID0gYCR7Z2V0TWlkZGxld2FyZUFwaVVybChcbiAgICBxdWVyeS5jb21wb25lbnRfaWQsXG4gICl9L3RocmVhZHMvc2VhcmNoP3E9JHtxdWVyeS5rZXl3b3JkVG9TZWFyY2h9JnZpZXc9ZXhwYW5kZWQmbGltaXQ9JHtcbiAgICBxdWVyeS5xdWVyeS5saW1pdFxuICB9Jm9mZnNldD0ke3F1ZXJ5LnF1ZXJ5Lm9mZnNldH1gO1xuXG4gIHJldHVybiBmZXRjaChxdWVyeVN0cmluZywgZ2V0RmV0Y2hDb25maWcocXVlcnkpKVxuICAgIC50aGVuKGFzeW5jIChyZXNwb25zZSkgPT5cbiAgICAgIGhhbmRsZVJlc3BvbnNlPE1pZGRsZXdhcmVSZXNwb25zZTxUaHJlYWRbXT4+KHJlc3BvbnNlKSxcbiAgICApXG4gICAgLnRoZW4oKGpzb24pID0+IGpzb24ucmVzcG9uc2UpXG4gICAgLmNhdGNoKChlcnJvcikgPT4gaGFuZGxlRXJyb3IocXVlcnkuY29tcG9uZW50X2lkLCBlcnJvcikpO1xufTtcblxuZXhwb3J0IGNvbnN0IGZldGNoVGhyZWFkID0gYXN5bmMgKFxuICBxdWVyeTogQ29udmVyc2F0aW9uUXVlcnksXG4pOiBQcm9taXNlPENvbnZlcnNhdGlvbj4gPT4ge1xuICBjb25zdCB0aHJlYWQgPSBhd2FpdCBmZXRjaChcbiAgICBgJHtnZXRNaWRkbGV3YXJlQXBpVXJsKHF1ZXJ5LmNvbXBvbmVudF9pZCl9L3RocmVhZHMvJHtcbiAgICAgIHF1ZXJ5LnRocmVhZF9pZFxuICAgIH0/dmlldz1leHBhbmRlZGAsXG4gICAgZ2V0RmV0Y2hDb25maWcoe1xuICAgICAgY29tcG9uZW50X2lkOiBxdWVyeS5jb21wb25lbnRfaWQsXG4gICAgICBhY2Nlc3NfdG9rZW46IHF1ZXJ5LmFjY2Vzc190b2tlbixcbiAgICB9KSxcbiAgKVxuICAgIC50aGVuKChyZXNwb25zZSkgPT5cbiAgICAgIGhhbmRsZVJlc3BvbnNlPE1pZGRsZXdhcmVSZXNwb25zZTxDb252ZXJzYXRpb24+PihyZXNwb25zZSksXG4gICAgKVxuICAgIC50aGVuKChqc29uKSA9PiBqc29uLnJlc3BvbnNlKVxuICAgIC5jYXRjaCgoZXJyb3IpID0+IGhhbmRsZUVycm9yKHF1ZXJ5LmNvbXBvbmVudF9pZCwgZXJyb3IpKTtcblxuICByZXR1cm4gdGhyZWFkO1xufTtcblxuZXhwb3J0IGNvbnN0IHVwZGF0ZVRocmVhZCA9IChcbiAgcXVlcnk6IENvbnZlcnNhdGlvblF1ZXJ5LFxuICB1cGRhdGVkVGhyZWFkOiBDb252ZXJzYXRpb24sXG4pOiBQcm9taXNlPENvbnZlcnNhdGlvbj4gPT4ge1xuICAvLyBhY2NlcHRzIHVucmVhZCwgc3RhcnJlZCwgZm9sZGVyX2lkICsgbGFiZWxfaWRzLiBkZXZlbG9wZXIubnlsYXMuY29tL2RvY3MvYXBpLyNwdXQvdGhyZWFkcy9pZFxuICByZXR1cm4gZmV0Y2goXG4gICAgYCR7Z2V0TWlkZGxld2FyZUFwaVVybChxdWVyeS5jb21wb25lbnRfaWQpfS90aHJlYWRzLyR7dXBkYXRlZFRocmVhZC5pZH1gLFxuICAgIGdldEZldGNoQ29uZmlnKHtcbiAgICAgIG1ldGhvZDogXCJQVVRcIixcbiAgICAgIGNvbXBvbmVudF9pZDogcXVlcnkuY29tcG9uZW50X2lkLFxuICAgICAgYWNjZXNzX3Rva2VuOiBxdWVyeS5hY2Nlc3NfdG9rZW4sXG4gICAgICBib2R5OiB7XG4gICAgICAgIHVucmVhZDogdXBkYXRlZFRocmVhZC51bnJlYWQsXG4gICAgICAgIHN0YXJyZWQ6IHVwZGF0ZWRUaHJlYWQuc3RhcnJlZCxcbiAgICAgICAgZm9sZGVyX2lkOiB1cGRhdGVkVGhyZWFkLmZvbGRlcl9pZCxcbiAgICAgICAgbGFiZWxfaWRzOiB1cGRhdGVkVGhyZWFkLmxhYmVsX2lkcyxcbiAgICAgIH0sXG4gICAgfSksXG4gIClcbiAgICAudGhlbigocmVzcG9uc2UpID0+XG4gICAgICBoYW5kbGVSZXNwb25zZTxNaWRkbGV3YXJlUmVzcG9uc2U8Q29udmVyc2F0aW9uPj4ocmVzcG9uc2UpLFxuICAgIClcbiAgICAudGhlbigoanNvbikgPT4ganNvbi5yZXNwb25zZSlcbiAgICAuY2F0Y2goKGVycm9yKSA9PiBoYW5kbGVFcnJvcihxdWVyeS5jb21wb25lbnRfaWQsIGVycm9yKSk7XG59O1xuIiwiaW1wb3J0IHtcbiAgZ2V0RmV0Y2hDb25maWcsXG4gIGhhbmRsZUVycm9yLFxuICBoYW5kbGVSZXNwb25zZSxcbiAgZ2V0TWlkZGxld2FyZUFwaVVybCxcbn0gZnJvbSBcIi4uL21ldGhvZHMvYXBpXCI7XG5pbXBvcnQgdHlwZSB7IE1hbmlmZXN0LCBNaWRkbGV3YXJlUmVzcG9uc2UgfSBmcm9tIFwiQGNvbW1vbnMvdHlwZXMvTnlsYXNcIjtcblxuZXhwb3J0IGNvbnN0IGZldGNoTWFuaWZlc3QgPSBhc3luYyAoXG4gIGlkOiBzdHJpbmcsXG4gIGFjY2Vzc190b2tlbj86IHN0cmluZyxcbik6IFByb21pc2U8TWFuaWZlc3Q+ID0+IHtcbiAgcmV0dXJuIGF3YWl0IGZldGNoKFxuICAgIGAke2dldE1pZGRsZXdhcmVBcGlVcmwoaWQpfS9tYW5pZmVzdGAsXG4gICAgZ2V0RmV0Y2hDb25maWcoe1xuICAgICAgYWNjZXNzX3Rva2VuLFxuICAgICAgY29tcG9uZW50X2lkOiBpZCxcbiAgICB9KSxcbiAgKVxuICAgIC50aGVuPE1pZGRsZXdhcmVSZXNwb25zZT4oaGFuZGxlUmVzcG9uc2UpXG4gICAgLnRoZW4oKHJlc3BvbnNlKSA9PiByZXNwb25zZS5jb21wb25lbnQudGhlbWluZylcbiAgICAuY2F0Y2goKGVycm9yKSA9PiBoYW5kbGVFcnJvcihpZCwgZXJyb3IpKTtcbn07XG5cbi8vIEFsbG93cyA8bnlsYXMtc2NoZWR1bGUtZWRpdG9yPiB0byBtb2RpZnkgaXRzIG93biBwcm9wZXJ0aWVzXG5cbmV4cG9ydCBjb25zdCBzYXZlTWFuaWZlc3QgPSBhc3luYyAoXG4gIGlkOiBzdHJpbmcsXG4gIG1hbmlmZXN0OiBNYW5pZmVzdCxcbiAgYWNjZXNzX3Rva2VuPzogc3RyaW5nLFxuKTogUHJvbWlzZTxNYW5pZmVzdD4gPT4ge1xuICByZXR1cm4gZmV0Y2goXG4gICAgYCR7Z2V0TWlkZGxld2FyZUFwaVVybChpZCl9L2NvbXBvbmVudGAsXG4gICAgZ2V0RmV0Y2hDb25maWcoe1xuICAgICAgbWV0aG9kOiBcIlBVVFwiLFxuICAgICAgY29tcG9uZW50X2lkOiBpZCxcbiAgICAgIGFjY2Vzc190b2tlbixcbiAgICAgIGJvZHk6IHsgc2V0dGluZ3M6IG1hbmlmZXN0IH0sXG4gICAgfSksXG4gIClcbiAgICAudGhlbigocmVzcG9uc2UpID0+IGhhbmRsZVJlc3BvbnNlPE1pZGRsZXdhcmVSZXNwb25zZTxNYW5pZmVzdD4+KHJlc3BvbnNlKSlcbiAgICAudGhlbigoanNvbikgPT4ge1xuICAgICAgcmV0dXJuIGpzb24ucmVzcG9uc2U7XG4gICAgfSk7XG59O1xuIiwiaW1wb3J0IHsgTWVzc2FnZVN0b3JlIH0gZnJvbSBcIi4uL3N0b3JlL21lc3NhZ2VzXCI7XG5pbXBvcnQge1xuICBnZXRGZXRjaENvbmZpZyxcbiAgaGFuZGxlRXJyb3IsXG4gIGhhbmRsZVJlc3BvbnNlLFxuICBnZXRNaWRkbGV3YXJlQXBpVXJsLFxufSBmcm9tIFwiLi4vbWV0aG9kcy9hcGlcIjtcbmltcG9ydCB0eXBlIHtcbiAgU2luZ3VsYXJFbWFpbCxcbiAgQ29tbW9uUXVlcnksXG4gIE1lc3NhZ2VzUXVlcnksXG4gIEZpbGUgYXMgTnlsYXNGaWxlLFxuICBNZXNzYWdlIGFzIE55bGFzTWVzc2FnZSxcbiAgTWlkZGxld2FyZVJlc3BvbnNlLFxufSBmcm9tIFwiQGNvbW1vbnMvdHlwZXMvTnlsYXNcIjtcbmltcG9ydCB0eXBlIHsgTWVzc2FnZSB9IGZyb20gXCJAY29tbW9ucy90eXBlcy9Db21wb3NlclwiO1xuXG5leHBvcnQgY29uc3Qgc2VuZE1lc3NhZ2UgPSBhc3luYyAoXG4gIGNvbXBvbmVudF9pZDogc3RyaW5nLFxuICBtc2c6IE1lc3NhZ2UsXG4gIGFjY2Vzc190b2tlbj86IHN0cmluZyxcbik6IFByb21pc2U8TnlsYXNNZXNzYWdlPiA9PiB7XG4gIHJldHVybiBhd2FpdCBmZXRjaChcbiAgICBgJHtnZXRNaWRkbGV3YXJlQXBpVXJsKGNvbXBvbmVudF9pZCl9L3NlbmRgLFxuICAgIGdldEZldGNoQ29uZmlnKHsgbWV0aG9kOiBcIlBPU1RcIiwgY29tcG9uZW50X2lkLCBhY2Nlc3NfdG9rZW4sIGJvZHk6IG1zZyB9KSxcbiAgKVxuICAgIC50aGVuKChyZXNwb25zZSkgPT5cbiAgICAgIGhhbmRsZVJlc3BvbnNlPE1pZGRsZXdhcmVSZXNwb25zZTxOeWxhc01lc3NhZ2U+PihyZXNwb25zZSksXG4gICAgKVxuICAgIC50aGVuKChqc29uKSA9PiB7XG4gICAgICByZXR1cm4ganNvbi5yZXNwb25zZTtcbiAgICB9KVxuICAgIC5jYXRjaCgoZXJyb3IpID0+IGhhbmRsZUVycm9yKGNvbXBvbmVudF9pZCwgZXJyb3IpKTtcbn07XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiB1cGRhdGVNZXNzYWdlKFxuICBjb21wb25lbnRfaWQ6IHN0cmluZyxcbiAgbWVzc2FnZTogTnlsYXNNZXNzYWdlLFxuICBhY2Nlc3NfdG9rZW4/OiBzdHJpbmcsXG4pOiBQcm9taXNlPE55bGFzTWVzc2FnZT4ge1xuICBjb25zdCB1cmwgPSBgJHtnZXRNaWRkbGV3YXJlQXBpVXJsKGNvbXBvbmVudF9pZCl9L21lc3NhZ2VzLyR7bWVzc2FnZS5pZH1gO1xuICBjb25zdCBmZXRjaENvbmZpZyA9IGdldEZldGNoQ29uZmlnKHtcbiAgICBtZXRob2Q6IFwiUFVUXCIsXG4gICAgY29tcG9uZW50X2lkLFxuICAgIGFjY2Vzc190b2tlbixcbiAgICBib2R5OiB7IGZvbGRlcl9pZDogbWVzc2FnZS5mb2xkZXJfaWQsIGxhYmVsX2lkczogbWVzc2FnZS5sYWJlbF9pZHMgfSxcbiAgfSk7XG4gIHJldHVybiBhd2FpdCBmZXRjaCh1cmwsIGZldGNoQ29uZmlnKVxuICAgIC50aGVuKChyZXNwb25zZSkgPT5cbiAgICAgIGhhbmRsZVJlc3BvbnNlPE1pZGRsZXdhcmVSZXNwb25zZTxOeWxhc01lc3NhZ2U+PihyZXNwb25zZSksXG4gICAgKVxuICAgIC50aGVuKChqc29uKSA9PiB7XG4gICAgICByZXR1cm4ganNvbi5yZXNwb25zZTtcbiAgICB9KVxuICAgIC5jYXRjaCgoZXJyb3IpID0+IGhhbmRsZUVycm9yKGNvbXBvbmVudF9pZCwgZXJyb3IpKTtcbn1cblxuZXhwb3J0IGNvbnN0IHVwbG9hZEZpbGUgPSBhc3luYyAoXG4gIGNvbXBvbmVudF9pZDogc3RyaW5nLFxuICBmaWxlOiBGaWxlLFxuICBhY2Nlc3NfdG9rZW4/OiBzdHJpbmcsXG4pOiBQcm9taXNlPE55bGFzRmlsZT4gPT4ge1xuICBjb25zdCBmZXRjaENvbmZpZzogUmVxdWVzdEluaXQgPSBnZXRGZXRjaENvbmZpZyh7XG4gICAgbWV0aG9kOiBcIlBPU1RcIixcbiAgICBjb21wb25lbnRfaWQsXG4gICAgYWNjZXNzX3Rva2VuLFxuICB9KTtcbiAgY29uc3QgZm9ybSA9IG5ldyBGb3JtRGF0YSgpO1xuICBmb3JtLmFwcGVuZChcImZpbGVcIiwgZmlsZSk7XG4gIGlmIChcbiAgICB0eXBlb2YgZmV0Y2hDb25maWcuaGVhZGVycyAhPT0gXCJ1bmRlZmluZWRcIiAmJlxuICAgIFwiQ29udGVudC1UeXBlXCIgaW4gZmV0Y2hDb25maWcuaGVhZGVyc1xuICApIHtcbiAgICBkZWxldGUgZmV0Y2hDb25maWcuaGVhZGVyc1tcIkNvbnRlbnQtVHlwZVwiXTtcbiAgfVxuICBmZXRjaENvbmZpZy5ib2R5ID0gZm9ybTtcbiAgcmV0dXJuIGF3YWl0IGZldGNoKGAke2dldE1pZGRsZXdhcmVBcGlVcmwoY29tcG9uZW50X2lkKX0vZmlsZXNgLCBmZXRjaENvbmZpZylcbiAgICAudGhlbigocmVzcG9uc2UpID0+IGhhbmRsZVJlc3BvbnNlPE1pZGRsZXdhcmVSZXNwb25zZTxOeWxhc0ZpbGU+PihyZXNwb25zZSkpXG4gICAgLnRoZW4oKGpzb24pID0+IHtcbiAgICAgIHJldHVybiBBcnJheS5pc0FycmF5KGpzb24ucmVzcG9uc2UpID8ganNvbi5yZXNwb25zZVswXSA6IGpzb24ucmVzcG9uc2U7XG4gICAgfSlcbiAgICAuY2F0Y2goaGFuZGxlRXJyb3IuYmluZCgwLCBjb21wb25lbnRfaWQpKTtcbn07XG5cbmV4cG9ydCBjb25zdCBmZXRjaE1lc3NhZ2VzID0gYXN5bmMgKFxuICBxdWVyeTogTWVzc2FnZXNRdWVyeSxcbiAgb2Zmc2V0OiBudW1iZXIsXG4gIGxpbWl0OiBudW1iZXIsXG4pOiBQcm9taXNlPE55bGFzTWVzc2FnZVtdPiA9PiB7XG4gIGxldCBxdWVyeVN0cmluZyA9IGAke2dldE1pZGRsZXdhcmVBcGlVcmwoXG4gICAgcXVlcnkuY29tcG9uZW50X2lkLFxuICApfS9tZXNzYWdlcz9vZmZzZXQ9JHtvZmZzZXR9JmxpbWl0PSR7bGltaXR9YDtcbiAgaWYgKHF1ZXJ5LnJlY2VpdmVkX2JlZm9yZSkge1xuICAgIHF1ZXJ5U3RyaW5nID0gYCR7cXVlcnlTdHJpbmd9JnJlY2VpdmVkX2JlZm9yZT0ke3F1ZXJ5LnJlY2VpdmVkX2JlZm9yZX1gO1xuICB9XG4gIGlmIChxdWVyeS5yZWNlaXZlZF9hZnRlcikge1xuICAgIHF1ZXJ5U3RyaW5nID0gYCR7cXVlcnlTdHJpbmd9JnJlY2VpdmVkX2FmdGVyPSR7cXVlcnkucmVjZWl2ZWRfYWZ0ZXJ9YDtcbiAgfVxuICByZXR1cm4gYXdhaXQgZmV0Y2gocXVlcnlTdHJpbmcsIGdldEZldGNoQ29uZmlnKHF1ZXJ5KSlcbiAgICAudGhlbigocmVzcG9uc2UpID0+XG4gICAgICBoYW5kbGVSZXNwb25zZTxNaWRkbGV3YXJlUmVzcG9uc2U8TnlsYXNNZXNzYWdlW10+PihyZXNwb25zZSksXG4gICAgKVxuICAgIC50aGVuKChqc29uKSA9PiB7XG4gICAgICBNZXNzYWdlU3RvcmUuYWRkTWVzc2FnZXMoe1xuICAgICAgICBxdWVyeUtleTogSlNPTi5zdHJpbmdpZnkocXVlcnkpLFxuICAgICAgICBkYXRhOiBqc29uLnJlc3BvbnNlLFxuICAgICAgfSk7XG4gICAgICByZXR1cm4ganNvbi5yZXNwb25zZTtcbiAgICB9KVxuICAgIC5jYXRjaCgoZXJyb3IpID0+IGhhbmRsZUVycm9yKHF1ZXJ5LmNvbXBvbmVudF9pZCwgZXJyb3IpKTtcbn07XG5cbmV4cG9ydCBjb25zdCBmZXRjaE1lc3NhZ2UgPSBhc3luYyAoXG4gIHF1ZXJ5OiBDb21tb25RdWVyeSxcbiAgbWVzc2FnZUlEOiBzdHJpbmcsXG4pOiBQcm9taXNlPE55bGFzTWVzc2FnZT4gPT4ge1xuICBjb25zdCBxdWVyeVN0cmluZyA9IGAke2dldE1pZGRsZXdhcmVBcGlVcmwoXG4gICAgcXVlcnkuY29tcG9uZW50X2lkLFxuICApfS9tZXNzYWdlcy8ke21lc3NhZ2VJRH1gO1xuICByZXR1cm4gYXdhaXQgZmV0Y2gocXVlcnlTdHJpbmcsIGdldEZldGNoQ29uZmlnKHF1ZXJ5KSlcbiAgICAudGhlbigocmVzcG9uc2UpID0+XG4gICAgICBoYW5kbGVSZXNwb25zZTxNaWRkbGV3YXJlUmVzcG9uc2U8TnlsYXNNZXNzYWdlPj4ocmVzcG9uc2UpLFxuICAgIClcbiAgICAudGhlbigoanNvbikgPT4ge1xuICAgICAgcmV0dXJuIGpzb24ucmVzcG9uc2U7XG4gICAgfSlcbiAgICAuY2F0Y2goKGVycm9yKSA9PiBoYW5kbGVFcnJvcihxdWVyeS5jb21wb25lbnRfaWQsIGVycm9yKSk7XG59O1xuXG4vLyBGb3IgY2FzZXMgd2hlbiBzb21lb25lIHdhbnRzIHRvIHNob3cganVzdCBhIHNpbmdsZSBlbWFpbCBtZXNzYWdlLCByYXRoZXIgdGhhbiB0aGUgZnVsbCB0aHJlYWQgYW5kIHcvbyBwYXNzaW5nIGEgdGhyZWFkIGlkXG5leHBvcnQgY29uc3QgZmV0Y2hFbWFpbCA9IGFzeW5jIChcbiAgcXVlcnk6IFNpbmd1bGFyRW1haWwsXG4pOiBQcm9taXNlPE55bGFzTWVzc2FnZT4gPT4ge1xuICBjb25zdCBxdWVyeVN0cmluZyA9IGAke2dldE1pZGRsZXdhcmVBcGlVcmwocXVlcnkuY29tcG9uZW50X2lkKX0vbWVzc2FnZXMvJHtcbiAgICBxdWVyeS5tZXNzYWdlX2lkXG4gIH1gO1xuICByZXR1cm4gYXdhaXQgZmV0Y2gocXVlcnlTdHJpbmcsIGdldEZldGNoQ29uZmlnKHF1ZXJ5KSlcbiAgICAudGhlbigocmVzcG9uc2UpID0+XG4gICAgICBoYW5kbGVSZXNwb25zZTxNaWRkbGV3YXJlUmVzcG9uc2U8TnlsYXNNZXNzYWdlPj4ocmVzcG9uc2UpLFxuICAgIClcbiAgICAudGhlbigoanNvbikgPT4ge1xuICAgICAgcmV0dXJuIGpzb24ucmVzcG9uc2U7XG4gICAgfSlcbiAgICAuY2F0Y2goKGVycm9yKSA9PiBoYW5kbGVFcnJvcihxdWVyeS5jb21wb25lbnRfaWQsIGVycm9yKSk7XG59O1xuXG5leHBvcnQgY29uc3Qgc2F2ZURyYWZ0ID0gYXN5bmMgKFxuICBjb21wb25lbnRfaWQ6IHN0cmluZyxcbiAgbXNnOiBNZXNzYWdlLFxuICBhY2Nlc3NfdG9rZW4/OiBzdHJpbmcsXG4pOiBQcm9taXNlPE55bGFzTWVzc2FnZT4gPT4ge1xuICByZXR1cm4gYXdhaXQgZmV0Y2goXG4gICAgYCR7Z2V0TWlkZGxld2FyZUFwaVVybChjb21wb25lbnRfaWQpfS9kcmFmdHNgLFxuICAgIGdldEZldGNoQ29uZmlnKHsgbWV0aG9kOiBcIlBPU1RcIiwgY29tcG9uZW50X2lkLCBhY2Nlc3NfdG9rZW4sIGJvZHk6IG1zZyB9KSxcbiAgKVxuICAgIC50aGVuKChyZXNwb25zZSkgPT5cbiAgICAgIGhhbmRsZVJlc3BvbnNlPE1pZGRsZXdhcmVSZXNwb25zZTxOeWxhc01lc3NhZ2U+PihyZXNwb25zZSksXG4gICAgKVxuICAgIC50aGVuKChqc29uKSA9PiB7XG4gICAgICByZXR1cm4ganNvbi5yZXNwb25zZTtcbiAgICB9KVxuICAgIC5jYXRjaCgoZXJyb3IpID0+IGhhbmRsZUVycm9yKGNvbXBvbmVudF9pZCwgZXJyb3IpKTtcbn07XG5cbmV4cG9ydCBjb25zdCB1cGRhdGVEcmFmdCA9IGFzeW5jIChcbiAgY29tcG9uZW50X2lkOiBzdHJpbmcsXG4gIG1zZzogTWVzc2FnZSxcbiAgYWNjZXNzX3Rva2VuPzogc3RyaW5nLFxuKTogUHJvbWlzZTxOeWxhc01lc3NhZ2U+ID0+IHtcbiAgcmV0dXJuIGF3YWl0IGZldGNoKFxuICAgIGAke2dldE1pZGRsZXdhcmVBcGlVcmwoY29tcG9uZW50X2lkKX0vZHJhZnRzLyR7bXNnLmlkfWAsXG4gICAgZ2V0RmV0Y2hDb25maWcoeyBtZXRob2Q6IFwiUFVUXCIsIGNvbXBvbmVudF9pZCwgYWNjZXNzX3Rva2VuLCBib2R5OiBtc2cgfSksXG4gIClcbiAgICAudGhlbigocmVzcG9uc2UpID0+XG4gICAgICBoYW5kbGVSZXNwb25zZTxNaWRkbGV3YXJlUmVzcG9uc2U8TnlsYXNNZXNzYWdlPj4ocmVzcG9uc2UpLFxuICAgIClcbiAgICAudGhlbigoanNvbikgPT4ge1xuICAgICAgcmV0dXJuIGpzb24ucmVzcG9uc2U7XG4gICAgfSlcbiAgICAuY2F0Y2goKGVycm9yKSA9PiBoYW5kbGVFcnJvcihjb21wb25lbnRfaWQsIGVycm9yKSk7XG59O1xuIiwiaW1wb3J0IHtcbiAgZ2V0RmV0Y2hDb25maWcsXG4gIGhhbmRsZUVycm9yLFxuICBoYW5kbGVSZXNwb25zZSxcbiAgZ2V0TWlkZGxld2FyZUFwaVVybCxcbn0gZnJvbSBcIi4uL21ldGhvZHMvYXBpXCI7XG5pbXBvcnQgdHlwZSB7XG4gIEFjY291bnRRdWVyeSxcbiAgQWNjb3VudCxcbiAgTWlkZGxld2FyZVJlc3BvbnNlLFxufSBmcm9tIFwiQGNvbW1vbnMvdHlwZXMvTnlsYXNcIjtcblxuZXhwb3J0IGNvbnN0IGZldGNoQWNjb3VudCA9IGFzeW5jIChxdWVyeTogQWNjb3VudFF1ZXJ5KTogUHJvbWlzZTxBY2NvdW50PiA9PiB7XG4gIGNvbnN0IGFjY291bnQgPSBhd2FpdCBmZXRjaChcbiAgICBgJHtnZXRNaWRkbGV3YXJlQXBpVXJsKHF1ZXJ5LmNvbXBvbmVudF9pZCl9L2FjY291bnRgLFxuICAgIGdldEZldGNoQ29uZmlnKHF1ZXJ5KSxcbiAgKVxuICAgIC50aGVuKChyZXNwb25zZSkgPT4gaGFuZGxlUmVzcG9uc2U8TWlkZGxld2FyZVJlc3BvbnNlPEFjY291bnQ+PihyZXNwb25zZSkpXG4gICAgLnRoZW4oKGpzb24pID0+IHtcbiAgICAgIHJldHVybiBqc29uLnJlc3BvbnNlO1xuICAgIH0pXG4gICAgLmNhdGNoKChlcnJvcikgPT4gaGFuZGxlRXJyb3IocXVlcnkuY29tcG9uZW50X2lkLCBlcnJvcikpO1xuXG4gIHJldHVybiBhY2NvdW50O1xufTtcbiIsImltcG9ydCB7XG4gIGdldEZldGNoQ29uZmlnLFxuICBoYW5kbGVFcnJvcixcbiAgaGFuZGxlUmVzcG9uc2UsXG4gIGdldE1pZGRsZXdhcmVBcGlVcmwsXG59IGZyb20gXCIuLi9tZXRob2RzL2FwaVwiO1xuaW1wb3J0IHR5cGUge1xuICBDb25zZWN1dGl2ZUF2YWlsYWJpbGl0eVF1ZXJ5LFxuICBBdmFpbGFiaWxpdHlRdWVyeSxcbiAgQXZhaWxhYmlsaXR5UmVzcG9uc2UsXG4gIEZyZWVCdXN5UmVzcG9uc2UsXG4gIFByZURhdGVkVGltZVNsb3QsXG59IGZyb20gXCJAY29tbW9ucy90eXBlcy9BdmFpbGFiaWxpdHlcIjtcbmltcG9ydCB0eXBlIHsgTWlkZGxld2FyZVJlc3BvbnNlIH0gZnJvbSBcIkBjb21tb25zL3R5cGVzL055bGFzXCI7XG5pbXBvcnQgdHlwZSB7IEV2ZW50RGVmaW5pdGlvbiB9IGZyb20gXCJAY29tbW9ucy90eXBlcy9TY2hlZHVsZUVkaXRvclwiO1xuaW1wb3J0IHR5cGUgeyBDb25zZWN1dGl2ZUV2ZW50IH0gZnJvbSBcIkBjb21tb25zL3R5cGVzL0Jvb2tpbmdcIjtcblxuLy8gVE9ETzogZGVwcmVjYXRlIGlmIHdlIGZpbmQgL2NhbGVuZGFycy9hdmFpbGFiaWxpdHkgdG8gYmUgZnVsbHkgc3VmZmljaWVudFxuZXhwb3J0IGNvbnN0IGZldGNoRnJlZUJ1c3kgPSBhc3luYyAoXG4gIHF1ZXJ5OiBBdmFpbGFiaWxpdHlRdWVyeSxcbik6IFByb21pc2U8RnJlZUJ1c3lSZXNwb25zZVtdPiA9PiB7XG4gIHJldHVybiBmZXRjaChcbiAgICBgJHtnZXRNaWRkbGV3YXJlQXBpVXJsKHF1ZXJ5LmNvbXBvbmVudF9pZCl9L2NhbGVuZGFycy9mcmVlLWJ1c3lgLFxuICAgIGdldEZldGNoQ29uZmlnKHtcbiAgICAgIG1ldGhvZDogXCJQT1NUXCIsXG4gICAgICBjb21wb25lbnRfaWQ6IHF1ZXJ5LmNvbXBvbmVudF9pZCxcbiAgICAgIGFjY2Vzc190b2tlbjogcXVlcnkuYWNjZXNzX3Rva2VuLFxuICAgICAgYm9keTogcXVlcnkuYm9keSxcbiAgICB9KSxcbiAgKVxuICAgIC50aGVuKGFzeW5jIChhcGlSZXNwb25zZSkgPT4ge1xuICAgICAgY29uc3QganNvbiA9IGF3YWl0IGhhbmRsZVJlc3BvbnNlPE1pZGRsZXdhcmVSZXNwb25zZTxGcmVlQnVzeVJlc3BvbnNlW10+PihcbiAgICAgICAgYXBpUmVzcG9uc2UsXG4gICAgICApO1xuICAgICAgcmV0dXJuIGpzb24ucmVzcG9uc2U7XG4gICAgfSlcbiAgICAuY2F0Y2goKGVycm9yKSA9PiBoYW5kbGVFcnJvcihxdWVyeS5jb21wb25lbnRfaWQsIGVycm9yKSk7XG59O1xuXG5leHBvcnQgY29uc3QgZmV0Y2hBdmFpbGFiaWxpdHkgPSBhc3luYyAoXG4gIHF1ZXJ5OiBBdmFpbGFiaWxpdHlRdWVyeSxcbik6IFByb21pc2U8QXZhaWxhYmlsaXR5UmVzcG9uc2U+ID0+IHtcbiAgcmV0dXJuIGZldGNoKFxuICAgIGAke2dldE1pZGRsZXdhcmVBcGlVcmwocXVlcnkuY29tcG9uZW50X2lkKX0vY2FsZW5kYXJzL2F2YWlsYWJpbGl0eWAsXG4gICAgZ2V0RmV0Y2hDb25maWcoe1xuICAgICAgbWV0aG9kOiBcIlBPU1RcIixcbiAgICAgIGNvbXBvbmVudF9pZDogcXVlcnkuY29tcG9uZW50X2lkLFxuICAgICAgYWNjZXNzX3Rva2VuOiBxdWVyeS5hY2Nlc3NfdG9rZW4sXG4gICAgICBib2R5OiBxdWVyeS5ib2R5LFxuICAgIH0pLFxuICApXG4gICAgLnRoZW4oYXN5bmMgKGFwaVJlc3BvbnNlKSA9PiB7XG4gICAgICBjb25zdCBqc29uID0gYXdhaXQgaGFuZGxlUmVzcG9uc2U8XG4gICAgICAgIE1pZGRsZXdhcmVSZXNwb25zZTxBdmFpbGFiaWxpdHlSZXNwb25zZT5cbiAgICAgID4oYXBpUmVzcG9uc2UpO1xuICAgICAgLy8gTm9ybWFsaXplIHJlc3BvbnNlIC5zdGFydCBhbmQgLmVuZCB0byAuc3RhcnRfdGltZSBhbmQgLmVuZF90aW1lIHRvIG1ha2UgdXAgZm9yIGRpc2NyZXBlbmRjeSBpbiB0aGUgTnlsYXMgQVBJOiBodHRwczovL2RldmVsb3Blci5ueWxhcy5jb20vZG9jcy9jb25uZWN0aXZpdHkvY2FsZW5kYXIvY2FsZW5kYXItYXZhaWxhYmlsaXR5LyNhdmFpbGFiaWxpdHktcmVzcG9uc2VcbiAgICAgIC8vIEFQSSBzdG9yeTogaHR0cHM6Ly9hcHAuc2hvcnRjdXQuY29tL255bGFzL3N0b3J5LzczMTk2L1xuICAgICAganNvbi5yZXNwb25zZS50aW1lX3Nsb3RzID0ganNvbi5yZXNwb25zZS50aW1lX3Nsb3RzLm1hcCgoc2xvdCkgPT4ge1xuICAgICAgICBzbG90LnN0YXJ0X3RpbWUgPSBzbG90LnN0YXJ0IHx8IDA7XG4gICAgICAgIHNsb3QuZW5kX3RpbWUgPSBzbG90LmVuZCB8fCAwO1xuICAgICAgICBkZWxldGUgc2xvdC5zdGFydDtcbiAgICAgICAgZGVsZXRlIHNsb3QuZW5kO1xuICAgICAgICByZXR1cm4gc2xvdDtcbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIGpzb24ucmVzcG9uc2U7XG4gICAgfSlcbiAgICAuY2F0Y2goKGVycm9yKSA9PiBoYW5kbGVFcnJvcihxdWVyeS5jb21wb25lbnRfaWQsIGVycm9yKSk7XG59O1xuXG5leHBvcnQgY29uc3QgZmV0Y2hDb25zZWN1dGl2ZUF2YWlsYWJpbGl0eSA9IGFzeW5jIChcbiAgcXVlcnk6IENvbnNlY3V0aXZlQXZhaWxhYmlsaXR5UXVlcnksXG4pOiBQcm9taXNlPENvbnNlY3V0aXZlRXZlbnRbXVtdPiA9PiB7XG4gIHJldHVybiBmZXRjaChcbiAgICBgJHtnZXRNaWRkbGV3YXJlQXBpVXJsKFxuICAgICAgcXVlcnkuY29tcG9uZW50X2lkLFxuICAgICl9L2NhbGVuZGFycy9hdmFpbGFiaWxpdHkvY29uc2VjdXRpdmVgLFxuICAgIGdldEZldGNoQ29uZmlnKHtcbiAgICAgIG1ldGhvZDogXCJQT1NUXCIsXG4gICAgICBjb21wb25lbnRfaWQ6IHF1ZXJ5LmNvbXBvbmVudF9pZCxcbiAgICAgIGFjY2Vzc190b2tlbjogcXVlcnkuYWNjZXNzX3Rva2VuLFxuICAgICAgYm9keTogcXVlcnkuYm9keSxcbiAgICB9KSxcbiAgKVxuICAgIC50aGVuKGFzeW5jIChhcGlSZXNwb25zZSk6IFByb21pc2U8Q29uc2VjdXRpdmVFdmVudFtdW10+ID0+IHtcbiAgICAgIGNvbnN0IGpzb24gPSBhd2FpdCBoYW5kbGVSZXNwb25zZTxcbiAgICAgICAgTWlkZGxld2FyZVJlc3BvbnNlPFByZURhdGVkVGltZVNsb3RbXVtdPlxuICAgICAgPihhcGlSZXNwb25zZSk7XG4gICAgICBjb25zdCByZXNwb25zZTogUHJlRGF0ZWRUaW1lU2xvdFtdW10gPVxuICAgICAgICBqc29uLnJlc3BvbnNlPy5tYXAoKGJsb2NrU2xvdCkgPT4ge1xuICAgICAgICAgIGJsb2NrU2xvdCA9IGJsb2NrU2xvdC5tYXAoKHNsb3Q6IGFueSkgPT4ge1xuICAgICAgICAgICAgc2xvdC5zdGFydF90aW1lID0gbmV3IERhdGUoc2xvdC5zdGFydF90aW1lICogMTAwMCk7XG4gICAgICAgICAgICBzbG90LmVuZF90aW1lID0gbmV3IERhdGUoc2xvdC5lbmRfdGltZSAqIDEwMDApO1xuICAgICAgICAgICAgcmV0dXJuIHNsb3Q7XG4gICAgICAgICAgfSk7XG4gICAgICAgICAgcmV0dXJuIGJsb2NrU2xvdDtcbiAgICAgICAgfSkgfHwgW107XG4gICAgICBjb25zdCBoeWRyYXRlZFJlc3BvbnNlID0gaHlkcmF0ZVNsb3RzVG9FdmVudHMoXG4gICAgICAgIHJlc3BvbnNlLFxuICAgICAgICBxdWVyeS5ib2R5LmV2ZW50cyxcbiAgICAgICk7XG4gICAgICBjb25zdCBkZWR1cGVkUmVzcG9uc2UgPVxuICAgICAgICByZW1vdmVTaW11bHRhbmVvdXNBdmFpbGFiaWxpdHlPcHRpb25zKGh5ZHJhdGVkUmVzcG9uc2UpO1xuICAgICAgcmV0dXJuIGRlZHVwZWRSZXNwb25zZTtcbiAgICB9KVxuICAgIC5jYXRjaCgoZXJyb3IpID0+IGhhbmRsZUVycm9yKHF1ZXJ5LmNvbXBvbmVudF9pZCwgZXJyb3IpKTtcbn07XG5cbi8vIERvaW5nIHRoZSBiZXN0IHdlIGNhbiB3aXRoIHdoYXQgd2UndmUgZ290OiAvY2FsZW5kYXJzL2F2YWlsYWJpbGl0eS9jb25zZWN1dGl2ZSBkb2Vzbid0IHJldHVybiBhbnkgaW5mbyBvdGhlciB0aGFuIGVtYWlsc1xuLy8gYW5kIHN0YXJ0L2VuZCB0aW1lcy4gVGhpcyBtZWFucyB0aGF0IGlmIHdlIGhhdmUgdG8gZXZlbnRzIChFdmVudERlZmluaXRpb25zKSB3aXRoIHRoZSBzYW1lIGVtYWlsIGFkZHJlc3Nlcz8gV2UncmUgc2hvb3RpbmcgaW4gdGhlIGRhcmsgYWJvdXQgd2hpY2ggaXMgd2hpY2guXG4vLyBUT0RPOiBhbGxvdyBmb3IgYW4gaW5kaWNhdG9yIG9uIHRoZSBBUEkgc2lkZVxuZnVuY3Rpb24gaHlkcmF0ZVNsb3RzVG9FdmVudHMoXG4gIGF2YWlsYWJpbGl0aWVzOiBQcmVEYXRlZFRpbWVTbG90W11bXSxcbiAgZXZlbnRzOiBFdmVudERlZmluaXRpb25bXSxcbik6IENvbnNlY3V0aXZlRXZlbnRbXVtdIHtcbiAgcmV0dXJuIGF2YWlsYWJpbGl0aWVzLm1hcCgoYmxvY2spID0+IHtcbiAgICByZXR1cm4gYmxvY2subWFwKChzdWJldmVudCkgPT4ge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgLi4uc3ViZXZlbnQsXG4gICAgICAgIC4uLmV2ZW50cy5maW5kKFxuICAgICAgICAgIChldmVudGRlZikgPT5cbiAgICAgICAgICAgIGV2ZW50ZGVmLnBhcnRpY2lwYW50RW1haWxzLmxlbmd0aCA9PT0gc3ViZXZlbnQuZW1haWxzLmxlbmd0aCAmJlxuICAgICAgICAgICAgZXZlbnRkZWYucGFydGljaXBhbnRFbWFpbHMuZXZlcnkoKGVtYWlsKSA9PlxuICAgICAgICAgICAgICBzdWJldmVudC5lbWFpbHMuaW5jbHVkZXMoZW1haWwpLFxuICAgICAgICAgICAgKSxcbiAgICAgICAgKSxcbiAgICAgIH07XG4gICAgfSk7XG4gIH0pIGFzIGFueVtdW107IC8vIFRPRE86IEhvdyB0byBiZXN0IGNvZXJjZSBQcmVEYXRlZFRpbWVTbG90W11bXSB0byBDb25zZWN1dGl2ZUV2ZW50W11bXT8gc3ByZWFkLWNvbWJpbmVkIHJldHVybiBoYW5kbGVzIGl0LlxufVxuXG4vLyBXZSBkb24ndCB3YW50IHRvIG92ZXJidXJkZW4gb3VyIHVzZXJzIHdpdGggdG9vIG11Y2ggc3dlZXQgaG9ycmlibGUgZnJlZWRvbSBvZiBjaG9pY2U7XG4vLyB0aGUgL2NhbGVuZGFycy9hdmFpbGFiaWxpdHkvY29uc2VjdXRpdmUgZW5kcG9pbnQgcmV0dXJucyBvcmRlciBwZXJtdXRhdGlvbnMgd2l0aCBzYW1lIHRpbWUgc2xvdHM7XG4vLyBDdWxsIHRoZW0gZG93biB0byBqdXN0IHRoZSBmaXJzdCB0aGF0IGV4aXN0cyBwZXIgdGltZXNsb3QuXG5mdW5jdGlvbiByZW1vdmVTaW11bHRhbmVvdXNBdmFpbGFiaWxpdHlPcHRpb25zKFxuICBhdmFpbGFiaWxpdGllczogQ29uc2VjdXRpdmVFdmVudFtdW10sXG4pIHtcbiAgY29uc3QgYmxvY2tTZXQgPSBuZXcgU2V0KCk7XG4gIHJldHVybiBhdmFpbGFiaWxpdGllcy5maWx0ZXIoKGJsb2NrKSA9PiB7XG4gICAgY29uc3QgYmxvY2tTdHJpbmcgPSBgJHtibG9ja1swXS5zdGFydF90aW1lfV8ke1xuICAgICAgYmxvY2tbYmxvY2subGVuZ3RoIC0gMV0uZW5kX3RpbWVcbiAgICB9YDtcbiAgICBpZiAoYmxvY2tTZXQuaGFzKGJsb2NrU3RyaW5nKSkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH0gZWxzZSB7XG4gICAgICBibG9ja1NldC5hZGQoYmxvY2tTdHJpbmcpO1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICB9KTtcbn1cbiIsImltcG9ydCB7IFdyaXRhYmxlLCB3cml0YWJsZSB9IGZyb20gXCJzdmVsdGUvc3RvcmVcIjtcbmltcG9ydCB7IGZldGNoQXZhaWxhYmlsaXR5IH0gZnJvbSBcIi4uL2Nvbm5lY3Rpb25zL2F2YWlsYWJpbGl0eVwiO1xuaW1wb3J0IHR5cGUge1xuICBBdmFpbGFiaWxpdHlRdWVyeSxcbiAgQXZhaWxhYmlsaXR5UmVzcG9uc2UsXG59IGZyb20gXCJAY29tbW9ucy90eXBlcy9BdmFpbGFiaWxpdHlcIjtcblxudHlwZSBBdmFpbGFiaWxpdHlTdG9yZSA9IFJlY29yZDxzdHJpbmcsIFByb21pc2U8QXZhaWxhYmlsaXR5UmVzcG9uc2U+PjtcblxuZnVuY3Rpb24gaW5pdGlhbGl6ZSgpOiBXcml0YWJsZTxBdmFpbGFiaWxpdHlTdG9yZT4ge1xuICBjb25zdCBnZXQgPSAoXG4gICAgdGFyZ2V0OiBBdmFpbGFiaWxpdHlTdG9yZSxcbiAgICBrZXk6IHN0cmluZyxcbiAgKTogUHJvbWlzZTxBdmFpbGFiaWxpdHlSZXNwb25zZT4gfCB2b2lkID0+IHtcbiAgICBjb25zdCBhY2Nlc3NvcjogQXZhaWxhYmlsaXR5UXVlcnkgPSBKU09OLnBhcnNlKGtleSk7XG4gICAgLy8gQXZvaWQgc2F2aW5nIGZvcmNlUmVsb2FkIHByb3BlcnR5IGFzIHBhcnQgb2Ygc3RvcmUga2V5XG4gICAgY29uc3QgYWNjZXNzb3JDb3B5ID0geyAuLi5hY2Nlc3NvciB9O1xuICAgIGRlbGV0ZSBhY2Nlc3NvckNvcHkuZm9yY2VSZWxvYWQ7XG4gICAga2V5ID0gSlNPTi5zdHJpbmdpZnkoYWNjZXNzb3JDb3B5KTtcblxuICAgIGlmIChcbiAgICAgICFhY2Nlc3Nvci5jb21wb25lbnRfaWQgfHxcbiAgICAgICFhY2Nlc3Nvcj8uYm9keT8uc3RhcnRfdGltZSB8fFxuICAgICAgIWFjY2Vzc29yPy5ib2R5Py5lbmRfdGltZVxuICAgICkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmICghdGFyZ2V0W2tleV0gfHwgYWNjZXNzb3IuZm9yY2VSZWxvYWQpIHtcbiAgICAgIGNvbnN0IGZldGNoUHJvbWlzZSA9IGZldGNoQXZhaWxhYmlsaXR5KGFjY2Vzc29yKTtcbiAgICAgIHN0b3JlLnVwZGF0ZSgoc3RvcmUpID0+IHtcbiAgICAgICAgc3RvcmVba2V5XSA9IGZldGNoUHJvbWlzZTtcbiAgICAgICAgcmV0dXJuIHN0b3JlO1xuICAgICAgfSk7XG4gICAgICB0YXJnZXRba2V5XSA9IGZldGNoUHJvbWlzZTtcbiAgICB9XG4gICAgcmV0dXJuIHRhcmdldFtrZXldO1xuICB9O1xuICBjb25zdCBzdG9yZSA9IHdyaXRhYmxlKG5ldyBQcm94eTxBdmFpbGFiaWxpdHlTdG9yZT4oe30sIHsgZ2V0IH0pKTtcbiAgcmV0dXJuIHN0b3JlO1xufVxuXG5leHBvcnQgY29uc3QgQXZhaWxhYmlsaXR5U3RvcmUgPSBpbml0aWFsaXplKCk7XG4iLCJpbXBvcnQgeyBXcml0YWJsZSwgd3JpdGFibGUgfSBmcm9tIFwic3ZlbHRlL3N0b3JlXCI7XG5pbXBvcnQgeyBmZXRjaENvbnNlY3V0aXZlQXZhaWxhYmlsaXR5IH0gZnJvbSBcIi4uL2Nvbm5lY3Rpb25zL2F2YWlsYWJpbGl0eVwiO1xuaW1wb3J0IHR5cGUgeyBDb25zZWN1dGl2ZUF2YWlsYWJpbGl0eVF1ZXJ5IH0gZnJvbSBcIkBjb21tb25zL3R5cGVzL0F2YWlsYWJpbGl0eVwiO1xuaW1wb3J0IHR5cGUgeyBDb25zZWN1dGl2ZUV2ZW50IH0gZnJvbSBcIkBjb21tb25zL3R5cGVzL0Jvb2tpbmdcIjtcblxudHlwZSBDb25zZWN1dGl2ZUF2YWlsYWJpbGl0eVN0b3JlID0gUmVjb3JkPFxuICBzdHJpbmcsXG4gIFByb21pc2U8Q29uc2VjdXRpdmVFdmVudFtdW10+XG4+O1xuXG5mdW5jdGlvbiBpbml0aWFsaXplKCk6IFdyaXRhYmxlPENvbnNlY3V0aXZlQXZhaWxhYmlsaXR5U3RvcmU+IHtcbiAgY29uc3QgZ2V0ID0gKFxuICAgIHRhcmdldDogQ29uc2VjdXRpdmVBdmFpbGFiaWxpdHlTdG9yZSxcbiAgICBrZXk6IHN0cmluZyxcbiAgKTogUHJvbWlzZTxDb25zZWN1dGl2ZUV2ZW50W11bXT4gfCB2b2lkID0+IHtcbiAgICBjb25zdCBhY2Nlc3NvcjogQ29uc2VjdXRpdmVBdmFpbGFiaWxpdHlRdWVyeSA9IEpTT04ucGFyc2Uoa2V5KTtcblxuICAgIGlmIChcbiAgICAgICFhY2Nlc3Nvci5jb21wb25lbnRfaWQgfHxcbiAgICAgICFhY2Nlc3Nvcj8uYm9keT8uc3RhcnRfdGltZSB8fFxuICAgICAgIWFjY2Vzc29yPy5ib2R5Py5lbmRfdGltZVxuICAgICkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmICghdGFyZ2V0W2tleV0pIHtcbiAgICAgIGNvbnN0IGZldGNoUHJvbWlzZSA9IGZldGNoQ29uc2VjdXRpdmVBdmFpbGFiaWxpdHkoYWNjZXNzb3IpO1xuICAgICAgc3RvcmUudXBkYXRlKChzdG9yZSkgPT4ge1xuICAgICAgICBzdG9yZVtrZXldID0gZmV0Y2hQcm9taXNlO1xuICAgICAgICByZXR1cm4gc3RvcmU7XG4gICAgICB9KTtcbiAgICAgIHRhcmdldFtrZXldID0gZmV0Y2hQcm9taXNlO1xuICAgIH1cbiAgICByZXR1cm4gdGFyZ2V0W2tleV07XG4gIH07XG4gIGNvbnN0IHN0b3JlID0gd3JpdGFibGUobmV3IFByb3h5PENvbnNlY3V0aXZlQXZhaWxhYmlsaXR5U3RvcmU+KHt9LCB7IGdldCB9KSk7XG4gIHJldHVybiBzdG9yZTtcbn1cblxuZXhwb3J0IGNvbnN0IENvbnNlY3V0aXZlQXZhaWxhYmlsaXR5U3RvcmUgPSBpbml0aWFsaXplKCk7XG4iLCJpbXBvcnQgeyBkZXJpdmVkLCBSZWFkYWJsZSwgd3JpdGFibGUgfSBmcm9tIFwic3ZlbHRlL3N0b3JlXCI7XG5pbXBvcnQge1xuICBmZXRjaFRocmVhZHMsXG4gIGZldGNoU2VhcmNoUmVzdWx0VGhyZWFkcyxcbiAgdXBkYXRlVGhyZWFkLFxuICBmZXRjaFRocmVhZENvdW50LFxufSBmcm9tIFwiLi4vY29ubmVjdGlvbnMvdGhyZWFkc1wiO1xuaW1wb3J0IHR5cGUge1xuICBUaHJlYWQsXG4gIE1haWxib3hRdWVyeSxcbiAgQ29udmVyc2F0aW9uUXVlcnksXG4gIE1lc3NhZ2UsXG4gIENvbnZlcnNhdGlvbixcbn0gZnJvbSBcIkBjb21tb25zL3R5cGVzL055bGFzXCI7XG5pbXBvcnQgeyBzaWxlbmNlIH0gZnJvbSBcIkBjb21tb25zXCI7XG5cbmludGVyZmFjZSBQYWdpbmF0ZWRUaHJlYWRzIHtcbiAgaXNMb2FkZWQ6IGJvb2xlYW47XG4gIHRocmVhZHM6IFRocmVhZFtdO1xufVxuXG5hc3luYyBmdW5jdGlvbiBpbml0aWFsaXplUGFnaW5hdGVkVGhyZWFkcyh0b3RhbFBhZ2VzOiBudW1iZXIpIHtcbiAgY29uc3QgcGFnaW5hdGVkVGhyZWFkcyA9IFtdO1xuXG4gIGZvciAobGV0IGkgPSAwOyBpIDwgdG90YWxQYWdlczsgaSsrKSB7XG4gICAgcGFnaW5hdGVkVGhyZWFkcy5wdXNoKHtcbiAgICAgIGlzTG9hZGVkOiBmYWxzZSxcbiAgICAgIHRocmVhZHM6IDxUaHJlYWRbXT5bXSxcbiAgICB9KTtcbiAgfVxuICByZXR1cm4gcGFnaW5hdGVkVGhyZWFkcztcbn1cblxuZnVuY3Rpb24gaW5pdGlhbGl6ZVRocmVhZHMoKSB7XG4gIGNvbnN0IHsgc3Vic2NyaWJlLCBzZXQsIHVwZGF0ZSB9ID0gd3JpdGFibGU8XG4gICAgUmVjb3JkPHN0cmluZywgUGFnaW5hdGVkVGhyZWFkc1tdPlxuICA+KHt9KTtcbiAgbGV0IHRocmVhZHNNYXA6IFJlY29yZDxzdHJpbmcsIFBhZ2luYXRlZFRocmVhZHNbXT4gPSB7fTtcbiAgbGV0IHRvdGFsSXRlbXM6IG51bWJlcjtcblxuICByZXR1cm4ge1xuICAgIHN1YnNjcmliZSxcbiAgICBzZXQsXG4gICAgZ2V0VGhyZWFkczogYXN5bmMgKFxuICAgICAgcXVlcnk6IE1haWxib3hRdWVyeSxcbiAgICAgIGN1cnJlbnRQYWdlOiBudW1iZXIsXG4gICAgICBwYWdlU2l6ZTogbnVtYmVyLFxuICAgICAgZm9yY2VSZWZyZXNoID0gZmFsc2UsXG4gICAgKSA9PiB7XG4gICAgICBjb25zdCBxdWVyeUtleSA9IEpTT04uc3RyaW5naWZ5KHF1ZXJ5KTtcblxuICAgICAgaWYgKCFxdWVyeS5jb21wb25lbnRfaWQgJiYgIXF1ZXJ5LmFjY2Vzc190b2tlbikge1xuICAgICAgICAvLyBUaGlzIHNob3VsZCBhbGVydCB0aGUgdXNlclxuICAgICAgICByZXR1cm4gW107XG4gICAgICB9XG5cbiAgICAgIGlmICh0b3RhbEl0ZW1zID09PSB1bmRlZmluZWQgfHwgZm9yY2VSZWZyZXNoKSB7XG4gICAgICAgIC8vIFRPRE86IHRoaXMgY2FuIGNvdW50IHBhc3NlZC1pbiBJRHNcbiAgICAgICAgY29uc3QgdGhyZWFkQ291bnQgPSBxdWVyeS50aHJlYWRfaWRzXG4gICAgICAgICAgPyBxdWVyeS50aHJlYWRfaWRzLmxlbmd0aFxuICAgICAgICAgIDogYXdhaXQgZmV0Y2hUaHJlYWRDb3VudChxdWVyeSkuY2F0Y2goc2lsZW5jZSk7XG5cbiAgICAgICAgaWYgKHRocmVhZENvdW50KSB7XG4gICAgICAgICAgdG90YWxJdGVtcyA9IHRocmVhZENvdW50O1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmICghQXJyYXkuaXNBcnJheSh0aHJlYWRzTWFwW3F1ZXJ5S2V5XSkgfHwgZm9yY2VSZWZyZXNoKSB7XG4gICAgICAgIGNvbnN0IHRvdGFsUGFnZXMgPSBNYXRoLmNlaWwodG90YWxJdGVtcyAvIHBhZ2VTaXplKTtcbiAgICAgICAgdGhyZWFkc01hcFtxdWVyeUtleV0gPSBhd2FpdCBpbml0aWFsaXplUGFnaW5hdGVkVGhyZWFkcyh0b3RhbFBhZ2VzKTtcbiAgICAgIH1cblxuICAgICAgaWYgKHR5cGVvZiB0aHJlYWRzTWFwW3F1ZXJ5S2V5XVtjdXJyZW50UGFnZV0gPT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgICAgLy8gU2hvdWxkbid0IHRoaXMgYmUgYW4gaW50ZXJuYWwgZXJyb3I/XG4gICAgICAgIHJldHVybiBbXTtcbiAgICAgIH0gZWxzZSBpZiAoIXRocmVhZHNNYXBbcXVlcnlLZXldW2N1cnJlbnRQYWdlXS5pc0xvYWRlZCkge1xuICAgICAgICBjb25zdCB0aHJlYWRzID0gYXdhaXQgZmV0Y2hUaHJlYWRzKFxuICAgICAgICAgIHF1ZXJ5LFxuICAgICAgICAgIHBhZ2VTaXplLFxuICAgICAgICAgIGN1cnJlbnRQYWdlICogcGFnZVNpemUsXG4gICAgICAgICkuY2F0Y2goc2lsZW5jZSk7XG5cbiAgICAgICAgaWYgKHRocmVhZHMpIHtcbiAgICAgICAgICB0aHJlYWRzTWFwW3F1ZXJ5S2V5XVtjdXJyZW50UGFnZV0udGhyZWFkcyA9IHRocmVhZHM7XG4gICAgICAgICAgdGhyZWFkc01hcFtxdWVyeUtleV1bY3VycmVudFBhZ2VdLmlzTG9hZGVkID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICB1cGRhdGUoKHRocmVhZHMpID0+IHtcbiAgICAgICAgdGhyZWFkc1txdWVyeUtleV0gPSB0aHJlYWRzTWFwW3F1ZXJ5S2V5XTtcbiAgICAgICAgcmV0dXJuIHsgLi4udGhyZWFkcyB9O1xuICAgICAgfSk7XG5cbiAgICAgIHJldHVybiB0aHJlYWRzTWFwW3F1ZXJ5S2V5XVtjdXJyZW50UGFnZV0udGhyZWFkcztcbiAgICB9LFxuICAgIGdldE51bWJlck9mSXRlbXM6IGFzeW5jIChxdWVyeTogTWFpbGJveFF1ZXJ5KSA9PiB7XG4gICAgICBpZiAoIXF1ZXJ5LmNvbXBvbmVudF9pZCAmJiAhcXVlcnkuYWNjZXNzX3Rva2VuKSB7XG4gICAgICAgIHJldHVybiAwO1xuICAgICAgfVxuXG4gICAgICBpZiAodHlwZW9mIHRvdGFsSXRlbXMgPT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgICAgY29uc3QgdGhyZWFkQ291bnQgPSBhd2FpdCBmZXRjaFRocmVhZENvdW50KHF1ZXJ5KS5jYXRjaChzaWxlbmNlKTtcblxuICAgICAgICBpZiAodGhyZWFkQ291bnQpIHtcbiAgICAgICAgICB0b3RhbEl0ZW1zID0gdGhyZWFkQ291bnQ7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiB0b3RhbEl0ZW1zO1xuICAgIH0sXG4gICAgLy8gVE9ETyAtIFVzZSByZWFsIHBhZ2luYXRpb24gd2hlbiBzZWFyY2ggZW5kcG9pbnQgc3VwcG9ydHMgaXRcbiAgICBnZXRUaHJlYWRzV2l0aFNlYXJjaEtleXdvcmQ6IGFzeW5jIChcbiAgICAgIHF1ZXJ5OiBNYWlsYm94UXVlcnksXG4gICAgICBmb3JjZVJlZnJlc2ggPSBmYWxzZSxcbiAgICApID0+IHtcbiAgICAgIGlmICghcXVlcnkuY29tcG9uZW50X2lkICYmICFxdWVyeS5hY2Nlc3NfdG9rZW4pIHtcbiAgICAgICAgcmV0dXJuIFtdO1xuICAgICAgfVxuICAgICAgY29uc3QgcXVlcnlLZXkgPSBKU09OLnN0cmluZ2lmeShxdWVyeSk7XG5cbiAgICAgIGlmICghQXJyYXkuaXNBcnJheSh0aHJlYWRzTWFwW3F1ZXJ5S2V5XSkgfHwgZm9yY2VSZWZyZXNoKSB7XG4gICAgICAgIHRocmVhZHNNYXBbcXVlcnlLZXldID0gYXdhaXQgaW5pdGlhbGl6ZVBhZ2luYXRlZFRocmVhZHMoMSk7XG4gICAgICB9XG5cbiAgICAgIGlmICghdGhyZWFkc01hcFtxdWVyeUtleV1bMF0uaXNMb2FkZWQgfHwgZm9yY2VSZWZyZXNoKSB7XG4gICAgICAgIGNvbnN0IHNlYXJjaFJlc3VsdFRocmVhZHMgPSBhd2FpdCBmZXRjaFNlYXJjaFJlc3VsdFRocmVhZHMocXVlcnkpLmNhdGNoKFxuICAgICAgICAgIHNpbGVuY2UsXG4gICAgICAgICk7XG5cbiAgICAgICAgaWYgKHNlYXJjaFJlc3VsdFRocmVhZHMpIHtcbiAgICAgICAgICB0aHJlYWRzTWFwW3F1ZXJ5S2V5XVswXS50aHJlYWRzID0gc2VhcmNoUmVzdWx0VGhyZWFkcztcbiAgICAgICAgICB0aHJlYWRzTWFwW3F1ZXJ5S2V5XVswXS5pc0xvYWRlZCA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHVwZGF0ZSgodGhyZWFkcykgPT4ge1xuICAgICAgICB0aHJlYWRzW3F1ZXJ5S2V5XSA9IHRocmVhZHNNYXBbcXVlcnlLZXldO1xuICAgICAgICByZXR1cm4geyAuLi50aHJlYWRzIH07XG4gICAgICB9KTtcbiAgICAgIHJldHVybiB0aHJlYWRzTWFwW3F1ZXJ5S2V5XVswXS50aHJlYWRzO1xuICAgIH0sXG4gICAgdXBkYXRlVGhyZWFkOiBhc3luYyAoXG4gICAgICB0aHJlYWRRdWVyeTogQ29udmVyc2F0aW9uUXVlcnksXG4gICAgICBxdWVyeUtleTogc3RyaW5nLFxuICAgICAgdXBkYXRlZFRocmVhZDogQ29udmVyc2F0aW9uLFxuICAgICAgY3VycmVudFBhZ2U6IG51bWJlcixcbiAgICAgIHBhZ2VTaXplOiBudW1iZXIsXG4gICAgKSA9PiB7XG4gICAgICBjb25zdCB0aHJlYWQgPSBhd2FpdCB1cGRhdGVUaHJlYWQodGhyZWFkUXVlcnksIHVwZGF0ZWRUaHJlYWQpLmNhdGNoKFxuICAgICAgICBzaWxlbmNlLFxuICAgICAgKTtcblxuICAgICAgaWYgKCF0aHJlYWRzTWFwW3F1ZXJ5S2V5XVtjdXJyZW50UGFnZV0uaXNMb2FkZWQpIHtcbiAgICAgICAgLy8gcG9zc2libGUgaGFjazogcGFzcyBpbiBhcnJheSB0byBxdWVyeT9cbiAgICAgICAgY29uc3QgdGhyZWFkcyA9IGF3YWl0IGZldGNoVGhyZWFkcyhcbiAgICAgICAgICBKU09OLnBhcnNlKHF1ZXJ5S2V5KSxcbiAgICAgICAgICBwYWdlU2l6ZSxcbiAgICAgICAgICBjdXJyZW50UGFnZSAqIHBhZ2VTaXplLFxuICAgICAgICApLmNhdGNoKHNpbGVuY2UpO1xuXG4gICAgICAgIGlmICh0aHJlYWRzKSB7XG4gICAgICAgICAgdGhyZWFkc01hcFtxdWVyeUtleV1bY3VycmVudFBhZ2VdLnRocmVhZHMgPSB0aHJlYWRzO1xuICAgICAgICAgIHRocmVhZHNNYXBbcXVlcnlLZXldW2N1cnJlbnRQYWdlXS5pc0xvYWRlZCA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgdGhyZWFkc01hcFtxdWVyeUtleV1bY3VycmVudFBhZ2VdLnRocmVhZHMgPSB0aHJlYWRzTWFwW3F1ZXJ5S2V5XVtcbiAgICAgICAgY3VycmVudFBhZ2VcbiAgICAgIF0udGhyZWFkcy5tYXAoKGluaXRpYWxUaHJlYWQpID0+IHtcbiAgICAgICAgaWYgKHRocmVhZCAmJiBpbml0aWFsVGhyZWFkLmlkID09PSB0aHJlYWQuaWQpIHtcbiAgICAgICAgICBpbml0aWFsVGhyZWFkID0gT2JqZWN0LmFzc2lnbihpbml0aWFsVGhyZWFkLCB0aHJlYWQpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBpbml0aWFsVGhyZWFkO1xuICAgICAgfSk7XG4gICAgICB1cGRhdGUoKHRocmVhZHMpID0+IHtcbiAgICAgICAgdGhyZWFkc1txdWVyeUtleV0gPSB0aHJlYWRzTWFwW3F1ZXJ5S2V5XTtcbiAgICAgICAgcmV0dXJuIHsgLi4udGhyZWFkcyB9O1xuICAgICAgfSk7XG4gICAgICByZXR1cm4gdGhyZWFkc01hcFtxdWVyeUtleV1bY3VycmVudFBhZ2VdLnRocmVhZHM7XG4gICAgfSxcbiAgICB1cGRhdGVUaHJlYWRTZWxlY3Rpb246IChcbiAgICAgIHF1ZXJ5S2V5OiBzdHJpbmcsXG4gICAgICBjdXJyZW50UGFnZTogbnVtYmVyLFxuICAgICAgdGhyZWFkSWQ/OiBzdHJpbmcsXG4gICAgKSA9PiB7XG4gICAgICBjb25zdCB0aHJlYWRzID0gdGhyZWFkc01hcFtxdWVyeUtleV1bY3VycmVudFBhZ2VdLnRocmVhZHM7XG5cbiAgICAgIGlmICghdGhyZWFkSWQpIHtcbiAgICAgICAgY29uc3Qgc2VsZWN0aW9uU3RhdGUgPSB0aHJlYWRzLnNvbWUoKHRocmVhZCkgPT4gdGhyZWFkLnNlbGVjdGVkKTtcbiAgICAgICAgZm9yIChjb25zdCB0aHJlYWQgb2YgdGhyZWFkcykge1xuICAgICAgICAgIHRocmVhZC5zZWxlY3RlZCA9ICFzZWxlY3Rpb25TdGF0ZTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29uc3QgdGhyZWFkID0gdGhyZWFkcy5maW5kKCh0aHJlYWQpID0+IHRocmVhZC5pZCA9PT0gdGhyZWFkSWQpO1xuICAgICAgICBpZiAodGhyZWFkKSB7XG4gICAgICAgICAgdGhyZWFkLnNlbGVjdGVkID0gIXRocmVhZC5zZWxlY3RlZDtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgdXBkYXRlKCh0aHJlYWRzKSA9PiB7XG4gICAgICAgIHRocmVhZHNbcXVlcnlLZXldID0gdGhyZWFkc01hcFtxdWVyeUtleV07XG4gICAgICAgIHJldHVybiB7IC4uLnRocmVhZHMgfTtcbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIHRocmVhZHNNYXBbcXVlcnlLZXldW2N1cnJlbnRQYWdlXS50aHJlYWRzO1xuICAgIH0sXG5cbiAgICByZXNldDogKCkgPT4ge1xuICAgICAgdGhyZWFkc01hcCA9IHt9O1xuICAgICAgc2V0KHt9KTtcbiAgICB9LFxuXG4gICAgaHlkcmF0ZU1lc3NhZ2VJblRocmVhZDogKFxuICAgICAgaW5jb21pbmdNZXNzYWdlOiBNZXNzYWdlLFxuICAgICAgcXVlcnk6IE1haWxib3hRdWVyeSxcbiAgICAgIGN1cnJlbnRQYWdlOiBudW1iZXIsXG4gICAgKSA9PiB7XG4gICAgICBjb25zdCBxdWVyeUtleSA9IEpTT04uc3RyaW5naWZ5KHF1ZXJ5KTtcblxuICAgICAgY29uc3QgZm91bmRUaHJlYWQgPSB0aHJlYWRzTWFwW3F1ZXJ5S2V5XVtjdXJyZW50UGFnZV0/LnRocmVhZHM/LmZpbmQoXG4gICAgICAgICh0aHJlYWQpID0+IHRocmVhZC5pZCA9PT0gaW5jb21pbmdNZXNzYWdlLnRocmVhZF9pZCxcbiAgICAgICk7XG4gICAgICBpZiAoZm91bmRUaHJlYWQpIHtcbiAgICAgICAgY29uc3QgZm91bmRNZXNzYWdlID0gZm91bmRUaHJlYWQubWVzc2FnZXM/LmZpbmQoXG4gICAgICAgICAgKG1lc3NhZ2UpID0+IG1lc3NhZ2UuaWQgPT09IGluY29taW5nTWVzc2FnZS5pZCxcbiAgICAgICAgKTtcbiAgICAgICAgaWYgKGZvdW5kTWVzc2FnZSkge1xuICAgICAgICAgIGZvdW5kTWVzc2FnZS5ib2R5ID0gaW5jb21pbmdNZXNzYWdlLmJvZHk7XG4gICAgICAgICAgdXBkYXRlKCh0aHJlYWRzKSA9PiB7XG4gICAgICAgICAgICBpZiAoaW5jb21pbmdNZXNzYWdlLnRocmVhZF9pZCkge1xuICAgICAgICAgICAgICBsZXQgdGhyZWFkVG9VcGRhdGUgPSB0aHJlYWRzW3F1ZXJ5S2V5XVtjdXJyZW50UGFnZV0udGhyZWFkcy5maW5kKFxuICAgICAgICAgICAgICAgICh0aHJlYWQpID0+IHRocmVhZC5pZCA9PT0gZm91bmRUaHJlYWQuaWQsXG4gICAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgICAgaWYgKHRocmVhZFRvVXBkYXRlKSB7XG4gICAgICAgICAgICAgICAgdGhyZWFkVG9VcGRhdGUgPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KGZvdW5kVGhyZWFkKSk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB7IC4uLnRocmVhZHMgfTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAvLyBUaGlzIGhhcHBlbnMgd2hlbiBzb21lb25lIHNlbmRzIGEgbWVzc2FnZSB1c2luZyBjb21wb3NlciBhbmQgd2Ugd2FudFxuICAgICAgICAgIC8vIHRvIHVwZGF0ZSB0aGUgZXhpc3RpbmcgdGhyZWFkIHdpdGggdGhlIHNlbnQgbWVzc2FnZVxuICAgICAgICAgIHVwZGF0ZSgodGhyZWFkcykgPT4ge1xuICAgICAgICAgICAgaWYgKGluY29taW5nTWVzc2FnZS50aHJlYWRfaWQpIHtcbiAgICAgICAgICAgICAgbGV0IHRocmVhZFRvVXBkYXRlID0gdGhyZWFkc1txdWVyeUtleV1bY3VycmVudFBhZ2VdLnRocmVhZHMuZmluZChcbiAgICAgICAgICAgICAgICAodGhyZWFkKSA9PiB0aHJlYWQuaWQgPT09IGZvdW5kVGhyZWFkLmlkLFxuICAgICAgICAgICAgICApO1xuXG4gICAgICAgICAgICAgIGlmICh0aHJlYWRUb1VwZGF0ZSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IG1lc3NhZ2VzID0gZm91bmRUaHJlYWQubWVzc2FnZXM7XG4gICAgICAgICAgICAgICAgbWVzc2FnZXMucHVzaChpbmNvbWluZ01lc3NhZ2UpO1xuICAgICAgICAgICAgICAgIGZvdW5kVGhyZWFkLm1lc3NhZ2VzID0gbWVzc2FnZXM7XG4gICAgICAgICAgICAgICAgZm91bmRUaHJlYWQuc25pcHBldCA9IGluY29taW5nTWVzc2FnZS5zbmlwcGV0O1xuICAgICAgICAgICAgICAgIC8vUmVtb3ZlIGRyYWZ0IHdpdGggdGhlIHNhbWUgaWQgYXMgc2VudCBtZXNzYWdlXG4gICAgICAgICAgICAgICAgZm91bmRUaHJlYWQuZHJhZnRzID0gZm91bmRUaHJlYWQuZHJhZnRzLmZpbHRlcihcbiAgICAgICAgICAgICAgICAgIChkcmFmdCkgPT4gZHJhZnQuaWQgIT09IGluY29taW5nTWVzc2FnZS5pZCxcbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgIHRocmVhZFRvVXBkYXRlID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShmb3VuZFRocmVhZCkpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4geyAuLi50aHJlYWRzIH07XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHRocmVhZHNNYXBbcXVlcnlLZXldW2N1cnJlbnRQYWdlXS50aHJlYWRzO1xuICAgIH0sXG5cbiAgICAvL1VwZGF0ZSBkcmFmdHMgaW4gdGhlIHRocmVhZHMgc3RvcmVcbiAgICBoeWRyYXRlRHJhZnRJblRocmVhZDogKFxuICAgICAgaW5jb21pbmdEcmFmdDogTWVzc2FnZSxcbiAgICAgIHF1ZXJ5OiBNYWlsYm94UXVlcnksXG4gICAgICBjdXJyZW50UGFnZTogbnVtYmVyLFxuICAgICkgPT4ge1xuICAgICAgY29uc3QgcXVlcnlLZXkgPSBKU09OLnN0cmluZ2lmeShxdWVyeSk7XG5cbiAgICAgIGNvbnN0IGZvdW5kVGhyZWFkID0gdGhyZWFkc01hcFtxdWVyeUtleV1bY3VycmVudFBhZ2VdPy50aHJlYWRzPy5maW5kKFxuICAgICAgICAodGhyZWFkKSA9PiB0aHJlYWQuaWQgPT09IGluY29taW5nRHJhZnQudGhyZWFkX2lkLFxuICAgICAgKTtcbiAgICAgIGlmIChmb3VuZFRocmVhZCkge1xuICAgICAgICAvL1VwZGF0ZSBleGlzdGluZyBkcmFmdCBtZXNzYWdlIGluIHN0b3JlXG4gICAgICAgIGNvbnN0IGZvdW5kRHJhZnQgPSBmb3VuZFRocmVhZC5kcmFmdHM/LmZpbmQoXG4gICAgICAgICAgKGRyYWZ0KSA9PiBkcmFmdC5pZCA9PT0gaW5jb21pbmdEcmFmdC5pZCxcbiAgICAgICAgKTtcblxuICAgICAgICBpZiAoaW5jb21pbmdEcmFmdC50aHJlYWRfaWQpIHtcbiAgICAgICAgICBpZiAoZm91bmREcmFmdCkge1xuICAgICAgICAgICAgT2JqZWN0LmFzc2lnbihmb3VuZERyYWZ0LCBpbmNvbWluZ0RyYWZ0KTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY29uc3QgZHJhZnRzID0gZm91bmRUaHJlYWQuZHJhZnRzO1xuICAgICAgICAgICAgZHJhZnRzLnB1c2goaW5jb21pbmdEcmFmdCk7XG4gICAgICAgICAgICBmb3VuZFRocmVhZC5kcmFmdHMgPSBkcmFmdHM7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgdXBkYXRlKCh0aHJlYWRzKSA9PiB7XG4gICAgICAgICAgICBsZXQgdGhyZWFkVG9VcGRhdGUgPSB0aHJlYWRzW3F1ZXJ5S2V5XVtjdXJyZW50UGFnZV0udGhyZWFkcy5maW5kKFxuICAgICAgICAgICAgICAodGhyZWFkKSA9PiB0aHJlYWQuaWQgPT09IGZvdW5kVGhyZWFkLmlkLFxuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIGlmICh0aHJlYWRUb1VwZGF0ZSkge1xuICAgICAgICAgICAgICB0aHJlYWRUb1VwZGF0ZSA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkoZm91bmRUaHJlYWQpKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIHsgLi4udGhyZWFkcyB9O1xuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gdGhyZWFkc01hcFtxdWVyeUtleV1bY3VycmVudFBhZ2VdLnRocmVhZHM7XG4gICAgfSxcbiAgfTtcbn1cblxuZXhwb3J0IGNvbnN0IE1haWxib3hTdG9yZSA9IGluaXRpYWxpemVUaHJlYWRzKCk7XG5cbmV4cG9ydCBjb25zdCBFbWFpbFN0b3JlOiBSZWFkYWJsZTxSZWNvcmQ8c3RyaW5nLCBUaHJlYWRbXT4+ID0gZGVyaXZlZChcbiAgTWFpbGJveFN0b3JlLFxuICAoJE1haWxib3hTdG9yZSkgPT4ge1xuICAgIGNvbnN0IGVtYWlsU3RvcmU6IFJlY29yZDxzdHJpbmcsIFRocmVhZFtdPiA9IHt9O1xuICAgIE9iamVjdC5lbnRyaWVzKCRNYWlsYm94U3RvcmUpLmZvckVhY2goXG4gICAgICAoW2tleSwgcGFnaW5hdGVkVGhyZWFkc10pID0+XG4gICAgICAgIChlbWFpbFN0b3JlW2tleV0gPSBwYWdpbmF0ZWRUaHJlYWRzXG4gICAgICAgICAgLm1hcCgocGFnaW5hdGVkVGhyZWFkKSA9PiBwYWdpbmF0ZWRUaHJlYWQudGhyZWFkcylcbiAgICAgICAgICAuZmxhdCgpKSxcbiAgICApO1xuICAgIHJldHVybiBlbWFpbFN0b3JlO1xuICB9LFxuKTtcbiIsImltcG9ydCB7IGZldGNoTWFuaWZlc3QgfSBmcm9tIFwiLi4vY29ubmVjdGlvbnMvbWFuaWZlc3RcIjtcbmltcG9ydCB7IFdyaXRhYmxlLCB3cml0YWJsZSB9IGZyb20gXCJzdmVsdGUvc3RvcmVcIjtcbmltcG9ydCB0eXBlIHsgTWFuaWZlc3QgfSBmcm9tIFwiQGNvbW1vbnMvdHlwZXMvTnlsYXNcIjtcblxudHlwZSBNYW5pZmVzdEFjY2Vzc29yID0ge1xuICBjb21wb25lbnRfaWQ6IHN0cmluZztcbiAgYWNjZXNzX3Rva2VuPzogc3RyaW5nO1xuICBleHRlcm5hbF9tYW5pZmVzdF9pZHM/OiBbXTtcbn07XG50eXBlIE1hbmlmZXN0U3RvcmUgPSBSZWNvcmQ8c3RyaW5nLCBQcm9taXNlPE1hbmlmZXN0Pj47XG5cbmZ1bmN0aW9uIGluaXRpYWxpemUoKTogV3JpdGFibGU8TWFuaWZlc3RTdG9yZT4ge1xuICBjb25zdCBnZXQgPSAoXG4gICAgdGFyZ2V0OiBNYW5pZmVzdFN0b3JlLFxuICAgIGtleTogc3RyaW5nLFxuICApOiBQcm9taXNlPE1hbmlmZXN0PiB8IHZvaWQgPT4ge1xuICAgIGNvbnN0IGFjY2Vzc29yOiBNYW5pZmVzdEFjY2Vzc29yID0gSlNPTi5wYXJzZShrZXkpO1xuXG4gICAgaWYgKCFhY2Nlc3Nvci5jb21wb25lbnRfaWQpIHJldHVybjtcblxuICAgIGlmICghdGFyZ2V0W2tleV0pIHtcbiAgICAgIGNvbnN0IGZldGNoUHJvbWlzZSA9IGZldGNoTWFuaWZlc3QoXG4gICAgICAgIGFjY2Vzc29yLmNvbXBvbmVudF9pZCxcbiAgICAgICAgYWNjZXNzb3IuYWNjZXNzX3Rva2VuLFxuICAgICAgKTtcbiAgICAgIHN0b3JlLnVwZGF0ZSgoc3RvcmUpID0+IHtcbiAgICAgICAgc3RvcmVba2V5XSA9IGZldGNoUHJvbWlzZTtcbiAgICAgICAgcmV0dXJuIHN0b3JlO1xuICAgICAgfSk7XG4gICAgICB0YXJnZXRba2V5XSA9IGZldGNoUHJvbWlzZTtcbiAgICB9XG4gICAgcmV0dXJuIHRhcmdldFtrZXldO1xuICB9O1xuICBjb25zdCBzdG9yZSA9IHdyaXRhYmxlKG5ldyBQcm94eTxNYW5pZmVzdFN0b3JlPih7fSwgeyBnZXQgfSkpO1xuICByZXR1cm4gc3RvcmU7XG59XG5cbmV4cG9ydCBjb25zdCBNYW5pZmVzdFN0b3JlID0gaW5pdGlhbGl6ZSgpO1xuIiwiaW1wb3J0IHR5cGUgeyBGaWxlLCBNYW5pZmVzdCB9IGZyb20gXCJAY29tbW9ucy90eXBlcy9OeWxhc1wiO1xuXG5leHBvcnQgZnVuY3Rpb24gZ2V0RXZlbnREaXNwYXRjaGVyKGNvbXBvbmVudDoge1xuICBkaXNwYXRjaEV2ZW50PzogKGU6IEV2ZW50KSA9PiBib29sZWFuO1xufSkge1xuICByZXR1cm4gKG5hbWU6IHN0cmluZywgZGV0YWlsOiB1bmtub3duKTogdm9pZCA9PiB7XG4gICAgaWYgKGNvbXBvbmVudC5kaXNwYXRjaEV2ZW50KSB7XG4gICAgICBjb21wb25lbnQuZGlzcGF0Y2hFdmVudChcbiAgICAgICAgbmV3IEN1c3RvbUV2ZW50KG5hbWUsIHtcbiAgICAgICAgICBkZXRhaWwsXG4gICAgICAgICAgY29tcG9zZWQ6IHRydWUsIC8vIHByb3BhZ2F0ZSBhY3Jvc3MgdGhlIHNoYWRvdyBET01cbiAgICAgICAgfSksXG4gICAgICApO1xuICAgIH1cbiAgfTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGRlYm91bmNlKFxuICBmbjogKGFyZ3M6IHVua25vd24pID0+IHVua25vd24sXG4gIHRpbWU6IG51bWJlcixcbik6ICgpID0+IHZvaWQge1xuICBsZXQgdGltZW91dElkOiBSZXR1cm5UeXBlPHR5cGVvZiBzZXRUaW1lb3V0PjtcbiAgcmV0dXJuICgpOiB2b2lkID0+IHtcbiAgICBpZiAodGltZW91dElkKSB7XG4gICAgICBjbGVhclRpbWVvdXQodGltZW91dElkKTtcbiAgICB9XG5cbiAgICB0aW1lb3V0SWQgPSBzZXRUaW1lb3V0KGZuLCB0aW1lKTtcbiAgfTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGJ1aWxkSW50ZXJuYWxQcm9wczxUIGV4dGVuZHMgUGFydGlhbDxNYW5pZmVzdD4+KFxuICBwcm9wZXJ0aWVzOiBULFxuICBtYW5pZmVzdDogVCxcbiAgZGVmYXVsdFZhbHVlTWFwOiBULFxuKTogVCB7XG4gIHJldHVybiBuZXcgUHJveHkocHJvcGVydGllcywge1xuICAgIGdldDogKHRhcmdldCwgbmFtZToga2V5b2YgTWFuaWZlc3QgfCBcInRvSlNPTlwiIHwgXCJ0b1N0cmluZ1wiKSA9PiB7XG4gICAgICBpZiAobmFtZSA9PT0gXCJ0b1N0cmluZ1wiIHx8IG5hbWUgPT09IFwidG9KU09OXCIpIHtcbiAgICAgICAgcmV0dXJuICgpID0+IEpTT04uc3RyaW5naWZ5KHRhcmdldCk7XG4gICAgICB9XG5cbiAgICAgIGlmIChSZWZsZWN0LmdldCh0YXJnZXQsIG5hbWUpICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgcmV0dXJuIGdldFByb3BlcnR5VmFsdWUoXG4gICAgICAgICAgUmVmbGVjdC5nZXQodGFyZ2V0LCBuYW1lKSxcbiAgICAgICAgICBkZWZhdWx0VmFsdWVNYXBbbmFtZV0sXG4gICAgICAgICk7XG4gICAgICB9XG5cbiAgICAgIGlmIChtYW5pZmVzdCAmJiBuYW1lIGluIG1hbmlmZXN0KSB7XG4gICAgICAgIHJldHVybiBnZXRQcm9wZXJ0eVZhbHVlKG1hbmlmZXN0W25hbWVdLCBkZWZhdWx0VmFsdWVNYXBbbmFtZV0pO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGRlZmF1bHRWYWx1ZU1hcFtuYW1lXTtcbiAgICB9LFxuXG4gICAgb3duS2V5czogKHRhcmdldCkgPT4ge1xuICAgICAgY29uc3Qga2V5cyA9IG5ldyBTZXQoW1xuICAgICAgICAuLi5SZWZsZWN0Lm93bktleXModGFyZ2V0KSxcbiAgICAgICAgLi4uT2JqZWN0LmtleXMobWFuaWZlc3QpLFxuICAgICAgICAuLi5PYmplY3Qua2V5cyhkZWZhdWx0VmFsdWVNYXApLFxuICAgICAgXSk7XG4gICAgICByZXR1cm4gQXJyYXkuZnJvbShrZXlzKTtcbiAgICB9LFxuXG4gICAgZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yOiAodGFyZ2V0LCBwcm9wKSA9PiB7XG4gICAgICBsZXQgcHJvcERlc2NyaXB0b3IgPSBSZWZsZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0YXJnZXQsIHByb3ApO1xuICAgICAgaWYgKCFwcm9wRGVzY3JpcHRvcikge1xuICAgICAgICBwcm9wRGVzY3JpcHRvciA9IChtYW5pZmVzdCAmJlxuICAgICAgICAgIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IobWFuaWZlc3QsIHByb3ApKSA/P1xuICAgICAgICAgIChkZWZhdWx0VmFsdWVNYXAgJiZcbiAgICAgICAgICAgIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoZGVmYXVsdFZhbHVlTWFwLCBwcm9wKSkgPz8ge1xuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgIH07XG4gICAgICAgIFJlZmxlY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBwcm9wLCBwcm9wRGVzY3JpcHRvcik7XG4gICAgICB9XG4gICAgICByZXR1cm4gcHJvcERlc2NyaXB0b3I7XG4gICAgfSxcbiAgfSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRQcm9wZXJ0eVZhbHVlPFQ+KHByb3BWYWx1ZTogYW55LCBkZWZhdWx0VG86IFQpOiBUIHtcbiAgaWYgKHByb3BWYWx1ZSkge1xuICAgIGlmICh0eXBlb2YgZGVmYXVsdFRvID09PSBcImJvb2xlYW5cIikge1xuICAgICAgcmV0dXJuIHBhcnNlQm9vbGVhbihwcm9wVmFsdWUpIGFzIGFueTtcbiAgICB9XG4gICAgaWYgKHR5cGVvZiBkZWZhdWx0VG8gPT09IFwibnVtYmVyXCIpIHtcbiAgICAgIHJldHVybiBOdW1iZXIocHJvcFZhbHVlKSBhcyBhbnk7XG4gICAgfVxuICAgIGlmIChkZWZhdWx0VG8gaW5zdGFuY2VvZiBEYXRlKSB7XG4gICAgICByZXR1cm4gbmV3IERhdGUocHJvcFZhbHVlKSBhcyBhbnk7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHByb3BWYWx1ZSA9PT0gdW5kZWZpbmVkID8gZGVmYXVsdFRvID8/IG51bGwgOiBwcm9wVmFsdWU7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBwYXJzZUJvb2xlYW4oXG4gIHZhbDogc3RyaW5nIHwgYm9vbGVhbiB8IHVuZGVmaW5lZCB8IG51bGwsXG4pOiBib29sZWFuIHtcbiAgcmV0dXJuICg8YW55Plt0cnVlLCBcInRydWVcIiwgXCIxXCJdKS5pbmNsdWRlcyh2YWwpO1xufVxuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBwYXJzZVN0cmluZ1RvQXJyYXkocGFyc2VTdHI6IHN0cmluZyk6IHN0cmluZ1tdIHtcbiAgaWYgKCFwYXJzZVN0cikge1xuICAgIHJldHVybiBbXTtcbiAgfVxuXG4gIGlmIChwYXJzZVN0ci5pbmNsdWRlcyhcIixcIikpIHtcbiAgICByZXR1cm4gcGFyc2VTdHIuc3BsaXQoXCIsXCIpLm1hcCgoczogc3RyaW5nKSA9PiBzLnRyaW0oKSk7XG4gIH1cbiAgaWYgKHBhcnNlU3RyLmluY2x1ZGVzKFwiIFwiKSkge1xuICAgIHJldHVybiBwYXJzZVN0ci5zcGxpdChcIiBcIikubWFwKChzOiBzdHJpbmcpID0+IHMudHJpbSgpKTtcbiAgfVxuICBpZiAocGFyc2VTdHIuaW5jbHVkZXMoXCJcXG5cIikpIHtcbiAgICByZXR1cm4gcGFyc2VTdHIuc3BsaXQoXCJcXG5cIikubWFwKChzOiBzdHJpbmcpID0+IHMudHJpbSgpKTtcbiAgfVxuXG4gIHJldHVybiBbcGFyc2VTdHIudHJpbSgpXTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGRvd25sb2FkQXR0YWNoZWRGaWxlKGZpbGVEYXRhOiBzdHJpbmcsIGZpbGU6IEZpbGUpOiB2b2lkIHtcbiAgY29uc3QgYnVmZmVyID0gVWludDhBcnJheS5mcm9tKGF0b2IoZmlsZURhdGEpLCAoYykgPT4gYy5jaGFyQ29kZUF0KDApKTtcbiAgY29uc3QgYmxvYiA9IG5ldyBCbG9iKFtidWZmZXJdLCB7IHR5cGU6IGZpbGUuY29udGVudF90eXBlIH0pO1xuICBjb25zdCBibG9iRmlsZSA9IHdpbmRvdy5VUkwuY3JlYXRlT2JqZWN0VVJMKGJsb2IpO1xuXG4gIGNvbnN0IGEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYVwiKTtcbiAgYS5ocmVmID0gYmxvYkZpbGU7XG4gIGEuZG93bmxvYWQgPSBmaWxlLmZpbGVuYW1lID8/IGZpbGUuaWQ7XG4gIGEudGFyZ2V0ID0gXCJfYmxhbmtcIjtcbiAgYS5jbGljaygpO1xuICBhLnJlbW92ZSgpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gYXJyYXlDb250YWluc0FycmF5KHN1cGVyc2V0OiBhbnlbXSwgc3Vic2V0OiBhbnlbXSk6IGJvb2xlYW4ge1xuICByZXR1cm4gc3Vic2V0LmV2ZXJ5KCh0YXJnZXQpID0+IHN1cGVyc2V0LmluY2x1ZGVzKHRhcmdldCkpO1xufVxuIiwiPHN2ZWx0ZTpvcHRpb25zIHRhZz1cIm55bGFzLWVycm9yXCIgaW1tdXRhYmxlPXt0cnVlfSAvPlxuXG48c2NyaXB0IGxhbmc9XCJ0c1wiPlxuICBpbXBvcnQgeyBFcnJvclN0b3JlIH0gZnJvbSBcIi4uL3N0b3JlL2Vycm9yXCI7XG4gIGltcG9ydCB0eXBlIHsgTkVycm9yIH0gZnJvbSBcIkBjb21tb25zL3R5cGVzL055bGFzXCI7XG5cbiAgZXhwb3J0IGxldCBpZDogc3RyaW5nOyAvLyBjb21wb25lbnQgaWRcblxuICBsZXQgZXJyb3I6IE5FcnJvcjtcbiAgbGV0IGVycm9yTmFtZTogc3RyaW5nO1xuXG4gICQ6IHtcbiAgICBlcnJvciA9ICRFcnJvclN0b3JlW2lkXSA/PyB7IG5hbWU6IFwiXCIgfTtcbiAgICBlcnJvck5hbWUgPSBlcnJvci5uYW1lID8/IGVycm9yLm1lc3NhZ2U/Lm5hbWUgPz8gXCJcIjtcbiAgfVxuXG4gIGNvbnN0IGlzRGV2RW52ID1cbiAgICB3aW5kb3cubG9jYXRpb24uaHJlZi5pbmNsdWRlcyhcImxvY2FsaG9zdFwiKSB8fFxuICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmLmluY2x1ZGVzKFwiMTI3LjAuMC4xXCIpO1xuPC9zY3JpcHQ+XG5cbjxzdHlsZT5cbiAgLm1lc3NhZ2UtY29udGFpbmVyIHtcbiAgICBiYWNrZ3JvdW5kOiAjZmZmNmY2O1xuICAgIGJvcmRlci1yYWRpdXM6IDVweDtcbiAgICBib3gtc2hhZG93OiAwIDAgMCAxcHggI2FhOTJhMCBpbnNldCwgMCAwIDAgMCB0cmFuc3BhcmVudDtcbiAgICBjb2xvcjogIzlmM2EzODtcbiAgICBmb250LXNpemU6IDEuMjVyZW07XG4gICAgcGFkZGluZzogMTBweDtcbiAgICBtYXJnaW46IDAgYXV0bztcbiAgICB0cmFuc2l0aW9uOiBvcGFjaXR5IDUwMG1zIGVhc2UsIGNvbG9yIDUwMG1zIGVhc2UsXG4gICAgICBiYWNrZ3JvdW5kLWNvbG9yIDUwMG1zIGVhc2UsIGJveC1zaGFkb3cgNTAwbXMgZWFzZSxcbiAgICAgIC13ZWJraXQtYm94LXNoYWRvdyA1MDBtcyBlYXNlO1xuICB9XG5cbiAgLm1lc3NhZ2UtY29udGFpbmVyICo6Zm9jdXMge1xuICAgIG91dGxpbmU6IDVweCBhdXRvIEhpZ2hsaWdodDtcbiAgICBvdXRsaW5lOiA1cHggYXV0byAtd2Via2l0LWZvY3VzLXJpbmctY29sb3I7XG4gIH1cblxuICAuZGV0YWlscyB7XG4gICAgY29sb3I6ICM0OTQ5NDk7XG4gICAgZm9udC1zaXplOiAwLjc1cmVtO1xuICAgIHdpZHRoOiAxMDAlO1xuICB9XG48L3N0eWxlPlxuXG57I2lmIGVycm9yTmFtZSAmJiBpc0RldkVudn1cbiAgPGRpdiBjbGFzcz1cIm1lc3NhZ2UtY29udGFpbmVyXCI+XG4gICAgeyNpZiBlcnJvck5hbWUgPT09IFwiSG9zdERvbWFpbk5vdEFsbG93ZWRFcnJvclwifVxuICAgICAgPGgzPlxuICAgICAgICBZb3UgYXJlIHRyeWluZyB0byBhY2Nlc3MgdGhpcyBjb21wb25lbnQgZnJvbSZuYnNwO1xuICAgICAgICA8Y29kZT57d2luZG93LmxvY2F0aW9uLmhvc3RuYW1lfTwvY29kZT4uIFRoZSBjb21wb25lbnQncyBzZXR0aW5ncyBkbyBub3RcbiAgICAgICAgYWxsb3cgYWNjZXNzIGZyb20gdGhpcyBkb21haW4uXG4gICAgICA8L2gzPlxuICAgICAgPGg0PlxuICAgICAgICBUaGUgbGlzdCBvZiBhbGxvd2VkIGRvbWFpbnMgY2FuIGJlIG1vZGlmaWVkIGluIHlvdXImbmJzcDtcbiAgICAgICAgPGEgaHJlZj1cImh0dHBzOi8vZGFzaGJvYXJkLm55bGFzLmNvbVwiPkRhc2hib2FyZDwvYT4uXG4gICAgICA8L2g0PlxuICAgIHs6ZWxzZSBpZiBlcnJvck5hbWUgPT09IFwiSW5jb21wYXRpYmxlUHJvcGVydGllc1wifVxuICAgICAgPGgzPllvdXIgY29tcG9uZW50IHByb3BlcnRpZXMgZG8gbm90IHdvcmsgd2l0aCBlYWNoIG90aGVyLjwvaDM+XG4gICAgey9pZn1cbiAgICA8c3BhbiBjbGFzcz1cImRldGFpbHNcIj5EZWJ1ZyBpbmZvOjwvc3Bhbj5cbiAgICA8dGV4dGFyZWEgY2xhc3M9XCJkZXRhaWxzXCIgcmVhZG9ubHk+XG4gICAgICB7ZXJyb3JOYW1lfToge2lkfVxuICAgICAge2Vycm9yLm1lc3NhZ2U/Lm1lc3NhZ2UgPz8gXCJcIn1cbiAgICA8L3RleHRhcmVhPlxuICA8L2Rpdj5cbnsvaWZ9XG4iLCJpbXBvcnQgdHlwZSB7IFdyaXRhYmxlIH0gZnJvbSBcInN2ZWx0ZS9zdG9yZVwiO1xuaW1wb3J0IHR5cGUgeyBBdHRhY2htZW50LCBBdHRhY2htZW50VXBkYXRlIH0gZnJvbSBcIkBjb21tb25zL3R5cGVzL0NvbXBvc2VyXCI7XG5pbXBvcnQgdHlwZSB7IFBhcnRpY2lwYW50IH0gZnJvbSBcIkBjb21tb25zL3R5cGVzL055bGFzXCI7XG5cbmV4cG9ydCBjb25zdCBtZXNzYWdlSW5pdGlhbFN0YXRlID0ge1xuICBmcm9tOiA8UGFydGljaXBhbnRbXT5bXSxcbiAgdG86IDxQYXJ0aWNpcGFudFtdPltdLFxuICBjYzogPFBhcnRpY2lwYW50W10+W10sXG4gIGJjYzogPFBhcnRpY2lwYW50W10+W10sXG4gIGJvZHk6IFwiXCIsXG4gIHN1YmplY3Q6IFwiTmV3IE1lc3NhZ2VcIixcbiAgc2VuZF9hdDogPERhdGU+bnVsbCxcbiAgZmlsZV9pZHM6IDxzdHJpbmdbXT5bXSxcbn07XG5leHBvcnQgY29uc3QgYXR0YWNobWVudHNJbml0aWFsU3RhdGU6IEF0dGFjaG1lbnRbXSA9IFtdO1xuXG5leHBvcnQgY29uc3QgYWRkQXR0YWNobWVudHMgPSAoXG4gIGF0dGFjaG1lbnRzOiBXcml0YWJsZTxBdHRhY2htZW50W10+LFxuICB1cGRhdGU6IEF0dGFjaG1lbnQsXG4pOiB2b2lkID0+IHtcbiAgcmV0dXJuIGF0dGFjaG1lbnRzLnVwZGF0ZSgoczogQXR0YWNobWVudFtdKSA9PiB7XG4gICAgaWYgKCFzLm1hcCgoYTogQXR0YWNobWVudCkgPT4gYS5maWxlbmFtZSkuaW5jbHVkZXModXBkYXRlLmZpbGVuYW1lKSkge1xuICAgICAgcmV0dXJuIFsuLi5zLCB1cGRhdGVdO1xuICAgIH1cbiAgICByZXR1cm4gcztcbiAgfSk7XG59O1xuZXhwb3J0IGNvbnN0IHVwZGF0ZUF0dGFjaG1lbnRzID0gKFxuICBhdHRhY2htZW50czogV3JpdGFibGU8QXR0YWNobWVudFtdPixcbiAgdXBkYXRlOiBBdHRhY2htZW50LFxuKTogdm9pZCA9PiB7XG4gIHJldHVybiBhdHRhY2htZW50cy51cGRhdGUoKHMpID0+IFsuLi5zLCB1cGRhdGVdKTtcbn07XG5cbmV4cG9ydCBjb25zdCB1cGRhdGVBdHRhY2htZW50ID0gKFxuICBhdHRhY2htZW50czogV3JpdGFibGU8QXR0YWNobWVudFtdPixcbiAgZmlsZW5hbWU6IHN0cmluZyxcbiAgdXBkYXRlOiBBdHRhY2htZW50VXBkYXRlLFxuKTogdm9pZCA9PiB7XG4gIHJldHVybiBhdHRhY2htZW50cy51cGRhdGUoKHM6IEF0dGFjaG1lbnRbXSkgPT5cbiAgICBzLm1hcCgoYXR0YWNobWVudCkgPT4ge1xuICAgICAgcmV0dXJuIGF0dGFjaG1lbnQuZmlsZW5hbWUgPT09IGZpbGVuYW1lXG4gICAgICAgID8geyAuLi5hdHRhY2htZW50LCAuLi51cGRhdGUgfVxuICAgICAgICA6IGF0dGFjaG1lbnQ7XG4gICAgfSksXG4gICk7XG59O1xuXG5leHBvcnQgY29uc3QgcmVtb3ZlQXR0YWNobWVudHMgPSAoXG4gIGF0dGFjaG1lbnRzOiBXcml0YWJsZTxBdHRhY2htZW50W10+LFxuICBpdGVtOiBBdHRhY2htZW50LFxuKTogdm9pZCA9PiB7XG4gIHJldHVybiBhdHRhY2htZW50cy51cGRhdGUoKHM6IEF0dGFjaG1lbnRbXSkgPT4gW1xuICAgIC4uLnMuZmlsdGVyKChhKSA9PiBhLmZpbGVuYW1lICE9PSBpdGVtLmZpbGVuYW1lKSxcbiAgXSk7XG59O1xuXG5leHBvcnQgY29uc3QgcmVzZXRBdHRhY2htZW50cyA9IChhdHRhY2htZW50czogV3JpdGFibGU8QXR0YWNobWVudFtdPik6IHZvaWQgPT4ge1xuICBhdHRhY2htZW50cy5zZXQoSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShhdHRhY2htZW50c0luaXRpYWxTdGF0ZSkpKTtcbn07XG4iLCJleHBvcnQgY29uc3QgZm9ybWF0RGF0ZSA9IChkYXRlOiBEYXRlKTogc3RyaW5nID0+IHtcbiAgY29uc3QgbW9udGhzID0gW1xuICAgIFwiSmFudWFyeVwiLFxuICAgIFwiRmVicnVhcnlcIixcbiAgICBcIk1hcmNoXCIsXG4gICAgXCJBcHJpbFwiLFxuICAgIFwiTWF5XCIsXG4gICAgXCJKdW5lXCIsXG4gICAgXCJKdWx5XCIsXG4gICAgXCJBdWd1c3RcIixcbiAgICBcIlNlcHRlbWJlclwiLFxuICAgIFwiT2N0b2JlclwiLFxuICAgIFwiTm92ZW1iZXJcIixcbiAgICBcIkRlY2VtYmVyXCIsXG4gIF07XG4gIHJldHVybiBgJHtcbiAgICBtb250aHNbZGF0ZS5nZXRNb250aCgpXVxuICB9ICR7ZGF0ZS5nZXREYXRlKCl9LCAke2RhdGUuZ2V0SG91cnMoKX06JHtkYXRlLmdldE1pbnV0ZXMoKX0gJHtcbiAgICBkYXRlLmdldEhvdXJzKCkgPj0gMTIgPyBcIlBNXCIgOiBcIkFNXCJcbiAgfWA7XG59O1xuIiwiPD94bWwgdmVyc2lvbj1cIjEuMFwiIGVuY29kaW5nPVwiaXNvLTg4NTktMVwiPz5cclxuPCEtLSBHZW5lcmF0b3I6IEFkb2JlIElsbHVzdHJhdG9yIDE2LjAuMCwgU1ZHIEV4cG9ydCBQbHVnLUluIC4gU1ZHIFZlcnNpb246IDYuMDAgQnVpbGQgMCkgIC0tPlxyXG48IURPQ1RZUEUgc3ZnIFBVQkxJQyBcIi0vL1czQy8vRFREIFNWRyAxLjEvL0VOXCIgXCJodHRwOi8vd3d3LnczLm9yZy9HcmFwaGljcy9TVkcvMS4xL0RURC9zdmcxMS5kdGRcIj5cclxuPHN2ZyB2ZXJzaW9uPVwiMS4xXCIgaWQ9XCJDYXBhXzFcIiB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIgeG1sbnM6eGxpbms9XCJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rXCIgeD1cIjBweFwiIHk9XCIwcHhcIlxyXG5cdCB3aWR0aD1cIjM1N3B4XCIgaGVpZ2h0PVwiMzU3cHhcIiB2aWV3Qm94PVwiMCAwIDM1NyAzNTdcIiBzdHlsZT1cImVuYWJsZS1iYWNrZ3JvdW5kOm5ldyAwIDAgMzU3IDM1NztcIiB4bWw6c3BhY2U9XCJwcmVzZXJ2ZVwiPlxyXG48Zz5cclxuXHQ8ZyBpZD1cInJlbW92ZVwiPlxyXG5cdFx0PHBhdGggZD1cIk0zNTcsMjA0SDB2LTUxaDM1N1YyMDR6XCIvPlxyXG5cdDwvZz5cclxuPC9nPlxyXG48Zz5cclxuPC9nPlxyXG48Zz5cclxuPC9nPlxyXG48Zz5cclxuPC9nPlxyXG48Zz5cclxuPC9nPlxyXG48Zz5cclxuPC9nPlxyXG48Zz5cclxuPC9nPlxyXG48Zz5cclxuPC9nPlxyXG48Zz5cclxuPC9nPlxyXG48Zz5cclxuPC9nPlxyXG48Zz5cclxuPC9nPlxyXG48Zz5cclxuPC9nPlxyXG48Zz5cclxuPC9nPlxyXG48Zz5cclxuPC9nPlxyXG48Zz5cclxuPC9nPlxyXG48Zz5cclxuPC9nPlxyXG48L3N2Zz5cclxuIiwiPHN2ZyBoZWlnaHQ9XCI1MTJwdFwiIHZpZXdCb3g9XCItOTYgMCA1MTIgNTEyXCIgd2lkdGg9XCI1MTJwdFwiIHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIj48cGF0aCBkPVwibTE2MCA1MTJjLTg4LjIzNDM3NSAwLTE2MC03MS43NjU2MjUtMTYwLTE2MHYtMjI0YzAtMTEuNzk2ODc1IDkuNTU4NTk0LTIxLjMzMjAzMSAyMS4zMzIwMzEtMjEuMzMyMDMxIDExLjc3NzM0NCAwIDIxLjMzNTkzOCA5LjUzNTE1NiAyMS4zMzU5MzggMjEuMzMyMDMxdjIyNGMwIDY0LjY4MzU5NCA1Mi42Mjg5MDYgMTE3LjMzMjAzMSAxMTcuMzMyMDMxIDExNy4zMzIwMzFzMTE3LjMzMjAzMS01Mi42NDg0MzcgMTE3LjMzMjAzMS0xMTcuMzMyMDMxdi0yMzQuNjY3OTY5YzAtNDEuMTcxODc1LTMzLjQ5MjE4Ny03NC42NjQwNjItNzQuNjY0MDYyLTc0LjY2NDA2Mi00MS4xNzU3ODEgMC03NC42Njc5NjkgMzMuNDkyMTg3LTc0LjY2Nzk2OSA3NC42NjQwNjJ2MjEzLjMzNTkzOGMwIDE3LjY0MDYyNSAxNC4zNTU0NjkgMzIgMzIgMzJzMzItMTQuMzU5Mzc1IDMyLTMydi0yMDIuNjY3OTY5YzAtMTEuNzk2ODc1IDkuNTU4NTk0LTIxLjMzMjAzMSAyMS4zMzIwMzEtMjEuMzMyMDMxIDExLjc3NzM0NCAwIDIxLjMzNTkzOCA5LjUzNTE1NiAyMS4zMzU5MzggMjEuMzMyMDMxdjIwMi42Njc5NjljMCA0MS4xNzE4NzUtMzMuNDk2MDk0IDc0LjY2NDA2Mi03NC42Njc5NjkgNzQuNjY0MDYycy03NC42Njc5NjktMzMuNDkyMTg3LTc0LjY2Nzk2OS03NC42NjQwNjJ2LTIxMy4zMzU5MzhjMC02NC42Nzk2ODcgNTIuNjI4OTA3LTExNy4zMzIwMzEgMTE3LjMzNTkzOC0xMTcuMzMyMDMxIDY0LjcwMzEyNSAwIDExNy4zMzIwMzEgNTIuNjUyMzQ0IDExNy4zMzIwMzEgMTE3LjMzMjAzMXYyMzQuNjY3OTY5YzAgODguMjM0Mzc1LTcxLjc2NTYyNSAxNjAtMTYwIDE2MHptMCAwXCIvPjwvc3ZnPiIsIjxzdmcgeG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiIGhlaWdodD1cIjI0cHhcIiB2aWV3Qm94PVwiMCAwIDI0IDI0XCIgd2lkdGg9XCIyNHB4XCIgZmlsbD1cIiMwMDAwMDBcIj48cGF0aCBkPVwiTTAgMGgyNHYyNEgwVjB6XCIgZmlsbD1cIm5vbmVcIi8+PHBhdGggZD1cIk0yMS45OSA4YzAtLjcyLS4zNy0xLjM1LS45NC0xLjdMMTIgMSAyLjk1IDYuM0MyLjM4IDYuNjUgMiA3LjI4IDIgOHYxMGMwIDEuMS45IDIgMiAyaDE2YzEuMSAwIDItLjkgMi0ybC0uMDEtMTB6bS0yIDB2LjAxTDEyIDEzIDQgOGw4LTQuNjhMMTkuOTkgOHpNNCAxOHYtNy42Nmw4IDUuMDIgNy45OS00Ljk5TDIwIDE4SDR6XCIvPjwvc3ZnPiIsIjw/eG1sIHZlcnNpb249XCIxLjBcIiBlbmNvZGluZz1cImlzby04ODU5LTFcIj8+XHJcbjwhLS0gR2VuZXJhdG9yOiBBZG9iZSBJbGx1c3RyYXRvciAxNi4wLjAsIFNWRyBFeHBvcnQgUGx1Zy1JbiAuIFNWRyBWZXJzaW9uOiA2LjAwIEJ1aWxkIDApICAtLT5cclxuPCFET0NUWVBFIHN2ZyBQVUJMSUMgXCItLy9XM0MvL0RURCBTVkcgMS4xLy9FTlwiIFwiaHR0cDovL3d3dy53My5vcmcvR3JhcGhpY3MvU1ZHLzEuMS9EVEQvc3ZnMTEuZHRkXCI+XHJcbjxzdmcgdmVyc2lvbj1cIjEuMVwiIGlkPVwiQ2FwYV8xXCIgeG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiIHhtbG5zOnhsaW5rPVwiaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGlua1wiIHg9XCIwcHhcIiB5PVwiMHB4XCJcclxuXHQgd2lkdGg9XCIzMDZweFwiIGhlaWdodD1cIjMwNnB4XCIgdmlld0JveD1cIjAgMCAzMDYgMzA2XCIgc3R5bGU9XCJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDMwNiAzMDY7XCIgeG1sOnNwYWNlPVwicHJlc2VydmVcIj5cclxuPGc+XHJcblx0PGcgaWQ9XCJleHBhbmQtbGVzc1wiPlxyXG5cdFx0PHBvbHlnb24gcG9pbnRzPVwiMTUzLDU4LjY1IDAsMjExLjY1IDM1LjcsMjQ3LjM1IDE1MywxMzAuMDUgMjcwLjMsMjQ3LjM1IDMwNiwyMTEuNjUgXHRcdFwiLz5cclxuXHQ8L2c+XHJcbjwvZz5cclxuPGc+XHJcbjwvZz5cclxuPGc+XHJcbjwvZz5cclxuPGc+XHJcbjwvZz5cclxuPGc+XHJcbjwvZz5cclxuPGc+XHJcbjwvZz5cclxuPGc+XHJcbjwvZz5cclxuPGc+XHJcbjwvZz5cclxuPGc+XHJcbjwvZz5cclxuPGc+XHJcbjwvZz5cclxuPGc+XHJcbjwvZz5cclxuPGc+XHJcbjwvZz5cclxuPGc+XHJcbjwvZz5cclxuPGc+XHJcbjwvZz5cclxuPGc+XHJcbjwvZz5cclxuPGc+XHJcbjwvZz5cclxuPC9zdmc+XHJcbiIsIjxzdmVsdGU6b3B0aW9ucyB0YWc9XCJueWxhcy1jb21wb3NlclwiIGltbXV0YWJsZSAvPlxuXG48c2NyaXB0IGxhbmc9XCJ0c1wiPlxuICBpbXBvcnQgXCIuL2NvbXBvbmVudHMvSFRNTEVkaXRvci5zdmVsdGVcIjtcbiAgaW1wb3J0IFwiLi9jb21wb25lbnRzL0FsZXJ0QmFyLnN2ZWx0ZVwiO1xuICBpbXBvcnQgXCIuL2NvbXBvbmVudHMvQXR0YWNobWVudC5zdmVsdGVcIjtcbiAgaW1wb3J0IFwiLi9jb21wb25lbnRzL0RhdGVwaWNrZXJNb2RhbC5zdmVsdGVcIjtcbiAgaW1wb3J0IFwiLi9jb21wb25lbnRzL0NvbnRhY3RzU2VhcmNoLnN2ZWx0ZVwiO1xuICBpbXBvcnQgTG9hZGluZ0ljb24gZnJvbSBcIi4vYXNzZXRzL2xvYWRpbmcuc3ZnXCI7XG4gIGltcG9ydCB7IGlzRmlsZUFuQXR0YWNobWVudCB9IGZyb20gXCJAY29tbW9ucy9tZXRob2RzL2lzRmlsZUFuQXR0YWNobWVudFwiO1xuICBpbXBvcnQgeyBjbGVhbk1lc3NhZ2VGb3JTbmlwcGV0IH0gZnJvbSBcIi4vbGliL3V0aWxzXCI7XG5cbiAgaW1wb3J0IHtcbiAgICBFcnJvclN0b3JlLFxuICAgIE1hbmlmZXN0U3RvcmUsXG4gICAgc2VuZE1lc3NhZ2UsXG4gICAgZmV0Y2hBY2NvdW50LFxuICAgIHVwbG9hZEZpbGUgYXMgbnlsYXNVcGxvYWRGaWxlLFxuICAgIHNhdmVEcmFmdCxcbiAgICB1cGRhdGVEcmFmdCxcbiAgfSBmcm9tIFwiQGNvbW1vbnNcIjtcbiAgaW1wb3J0IHtcbiAgICBidWlsZEludGVybmFsUHJvcHMsXG4gICAgZ2V0RXZlbnREaXNwYXRjaGVyLFxuICB9IGZyb20gXCJAY29tbW9ucy9tZXRob2RzL2NvbXBvbmVudFwiO1xuICBpbXBvcnQgeyBzaWxlbmNlIH0gZnJvbSBcIkBjb21tb25zL21ldGhvZHMvYXBpXCI7XG4gIGltcG9ydCB7IG9uTW91bnQsIHRpY2ssIGdldF9jdXJyZW50X2NvbXBvbmVudCB9IGZyb20gXCJzdmVsdGUvaW50ZXJuYWxcIjtcbiAgaW1wb3J0IHBrZyBmcm9tIFwiLi4vcGFja2FnZS5qc29uXCI7XG4gIGltcG9ydCB7IHdyaXRhYmxlIH0gZnJvbSBcInN2ZWx0ZS9zdG9yZVwiO1xuXG4gIGNvbnN0IGRpc3BhdGNoRXZlbnQgPSBnZXRFdmVudERpc3BhdGNoZXIoZ2V0X2N1cnJlbnRfY29tcG9uZW50KCkpO1xuICAkOiBkaXNwYXRjaEV2ZW50KFwibWFuaWZlc3RMb2FkZWRcIiwgbWFuaWZlc3QpO1xuXG4gICQ6IGlmIChPYmplY3Qua2V5cygkRXJyb3JTdG9yZSkubGVuZ3RoKSB7XG4gICAgZGlzcGF0Y2hFdmVudChcIm9uRXJyb3JcIiwgJEVycm9yU3RvcmUpO1xuICB9XG5cbiAgaW1wb3J0IHtcbiAgICBtZXNzYWdlSW5pdGlhbFN0YXRlLFxuICAgIGF0dGFjaG1lbnRzSW5pdGlhbFN0YXRlLFxuICAgIGFkZEF0dGFjaG1lbnRzLFxuICAgIHJlbW92ZUF0dGFjaG1lbnRzLFxuICAgIHVwZGF0ZUF0dGFjaG1lbnQsXG4gICAgcmVzZXRBdHRhY2htZW50cyxcbiAgfSBmcm9tIFwiLi9saWIvc3RvcmVcIjtcbiAgaW1wb3J0IHsgZm9ybWF0RGF0ZSB9IGZyb20gXCIuL2xpYi9mb3JtYXQtZGF0ZVwiO1xuXG4gIGltcG9ydCBDbG9zZUljb24gZnJvbSBcIi4vYXNzZXRzL2Nsb3NlLnN2Z1wiO1xuICBpbXBvcnQgTWluaW1pemVJY29uIGZyb20gXCIuL2Fzc2V0cy9kYXNoLnN2Z1wiO1xuICBpbXBvcnQgQXR0YWNobWVudEljb24gZnJvbSBcIi4vYXNzZXRzL2F0dGFjaG1lbnQuc3ZnXCI7XG4gIGltcG9ydCBEcmFmdEljb24gZnJvbSBcIi4vYXNzZXRzL2RyYWZ0cy5zdmdcIjtcbiAgaW1wb3J0IEV4cGFuZEljb24gZnJvbSBcIi4vYXNzZXRzL2V4cGFuZC5zdmdcIjtcbiAgaW1wb3J0IHR5cGUge1xuICAgIFNlbmRDYWxsYmFjayxcbiAgICBGZXRjaENvbnRhY3RzQ2FsbGJhY2ssXG4gICAgVHJhY2tpbmcsXG4gICAgQXR0cmlidXRlLFxuICAgIFJlcGxhY2VGaWVsZHMsXG4gICAgQXR0YWNobWVudCxcbiAgfSBmcm9tIFwiQGNvbW1vbnMvdHlwZXMvQ29tcG9zZXJcIjtcbiAgaW1wb3J0IHR5cGUge1xuICAgIE1lc3NhZ2UsXG4gICAgQ29tcG9zZXJQcm9wZXJ0aWVzLFxuICAgIEFjY291bnQsXG4gICAgUGFydGljaXBhbnQsXG4gICAgRmlsZSxcbiAgfSBmcm9tIFwiQGNvbW1vbnMvdHlwZXMvTnlsYXNcIjtcbiAgaW1wb3J0IHR5cGUgeyBGZXRjaENvbnRhY3RzQ2FsbGJhY2sgYXMgQ29udGFjdHNTZWFyY2hGZXRjaENvbnRhY3RzQ2FsbGJhY2sgfSBmcm9tIFwiQGNvbW1vbnMvdHlwZXMvQ29udGFjdHNTZWFyY2hcIjtcblxuICB0eXBlIENvbnRhY3RTZWFyY2hDYWxsYmFjayA9XG4gICAgfCBQYXJ0aWNpcGFudFtdXG4gICAgfCBDb250YWN0c1NlYXJjaEZldGNoQ29udGFjdHNDYWxsYmFjaztcblxuICBleHBvcnQgbGV0IGlkOiBzdHJpbmcgfCB2b2lkO1xuICBleHBvcnQgbGV0IGFjY2Vzc190b2tlbjogc3RyaW5nID0gXCJcIjtcblxuICBleHBvcnQgbGV0IHZhbHVlOiBNZXNzYWdlIHwgdm9pZDtcbiAgZXhwb3J0IGxldCB0bzogQ29udGFjdFNlYXJjaENhbGxiYWNrID0gW107XG4gIGV4cG9ydCBsZXQgZnJvbTogQ29udGFjdFNlYXJjaENhbGxiYWNrID0gW107XG4gIGV4cG9ydCBsZXQgY2M6IENvbnRhY3RTZWFyY2hDYWxsYmFjayA9IFtdO1xuICBleHBvcnQgbGV0IGJjYzogQ29udGFjdFNlYXJjaENhbGxiYWNrID0gW107XG4gIGV4cG9ydCBsZXQgc2VuZDogU2VuZENhbGxiYWNrO1xuICBleHBvcnQgbGV0IHNhdmU6IFNlbmRDYWxsYmFjaztcbiAgZXhwb3J0IGxldCBjaGFuZ2U6IEZldGNoQ29udGFjdHNDYWxsYmFjayB8IG51bGwgPSBudWxsO1xuICBleHBvcnQgbGV0IGJlZm9yZVNlbmQ6IChtc2c6IE1lc3NhZ2UpID0+IE1lc3NhZ2UgfCB2b2lkO1xuICBleHBvcnQgbGV0IGFmdGVyU2VuZFN1Y2Nlc3M6IEZ1bmN0aW9uIHwgbnVsbCA9IG51bGw7XG4gIGV4cG9ydCBsZXQgYWZ0ZXJTZW5kRXJyb3I6IEZ1bmN0aW9uIHwgbnVsbCA9IG51bGw7XG4gIGV4cG9ydCBsZXQgYWZ0ZXJTYXZlU3VjY2VzczogRnVuY3Rpb24gfCBudWxsID0gbnVsbDtcbiAgZXhwb3J0IGxldCBhZnRlclNhdmVFcnJvcjogRnVuY3Rpb24gfCBudWxsID0gbnVsbDtcbiAgZXhwb3J0IGxldCB0ZW1wbGF0ZTogc3RyaW5nID0gXCJcIjtcbiAgZXhwb3J0IGxldCB0cmFja2luZzogVHJhY2tpbmcgfCBudWxsID0gbnVsbDtcblxuICAvLyBBdHRyaWJ1dGVzXG4gIGV4cG9ydCBsZXQgbWluaW1pemVkOiBBdHRyaWJ1dGU7XG4gIGV4cG9ydCBsZXQgcmVzZXRfYWZ0ZXJfc2VuZDogQXR0cmlidXRlO1xuICBleHBvcnQgbGV0IHJlc2V0X2FmdGVyX2Nsb3NlOiBBdHRyaWJ1dGU7XG4gIGV4cG9ydCBsZXQgc2hvd19mcm9tOiBBdHRyaWJ1dGU7XG4gIGV4cG9ydCBsZXQgc2hvd190bzogQXR0cmlidXRlO1xuICBleHBvcnQgbGV0IHNob3dfaGVhZGVyOiBBdHRyaWJ1dGU7XG4gIGV4cG9ydCBsZXQgc2hvd19zdWJqZWN0OiBBdHRyaWJ1dGU7XG4gIGV4cG9ydCBsZXQgc2hvd19jbG9zZV9idXR0b246IEF0dHJpYnV0ZTtcbiAgZXhwb3J0IGxldCBzaG93X21pbmltaXplX2J1dHRvbjogQXR0cmlidXRlO1xuICBleHBvcnQgbGV0IHNob3dfY2M6IEF0dHJpYnV0ZTtcbiAgZXhwb3J0IGxldCBzaG93X2JjYzogQXR0cmlidXRlO1xuICBleHBvcnQgbGV0IHNob3dfY2NfYnV0dG9uOiBBdHRyaWJ1dGU7XG4gIGV4cG9ydCBsZXQgc2hvd19iY2NfYnV0dG9uOiBBdHRyaWJ1dGU7XG4gIGV4cG9ydCBsZXQgc2hvd19hdHRhY2htZW50X2J1dHRvbjogQXR0cmlidXRlO1xuICBleHBvcnQgbGV0IG1heF9maWxlX3NpemU6IG51bWJlcjtcbiAgZXhwb3J0IGxldCBzaG93X21heF9maWxlX3NpemU6IEF0dHJpYnV0ZTtcbiAgZXhwb3J0IGxldCBzaG93X3NhdmVfYXNfZHJhZnQ6IEF0dHJpYnV0ZTtcbiAgZXhwb3J0IGxldCBzaG93X2VkaXRvcl90b29sYmFyOiBBdHRyaWJ1dGU7XG4gIGV4cG9ydCBsZXQgdGhlbWU6IHN0cmluZyB8IHZvaWQ7XG4gIGV4cG9ydCBsZXQgcmVwbGFjZV9maWVsZHM6IFJlcGxhY2VGaWVsZHNbXSB8IG51bGwgPSBudWxsO1xuICBleHBvcnQgbGV0IGJlZm9yZUZpbGVVcGxvYWQ6IEZ1bmN0aW9uIHwgbnVsbCA9IG51bGw7XG4gIGV4cG9ydCBsZXQgYWZ0ZXJGaWxlVXBsb2FkU3VjY2VzczogRnVuY3Rpb24gfCBudWxsID0gbnVsbDtcbiAgZXhwb3J0IGxldCBhZnRlckZpbGVVcGxvYWRFcnJvcjogRnVuY3Rpb24gfCBudWxsID0gbnVsbDtcbiAgZXhwb3J0IGxldCB1cGxvYWRGaWxlOiBGdW5jdGlvbiB8IG51bGwgPSBudWxsO1xuICBleHBvcnQgbGV0IGJlZm9yZUZpbGVSZW1vdmU6IEZ1bmN0aW9uIHwgbnVsbCA9IG51bGw7XG4gIGV4cG9ydCBsZXQgYWZ0ZXJGaWxlUmVtb3ZlOiBGdW5jdGlvbiB8IG51bGwgPSBudWxsO1xuICBleHBvcnQgbGV0IGZvY3VzX2JvZHlfb25sb2FkOiBib29sZWFuO1xuXG4gIGNvbnN0IGRlZmF1bHRWYWx1ZU1hcDogUGFydGlhbDxDb21wb3NlclByb3BlcnRpZXM+ID0ge1xuICAgIHNob3dfdG86IHRydWUsXG4gICAgc2hvd19mcm9tOiB0cnVlLFxuICAgIG1pbmltaXplZDogZmFsc2UsXG4gICAgcmVzZXRfYWZ0ZXJfc2VuZDogdHJ1ZSxcbiAgICBzaG93X2hlYWRlcjogZmFsc2UsXG4gICAgc2hvd19zdWJqZWN0OiBmYWxzZSxcbiAgICBzaG93X2Nsb3NlX2J1dHRvbjogdHJ1ZSxcbiAgICBzaG93X21pbmltaXplX2J1dHRvbjogdHJ1ZSxcbiAgICBzaG93X2NjOiB0cnVlLFxuICAgIHNob3dfYmNjOiB0cnVlLFxuICAgIHNob3dfY2NfYnV0dG9uOiB0cnVlLFxuICAgIHNob3dfYmNjX2J1dHRvbjogdHJ1ZSxcbiAgICBzaG93X2F0dGFjaG1lbnRfYnV0dG9uOiB0cnVlLFxuICAgIG1heF9maWxlX3NpemU6IDAsXG4gICAgc2hvd19tYXhfZmlsZV9zaXplOiB0cnVlLFxuICAgIHNob3dfc2F2ZV9hc19kcmFmdDogdHJ1ZSxcbiAgICBzaG93X2VkaXRvcl90b29sYmFyOiB0cnVlLFxuICAgIHRoZW1lOiBcImF1dG9cIixcbiAgICBmb2N1c19ib2R5X29ubG9hZDogZmFsc2UsXG4gIH07XG5cbiAgbGV0IG1lc3NhZ2U6IE1lc3NhZ2UgPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KG1lc3NhZ2VJbml0aWFsU3RhdGUpKTtcbiAgY29uc3QgdXBkYXRlID0gKGtleTogc3RyaW5nLCB2YWx1ZTogdW5rbm93bik6IHZvaWQgPT4ge1xuICAgIG1lc3NhZ2UgPSB7IC4uLm1lc3NhZ2UsIFtrZXldOiB2YWx1ZSB9O1xuICB9O1xuICBjb25zdCBtZXJnZU1lc3NhZ2UgPSAodXBkYXRlOiBSZWNvcmQ8c3RyaW5nLCB1bmtub3duPik6IHZvaWQgPT4ge1xuICAgIG1lc3NhZ2UgPSB7IC4uLm1lc3NhZ2UsIC4uLnVwZGF0ZSB9O1xuICB9O1xuXG4gIGNvbnN0IGF0dGFjaG1lbnRzID0gd3JpdGFibGUoXG4gICAgSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShhdHRhY2htZW50c0luaXRpYWxTdGF0ZSkpLFxuICApO1xuXG4gIC8vIENhbGxiYWNrc1xuICBleHBvcnQgY29uc3Qgb3BlbiA9ICgpOiB2b2lkID0+IHtcbiAgICB2aXNpYmxlID0gdHJ1ZTtcbiAgICBpZiAoX3RoaXMucmVzZXRfYWZ0ZXJfc2VuZCkge1xuICAgICAgc2VuZFN1Y2Nlc3MgPSBmYWxzZTtcbiAgICB9XG4gICAgZGlzcGF0Y2hFdmVudChcImNvbXBvc2VyT3BlbmVkXCIsIHt9KTtcbiAgfTtcblxuICBleHBvcnQgY29uc3QgY2xvc2UgPSAoKTogdm9pZCA9PiB7XG4gICAgY29uc3QgbXNnID0gbWVzc2FnZTtcbiAgICBtc2cuYWN0aXZlID0gZmFsc2U7XG4gICAgdmlzaWJsZSA9IGZhbHNlO1xuICAgIGlmIChfdGhpcy5yZXNldF9hZnRlcl9zZW5kIHx8IF90aGlzLnJlc2V0X2FmdGVyX2Nsb3NlKSB7XG4gICAgICBzZW5kU3VjY2VzcyA9IGZhbHNlO1xuICAgICAgc2F2ZVN1Y2Nlc3MgPSBmYWxzZTtcbiAgICB9XG4gICAgaWYgKF90aGlzLnJlc2V0X2FmdGVyX2Nsb3NlKSB7XG4gICAgICBtZXNzYWdlID0geyAuLi5tZXNzYWdlLCAuLi5tZXNzYWdlSW5pdGlhbFN0YXRlIH07XG4gICAgICByZXNldEF0dGFjaG1lbnRzKGF0dGFjaG1lbnRzKTtcbiAgICB9XG4gICAgLy8gVXBkYXRlIHRoZSBzbmlwcGV0IHNob3dpbmcgb24gdGhlIGNvbmRlbnNlZCBkcmFmdCBtZXNzYWdlXG4gICAgbXNnLnNuaXBwZXQgPSBjbGVhbk1lc3NhZ2VGb3JTbmlwcGV0KG1zZy5ib2R5KTtcbiAgICBhdHRhY2htZW50cy51cGRhdGUoKCkgPT4gW10pO1xuICAgIGRpc3BhdGNoRXZlbnQoXCJjb21wb3NlckNsb3NlZFwiLCB7XG4gICAgICBtZXNzYWdlOiBtc2csXG4gICAgfSk7XG4gIH07XG5cbiAgbGV0IGlzTG9hZGluZyA9IGZhbHNlO1xuICBsZXQgX3RoaXMgPSA8Q29tcG9zZXJQcm9wZXJ0aWVzPmJ1aWxkSW50ZXJuYWxQcm9wcyh7fSwge30sIGRlZmF1bHRWYWx1ZU1hcCk7XG4gIGxldCBtYW5pZmVzdDogUGFydGlhbDxDb21wb3NlclByb3BlcnRpZXM+O1xuICBsZXQgc2hvd0RhdGVwaWNrZXIgPSBmYWxzZTtcbiAgbGV0IHRoZW1lTG9hZGVkID0gZmFsc2U7XG4gIGxldCB2aXNpYmxlID0gdHJ1ZTtcbiAgbGV0IHN1YmplY3QgPSBfdGhpcy52YWx1ZT8uc3ViamVjdCA/PyBtZXNzYWdlLnN1YmplY3Q7XG4gICQ6IHN1YmplY3QgPSBtZXNzYWdlLnN1YmplY3Q7XG5cbiAgb25Nb3VudChhc3luYyAoKSA9PiB7XG4gICAgaXNMb2FkaW5nID0gdHJ1ZTtcbiAgICBhd2FpdCB0aWNrKCk7XG5cbiAgICBtYW5pZmVzdCA9XG4gICAgICAoYXdhaXQgJE1hbmlmZXN0U3RvcmVbXG4gICAgICAgIEpTT04uc3RyaW5naWZ5KHsgY29tcG9uZW50X2lkOiBpZCwgYWNjZXNzX3Rva2VuIH0pXG4gICAgICBdKSB8fCB7fTtcblxuICAgIGlmIChtYW5pZmVzdCAmJiBpZCkge1xuICAgICAgY29uc3QgYWNjb3VudDogQWNjb3VudCB8IHZvaWQgPSBhd2FpdCBmZXRjaEFjY291bnQoe1xuICAgICAgICBjb21wb25lbnRfaWQ6IGlkLFxuICAgICAgICBhY2Nlc3NfdG9rZW4sXG4gICAgICB9KS5jYXRjaChzaWxlbmNlKTtcblxuICAgICAgaWYgKGFjY291bnQpIHtcbiAgICAgICAgLy8gU2V0IFwiZnJvbVwiIGZpZWxkIGZyb20gYWNjb3VudFxuICAgICAgICB1cGRhdGUoXCJmcm9tXCIsIFt7IG5hbWU6IGFjY291bnQubmFtZSwgZW1haWw6IGFjY291bnQuZW1haWxfYWRkcmVzcyB9XSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgX3RoaXMgPSBidWlsZEludGVybmFsUHJvcHMoXG4gICAgICAkJHByb3BzLFxuICAgICAgbWFuaWZlc3QsXG4gICAgICBkZWZhdWx0VmFsdWVNYXAsXG4gICAgKSBhcyBDb21wb3NlclByb3BlcnRpZXM7XG5cbiAgICBpZiAodHJhY2tpbmcpIHtcbiAgICAgIC8vIFNldCB0cmFja2luZyBvbiBtZXNzYWdlIG9iamVjdFxuICAgICAgdXBkYXRlKFwidHJhY2tpbmdcIiwgdHJhY2tpbmcpO1xuICAgIH1cblxuICAgIGlzTG9hZGluZyA9IGZhbHNlO1xuICAgIHRoZW1lTG9hZGVkID0gdHJ1ZTtcbiAgfSk7XG5cbiAgbGV0IHByZXZpb3VzUHJvcHMgPSAkJHByb3BzO1xuICAkOiB7XG4gICAgaWYgKEpTT04uc3RyaW5naWZ5KHByZXZpb3VzUHJvcHMpICE9PSBKU09OLnN0cmluZ2lmeSgkJHByb3BzKSkge1xuICAgICAgX3RoaXMgPSBidWlsZEludGVybmFsUHJvcHMoXG4gICAgICAgICQkcHJvcHMsXG4gICAgICAgIG1hbmlmZXN0LFxuICAgICAgICBkZWZhdWx0VmFsdWVNYXAsXG4gICAgICApIGFzIENvbXBvc2VyUHJvcGVydGllcztcbiAgICAgIHByZXZpb3VzUHJvcHMgPSAkJHByb3BzO1xuICAgIH1cbiAgfVxuXG4gICQ6IGlmICh2YWx1ZSkge1xuICAgIG1lcmdlTWVzc2FnZSh2YWx1ZSk7XG4gICAgaWYgKHZhbHVlLmZpbGVzPy5sZW5ndGggPiAwKSB7XG4gICAgICBsZXQgZmlsZV9pZHMgPSBbXTtcbiAgICAgIHJlc2V0QXR0YWNobWVudHMoYXR0YWNobWVudHMpO1xuICAgICAgZm9yIChjb25zdCBbXywgZmlsZV0gb2YgdmFsdWUuZmlsZXMuZW50cmllcygpKSB7XG4gICAgICAgIGZpbGVfaWRzLnB1c2goZmlsZS5pZCk7XG4gICAgICAgIGlmIChpc0ZpbGVBbkF0dGFjaG1lbnQoZmlsZSkpIHtcbiAgICAgICAgICBhZGRBdHRhY2htZW50cyhhdHRhY2htZW50cywge1xuICAgICAgICAgICAgYWNjb3VudF9pZDogdmFsdWUuYWNjb3VudF9pZCxcbiAgICAgICAgICAgIGlkOiBmaWxlLmlkLFxuICAgICAgICAgICAgZmlsZW5hbWU6IGZpbGUuZmlsZW5hbWUsXG4gICAgICAgICAgICBzaXplOiBmaWxlLnNpemUsXG4gICAgICAgICAgICBjb250ZW50X3R5cGU6IGZpbGUuY29udGVudF90eXBlLFxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBtZXJnZU1lc3NhZ2UoeyBmaWxlX2lkcyB9KTtcbiAgICB9XG4gIH1cblxuICBsZXQgbWF4RmlsZVNpemU6IG51bWJlcjtcbiAgJDoge1xuICAgIGlmICghdXBsb2FkRmlsZSkge1xuICAgICAgLy9Vc2luZyBOeWxhcyBmaWxlIHVwbG9hZCBhcGksIGRlZmF1bHQgNE1CIG1heCBzaXplLlxuICAgICAgbWF4RmlsZVNpemUgPVxuICAgICAgICBfdGhpcy5tYXhfZmlsZV9zaXplICYmXG4gICAgICAgIF90aGlzLm1heF9maWxlX3NpemUgPCA0ICYmXG4gICAgICAgIF90aGlzLm1heF9maWxlX3NpemUgPiAwXG4gICAgICAgICAgPyBfdGhpcy5tYXhfZmlsZV9zaXplXG4gICAgICAgICAgOiA0O1xuICAgIH0gZWxzZSB7XG4gICAgICAvL1VzaW5nIGN1c3RvbSB1cGxvYWRGaWxlIGZ1bmN0aW9uXG4gICAgICBtYXhGaWxlU2l6ZSA9IF90aGlzLm1heF9maWxlX3NpemU7XG4gICAgfVxuICB9XG5cbiAgY29uc3QgaGFuZGxlSW5wdXRDaGFuZ2UgPSAoZTogRXZlbnQpID0+IHtcbiAgICBpZiAoIWUudGFyZ2V0KSByZXR1cm47XG4gICAgY29uc3QgdGFyZ2V0ID0gZS50YXJnZXQgYXMgSFRNTFRleHRBcmVhRWxlbWVudDtcbiAgICB1cGRhdGUodGFyZ2V0Lm5hbWUsIHRhcmdldC52YWx1ZSk7XG4gIH07XG5cbiAgY29uc3QgaGFuZGxlQm9keUNoYW5nZSA9IChodG1sOiBzdHJpbmcpID0+IHVwZGF0ZShcImJvZHlcIiwgaHRtbCk7XG5cbiAgY29uc3QgaGFuZGxlQ29udGFjdHNDaGFuZ2UgPSAoZmllbGQ6IHN0cmluZykgPT4gKGRhdGE6IFBhcnRpY2lwYW50W10pID0+XG4gICAgdXBkYXRlKGZpZWxkLCBkYXRhKTtcbiAgY29uc3Qgc2NoZWR1bGUgPSAoZGF0YTogRGF0ZSkgPT4ge1xuICAgIHNob3dEYXRlcGlja2VyID0gZmFsc2U7XG4gICAgdXBkYXRlKFwic2VuZF9hdFwiLCBkYXRhKTtcbiAgfTtcbiAgY29uc3QgcmVtb3ZlU2NoZWR1bGUgPSAoKSA9PiB7XG4gICAgdXBkYXRlKFwic2VuZF9hdFwiLCBudWxsKTtcbiAgfTtcbiAgY29uc3QgZGF0ZVBpY2tlckNsb3NlID0gKCkgPT4ge1xuICAgIHNob3dEYXRlcGlja2VyID0gZmFsc2U7XG4gIH07XG5cbiAgYXN5bmMgZnVuY3Rpb24gaGFuZGxlRmlsZXNDaGFuZ2UoZmlsZUNoYW5nZWRFdmVudDogRXZlbnQpIHtcbiAgICBjb25zdCBmaWxlU2VsZWN0b3IgPSBmaWxlQ2hhbmdlZEV2ZW50LnRhcmdldCBhcyBIVE1MSW5wdXRFbGVtZW50O1xuICAgIGlmICghZmlsZVNlbGVjdG9yPy5maWxlcykgcmV0dXJuO1xuXG4gICAgY29uc3QgZmlsZSA9IGZpbGVTZWxlY3Rvci5maWxlc1swXTtcblxuICAgIHRyeSB7XG4gICAgICBhZGRBdHRhY2htZW50cyhhdHRhY2htZW50cywge1xuICAgICAgICBmaWxlbmFtZTogZmlsZS5uYW1lLFxuICAgICAgICBzaXplOiBmaWxlLnNpemUsXG4gICAgICAgIGNvbnRlbnRfdHlwZTogZmlsZS50eXBlLFxuICAgICAgICBsb2FkaW5nOiB0cnVlLFxuICAgICAgICBlcnJvcjogZmFsc2UsXG4gICAgICB9KTtcbiAgICAgIGZpbGVTZWxlY3Rvci52YWx1ZSA9IFwiXCI7XG4gICAgICBpZiAoYmVmb3JlRmlsZVVwbG9hZCkgYmVmb3JlRmlsZVVwbG9hZChmaWxlKTtcblxuICAgICAgaWYgKG1heEZpbGVTaXplID4gMCAmJiBmaWxlLnNpemUgPj0gbWF4RmlsZVNpemUgKiAxMDAwMDAwKSB7XG4gICAgICAgIHRocm93IGBNYXhpbXVtIGZpbGUgc2l6ZSBpcyAke21heEZpbGVTaXplfU1CLiBQbGVhc2UgdXBsb2FkIGEgZGlmZmVyZW50IGZpbGUuYDtcbiAgICAgIH1cblxuICAgICAgY29uc3QgcmVzdWx0ID0gdXBsb2FkRmlsZVxuICAgICAgICA/IGF3YWl0IHVwbG9hZEZpbGUoZmlsZSlcbiAgICAgICAgOiBpZCAmJiAoYXdhaXQgbnlsYXNVcGxvYWRGaWxlKGlkLCBmaWxlLCBhY2Nlc3NfdG9rZW4pKTtcblxuICAgICAgdXBkYXRlQXR0YWNobWVudChhdHRhY2htZW50cywgZmlsZS5uYW1lLCB7XG4gICAgICAgIGxvYWRpbmc6IGZhbHNlLFxuICAgICAgICBpZDogcmVzdWx0LmlkLFxuICAgICAgfSk7XG4gICAgICBpZiAocmVzdWx0LmlkKVxuICAgICAgICAvLyBVcGRhdGUgbWVzc2FnZSBzdG9yZSB3aXRoIG5ldyBmaWxlX2lkIGFuZCBmaWxlXG4gICAgICAgIC8vIE5ldyBhZGRlZCBmaWxlIGlzIGF0dGFjaG1lbnQsIHRodXMgYWRkZWQgY29udGVudF9kaXNwb3NpdGlvbiBwcm9wZXJ0eVxuICAgICAgICBtZXJnZU1lc3NhZ2Uoe1xuICAgICAgICAgIGZpbGVfaWRzOiBbLi4ubWVzc2FnZS5maWxlX2lkcywgcmVzdWx0LmlkXSxcbiAgICAgICAgICBmaWxlczogW1xuICAgICAgICAgICAgLi4uKG1lc3NhZ2UuZmlsZXMgfHwgW10pLFxuICAgICAgICAgICAgeyAuLi5yZXN1bHQsIGNvbnRlbnRfZGlzcG9zaXRpb246IFwiYXR0YWNobWVudFwiIH0sXG4gICAgICAgICAgXSxcbiAgICAgICAgfSk7XG4gICAgICBpZiAoYWZ0ZXJGaWxlVXBsb2FkU3VjY2VzcykgYWZ0ZXJGaWxlVXBsb2FkU3VjY2VzcyhyZXN1bHQpO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIHVwZGF0ZUF0dGFjaG1lbnQoYXR0YWNobWVudHMsIGZpbGUubmFtZSwge1xuICAgICAgICBsb2FkaW5nOiBmYWxzZSxcbiAgICAgICAgZXJyb3I6IHRydWUsXG4gICAgICAgIGVycm9yTWVzc2FnZTogdHlwZW9mIGUgPT09IFwic3RyaW5nXCIgPyBlIDogdW5kZWZpbmVkLFxuICAgICAgfSk7XG4gICAgICBpZiAoYWZ0ZXJGaWxlVXBsb2FkRXJyb3IpIGFmdGVyRmlsZVVwbG9hZEVycm9yKGUpO1xuICAgIH1cbiAgfVxuXG4gIGNvbnN0IGhhbmRsZVJlbW92ZUZpbGUgPSAoYXR0YWNobWVudDogQXR0YWNobWVudCkgPT4ge1xuICAgIGlmIChiZWZvcmVGaWxlUmVtb3ZlKSBiZWZvcmVGaWxlUmVtb3ZlKGF0dGFjaG1lbnQpO1xuICAgIHJlbW92ZUF0dGFjaG1lbnRzKGF0dGFjaG1lbnRzLCBhdHRhY2htZW50KTtcbiAgICBpZiAoYXR0YWNobWVudC5pZCkge1xuICAgICAgbWVyZ2VNZXNzYWdlKHtcbiAgICAgICAgZmlsZV9pZHM6IG1lc3NhZ2UuZmlsZV9pZHMuZmlsdGVyKChpZDogc3RyaW5nKSA9PiBpZCAhPT0gYXR0YWNobWVudC5pZCksXG4gICAgICAgIGZpbGVzOiBtZXNzYWdlLmZpbGVzPy5maWx0ZXIoKGZpbGU6IEZpbGUpID0+IGZpbGUuaWQgIT09IGF0dGFjaG1lbnQuaWQpLFxuICAgICAgfSk7XG4gICAgfVxuICAgIGlmIChhZnRlckZpbGVSZW1vdmUpIGFmdGVyRmlsZVJlbW92ZShhdHRhY2htZW50KTtcbiAgfTtcblxuICBjb25zdCBoYW5kbGVNaW5pbWl6ZSA9IChpc01pbmltaXplZDogYm9vbGVhbikgPT4ge1xuICAgIF90aGlzLm1pbmltaXplZCA9IGlzTWluaW1pemVkO1xuICAgIHByZXZpb3VzUHJvcHMgPSBfdGhpcztcblxuICAgIGRpc3BhdGNoRXZlbnQoXG4gICAgICBfdGhpcy5taW5pbWl6ZWQgPyBcImNvbXBvc2VyTWluaW1pemVkXCIgOiBcImNvbXBvc2VyTWF4aW1pemVkXCIsXG4gICAgICB7fSxcbiAgICApO1xuICB9O1xuXG4gIGxldCBpc1BlbmRpbmcgPSBmYWxzZTtcbiAgbGV0IHNlbmRFcnJvciA9IGZhbHNlO1xuICBsZXQgc2VuZFN1Y2Nlc3MgPSBmYWxzZTtcblxuICBjb25zdCBoYW5kbGVTZW5kID0gYXN5bmMgKCkgPT4ge1xuICAgIGlzUGVuZGluZyA9IHRydWU7XG4gICAgc2VuZEVycm9yID0gZmFsc2U7XG4gICAgc2VuZFN1Y2Nlc3MgPSBmYWxzZTtcblxuICAgIGxldCBtc2cgPSBtZXNzYWdlO1xuICAgIGlmIChiZWZvcmVTZW5kKSB7XG4gICAgICAvLyBJZiBiZWZvcmVTZW5kIHJldHVybnMgdmFsdWUsIGl0IHdpbGwgcmVwbGFjZSB0aGUgbWVzc2FnZVxuICAgICAgY29uc3QgdXBkID0gYmVmb3JlU2VuZChtZXNzYWdlKTtcbiAgICAgIC8vIEB0cy1pZ25vcmVcbiAgICAgIGlmICh1cGQpIG1zZyA9IHVwZDtcbiAgICB9XG4gICAgaWYgKHNlbmQpIHtcbiAgICAgIC8vIENhbGxiYWNrXG4gICAgICBzZW5kKG1zZylcbiAgICAgICAgLnRoZW4oKHJlcykgPT4ge1xuICAgICAgICAgIGlmIChhZnRlclNlbmRTdWNjZXNzKSBhZnRlclNlbmRTdWNjZXNzKHJlcyk7XG4gICAgICAgICAgaXNQZW5kaW5nID0gZmFsc2U7XG4gICAgICAgICAgc2VuZFN1Y2Nlc3MgPSB0cnVlO1xuICAgICAgICB9KVxuICAgICAgICAuY2F0Y2goKGVycikgPT4ge1xuICAgICAgICAgIGlmIChhZnRlclNlbmRFcnJvcikgYWZ0ZXJTZW5kRXJyb3IoZXJyKTtcbiAgICAgICAgICBpZiAoX3RoaXMucmVzZXRfYWZ0ZXJfc2VuZCkge1xuICAgICAgICAgICAgbWVzc2FnZSA9IHsgLi4ubWVzc2FnZSwgLi4ubWVzc2FnZUluaXRpYWxTdGF0ZSB9O1xuICAgICAgICAgICAgcmVzZXRBdHRhY2htZW50cyhhdHRhY2htZW50cyk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGlzUGVuZGluZyA9IGZhbHNlO1xuICAgICAgICAgIHNlbmRFcnJvciA9IHRydWU7XG4gICAgICAgIH0pO1xuICAgIH0gZWxzZSBpZiAoaWQpIHtcbiAgICAgIC8vSWYgbWVzc2FnZSBpcyBhbiBleGlzdGluZyBkcmFmdFxuICAgICAgaWYgKG1zZy5vYmplY3QgPT09IFwiZHJhZnRcIikge1xuICAgICAgICBjb25zdCByZXMgPSBhd2FpdCB1cGRhdGVEcmFmdChpZCwgbXNnLCBhY2Nlc3NfdG9rZW4pO1xuICAgICAgICBpZiAocmVzLmlkKSB7XG4gICAgICAgICAgbWVyZ2VNZXNzYWdlKHsgLi4ucmVzIH0pO1xuICAgICAgICAgIG1zZyA9IHsgZHJhZnRfaWQ6IHJlcy5pZCwgLi4ucmVzIH07XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIC8vIE1pZGRsZXdhcmVcbiAgICAgIGNvbnNvbGUubG9nKEpTT04uc3RyaW5naWZ5KG1zZywgbnVsbCwgMikpO1xuICAgICAgc2VuZE1lc3NhZ2UoaWQsIG1zZywgYWNjZXNzX3Rva2VuKVxuICAgICAgICAudGhlbigocmVzKSA9PiB7XG4gICAgICAgICAgaWYgKGFmdGVyU2VuZFN1Y2Nlc3MpIGFmdGVyU2VuZFN1Y2Nlc3MocmVzKTtcbiAgICAgICAgICBpZiAoX3RoaXMucmVzZXRfYWZ0ZXJfc2VuZCkge1xuICAgICAgICAgICAgbWVzc2FnZSA9IHsgLi4ubWVzc2FnZSwgLi4ubWVzc2FnZUluaXRpYWxTdGF0ZSB9O1xuICAgICAgICAgICAgcmVzZXRBdHRhY2htZW50cyhhdHRhY2htZW50cyk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGlzUGVuZGluZyA9IGZhbHNlO1xuICAgICAgICAgIHNlbmRTdWNjZXNzID0gdHJ1ZTtcbiAgICAgICAgICBkaXNwYXRjaEV2ZW50KFwibWVzc2FnZVNlbnRcIiwge1xuICAgICAgICAgICAgbWVzc2FnZTogcmVzLFxuICAgICAgICAgIH0pO1xuICAgICAgICB9KVxuICAgICAgICAuY2F0Y2goKGVycikgPT4ge1xuICAgICAgICAgIGlmIChhZnRlclNlbmRFcnJvcikgYWZ0ZXJTZW5kRXJyb3IoZXJyKTtcbiAgICAgICAgICBpc1BlbmRpbmcgPSBmYWxzZTtcbiAgICAgICAgICBzZW5kRXJyb3IgPSB0cnVlO1xuICAgICAgICB9KTtcbiAgICB9XG4gIH07XG5cbiAgbGV0IGlzU2F2aW5nID0gZmFsc2U7XG4gIGxldCBzYXZlRXJyb3IgPSBmYWxzZTtcbiAgbGV0IHNhdmVTdWNjZXNzID0gZmFsc2U7XG4gIC8vU2F2ZSBFbWFpbCBNZXNzYWdlIGFzIERyYWZ0XG4gIGNvbnN0IGhhbmRsZVNhdmVEcmFmdCA9IGFzeW5jICgpID0+IHtcbiAgICBpc1NhdmluZyA9IHRydWU7XG4gICAgc2F2ZUVycm9yID0gZmFsc2U7XG4gICAgc2F2ZVN1Y2Nlc3MgPSBmYWxzZTtcblxuICAgIGxldCBtc2cgPSBtZXNzYWdlO1xuICAgIHRyeSB7XG4gICAgICBpZiAoc2F2ZSkge1xuICAgICAgICAvL0NhbGxpbmcgY3VzdG9tIHNhdmUgY2FsbGJhY2tcbiAgICAgICAgY29uc3QgcmVzID0gYXdhaXQgc2F2ZShtc2cpO1xuICAgICAgICBpZiAoYWZ0ZXJTYXZlU3VjY2VzcykgYWZ0ZXJTYXZlU3VjY2VzcyhyZXMpO1xuICAgICAgICBpc1NhdmluZyA9IGZhbHNlO1xuICAgICAgICBzYXZlU3VjY2VzcyA9IHRydWU7XG4gICAgICB9IGVsc2UgaWYgKGlkKSB7XG4gICAgICAgIC8vIE1pZGRsZXdhcmVcbiAgICAgICAgaWYgKG1zZy5pZCAmJiBtc2cudmVyc2lvbiAhPSBudWxsKSB7XG4gICAgICAgICAgLy9VcGRhdGUgZHJhZnRcbiAgICAgICAgICBjb25zdCByZXMgPSBhd2FpdCB1cGRhdGVEcmFmdChpZCwgbXNnLCBhY2Nlc3NfdG9rZW4pO1xuICAgICAgICAgIGlmIChyZXMuaWQpIG1lcmdlTWVzc2FnZSh7IC4uLnJlcyB9KTtcbiAgICAgICAgICBpZiAoYWZ0ZXJTYXZlU3VjY2VzcykgYWZ0ZXJTYXZlU3VjY2VzcyhyZXMpO1xuICAgICAgICAgIGlzU2F2aW5nID0gZmFsc2U7XG4gICAgICAgICAgc2F2ZVN1Y2Nlc3MgPSB0cnVlO1xuICAgICAgICAgIGRpc3BhdGNoRXZlbnQoXCJkcmFmdFVwZGF0ZWRcIiwge1xuICAgICAgICAgICAgbWVzc2FnZTogcmVzLFxuICAgICAgICAgIH0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIC8vU2F2ZSBuZXcgZHJhZnRcbiAgICAgICAgICBjb25zdCByZXMgPSBhd2FpdCBzYXZlRHJhZnQoaWQsIG1zZywgYWNjZXNzX3Rva2VuKTtcbiAgICAgICAgICBpZiAocmVzLmlkKSBtZXJnZU1lc3NhZ2UoeyAuLi5yZXMgfSk7XG4gICAgICAgICAgaWYgKGFmdGVyU2F2ZVN1Y2Nlc3MpIGFmdGVyU2F2ZVN1Y2Nlc3MocmVzKTtcbiAgICAgICAgICBpc1NhdmluZyA9IGZhbHNlO1xuICAgICAgICAgIHNhdmVTdWNjZXNzID0gdHJ1ZTtcbiAgICAgICAgICBkaXNwYXRjaEV2ZW50KFwiZHJhZnRTYXZlZFwiLCB7XG4gICAgICAgICAgICBtZXNzYWdlOiByZXMsXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgIGlmIChhZnRlclNhdmVFcnJvcikgYWZ0ZXJTYXZlRXJyb3IoZXJyKTtcbiAgICAgIGlzU2F2aW5nID0gZmFsc2U7XG4gICAgICBzYXZlRXJyb3IgPSB0cnVlO1xuICAgIH1cbiAgfTtcblxuICAvLyBMaXN0ZW5lciBmb3IgbWVzc2FnZSBjaGFuZ2VzXG4gIC8vIEB0cy1pZ25vcmVcbiAgJDogaWYgKG1lc3NhZ2UgJiYgY2hhbmdlKSBjaGFuZ2UobWVzc2FnZSk7XG4gIC8vIEB0cy1pZ25vcmVcbiAgJDogZGF0ZXBpY2tlclRpbWVzdGFtcCA9IG1lc3NhZ2Uuc2VuZF9hdCAqIDEwMDA7XG5cbiAgbGV0IHNlbmRCdXR0b25UZXh0OiBzdHJpbmcgPSBcIlNlbmRcIjtcbiAgJDogaWYgKGlzUGVuZGluZykge1xuICAgIHNlbmRCdXR0b25UZXh0ID0gXCJTZW5kaW5nXCI7XG4gIH0gZWxzZSBpZiAoaXNTYXZpbmcpIHtcbiAgICBzZW5kQnV0dG9uVGV4dCA9IFwiU2F2aW5nXCI7XG4gIH0gZWxzZSB7XG4gICAgc2VuZEJ1dHRvblRleHQgPSBcIlNlbmRcIjtcbiAgfVxuXG4gICQ6IHNlbmRFbmFibGVkID1cbiAgICAhaXNQZW5kaW5nICYmXG4gICAgIWlzU2F2aW5nICYmXG4gICAgKGlkIHx8IHNlbmQpICYmXG4gICAgbWVzc2FnZS5mcm9tLmxlbmd0aCAmJlxuICAgIChtZXNzYWdlLnRvLmxlbmd0aCB8fCBtZXNzYWdlLmNjLmxlbmd0aCB8fCBtZXNzYWdlLmJjYy5sZW5ndGgpO1xuXG4gIGxldCB0aGVtZVVybDogc3RyaW5nO1xuICAkOiBpZiAoISFfdGhpcy50aGVtZSkge1xuICAgIGlmIChfdGhpcy50aGVtZS5zdGFydHNXaXRoKFwiLlwiKSB8fCBfdGhpcy50aGVtZS5zdGFydHNXaXRoKFwiaHR0cFwiKSkge1xuICAgICAgLy8gSWYgY3VzdG9tIHVybCBzdXBwbGllZFxuICAgICAgdGhlbWVVcmwgPSBfdGhpcy50aGVtZTtcbiAgICB9IGVsc2UgaWYgKF90aGlzLnRoZW1lKSB7XG4gICAgICB0aGVtZVVybCA9IGBodHRwczovL3VucGtnLmNvbS9AbnlsYXMvY29tcG9uZW50cy1jb21wb3NlckAke3BrZy52ZXJzaW9ufS90aGVtZXMvJHtfdGhpcy50aGVtZX0uY3NzYDtcbiAgICB9XG4gIH1cblxuICBsZXQgYmNjRmllbGQ6IEhUTUxFbGVtZW50O1xuICBsZXQgY2NGaWVsZDogSFRNTEVsZW1lbnQ7XG4gIC8vIHdoZW4gKGIpY2MgZmllbGQgaXMgcmVtb3ZlZCwgcmV0dXJuIGZvY3VzIHRvIGl0cyByZXNwZWN0aXZlIHRyaWdnZXIgYnV0dG9uXG4gIGNvbnN0IHNldEZvY3VzID0gYXN5bmMgKHRyaWdnZXJFbGVtZW50OiBIVE1MRWxlbWVudCkgPT4ge1xuICAgIGF3YWl0IHRpY2soKTsgLy8gd2FpdCBmb3IgdHJpZ2dlciBlbGVtZW50IHRvIHJlYXBwZWFyXG4gICAgaWYgKHRyaWdnZXJFbGVtZW50KSB7XG4gICAgICB0cmlnZ2VyRWxlbWVudC5zZXRBdHRyaWJ1dGUoXCJ0YWJpbmRleFwiLCBcIi0xXCIpO1xuICAgICAgdHJpZ2dlckVsZW1lbnQuZm9jdXMoKTtcbiAgICAgIHRyaWdnZXJFbGVtZW50LnJlbW92ZUF0dHJpYnV0ZShcInRhYmluZGV4XCIpO1xuICAgIH1cbiAgfTtcblxuICBjb25zdCBoYW5kbGVLZXlEb3duID0gKGU6IEtleWJvYXJkRXZlbnQpID0+IHtcbiAgICBpZiAoZS5rZXkgPT09IFwiRW50ZXJcIiAmJiBlLm1ldGFLZXkpIHtcbiAgICAgIGlmIChzZW5kRW5hYmxlZCkge1xuICAgICAgICBoYW5kbGVTZW5kKCk7XG4gICAgICB9XG4gICAgfVxuICB9O1xuPC9zY3JpcHQ+XG5cbjxzdHlsZSBsYW5nPVwic2Nzc1wiPlxuICBAaW1wb3J0IFwiLi4vLi4vdGhlbWluZy9yZXNldC5zY3NzXCI7XG5cbiAgLm55bGFzLWNvbXBvc2VyIHtcbiAgICAvLyBzZXR0aW5nIHZhcnMgdGhhdCBjb250YWN0LXNlYXJjaCB1c2VzXG4gICAgLS1vdXRlci1wYWRkaW5nOiB2YXIoLS1jb21wb3Nlci1vdXRlci13aWR0aCwgMTVweCk7XG4gICAgLS1mb250LXNpemUtc21hbGw6IHZhcigtLWNvbXBvc2VyLWZvbnQtc2l6ZS1zbWFsbCwgMTJweCk7XG4gICAgLS10ZXh0LWxpZ2h0OiB2YXIoLS1jb21wb3Nlci10ZXh0LWxpZ2h0LWNvbG9yLCAjNmU2ZTdhKTtcbiAgICAtLWJvcmRlcjogdmFyKC0tY29tcG9zZXItYm9yZGVyLWNvbG9yLCAjZjdmN2Y3KTtcbiAgICAtLWJvcmRlci1yYWRpdXM6IHZhcigtLWNvbXBvc2VyLWJvcmRlci1yYWRpdXMsIDZweCk7XG4gICAgLS1wcmltYXJ5OiB2YXIoLS1jb21wb3Nlci1wcmltYXJ5LWNvbG9yLCAjNWM3N2ZmKTtcbiAgICAtLXByaW1hcnktbGlnaHQ6IHZhcigtLWNvbXBvc2VyLXByaW1hcnktbGlnaHQtY29sb3IsICNmMGYyZmYpO1xuICAgIC0tdGV4dC1zZWNvbmRhcnk6IHZhcigtLWNvbXBvc2VyLXRleHQtc2Vjb25kYXJ5LWNvbG9yLCAjMjI0N2ZmKTtcblxuICAgIHdpZHRoOiB2YXIoLS13aWR0aCwgMTAwJSk7XG4gICAgbWluLXdpZHRoOiAzMDBweDtcbiAgICBoZWlnaHQ6IHZhcigtLWhlaWdodCwgMTAwJSk7XG4gICAgbWluLWhlaWdodDogMzAwcHg7XG4gICAgYmFja2dyb3VuZDogdmFyKC0tY29tcG9zZXItYmFja2dyb3VuZC1jb2xvciwgd2hpdGUpO1xuICAgIGJvcmRlci1yYWRpdXM6IHZhcigtLWNvbXBvc2VyLWJvcmRlci1yYWRpdXMsIDZweCk7XG4gICAgYm94LXNoYWRvdzogdmFyKFxuICAgICAgLS1jb21wb3Nlci1zaGFkb3csXG4gICAgICAwIDFweCAxMHB4IHJnYmEoMCwgMCwgMCwgMC4xMSksXG4gICAgICAwIDNweCAzNnB4IHJnYmEoMCwgMCwgMCwgMC4xMilcbiAgICApO1xuICAgIGZvbnQtZmFtaWx5OiB2YXIoLS1jb21wb3Nlci1mb250LCBzYW5zLXNlcmlmKTtcbiAgICBmb250LXNpemU6IHZhcigtLWNvbXBvc2VyLWZvbnQtc2l6ZSwgMTRweCk7XG4gICAgcG9zaXRpb246IHJlbGF0aXZlO1xuICAgIGRpc3BsYXk6IGdyaWQ7XG4gICAgZ3JpZC10ZW1wbGF0ZS1yb3dzOiBhdXRvIDFmciBhdXRvO1xuICAgICYucG9wdXAge1xuICAgICAgcG9zaXRpb246IGZpeGVkO1xuICAgICAgYm90dG9tOiAxMHB4O1xuICAgICAgcmlnaHQ6IDEwcHg7XG4gICAgICB6LWluZGV4OiB2YXIoLS16LWluZGV4LCAxMDAwKTtcbiAgICB9XG4gICAgJi5taW5pbWl6ZWQge1xuICAgICAgaGVpZ2h0OiBhdXRvO1xuICAgICAgbWluLWhlaWdodDogMDtcbiAgICB9XG4gICAgJl9fbG9hZGVyIHtcbiAgICAgIG1pbi1oZWlnaHQ6IHZhcigtLWNvbXBvc2VyLWVkaXRvci1tYXgtaGVpZ2h0LCA0ODBweCk7XG4gICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgICAgIGp1c3RpZnktY29udGVudDogY2VudGVyO1xuICAgICAgY29sb3I6IHZhcigtLWNvbXBvc2VyLXRleHQtbGlnaHQtY29sb3IsICM2ZTZlN2EpO1xuICAgICAgYm94LXNoYWRvdzogbm9uZTtcbiAgICB9XG4gICAgJl9fc3Bpbm5lciB7XG4gICAgICBtYXJnaW4tcmlnaHQ6IDEwcHg7XG4gICAgICB3aWR0aDogMThweDtcbiAgICAgIGFuaW1hdGlvbjogcm90YXRlIDJzIGxpbmVhciBpbmZpbml0ZTtcbiAgICB9XG4gICAgKjpmb2N1cyB7XG4gICAgICBvdXRsaW5lOiA1cHggYXV0byB2YXIoLS1jb21wb3Nlci1wcmltYXJ5LWNvbG9yLCAjNWM3N2ZmKTtcbiAgICB9XG4gIH1cbiAgQGtleWZyYW1lcyByb3RhdGUge1xuICAgIHRvIHtcbiAgICAgIHRyYW5zZm9ybTogcm90YXRlKDM2MGRlZyk7XG4gICAgfVxuICB9XG4gIG1haW4ge1xuICAgIGJhY2tncm91bmQ6IHZhcigtLWJnKTtcbiAgICBvdmVyZmxvdzogYXV0bztcbiAgfVxuICBpbnB1dCB7XG4gICAgZm9udC1mYW1pbHk6IHZhcigtLWNvbXBvc2VyLWZvbnQsIHNhbnMtc2VyaWYpO1xuICB9XG4gIGhlYWRlciB7XG4gICAgYm9yZGVyLXRvcC1sZWZ0LXJhZGl1czogdmFyKC0tY29tcG9zZXItYm9yZGVyLXJhZGl1cywgNnB4KTtcbiAgICBib3JkZXItdG9wLXJpZ2h0LXJhZGl1czogdmFyKC0tY29tcG9zZXItYm9yZGVyLXJhZGl1cywgNnB4KTtcbiAgICBib3JkZXItYm90dG9tOiAxcHggc29saWQgdmFyKC0tY29tcG9zZXItYm9yZGVyLWNvbG9yLCAjZjdmN2Y3KTtcbiAgICBjb2xvcjogdmFyKC0tY29tcG9zZXItdGV4dC1jb2xvciwgYmxhY2spO1xuICAgIHBhZGRpbmc6IDE1cHggdmFyKC0tY29tcG9zZXItb3V0ZXItcGFkZGluZywgMTVweCk7XG4gICAgZGlzcGxheTogZmxleDtcbiAgICBmb250LXdlaWdodDogNjAwO1xuICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gICAganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuO1xuICAgIGJhY2tncm91bmQ6IHZhcihcbiAgICAgIC0tY29tcG9zZXItaGVhZGVyLWJhY2tncm91bmQtY29sb3IsXG4gICAgICB2YXIoLS1jb21wb3Nlci1iYWNrZ3JvdW5kLWNvbG9yLCB3aGl0ZSlcbiAgICApO1xuICAgICYubWluaW1pemVkIHtcbiAgICAgIGJvcmRlci1ib3R0b20tbGVmdC1yYWRpdXM6IHZhcigtLWNvbXBvc2VyLWJvcmRlci1yYWRpdXMsIDZweCk7XG4gICAgICBib3JkZXItYm90dG9tLXJpZ2h0LXJhZGl1czogdmFyKC0tY29tcG9zZXItYm9yZGVyLXJhZGl1cywgNnB4KTtcbiAgICB9XG4gIH1cbiAgZm9vdGVyIHtcbiAgICBwYWRkaW5nOiAxNXB4IHZhcigtLWNvbXBvc2VyLW91dGVyLXBhZGRpbmcsIDE1cHgpO1xuICAgIGJvcmRlci10b3A6IDFweCBzb2xpZCB2YXIoLS1jb21wb3Nlci1ib3JkZXItY29sb3IsICNmN2Y3ZjcpO1xuICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgICBqdXN0aWZ5LWNvbnRlbnQ6IGZsZXgtc3RhcnQ7XG4gICAgYmFja2dyb3VuZDogdmFyKC0tYmcpO1xuICB9XG4gIC5zZW5kLWJ0biB7XG4gICAgYm9yZGVyOiAwO1xuICAgIGJhY2tncm91bmQ6IHZhcigtLWNvbXBvc2VyLXByaW1hcnktY29sb3IsICM1Yzc3ZmYpO1xuICAgIGNvbG9yOiB3aGl0ZTtcbiAgICBjdXJzb3I6IHBvaW50ZXI7XG4gICAgcGFkZGluZzogMTBweCAyNXB4O1xuICAgIGZvbnQtd2VpZ2h0OiBib2xkO1xuICAgIGJvcmRlci1yYWRpdXM6IHZhcigtLWNvbXBvc2VyLWJvcmRlci1yYWRpdXMsIDZweCk7XG4gICAgZm9udC1mYW1pbHk6IHZhcigtLWNvbXBvc2VyLWZvbnQsIHNhbnMtc2VyaWYpO1xuICAgIHRyYW5zaXRpb246IGJhY2tncm91bmQtY29sb3IgMC4zcztcbiAgICAvLyBib3JkZXItdG9wLXJpZ2h0LXJhZGl1czogMDtcbiAgICAvLyBib3JkZXItYm90dG9tLXJpZ2h0LXJhZGl1czogMDtcblxuICAgICY6ZGlzYWJsZWQge1xuICAgICAgb3BhY2l0eTogMC41O1xuICAgIH1cbiAgICAmOmhvdmVyIHtcbiAgICAgIGJhY2tncm91bmQ6IHZhcigtLWNvbXBvc2VyLXByaW1hcnktZGFyay1jb2xvciwgIzI5NGRmZik7XG4gICAgfVxuICAgICYuc2VuZC1sYXRlciB7XG4gICAgICBwYWRkaW5nOiAxMHB4IDEwcHg7XG4gICAgICBib3JkZXItcmFkaXVzOiB2YXIoLS1jb21wb3Nlci1ib3JkZXItcmFkaXVzLCA2cHgpO1xuICAgICAgYm9yZGVyLXRvcC1sZWZ0LXJhZGl1czogMDtcbiAgICAgIGJvcmRlci1ib3R0b20tbGVmdC1yYWRpdXM6IDA7XG4gICAgICBtYXJnaW4tbGVmdDogLTRweDtcbiAgICB9XG4gIH1cblxuICAuc3ViamVjdCB7XG4gICAgZGlzcGxheTogYmxvY2s7XG4gICAgZm9udC1zaXplOiB2YXIoLS1jb21wb3Nlci1mb250LXNpemUsIDE0cHgpO1xuICAgIGJvcmRlcjogbm9uZTtcbiAgICBib3JkZXItYm90dG9tOiAxcHggc29saWQgdmFyKC0tY29tcG9zZXItYm9yZGVyLWNvbG9yLCAjZjdmN2Y3KTtcbiAgICBjb2xvcjogdmFyKC0tY29tcG9zZXItdGV4dC1jb2xvciwgYmxhY2spO1xuICAgIHdpZHRoOiAxMDAlO1xuICAgIGJhY2tncm91bmQ6IHZhcigtLWJnKTtcbiAgICBmb250LXdlaWdodDogNjAwO1xuICAgIGJveC1zaXppbmc6IGJvcmRlci1ib3g7XG4gICAgcGFkZGluZzogMTVweCB2YXIoLS1jb21wb3Nlci1vdXRlci1wYWRkaW5nLCAxNXB4KTtcbiAgICBvdXRsaW5lOiAwO1xuICAgICY6OnBsYWNlaG9sZXIge1xuICAgICAgZm9udC13ZWlnaHQ6IDUwMDtcbiAgICB9XG4gIH1cblxuICAuY29udGFjdHMtd3JhcHBlciB7XG4gICAgcG9zaXRpb246IHJlbGF0aXZlO1xuICAgIHRleHQtZGVjb3JhdGlvbjogbm9uZTtcbiAgICBjb2xvcjogdmFyKC0tY29tcG9zZXItdGV4dC1jb2xvciwgYmxhY2spO1xuICAgIC5jb250YWN0cy1jb250YWluZXIge1xuICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gICAgICBmbGV4LXdyYXA6IHdyYXA7XG4gICAgICBwYWRkaW5nOiAwLjRyZW0gdmFyKC0tb3V0ZXItcGFkZGluZyk7XG4gICAgICBib3JkZXItYm90dG9tOiAxcHggc29saWQgdmFyKC0tYm9yZGVyKTtcbiAgICB9XG4gICAgLmNvbnRhY3QtZnJvbSB7XG4gICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgICAgIHBhZGRpbmctYm90dG9tOiAwLjFyZW07XG4gICAgICBwYWRkaW5nLXJpZ2h0OiAwLjFyZW07XG4gICAgfVxuICAgIC5jb250YWN0LWl0ZW0ge1xuICAgICAgZGlzcGxheTogaW5saW5lLWZsZXg7XG4gICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1wcmltYXJ5LWxpZ2h0KTtcbiAgICAgIGNvbG9yOiB2YXIoLS1wcmltYXJ5KTtcbiAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gICAgICBib3JkZXItcmFkaXVzOiBjYWxjKHZhcigtLWJvcmRlci1yYWRpdXMpIC8gMik7XG4gICAgICBwYWRkaW5nOiAwLjJyZW0gMC44cmVtO1xuICAgICAgbWFyZ2luLXJpZ2h0OiAwLjI1cmVtO1xuICAgICAgbWFyZ2luLXRvcDogMnB4O1xuICAgICAgbWFyZ2luLWJvdHRvbTogMnB4O1xuICAgIH1cbiAgICAuY29udGFjdC1pdGVtX19uYW1lIHtcbiAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LXNlY29uZGFyeSk7XG4gICAgICBmb250LXNpemU6IDEycHg7XG4gICAgICBwYWRkaW5nLXJpZ2h0OiAwLjc1cmVtO1xuICAgIH1cbiAgICAuY29udGFjdHMtcGxhY2Vob2xkZXIge1xuICAgICAgZm9udC1zaXplOiB2YXIoLS1mb250LXNpemUtc21hbGwpO1xuICAgICAgbWFyZ2luLXJpZ2h0OiAxMHB4O1xuICAgICAgbWluLXdpZHRoOiAzMHB4O1xuICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LWxpZ2h0KTtcbiAgICB9XG4gIH1cbiAgLmNsb3NlLWJ0biB7XG4gICAgYmFja2dyb3VuZDogbm9uZTtcbiAgICBib3JkZXI6IG5vbmU7XG4gICAgb3V0bGluZTogMDtcbiAgICBjdXJzb3I6IHBvaW50ZXI7XG4gIH1cbiAgLmNvbXBvc2VyLWJ0biB7XG4gICAgYmFja2dyb3VuZDogbm9uZTtcbiAgICBib3JkZXI6IG5vbmU7XG4gICAgb3V0bGluZTogMDtcbiAgICB3aWR0aDogMjhweDtcbiAgICBoZWlnaHQ6IDI4cHg7XG4gICAgYm9yZGVyLXJhZGl1czogdmFyKC0tY29tcG9zZXItYm9yZGVyLXJhZGl1cywgNnB4KTtcbiAgICBjdXJzb3I6IHBvaW50ZXI7XG4gICAgJjpob3ZlciB7XG4gICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1jb21wb3Nlci1iYWNrZ3JvdW5kLW11dGVkLWNvbG9yLCAjZjBmMmZmKTtcbiAgICB9XG4gIH1cbiAgLmNvbXBvc2VyLWJ0bi5maWxlLXVwbG9hZCxcbiAgLmNvbXBvc2VyLWJ0bi5zYXZlLWRyYWZ0IHtcbiAgICBtYXJnaW4tbGVmdDogNnB4O1xuICAgIHdpZHRoOiAzMnB4O1xuICAgIGhlaWdodDogMzJweDtcbiAgICBkaXNwbGF5OiBmbGV4O1xuICAgIGp1c3RpZnktY29udGVudDogY2VudGVyO1xuICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gIH1cbiAgLmZpbGUtc2l6ZSB7XG4gICAgbWFyZ2luLWxlZnQ6IDZweDtcbiAgICBjb2xvcjogdmFyKC0tY29tcG9zZXItaWNvbnMtY29sb3IsICM2NjY3NzQpO1xuICAgIGhlaWdodDogMzJweDtcbiAgICB3aWR0aDogYXV0bztcbiAgICBkaXNwbGF5OiBmbGV4O1xuICAgIGp1c3RpZnktY29udGVudDogY2VudGVyO1xuICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gIH1cblxuICAuY2MtYnRuIHtcbiAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAgcmlnaHQ6IDEwcHg7XG4gIH1cblxuICAuYXR0YWNobWVudHMtd3JhcHBlciB7XG4gICAgZGlzcGxheTogZmxleDtcbiAgICBwYWRkaW5nOiAxNXB4IHZhcigtLWNvbXBvc2VyLW91dGVyLXBhZGRpbmcsIDE1cHgpO1xuICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG4gIH1cbiAgLmFkZG9ucyB7XG4gICAgZm9udC1zaXplOiB2YXIoLS1jb21wb3Nlci1mb250LXNpemUtc21hbGwsIDEycHgpO1xuICAgIGxldHRlci1zcGFjaW5nOiAxLjJweDtcbiAgICBmb250LXdlaWdodDogNjAwO1xuICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICByaWdodDogMTBweDtcbiAgICBib3R0b206IDE2cHg7XG4gICAgY29sb3I6IHZhcigtLWNvbXBvc2VyLXRleHQtbGlnaHQtY29sb3IsICM2ZTZlN2EpO1xuICAgIGJ1dHRvbiB7XG4gICAgICBiYWNrZ3JvdW5kOiB0cmFuc3BhcmVudDtcbiAgICAgIGJveC1zaGFkb3c6IG5vbmU7XG4gICAgICBib3JkZXI6IG5vbmU7XG4gICAgICBjb2xvcjogdmFyKC0tY29tcG9zZXItdGV4dC1saWdodC1jb2xvciwgIzZlNmU3YSk7XG4gICAgICBjdXJzb3I6IHBvaW50ZXI7XG4gICAgICBtYXJnaW4tcmlnaHQ6IDEwcHg7XG4gICAgICBwYWRkaW5nOiA1cHg7XG4gICAgfVxuICB9XG5cbiAgLmNjLWNvbnRhaW5lciB7XG4gICAgZGlzcGxheTogZmxleDtcbiAgICBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47XG4gICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgICBwb3NpdGlvbjogcmVsYXRpdmU7XG5cbiAgICAmID4gbnlsYXMtY29udGFjdHMtc2VhcmNoIHtcbiAgICAgIGZsZXg6IDE7XG4gICAgfVxuICB9XG4gIC5hdHRhY2htZW50cy1jYXB0aW9uIHtcbiAgICBmb250LXNpemU6IHZhcigtLWNvbXBvc2VyLWZvbnQtc2l6ZS1zbWFsbCwgMTJweCk7XG4gICAgbWFyZ2luLWJvdHRvbTogNXB4O1xuICAgIGNvbG9yOiB2YXIoLS1jb21wb3Nlci10ZXh0LWxpZ2h0LWNvbG9yLCAjNmU2ZTdhKTtcbiAgfVxuICBAbWVkaWEgb25seSBzY3JlZW4gYW5kIChtYXgtd2lkdGg6IDYwMHB4KSB7XG4gICAgLm55bGFzLWNvbXBvc2VyIHtcbiAgICAgIHdpZHRoOiAxMDAlO1xuICAgIH1cbiAgICAuY29udGFjdHMtd3JhcHBlciB7XG4gICAgICBwb3NpdGlvbjogaW5pdGlhbDtcbiAgICB9XG4gICAgLmFkZG9ucyB7XG4gICAgICBwb3NpdGlvbjogaW5pdGlhbDtcbiAgICAgIGZsb2F0OiByaWdodDtcbiAgICAgIHBhZGRpbmc6IDVweDtcbiAgICB9XG4gIH1cblxuICBbY2xhc3MkPVwiSWNvblwiXSB7XG4gICAgZmlsbDogdmFyKC0tY29tcG9zZXItaWNvbnMtY29sb3IsICM2NjY3NzQpO1xuICAgIHdpZHRoOiAxMHB4O1xuICAgIGhlaWdodDogMTBweDtcbiAgfVxuICBbY2xhc3MkPVwiRm9vdGVySWNvblwiXSB7XG4gICAgd2lkdGg6IDE2cHg7XG4gICAgaGVpZ2h0OiAxNnB4O1xuICB9XG4gIC5FeHBhbmRJY29uIHtcbiAgICB0cmFuc2Zvcm06IHRyYW5zbGF0ZVkoMXB4KTtcbiAgfVxuICAuTWluaW1pemVJY29uIHtcbiAgICB0cmFuc2Zvcm06IHRyYW5zbGF0ZVkoNHB4KTtcbiAgfVxuPC9zdHlsZT5cblxuPG55bGFzLWVycm9yIHtpZH0gLz5cblxueyNpZiB0aGVtZVVybH1cbiAgPGxpbmtcbiAgICByZWw9XCJzdHlsZXNoZWV0XCJcbiAgICBocmVmPXt0aGVtZVVybH1cbiAgICBvbjpsb2FkPXsoKSA9PiAodGhlbWVMb2FkZWQgPSB0cnVlKX1cbiAgICBvbjplcnJvcj17KCkgPT4gKHRoZW1lTG9hZGVkID0gdHJ1ZSl9IC8+XG57L2lmfVxueyNpZiB2aXNpYmxlICYmIGlzTG9hZGluZ31cbiAgPGRpdiBjbGFzcz1cIm55bGFzLWNvbXBvc2VyIG55bGFzLWNvbXBvc2VyX19sb2FkZXJcIj5cbiAgICA8TG9hZGluZ0ljb24gY2xhc3M9XCJueWxhcy1jb21wb3Nlcl9fc3Bpbm5lclwiIC8+XG4gICAgPGRpdj5Mb2FkaW5nPC9kaXY+XG4gIDwvZGl2Plxuey9pZn1cblxueyNpZiB2aXNpYmxlICYmIHRoZW1lTG9hZGVkICYmICFpc0xvYWRpbmd9XG4gIDxkaXZcbiAgICBjbGFzcz1cIm55bGFzLWNvbXBvc2VyXCJcbiAgICBkYXRhLWN5PVwibnlsYXMtY29tcG9zZXJcIlxuICAgIGNsYXNzOm1pbmltaXplZD17X3RoaXMubWluaW1pemVkfT5cbiAgICB7I2lmIF90aGlzLnNob3dfaGVhZGVyfVxuICAgICAgPGhlYWRlciBjbGFzcz17X3RoaXMubWluaW1pemVkID8gXCJtaW5pbWl6ZWRcIiA6IHVuZGVmaW5lZH0+XG4gICAgICAgIDxzcGFuPntzdWJqZWN0fTwvc3Bhbj5cbiAgICAgICAgPGRpdj5cbiAgICAgICAgICB7I2lmIF90aGlzLnNob3dfbWluaW1pemVfYnV0dG9ufVxuICAgICAgICAgICAgeyNpZiBfdGhpcy5taW5pbWl6ZWR9XG4gICAgICAgICAgICAgIDxidXR0b25cbiAgICAgICAgICAgICAgICBjbGFzcz1cImNvbXBvc2VyLWJ0blwiXG4gICAgICAgICAgICAgICAgb246Y2xpY2s9eygpID0+IGhhbmRsZU1pbmltaXplKGZhbHNlKX0+XG4gICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJzci1vbmx5XCI+RXhwYW5kIENvbXBvc2VyPC9zcGFuPlxuICAgICAgICAgICAgICAgIDxFeHBhbmRJY29uIGNsYXNzPVwiRXhwYW5kSWNvblwiIC8+XG4gICAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgICAgezplbHNlfVxuICAgICAgICAgICAgICA8YnV0dG9uXG4gICAgICAgICAgICAgICAgY2xhc3M9XCJjb21wb3Nlci1idG5cIlxuICAgICAgICAgICAgICAgIG9uOmNsaWNrPXsoKSA9PiBoYW5kbGVNaW5pbWl6ZSh0cnVlKX0+XG4gICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJzci1vbmx5XCI+Q29sbGFwc2UgQ29tcG9zZXI8L3NwYW4+XG4gICAgICAgICAgICAgICAgPE1pbmltaXplSWNvbiBjbGFzcz1cIk1pbmltaXplSWNvblwiIC8+XG4gICAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgICAgey9pZn1cbiAgICAgICAgICB7L2lmfVxuICAgICAgICAgIHsjaWYgX3RoaXMuc2hvd19jbG9zZV9idXR0b259XG4gICAgICAgICAgICA8YnV0dG9uIGNsYXNzPVwiY29tcG9zZXItYnRuXCIgb246Y2xpY2s9e2Nsb3NlfT5cbiAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJzci1vbmx5XCI+Q2xvc2UgQ29tcG9zZXI8L3NwYW4+XG4gICAgICAgICAgICAgIDxDbG9zZUljb24gY2xhc3M9XCJDbG9zZUljb25cIiAvPlxuICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgey9pZn1cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L2hlYWRlcj5cbiAgICB7L2lmfVxuICAgIHsjaWYgIV90aGlzLm1pbmltaXplZH1cbiAgICAgIDxtYWluPlxuICAgICAgICA8IS0tIFNlYXJjaCAtLT5cbiAgICAgICAgPGRpdiBjbGFzcz1cImNvbnRhY3RzLXdyYXBwZXJcIj5cbiAgICAgICAgICB7I2lmIF90aGlzLnNob3dfZnJvbX1cbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJjb250YWN0cy1jb250YWluZXJcIj5cbiAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImNvbnRhY3QtZnJvbVwiPlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJjb250YWN0cy1wbGFjZWhvbGRlclwiPkZyb206PC9kaXY+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImNvbnRhY3RzLXJlc3VsdHMtaW5uZXJcIj5cbiAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJjb250YWN0LWl0ZW1cIiBkYXRhLWN5PVwiZnJvbS1maWVsZFwiPlxuICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cImNvbnRhY3QtaXRlbV9fbmFtZVwiPlxuICAgICAgICAgICAgICAgICAgICAgIHsjaWYgbWVzc2FnZS5mcm9tLmxlbmd0aCA+IDB9XG4gICAgICAgICAgICAgICAgICAgICAgICB7I2lmIG1lc3NhZ2UuZnJvbVswXS5uYW1lfVxuICAgICAgICAgICAgICAgICAgICAgICAgICA8c3Ryb25nPnttZXNzYWdlLmZyb21bMF0ubmFtZX08L3N0cm9uZz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAge2A8JHttZXNzYWdlLmZyb21bMF0uZW1haWx9PmB9XG4gICAgICAgICAgICAgICAgICAgICAgICB7OmVsc2V9XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHttZXNzYWdlLmZyb21bMF0uZW1haWx9XG4gICAgICAgICAgICAgICAgICAgICAgICB7L2lmfVxuICAgICAgICAgICAgICAgICAgICAgIHsvaWZ9XG4gICAgICAgICAgICAgICAgICAgIDwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIHsvaWZ9XG4gICAgICAgICAgeyNpZiBfdGhpcy5zaG93X3RvfVxuICAgICAgICAgICAgPG55bGFzLWNvbnRhY3RzLXNlYXJjaFxuICAgICAgICAgICAgICBkYXRhLWN5PVwidG8tZmllbGRcIlxuICAgICAgICAgICAgICBwbGFjZWhvbGRlcj1cIlRvOlwiXG4gICAgICAgICAgICAgIGNoYW5nZT17aGFuZGxlQ29udGFjdHNDaGFuZ2UoXCJ0b1wiKX1cbiAgICAgICAgICAgICAgY29udGFjdHM9e3RvfVxuICAgICAgICAgICAgICB2YWx1ZT17bWVzc2FnZS50b30gLz5cbiAgICAgICAgICB7L2lmfVxuICAgICAgICAgIDxkaXYgY2xhc3M9XCJhZGRvbnNcIj5cbiAgICAgICAgICAgIDxidXR0b25cbiAgICAgICAgICAgICAgZGF0YS1jeT1cInRvZ2dsZS1jYy1maWVsZC1idG5cIlxuICAgICAgICAgICAgICB0eXBlPVwiYnV0dG9uXCJcbiAgICAgICAgICAgICAgYmluZDp0aGlzPXtjY0ZpZWxkfVxuICAgICAgICAgICAgICBoaWRkZW49e190aGlzLnNob3dfY2MgJiYgIV90aGlzLnNob3dfY2NfYnV0dG9uICYmICEhX3RoaXMuc2hvd190b31cbiAgICAgICAgICAgICAgb246Y2xpY2s9eygpID0+IHtcbiAgICAgICAgICAgICAgICBfdGhpcy5zaG93X2NjID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICBwcmV2aW91c1Byb3BzID0gX3RoaXM7XG4gICAgICAgICAgICAgIH19PkNDPC9idXR0b24+XG5cbiAgICAgICAgICAgIDxidXR0b25cbiAgICAgICAgICAgICAgZGF0YS1jeT1cInRvZ2dsZS1iY2MtZmllbGQtYnRuXCJcbiAgICAgICAgICAgICAgdHlwZT1cImJ1dHRvblwiXG4gICAgICAgICAgICAgIGJpbmQ6dGhpcz17YmNjRmllbGR9XG4gICAgICAgICAgICAgIGhpZGRlbj17X3RoaXMuc2hvd19iY2MgJiZcbiAgICAgICAgICAgICAgICAhX3RoaXMuc2hvd19iY2NfYnV0dG9uICYmXG4gICAgICAgICAgICAgICAgISFfdGhpcy5zaG93X3RvfVxuICAgICAgICAgICAgICBvbjpjbGljaz17KCkgPT4ge1xuICAgICAgICAgICAgICAgIF90aGlzLnNob3dfYmNjID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICBwcmV2aW91c1Byb3BzID0gX3RoaXM7XG4gICAgICAgICAgICAgIH19PkJDQzwvYnV0dG9uPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L2Rpdj5cbiAgICAgICAgeyNpZiBfdGhpcy5zaG93X2NjfVxuICAgICAgICAgIDxkaXYgY2xhc3M9XCJjYy1jb250YWluZXJcIj5cbiAgICAgICAgICAgIDxueWxhcy1jb250YWN0cy1zZWFyY2hcbiAgICAgICAgICAgICAgZGF0YS1jeT1cImNjLWZpZWxkXCJcbiAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9XCJDQzpcIlxuICAgICAgICAgICAgICBjb250YWN0cz17Y2N9XG4gICAgICAgICAgICAgIHZhbHVlPXttZXNzYWdlLmNjfVxuICAgICAgICAgICAgICBjaGFuZ2U9e2hhbmRsZUNvbnRhY3RzQ2hhbmdlKFwiY2NcIil9IC8+XG4gICAgICAgICAgICA8YnV0dG9uXG4gICAgICAgICAgICAgIHR5cGU9XCJidXR0b25cIlxuICAgICAgICAgICAgICBjbGFzcz1cImNvbXBvc2VyLWJ0biBjYy1idG5cIlxuICAgICAgICAgICAgICBvbjpjbGljaz17KCkgPT4ge1xuICAgICAgICAgICAgICAgIHNldEZvY3VzKGNjRmllbGQpO1xuICAgICAgICAgICAgICAgIF90aGlzLnNob3dfY2MgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICBwcmV2aW91c1Byb3BzID0gX3RoaXM7XG4gICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgIGFyaWEtbGFiZWw9XCJyZW1vdmUgY2FyYm9uIGNvcHkgZmllbGRcIj5cbiAgICAgICAgICAgICAgPENsb3NlSWNvbiBjbGFzcz1cIkNsb3NlSWNvblwiIC8+XG4gICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgey9pZn1cbiAgICAgICAgeyNpZiBfdGhpcy5zaG93X2JjY31cbiAgICAgICAgICA8ZGl2IGNsYXNzPVwiY2MtY29udGFpbmVyXCI+XG4gICAgICAgICAgICA8bnlsYXMtY29udGFjdHMtc2VhcmNoXG4gICAgICAgICAgICAgIGRhdGEtY3k9XCJiY2MtZmllbGRcIlxuICAgICAgICAgICAgICBwbGFjZWhvbGRlcj1cIkJDQzpcIlxuICAgICAgICAgICAgICBjb250YWN0cz17YmNjfVxuICAgICAgICAgICAgICB2YWx1ZT17bWVzc2FnZS5iY2N9XG4gICAgICAgICAgICAgIGNoYW5nZT17aGFuZGxlQ29udGFjdHNDaGFuZ2UoXCJiY2NcIil9IC8+XG4gICAgICAgICAgICA8YnV0dG9uXG4gICAgICAgICAgICAgIHR5cGU9XCJidXR0b25cIlxuICAgICAgICAgICAgICBjbGFzcz1cImNvbXBvc2VyLWJ0biBjYy1idG5cIlxuICAgICAgICAgICAgICBvbjpjbGljaz17KCkgPT4ge1xuICAgICAgICAgICAgICAgIHNldEZvY3VzKGJjY0ZpZWxkKTtcbiAgICAgICAgICAgICAgICBfdGhpcy5zaG93X2JjYyA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIHByZXZpb3VzUHJvcHMgPSBfdGhpcztcbiAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgYXJpYS1sYWJlbD1cInJlbW92ZSBibGluZCBjYXJib24gY29weSBmaWVsZFwiPlxuICAgICAgICAgICAgICA8Q2xvc2VJY29uIGNsYXNzPVwiQ2xvc2VJY29uXCIgLz5cbiAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICB7L2lmfVxuXG4gICAgICAgIDwhLS0gU3ViamVjdCAtLT5cbiAgICAgICAgeyNpZiBfdGhpcy5zaG93X3N1YmplY3R9XG4gICAgICAgICAgPGxhYmVsPlxuICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJzci1vbmx5XCI+RW1haWwgc3ViamVjdDwvc3Bhbj5cbiAgICAgICAgICAgIDxpbnB1dFxuICAgICAgICAgICAgICB0eXBlPVwidGV4dFwiXG4gICAgICAgICAgICAgIHBsYWNlaG9sZGVyPVwiU3ViamVjdFwiXG4gICAgICAgICAgICAgIGNsYXNzPVwic3ViamVjdFwiXG4gICAgICAgICAgICAgIHZhbHVlPXtzdWJqZWN0fVxuICAgICAgICAgICAgICBuYW1lPVwic3ViamVjdFwiXG4gICAgICAgICAgICAgIG9uOmlucHV0PXtoYW5kbGVJbnB1dENoYW5nZX0gLz5cbiAgICAgICAgICA8L2xhYmVsPlxuICAgICAgICB7L2lmfVxuXG4gICAgICAgIDwhLS0gSFRNTCBFZGl0b3IgLS0+XG4gICAgICAgIDxueWxhcy1odG1sLWVkaXRvclxuICAgICAgICAgIGRhdGEtY3k9XCJodG1sLWVkaXRvclwiXG4gICAgICAgICAgaHRtbD17bWVzc2FnZS5ib2R5IHx8IHRlbXBsYXRlfVxuICAgICAgICAgIG9uY2hhbmdlPXtoYW5kbGVCb2R5Q2hhbmdlfVxuICAgICAgICAgIGZvY3VzX2JvZHlfb25sb2FkPXtfdGhpcy5mb2N1c19ib2R5X29ubG9hZH1cbiAgICAgICAgICByZXBsYWNlX2ZpZWxkcz17X3RoaXMucmVwbGFjZV9maWVsZHN9XG4gICAgICAgICAgc2hvd19lZGl0b3JfdG9vbGJhcj17X3RoaXMuc2hvd19lZGl0b3JfdG9vbGJhcn1cbiAgICAgICAgICBvbjprZXlkb3duPXtoYW5kbGVLZXlEb3dufSAvPlxuICAgICAgICB7I2lmICRhdHRhY2htZW50cy5sZW5ndGh9XG4gICAgICAgICAgPGRpdiBjbGFzcz1cIm55bGFzLWF0dGFjaG1lbnRzXCI+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwiYXR0YWNobWVudHMtd3JhcHBlclwiPlxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiYXR0YWNobWVudHMtY2FwdGlvblwiPkF0dGFjaG1lbnRzOjwvZGl2PlxuXG4gICAgICAgICAgICAgIHsjZWFjaCAkYXR0YWNobWVudHMgYXMgZmlsZUF0dGFjaG1lbnR9XG4gICAgICAgICAgICAgICAgPG55bGFzLWNvbXBvc2VyLWF0dGFjaG1lbnRcbiAgICAgICAgICAgICAgICAgIGF0dGFjaG1lbnQ9e2ZpbGVBdHRhY2htZW50fVxuICAgICAgICAgICAgICAgICAgcmVtb3ZlPXtoYW5kbGVSZW1vdmVGaWxlfSAvPlxuICAgICAgICAgICAgICB7L2VhY2h9XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgey9pZn1cbiAgICAgIDwvbWFpbj5cbiAgICAgIDxmb290ZXI+XG4gICAgICAgIDxkaXYgY2xhc3M9XCJidG4tZ3JvdXBcIj5cbiAgICAgICAgICA8YnV0dG9uXG4gICAgICAgICAgICBjbGFzcz1cInNlbmQtYnRuXCJcbiAgICAgICAgICAgIG9uOmNsaWNrPXtoYW5kbGVTZW5kfVxuICAgICAgICAgICAgZGlzYWJsZWQ9eyFzZW5kRW5hYmxlZH0+XG4gICAgICAgICAgICB7c2VuZEJ1dHRvblRleHR9XG4gICAgICAgICAgPC9idXR0b24+XG4gICAgICAgIDwvZGl2PlxuICAgICAgICB7I2lmIF90aGlzLnNob3dfc2F2ZV9hc19kcmFmdH1cbiAgICAgICAgICA8YnV0dG9uXG4gICAgICAgICAgICBmb3I9XCJzYXZlLWRyYWZ0XCJcbiAgICAgICAgICAgIGNsYXNzPVwiY29tcG9zZXItYnRuIHNhdmUtZHJhZnRcIlxuICAgICAgICAgICAgdGl0bGU9XCJTYXZlIEVtYWlsIEFzIERyYWZ0XCJcbiAgICAgICAgICAgIG9uOmNsaWNrPXtoYW5kbGVTYXZlRHJhZnR9PlxuICAgICAgICAgICAgPERyYWZ0SWNvbiBjbGFzcz1cIkZvb3Rlckljb25cIiAvPlxuICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJzci1vbmx5XCI+U2F2ZSBEcmFmdDwvc3Bhbj5cbiAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgey9pZn1cbiAgICAgICAgeyNpZiBfdGhpcy5zaG93X2F0dGFjaG1lbnRfYnV0dG9uICYmIChpZCB8fCB1cGxvYWRGaWxlKX1cbiAgICAgICAgICA8bGFiZWxcbiAgICAgICAgICAgIGZvcj1cImZpbGUtdXBsb2FkXCJcbiAgICAgICAgICAgIGNsYXNzPVwiY29tcG9zZXItYnRuIGZpbGUtdXBsb2FkXCJcbiAgICAgICAgICAgIHRpdGxlPVwiQXR0YWNoIEZpbGVzICh1cCB0byB7bWF4RmlsZVNpemV9TUIpXCJcbiAgICAgICAgICAgIHRhYmluZGV4PVwiMFwiPlxuICAgICAgICAgICAgPEF0dGFjaG1lbnRJY29uIGNsYXNzPVwiRm9vdGVySWNvblwiIC8+XG4gICAgICAgICAgICA8c3BhbiBjbGFzcz1cInNyLW9ubHlcIj5BdHRhY2ggRmlsZXM8L3NwYW4+XG4gICAgICAgICAgPC9sYWJlbD5cbiAgICAgICAgICB7I2lmIF90aGlzLnNob3dfbWF4X2ZpbGVfc2l6ZX1cbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJmaWxlLXNpemVcIj5cbiAgICAgICAgICAgICAgPHNwYW4+TWF4IGZpbGUgc2l6ZToge21heEZpbGVTaXplfU1CPC9zcGFuPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgey9pZn1cbiAgICAgICAgey9pZn1cblxuICAgICAgICA8Zm9ybSBhY3Rpb249XCJcIiBlbmN0eXBlPVwibXVsdGlwYXJ0L2Zvcm0tZGF0YVwiPlxuICAgICAgICAgIDxpbnB1dFxuICAgICAgICAgICAgaGlkZGVuXG4gICAgICAgICAgICB0eXBlPVwiZmlsZVwiXG4gICAgICAgICAgICBpZD1cImZpbGUtdXBsb2FkXCJcbiAgICAgICAgICAgIG9uOmNoYW5nZT17aGFuZGxlRmlsZXNDaGFuZ2V9IC8+XG4gICAgICAgIDwvZm9ybT5cbiAgICAgIDwvZm9vdGVyPlxuICAgICAgPCEtLSBEYXRlIFBpY2tlciBDb21wb25lbnQgLS0+XG4gICAgICB7I2lmIHNob3dEYXRlcGlja2VyfVxuICAgICAgICA8bnlsYXMtY29tcG9zZXItZGF0ZXBpY2tlci1tb2RhbCBjbG9zZT17ZGF0ZVBpY2tlckNsb3NlfSB7c2NoZWR1bGV9IC8+XG4gICAgICB7L2lmfVxuICAgICAgPCEtLSBEYXRlcGlja2VyIEFsZXJ0IChpZiBtZXNzYWdlIGlzIHNjaGVkdWxlZCkgLS0+XG4gICAgICB7I2lmIG1lc3NhZ2Uuc2VuZF9hdCAmJiAhc2VuZEVycm9yICYmICFzZW5kU3VjY2Vzc31cbiAgICAgICAgPG55bGFzLWNvbXBvc2VyLWFsZXJ0LWJhclxuICAgICAgICAgIHR5cGU9XCJpbmZvXCJcbiAgICAgICAgICBkaXNtaXNzaWJsZT17dHJ1ZX1cbiAgICAgICAgICBvbmRpc21pc3M9e3JlbW92ZVNjaGVkdWxlfT5cbiAgICAgICAgICBTZW5kIHNjaGVkdWxlZCBmb3JcbiAgICAgICAgICA8c3Bhbj57Zm9ybWF0RGF0ZShuZXcgRGF0ZShkYXRlcGlja2VyVGltZXN0YW1wKSl9PC9zcGFuPlxuICAgICAgICA8L255bGFzLWNvbXBvc2VyLWFsZXJ0LWJhcj5cbiAgICAgIHsvaWZ9XG4gICAgICA8IS0tIEFsZXJ0cyAtLT5cbiAgICAgIHsjaWYgc2VuZEVycm9yfVxuICAgICAgICA8bnlsYXMtY29tcG9zZXItYWxlcnQtYmFyIHR5cGU9XCJkYW5nZXJcIiBkaXNtaXNzaWJsZT17dHJ1ZX0+XG4gICAgICAgICAgRXJyb3I6IEZhaWxlZCB0byBzZW5kIHRoZSBtZXNzYWdlLlxuICAgICAgICA8L255bGFzLWNvbXBvc2VyLWFsZXJ0LWJhcj5cbiAgICAgIHsvaWZ9XG4gICAgICB7I2lmIHNlbmRTdWNjZXNzfVxuICAgICAgICA8bnlsYXMtY29tcG9zZXItYWxlcnQtYmFyIHR5cGU9XCJzdWNjZXNzXCIgZGlzbWlzc2libGU9e3RydWV9PlxuICAgICAgICAgIE1lc3NhZ2Ugc2VudCBzdWNjZXNzZnVsbHkhXG4gICAgICAgIDwvbnlsYXMtY29tcG9zZXItYWxlcnQtYmFyPlxuICAgICAgey9pZn1cbiAgICAgIHsjaWYgc2F2ZUVycm9yfVxuICAgICAgICA8bnlsYXMtY29tcG9zZXItYWxlcnQtYmFyIHR5cGU9XCJkYW5nZXJcIiBkaXNtaXNzaWJsZT17dHJ1ZX0+XG4gICAgICAgICAgRXJyb3I6IEZhaWxlZCB0byBzYXZlIHRoZSBkcmFmdC5cbiAgICAgICAgPC9ueWxhcy1jb21wb3Nlci1hbGVydC1iYXI+XG4gICAgICB7L2lmfVxuICAgICAgeyNpZiBzYXZlU3VjY2Vzc31cbiAgICAgICAgPG55bGFzLWNvbXBvc2VyLWFsZXJ0LWJhciB0eXBlPVwic3VjY2Vzc1wiIGRpc21pc3NpYmxlPXt0cnVlfT5cbiAgICAgICAgICBNZXNzYWdlIGRyYWZ0IHNhdmVkIHN1Y2Nlc3NmdWxseSFcbiAgICAgICAgPC9ueWxhcy1jb21wb3Nlci1hbGVydC1iYXI+XG4gICAgICB7L2lmfVxuICAgIHsvaWZ9XG4gIDwvZGl2Plxuey9pZn1cbiJdLCJuYW1lcyI6WyJCb2xkSWNvbiIsIkl0YWxpY0ljb24iLCJVbmRlcmxpbmVJY29uIiwiSnVzdGlmeUxlZnRJY29uIiwiSnVzdGlmeVJpZ2h0SWNvbiIsIkp1c3RpZnlDZW50ZXJJY29uIiwiSnVzdGlmeUljb24iLCJMaXN0SWNvbiIsIkJ1bGxldEljb24iLCJMaW5rSWNvbiIsInRoaXMiLCJpbml0aWFsaXplIiwiX19zcHJlYWRQcm9wcyIsIl9fc3ByZWFkVmFsdWVzIl0sIm1hcHBpbmdzIjoiK09BQWEsSUFBaUIsT0FBTyxlQUFlLE9BQU8sS0FDekQsT0FBTyxnQkFFVCxPQUFPLGVBQWUsT0FBUyxDQUFD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
