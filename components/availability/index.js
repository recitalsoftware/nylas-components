(function (Wn, ae) {
  typeof exports == "object" && typeof module != "undefined"
    ? (module.exports = ae())
    : typeof define == "function" && define.amd
    ? define(ae)
    : ((Wn = typeof globalThis != "undefined" ? globalThis : Wn || self),
      (Wn.app = ae()));
})(this, function () {
  "use strict";
  const Wn = window.customElements.define.bind(window.customElements);
  window.customElements.define = (e, ...t) => {
    if (!customElements.get(e)) return Wn(e, ...t);
  };
  function ae() {}
  function Ft(e, t) {
    for (const n in t) e[n] = t[n];
    return e;
  }
  function di(e) {
    return e();
  }
  function ca() {
    return Object.create(null);
  }
  function Lt(e) {
    e.forEach(di);
  }
  function Hn(e) {
    return typeof e == "function";
  }
  function vn(e, t) {
    return e != e
      ? t == t
      : e !== t || (e && typeof e == "object") || typeof e == "function";
  }
  let Tr;
  function da(e, t) {
    return (
      Tr || (Tr = document.createElement("a")), (Tr.href = t), e === Tr.href
    );
  }
  function Qs(e, t) {
    return e != e ? t == t : e !== t;
  }
  function ha(e) {
    return Object.keys(e).length === 0;
  }
  function ma(e, ...t) {
    if (e == null) return ae;
    const n = e.subscribe(...t);
    return n.unsubscribe ? () => n.unsubscribe() : n;
  }
  function Zn(e, t, n) {
    e.$$.on_destroy.push(ma(t, n));
  }
  function _n(e) {
    const t = {};
    for (const n in e) n[0] !== "$" && (t[n] = e[n]);
    return t;
  }
  function Xs(e) {
    return e && Hn(e.destroy) ? e.destroy : ae;
  }
  let Or = !1;
  function Ks() {
    Or = !0;
  }
  function $s() {
    Or = !1;
  }
  function eu(e, t, n, o) {
    for (; e < t; ) {
      const l = e + ((t - e) >> 1);
      n(l) <= o ? (e = l + 1) : (t = l);
    }
    return e;
  }
  function tu(e) {
    if (e.hydrate_init) return;
    e.hydrate_init = !0;
    let t = e.childNodes;
    if (e.nodeName === "HEAD") {
      const h = [];
      for (let y = 0; y < t.length; y++) {
        const p = t[y];
        p.claim_order !== void 0 && h.push(p);
      }
      t = h;
    }
    const n = new Int32Array(t.length + 1),
      o = new Int32Array(t.length);
    n[0] = -1;
    let l = 0;
    for (let h = 0; h < t.length; h++) {
      const y = t[h].claim_order,
        p =
          (l > 0 && t[n[l]].claim_order <= y
            ? l + 1
            : eu(1, l, (k) => t[n[k]].claim_order, y)) - 1;
      o[h] = n[p] + 1;
      const w = p + 1;
      (n[w] = h), (l = Math.max(w, l));
    }
    const c = [],
      d = [];
    let m = t.length - 1;
    for (let h = n[l] + 1; h != 0; h = o[h - 1]) {
      for (c.push(t[h - 1]); m >= h; m--) d.push(t[m]);
      m--;
    }
    for (; m >= 0; m--) d.push(t[m]);
    c.reverse(), d.sort((h, y) => h.claim_order - y.claim_order);
    for (let h = 0, y = 0; h < d.length; h++) {
      for (; y < c.length && d[h].claim_order >= c[y].claim_order; ) y++;
      const p = y < c.length ? c[y] : null;
      e.insertBefore(d[h], p);
    }
  }
  function j(e, t) {
    e.appendChild(t);
  }
  function hi(e, t) {
    if (Or) {
      for (
        tu(e),
          (e.actual_end_child === void 0 ||
            (e.actual_end_child !== null &&
              e.actual_end_child.parentElement !== e)) &&
            (e.actual_end_child = e.firstChild);
        e.actual_end_child !== null &&
        e.actual_end_child.claim_order === void 0;

      )
        e.actual_end_child = e.actual_end_child.nextSibling;
      t !== e.actual_end_child
        ? (t.claim_order !== void 0 || t.parentNode !== e) &&
          e.insertBefore(t, e.actual_end_child)
        : (e.actual_end_child = t.nextSibling);
    } else (t.parentNode !== e || t.nextSibling !== null) && e.appendChild(t);
  }
  function ie(e, t, n) {
    e.insertBefore(t, n || null);
  }
  function ga(e, t, n) {
    Or && !n
      ? hi(e, t)
      : (t.parentNode !== e || t.nextSibling != n) &&
        e.insertBefore(t, n || null);
  }
  function $(e) {
    e.parentNode.removeChild(e);
  }
  function Mr(e, t) {
    for (let n = 0; n < e.length; n += 1) e[n] && e[n].d(t);
  }
  function G(e) {
    return document.createElement(e);
  }
  function jn(e) {
    return document.createElementNS("http://www.w3.org/2000/svg", e);
  }
  function xe(e) {
    return document.createTextNode(e);
  }
  function we() {
    return xe(" ");
  }
  function mi() {
    return xe("");
  }
  function bt(e, t, n, o) {
    return e.addEventListener(t, n, o), () => e.removeEventListener(t, n, o);
  }
  function z(e, t, n) {
    n == null
      ? e.removeAttribute(t)
      : e.getAttribute(t) !== n && e.setAttribute(t, n);
  }
  function Dr(e, t) {
    for (const n in t) z(e, n, t[n]);
  }
  function ya(e, t, n) {
    t in e
      ? (e[t] = typeof e[t] == "boolean" && n === "" ? !0 : n)
      : z(e, t, n);
  }
  function Yn(e) {
    return Array.from(e.childNodes);
  }
  function nu(e) {
    e.claim_info === void 0 &&
      (e.claim_info = { last_index: 0, total_claimed: 0 });
  }
  function ru(e, t, n, o, l = !1) {
    nu(e);
    const c = (() => {
      for (let d = e.claim_info.last_index; d < e.length; d++) {
        const m = e[d];
        if (t(m)) {
          const h = n(m);
          return (
            h === void 0 ? e.splice(d, 1) : (e[d] = h),
            l || (e.claim_info.last_index = d),
            m
          );
        }
      }
      for (let d = e.claim_info.last_index - 1; d >= 0; d--) {
        const m = e[d];
        if (t(m)) {
          const h = n(m);
          return (
            h === void 0 ? e.splice(d, 1) : (e[d] = h),
            l
              ? h === void 0 && e.claim_info.last_index--
              : (e.claim_info.last_index = d),
            m
          );
        }
      }
      return o();
    })();
    return (
      (c.claim_order = e.claim_info.total_claimed),
      (e.claim_info.total_claimed += 1),
      c
    );
  }
  function iu(e, t, n, o) {
    return ru(
      e,
      (l) => l.nodeName === t,
      (l) => {
        const c = [];
        for (let d = 0; d < l.attributes.length; d++) {
          const m = l.attributes[d];
          n[m.name] || c.push(m.name);
        }
        c.forEach((d) => l.removeAttribute(d));
      },
      () => o(t),
    );
  }
  function xr(e, t, n) {
    return iu(e, t, n, jn);
  }
  function qe(e, t) {
    (t = "" + t), e.wholeText !== t && (e.data = t);
  }
  function ye(e, t, n, o) {
    n === null
      ? e.style.removeProperty(t)
      : e.style.setProperty(t, n, o ? "important" : "");
  }
  let Er;
  function au() {
    if (Er === void 0) {
      Er = !1;
      try {
        typeof window != "undefined" && window.parent && window.parent.document;
      } catch (e) {
        Er = !0;
      }
    }
    return Er;
  }
  function va(e, t) {
    getComputedStyle(e).position === "static" &&
      (e.style.position = "relative");
    const o = G("iframe");
    o.setAttribute(
      "style",
      "display: block; position: absolute; top: 0; left: 0; width: 100%; height: 100%; overflow: hidden; border: 0; opacity: 0; pointer-events: none; z-index: -1;",
    ),
      o.setAttribute("aria-hidden", "true"),
      (o.tabIndex = -1);
    const l = au();
    let c;
    return (
      l
        ? ((o.src =
            "data:text/html,<script>onresize=function(){parent.postMessage(0,'*')}</script>"),
          (c = bt(window, "message", (d) => {
            d.source === o.contentWindow && t();
          })))
        : ((o.src = "about:blank"),
          (o.onload = () => {
            c = bt(o.contentWindow, "resize", t);
          })),
      j(e, o),
      () => {
        (l || (c && o.contentWindow)) && c(), $(o);
      }
    );
  }
  function be(e, t, n) {
    e.classList[n ? "add" : "remove"](t);
  }
  function Nr(e) {
    const t = {};
    for (const n of e) t[n.name] = n.value;
    return t;
  }
  let qn;
  function Jn(e) {
    qn = e;
  }
  function gi() {
    if (!qn)
      throw new Error("Function called outside component initialization");
    return qn;
  }
  function ou(e) {
    gi().$$.before_update.push(e);
  }
  function su(e) {
    gi().$$.on_mount.push(e);
  }
  const Bn = [],
    pn = [],
    Ir = [],
    _a = [],
    pa = Promise.resolve();
  let yi = !1;
  function ba() {
    yi || ((yi = !0), pa.then(J));
  }
  function uu() {
    return ba(), pa;
  }
  function Gn(e) {
    Ir.push(e);
  }
  const vi = new Set();
  let Cr = 0;
  function J() {
    const e = qn;
    do {
      for (; Cr < Bn.length; ) {
        const t = Bn[Cr];
        Cr++, Jn(t), lu(t.$$);
      }
      for (Jn(null), Bn.length = 0, Cr = 0; pn.length; ) pn.pop()();
      for (let t = 0; t < Ir.length; t += 1) {
        const n = Ir[t];
        vi.has(n) || (vi.add(n), n());
      }
      Ir.length = 0;
    } while (Bn.length);
    for (; _a.length; ) _a.pop()();
    (yi = !1), vi.clear(), Jn(e);
  }
  function lu(e) {
    if (e.fragment !== null) {
      e.update(), Lt(e.before_update);
      const t = e.dirty;
      (e.dirty = [-1]),
        e.fragment && e.fragment.p(e.ctx, t),
        e.after_update.forEach(Gn);
    }
  }
  const Ar = new Set();
  let Yt;
  function Fr() {
    Yt = { r: 0, c: [], p: Yt };
  }
  function Lr() {
    Yt.r || Lt(Yt.c), (Yt = Yt.p);
  }
  function He(e, t) {
    e && e.i && (Ar.delete(e), e.i(t));
  }
  function ut(e, t, n, o) {
    if (e && e.o) {
      if (Ar.has(e)) return;
      Ar.add(e),
        Yt.c.push(() => {
          Ar.delete(e), o && (n && e.d(1), o());
        }),
        e.o(t);
    }
  }
  function wa(e, t) {
    e.d(1), t.delete(e.key);
  }
  function ka(e, t, n, o, l, c, d, m, h, y, p, w) {
    let k = e.length,
      N = c.length,
      T = k;
    const H = {};
    for (; T--; ) H[e[T].key] = T;
    const F = [],
      I = new Map(),
      R = new Map();
    for (T = N; T--; ) {
      const L = w(l, c, T),
        Z = n(L);
      let O = d.get(Z);
      O ? o && O.p(L, t) : ((O = y(Z, L)), O.c()),
        I.set(Z, (F[T] = O)),
        Z in H && R.set(Z, Math.abs(T - H[Z]));
    }
    const te = new Set(),
      ne = new Set();
    function me(L) {
      He(L, 1), L.m(m, p), d.set(L.key, L), (p = L.first), N--;
    }
    for (; k && N; ) {
      const L = F[N - 1],
        Z = e[k - 1],
        O = L.key,
        ue = Z.key;
      L === Z
        ? ((p = L.first), k--, N--)
        : I.has(ue)
        ? !d.has(O) || te.has(O)
          ? me(L)
          : ne.has(ue)
          ? k--
          : R.get(O) > R.get(ue)
          ? (ne.add(O), me(L))
          : (te.add(ue), k--)
        : (h(Z, d), k--);
    }
    for (; k--; ) {
      const L = e[k];
      I.has(L.key) || h(L, d);
    }
    for (; N; ) me(F[N - 1]);
    return F;
  }
  function Sa(e, t) {
    const n = {},
      o = {},
      l = { $$scope: 1 };
    let c = e.length;
    for (; c--; ) {
      const d = e[c],
        m = t[c];
      if (m) {
        for (const h in d) h in m || (o[h] = 1);
        for (const h in m) l[h] || ((n[h] = m[h]), (l[h] = 1));
        e[c] = m;
      } else for (const h in d) l[h] = 1;
    }
    for (const d in o) d in n || (n[d] = void 0);
    return n;
  }
  function Ta(e) {
    e && e.c();
  }
  function _i(e, t, n, o) {
    const { fragment: l, on_mount: c, on_destroy: d, after_update: m } = e.$$;
    l && l.m(t, n),
      o ||
        Gn(() => {
          const h = c.map(di).filter(Hn);
          d ? d.push(...h) : Lt(h), (e.$$.on_mount = []);
        }),
      m.forEach(Gn);
  }
  function Ur(e, t) {
    const n = e.$$;
    n.fragment !== null &&
      (Lt(n.on_destroy),
      n.fragment && n.fragment.d(t),
      (n.on_destroy = n.fragment = null),
      (n.ctx = []));
  }
  function fu(e, t) {
    e.$$.dirty[0] === -1 && (Bn.push(e), ba(), e.$$.dirty.fill(0)),
      (e.$$.dirty[(t / 31) | 0] |= 1 << t % 31);
  }
  function bn(e, t, n, o, l, c, d, m = [-1]) {
    const h = qn;
    Jn(e);
    const y = (e.$$ = {
      fragment: null,
      ctx: null,
      props: c,
      update: ae,
      not_equal: l,
      bound: ca(),
      on_mount: [],
      on_destroy: [],
      on_disconnect: [],
      before_update: [],
      after_update: [],
      context: new Map(t.context || (h ? h.$$.context : [])),
      callbacks: ca(),
      dirty: m,
      skip_bound: !1,
      root: t.target || h.$$.root,
    });
    d && d(y.root);
    let p = !1;
    if (
      ((y.ctx = n
        ? n(e, t.props || {}, (w, k, ...N) => {
            const T = N.length ? N[0] : k;
            return (
              y.ctx &&
                l(y.ctx[w], (y.ctx[w] = T)) &&
                (!y.skip_bound && y.bound[w] && y.bound[w](T), p && fu(e, w)),
              k
            );
          })
        : []),
      y.update(),
      (p = !0),
      Lt(y.before_update),
      (y.fragment = o ? o(y.ctx) : !1),
      t.target)
    ) {
      if (t.hydrate) {
        Ks();
        const w = Yn(t.target);
        y.fragment && y.fragment.l(w), w.forEach($);
      } else y.fragment && y.fragment.c();
      t.intro && He(e.$$.fragment),
        _i(e, t.target, t.anchor, t.customElement),
        $s(),
        J();
    }
    Jn(h);
  }
  let Qn;
  typeof HTMLElement == "function" &&
    (Qn = class extends HTMLElement {
      constructor() {
        super();
        this.attachShadow({ mode: "open" });
      }
      connectedCallback() {
        const { on_mount: e } = this.$$;
        this.$$.on_disconnect = e.map(di).filter(Hn);
        for (const t in this.$$.slotted) this.appendChild(this.$$.slotted[t]);
      }
      attributeChangedCallback(e, t, n) {
        this[e] = n;
      }
      disconnectedCallback() {
        Lt(this.$$.on_disconnect);
      }
      $destroy() {
        Ur(this, 1), (this.$destroy = ae);
      }
      $on(e, t) {
        const n = this.$$.callbacks[e] || (this.$$.callbacks[e] = []);
        return (
          n.push(t),
          () => {
            const o = n.indexOf(t);
            o !== -1 && n.splice(o, 1);
          }
        );
      }
      $set(e) {
        this.$$set &&
          !ha(e) &&
          ((this.$$.skip_bound = !0), this.$$set(e), (this.$$.skip_bound = !1));
      }
    });
  class Oa {
    $destroy() {
      Ur(this, 1), (this.$destroy = ae);
    }
    $on(t, n) {
      const o = this.$$.callbacks[t] || (this.$$.callbacks[t] = []);
      return (
        o.push(n),
        () => {
          const l = o.indexOf(n);
          l !== -1 && o.splice(l, 1);
        }
      );
    }
    $set(t) {
      this.$$set &&
        !ha(t) &&
        ((this.$$.skip_bound = !0), this.$$set(t), (this.$$.skip_bound = !1));
    }
  }
  function cu(e, t, n) {
    return (
      (n = {
        path: t,
        exports: {},
        require: function (o, l) {
          return du(o, l == null ? n.path : l);
        },
      }),
      e(n, n.exports),
      n.exports
    );
  }
  function du() {
    throw new Error(
      "Dynamic requires are not currently supported by @rollup/plugin-commonjs",
    );
  }
  var wn = cu(function (e, t) {
    Object.defineProperty(t, "__esModule", { value: !0 });
    function n(i, u) {
      for (var a = 0; a < u.length; a++) {
        var r = u[a];
        (r.enumerable = r.enumerable || !1),
          (r.configurable = !0),
          "value" in r && (r.writable = !0),
          Object.defineProperty(i, r.key, r);
      }
    }
    function o(i, u, a) {
      return u && n(i.prototype, u), a && n(i, a), i;
    }
    function l() {
      return (
        (l =
          Object.assign ||
          function (i) {
            for (var u = 1; u < arguments.length; u++) {
              var a = arguments[u];
              for (var r in a)
                Object.prototype.hasOwnProperty.call(a, r) && (i[r] = a[r]);
            }
            return i;
          }),
        l.apply(this, arguments)
      );
    }
    function c(i, u) {
      (i.prototype = Object.create(u.prototype)),
        (i.prototype.constructor = i),
        m(i, u);
    }
    function d(i) {
      return (
        (d = Object.setPrototypeOf
          ? Object.getPrototypeOf
          : function (a) {
              return a.__proto__ || Object.getPrototypeOf(a);
            }),
        d(i)
      );
    }
    function m(i, u) {
      return (
        (m =
          Object.setPrototypeOf ||
          function (r, s) {
            return (r.__proto__ = s), r;
          }),
        m(i, u)
      );
    }
    function h() {
      if (
        typeof Reflect == "undefined" ||
        !Reflect.construct ||
        Reflect.construct.sham
      )
        return !1;
      if (typeof Proxy == "function") return !0;
      try {
        return (
          Boolean.prototype.valueOf.call(
            Reflect.construct(Boolean, [], function () {}),
          ),
          !0
        );
      } catch (i) {
        return !1;
      }
    }
    function y(i, u, a) {
      return (
        h()
          ? (y = Reflect.construct)
          : (y = function (s, f, g) {
              var v = [null];
              v.push.apply(v, f);
              var b = Function.bind.apply(s, v),
                S = new b();
              return g && m(S, g.prototype), S;
            }),
        y.apply(null, arguments)
      );
    }
    function p(i) {
      return Function.toString.call(i).indexOf("[native code]") !== -1;
    }
    function w(i) {
      var u = typeof Map == "function" ? new Map() : void 0;
      return (
        (w = function (r) {
          if (r === null || !p(r)) return r;
          if (typeof r != "function")
            throw new TypeError(
              "Super expression must either be null or a function",
            );
          if (typeof u != "undefined") {
            if (u.has(r)) return u.get(r);
            u.set(r, s);
          }
          function s() {
            return y(r, arguments, d(this).constructor);
          }
          return (
            (s.prototype = Object.create(r.prototype, {
              constructor: {
                value: s,
                enumerable: !1,
                writable: !0,
                configurable: !0,
              },
            })),
            m(s, r)
          );
        }),
        w(i)
      );
    }
    function k(i, u) {
      if (i == null) return {};
      var a = {},
        r = Object.keys(i),
        s,
        f;
      for (f = 0; f < r.length; f++)
        (s = r[f]), !(u.indexOf(s) >= 0) && (a[s] = i[s]);
      return a;
    }
    function N(i, u) {
      if (!!i) {
        if (typeof i == "string") return T(i, u);
        var a = Object.prototype.toString.call(i).slice(8, -1);
        if (
          (a === "Object" && i.constructor && (a = i.constructor.name),
          a === "Map" || a === "Set")
        )
          return Array.from(i);
        if (
          a === "Arguments" ||
          /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)
        )
          return T(i, u);
      }
    }
    function T(i, u) {
      (u == null || u > i.length) && (u = i.length);
      for (var a = 0, r = new Array(u); a < u; a++) r[a] = i[a];
      return r;
    }
    function H(i, u) {
      var a =
        (typeof Symbol != "undefined" && i[Symbol.iterator]) || i["@@iterator"];
      if (a) return (a = a.call(i)).next.bind(a);
      if (
        Array.isArray(i) ||
        (a = N(i)) ||
        (u && i && typeof i.length == "number")
      ) {
        a && (i = a);
        var r = 0;
        return function () {
          return r >= i.length ? { done: !0 } : { done: !1, value: i[r++] };
        };
      }
      throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`);
    }
    var F = (function (i) {
        c(u, i);
        function u() {
          return i.apply(this, arguments) || this;
        }
        return u;
      })(w(Error)),
      I = (function (i) {
        c(u, i);
        function u(a) {
          return i.call(this, "Invalid DateTime: " + a.toMessage()) || this;
        }
        return u;
      })(F),
      R = (function (i) {
        c(u, i);
        function u(a) {
          return i.call(this, "Invalid Interval: " + a.toMessage()) || this;
        }
        return u;
      })(F),
      te = (function (i) {
        c(u, i);
        function u(a) {
          return i.call(this, "Invalid Duration: " + a.toMessage()) || this;
        }
        return u;
      })(F),
      ne = (function (i) {
        c(u, i);
        function u() {
          return i.apply(this, arguments) || this;
        }
        return u;
      })(F),
      me = (function (i) {
        c(u, i);
        function u(a) {
          return i.call(this, "Invalid unit " + a) || this;
        }
        return u;
      })(F),
      L = (function (i) {
        c(u, i);
        function u() {
          return i.apply(this, arguments) || this;
        }
        return u;
      })(F),
      Z = (function (i) {
        c(u, i);
        function u() {
          return i.call(this, "Zone is an abstract class") || this;
        }
        return u;
      })(F),
      O = "numeric",
      ue = "short",
      oe = "long",
      q = { year: O, month: O, day: O },
      ve = { year: O, month: ue, day: O },
      Se = { year: O, month: ue, day: O, weekday: ue },
      Fe = { year: O, month: oe, day: O },
      ke = { year: O, month: oe, day: O, weekday: oe },
      V = { hour: O, minute: O },
      K = { hour: O, minute: O, second: O },
      Ne = { hour: O, minute: O, second: O, timeZoneName: ue },
      Le = { hour: O, minute: O, second: O, timeZoneName: oe },
      Kt = { hour: O, minute: O, hourCycle: "h23" },
      $t = { hour: O, minute: O, second: O, hourCycle: "h23" },
      en = {
        hour: O,
        minute: O,
        second: O,
        hourCycle: "h23",
        timeZoneName: ue,
      },
      tn = {
        hour: O,
        minute: O,
        second: O,
        hourCycle: "h23",
        timeZoneName: oe,
      },
      nn = { year: O, month: O, day: O, hour: O, minute: O },
      rn = { year: O, month: O, day: O, hour: O, minute: O, second: O },
      an = { year: O, month: ue, day: O, hour: O, minute: O },
      on = { year: O, month: ue, day: O, hour: O, minute: O, second: O },
      Cn = { year: O, month: ue, day: O, weekday: ue, hour: O, minute: O },
      P = { year: O, month: oe, day: O, hour: O, minute: O, timeZoneName: ue },
      re = {
        year: O,
        month: oe,
        day: O,
        hour: O,
        minute: O,
        second: O,
        timeZoneName: ue,
      },
      se = {
        year: O,
        month: oe,
        day: O,
        weekday: oe,
        hour: O,
        minute: O,
        timeZoneName: oe,
      },
      x = {
        year: O,
        month: oe,
        day: O,
        weekday: oe,
        hour: O,
        minute: O,
        second: O,
        timeZoneName: oe,
      };
    function B(i) {
      return typeof i == "undefined";
    }
    function le(i) {
      return typeof i == "number";
    }
    function Me(i) {
      return typeof i == "number" && i % 1 == 0;
    }
    function Ce(i) {
      return typeof i == "string";
    }
    function Be(i) {
      return Object.prototype.toString.call(i) === "[object Date]";
    }
    function Pt() {
      try {
        return typeof Intl != "undefined" && !!Intl.RelativeTimeFormat;
      } catch (i) {
        return !1;
      }
    }
    function Yr(i) {
      return Array.isArray(i) ? i : [i];
    }
    function ur(i, u, a) {
      if (i.length !== 0)
        return i.reduce(function (r, s) {
          var f = [u(s), s];
          return r && a(r[0], f[0]) === r[0] ? r : f;
        }, null)[1];
    }
    function qr(i, u) {
      return u.reduce(function (a, r) {
        return (a[r] = i[r]), a;
      }, {});
    }
    function Mt(i, u) {
      return Object.prototype.hasOwnProperty.call(i, u);
    }
    function Ge(i, u, a) {
      return Me(i) && i >= u && i <= a;
    }
    function Jr(i, u) {
      return i - u * Math.floor(i / u);
    }
    function Te(i, u) {
      u === void 0 && (u = 2);
      var a = i < 0,
        r;
      return (
        a
          ? (r = "-" + ("" + -i).padStart(u, "0"))
          : (r = ("" + i).padStart(u, "0")),
        r
      );
    }
    function je(i) {
      if (!(B(i) || i === null || i === "")) return parseInt(i, 10);
    }
    function Dt(i) {
      if (!(B(i) || i === null || i === "")) return parseFloat(i);
    }
    function C(i) {
      if (!(B(i) || i === null || i === "")) {
        var u = parseFloat("0." + i) * 1e3;
        return Math.floor(u);
      }
    }
    function xt(i, u, a) {
      a === void 0 && (a = !1);
      var r = Math.pow(10, u),
        s = a ? Math.trunc : Math.round;
      return s(i * r) / r;
    }
    function Qe(i) {
      return i % 4 == 0 && (i % 100 != 0 || i % 400 == 0);
    }
    function nt(i) {
      return Qe(i) ? 366 : 365;
    }
    function Xe(i, u) {
      var a = Jr(u - 1, 12) + 1,
        r = i + (u - a) / 12;
      return a === 2
        ? Qe(r)
          ? 29
          : 28
        : [31, null, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31][a - 1];
    }
    function Et(i) {
      var u = Date.UTC(
        i.year,
        i.month - 1,
        i.day,
        i.hour,
        i.minute,
        i.second,
        i.millisecond,
      );
      return (
        i.year < 100 &&
          i.year >= 0 &&
          ((u = new Date(u)), u.setUTCFullYear(u.getUTCFullYear() - 1900)),
        +u
      );
    }
    function ht(i) {
      var u =
          (i + Math.floor(i / 4) - Math.floor(i / 100) + Math.floor(i / 400)) %
          7,
        a = i - 1,
        r =
          (a + Math.floor(a / 4) - Math.floor(a / 100) + Math.floor(a / 400)) %
          7;
      return u === 4 || r === 3 ? 53 : 52;
    }
    function An(i) {
      return i > 99 ? i : i > 60 ? 1900 + i : 2e3 + i;
    }
    function mt(i, u, a, r) {
      r === void 0 && (r = null);
      var s = new Date(i),
        f = {
          hourCycle: "h23",
          year: "numeric",
          month: "2-digit",
          day: "2-digit",
          hour: "2-digit",
          minute: "2-digit",
        };
      r && (f.timeZone = r);
      var g = l({ timeZoneName: u }, f),
        v = new Intl.DateTimeFormat(a, g).formatToParts(s).find(function (b) {
          return b.type.toLowerCase() === "timezonename";
        });
      return v ? v.value : null;
    }
    function We(i, u) {
      var a = parseInt(i, 10);
      Number.isNaN(a) && (a = 0);
      var r = parseInt(u, 10) || 0,
        s = a < 0 || Object.is(a, -0) ? -r : r;
      return a * 60 + s;
    }
    function Fn(i) {
      var u = Number(i);
      if (typeof i == "boolean" || i === "" || Number.isNaN(u))
        throw new L("Invalid unit value " + i);
      return u;
    }
    function Vt(i, u) {
      var a = {};
      for (var r in i)
        if (Mt(i, r)) {
          var s = i[r];
          if (s == null) continue;
          a[u(r)] = Fn(s);
        }
      return a;
    }
    function gt(i, u) {
      var a = Math.trunc(Math.abs(i / 60)),
        r = Math.trunc(Math.abs(i % 60)),
        s = i >= 0 ? "+" : "-";
      switch (u) {
        case "short":
          return "" + s + Te(a, 2) + ":" + Te(r, 2);
        case "narrow":
          return "" + s + a + (r > 0 ? ":" + r : "");
        case "techie":
          return "" + s + Te(a, 2) + Te(r, 2);
        default:
          throw new RangeError(
            "Value format " + u + " is out of range for property format",
          );
      }
    }
    function yt(i) {
      return qr(i, ["hour", "minute", "second", "millisecond"]);
    }
    var vt =
        /[A-Za-z_+-]{1,256}(:?\/[A-Za-z0-9_+-]{1,256}(\/[A-Za-z0-9_+-]{1,256})?)?/,
      _t = [
        "January",
        "February",
        "March",
        "April",
        "May",
        "June",
        "July",
        "August",
        "September",
        "October",
        "November",
        "December",
      ],
      Wt = [
        "Jan",
        "Feb",
        "Mar",
        "Apr",
        "May",
        "Jun",
        "Jul",
        "Aug",
        "Sep",
        "Oct",
        "Nov",
        "Dec",
      ],
      Br = ["J", "F", "M", "A", "M", "J", "J", "A", "S", "O", "N", "D"];
    function lr(i) {
      switch (i) {
        case "narrow":
          return [].concat(Br);
        case "short":
          return [].concat(Wt);
        case "long":
          return [].concat(_t);
        case "numeric":
          return [
            "1",
            "2",
            "3",
            "4",
            "5",
            "6",
            "7",
            "8",
            "9",
            "10",
            "11",
            "12",
          ];
        case "2-digit":
          return [
            "01",
            "02",
            "03",
            "04",
            "05",
            "06",
            "07",
            "08",
            "09",
            "10",
            "11",
            "12",
          ];
        default:
          return null;
      }
    }
    var fr = [
        "Monday",
        "Tuesday",
        "Wednesday",
        "Thursday",
        "Friday",
        "Saturday",
        "Sunday",
      ],
      cr = ["Mon", "Tue", "Wed", "Thu", "Fri", "Sat", "Sun"],
      Gr = ["M", "T", "W", "T", "F", "S", "S"];
    function Qr(i) {
      switch (i) {
        case "narrow":
          return [].concat(Gr);
        case "short":
          return [].concat(cr);
        case "long":
          return [].concat(fr);
        case "numeric":
          return ["1", "2", "3", "4", "5", "6", "7"];
        default:
          return null;
      }
    }
    var sn = ["AM", "PM"],
      Bi = ["Before Christ", "Anno Domini"],
      pe = ["BC", "AD"],
      dr = ["B", "A"];
    function rt(i) {
      switch (i) {
        case "narrow":
          return [].concat(dr);
        case "short":
          return [].concat(pe);
        case "long":
          return [].concat(Bi);
        default:
          return null;
      }
    }
    function hr(i) {
      return sn[i.hour < 12 ? 0 : 1];
    }
    function Ht(i, u) {
      return Qr(u)[i.weekday - 1];
    }
    function Nt(i, u) {
      return lr(u)[i.month - 1];
    }
    function Xr(i, u) {
      return rt(u)[i.year < 0 ? 0 : 1];
    }
    function un(i, u, a, r) {
      a === void 0 && (a = "always"), r === void 0 && (r = !1);
      var s = {
          years: ["year", "yr."],
          quarters: ["quarter", "qtr."],
          months: ["month", "mo."],
          weeks: ["week", "wk."],
          days: ["day", "day", "days"],
          hours: ["hour", "hr."],
          minutes: ["minute", "min."],
          seconds: ["second", "sec."],
        },
        f = ["hours", "minutes", "seconds"].indexOf(i) === -1;
      if (a === "auto" && f) {
        var g = i === "days";
        switch (u) {
          case 1:
            return g ? "tomorrow" : "next " + s[i][0];
          case -1:
            return g ? "yesterday" : "last " + s[i][0];
          case 0:
            return g ? "today" : "this " + s[i][0];
        }
      }
      var v = Object.is(u, -0) || u < 0,
        b = Math.abs(u),
        S = b === 1,
        A = s[i],
        D = r ? (S ? A[1] : A[2] || A[1]) : S ? s[i][0] : i;
      return v ? b + " " + D + " ago" : "in " + b + " " + D;
    }
    function ln(i, u) {
      for (var a = "", r = H(i), s; !(s = r()).done; ) {
        var f = s.value;
        f.literal ? (a += f.val) : (a += u(f.val));
      }
      return a;
    }
    var Kr = {
        D: q,
        DD: ve,
        DDD: Fe,
        DDDD: ke,
        t: V,
        tt: K,
        ttt: Ne,
        tttt: Le,
        T: Kt,
        TT: $t,
        TTT: en,
        TTTT: tn,
        f: nn,
        ff: an,
        fff: P,
        ffff: se,
        F: rn,
        FF: on,
        FFF: re,
        FFFF: x,
      },
      Ke = (function () {
        (i.create = function (r, s) {
          return s === void 0 && (s = {}), new i(r, s);
        }),
          (i.parseFormat = function (r) {
            for (
              var s = null, f = "", g = !1, v = [], b = 0;
              b < r.length;
              b++
            ) {
              var S = r.charAt(b);
              S === "'"
                ? (f.length > 0 && v.push({ literal: g, val: f }),
                  (s = null),
                  (f = ""),
                  (g = !g))
                : g || S === s
                ? (f += S)
                : (f.length > 0 && v.push({ literal: !1, val: f }),
                  (f = S),
                  (s = S));
            }
            return f.length > 0 && v.push({ literal: g, val: f }), v;
          }),
          (i.macroTokenToFormatOpts = function (r) {
            return Kr[r];
          });
        function i(a, r) {
          (this.opts = r), (this.loc = a), (this.systemLoc = null);
        }
        var u = i.prototype;
        return (
          (u.formatWithSystemDefault = function (r, s) {
            this.systemLoc === null &&
              (this.systemLoc = this.loc.redefaultToSystem());
            var f = this.systemLoc.dtFormatter(r, l({}, this.opts, s));
            return f.format();
          }),
          (u.formatDateTime = function (r, s) {
            s === void 0 && (s = {});
            var f = this.loc.dtFormatter(r, l({}, this.opts, s));
            return f.format();
          }),
          (u.formatDateTimeParts = function (r, s) {
            s === void 0 && (s = {});
            var f = this.loc.dtFormatter(r, l({}, this.opts, s));
            return f.formatToParts();
          }),
          (u.resolvedOptions = function (r, s) {
            s === void 0 && (s = {});
            var f = this.loc.dtFormatter(r, l({}, this.opts, s));
            return f.resolvedOptions();
          }),
          (u.num = function (r, s) {
            if ((s === void 0 && (s = 0), this.opts.forceSimple))
              return Te(r, s);
            var f = l({}, this.opts);
            return (
              s > 0 && (f.padTo = s), this.loc.numberFormatter(f).format(r)
            );
          }),
          (u.formatDateTimeFromString = function (r, s) {
            var f = this,
              g = this.loc.listingMode() === "en",
              v =
                this.loc.outputCalendar &&
                this.loc.outputCalendar !== "gregory",
              b = function (Q, Re) {
                return f.loc.extract(r, Q, Re);
              },
              S = function (Q) {
                return r.isOffsetFixed && r.offset === 0 && Q.allowZ
                  ? "Z"
                  : r.isValid
                  ? r.zone.formatOffset(r.ts, Q.format)
                  : "";
              },
              A = function () {
                return g
                  ? hr(r)
                  : b({ hour: "numeric", hourCycle: "h12" }, "dayperiod");
              },
              D = function (Q, Re) {
                return g
                  ? Nt(r, Q)
                  : b(
                      Re ? { month: Q } : { month: Q, day: "numeric" },
                      "month",
                    );
              },
              E = function (Q, Re) {
                return g
                  ? Ht(r, Q)
                  : b(
                      Re
                        ? { weekday: Q }
                        : { weekday: Q, month: "long", day: "numeric" },
                      "weekday",
                    );
              },
              W = function (Q) {
                var Re = i.macroTokenToFormatOpts(Q);
                return Re ? f.formatWithSystemDefault(r, Re) : Q;
              },
              X = function (Q) {
                return g ? Xr(r, Q) : b({ era: Q }, "era");
              },
              de = function (Q) {
                switch (Q) {
                  case "S":
                    return f.num(r.millisecond);
                  case "u":
                  case "SSS":
                    return f.num(r.millisecond, 3);
                  case "s":
                    return f.num(r.second);
                  case "ss":
                    return f.num(r.second, 2);
                  case "uu":
                    return f.num(Math.floor(r.millisecond / 10), 2);
                  case "uuu":
                    return f.num(Math.floor(r.millisecond / 100));
                  case "m":
                    return f.num(r.minute);
                  case "mm":
                    return f.num(r.minute, 2);
                  case "h":
                    return f.num(r.hour % 12 == 0 ? 12 : r.hour % 12);
                  case "hh":
                    return f.num(r.hour % 12 == 0 ? 12 : r.hour % 12, 2);
                  case "H":
                    return f.num(r.hour);
                  case "HH":
                    return f.num(r.hour, 2);
                  case "Z":
                    return S({ format: "narrow", allowZ: f.opts.allowZ });
                  case "ZZ":
                    return S({ format: "short", allowZ: f.opts.allowZ });
                  case "ZZZ":
                    return S({ format: "techie", allowZ: f.opts.allowZ });
                  case "ZZZZ":
                    return r.zone.offsetName(r.ts, {
                      format: "short",
                      locale: f.loc.locale,
                    });
                  case "ZZZZZ":
                    return r.zone.offsetName(r.ts, {
                      format: "long",
                      locale: f.loc.locale,
                    });
                  case "z":
                    return r.zoneName;
                  case "a":
                    return A();
                  case "d":
                    return v ? b({ day: "numeric" }, "day") : f.num(r.day);
                  case "dd":
                    return v ? b({ day: "2-digit" }, "day") : f.num(r.day, 2);
                  case "c":
                    return f.num(r.weekday);
                  case "ccc":
                    return E("short", !0);
                  case "cccc":
                    return E("long", !0);
                  case "ccccc":
                    return E("narrow", !0);
                  case "E":
                    return f.num(r.weekday);
                  case "EEE":
                    return E("short", !1);
                  case "EEEE":
                    return E("long", !1);
                  case "EEEEE":
                    return E("narrow", !1);
                  case "L":
                    return v
                      ? b({ month: "numeric", day: "numeric" }, "month")
                      : f.num(r.month);
                  case "LL":
                    return v
                      ? b({ month: "2-digit", day: "numeric" }, "month")
                      : f.num(r.month, 2);
                  case "LLL":
                    return D("short", !0);
                  case "LLLL":
                    return D("long", !0);
                  case "LLLLL":
                    return D("narrow", !0);
                  case "M":
                    return v
                      ? b({ month: "numeric" }, "month")
                      : f.num(r.month);
                  case "MM":
                    return v
                      ? b({ month: "2-digit" }, "month")
                      : f.num(r.month, 2);
                  case "MMM":
                    return D("short", !1);
                  case "MMMM":
                    return D("long", !1);
                  case "MMMMM":
                    return D("narrow", !1);
                  case "y":
                    return v ? b({ year: "numeric" }, "year") : f.num(r.year);
                  case "yy":
                    return v
                      ? b({ year: "2-digit" }, "year")
                      : f.num(r.year.toString().slice(-2), 2);
                  case "yyyy":
                    return v
                      ? b({ year: "numeric" }, "year")
                      : f.num(r.year, 4);
                  case "yyyyyy":
                    return v
                      ? b({ year: "numeric" }, "year")
                      : f.num(r.year, 6);
                  case "G":
                    return X("short");
                  case "GG":
                    return X("long");
                  case "GGGGG":
                    return X("narrow");
                  case "kk":
                    return f.num(r.weekYear.toString().slice(-2), 2);
                  case "kkkk":
                    return f.num(r.weekYear, 4);
                  case "W":
                    return f.num(r.weekNumber);
                  case "WW":
                    return f.num(r.weekNumber, 2);
                  case "o":
                    return f.num(r.ordinal);
                  case "ooo":
                    return f.num(r.ordinal, 3);
                  case "q":
                    return f.num(r.quarter);
                  case "qq":
                    return f.num(r.quarter, 2);
                  case "X":
                    return f.num(Math.floor(r.ts / 1e3));
                  case "x":
                    return f.num(r.ts);
                  default:
                    return W(Q);
                }
              };
            return ln(i.parseFormat(s), de);
          }),
          (u.formatDurationFromString = function (r, s) {
            var f = this,
              g = function (E) {
                switch (E[0]) {
                  case "S":
                    return "millisecond";
                  case "s":
                    return "second";
                  case "m":
                    return "minute";
                  case "h":
                    return "hour";
                  case "d":
                    return "day";
                  case "M":
                    return "month";
                  case "y":
                    return "year";
                  default:
                    return null;
                }
              },
              v = function (E) {
                return function (W) {
                  var X = g(W);
                  return X ? f.num(E.get(X), W.length) : W;
                };
              },
              b = i.parseFormat(s),
              S = b.reduce(function (D, E) {
                var W = E.literal,
                  X = E.val;
                return W ? D : D.concat(X);
              }, []),
              A = r.shiftTo.apply(
                r,
                S.map(g).filter(function (D) {
                  return D;
                }),
              );
            return ln(b, v(A));
          }),
          i
        );
      })(),
      Ye = (function () {
        function i(a, r) {
          (this.reason = a), (this.explanation = r);
        }
        var u = i.prototype;
        return (
          (u.toMessage = function () {
            return this.explanation
              ? this.reason + ": " + this.explanation
              : this.reason;
          }),
          i
        );
      })(),
      Zt = (function () {
        function i() {}
        var u = i.prototype;
        return (
          (u.offsetName = function (r, s) {
            throw new Z();
          }),
          (u.formatOffset = function (r, s) {
            throw new Z();
          }),
          (u.offset = function (r) {
            throw new Z();
          }),
          (u.equals = function (r) {
            throw new Z();
          }),
          o(i, [
            {
              key: "type",
              get: function () {
                throw new Z();
              },
            },
            {
              key: "name",
              get: function () {
                throw new Z();
              },
            },
            {
              key: "isUniversal",
              get: function () {
                throw new Z();
              },
            },
            {
              key: "isValid",
              get: function () {
                throw new Z();
              },
            },
          ]),
          i
        );
      })(),
      mr = null,
      fn = (function (i) {
        c(u, i);
        function u() {
          return i.apply(this, arguments) || this;
        }
        var a = u.prototype;
        return (
          (a.offsetName = function (s, f) {
            var g = f.format,
              v = f.locale;
            return mt(s, g, v);
          }),
          (a.formatOffset = function (s, f) {
            return gt(this.offset(s), f);
          }),
          (a.offset = function (s) {
            return -new Date(s).getTimezoneOffset();
          }),
          (a.equals = function (s) {
            return s.type === "system";
          }),
          o(
            u,
            [
              {
                key: "type",
                get: function () {
                  return "system";
                },
              },
              {
                key: "name",
                get: function () {
                  return new Intl.DateTimeFormat().resolvedOptions().timeZone;
                },
              },
              {
                key: "isUniversal",
                get: function () {
                  return !1;
                },
              },
              {
                key: "isValid",
                get: function () {
                  return !0;
                },
              },
            ],
            [
              {
                key: "instance",
                get: function () {
                  return mr === null && (mr = new u()), mr;
                },
              },
            ],
          ),
          u
        );
      })(Zt),
      $r = RegExp("^" + vt.source + "$"),
      cn = {};
    function ei(i) {
      return (
        cn[i] ||
          (cn[i] = new Intl.DateTimeFormat("en-US", {
            hour12: !1,
            timeZone: i,
            year: "numeric",
            month: "2-digit",
            day: "2-digit",
            hour: "2-digit",
            minute: "2-digit",
            second: "2-digit",
          })),
        cn[i]
      );
    }
    var Gi = { year: 0, month: 1, day: 2, hour: 3, minute: 4, second: 5 };
    function It(i, u) {
      var a = i.format(u).replace(/\u200E/g, ""),
        r = /(\d+)\/(\d+)\/(\d+),? (\d+):(\d+):(\d+)/.exec(a),
        s = r[1],
        f = r[2],
        g = r[3],
        v = r[4],
        b = r[5],
        S = r[6];
      return [g, s, f, v, b, S];
    }
    function dn(i, u) {
      for (var a = i.formatToParts(u), r = [], s = 0; s < a.length; s++) {
        var f = a[s],
          g = f.type,
          v = f.value,
          b = Gi[g];
        B(b) || (r[b] = parseInt(v, 10));
      }
      return r;
    }
    var Ln = {},
      it = (function (i) {
        c(u, i),
          (u.create = function (s) {
            return Ln[s] || (Ln[s] = new u(s)), Ln[s];
          }),
          (u.resetCache = function () {
            (Ln = {}), (cn = {});
          }),
          (u.isValidSpecifier = function (s) {
            return !!(s && s.match($r));
          }),
          (u.isValidZone = function (s) {
            if (!s) return !1;
            try {
              return (
                new Intl.DateTimeFormat("en-US", { timeZone: s }).format(), !0
              );
            } catch (f) {
              return !1;
            }
          });
        function u(r) {
          var s;
          return (
            (s = i.call(this) || this),
            (s.zoneName = r),
            (s.valid = u.isValidZone(r)),
            s
          );
        }
        var a = u.prototype;
        return (
          (a.offsetName = function (s, f) {
            var g = f.format,
              v = f.locale;
            return mt(s, g, v, this.name);
          }),
          (a.formatOffset = function (s, f) {
            return gt(this.offset(s), f);
          }),
          (a.offset = function (s) {
            var f = new Date(s);
            if (isNaN(f)) return NaN;
            var g = ei(this.name),
              v = g.formatToParts ? dn(g, f) : It(g, f),
              b = v[0],
              S = v[1],
              A = v[2],
              D = v[3],
              E = v[4],
              W = v[5],
              X = D === 24 ? 0 : D,
              de = Et({
                year: b,
                month: S,
                day: A,
                hour: X,
                minute: E,
                second: W,
                millisecond: 0,
              }),
              ce = +f,
              Q = ce % 1e3;
            return (ce -= Q >= 0 ? Q : 1e3 + Q), (de - ce) / (60 * 1e3);
          }),
          (a.equals = function (s) {
            return s.type === "iana" && s.name === this.name;
          }),
          o(u, [
            {
              key: "type",
              get: function () {
                return "iana";
              },
            },
            {
              key: "name",
              get: function () {
                return this.zoneName;
              },
            },
            {
              key: "isUniversal",
              get: function () {
                return !1;
              },
            },
            {
              key: "isValid",
              get: function () {
                return this.valid;
              },
            },
          ]),
          u
        );
      })(Zt),
      gr = null,
      Pe = (function (i) {
        c(u, i),
          (u.instance = function (s) {
            return s === 0 ? u.utcInstance : new u(s);
          }),
          (u.parseSpecifier = function (s) {
            if (s) {
              var f = s.match(/^utc(?:([+-]\d{1,2})(?::(\d{2}))?)?$/i);
              if (f) return new u(We(f[1], f[2]));
            }
            return null;
          });
        function u(r) {
          var s;
          return (s = i.call(this) || this), (s.fixed = r), s;
        }
        var a = u.prototype;
        return (
          (a.offsetName = function () {
            return this.name;
          }),
          (a.formatOffset = function (s, f) {
            return gt(this.fixed, f);
          }),
          (a.offset = function () {
            return this.fixed;
          }),
          (a.equals = function (s) {
            return s.type === "fixed" && s.fixed === this.fixed;
          }),
          o(
            u,
            [
              {
                key: "type",
                get: function () {
                  return "fixed";
                },
              },
              {
                key: "name",
                get: function () {
                  return this.fixed === 0
                    ? "UTC"
                    : "UTC" + gt(this.fixed, "narrow");
                },
              },
              {
                key: "isUniversal",
                get: function () {
                  return !0;
                },
              },
              {
                key: "isValid",
                get: function () {
                  return !0;
                },
              },
            ],
            [
              {
                key: "utcInstance",
                get: function () {
                  return gr === null && (gr = new u(0)), gr;
                },
              },
            ],
          ),
          u
        );
      })(Zt),
      Ct = (function (i) {
        c(u, i);
        function u(r) {
          var s;
          return (s = i.call(this) || this), (s.zoneName = r), s;
        }
        var a = u.prototype;
        return (
          (a.offsetName = function () {
            return null;
          }),
          (a.formatOffset = function () {
            return "";
          }),
          (a.offset = function () {
            return NaN;
          }),
          (a.equals = function () {
            return !1;
          }),
          o(u, [
            {
              key: "type",
              get: function () {
                return "invalid";
              },
            },
            {
              key: "name",
              get: function () {
                return this.zoneName;
              },
            },
            {
              key: "isUniversal",
              get: function () {
                return !1;
              },
            },
            {
              key: "isValid",
              get: function () {
                return !1;
              },
            },
          ]),
          u
        );
      })(Zt);
    function pt(i, u) {
      if (B(i) || i === null) return u;
      if (i instanceof Zt) return i;
      if (Ce(i)) {
        var a = i.toLowerCase();
        return a === "local" || a === "system"
          ? u
          : a === "utc" || a === "gmt"
          ? Pe.utcInstance
          : it.isValidSpecifier(a)
          ? it.create(i)
          : Pe.parseSpecifier(a) || new Ct(i);
      } else return le(i) ? Pe.instance(i) : typeof i == "object" && i.offset && typeof i.offset == "number" ? i : new Ct(i);
    }
    var ti = function () {
        return Date.now();
      },
      ni = "system",
      ri = null,
      ii = null,
      ai = null,
      oi,
      Oe = (function () {
        function i() {}
        return (
          (i.resetCaches = function () {
            Ae.resetCache(), it.resetCache();
          }),
          o(i, null, [
            {
              key: "now",
              get: function () {
                return ti;
              },
              set: function (a) {
                ti = a;
              },
            },
            {
              key: "defaultZone",
              get: function () {
                return pt(ni, fn.instance);
              },
              set: function (a) {
                ni = a;
              },
            },
            {
              key: "defaultLocale",
              get: function () {
                return ri;
              },
              set: function (a) {
                ri = a;
              },
            },
            {
              key: "defaultNumberingSystem",
              get: function () {
                return ii;
              },
              set: function (a) {
                ii = a;
              },
            },
            {
              key: "defaultOutputCalendar",
              get: function () {
                return ai;
              },
              set: function (a) {
                ai = a;
              },
            },
            {
              key: "throwOnInvalid",
              get: function () {
                return oi;
              },
              set: function (a) {
                oi = a;
              },
            },
          ]),
          i
        );
      })(),
      Qi = ["base"],
      Xi = ["padTo", "floor"],
      _ = {};
    function M(i, u) {
      u === void 0 && (u = {});
      var a = JSON.stringify([i, u]),
        r = _[a];
      return r || ((r = new Intl.ListFormat(i, u)), (_[a] = r)), r;
    }
    var Y = {};
    function U(i, u) {
      u === void 0 && (u = {});
      var a = JSON.stringify([i, u]),
        r = Y[a];
      return r || ((r = new Intl.DateTimeFormat(i, u)), (Y[a] = r)), r;
    }
    var ee = {};
    function _e(i, u) {
      u === void 0 && (u = {});
      var a = JSON.stringify([i, u]),
        r = ee[a];
      return r || ((r = new Intl.NumberFormat(i, u)), (ee[a] = r)), r;
    }
    var Ue = {};
    function jt(i, u) {
      u === void 0 && (u = {});
      var a = u;
      a.base;
      var r = k(a, Qi),
        s = JSON.stringify([i, r]),
        f = Ue[s];
      return f || ((f = new Intl.RelativeTimeFormat(i, u)), (Ue[s] = f)), f;
    }
    var $e = null;
    function at() {
      return (
        $e || (($e = new Intl.DateTimeFormat().resolvedOptions().locale), $e)
      );
    }
    function At(i) {
      var u = i.indexOf("-u-");
      if (u === -1) return [i];
      var a,
        r = i.substring(0, u);
      try {
        a = U(i).resolvedOptions();
      } catch (v) {
        a = U(r).resolvedOptions();
      }
      var s = a,
        f = s.numberingSystem,
        g = s.calendar;
      return [r, f, g];
    }
    function yr(i, u, a) {
      return (
        (a || u) &&
          ((i += "-u"), a && (i += "-ca-" + a), u && (i += "-nu-" + u)),
        i
      );
    }
    function Pc(i) {
      for (var u = [], a = 1; a <= 12; a++) {
        var r = De.utc(2016, a, 1);
        u.push(i(r));
      }
      return u;
    }
    function Vc(i) {
      for (var u = [], a = 1; a <= 7; a++) {
        var r = De.utc(2016, 11, 13 + a);
        u.push(i(r));
      }
      return u;
    }
    function si(i, u, a, r, s) {
      var f = i.listingMode(a);
      return f === "error" ? null : f === "en" ? r(u) : s(u);
    }
    function Wc(i) {
      return i.numberingSystem && i.numberingSystem !== "latn"
        ? !1
        : i.numberingSystem === "latn" ||
            !i.locale ||
            i.locale.startsWith("en") ||
            new Intl.DateTimeFormat(i.intl).resolvedOptions()
              .numberingSystem === "latn";
    }
    var Hc = (function () {
        function i(a, r, s) {
          (this.padTo = s.padTo || 0),
            (this.floor = s.floor || !1),
            s.padTo,
            s.floor;
          var f = k(s, Xi);
          if (!r || Object.keys(f).length > 0) {
            var g = l({ useGrouping: !1 }, s);
            s.padTo > 0 && (g.minimumIntegerDigits = s.padTo),
              (this.inf = _e(a, g));
          }
        }
        var u = i.prototype;
        return (
          (u.format = function (r) {
            if (this.inf) {
              var s = this.floor ? Math.floor(r) : r;
              return this.inf.format(s);
            } else {
              var f = this.floor ? Math.floor(r) : xt(r, 3);
              return Te(f, this.padTo);
            }
          }),
          i
        );
      })(),
      Zc = (function () {
        function i(a, r, s) {
          this.opts = s;
          var f;
          if (a.zone.isUniversal) {
            var g = -1 * (a.offset / 60),
              v = g >= 0 ? "Etc/GMT+" + g : "Etc/GMT" + g;
            a.offset !== 0 && it.create(v).valid
              ? ((f = v), (this.dt = a))
              : ((f = "UTC"),
                s.timeZoneName
                  ? (this.dt = a)
                  : (this.dt =
                      a.offset === 0
                        ? a
                        : De.fromMillis(a.ts + a.offset * 60 * 1e3)));
          } else
            a.zone.type === "system"
              ? (this.dt = a)
              : ((this.dt = a), (f = a.zone.name));
          var b = l({}, this.opts);
          f && (b.timeZone = f), (this.dtf = U(r, b));
        }
        var u = i.prototype;
        return (
          (u.format = function () {
            return this.dtf.format(this.dt.toJSDate());
          }),
          (u.formatToParts = function () {
            return this.dtf.formatToParts(this.dt.toJSDate());
          }),
          (u.resolvedOptions = function () {
            return this.dtf.resolvedOptions();
          }),
          i
        );
      })(),
      jc = (function () {
        function i(a, r, s) {
          (this.opts = l({ style: "long" }, s)),
            !r && Pt() && (this.rtf = jt(a, s));
        }
        var u = i.prototype;
        return (
          (u.format = function (r, s) {
            return this.rtf
              ? this.rtf.format(r, s)
              : un(s, r, this.opts.numeric, this.opts.style !== "long");
          }),
          (u.formatToParts = function (r, s) {
            return this.rtf ? this.rtf.formatToParts(r, s) : [];
          }),
          i
        );
      })(),
      Ae = (function () {
        (i.fromOpts = function (r) {
          return i.create(
            r.locale,
            r.numberingSystem,
            r.outputCalendar,
            r.defaultToEN,
          );
        }),
          (i.create = function (r, s, f, g) {
            g === void 0 && (g = !1);
            var v = r || Oe.defaultLocale,
              b = v || (g ? "en-US" : at()),
              S = s || Oe.defaultNumberingSystem,
              A = f || Oe.defaultOutputCalendar;
            return new i(b, S, A, v);
          }),
          (i.resetCache = function () {
            ($e = null), (Y = {}), (ee = {}), (Ue = {});
          }),
          (i.fromObject = function (r) {
            var s = r === void 0 ? {} : r,
              f = s.locale,
              g = s.numberingSystem,
              v = s.outputCalendar;
            return i.create(f, g, v);
          });
        function i(a, r, s, f) {
          var g = At(a),
            v = g[0],
            b = g[1],
            S = g[2];
          (this.locale = v),
            (this.numberingSystem = r || b || null),
            (this.outputCalendar = s || S || null),
            (this.intl = yr(
              this.locale,
              this.numberingSystem,
              this.outputCalendar,
            )),
            (this.weekdaysCache = { format: {}, standalone: {} }),
            (this.monthsCache = { format: {}, standalone: {} }),
            (this.meridiemCache = null),
            (this.eraCache = {}),
            (this.specifiedLocale = f),
            (this.fastNumbersCached = null);
        }
        var u = i.prototype;
        return (
          (u.listingMode = function () {
            var r = this.isEnglish(),
              s =
                (this.numberingSystem === null ||
                  this.numberingSystem === "latn") &&
                (this.outputCalendar === null ||
                  this.outputCalendar === "gregory");
            return r && s ? "en" : "intl";
          }),
          (u.clone = function (r) {
            return !r || Object.getOwnPropertyNames(r).length === 0
              ? this
              : i.create(
                  r.locale || this.specifiedLocale,
                  r.numberingSystem || this.numberingSystem,
                  r.outputCalendar || this.outputCalendar,
                  r.defaultToEN || !1,
                );
          }),
          (u.redefaultToEN = function (r) {
            return (
              r === void 0 && (r = {}),
              this.clone(l({}, r, { defaultToEN: !0 }))
            );
          }),
          (u.redefaultToSystem = function (r) {
            return (
              r === void 0 && (r = {}),
              this.clone(l({}, r, { defaultToEN: !1 }))
            );
          }),
          (u.months = function (r, s, f) {
            var g = this;
            return (
              s === void 0 && (s = !1),
              f === void 0 && (f = !0),
              si(this, r, f, lr, function () {
                var v = s ? { month: r, day: "numeric" } : { month: r },
                  b = s ? "format" : "standalone";
                return (
                  g.monthsCache[b][r] ||
                    (g.monthsCache[b][r] = Pc(function (S) {
                      return g.extract(S, v, "month");
                    })),
                  g.monthsCache[b][r]
                );
              })
            );
          }),
          (u.weekdays = function (r, s, f) {
            var g = this;
            return (
              s === void 0 && (s = !1),
              f === void 0 && (f = !0),
              si(this, r, f, Qr, function () {
                var v = s
                    ? {
                        weekday: r,
                        year: "numeric",
                        month: "long",
                        day: "numeric",
                      }
                    : { weekday: r },
                  b = s ? "format" : "standalone";
                return (
                  g.weekdaysCache[b][r] ||
                    (g.weekdaysCache[b][r] = Vc(function (S) {
                      return g.extract(S, v, "weekday");
                    })),
                  g.weekdaysCache[b][r]
                );
              })
            );
          }),
          (u.meridiems = function (r) {
            var s = this;
            return (
              r === void 0 && (r = !0),
              si(
                this,
                void 0,
                r,
                function () {
                  return sn;
                },
                function () {
                  if (!s.meridiemCache) {
                    var f = { hour: "numeric", hourCycle: "h12" };
                    s.meridiemCache = [
                      De.utc(2016, 11, 13, 9),
                      De.utc(2016, 11, 13, 19),
                    ].map(function (g) {
                      return s.extract(g, f, "dayperiod");
                    });
                  }
                  return s.meridiemCache;
                },
              )
            );
          }),
          (u.eras = function (r, s) {
            var f = this;
            return (
              s === void 0 && (s = !0),
              si(this, r, s, rt, function () {
                var g = { era: r };
                return (
                  f.eraCache[r] ||
                    (f.eraCache[r] = [
                      De.utc(-40, 1, 1),
                      De.utc(2017, 1, 1),
                    ].map(function (v) {
                      return f.extract(v, g, "era");
                    })),
                  f.eraCache[r]
                );
              })
            );
          }),
          (u.extract = function (r, s, f) {
            var g = this.dtFormatter(r, s),
              v = g.formatToParts(),
              b = v.find(function (S) {
                return S.type.toLowerCase() === f;
              });
            return b ? b.value : null;
          }),
          (u.numberFormatter = function (r) {
            return (
              r === void 0 && (r = {}),
              new Hc(this.intl, r.forceSimple || this.fastNumbers, r)
            );
          }),
          (u.dtFormatter = function (r, s) {
            return s === void 0 && (s = {}), new Zc(r, this.intl, s);
          }),
          (u.relFormatter = function (r) {
            return (
              r === void 0 && (r = {}), new jc(this.intl, this.isEnglish(), r)
            );
          }),
          (u.listFormatter = function (r) {
            return r === void 0 && (r = {}), M(this.intl, r);
          }),
          (u.isEnglish = function () {
            return (
              this.locale === "en" ||
              this.locale.toLowerCase() === "en-us" ||
              new Intl.DateTimeFormat(this.intl)
                .resolvedOptions()
                .locale.startsWith("en-us")
            );
          }),
          (u.equals = function (r) {
            return (
              this.locale === r.locale &&
              this.numberingSystem === r.numberingSystem &&
              this.outputCalendar === r.outputCalendar
            );
          }),
          o(i, [
            {
              key: "fastNumbers",
              get: function () {
                return (
                  this.fastNumbersCached == null &&
                    (this.fastNumbersCached = Wc(this)),
                  this.fastNumbersCached
                );
              },
            },
          ]),
          i
        );
      })();
    function Un() {
      for (var i = arguments.length, u = new Array(i), a = 0; a < i; a++)
        u[a] = arguments[a];
      var r = u.reduce(function (s, f) {
        return s + f.source;
      }, "");
      return RegExp("^" + r + "$");
    }
    function hn() {
      for (var i = arguments.length, u = new Array(i), a = 0; a < i; a++)
        u[a] = arguments[a];
      return function (r) {
        return u
          .reduce(
            function (s, f) {
              var g = s[0],
                v = s[1],
                b = s[2],
                S = f(r, b),
                A = S[0],
                D = S[1],
                E = S[2];
              return [l({}, g, A), v || D, E];
            },
            [{}, null, 1],
          )
          .slice(0, 2);
      };
    }
    function zn(i) {
      if (i == null) return [null, null];
      for (
        var u = arguments.length, a = new Array(u > 1 ? u - 1 : 0), r = 1;
        r < u;
        r++
      )
        a[r - 1] = arguments[r];
      for (var s = 0, f = a; s < f.length; s++) {
        var g = f[s],
          v = g[0],
          b = g[1],
          S = v.exec(i);
        if (S) return b(S);
      }
      return [null, null];
    }
    function cs() {
      for (var i = arguments.length, u = new Array(i), a = 0; a < i; a++)
        u[a] = arguments[a];
      return function (r, s) {
        var f = {},
          g;
        for (g = 0; g < u.length; g++) f[u[g]] = je(r[s + g]);
        return [f, null, s + g];
      };
    }
    var ds = /(?:(Z)|([+-]\d\d)(?::?(\d\d))?)/,
      Ki = /(\d\d)(?::?(\d\d)(?::?(\d\d)(?:[.,](\d{1,30}))?)?)?/,
      hs = RegExp("" + Ki.source + ds.source + "?"),
      $i = RegExp("(?:T" + hs.source + ")?"),
      Yc = /([+-]\d{6}|\d{4})(?:-?(\d\d)(?:-?(\d\d))?)?/,
      qc = /(\d{4})-?W(\d\d)(?:-?(\d))?/,
      Jc = /(\d{4})-?(\d{3})/,
      Bc = cs("weekYear", "weekNumber", "weekDay"),
      Gc = cs("year", "ordinal"),
      Qc = /(\d{4})-(\d\d)-(\d\d)/,
      ms = RegExp(Ki.source + " ?(?:" + ds.source + "|(" + vt.source + "))?"),
      Xc = RegExp("(?: " + ms.source + ")?");
    function Rn(i, u, a) {
      var r = i[u];
      return B(r) ? a : je(r);
    }
    function gs(i, u) {
      var a = { year: Rn(i, u), month: Rn(i, u + 1, 1), day: Rn(i, u + 2, 1) };
      return [a, null, u + 3];
    }
    function mn(i, u) {
      var a = {
        hours: Rn(i, u, 0),
        minutes: Rn(i, u + 1, 0),
        seconds: Rn(i, u + 2, 0),
        milliseconds: C(i[u + 3]),
      };
      return [a, null, u + 4];
    }
    function Pn(i, u) {
      var a = !i[u] && !i[u + 1],
        r = We(i[u + 1], i[u + 2]),
        s = a ? null : Pe.instance(r);
      return [{}, s, u + 3];
    }
    function ys(i, u) {
      var a = i[u] ? it.create(i[u]) : null;
      return [{}, a, u + 1];
    }
    var Kc = RegExp("^T?" + Ki.source + "$"),
      $c =
        /^-?P(?:(?:(-?\d{1,9}(?:\.\d{1,9})?)Y)?(?:(-?\d{1,9}(?:\.\d{1,9})?)M)?(?:(-?\d{1,9}(?:\.\d{1,9})?)W)?(?:(-?\d{1,9}(?:\.\d{1,9})?)D)?(?:T(?:(-?\d{1,9}(?:\.\d{1,9})?)H)?(?:(-?\d{1,9}(?:\.\d{1,9})?)M)?(?:(-?\d{1,20})(?:[.,](-?\d{1,9}))?S)?)?)$/;
    function ed(i) {
      var u = i[0],
        a = i[1],
        r = i[2],
        s = i[3],
        f = i[4],
        g = i[5],
        v = i[6],
        b = i[7],
        S = i[8],
        A = u[0] === "-",
        D = b && b[0] === "-",
        E = function (X, de) {
          return (
            de === void 0 && (de = !1),
            X !== void 0 && (de || (X && A)) ? -X : X
          );
        };
      return [
        {
          years: E(Dt(a)),
          months: E(Dt(r)),
          weeks: E(Dt(s)),
          days: E(Dt(f)),
          hours: E(Dt(g)),
          minutes: E(Dt(v)),
          seconds: E(Dt(b), b === "-0"),
          milliseconds: E(C(S), D),
        },
      ];
    }
    var td = {
      GMT: 0,
      EDT: -4 * 60,
      EST: -5 * 60,
      CDT: -5 * 60,
      CST: -6 * 60,
      MDT: -6 * 60,
      MST: -7 * 60,
      PDT: -7 * 60,
      PST: -8 * 60,
    };
    function ea(i, u, a, r, s, f, g) {
      var v = {
        year: u.length === 2 ? An(je(u)) : je(u),
        month: Wt.indexOf(a) + 1,
        day: je(r),
        hour: je(s),
        minute: je(f),
      };
      return (
        g && (v.second = je(g)),
        i && (v.weekday = i.length > 3 ? fr.indexOf(i) + 1 : cr.indexOf(i) + 1),
        v
      );
    }
    var nd =
      /^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|(?:([+-]\d\d)(\d\d)))$/;
    function rd(i) {
      var u = i[1],
        a = i[2],
        r = i[3],
        s = i[4],
        f = i[5],
        g = i[6],
        v = i[7],
        b = i[8],
        S = i[9],
        A = i[10],
        D = i[11],
        E = ea(u, s, r, a, f, g, v),
        W;
      return b ? (W = td[b]) : S ? (W = 0) : (W = We(A, D)), [E, new Pe(W)];
    }
    function id(i) {
      return i
        .replace(/\([^)]*\)|[\n\t]/g, " ")
        .replace(/(\s\s+)/g, " ")
        .trim();
    }
    var ad =
        /^(Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d\d) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d\d):(\d\d):(\d\d) GMT$/,
      od =
        /^(Monday|Tuesday|Wedsday|Thursday|Friday|Saturday|Sunday), (\d\d)-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d\d) (\d\d):(\d\d):(\d\d) GMT$/,
      sd =
        /^(Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( \d|\d\d) (\d\d):(\d\d):(\d\d) (\d{4})$/;
    function vs(i) {
      var u = i[1],
        a = i[2],
        r = i[3],
        s = i[4],
        f = i[5],
        g = i[6],
        v = i[7],
        b = ea(u, s, r, a, f, g, v);
      return [b, Pe.utcInstance];
    }
    function ud(i) {
      var u = i[1],
        a = i[2],
        r = i[3],
        s = i[4],
        f = i[5],
        g = i[6],
        v = i[7],
        b = ea(u, v, a, r, s, f, g);
      return [b, Pe.utcInstance];
    }
    var ld = Un(Yc, $i),
      fd = Un(qc, $i),
      cd = Un(Jc, $i),
      dd = Un(hs),
      hd = hn(gs, mn, Pn),
      md = hn(Bc, mn, Pn),
      gd = hn(Gc, mn, Pn),
      yd = hn(mn, Pn);
    function vd(i) {
      return zn(i, [ld, hd], [fd, md], [cd, gd], [dd, yd]);
    }
    function _d(i) {
      return zn(id(i), [nd, rd]);
    }
    function pd(i) {
      return zn(i, [ad, vs], [od, vs], [sd, ud]);
    }
    function bd(i) {
      return zn(i, [$c, ed]);
    }
    var wd = hn(mn);
    function kd(i) {
      return zn(i, [Kc, wd]);
    }
    var Sd = Un(Qc, Xc),
      Td = Un(ms),
      Od = hn(gs, mn, Pn, ys),
      Md = hn(mn, Pn, ys);
    function Dd(i) {
      return zn(i, [Sd, Od], [Td, Md]);
    }
    var xd = "Invalid Duration",
      _s = {
        weeks: {
          days: 7,
          hours: 7 * 24,
          minutes: 7 * 24 * 60,
          seconds: 7 * 24 * 60 * 60,
          milliseconds: 7 * 24 * 60 * 60 * 1e3,
        },
        days: {
          hours: 24,
          minutes: 24 * 60,
          seconds: 24 * 60 * 60,
          milliseconds: 24 * 60 * 60 * 1e3,
        },
        hours: { minutes: 60, seconds: 60 * 60, milliseconds: 60 * 60 * 1e3 },
        minutes: { seconds: 60, milliseconds: 60 * 1e3 },
        seconds: { milliseconds: 1e3 },
      },
      Ed = l(
        {
          years: {
            quarters: 4,
            months: 12,
            weeks: 52,
            days: 365,
            hours: 365 * 24,
            minutes: 365 * 24 * 60,
            seconds: 365 * 24 * 60 * 60,
            milliseconds: 365 * 24 * 60 * 60 * 1e3,
          },
          quarters: {
            months: 3,
            weeks: 13,
            days: 91,
            hours: 91 * 24,
            minutes: 91 * 24 * 60,
            seconds: 91 * 24 * 60 * 60,
            milliseconds: 91 * 24 * 60 * 60 * 1e3,
          },
          months: {
            weeks: 4,
            days: 30,
            hours: 30 * 24,
            minutes: 30 * 24 * 60,
            seconds: 30 * 24 * 60 * 60,
            milliseconds: 30 * 24 * 60 * 60 * 1e3,
          },
        },
        _s,
      ),
      et = 146097 / 400,
      Vn = 146097 / 4800,
      Nd = l(
        {
          years: {
            quarters: 4,
            months: 12,
            weeks: et / 7,
            days: et,
            hours: et * 24,
            minutes: et * 24 * 60,
            seconds: et * 24 * 60 * 60,
            milliseconds: et * 24 * 60 * 60 * 1e3,
          },
          quarters: {
            months: 3,
            weeks: et / 28,
            days: et / 4,
            hours: (et * 24) / 4,
            minutes: (et * 24 * 60) / 4,
            seconds: (et * 24 * 60 * 60) / 4,
            milliseconds: (et * 24 * 60 * 60 * 1e3) / 4,
          },
          months: {
            weeks: Vn / 7,
            days: Vn,
            hours: Vn * 24,
            minutes: Vn * 24 * 60,
            seconds: Vn * 24 * 60 * 60,
            milliseconds: Vn * 24 * 60 * 60 * 1e3,
          },
        },
        _s,
      ),
      gn = [
        "years",
        "quarters",
        "months",
        "weeks",
        "days",
        "hours",
        "minutes",
        "seconds",
        "milliseconds",
      ],
      Id = gn.slice(0).reverse();
    function yn(i, u, a) {
      a === void 0 && (a = !1);
      var r = {
        values: a ? u.values : l({}, i.values, u.values || {}),
        loc: i.loc.clone(u.loc),
        conversionAccuracy: u.conversionAccuracy || i.conversionAccuracy,
      };
      return new ze(r);
    }
    function Cd(i) {
      return i < 0 ? Math.floor(i) : Math.ceil(i);
    }
    function ps(i, u, a, r, s) {
      var f = i[s][a],
        g = u[a] / f,
        v = Math.sign(g) === Math.sign(r[s]),
        b = !v && r[s] !== 0 && Math.abs(g) <= 1 ? Cd(g) : Math.trunc(g);
      (r[s] += b), (u[a] -= b * f);
    }
    function Ad(i, u) {
      Id.reduce(function (a, r) {
        return B(u[r]) ? a : (a && ps(i, u, a, u, r), r);
      }, null);
    }
    var ze = (function () {
        function i(a) {
          var r = a.conversionAccuracy === "longterm" || !1;
          (this.values = a.values),
            (this.loc = a.loc || Ae.create()),
            (this.conversionAccuracy = r ? "longterm" : "casual"),
            (this.invalid = a.invalid || null),
            (this.matrix = r ? Nd : Ed),
            (this.isLuxonDuration = !0);
        }
        (i.fromMillis = function (r, s) {
          return i.fromObject({ milliseconds: r }, s);
        }),
          (i.fromObject = function (r, s) {
            if ((s === void 0 && (s = {}), r == null || typeof r != "object"))
              throw new L(
                "Duration.fromObject: argument expected to be an object, got " +
                  (r === null ? "null" : typeof r),
              );
            return new i({
              values: Vt(r, i.normalizeUnit),
              loc: Ae.fromObject(s),
              conversionAccuracy: s.conversionAccuracy,
            });
          }),
          (i.fromDurationLike = function (r) {
            if (le(r)) return i.fromMillis(r);
            if (i.isDuration(r)) return r;
            if (typeof r == "object") return i.fromObject(r);
            throw new L(
              "Unknown duration argument " + r + " of type " + typeof r,
            );
          }),
          (i.fromISO = function (r, s) {
            var f = bd(r),
              g = f[0];
            return g
              ? i.fromObject(g, s)
              : i.invalid(
                  "unparsable",
                  'the input "' + r + `" can't be parsed as ISO 8601`,
                );
          }),
          (i.fromISOTime = function (r, s) {
            var f = kd(r),
              g = f[0];
            return g
              ? i.fromObject(g, s)
              : i.invalid(
                  "unparsable",
                  'the input "' + r + `" can't be parsed as ISO 8601`,
                );
          }),
          (i.invalid = function (r, s) {
            if ((s === void 0 && (s = null), !r))
              throw new L("need to specify a reason the Duration is invalid");
            var f = r instanceof Ye ? r : new Ye(r, s);
            if (Oe.throwOnInvalid) throw new te(f);
            return new i({ invalid: f });
          }),
          (i.normalizeUnit = function (r) {
            var s = {
              year: "years",
              years: "years",
              quarter: "quarters",
              quarters: "quarters",
              month: "months",
              months: "months",
              week: "weeks",
              weeks: "weeks",
              day: "days",
              days: "days",
              hour: "hours",
              hours: "hours",
              minute: "minutes",
              minutes: "minutes",
              second: "seconds",
              seconds: "seconds",
              millisecond: "milliseconds",
              milliseconds: "milliseconds",
            }[r && r.toLowerCase()];
            if (!s) throw new me(r);
            return s;
          }),
          (i.isDuration = function (r) {
            return (r && r.isLuxonDuration) || !1;
          });
        var u = i.prototype;
        return (
          (u.toFormat = function (r, s) {
            s === void 0 && (s = {});
            var f = l({}, s, { floor: s.round !== !1 && s.floor !== !1 });
            return this.isValid
              ? Ke.create(this.loc, f).formatDurationFromString(this, r)
              : xd;
          }),
          (u.toHuman = function (r) {
            var s = this;
            r === void 0 && (r = {});
            var f = gn
              .map(function (g) {
                var v = s.values[g];
                return B(v)
                  ? null
                  : s.loc
                      .numberFormatter(
                        l({ style: "unit", unitDisplay: "long" }, r, {
                          unit: g.slice(0, -1),
                        }),
                      )
                      .format(v);
              })
              .filter(function (g) {
                return g;
              });
            return this.loc
              .listFormatter(
                l({ type: "conjunction", style: r.listStyle || "narrow" }, r),
              )
              .format(f);
          }),
          (u.toObject = function () {
            return this.isValid ? l({}, this.values) : {};
          }),
          (u.toISO = function () {
            if (!this.isValid) return null;
            var r = "P";
            return (
              this.years !== 0 && (r += this.years + "Y"),
              (this.months !== 0 || this.quarters !== 0) &&
                (r += this.months + this.quarters * 3 + "M"),
              this.weeks !== 0 && (r += this.weeks + "W"),
              this.days !== 0 && (r += this.days + "D"),
              (this.hours !== 0 ||
                this.minutes !== 0 ||
                this.seconds !== 0 ||
                this.milliseconds !== 0) &&
                (r += "T"),
              this.hours !== 0 && (r += this.hours + "H"),
              this.minutes !== 0 && (r += this.minutes + "M"),
              (this.seconds !== 0 || this.milliseconds !== 0) &&
                (r += xt(this.seconds + this.milliseconds / 1e3, 3) + "S"),
              r === "P" && (r += "T0S"),
              r
            );
          }),
          (u.toISOTime = function (r) {
            if ((r === void 0 && (r = {}), !this.isValid)) return null;
            var s = this.toMillis();
            if (s < 0 || s >= 864e5) return null;
            r = l(
              {
                suppressMilliseconds: !1,
                suppressSeconds: !1,
                includePrefix: !1,
                format: "extended",
              },
              r,
            );
            var f = this.shiftTo("hours", "minutes", "seconds", "milliseconds"),
              g = r.format === "basic" ? "hhmm" : "hh:mm";
            (!r.suppressSeconds || f.seconds !== 0 || f.milliseconds !== 0) &&
              ((g += r.format === "basic" ? "ss" : ":ss"),
              (!r.suppressMilliseconds || f.milliseconds !== 0) &&
                (g += ".SSS"));
            var v = f.toFormat(g);
            return r.includePrefix && (v = "T" + v), v;
          }),
          (u.toJSON = function () {
            return this.toISO();
          }),
          (u.toString = function () {
            return this.toISO();
          }),
          (u.toMillis = function () {
            return this.as("milliseconds");
          }),
          (u.valueOf = function () {
            return this.toMillis();
          }),
          (u.plus = function (r) {
            if (!this.isValid) return this;
            for (
              var s = i.fromDurationLike(r), f = {}, g = H(gn), v;
              !(v = g()).done;

            ) {
              var b = v.value;
              (Mt(s.values, b) || Mt(this.values, b)) &&
                (f[b] = s.get(b) + this.get(b));
            }
            return yn(this, { values: f }, !0);
          }),
          (u.minus = function (r) {
            if (!this.isValid) return this;
            var s = i.fromDurationLike(r);
            return this.plus(s.negate());
          }),
          (u.mapUnits = function (r) {
            if (!this.isValid) return this;
            for (
              var s = {}, f = 0, g = Object.keys(this.values);
              f < g.length;
              f++
            ) {
              var v = g[f];
              s[v] = Fn(r(this.values[v], v));
            }
            return yn(this, { values: s }, !0);
          }),
          (u.get = function (r) {
            return this[i.normalizeUnit(r)];
          }),
          (u.set = function (r) {
            if (!this.isValid) return this;
            var s = l({}, this.values, Vt(r, i.normalizeUnit));
            return yn(this, { values: s });
          }),
          (u.reconfigure = function (r) {
            var s = r === void 0 ? {} : r,
              f = s.locale,
              g = s.numberingSystem,
              v = s.conversionAccuracy,
              b = this.loc.clone({ locale: f, numberingSystem: g }),
              S = { loc: b };
            return v && (S.conversionAccuracy = v), yn(this, S);
          }),
          (u.as = function (r) {
            return this.isValid ? this.shiftTo(r).get(r) : NaN;
          }),
          (u.normalize = function () {
            if (!this.isValid) return this;
            var r = this.toObject();
            return Ad(this.matrix, r), yn(this, { values: r }, !0);
          }),
          (u.shiftTo = function () {
            for (var r = arguments.length, s = new Array(r), f = 0; f < r; f++)
              s[f] = arguments[f];
            if (!this.isValid) return this;
            if (s.length === 0) return this;
            s = s.map(function (Re) {
              return i.normalizeUnit(Re);
            });
            for (
              var g = {}, v = {}, b = this.toObject(), S, A = H(gn), D;
              !(D = A()).done;

            ) {
              var E = D.value;
              if (s.indexOf(E) >= 0) {
                S = E;
                var W = 0;
                for (var X in v) (W += this.matrix[X][E] * v[X]), (v[X] = 0);
                le(b[E]) && (W += b[E]);
                var de = Math.trunc(W);
                (g[E] = de), (v[E] = (W * 1e3 - de * 1e3) / 1e3);
                for (var ce in b)
                  gn.indexOf(ce) > gn.indexOf(E) &&
                    ps(this.matrix, b, ce, g, E);
              } else le(b[E]) && (v[E] = b[E]);
            }
            for (var Q in v)
              v[Q] !== 0 && (g[S] += Q === S ? v[Q] : v[Q] / this.matrix[S][Q]);
            return yn(this, { values: g }, !0).normalize();
          }),
          (u.negate = function () {
            if (!this.isValid) return this;
            for (
              var r = {}, s = 0, f = Object.keys(this.values);
              s < f.length;
              s++
            ) {
              var g = f[s];
              r[g] = -this.values[g];
            }
            return yn(this, { values: r }, !0);
          }),
          (u.equals = function (r) {
            if (!this.isValid || !r.isValid || !this.loc.equals(r.loc))
              return !1;
            function s(b, S) {
              return b === void 0 || b === 0
                ? S === void 0 || S === 0
                : b === S;
            }
            for (var f = H(gn), g; !(g = f()).done; ) {
              var v = g.value;
              if (!s(this.values[v], r.values[v])) return !1;
            }
            return !0;
          }),
          o(i, [
            {
              key: "locale",
              get: function () {
                return this.isValid ? this.loc.locale : null;
              },
            },
            {
              key: "numberingSystem",
              get: function () {
                return this.isValid ? this.loc.numberingSystem : null;
              },
            },
            {
              key: "years",
              get: function () {
                return this.isValid ? this.values.years || 0 : NaN;
              },
            },
            {
              key: "quarters",
              get: function () {
                return this.isValid ? this.values.quarters || 0 : NaN;
              },
            },
            {
              key: "months",
              get: function () {
                return this.isValid ? this.values.months || 0 : NaN;
              },
            },
            {
              key: "weeks",
              get: function () {
                return this.isValid ? this.values.weeks || 0 : NaN;
              },
            },
            {
              key: "days",
              get: function () {
                return this.isValid ? this.values.days || 0 : NaN;
              },
            },
            {
              key: "hours",
              get: function () {
                return this.isValid ? this.values.hours || 0 : NaN;
              },
            },
            {
              key: "minutes",
              get: function () {
                return this.isValid ? this.values.minutes || 0 : NaN;
              },
            },
            {
              key: "seconds",
              get: function () {
                return this.isValid ? this.values.seconds || 0 : NaN;
              },
            },
            {
              key: "milliseconds",
              get: function () {
                return this.isValid ? this.values.milliseconds || 0 : NaN;
              },
            },
            {
              key: "isValid",
              get: function () {
                return this.invalid === null;
              },
            },
            {
              key: "invalidReason",
              get: function () {
                return this.invalid ? this.invalid.reason : null;
              },
            },
            {
              key: "invalidExplanation",
              get: function () {
                return this.invalid ? this.invalid.explanation : null;
              },
            },
          ]),
          i
        );
      })(),
      vr = "Invalid Interval";
    function Fd(i, u) {
      return !i || !i.isValid
        ? _r.invalid("missing or invalid start")
        : !u || !u.isValid
        ? _r.invalid("missing or invalid end")
        : u < i
        ? _r.invalid(
            "end before start",
            "The end of an interval must be after its start, but you had start=" +
              i.toISO() +
              " and end=" +
              u.toISO(),
          )
        : null;
    }
    var _r = (function () {
        function i(a) {
          (this.s = a.start),
            (this.e = a.end),
            (this.invalid = a.invalid || null),
            (this.isLuxonInterval = !0);
        }
        (i.invalid = function (r, s) {
          if ((s === void 0 && (s = null), !r))
            throw new L("need to specify a reason the Interval is invalid");
          var f = r instanceof Ye ? r : new Ye(r, s);
          if (Oe.throwOnInvalid) throw new R(f);
          return new i({ invalid: f });
        }),
          (i.fromDateTimes = function (r, s) {
            var f = kr(r),
              g = kr(s),
              v = Fd(f, g);
            return v == null ? new i({ start: f, end: g }) : v;
          }),
          (i.after = function (r, s) {
            var f = ze.fromDurationLike(s),
              g = kr(r);
            return i.fromDateTimes(g, g.plus(f));
          }),
          (i.before = function (r, s) {
            var f = ze.fromDurationLike(s),
              g = kr(r);
            return i.fromDateTimes(g.minus(f), g);
          }),
          (i.fromISO = function (r, s) {
            var f = (r || "").split("/", 2),
              g = f[0],
              v = f[1];
            if (g && v) {
              var b, S;
              try {
                (b = De.fromISO(g, s)), (S = b.isValid);
              } catch (X) {
                S = !1;
              }
              var A, D;
              try {
                (A = De.fromISO(v, s)), (D = A.isValid);
              } catch (X) {
                D = !1;
              }
              if (S && D) return i.fromDateTimes(b, A);
              if (S) {
                var E = ze.fromISO(v, s);
                if (E.isValid) return i.after(b, E);
              } else if (D) {
                var W = ze.fromISO(g, s);
                if (W.isValid) return i.before(A, W);
              }
            }
            return i.invalid(
              "unparsable",
              'the input "' + r + `" can't be parsed as ISO 8601`,
            );
          }),
          (i.isInterval = function (r) {
            return (r && r.isLuxonInterval) || !1;
          });
        var u = i.prototype;
        return (
          (u.length = function (r) {
            return (
              r === void 0 && (r = "milliseconds"),
              this.isValid ? this.toDuration.apply(this, [r]).get(r) : NaN
            );
          }),
          (u.count = function (r) {
            if ((r === void 0 && (r = "milliseconds"), !this.isValid))
              return NaN;
            var s = this.start.startOf(r),
              f = this.end.startOf(r);
            return Math.floor(f.diff(s, r).get(r)) + 1;
          }),
          (u.hasSame = function (r) {
            return this.isValid
              ? this.isEmpty() || this.e.minus(1).hasSame(this.s, r)
              : !1;
          }),
          (u.isEmpty = function () {
            return this.s.valueOf() === this.e.valueOf();
          }),
          (u.isAfter = function (r) {
            return this.isValid ? this.s > r : !1;
          }),
          (u.isBefore = function (r) {
            return this.isValid ? this.e <= r : !1;
          }),
          (u.contains = function (r) {
            return this.isValid ? this.s <= r && this.e > r : !1;
          }),
          (u.set = function (r) {
            var s = r === void 0 ? {} : r,
              f = s.start,
              g = s.end;
            return this.isValid
              ? i.fromDateTimes(f || this.s, g || this.e)
              : this;
          }),
          (u.splitAt = function () {
            var r = this;
            if (!this.isValid) return [];
            for (var s = arguments.length, f = new Array(s), g = 0; g < s; g++)
              f[g] = arguments[g];
            for (
              var v = f
                  .map(kr)
                  .filter(function (W) {
                    return r.contains(W);
                  })
                  .sort(),
                b = [],
                S = this.s,
                A = 0;
              S < this.e;

            ) {
              var D = v[A] || this.e,
                E = +D > +this.e ? this.e : D;
              b.push(i.fromDateTimes(S, E)), (S = E), (A += 1);
            }
            return b;
          }),
          (u.splitBy = function (r) {
            var s = ze.fromDurationLike(r);
            if (!this.isValid || !s.isValid || s.as("milliseconds") === 0)
              return [];
            for (var f = this.s, g = 1, v, b = []; f < this.e; ) {
              var S = this.start.plus(
                s.mapUnits(function (A) {
                  return A * g;
                }),
              );
              (v = +S > +this.e ? this.e : S),
                b.push(i.fromDateTimes(f, v)),
                (f = v),
                (g += 1);
            }
            return b;
          }),
          (u.divideEqually = function (r) {
            return this.isValid
              ? this.splitBy(this.length() / r).slice(0, r)
              : [];
          }),
          (u.overlaps = function (r) {
            return this.e > r.s && this.s < r.e;
          }),
          (u.abutsStart = function (r) {
            return this.isValid ? +this.e == +r.s : !1;
          }),
          (u.abutsEnd = function (r) {
            return this.isValid ? +r.e == +this.s : !1;
          }),
          (u.engulfs = function (r) {
            return this.isValid ? this.s <= r.s && this.e >= r.e : !1;
          }),
          (u.equals = function (r) {
            return !this.isValid || !r.isValid
              ? !1
              : this.s.equals(r.s) && this.e.equals(r.e);
          }),
          (u.intersection = function (r) {
            if (!this.isValid) return this;
            var s = this.s > r.s ? this.s : r.s,
              f = this.e < r.e ? this.e : r.e;
            return s >= f ? null : i.fromDateTimes(s, f);
          }),
          (u.union = function (r) {
            if (!this.isValid) return this;
            var s = this.s < r.s ? this.s : r.s,
              f = this.e > r.e ? this.e : r.e;
            return i.fromDateTimes(s, f);
          }),
          (i.merge = function (r) {
            var s = r
                .sort(function (v, b) {
                  return v.s - b.s;
                })
                .reduce(
                  function (v, b) {
                    var S = v[0],
                      A = v[1];
                    return A
                      ? A.overlaps(b) || A.abutsStart(b)
                        ? [S, A.union(b)]
                        : [S.concat([A]), b]
                      : [S, b];
                  },
                  [[], null],
                ),
              f = s[0],
              g = s[1];
            return g && f.push(g), f;
          }),
          (i.xor = function (r) {
            for (
              var s,
                f = null,
                g = 0,
                v = [],
                b = r.map(function (X) {
                  return [
                    { time: X.s, type: "s" },
                    { time: X.e, type: "e" },
                  ];
                }),
                S = (s = Array.prototype).concat.apply(s, b),
                A = S.sort(function (X, de) {
                  return X.time - de.time;
                }),
                D = H(A),
                E;
              !(E = D()).done;

            ) {
              var W = E.value;
              (g += W.type === "s" ? 1 : -1),
                g === 1
                  ? (f = W.time)
                  : (f && +f != +W.time && v.push(i.fromDateTimes(f, W.time)),
                    (f = null));
            }
            return i.merge(v);
          }),
          (u.difference = function () {
            for (
              var r = this, s = arguments.length, f = new Array(s), g = 0;
              g < s;
              g++
            )
              f[g] = arguments[g];
            return i
              .xor([this].concat(f))
              .map(function (v) {
                return r.intersection(v);
              })
              .filter(function (v) {
                return v && !v.isEmpty();
              });
          }),
          (u.toString = function () {
            return this.isValid
              ? "[" + this.s.toISO() + " \u2013 " + this.e.toISO() + ")"
              : vr;
          }),
          (u.toISO = function (r) {
            return this.isValid ? this.s.toISO(r) + "/" + this.e.toISO(r) : vr;
          }),
          (u.toISODate = function () {
            return this.isValid
              ? this.s.toISODate() + "/" + this.e.toISODate()
              : vr;
          }),
          (u.toISOTime = function (r) {
            return this.isValid
              ? this.s.toISOTime(r) + "/" + this.e.toISOTime(r)
              : vr;
          }),
          (u.toFormat = function (r, s) {
            var f = s === void 0 ? {} : s,
              g = f.separator,
              v = g === void 0 ? " \u2013 " : g;
            return this.isValid
              ? "" + this.s.toFormat(r) + v + this.e.toFormat(r)
              : vr;
          }),
          (u.toDuration = function (r, s) {
            return this.isValid
              ? this.e.diff(this.s, r, s)
              : ze.invalid(this.invalidReason);
          }),
          (u.mapEndpoints = function (r) {
            return i.fromDateTimes(r(this.s), r(this.e));
          }),
          o(i, [
            {
              key: "start",
              get: function () {
                return this.isValid ? this.s : null;
              },
            },
            {
              key: "end",
              get: function () {
                return this.isValid ? this.e : null;
              },
            },
            {
              key: "isValid",
              get: function () {
                return this.invalidReason === null;
              },
            },
            {
              key: "invalidReason",
              get: function () {
                return this.invalid ? this.invalid.reason : null;
              },
            },
            {
              key: "invalidExplanation",
              get: function () {
                return this.invalid ? this.invalid.explanation : null;
              },
            },
          ]),
          i
        );
      })(),
      pr = (function () {
        function i() {}
        return (
          (i.hasDST = function (a) {
            a === void 0 && (a = Oe.defaultZone);
            var r = De.now().setZone(a).set({ month: 12 });
            return !a.isUniversal && r.offset !== r.set({ month: 6 }).offset;
          }),
          (i.isValidIANAZone = function (a) {
            return it.isValidSpecifier(a) && it.isValidZone(a);
          }),
          (i.normalizeZone = function (a) {
            return pt(a, Oe.defaultZone);
          }),
          (i.months = function (a, r) {
            a === void 0 && (a = "long");
            var s = r === void 0 ? {} : r,
              f = s.locale,
              g = f === void 0 ? null : f,
              v = s.numberingSystem,
              b = v === void 0 ? null : v,
              S = s.locObj,
              A = S === void 0 ? null : S,
              D = s.outputCalendar,
              E = D === void 0 ? "gregory" : D;
            return (A || Ae.create(g, b, E)).months(a);
          }),
          (i.monthsFormat = function (a, r) {
            a === void 0 && (a = "long");
            var s = r === void 0 ? {} : r,
              f = s.locale,
              g = f === void 0 ? null : f,
              v = s.numberingSystem,
              b = v === void 0 ? null : v,
              S = s.locObj,
              A = S === void 0 ? null : S,
              D = s.outputCalendar,
              E = D === void 0 ? "gregory" : D;
            return (A || Ae.create(g, b, E)).months(a, !0);
          }),
          (i.weekdays = function (a, r) {
            a === void 0 && (a = "long");
            var s = r === void 0 ? {} : r,
              f = s.locale,
              g = f === void 0 ? null : f,
              v = s.numberingSystem,
              b = v === void 0 ? null : v,
              S = s.locObj,
              A = S === void 0 ? null : S;
            return (A || Ae.create(g, b, null)).weekdays(a);
          }),
          (i.weekdaysFormat = function (a, r) {
            a === void 0 && (a = "long");
            var s = r === void 0 ? {} : r,
              f = s.locale,
              g = f === void 0 ? null : f,
              v = s.numberingSystem,
              b = v === void 0 ? null : v,
              S = s.locObj,
              A = S === void 0 ? null : S;
            return (A || Ae.create(g, b, null)).weekdays(a, !0);
          }),
          (i.meridiems = function (a) {
            var r = a === void 0 ? {} : a,
              s = r.locale,
              f = s === void 0 ? null : s;
            return Ae.create(f).meridiems();
          }),
          (i.eras = function (a, r) {
            a === void 0 && (a = "short");
            var s = r === void 0 ? {} : r,
              f = s.locale,
              g = f === void 0 ? null : f;
            return Ae.create(g, null, "gregory").eras(a);
          }),
          (i.features = function () {
            return { relative: Pt() };
          }),
          i
        );
      })();
    function bs(i, u) {
      var a = function (f) {
          return f.toUTC(0, { keepLocalTime: !0 }).startOf("day").valueOf();
        },
        r = a(u) - a(i);
      return Math.floor(ze.fromMillis(r).as("days"));
    }
    function Ld(i, u, a) {
      for (
        var r = [
            [
              "years",
              function (de, ce) {
                return ce.year - de.year;
              },
            ],
            [
              "quarters",
              function (de, ce) {
                return ce.quarter - de.quarter;
              },
            ],
            [
              "months",
              function (de, ce) {
                return ce.month - de.month + (ce.year - de.year) * 12;
              },
            ],
            [
              "weeks",
              function (de, ce) {
                var Q = bs(de, ce);
                return (Q - (Q % 7)) / 7;
              },
            ],
            ["days", bs],
          ],
          s = {},
          f,
          g,
          v = 0,
          b = r;
        v < b.length;
        v++
      ) {
        var S = b[v],
          A = S[0],
          D = S[1];
        if (a.indexOf(A) >= 0) {
          var E;
          f = A;
          var W = D(i, u);
          if (((g = i.plus(((E = {}), (E[A] = W), E))), g > u)) {
            var X;
            (i = i.plus(((X = {}), (X[A] = W - 1), X))), (W -= 1);
          } else i = g;
          s[A] = W;
        }
      }
      return [i, s, g, f];
    }
    function Ud(i, u, a, r) {
      var s = Ld(i, u, a),
        f = s[0],
        g = s[1],
        v = s[2],
        b = s[3],
        S = u - f,
        A = a.filter(function (X) {
          return (
            ["hours", "minutes", "seconds", "milliseconds"].indexOf(X) >= 0
          );
        });
      if (A.length === 0) {
        if (v < u) {
          var D;
          v = f.plus(((D = {}), (D[b] = 1), D));
        }
        v !== f && (g[b] = (g[b] || 0) + S / (v - f));
      }
      var E = ze.fromObject(g, r);
      if (A.length > 0) {
        var W;
        return (W = ze.fromMillis(S, r)).shiftTo.apply(W, A).plus(E);
      } else return E;
    }
    var ta = {
        arab: "[\u0660-\u0669]",
        arabext: "[\u06F0-\u06F9]",
        bali: "[\u1B50-\u1B59]",
        beng: "[\u09E6-\u09EF]",
        deva: "[\u0966-\u096F]",
        fullwide: "[\uFF10-\uFF19]",
        gujr: "[\u0AE6-\u0AEF]",
        hanidec:
          "[\u3007|\u4E00|\u4E8C|\u4E09|\u56DB|\u4E94|\u516D|\u4E03|\u516B|\u4E5D]",
        khmr: "[\u17E0-\u17E9]",
        knda: "[\u0CE6-\u0CEF]",
        laoo: "[\u0ED0-\u0ED9]",
        limb: "[\u1946-\u194F]",
        mlym: "[\u0D66-\u0D6F]",
        mong: "[\u1810-\u1819]",
        mymr: "[\u1040-\u1049]",
        orya: "[\u0B66-\u0B6F]",
        tamldec: "[\u0BE6-\u0BEF]",
        telu: "[\u0C66-\u0C6F]",
        thai: "[\u0E50-\u0E59]",
        tibt: "[\u0F20-\u0F29]",
        latn: "\\d",
      },
      ws = {
        arab: [1632, 1641],
        arabext: [1776, 1785],
        bali: [6992, 7001],
        beng: [2534, 2543],
        deva: [2406, 2415],
        fullwide: [65296, 65303],
        gujr: [2790, 2799],
        khmr: [6112, 6121],
        knda: [3302, 3311],
        laoo: [3792, 3801],
        limb: [6470, 6479],
        mlym: [3430, 3439],
        mong: [6160, 6169],
        mymr: [4160, 4169],
        orya: [2918, 2927],
        tamldec: [3046, 3055],
        telu: [3174, 3183],
        thai: [3664, 3673],
        tibt: [3872, 3881],
      },
      zd = ta.hanidec.replace(/[\[|\]]/g, "").split("");
    function Rd(i) {
      var u = parseInt(i, 10);
      if (isNaN(u)) {
        u = "";
        for (var a = 0; a < i.length; a++) {
          var r = i.charCodeAt(a);
          if (i[a].search(ta.hanidec) !== -1) u += zd.indexOf(i[a]);
          else
            for (var s in ws) {
              var f = ws[s],
                g = f[0],
                v = f[1];
              r >= g && r <= v && (u += r - g);
            }
        }
        return parseInt(u, 10);
      } else return u;
    }
    function ot(i, u) {
      var a = i.numberingSystem;
      return u === void 0 && (u = ""), new RegExp("" + ta[a || "latn"] + u);
    }
    var Pd = "missing Intl.DateTimeFormat.formatToParts support";
    function ge(i, u) {
      return (
        u === void 0 &&
          (u = function (r) {
            return r;
          }),
        {
          regex: i,
          deser: function (r) {
            var s = r[0];
            return u(Rd(s));
          },
        }
      );
    }
    var Vd = String.fromCharCode(160),
      ks = "( |" + Vd + ")",
      Ss = new RegExp(ks, "g");
    function Wd(i) {
      return i.replace(/\./g, "\\.?").replace(Ss, ks);
    }
    function Ts(i) {
      return i.replace(/\./g, "").replace(Ss, " ").toLowerCase();
    }
    function st(i, u) {
      return i === null
        ? null
        : {
            regex: RegExp(i.map(Wd).join("|")),
            deser: function (r) {
              var s = r[0];
              return (
                i.findIndex(function (f) {
                  return Ts(s) === Ts(f);
                }) + u
              );
            },
          };
    }
    function Os(i, u) {
      return {
        regex: i,
        deser: function (r) {
          var s = r[1],
            f = r[2];
          return We(s, f);
        },
        groups: u,
      };
    }
    function na(i) {
      return {
        regex: i,
        deser: function (a) {
          var r = a[0];
          return r;
        },
      };
    }
    function Hd(i) {
      return i.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g, "\\$&");
    }
    function Zd(i, u) {
      var a = ot(u),
        r = ot(u, "{2}"),
        s = ot(u, "{3}"),
        f = ot(u, "{4}"),
        g = ot(u, "{6}"),
        v = ot(u, "{1,2}"),
        b = ot(u, "{1,3}"),
        S = ot(u, "{1,6}"),
        A = ot(u, "{1,9}"),
        D = ot(u, "{2,4}"),
        E = ot(u, "{4,6}"),
        W = function (Q) {
          return {
            regex: RegExp(Hd(Q.val)),
            deser: function (ci) {
              var la = ci[0];
              return la;
            },
            literal: !0,
          };
        },
        X = function (Q) {
          if (i.literal) return W(Q);
          switch (Q.val) {
            case "G":
              return st(u.eras("short", !1), 0);
            case "GG":
              return st(u.eras("long", !1), 0);
            case "y":
              return ge(S);
            case "yy":
              return ge(D, An);
            case "yyyy":
              return ge(f);
            case "yyyyy":
              return ge(E);
            case "yyyyyy":
              return ge(g);
            case "M":
              return ge(v);
            case "MM":
              return ge(r);
            case "MMM":
              return st(u.months("short", !0, !1), 1);
            case "MMMM":
              return st(u.months("long", !0, !1), 1);
            case "L":
              return ge(v);
            case "LL":
              return ge(r);
            case "LLL":
              return st(u.months("short", !1, !1), 1);
            case "LLLL":
              return st(u.months("long", !1, !1), 1);
            case "d":
              return ge(v);
            case "dd":
              return ge(r);
            case "o":
              return ge(b);
            case "ooo":
              return ge(s);
            case "HH":
              return ge(r);
            case "H":
              return ge(v);
            case "hh":
              return ge(r);
            case "h":
              return ge(v);
            case "mm":
              return ge(r);
            case "m":
              return ge(v);
            case "q":
              return ge(v);
            case "qq":
              return ge(r);
            case "s":
              return ge(v);
            case "ss":
              return ge(r);
            case "S":
              return ge(b);
            case "SSS":
              return ge(s);
            case "u":
              return na(A);
            case "uu":
              return na(v);
            case "uuu":
              return ge(a);
            case "a":
              return st(u.meridiems(), 0);
            case "kkkk":
              return ge(f);
            case "kk":
              return ge(D, An);
            case "W":
              return ge(v);
            case "WW":
              return ge(r);
            case "E":
            case "c":
              return ge(a);
            case "EEE":
              return st(u.weekdays("short", !1, !1), 1);
            case "EEEE":
              return st(u.weekdays("long", !1, !1), 1);
            case "ccc":
              return st(u.weekdays("short", !0, !1), 1);
            case "cccc":
              return st(u.weekdays("long", !0, !1), 1);
            case "Z":
            case "ZZ":
              return Os(
                new RegExp("([+-]" + v.source + ")(?::(" + r.source + "))?"),
                2,
              );
            case "ZZZ":
              return Os(
                new RegExp("([+-]" + v.source + ")(" + r.source + ")?"),
                2,
              );
            case "z":
              return na(/[a-z_+-/]{1,256}?/i);
            default:
              return W(Q);
          }
        },
        de = X(i) || { invalidReason: Pd };
      return (de.token = i), de;
    }
    var jd = {
      year: { "2-digit": "yy", numeric: "yyyyy" },
      month: { numeric: "M", "2-digit": "MM", short: "MMM", long: "MMMM" },
      day: { numeric: "d", "2-digit": "dd" },
      weekday: { short: "EEE", long: "EEEE" },
      dayperiod: "a",
      dayPeriod: "a",
      hour: { numeric: "h", "2-digit": "hh" },
      minute: { numeric: "m", "2-digit": "mm" },
      second: { numeric: "s", "2-digit": "ss" },
    };
    function Yd(i, u, a) {
      var r = i.type,
        s = i.value;
      if (r === "literal") return { literal: !0, val: s };
      var f = a[r],
        g = jd[r];
      if ((typeof g == "object" && (g = g[f]), g))
        return { literal: !1, val: g };
    }
    function qd(i) {
      var u = i
        .map(function (a) {
          return a.regex;
        })
        .reduce(function (a, r) {
          return a + "(" + r.source + ")";
        }, "");
      return ["^" + u + "$", i];
    }
    function Jd(i, u, a) {
      var r = i.match(u);
      if (r) {
        var s = {},
          f = 1;
        for (var g in a)
          if (Mt(a, g)) {
            var v = a[g],
              b = v.groups ? v.groups + 1 : 1;
            !v.literal &&
              v.token &&
              (s[v.token.val[0]] = v.deser(r.slice(f, f + b))),
              (f += b);
          }
        return [r, s];
      } else return [r, {}];
    }
    function Bd(i) {
      var u = function (g) {
          switch (g) {
            case "S":
              return "millisecond";
            case "s":
              return "second";
            case "m":
              return "minute";
            case "h":
            case "H":
              return "hour";
            case "d":
              return "day";
            case "o":
              return "ordinal";
            case "L":
            case "M":
              return "month";
            case "y":
              return "year";
            case "E":
            case "c":
              return "weekday";
            case "W":
              return "weekNumber";
            case "k":
              return "weekYear";
            case "q":
              return "quarter";
            default:
              return null;
          }
        },
        a = null,
        r;
      B(i.z) || (a = it.create(i.z)),
        B(i.Z) || (a || (a = new Pe(i.Z)), (r = i.Z)),
        B(i.q) || (i.M = (i.q - 1) * 3 + 1),
        B(i.h) ||
          (i.h < 12 && i.a === 1
            ? (i.h += 12)
            : i.h === 12 && i.a === 0 && (i.h = 0)),
        i.G === 0 && i.y && (i.y = -i.y),
        B(i.u) || (i.S = C(i.u));
      var s = Object.keys(i).reduce(function (f, g) {
        var v = u(g);
        return v && (f[v] = i[g]), f;
      }, {});
      return [s, a, r];
    }
    var ra = null;
    function Gd() {
      return ra || (ra = De.fromMillis(1555555555555)), ra;
    }
    function Qd(i, u) {
      if (i.literal) return i;
      var a = Ke.macroTokenToFormatOpts(i.val);
      if (!a) return i;
      var r = Ke.create(u, a),
        s = r.formatDateTimeParts(Gd()),
        f = s.map(function (g) {
          return Yd(g, u, a);
        });
      return f.includes(void 0) ? i : f;
    }
    function Xd(i, u) {
      var a;
      return (a = Array.prototype).concat.apply(
        a,
        i.map(function (r) {
          return Qd(r, u);
        }),
      );
    }
    function Ms(i, u, a) {
      var r = Xd(Ke.parseFormat(a), i),
        s = r.map(function (Q) {
          return Zd(Q, i);
        }),
        f = s.find(function (Q) {
          return Q.invalidReason;
        });
      if (f) return { input: u, tokens: r, invalidReason: f.invalidReason };
      var g = qd(s),
        v = g[0],
        b = g[1],
        S = RegExp(v, "i"),
        A = Jd(u, S, b),
        D = A[0],
        E = A[1],
        W = E ? Bd(E) : [null, null, void 0],
        X = W[0],
        de = W[1],
        ce = W[2];
      if (Mt(E, "a") && Mt(E, "H"))
        throw new ne("Can't include meridiem when specifying 24-hour format");
      return {
        input: u,
        tokens: r,
        regex: S,
        rawMatches: D,
        matches: E,
        result: X,
        zone: de,
        specificOffset: ce,
      };
    }
    function Kd(i, u, a) {
      var r = Ms(i, u, a),
        s = r.result,
        f = r.zone,
        g = r.specificOffset,
        v = r.invalidReason;
      return [s, f, g, v];
    }
    var Ds = [0, 31, 59, 90, 120, 151, 181, 212, 243, 273, 304, 334],
      xs = [0, 31, 60, 91, 121, 152, 182, 213, 244, 274, 305, 335];
    function tt(i, u) {
      return new Ye(
        "unit out of range",
        "you specified " +
          u +
          " (of type " +
          typeof u +
          ") as a " +
          i +
          ", which is invalid",
      );
    }
    function Es(i, u, a) {
      var r = new Date(Date.UTC(i, u - 1, a)).getUTCDay();
      return r === 0 ? 7 : r;
    }
    function Ns(i, u, a) {
      return a + (Qe(i) ? xs : Ds)[u - 1];
    }
    function Is(i, u) {
      var a = Qe(i) ? xs : Ds,
        r = a.findIndex(function (f) {
          return f < u;
        }),
        s = u - a[r];
      return { month: r + 1, day: s };
    }
    function ia(i) {
      var u = i.year,
        a = i.month,
        r = i.day,
        s = Ns(u, a, r),
        f = Es(u, a, r),
        g = Math.floor((s - f + 10) / 7),
        v;
      return (
        g < 1
          ? ((v = u - 1), (g = ht(v)))
          : g > ht(u)
          ? ((v = u + 1), (g = 1))
          : (v = u),
        l({ weekYear: v, weekNumber: g, weekday: f }, yt(i))
      );
    }
    function Cs(i) {
      var u = i.weekYear,
        a = i.weekNumber,
        r = i.weekday,
        s = Es(u, 1, 4),
        f = nt(u),
        g = a * 7 + r - s - 3,
        v;
      g < 1
        ? ((v = u - 1), (g += nt(v)))
        : g > f
        ? ((v = u + 1), (g -= nt(u)))
        : (v = u);
      var b = Is(v, g),
        S = b.month,
        A = b.day;
      return l({ year: v, month: S, day: A }, yt(i));
    }
    function aa(i) {
      var u = i.year,
        a = i.month,
        r = i.day,
        s = Ns(u, a, r);
      return l({ year: u, ordinal: s }, yt(i));
    }
    function As(i) {
      var u = i.year,
        a = i.ordinal,
        r = Is(u, a),
        s = r.month,
        f = r.day;
      return l({ year: u, month: s, day: f }, yt(i));
    }
    function $d(i) {
      var u = Me(i.weekYear),
        a = Ge(i.weekNumber, 1, ht(i.weekYear)),
        r = Ge(i.weekday, 1, 7);
      return u
        ? a
          ? r
            ? !1
            : tt("weekday", i.weekday)
          : tt("week", i.week)
        : tt("weekYear", i.weekYear);
    }
    function eh(i) {
      var u = Me(i.year),
        a = Ge(i.ordinal, 1, nt(i.year));
      return u ? (a ? !1 : tt("ordinal", i.ordinal)) : tt("year", i.year);
    }
    function Fs(i) {
      var u = Me(i.year),
        a = Ge(i.month, 1, 12),
        r = Ge(i.day, 1, Xe(i.year, i.month));
      return u
        ? a
          ? r
            ? !1
            : tt("day", i.day)
          : tt("month", i.month)
        : tt("year", i.year);
    }
    function Ls(i) {
      var u = i.hour,
        a = i.minute,
        r = i.second,
        s = i.millisecond,
        f = Ge(u, 0, 23) || (u === 24 && a === 0 && r === 0 && s === 0),
        g = Ge(a, 0, 59),
        v = Ge(r, 0, 59),
        b = Ge(s, 0, 999);
      return f
        ? g
          ? v
            ? b
              ? !1
              : tt("millisecond", s)
            : tt("second", r)
          : tt("minute", a)
        : tt("hour", u);
    }
    var oa = "Invalid DateTime",
      Us = 864e13;
    function ui(i) {
      return new Ye(
        "unsupported zone",
        'the zone "' + i.name + '" is not supported',
      );
    }
    function sa(i) {
      return i.weekData === null && (i.weekData = ia(i.c)), i.weekData;
    }
    function br(i, u) {
      var a = {
        ts: i.ts,
        zone: i.zone,
        c: i.c,
        o: i.o,
        loc: i.loc,
        invalid: i.invalid,
      };
      return new De(l({}, a, u, { old: a }));
    }
    function zs(i, u, a) {
      var r = i - u * 60 * 1e3,
        s = a.offset(r);
      if (u === s) return [r, u];
      r -= (s - u) * 60 * 1e3;
      var f = a.offset(r);
      return s === f ? [r, s] : [i - Math.min(s, f) * 60 * 1e3, Math.max(s, f)];
    }
    function Rs(i, u) {
      i += u * 60 * 1e3;
      var a = new Date(i);
      return {
        year: a.getUTCFullYear(),
        month: a.getUTCMonth() + 1,
        day: a.getUTCDate(),
        hour: a.getUTCHours(),
        minute: a.getUTCMinutes(),
        second: a.getUTCSeconds(),
        millisecond: a.getUTCMilliseconds(),
      };
    }
    function li(i, u, a) {
      return zs(Et(i), u, a);
    }
    function Ps(i, u) {
      var a = i.o,
        r = i.c.year + Math.trunc(u.years),
        s = i.c.month + Math.trunc(u.months) + Math.trunc(u.quarters) * 3,
        f = l({}, i.c, {
          year: r,
          month: s,
          day:
            Math.min(i.c.day, Xe(r, s)) +
            Math.trunc(u.days) +
            Math.trunc(u.weeks) * 7,
        }),
        g = ze
          .fromObject({
            years: u.years - Math.trunc(u.years),
            quarters: u.quarters - Math.trunc(u.quarters),
            months: u.months - Math.trunc(u.months),
            weeks: u.weeks - Math.trunc(u.weeks),
            days: u.days - Math.trunc(u.days),
            hours: u.hours,
            minutes: u.minutes,
            seconds: u.seconds,
            milliseconds: u.milliseconds,
          })
          .as("milliseconds"),
        v = Et(f),
        b = zs(v, a, i.zone),
        S = b[0],
        A = b[1];
      return g !== 0 && ((S += g), (A = i.zone.offset(S))), { ts: S, o: A };
    }
    function wr(i, u, a, r, s, f) {
      var g = a.setZone,
        v = a.zone;
      if (i && Object.keys(i).length !== 0) {
        var b = u || v,
          S = De.fromObject(i, l({}, a, { zone: b, specificOffset: f }));
        return g ? S : S.setZone(v);
      } else return De.invalid(new Ye("unparsable", 'the input "' + s + `" can't be parsed as ` + r));
    }
    function fi(i, u, a) {
      return (
        a === void 0 && (a = !0),
        i.isValid
          ? Ke.create(Ae.create("en-US"), {
              allowZ: a,
              forceSimple: !0,
            }).formatDateTimeFromString(i, u)
          : null
      );
    }
    function ua(i, u) {
      var a = i.c.year > 9999 || i.c.year < 0,
        r = "";
      return (
        a && i.c.year >= 0 && (r += "+"),
        (r += Te(i.c.year, a ? 6 : 4)),
        u
          ? ((r += "-"), (r += Te(i.c.month)), (r += "-"), (r += Te(i.c.day)))
          : ((r += Te(i.c.month)), (r += Te(i.c.day))),
        r
      );
    }
    function Vs(i, u, a, r, s) {
      var f = Te(i.c.hour);
      return (
        u
          ? ((f += ":"),
            (f += Te(i.c.minute)),
            (i.c.second !== 0 || !a) && (f += ":"))
          : (f += Te(i.c.minute)),
        (i.c.second !== 0 || !a) &&
          ((f += Te(i.c.second)),
          (i.c.millisecond !== 0 || !r) &&
            ((f += "."), (f += Te(i.c.millisecond, 3)))),
        s &&
          (i.isOffsetFixed && i.offset === 0
            ? (f += "Z")
            : i.o < 0
            ? ((f += "-"),
              (f += Te(Math.trunc(-i.o / 60))),
              (f += ":"),
              (f += Te(Math.trunc(-i.o % 60))))
            : ((f += "+"),
              (f += Te(Math.trunc(i.o / 60))),
              (f += ":"),
              (f += Te(Math.trunc(i.o % 60))))),
        f
      );
    }
    var Ws = {
        month: 1,
        day: 1,
        hour: 0,
        minute: 0,
        second: 0,
        millisecond: 0,
      },
      th = {
        weekNumber: 1,
        weekday: 1,
        hour: 0,
        minute: 0,
        second: 0,
        millisecond: 0,
      },
      nh = { ordinal: 1, hour: 0, minute: 0, second: 0, millisecond: 0 },
      Hs = ["year", "month", "day", "hour", "minute", "second", "millisecond"],
      rh = [
        "weekYear",
        "weekNumber",
        "weekday",
        "hour",
        "minute",
        "second",
        "millisecond",
      ],
      ih = ["year", "ordinal", "hour", "minute", "second", "millisecond"];
    function Zs(i) {
      var u = {
        year: "year",
        years: "year",
        month: "month",
        months: "month",
        day: "day",
        days: "day",
        hour: "hour",
        hours: "hour",
        minute: "minute",
        minutes: "minute",
        quarter: "quarter",
        quarters: "quarter",
        second: "second",
        seconds: "second",
        millisecond: "millisecond",
        milliseconds: "millisecond",
        weekday: "weekday",
        weekdays: "weekday",
        weeknumber: "weekNumber",
        weeksnumber: "weekNumber",
        weeknumbers: "weekNumber",
        weekyear: "weekYear",
        weekyears: "weekYear",
        ordinal: "ordinal",
      }[i.toLowerCase()];
      if (!u) throw new me(i);
      return u;
    }
    function js(i, u) {
      var a = pt(u.zone, Oe.defaultZone),
        r = Ae.fromObject(u),
        s = Oe.now(),
        f,
        g;
      if (B(i.year)) f = s;
      else {
        for (var v = H(Hs), b; !(b = v()).done; ) {
          var S = b.value;
          B(i[S]) && (i[S] = Ws[S]);
        }
        var A = Fs(i) || Ls(i);
        if (A) return De.invalid(A);
        var D = a.offset(s),
          E = li(i, D, a);
        (f = E[0]), (g = E[1]);
      }
      return new De({ ts: f, zone: a, loc: r, o: g });
    }
    function Ys(i, u, a) {
      var r = B(a.round) ? !0 : a.round,
        s = function (D, E) {
          D = xt(D, r || a.calendary ? 0 : 2, !0);
          var W = u.loc.clone(a).relFormatter(a);
          return W.format(D, E);
        },
        f = function (D) {
          return a.calendary
            ? u.hasSame(i, D)
              ? 0
              : u.startOf(D).diff(i.startOf(D), D).get(D)
            : u.diff(i, D).get(D);
        };
      if (a.unit) return s(f(a.unit), a.unit);
      for (var g = H(a.units), v; !(v = g()).done; ) {
        var b = v.value,
          S = f(b);
        if (Math.abs(S) >= 1) return s(S, b);
      }
      return s(i > u ? -0 : 0, a.units[a.units.length - 1]);
    }
    function qs(i) {
      var u = {},
        a;
      return (
        i.length > 0 && typeof i[i.length - 1] == "object"
          ? ((u = i[i.length - 1]), (a = Array.from(i).slice(0, i.length - 1)))
          : (a = Array.from(i)),
        [u, a]
      );
    }
    var De = (function () {
      function i(a) {
        var r = a.zone || Oe.defaultZone,
          s =
            a.invalid ||
            (Number.isNaN(a.ts) ? new Ye("invalid input") : null) ||
            (r.isValid ? null : ui(r));
        this.ts = B(a.ts) ? Oe.now() : a.ts;
        var f = null,
          g = null;
        if (!s) {
          var v = a.old && a.old.ts === this.ts && a.old.zone.equals(r);
          if (v) {
            var b = [a.old.c, a.old.o];
            (f = b[0]), (g = b[1]);
          } else {
            var S = r.offset(this.ts);
            (f = Rs(this.ts, S)),
              (s = Number.isNaN(f.year) ? new Ye("invalid input") : null),
              (f = s ? null : f),
              (g = s ? null : S);
          }
        }
        (this._zone = r),
          (this.loc = a.loc || Ae.create()),
          (this.invalid = s),
          (this.weekData = null),
          (this.c = f),
          (this.o = g),
          (this.isLuxonDateTime = !0);
      }
      (i.now = function () {
        return new i({});
      }),
        (i.local = function () {
          var r = qs(arguments),
            s = r[0],
            f = r[1],
            g = f[0],
            v = f[1],
            b = f[2],
            S = f[3],
            A = f[4],
            D = f[5],
            E = f[6];
          return js(
            {
              year: g,
              month: v,
              day: b,
              hour: S,
              minute: A,
              second: D,
              millisecond: E,
            },
            s,
          );
        }),
        (i.utc = function () {
          var r = qs(arguments),
            s = r[0],
            f = r[1],
            g = f[0],
            v = f[1],
            b = f[2],
            S = f[3],
            A = f[4],
            D = f[5],
            E = f[6];
          return (
            (s.zone = Pe.utcInstance),
            js(
              {
                year: g,
                month: v,
                day: b,
                hour: S,
                minute: A,
                second: D,
                millisecond: E,
              },
              s,
            )
          );
        }),
        (i.fromJSDate = function (r, s) {
          s === void 0 && (s = {});
          var f = Be(r) ? r.valueOf() : NaN;
          if (Number.isNaN(f)) return i.invalid("invalid input");
          var g = pt(s.zone, Oe.defaultZone);
          return g.isValid
            ? new i({ ts: f, zone: g, loc: Ae.fromObject(s) })
            : i.invalid(ui(g));
        }),
        (i.fromMillis = function (r, s) {
          if ((s === void 0 && (s = {}), le(r)))
            return r < -Us || r > Us
              ? i.invalid("Timestamp out of range")
              : new i({
                  ts: r,
                  zone: pt(s.zone, Oe.defaultZone),
                  loc: Ae.fromObject(s),
                });
          throw new L(
            "fromMillis requires a numerical input, but received a " +
              typeof r +
              " with value " +
              r,
          );
        }),
        (i.fromSeconds = function (r, s) {
          if ((s === void 0 && (s = {}), le(r)))
            return new i({
              ts: r * 1e3,
              zone: pt(s.zone, Oe.defaultZone),
              loc: Ae.fromObject(s),
            });
          throw new L("fromSeconds requires a numerical input");
        }),
        (i.fromObject = function (r, s) {
          s === void 0 && (s = {}), (r = r || {});
          var f = pt(s.zone, Oe.defaultZone);
          if (!f.isValid) return i.invalid(ui(f));
          var g = Oe.now(),
            v = B(s.specificOffset) ? f.offset(g) : s.specificOffset,
            b = Vt(r, Zs),
            S = !B(b.ordinal),
            A = !B(b.year),
            D = !B(b.month) || !B(b.day),
            E = A || D,
            W = b.weekYear || b.weekNumber,
            X = Ae.fromObject(s);
          if ((E || S) && W)
            throw new ne(
              "Can't mix weekYear/weekNumber units with year/month/day or ordinals",
            );
          if (D && S) throw new ne("Can't mix ordinal dates with month/day");
          var de = W || (b.weekday && !E),
            ce,
            Q,
            Re = Rs(g, v);
          de
            ? ((ce = rh), (Q = th), (Re = ia(Re)))
            : S
            ? ((ce = ih), (Q = nh), (Re = aa(Re)))
            : ((ce = Hs), (Q = Ws));
          for (var ci = !1, la = H(ce), Js; !(Js = la()).done; ) {
            var Sr = Js.value,
              oh = b[Sr];
            B(oh) ? (ci ? (b[Sr] = Q[Sr]) : (b[Sr] = Re[Sr])) : (ci = !0);
          }
          var sh = de ? $d(b) : S ? eh(b) : Fs(b),
            Bs = sh || Ls(b);
          if (Bs) return i.invalid(Bs);
          var uh = de ? Cs(b) : S ? As(b) : b,
            Gs = li(uh, v, f),
            lh = Gs[0],
            fh = Gs[1],
            fa = new i({ ts: lh, zone: f, o: fh, loc: X });
          return b.weekday && E && r.weekday !== fa.weekday
            ? i.invalid(
                "mismatched weekday",
                "you can't specify both a weekday of " +
                  b.weekday +
                  " and a date of " +
                  fa.toISO(),
              )
            : fa;
        }),
        (i.fromISO = function (r, s) {
          s === void 0 && (s = {});
          var f = vd(r),
            g = f[0],
            v = f[1];
          return wr(g, v, s, "ISO 8601", r);
        }),
        (i.fromRFC2822 = function (r, s) {
          s === void 0 && (s = {});
          var f = _d(r),
            g = f[0],
            v = f[1];
          return wr(g, v, s, "RFC 2822", r);
        }),
        (i.fromHTTP = function (r, s) {
          s === void 0 && (s = {});
          var f = pd(r),
            g = f[0],
            v = f[1];
          return wr(g, v, s, "HTTP", s);
        }),
        (i.fromFormat = function (r, s, f) {
          if ((f === void 0 && (f = {}), B(r) || B(s)))
            throw new L("fromFormat requires an input string and a format");
          var g = f,
            v = g.locale,
            b = v === void 0 ? null : v,
            S = g.numberingSystem,
            A = S === void 0 ? null : S,
            D = Ae.fromOpts({ locale: b, numberingSystem: A, defaultToEN: !0 }),
            E = Kd(D, r, s),
            W = E[0],
            X = E[1],
            de = E[2],
            ce = E[3];
          return ce ? i.invalid(ce) : wr(W, X, f, "format " + s, r, de);
        }),
        (i.fromString = function (r, s, f) {
          return f === void 0 && (f = {}), i.fromFormat(r, s, f);
        }),
        (i.fromSQL = function (r, s) {
          s === void 0 && (s = {});
          var f = Dd(r),
            g = f[0],
            v = f[1];
          return wr(g, v, s, "SQL", r);
        }),
        (i.invalid = function (r, s) {
          if ((s === void 0 && (s = null), !r))
            throw new L("need to specify a reason the DateTime is invalid");
          var f = r instanceof Ye ? r : new Ye(r, s);
          if (Oe.throwOnInvalid) throw new I(f);
          return new i({ invalid: f });
        }),
        (i.isDateTime = function (r) {
          return (r && r.isLuxonDateTime) || !1;
        });
      var u = i.prototype;
      return (
        (u.get = function (r) {
          return this[r];
        }),
        (u.resolvedLocaleOptions = function (r) {
          r === void 0 && (r = {});
          var s = Ke.create(this.loc.clone(r), r).resolvedOptions(this),
            f = s.locale,
            g = s.numberingSystem,
            v = s.calendar;
          return { locale: f, numberingSystem: g, outputCalendar: v };
        }),
        (u.toUTC = function (r, s) {
          return (
            r === void 0 && (r = 0),
            s === void 0 && (s = {}),
            this.setZone(Pe.instance(r), s)
          );
        }),
        (u.toLocal = function () {
          return this.setZone(Oe.defaultZone);
        }),
        (u.setZone = function (r, s) {
          var f = s === void 0 ? {} : s,
            g = f.keepLocalTime,
            v = g === void 0 ? !1 : g,
            b = f.keepCalendarTime,
            S = b === void 0 ? !1 : b;
          if (((r = pt(r, Oe.defaultZone)), r.equals(this.zone))) return this;
          if (r.isValid) {
            var A = this.ts;
            if (v || S) {
              var D = r.offset(this.ts),
                E = this.toObject(),
                W = li(E, D, r);
              A = W[0];
            }
            return br(this, { ts: A, zone: r });
          } else return i.invalid(ui(r));
        }),
        (u.reconfigure = function (r) {
          var s = r === void 0 ? {} : r,
            f = s.locale,
            g = s.numberingSystem,
            v = s.outputCalendar,
            b = this.loc.clone({
              locale: f,
              numberingSystem: g,
              outputCalendar: v,
            });
          return br(this, { loc: b });
        }),
        (u.setLocale = function (r) {
          return this.reconfigure({ locale: r });
        }),
        (u.set = function (r) {
          if (!this.isValid) return this;
          var s = Vt(r, Zs),
            f = !B(s.weekYear) || !B(s.weekNumber) || !B(s.weekday),
            g = !B(s.ordinal),
            v = !B(s.year),
            b = !B(s.month) || !B(s.day),
            S = v || b,
            A = s.weekYear || s.weekNumber;
          if ((S || g) && A)
            throw new ne(
              "Can't mix weekYear/weekNumber units with year/month/day or ordinals",
            );
          if (b && g) throw new ne("Can't mix ordinal dates with month/day");
          var D;
          f
            ? (D = Cs(l({}, ia(this.c), s)))
            : B(s.ordinal)
            ? ((D = l({}, this.toObject(), s)),
              B(s.day) && (D.day = Math.min(Xe(D.year, D.month), D.day)))
            : (D = As(l({}, aa(this.c), s)));
          var E = li(D, this.o, this.zone),
            W = E[0],
            X = E[1];
          return br(this, { ts: W, o: X });
        }),
        (u.plus = function (r) {
          if (!this.isValid) return this;
          var s = ze.fromDurationLike(r);
          return br(this, Ps(this, s));
        }),
        (u.minus = function (r) {
          if (!this.isValid) return this;
          var s = ze.fromDurationLike(r).negate();
          return br(this, Ps(this, s));
        }),
        (u.startOf = function (r) {
          if (!this.isValid) return this;
          var s = {},
            f = ze.normalizeUnit(r);
          switch (f) {
            case "years":
              s.month = 1;
            case "quarters":
            case "months":
              s.day = 1;
            case "weeks":
            case "days":
              s.hour = 0;
            case "hours":
              s.minute = 0;
            case "minutes":
              s.second = 0;
            case "seconds":
              s.millisecond = 0;
              break;
          }
          if ((f === "weeks" && (s.weekday = 1), f === "quarters")) {
            var g = Math.ceil(this.month / 3);
            s.month = (g - 1) * 3 + 1;
          }
          return this.set(s);
        }),
        (u.endOf = function (r) {
          var s;
          return this.isValid
            ? this.plus(((s = {}), (s[r] = 1), s))
                .startOf(r)
                .minus(1)
            : this;
        }),
        (u.toFormat = function (r, s) {
          return (
            s === void 0 && (s = {}),
            this.isValid
              ? Ke.create(this.loc.redefaultToEN(s)).formatDateTimeFromString(
                  this,
                  r,
                )
              : oa
          );
        }),
        (u.toLocaleString = function (r, s) {
          return (
            r === void 0 && (r = q),
            s === void 0 && (s = {}),
            this.isValid
              ? Ke.create(this.loc.clone(s), r).formatDateTime(this)
              : oa
          );
        }),
        (u.toLocaleParts = function (r) {
          return (
            r === void 0 && (r = {}),
            this.isValid
              ? Ke.create(this.loc.clone(r), r).formatDateTimeParts(this)
              : []
          );
        }),
        (u.toISO = function (r) {
          var s = r === void 0 ? {} : r,
            f = s.format,
            g = f === void 0 ? "extended" : f,
            v = s.suppressSeconds,
            b = v === void 0 ? !1 : v,
            S = s.suppressMilliseconds,
            A = S === void 0 ? !1 : S,
            D = s.includeOffset,
            E = D === void 0 ? !0 : D;
          if (!this.isValid) return null;
          var W = g === "extended",
            X = ua(this, W);
          return (X += "T"), (X += Vs(this, W, b, A, E)), X;
        }),
        (u.toISODate = function (r) {
          var s = r === void 0 ? {} : r,
            f = s.format,
            g = f === void 0 ? "extended" : f;
          return this.isValid ? ua(this, g === "extended") : null;
        }),
        (u.toISOWeekDate = function () {
          return fi(this, "kkkk-'W'WW-c");
        }),
        (u.toISOTime = function (r) {
          var s = r === void 0 ? {} : r,
            f = s.suppressMilliseconds,
            g = f === void 0 ? !1 : f,
            v = s.suppressSeconds,
            b = v === void 0 ? !1 : v,
            S = s.includeOffset,
            A = S === void 0 ? !0 : S,
            D = s.includePrefix,
            E = D === void 0 ? !1 : D,
            W = s.format,
            X = W === void 0 ? "extended" : W;
          if (!this.isValid) return null;
          var de = E ? "T" : "";
          return de + Vs(this, X === "extended", b, g, A);
        }),
        (u.toRFC2822 = function () {
          return fi(this, "EEE, dd LLL yyyy HH:mm:ss ZZZ", !1);
        }),
        (u.toHTTP = function () {
          return fi(this.toUTC(), "EEE, dd LLL yyyy HH:mm:ss 'GMT'");
        }),
        (u.toSQLDate = function () {
          return this.isValid ? ua(this, !0) : null;
        }),
        (u.toSQLTime = function (r) {
          var s = r === void 0 ? {} : r,
            f = s.includeOffset,
            g = f === void 0 ? !0 : f,
            v = s.includeZone,
            b = v === void 0 ? !1 : v,
            S = "HH:mm:ss.SSS";
          return (
            (b || g) && ((S += " "), b ? (S += "z") : g && (S += "ZZ")),
            fi(this, S, !0)
          );
        }),
        (u.toSQL = function (r) {
          return (
            r === void 0 && (r = {}),
            this.isValid ? this.toSQLDate() + " " + this.toSQLTime(r) : null
          );
        }),
        (u.toString = function () {
          return this.isValid ? this.toISO() : oa;
        }),
        (u.valueOf = function () {
          return this.toMillis();
        }),
        (u.toMillis = function () {
          return this.isValid ? this.ts : NaN;
        }),
        (u.toSeconds = function () {
          return this.isValid ? this.ts / 1e3 : NaN;
        }),
        (u.toJSON = function () {
          return this.toISO();
        }),
        (u.toBSON = function () {
          return this.toJSDate();
        }),
        (u.toObject = function (r) {
          if ((r === void 0 && (r = {}), !this.isValid)) return {};
          var s = l({}, this.c);
          return (
            r.includeConfig &&
              ((s.outputCalendar = this.outputCalendar),
              (s.numberingSystem = this.loc.numberingSystem),
              (s.locale = this.loc.locale)),
            s
          );
        }),
        (u.toJSDate = function () {
          return new Date(this.isValid ? this.ts : NaN);
        }),
        (u.diff = function (r, s, f) {
          if (
            (s === void 0 && (s = "milliseconds"),
            f === void 0 && (f = {}),
            !this.isValid || !r.isValid)
          )
            return ze.invalid("created by diffing an invalid DateTime");
          var g = l(
              { locale: this.locale, numberingSystem: this.numberingSystem },
              f,
            ),
            v = Yr(s).map(ze.normalizeUnit),
            b = r.valueOf() > this.valueOf(),
            S = b ? this : r,
            A = b ? r : this,
            D = Ud(S, A, v, g);
          return b ? D.negate() : D;
        }),
        (u.diffNow = function (r, s) {
          return (
            r === void 0 && (r = "milliseconds"),
            s === void 0 && (s = {}),
            this.diff(i.now(), r, s)
          );
        }),
        (u.until = function (r) {
          return this.isValid ? _r.fromDateTimes(this, r) : this;
        }),
        (u.hasSame = function (r, s) {
          if (!this.isValid) return !1;
          var f = r.valueOf(),
            g = this.setZone(r.zone, { keepLocalTime: !0 });
          return g.startOf(s) <= f && f <= g.endOf(s);
        }),
        (u.equals = function (r) {
          return (
            this.isValid &&
            r.isValid &&
            this.valueOf() === r.valueOf() &&
            this.zone.equals(r.zone) &&
            this.loc.equals(r.loc)
          );
        }),
        (u.toRelative = function (r) {
          if ((r === void 0 && (r = {}), !this.isValid)) return null;
          var s = r.base || i.fromObject({}, { zone: this.zone }),
            f = r.padding ? (this < s ? -r.padding : r.padding) : 0,
            g = ["years", "months", "days", "hours", "minutes", "seconds"],
            v = r.unit;
          return (
            Array.isArray(r.unit) && ((g = r.unit), (v = void 0)),
            Ys(
              s,
              this.plus(f),
              l({}, r, { numeric: "always", units: g, unit: v }),
            )
          );
        }),
        (u.toRelativeCalendar = function (r) {
          return (
            r === void 0 && (r = {}),
            this.isValid
              ? Ys(
                  r.base || i.fromObject({}, { zone: this.zone }),
                  this,
                  l({}, r, {
                    numeric: "auto",
                    units: ["years", "months", "days"],
                    calendary: !0,
                  }),
                )
              : null
          );
        }),
        (i.min = function () {
          for (var r = arguments.length, s = new Array(r), f = 0; f < r; f++)
            s[f] = arguments[f];
          if (!s.every(i.isDateTime))
            throw new L("min requires all arguments be DateTimes");
          return ur(
            s,
            function (g) {
              return g.valueOf();
            },
            Math.min,
          );
        }),
        (i.max = function () {
          for (var r = arguments.length, s = new Array(r), f = 0; f < r; f++)
            s[f] = arguments[f];
          if (!s.every(i.isDateTime))
            throw new L("max requires all arguments be DateTimes");
          return ur(
            s,
            function (g) {
              return g.valueOf();
            },
            Math.max,
          );
        }),
        (i.fromFormatExplain = function (r, s, f) {
          f === void 0 && (f = {});
          var g = f,
            v = g.locale,
            b = v === void 0 ? null : v,
            S = g.numberingSystem,
            A = S === void 0 ? null : S,
            D = Ae.fromOpts({ locale: b, numberingSystem: A, defaultToEN: !0 });
          return Ms(D, r, s);
        }),
        (i.fromStringExplain = function (r, s, f) {
          return f === void 0 && (f = {}), i.fromFormatExplain(r, s, f);
        }),
        o(
          i,
          [
            {
              key: "isValid",
              get: function () {
                return this.invalid === null;
              },
            },
            {
              key: "invalidReason",
              get: function () {
                return this.invalid ? this.invalid.reason : null;
              },
            },
            {
              key: "invalidExplanation",
              get: function () {
                return this.invalid ? this.invalid.explanation : null;
              },
            },
            {
              key: "locale",
              get: function () {
                return this.isValid ? this.loc.locale : null;
              },
            },
            {
              key: "numberingSystem",
              get: function () {
                return this.isValid ? this.loc.numberingSystem : null;
              },
            },
            {
              key: "outputCalendar",
              get: function () {
                return this.isValid ? this.loc.outputCalendar : null;
              },
            },
            {
              key: "zone",
              get: function () {
                return this._zone;
              },
            },
            {
              key: "zoneName",
              get: function () {
                return this.isValid ? this.zone.name : null;
              },
            },
            {
              key: "year",
              get: function () {
                return this.isValid ? this.c.year : NaN;
              },
            },
            {
              key: "quarter",
              get: function () {
                return this.isValid ? Math.ceil(this.c.month / 3) : NaN;
              },
            },
            {
              key: "month",
              get: function () {
                return this.isValid ? this.c.month : NaN;
              },
            },
            {
              key: "day",
              get: function () {
                return this.isValid ? this.c.day : NaN;
              },
            },
            {
              key: "hour",
              get: function () {
                return this.isValid ? this.c.hour : NaN;
              },
            },
            {
              key: "minute",
              get: function () {
                return this.isValid ? this.c.minute : NaN;
              },
            },
            {
              key: "second",
              get: function () {
                return this.isValid ? this.c.second : NaN;
              },
            },
            {
              key: "millisecond",
              get: function () {
                return this.isValid ? this.c.millisecond : NaN;
              },
            },
            {
              key: "weekYear",
              get: function () {
                return this.isValid ? sa(this).weekYear : NaN;
              },
            },
            {
              key: "weekNumber",
              get: function () {
                return this.isValid ? sa(this).weekNumber : NaN;
              },
            },
            {
              key: "weekday",
              get: function () {
                return this.isValid ? sa(this).weekday : NaN;
              },
            },
            {
              key: "ordinal",
              get: function () {
                return this.isValid ? aa(this.c).ordinal : NaN;
              },
            },
            {
              key: "monthShort",
              get: function () {
                return this.isValid
                  ? pr.months("short", { locObj: this.loc })[this.month - 1]
                  : null;
              },
            },
            {
              key: "monthLong",
              get: function () {
                return this.isValid
                  ? pr.months("long", { locObj: this.loc })[this.month - 1]
                  : null;
              },
            },
            {
              key: "weekdayShort",
              get: function () {
                return this.isValid
                  ? pr.weekdays("short", { locObj: this.loc })[this.weekday - 1]
                  : null;
              },
            },
            {
              key: "weekdayLong",
              get: function () {
                return this.isValid
                  ? pr.weekdays("long", { locObj: this.loc })[this.weekday - 1]
                  : null;
              },
            },
            {
              key: "offset",
              get: function () {
                return this.isValid ? +this.o : NaN;
              },
            },
            {
              key: "offsetNameShort",
              get: function () {
                return this.isValid
                  ? this.zone.offsetName(this.ts, {
                      format: "short",
                      locale: this.locale,
                    })
                  : null;
              },
            },
            {
              key: "offsetNameLong",
              get: function () {
                return this.isValid
                  ? this.zone.offsetName(this.ts, {
                      format: "long",
                      locale: this.locale,
                    })
                  : null;
              },
            },
            {
              key: "isOffsetFixed",
              get: function () {
                return this.isValid ? this.zone.isUniversal : null;
              },
            },
            {
              key: "isInDST",
              get: function () {
                return this.isOffsetFixed
                  ? !1
                  : this.offset > this.set({ month: 1 }).offset ||
                      this.offset > this.set({ month: 5 }).offset;
              },
            },
            {
              key: "isInLeapYear",
              get: function () {
                return Qe(this.year);
              },
            },
            {
              key: "daysInMonth",
              get: function () {
                return Xe(this.year, this.month);
              },
            },
            {
              key: "daysInYear",
              get: function () {
                return this.isValid ? nt(this.year) : NaN;
              },
            },
            {
              key: "weeksInWeekYear",
              get: function () {
                return this.isValid ? ht(this.weekYear) : NaN;
              },
            },
          ],
          [
            {
              key: "DATE_SHORT",
              get: function () {
                return q;
              },
            },
            {
              key: "DATE_MED",
              get: function () {
                return ve;
              },
            },
            {
              key: "DATE_MED_WITH_WEEKDAY",
              get: function () {
                return Se;
              },
            },
            {
              key: "DATE_FULL",
              get: function () {
                return Fe;
              },
            },
            {
              key: "DATE_HUGE",
              get: function () {
                return ke;
              },
            },
            {
              key: "TIME_SIMPLE",
              get: function () {
                return V;
              },
            },
            {
              key: "TIME_WITH_SECONDS",
              get: function () {
                return K;
              },
            },
            {
              key: "TIME_WITH_SHORT_OFFSET",
              get: function () {
                return Ne;
              },
            },
            {
              key: "TIME_WITH_LONG_OFFSET",
              get: function () {
                return Le;
              },
            },
            {
              key: "TIME_24_SIMPLE",
              get: function () {
                return Kt;
              },
            },
            {
              key: "TIME_24_WITH_SECONDS",
              get: function () {
                return $t;
              },
            },
            {
              key: "TIME_24_WITH_SHORT_OFFSET",
              get: function () {
                return en;
              },
            },
            {
              key: "TIME_24_WITH_LONG_OFFSET",
              get: function () {
                return tn;
              },
            },
            {
              key: "DATETIME_SHORT",
              get: function () {
                return nn;
              },
            },
            {
              key: "DATETIME_SHORT_WITH_SECONDS",
              get: function () {
                return rn;
              },
            },
            {
              key: "DATETIME_MED",
              get: function () {
                return an;
              },
            },
            {
              key: "DATETIME_MED_WITH_SECONDS",
              get: function () {
                return on;
              },
            },
            {
              key: "DATETIME_MED_WITH_WEEKDAY",
              get: function () {
                return Cn;
              },
            },
            {
              key: "DATETIME_FULL",
              get: function () {
                return P;
              },
            },
            {
              key: "DATETIME_FULL_WITH_SECONDS",
              get: function () {
                return re;
              },
            },
            {
              key: "DATETIME_HUGE",
              get: function () {
                return se;
              },
            },
            {
              key: "DATETIME_HUGE_WITH_SECONDS",
              get: function () {
                return x;
              },
            },
          ],
        ),
        i
      );
    })();
    function kr(i) {
      if (De.isDateTime(i)) return i;
      if (i && i.valueOf && le(i.valueOf())) return De.fromJSDate(i);
      if (i && typeof i == "object") return De.fromObject(i);
      throw new L("Unknown datetime argument: " + i + ", of type " + typeof i);
    }
    var ah = "2.3.0";
    (t.DateTime = De),
      (t.Duration = ze),
      (t.FixedOffsetZone = Pe),
      (t.IANAZone = it),
      (t.Info = pr),
      (t.Interval = _r),
      (t.InvalidZone = Ct),
      (t.Settings = Oe),
      (t.SystemZone = fn),
      (t.VERSION = ah),
      (t.Zone = Zt);
  });
  function Ma(e) {
    return wn.IANAZone.isValidZone(e);
  }
  function Da(e, t) {
    const n = wn.DateTime.fromJSDate(e)
      .toLocaleString(wn.DateTime.TIME_SIMPLE)
      .replace(/\./g, "");
    try {
      const o = wn.DateTime.fromJSDate(e, { zone: t });
      return !o.isValid && (o.invalidReason === "unsupported zone" || !t)
        ? n
        : o.toLocaleString(wn.DateTime.TIME_SIMPLE).replace(/\./g, "");
    } catch (o) {
      return n;
    }
  }
  function xa(e, t) {
    const n = wn.DateTime.fromJSDate(e, { zone: t });
    return (t && !Ma(t)) ||
      (!n.isValid && (n.invalidReason === "unsupported zone" || !t))
      ? ""
      : n.offsetNameShort;
  }
  const kn = [];
  function hu(e, t) {
    return { subscribe: qt(e, t).subscribe };
  }
  function qt(e, t = ae) {
    let n;
    const o = new Set();
    function l(m) {
      if (vn(e, m) && ((e = m), n)) {
        const h = !kn.length;
        for (const y of o) y[1](), kn.push(y, e);
        if (h) {
          for (let y = 0; y < kn.length; y += 2) kn[y][0](kn[y + 1]);
          kn.length = 0;
        }
      }
    }
    function c(m) {
      l(m(e));
    }
    function d(m, h = ae) {
      const y = [m, h];
      return (
        o.add(y),
        o.size === 1 && (n = t(l) || ae),
        m(e),
        () => {
          o.delete(y), o.size === 0 && (n(), (n = null));
        }
      );
    }
    return { set: l, update: c, subscribe: d };
  }
  function mu(e, t, n) {
    const o = !Array.isArray(e),
      l = o ? [e] : e,
      c = t.length < 2;
    return hu(n, (d) => {
      let m = !1;
      const h = [];
      let y = 0,
        p = ae;
      const w = () => {
          if (y) return;
          p();
          const N = t(o ? h[0] : h, d);
          c ? d(N) : (p = Hn(N) ? N : ae);
        },
        k = l.map((N, T) =>
          ma(
            N,
            (H) => {
              (h[T] = H), (y &= ~(1 << T)), m && w();
            },
            () => {
              y |= 1 << T;
            },
          ),
        );
      return (
        (m = !0),
        w(),
        function () {
          Lt(k), p();
        }
      );
    });
  }
  function gu() {
    return qt({});
  }
  const pi = gu();
  var yu = Object.defineProperty,
    vu = Object.defineProperties,
    _u = Object.getOwnPropertyDescriptors,
    Ea = Object.getOwnPropertySymbols,
    pu = Object.prototype.hasOwnProperty,
    bu = Object.prototype.propertyIsEnumerable,
    Na = (e, t, n) =>
      t in e
        ? yu(e, t, { enumerable: !0, configurable: !0, writable: !0, value: n })
        : (e[t] = n),
    wu = (e, t) => {
      for (var n in t || (t = {})) pu.call(t, n) && Na(e, n, t[n]);
      if (Ea) for (var n of Ea(t)) bu.call(t, n) && Na(e, n, t[n]);
      return e;
    },
    ku = (e, t) => vu(e, _u(t));
  async function wt(e) {
    var t;
    if (!e.ok) {
      const n = await e.json().then((c) => c),
        o =
          ((t = n == null ? void 0 : n.response) == null ? void 0 : t.error) ||
          (n == null ? void 0 : n.message),
        l = new Error(o);
      return (
        (l.name = n.name), Promise.reject({ message: l, statusCode: e.status })
      );
    }
    return e.json();
  }
  function kt(e = { component_id: "" }) {
    return {
      method: e.method || "GET",
      headers: {
        Accept: "application/json",
        "Content-Type": "application/json",
        "X-Component-Id": e.component_id || "",
        "X-Access-Token": e.access_token || "",
      },
      body: e.body ? JSON.stringify(e.body) : void 0,
    };
  }
  function lt(e, t) {
    throw (console.error(t), pi.update((n) => ku(wu({}, n), { [e]: t })), t);
  }
  const Ia = { "001": "", "002": "ireland-", "003": "canada-" };
  function St(e) {
    let t = "";
    if (e.substring(3, 4) === "-") {
      const o = e.substring(0, 3);
      typeof Ia[o] != "undefined" && (t = Ia[o]);
    }
    return `https://${t}web-components.nylas.com/middleware`;
  }
  function Sn(e) {}
  const Su = async (e, t) =>
    await fetch(
      `${St(e.component_id)}/contacts/${t}/picture`,
      kt({ component_id: e.component_id, access_token: e.access_token }),
    )
      .then((n) => wt(n))
      .then((n) => n.response)
      .catch((n) => lt(e.component_id, n));
  var Tu = Object.defineProperty,
    Ou = Object.defineProperties,
    Mu = Object.getOwnPropertyDescriptors,
    Ca = Object.getOwnPropertySymbols,
    Du = Object.prototype.hasOwnProperty,
    xu = Object.prototype.propertyIsEnumerable,
    Aa = (e, t, n) =>
      t in e
        ? Tu(e, t, { enumerable: !0, configurable: !0, writable: !0, value: n })
        : (e[t] = n),
    Fa = (e, t) => {
      for (var n in t || (t = {})) Du.call(t, n) && Aa(e, n, t[n]);
      if (Ca) for (var n of Ca(t)) xu.call(t, n) && Aa(e, n, t[n]);
      return e;
    },
    La = (e, t) => Ou(e, Mu(t));
  const Ua = (e, t, n) => {
    if (e.thread_ids) {
      const l = e.thread_ids.slice(n, n + t);
      return Promise.all(
        l.map(async (c) => {
          const d = `${St(e.component_id)}/threads/${c}?view=expanded`;
          return await fetch(d, kt(e))
            .then((m) => wt(m))
            .then((m) => m.response)
            .then((m) =>
              La(Fa({}, m), {
                messages: m.messages.filter(
                  (h) => h.from.length !== 0 || h.to.length !== 0,
                ),
              }),
            )
            .catch((m) => lt(e.component_id, m));
        }),
      );
    }
    let o = `${St(
      e.component_id,
    )}/threads?view=expanded&not_in=trash&limit=${t}&offset=${n}`;
    return (
      e.query &&
        Object.entries(e.query).forEach(
          (l) => (o = o.concat(`&${l[0]}=${l[1]}`)),
        ),
      fetch(o, kt(e))
        .then((l) => wt(l))
        .then((l) => l.response)
        .then((l) =>
          l.map((c) =>
            La(Fa({}, c), {
              messages: c.messages.filter(
                (d) => d.from.length !== 0 || d.to.length !== 0,
              ),
            }),
          ),
        )
        .catch((l) => lt(e.component_id, l))
    );
  };
  function za(e) {
    let t = `${St(
      e.component_id,
    )}/threads?view=expanded&not_in=trash&view=count`;
    return (
      e.query &&
        Object.entries(e.query).forEach(
          (n) => (t = t.concat(`&${n[0]}=${n[1]}`)),
        ),
      e.keywordToSearch && (t += `&q=${e.keywordToSearch}`),
      fetch(t, kt(e))
        .then((n) => wt(n))
        .then((n) => n.response.count)
    );
  }
  const Eu = (e) => {
      const t = `${St(e.component_id)}/threads/search?q=${
        e.keywordToSearch
      }&view=expanded&limit=${e.query.limit}&offset=${e.query.offset}`;
      return fetch(t, kt(e))
        .then(async (n) => wt(n))
        .then((n) => n.response)
        .catch((n) => lt(e.component_id, n));
    },
    Nu = (e, t) =>
      fetch(
        `${St(e.component_id)}/threads/${t.id}`,
        kt({
          method: "PUT",
          component_id: e.component_id,
          access_token: e.access_token,
          body: {
            unread: t.unread,
            starred: t.starred,
            folder_id: t.folder_id,
            label_ids: t.label_ids,
          },
        }),
      )
        .then((n) => wt(n))
        .then((n) => n.response)
        .catch((n) => lt(e.component_id, n)),
    Iu = async (e, t) =>
      await fetch(`${St(e)}/manifest`, kt({ access_token: t, component_id: e }))
        .then(wt)
        .then((n) => n.component.theming)
        .catch((n) => lt(e, n));
  var Cu = Object.defineProperty,
    Ra = Object.getOwnPropertySymbols,
    Au = Object.prototype.hasOwnProperty,
    Fu = Object.prototype.propertyIsEnumerable,
    Pa = (e, t, n) =>
      t in e
        ? Cu(e, t, { enumerable: !0, configurable: !0, writable: !0, value: n })
        : (e[t] = n),
    Va = (e, t) => {
      for (var n in t || (t = {})) Au.call(t, n) && Pa(e, n, t[n]);
      if (Ra) for (var n of Ra(t)) Fu.call(t, n) && Pa(e, n, t[n]);
      return e;
    };
  const Lu = async (e) =>
      fetch(
        `${St(e.component_id)}/calendars/availability`,
        kt({
          method: "POST",
          component_id: e.component_id,
          access_token: e.access_token,
          body: e.body,
        }),
      )
        .then(async (t) => {
          const n = await wt(t);
          return (
            (n.response.time_slots = n.response.time_slots.map(
              (o) => (
                (o.start_time = o.start || 0),
                (o.end_time = o.end || 0),
                delete o.start,
                delete o.end,
                o
              ),
            )),
            n.response
          );
        })
        .catch((t) => lt(e.component_id, t)),
    Uu = async (e) =>
      fetch(
        `${St(e.component_id)}/calendars/availability/consecutive`,
        kt({
          method: "POST",
          component_id: e.component_id,
          access_token: e.access_token,
          body: e.body,
        }),
      )
        .then(async (t) => {
          var n;
          const l =
              ((n = (await wt(t)).response) == null
                ? void 0
                : n.map(
                    (m) => (
                      (m = m.map(
                        (h) => (
                          (h.start_time = new Date(h.start_time * 1e3)),
                          (h.end_time = new Date(h.end_time * 1e3)),
                          h
                        ),
                      )),
                      m
                    ),
                  )) || [],
            c = zu(l, e.body.events);
          return Ru(c);
        })
        .catch((t) => lt(e.component_id, t));
  function zu(e, t) {
    return e.map((n) =>
      n.map((o) =>
        Va(
          Va({}, o),
          t.find(
            (l) =>
              l.participantEmails.length === o.emails.length &&
              l.participantEmails.every((c) => o.emails.includes(c)),
          ),
        ),
      ),
    );
  }
  function Ru(e) {
    const t = new Set();
    return e.filter((n) => {
      const o = `${n[0].start_time}_${n[n.length - 1].end_time}`;
      return t.has(o) ? !1 : (t.add(o), !0);
    });
  }
  var Pu = Object.defineProperty,
    Wa = Object.getOwnPropertySymbols,
    Vu = Object.prototype.hasOwnProperty,
    Wu = Object.prototype.propertyIsEnumerable,
    Ha = (e, t, n) =>
      t in e
        ? Pu(e, t, { enumerable: !0, configurable: !0, writable: !0, value: n })
        : (e[t] = n),
    Hu = (e, t) => {
      for (var n in t || (t = {})) Vu.call(t, n) && Ha(e, n, t[n]);
      if (Wa) for (var n of Wa(t)) Wu.call(t, n) && Ha(e, n, t[n]);
      return e;
    };
  function Zu() {
    const e = (n, o) => {
        var l, c;
        const d = JSON.parse(o),
          m = Hu({}, d);
        if (
          (delete m.forceReload,
          (o = JSON.stringify(m)),
          !(
            !d.component_id ||
            !((l = d == null ? void 0 : d.body) == null
              ? void 0
              : l.start_time) ||
            !((c = d == null ? void 0 : d.body) == null ? void 0 : c.end_time)
          ))
        ) {
          if (!n[o] || d.forceReload) {
            const h = Lu(d);
            t.update((y) => ((y[o] = h), y)), (n[o] = h);
          }
          return n[o];
        }
      },
      t = qt(new Proxy({}, { get: e }));
    return t;
  }
  const ju = Zu();
  function Yu() {
    const e = (n, o) => {
        var l, c;
        const d = JSON.parse(o);
        if (
          !(
            !d.component_id ||
            !((l = d == null ? void 0 : d.body) == null
              ? void 0
              : l.start_time) ||
            !((c = d == null ? void 0 : d.body) == null ? void 0 : c.end_time)
          )
        ) {
          if (!n[o]) {
            const m = Uu(d);
            t.update((h) => ((h[o] = m), h)), (n[o] = m);
          }
          return n[o];
        }
      },
      t = qt(new Proxy({}, { get: e }));
    return t;
  }
  const qu = Yu(),
    bi = {};
  function Ju() {
    const { subscribe: e, set: t } = qt({});
    return {
      subscribe: e,
      getContactAvatar: async (n, o, l = !1) => {
        if (!bi[o] || l) {
          const c = await Su(n, o)
            .then((d) => d)
            .catch(() => "");
          c && (bi[o] = c);
        }
        return bi[o];
      },
      reset: () => t({}),
    };
  }
  const Bu = Ju();
  var Gu = Object.defineProperty,
    Za = Object.getOwnPropertySymbols,
    Qu = Object.prototype.hasOwnProperty,
    Xu = Object.prototype.propertyIsEnumerable,
    ja = (e, t, n) =>
      t in e
        ? Gu(e, t, { enumerable: !0, configurable: !0, writable: !0, value: n })
        : (e[t] = n),
    Jt = (e, t) => {
      for (var n in t || (t = {})) Qu.call(t, n) && ja(e, n, t[n]);
      if (Za) for (var n of Za(t)) Xu.call(t, n) && ja(e, n, t[n]);
      return e;
    };
  async function Ya(e) {
    const t = [];
    for (let n = 0; n < e; n++) t.push({ isLoaded: !1, threads: [] });
    return t;
  }
  function Ku() {
    const { subscribe: e, set: t, update: n } = qt({});
    let o = {},
      l;
    return {
      subscribe: e,
      set: t,
      getThreads: async (c, d, m, h = !1) => {
        const y = JSON.stringify(c);
        if (!c.component_id && !c.access_token) return [];
        if (l === void 0 || h) {
          const p = c.thread_ids ? c.thread_ids.length : await za(c).catch(Sn);
          p && (l = p);
        }
        if (!Array.isArray(o[y]) || h) {
          const p = Math.ceil(l / m);
          o[y] = await Ya(p);
        }
        if (typeof o[y][d] == "undefined") return [];
        if (!o[y][d].isLoaded) {
          const p = await Ua(c, m, d * m).catch(Sn);
          p && ((o[y][d].threads = p), (o[y][d].isLoaded = !0));
        }
        return n((p) => ((p[y] = o[y]), Jt({}, p))), o[y][d].threads;
      },
      getNumberOfItems: async (c) => {
        if (!c.component_id && !c.access_token) return 0;
        if (typeof l == "undefined") {
          const d = await za(c).catch(Sn);
          d && (l = d);
        }
        return l;
      },
      getThreadsWithSearchKeyword: async (c, d = !1) => {
        if (!c.component_id && !c.access_token) return [];
        const m = JSON.stringify(c);
        if (
          ((!Array.isArray(o[m]) || d) && (o[m] = await Ya(1)),
          !o[m][0].isLoaded || d)
        ) {
          const h = await Eu(c).catch(Sn);
          h && ((o[m][0].threads = h), (o[m][0].isLoaded = !0));
        }
        return n((h) => ((h[m] = o[m]), Jt({}, h))), o[m][0].threads;
      },
      updateThread: async (c, d, m, h, y) => {
        const p = await Nu(c, m).catch(Sn);
        if (!o[d][h].isLoaded) {
          const w = await Ua(JSON.parse(d), y, h * y).catch(Sn);
          w && ((o[d][h].threads = w), (o[d][h].isLoaded = !0));
        }
        return (
          (o[d][h].threads = o[d][h].threads.map(
            (w) => (p && w.id === p.id && (w = Object.assign(w, p)), w),
          )),
          n((w) => ((w[d] = o[d]), Jt({}, w))),
          o[d][h].threads
        );
      },
      updateThreadSelection: (c, d, m) => {
        const h = o[c][d].threads;
        if (m) {
          const y = h.find((p) => p.id === m);
          y && (y.selected = !y.selected);
        } else {
          const y = h.some((p) => p.selected);
          for (const p of h) p.selected = !y;
        }
        return n((y) => ((y[c] = o[c]), Jt({}, y))), o[c][d].threads;
      },
      reset: () => {
        (o = {}), t({});
      },
      hydrateMessageInThread: (c, d, m) => {
        var h, y, p;
        const w = JSON.stringify(d),
          k =
            (y = (h = o[w][m]) == null ? void 0 : h.threads) == null
              ? void 0
              : y.find((N) => N.id === c.thread_id);
        if (k) {
          const N =
            (p = k.messages) == null ? void 0 : p.find((T) => T.id === c.id);
          N
            ? ((N.body = c.body),
              n((T) => {
                if (c.thread_id) {
                  let H = T[w][m].threads.find((F) => F.id === k.id);
                  H && (H = JSON.parse(JSON.stringify(k)));
                }
                return Jt({}, T);
              }))
            : n((T) => {
                if (c.thread_id) {
                  let H = T[w][m].threads.find((F) => F.id === k.id);
                  if (H) {
                    const F = k.messages;
                    F.push(c),
                      (k.messages = F),
                      (k.snippet = c.snippet),
                      (k.drafts = k.drafts.filter((I) => I.id !== c.id)),
                      (H = JSON.parse(JSON.stringify(k)));
                  }
                }
                return Jt({}, T);
              });
        }
        return o[w][m].threads;
      },
      hydrateDraftInThread: (c, d, m) => {
        var h, y, p;
        const w = JSON.stringify(d),
          k =
            (y = (h = o[w][m]) == null ? void 0 : h.threads) == null
              ? void 0
              : y.find((N) => N.id === c.thread_id);
        if (k) {
          const N =
            (p = k.drafts) == null ? void 0 : p.find((T) => T.id === c.id);
          if (c.thread_id) {
            if (N) Object.assign(N, c);
            else {
              const T = k.drafts;
              T.push(c), (k.drafts = T);
            }
            n((T) => {
              let H = T[w][m].threads.find((F) => F.id === k.id);
              return H && (H = JSON.parse(JSON.stringify(k))), Jt({}, T);
            });
          }
        }
        return o[w][m].threads;
      },
    };
  }
  const $u = Ku();
  mu($u, (e) => {
    const t = {};
    return (
      Object.entries(e).forEach(
        ([n, o]) => (t[n] = o.map((l) => l.threads).flat()),
      ),
      t
    );
  });
  function el() {
    const e = (n, o) => {
        const l = JSON.parse(o);
        if (!!l.component_id) {
          if (!n[o]) {
            const c = Iu(l.component_id, l.access_token);
            t.update((d) => ((d[o] = c), d)), (n[o] = c);
          }
          return n[o];
        }
      },
      t = qt(new Proxy({}, { get: e }));
    return t;
  }
  const tl = el();
  function nl(e) {
    return (t, n) => {
      e.dispatchEvent &&
        e.dispatchEvent(new CustomEvent(t, { detail: n, composed: !0 }));
    };
  }
  function wi(e, t, n) {
    return new Proxy(e, {
      get: (o, l) =>
        l === "toString" || l === "toJSON"
          ? () => JSON.stringify(o)
          : Reflect.get(o, l) !== void 0
          ? qa(Reflect.get(o, l), n[l])
          : t && l in t
          ? qa(t[l], n[l])
          : n[l],
      ownKeys: (o) => {
        const l = new Set([
          ...Reflect.ownKeys(o),
          ...Object.keys(t),
          ...Object.keys(n),
        ]);
        return Array.from(l);
      },
      getOwnPropertyDescriptor: (o, l) => {
        var c, d;
        let m = Reflect.getOwnPropertyDescriptor(o, l);
        return (
          m ||
            ((m =
              (d =
                (c = t && Object.getOwnPropertyDescriptor(t, l)) != null
                  ? c
                  : n && Object.getOwnPropertyDescriptor(n, l)) != null
                ? d
                : { configurable: !0, enumerable: !0, writable: !0 }),
            Reflect.defineProperty(o, l, m)),
          m
        );
      },
    });
  }
  function qa(e, t) {
    if (e) {
      if (typeof t == "boolean") return rl(e);
      if (typeof t == "number") return Number(e);
      if (t instanceof Date) return new Date(e);
    }
    return e === void 0 ? (t != null ? t : null) : e;
  }
  function rl(e) {
    return [!0, "true", "1"].includes(e);
  }
  function Ja(e, t) {
    return t.every((n) => e.includes(n));
  }
  function Ba(e) {
    let t, n, o, l, c, d;
    function m(p, w) {
      if (p[2] === "HostDomainNotAllowedError") return al;
      if (p[2] === "IncompatibleProperties") return il;
    }
    let h = m(e),
      y = h && h(e);
    return {
      c() {
        var p, w;
        (t = G("div")),
          y && y.c(),
          (n = we()),
          (o = G("span")),
          (o.textContent = "Debug info:"),
          (l = we()),
          (c = G("textarea")),
          z(o, "class", "details"),
          z(c, "class", "details"),
          (c.readOnly = !0),
          (c.value = d =
            `
      ` +
            e[2] +
            ": " +
            e[0] +
            `
      ` +
            ((w = (p = e[1].message) == null ? void 0 : p.message) != null
              ? w
              : "") +
            `
    `),
          z(t, "class", "message-container");
      },
      m(p, w) {
        ie(p, t, w), y && y.m(t, null), j(t, n), j(t, o), j(t, l), j(t, c);
      },
      p(p, w) {
        var k, N;
        h === (h = m(p)) && y
          ? y.p(p, w)
          : (y && y.d(1), (y = h && h(p)), y && (y.c(), y.m(t, n))),
          w & 7 &&
            d !==
              (d =
                `
      ` +
                p[2] +
                ": " +
                p[0] +
                `
      ` +
                ((N = (k = p[1].message) == null ? void 0 : k.message) != null
                  ? N
                  : "") +
                `
    `) &&
            (c.value = d);
      },
      d(p) {
        p && $(t), y && y.d();
      },
    };
  }
  function il(e) {
    let t;
    return {
      c() {
        (t = G("h3")),
          (t.textContent =
            "Your component properties do not work with each other.");
      },
      m(n, o) {
        ie(n, t, o);
      },
      p: ae,
      d(n) {
        n && $(t);
      },
    };
  }
  function al(e) {
    let t, n, o, l, c, d;
    return {
      c() {
        (t = G("h3")),
          (n = xe(`You are trying to access this component from\xA0
        `)),
          (o = G("code")),
          (o.textContent = `${window.location.hostname}`),
          (l = xe(`. The component's settings do not
        allow access from this domain.`)),
          (c = we()),
          (d = G("h4")),
          (d.innerHTML = `The list of allowed domains can be modified in your\xA0
        <a href="https://dashboard.nylas.com">Dashboard</a>.`);
      },
      m(m, h) {
        ie(m, t, h), j(t, n), j(t, o), j(t, l), ie(m, c, h), ie(m, d, h);
      },
      p: ae,
      d(m) {
        m && $(t), m && $(c), m && $(d);
      },
    };
  }
  function ol(e) {
    let t,
      n = e[2] && e[3] && Ba(e);
    return {
      c() {
        n && n.c(), (t = mi()), (this.c = ae);
      },
      m(o, l) {
        n && n.m(o, l), ie(o, t, l);
      },
      p(o, [l]) {
        o[2] && o[3]
          ? n
            ? n.p(o, l)
            : ((n = Ba(o)), n.c(), n.m(t.parentNode, t))
          : n && (n.d(1), (n = null));
      },
      i: ae,
      o: ae,
      d(o) {
        n && n.d(o), o && $(t);
      },
    };
  }
  function sl(e, t, n) {
    let o;
    Zn(e, pi, (k) => n(8, (o = k)));
    var l, c, d, m;
    let { id: h } = t,
      y,
      p;
    const w =
      window.location.href.includes("localhost") ||
      window.location.href.includes("127.0.0.1");
    return (
      (e.$$set = (k) => {
        "id" in k && n(0, (h = k.id));
      }),
      (e.$$.update = () => {
        e.$$.dirty & 499 &&
          (n(
            1,
            (y = n(4, (l = o[h])) !== null && l !== void 0 ? l : { name: "" }),
          ),
          n(
            2,
            (p =
              n(
                7,
                (m =
                  n(5, (c = y.name)) !== null && c !== void 0
                    ? c
                    : n(6, (d = y.message)) === null || d === void 0
                    ? void 0
                    : d.name),
              ) !== null && m !== void 0
                ? m
                : ""),
          ));
      }),
      [h, y, p, w, l, c, d, m, o]
    );
  }
  class ul extends Qn {
    constructor(t) {
      super();
      (this.shadowRoot.innerHTML = `<style>.message-container{background:#fff6f6;border-radius:5px;box-shadow:0 0 0 1px #aa92a0 inset, 0 0 0 0 transparent;color:#9f3a38;font-size:1.25rem;padding:10px;margin:0 auto;transition:opacity 500ms ease, color 500ms ease,
      background-color 500ms ease, box-shadow 500ms ease,
      -webkit-box-shadow 500ms ease}.message-container *:focus{outline:5px auto Highlight;outline:5px auto -webkit-focus-ring-color}.details{color:#494949;font-size:0.75rem;width:100%}</style>`),
        bn(
          this,
          {
            target: this.shadowRoot,
            props: Nr(this.attributes),
            customElement: !0,
          },
          sl,
          ol,
          Qs,
          { id: 0 },
          null,
        ),
        t &&
          (t.target && ie(t.target, this, t.anchor),
          t.props && (this.$set(t.props), J()));
    }
    static get observedAttributes() {
      return ["id"];
    }
    get id() {
      return this.$$.ctx[0];
    }
    set id(t) {
      this.$$set({ id: t }), J();
    }
  }
  customElements.define("nylas-error", ul);
  var ki = new Date(),
    Si = new Date();
  function Ve(e, t, n, o) {
    function l(c) {
      return e((c = arguments.length === 0 ? new Date() : new Date(+c))), c;
    }
    return (
      (l.floor = function (c) {
        return e((c = new Date(+c))), c;
      }),
      (l.ceil = function (c) {
        return e((c = new Date(c - 1))), t(c, 1), e(c), c;
      }),
      (l.round = function (c) {
        var d = l(c),
          m = l.ceil(c);
        return c - d < m - c ? d : m;
      }),
      (l.offset = function (c, d) {
        return t((c = new Date(+c)), d == null ? 1 : Math.floor(d)), c;
      }),
      (l.range = function (c, d, m) {
        var h = [],
          y;
        if (
          ((c = l.ceil(c)),
          (m = m == null ? 1 : Math.floor(m)),
          !(c < d) || !(m > 0))
        )
          return h;
        do h.push((y = new Date(+c))), t(c, m), e(c);
        while (y < c && c < d);
        return h;
      }),
      (l.filter = function (c) {
        return Ve(
          function (d) {
            if (d >= d) for (; e(d), !c(d); ) d.setTime(d - 1);
          },
          function (d, m) {
            if (d >= d)
              if (m < 0) for (; ++m <= 0; ) for (; t(d, -1), !c(d); );
              else for (; --m >= 0; ) for (; t(d, 1), !c(d); );
          },
        );
      }),
      n &&
        ((l.count = function (c, d) {
          return (
            ki.setTime(+c), Si.setTime(+d), e(ki), e(Si), Math.floor(n(ki, Si))
          );
        }),
        (l.every = function (c) {
          return (
            (c = Math.floor(c)),
            !isFinite(c) || !(c > 0)
              ? null
              : c > 1
              ? l.filter(
                  o
                    ? function (d) {
                        return o(d) % c == 0;
                      }
                    : function (d) {
                        return l.count(0, d) % c == 0;
                      },
                )
              : l
          );
        })),
      l
    );
  }
  var Ti = Ve(
    function () {},
    function (e, t) {
      e.setTime(+e + t);
    },
    function (e, t) {
      return t - e;
    },
  );
  Ti.every = function (e) {
    return (
      (e = Math.floor(e)),
      !isFinite(e) || !(e > 0)
        ? null
        : e > 1
        ? Ve(
            function (t) {
              t.setTime(Math.floor(t / e) * e);
            },
            function (t, n) {
              t.setTime(+t + n * e);
            },
            function (t, n) {
              return (n - t) / e;
            },
          )
        : Ti
    );
  };
  const Tt = 1e3,
    ft = Tt * 60,
    Bt = ft * 60,
    Gt = Bt * 24,
    Oi = Gt * 7,
    Ga = Gt * 30,
    Mi = Gt * 365;
  var Xn = Ve(
      function (e) {
        e.setTime(e - e.getMilliseconds());
      },
      function (e, t) {
        e.setTime(+e + t * Tt);
      },
      function (e, t) {
        return (t - e) / Tt;
      },
      function (e) {
        return e.getUTCSeconds();
      },
    ),
    Ot = Ve(
      function (e) {
        e.setTime(e - e.getMilliseconds() - e.getSeconds() * Tt);
      },
      function (e, t) {
        e.setTime(+e + t * ft);
      },
      function (e, t) {
        return (t - e) / ft;
      },
      function (e) {
        return e.getMinutes();
      },
    ),
    Ut = Ve(
      function (e) {
        e.setTime(
          e - e.getMilliseconds() - e.getSeconds() * Tt - e.getMinutes() * ft,
        );
      },
      function (e, t) {
        e.setTime(+e + t * Bt);
      },
      function (e, t) {
        return (t - e) / Bt;
      },
      function (e) {
        return e.getHours();
      },
    ),
    Ee = Ve(
      (e) => e.setHours(0, 0, 0, 0),
      (e, t) => e.setDate(e.getDate() + t),
      (e, t) =>
        (t - e - (t.getTimezoneOffset() - e.getTimezoneOffset()) * ft) / Gt,
      (e) => e.getDate() - 1,
    );
  function Qt(e) {
    return Ve(
      function (t) {
        t.setDate(t.getDate() - ((t.getDay() + 7 - e) % 7)),
          t.setHours(0, 0, 0, 0);
      },
      function (t, n) {
        t.setDate(t.getDate() + n * 7);
      },
      function (t, n) {
        return (
          (n - t - (n.getTimezoneOffset() - t.getTimezoneOffset()) * ft) / Oi
        );
      },
    );
  }
  var Tn = Qt(0),
    Di = Qt(1);
  Qt(2), Qt(3);
  var Kn = Qt(4);
  Qt(5), Qt(6);
  var Qa = Ve(
      function (e) {
        e.setDate(1), e.setHours(0, 0, 0, 0);
      },
      function (e, t) {
        e.setMonth(e.getMonth() + t);
      },
      function (e, t) {
        return (
          t.getMonth() - e.getMonth() + (t.getFullYear() - e.getFullYear()) * 12
        );
      },
      function (e) {
        return e.getMonth();
      },
    ),
    zt = Ve(
      function (e) {
        e.setMonth(0, 1), e.setHours(0, 0, 0, 0);
      },
      function (e, t) {
        e.setFullYear(e.getFullYear() + t);
      },
      function (e, t) {
        return t.getFullYear() - e.getFullYear();
      },
      function (e) {
        return e.getFullYear();
      },
    );
  zt.every = function (e) {
    return !isFinite((e = Math.floor(e))) || !(e > 0)
      ? null
      : Ve(
          function (t) {
            t.setFullYear(Math.floor(t.getFullYear() / e) * e),
              t.setMonth(0, 1),
              t.setHours(0, 0, 0, 0);
          },
          function (t, n) {
            t.setFullYear(t.getFullYear() + n * e);
          },
        );
  };
  var Xa = Ve(
    function (e) {
      e.setUTCHours(0, 0, 0, 0);
    },
    function (e, t) {
      e.setUTCDate(e.getUTCDate() + t);
    },
    function (e, t) {
      return (t - e) / Gt;
    },
    function (e) {
      return e.getUTCDate() - 1;
    },
  );
  function Xt(e) {
    return Ve(
      function (t) {
        t.setUTCDate(t.getUTCDate() - ((t.getUTCDay() + 7 - e) % 7)),
          t.setUTCHours(0, 0, 0, 0);
      },
      function (t, n) {
        t.setUTCDate(t.getUTCDate() + n * 7);
      },
      function (t, n) {
        return (n - t) / Oi;
      },
    );
  }
  var ll = Xt(0),
    xi = Xt(1);
  Xt(2), Xt(3);
  var $n = Xt(4);
  Xt(5), Xt(6);
  var On = Ve(
    function (e) {
      e.setUTCMonth(0, 1), e.setUTCHours(0, 0, 0, 0);
    },
    function (e, t) {
      e.setUTCFullYear(e.getUTCFullYear() + t);
    },
    function (e, t) {
      return t.getUTCFullYear() - e.getUTCFullYear();
    },
    function (e) {
      return e.getUTCFullYear();
    },
  );
  On.every = function (e) {
    return !isFinite((e = Math.floor(e))) || !(e > 0)
      ? null
      : Ve(
          function (t) {
            t.setUTCFullYear(Math.floor(t.getUTCFullYear() / e) * e),
              t.setUTCMonth(0, 1),
              t.setUTCHours(0, 0, 0, 0);
          },
          function (t, n) {
            t.setUTCFullYear(t.getUTCFullYear() + n * e);
          },
        );
  };
  function Ei(e, t) {
    return e == null || t == null
      ? NaN
      : e < t
      ? -1
      : e > t
      ? 1
      : e >= t
      ? 0
      : NaN;
  }
  function Ni(e) {
    let t = e,
      n = e,
      o = e;
    e.length !== 2 &&
      ((t = (m, h) => e(m) - h), (n = Ei), (o = (m, h) => Ei(e(m), h)));
    function l(m, h, y = 0, p = m.length) {
      if (y < p) {
        if (n(h, h) !== 0) return p;
        do {
          const w = (y + p) >>> 1;
          o(m[w], h) < 0 ? (y = w + 1) : (p = w);
        } while (y < p);
      }
      return y;
    }
    function c(m, h, y = 0, p = m.length) {
      if (y < p) {
        if (n(h, h) !== 0) return p;
        do {
          const w = (y + p) >>> 1;
          o(m[w], h) <= 0 ? (y = w + 1) : (p = w);
        } while (y < p);
      }
      return y;
    }
    function d(m, h, y = 0, p = m.length) {
      const w = l(m, h, y, p - 1);
      return w > y && t(m[w - 1], h) > -t(m[w], h) ? w - 1 : w;
    }
    return { left: l, center: d, right: c };
  }
  function fl(e) {
    return e === null ? NaN : +e;
  }
  const cl = Ni(Ei).right;
  Ni(fl).center;
  var Ii = Math.sqrt(50),
    Ci = Math.sqrt(10),
    Ai = Math.sqrt(2);
  function dl(e, t, n) {
    var o,
      l = -1,
      c,
      d,
      m;
    if (((t = +t), (e = +e), (n = +n), e === t && n > 0)) return [e];
    if (
      ((o = t < e) && ((c = e), (e = t), (t = c)),
      (m = Ka(e, t, n)) === 0 || !isFinite(m))
    )
      return [];
    if (m > 0) {
      let h = Math.round(e / m),
        y = Math.round(t / m);
      for (
        h * m < e && ++h, y * m > t && --y, d = new Array((c = y - h + 1));
        ++l < c;

      )
        d[l] = (h + l) * m;
    } else {
      m = -m;
      let h = Math.round(e * m),
        y = Math.round(t * m);
      for (
        h / m < e && ++h, y / m > t && --y, d = new Array((c = y - h + 1));
        ++l < c;

      )
        d[l] = (h + l) / m;
    }
    return o && d.reverse(), d;
  }
  function Ka(e, t, n) {
    var o = (t - e) / Math.max(0, n),
      l = Math.floor(Math.log(o) / Math.LN10),
      c = o / Math.pow(10, l);
    return l >= 0
      ? (c >= Ii ? 10 : c >= Ci ? 5 : c >= Ai ? 2 : 1) * Math.pow(10, l)
      : -Math.pow(10, -l) / (c >= Ii ? 10 : c >= Ci ? 5 : c >= Ai ? 2 : 1);
  }
  function Fi(e, t, n) {
    var o = Math.abs(t - e) / Math.max(0, n),
      l = Math.pow(10, Math.floor(Math.log(o) / Math.LN10)),
      c = o / l;
    return (
      c >= Ii ? (l *= 10) : c >= Ci ? (l *= 5) : c >= Ai && (l *= 2),
      t < e ? -l : l
    );
  }
  function hl(e, t, n, o, l, c) {
    const d = [
      [Xn, 1, Tt],
      [Xn, 5, 5 * Tt],
      [Xn, 15, 15 * Tt],
      [Xn, 30, 30 * Tt],
      [c, 1, ft],
      [c, 5, 5 * ft],
      [c, 15, 15 * ft],
      [c, 30, 30 * ft],
      [l, 1, Bt],
      [l, 3, 3 * Bt],
      [l, 6, 6 * Bt],
      [l, 12, 12 * Bt],
      [o, 1, Gt],
      [o, 2, 2 * Gt],
      [n, 1, Oi],
      [t, 1, Ga],
      [t, 3, 3 * Ga],
      [e, 1, Mi],
    ];
    function m(y, p, w) {
      const k = p < y;
      k && ([y, p] = [p, y]);
      const N = w && typeof w.range == "function" ? w : h(y, p, w),
        T = N ? N.range(y, +p + 1) : [];
      return k ? T.reverse() : T;
    }
    function h(y, p, w) {
      const k = Math.abs(p - y) / w,
        N = Ni(([, , F]) => F).right(d, k);
      if (N === d.length) return e.every(Fi(y / Mi, p / Mi, w));
      if (N === 0) return Ti.every(Math.max(Fi(y, p, w), 1));
      const [T, H] = d[k / d[N - 1][2] < d[N][2] / k ? N - 1 : N];
      return T.every(H);
    }
    return [m, h];
  }
  const [ml, gl] = hl(zt, Qa, Tn, Ee, Ut, Ot);
  function $a(e, t) {
    switch (arguments.length) {
      case 0:
        break;
      case 1:
        this.range(e);
        break;
      default:
        this.range(t).domain(e);
        break;
    }
    return this;
  }
  function Li(e, t, n) {
    (e.prototype = t.prototype = n), (n.constructor = e);
  }
  function eo(e, t) {
    var n = Object.create(e.prototype);
    for (var o in t) n[o] = t[o];
    return n;
  }
  function er() {}
  var tr = 0.7,
    zr = 1 / tr,
    Mn = "\\s*([+-]?\\d+)\\s*",
    nr = "\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",
    ct = "\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",
    yl = /^#([0-9a-f]{3,8})$/,
    vl = new RegExp("^rgb\\(" + [Mn, Mn, Mn] + "\\)$"),
    _l = new RegExp("^rgb\\(" + [ct, ct, ct] + "\\)$"),
    pl = new RegExp("^rgba\\(" + [Mn, Mn, Mn, nr] + "\\)$"),
    bl = new RegExp("^rgba\\(" + [ct, ct, ct, nr] + "\\)$"),
    wl = new RegExp("^hsl\\(" + [nr, ct, ct] + "\\)$"),
    kl = new RegExp("^hsla\\(" + [nr, ct, ct, nr] + "\\)$"),
    to = {
      aliceblue: 15792383,
      antiquewhite: 16444375,
      aqua: 65535,
      aquamarine: 8388564,
      azure: 15794175,
      beige: 16119260,
      bisque: 16770244,
      black: 0,
      blanchedalmond: 16772045,
      blue: 255,
      blueviolet: 9055202,
      brown: 10824234,
      burlywood: 14596231,
      cadetblue: 6266528,
      chartreuse: 8388352,
      chocolate: 13789470,
      coral: 16744272,
      cornflowerblue: 6591981,
      cornsilk: 16775388,
      crimson: 14423100,
      cyan: 65535,
      darkblue: 139,
      darkcyan: 35723,
      darkgoldenrod: 12092939,
      darkgray: 11119017,
      darkgreen: 25600,
      darkgrey: 11119017,
      darkkhaki: 12433259,
      darkmagenta: 9109643,
      darkolivegreen: 5597999,
      darkorange: 16747520,
      darkorchid: 10040012,
      darkred: 9109504,
      darksalmon: 15308410,
      darkseagreen: 9419919,
      darkslateblue: 4734347,
      darkslategray: 3100495,
      darkslategrey: 3100495,
      darkturquoise: 52945,
      darkviolet: 9699539,
      deeppink: 16716947,
      deepskyblue: 49151,
      dimgray: 6908265,
      dimgrey: 6908265,
      dodgerblue: 2003199,
      firebrick: 11674146,
      floralwhite: 16775920,
      forestgreen: 2263842,
      fuchsia: 16711935,
      gainsboro: 14474460,
      ghostwhite: 16316671,
      gold: 16766720,
      goldenrod: 14329120,
      gray: 8421504,
      green: 32768,
      greenyellow: 11403055,
      grey: 8421504,
      honeydew: 15794160,
      hotpink: 16738740,
      indianred: 13458524,
      indigo: 4915330,
      ivory: 16777200,
      khaki: 15787660,
      lavender: 15132410,
      lavenderblush: 16773365,
      lawngreen: 8190976,
      lemonchiffon: 16775885,
      lightblue: 11393254,
      lightcoral: 15761536,
      lightcyan: 14745599,
      lightgoldenrodyellow: 16448210,
      lightgray: 13882323,
      lightgreen: 9498256,
      lightgrey: 13882323,
      lightpink: 16758465,
      lightsalmon: 16752762,
      lightseagreen: 2142890,
      lightskyblue: 8900346,
      lightslategray: 7833753,
      lightslategrey: 7833753,
      lightsteelblue: 11584734,
      lightyellow: 16777184,
      lime: 65280,
      limegreen: 3329330,
      linen: 16445670,
      magenta: 16711935,
      maroon: 8388608,
      mediumaquamarine: 6737322,
      mediumblue: 205,
      mediumorchid: 12211667,
      mediumpurple: 9662683,
      mediumseagreen: 3978097,
      mediumslateblue: 8087790,
      mediumspringgreen: 64154,
      mediumturquoise: 4772300,
      mediumvioletred: 13047173,
      midnightblue: 1644912,
      mintcream: 16121850,
      mistyrose: 16770273,
      moccasin: 16770229,
      navajowhite: 16768685,
      navy: 128,
      oldlace: 16643558,
      olive: 8421376,
      olivedrab: 7048739,
      orange: 16753920,
      orangered: 16729344,
      orchid: 14315734,
      palegoldenrod: 15657130,
      palegreen: 10025880,
      paleturquoise: 11529966,
      palevioletred: 14381203,
      papayawhip: 16773077,
      peachpuff: 16767673,
      peru: 13468991,
      pink: 16761035,
      plum: 14524637,
      powderblue: 11591910,
      purple: 8388736,
      rebeccapurple: 6697881,
      red: 16711680,
      rosybrown: 12357519,
      royalblue: 4286945,
      saddlebrown: 9127187,
      salmon: 16416882,
      sandybrown: 16032864,
      seagreen: 3050327,
      seashell: 16774638,
      sienna: 10506797,
      silver: 12632256,
      skyblue: 8900331,
      slateblue: 6970061,
      slategray: 7372944,
      slategrey: 7372944,
      snow: 16775930,
      springgreen: 65407,
      steelblue: 4620980,
      tan: 13808780,
      teal: 32896,
      thistle: 14204888,
      tomato: 16737095,
      turquoise: 4251856,
      violet: 15631086,
      wheat: 16113331,
      white: 16777215,
      whitesmoke: 16119285,
      yellow: 16776960,
      yellowgreen: 10145074,
    };
  Li(er, rr, {
    copy: function (e) {
      return Object.assign(new this.constructor(), this, e);
    },
    displayable: function () {
      return this.rgb().displayable();
    },
    hex: no,
    formatHex: no,
    formatHsl: Sl,
    formatRgb: ro,
    toString: ro,
  });
  function no() {
    return this.rgb().formatHex();
  }
  function Sl() {
    return uo(this).formatHsl();
  }
  function ro() {
    return this.rgb().formatRgb();
  }
  function rr(e) {
    var t, n;
    return (
      (e = (e + "").trim().toLowerCase()),
      (t = yl.exec(e))
        ? ((n = t[1].length),
          (t = parseInt(t[1], 16)),
          n === 6
            ? io(t)
            : n === 3
            ? new Ze(
                ((t >> 8) & 15) | ((t >> 4) & 240),
                ((t >> 4) & 15) | (t & 240),
                ((t & 15) << 4) | (t & 15),
                1,
              )
            : n === 8
            ? Rr(
                (t >> 24) & 255,
                (t >> 16) & 255,
                (t >> 8) & 255,
                (t & 255) / 255,
              )
            : n === 4
            ? Rr(
                ((t >> 12) & 15) | ((t >> 8) & 240),
                ((t >> 8) & 15) | ((t >> 4) & 240),
                ((t >> 4) & 15) | (t & 240),
                (((t & 15) << 4) | (t & 15)) / 255,
              )
            : null)
        : (t = vl.exec(e))
        ? new Ze(t[1], t[2], t[3], 1)
        : (t = _l.exec(e))
        ? new Ze((t[1] * 255) / 100, (t[2] * 255) / 100, (t[3] * 255) / 100, 1)
        : (t = pl.exec(e))
        ? Rr(t[1], t[2], t[3], t[4])
        : (t = bl.exec(e))
        ? Rr((t[1] * 255) / 100, (t[2] * 255) / 100, (t[3] * 255) / 100, t[4])
        : (t = wl.exec(e))
        ? so(t[1], t[2] / 100, t[3] / 100, 1)
        : (t = kl.exec(e))
        ? so(t[1], t[2] / 100, t[3] / 100, t[4])
        : to.hasOwnProperty(e)
        ? io(to[e])
        : e === "transparent"
        ? new Ze(NaN, NaN, NaN, 0)
        : null
    );
  }
  function io(e) {
    return new Ze((e >> 16) & 255, (e >> 8) & 255, e & 255, 1);
  }
  function Rr(e, t, n, o) {
    return o <= 0 && (e = t = n = NaN), new Ze(e, t, n, o);
  }
  function Tl(e) {
    return (
      e instanceof er || (e = rr(e)),
      e ? ((e = e.rgb()), new Ze(e.r, e.g, e.b, e.opacity)) : new Ze()
    );
  }
  function Ui(e, t, n, o) {
    return arguments.length === 1 ? Tl(e) : new Ze(e, t, n, o == null ? 1 : o);
  }
  function Ze(e, t, n, o) {
    (this.r = +e), (this.g = +t), (this.b = +n), (this.opacity = +o);
  }
  Li(
    Ze,
    Ui,
    eo(er, {
      brighter: function (e) {
        return (
          (e = e == null ? zr : Math.pow(zr, e)),
          new Ze(this.r * e, this.g * e, this.b * e, this.opacity)
        );
      },
      darker: function (e) {
        return (
          (e = e == null ? tr : Math.pow(tr, e)),
          new Ze(this.r * e, this.g * e, this.b * e, this.opacity)
        );
      },
      rgb: function () {
        return this;
      },
      displayable: function () {
        return (
          -0.5 <= this.r &&
          this.r < 255.5 &&
          -0.5 <= this.g &&
          this.g < 255.5 &&
          -0.5 <= this.b &&
          this.b < 255.5 &&
          0 <= this.opacity &&
          this.opacity <= 1
        );
      },
      hex: ao,
      formatHex: ao,
      formatRgb: oo,
      toString: oo,
    }),
  );
  function ao() {
    return "#" + zi(this.r) + zi(this.g) + zi(this.b);
  }
  function oo() {
    var e = this.opacity;
    return (
      (e = isNaN(e) ? 1 : Math.max(0, Math.min(1, e))),
      (e === 1 ? "rgb(" : "rgba(") +
        Math.max(0, Math.min(255, Math.round(this.r) || 0)) +
        ", " +
        Math.max(0, Math.min(255, Math.round(this.g) || 0)) +
        ", " +
        Math.max(0, Math.min(255, Math.round(this.b) || 0)) +
        (e === 1 ? ")" : ", " + e + ")")
    );
  }
  function zi(e) {
    return (
      (e = Math.max(0, Math.min(255, Math.round(e) || 0))),
      (e < 16 ? "0" : "") + e.toString(16)
    );
  }
  function so(e, t, n, o) {
    return (
      o <= 0
        ? (e = t = n = NaN)
        : n <= 0 || n >= 1
        ? (e = t = NaN)
        : t <= 0 && (e = NaN),
      new dt(e, t, n, o)
    );
  }
  function uo(e) {
    if (e instanceof dt) return new dt(e.h, e.s, e.l, e.opacity);
    if ((e instanceof er || (e = rr(e)), !e)) return new dt();
    if (e instanceof dt) return e;
    e = e.rgb();
    var t = e.r / 255,
      n = e.g / 255,
      o = e.b / 255,
      l = Math.min(t, n, o),
      c = Math.max(t, n, o),
      d = NaN,
      m = c - l,
      h = (c + l) / 2;
    return (
      m
        ? (t === c
            ? (d = (n - o) / m + (n < o) * 6)
            : n === c
            ? (d = (o - t) / m + 2)
            : (d = (t - n) / m + 4),
          (m /= h < 0.5 ? c + l : 2 - c - l),
          (d *= 60))
        : (m = h > 0 && h < 1 ? 0 : d),
      new dt(d, m, h, e.opacity)
    );
  }
  function Ol(e, t, n, o) {
    return arguments.length === 1 ? uo(e) : new dt(e, t, n, o == null ? 1 : o);
  }
  function dt(e, t, n, o) {
    (this.h = +e), (this.s = +t), (this.l = +n), (this.opacity = +o);
  }
  Li(
    dt,
    Ol,
    eo(er, {
      brighter: function (e) {
        return (
          (e = e == null ? zr : Math.pow(zr, e)),
          new dt(this.h, this.s, this.l * e, this.opacity)
        );
      },
      darker: function (e) {
        return (
          (e = e == null ? tr : Math.pow(tr, e)),
          new dt(this.h, this.s, this.l * e, this.opacity)
        );
      },
      rgb: function () {
        var e = (this.h % 360) + (this.h < 0) * 360,
          t = isNaN(e) || isNaN(this.s) ? 0 : this.s,
          n = this.l,
          o = n + (n < 0.5 ? n : 1 - n) * t,
          l = 2 * n - o;
        return new Ze(
          Ri(e >= 240 ? e - 240 : e + 120, l, o),
          Ri(e, l, o),
          Ri(e < 120 ? e + 240 : e - 120, l, o),
          this.opacity,
        );
      },
      displayable: function () {
        return (
          ((0 <= this.s && this.s <= 1) || isNaN(this.s)) &&
          0 <= this.l &&
          this.l <= 1 &&
          0 <= this.opacity &&
          this.opacity <= 1
        );
      },
      formatHsl: function () {
        var e = this.opacity;
        return (
          (e = isNaN(e) ? 1 : Math.max(0, Math.min(1, e))),
          (e === 1 ? "hsl(" : "hsla(") +
            (this.h || 0) +
            ", " +
            (this.s || 0) * 100 +
            "%, " +
            (this.l || 0) * 100 +
            "%" +
            (e === 1 ? ")" : ", " + e + ")")
        );
      },
    }),
  );
  function Ri(e, t, n) {
    return (
      (e < 60
        ? t + ((n - t) * e) / 60
        : e < 180
        ? n
        : e < 240
        ? t + ((n - t) * (240 - e)) / 60
        : t) * 255
    );
  }
  var Pi = (e) => () => e;
  function Ml(e, t) {
    return function (n) {
      return e + n * t;
    };
  }
  function Dl(e, t, n) {
    return (
      (e = Math.pow(e, n)),
      (t = Math.pow(t, n) - e),
      (n = 1 / n),
      function (o) {
        return Math.pow(e + o * t, n);
      }
    );
  }
  function xl(e) {
    return (e = +e) == 1
      ? lo
      : function (t, n) {
          return n - t ? Dl(t, n, e) : Pi(isNaN(t) ? n : t);
        };
  }
  function lo(e, t) {
    var n = t - e;
    return n ? Ml(e, n) : Pi(isNaN(e) ? t : e);
  }
  var fo = (function e(t) {
    var n = xl(t);
    function o(l, c) {
      var d = n((l = Ui(l)).r, (c = Ui(c)).r),
        m = n(l.g, c.g),
        h = n(l.b, c.b),
        y = lo(l.opacity, c.opacity);
      return function (p) {
        return (
          (l.r = d(p)), (l.g = m(p)), (l.b = h(p)), (l.opacity = y(p)), l + ""
        );
      };
    }
    return (o.gamma = e), o;
  })(1);
  function El(e, t) {
    t || (t = []);
    var n = e ? Math.min(t.length, e.length) : 0,
      o = t.slice(),
      l;
    return function (c) {
      for (l = 0; l < n; ++l) o[l] = e[l] * (1 - c) + t[l] * c;
      return o;
    };
  }
  function Nl(e) {
    return ArrayBuffer.isView(e) && !(e instanceof DataView);
  }
  function Il(e, t) {
    var n = t ? t.length : 0,
      o = e ? Math.min(n, e.length) : 0,
      l = new Array(o),
      c = new Array(n),
      d;
    for (d = 0; d < o; ++d) l[d] = Hi(e[d], t[d]);
    for (; d < n; ++d) c[d] = t[d];
    return function (m) {
      for (d = 0; d < o; ++d) c[d] = l[d](m);
      return c;
    };
  }
  function Cl(e, t) {
    var n = new Date();
    return (
      (e = +e),
      (t = +t),
      function (o) {
        return n.setTime(e * (1 - o) + t * o), n;
      }
    );
  }
  function Pr(e, t) {
    return (
      (e = +e),
      (t = +t),
      function (n) {
        return e * (1 - n) + t * n;
      }
    );
  }
  function Al(e, t) {
    var n = {},
      o = {},
      l;
    (e === null || typeof e != "object") && (e = {}),
      (t === null || typeof t != "object") && (t = {});
    for (l in t) l in e ? (n[l] = Hi(e[l], t[l])) : (o[l] = t[l]);
    return function (c) {
      for (l in n) o[l] = n[l](c);
      return o;
    };
  }
  var Vi = /[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,
    Wi = new RegExp(Vi.source, "g");
  function Fl(e) {
    return function () {
      return e;
    };
  }
  function Ll(e) {
    return function (t) {
      return e(t) + "";
    };
  }
  function Ul(e, t) {
    var n = (Vi.lastIndex = Wi.lastIndex = 0),
      o,
      l,
      c,
      d = -1,
      m = [],
      h = [];
    for (e = e + "", t = t + ""; (o = Vi.exec(e)) && (l = Wi.exec(t)); )
      (c = l.index) > n &&
        ((c = t.slice(n, c)), m[d] ? (m[d] += c) : (m[++d] = c)),
        (o = o[0]) === (l = l[0])
          ? m[d]
            ? (m[d] += l)
            : (m[++d] = l)
          : ((m[++d] = null), h.push({ i: d, x: Pr(o, l) })),
        (n = Wi.lastIndex);
    return (
      n < t.length && ((c = t.slice(n)), m[d] ? (m[d] += c) : (m[++d] = c)),
      m.length < 2
        ? h[0]
          ? Ll(h[0].x)
          : Fl(t)
        : ((t = h.length),
          function (y) {
            for (var p = 0, w; p < t; ++p) m[(w = h[p]).i] = w.x(y);
            return m.join("");
          })
    );
  }
  function Hi(e, t) {
    var n = typeof t,
      o;
    return t == null || n === "boolean"
      ? Pi(t)
      : (n === "number"
          ? Pr
          : n === "string"
          ? (o = rr(t))
            ? ((t = o), fo)
            : Ul
          : t instanceof rr
          ? fo
          : t instanceof Date
          ? Cl
          : Nl(t)
          ? El
          : Array.isArray(t)
          ? Il
          : (typeof t.valueOf != "function" &&
              typeof t.toString != "function") ||
            isNaN(t)
          ? Al
          : Pr)(e, t);
  }
  function zl(e, t) {
    return (
      (e = +e),
      (t = +t),
      function (n) {
        return Math.round(e * (1 - n) + t * n);
      }
    );
  }
  function Rl(e) {
    return function () {
      return e;
    };
  }
  function Pl(e) {
    return +e;
  }
  var co = [0, 1];
  function Dn(e) {
    return e;
  }
  function Zi(e, t) {
    return (t -= e = +e)
      ? function (n) {
          return (n - e) / t;
        }
      : Rl(isNaN(t) ? NaN : 0.5);
  }
  function Vl(e, t) {
    var n;
    return (
      e > t && ((n = e), (e = t), (t = n)),
      function (o) {
        return Math.max(e, Math.min(t, o));
      }
    );
  }
  function Wl(e, t, n) {
    var o = e[0],
      l = e[1],
      c = t[0],
      d = t[1];
    return (
      l < o ? ((o = Zi(l, o)), (c = n(d, c))) : ((o = Zi(o, l)), (c = n(c, d))),
      function (m) {
        return c(o(m));
      }
    );
  }
  function Hl(e, t, n) {
    var o = Math.min(e.length, t.length) - 1,
      l = new Array(o),
      c = new Array(o),
      d = -1;
    for (
      e[o] < e[0] && ((e = e.slice().reverse()), (t = t.slice().reverse()));
      ++d < o;

    )
      (l[d] = Zi(e[d], e[d + 1])), (c[d] = n(t[d], t[d + 1]));
    return function (m) {
      var h = cl(e, m, 1, o) - 1;
      return c[h](l[h](m));
    };
  }
  function ho(e, t) {
    return t
      .domain(e.domain())
      .range(e.range())
      .interpolate(e.interpolate())
      .clamp(e.clamp())
      .unknown(e.unknown());
  }
  function Zl() {
    var e = co,
      t = co,
      n = Hi,
      o,
      l,
      c,
      d = Dn,
      m,
      h,
      y;
    function p() {
      var k = Math.min(e.length, t.length);
      return (
        d !== Dn && (d = Vl(e[0], e[k - 1])),
        (m = k > 2 ? Hl : Wl),
        (h = y = null),
        w
      );
    }
    function w(k) {
      return k == null || isNaN((k = +k))
        ? c
        : (h || (h = m(e.map(o), t, n)))(o(d(k)));
    }
    return (
      (w.invert = function (k) {
        return d(l((y || (y = m(t, e.map(o), Pr)))(k)));
      }),
      (w.domain = function (k) {
        return arguments.length ? ((e = Array.from(k, Pl)), p()) : e.slice();
      }),
      (w.range = function (k) {
        return arguments.length ? ((t = Array.from(k)), p()) : t.slice();
      }),
      (w.rangeRound = function (k) {
        return (t = Array.from(k)), (n = zl), p();
      }),
      (w.clamp = function (k) {
        return arguments.length ? ((d = k ? !0 : Dn), p()) : d !== Dn;
      }),
      (w.interpolate = function (k) {
        return arguments.length ? ((n = k), p()) : n;
      }),
      (w.unknown = function (k) {
        return arguments.length ? ((c = k), w) : c;
      }),
      function (k, N) {
        return (o = k), (l = N), p();
      }
    );
  }
  function mo() {
    return Zl()(Dn, Dn);
  }
  function jl(e) {
    return Math.abs((e = Math.round(e))) >= 1e21
      ? e.toLocaleString("en").replace(/,/g, "")
      : e.toString(10);
  }
  function Vr(e, t) {
    if (
      (n = (e = t ? e.toExponential(t - 1) : e.toExponential()).indexOf("e")) <
      0
    )
      return null;
    var n,
      o = e.slice(0, n);
    return [o.length > 1 ? o[0] + o.slice(2) : o, +e.slice(n + 1)];
  }
  function xn(e) {
    return (e = Vr(Math.abs(e))), e ? e[1] : NaN;
  }
  function Yl(e, t) {
    return function (n, o) {
      for (
        var l = n.length, c = [], d = 0, m = e[0], h = 0;
        l > 0 &&
        m > 0 &&
        (h + m + 1 > o && (m = Math.max(1, o - h)),
        c.push(n.substring((l -= m), l + m)),
        !((h += m + 1) > o));

      )
        m = e[(d = (d + 1) % e.length)];
      return c.reverse().join(t);
    };
  }
  function ql(e) {
    return function (t) {
      return t.replace(/[0-9]/g, function (n) {
        return e[+n];
      });
    };
  }
  var Jl =
    /^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;
  function Wr(e) {
    if (!(t = Jl.exec(e))) throw new Error("invalid format: " + e);
    var t;
    return new ji({
      fill: t[1],
      align: t[2],
      sign: t[3],
      symbol: t[4],
      zero: t[5],
      width: t[6],
      comma: t[7],
      precision: t[8] && t[8].slice(1),
      trim: t[9],
      type: t[10],
    });
  }
  Wr.prototype = ji.prototype;
  function ji(e) {
    (this.fill = e.fill === void 0 ? " " : e.fill + ""),
      (this.align = e.align === void 0 ? ">" : e.align + ""),
      (this.sign = e.sign === void 0 ? "-" : e.sign + ""),
      (this.symbol = e.symbol === void 0 ? "" : e.symbol + ""),
      (this.zero = !!e.zero),
      (this.width = e.width === void 0 ? void 0 : +e.width),
      (this.comma = !!e.comma),
      (this.precision = e.precision === void 0 ? void 0 : +e.precision),
      (this.trim = !!e.trim),
      (this.type = e.type === void 0 ? "" : e.type + "");
  }
  ji.prototype.toString = function () {
    return (
      this.fill +
      this.align +
      this.sign +
      this.symbol +
      (this.zero ? "0" : "") +
      (this.width === void 0 ? "" : Math.max(1, this.width | 0)) +
      (this.comma ? "," : "") +
      (this.precision === void 0 ? "" : "." + Math.max(0, this.precision | 0)) +
      (this.trim ? "~" : "") +
      this.type
    );
  };
  function Bl(e) {
    e: for (var t = e.length, n = 1, o = -1, l; n < t; ++n)
      switch (e[n]) {
        case ".":
          o = l = n;
          break;
        case "0":
          o === 0 && (o = n), (l = n);
          break;
        default:
          if (!+e[n]) break e;
          o > 0 && (o = 0);
          break;
      }
    return o > 0 ? e.slice(0, o) + e.slice(l + 1) : e;
  }
  var go;
  function Gl(e, t) {
    var n = Vr(e, t);
    if (!n) return e + "";
    var o = n[0],
      l = n[1],
      c = l - (go = Math.max(-8, Math.min(8, Math.floor(l / 3))) * 3) + 1,
      d = o.length;
    return c === d
      ? o
      : c > d
      ? o + new Array(c - d + 1).join("0")
      : c > 0
      ? o.slice(0, c) + "." + o.slice(c)
      : "0." + new Array(1 - c).join("0") + Vr(e, Math.max(0, t + c - 1))[0];
  }
  function yo(e, t) {
    var n = Vr(e, t);
    if (!n) return e + "";
    var o = n[0],
      l = n[1];
    return l < 0
      ? "0." + new Array(-l).join("0") + o
      : o.length > l + 1
      ? o.slice(0, l + 1) + "." + o.slice(l + 1)
      : o + new Array(l - o.length + 2).join("0");
  }
  var vo = {
    "%": (e, t) => (e * 100).toFixed(t),
    b: (e) => Math.round(e).toString(2),
    c: (e) => e + "",
    d: jl,
    e: (e, t) => e.toExponential(t),
    f: (e, t) => e.toFixed(t),
    g: (e, t) => e.toPrecision(t),
    o: (e) => Math.round(e).toString(8),
    p: (e, t) => yo(e * 100, t),
    r: yo,
    s: Gl,
    X: (e) => Math.round(e).toString(16).toUpperCase(),
    x: (e) => Math.round(e).toString(16),
  };
  function _o(e) {
    return e;
  }
  var po = Array.prototype.map,
    bo = [
      "y",
      "z",
      "a",
      "f",
      "p",
      "n",
      "\xB5",
      "m",
      "",
      "k",
      "M",
      "G",
      "T",
      "P",
      "E",
      "Z",
      "Y",
    ];
  function Ql(e) {
    var t =
        e.grouping === void 0 || e.thousands === void 0
          ? _o
          : Yl(po.call(e.grouping, Number), e.thousands + ""),
      n = e.currency === void 0 ? "" : e.currency[0] + "",
      o = e.currency === void 0 ? "" : e.currency[1] + "",
      l = e.decimal === void 0 ? "." : e.decimal + "",
      c = e.numerals === void 0 ? _o : ql(po.call(e.numerals, String)),
      d = e.percent === void 0 ? "%" : e.percent + "",
      m = e.minus === void 0 ? "\u2212" : e.minus + "",
      h = e.nan === void 0 ? "NaN" : e.nan + "";
    function y(w) {
      w = Wr(w);
      var k = w.fill,
        N = w.align,
        T = w.sign,
        H = w.symbol,
        F = w.zero,
        I = w.width,
        R = w.comma,
        te = w.precision,
        ne = w.trim,
        me = w.type;
      me === "n"
        ? ((R = !0), (me = "g"))
        : vo[me] || (te === void 0 && (te = 12), (ne = !0), (me = "g")),
        (F || (k === "0" && N === "=")) && ((F = !0), (k = "0"), (N = "="));
      var L =
          H === "$"
            ? n
            : H === "#" && /[boxX]/.test(me)
            ? "0" + me.toLowerCase()
            : "",
        Z = H === "$" ? o : /[%p]/.test(me) ? d : "",
        O = vo[me],
        ue = /[defgprs%]/.test(me);
      te =
        te === void 0
          ? 6
          : /[gprs]/.test(me)
          ? Math.max(1, Math.min(21, te))
          : Math.max(0, Math.min(20, te));
      function oe(q) {
        var ve = L,
          Se = Z,
          Fe,
          ke,
          V;
        if (me === "c") (Se = O(q) + Se), (q = "");
        else {
          q = +q;
          var K = q < 0 || 1 / q < 0;
          if (
            ((q = isNaN(q) ? h : O(Math.abs(q), te)),
            ne && (q = Bl(q)),
            K && +q == 0 && T !== "+" && (K = !1),
            (ve =
              (K ? (T === "(" ? T : m) : T === "-" || T === "(" ? "" : T) + ve),
            (Se =
              (me === "s" ? bo[8 + go / 3] : "") +
              Se +
              (K && T === "(" ? ")" : "")),
            ue)
          ) {
            for (Fe = -1, ke = q.length; ++Fe < ke; )
              if (((V = q.charCodeAt(Fe)), 48 > V || V > 57)) {
                (Se = (V === 46 ? l + q.slice(Fe + 1) : q.slice(Fe)) + Se),
                  (q = q.slice(0, Fe));
                break;
              }
          }
        }
        R && !F && (q = t(q, 1 / 0));
        var Ne = ve.length + q.length + Se.length,
          Le = Ne < I ? new Array(I - Ne + 1).join(k) : "";
        switch (
          (R &&
            F &&
            ((q = t(Le + q, Le.length ? I - Se.length : 1 / 0)), (Le = "")),
          N)
        ) {
          case "<":
            q = ve + q + Se + Le;
            break;
          case "=":
            q = ve + Le + q + Se;
            break;
          case "^":
            q = Le.slice(0, (Ne = Le.length >> 1)) + ve + q + Se + Le.slice(Ne);
            break;
          default:
            q = Le + ve + q + Se;
            break;
        }
        return c(q);
      }
      return (
        (oe.toString = function () {
          return w + "";
        }),
        oe
      );
    }
    function p(w, k) {
      var N = y(((w = Wr(w)), (w.type = "f"), w)),
        T = Math.max(-8, Math.min(8, Math.floor(xn(k) / 3))) * 3,
        H = Math.pow(10, -T),
        F = bo[8 + T / 3];
      return function (I) {
        return N(H * I) + F;
      };
    }
    return { format: y, formatPrefix: p };
  }
  var Hr, wo, ko;
  Xl({ thousands: ",", grouping: [3], currency: ["$", ""] });
  function Xl(e) {
    return (Hr = Ql(e)), (wo = Hr.format), (ko = Hr.formatPrefix), Hr;
  }
  function Kl(e) {
    return Math.max(0, -xn(Math.abs(e)));
  }
  function $l(e, t) {
    return Math.max(
      0,
      Math.max(-8, Math.min(8, Math.floor(xn(t) / 3))) * 3 - xn(Math.abs(e)),
    );
  }
  function ef(e, t) {
    return (
      (e = Math.abs(e)), (t = Math.abs(t) - e), Math.max(0, xn(t) - xn(e)) + 1
    );
  }
  function tf(e, t, n, o) {
    var l = Fi(e, t, n),
      c;
    switch (((o = Wr(o == null ? ",f" : o)), o.type)) {
      case "s": {
        var d = Math.max(Math.abs(e), Math.abs(t));
        return (
          o.precision == null && !isNaN((c = $l(l, d))) && (o.precision = c),
          ko(o, d)
        );
      }
      case "":
      case "e":
      case "g":
      case "p":
      case "r": {
        o.precision == null &&
          !isNaN((c = ef(l, Math.max(Math.abs(e), Math.abs(t))))) &&
          (o.precision = c - (o.type === "e"));
        break;
      }
      case "f":
      case "%": {
        o.precision == null &&
          !isNaN((c = Kl(l))) &&
          (o.precision = c - (o.type === "%") * 2);
        break;
      }
    }
    return wo(o);
  }
  function nf(e) {
    var t = e.domain;
    return (
      (e.ticks = function (n) {
        var o = t();
        return dl(o[0], o[o.length - 1], n == null ? 10 : n);
      }),
      (e.tickFormat = function (n, o) {
        var l = t();
        return tf(l[0], l[l.length - 1], n == null ? 10 : n, o);
      }),
      (e.nice = function (n) {
        n == null && (n = 10);
        var o = t(),
          l = 0,
          c = o.length - 1,
          d = o[l],
          m = o[c],
          h,
          y,
          p = 10;
        for (
          m < d && ((y = d), (d = m), (m = y), (y = l), (l = c), (c = y));
          p-- > 0;

        ) {
          if (((y = Ka(d, m, n)), y === h)) return (o[l] = d), (o[c] = m), t(o);
          if (y > 0) (d = Math.floor(d / y) * y), (m = Math.ceil(m / y) * y);
          else if (y < 0)
            (d = Math.ceil(d * y) / y), (m = Math.floor(m * y) / y);
          else break;
          h = y;
        }
        return e;
      }),
      e
    );
  }
  function So() {
    var e = mo();
    return (
      (e.copy = function () {
        return ho(e, So());
      }),
      $a.apply(e, arguments),
      nf(e)
    );
  }
  function rf(e, t) {
    e = e.slice();
    var n = 0,
      o = e.length - 1,
      l = e[n],
      c = e[o],
      d;
    return (
      c < l && ((d = n), (n = o), (o = d), (d = l), (l = c), (c = d)),
      (e[n] = t.floor(l)),
      (e[o] = t.ceil(c)),
      e
    );
  }
  function Yi(e) {
    if (0 <= e.y && e.y < 100) {
      var t = new Date(-1, e.m, e.d, e.H, e.M, e.S, e.L);
      return t.setFullYear(e.y), t;
    }
    return new Date(e.y, e.m, e.d, e.H, e.M, e.S, e.L);
  }
  function qi(e) {
    if (0 <= e.y && e.y < 100) {
      var t = new Date(Date.UTC(-1, e.m, e.d, e.H, e.M, e.S, e.L));
      return t.setUTCFullYear(e.y), t;
    }
    return new Date(Date.UTC(e.y, e.m, e.d, e.H, e.M, e.S, e.L));
  }
  function ir(e, t, n) {
    return { y: e, m: t, d: n, H: 0, M: 0, S: 0, L: 0 };
  }
  function af(e) {
    var t = e.dateTime,
      n = e.date,
      o = e.time,
      l = e.periods,
      c = e.days,
      d = e.shortDays,
      m = e.months,
      h = e.shortMonths,
      y = ar(l),
      p = or(l),
      w = ar(c),
      k = or(c),
      N = ar(d),
      T = or(d),
      H = ar(m),
      F = or(m),
      I = ar(h),
      R = or(h),
      te = {
        a: K,
        A: Ne,
        b: Le,
        B: Kt,
        c: null,
        d: Eo,
        e: Eo,
        f: xf,
        g: Rf,
        G: Vf,
        H: Of,
        I: Mf,
        j: Df,
        L: No,
        m: Ef,
        M: Nf,
        p: $t,
        q: en,
        Q: Uo,
        s: zo,
        S: If,
        u: Cf,
        U: Af,
        V: Ff,
        w: Lf,
        W: Uf,
        x: null,
        X: null,
        y: zf,
        Y: Pf,
        Z: Wf,
        "%": Lo,
      },
      ne = {
        a: tn,
        A: nn,
        b: rn,
        B: an,
        c: null,
        d: Co,
        e: Co,
        f: Yf,
        g: tc,
        G: rc,
        H: Hf,
        I: Zf,
        j: jf,
        L: Ao,
        m: qf,
        M: Jf,
        p: on,
        q: Cn,
        Q: Uo,
        s: zo,
        S: Bf,
        u: Gf,
        U: Qf,
        V: Xf,
        w: Kf,
        W: $f,
        x: null,
        X: null,
        y: ec,
        Y: nc,
        Z: ic,
        "%": Lo,
      },
      me = {
        a: oe,
        A: q,
        b: ve,
        B: Se,
        c: Fe,
        d: Do,
        e: Do,
        f: wf,
        g: Mo,
        G: Oo,
        H: xo,
        I: xo,
        j: vf,
        L: bf,
        m: yf,
        M: _f,
        p: ue,
        q: gf,
        Q: Sf,
        s: Tf,
        S: pf,
        u: ff,
        U: cf,
        V: df,
        w: lf,
        W: hf,
        x: ke,
        X: V,
        y: Mo,
        Y: Oo,
        Z: mf,
        "%": kf,
      };
    (te.x = L(n, te)),
      (te.X = L(o, te)),
      (te.c = L(t, te)),
      (ne.x = L(n, ne)),
      (ne.X = L(o, ne)),
      (ne.c = L(t, ne));
    function L(P, re) {
      return function (se) {
        var x = [],
          B = -1,
          le = 0,
          Me = P.length,
          Ce,
          Be,
          Pt;
        for (se instanceof Date || (se = new Date(+se)); ++B < Me; )
          P.charCodeAt(B) === 37 &&
            (x.push(P.slice(le, B)),
            (Be = To[(Ce = P.charAt(++B))]) != null
              ? (Ce = P.charAt(++B))
              : (Be = Ce === "e" ? " " : "0"),
            (Pt = re[Ce]) && (Ce = Pt(se, Be)),
            x.push(Ce),
            (le = B + 1));
        return x.push(P.slice(le, B)), x.join("");
      };
    }
    function Z(P, re) {
      return function (se) {
        var x = ir(1900, void 0, 1),
          B = O(x, P, (se += ""), 0),
          le,
          Me;
        if (B != se.length) return null;
        if ("Q" in x) return new Date(x.Q);
        if ("s" in x) return new Date(x.s * 1e3 + ("L" in x ? x.L : 0));
        if (
          (re && !("Z" in x) && (x.Z = 0),
          "p" in x && (x.H = (x.H % 12) + x.p * 12),
          x.m === void 0 && (x.m = "q" in x ? x.q : 0),
          "V" in x)
        ) {
          if (x.V < 1 || x.V > 53) return null;
          "w" in x || (x.w = 1),
            "Z" in x
              ? ((le = qi(ir(x.y, 0, 1))),
                (Me = le.getUTCDay()),
                (le = Me > 4 || Me === 0 ? xi.ceil(le) : xi(le)),
                (le = Xa.offset(le, (x.V - 1) * 7)),
                (x.y = le.getUTCFullYear()),
                (x.m = le.getUTCMonth()),
                (x.d = le.getUTCDate() + ((x.w + 6) % 7)))
              : ((le = Yi(ir(x.y, 0, 1))),
                (Me = le.getDay()),
                (le = Me > 4 || Me === 0 ? Di.ceil(le) : Di(le)),
                (le = Ee.offset(le, (x.V - 1) * 7)),
                (x.y = le.getFullYear()),
                (x.m = le.getMonth()),
                (x.d = le.getDate() + ((x.w + 6) % 7)));
        } else ("W" in x || "U" in x) && ("w" in x || (x.w = "u" in x ? x.u % 7 : "W" in x ? 1 : 0), (Me = "Z" in x ? qi(ir(x.y, 0, 1)).getUTCDay() : Yi(ir(x.y, 0, 1)).getDay()), (x.m = 0), (x.d = "W" in x ? ((x.w + 6) % 7) + x.W * 7 - ((Me + 5) % 7) : x.w + x.U * 7 - ((Me + 6) % 7)));
        return "Z" in x
          ? ((x.H += (x.Z / 100) | 0), (x.M += x.Z % 100), qi(x))
          : Yi(x);
      };
    }
    function O(P, re, se, x) {
      for (var B = 0, le = re.length, Me = se.length, Ce, Be; B < le; ) {
        if (x >= Me) return -1;
        if (((Ce = re.charCodeAt(B++)), Ce === 37)) {
          if (
            ((Ce = re.charAt(B++)),
            (Be = me[Ce in To ? re.charAt(B++) : Ce]),
            !Be || (x = Be(P, se, x)) < 0)
          )
            return -1;
        } else if (Ce != se.charCodeAt(x++)) return -1;
      }
      return x;
    }
    function ue(P, re, se) {
      var x = y.exec(re.slice(se));
      return x ? ((P.p = p.get(x[0].toLowerCase())), se + x[0].length) : -1;
    }
    function oe(P, re, se) {
      var x = N.exec(re.slice(se));
      return x ? ((P.w = T.get(x[0].toLowerCase())), se + x[0].length) : -1;
    }
    function q(P, re, se) {
      var x = w.exec(re.slice(se));
      return x ? ((P.w = k.get(x[0].toLowerCase())), se + x[0].length) : -1;
    }
    function ve(P, re, se) {
      var x = I.exec(re.slice(se));
      return x ? ((P.m = R.get(x[0].toLowerCase())), se + x[0].length) : -1;
    }
    function Se(P, re, se) {
      var x = H.exec(re.slice(se));
      return x ? ((P.m = F.get(x[0].toLowerCase())), se + x[0].length) : -1;
    }
    function Fe(P, re, se) {
      return O(P, t, re, se);
    }
    function ke(P, re, se) {
      return O(P, n, re, se);
    }
    function V(P, re, se) {
      return O(P, o, re, se);
    }
    function K(P) {
      return d[P.getDay()];
    }
    function Ne(P) {
      return c[P.getDay()];
    }
    function Le(P) {
      return h[P.getMonth()];
    }
    function Kt(P) {
      return m[P.getMonth()];
    }
    function $t(P) {
      return l[+(P.getHours() >= 12)];
    }
    function en(P) {
      return 1 + ~~(P.getMonth() / 3);
    }
    function tn(P) {
      return d[P.getUTCDay()];
    }
    function nn(P) {
      return c[P.getUTCDay()];
    }
    function rn(P) {
      return h[P.getUTCMonth()];
    }
    function an(P) {
      return m[P.getUTCMonth()];
    }
    function on(P) {
      return l[+(P.getUTCHours() >= 12)];
    }
    function Cn(P) {
      return 1 + ~~(P.getUTCMonth() / 3);
    }
    return {
      format: function (P) {
        var re = L((P += ""), te);
        return (
          (re.toString = function () {
            return P;
          }),
          re
        );
      },
      parse: function (P) {
        var re = Z((P += ""), !1);
        return (
          (re.toString = function () {
            return P;
          }),
          re
        );
      },
      utcFormat: function (P) {
        var re = L((P += ""), ne);
        return (
          (re.toString = function () {
            return P;
          }),
          re
        );
      },
      utcParse: function (P) {
        var re = Z((P += ""), !0);
        return (
          (re.toString = function () {
            return P;
          }),
          re
        );
      },
    };
  }
  var To = { "-": "", _: " ", 0: "0" },
    Ie = /^\s*\d+/,
    of = /^%/,
    sf = /[\\^$*+?|[\]().{}]/g;
  function he(e, t, n) {
    var o = e < 0 ? "-" : "",
      l = (o ? -e : e) + "",
      c = l.length;
    return o + (c < n ? new Array(n - c + 1).join(t) + l : l);
  }
  function uf(e) {
    return e.replace(sf, "\\$&");
  }
  function ar(e) {
    return new RegExp("^(?:" + e.map(uf).join("|") + ")", "i");
  }
  function or(e) {
    return new Map(e.map((t, n) => [t.toLowerCase(), n]));
  }
  function lf(e, t, n) {
    var o = Ie.exec(t.slice(n, n + 1));
    return o ? ((e.w = +o[0]), n + o[0].length) : -1;
  }
  function ff(e, t, n) {
    var o = Ie.exec(t.slice(n, n + 1));
    return o ? ((e.u = +o[0]), n + o[0].length) : -1;
  }
  function cf(e, t, n) {
    var o = Ie.exec(t.slice(n, n + 2));
    return o ? ((e.U = +o[0]), n + o[0].length) : -1;
  }
  function df(e, t, n) {
    var o = Ie.exec(t.slice(n, n + 2));
    return o ? ((e.V = +o[0]), n + o[0].length) : -1;
  }
  function hf(e, t, n) {
    var o = Ie.exec(t.slice(n, n + 2));
    return o ? ((e.W = +o[0]), n + o[0].length) : -1;
  }
  function Oo(e, t, n) {
    var o = Ie.exec(t.slice(n, n + 4));
    return o ? ((e.y = +o[0]), n + o[0].length) : -1;
  }
  function Mo(e, t, n) {
    var o = Ie.exec(t.slice(n, n + 2));
    return o
      ? ((e.y = +o[0] + (+o[0] > 68 ? 1900 : 2e3)), n + o[0].length)
      : -1;
  }
  function mf(e, t, n) {
    var o = /^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n, n + 6));
    return o
      ? ((e.Z = o[1] ? 0 : -(o[2] + (o[3] || "00"))), n + o[0].length)
      : -1;
  }
  function gf(e, t, n) {
    var o = Ie.exec(t.slice(n, n + 1));
    return o ? ((e.q = o[0] * 3 - 3), n + o[0].length) : -1;
  }
  function yf(e, t, n) {
    var o = Ie.exec(t.slice(n, n + 2));
    return o ? ((e.m = o[0] - 1), n + o[0].length) : -1;
  }
  function Do(e, t, n) {
    var o = Ie.exec(t.slice(n, n + 2));
    return o ? ((e.d = +o[0]), n + o[0].length) : -1;
  }
  function vf(e, t, n) {
    var o = Ie.exec(t.slice(n, n + 3));
    return o ? ((e.m = 0), (e.d = +o[0]), n + o[0].length) : -1;
  }
  function xo(e, t, n) {
    var o = Ie.exec(t.slice(n, n + 2));
    return o ? ((e.H = +o[0]), n + o[0].length) : -1;
  }
  function _f(e, t, n) {
    var o = Ie.exec(t.slice(n, n + 2));
    return o ? ((e.M = +o[0]), n + o[0].length) : -1;
  }
  function pf(e, t, n) {
    var o = Ie.exec(t.slice(n, n + 2));
    return o ? ((e.S = +o[0]), n + o[0].length) : -1;
  }
  function bf(e, t, n) {
    var o = Ie.exec(t.slice(n, n + 3));
    return o ? ((e.L = +o[0]), n + o[0].length) : -1;
  }
  function wf(e, t, n) {
    var o = Ie.exec(t.slice(n, n + 6));
    return o ? ((e.L = Math.floor(o[0] / 1e3)), n + o[0].length) : -1;
  }
  function kf(e, t, n) {
    var o = of.exec(t.slice(n, n + 1));
    return o ? n + o[0].length : -1;
  }
  function Sf(e, t, n) {
    var o = Ie.exec(t.slice(n));
    return o ? ((e.Q = +o[0]), n + o[0].length) : -1;
  }
  function Tf(e, t, n) {
    var o = Ie.exec(t.slice(n));
    return o ? ((e.s = +o[0]), n + o[0].length) : -1;
  }
  function Eo(e, t) {
    return he(e.getDate(), t, 2);
  }
  function Of(e, t) {
    return he(e.getHours(), t, 2);
  }
  function Mf(e, t) {
    return he(e.getHours() % 12 || 12, t, 2);
  }
  function Df(e, t) {
    return he(1 + Ee.count(zt(e), e), t, 3);
  }
  function No(e, t) {
    return he(e.getMilliseconds(), t, 3);
  }
  function xf(e, t) {
    return No(e, t) + "000";
  }
  function Ef(e, t) {
    return he(e.getMonth() + 1, t, 2);
  }
  function Nf(e, t) {
    return he(e.getMinutes(), t, 2);
  }
  function If(e, t) {
    return he(e.getSeconds(), t, 2);
  }
  function Cf(e) {
    var t = e.getDay();
    return t === 0 ? 7 : t;
  }
  function Af(e, t) {
    return he(Tn.count(zt(e) - 1, e), t, 2);
  }
  function Io(e) {
    var t = e.getDay();
    return t >= 4 || t === 0 ? Kn(e) : Kn.ceil(e);
  }
  function Ff(e, t) {
    return (e = Io(e)), he(Kn.count(zt(e), e) + (zt(e).getDay() === 4), t, 2);
  }
  function Lf(e) {
    return e.getDay();
  }
  function Uf(e, t) {
    return he(Di.count(zt(e) - 1, e), t, 2);
  }
  function zf(e, t) {
    return he(e.getFullYear() % 100, t, 2);
  }
  function Rf(e, t) {
    return (e = Io(e)), he(e.getFullYear() % 100, t, 2);
  }
  function Pf(e, t) {
    return he(e.getFullYear() % 1e4, t, 4);
  }
  function Vf(e, t) {
    var n = e.getDay();
    return (
      (e = n >= 4 || n === 0 ? Kn(e) : Kn.ceil(e)),
      he(e.getFullYear() % 1e4, t, 4)
    );
  }
  function Wf(e) {
    var t = e.getTimezoneOffset();
    return (
      (t > 0 ? "-" : ((t *= -1), "+")) +
      he((t / 60) | 0, "0", 2) +
      he(t % 60, "0", 2)
    );
  }
  function Co(e, t) {
    return he(e.getUTCDate(), t, 2);
  }
  function Hf(e, t) {
    return he(e.getUTCHours(), t, 2);
  }
  function Zf(e, t) {
    return he(e.getUTCHours() % 12 || 12, t, 2);
  }
  function jf(e, t) {
    return he(1 + Xa.count(On(e), e), t, 3);
  }
  function Ao(e, t) {
    return he(e.getUTCMilliseconds(), t, 3);
  }
  function Yf(e, t) {
    return Ao(e, t) + "000";
  }
  function qf(e, t) {
    return he(e.getUTCMonth() + 1, t, 2);
  }
  function Jf(e, t) {
    return he(e.getUTCMinutes(), t, 2);
  }
  function Bf(e, t) {
    return he(e.getUTCSeconds(), t, 2);
  }
  function Gf(e) {
    var t = e.getUTCDay();
    return t === 0 ? 7 : t;
  }
  function Qf(e, t) {
    return he(ll.count(On(e) - 1, e), t, 2);
  }
  function Fo(e) {
    var t = e.getUTCDay();
    return t >= 4 || t === 0 ? $n(e) : $n.ceil(e);
  }
  function Xf(e, t) {
    return (
      (e = Fo(e)), he($n.count(On(e), e) + (On(e).getUTCDay() === 4), t, 2)
    );
  }
  function Kf(e) {
    return e.getUTCDay();
  }
  function $f(e, t) {
    return he(xi.count(On(e) - 1, e), t, 2);
  }
  function ec(e, t) {
    return he(e.getUTCFullYear() % 100, t, 2);
  }
  function tc(e, t) {
    return (e = Fo(e)), he(e.getUTCFullYear() % 100, t, 2);
  }
  function nc(e, t) {
    return he(e.getUTCFullYear() % 1e4, t, 4);
  }
  function rc(e, t) {
    var n = e.getUTCDay();
    return (
      (e = n >= 4 || n === 0 ? $n(e) : $n.ceil(e)),
      he(e.getUTCFullYear() % 1e4, t, 4)
    );
  }
  function ic() {
    return "+0000";
  }
  function Lo() {
    return "%";
  }
  function Uo(e) {
    return +e;
  }
  function zo(e) {
    return Math.floor(+e / 1e3);
  }
  var En, Ro;
  ac({
    dateTime: "%x, %X",
    date: "%-m/%-d/%Y",
    time: "%-I:%M:%S %p",
    periods: ["AM", "PM"],
    days: [
      "Sunday",
      "Monday",
      "Tuesday",
      "Wednesday",
      "Thursday",
      "Friday",
      "Saturday",
    ],
    shortDays: ["Sun", "Mon", "Tue", "Wed", "Thu", "Fri", "Sat"],
    months: [
      "January",
      "February",
      "March",
      "April",
      "May",
      "June",
      "July",
      "August",
      "September",
      "October",
      "November",
      "December",
    ],
    shortMonths: [
      "Jan",
      "Feb",
      "Mar",
      "Apr",
      "May",
      "Jun",
      "Jul",
      "Aug",
      "Sep",
      "Oct",
      "Nov",
      "Dec",
    ],
  });
  function ac(e) {
    return (
      (En = af(e)), (Ro = En.format), En.parse, En.utcFormat, En.utcParse, En
    );
  }
  function oc(e) {
    return new Date(e);
  }
  function sc(e) {
    return e instanceof Date ? +e : +new Date(+e);
  }
  function Po(e, t, n, o, l, c, d, m, h, y) {
    var p = mo(),
      w = p.invert,
      k = p.domain,
      N = y(".%L"),
      T = y(":%S"),
      H = y("%I:%M"),
      F = y("%I %p"),
      I = y("%a %d"),
      R = y("%b %d"),
      te = y("%B"),
      ne = y("%Y");
    function me(L) {
      return (
        h(L) < L
          ? N
          : m(L) < L
          ? T
          : d(L) < L
          ? H
          : c(L) < L
          ? F
          : o(L) < L
          ? l(L) < L
            ? I
            : R
          : n(L) < L
          ? te
          : ne
      )(L);
    }
    return (
      (p.invert = function (L) {
        return new Date(w(L));
      }),
      (p.domain = function (L) {
        return arguments.length ? k(Array.from(L, sc)) : k().map(oc);
      }),
      (p.ticks = function (L) {
        var Z = k();
        return e(Z[0], Z[Z.length - 1], L == null ? 10 : L);
      }),
      (p.tickFormat = function (L, Z) {
        return Z == null ? me : y(Z);
      }),
      (p.nice = function (L) {
        var Z = k();
        return (
          (!L || typeof L.range != "function") &&
            (L = t(Z[0], Z[Z.length - 1], L == null ? 10 : L)),
          L ? k(rf(Z, L)) : p
        );
      }),
      (p.copy = function () {
        return ho(p, Po(e, t, n, o, l, c, d, m, h, y));
      }),
      p
    );
  }
  function Zr() {
    return $a.apply(
      Po(ml, gl, zt, Qa, Tn, Ee, Ut, Ot, Xn, Ro).domain([
        new Date(2e3, 0, 1),
        new Date(2e3, 0, 2),
      ]),
      arguments,
    );
  }
  function Nn(e, t) {
    if (!e) return "";
    let n = 0,
      o = 0,
      l = 0;
    e.length == 4
      ? ((n = "0x" + e[1] + e[1]),
        (o = "0x" + e[2] + e[2]),
        (l = "0x" + e[3] + e[3]))
      : ((n = "0x" + e[1] + e[2]),
        (o = "0x" + e[3] + e[4]),
        (l = "0x" + e[5] + e[6])),
      (n /= 255),
      (o /= 255),
      (l /= 255);
    const c = Math.min(n, o, l),
      d = Math.max(n, o, l),
      m = d - c;
    let h = 0,
      y = 0,
      p = 0;
    return (
      m == 0
        ? (h = 0)
        : d == n
        ? (h = ((o - l) / m) % 6)
        : d == o
        ? (h = (l - n) / m + 2)
        : (h = (n - o) / m + 4),
      (h = Math.round(h * 60)),
      h < 0 && (h += 360),
      (p = (d + c) / 2),
      (y = m == 0 ? 0 : m / (1 - Math.abs(2 * p - 1))),
      (y = +(y * 100).toFixed(1)),
      (p = +(p * 100).toFixed(1)),
      "hsl(" + h + "," + y / 2 + "%," + t + "%)"
    );
  }
  var fe;
  (function (e) {
    (e.FREE = "free"),
      (e.BUSY = "busy"),
      (e.PARTIAL = "partial"),
      (e.CLOSED = "closed");
  })(fe || (fe = {}));
  var Je;
  (function (e) {
    (e.UNSELECTED = "unselected"), (e.SELECTED = "selected");
  })(Je || (Je = {}));
  var Vo;
  (function (e) {
    (e.VERIFY = "verify"), (e.CHOOSE = "choose");
  })(Vo || (Vo = {}));
  function uc(e) {
    let t,
      n =
        (e[0].given_name && e[0].surname
          ? e[0].given_name.charAt(0) + e[0].surname.charAt(0)
          : e[0].name
          ? e[0].name.charAt(0)
          : e[0].email
          ? e[0].email.charAt(0)
          : "?") + "",
      o;
    return {
      c() {
        (t = G("p")), (o = xe(n)), ye(t, "margin", "0");
      },
      m(l, c) {
        ie(l, t, c), j(t, o);
      },
      p(l, c) {
        c & 1 &&
          n !==
            (n =
              (l[0].given_name && l[0].surname
                ? l[0].given_name.charAt(0) + l[0].surname.charAt(0)
                : l[0].name
                ? l[0].name.charAt(0)
                : l[0].email
                ? l[0].email.charAt(0)
                : "?") + "") &&
          qe(o, n);
      },
      d(l) {
        l && $(t);
      },
    };
  }
  function lc(e) {
    let t, n;
    return {
      c() {
        (t = G("img")),
          z(t, "alt", ""),
          ye(t, "height", e[1]),
          ye(t, "width", e[2]),
          ye(t, "border-radius", "50%"),
          da(t.src, (n = "data:image/jpg;base64," + e[3])) || z(t, "src", n);
      },
      m(o, l) {
        ie(o, t, l);
      },
      p(o, l) {
        l & 2 && ye(t, "height", o[1]),
          l & 4 && ye(t, "width", o[2]),
          l & 8 &&
            !da(t.src, (n = "data:image/jpg;base64," + o[3])) &&
            z(t, "src", n);
      },
      d(o) {
        o && $(t);
      },
    };
  }
  function fc(e) {
    let t;
    function n(c, d) {
      if (c[3]) return lc;
      if (c[0]) return uc;
    }
    let o = n(e),
      l = o && o(e);
    return {
      c() {
        l && l.c(), (t = mi()), (this.c = ae);
      },
      m(c, d) {
        l && l.m(c, d), ie(c, t, d);
      },
      p(c, [d]) {
        o === (o = n(c)) && l
          ? l.p(c, d)
          : (l && l.d(1), (l = o && o(c)), l && (l.c(), l.m(t.parentNode, t)));
      },
      i: ae,
      o: ae,
      d(c) {
        l && l.d(c), c && $(t);
      },
    };
  }
  function cc(e, t, n) {
    let o,
      { contact: l } = t,
      { contact_query: c } = t,
      { height: d = "32px" } = t,
      { width: m = "32px" } = t;
    return (
      ou(async () => {
        l && l.picture_url
          ? n(3, (o = await Bu.getContactAvatar(c, l.id)))
          : n(3, (o = null));
      }),
      (e.$$set = (h) => {
        "contact" in h && n(0, (l = h.contact)),
          "contact_query" in h && n(4, (c = h.contact_query)),
          "height" in h && n(1, (d = h.height)),
          "width" in h && n(2, (m = h.width));
      }),
      n(3, (o = null)),
      [l, d, m, o, c]
    );
  }
  class dc extends Qn {
    constructor(t) {
      super();
      bn(
        this,
        {
          target: this.shadowRoot,
          props: Nr(this.attributes),
          customElement: !0,
        },
        cc,
        fc,
        vn,
        { contact: 0, contact_query: 4, height: 1, width: 2 },
        null,
      ),
        t &&
          (t.target && ie(t.target, this, t.anchor),
          t.props && (this.$set(t.props), J()));
    }
    static get observedAttributes() {
      return ["contact", "contact_query", "height", "width"];
    }
    get contact() {
      return this.$$.ctx[0];
    }
    set contact(t) {
      this.$$set({ contact: t }), J();
    }
    get contact_query() {
      return this.$$.ctx[4];
    }
    set contact_query(t) {
      this.$$set({ contact_query: t }), J();
    }
    get height() {
      return this.$$.ctx[1];
    }
    set height(t) {
      this.$$set({ height: t }), J();
    }
    get width() {
      return this.$$.ctx[2];
    }
    set width(t) {
      this.$$set({ width: t }), J();
    }
  }
  customElements.define("nylas-contact-image", dc);
  function hc(e) {
    let t, n, o, l, c, d, m;
    return {
      c() {
        (t = G("div")),
          (n = G("p")),
          (o = xe(e[0])),
          (l = we()),
          (c = G("button")),
          (c.textContent = "Refresh your page"),
          (this.c = ae),
          z(c, "type", "button");
      },
      m(h, y) {
        ie(h, t, y),
          j(t, n),
          j(n, o),
          j(t, l),
          j(t, c),
          d || ((m = bt(c, "click", e[1])), (d = !0));
      },
      p(h, [y]) {
        y & 1 && qe(o, h[0]);
      },
      i: ae,
      o: ae,
      d(h) {
        h && $(t), (d = !1), m();
      },
    };
  }
  function mc(e, t, n) {
    let { error_message: o = "Uh oh! Looks like an error occurred" } = t;
    const l = () => location.reload();
    return (
      (e.$$set = (c) => {
        "error_message" in c && n(0, (o = c.error_message));
      }),
      [o, l]
    );
  }
  class gc extends Qn {
    constructor(t) {
      super();
      (this.shadowRoot.innerHTML =
        "<style>*{margin:0;padding:0;border:0;font-size:100%;font:inherit;vertical-align:baseline;list-style:none}div{background:var(--red-lighter);bottom:0;color:var(--red);font-size:1rem;line-height:24px;min-height:85px;padding:20px 24px;position:fixed;right:0;min-width:240px;z-index:2}button{background:transparent;color:var(--blue);cursor:pointer;font-style:italic;text-decoration:underline;margin-top:10px}</style>"),
        bn(
          this,
          {
            target: this.shadowRoot,
            props: Nr(this.attributes),
            customElement: !0,
          },
          mc,
          hc,
          vn,
          { error_message: 0 },
          null,
        ),
        t &&
          (t.target && ie(t.target, this, t.anchor),
          t.props && (this.$set(t.props), J()));
    }
    static get observedAttributes() {
      return ["error_message"];
    }
    get error_message() {
      return this.$$.ctx[0];
    }
    set error_message(t) {
      this.$$set({ error_message: t }), J();
    }
  }
  customElements.define("nylas-message-error", gc);
  function Wo(e) {
    if (!Array.isArray(e) || e.length === 0) return "";
    const t = e[0].timestamp,
      n = e[e.length - 1].timestamp;
    return n.getMonth() !== t.getMonth()
      ? n.getFullYear() !== t.getFullYear()
        ? `${sr(t, !0)} - ${sr(n, !0)}`
        : `${sr(t)} - ${sr(n, !0)}`
      : sr(t, !0);
  }
  function jr(e) {
    const t = e.toLocaleTimeString([], { timeStyle: "short" });
    return e.getMinutes() === 0
      ? e
          .toLocaleTimeString([], { hour: "numeric", hour12: !0 })
          .replaceAll(/\./g, "")
      : t.replaceAll(/\./g, "");
  }
  function Rt(e) {
    const t = e.toLocaleTimeString([], { timeStyle: "short" });
    return t === "12:00 p.m." ? "Noon" : t.replace(/\./g, "");
  }
  function sr(e, t = !1) {
    return e
      .toLocaleDateString("default", {
        month: "short",
        year: t ? "numeric" : void 0,
      })
      .replaceAll(/\./g, "");
  }
  function yc(e) {
    let t,
      n,
      o = [
        { width: "24" },
        { height: "24" },
        { viewBox: "0 0 24 24" },
        { fill: "none" },
        { xmlns: "http://www.w3.org/2000/svg" },
        e[0],
      ],
      l = {};
    for (let c = 0; c < o.length; c += 1) l = Ft(l, o[c]);
    return {
      c() {
        (t = jn("svg")), (n = jn("path")), this.h();
      },
      l(c) {
        t = xr(c, "svg", {
          width: !0,
          height: !0,
          viewBox: !0,
          fill: !0,
          xmlns: !0,
        });
        var d = Yn(t);
        (n = xr(d, "path", {
          d: !0,
          stroke: !0,
          "stroke-width": !0,
          "stroke-miterlimit": !0,
        })),
          Yn(n).forEach($),
          d.forEach($),
          this.h();
      },
      h() {
        z(n, "d", "M14 16L9.77612 12.0014L14 8"),
          z(n, "stroke", "#6A7285"),
          z(n, "stroke-width", "1.5"),
          z(n, "stroke-miterlimit", "10"),
          Dr(t, l);
      },
      m(c, d) {
        ga(c, t, d), hi(t, n);
      },
      p(c, [d]) {
        Dr(
          t,
          (l = Sa(o, [
            { width: "24" },
            { height: "24" },
            { viewBox: "0 0 24 24" },
            { fill: "none" },
            { xmlns: "http://www.w3.org/2000/svg" },
            d & 1 && c[0],
          ])),
        );
      },
      i: ae,
      o: ae,
      d(c) {
        c && $(t);
      },
    };
  }
  function vc(e, t, n) {
    return (
      (e.$$set = (o) => {
        n(0, (t = Ft(Ft({}, t), _n(o))));
      }),
      (t = _n(t)),
      [t]
    );
  }
  class _c extends Oa {
    constructor(t) {
      super();
      bn(this, t, vc, yc, vn, {});
    }
  }
  function pc(e) {
    let t,
      n,
      o = [
        { width: "24" },
        { height: "24" },
        { viewBox: "0 0 24 24" },
        { fill: "none" },
        { xmlns: "http://www.w3.org/2000/svg" },
        e[0],
      ],
      l = {};
    for (let c = 0; c < o.length; c += 1) l = Ft(l, o[c]);
    return {
      c() {
        (t = jn("svg")), (n = jn("path")), this.h();
      },
      l(c) {
        t = xr(c, "svg", {
          width: !0,
          height: !0,
          viewBox: !0,
          fill: !0,
          xmlns: !0,
        });
        var d = Yn(t);
        (n = xr(d, "path", {
          d: !0,
          stroke: !0,
          "stroke-width": !0,
          "stroke-miterlimit": !0,
        })),
          Yn(n).forEach($),
          d.forEach($),
          this.h();
      },
      h() {
        z(n, "d", "M10 8L14.2239 11.9986L10 16"),
          z(n, "stroke", "#6A7285"),
          z(n, "stroke-width", "1.5"),
          z(n, "stroke-miterlimit", "10"),
          Dr(t, l);
      },
      m(c, d) {
        ga(c, t, d), hi(t, n);
      },
      p(c, [d]) {
        Dr(
          t,
          (l = Sa(o, [
            { width: "24" },
            { height: "24" },
            { viewBox: "0 0 24 24" },
            { fill: "none" },
            { xmlns: "http://www.w3.org/2000/svg" },
            d & 1 && c[0],
          ])),
        );
      },
      i: ae,
      o: ae,
      d(c) {
        c && $(t);
      },
    };
  }
  function bc(e, t, n) {
    return (
      (e.$$set = (o) => {
        n(0, (t = Ft(Ft({}, t), _n(o))));
      }),
      (t = _n(t)),
      [t]
    );
  }
  class wc extends Oa {
    constructor(t) {
      super();
      bn(this, t, bc, pc, vn, {});
    }
  }
  function Ji(e) {
    return e.availability !== fe.BUSY && e.availability !== fe.CLOSED;
  }
  function kc(e, t, n) {
    return [
      {
        emails: n.flatMap((o) => o.participantEmails),
        days: [...Array(7).keys()],
        start: `${e}:00`,
        end: Ho({ hour: t }),
        timezone: Intl.DateTimeFormat().resolvedOptions().timeZone,
        object_type: "open_hours",
      },
    ];
  }
  function In(e) {
    return e ? e.toString().padStart(2, "0") : "00";
  }
  function Ho({ hour: e, minute: t = 0 }) {
    return e >= 24 ? `${In(23)}:${In(59)}` : `${In(e)}:${In(t)}`;
  }
  function Sc(e, t) {
    return e.map((n) => {
      var o;
      return {
        emails: t.flatMap((l) => l.participantEmails),
        days: [n.startWeekday === 0 ? 6 : n.startWeekday - 1],
        start: `${In(n.startHour)}:${In(n.startMinute)}`,
        end: Ho({ hour: n.endHour, minute: n.endMinute }),
        timezone:
          (o = n.timeZone) != null
            ? o
            : Intl.DateTimeFormat().resolvedOptions().timeZone,
        object_type: "open_hours",
      };
    });
  }
  const Tc = (e, t, n, o, l, c) => {
    const d = Ut(new Date(new Date(e).setHours(c.start_hour))),
      m = Ut(new Date(new Date(e).setHours(c.end_hour)));
    return Zr()
      .domain([d, m])
      .ticks(Ot.every(c.slot_size))
      .slice(0, -1)
      .map((h) => {
        var y;
        const p = Ot.offset(h, c.slot_size),
          w = [];
        let k = fe.FREE;
        if (t.length) {
          const F = {
            start_time: h,
            end_time: p,
            available_calendars: [],
            expirySelection: "",
            recurrence_cadence: "",
            recurrence_expiry: "",
            fallsWithinAllowedTimeRange: !1,
          };
          for (const I of t) {
            const R =
              I.availability === fe.BUSY
                ? I.timeslots.map((ne) => ({
                    start_time: Ot.offset(ne.start_time, -c.event_buffer),
                    end_time: Ot.offset(ne.end_time, c.event_buffer),
                  }))
                : I.timeslots.map((ne) => ({
                    start_time: Ot.offset(
                      ne.start_time,
                      ne === I.timeslots[0] ? 0 : c.event_buffer,
                    ),
                    end_time: Ot.offset(
                      ne.end_time,
                      ne === I.timeslots[I.timeslots.length - 1]
                        ? 0
                        : -c.event_buffer,
                    ),
                  }));
            let te = 0;
            I.availability === fe.BUSY
              ? (te = Oc(R, F))
              : I.availability === fe.FREE &&
                (te = R.some(
                  (ne) =>
                    F.start_time >= ne.start_time && F.end_time <= ne.end_time,
                )
                  ? 1
                  : 0),
              I.availability === fe.BUSY
                ? c.capacity && c.capacity >= 1 && te < c.capacity
                  ? w.push((I == null ? void 0 : I.emailAddress) || "")
                  : te || w.push((I == null ? void 0 : I.emailAddress) || "")
                : (I.availability === fe.FREE || !I.availability) &&
                  te &&
                  w.push((I == null ? void 0 : I.emailAddress) || "");
          }
          w.length
            ? w.length === t.length
              ? (k = fe.FREE)
              : (k = fe.PARTIAL)
            : (k = fe.BUSY);
        }
        if (
          (k === fe.PARTIAL &&
            w.length < t.length * c.partial_bookable_ratio &&
            (k = fe.BUSY),
          k === fe.BUSY && c.partial_bookable_ratio === 0 && (k = fe.PARTIAL),
          k === fe.PARTIAL &&
            c.required_participants.length &&
            (Ja(n, w) || (k = fe.BUSY)),
          c.mandate_top_of_hour &&
            h.getMinutes() !== 0 &&
            ((k = fe.BUSY), (w.length = 0)),
          c.open_hours.length && k !== fe.BUSY)
        ) {
          let F = [];
          (F = c.open_hours.filter(
            (R) =>
              !Object.prototype.hasOwnProperty.call(R, "startWeekday") ||
              R.startWeekday === h.getDay() ||
              R.endWeekday === h.getDay(),
          )),
            F.some((R) => {
              const te = Object.prototype.hasOwnProperty.call(R, "startWeekday")
                ? Ee.offset(h, R.startWeekday - h.getDay())
                : new Date(h);
              te.setHours(R.startHour), te.setMinutes(R.startMinute);
              const ne = Object.prototype.hasOwnProperty.call(R, "startWeekday")
                ? Ee.offset(h, R.endWeekday - h.getDay())
                : new Date(h);
              return (
                ne.setHours(R.endHour),
                ne.setMinutes(R.endMinute),
                h >= te && p <= ne
              );
            }) || ((k = fe.CLOSED), (w.length = 0));
        }
        ((y = c.events) == null ? void 0 : y.length) > 1 &&
          o.length &&
          (o.some((I) => h >= I[0].start_time && p <= I[I.length - 1].end_time)
            ? ((k = fe.FREE), (w.length = l.length))
            : ((k = fe.BUSY), (w.length = 0)));
        const N = new Date(new Date().setHours(0, 0, 0, 0)).getTime(),
          T = (new Date(e).getTime() - N) / (1e3 * 60 * 60 * 24),
          H =
            (new Date(h).getTime() - new Date().getTime()) /
            (1e3 * 60 * 60 * 24);
        return {
          selectionStatus: Je.UNSELECTED,
          availability: k,
          available_calendars: w,
          start_time: h,
          end_time: p,
          fallsWithinAllowedTimeRange:
            H >= 0 && T >= c.min_book_ahead_days && T <= c.max_book_ahead_days,
        };
      });
  };
  function Oc(e, t) {
    return e.reduce(
      (n, o) => (
        t.start_time < o.end_time && o.start_time < t.end_time && n++, n
      ),
      0,
    );
  }
  function Zo(e, t, n) {
    const o = e.slice();
    return (o[123] = t[n]), (o[124] = t), (o[125] = n), o;
  }
  function jo(e, t, n) {
    const o = e.slice();
    return (o[126] = t[n]), o;
  }
  function Yo(e, t, n) {
    const o = e.slice();
    return (o[126] = t[n]), (o[128] = n), o;
  }
  function qo(e, t, n) {
    const o = e.slice();
    return (o[129] = t[n]), o;
  }
  function Jo(e, t, n) {
    const o = e.slice();
    return (o[134] = t[n]), o;
  }
  function Bo(e, t, n) {
    const o = e.slice();
    return (o[134] = t[n]), o;
  }
  function Mc(e) {
    let t,
      n,
      o,
      l = Wo(e[8]) + "",
      c,
      d,
      m,
      h,
      y,
      p,
      w,
      k,
      N,
      T,
      H,
      F,
      I,
      R = [],
      te = new Map(),
      ne,
      me,
      L,
      Z,
      O,
      ue,
      oe = e[2].allow_date_change && Go(e),
      q = e[2].busy_color !== e[2].closed_color && Qo(),
      ve = e[2].show_ticks && e[2].view_as === "schedule" && Xo(e),
      Se = e[8];
    const Fe = (V) => V[123].timestamp.toISOString();
    for (let V = 0; V < Se.length; V += 1) {
      let K = Zo(e, Se, V),
        Ne = Fe(K);
      te.set(Ne, (R[V] = us(Ne, K)));
    }
    let ke = e[19] && ls();
    return {
      c() {
        (t = G("main")),
          (n = G("header")),
          (o = G("h2")),
          (c = xe(l)),
          (d = we()),
          oe && oe.c(),
          (m = we()),
          (h = G("div")),
          (y = G("span")),
          (y.textContent = "Not available"),
          (p = we()),
          (w = G("span")),
          (w.textContent = "Partially available"),
          (k = we()),
          (N = G("span")),
          (N.textContent = "Available"),
          (T = we()),
          q && q.c(),
          (H = we()),
          ve && ve.c(),
          (F = we()),
          (I = G("div"));
        for (let V = 0; V < R.length; V += 1) R[V].c();
        (me = we()),
          ke && ke.c(),
          z(o, "class", "month"),
          z(y, "class", "not-available"),
          z(w, "class", "partially-available"),
          z(N, "class", "available"),
          z(h, "class", "legend"),
          be(n, "dated", e[2].allow_date_change),
          z(I, "class", "days"),
          Gn(() => e[96].call(I)),
          be(I, "schedule", e[2].view_as === "schedule"),
          be(I, "list", e[2].view_as === "list"),
          be(I, "loading", e[4]),
          be(I, "timezone", e[2].timezone),
          be(I, "error", e[19]),
          ye(t, "--busy-color-lightened", Nn(e[2].busy_color, 90)),
          ye(t, "--closed-color-lightened", Nn(e[2].closed_color, 90)),
          ye(t, "--selected-color-lightened", Nn(e[2].selected_color, 60)),
          ye(t, "--free-color", e[2].free_color),
          ye(t, "--busy-color", e[2].busy_color),
          ye(t, "--closed-color", e[2].closed_color),
          ye(t, "--partial-color", e[2].partial_color),
          ye(t, "--selected-color", e[2].selected_color),
          ye(t, "--unavailable-color", e[2].unavailable_color),
          Gn(() => e[98].call(t)),
          be(t, "ticked", e[2].show_ticks && e[2].view_as === "schedule"),
          be(t, "timezone", e[2].timezone),
          be(t, "allow_booking", e[2].allow_booking),
          be(t, "hide-header", !e[2].show_header);
      },
      m(V, K) {
        ie(V, t, K),
          j(t, n),
          j(n, o),
          j(o, c),
          j(n, d),
          oe && oe.m(n, null),
          j(n, m),
          j(n, h),
          j(h, y),
          j(h, p),
          j(h, w),
          j(h, k),
          j(h, N),
          j(h, T),
          q && q.m(h, null),
          j(t, H),
          ve && ve.m(t, null),
          j(t, F),
          j(t, I);
        for (let Ne = 0; Ne < R.length; Ne += 1) R[Ne].m(I, null);
        e[95](I),
          (ne = va(I, e[96].bind(I))),
          j(t, me),
          ke && ke.m(t, null),
          e[97](t),
          (L = va(t, e[98].bind(t))),
          (Z = !0),
          O || ((ue = bt(t, "mouseleave", e[99])), (O = !0));
      },
      p(V, K) {
        (!Z || K[0] & 256) && l !== (l = Wo(V[8]) + "") && qe(c, l),
          V[2].allow_date_change
            ? oe
              ? (oe.p(V, K), K[0] & 4 && He(oe, 1))
              : ((oe = Go(V)), oe.c(), He(oe, 1), oe.m(n, m))
            : oe &&
              (Fr(),
              ut(oe, 1, 1, () => {
                oe = null;
              }),
              Lr()),
          V[2].busy_color !== V[2].closed_color
            ? q || ((q = Qo()), q.c(), q.m(h, null))
            : q && (q.d(1), (q = null)),
          K[0] & 4 && be(n, "dated", V[2].allow_date_change),
          V[2].show_ticks && V[2].view_as === "schedule"
            ? ve
              ? ve.p(V, K)
              : ((ve = Xo(V)), ve.c(), ve.m(t, F))
            : ve && (ve.d(1), (ve = null)),
          K[0] & 60212005 &&
            ((Se = V[8]),
            (R = ka(R, K, Fe, 1, V, Se, te, I, wa, us, null, Zo))),
          K[0] & 4 && be(I, "schedule", V[2].view_as === "schedule"),
          K[0] & 4 && be(I, "list", V[2].view_as === "list"),
          K[0] & 16 && be(I, "loading", V[4]),
          K[0] & 4 && be(I, "timezone", V[2].timezone),
          K[0] & 524288 && be(I, "error", V[19]),
          V[19]
            ? ke || ((ke = ls()), ke.c(), ke.m(t, null))
            : ke && (ke.d(1), (ke = null)),
          (!Z || K[0] & 4) &&
            ye(t, "--busy-color-lightened", Nn(V[2].busy_color, 90)),
          (!Z || K[0] & 4) &&
            ye(t, "--closed-color-lightened", Nn(V[2].closed_color, 90)),
          (!Z || K[0] & 4) &&
            ye(t, "--selected-color-lightened", Nn(V[2].selected_color, 60)),
          (!Z || K[0] & 4) && ye(t, "--free-color", V[2].free_color),
          (!Z || K[0] & 4) && ye(t, "--busy-color", V[2].busy_color),
          (!Z || K[0] & 4) && ye(t, "--closed-color", V[2].closed_color),
          (!Z || K[0] & 4) && ye(t, "--partial-color", V[2].partial_color),
          (!Z || K[0] & 4) && ye(t, "--selected-color", V[2].selected_color),
          (!Z || K[0] & 4) &&
            ye(t, "--unavailable-color", V[2].unavailable_color),
          K[0] & 4 &&
            be(t, "ticked", V[2].show_ticks && V[2].view_as === "schedule"),
          K[0] & 4 && be(t, "timezone", V[2].timezone),
          K[0] & 4 && be(t, "allow_booking", V[2].allow_booking),
          K[0] & 4 && be(t, "hide-header", !V[2].show_header);
      },
      i(V) {
        Z || (He(oe), (Z = !0));
      },
      o(V) {
        ut(oe), (Z = !1);
      },
      d(V) {
        V && $(t), oe && oe.d(), q && q.d(), ve && ve.d();
        for (let K = 0; K < R.length; K += 1) R[K].d();
        e[95](null), ne(), ke && ke.d(), e[97](null), L(), (O = !1), ue();
      },
    };
  }
  function Dc(e) {
    let t;
    return {
      c() {
        (t = G("nylas-error")), ya(t, "id", e[1]);
      },
      m(n, o) {
        ie(n, t, o);
      },
      p(n, o) {
        o[0] & 2 && ya(t, "id", n[1]);
      },
      i: ae,
      o: ae,
      d(n) {
        n && $(t);
      },
    };
  }
  function Go(e) {
    let t, n, o, l, c, d, m, h, y;
    const p = [Ec, xc],
      w = [];
    function k(F, I) {
      return (
        I[0] & 33792 && (n = null),
        n == null && (n = !F[10].includes(F[15])),
        n ? 0 : 1
      );
    }
    (o = k(e, [-1, -1, -1, -1, -1])), (l = w[o] = p[o](e));
    const N = [Ic, Nc],
      T = [];
    function H(F, I) {
      return (
        I[0] & 17408 && (d = null),
        d == null && (d = !F[10].includes(F[14])),
        d ? 0 : 1
      );
    }
    return (
      (m = H(e, [-1, -1, -1, -1, -1])),
      (h = T[m] = N[m](e)),
      {
        c() {
          (t = G("div")),
            l.c(),
            (c = we()),
            h.c(),
            z(t, "class", "change-dates");
        },
        m(F, I) {
          ie(F, t, I), w[o].m(t, null), j(t, c), T[m].m(t, null), (y = !0);
        },
        p(F, I) {
          let R = o;
          (o = k(F, I)),
            o === R
              ? w[o].p(F, I)
              : (Fr(),
                ut(w[R], 1, 1, () => {
                  w[R] = null;
                }),
                Lr(),
                (l = w[o]),
                l ? l.p(F, I) : ((l = w[o] = p[o](F)), l.c()),
                He(l, 1),
                l.m(t, c));
          let te = m;
          (m = H(F, I)),
            m === te
              ? T[m].p(F, I)
              : (Fr(),
                ut(T[te], 1, 1, () => {
                  T[te] = null;
                }),
                Lr(),
                (h = T[m]),
                h ? h.p(F, I) : ((h = T[m] = N[m](F)), h.c()),
                He(h, 1),
                h.m(t, null));
        },
        i(F) {
          y || (He(l), He(h), (y = !0));
        },
        o(F) {
          ut(l), ut(h), (y = !1);
        },
        d(F) {
          F && $(t), w[o].d(), T[m].d();
        },
      }
    );
  }
  function xc(e) {
    let t;
    return {
      c() {
        t = G("span");
      },
      m(n, o) {
        ie(n, t, o);
      },
      p: ae,
      i: ae,
      o: ae,
      d(n) {
        n && $(t);
      },
    };
  }
  function Ec(e) {
    let t, n, o, l, c;
    return (
      (n = new _c({ props: { style: "height:32px;width:32px;" } })),
      {
        c() {
          (t = G("button")),
            Ta(n.$$.fragment),
            z(t, "aria-label", "Previous date");
        },
        m(d, m) {
          ie(d, t, m),
            _i(n, t, null),
            (o = !0),
            l || ((c = bt(t, "click", e[22])), (l = !0));
        },
        p: ae,
        i(d) {
          o || (He(n.$$.fragment, d), (o = !0));
        },
        o(d) {
          ut(n.$$.fragment, d), (o = !1);
        },
        d(d) {
          d && $(t), Ur(n), (l = !1), c();
        },
      }
    );
  }
  function Nc(e) {
    let t;
    return {
      c() {
        t = G("span");
      },
      m(n, o) {
        ie(n, t, o);
      },
      p: ae,
      i: ae,
      o: ae,
      d(n) {
        n && $(t);
      },
    };
  }
  function Ic(e) {
    let t, n, o, l, c;
    return (
      (n = new wc({ props: { style: "height:32px;width:32px;" } })),
      {
        c() {
          (t = G("button")), Ta(n.$$.fragment), z(t, "aria-label", "Next date");
        },
        m(d, m) {
          ie(d, t, m),
            _i(n, t, null),
            (o = !0),
            l || ((c = bt(t, "click", e[21])), (l = !0));
        },
        p: ae,
        i(d) {
          o || (He(n.$$.fragment, d), (o = !0));
        },
        o(d) {
          ut(n.$$.fragment, d), (o = !1);
        },
        d(d) {
          d && $(t), Ur(n), (l = !1), c();
        },
      }
    );
  }
  function Qo(e) {
    let t;
    return {
      c() {
        (t = G("span")), (t.textContent = "Closed"), z(t, "class", "closed");
      },
      m(n, o) {
        ie(n, t, o);
      },
      d(n) {
        n && $(t);
      },
    };
  }
  function Xo(e) {
    let t,
      n,
      o = e[2].timezone && Ko(e),
      l = e[16],
      c = [];
    for (let d = 0; d < l.length; d += 1) c[d] = es(Jo(e, l, d));
    return {
      c() {
        o && o.c(), (t = we()), (n = G("ul"));
        for (let d = 0; d < c.length; d += 1) c[d].c();
        z(n, "class", "ticks");
      },
      m(d, m) {
        o && o.m(d, m), ie(d, t, m), ie(d, n, m);
        for (let h = 0; h < c.length; h += 1) c[h].m(n, null);
        e[90](n);
      },
      p(d, m) {
        if (
          (d[2].timezone
            ? o
              ? o.p(d, m)
              : ((o = Ko(d)), o.c(), o.m(t.parentNode, t))
            : o && (o.d(1), (o = null)),
          m[0] & 65536)
        ) {
          l = d[16];
          let h;
          for (h = 0; h < l.length; h += 1) {
            const y = Jo(d, l, h);
            c[h] ? c[h].p(y, m) : ((c[h] = es(y)), c[h].c(), c[h].m(n, null));
          }
          for (; h < c.length; h += 1) c[h].d(1);
          c.length = l.length;
        }
      },
      d(d) {
        o && o.d(d), d && $(t), d && $(n), Mr(c, d), e[90](null);
      },
    };
  }
  function Ko(e) {
    let t,
      n,
      o = xa(e[16][0], e[2].timezone) + "",
      l,
      c,
      d,
      m = e[16],
      h = [];
    for (let y = 0; y < m.length; y += 1) h[y] = $o(Bo(e, m, y));
    return {
      c() {
        (t = G("div")), (n = G("p")), (l = xe(o)), (c = we()), (d = G("ul"));
        for (let y = 0; y < h.length; y += 1) h[y].c();
        z(n, "class", "timezone"),
          z(d, "class", "ticks"),
          z(t, "class", "timezone-ticks");
      },
      m(y, p) {
        ie(y, t, p), j(t, n), j(n, l), j(t, c), j(t, d);
        for (let w = 0; w < h.length; w += 1) h[w].m(d, null);
      },
      p(y, p) {
        if (
          (p[0] & 65540 &&
            o !== (o = xa(y[16][0], y[2].timezone) + "") &&
            qe(l, o),
          p[0] & 65540)
        ) {
          m = y[16];
          let w;
          for (w = 0; w < m.length; w += 1) {
            const k = Bo(y, m, w);
            h[w] ? h[w].p(k, p) : ((h[w] = $o(k)), h[w].c(), h[w].m(d, null));
          }
          for (; w < h.length; w += 1) h[w].d(1);
          h.length = m.length;
        }
      },
      d(y) {
        y && $(t), Mr(h, y);
      },
    };
  }
  function $o(e) {
    let t,
      n = Da(e[134], e[2].timezone) + "",
      o,
      l;
    return {
      c() {
        (t = G("li")), (o = xe(n)), (l = we()), z(t, "class", "tick");
      },
      m(c, d) {
        ie(c, t, d), j(t, o), j(t, l);
      },
      p(c, d) {
        d[0] & 65540 && n !== (n = Da(c[134], c[2].timezone) + "") && qe(o, n);
      },
      d(c) {
        c && $(t);
      },
    };
  }
  function es(e) {
    let t,
      n = Rt(e[134]) + "",
      o,
      l;
    return {
      c() {
        (t = G("li")), (o = xe(n)), (l = we()), z(t, "class", "tick");
      },
      m(c, d) {
        ie(c, t, d), j(t, o), j(t, l);
      },
      p(c, d) {
        d[0] & 65536 && n !== (n = Rt(c[134]) + "") && qe(o, n);
      },
      d(c) {
        c && $(t);
      },
    };
  }
  function ts(e) {
    let t,
      n =
        new Date(e[123].timestamp).toLocaleString("default", {
          day: "numeric",
        }) + "",
      o;
    return {
      c() {
        (t = G("span")), (o = xe(n)), z(t, "class", "date");
      },
      m(l, c) {
        ie(l, t, c), j(t, o);
      },
      p(l, c) {
        c[0] & 256 &&
          n !==
            (n =
              new Date(l[123].timestamp).toLocaleString("default", {
                day: "numeric",
              }) + "") &&
          qe(o, n);
      },
      d(l) {
        l && $(t);
      },
    };
  }
  function ns(e) {
    let t,
      n =
        new Date(e[123].timestamp).toLocaleString("default", {
          weekday: "short",
        }) + "",
      o;
    return {
      c() {
        (t = G("span")), (o = xe(n));
      },
      m(l, c) {
        ie(l, t, c), j(t, o);
      },
      p(l, c) {
        c[0] & 256 &&
          n !==
            (n =
              new Date(l[123].timestamp).toLocaleString("default", {
                weekday: "short",
              }) + "") &&
          qe(o, n);
      },
      d(l) {
        l && $(t);
      },
    };
  }
  function Cc(e) {
    let t,
      n = e[17](e[123]),
      o = [];
    for (let l = 0; l < n.length; l += 1) o[l] = is(jo(e, n, l));
    return {
      c() {
        t = G("div");
        for (let l = 0; l < o.length; l += 1) o[l].c();
        z(t, "class", "slot-list");
      },
      m(l, c) {
        ie(l, t, c);
        for (let d = 0; d < o.length; d += 1) o[d].m(t, null);
      },
      p(l, c) {
        if (c[0] & 8520448) {
          n = l[17](l[123]);
          let d;
          for (d = 0; d < n.length; d += 1) {
            const m = jo(l, n, d);
            o[d] ? o[d].p(m, c) : ((o[d] = is(m)), o[d].c(), o[d].m(t, null));
          }
          for (; d < o.length; d += 1) o[d].d(1);
          o.length = n.length;
        }
      },
      d(l) {
        l && $(t), Mr(o, l);
      },
    };
  }
  function Ac(e) {
    let t,
      n,
      o,
      l = [],
      c = new Map(),
      d = e[123].epochs,
      m = [];
    for (let p = 0; p < d.length; p += 1) m[p] = as(qo(e, d, p));
    let h = e[123].slots;
    const y = (p) => p[126].start_time.toISOString();
    for (let p = 0; p < h.length; p += 1) {
      let w = Yo(e, h, p),
        k = y(w);
      c.set(k, (l[p] = ss(k, w)));
    }
    return {
      c() {
        t = G("div");
        for (let p = 0; p < m.length; p += 1) m[p].c();
        (n = we()), (o = G("div"));
        for (let p = 0; p < l.length; p += 1) l[p].c();
        z(t, "class", "epochs"), z(o, "class", "slots");
      },
      m(p, w) {
        ie(p, t, w);
        for (let k = 0; k < m.length; k += 1) m[k].m(t, null);
        ie(p, n, w), ie(p, o, w);
        for (let k = 0; k < l.length; k += 1) l[k].m(o, null);
      },
      p(p, w) {
        if (w[0] & 262400) {
          d = p[123].epochs;
          let k;
          for (k = 0; k < d.length; k += 1) {
            const N = qo(p, d, k);
            m[k] ? m[k].p(N, w) : ((m[k] = as(N)), m[k].c(), m[k].m(t, null));
          }
          for (; k < m.length; k += 1) m[k].d(1);
          m.length = d.length;
        }
        w[0] & 51429633 &&
          ((h = p[123].slots),
          (l = ka(l, w, y, 1, p, h, c, o, wa, ss, null, Yo)));
      },
      d(p) {
        p && $(t), Mr(m, p), p && $(n), p && $(o);
        for (let w = 0; w < l.length; w += 1) l[w].d();
      },
    };
  }
  function rs(e) {
    let t,
      n,
      o = e[126].available_calendars.length + "",
      l,
      c,
      d = e[9].length + "",
      m,
      h;
    return {
      c() {
        (t = G("span")),
          (n = xe("(")),
          (l = xe(o)),
          (c = xe(" of ")),
          (m = xe(d)),
          (h = xe(`
                      available)`)),
          z(t, "class", "partial");
      },
      m(y, p) {
        ie(y, t, p), j(t, n), j(t, l), j(t, c), j(t, m), j(t, h);
      },
      p(y, p) {
        p[0] & 131328 &&
          o !== (o = y[126].available_calendars.length + "") &&
          qe(l, o),
          p[0] & 512 && d !== (d = y[9].length + "") && qe(m, d);
      },
      d(y) {
        y && $(t);
      },
    };
  }
  function is(e) {
    let t,
      n = Rt(new Date(e[126].start_time)) + "",
      o,
      l,
      c,
      d,
      m,
      h,
      y,
      p,
      w,
      k,
      N = e[126].availability === fe.PARTIAL && rs(e);
    function T() {
      return e[93](e[126]);
    }
    return {
      c() {
        (t = G("button")),
          (o = xe(n)),
          (l = we()),
          N && N.c(),
          (c = we()),
          z(
            t,
            "data-available-calendars",
            (d = e[126].available_calendars.toString()),
          ),
          z(
            t,
            "aria-label",
            (m =
              "" +
              (Rt(new Date(e[126].start_time)) +
                " to " +
                Rt(new Date(e[126].end_time)) +
                "; Free calendars: " +
                e[126].available_calendars.toString())),
          ),
          z(
            t,
            "class",
            (h = "slot " + e[126].selectionStatus + " " + e[126].availability),
          ),
          z(
            t,
            "data-start-time",
            (y = new Date(e[126].start_time).toLocaleString()),
          ),
          z(
            t,
            "data-end-time",
            (p = new Date(e[126].end_time).toLocaleString()),
          ),
          be(t, "pending", e[126].selectionPending);
      },
      m(H, F) {
        ie(H, t, F),
          j(t, o),
          j(t, l),
          N && N.m(t, null),
          j(t, c),
          w || ((k = bt(t, "click", T)), (w = !0));
      },
      p(H, F) {
        (e = H),
          F[0] & 131328 &&
            n !== (n = Rt(new Date(e[126].start_time)) + "") &&
            qe(o, n),
          e[126].availability === fe.PARTIAL
            ? N
              ? N.p(e, F)
              : ((N = rs(e)), N.c(), N.m(t, c))
            : N && (N.d(1), (N = null)),
          F[0] & 131328 &&
            d !== (d = e[126].available_calendars.toString()) &&
            z(t, "data-available-calendars", d),
          F[0] & 131328 &&
            m !==
              (m =
                "" +
                (Rt(new Date(e[126].start_time)) +
                  " to " +
                  Rt(new Date(e[126].end_time)) +
                  "; Free calendars: " +
                  e[126].available_calendars.toString())) &&
            z(t, "aria-label", m),
          F[0] & 131328 &&
            h !==
              (h =
                "slot " + e[126].selectionStatus + " " + e[126].availability) &&
            z(t, "class", h),
          F[0] & 131328 &&
            y !== (y = new Date(e[126].start_time).toLocaleString()) &&
            z(t, "data-start-time", y),
          F[0] & 131328 &&
            p !== (p = new Date(e[126].end_time).toLocaleString()) &&
            z(t, "data-end-time", p),
          F[0] & 131328 && be(t, "pending", e[126].selectionPending);
      },
      d(H) {
        H && $(t), N && N.d(), (w = !1), k();
      },
    };
  }
  function as(e) {
    let t, n, o, l, c, d, m;
    return {
      c() {
        (t = G("div")),
          (n = G("div")),
          (o = we()),
          z(n, "class", "inner"),
          ye(n, "background-color", e[18](e[129].available_calendars.length)),
          z(t, "class", (l = "epoch " + e[129].status)),
          ye(t, "height", e[129].height + "%"),
          ye(t, "top", e[129].offset + "%"),
          z(
            t,
            "data-available-calendars",
            (c = e[129].available_calendars.toString()),
          ),
          z(
            t,
            "data-start-time",
            (d = new Date(e[129].start_time).toLocaleString()),
          ),
          z(
            t,
            "data-end-time",
            (m = new Date(e[129].end_time).toLocaleString()),
          );
      },
      m(h, y) {
        ie(h, t, y), j(t, n), j(t, o);
      },
      p(h, y) {
        y[0] & 262400 &&
          ye(n, "background-color", h[18](h[129].available_calendars.length)),
          y[0] & 256 &&
            l !== (l = "epoch " + h[129].status) &&
            z(t, "class", l),
          y[0] & 256 && ye(t, "height", h[129].height + "%"),
          y[0] & 256 && ye(t, "top", h[129].offset + "%"),
          y[0] & 256 &&
            c !== (c = h[129].available_calendars.toString()) &&
            z(t, "data-available-calendars", c),
          y[0] & 256 &&
            d !== (d = new Date(h[129].start_time).toLocaleString()) &&
            z(t, "data-start-time", d),
          y[0] & 256 &&
            m !== (m = new Date(h[129].end_time).toLocaleString()) &&
            z(t, "data-end-time", m);
      },
      d(h) {
        h && $(t);
      },
    };
  }
  function os(e) {
    let t,
      n = e[20](e[126], e[123]) + "",
      o;
    return {
      c() {
        (t = G("span")), (o = xe(n)), z(t, "class", "selected-heading");
      },
      m(l, c) {
        ie(l, t, c), j(t, o);
      },
      p(l, c) {
        c[0] & 256 && n !== (n = l[20](l[126], l[123]) + "") && qe(o, n);
      },
      d(l) {
        l && $(t);
      },
    };
  }
  function ss(e, t) {
    let n,
      o =
        t[126].selectionStatus === Je.SELECTED ||
        (t[0] && t[20](t[126], t[123])),
      l,
      c,
      d,
      m,
      h,
      y,
      p,
      w,
      k,
      N,
      T = o && os(t);
    function H() {
      return t[91](t[126]);
    }
    function F() {
      return t[92](t[126]);
    }
    return {
      key: e,
      first: null,
      c() {
        (n = G("button")),
          T && T.c(),
          (l = we()),
          z(
            n,
            "data-available-calendars",
            (c = t[126].available_calendars.toString()),
          ),
          z(
            n,
            "aria-label",
            (d =
              "" +
              (new Date(t[126].start_time).toLocaleString() +
                " to " +
                new Date(t[126].end_time).toLocaleString() +
                "; Free calendars: " +
                t[126].available_calendars.toString())),
          ),
          z(
            n,
            "class",
            (m = "slot " + t[126].selectionStatus + " " + t[126].availability),
          ),
          z(
            n,
            "data-start-time",
            (h = new Date(t[126].start_time).toLocaleString()),
          ),
          z(
            n,
            "data-end-time",
            (y = new Date(t[126].end_time).toLocaleString()),
          ),
          z(
            n,
            "title",
            (p = t[126].fallsWithinAllowedTimeRange
              ? null
              : `You may only select timeslots in the future, between ${t[15]} and ${t[14]}`),
          ),
          be(n, "pending", t[0] && t[126].selectionPending),
          be(n, "outside-of-time-range", !t[126].fallsWithinAllowedTimeRange),
          (this.first = n);
      },
      m(I, R) {
        ie(I, n, R),
          T && T.m(n, null),
          j(n, l),
          k ||
            ((N = [
              Xs(
                (w = t[26].call(null, n, {
                  dateKey: t[123].timestamp.toLocaleDateString(),
                  slotIndex: t[128],
                  startTime: new Date(t[126].start_time).toLocaleString(),
                })),
              ),
              bt(n, "click", H),
              bt(n, "mouseenter", F),
            ]),
            (k = !0));
      },
      p(I, R) {
        (t = I),
          R[0] & 257 &&
            (o =
              t[126].selectionStatus === Je.SELECTED ||
              (t[0] && t[20](t[126], t[123]))),
          o
            ? T
              ? T.p(t, R)
              : ((T = os(t)), T.c(), T.m(n, l))
            : T && (T.d(1), (T = null)),
          R[0] & 256 &&
            c !== (c = t[126].available_calendars.toString()) &&
            z(n, "data-available-calendars", c),
          R[0] & 256 &&
            d !==
              (d =
                "" +
                (new Date(t[126].start_time).toLocaleString() +
                  " to " +
                  new Date(t[126].end_time).toLocaleString() +
                  "; Free calendars: " +
                  t[126].available_calendars.toString())) &&
            z(n, "aria-label", d),
          R[0] & 256 &&
            m !==
              (m =
                "slot " + t[126].selectionStatus + " " + t[126].availability) &&
            z(n, "class", m),
          R[0] & 256 &&
            h !== (h = new Date(t[126].start_time).toLocaleString()) &&
            z(n, "data-start-time", h),
          R[0] & 256 &&
            y !== (y = new Date(t[126].end_time).toLocaleString()) &&
            z(n, "data-end-time", y),
          R[0] & 49408 &&
            p !==
              (p = t[126].fallsWithinAllowedTimeRange
                ? null
                : `You may only select timeslots in the future, between ${t[15]} and ${t[14]}`) &&
            z(n, "title", p),
          w &&
            Hn(w.update) &&
            R[0] & 256 &&
            w.update.call(null, {
              dateKey: t[123].timestamp.toLocaleDateString(),
              slotIndex: t[128],
              startTime: new Date(t[126].start_time).toLocaleString(),
            }),
          R[0] & 257 && be(n, "pending", t[0] && t[126].selectionPending),
          R[0] & 256 &&
            be(n, "outside-of-time-range", !t[126].fallsWithinAllowedTimeRange);
      },
      d(I) {
        I && $(n), T && T.d(), (k = !1), Lt(N);
      },
    };
  }
  function us(e, t) {
    let n,
      o,
      l,
      c,
      d,
      m,
      h,
      y = t[125],
      p = (t[2].date_format === "date" || t[2].date_format === "full") && ts(t),
      w =
        (t[2].date_format === "weekday" || t[2].date_format === "full") &&
        ns(t);
    function k(I, R) {
      if (I[2].view_as === "schedule") return Ac;
      if (I[2].view_as === "list") return Cc;
    }
    let N = k(t),
      T = N && N(t);
    const H = () => t[94](n, y),
      F = () => t[94](null, y);
    return {
      key: e,
      first: null,
      c() {
        (n = G("div")),
          (o = G("header")),
          (l = G("h2")),
          p && p.c(),
          (c = we()),
          w && w.c(),
          (d = we()),
          T && T.c(),
          (m = we()),
          z(n, "class", "day"),
          z(n, "data-timestamp", (h = t[123].timestamp.toISOString())),
          (this.first = n);
      },
      m(I, R) {
        ie(I, n, R),
          j(n, o),
          j(o, l),
          p && p.m(l, null),
          j(l, c),
          w && w.m(l, null),
          j(n, d),
          T && T.m(n, null),
          j(n, m),
          H();
      },
      p(I, R) {
        (t = I),
          t[2].date_format === "date" || t[2].date_format === "full"
            ? p
              ? p.p(t, R)
              : ((p = ts(t)), p.c(), p.m(l, c))
            : p && (p.d(1), (p = null)),
          t[2].date_format === "weekday" || t[2].date_format === "full"
            ? w
              ? w.p(t, R)
              : ((w = ns(t)), w.c(), w.m(l, null))
            : w && (w.d(1), (w = null)),
          N === (N = k(t)) && T
            ? T.p(t, R)
            : (T && T.d(1), (T = N && N(t)), T && (T.c(), T.m(n, m))),
          R[0] & 256 &&
            h !== (h = t[123].timestamp.toISOString()) &&
            z(n, "data-timestamp", h),
          y !== t[125] && (F(), (y = t[125]), H());
      },
      d(I) {
        I && $(n), p && p.d(), w && w.d(), T && T.d(), F();
      },
    };
  }
  function ls(e) {
    let t;
    return {
      c() {
        t = G("nylas-message-error");
      },
      m(n, o) {
        ie(n, t, o);
      },
      d(n) {
        n && $(t);
      },
    };
  }
  function Fc(e) {
    let t, n, o, l;
    const c = [Dc, Mc],
      d = [];
    function m(h, y) {
      return h[3] && h[3].error ? 0 : 1;
    }
    return (
      (t = m(e)),
      (n = d[t] = c[t](e)),
      {
        c() {
          n.c(), (o = mi()), (this.c = ae);
        },
        m(h, y) {
          d[t].m(h, y), ie(h, o, y), (l = !0);
        },
        p(h, y) {
          let p = t;
          (t = m(h)),
            t === p
              ? d[t].p(h, y)
              : (Fr(),
                ut(d[p], 1, 1, () => {
                  d[p] = null;
                }),
                Lr(),
                (n = d[t]),
                n ? n.p(h, y) : ((n = d[t] = c[t](h)), n.c()),
                He(n, 1),
                n.m(o.parentNode, o));
        },
        i(h) {
          l || (He(n), (l = !0));
        },
        o(h) {
          ut(n), (l = !1);
        },
        d(h) {
          d[t].d(h), h && $(o);
        },
      }
    );
  }
  const Lc = 100,
    Uc = 30;
  function zc(e = []) {
    return e.reduce((t, n) => {
      const o = t[t.length - 1];
      return (
        o && o.end_time === n.start_time
          ? (o.end_time = n.end_time)
          : t.push(Object.assign({}, n)),
        t
      );
    }, []);
  }
  function Rc(e, t, n) {
    let o, l, c, d, m, h, y, p, w, k, N;
    Zn(e, qu, (_) => n(103, (p = _))),
      Zn(e, ju, (_) => n(104, (w = _))),
      Zn(e, pi, (_) => n(89, (k = _))),
      Zn(e, tl, (_) => n(105, (N = _)));
    var T =
        (this && this.__awaiter) ||
        function (_, M, Y, U) {
          function ee(_e) {
            return _e instanceof Y
              ? _e
              : new Y(function (Ue) {
                  Ue(_e);
                });
          }
          return new (Y || (Y = Promise))(function (_e, Ue) {
            function jt(At) {
              try {
                at(U.next(At));
              } catch (yr) {
                Ue(yr);
              }
            }
            function $e(At) {
              try {
                at(U.throw(At));
              } catch (yr) {
                Ue(yr);
              }
            }
            function at(At) {
              At.done ? _e(At.value) : ee(At.value).then(jt, $e);
            }
            at((U = U.apply(_, M || [])).next());
          });
        },
      H,
      F,
      I,
      R,
      te,
      ne,
      me;
    let { id: L = "" } = t,
      { access_token: Z = "" } = t,
      { event_to_hover: O = null } = t,
      { event_to_select: ue = null } = t,
      { allow_booking: oe } = t,
      { allow_date_change: q } = t,
      { attendees_to_show: ve } = t,
      { availability: Se } = t,
      { booking_options: Fe } = t,
      { booking_user_email: ke } = t,
      { booking_user_token: V } = t,
      { busy_color: K } = t,
      { capacity: Ne } = t,
      { closed_color: Le } = t,
      { date_format: Kt } = t,
      { dates_to_show: $t } = t,
      { end_hour: en } = t,
      { event_buffer: tn } = t,
      { free_color: nn } = t,
      { mandate_top_of_hour: rn } = t,
      { max_book_ahead_days: an } = t,
      { min_book_ahead_days: on } = t,
      { open_hours: Cn } = t,
      { overbooked_threshold: P } = t,
      { partial_bookable_ratio: re } = t,
      { partial_color: se } = t,
      { required_participants: x } = t,
      { selected_color: B } = t,
      { show_as_week: le } = t,
      { show_header: Me } = t,
      { show_hosts: Ce } = t,
      { show_ticks: Be } = t,
      { show_weekends: Pt } = t,
      { slot_size: Yr } = t,
      { start_date: ur } = t,
      { start_hour: qr } = t,
      { timezone: Mt } = t,
      { view_as: Ge } = t,
      { unavailable_color: Jr } = t,
      { events: Te } = t;
    const je = {
      allow_booking: !1,
      allow_date_change: !0,
      attendees_to_show: 5,
      busy_color: "#EE3248cc",
      calendars: [],
      closed_color: "#EE3248cc",
      date_format: "full",
      dates_to_show: 1,
      end_hour: 24,
      event_buffer: 0,
      free_color: "#078351cc",
      mandate_top_of_hour: !1,
      max_book_ahead_days: 30,
      min_book_ahead_days: 0,
      open_hours: [],
      overbooked_threshold: 100,
      partial_bookable_ratio: 0.01,
      partial_color: "#FECA7Ccc",
      required_participants: [],
      selected_color: "#002db4",
      show_as_week: !1,
      show_header: !0,
      show_hosts: "show",
      show_ticks: !0,
      show_weekends: !0,
      slot_size: 15,
      start_date: new Date(),
      start_hour: 0,
      timezone: "",
      view_as: "schedule",
      unavailable_color: "#DDD",
      events: [],
    };
    function Dt(_ = !1, M = !1) {
      return T(this, void 0, void 0, function* () {
        if ((yield Kr(!0), M)) {
          const Y = [];
          for (const U of pe)
            Y.push(
              ...(U == null
                ? void 0
                : U.slots
                    .filter((ee) => ee.selectionStatus === Je.SELECTED)
                    .map((ee) => ({
                      status: "busy",
                      start_time: new Date(ee.start_time).getTime() / 1e3,
                      end_time: new Date(ee.end_time).getTime() / 1e3,
                    }))),
            );
          for (const U of m) U.timeslots.push(...Y);
        }
        if (_ && Array.isArray(pe)) {
          for (const Y of pe)
            for (const U of Y.slots) U.selectionStatus = Je.UNSELECTED;
          n(8, (pe = [...pe]));
        }
      });
    }
    let C = wi({}, {}, je),
      xt = {},
      Qe,
      nt = [],
      Xe = {},
      Et = [];
    su(() =>
      T(void 0, void 0, void 0, function* () {
        yield uu(),
          n(4, (Qe = !0)),
          n(7, (yt = We == null ? void 0 : We.getBoundingClientRect().height)),
          n(6, (gt = We == null ? void 0 : We.getBoundingClientRect().height));
        const _ = JSON.stringify({ component_id: L, access_token: Z });
        n(3, (xt = (yield N[_]) || {})),
          n(2, (C = wi(t, xt, je))),
          An(),
          n(4, (Qe = !1));
      }),
    );
    let ht = t;
    function An() {
      C.start_date || n(2, (C.start_date = je.start_date), C),
        C.timezone &&
          (Ma(C.timezone)
            ? C.timezone === Intl.DateTimeFormat().resolvedOptions().timeZone &&
              n(2, (C.timezone = void 0), C)
            : (console.warn(`Invalid IANA time zone: ${C.timezone}`),
              n(2, (C.timezone = void 0), C)));
    }
    const mt = nl(gi());
    let We,
      Fn,
      Vt,
      gt = 0,
      yt,
      vt,
      _t,
      Wt,
      Br,
      lr,
      fr = [];
    const cr = [15, 30, 60, 180, 360],
      Gr = (_, M, Y = 0) => {
        if (_ === void 0 || M === void 0) return [];
        const U = cr[Y];
        let ee = U > 60 ? Ut.every(U / 60) : Ot.every(U);
        M = Zr().domain(M).ticks(ee);
        const _e = _ / M.length;
        return U < C.slot_size || (_e < Uc && Y < cr.length)
          ? Gr(_, M, Y + 1)
          : M;
      };
    function Qr(_, M) {
      const Y = Zr().domain([_[0].start_time, _[_.length - 1].end_time]);
      return _.reduce((U, ee) => {
        const _e = U[U.length - 1];
        return (
          _e &&
          JSON.stringify(_e[0].available_calendars) ===
            JSON.stringify(ee.available_calendars) &&
          _e[0].availability === ee.availability
            ? _e.push(ee)
            : U.push([ee]),
          U
        );
      }, []).map((U) => {
        let ee = fe.FREE;
        const _e = U[0].available_calendars.length,
          Ue = _e !== m.length && _e < m.length * M;
        return (
          _e === 0 ||
          Ue ||
          (C.required_participants.length && !Ja(ln, U[0].available_calendars))
            ? U[0].availability === fe.CLOSED
              ? (ee = fe.CLOSED)
              : (ee = fe.BUSY)
            : _e > 0 && _e < m.length && (ee = fe.PARTIAL),
          {
            start_time: U[0].start_time,
            offset: Y(U[0].start_time) * 100,
            status: ee,
            height: (Y(U[U.length - 1].end_time) - Y(U[0].start_time)) * 100,
            end_time: U[U.length - 1].end_time,
            slots: U.length,
            available_calendars: U[0].available_calendars,
          }
        );
      });
    }
    function sn(_, M, Y) {
      let U = Zr()
        .domain([_, M])
        .ticks(Ee)
        .filter((ee) =>
          C.show_weekends ? !0 : ee.getDay() !== 6 && ee.getDay() !== 0,
        );
      return !C.show_as_week && !C.show_weekends && U.length < vt
        ? Y
          ? sn(Ee.offset(_, -1), M, !0)
          : sn(_, Ee.offset(M, 1))
        : U;
    }
    function Bi(_) {
      return (
        m.forEach((M) => {
          const Y = _.filter((U) =>
            U.available_calendars.includes(M.emailAddress),
          );
          _.length - Y.length > (C.overbooked_threshold * _.length) / 100 &&
            Y.forEach((U) => {
              (U.available_calendars = U.available_calendars.filter(
                (ee) => ee !== M.emailAddress,
              )),
                U.available_calendars.length
                  ? U.availability === fe.FREE &&
                    U.available_calendars.length !== m.length &&
                    (U.availability = fe.PARTIAL)
                  : (U.availability = fe.BUSY);
            });
        }),
        _
      );
    }
    let pe,
      dr = [],
      rt = [],
      hr,
      Ht = [],
      Nt = [];
    function Xr(_ = Nt, M = Z) {
      return {
        body: {
          emails: _,
          free_busy: [],
          duration_minutes: 15,
          interval_minutes: 15,
          start_time:
            Ut(new Date(new Date(_t).setHours(C.start_hour))).getTime() / 1e3,
          end_time:
            Ut(new Date(new Date(Wt).setHours(C.end_hour))).getTime() / 1e3,
          round_robin: "max-availability",
        },
        component_id: L,
        access_token: M,
      };
    }
    let un = [],
      ln = [];
    function Kr(_ = !1) {
      var M;
      return T(this, void 0, void 0, function* () {
        n(4, (Qe = !0));
        const Y = Nt.map((U) => ({ email: U }));
        if (
          (C.booking_user_email &&
            C.booking_user_token &&
            Y.push({
              email: C.booking_user_email,
              token: C.booking_user_token,
            }),
          Array.isArray(Y) && Y.length > 0)
        ) {
          const U = yield w[
            JSON.stringify(
              Object.assign(
                Object.assign(
                  {},
                  Xr(
                    Y.map((ee) => ee.email),
                    Z,
                  ),
                ),
                { forceReload: _ },
              ),
            )
          ];
          return (
            n(4, (Qe = !1)),
            Ee(new Date(Xr().body.start_time * 1e3)).getTime() !==
            Ee(
              new Date(
                ((M = U.time_slots[0]) === null || M === void 0
                  ? void 0
                  : M.start_time) * 1e3,
              ),
            ).getTime()
              ? void 0
              : (C.availability || Ke(U), un)
          );
        }
      });
    }
    function Ke(_) {
      const M = [],
        Y = {};
      for (const U of _ == null ? void 0 : _.order) Y[U] = [];
      for (const U of _.time_slots) U.emails.forEach((ee) => Y[ee].push(U));
      _ == null ||
        _.order.forEach((U) => {
          M.push({
            emailAddress: U,
            availability: fe.FREE,
            timeslots: zc(Y[U]).map((ee) => ({
              start_time: new Date(ee.start_time * 1e3),
              end_time: new Date(ee.end_time * 1e3),
            })),
          });
        }),
        n(81, (un = [...M]));
    }
    function Ye(_, M) {
      var Y;
      const U = rt.find((Ue) => Ue.start_time === _.start_time),
        ee = M.slots[M.slots.indexOf(_) - 1],
        _e = ee ? !Ji(ee) : !1;
      if (
        _.selectionPending &&
        Ji(_) &&
        (!(ee == null ? void 0 : ee.selectionPending) || _e)
      ) {
        const Ue =
            ((Y = M.slots.find(
              (at) =>
                at.start_time > _.start_time &&
                (!at.selectionPending || !Ji(at)),
            )) === null || Y === void 0
              ? void 0
              : Y.start_time) || M.slots[M.slots.length - 1].end_time,
          jt = jr(_.start_time).replace(" ", ""),
          $e = jr(Ue).replace(" ", "");
        return `${jt} - ${$e}`;
      } else if (U) {
        let Ue = jr(U.start_time),
          jt = jr(U.end_time);
        return `${Ue.replace(" ", "")} - ${jt.replace(" ", "")}`;
      } else return "";
    }
    function Zt() {
      C.show_as_week && !c
        ? n(2, (C.start_date = Tn.offset(Wt, 1)), C)
        : n(2, (C.start_date = Ee.offset(Wt, 1)), C),
        mt("eventOptionsReady", { slots: [] });
    }
    function mr() {
      if (C.show_as_week && !c) n(2, (C.start_date = Tn.offset(_t, -1)), C);
      else {
        let _ = sn(Ee.offset(_t, -vt), Ee.offset(Wt, -vt), !0);
        n(2, (C.start_date = _[0]), C);
      }
      mt("eventOptionsReady", { slots: [] });
    }
    let fn = [];
    function $r(_) {
      _.selectionStatus === Je.SELECTED
        ? n(27, (ue = null))
        : n(27, (ue = Ct(_))),
        pe
          .flatMap((M) => M.slots)
          .forEach((M) => {
            (M.selectionPending = !1), (M.selectionStatus = Je.UNSELECTED);
          }),
        n(8, (pe = [...pe])),
        n(0, (O = null));
    }
    function cn(_) {
      _ &&
        (pe
          .flatMap((M) => M.slots)
          .forEach((M) => {
            (M.selectionPending = !1), (M.selectionStatus = Je.UNSELECTED);
          }),
        ue === Ct(_)
          ? (n(27, (ue = null)), n(8, (pe = [...pe])))
          : n(27, (ue = Ct(_))));
    }
    function ei(_) {
      _ && n(0, (O = Ct(_)));
    }
    function Gi(_, M) {
      return (
        typeof Xe[M.dateKey] == "undefined" &&
          (n(10, (Et = Et.concat(M.dateKey).sort())), (Xe[M.dateKey] = [])),
        (Xe[M.dateKey][M.slotIndex] = _),
        {
          destroy() {
            const Y = Xe[M.dateKey].indexOf(_);
            Y >= 0 && Xe[M.dateKey].splice(Y, 1),
              Xe[M.dateKey].length === 0 &&
                (n(10, (Et = Et.filter((U) => U !== M.dateKey))),
                delete Xe[M.dateKey]);
          },
        }
      );
    }
    let It = [],
      dn = {};
    function Ln() {
      return T(this, void 0, void 0, function* () {
        let _ = [];
        C.open_hours.length
          ? (_ = Sc(C.open_hours, C.events))
          : C.start_hour &&
            C.end_hour &&
            (_ = kc(C.start_hour, C.end_hour, C.events));
        const M = yield gr(C.events, d, C.end_hour, _);
        (M == null ? void 0 : M.start_time) < (M == null ? void 0 : M.end_time)
          ? n(
              84,
              (It = yield p[
                JSON.stringify({ body: M, component_id: L, access_token: Z })
              ]),
            )
          : n(84, (It = [])),
          mt("eventOptionsReady", { slots: It });
      });
    }
    function it() {
      var _;
      dn = {};
      for (const M of It) {
        if (!((_ = M[0]) === null || _ === void 0 ? void 0 : _.start_time))
          continue;
        const Y = new Date(
          new Date(M[0].start_time).setHours(0, 0, 0, 0),
        ).getTime();
        dn[Y] ? dn[Y].push(M) : (dn[Y] = [M]);
      }
    }
    function gr(_, M, Y, U) {
      if (_.length === 0) return;
      const ee = M[M.length - 1],
        _e = _.reduce(($e, at) => ($e.push(at.participantEmails), $e), []);
      return {
        duration_minutes: _[0].slot_size,
        interval_minutes: C.slot_size,
        start_time: Math.floor(new Date().getTime() / 1e3),
        end_time: Ut(new Date(new Date(ee).setHours(Y))).getTime() / 1e3,
        free_busy: [],
        open_hours: U,
        emails: _e,
        events: _,
        round_robin: "max-fairness",
      };
    }
    let Pe = [];
    function Ct(_) {
      var M, Y;
      if (!_.fallsWithinAllowedTimeRange) return null;
      const U = new Date(new Date(_.start_time).setHours(0, 0, 0, 0)).getTime(),
        ee =
          (Y =
            (M = dn[U]) === null || M === void 0
              ? void 0
              : M.filter(
                  (_e) =>
                    _.start_time >= _e[0].start_time &&
                    _.end_time <= _e[_e.length - 1].end_time,
                )) !== null && Y !== void 0
            ? Y
            : [];
      return ee[ee.length - 1];
    }
    function pt(_) {
      pn[_ ? "unshift" : "push"](() => {
        (Fn = _), n(12, Fn);
      });
    }
    const ti = (_) => {
        cn(_);
      },
      ni = (_) => {
        ei(_);
      },
      ri = (_) => $r(_);
    function ii(_, M) {
      pn[_ ? "unshift" : "push"](() => {
        (nt[M] = _), n(5, nt), n(2, C), n(122, t), n(73, ht), n(3, xt);
      });
    }
    function ai(_) {
      pn[_ ? "unshift" : "push"](() => {
        (Vt = _), n(13, Vt);
      });
    }
    function oi() {
      (gt = this.clientWidth), n(6, gt);
    }
    function Oe(_) {
      pn[_ ? "unshift" : "push"](() => {
        (We = _), n(11, We);
      });
    }
    function Qi() {
      (yt = this.clientHeight), n(7, yt);
    }
    const Xi = () => n(0, (O = null));
    return (
      (e.$$set = (_) => {
        n(122, (t = Ft(Ft({}, t), _n(_)))),
          "id" in _ && n(1, (L = _.id)),
          "access_token" in _ && n(28, (Z = _.access_token)),
          "event_to_hover" in _ && n(0, (O = _.event_to_hover)),
          "event_to_select" in _ && n(27, (ue = _.event_to_select)),
          "allow_booking" in _ && n(29, (oe = _.allow_booking)),
          "allow_date_change" in _ && n(30, (q = _.allow_date_change)),
          "attendees_to_show" in _ && n(31, (ve = _.attendees_to_show)),
          "availability" in _ && n(32, (Se = _.availability)),
          "booking_options" in _ && n(33, (Fe = _.booking_options)),
          "booking_user_email" in _ && n(34, (ke = _.booking_user_email)),
          "booking_user_token" in _ && n(35, (V = _.booking_user_token)),
          "busy_color" in _ && n(36, (K = _.busy_color)),
          "capacity" in _ && n(37, (Ne = _.capacity)),
          "closed_color" in _ && n(38, (Le = _.closed_color)),
          "date_format" in _ && n(39, (Kt = _.date_format)),
          "dates_to_show" in _ && n(40, ($t = _.dates_to_show)),
          "end_hour" in _ && n(41, (en = _.end_hour)),
          "event_buffer" in _ && n(42, (tn = _.event_buffer)),
          "free_color" in _ && n(43, (nn = _.free_color)),
          "mandate_top_of_hour" in _ && n(44, (rn = _.mandate_top_of_hour)),
          "max_book_ahead_days" in _ && n(45, (an = _.max_book_ahead_days)),
          "min_book_ahead_days" in _ && n(46, (on = _.min_book_ahead_days)),
          "open_hours" in _ && n(47, (Cn = _.open_hours)),
          "overbooked_threshold" in _ && n(48, (P = _.overbooked_threshold)),
          "partial_bookable_ratio" in _ &&
            n(49, (re = _.partial_bookable_ratio)),
          "partial_color" in _ && n(50, (se = _.partial_color)),
          "required_participants" in _ && n(51, (x = _.required_participants)),
          "selected_color" in _ && n(52, (B = _.selected_color)),
          "show_as_week" in _ && n(53, (le = _.show_as_week)),
          "show_header" in _ && n(54, (Me = _.show_header)),
          "show_hosts" in _ && n(55, (Ce = _.show_hosts)),
          "show_ticks" in _ && n(56, (Be = _.show_ticks)),
          "show_weekends" in _ && n(57, (Pt = _.show_weekends)),
          "slot_size" in _ && n(58, (Yr = _.slot_size)),
          "start_date" in _ && n(59, (ur = _.start_date)),
          "start_hour" in _ && n(60, (qr = _.start_hour)),
          "timezone" in _ && n(61, (Mt = _.timezone)),
          "view_as" in _ && n(62, (Ge = _.view_as)),
          "unavailable_color" in _ && n(63, (Jr = _.unavailable_color)),
          "events" in _ && n(64, (Te = _.events));
      }),
      (e.$$.update = () => {
        if (
          (e.$$.dirty[2] & 134217728 && n(19, (o = !!Object.keys(k).length)),
          (t.event_to_hover === void 0 ||
            ht.event_to_hover === t.event_to_hover) &&
            JSON.stringify(ht) !== JSON.stringify(t) &&
            (n(2, (C = wi(t, xt, je))), n(73, (ht = t)), An()),
          e.$$.dirty[0] & 36 &&
            (C.dates_to_show ||
              C.show_ticks ||
              C.show_as_week ||
              C.show_weekends) &&
            n(5, (nt = nt.filter((_) => !!_))),
          e.$$.dirty[0] & 64 && n(88, (l = Math.floor(gt / Lc) || 1)),
          (e.$$.dirty[0] & 4) | (e.$$.dirty[2] & 67108864) &&
            n(87, (c = C.show_as_week && l < 7)),
          (e.$$.dirty[0] & 4) | (e.$$.dirty[2] & 33554432) &&
            n(
              75,
              (_t =
                C.show_as_week && !c
                  ? Tn.floor(C.start_date)
                  : Ee.floor(C.start_date)),
            ),
          (e.$$.dirty[0] & 4) | (e.$$.dirty[2] & 67108864) &&
            n(
              74,
              (vt =
                l < C.dates_to_show || C.show_as_week ? l : C.dates_to_show),
            ),
          (e.$$.dirty[0] & 4) | (e.$$.dirty[2] & 33566720) &&
            n(
              86,
              (d = (() =>
                (C.show_weekends || !C.show_weekends) &&
                sn(
                  _t,
                  C.show_as_week
                    ? Ee.offset(_t, c ? vt - 1 : 6)
                    : Ee.offset(_t, vt - 1),
                ))()),
            ),
          (e.$$.dirty[0] & 22) | (e.$$.dirty[2] & 16777216) &&
            (() =>
              T(void 0, void 0, void 0, function* () {
                C.booking_options
                  ? n(84, (It = C.booking_options))
                  : !Qe &&
                    L &&
                    Array.isArray(C.events) &&
                    d.length > 0 &&
                    (yield Ln()),
                  it();
              }))(),
          e.$$.dirty[2] & 134217728 &&
            Object.keys(k).length &&
            mt("onError", k),
          e.$$.dirty[2] & 16777216 && (Wt = d[d.length - 1]),
          e.$$.dirty[0] & 4 &&
            n(
              14,
              (Br = Ee.offset(
                new Date(),
                C.max_book_ahead_days,
              ).toLocaleDateString()),
            ),
          e.$$.dirty[0] & 4 &&
            n(
              15,
              (lr = Ee.offset(
                new Date(),
                C.min_book_ahead_days,
              ).toLocaleDateString()),
            ),
          (e.$$.dirty[0] & 4) | (e.$$.dirty[2] & 1984) &&
            ((n(68, (I = C.events)) === null || I === void 0
              ? void 0
              : I.length) &&
            (n(69, (R = C.events)) === null || R === void 0
              ? void 0
              : R.length) > 1
              ? (n(
                  79,
                  (Ht =
                    n(70, (te = C.events)) === null || te === void 0
                      ? void 0
                      : te.flatMap((_) => _.participantEmails)),
                ),
                n(80, (Nt = [])),
                n(81, (un = [])))
              : (n(71, (ne = C.events)) === null || ne === void 0
                  ? void 0
                  : ne.length) === 1 &&
                (n(
                  80,
                  (Nt =
                    n(72, (me = C.events)) === null || me === void 0
                      ? void 0
                      : me.flatMap((_) => _.participantEmails)),
                ),
                n(79, (Ht = [])),
                mt("eventOptionsReady", { slots: [] }))),
          e.$$.dirty[2] & 655360 &&
            n(
              9,
              (m = [
                ...un,
                ...Ht.map((_) => ({
                  emailAddress: _,
                  availability: fe.FREE,
                  timeslots: [],
                })),
              ]),
            ),
          (e.$$.dirty[0] & 4) | (e.$$.dirty[1] & 8) &&
            n(82, (ln = [...new Set([...C.required_participants, ke])])),
          (e.$$.dirty[0] & 516) | (e.$$.dirty[2] & 22151168) &&
            n(
              8,
              (pe = d.map((_) => {
                const M = Bi(Tc(_, m, ln, It, Ht, C));
                return {
                  epochs: Qr(M, C.partial_bookable_ratio),
                  slots: M,
                  timestamp: _,
                };
              })),
            ),
          e.$$.dirty[0] & 257 &&
            O &&
            (pe
              .flatMap((_) => _.slots)
              .forEach((_) => {
                _.selectionPending =
                  _.start_time >= O[0].start_time &&
                  _.end_time <= O[O.length - 1].end_time;
              }),
            n(8, (pe = [...pe]))),
          e.$$.dirty[0] & 134217984 &&
            ue &&
            (n(85, (Pe = ue)),
            pe
              .flatMap((_) => _.slots)
              .filter(
                (_) =>
                  ue &&
                  _.start_time >= ue[0].start_time &&
                  _.end_time <= ue[ue.length - 1].end_time,
              )
              .forEach((_) => {
                (_.selectionPending = !1), (_.selectionStatus = Je.SELECTED);
              }),
            n(8, (pe = [...pe]))),
          (e.$$.dirty[0] & 384) | (e.$$.dirty[2] & 48) &&
            n(
              16,
              (fr = Gr(
                yt,
                n(
                  67,
                  (F = (n(66, (H = pe[0])) !== null && H !== void 0 ? H : {})
                    .slots),
                ) === null || F === void 0
                  ? void 0
                  : F.map((_) => _.start_time),
              )),
            ),
          e.$$.dirty[0] & 256 &&
            n(
              76,
              (dr = (pe != null ? pe : [])
                .map((_) =>
                  _.slots.filter((M) => M.selectionStatus === Je.SELECTED),
                )
                .flat()),
            ),
          e.$$.dirty[2] & 16384 &&
            n(
              77,
              (rt = dr
                .sort((_, M) => _.start_time.getTime() - M.start_time.getTime())
                .reduce((_, M) => {
                  const Y = _[_.length - 1];
                  return (
                    Y && M.start_time.getTime() === Y.end_time.getTime()
                      ? (Y.end_time = M.end_time)
                      : _.push(Object.assign({}, M)),
                    _
                  );
                }, [])),
            ),
          (e.$$.dirty[0] & 4) | (e.$$.dirty[2] & 8486912) &&
            JSON.stringify(rt) !== JSON.stringify(hr))
        ) {
          let _ = rt;
          rt.length === 1 &&
            (Pe.length
              ? (_ = Pe.map(
                  (M) => (
                    (M.available_calendars = M.emails),
                    Object.assign(Object.assign({}, rt[0]), M)
                  ),
                ))
              : (_ = _.map((M) =>
                  Object.assign(Object.assign({}, C.events[0]), M),
                ))),
            mt("timeSlotChosen", {
              timeSlots: _.map((M) => Object.assign({}, M)),
            }),
            n(78, (hr = rt));
        }
        if (
          ((e.$$.dirty[0] & 6) | (e.$$.dirty[2] & 262144) &&
            (() =>
              T(void 0, void 0, void 0, function* () {
                var _;
                C.availability
                  ? setTimeout(() => Ke(C.availability))
                  : L &&
                    ((Array.isArray(Nt) && Nt.length > 0) ||
                      (C.booking_user_email && C.booking_user_token)) &&
                    ((_ = C.events) === null || _ === void 0
                      ? void 0
                      : _.length) === 1 &&
                    (yield Kr());
              }))(),
          (e.$$.dirty[0] & 256) | (e.$$.dirty[2] & 2097152) &&
            JSON.stringify(fn) !== JSON.stringify(pe.map((_) => _.timestamp)) &&
            (n(83, (fn = pe.map((_) => _.timestamp))),
            mt("dateChange", { dates: fn })),
          (e.$$.dirty[0] & 6) | (e.$$.dirty[2] & 131072))
        ) {
          if (L && Ht.length && C.capacity)
            try {
              lt(L, {
                name: "IncompatibleProperties",
                message:
                  "Setting `capacity` currently does not work when fetching availability directly from Nylas. Please pass `calendars` data directly to use `capacity`.",
              });
            } catch (_) {
              console.error(_);
            }
          else if (C.capacity && C.capacity < 1)
            try {
              lt(L, {
                name: "IncompatibleProperties",
                message: "`capacity` must be an integer of 1 or more",
              });
            } catch (_) {
              console.error(_);
            }
        }
        e.$$.dirty[0] & 516 &&
          n(
            18,
            (h = So()
              .domain([0, m.length / 2, m.length])
              .range([C.busy_color, C.partial_color, C.free_color])),
          );
      }),
      n(17, (y = (_) => _.slots.filter((M) => Ct(M)))),
      (t = _n(t)),
      [
        O,
        L,
        C,
        xt,
        Qe,
        nt,
        gt,
        yt,
        pe,
        m,
        Et,
        We,
        Fn,
        Vt,
        Br,
        lr,
        fr,
        y,
        h,
        o,
        Ye,
        Zt,
        mr,
        $r,
        cn,
        ei,
        Gi,
        ue,
        Z,
        oe,
        q,
        ve,
        Se,
        Fe,
        ke,
        V,
        K,
        Ne,
        Le,
        Kt,
        $t,
        en,
        tn,
        nn,
        rn,
        an,
        on,
        Cn,
        P,
        re,
        se,
        x,
        B,
        le,
        Me,
        Ce,
        Be,
        Pt,
        Yr,
        ur,
        qr,
        Mt,
        Ge,
        Jr,
        Te,
        Dt,
        H,
        F,
        I,
        R,
        te,
        ne,
        me,
        ht,
        vt,
        _t,
        dr,
        rt,
        hr,
        Ht,
        Nt,
        un,
        ln,
        fn,
        It,
        Pe,
        d,
        c,
        l,
        k,
        pt,
        ti,
        ni,
        ri,
        ii,
        ai,
        oi,
        Oe,
        Qi,
        Xi,
      ]
    );
  }
  class fs extends Qn {
    constructor(t) {
      super();
      (this.shadowRoot.innerHTML =
        '<style>*{margin:0;padding:0;border:0;font-size:100%;font:inherit;vertical-align:baseline;list-style:none}.sr-only{position:absolute;left:-10000px;top:auto;width:1px;height:1px;overflow:hidden}main{--black:#161717;--grey-dark:#636671;--grey:#bdc0cb;--grey-lighter:#dfe1e8;--grey-dark-warm:#9fa4b5;--grey-lightest:#f7f7f8;--grey-background:#f0f1f5;--white:#ffffff;--blue:#314fa9;--blue-lighter:#f0f3ff;--red:#ee3248;--red-lighter:#ffeef0;--fs-12:0.75rem;--fs-14:0.875rem;--fs-16:1rem;--black-90:#2c2e2e;--grey-light:#f7f7f8;--grey-warm:#cbcbcb}main{height:100%;overflow:hidden;display:grid;font-family:Arial, Helvetica, sans-serif;position:relative;z-index:1;grid-template-rows:auto 1fr;gap:1rem}main.ticked{grid-template-columns:70px 1fr}main.ticked.timezone{grid-template-columns:70px 70px 1fr}main.hide-header{grid-template-rows:auto}main.hide-header>header{display:none}main>header{grid-column:-1/1;display:grid;grid-template-columns:1fr;align-items:baseline}main>header.dated{grid-template-columns:1fr auto}main>header h2{font-size:1.5rem;font-weight:700}main>header .change-dates{display:grid;grid-template-columns:1fr 1fr;gap:1rem}main>header .change-dates button{background-color:#f7f7f8;border:1px solid #e3e8ee;cursor:pointer;display:flex}main>header .change-dates button:hover{background-color:#e3e8ee}main>header .legend{padding:0.5rem 0 0;color:#636671}main>header .legend span{display:inline-block;margin-right:1rem}main>header .legend span::before{content:"";border-radius:8px;height:12px;width:12px;margin-right:0.25rem;display:inline-block;background-color:black}main>header .legend span.available::before{background-color:var(--free-color, #36d2addf)}main>header .legend span.not-available::before{background-color:var(--busy-color, #36d2addf)}main>header .legend span.closed::before{background-color:var(--closed-color, #999)}main>header .legend span.partially-available::before{background-color:var(--partial-color, #ffff7566)}main .timezone-ticks{position:relative}main .timezone-ticks .timezone{font-size:0.8rem;left:25%;position:absolute;top:5px}main .days{position:relative;display:grid;gap:0rem;grid-auto-flow:column;grid-auto-columns:1fr;height:100%;overflow:auto}@keyframes progress{0%{width:0}100%{width:100%}}main .days.loading::after{background-color:var(--blue-lighter);z-index:-1}main .days.loading::before{animation:progress 2s ease-in-out infinite;background-color:var(--blue)}main .days.loading::before,main .days.loading::after{top:36px;left:0;content:"";display:block;height:4px;position:absolute}main .days.loading::before{z-index:3}main .days.timezone.loading::before,main .days.timezone.loading::after{left:180px}main .days.loading.error{animation:none}@keyframes progress{0%{width:0}100%{width:100%}}main .days.loading.error::after{background-color:var(--red);z-index:-1}main .days.loading.error::before{animation:progress 2s ease-in-out infinite;background-color:var(--red)}main .days.loading.error::before,main .days.loading.error::after{top:36px;left:0;content:"";display:block;height:4px;position:absolute}main .days.loading.error::before{z-index:3}main .days.schedule{overflow:hidden}main .days.list .day{display:block}main .days.list .day header{position:sticky;top:0;margin-top:0;background-color:white;height:40px;z-index:2}main .ticks{display:grid;grid-auto-flow:row;grid-auto-rows:auto;height:calc(100% - 40px);list-style-type:none;margin:0;padding:40px 0 0 0;overflow:hidden;font-size:0.8rem;font-family:sans-serif}main .ticks li{display:block;position:relative;height:auto;overflow:hidden;padding:0 0.25rem;display:grid;justify-content:right}main .day{display:grid;grid-template-rows:40px 1fr;position:relative}main .day header{width:100%;overflow:hidden}main .day header h2{margin:0;padding:0;display:grid;grid-template-columns:auto 1fr;gap:0.5rem;height:30px;line-height:1.875;font-size:1rem;font-weight:200}main .day header h2 .date{border-radius:15px;background:var(--blue);color:white;font-weight:bold;display:block;width:30px;height:30px;line-height:1.875;text-align:center}main .day .epochs{position:absolute;top:40px;width:100%;height:calc(100% - 40px)}main .day .epochs .epoch{position:absolute;width:100%}main .day .epochs .epoch .inner{margin:0rem;height:calc(100% - 0.5rem);padding:0.25rem 0;width:8px;margin:0}main .day .epochs .epoch.busy{background-image:linear-gradient(45deg, var(--busy-color-lightened) 12.5%, white 12.5%, white 50%, var(--busy-color-lightened) 50%, var(--busy-color-lightened) 62.5%, white 62.5%, white 100%);background-size:5.66px 5.66px}main .day .epochs .epoch.closed{background-image:linear-gradient(45deg, var(--closed-color-lightened) 12.5%, white 12.5%, white 50%, var(--closed-color-lightened) 50%, var(--closed-color-lightened) 62.5%, white 62.5%, white 100%);background-size:5.66px 5.66px}main .day .epochs .epoch.busy .inner{background-color:var(--busy-color, #ff647566)}main .day .epochs .epoch.closed .inner{background-color:var(--closed-color, #ff647566)}main .day .epochs .epoch.partial .inner{background-color:var(--partial-color, #ffff7566)}main .day .epochs .epoch.free .inner{background-color:var(--free-color, #36d2addf)}main .day .epochs .epoch .available-calendars{display:none;position:absolute;z-index:2;left:10px}main .day .epochs .epoch .available-calendars span{background:rgba(0, 0, 0, 0.5);display:inline-block;margin:0;padding:0.25rem;color:white;border-radius:4px;font-size:0.6rem}main .day:hover .epoch.partial .available-calendars{display:block}main .day .slots{display:grid;grid-auto-flow:row;grid-auto-rows:auto;height:100%;list-style-type:none;margin:0;padding:0}main .day .slots .slot{border:none;border-bottom:1px solid rgba(0, 0, 0, 0.05);background:transparent;position:relative;align-items:center;justify-content:center;align-content:center;font-family:sans-serif;touch-action:none}main .day .slots .slot.selected{background-color:var(--selected-color, var(--blue));box-shadow:none;border-bottom:1px solid transparent;z-index:3;margin-left:9px;margin-right:1px}main .day .slots .slot.pending{background-color:var(--selected-color-lightened);z-index:3;margin-left:9px;margin-right:1px}main .day .slots .slot.selected+.selected,main .day .slots .slot.pending+.pending{z-index:2}main .day .slots .slot.busy:not(.pending),main .day .slots .slot.closed:not(.pending){cursor:not-allowed}main .day .slots .slot.outside-of-time-range{background-color:var(--unavailable-color, #ddd)}main .day .slots .slot.outside-of-time-range:hover{cursor:not-allowed}main .day .slots .slot .selected-heading{position:absolute;top:3px;left:0;color:white;text-shadow:1px 1px 2px #002db4ff;font-weight:300;padding:0 3px;font-size:0.8rem;z-index:3;text-align:left;font-family:system-ui, sans-serif}main .day .slots .slot.pending .selected-heading{width:auto}main .day .slot-list{display:grid;grid-auto-rows:50px;grid-auto-flow:row;overflow:auto;gap:0.25rem;list-style-type:none;margin:0;padding:0}main .day .slot-list .slot{border-radius:4px;background:transparent;position:relative;align-items:center;justify-content:center;align-content:center;font-family:sans-serif;border:1px solid rgba(0, 0, 0, 0.1);box-shadow:none !important}@media(hover: hover) and (pointer: fine){main .day .slot-list .slot:hover{box-shadow:none;background-color:rgba(0, 0, 0, 0.1)}}main .day .slot-list .slot.selected{background:var(--blue);color:white}main .day .slot-list .slot .partial{display:block;font-size:0.6rem}main button.confirm{grid-column:-1/1}main.allow_booking .slot:not(.busy):hover,main.allow_booking .slot:not(.busy):focus,main.allow_booking .slot:not(.closed):hover,main.allow_booking .slot:not(.closed):focus{box-shadow:0 0 1px 0 var(--selected-color);cursor:pointer}main .attendee-overlay{background-color:white;border-radius:4px;box-shadow:0 4px 14px 0 black;display:none;font-size:14px;max-width:12rem;padding:1.2rem 1rem;position:absolute;z-index:3}main .attendee-overlay::before{content:"";width:0;height:0;border-left:10px solid transparent;border-right:10px solid transparent;border-bottom:10px solid white;position:absolute;left:5.5rem;top:-10px}main .attendee-overlay.invert-y::before{display:none}main .attendee-overlay.invert-y::after{content:"";width:0;height:0;border-left:10px solid transparent;border-right:10px solid transparent;border-top:10px solid white;position:absolute;left:5.5rem;bottom:-10px}main .attendee-overlay .attendee-list .contact{display:grid;grid-template-columns:40px auto;padding:0.6rem 0}main .attendee-overlay .attendee-list .contact.divider{border-bottom:1px solid #979797}main .attendee-overlay .attendee-list .contact.unavailable{filter:grayscale(80%);opacity:50%}main .attendee-overlay .attendee-list .contact .default-avatar{background:#002db4;border-radius:50%;color:#fff;font-family:sans-serif;font-size:1rem;font-weight:bold;height:32px;line-height:35px;text-align:center;text-transform:uppercase;width:32px}main .attendee-overlay .attendee-list .contact .contact-details{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}main .attendee-overlay .attendee-list .contact .contact-details .name{font-weight:bold;display:block}main .attendee-overlay .attendee-list .icon{position:relative;top:-1.3rem;left:1.2rem;height:0;width:0}main .attendee-overlay .more-attendees{font-weight:bold;display:inline-block;padding-top:1rem}</style>'),
        bn(
          this,
          {
            target: this.shadowRoot,
            props: Nr(this.attributes),
            customElement: !0,
          },
          Rc,
          Fc,
          vn,
          {
            id: 1,
            access_token: 28,
            event_to_hover: 0,
            event_to_select: 27,
            allow_booking: 29,
            allow_date_change: 30,
            attendees_to_show: 31,
            availability: 32,
            booking_options: 33,
            booking_user_email: 34,
            booking_user_token: 35,
            busy_color: 36,
            capacity: 37,
            closed_color: 38,
            date_format: 39,
            dates_to_show: 40,
            end_hour: 41,
            event_buffer: 42,
            free_color: 43,
            mandate_top_of_hour: 44,
            max_book_ahead_days: 45,
            min_book_ahead_days: 46,
            open_hours: 47,
            overbooked_threshold: 48,
            partial_bookable_ratio: 49,
            partial_color: 50,
            required_participants: 51,
            selected_color: 52,
            show_as_week: 53,
            show_header: 54,
            show_hosts: 55,
            show_ticks: 56,
            show_weekends: 57,
            slot_size: 58,
            start_date: 59,
            start_hour: 60,
            timezone: 61,
            view_as: 62,
            unavailable_color: 63,
            events: 64,
            reload: 65,
          },
          null,
          [-1, -1, -1, -1, -1],
        ),
        t &&
          (t.target && ie(t.target, this, t.anchor),
          t.props && (this.$set(t.props), J()));
    }
    static get observedAttributes() {
      return [
        "id",
        "access_token",
        "event_to_hover",
        "event_to_select",
        "allow_booking",
        "allow_date_change",
        "attendees_to_show",
        "availability",
        "booking_options",
        "booking_user_email",
        "booking_user_token",
        "busy_color",
        "capacity",
        "closed_color",
        "date_format",
        "dates_to_show",
        "end_hour",
        "event_buffer",
        "free_color",
        "mandate_top_of_hour",
        "max_book_ahead_days",
        "min_book_ahead_days",
        "open_hours",
        "overbooked_threshold",
        "partial_bookable_ratio",
        "partial_color",
        "required_participants",
        "selected_color",
        "show_as_week",
        "show_header",
        "show_hosts",
        "show_ticks",
        "show_weekends",
        "slot_size",
        "start_date",
        "start_hour",
        "timezone",
        "view_as",
        "unavailable_color",
        "events",
        "reload",
      ];
    }
    get id() {
      return this.$$.ctx[1];
    }
    set id(t) {
      this.$$set({ id: t }), J();
    }
    get access_token() {
      return this.$$.ctx[28];
    }
    set access_token(t) {
      this.$$set({ access_token: t }), J();
    }
    get event_to_hover() {
      return this.$$.ctx[0];
    }
    set event_to_hover(t) {
      this.$$set({ event_to_hover: t }), J();
    }
    get event_to_select() {
      return this.$$.ctx[27];
    }
    set event_to_select(t) {
      this.$$set({ event_to_select: t }), J();
    }
    get allow_booking() {
      return this.$$.ctx[29];
    }
    set allow_booking(t) {
      this.$$set({ allow_booking: t }), J();
    }
    get allow_date_change() {
      return this.$$.ctx[30];
    }
    set allow_date_change(t) {
      this.$$set({ allow_date_change: t }), J();
    }
    get attendees_to_show() {
      return this.$$.ctx[31];
    }
    set attendees_to_show(t) {
      this.$$set({ attendees_to_show: t }), J();
    }
    get availability() {
      return this.$$.ctx[32];
    }
    set availability(t) {
      this.$$set({ availability: t }), J();
    }
    get booking_options() {
      return this.$$.ctx[33];
    }
    set booking_options(t) {
      this.$$set({ booking_options: t }), J();
    }
    get booking_user_email() {
      return this.$$.ctx[34];
    }
    set booking_user_email(t) {
      this.$$set({ booking_user_email: t }), J();
    }
    get booking_user_token() {
      return this.$$.ctx[35];
    }
    set booking_user_token(t) {
      this.$$set({ booking_user_token: t }), J();
    }
    get busy_color() {
      return this.$$.ctx[36];
    }
    set busy_color(t) {
      this.$$set({ busy_color: t }), J();
    }
    get capacity() {
      return this.$$.ctx[37];
    }
    set capacity(t) {
      this.$$set({ capacity: t }), J();
    }
    get closed_color() {
      return this.$$.ctx[38];
    }
    set closed_color(t) {
      this.$$set({ closed_color: t }), J();
    }
    get date_format() {
      return this.$$.ctx[39];
    }
    set date_format(t) {
      this.$$set({ date_format: t }), J();
    }
    get dates_to_show() {
      return this.$$.ctx[40];
    }
    set dates_to_show(t) {
      this.$$set({ dates_to_show: t }), J();
    }
    get end_hour() {
      return this.$$.ctx[41];
    }
    set end_hour(t) {
      this.$$set({ end_hour: t }), J();
    }
    get event_buffer() {
      return this.$$.ctx[42];
    }
    set event_buffer(t) {
      this.$$set({ event_buffer: t }), J();
    }
    get free_color() {
      return this.$$.ctx[43];
    }
    set free_color(t) {
      this.$$set({ free_color: t }), J();
    }
    get mandate_top_of_hour() {
      return this.$$.ctx[44];
    }
    set mandate_top_of_hour(t) {
      this.$$set({ mandate_top_of_hour: t }), J();
    }
    get max_book_ahead_days() {
      return this.$$.ctx[45];
    }
    set max_book_ahead_days(t) {
      this.$$set({ max_book_ahead_days: t }), J();
    }
    get min_book_ahead_days() {
      return this.$$.ctx[46];
    }
    set min_book_ahead_days(t) {
      this.$$set({ min_book_ahead_days: t }), J();
    }
    get open_hours() {
      return this.$$.ctx[47];
    }
    set open_hours(t) {
      this.$$set({ open_hours: t }), J();
    }
    get overbooked_threshold() {
      return this.$$.ctx[48];
    }
    set overbooked_threshold(t) {
      this.$$set({ overbooked_threshold: t }), J();
    }
    get partial_bookable_ratio() {
      return this.$$.ctx[49];
    }
    set partial_bookable_ratio(t) {
      this.$$set({ partial_bookable_ratio: t }), J();
    }
    get partial_color() {
      return this.$$.ctx[50];
    }
    set partial_color(t) {
      this.$$set({ partial_color: t }), J();
    }
    get required_participants() {
      return this.$$.ctx[51];
    }
    set required_participants(t) {
      this.$$set({ required_participants: t }), J();
    }
    get selected_color() {
      return this.$$.ctx[52];
    }
    set selected_color(t) {
      this.$$set({ selected_color: t }), J();
    }
    get show_as_week() {
      return this.$$.ctx[53];
    }
    set show_as_week(t) {
      this.$$set({ show_as_week: t }), J();
    }
    get show_header() {
      return this.$$.ctx[54];
    }
    set show_header(t) {
      this.$$set({ show_header: t }), J();
    }
    get show_hosts() {
      return this.$$.ctx[55];
    }
    set show_hosts(t) {
      this.$$set({ show_hosts: t }), J();
    }
    get show_ticks() {
      return this.$$.ctx[56];
    }
    set show_ticks(t) {
      this.$$set({ show_ticks: t }), J();
    }
    get show_weekends() {
      return this.$$.ctx[57];
    }
    set show_weekends(t) {
      this.$$set({ show_weekends: t }), J();
    }
    get slot_size() {
      return this.$$.ctx[58];
    }
    set slot_size(t) {
      this.$$set({ slot_size: t }), J();
    }
    get start_date() {
      return this.$$.ctx[59];
    }
    set start_date(t) {
      this.$$set({ start_date: t }), J();
    }
    get start_hour() {
      return this.$$.ctx[60];
    }
    set start_hour(t) {
      this.$$set({ start_hour: t }), J();
    }
    get timezone() {
      return this.$$.ctx[61];
    }
    set timezone(t) {
      this.$$set({ timezone: t }), J();
    }
    get view_as() {
      return this.$$.ctx[62];
    }
    set view_as(t) {
      this.$$set({ view_as: t }), J();
    }
    get unavailable_color() {
      return this.$$.ctx[63];
    }
    set unavailable_color(t) {
      this.$$set({ unavailable_color: t }), J();
    }
    get events() {
      return this.$$.ctx[64];
    }
    set events(t) {
      this.$$set({ events: t }), J();
    }
    get reload() {
      return this.$$.ctx[65];
    }
  }
  return customElements.define("nylas-availability", fs), fs;
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5kZXguanMiLCJzb3VyY2VzIjpbIi4uLy4uL2NvbW1vbnMvc3JjL2RlZmluZS1jb21wb25lbnQtcGF0Y2gudHMiLCIuLi8uLi9ub2RlX21vZHVsZXMvc3ZlbHRlL2ludGVybmFsL2luZGV4Lm1qcyIsIi4uLy4uL25vZGVfbW9kdWxlcy9sdXhvbi9idWlsZC9janMtYnJvd3Nlci9sdXhvbi5qcyIsIi4uLy4uL2NvbW1vbnMvc3JjL21ldGhvZHMvY29udmVydERhdGVUaW1lWm9uZS50cyIsIi4uLy4uL25vZGVfbW9kdWxlcy9zdmVsdGUvc3RvcmUvaW5kZXgubWpzIiwiLi4vLi4vY29tbW9ucy9zcmMvc3RvcmUvZXJyb3IudHMiLCIuLi8uLi9jb21tb25zL3NyYy9tZXRob2RzL2FwaS50cyIsIi4uLy4uL2NvbW1vbnMvc3JjL2Nvbm5lY3Rpb25zL2NvbnRhY3RzLnRzIiwiLi4vLi4vY29tbW9ucy9zcmMvY29ubmVjdGlvbnMvdGhyZWFkcy50cyIsIi4uLy4uL2NvbW1vbnMvc3JjL2Nvbm5lY3Rpb25zL21hbmlmZXN0LnRzIiwiLi4vLi4vY29tbW9ucy9zcmMvY29ubmVjdGlvbnMvYXZhaWxhYmlsaXR5LnRzIiwiLi4vLi4vY29tbW9ucy9zcmMvc3RvcmUvYXZhaWxhYmlsaXR5LnRzIiwiLi4vLi4vY29tbW9ucy9zcmMvc3RvcmUvY29uc2VjdXRpdmUtYXZhaWxhYmlsaXR5LnRzIiwiLi4vLi4vY29tbW9ucy9zcmMvc3RvcmUvY29udGFjdC1hdmF0YXIudHMiLCIuLi8uLi9jb21tb25zL3NyYy9zdG9yZS9tYWlsYm94LnRzIiwiLi4vLi4vY29tbW9ucy9zcmMvc3RvcmUvbWFuaWZlc3QudHMiLCIuLi8uLi9jb21tb25zL3NyYy9tZXRob2RzL2NvbXBvbmVudC50cyIsIi4uLy4uL2NvbW1vbnMvc3JjL2NvbXBvbmVudHMvTkVycm9yLnN2ZWx0ZSIsIi4uLy4uL25vZGVfbW9kdWxlcy9kMy10aW1lL3NyYy9pbnRlcnZhbC5qcyIsIi4uLy4uL25vZGVfbW9kdWxlcy9kMy10aW1lL3NyYy9taWxsaXNlY29uZC5qcyIsIi4uLy4uL25vZGVfbW9kdWxlcy9kMy10aW1lL3NyYy9kdXJhdGlvbi5qcyIsIi4uLy4uL25vZGVfbW9kdWxlcy9kMy10aW1lL3NyYy9zZWNvbmQuanMiLCIuLi8uLi9ub2RlX21vZHVsZXMvZDMtdGltZS9zcmMvbWludXRlLmpzIiwiLi4vLi4vbm9kZV9tb2R1bGVzL2QzLXRpbWUvc3JjL2hvdXIuanMiLCIuLi8uLi9ub2RlX21vZHVsZXMvZDMtdGltZS9zcmMvZGF5LmpzIiwiLi4vLi4vbm9kZV9tb2R1bGVzL2QzLXRpbWUvc3JjL3dlZWsuanMiLCIuLi8uLi9ub2RlX21vZHVsZXMvZDMtdGltZS9zcmMvbW9udGguanMiLCIuLi8uLi9ub2RlX21vZHVsZXMvZDMtdGltZS9zcmMveWVhci5qcyIsIi4uLy4uL25vZGVfbW9kdWxlcy9kMy10aW1lL3NyYy91dGNEYXkuanMiLCIuLi8uLi9ub2RlX21vZHVsZXMvZDMtdGltZS9zcmMvdXRjV2Vlay5qcyIsIi4uLy4uL25vZGVfbW9kdWxlcy9kMy10aW1lL3NyYy91dGNZZWFyLmpzIiwiLi4vLi4vbm9kZV9tb2R1bGVzL2QzLWFycmF5L3NyYy9hc2NlbmRpbmcuanMiLCIuLi8uLi9ub2RlX21vZHVsZXMvZDMtYXJyYXkvc3JjL2Jpc2VjdG9yLmpzIiwiLi4vLi4vbm9kZV9tb2R1bGVzL2QzLWFycmF5L3NyYy9udW1iZXIuanMiLCIuLi8uLi9ub2RlX21vZHVsZXMvZDMtYXJyYXkvc3JjL2Jpc2VjdC5qcyIsIi4uLy4uL25vZGVfbW9kdWxlcy9kMy1hcnJheS9zcmMvdGlja3MuanMiLCIuLi8uLi9ub2RlX21vZHVsZXMvZDMtdGltZS9zcmMvdGlja3MuanMiLCIuLi8uLi9ub2RlX21vZHVsZXMvZDMtc2NhbGUvc3JjL2luaXQuanMiLCIuLi8uLi9ub2RlX21vZHVsZXMvZDMtY29sb3Ivc3JjL2RlZmluZS5qcyIsIi4uLy4uL25vZGVfbW9kdWxlcy9kMy1jb2xvci9zcmMvY29sb3IuanMiLCIuLi8uLi9ub2RlX21vZHVsZXMvZDMtaW50ZXJwb2xhdGUvc3JjL2NvbnN0YW50LmpzIiwiLi4vLi4vbm9kZV9tb2R1bGVzL2QzLWludGVycG9sYXRlL3NyYy9jb2xvci5qcyIsIi4uLy4uL25vZGVfbW9kdWxlcy9kMy1pbnRlcnBvbGF0ZS9zcmMvcmdiLmpzIiwiLi4vLi4vbm9kZV9tb2R1bGVzL2QzLWludGVycG9sYXRlL3NyYy9udW1iZXJBcnJheS5qcyIsIi4uLy4uL25vZGVfbW9kdWxlcy9kMy1pbnRlcnBvbGF0ZS9zcmMvYXJyYXkuanMiLCIuLi8uLi9ub2RlX21vZHVsZXMvZDMtaW50ZXJwb2xhdGUvc3JjL2RhdGUuanMiLCIuLi8uLi9ub2RlX21vZHVsZXMvZDMtaW50ZXJwb2xhdGUvc3JjL251bWJlci5qcyIsIi4uLy4uL25vZGVfbW9kdWxlcy9kMy1pbnRlcnBvbGF0ZS9zcmMvb2JqZWN0LmpzIiwiLi4vLi4vbm9kZV9tb2R1bGVzL2QzLWludGVycG9sYXRlL3NyYy9zdHJpbmcuanMiLCIuLi8uLi9ub2RlX21vZHVsZXMvZDMtaW50ZXJwb2xhdGUvc3JjL3ZhbHVlLmpzIiwiLi4vLi4vbm9kZV9tb2R1bGVzL2QzLWludGVycG9sYXRlL3NyYy9yb3VuZC5qcyIsIi4uLy4uL25vZGVfbW9kdWxlcy9kMy1zY2FsZS9zcmMvY29uc3RhbnQuanMiLCIuLi8uLi9ub2RlX21vZHVsZXMvZDMtc2NhbGUvc3JjL251bWJlci5qcyIsIi4uLy4uL25vZGVfbW9kdWxlcy9kMy1zY2FsZS9zcmMvY29udGludW91cy5qcyIsIi4uLy4uL25vZGVfbW9kdWxlcy9kMy1mb3JtYXQvc3JjL2Zvcm1hdERlY2ltYWwuanMiLCIuLi8uLi9ub2RlX21vZHVsZXMvZDMtZm9ybWF0L3NyYy9leHBvbmVudC5qcyIsIi4uLy4uL25vZGVfbW9kdWxlcy9kMy1mb3JtYXQvc3JjL2Zvcm1hdEdyb3VwLmpzIiwiLi4vLi4vbm9kZV9tb2R1bGVzL2QzLWZvcm1hdC9zcmMvZm9ybWF0TnVtZXJhbHMuanMiLCIuLi8uLi9ub2RlX21vZHVsZXMvZDMtZm9ybWF0L3NyYy9mb3JtYXRTcGVjaWZpZXIuanMiLCIuLi8uLi9ub2RlX21vZHVsZXMvZDMtZm9ybWF0L3NyYy9mb3JtYXRUcmltLmpzIiwiLi4vLi4vbm9kZV9tb2R1bGVzL2QzLWZvcm1hdC9zcmMvZm9ybWF0UHJlZml4QXV0by5qcyIsIi4uLy4uL25vZGVfbW9kdWxlcy9kMy1mb3JtYXQvc3JjL2Zvcm1hdFJvdW5kZWQuanMiLCIuLi8uLi9ub2RlX21vZHVsZXMvZDMtZm9ybWF0L3NyYy9mb3JtYXRUeXBlcy5qcyIsIi4uLy4uL25vZGVfbW9kdWxlcy9kMy1mb3JtYXQvc3JjL2lkZW50aXR5LmpzIiwiLi4vLi4vbm9kZV9tb2R1bGVzL2QzLWZvcm1hdC9zcmMvbG9jYWxlLmpzIiwiLi4vLi4vbm9kZV9tb2R1bGVzL2QzLWZvcm1hdC9zcmMvZGVmYXVsdExvY2FsZS5qcyIsIi4uLy4uL25vZGVfbW9kdWxlcy9kMy1mb3JtYXQvc3JjL3ByZWNpc2lvbkZpeGVkLmpzIiwiLi4vLi4vbm9kZV9tb2R1bGVzL2QzLWZvcm1hdC9zcmMvcHJlY2lzaW9uUHJlZml4LmpzIiwiLi4vLi4vbm9kZV9tb2R1bGVzL2QzLWZvcm1hdC9zcmMvcHJlY2lzaW9uUm91bmQuanMiLCIuLi8uLi9ub2RlX21vZHVsZXMvZDMtc2NhbGUvc3JjL3RpY2tGb3JtYXQuanMiLCIuLi8uLi9ub2RlX21vZHVsZXMvZDMtc2NhbGUvc3JjL2xpbmVhci5qcyIsIi4uLy4uL25vZGVfbW9kdWxlcy9kMy1zY2FsZS9zcmMvbmljZS5qcyIsIi4uLy4uL25vZGVfbW9kdWxlcy9kMy10aW1lLWZvcm1hdC9zcmMvbG9jYWxlLmpzIiwiLi4vLi4vbm9kZV9tb2R1bGVzL2QzLXRpbWUtZm9ybWF0L3NyYy9kZWZhdWx0TG9jYWxlLmpzIiwiLi4vLi4vbm9kZV9tb2R1bGVzL2QzLXNjYWxlL3NyYy90aW1lLmpzIiwiLi4vLi4vY29tbW9ucy9zcmMvbWV0aG9kcy9jb2xvdXIudHMiLCIuLi8uLi9jb21tb25zL3NyYy9lbnVtcy9BdmFpbGFiaWxpdHkudHMiLCIuLi8uLi9jb21tb25zL3NyYy9jb21wb25lbnRzL0NvbnRhY3RJbWFnZS9Db250YWN0SW1hZ2Uuc3ZlbHRlIiwiLi4vLi4vY29tbW9ucy9zcmMvY29tcG9uZW50cy9FcnJvck1lc3NhZ2Uuc3ZlbHRlIiwiLi4vLi4vY29tbW9ucy9zcmMvbWV0aG9kcy9kYXRldGltZS50cyIsInNyYy9hc3NldHMvbGVmdC1hcnJvdy5zdmciLCJzcmMvYXNzZXRzL3JpZ2h0LWFycm93LnN2ZyIsInNyYy9tZXRob2Qvc2xvdC50cyIsInNyYy9tZXRob2Qvb3BlbmhvdXJzLnRzIiwic3JjL21ldGhvZC9hdmFpbGFiaWxpdHlVdGlscy50cyIsInNyYy9BdmFpbGFiaWxpdHkuc3ZlbHRlIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBjb25zdCBvcmlnaW5hbERlZmluZSA9IHdpbmRvdy5jdXN0b21FbGVtZW50cy5kZWZpbmUuYmluZChcbiAgd2luZG93LmN1c3RvbUVsZW1lbnRzLFxuKTtcbndpbmRvdy5jdXN0b21FbGVtZW50cy5kZWZpbmUgPSAobmFtZTogc3RyaW5nLCAuLi5hcmdzKSA9PiB7XG4gIGlmIChjdXN0b21FbGVtZW50cy5nZXQobmFtZSkpIHtcbiAgICByZXR1cm47XG4gIH1cbiAgcmV0dXJuIG9yaWdpbmFsRGVmaW5lKG5hbWUsIC4uLmFyZ3MpO1xufTtcbiIsImZ1bmN0aW9uIG5vb3AoKSB7IH1cbmNvbnN0IGlkZW50aXR5ID0geCA9PiB4O1xuZnVuY3Rpb24gYXNzaWduKHRhciwgc3JjKSB7XG4gICAgLy8gQHRzLWlnbm9yZVxuICAgIGZvciAoY29uc3QgayBpbiBzcmMpXG4gICAgICAgIHRhcltrXSA9IHNyY1trXTtcbiAgICByZXR1cm4gdGFyO1xufVxuZnVuY3Rpb24gaXNfcHJvbWlzZSh2YWx1ZSkge1xuICAgIHJldHVybiB2YWx1ZSAmJiB0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnICYmIHR5cGVvZiB2YWx1ZS50aGVuID09PSAnZnVuY3Rpb24nO1xufVxuZnVuY3Rpb24gYWRkX2xvY2F0aW9uKGVsZW1lbnQsIGZpbGUsIGxpbmUsIGNvbHVtbiwgY2hhcikge1xuICAgIGVsZW1lbnQuX19zdmVsdGVfbWV0YSA9IHtcbiAgICAgICAgbG9jOiB7IGZpbGUsIGxpbmUsIGNvbHVtbiwgY2hhciB9XG4gICAgfTtcbn1cbmZ1bmN0aW9uIHJ1bihmbikge1xuICAgIHJldHVybiBmbigpO1xufVxuZnVuY3Rpb24gYmxhbmtfb2JqZWN0KCkge1xuICAgIHJldHVybiBPYmplY3QuY3JlYXRlKG51bGwpO1xufVxuZnVuY3Rpb24gcnVuX2FsbChmbnMpIHtcbiAgICBmbnMuZm9yRWFjaChydW4pO1xufVxuZnVuY3Rpb24gaXNfZnVuY3Rpb24odGhpbmcpIHtcbiAgICByZXR1cm4gdHlwZW9mIHRoaW5nID09PSAnZnVuY3Rpb24nO1xufVxuZnVuY3Rpb24gc2FmZV9ub3RfZXF1YWwoYSwgYikge1xuICAgIHJldHVybiBhICE9IGEgPyBiID09IGIgOiBhICE9PSBiIHx8ICgoYSAmJiB0eXBlb2YgYSA9PT0gJ29iamVjdCcpIHx8IHR5cGVvZiBhID09PSAnZnVuY3Rpb24nKTtcbn1cbmxldCBzcmNfdXJsX2VxdWFsX2FuY2hvcjtcbmZ1bmN0aW9uIHNyY191cmxfZXF1YWwoZWxlbWVudF9zcmMsIHVybCkge1xuICAgIGlmICghc3JjX3VybF9lcXVhbF9hbmNob3IpIHtcbiAgICAgICAgc3JjX3VybF9lcXVhbF9hbmNob3IgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJyk7XG4gICAgfVxuICAgIHNyY191cmxfZXF1YWxfYW5jaG9yLmhyZWYgPSB1cmw7XG4gICAgcmV0dXJuIGVsZW1lbnRfc3JjID09PSBzcmNfdXJsX2VxdWFsX2FuY2hvci5ocmVmO1xufVxuZnVuY3Rpb24gbm90X2VxdWFsKGEsIGIpIHtcbiAgICByZXR1cm4gYSAhPSBhID8gYiA9PSBiIDogYSAhPT0gYjtcbn1cbmZ1bmN0aW9uIGlzX2VtcHR5KG9iaikge1xuICAgIHJldHVybiBPYmplY3Qua2V5cyhvYmopLmxlbmd0aCA9PT0gMDtcbn1cbmZ1bmN0aW9uIHZhbGlkYXRlX3N0b3JlKHN0b3JlLCBuYW1lKSB7XG4gICAgaWYgKHN0b3JlICE9IG51bGwgJiYgdHlwZW9mIHN0b3JlLnN1YnNjcmliZSAhPT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYCcke25hbWV9JyBpcyBub3QgYSBzdG9yZSB3aXRoIGEgJ3N1YnNjcmliZScgbWV0aG9kYCk7XG4gICAgfVxufVxuZnVuY3Rpb24gc3Vic2NyaWJlKHN0b3JlLCAuLi5jYWxsYmFja3MpIHtcbiAgICBpZiAoc3RvcmUgPT0gbnVsbCkge1xuICAgICAgICByZXR1cm4gbm9vcDtcbiAgICB9XG4gICAgY29uc3QgdW5zdWIgPSBzdG9yZS5zdWJzY3JpYmUoLi4uY2FsbGJhY2tzKTtcbiAgICByZXR1cm4gdW5zdWIudW5zdWJzY3JpYmUgPyAoKSA9PiB1bnN1Yi51bnN1YnNjcmliZSgpIDogdW5zdWI7XG59XG5mdW5jdGlvbiBnZXRfc3RvcmVfdmFsdWUoc3RvcmUpIHtcbiAgICBsZXQgdmFsdWU7XG4gICAgc3Vic2NyaWJlKHN0b3JlLCBfID0+IHZhbHVlID0gXykoKTtcbiAgICByZXR1cm4gdmFsdWU7XG59XG5mdW5jdGlvbiBjb21wb25lbnRfc3Vic2NyaWJlKGNvbXBvbmVudCwgc3RvcmUsIGNhbGxiYWNrKSB7XG4gICAgY29tcG9uZW50LiQkLm9uX2Rlc3Ryb3kucHVzaChzdWJzY3JpYmUoc3RvcmUsIGNhbGxiYWNrKSk7XG59XG5mdW5jdGlvbiBjcmVhdGVfc2xvdChkZWZpbml0aW9uLCBjdHgsICQkc2NvcGUsIGZuKSB7XG4gICAgaWYgKGRlZmluaXRpb24pIHtcbiAgICAgICAgY29uc3Qgc2xvdF9jdHggPSBnZXRfc2xvdF9jb250ZXh0KGRlZmluaXRpb24sIGN0eCwgJCRzY29wZSwgZm4pO1xuICAgICAgICByZXR1cm4gZGVmaW5pdGlvblswXShzbG90X2N0eCk7XG4gICAgfVxufVxuZnVuY3Rpb24gZ2V0X3Nsb3RfY29udGV4dChkZWZpbml0aW9uLCBjdHgsICQkc2NvcGUsIGZuKSB7XG4gICAgcmV0dXJuIGRlZmluaXRpb25bMV0gJiYgZm5cbiAgICAgICAgPyBhc3NpZ24oJCRzY29wZS5jdHguc2xpY2UoKSwgZGVmaW5pdGlvblsxXShmbihjdHgpKSlcbiAgICAgICAgOiAkJHNjb3BlLmN0eDtcbn1cbmZ1bmN0aW9uIGdldF9zbG90X2NoYW5nZXMoZGVmaW5pdGlvbiwgJCRzY29wZSwgZGlydHksIGZuKSB7XG4gICAgaWYgKGRlZmluaXRpb25bMl0gJiYgZm4pIHtcbiAgICAgICAgY29uc3QgbGV0cyA9IGRlZmluaXRpb25bMl0oZm4oZGlydHkpKTtcbiAgICAgICAgaWYgKCQkc2NvcGUuZGlydHkgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgcmV0dXJuIGxldHM7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHR5cGVvZiBsZXRzID09PSAnb2JqZWN0Jykge1xuICAgICAgICAgICAgY29uc3QgbWVyZ2VkID0gW107XG4gICAgICAgICAgICBjb25zdCBsZW4gPSBNYXRoLm1heCgkJHNjb3BlLmRpcnR5Lmxlbmd0aCwgbGV0cy5sZW5ndGgpO1xuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsZW47IGkgKz0gMSkge1xuICAgICAgICAgICAgICAgIG1lcmdlZFtpXSA9ICQkc2NvcGUuZGlydHlbaV0gfCBsZXRzW2ldO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIG1lcmdlZDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gJCRzY29wZS5kaXJ0eSB8IGxldHM7XG4gICAgfVxuICAgIHJldHVybiAkJHNjb3BlLmRpcnR5O1xufVxuZnVuY3Rpb24gdXBkYXRlX3Nsb3RfYmFzZShzbG90LCBzbG90X2RlZmluaXRpb24sIGN0eCwgJCRzY29wZSwgc2xvdF9jaGFuZ2VzLCBnZXRfc2xvdF9jb250ZXh0X2ZuKSB7XG4gICAgaWYgKHNsb3RfY2hhbmdlcykge1xuICAgICAgICBjb25zdCBzbG90X2NvbnRleHQgPSBnZXRfc2xvdF9jb250ZXh0KHNsb3RfZGVmaW5pdGlvbiwgY3R4LCAkJHNjb3BlLCBnZXRfc2xvdF9jb250ZXh0X2ZuKTtcbiAgICAgICAgc2xvdC5wKHNsb3RfY29udGV4dCwgc2xvdF9jaGFuZ2VzKTtcbiAgICB9XG59XG5mdW5jdGlvbiB1cGRhdGVfc2xvdChzbG90LCBzbG90X2RlZmluaXRpb24sIGN0eCwgJCRzY29wZSwgZGlydHksIGdldF9zbG90X2NoYW5nZXNfZm4sIGdldF9zbG90X2NvbnRleHRfZm4pIHtcbiAgICBjb25zdCBzbG90X2NoYW5nZXMgPSBnZXRfc2xvdF9jaGFuZ2VzKHNsb3RfZGVmaW5pdGlvbiwgJCRzY29wZSwgZGlydHksIGdldF9zbG90X2NoYW5nZXNfZm4pO1xuICAgIHVwZGF0ZV9zbG90X2Jhc2Uoc2xvdCwgc2xvdF9kZWZpbml0aW9uLCBjdHgsICQkc2NvcGUsIHNsb3RfY2hhbmdlcywgZ2V0X3Nsb3RfY29udGV4dF9mbik7XG59XG5mdW5jdGlvbiBnZXRfYWxsX2RpcnR5X2Zyb21fc2NvcGUoJCRzY29wZSkge1xuICAgIGlmICgkJHNjb3BlLmN0eC5sZW5ndGggPiAzMikge1xuICAgICAgICBjb25zdCBkaXJ0eSA9IFtdO1xuICAgICAgICBjb25zdCBsZW5ndGggPSAkJHNjb3BlLmN0eC5sZW5ndGggLyAzMjtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgZGlydHlbaV0gPSAtMTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZGlydHk7XG4gICAgfVxuICAgIHJldHVybiAtMTtcbn1cbmZ1bmN0aW9uIGV4Y2x1ZGVfaW50ZXJuYWxfcHJvcHMocHJvcHMpIHtcbiAgICBjb25zdCByZXN1bHQgPSB7fTtcbiAgICBmb3IgKGNvbnN0IGsgaW4gcHJvcHMpXG4gICAgICAgIGlmIChrWzBdICE9PSAnJCcpXG4gICAgICAgICAgICByZXN1bHRba10gPSBwcm9wc1trXTtcbiAgICByZXR1cm4gcmVzdWx0O1xufVxuZnVuY3Rpb24gY29tcHV0ZV9yZXN0X3Byb3BzKHByb3BzLCBrZXlzKSB7XG4gICAgY29uc3QgcmVzdCA9IHt9O1xuICAgIGtleXMgPSBuZXcgU2V0KGtleXMpO1xuICAgIGZvciAoY29uc3QgayBpbiBwcm9wcylcbiAgICAgICAgaWYgKCFrZXlzLmhhcyhrKSAmJiBrWzBdICE9PSAnJCcpXG4gICAgICAgICAgICByZXN0W2tdID0gcHJvcHNba107XG4gICAgcmV0dXJuIHJlc3Q7XG59XG5mdW5jdGlvbiBjb21wdXRlX3Nsb3RzKHNsb3RzKSB7XG4gICAgY29uc3QgcmVzdWx0ID0ge307XG4gICAgZm9yIChjb25zdCBrZXkgaW4gc2xvdHMpIHtcbiAgICAgICAgcmVzdWx0W2tleV0gPSB0cnVlO1xuICAgIH1cbiAgICByZXR1cm4gcmVzdWx0O1xufVxuZnVuY3Rpb24gb25jZShmbikge1xuICAgIGxldCByYW4gPSBmYWxzZTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKC4uLmFyZ3MpIHtcbiAgICAgICAgaWYgKHJhbilcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgcmFuID0gdHJ1ZTtcbiAgICAgICAgZm4uY2FsbCh0aGlzLCAuLi5hcmdzKTtcbiAgICB9O1xufVxuZnVuY3Rpb24gbnVsbF90b19lbXB0eSh2YWx1ZSkge1xuICAgIHJldHVybiB2YWx1ZSA9PSBudWxsID8gJycgOiB2YWx1ZTtcbn1cbmZ1bmN0aW9uIHNldF9zdG9yZV92YWx1ZShzdG9yZSwgcmV0LCB2YWx1ZSkge1xuICAgIHN0b3JlLnNldCh2YWx1ZSk7XG4gICAgcmV0dXJuIHJldDtcbn1cbmNvbnN0IGhhc19wcm9wID0gKG9iaiwgcHJvcCkgPT4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwgcHJvcCk7XG5mdW5jdGlvbiBhY3Rpb25fZGVzdHJveWVyKGFjdGlvbl9yZXN1bHQpIHtcbiAgICByZXR1cm4gYWN0aW9uX3Jlc3VsdCAmJiBpc19mdW5jdGlvbihhY3Rpb25fcmVzdWx0LmRlc3Ryb3kpID8gYWN0aW9uX3Jlc3VsdC5kZXN0cm95IDogbm9vcDtcbn1cblxuY29uc3QgaXNfY2xpZW50ID0gdHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCc7XG5sZXQgbm93ID0gaXNfY2xpZW50XG4gICAgPyAoKSA9PiB3aW5kb3cucGVyZm9ybWFuY2Uubm93KClcbiAgICA6ICgpID0+IERhdGUubm93KCk7XG5sZXQgcmFmID0gaXNfY2xpZW50ID8gY2IgPT4gcmVxdWVzdEFuaW1hdGlvbkZyYW1lKGNiKSA6IG5vb3A7XG4vLyB1c2VkIGludGVybmFsbHkgZm9yIHRlc3RpbmdcbmZ1bmN0aW9uIHNldF9ub3coZm4pIHtcbiAgICBub3cgPSBmbjtcbn1cbmZ1bmN0aW9uIHNldF9yYWYoZm4pIHtcbiAgICByYWYgPSBmbjtcbn1cblxuY29uc3QgdGFza3MgPSBuZXcgU2V0KCk7XG5mdW5jdGlvbiBydW5fdGFza3Mobm93KSB7XG4gICAgdGFza3MuZm9yRWFjaCh0YXNrID0+IHtcbiAgICAgICAgaWYgKCF0YXNrLmMobm93KSkge1xuICAgICAgICAgICAgdGFza3MuZGVsZXRlKHRhc2spO1xuICAgICAgICAgICAgdGFzay5mKCk7XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICBpZiAodGFza3Muc2l6ZSAhPT0gMClcbiAgICAgICAgcmFmKHJ1bl90YXNrcyk7XG59XG4vKipcbiAqIEZvciB0ZXN0aW5nIHB1cnBvc2VzIG9ubHkhXG4gKi9cbmZ1bmN0aW9uIGNsZWFyX2xvb3BzKCkge1xuICAgIHRhc2tzLmNsZWFyKCk7XG59XG4vKipcbiAqIENyZWF0ZXMgYSBuZXcgdGFzayB0aGF0IHJ1bnMgb24gZWFjaCByYWYgZnJhbWVcbiAqIHVudGlsIGl0IHJldHVybnMgYSBmYWxzeSB2YWx1ZSBvciBpcyBhYm9ydGVkXG4gKi9cbmZ1bmN0aW9uIGxvb3AoY2FsbGJhY2spIHtcbiAgICBsZXQgdGFzaztcbiAgICBpZiAodGFza3Muc2l6ZSA9PT0gMClcbiAgICAgICAgcmFmKHJ1bl90YXNrcyk7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgcHJvbWlzZTogbmV3IFByb21pc2UoZnVsZmlsbCA9PiB7XG4gICAgICAgICAgICB0YXNrcy5hZGQodGFzayA9IHsgYzogY2FsbGJhY2ssIGY6IGZ1bGZpbGwgfSk7XG4gICAgICAgIH0pLFxuICAgICAgICBhYm9ydCgpIHtcbiAgICAgICAgICAgIHRhc2tzLmRlbGV0ZSh0YXNrKTtcbiAgICAgICAgfVxuICAgIH07XG59XG5cbi8vIFRyYWNrIHdoaWNoIG5vZGVzIGFyZSBjbGFpbWVkIGR1cmluZyBoeWRyYXRpb24uIFVuY2xhaW1lZCBub2RlcyBjYW4gdGhlbiBiZSByZW1vdmVkIGZyb20gdGhlIERPTVxuLy8gYXQgdGhlIGVuZCBvZiBoeWRyYXRpb24gd2l0aG91dCB0b3VjaGluZyB0aGUgcmVtYWluaW5nIG5vZGVzLlxubGV0IGlzX2h5ZHJhdGluZyA9IGZhbHNlO1xuZnVuY3Rpb24gc3RhcnRfaHlkcmF0aW5nKCkge1xuICAgIGlzX2h5ZHJhdGluZyA9IHRydWU7XG59XG5mdW5jdGlvbiBlbmRfaHlkcmF0aW5nKCkge1xuICAgIGlzX2h5ZHJhdGluZyA9IGZhbHNlO1xufVxuZnVuY3Rpb24gdXBwZXJfYm91bmQobG93LCBoaWdoLCBrZXksIHZhbHVlKSB7XG4gICAgLy8gUmV0dXJuIGZpcnN0IGluZGV4IG9mIHZhbHVlIGxhcmdlciB0aGFuIGlucHV0IHZhbHVlIGluIHRoZSByYW5nZSBbbG93LCBoaWdoKVxuICAgIHdoaWxlIChsb3cgPCBoaWdoKSB7XG4gICAgICAgIGNvbnN0IG1pZCA9IGxvdyArICgoaGlnaCAtIGxvdykgPj4gMSk7XG4gICAgICAgIGlmIChrZXkobWlkKSA8PSB2YWx1ZSkge1xuICAgICAgICAgICAgbG93ID0gbWlkICsgMTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGhpZ2ggPSBtaWQ7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGxvdztcbn1cbmZ1bmN0aW9uIGluaXRfaHlkcmF0ZSh0YXJnZXQpIHtcbiAgICBpZiAodGFyZ2V0Lmh5ZHJhdGVfaW5pdClcbiAgICAgICAgcmV0dXJuO1xuICAgIHRhcmdldC5oeWRyYXRlX2luaXQgPSB0cnVlO1xuICAgIC8vIFdlIGtub3cgdGhhdCBhbGwgY2hpbGRyZW4gaGF2ZSBjbGFpbV9vcmRlciB2YWx1ZXMgc2luY2UgdGhlIHVuY2xhaW1lZCBoYXZlIGJlZW4gZGV0YWNoZWQgaWYgdGFyZ2V0IGlzIG5vdCA8aGVhZD5cbiAgICBsZXQgY2hpbGRyZW4gPSB0YXJnZXQuY2hpbGROb2RlcztcbiAgICAvLyBJZiB0YXJnZXQgaXMgPGhlYWQ+LCB0aGVyZSBtYXkgYmUgY2hpbGRyZW4gd2l0aG91dCBjbGFpbV9vcmRlclxuICAgIGlmICh0YXJnZXQubm9kZU5hbWUgPT09ICdIRUFEJykge1xuICAgICAgICBjb25zdCBteUNoaWxkcmVuID0gW107XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY2hpbGRyZW4ubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGNvbnN0IG5vZGUgPSBjaGlsZHJlbltpXTtcbiAgICAgICAgICAgIGlmIChub2RlLmNsYWltX29yZGVyICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICBteUNoaWxkcmVuLnB1c2gobm9kZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgY2hpbGRyZW4gPSBteUNoaWxkcmVuO1xuICAgIH1cbiAgICAvKlxuICAgICogUmVvcmRlciBjbGFpbWVkIGNoaWxkcmVuIG9wdGltYWxseS5cbiAgICAqIFdlIGNhbiByZW9yZGVyIGNsYWltZWQgY2hpbGRyZW4gb3B0aW1hbGx5IGJ5IGZpbmRpbmcgdGhlIGxvbmdlc3Qgc3Vic2VxdWVuY2Ugb2ZcbiAgICAqIG5vZGVzIHRoYXQgYXJlIGFscmVhZHkgY2xhaW1lZCBpbiBvcmRlciBhbmQgb25seSBtb3ZpbmcgdGhlIHJlc3QuIFRoZSBsb25nZXN0XG4gICAgKiBzdWJzZXF1ZW5jZSBzdWJzZXF1ZW5jZSBvZiBub2RlcyB0aGF0IGFyZSBjbGFpbWVkIGluIG9yZGVyIGNhbiBiZSBmb3VuZCBieVxuICAgICogY29tcHV0aW5nIHRoZSBsb25nZXN0IGluY3JlYXNpbmcgc3Vic2VxdWVuY2Ugb2YgLmNsYWltX29yZGVyIHZhbHVlcy5cbiAgICAqXG4gICAgKiBUaGlzIGFsZ29yaXRobSBpcyBvcHRpbWFsIGluIGdlbmVyYXRpbmcgdGhlIGxlYXN0IGFtb3VudCBvZiByZW9yZGVyIG9wZXJhdGlvbnNcbiAgICAqIHBvc3NpYmxlLlxuICAgICpcbiAgICAqIFByb29mOlxuICAgICogV2Uga25vdyB0aGF0LCBnaXZlbiBhIHNldCBvZiByZW9yZGVyaW5nIG9wZXJhdGlvbnMsIHRoZSBub2RlcyB0aGF0IGRvIG5vdCBtb3ZlXG4gICAgKiBhbHdheXMgZm9ybSBhbiBpbmNyZWFzaW5nIHN1YnNlcXVlbmNlLCBzaW5jZSB0aGV5IGRvIG5vdCBtb3ZlIGFtb25nIGVhY2ggb3RoZXJcbiAgICAqIG1lYW5pbmcgdGhhdCB0aGV5IG11c3QgYmUgYWxyZWFkeSBvcmRlcmVkIGFtb25nIGVhY2ggb3RoZXIuIFRodXMsIHRoZSBtYXhpbWFsXG4gICAgKiBzZXQgb2Ygbm9kZXMgdGhhdCBkbyBub3QgbW92ZSBmb3JtIGEgbG9uZ2VzdCBpbmNyZWFzaW5nIHN1YnNlcXVlbmNlLlxuICAgICovXG4gICAgLy8gQ29tcHV0ZSBsb25nZXN0IGluY3JlYXNpbmcgc3Vic2VxdWVuY2VcbiAgICAvLyBtOiBzdWJzZXF1ZW5jZSBsZW5ndGggaiA9PiBpbmRleCBrIG9mIHNtYWxsZXN0IHZhbHVlIHRoYXQgZW5kcyBhbiBpbmNyZWFzaW5nIHN1YnNlcXVlbmNlIG9mIGxlbmd0aCBqXG4gICAgY29uc3QgbSA9IG5ldyBJbnQzMkFycmF5KGNoaWxkcmVuLmxlbmd0aCArIDEpO1xuICAgIC8vIFByZWRlY2Vzc29yIGluZGljZXMgKyAxXG4gICAgY29uc3QgcCA9IG5ldyBJbnQzMkFycmF5KGNoaWxkcmVuLmxlbmd0aCk7XG4gICAgbVswXSA9IC0xO1xuICAgIGxldCBsb25nZXN0ID0gMDtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGNoaWxkcmVuLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGNvbnN0IGN1cnJlbnQgPSBjaGlsZHJlbltpXS5jbGFpbV9vcmRlcjtcbiAgICAgICAgLy8gRmluZCB0aGUgbGFyZ2VzdCBzdWJzZXF1ZW5jZSBsZW5ndGggc3VjaCB0aGF0IGl0IGVuZHMgaW4gYSB2YWx1ZSBsZXNzIHRoYW4gb3VyIGN1cnJlbnQgdmFsdWVcbiAgICAgICAgLy8gdXBwZXJfYm91bmQgcmV0dXJucyBmaXJzdCBncmVhdGVyIHZhbHVlLCBzbyB3ZSBzdWJ0cmFjdCBvbmVcbiAgICAgICAgLy8gd2l0aCBmYXN0IHBhdGggZm9yIHdoZW4gd2UgYXJlIG9uIHRoZSBjdXJyZW50IGxvbmdlc3Qgc3Vic2VxdWVuY2VcbiAgICAgICAgY29uc3Qgc2VxTGVuID0gKChsb25nZXN0ID4gMCAmJiBjaGlsZHJlblttW2xvbmdlc3RdXS5jbGFpbV9vcmRlciA8PSBjdXJyZW50KSA/IGxvbmdlc3QgKyAxIDogdXBwZXJfYm91bmQoMSwgbG9uZ2VzdCwgaWR4ID0+IGNoaWxkcmVuW21baWR4XV0uY2xhaW1fb3JkZXIsIGN1cnJlbnQpKSAtIDE7XG4gICAgICAgIHBbaV0gPSBtW3NlcUxlbl0gKyAxO1xuICAgICAgICBjb25zdCBuZXdMZW4gPSBzZXFMZW4gKyAxO1xuICAgICAgICAvLyBXZSBjYW4gZ3VhcmFudGVlIHRoYXQgY3VycmVudCBpcyB0aGUgc21hbGxlc3QgdmFsdWUuIE90aGVyd2lzZSwgd2Ugd291bGQgaGF2ZSBnZW5lcmF0ZWQgYSBsb25nZXIgc2VxdWVuY2UuXG4gICAgICAgIG1bbmV3TGVuXSA9IGk7XG4gICAgICAgIGxvbmdlc3QgPSBNYXRoLm1heChuZXdMZW4sIGxvbmdlc3QpO1xuICAgIH1cbiAgICAvLyBUaGUgbG9uZ2VzdCBpbmNyZWFzaW5nIHN1YnNlcXVlbmNlIG9mIG5vZGVzIChpbml0aWFsbHkgcmV2ZXJzZWQpXG4gICAgY29uc3QgbGlzID0gW107XG4gICAgLy8gVGhlIHJlc3Qgb2YgdGhlIG5vZGVzLCBub2RlcyB0aGF0IHdpbGwgYmUgbW92ZWRcbiAgICBjb25zdCB0b01vdmUgPSBbXTtcbiAgICBsZXQgbGFzdCA9IGNoaWxkcmVuLmxlbmd0aCAtIDE7XG4gICAgZm9yIChsZXQgY3VyID0gbVtsb25nZXN0XSArIDE7IGN1ciAhPSAwOyBjdXIgPSBwW2N1ciAtIDFdKSB7XG4gICAgICAgIGxpcy5wdXNoKGNoaWxkcmVuW2N1ciAtIDFdKTtcbiAgICAgICAgZm9yICg7IGxhc3QgPj0gY3VyOyBsYXN0LS0pIHtcbiAgICAgICAgICAgIHRvTW92ZS5wdXNoKGNoaWxkcmVuW2xhc3RdKTtcbiAgICAgICAgfVxuICAgICAgICBsYXN0LS07XG4gICAgfVxuICAgIGZvciAoOyBsYXN0ID49IDA7IGxhc3QtLSkge1xuICAgICAgICB0b01vdmUucHVzaChjaGlsZHJlbltsYXN0XSk7XG4gICAgfVxuICAgIGxpcy5yZXZlcnNlKCk7XG4gICAgLy8gV2Ugc29ydCB0aGUgbm9kZXMgYmVpbmcgbW92ZWQgdG8gZ3VhcmFudGVlIHRoYXQgdGhlaXIgaW5zZXJ0aW9uIG9yZGVyIG1hdGNoZXMgdGhlIGNsYWltIG9yZGVyXG4gICAgdG9Nb3ZlLnNvcnQoKGEsIGIpID0+IGEuY2xhaW1fb3JkZXIgLSBiLmNsYWltX29yZGVyKTtcbiAgICAvLyBGaW5hbGx5LCB3ZSBtb3ZlIHRoZSBub2Rlc1xuICAgIGZvciAobGV0IGkgPSAwLCBqID0gMDsgaSA8IHRvTW92ZS5sZW5ndGg7IGkrKykge1xuICAgICAgICB3aGlsZSAoaiA8IGxpcy5sZW5ndGggJiYgdG9Nb3ZlW2ldLmNsYWltX29yZGVyID49IGxpc1tqXS5jbGFpbV9vcmRlcikge1xuICAgICAgICAgICAgaisrO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGFuY2hvciA9IGogPCBsaXMubGVuZ3RoID8gbGlzW2pdIDogbnVsbDtcbiAgICAgICAgdGFyZ2V0Lmluc2VydEJlZm9yZSh0b01vdmVbaV0sIGFuY2hvcik7XG4gICAgfVxufVxuZnVuY3Rpb24gYXBwZW5kKHRhcmdldCwgbm9kZSkge1xuICAgIHRhcmdldC5hcHBlbmRDaGlsZChub2RlKTtcbn1cbmZ1bmN0aW9uIGFwcGVuZF9zdHlsZXModGFyZ2V0LCBzdHlsZV9zaGVldF9pZCwgc3R5bGVzKSB7XG4gICAgY29uc3QgYXBwZW5kX3N0eWxlc190byA9IGdldF9yb290X2Zvcl9zdHlsZSh0YXJnZXQpO1xuICAgIGlmICghYXBwZW5kX3N0eWxlc190by5nZXRFbGVtZW50QnlJZChzdHlsZV9zaGVldF9pZCkpIHtcbiAgICAgICAgY29uc3Qgc3R5bGUgPSBlbGVtZW50KCdzdHlsZScpO1xuICAgICAgICBzdHlsZS5pZCA9IHN0eWxlX3NoZWV0X2lkO1xuICAgICAgICBzdHlsZS50ZXh0Q29udGVudCA9IHN0eWxlcztcbiAgICAgICAgYXBwZW5kX3N0eWxlc2hlZXQoYXBwZW5kX3N0eWxlc190bywgc3R5bGUpO1xuICAgIH1cbn1cbmZ1bmN0aW9uIGdldF9yb290X2Zvcl9zdHlsZShub2RlKSB7XG4gICAgaWYgKCFub2RlKVxuICAgICAgICByZXR1cm4gZG9jdW1lbnQ7XG4gICAgY29uc3Qgcm9vdCA9IG5vZGUuZ2V0Um9vdE5vZGUgPyBub2RlLmdldFJvb3ROb2RlKCkgOiBub2RlLm93bmVyRG9jdW1lbnQ7XG4gICAgaWYgKHJvb3QgJiYgcm9vdC5ob3N0KSB7XG4gICAgICAgIHJldHVybiByb290O1xuICAgIH1cbiAgICByZXR1cm4gbm9kZS5vd25lckRvY3VtZW50O1xufVxuZnVuY3Rpb24gYXBwZW5kX2VtcHR5X3N0eWxlc2hlZXQobm9kZSkge1xuICAgIGNvbnN0IHN0eWxlX2VsZW1lbnQgPSBlbGVtZW50KCdzdHlsZScpO1xuICAgIGFwcGVuZF9zdHlsZXNoZWV0KGdldF9yb290X2Zvcl9zdHlsZShub2RlKSwgc3R5bGVfZWxlbWVudCk7XG4gICAgcmV0dXJuIHN0eWxlX2VsZW1lbnQuc2hlZXQ7XG59XG5mdW5jdGlvbiBhcHBlbmRfc3R5bGVzaGVldChub2RlLCBzdHlsZSkge1xuICAgIGFwcGVuZChub2RlLmhlYWQgfHwgbm9kZSwgc3R5bGUpO1xufVxuZnVuY3Rpb24gYXBwZW5kX2h5ZHJhdGlvbih0YXJnZXQsIG5vZGUpIHtcbiAgICBpZiAoaXNfaHlkcmF0aW5nKSB7XG4gICAgICAgIGluaXRfaHlkcmF0ZSh0YXJnZXQpO1xuICAgICAgICBpZiAoKHRhcmdldC5hY3R1YWxfZW5kX2NoaWxkID09PSB1bmRlZmluZWQpIHx8ICgodGFyZ2V0LmFjdHVhbF9lbmRfY2hpbGQgIT09IG51bGwpICYmICh0YXJnZXQuYWN0dWFsX2VuZF9jaGlsZC5wYXJlbnRFbGVtZW50ICE9PSB0YXJnZXQpKSkge1xuICAgICAgICAgICAgdGFyZ2V0LmFjdHVhbF9lbmRfY2hpbGQgPSB0YXJnZXQuZmlyc3RDaGlsZDtcbiAgICAgICAgfVxuICAgICAgICAvLyBTa2lwIG5vZGVzIG9mIHVuZGVmaW5lZCBvcmRlcmluZ1xuICAgICAgICB3aGlsZSAoKHRhcmdldC5hY3R1YWxfZW5kX2NoaWxkICE9PSBudWxsKSAmJiAodGFyZ2V0LmFjdHVhbF9lbmRfY2hpbGQuY2xhaW1fb3JkZXIgPT09IHVuZGVmaW5lZCkpIHtcbiAgICAgICAgICAgIHRhcmdldC5hY3R1YWxfZW5kX2NoaWxkID0gdGFyZ2V0LmFjdHVhbF9lbmRfY2hpbGQubmV4dFNpYmxpbmc7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG5vZGUgIT09IHRhcmdldC5hY3R1YWxfZW5kX2NoaWxkKSB7XG4gICAgICAgICAgICAvLyBXZSBvbmx5IGluc2VydCBpZiB0aGUgb3JkZXJpbmcgb2YgdGhpcyBub2RlIHNob3VsZCBiZSBtb2RpZmllZCBvciB0aGUgcGFyZW50IG5vZGUgaXMgbm90IHRhcmdldFxuICAgICAgICAgICAgaWYgKG5vZGUuY2xhaW1fb3JkZXIgIT09IHVuZGVmaW5lZCB8fCBub2RlLnBhcmVudE5vZGUgIT09IHRhcmdldCkge1xuICAgICAgICAgICAgICAgIHRhcmdldC5pbnNlcnRCZWZvcmUobm9kZSwgdGFyZ2V0LmFjdHVhbF9lbmRfY2hpbGQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGFyZ2V0LmFjdHVhbF9lbmRfY2hpbGQgPSBub2RlLm5leHRTaWJsaW5nO1xuICAgICAgICB9XG4gICAgfVxuICAgIGVsc2UgaWYgKG5vZGUucGFyZW50Tm9kZSAhPT0gdGFyZ2V0IHx8IG5vZGUubmV4dFNpYmxpbmcgIT09IG51bGwpIHtcbiAgICAgICAgdGFyZ2V0LmFwcGVuZENoaWxkKG5vZGUpO1xuICAgIH1cbn1cbmZ1bmN0aW9uIGluc2VydCh0YXJnZXQsIG5vZGUsIGFuY2hvcikge1xuICAgIHRhcmdldC5pbnNlcnRCZWZvcmUobm9kZSwgYW5jaG9yIHx8IG51bGwpO1xufVxuZnVuY3Rpb24gaW5zZXJ0X2h5ZHJhdGlvbih0YXJnZXQsIG5vZGUsIGFuY2hvcikge1xuICAgIGlmIChpc19oeWRyYXRpbmcgJiYgIWFuY2hvcikge1xuICAgICAgICBhcHBlbmRfaHlkcmF0aW9uKHRhcmdldCwgbm9kZSk7XG4gICAgfVxuICAgIGVsc2UgaWYgKG5vZGUucGFyZW50Tm9kZSAhPT0gdGFyZ2V0IHx8IG5vZGUubmV4dFNpYmxpbmcgIT0gYW5jaG9yKSB7XG4gICAgICAgIHRhcmdldC5pbnNlcnRCZWZvcmUobm9kZSwgYW5jaG9yIHx8IG51bGwpO1xuICAgIH1cbn1cbmZ1bmN0aW9uIGRldGFjaChub2RlKSB7XG4gICAgbm9kZS5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKG5vZGUpO1xufVxuZnVuY3Rpb24gZGVzdHJveV9lYWNoKGl0ZXJhdGlvbnMsIGRldGFjaGluZykge1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgaXRlcmF0aW9ucy5sZW5ndGg7IGkgKz0gMSkge1xuICAgICAgICBpZiAoaXRlcmF0aW9uc1tpXSlcbiAgICAgICAgICAgIGl0ZXJhdGlvbnNbaV0uZChkZXRhY2hpbmcpO1xuICAgIH1cbn1cbmZ1bmN0aW9uIGVsZW1lbnQobmFtZSkge1xuICAgIHJldHVybiBkb2N1bWVudC5jcmVhdGVFbGVtZW50KG5hbWUpO1xufVxuZnVuY3Rpb24gZWxlbWVudF9pcyhuYW1lLCBpcykge1xuICAgIHJldHVybiBkb2N1bWVudC5jcmVhdGVFbGVtZW50KG5hbWUsIHsgaXMgfSk7XG59XG5mdW5jdGlvbiBvYmplY3Rfd2l0aG91dF9wcm9wZXJ0aWVzKG9iaiwgZXhjbHVkZSkge1xuICAgIGNvbnN0IHRhcmdldCA9IHt9O1xuICAgIGZvciAoY29uc3QgayBpbiBvYmopIHtcbiAgICAgICAgaWYgKGhhc19wcm9wKG9iaiwgaylcbiAgICAgICAgICAgIC8vIEB0cy1pZ25vcmVcbiAgICAgICAgICAgICYmIGV4Y2x1ZGUuaW5kZXhPZihrKSA9PT0gLTEpIHtcbiAgICAgICAgICAgIC8vIEB0cy1pZ25vcmVcbiAgICAgICAgICAgIHRhcmdldFtrXSA9IG9ialtrXTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdGFyZ2V0O1xufVxuZnVuY3Rpb24gc3ZnX2VsZW1lbnQobmFtZSkge1xuICAgIHJldHVybiBkb2N1bWVudC5jcmVhdGVFbGVtZW50TlMoJ2h0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnJywgbmFtZSk7XG59XG5mdW5jdGlvbiB0ZXh0KGRhdGEpIHtcbiAgICByZXR1cm4gZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoZGF0YSk7XG59XG5mdW5jdGlvbiBzcGFjZSgpIHtcbiAgICByZXR1cm4gdGV4dCgnICcpO1xufVxuZnVuY3Rpb24gZW1wdHkoKSB7XG4gICAgcmV0dXJuIHRleHQoJycpO1xufVxuZnVuY3Rpb24gbGlzdGVuKG5vZGUsIGV2ZW50LCBoYW5kbGVyLCBvcHRpb25zKSB7XG4gICAgbm9kZS5hZGRFdmVudExpc3RlbmVyKGV2ZW50LCBoYW5kbGVyLCBvcHRpb25zKTtcbiAgICByZXR1cm4gKCkgPT4gbm9kZS5yZW1vdmVFdmVudExpc3RlbmVyKGV2ZW50LCBoYW5kbGVyLCBvcHRpb25zKTtcbn1cbmZ1bmN0aW9uIHByZXZlbnRfZGVmYXVsdChmbikge1xuICAgIHJldHVybiBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgLy8gQHRzLWlnbm9yZVxuICAgICAgICByZXR1cm4gZm4uY2FsbCh0aGlzLCBldmVudCk7XG4gICAgfTtcbn1cbmZ1bmN0aW9uIHN0b3BfcHJvcGFnYXRpb24oZm4pIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICAvLyBAdHMtaWdub3JlXG4gICAgICAgIHJldHVybiBmbi5jYWxsKHRoaXMsIGV2ZW50KTtcbiAgICB9O1xufVxuZnVuY3Rpb24gc2VsZihmbikge1xuICAgIHJldHVybiBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgLy8gQHRzLWlnbm9yZVxuICAgICAgICBpZiAoZXZlbnQudGFyZ2V0ID09PSB0aGlzKVxuICAgICAgICAgICAgZm4uY2FsbCh0aGlzLCBldmVudCk7XG4gICAgfTtcbn1cbmZ1bmN0aW9uIHRydXN0ZWQoZm4pIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgIC8vIEB0cy1pZ25vcmVcbiAgICAgICAgaWYgKGV2ZW50LmlzVHJ1c3RlZClcbiAgICAgICAgICAgIGZuLmNhbGwodGhpcywgZXZlbnQpO1xuICAgIH07XG59XG5mdW5jdGlvbiBhdHRyKG5vZGUsIGF0dHJpYnV0ZSwgdmFsdWUpIHtcbiAgICBpZiAodmFsdWUgPT0gbnVsbClcbiAgICAgICAgbm9kZS5yZW1vdmVBdHRyaWJ1dGUoYXR0cmlidXRlKTtcbiAgICBlbHNlIGlmIChub2RlLmdldEF0dHJpYnV0ZShhdHRyaWJ1dGUpICE9PSB2YWx1ZSlcbiAgICAgICAgbm9kZS5zZXRBdHRyaWJ1dGUoYXR0cmlidXRlLCB2YWx1ZSk7XG59XG5mdW5jdGlvbiBzZXRfYXR0cmlidXRlcyhub2RlLCBhdHRyaWJ1dGVzKSB7XG4gICAgLy8gQHRzLWlnbm9yZVxuICAgIGNvbnN0IGRlc2NyaXB0b3JzID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMobm9kZS5fX3Byb3RvX18pO1xuICAgIGZvciAoY29uc3Qga2V5IGluIGF0dHJpYnV0ZXMpIHtcbiAgICAgICAgaWYgKGF0dHJpYnV0ZXNba2V5XSA9PSBudWxsKSB7XG4gICAgICAgICAgICBub2RlLnJlbW92ZUF0dHJpYnV0ZShrZXkpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGtleSA9PT0gJ3N0eWxlJykge1xuICAgICAgICAgICAgbm9kZS5zdHlsZS5jc3NUZXh0ID0gYXR0cmlidXRlc1trZXldO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGtleSA9PT0gJ19fdmFsdWUnKSB7XG4gICAgICAgICAgICBub2RlLnZhbHVlID0gbm9kZVtrZXldID0gYXR0cmlidXRlc1trZXldO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGRlc2NyaXB0b3JzW2tleV0gJiYgZGVzY3JpcHRvcnNba2V5XS5zZXQpIHtcbiAgICAgICAgICAgIG5vZGVba2V5XSA9IGF0dHJpYnV0ZXNba2V5XTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGF0dHIobm9kZSwga2V5LCBhdHRyaWJ1dGVzW2tleV0pO1xuICAgICAgICB9XG4gICAgfVxufVxuZnVuY3Rpb24gc2V0X3N2Z19hdHRyaWJ1dGVzKG5vZGUsIGF0dHJpYnV0ZXMpIHtcbiAgICBmb3IgKGNvbnN0IGtleSBpbiBhdHRyaWJ1dGVzKSB7XG4gICAgICAgIGF0dHIobm9kZSwga2V5LCBhdHRyaWJ1dGVzW2tleV0pO1xuICAgIH1cbn1cbmZ1bmN0aW9uIHNldF9jdXN0b21fZWxlbWVudF9kYXRhKG5vZGUsIHByb3AsIHZhbHVlKSB7XG4gICAgaWYgKHByb3AgaW4gbm9kZSkge1xuICAgICAgICBub2RlW3Byb3BdID0gdHlwZW9mIG5vZGVbcHJvcF0gPT09ICdib29sZWFuJyAmJiB2YWx1ZSA9PT0gJycgPyB0cnVlIDogdmFsdWU7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBhdHRyKG5vZGUsIHByb3AsIHZhbHVlKTtcbiAgICB9XG59XG5mdW5jdGlvbiB4bGlua19hdHRyKG5vZGUsIGF0dHJpYnV0ZSwgdmFsdWUpIHtcbiAgICBub2RlLnNldEF0dHJpYnV0ZU5TKCdodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rJywgYXR0cmlidXRlLCB2YWx1ZSk7XG59XG5mdW5jdGlvbiBnZXRfYmluZGluZ19ncm91cF92YWx1ZShncm91cCwgX192YWx1ZSwgY2hlY2tlZCkge1xuICAgIGNvbnN0IHZhbHVlID0gbmV3IFNldCgpO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZ3JvdXAubGVuZ3RoOyBpICs9IDEpIHtcbiAgICAgICAgaWYgKGdyb3VwW2ldLmNoZWNrZWQpXG4gICAgICAgICAgICB2YWx1ZS5hZGQoZ3JvdXBbaV0uX192YWx1ZSk7XG4gICAgfVxuICAgIGlmICghY2hlY2tlZCkge1xuICAgICAgICB2YWx1ZS5kZWxldGUoX192YWx1ZSk7XG4gICAgfVxuICAgIHJldHVybiBBcnJheS5mcm9tKHZhbHVlKTtcbn1cbmZ1bmN0aW9uIHRvX251bWJlcih2YWx1ZSkge1xuICAgIHJldHVybiB2YWx1ZSA9PT0gJycgPyBudWxsIDogK3ZhbHVlO1xufVxuZnVuY3Rpb24gdGltZV9yYW5nZXNfdG9fYXJyYXkocmFuZ2VzKSB7XG4gICAgY29uc3QgYXJyYXkgPSBbXTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHJhbmdlcy5sZW5ndGg7IGkgKz0gMSkge1xuICAgICAgICBhcnJheS5wdXNoKHsgc3RhcnQ6IHJhbmdlcy5zdGFydChpKSwgZW5kOiByYW5nZXMuZW5kKGkpIH0pO1xuICAgIH1cbiAgICByZXR1cm4gYXJyYXk7XG59XG5mdW5jdGlvbiBjaGlsZHJlbihlbGVtZW50KSB7XG4gICAgcmV0dXJuIEFycmF5LmZyb20oZWxlbWVudC5jaGlsZE5vZGVzKTtcbn1cbmZ1bmN0aW9uIGluaXRfY2xhaW1faW5mbyhub2Rlcykge1xuICAgIGlmIChub2Rlcy5jbGFpbV9pbmZvID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgbm9kZXMuY2xhaW1faW5mbyA9IHsgbGFzdF9pbmRleDogMCwgdG90YWxfY2xhaW1lZDogMCB9O1xuICAgIH1cbn1cbmZ1bmN0aW9uIGNsYWltX25vZGUobm9kZXMsIHByZWRpY2F0ZSwgcHJvY2Vzc05vZGUsIGNyZWF0ZU5vZGUsIGRvbnRVcGRhdGVMYXN0SW5kZXggPSBmYWxzZSkge1xuICAgIC8vIFRyeSB0byBmaW5kIG5vZGVzIGluIGFuIG9yZGVyIHN1Y2ggdGhhdCB3ZSBsZW5ndGhlbiB0aGUgbG9uZ2VzdCBpbmNyZWFzaW5nIHN1YnNlcXVlbmNlXG4gICAgaW5pdF9jbGFpbV9pbmZvKG5vZGVzKTtcbiAgICBjb25zdCByZXN1bHROb2RlID0gKCgpID0+IHtcbiAgICAgICAgLy8gV2UgZmlyc3QgdHJ5IHRvIGZpbmQgYW4gZWxlbWVudCBhZnRlciB0aGUgcHJldmlvdXMgb25lXG4gICAgICAgIGZvciAobGV0IGkgPSBub2Rlcy5jbGFpbV9pbmZvLmxhc3RfaW5kZXg7IGkgPCBub2Rlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgY29uc3Qgbm9kZSA9IG5vZGVzW2ldO1xuICAgICAgICAgICAgaWYgKHByZWRpY2F0ZShub2RlKSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlcGxhY2VtZW50ID0gcHJvY2Vzc05vZGUobm9kZSk7XG4gICAgICAgICAgICAgICAgaWYgKHJlcGxhY2VtZW50ID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgbm9kZXMuc3BsaWNlKGksIDEpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgbm9kZXNbaV0gPSByZXBsYWNlbWVudDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKCFkb250VXBkYXRlTGFzdEluZGV4KSB7XG4gICAgICAgICAgICAgICAgICAgIG5vZGVzLmNsYWltX2luZm8ubGFzdF9pbmRleCA9IGk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiBub2RlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIC8vIE90aGVyd2lzZSwgd2UgdHJ5IHRvIGZpbmQgb25lIGJlZm9yZVxuICAgICAgICAvLyBXZSBpdGVyYXRlIGluIHJldmVyc2Ugc28gdGhhdCB3ZSBkb24ndCBnbyB0b28gZmFyIGJhY2tcbiAgICAgICAgZm9yIChsZXQgaSA9IG5vZGVzLmNsYWltX2luZm8ubGFzdF9pbmRleCAtIDE7IGkgPj0gMDsgaS0tKSB7XG4gICAgICAgICAgICBjb25zdCBub2RlID0gbm9kZXNbaV07XG4gICAgICAgICAgICBpZiAocHJlZGljYXRlKG5vZGUpKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgcmVwbGFjZW1lbnQgPSBwcm9jZXNzTm9kZShub2RlKTtcbiAgICAgICAgICAgICAgICBpZiAocmVwbGFjZW1lbnQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICBub2Rlcy5zcGxpY2UoaSwgMSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBub2Rlc1tpXSA9IHJlcGxhY2VtZW50O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoIWRvbnRVcGRhdGVMYXN0SW5kZXgpIHtcbiAgICAgICAgICAgICAgICAgICAgbm9kZXMuY2xhaW1faW5mby5sYXN0X2luZGV4ID0gaTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAocmVwbGFjZW1lbnQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICAvLyBTaW5jZSB3ZSBzcGxpY2VkIGJlZm9yZSB0aGUgbGFzdF9pbmRleCwgd2UgZGVjcmVhc2UgaXRcbiAgICAgICAgICAgICAgICAgICAgbm9kZXMuY2xhaW1faW5mby5sYXN0X2luZGV4LS07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiBub2RlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIC8vIElmIHdlIGNhbid0IGZpbmQgYW55IG1hdGNoaW5nIG5vZGUsIHdlIGNyZWF0ZSBhIG5ldyBvbmVcbiAgICAgICAgcmV0dXJuIGNyZWF0ZU5vZGUoKTtcbiAgICB9KSgpO1xuICAgIHJlc3VsdE5vZGUuY2xhaW1fb3JkZXIgPSBub2Rlcy5jbGFpbV9pbmZvLnRvdGFsX2NsYWltZWQ7XG4gICAgbm9kZXMuY2xhaW1faW5mby50b3RhbF9jbGFpbWVkICs9IDE7XG4gICAgcmV0dXJuIHJlc3VsdE5vZGU7XG59XG5mdW5jdGlvbiBjbGFpbV9lbGVtZW50X2Jhc2Uobm9kZXMsIG5hbWUsIGF0dHJpYnV0ZXMsIGNyZWF0ZV9lbGVtZW50KSB7XG4gICAgcmV0dXJuIGNsYWltX25vZGUobm9kZXMsIChub2RlKSA9PiBub2RlLm5vZGVOYW1lID09PSBuYW1lLCAobm9kZSkgPT4ge1xuICAgICAgICBjb25zdCByZW1vdmUgPSBbXTtcbiAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCBub2RlLmF0dHJpYnV0ZXMubGVuZ3RoOyBqKyspIHtcbiAgICAgICAgICAgIGNvbnN0IGF0dHJpYnV0ZSA9IG5vZGUuYXR0cmlidXRlc1tqXTtcbiAgICAgICAgICAgIGlmICghYXR0cmlidXRlc1thdHRyaWJ1dGUubmFtZV0pIHtcbiAgICAgICAgICAgICAgICByZW1vdmUucHVzaChhdHRyaWJ1dGUubmFtZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmVtb3ZlLmZvckVhY2godiA9PiBub2RlLnJlbW92ZUF0dHJpYnV0ZSh2KSk7XG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfSwgKCkgPT4gY3JlYXRlX2VsZW1lbnQobmFtZSkpO1xufVxuZnVuY3Rpb24gY2xhaW1fZWxlbWVudChub2RlcywgbmFtZSwgYXR0cmlidXRlcykge1xuICAgIHJldHVybiBjbGFpbV9lbGVtZW50X2Jhc2Uobm9kZXMsIG5hbWUsIGF0dHJpYnV0ZXMsIGVsZW1lbnQpO1xufVxuZnVuY3Rpb24gY2xhaW1fc3ZnX2VsZW1lbnQobm9kZXMsIG5hbWUsIGF0dHJpYnV0ZXMpIHtcbiAgICByZXR1cm4gY2xhaW1fZWxlbWVudF9iYXNlKG5vZGVzLCBuYW1lLCBhdHRyaWJ1dGVzLCBzdmdfZWxlbWVudCk7XG59XG5mdW5jdGlvbiBjbGFpbV90ZXh0KG5vZGVzLCBkYXRhKSB7XG4gICAgcmV0dXJuIGNsYWltX25vZGUobm9kZXMsIChub2RlKSA9PiBub2RlLm5vZGVUeXBlID09PSAzLCAobm9kZSkgPT4ge1xuICAgICAgICBjb25zdCBkYXRhU3RyID0gJycgKyBkYXRhO1xuICAgICAgICBpZiAobm9kZS5kYXRhLnN0YXJ0c1dpdGgoZGF0YVN0cikpIHtcbiAgICAgICAgICAgIGlmIChub2RlLmRhdGEubGVuZ3RoICE9PSBkYXRhU3RyLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBub2RlLnNwbGl0VGV4dChkYXRhU3RyLmxlbmd0aCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBub2RlLmRhdGEgPSBkYXRhU3RyO1xuICAgICAgICB9XG4gICAgfSwgKCkgPT4gdGV4dChkYXRhKSwgdHJ1ZSAvLyBUZXh0IG5vZGVzIHNob3VsZCBub3QgdXBkYXRlIGxhc3QgaW5kZXggc2luY2UgaXQgaXMgbGlrZWx5IG5vdCB3b3J0aCBpdCB0byBlbGltaW5hdGUgYW4gaW5jcmVhc2luZyBzdWJzZXF1ZW5jZSBvZiBhY3R1YWwgZWxlbWVudHNcbiAgICApO1xufVxuZnVuY3Rpb24gY2xhaW1fc3BhY2Uobm9kZXMpIHtcbiAgICByZXR1cm4gY2xhaW1fdGV4dChub2RlcywgJyAnKTtcbn1cbmZ1bmN0aW9uIGZpbmRfY29tbWVudChub2RlcywgdGV4dCwgc3RhcnQpIHtcbiAgICBmb3IgKGxldCBpID0gc3RhcnQ7IGkgPCBub2Rlcy5sZW5ndGg7IGkgKz0gMSkge1xuICAgICAgICBjb25zdCBub2RlID0gbm9kZXNbaV07XG4gICAgICAgIGlmIChub2RlLm5vZGVUeXBlID09PSA4IC8qIGNvbW1lbnQgbm9kZSAqLyAmJiBub2RlLnRleHRDb250ZW50LnRyaW0oKSA9PT0gdGV4dCkge1xuICAgICAgICAgICAgcmV0dXJuIGk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG5vZGVzLmxlbmd0aDtcbn1cbmZ1bmN0aW9uIGNsYWltX2h0bWxfdGFnKG5vZGVzKSB7XG4gICAgLy8gZmluZCBodG1sIG9wZW5pbmcgdGFnXG4gICAgY29uc3Qgc3RhcnRfaW5kZXggPSBmaW5kX2NvbW1lbnQobm9kZXMsICdIVE1MX1RBR19TVEFSVCcsIDApO1xuICAgIGNvbnN0IGVuZF9pbmRleCA9IGZpbmRfY29tbWVudChub2RlcywgJ0hUTUxfVEFHX0VORCcsIHN0YXJ0X2luZGV4KTtcbiAgICBpZiAoc3RhcnRfaW5kZXggPT09IGVuZF9pbmRleCkge1xuICAgICAgICByZXR1cm4gbmV3IEh0bWxUYWdIeWRyYXRpb24oKTtcbiAgICB9XG4gICAgaW5pdF9jbGFpbV9pbmZvKG5vZGVzKTtcbiAgICBjb25zdCBodG1sX3RhZ19ub2RlcyA9IG5vZGVzLnNwbGljZShzdGFydF9pbmRleCwgZW5kX2luZGV4IC0gc3RhcnRfaW5kZXggKyAxKTtcbiAgICBkZXRhY2goaHRtbF90YWdfbm9kZXNbMF0pO1xuICAgIGRldGFjaChodG1sX3RhZ19ub2Rlc1todG1sX3RhZ19ub2Rlcy5sZW5ndGggLSAxXSk7XG4gICAgY29uc3QgY2xhaW1lZF9ub2RlcyA9IGh0bWxfdGFnX25vZGVzLnNsaWNlKDEsIGh0bWxfdGFnX25vZGVzLmxlbmd0aCAtIDEpO1xuICAgIGZvciAoY29uc3QgbiBvZiBjbGFpbWVkX25vZGVzKSB7XG4gICAgICAgIG4uY2xhaW1fb3JkZXIgPSBub2Rlcy5jbGFpbV9pbmZvLnRvdGFsX2NsYWltZWQ7XG4gICAgICAgIG5vZGVzLmNsYWltX2luZm8udG90YWxfY2xhaW1lZCArPSAxO1xuICAgIH1cbiAgICByZXR1cm4gbmV3IEh0bWxUYWdIeWRyYXRpb24oY2xhaW1lZF9ub2Rlcyk7XG59XG5mdW5jdGlvbiBzZXRfZGF0YSh0ZXh0LCBkYXRhKSB7XG4gICAgZGF0YSA9ICcnICsgZGF0YTtcbiAgICBpZiAodGV4dC53aG9sZVRleHQgIT09IGRhdGEpXG4gICAgICAgIHRleHQuZGF0YSA9IGRhdGE7XG59XG5mdW5jdGlvbiBzZXRfaW5wdXRfdmFsdWUoaW5wdXQsIHZhbHVlKSB7XG4gICAgaW5wdXQudmFsdWUgPSB2YWx1ZSA9PSBudWxsID8gJycgOiB2YWx1ZTtcbn1cbmZ1bmN0aW9uIHNldF9pbnB1dF90eXBlKGlucHV0LCB0eXBlKSB7XG4gICAgdHJ5IHtcbiAgICAgICAgaW5wdXQudHlwZSA9IHR5cGU7XG4gICAgfVxuICAgIGNhdGNoIChlKSB7XG4gICAgICAgIC8vIGRvIG5vdGhpbmdcbiAgICB9XG59XG5mdW5jdGlvbiBzZXRfc3R5bGUobm9kZSwga2V5LCB2YWx1ZSwgaW1wb3J0YW50KSB7XG4gICAgaWYgKHZhbHVlID09PSBudWxsKSB7XG4gICAgICAgIG5vZGUuc3R5bGUucmVtb3ZlUHJvcGVydHkoa2V5KTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIG5vZGUuc3R5bGUuc2V0UHJvcGVydHkoa2V5LCB2YWx1ZSwgaW1wb3J0YW50ID8gJ2ltcG9ydGFudCcgOiAnJyk7XG4gICAgfVxufVxuZnVuY3Rpb24gc2VsZWN0X29wdGlvbihzZWxlY3QsIHZhbHVlKSB7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzZWxlY3Qub3B0aW9ucy5sZW5ndGg7IGkgKz0gMSkge1xuICAgICAgICBjb25zdCBvcHRpb24gPSBzZWxlY3Qub3B0aW9uc1tpXTtcbiAgICAgICAgaWYgKG9wdGlvbi5fX3ZhbHVlID09PSB2YWx1ZSkge1xuICAgICAgICAgICAgb3B0aW9uLnNlbGVjdGVkID0gdHJ1ZTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgIH1cbiAgICBzZWxlY3Quc2VsZWN0ZWRJbmRleCA9IC0xOyAvLyBubyBvcHRpb24gc2hvdWxkIGJlIHNlbGVjdGVkXG59XG5mdW5jdGlvbiBzZWxlY3Rfb3B0aW9ucyhzZWxlY3QsIHZhbHVlKSB7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzZWxlY3Qub3B0aW9ucy5sZW5ndGg7IGkgKz0gMSkge1xuICAgICAgICBjb25zdCBvcHRpb24gPSBzZWxlY3Qub3B0aW9uc1tpXTtcbiAgICAgICAgb3B0aW9uLnNlbGVjdGVkID0gfnZhbHVlLmluZGV4T2Yob3B0aW9uLl9fdmFsdWUpO1xuICAgIH1cbn1cbmZ1bmN0aW9uIHNlbGVjdF92YWx1ZShzZWxlY3QpIHtcbiAgICBjb25zdCBzZWxlY3RlZF9vcHRpb24gPSBzZWxlY3QucXVlcnlTZWxlY3RvcignOmNoZWNrZWQnKSB8fCBzZWxlY3Qub3B0aW9uc1swXTtcbiAgICByZXR1cm4gc2VsZWN0ZWRfb3B0aW9uICYmIHNlbGVjdGVkX29wdGlvbi5fX3ZhbHVlO1xufVxuZnVuY3Rpb24gc2VsZWN0X211bHRpcGxlX3ZhbHVlKHNlbGVjdCkge1xuICAgIHJldHVybiBbXS5tYXAuY2FsbChzZWxlY3QucXVlcnlTZWxlY3RvckFsbCgnOmNoZWNrZWQnKSwgb3B0aW9uID0+IG9wdGlvbi5fX3ZhbHVlKTtcbn1cbi8vIHVuZm9ydHVuYXRlbHkgdGhpcyBjYW4ndCBiZSBhIGNvbnN0YW50IGFzIHRoYXQgd291bGRuJ3QgYmUgdHJlZS1zaGFrZWFibGVcbi8vIHNvIHdlIGNhY2hlIHRoZSByZXN1bHQgaW5zdGVhZFxubGV0IGNyb3Nzb3JpZ2luO1xuZnVuY3Rpb24gaXNfY3Jvc3NvcmlnaW4oKSB7XG4gICAgaWYgKGNyb3Nzb3JpZ2luID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgY3Jvc3NvcmlnaW4gPSBmYWxzZTtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGlmICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyAmJiB3aW5kb3cucGFyZW50KSB7XG4gICAgICAgICAgICAgICAgdm9pZCB3aW5kb3cucGFyZW50LmRvY3VtZW50O1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgY3Jvc3NvcmlnaW4gPSB0cnVlO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBjcm9zc29yaWdpbjtcbn1cbmZ1bmN0aW9uIGFkZF9yZXNpemVfbGlzdGVuZXIobm9kZSwgZm4pIHtcbiAgICBjb25zdCBjb21wdXRlZF9zdHlsZSA9IGdldENvbXB1dGVkU3R5bGUobm9kZSk7XG4gICAgaWYgKGNvbXB1dGVkX3N0eWxlLnBvc2l0aW9uID09PSAnc3RhdGljJykge1xuICAgICAgICBub2RlLnN0eWxlLnBvc2l0aW9uID0gJ3JlbGF0aXZlJztcbiAgICB9XG4gICAgY29uc3QgaWZyYW1lID0gZWxlbWVudCgnaWZyYW1lJyk7XG4gICAgaWZyYW1lLnNldEF0dHJpYnV0ZSgnc3R5bGUnLCAnZGlzcGxheTogYmxvY2s7IHBvc2l0aW9uOiBhYnNvbHV0ZTsgdG9wOiAwOyBsZWZ0OiAwOyB3aWR0aDogMTAwJTsgaGVpZ2h0OiAxMDAlOyAnICtcbiAgICAgICAgJ292ZXJmbG93OiBoaWRkZW47IGJvcmRlcjogMDsgb3BhY2l0eTogMDsgcG9pbnRlci1ldmVudHM6IG5vbmU7IHotaW5kZXg6IC0xOycpO1xuICAgIGlmcmFtZS5zZXRBdHRyaWJ1dGUoJ2FyaWEtaGlkZGVuJywgJ3RydWUnKTtcbiAgICBpZnJhbWUudGFiSW5kZXggPSAtMTtcbiAgICBjb25zdCBjcm9zc29yaWdpbiA9IGlzX2Nyb3Nzb3JpZ2luKCk7XG4gICAgbGV0IHVuc3Vic2NyaWJlO1xuICAgIGlmIChjcm9zc29yaWdpbikge1xuICAgICAgICBpZnJhbWUuc3JjID0gXCJkYXRhOnRleHQvaHRtbCw8c2NyaXB0Pm9ucmVzaXplPWZ1bmN0aW9uKCl7cGFyZW50LnBvc3RNZXNzYWdlKDAsJyonKX08L3NjcmlwdD5cIjtcbiAgICAgICAgdW5zdWJzY3JpYmUgPSBsaXN0ZW4od2luZG93LCAnbWVzc2FnZScsIChldmVudCkgPT4ge1xuICAgICAgICAgICAgaWYgKGV2ZW50LnNvdXJjZSA9PT0gaWZyYW1lLmNvbnRlbnRXaW5kb3cpXG4gICAgICAgICAgICAgICAgZm4oKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBpZnJhbWUuc3JjID0gJ2Fib3V0OmJsYW5rJztcbiAgICAgICAgaWZyYW1lLm9ubG9hZCA9ICgpID0+IHtcbiAgICAgICAgICAgIHVuc3Vic2NyaWJlID0gbGlzdGVuKGlmcmFtZS5jb250ZW50V2luZG93LCAncmVzaXplJywgZm4pO1xuICAgICAgICB9O1xuICAgIH1cbiAgICBhcHBlbmQobm9kZSwgaWZyYW1lKTtcbiAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgICBpZiAoY3Jvc3NvcmlnaW4pIHtcbiAgICAgICAgICAgIHVuc3Vic2NyaWJlKCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAodW5zdWJzY3JpYmUgJiYgaWZyYW1lLmNvbnRlbnRXaW5kb3cpIHtcbiAgICAgICAgICAgIHVuc3Vic2NyaWJlKCk7XG4gICAgICAgIH1cbiAgICAgICAgZGV0YWNoKGlmcmFtZSk7XG4gICAgfTtcbn1cbmZ1bmN0aW9uIHRvZ2dsZV9jbGFzcyhlbGVtZW50LCBuYW1lLCB0b2dnbGUpIHtcbiAgICBlbGVtZW50LmNsYXNzTGlzdFt0b2dnbGUgPyAnYWRkJyA6ICdyZW1vdmUnXShuYW1lKTtcbn1cbmZ1bmN0aW9uIGN1c3RvbV9ldmVudCh0eXBlLCBkZXRhaWwsIGJ1YmJsZXMgPSBmYWxzZSkge1xuICAgIGNvbnN0IGUgPSBkb2N1bWVudC5jcmVhdGVFdmVudCgnQ3VzdG9tRXZlbnQnKTtcbiAgICBlLmluaXRDdXN0b21FdmVudCh0eXBlLCBidWJibGVzLCBmYWxzZSwgZGV0YWlsKTtcbiAgICByZXR1cm4gZTtcbn1cbmZ1bmN0aW9uIHF1ZXJ5X3NlbGVjdG9yX2FsbChzZWxlY3RvciwgcGFyZW50ID0gZG9jdW1lbnQuYm9keSkge1xuICAgIHJldHVybiBBcnJheS5mcm9tKHBhcmVudC5xdWVyeVNlbGVjdG9yQWxsKHNlbGVjdG9yKSk7XG59XG5jbGFzcyBIdG1sVGFnIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgdGhpcy5lID0gdGhpcy5uID0gbnVsbDtcbiAgICB9XG4gICAgYyhodG1sKSB7XG4gICAgICAgIHRoaXMuaChodG1sKTtcbiAgICB9XG4gICAgbShodG1sLCB0YXJnZXQsIGFuY2hvciA9IG51bGwpIHtcbiAgICAgICAgaWYgKCF0aGlzLmUpIHtcbiAgICAgICAgICAgIHRoaXMuZSA9IGVsZW1lbnQodGFyZ2V0Lm5vZGVOYW1lKTtcbiAgICAgICAgICAgIHRoaXMudCA9IHRhcmdldDtcbiAgICAgICAgICAgIHRoaXMuYyhodG1sKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmkoYW5jaG9yKTtcbiAgICB9XG4gICAgaChodG1sKSB7XG4gICAgICAgIHRoaXMuZS5pbm5lckhUTUwgPSBodG1sO1xuICAgICAgICB0aGlzLm4gPSBBcnJheS5mcm9tKHRoaXMuZS5jaGlsZE5vZGVzKTtcbiAgICB9XG4gICAgaShhbmNob3IpIHtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLm4ubGVuZ3RoOyBpICs9IDEpIHtcbiAgICAgICAgICAgIGluc2VydCh0aGlzLnQsIHRoaXMubltpXSwgYW5jaG9yKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBwKGh0bWwpIHtcbiAgICAgICAgdGhpcy5kKCk7XG4gICAgICAgIHRoaXMuaChodG1sKTtcbiAgICAgICAgdGhpcy5pKHRoaXMuYSk7XG4gICAgfVxuICAgIGQoKSB7XG4gICAgICAgIHRoaXMubi5mb3JFYWNoKGRldGFjaCk7XG4gICAgfVxufVxuY2xhc3MgSHRtbFRhZ0h5ZHJhdGlvbiBleHRlbmRzIEh0bWxUYWcge1xuICAgIGNvbnN0cnVjdG9yKGNsYWltZWRfbm9kZXMpIHtcbiAgICAgICAgc3VwZXIoKTtcbiAgICAgICAgdGhpcy5lID0gdGhpcy5uID0gbnVsbDtcbiAgICAgICAgdGhpcy5sID0gY2xhaW1lZF9ub2RlcztcbiAgICB9XG4gICAgYyhodG1sKSB7XG4gICAgICAgIGlmICh0aGlzLmwpIHtcbiAgICAgICAgICAgIHRoaXMubiA9IHRoaXMubDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHN1cGVyLmMoaHRtbCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgaShhbmNob3IpIHtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLm4ubGVuZ3RoOyBpICs9IDEpIHtcbiAgICAgICAgICAgIGluc2VydF9oeWRyYXRpb24odGhpcy50LCB0aGlzLm5baV0sIGFuY2hvcik7XG4gICAgICAgIH1cbiAgICB9XG59XG5mdW5jdGlvbiBhdHRyaWJ1dGVfdG9fb2JqZWN0KGF0dHJpYnV0ZXMpIHtcbiAgICBjb25zdCByZXN1bHQgPSB7fTtcbiAgICBmb3IgKGNvbnN0IGF0dHJpYnV0ZSBvZiBhdHRyaWJ1dGVzKSB7XG4gICAgICAgIHJlc3VsdFthdHRyaWJ1dGUubmFtZV0gPSBhdHRyaWJ1dGUudmFsdWU7XG4gICAgfVxuICAgIHJldHVybiByZXN1bHQ7XG59XG5mdW5jdGlvbiBnZXRfY3VzdG9tX2VsZW1lbnRzX3Nsb3RzKGVsZW1lbnQpIHtcbiAgICBjb25zdCByZXN1bHQgPSB7fTtcbiAgICBlbGVtZW50LmNoaWxkTm9kZXMuZm9yRWFjaCgobm9kZSkgPT4ge1xuICAgICAgICByZXN1bHRbbm9kZS5zbG90IHx8ICdkZWZhdWx0J10gPSB0cnVlO1xuICAgIH0pO1xuICAgIHJldHVybiByZXN1bHQ7XG59XG5cbi8vIHdlIG5lZWQgdG8gc3RvcmUgdGhlIGluZm9ybWF0aW9uIGZvciBtdWx0aXBsZSBkb2N1bWVudHMgYmVjYXVzZSBhIFN2ZWx0ZSBhcHBsaWNhdGlvbiBjb3VsZCBhbHNvIGNvbnRhaW4gaWZyYW1lc1xuLy8gaHR0cHM6Ly9naXRodWIuY29tL3N2ZWx0ZWpzL3N2ZWx0ZS9pc3N1ZXMvMzYyNFxuY29uc3QgbWFuYWdlZF9zdHlsZXMgPSBuZXcgTWFwKCk7XG5sZXQgYWN0aXZlID0gMDtcbi8vIGh0dHBzOi8vZ2l0aHViLmNvbS9kYXJrc2t5YXBwL3N0cmluZy1oYXNoL2Jsb2IvbWFzdGVyL2luZGV4LmpzXG5mdW5jdGlvbiBoYXNoKHN0cikge1xuICAgIGxldCBoYXNoID0gNTM4MTtcbiAgICBsZXQgaSA9IHN0ci5sZW5ndGg7XG4gICAgd2hpbGUgKGktLSlcbiAgICAgICAgaGFzaCA9ICgoaGFzaCA8PCA1KSAtIGhhc2gpIF4gc3RyLmNoYXJDb2RlQXQoaSk7XG4gICAgcmV0dXJuIGhhc2ggPj4+IDA7XG59XG5mdW5jdGlvbiBjcmVhdGVfc3R5bGVfaW5mb3JtYXRpb24oZG9jLCBub2RlKSB7XG4gICAgY29uc3QgaW5mbyA9IHsgc3R5bGVzaGVldDogYXBwZW5kX2VtcHR5X3N0eWxlc2hlZXQobm9kZSksIHJ1bGVzOiB7fSB9O1xuICAgIG1hbmFnZWRfc3R5bGVzLnNldChkb2MsIGluZm8pO1xuICAgIHJldHVybiBpbmZvO1xufVxuZnVuY3Rpb24gY3JlYXRlX3J1bGUobm9kZSwgYSwgYiwgZHVyYXRpb24sIGRlbGF5LCBlYXNlLCBmbiwgdWlkID0gMCkge1xuICAgIGNvbnN0IHN0ZXAgPSAxNi42NjYgLyBkdXJhdGlvbjtcbiAgICBsZXQga2V5ZnJhbWVzID0gJ3tcXG4nO1xuICAgIGZvciAobGV0IHAgPSAwOyBwIDw9IDE7IHAgKz0gc3RlcCkge1xuICAgICAgICBjb25zdCB0ID0gYSArIChiIC0gYSkgKiBlYXNlKHApO1xuICAgICAgICBrZXlmcmFtZXMgKz0gcCAqIDEwMCArIGAleyR7Zm4odCwgMSAtIHQpfX1cXG5gO1xuICAgIH1cbiAgICBjb25zdCBydWxlID0ga2V5ZnJhbWVzICsgYDEwMCUgeyR7Zm4oYiwgMSAtIGIpfX1cXG59YDtcbiAgICBjb25zdCBuYW1lID0gYF9fc3ZlbHRlXyR7aGFzaChydWxlKX1fJHt1aWR9YDtcbiAgICBjb25zdCBkb2MgPSBnZXRfcm9vdF9mb3Jfc3R5bGUobm9kZSk7XG4gICAgY29uc3QgeyBzdHlsZXNoZWV0LCBydWxlcyB9ID0gbWFuYWdlZF9zdHlsZXMuZ2V0KGRvYykgfHwgY3JlYXRlX3N0eWxlX2luZm9ybWF0aW9uKGRvYywgbm9kZSk7XG4gICAgaWYgKCFydWxlc1tuYW1lXSkge1xuICAgICAgICBydWxlc1tuYW1lXSA9IHRydWU7XG4gICAgICAgIHN0eWxlc2hlZXQuaW5zZXJ0UnVsZShgQGtleWZyYW1lcyAke25hbWV9ICR7cnVsZX1gLCBzdHlsZXNoZWV0LmNzc1J1bGVzLmxlbmd0aCk7XG4gICAgfVxuICAgIGNvbnN0IGFuaW1hdGlvbiA9IG5vZGUuc3R5bGUuYW5pbWF0aW9uIHx8ICcnO1xuICAgIG5vZGUuc3R5bGUuYW5pbWF0aW9uID0gYCR7YW5pbWF0aW9uID8gYCR7YW5pbWF0aW9ufSwgYCA6ICcnfSR7bmFtZX0gJHtkdXJhdGlvbn1tcyBsaW5lYXIgJHtkZWxheX1tcyAxIGJvdGhgO1xuICAgIGFjdGl2ZSArPSAxO1xuICAgIHJldHVybiBuYW1lO1xufVxuZnVuY3Rpb24gZGVsZXRlX3J1bGUobm9kZSwgbmFtZSkge1xuICAgIGNvbnN0IHByZXZpb3VzID0gKG5vZGUuc3R5bGUuYW5pbWF0aW9uIHx8ICcnKS5zcGxpdCgnLCAnKTtcbiAgICBjb25zdCBuZXh0ID0gcHJldmlvdXMuZmlsdGVyKG5hbWVcbiAgICAgICAgPyBhbmltID0+IGFuaW0uaW5kZXhPZihuYW1lKSA8IDAgLy8gcmVtb3ZlIHNwZWNpZmljIGFuaW1hdGlvblxuICAgICAgICA6IGFuaW0gPT4gYW5pbS5pbmRleE9mKCdfX3N2ZWx0ZScpID09PSAtMSAvLyByZW1vdmUgYWxsIFN2ZWx0ZSBhbmltYXRpb25zXG4gICAgKTtcbiAgICBjb25zdCBkZWxldGVkID0gcHJldmlvdXMubGVuZ3RoIC0gbmV4dC5sZW5ndGg7XG4gICAgaWYgKGRlbGV0ZWQpIHtcbiAgICAgICAgbm9kZS5zdHlsZS5hbmltYXRpb24gPSBuZXh0LmpvaW4oJywgJyk7XG4gICAgICAgIGFjdGl2ZSAtPSBkZWxldGVkO1xuICAgICAgICBpZiAoIWFjdGl2ZSlcbiAgICAgICAgICAgIGNsZWFyX3J1bGVzKCk7XG4gICAgfVxufVxuZnVuY3Rpb24gY2xlYXJfcnVsZXMoKSB7XG4gICAgcmFmKCgpID0+IHtcbiAgICAgICAgaWYgKGFjdGl2ZSlcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgbWFuYWdlZF9zdHlsZXMuZm9yRWFjaChpbmZvID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHsgc3R5bGVzaGVldCB9ID0gaW5mbztcbiAgICAgICAgICAgIGxldCBpID0gc3R5bGVzaGVldC5jc3NSdWxlcy5sZW5ndGg7XG4gICAgICAgICAgICB3aGlsZSAoaS0tKVxuICAgICAgICAgICAgICAgIHN0eWxlc2hlZXQuZGVsZXRlUnVsZShpKTtcbiAgICAgICAgICAgIGluZm8ucnVsZXMgPSB7fTtcbiAgICAgICAgfSk7XG4gICAgICAgIG1hbmFnZWRfc3R5bGVzLmNsZWFyKCk7XG4gICAgfSk7XG59XG5cbmZ1bmN0aW9uIGNyZWF0ZV9hbmltYXRpb24obm9kZSwgZnJvbSwgZm4sIHBhcmFtcykge1xuICAgIGlmICghZnJvbSlcbiAgICAgICAgcmV0dXJuIG5vb3A7XG4gICAgY29uc3QgdG8gPSBub2RlLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgIGlmIChmcm9tLmxlZnQgPT09IHRvLmxlZnQgJiYgZnJvbS5yaWdodCA9PT0gdG8ucmlnaHQgJiYgZnJvbS50b3AgPT09IHRvLnRvcCAmJiBmcm9tLmJvdHRvbSA9PT0gdG8uYm90dG9tKVxuICAgICAgICByZXR1cm4gbm9vcDtcbiAgICBjb25zdCB7IGRlbGF5ID0gMCwgZHVyYXRpb24gPSAzMDAsIGVhc2luZyA9IGlkZW50aXR5LCBcbiAgICAvLyBAdHMtaWdub3JlIHRvZG86IHNob3VsZCB0aGlzIGJlIHNlcGFyYXRlZCBmcm9tIGRlc3RydWN0dXJpbmc/IE9yIHN0YXJ0L2VuZCBhZGRlZCB0byBwdWJsaWMgYXBpIGFuZCBkb2N1bWVudGF0aW9uP1xuICAgIHN0YXJ0OiBzdGFydF90aW1lID0gbm93KCkgKyBkZWxheSwgXG4gICAgLy8gQHRzLWlnbm9yZSB0b2RvOlxuICAgIGVuZCA9IHN0YXJ0X3RpbWUgKyBkdXJhdGlvbiwgdGljayA9IG5vb3AsIGNzcyB9ID0gZm4obm9kZSwgeyBmcm9tLCB0byB9LCBwYXJhbXMpO1xuICAgIGxldCBydW5uaW5nID0gdHJ1ZTtcbiAgICBsZXQgc3RhcnRlZCA9IGZhbHNlO1xuICAgIGxldCBuYW1lO1xuICAgIGZ1bmN0aW9uIHN0YXJ0KCkge1xuICAgICAgICBpZiAoY3NzKSB7XG4gICAgICAgICAgICBuYW1lID0gY3JlYXRlX3J1bGUobm9kZSwgMCwgMSwgZHVyYXRpb24sIGRlbGF5LCBlYXNpbmcsIGNzcyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFkZWxheSkge1xuICAgICAgICAgICAgc3RhcnRlZCA9IHRydWU7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZnVuY3Rpb24gc3RvcCgpIHtcbiAgICAgICAgaWYgKGNzcylcbiAgICAgICAgICAgIGRlbGV0ZV9ydWxlKG5vZGUsIG5hbWUpO1xuICAgICAgICBydW5uaW5nID0gZmFsc2U7XG4gICAgfVxuICAgIGxvb3Aobm93ID0+IHtcbiAgICAgICAgaWYgKCFzdGFydGVkICYmIG5vdyA+PSBzdGFydF90aW1lKSB7XG4gICAgICAgICAgICBzdGFydGVkID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoc3RhcnRlZCAmJiBub3cgPj0gZW5kKSB7XG4gICAgICAgICAgICB0aWNrKDEsIDApO1xuICAgICAgICAgICAgc3RvcCgpO1xuICAgICAgICB9XG4gICAgICAgIGlmICghcnVubmluZykge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIGlmIChzdGFydGVkKSB7XG4gICAgICAgICAgICBjb25zdCBwID0gbm93IC0gc3RhcnRfdGltZTtcbiAgICAgICAgICAgIGNvbnN0IHQgPSAwICsgMSAqIGVhc2luZyhwIC8gZHVyYXRpb24pO1xuICAgICAgICAgICAgdGljayh0LCAxIC0gdCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfSk7XG4gICAgc3RhcnQoKTtcbiAgICB0aWNrKDAsIDEpO1xuICAgIHJldHVybiBzdG9wO1xufVxuZnVuY3Rpb24gZml4X3Bvc2l0aW9uKG5vZGUpIHtcbiAgICBjb25zdCBzdHlsZSA9IGdldENvbXB1dGVkU3R5bGUobm9kZSk7XG4gICAgaWYgKHN0eWxlLnBvc2l0aW9uICE9PSAnYWJzb2x1dGUnICYmIHN0eWxlLnBvc2l0aW9uICE9PSAnZml4ZWQnKSB7XG4gICAgICAgIGNvbnN0IHsgd2lkdGgsIGhlaWdodCB9ID0gc3R5bGU7XG4gICAgICAgIGNvbnN0IGEgPSBub2RlLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgICAgICBub2RlLnN0eWxlLnBvc2l0aW9uID0gJ2Fic29sdXRlJztcbiAgICAgICAgbm9kZS5zdHlsZS53aWR0aCA9IHdpZHRoO1xuICAgICAgICBub2RlLnN0eWxlLmhlaWdodCA9IGhlaWdodDtcbiAgICAgICAgYWRkX3RyYW5zZm9ybShub2RlLCBhKTtcbiAgICB9XG59XG5mdW5jdGlvbiBhZGRfdHJhbnNmb3JtKG5vZGUsIGEpIHtcbiAgICBjb25zdCBiID0gbm9kZS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICBpZiAoYS5sZWZ0ICE9PSBiLmxlZnQgfHwgYS50b3AgIT09IGIudG9wKSB7XG4gICAgICAgIGNvbnN0IHN0eWxlID0gZ2V0Q29tcHV0ZWRTdHlsZShub2RlKTtcbiAgICAgICAgY29uc3QgdHJhbnNmb3JtID0gc3R5bGUudHJhbnNmb3JtID09PSAnbm9uZScgPyAnJyA6IHN0eWxlLnRyYW5zZm9ybTtcbiAgICAgICAgbm9kZS5zdHlsZS50cmFuc2Zvcm0gPSBgJHt0cmFuc2Zvcm19IHRyYW5zbGF0ZSgke2EubGVmdCAtIGIubGVmdH1weCwgJHthLnRvcCAtIGIudG9wfXB4KWA7XG4gICAgfVxufVxuXG5sZXQgY3VycmVudF9jb21wb25lbnQ7XG5mdW5jdGlvbiBzZXRfY3VycmVudF9jb21wb25lbnQoY29tcG9uZW50KSB7XG4gICAgY3VycmVudF9jb21wb25lbnQgPSBjb21wb25lbnQ7XG59XG5mdW5jdGlvbiBnZXRfY3VycmVudF9jb21wb25lbnQoKSB7XG4gICAgaWYgKCFjdXJyZW50X2NvbXBvbmVudClcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdGdW5jdGlvbiBjYWxsZWQgb3V0c2lkZSBjb21wb25lbnQgaW5pdGlhbGl6YXRpb24nKTtcbiAgICByZXR1cm4gY3VycmVudF9jb21wb25lbnQ7XG59XG5mdW5jdGlvbiBiZWZvcmVVcGRhdGUoZm4pIHtcbiAgICBnZXRfY3VycmVudF9jb21wb25lbnQoKS4kJC5iZWZvcmVfdXBkYXRlLnB1c2goZm4pO1xufVxuZnVuY3Rpb24gb25Nb3VudChmbikge1xuICAgIGdldF9jdXJyZW50X2NvbXBvbmVudCgpLiQkLm9uX21vdW50LnB1c2goZm4pO1xufVxuZnVuY3Rpb24gYWZ0ZXJVcGRhdGUoZm4pIHtcbiAgICBnZXRfY3VycmVudF9jb21wb25lbnQoKS4kJC5hZnRlcl91cGRhdGUucHVzaChmbik7XG59XG5mdW5jdGlvbiBvbkRlc3Ryb3koZm4pIHtcbiAgICBnZXRfY3VycmVudF9jb21wb25lbnQoKS4kJC5vbl9kZXN0cm95LnB1c2goZm4pO1xufVxuZnVuY3Rpb24gY3JlYXRlRXZlbnREaXNwYXRjaGVyKCkge1xuICAgIGNvbnN0IGNvbXBvbmVudCA9IGdldF9jdXJyZW50X2NvbXBvbmVudCgpO1xuICAgIHJldHVybiAodHlwZSwgZGV0YWlsKSA9PiB7XG4gICAgICAgIGNvbnN0IGNhbGxiYWNrcyA9IGNvbXBvbmVudC4kJC5jYWxsYmFja3NbdHlwZV07XG4gICAgICAgIGlmIChjYWxsYmFja3MpIHtcbiAgICAgICAgICAgIC8vIFRPRE8gYXJlIHRoZXJlIHNpdHVhdGlvbnMgd2hlcmUgZXZlbnRzIGNvdWxkIGJlIGRpc3BhdGNoZWRcbiAgICAgICAgICAgIC8vIGluIGEgc2VydmVyIChub24tRE9NKSBlbnZpcm9ubWVudD9cbiAgICAgICAgICAgIGNvbnN0IGV2ZW50ID0gY3VzdG9tX2V2ZW50KHR5cGUsIGRldGFpbCk7XG4gICAgICAgICAgICBjYWxsYmFja3Muc2xpY2UoKS5mb3JFYWNoKGZuID0+IHtcbiAgICAgICAgICAgICAgICBmbi5jYWxsKGNvbXBvbmVudCwgZXZlbnQpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9O1xufVxuZnVuY3Rpb24gc2V0Q29udGV4dChrZXksIGNvbnRleHQpIHtcbiAgICBnZXRfY3VycmVudF9jb21wb25lbnQoKS4kJC5jb250ZXh0LnNldChrZXksIGNvbnRleHQpO1xufVxuZnVuY3Rpb24gZ2V0Q29udGV4dChrZXkpIHtcbiAgICByZXR1cm4gZ2V0X2N1cnJlbnRfY29tcG9uZW50KCkuJCQuY29udGV4dC5nZXQoa2V5KTtcbn1cbmZ1bmN0aW9uIGdldEFsbENvbnRleHRzKCkge1xuICAgIHJldHVybiBnZXRfY3VycmVudF9jb21wb25lbnQoKS4kJC5jb250ZXh0O1xufVxuZnVuY3Rpb24gaGFzQ29udGV4dChrZXkpIHtcbiAgICByZXR1cm4gZ2V0X2N1cnJlbnRfY29tcG9uZW50KCkuJCQuY29udGV4dC5oYXMoa2V5KTtcbn1cbi8vIFRPRE8gZmlndXJlIG91dCBpZiB3ZSBzdGlsbCB3YW50IHRvIHN1cHBvcnRcbi8vIHNob3J0aGFuZCBldmVudHMsIG9yIGlmIHdlIHdhbnQgdG8gaW1wbGVtZW50XG4vLyBhIHJlYWwgYnViYmxpbmcgbWVjaGFuaXNtXG5mdW5jdGlvbiBidWJibGUoY29tcG9uZW50LCBldmVudCkge1xuICAgIGNvbnN0IGNhbGxiYWNrcyA9IGNvbXBvbmVudC4kJC5jYWxsYmFja3NbZXZlbnQudHlwZV07XG4gICAgaWYgKGNhbGxiYWNrcykge1xuICAgICAgICAvLyBAdHMtaWdub3JlXG4gICAgICAgIGNhbGxiYWNrcy5zbGljZSgpLmZvckVhY2goZm4gPT4gZm4uY2FsbCh0aGlzLCBldmVudCkpO1xuICAgIH1cbn1cblxuY29uc3QgZGlydHlfY29tcG9uZW50cyA9IFtdO1xuY29uc3QgaW50cm9zID0geyBlbmFibGVkOiBmYWxzZSB9O1xuY29uc3QgYmluZGluZ19jYWxsYmFja3MgPSBbXTtcbmNvbnN0IHJlbmRlcl9jYWxsYmFja3MgPSBbXTtcbmNvbnN0IGZsdXNoX2NhbGxiYWNrcyA9IFtdO1xuY29uc3QgcmVzb2x2ZWRfcHJvbWlzZSA9IFByb21pc2UucmVzb2x2ZSgpO1xubGV0IHVwZGF0ZV9zY2hlZHVsZWQgPSBmYWxzZTtcbmZ1bmN0aW9uIHNjaGVkdWxlX3VwZGF0ZSgpIHtcbiAgICBpZiAoIXVwZGF0ZV9zY2hlZHVsZWQpIHtcbiAgICAgICAgdXBkYXRlX3NjaGVkdWxlZCA9IHRydWU7XG4gICAgICAgIHJlc29sdmVkX3Byb21pc2UudGhlbihmbHVzaCk7XG4gICAgfVxufVxuZnVuY3Rpb24gdGljaygpIHtcbiAgICBzY2hlZHVsZV91cGRhdGUoKTtcbiAgICByZXR1cm4gcmVzb2x2ZWRfcHJvbWlzZTtcbn1cbmZ1bmN0aW9uIGFkZF9yZW5kZXJfY2FsbGJhY2soZm4pIHtcbiAgICByZW5kZXJfY2FsbGJhY2tzLnB1c2goZm4pO1xufVxuZnVuY3Rpb24gYWRkX2ZsdXNoX2NhbGxiYWNrKGZuKSB7XG4gICAgZmx1c2hfY2FsbGJhY2tzLnB1c2goZm4pO1xufVxuLy8gZmx1c2goKSBjYWxscyBjYWxsYmFja3MgaW4gdGhpcyBvcmRlcjpcbi8vIDEuIEFsbCBiZWZvcmVVcGRhdGUgY2FsbGJhY2tzLCBpbiBvcmRlcjogcGFyZW50cyBiZWZvcmUgY2hpbGRyZW5cbi8vIDIuIEFsbCBiaW5kOnRoaXMgY2FsbGJhY2tzLCBpbiByZXZlcnNlIG9yZGVyOiBjaGlsZHJlbiBiZWZvcmUgcGFyZW50cy5cbi8vIDMuIEFsbCBhZnRlclVwZGF0ZSBjYWxsYmFja3MsIGluIG9yZGVyOiBwYXJlbnRzIGJlZm9yZSBjaGlsZHJlbi4gRVhDRVBUXG4vLyAgICBmb3IgYWZ0ZXJVcGRhdGVzIGNhbGxlZCBkdXJpbmcgdGhlIGluaXRpYWwgb25Nb3VudCwgd2hpY2ggYXJlIGNhbGxlZCBpblxuLy8gICAgcmV2ZXJzZSBvcmRlcjogY2hpbGRyZW4gYmVmb3JlIHBhcmVudHMuXG4vLyBTaW5jZSBjYWxsYmFja3MgbWlnaHQgdXBkYXRlIGNvbXBvbmVudCB2YWx1ZXMsIHdoaWNoIGNvdWxkIHRyaWdnZXIgYW5vdGhlclxuLy8gY2FsbCB0byBmbHVzaCgpLCB0aGUgZm9sbG93aW5nIHN0ZXBzIGd1YXJkIGFnYWluc3QgdGhpczpcbi8vIDEuIER1cmluZyBiZWZvcmVVcGRhdGUsIGFueSB1cGRhdGVkIGNvbXBvbmVudHMgd2lsbCBiZSBhZGRlZCB0byB0aGVcbi8vICAgIGRpcnR5X2NvbXBvbmVudHMgYXJyYXkgYW5kIHdpbGwgY2F1c2UgYSByZWVudHJhbnQgY2FsbCB0byBmbHVzaCgpLiBCZWNhdXNlXG4vLyAgICB0aGUgZmx1c2ggaW5kZXggaXMga2VwdCBvdXRzaWRlIHRoZSBmdW5jdGlvbiwgdGhlIHJlZW50cmFudCBjYWxsIHdpbGwgcGlja1xuLy8gICAgdXAgd2hlcmUgdGhlIGVhcmxpZXIgY2FsbCBsZWZ0IG9mZiBhbmQgZ28gdGhyb3VnaCBhbGwgZGlydHkgY29tcG9uZW50cy4gVGhlXG4vLyAgICBjdXJyZW50X2NvbXBvbmVudCB2YWx1ZSBpcyBzYXZlZCBhbmQgcmVzdG9yZWQgc28gdGhhdCB0aGUgcmVlbnRyYW50IGNhbGwgd2lsbFxuLy8gICAgbm90IGludGVyZmVyZSB3aXRoIHRoZSBcInBhcmVudFwiIGZsdXNoKCkgY2FsbC5cbi8vIDIuIGJpbmQ6dGhpcyBjYWxsYmFja3MgY2Fubm90IHRyaWdnZXIgbmV3IGZsdXNoKCkgY2FsbHMuXG4vLyAzLiBEdXJpbmcgYWZ0ZXJVcGRhdGUsIGFueSB1cGRhdGVkIGNvbXBvbmVudHMgd2lsbCBOT1QgaGF2ZSB0aGVpciBhZnRlclVwZGF0ZVxuLy8gICAgY2FsbGJhY2sgY2FsbGVkIGEgc2Vjb25kIHRpbWU7IHRoZSBzZWVuX2NhbGxiYWNrcyBzZXQsIG91dHNpZGUgdGhlIGZsdXNoKClcbi8vICAgIGZ1bmN0aW9uLCBndWFyYW50ZWVzIHRoaXMgYmVoYXZpb3IuXG5jb25zdCBzZWVuX2NhbGxiYWNrcyA9IG5ldyBTZXQoKTtcbmxldCBmbHVzaGlkeCA9IDA7IC8vIERvICpub3QqIG1vdmUgdGhpcyBpbnNpZGUgdGhlIGZsdXNoKCkgZnVuY3Rpb25cbmZ1bmN0aW9uIGZsdXNoKCkge1xuICAgIGNvbnN0IHNhdmVkX2NvbXBvbmVudCA9IGN1cnJlbnRfY29tcG9uZW50O1xuICAgIGRvIHtcbiAgICAgICAgLy8gZmlyc3QsIGNhbGwgYmVmb3JlVXBkYXRlIGZ1bmN0aW9uc1xuICAgICAgICAvLyBhbmQgdXBkYXRlIGNvbXBvbmVudHNcbiAgICAgICAgd2hpbGUgKGZsdXNoaWR4IDwgZGlydHlfY29tcG9uZW50cy5sZW5ndGgpIHtcbiAgICAgICAgICAgIGNvbnN0IGNvbXBvbmVudCA9IGRpcnR5X2NvbXBvbmVudHNbZmx1c2hpZHhdO1xuICAgICAgICAgICAgZmx1c2hpZHgrKztcbiAgICAgICAgICAgIHNldF9jdXJyZW50X2NvbXBvbmVudChjb21wb25lbnQpO1xuICAgICAgICAgICAgdXBkYXRlKGNvbXBvbmVudC4kJCk7XG4gICAgICAgIH1cbiAgICAgICAgc2V0X2N1cnJlbnRfY29tcG9uZW50KG51bGwpO1xuICAgICAgICBkaXJ0eV9jb21wb25lbnRzLmxlbmd0aCA9IDA7XG4gICAgICAgIGZsdXNoaWR4ID0gMDtcbiAgICAgICAgd2hpbGUgKGJpbmRpbmdfY2FsbGJhY2tzLmxlbmd0aClcbiAgICAgICAgICAgIGJpbmRpbmdfY2FsbGJhY2tzLnBvcCgpKCk7XG4gICAgICAgIC8vIHRoZW4sIG9uY2UgY29tcG9uZW50cyBhcmUgdXBkYXRlZCwgY2FsbFxuICAgICAgICAvLyBhZnRlclVwZGF0ZSBmdW5jdGlvbnMuIFRoaXMgbWF5IGNhdXNlXG4gICAgICAgIC8vIHN1YnNlcXVlbnQgdXBkYXRlcy4uLlxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHJlbmRlcl9jYWxsYmFja3MubGVuZ3RoOyBpICs9IDEpIHtcbiAgICAgICAgICAgIGNvbnN0IGNhbGxiYWNrID0gcmVuZGVyX2NhbGxiYWNrc1tpXTtcbiAgICAgICAgICAgIGlmICghc2Vlbl9jYWxsYmFja3MuaGFzKGNhbGxiYWNrKSkge1xuICAgICAgICAgICAgICAgIC8vIC4uLnNvIGd1YXJkIGFnYWluc3QgaW5maW5pdGUgbG9vcHNcbiAgICAgICAgICAgICAgICBzZWVuX2NhbGxiYWNrcy5hZGQoY2FsbGJhY2spO1xuICAgICAgICAgICAgICAgIGNhbGxiYWNrKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmVuZGVyX2NhbGxiYWNrcy5sZW5ndGggPSAwO1xuICAgIH0gd2hpbGUgKGRpcnR5X2NvbXBvbmVudHMubGVuZ3RoKTtcbiAgICB3aGlsZSAoZmx1c2hfY2FsbGJhY2tzLmxlbmd0aCkge1xuICAgICAgICBmbHVzaF9jYWxsYmFja3MucG9wKCkoKTtcbiAgICB9XG4gICAgdXBkYXRlX3NjaGVkdWxlZCA9IGZhbHNlO1xuICAgIHNlZW5fY2FsbGJhY2tzLmNsZWFyKCk7XG4gICAgc2V0X2N1cnJlbnRfY29tcG9uZW50KHNhdmVkX2NvbXBvbmVudCk7XG59XG5mdW5jdGlvbiB1cGRhdGUoJCQpIHtcbiAgICBpZiAoJCQuZnJhZ21lbnQgIT09IG51bGwpIHtcbiAgICAgICAgJCQudXBkYXRlKCk7XG4gICAgICAgIHJ1bl9hbGwoJCQuYmVmb3JlX3VwZGF0ZSk7XG4gICAgICAgIGNvbnN0IGRpcnR5ID0gJCQuZGlydHk7XG4gICAgICAgICQkLmRpcnR5ID0gWy0xXTtcbiAgICAgICAgJCQuZnJhZ21lbnQgJiYgJCQuZnJhZ21lbnQucCgkJC5jdHgsIGRpcnR5KTtcbiAgICAgICAgJCQuYWZ0ZXJfdXBkYXRlLmZvckVhY2goYWRkX3JlbmRlcl9jYWxsYmFjayk7XG4gICAgfVxufVxuXG5sZXQgcHJvbWlzZTtcbmZ1bmN0aW9uIHdhaXQoKSB7XG4gICAgaWYgKCFwcm9taXNlKSB7XG4gICAgICAgIHByb21pc2UgPSBQcm9taXNlLnJlc29sdmUoKTtcbiAgICAgICAgcHJvbWlzZS50aGVuKCgpID0+IHtcbiAgICAgICAgICAgIHByb21pc2UgPSBudWxsO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgcmV0dXJuIHByb21pc2U7XG59XG5mdW5jdGlvbiBkaXNwYXRjaChub2RlLCBkaXJlY3Rpb24sIGtpbmQpIHtcbiAgICBub2RlLmRpc3BhdGNoRXZlbnQoY3VzdG9tX2V2ZW50KGAke2RpcmVjdGlvbiA/ICdpbnRybycgOiAnb3V0cm8nfSR7a2luZH1gKSk7XG59XG5jb25zdCBvdXRyb2luZyA9IG5ldyBTZXQoKTtcbmxldCBvdXRyb3M7XG5mdW5jdGlvbiBncm91cF9vdXRyb3MoKSB7XG4gICAgb3V0cm9zID0ge1xuICAgICAgICByOiAwLFxuICAgICAgICBjOiBbXSxcbiAgICAgICAgcDogb3V0cm9zIC8vIHBhcmVudCBncm91cFxuICAgIH07XG59XG5mdW5jdGlvbiBjaGVja19vdXRyb3MoKSB7XG4gICAgaWYgKCFvdXRyb3Mucikge1xuICAgICAgICBydW5fYWxsKG91dHJvcy5jKTtcbiAgICB9XG4gICAgb3V0cm9zID0gb3V0cm9zLnA7XG59XG5mdW5jdGlvbiB0cmFuc2l0aW9uX2luKGJsb2NrLCBsb2NhbCkge1xuICAgIGlmIChibG9jayAmJiBibG9jay5pKSB7XG4gICAgICAgIG91dHJvaW5nLmRlbGV0ZShibG9jayk7XG4gICAgICAgIGJsb2NrLmkobG9jYWwpO1xuICAgIH1cbn1cbmZ1bmN0aW9uIHRyYW5zaXRpb25fb3V0KGJsb2NrLCBsb2NhbCwgZGV0YWNoLCBjYWxsYmFjaykge1xuICAgIGlmIChibG9jayAmJiBibG9jay5vKSB7XG4gICAgICAgIGlmIChvdXRyb2luZy5oYXMoYmxvY2spKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICBvdXRyb2luZy5hZGQoYmxvY2spO1xuICAgICAgICBvdXRyb3MuYy5wdXNoKCgpID0+IHtcbiAgICAgICAgICAgIG91dHJvaW5nLmRlbGV0ZShibG9jayk7XG4gICAgICAgICAgICBpZiAoY2FsbGJhY2spIHtcbiAgICAgICAgICAgICAgICBpZiAoZGV0YWNoKVxuICAgICAgICAgICAgICAgICAgICBibG9jay5kKDEpO1xuICAgICAgICAgICAgICAgIGNhbGxiYWNrKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICBibG9jay5vKGxvY2FsKTtcbiAgICB9XG59XG5jb25zdCBudWxsX3RyYW5zaXRpb24gPSB7IGR1cmF0aW9uOiAwIH07XG5mdW5jdGlvbiBjcmVhdGVfaW5fdHJhbnNpdGlvbihub2RlLCBmbiwgcGFyYW1zKSB7XG4gICAgbGV0IGNvbmZpZyA9IGZuKG5vZGUsIHBhcmFtcyk7XG4gICAgbGV0IHJ1bm5pbmcgPSBmYWxzZTtcbiAgICBsZXQgYW5pbWF0aW9uX25hbWU7XG4gICAgbGV0IHRhc2s7XG4gICAgbGV0IHVpZCA9IDA7XG4gICAgZnVuY3Rpb24gY2xlYW51cCgpIHtcbiAgICAgICAgaWYgKGFuaW1hdGlvbl9uYW1lKVxuICAgICAgICAgICAgZGVsZXRlX3J1bGUobm9kZSwgYW5pbWF0aW9uX25hbWUpO1xuICAgIH1cbiAgICBmdW5jdGlvbiBnbygpIHtcbiAgICAgICAgY29uc3QgeyBkZWxheSA9IDAsIGR1cmF0aW9uID0gMzAwLCBlYXNpbmcgPSBpZGVudGl0eSwgdGljayA9IG5vb3AsIGNzcyB9ID0gY29uZmlnIHx8IG51bGxfdHJhbnNpdGlvbjtcbiAgICAgICAgaWYgKGNzcylcbiAgICAgICAgICAgIGFuaW1hdGlvbl9uYW1lID0gY3JlYXRlX3J1bGUobm9kZSwgMCwgMSwgZHVyYXRpb24sIGRlbGF5LCBlYXNpbmcsIGNzcywgdWlkKyspO1xuICAgICAgICB0aWNrKDAsIDEpO1xuICAgICAgICBjb25zdCBzdGFydF90aW1lID0gbm93KCkgKyBkZWxheTtcbiAgICAgICAgY29uc3QgZW5kX3RpbWUgPSBzdGFydF90aW1lICsgZHVyYXRpb247XG4gICAgICAgIGlmICh0YXNrKVxuICAgICAgICAgICAgdGFzay5hYm9ydCgpO1xuICAgICAgICBydW5uaW5nID0gdHJ1ZTtcbiAgICAgICAgYWRkX3JlbmRlcl9jYWxsYmFjaygoKSA9PiBkaXNwYXRjaChub2RlLCB0cnVlLCAnc3RhcnQnKSk7XG4gICAgICAgIHRhc2sgPSBsb29wKG5vdyA9PiB7XG4gICAgICAgICAgICBpZiAocnVubmluZykge1xuICAgICAgICAgICAgICAgIGlmIChub3cgPj0gZW5kX3RpbWUpIHtcbiAgICAgICAgICAgICAgICAgICAgdGljaygxLCAwKTtcbiAgICAgICAgICAgICAgICAgICAgZGlzcGF0Y2gobm9kZSwgdHJ1ZSwgJ2VuZCcpO1xuICAgICAgICAgICAgICAgICAgICBjbGVhbnVwKCk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBydW5uaW5nID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChub3cgPj0gc3RhcnRfdGltZSkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCB0ID0gZWFzaW5nKChub3cgLSBzdGFydF90aW1lKSAvIGR1cmF0aW9uKTtcbiAgICAgICAgICAgICAgICAgICAgdGljayh0LCAxIC0gdCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHJ1bm5pbmc7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBsZXQgc3RhcnRlZCA9IGZhbHNlO1xuICAgIHJldHVybiB7XG4gICAgICAgIHN0YXJ0KCkge1xuICAgICAgICAgICAgaWYgKHN0YXJ0ZWQpXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgc3RhcnRlZCA9IHRydWU7XG4gICAgICAgICAgICBkZWxldGVfcnVsZShub2RlKTtcbiAgICAgICAgICAgIGlmIChpc19mdW5jdGlvbihjb25maWcpKSB7XG4gICAgICAgICAgICAgICAgY29uZmlnID0gY29uZmlnKCk7XG4gICAgICAgICAgICAgICAgd2FpdCgpLnRoZW4oZ28pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgZ28oKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgaW52YWxpZGF0ZSgpIHtcbiAgICAgICAgICAgIHN0YXJ0ZWQgPSBmYWxzZTtcbiAgICAgICAgfSxcbiAgICAgICAgZW5kKCkge1xuICAgICAgICAgICAgaWYgKHJ1bm5pbmcpIHtcbiAgICAgICAgICAgICAgICBjbGVhbnVwKCk7XG4gICAgICAgICAgICAgICAgcnVubmluZyA9IGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfTtcbn1cbmZ1bmN0aW9uIGNyZWF0ZV9vdXRfdHJhbnNpdGlvbihub2RlLCBmbiwgcGFyYW1zKSB7XG4gICAgbGV0IGNvbmZpZyA9IGZuKG5vZGUsIHBhcmFtcyk7XG4gICAgbGV0IHJ1bm5pbmcgPSB0cnVlO1xuICAgIGxldCBhbmltYXRpb25fbmFtZTtcbiAgICBjb25zdCBncm91cCA9IG91dHJvcztcbiAgICBncm91cC5yICs9IDE7XG4gICAgZnVuY3Rpb24gZ28oKSB7XG4gICAgICAgIGNvbnN0IHsgZGVsYXkgPSAwLCBkdXJhdGlvbiA9IDMwMCwgZWFzaW5nID0gaWRlbnRpdHksIHRpY2sgPSBub29wLCBjc3MgfSA9IGNvbmZpZyB8fCBudWxsX3RyYW5zaXRpb247XG4gICAgICAgIGlmIChjc3MpXG4gICAgICAgICAgICBhbmltYXRpb25fbmFtZSA9IGNyZWF0ZV9ydWxlKG5vZGUsIDEsIDAsIGR1cmF0aW9uLCBkZWxheSwgZWFzaW5nLCBjc3MpO1xuICAgICAgICBjb25zdCBzdGFydF90aW1lID0gbm93KCkgKyBkZWxheTtcbiAgICAgICAgY29uc3QgZW5kX3RpbWUgPSBzdGFydF90aW1lICsgZHVyYXRpb247XG4gICAgICAgIGFkZF9yZW5kZXJfY2FsbGJhY2soKCkgPT4gZGlzcGF0Y2gobm9kZSwgZmFsc2UsICdzdGFydCcpKTtcbiAgICAgICAgbG9vcChub3cgPT4ge1xuICAgICAgICAgICAgaWYgKHJ1bm5pbmcpIHtcbiAgICAgICAgICAgICAgICBpZiAobm93ID49IGVuZF90aW1lKSB7XG4gICAgICAgICAgICAgICAgICAgIHRpY2soMCwgMSk7XG4gICAgICAgICAgICAgICAgICAgIGRpc3BhdGNoKG5vZGUsIGZhbHNlLCAnZW5kJyk7XG4gICAgICAgICAgICAgICAgICAgIGlmICghLS1ncm91cC5yKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyB0aGlzIHdpbGwgcmVzdWx0IGluIGBlbmQoKWAgYmVpbmcgY2FsbGVkLFxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gc28gd2UgZG9uJ3QgbmVlZCB0byBjbGVhbiB1cCBoZXJlXG4gICAgICAgICAgICAgICAgICAgICAgICBydW5fYWxsKGdyb3VwLmMpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKG5vdyA+PSBzdGFydF90aW1lKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHQgPSBlYXNpbmcoKG5vdyAtIHN0YXJ0X3RpbWUpIC8gZHVyYXRpb24pO1xuICAgICAgICAgICAgICAgICAgICB0aWNrKDEgLSB0LCB0KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gcnVubmluZztcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGlmIChpc19mdW5jdGlvbihjb25maWcpKSB7XG4gICAgICAgIHdhaXQoKS50aGVuKCgpID0+IHtcbiAgICAgICAgICAgIC8vIEB0cy1pZ25vcmVcbiAgICAgICAgICAgIGNvbmZpZyA9IGNvbmZpZygpO1xuICAgICAgICAgICAgZ28oKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBnbygpO1xuICAgIH1cbiAgICByZXR1cm4ge1xuICAgICAgICBlbmQocmVzZXQpIHtcbiAgICAgICAgICAgIGlmIChyZXNldCAmJiBjb25maWcudGljaykge1xuICAgICAgICAgICAgICAgIGNvbmZpZy50aWNrKDEsIDApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHJ1bm5pbmcpIHtcbiAgICAgICAgICAgICAgICBpZiAoYW5pbWF0aW9uX25hbWUpXG4gICAgICAgICAgICAgICAgICAgIGRlbGV0ZV9ydWxlKG5vZGUsIGFuaW1hdGlvbl9uYW1lKTtcbiAgICAgICAgICAgICAgICBydW5uaW5nID0gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xufVxuZnVuY3Rpb24gY3JlYXRlX2JpZGlyZWN0aW9uYWxfdHJhbnNpdGlvbihub2RlLCBmbiwgcGFyYW1zLCBpbnRybykge1xuICAgIGxldCBjb25maWcgPSBmbihub2RlLCBwYXJhbXMpO1xuICAgIGxldCB0ID0gaW50cm8gPyAwIDogMTtcbiAgICBsZXQgcnVubmluZ19wcm9ncmFtID0gbnVsbDtcbiAgICBsZXQgcGVuZGluZ19wcm9ncmFtID0gbnVsbDtcbiAgICBsZXQgYW5pbWF0aW9uX25hbWUgPSBudWxsO1xuICAgIGZ1bmN0aW9uIGNsZWFyX2FuaW1hdGlvbigpIHtcbiAgICAgICAgaWYgKGFuaW1hdGlvbl9uYW1lKVxuICAgICAgICAgICAgZGVsZXRlX3J1bGUobm9kZSwgYW5pbWF0aW9uX25hbWUpO1xuICAgIH1cbiAgICBmdW5jdGlvbiBpbml0KHByb2dyYW0sIGR1cmF0aW9uKSB7XG4gICAgICAgIGNvbnN0IGQgPSAocHJvZ3JhbS5iIC0gdCk7XG4gICAgICAgIGR1cmF0aW9uICo9IE1hdGguYWJzKGQpO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgYTogdCxcbiAgICAgICAgICAgIGI6IHByb2dyYW0uYixcbiAgICAgICAgICAgIGQsXG4gICAgICAgICAgICBkdXJhdGlvbixcbiAgICAgICAgICAgIHN0YXJ0OiBwcm9ncmFtLnN0YXJ0LFxuICAgICAgICAgICAgZW5kOiBwcm9ncmFtLnN0YXJ0ICsgZHVyYXRpb24sXG4gICAgICAgICAgICBncm91cDogcHJvZ3JhbS5ncm91cFxuICAgICAgICB9O1xuICAgIH1cbiAgICBmdW5jdGlvbiBnbyhiKSB7XG4gICAgICAgIGNvbnN0IHsgZGVsYXkgPSAwLCBkdXJhdGlvbiA9IDMwMCwgZWFzaW5nID0gaWRlbnRpdHksIHRpY2sgPSBub29wLCBjc3MgfSA9IGNvbmZpZyB8fCBudWxsX3RyYW5zaXRpb247XG4gICAgICAgIGNvbnN0IHByb2dyYW0gPSB7XG4gICAgICAgICAgICBzdGFydDogbm93KCkgKyBkZWxheSxcbiAgICAgICAgICAgIGJcbiAgICAgICAgfTtcbiAgICAgICAgaWYgKCFiKSB7XG4gICAgICAgICAgICAvLyBAdHMtaWdub3JlIHRvZG86IGltcHJvdmUgdHlwaW5nc1xuICAgICAgICAgICAgcHJvZ3JhbS5ncm91cCA9IG91dHJvcztcbiAgICAgICAgICAgIG91dHJvcy5yICs9IDE7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHJ1bm5pbmdfcHJvZ3JhbSB8fCBwZW5kaW5nX3Byb2dyYW0pIHtcbiAgICAgICAgICAgIHBlbmRpbmdfcHJvZ3JhbSA9IHByb2dyYW07XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAvLyBpZiB0aGlzIGlzIGFuIGludHJvLCBhbmQgdGhlcmUncyBhIGRlbGF5LCB3ZSBuZWVkIHRvIGRvXG4gICAgICAgICAgICAvLyBhbiBpbml0aWFsIHRpY2sgYW5kL29yIGFwcGx5IENTUyBhbmltYXRpb24gaW1tZWRpYXRlbHlcbiAgICAgICAgICAgIGlmIChjc3MpIHtcbiAgICAgICAgICAgICAgICBjbGVhcl9hbmltYXRpb24oKTtcbiAgICAgICAgICAgICAgICBhbmltYXRpb25fbmFtZSA9IGNyZWF0ZV9ydWxlKG5vZGUsIHQsIGIsIGR1cmF0aW9uLCBkZWxheSwgZWFzaW5nLCBjc3MpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGIpXG4gICAgICAgICAgICAgICAgdGljaygwLCAxKTtcbiAgICAgICAgICAgIHJ1bm5pbmdfcHJvZ3JhbSA9IGluaXQocHJvZ3JhbSwgZHVyYXRpb24pO1xuICAgICAgICAgICAgYWRkX3JlbmRlcl9jYWxsYmFjaygoKSA9PiBkaXNwYXRjaChub2RlLCBiLCAnc3RhcnQnKSk7XG4gICAgICAgICAgICBsb29wKG5vdyA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKHBlbmRpbmdfcHJvZ3JhbSAmJiBub3cgPiBwZW5kaW5nX3Byb2dyYW0uc3RhcnQpIHtcbiAgICAgICAgICAgICAgICAgICAgcnVubmluZ19wcm9ncmFtID0gaW5pdChwZW5kaW5nX3Byb2dyYW0sIGR1cmF0aW9uKTtcbiAgICAgICAgICAgICAgICAgICAgcGVuZGluZ19wcm9ncmFtID0gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgZGlzcGF0Y2gobm9kZSwgcnVubmluZ19wcm9ncmFtLmIsICdzdGFydCcpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoY3NzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjbGVhcl9hbmltYXRpb24oKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFuaW1hdGlvbl9uYW1lID0gY3JlYXRlX3J1bGUobm9kZSwgdCwgcnVubmluZ19wcm9ncmFtLmIsIHJ1bm5pbmdfcHJvZ3JhbS5kdXJhdGlvbiwgMCwgZWFzaW5nLCBjb25maWcuY3NzKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAocnVubmluZ19wcm9ncmFtKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChub3cgPj0gcnVubmluZ19wcm9ncmFtLmVuZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGljayh0ID0gcnVubmluZ19wcm9ncmFtLmIsIDEgLSB0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRpc3BhdGNoKG5vZGUsIHJ1bm5pbmdfcHJvZ3JhbS5iLCAnZW5kJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXBlbmRpbmdfcHJvZ3JhbSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHdlJ3JlIGRvbmVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocnVubmluZ19wcm9ncmFtLmIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gaW50cm8g4oCUIHdlIGNhbiB0aWR5IHVwIGltbWVkaWF0ZWx5XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsZWFyX2FuaW1hdGlvbigpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gb3V0cm8g4oCUIG5lZWRzIHRvIGJlIGNvb3JkaW5hdGVkXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghLS1ydW5uaW5nX3Byb2dyYW0uZ3JvdXAucilcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJ1bl9hbGwocnVubmluZ19wcm9ncmFtLmdyb3VwLmMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHJ1bm5pbmdfcHJvZ3JhbSA9IG51bGw7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAobm93ID49IHJ1bm5pbmdfcHJvZ3JhbS5zdGFydCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcCA9IG5vdyAtIHJ1bm5pbmdfcHJvZ3JhbS5zdGFydDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHQgPSBydW5uaW5nX3Byb2dyYW0uYSArIHJ1bm5pbmdfcHJvZ3JhbS5kICogZWFzaW5nKHAgLyBydW5uaW5nX3Byb2dyYW0uZHVyYXRpb24pO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGljayh0LCAxIC0gdCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuICEhKHJ1bm5pbmdfcHJvZ3JhbSB8fCBwZW5kaW5nX3Byb2dyYW0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHtcbiAgICAgICAgcnVuKGIpIHtcbiAgICAgICAgICAgIGlmIChpc19mdW5jdGlvbihjb25maWcpKSB7XG4gICAgICAgICAgICAgICAgd2FpdCgpLnRoZW4oKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAvLyBAdHMtaWdub3JlXG4gICAgICAgICAgICAgICAgICAgIGNvbmZpZyA9IGNvbmZpZygpO1xuICAgICAgICAgICAgICAgICAgICBnbyhiKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGdvKGIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBlbmQoKSB7XG4gICAgICAgICAgICBjbGVhcl9hbmltYXRpb24oKTtcbiAgICAgICAgICAgIHJ1bm5pbmdfcHJvZ3JhbSA9IHBlbmRpbmdfcHJvZ3JhbSA9IG51bGw7XG4gICAgICAgIH1cbiAgICB9O1xufVxuXG5mdW5jdGlvbiBoYW5kbGVfcHJvbWlzZShwcm9taXNlLCBpbmZvKSB7XG4gICAgY29uc3QgdG9rZW4gPSBpbmZvLnRva2VuID0ge307XG4gICAgZnVuY3Rpb24gdXBkYXRlKHR5cGUsIGluZGV4LCBrZXksIHZhbHVlKSB7XG4gICAgICAgIGlmIChpbmZvLnRva2VuICE9PSB0b2tlbilcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgaW5mby5yZXNvbHZlZCA9IHZhbHVlO1xuICAgICAgICBsZXQgY2hpbGRfY3R4ID0gaW5mby5jdHg7XG4gICAgICAgIGlmIChrZXkgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgY2hpbGRfY3R4ID0gY2hpbGRfY3R4LnNsaWNlKCk7XG4gICAgICAgICAgICBjaGlsZF9jdHhba2V5XSA9IHZhbHVlO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGJsb2NrID0gdHlwZSAmJiAoaW5mby5jdXJyZW50ID0gdHlwZSkoY2hpbGRfY3R4KTtcbiAgICAgICAgbGV0IG5lZWRzX2ZsdXNoID0gZmFsc2U7XG4gICAgICAgIGlmIChpbmZvLmJsb2NrKSB7XG4gICAgICAgICAgICBpZiAoaW5mby5ibG9ja3MpIHtcbiAgICAgICAgICAgICAgICBpbmZvLmJsb2Nrcy5mb3JFYWNoKChibG9jaywgaSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBpZiAoaSAhPT0gaW5kZXggJiYgYmxvY2spIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGdyb3VwX291dHJvcygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdHJhbnNpdGlvbl9vdXQoYmxvY2ssIDEsIDEsICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaW5mby5ibG9ja3NbaV0gPT09IGJsb2NrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluZm8uYmxvY2tzW2ldID0gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNoZWNrX291dHJvcygpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBpbmZvLmJsb2NrLmQoMSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBibG9jay5jKCk7XG4gICAgICAgICAgICB0cmFuc2l0aW9uX2luKGJsb2NrLCAxKTtcbiAgICAgICAgICAgIGJsb2NrLm0oaW5mby5tb3VudCgpLCBpbmZvLmFuY2hvcik7XG4gICAgICAgICAgICBuZWVkc19mbHVzaCA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgaW5mby5ibG9jayA9IGJsb2NrO1xuICAgICAgICBpZiAoaW5mby5ibG9ja3MpXG4gICAgICAgICAgICBpbmZvLmJsb2Nrc1tpbmRleF0gPSBibG9jaztcbiAgICAgICAgaWYgKG5lZWRzX2ZsdXNoKSB7XG4gICAgICAgICAgICBmbHVzaCgpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGlmIChpc19wcm9taXNlKHByb21pc2UpKSB7XG4gICAgICAgIGNvbnN0IGN1cnJlbnRfY29tcG9uZW50ID0gZ2V0X2N1cnJlbnRfY29tcG9uZW50KCk7XG4gICAgICAgIHByb21pc2UudGhlbih2YWx1ZSA9PiB7XG4gICAgICAgICAgICBzZXRfY3VycmVudF9jb21wb25lbnQoY3VycmVudF9jb21wb25lbnQpO1xuICAgICAgICAgICAgdXBkYXRlKGluZm8udGhlbiwgMSwgaW5mby52YWx1ZSwgdmFsdWUpO1xuICAgICAgICAgICAgc2V0X2N1cnJlbnRfY29tcG9uZW50KG51bGwpO1xuICAgICAgICB9LCBlcnJvciA9PiB7XG4gICAgICAgICAgICBzZXRfY3VycmVudF9jb21wb25lbnQoY3VycmVudF9jb21wb25lbnQpO1xuICAgICAgICAgICAgdXBkYXRlKGluZm8uY2F0Y2gsIDIsIGluZm8uZXJyb3IsIGVycm9yKTtcbiAgICAgICAgICAgIHNldF9jdXJyZW50X2NvbXBvbmVudChudWxsKTtcbiAgICAgICAgICAgIGlmICghaW5mby5oYXNDYXRjaCkge1xuICAgICAgICAgICAgICAgIHRocm93IGVycm9yO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgLy8gaWYgd2UgcHJldmlvdXNseSBoYWQgYSB0aGVuL2NhdGNoIGJsb2NrLCBkZXN0cm95IGl0XG4gICAgICAgIGlmIChpbmZvLmN1cnJlbnQgIT09IGluZm8ucGVuZGluZykge1xuICAgICAgICAgICAgdXBkYXRlKGluZm8ucGVuZGluZywgMCk7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgaWYgKGluZm8uY3VycmVudCAhPT0gaW5mby50aGVuKSB7XG4gICAgICAgICAgICB1cGRhdGUoaW5mby50aGVuLCAxLCBpbmZvLnZhbHVlLCBwcm9taXNlKTtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGluZm8ucmVzb2x2ZWQgPSBwcm9taXNlO1xuICAgIH1cbn1cbmZ1bmN0aW9uIHVwZGF0ZV9hd2FpdF9ibG9ja19icmFuY2goaW5mbywgY3R4LCBkaXJ0eSkge1xuICAgIGNvbnN0IGNoaWxkX2N0eCA9IGN0eC5zbGljZSgpO1xuICAgIGNvbnN0IHsgcmVzb2x2ZWQgfSA9IGluZm87XG4gICAgaWYgKGluZm8uY3VycmVudCA9PT0gaW5mby50aGVuKSB7XG4gICAgICAgIGNoaWxkX2N0eFtpbmZvLnZhbHVlXSA9IHJlc29sdmVkO1xuICAgIH1cbiAgICBpZiAoaW5mby5jdXJyZW50ID09PSBpbmZvLmNhdGNoKSB7XG4gICAgICAgIGNoaWxkX2N0eFtpbmZvLmVycm9yXSA9IHJlc29sdmVkO1xuICAgIH1cbiAgICBpbmZvLmJsb2NrLnAoY2hpbGRfY3R4LCBkaXJ0eSk7XG59XG5cbmNvbnN0IGdsb2JhbHMgPSAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCdcbiAgICA/IHdpbmRvd1xuICAgIDogdHlwZW9mIGdsb2JhbFRoaXMgIT09ICd1bmRlZmluZWQnXG4gICAgICAgID8gZ2xvYmFsVGhpc1xuICAgICAgICA6IGdsb2JhbCk7XG5cbmZ1bmN0aW9uIGRlc3Ryb3lfYmxvY2soYmxvY2ssIGxvb2t1cCkge1xuICAgIGJsb2NrLmQoMSk7XG4gICAgbG9va3VwLmRlbGV0ZShibG9jay5rZXkpO1xufVxuZnVuY3Rpb24gb3V0cm9fYW5kX2Rlc3Ryb3lfYmxvY2soYmxvY2ssIGxvb2t1cCkge1xuICAgIHRyYW5zaXRpb25fb3V0KGJsb2NrLCAxLCAxLCAoKSA9PiB7XG4gICAgICAgIGxvb2t1cC5kZWxldGUoYmxvY2sua2V5KTtcbiAgICB9KTtcbn1cbmZ1bmN0aW9uIGZpeF9hbmRfZGVzdHJveV9ibG9jayhibG9jaywgbG9va3VwKSB7XG4gICAgYmxvY2suZigpO1xuICAgIGRlc3Ryb3lfYmxvY2soYmxvY2ssIGxvb2t1cCk7XG59XG5mdW5jdGlvbiBmaXhfYW5kX291dHJvX2FuZF9kZXN0cm95X2Jsb2NrKGJsb2NrLCBsb29rdXApIHtcbiAgICBibG9jay5mKCk7XG4gICAgb3V0cm9fYW5kX2Rlc3Ryb3lfYmxvY2soYmxvY2ssIGxvb2t1cCk7XG59XG5mdW5jdGlvbiB1cGRhdGVfa2V5ZWRfZWFjaChvbGRfYmxvY2tzLCBkaXJ0eSwgZ2V0X2tleSwgZHluYW1pYywgY3R4LCBsaXN0LCBsb29rdXAsIG5vZGUsIGRlc3Ryb3ksIGNyZWF0ZV9lYWNoX2Jsb2NrLCBuZXh0LCBnZXRfY29udGV4dCkge1xuICAgIGxldCBvID0gb2xkX2Jsb2Nrcy5sZW5ndGg7XG4gICAgbGV0IG4gPSBsaXN0Lmxlbmd0aDtcbiAgICBsZXQgaSA9IG87XG4gICAgY29uc3Qgb2xkX2luZGV4ZXMgPSB7fTtcbiAgICB3aGlsZSAoaS0tKVxuICAgICAgICBvbGRfaW5kZXhlc1tvbGRfYmxvY2tzW2ldLmtleV0gPSBpO1xuICAgIGNvbnN0IG5ld19ibG9ja3MgPSBbXTtcbiAgICBjb25zdCBuZXdfbG9va3VwID0gbmV3IE1hcCgpO1xuICAgIGNvbnN0IGRlbHRhcyA9IG5ldyBNYXAoKTtcbiAgICBpID0gbjtcbiAgICB3aGlsZSAoaS0tKSB7XG4gICAgICAgIGNvbnN0IGNoaWxkX2N0eCA9IGdldF9jb250ZXh0KGN0eCwgbGlzdCwgaSk7XG4gICAgICAgIGNvbnN0IGtleSA9IGdldF9rZXkoY2hpbGRfY3R4KTtcbiAgICAgICAgbGV0IGJsb2NrID0gbG9va3VwLmdldChrZXkpO1xuICAgICAgICBpZiAoIWJsb2NrKSB7XG4gICAgICAgICAgICBibG9jayA9IGNyZWF0ZV9lYWNoX2Jsb2NrKGtleSwgY2hpbGRfY3R4KTtcbiAgICAgICAgICAgIGJsb2NrLmMoKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChkeW5hbWljKSB7XG4gICAgICAgICAgICBibG9jay5wKGNoaWxkX2N0eCwgZGlydHkpO1xuICAgICAgICB9XG4gICAgICAgIG5ld19sb29rdXAuc2V0KGtleSwgbmV3X2Jsb2Nrc1tpXSA9IGJsb2NrKTtcbiAgICAgICAgaWYgKGtleSBpbiBvbGRfaW5kZXhlcylcbiAgICAgICAgICAgIGRlbHRhcy5zZXQoa2V5LCBNYXRoLmFicyhpIC0gb2xkX2luZGV4ZXNba2V5XSkpO1xuICAgIH1cbiAgICBjb25zdCB3aWxsX21vdmUgPSBuZXcgU2V0KCk7XG4gICAgY29uc3QgZGlkX21vdmUgPSBuZXcgU2V0KCk7XG4gICAgZnVuY3Rpb24gaW5zZXJ0KGJsb2NrKSB7XG4gICAgICAgIHRyYW5zaXRpb25faW4oYmxvY2ssIDEpO1xuICAgICAgICBibG9jay5tKG5vZGUsIG5leHQpO1xuICAgICAgICBsb29rdXAuc2V0KGJsb2NrLmtleSwgYmxvY2spO1xuICAgICAgICBuZXh0ID0gYmxvY2suZmlyc3Q7XG4gICAgICAgIG4tLTtcbiAgICB9XG4gICAgd2hpbGUgKG8gJiYgbikge1xuICAgICAgICBjb25zdCBuZXdfYmxvY2sgPSBuZXdfYmxvY2tzW24gLSAxXTtcbiAgICAgICAgY29uc3Qgb2xkX2Jsb2NrID0gb2xkX2Jsb2Nrc1tvIC0gMV07XG4gICAgICAgIGNvbnN0IG5ld19rZXkgPSBuZXdfYmxvY2sua2V5O1xuICAgICAgICBjb25zdCBvbGRfa2V5ID0gb2xkX2Jsb2NrLmtleTtcbiAgICAgICAgaWYgKG5ld19ibG9jayA9PT0gb2xkX2Jsb2NrKSB7XG4gICAgICAgICAgICAvLyBkbyBub3RoaW5nXG4gICAgICAgICAgICBuZXh0ID0gbmV3X2Jsb2NrLmZpcnN0O1xuICAgICAgICAgICAgby0tO1xuICAgICAgICAgICAgbi0tO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKCFuZXdfbG9va3VwLmhhcyhvbGRfa2V5KSkge1xuICAgICAgICAgICAgLy8gcmVtb3ZlIG9sZCBibG9ja1xuICAgICAgICAgICAgZGVzdHJveShvbGRfYmxvY2ssIGxvb2t1cCk7XG4gICAgICAgICAgICBvLS07XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoIWxvb2t1cC5oYXMobmV3X2tleSkgfHwgd2lsbF9tb3ZlLmhhcyhuZXdfa2V5KSkge1xuICAgICAgICAgICAgaW5zZXJ0KG5ld19ibG9jayk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoZGlkX21vdmUuaGFzKG9sZF9rZXkpKSB7XG4gICAgICAgICAgICBvLS07XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoZGVsdGFzLmdldChuZXdfa2V5KSA+IGRlbHRhcy5nZXQob2xkX2tleSkpIHtcbiAgICAgICAgICAgIGRpZF9tb3ZlLmFkZChuZXdfa2V5KTtcbiAgICAgICAgICAgIGluc2VydChuZXdfYmxvY2spO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgd2lsbF9tb3ZlLmFkZChvbGRfa2V5KTtcbiAgICAgICAgICAgIG8tLTtcbiAgICAgICAgfVxuICAgIH1cbiAgICB3aGlsZSAoby0tKSB7XG4gICAgICAgIGNvbnN0IG9sZF9ibG9jayA9IG9sZF9ibG9ja3Nbb107XG4gICAgICAgIGlmICghbmV3X2xvb2t1cC5oYXMob2xkX2Jsb2NrLmtleSkpXG4gICAgICAgICAgICBkZXN0cm95KG9sZF9ibG9jaywgbG9va3VwKTtcbiAgICB9XG4gICAgd2hpbGUgKG4pXG4gICAgICAgIGluc2VydChuZXdfYmxvY2tzW24gLSAxXSk7XG4gICAgcmV0dXJuIG5ld19ibG9ja3M7XG59XG5mdW5jdGlvbiB2YWxpZGF0ZV9lYWNoX2tleXMoY3R4LCBsaXN0LCBnZXRfY29udGV4dCwgZ2V0X2tleSkge1xuICAgIGNvbnN0IGtleXMgPSBuZXcgU2V0KCk7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsaXN0Lmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGNvbnN0IGtleSA9IGdldF9rZXkoZ2V0X2NvbnRleHQoY3R4LCBsaXN0LCBpKSk7XG4gICAgICAgIGlmIChrZXlzLmhhcyhrZXkpKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0Nhbm5vdCBoYXZlIGR1cGxpY2F0ZSBrZXlzIGluIGEga2V5ZWQgZWFjaCcpO1xuICAgICAgICB9XG4gICAgICAgIGtleXMuYWRkKGtleSk7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBnZXRfc3ByZWFkX3VwZGF0ZShsZXZlbHMsIHVwZGF0ZXMpIHtcbiAgICBjb25zdCB1cGRhdGUgPSB7fTtcbiAgICBjb25zdCB0b19udWxsX291dCA9IHt9O1xuICAgIGNvbnN0IGFjY291bnRlZF9mb3IgPSB7ICQkc2NvcGU6IDEgfTtcbiAgICBsZXQgaSA9IGxldmVscy5sZW5ndGg7XG4gICAgd2hpbGUgKGktLSkge1xuICAgICAgICBjb25zdCBvID0gbGV2ZWxzW2ldO1xuICAgICAgICBjb25zdCBuID0gdXBkYXRlc1tpXTtcbiAgICAgICAgaWYgKG4pIHtcbiAgICAgICAgICAgIGZvciAoY29uc3Qga2V5IGluIG8pIHtcbiAgICAgICAgICAgICAgICBpZiAoIShrZXkgaW4gbikpXG4gICAgICAgICAgICAgICAgICAgIHRvX251bGxfb3V0W2tleV0gPSAxO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZm9yIChjb25zdCBrZXkgaW4gbikge1xuICAgICAgICAgICAgICAgIGlmICghYWNjb3VudGVkX2ZvcltrZXldKSB7XG4gICAgICAgICAgICAgICAgICAgIHVwZGF0ZVtrZXldID0gbltrZXldO1xuICAgICAgICAgICAgICAgICAgICBhY2NvdW50ZWRfZm9yW2tleV0gPSAxO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGxldmVsc1tpXSA9IG47XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IGtleSBpbiBvKSB7XG4gICAgICAgICAgICAgICAgYWNjb3VudGVkX2ZvcltrZXldID0gMTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBmb3IgKGNvbnN0IGtleSBpbiB0b19udWxsX291dCkge1xuICAgICAgICBpZiAoIShrZXkgaW4gdXBkYXRlKSlcbiAgICAgICAgICAgIHVwZGF0ZVtrZXldID0gdW5kZWZpbmVkO1xuICAgIH1cbiAgICByZXR1cm4gdXBkYXRlO1xufVxuZnVuY3Rpb24gZ2V0X3NwcmVhZF9vYmplY3Qoc3ByZWFkX3Byb3BzKSB7XG4gICAgcmV0dXJuIHR5cGVvZiBzcHJlYWRfcHJvcHMgPT09ICdvYmplY3QnICYmIHNwcmVhZF9wcm9wcyAhPT0gbnVsbCA/IHNwcmVhZF9wcm9wcyA6IHt9O1xufVxuXG4vLyBzb3VyY2U6IGh0dHBzOi8vaHRtbC5zcGVjLndoYXR3Zy5vcmcvbXVsdGlwYWdlL2luZGljZXMuaHRtbFxuY29uc3QgYm9vbGVhbl9hdHRyaWJ1dGVzID0gbmV3IFNldChbXG4gICAgJ2FsbG93ZnVsbHNjcmVlbicsXG4gICAgJ2FsbG93cGF5bWVudHJlcXVlc3QnLFxuICAgICdhc3luYycsXG4gICAgJ2F1dG9mb2N1cycsXG4gICAgJ2F1dG9wbGF5JyxcbiAgICAnY2hlY2tlZCcsXG4gICAgJ2NvbnRyb2xzJyxcbiAgICAnZGVmYXVsdCcsXG4gICAgJ2RlZmVyJyxcbiAgICAnZGlzYWJsZWQnLFxuICAgICdmb3Jtbm92YWxpZGF0ZScsXG4gICAgJ2hpZGRlbicsXG4gICAgJ2lzbWFwJyxcbiAgICAnbG9vcCcsXG4gICAgJ211bHRpcGxlJyxcbiAgICAnbXV0ZWQnLFxuICAgICdub21vZHVsZScsXG4gICAgJ25vdmFsaWRhdGUnLFxuICAgICdvcGVuJyxcbiAgICAncGxheXNpbmxpbmUnLFxuICAgICdyZWFkb25seScsXG4gICAgJ3JlcXVpcmVkJyxcbiAgICAncmV2ZXJzZWQnLFxuICAgICdzZWxlY3RlZCdcbl0pO1xuXG5jb25zdCBpbnZhbGlkX2F0dHJpYnV0ZV9uYW1lX2NoYXJhY3RlciA9IC9bXFxzJ1wiPi89XFx1e0ZERDB9LVxcdXtGREVGfVxcdXtGRkZFfVxcdXtGRkZGfVxcdXsxRkZGRX1cXHV7MUZGRkZ9XFx1ezJGRkZFfVxcdXsyRkZGRn1cXHV7M0ZGRkV9XFx1ezNGRkZGfVxcdXs0RkZGRX1cXHV7NEZGRkZ9XFx1ezVGRkZFfVxcdXs1RkZGRn1cXHV7NkZGRkV9XFx1ezZGRkZGfVxcdXs3RkZGRX1cXHV7N0ZGRkZ9XFx1ezhGRkZFfVxcdXs4RkZGRn1cXHV7OUZGRkV9XFx1ezlGRkZGfVxcdXtBRkZGRX1cXHV7QUZGRkZ9XFx1e0JGRkZFfVxcdXtCRkZGRn1cXHV7Q0ZGRkV9XFx1e0NGRkZGfVxcdXtERkZGRX1cXHV7REZGRkZ9XFx1e0VGRkZFfVxcdXtFRkZGRn1cXHV7RkZGRkV9XFx1e0ZGRkZGfVxcdXsxMEZGRkV9XFx1ezEwRkZGRn1dL3U7XG4vLyBodHRwczovL2h0bWwuc3BlYy53aGF0d2cub3JnL211bHRpcGFnZS9zeW50YXguaHRtbCNhdHRyaWJ1dGVzLTJcbi8vIGh0dHBzOi8vaW5mcmEuc3BlYy53aGF0d2cub3JnLyNub25jaGFyYWN0ZXJcbmZ1bmN0aW9uIHNwcmVhZChhcmdzLCBhdHRyc190b19hZGQpIHtcbiAgICBjb25zdCBhdHRyaWJ1dGVzID0gT2JqZWN0LmFzc2lnbih7fSwgLi4uYXJncyk7XG4gICAgaWYgKGF0dHJzX3RvX2FkZCkge1xuICAgICAgICBjb25zdCBjbGFzc2VzX3RvX2FkZCA9IGF0dHJzX3RvX2FkZC5jbGFzc2VzO1xuICAgICAgICBjb25zdCBzdHlsZXNfdG9fYWRkID0gYXR0cnNfdG9fYWRkLnN0eWxlcztcbiAgICAgICAgaWYgKGNsYXNzZXNfdG9fYWRkKSB7XG4gICAgICAgICAgICBpZiAoYXR0cmlidXRlcy5jbGFzcyA9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgYXR0cmlidXRlcy5jbGFzcyA9IGNsYXNzZXNfdG9fYWRkO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgYXR0cmlidXRlcy5jbGFzcyArPSAnICcgKyBjbGFzc2VzX3RvX2FkZDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoc3R5bGVzX3RvX2FkZCkge1xuICAgICAgICAgICAgaWYgKGF0dHJpYnV0ZXMuc3R5bGUgPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIGF0dHJpYnV0ZXMuc3R5bGUgPSBzdHlsZV9vYmplY3RfdG9fc3RyaW5nKHN0eWxlc190b19hZGQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgYXR0cmlidXRlcy5zdHlsZSA9IHN0eWxlX29iamVjdF90b19zdHJpbmcobWVyZ2Vfc3NyX3N0eWxlcyhhdHRyaWJ1dGVzLnN0eWxlLCBzdHlsZXNfdG9fYWRkKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgbGV0IHN0ciA9ICcnO1xuICAgIE9iamVjdC5rZXlzKGF0dHJpYnV0ZXMpLmZvckVhY2gobmFtZSA9PiB7XG4gICAgICAgIGlmIChpbnZhbGlkX2F0dHJpYnV0ZV9uYW1lX2NoYXJhY3Rlci50ZXN0KG5hbWUpKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICBjb25zdCB2YWx1ZSA9IGF0dHJpYnV0ZXNbbmFtZV07XG4gICAgICAgIGlmICh2YWx1ZSA9PT0gdHJ1ZSlcbiAgICAgICAgICAgIHN0ciArPSAnICcgKyBuYW1lO1xuICAgICAgICBlbHNlIGlmIChib29sZWFuX2F0dHJpYnV0ZXMuaGFzKG5hbWUudG9Mb3dlckNhc2UoKSkpIHtcbiAgICAgICAgICAgIGlmICh2YWx1ZSlcbiAgICAgICAgICAgICAgICBzdHIgKz0gJyAnICsgbmFtZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh2YWx1ZSAhPSBudWxsKSB7XG4gICAgICAgICAgICBzdHIgKz0gYCAke25hbWV9PVwiJHt2YWx1ZX1cImA7XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICByZXR1cm4gc3RyO1xufVxuZnVuY3Rpb24gbWVyZ2Vfc3NyX3N0eWxlcyhzdHlsZV9hdHRyaWJ1dGUsIHN0eWxlX2RpcmVjdGl2ZSkge1xuICAgIGNvbnN0IHN0eWxlX29iamVjdCA9IHt9O1xuICAgIGZvciAoY29uc3QgaW5kaXZpZHVhbF9zdHlsZSBvZiBzdHlsZV9hdHRyaWJ1dGUuc3BsaXQoJzsnKSkge1xuICAgICAgICBjb25zdCBjb2xvbl9pbmRleCA9IGluZGl2aWR1YWxfc3R5bGUuaW5kZXhPZignOicpO1xuICAgICAgICBjb25zdCBuYW1lID0gaW5kaXZpZHVhbF9zdHlsZS5zbGljZSgwLCBjb2xvbl9pbmRleCkudHJpbSgpO1xuICAgICAgICBjb25zdCB2YWx1ZSA9IGluZGl2aWR1YWxfc3R5bGUuc2xpY2UoY29sb25faW5kZXggKyAxKS50cmltKCk7XG4gICAgICAgIGlmICghbmFtZSlcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICBzdHlsZV9vYmplY3RbbmFtZV0gPSB2YWx1ZTtcbiAgICB9XG4gICAgZm9yIChjb25zdCBuYW1lIGluIHN0eWxlX2RpcmVjdGl2ZSkge1xuICAgICAgICBjb25zdCB2YWx1ZSA9IHN0eWxlX2RpcmVjdGl2ZVtuYW1lXTtcbiAgICAgICAgaWYgKHZhbHVlKSB7XG4gICAgICAgICAgICBzdHlsZV9vYmplY3RbbmFtZV0gPSB2YWx1ZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGRlbGV0ZSBzdHlsZV9vYmplY3RbbmFtZV07XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHN0eWxlX29iamVjdDtcbn1cbmNvbnN0IGVzY2FwZWQgPSB7XG4gICAgJ1wiJzogJyZxdW90OycsXG4gICAgXCInXCI6ICcmIzM5OycsXG4gICAgJyYnOiAnJmFtcDsnLFxuICAgICc8JzogJyZsdDsnLFxuICAgICc+JzogJyZndDsnXG59O1xuZnVuY3Rpb24gZXNjYXBlKGh0bWwpIHtcbiAgICByZXR1cm4gU3RyaW5nKGh0bWwpLnJlcGxhY2UoL1tcIicmPD5dL2csIG1hdGNoID0+IGVzY2FwZWRbbWF0Y2hdKTtcbn1cbmZ1bmN0aW9uIGVzY2FwZV9hdHRyaWJ1dGVfdmFsdWUodmFsdWUpIHtcbiAgICByZXR1cm4gdHlwZW9mIHZhbHVlID09PSAnc3RyaW5nJyA/IGVzY2FwZSh2YWx1ZSkgOiB2YWx1ZTtcbn1cbmZ1bmN0aW9uIGVzY2FwZV9vYmplY3Qob2JqKSB7XG4gICAgY29uc3QgcmVzdWx0ID0ge307XG4gICAgZm9yIChjb25zdCBrZXkgaW4gb2JqKSB7XG4gICAgICAgIHJlc3VsdFtrZXldID0gZXNjYXBlX2F0dHJpYnV0ZV92YWx1ZShvYmpba2V5XSk7XG4gICAgfVxuICAgIHJldHVybiByZXN1bHQ7XG59XG5mdW5jdGlvbiBlYWNoKGl0ZW1zLCBmbikge1xuICAgIGxldCBzdHIgPSAnJztcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGl0ZW1zLmxlbmd0aDsgaSArPSAxKSB7XG4gICAgICAgIHN0ciArPSBmbihpdGVtc1tpXSwgaSk7XG4gICAgfVxuICAgIHJldHVybiBzdHI7XG59XG5jb25zdCBtaXNzaW5nX2NvbXBvbmVudCA9IHtcbiAgICAkJHJlbmRlcjogKCkgPT4gJydcbn07XG5mdW5jdGlvbiB2YWxpZGF0ZV9jb21wb25lbnQoY29tcG9uZW50LCBuYW1lKSB7XG4gICAgaWYgKCFjb21wb25lbnQgfHwgIWNvbXBvbmVudC4kJHJlbmRlcikge1xuICAgICAgICBpZiAobmFtZSA9PT0gJ3N2ZWx0ZTpjb21wb25lbnQnKVxuICAgICAgICAgICAgbmFtZSArPSAnIHRoaXM9ey4uLn0nO1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYDwke25hbWV9PiBpcyBub3QgYSB2YWxpZCBTU1IgY29tcG9uZW50LiBZb3UgbWF5IG5lZWQgdG8gcmV2aWV3IHlvdXIgYnVpbGQgY29uZmlnIHRvIGVuc3VyZSB0aGF0IGRlcGVuZGVuY2llcyBhcmUgY29tcGlsZWQsIHJhdGhlciB0aGFuIGltcG9ydGVkIGFzIHByZS1jb21waWxlZCBtb2R1bGVzYCk7XG4gICAgfVxuICAgIHJldHVybiBjb21wb25lbnQ7XG59XG5mdW5jdGlvbiBkZWJ1ZyhmaWxlLCBsaW5lLCBjb2x1bW4sIHZhbHVlcykge1xuICAgIGNvbnNvbGUubG9nKGB7QGRlYnVnfSAke2ZpbGUgPyBmaWxlICsgJyAnIDogJyd9KCR7bGluZX06JHtjb2x1bW59KWApOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLWNvbnNvbGVcbiAgICBjb25zb2xlLmxvZyh2YWx1ZXMpOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLWNvbnNvbGVcbiAgICByZXR1cm4gJyc7XG59XG5sZXQgb25fZGVzdHJveTtcbmZ1bmN0aW9uIGNyZWF0ZV9zc3JfY29tcG9uZW50KGZuKSB7XG4gICAgZnVuY3Rpb24gJCRyZW5kZXIocmVzdWx0LCBwcm9wcywgYmluZGluZ3MsIHNsb3RzLCBjb250ZXh0KSB7XG4gICAgICAgIGNvbnN0IHBhcmVudF9jb21wb25lbnQgPSBjdXJyZW50X2NvbXBvbmVudDtcbiAgICAgICAgY29uc3QgJCQgPSB7XG4gICAgICAgICAgICBvbl9kZXN0cm95LFxuICAgICAgICAgICAgY29udGV4dDogbmV3IE1hcChjb250ZXh0IHx8IChwYXJlbnRfY29tcG9uZW50ID8gcGFyZW50X2NvbXBvbmVudC4kJC5jb250ZXh0IDogW10pKSxcbiAgICAgICAgICAgIC8vIHRoZXNlIHdpbGwgYmUgaW1tZWRpYXRlbHkgZGlzY2FyZGVkXG4gICAgICAgICAgICBvbl9tb3VudDogW10sXG4gICAgICAgICAgICBiZWZvcmVfdXBkYXRlOiBbXSxcbiAgICAgICAgICAgIGFmdGVyX3VwZGF0ZTogW10sXG4gICAgICAgICAgICBjYWxsYmFja3M6IGJsYW5rX29iamVjdCgpXG4gICAgICAgIH07XG4gICAgICAgIHNldF9jdXJyZW50X2NvbXBvbmVudCh7ICQkIH0pO1xuICAgICAgICBjb25zdCBodG1sID0gZm4ocmVzdWx0LCBwcm9wcywgYmluZGluZ3MsIHNsb3RzKTtcbiAgICAgICAgc2V0X2N1cnJlbnRfY29tcG9uZW50KHBhcmVudF9jb21wb25lbnQpO1xuICAgICAgICByZXR1cm4gaHRtbDtcbiAgICB9XG4gICAgcmV0dXJuIHtcbiAgICAgICAgcmVuZGVyOiAocHJvcHMgPSB7fSwgeyAkJHNsb3RzID0ge30sIGNvbnRleHQgPSBuZXcgTWFwKCkgfSA9IHt9KSA9PiB7XG4gICAgICAgICAgICBvbl9kZXN0cm95ID0gW107XG4gICAgICAgICAgICBjb25zdCByZXN1bHQgPSB7IHRpdGxlOiAnJywgaGVhZDogJycsIGNzczogbmV3IFNldCgpIH07XG4gICAgICAgICAgICBjb25zdCBodG1sID0gJCRyZW5kZXIocmVzdWx0LCBwcm9wcywge30sICQkc2xvdHMsIGNvbnRleHQpO1xuICAgICAgICAgICAgcnVuX2FsbChvbl9kZXN0cm95KTtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgaHRtbCxcbiAgICAgICAgICAgICAgICBjc3M6IHtcbiAgICAgICAgICAgICAgICAgICAgY29kZTogQXJyYXkuZnJvbShyZXN1bHQuY3NzKS5tYXAoY3NzID0+IGNzcy5jb2RlKS5qb2luKCdcXG4nKSxcbiAgICAgICAgICAgICAgICAgICAgbWFwOiBudWxsIC8vIFRPRE9cbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGhlYWQ6IHJlc3VsdC50aXRsZSArIHJlc3VsdC5oZWFkXG4gICAgICAgICAgICB9O1xuICAgICAgICB9LFxuICAgICAgICAkJHJlbmRlclxuICAgIH07XG59XG5mdW5jdGlvbiBhZGRfYXR0cmlidXRlKG5hbWUsIHZhbHVlLCBib29sZWFuKSB7XG4gICAgaWYgKHZhbHVlID09IG51bGwgfHwgKGJvb2xlYW4gJiYgIXZhbHVlKSlcbiAgICAgICAgcmV0dXJuICcnO1xuICAgIHJldHVybiBgICR7bmFtZX0ke3ZhbHVlID09PSB0cnVlICYmIGJvb2xlYW5fYXR0cmlidXRlcy5oYXMobmFtZSkgPyAnJyA6IGA9JHt0eXBlb2YgdmFsdWUgPT09ICdzdHJpbmcnID8gSlNPTi5zdHJpbmdpZnkoZXNjYXBlKHZhbHVlKSkgOiBgXCIke3ZhbHVlfVwiYH1gfWA7XG59XG5mdW5jdGlvbiBhZGRfY2xhc3NlcyhjbGFzc2VzKSB7XG4gICAgcmV0dXJuIGNsYXNzZXMgPyBgIGNsYXNzPVwiJHtjbGFzc2VzfVwiYCA6ICcnO1xufVxuZnVuY3Rpb24gc3R5bGVfb2JqZWN0X3RvX3N0cmluZyhzdHlsZV9vYmplY3QpIHtcbiAgICByZXR1cm4gT2JqZWN0LmtleXMoc3R5bGVfb2JqZWN0KVxuICAgICAgICAuZmlsdGVyKGtleSA9PiBzdHlsZV9vYmplY3Rba2V5XSlcbiAgICAgICAgLm1hcChrZXkgPT4gYCR7a2V5fTogJHtzdHlsZV9vYmplY3Rba2V5XX07YClcbiAgICAgICAgLmpvaW4oJyAnKTtcbn1cbmZ1bmN0aW9uIGFkZF9zdHlsZXMoc3R5bGVfb2JqZWN0KSB7XG4gICAgY29uc3Qgc3R5bGVzID0gc3R5bGVfb2JqZWN0X3RvX3N0cmluZyhzdHlsZV9vYmplY3QpO1xuICAgIHJldHVybiBzdHlsZXMgPyBgIHN0eWxlPVwiJHtzdHlsZXN9XCJgIDogJyc7XG59XG5cbmZ1bmN0aW9uIGJpbmQoY29tcG9uZW50LCBuYW1lLCBjYWxsYmFjaykge1xuICAgIGNvbnN0IGluZGV4ID0gY29tcG9uZW50LiQkLnByb3BzW25hbWVdO1xuICAgIGlmIChpbmRleCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIGNvbXBvbmVudC4kJC5ib3VuZFtpbmRleF0gPSBjYWxsYmFjaztcbiAgICAgICAgY2FsbGJhY2soY29tcG9uZW50LiQkLmN0eFtpbmRleF0pO1xuICAgIH1cbn1cbmZ1bmN0aW9uIGNyZWF0ZV9jb21wb25lbnQoYmxvY2spIHtcbiAgICBibG9jayAmJiBibG9jay5jKCk7XG59XG5mdW5jdGlvbiBjbGFpbV9jb21wb25lbnQoYmxvY2ssIHBhcmVudF9ub2Rlcykge1xuICAgIGJsb2NrICYmIGJsb2NrLmwocGFyZW50X25vZGVzKTtcbn1cbmZ1bmN0aW9uIG1vdW50X2NvbXBvbmVudChjb21wb25lbnQsIHRhcmdldCwgYW5jaG9yLCBjdXN0b21FbGVtZW50KSB7XG4gICAgY29uc3QgeyBmcmFnbWVudCwgb25fbW91bnQsIG9uX2Rlc3Ryb3ksIGFmdGVyX3VwZGF0ZSB9ID0gY29tcG9uZW50LiQkO1xuICAgIGZyYWdtZW50ICYmIGZyYWdtZW50Lm0odGFyZ2V0LCBhbmNob3IpO1xuICAgIGlmICghY3VzdG9tRWxlbWVudCkge1xuICAgICAgICAvLyBvbk1vdW50IGhhcHBlbnMgYmVmb3JlIHRoZSBpbml0aWFsIGFmdGVyVXBkYXRlXG4gICAgICAgIGFkZF9yZW5kZXJfY2FsbGJhY2soKCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgbmV3X29uX2Rlc3Ryb3kgPSBvbl9tb3VudC5tYXAocnVuKS5maWx0ZXIoaXNfZnVuY3Rpb24pO1xuICAgICAgICAgICAgaWYgKG9uX2Rlc3Ryb3kpIHtcbiAgICAgICAgICAgICAgICBvbl9kZXN0cm95LnB1c2goLi4ubmV3X29uX2Rlc3Ryb3kpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgLy8gRWRnZSBjYXNlIC0gY29tcG9uZW50IHdhcyBkZXN0cm95ZWQgaW1tZWRpYXRlbHksXG4gICAgICAgICAgICAgICAgLy8gbW9zdCBsaWtlbHkgYXMgYSByZXN1bHQgb2YgYSBiaW5kaW5nIGluaXRpYWxpc2luZ1xuICAgICAgICAgICAgICAgIHJ1bl9hbGwobmV3X29uX2Rlc3Ryb3kpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29tcG9uZW50LiQkLm9uX21vdW50ID0gW107XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBhZnRlcl91cGRhdGUuZm9yRWFjaChhZGRfcmVuZGVyX2NhbGxiYWNrKTtcbn1cbmZ1bmN0aW9uIGRlc3Ryb3lfY29tcG9uZW50KGNvbXBvbmVudCwgZGV0YWNoaW5nKSB7XG4gICAgY29uc3QgJCQgPSBjb21wb25lbnQuJCQ7XG4gICAgaWYgKCQkLmZyYWdtZW50ICE9PSBudWxsKSB7XG4gICAgICAgIHJ1bl9hbGwoJCQub25fZGVzdHJveSk7XG4gICAgICAgICQkLmZyYWdtZW50ICYmICQkLmZyYWdtZW50LmQoZGV0YWNoaW5nKTtcbiAgICAgICAgLy8gVE9ETyBudWxsIG91dCBvdGhlciByZWZzLCBpbmNsdWRpbmcgY29tcG9uZW50LiQkIChidXQgbmVlZCB0b1xuICAgICAgICAvLyBwcmVzZXJ2ZSBmaW5hbCBzdGF0ZT8pXG4gICAgICAgICQkLm9uX2Rlc3Ryb3kgPSAkJC5mcmFnbWVudCA9IG51bGw7XG4gICAgICAgICQkLmN0eCA9IFtdO1xuICAgIH1cbn1cbmZ1bmN0aW9uIG1ha2VfZGlydHkoY29tcG9uZW50LCBpKSB7XG4gICAgaWYgKGNvbXBvbmVudC4kJC5kaXJ0eVswXSA9PT0gLTEpIHtcbiAgICAgICAgZGlydHlfY29tcG9uZW50cy5wdXNoKGNvbXBvbmVudCk7XG4gICAgICAgIHNjaGVkdWxlX3VwZGF0ZSgpO1xuICAgICAgICBjb21wb25lbnQuJCQuZGlydHkuZmlsbCgwKTtcbiAgICB9XG4gICAgY29tcG9uZW50LiQkLmRpcnR5WyhpIC8gMzEpIHwgMF0gfD0gKDEgPDwgKGkgJSAzMSkpO1xufVxuZnVuY3Rpb24gaW5pdChjb21wb25lbnQsIG9wdGlvbnMsIGluc3RhbmNlLCBjcmVhdGVfZnJhZ21lbnQsIG5vdF9lcXVhbCwgcHJvcHMsIGFwcGVuZF9zdHlsZXMsIGRpcnR5ID0gWy0xXSkge1xuICAgIGNvbnN0IHBhcmVudF9jb21wb25lbnQgPSBjdXJyZW50X2NvbXBvbmVudDtcbiAgICBzZXRfY3VycmVudF9jb21wb25lbnQoY29tcG9uZW50KTtcbiAgICBjb25zdCAkJCA9IGNvbXBvbmVudC4kJCA9IHtcbiAgICAgICAgZnJhZ21lbnQ6IG51bGwsXG4gICAgICAgIGN0eDogbnVsbCxcbiAgICAgICAgLy8gc3RhdGVcbiAgICAgICAgcHJvcHMsXG4gICAgICAgIHVwZGF0ZTogbm9vcCxcbiAgICAgICAgbm90X2VxdWFsLFxuICAgICAgICBib3VuZDogYmxhbmtfb2JqZWN0KCksXG4gICAgICAgIC8vIGxpZmVjeWNsZVxuICAgICAgICBvbl9tb3VudDogW10sXG4gICAgICAgIG9uX2Rlc3Ryb3k6IFtdLFxuICAgICAgICBvbl9kaXNjb25uZWN0OiBbXSxcbiAgICAgICAgYmVmb3JlX3VwZGF0ZTogW10sXG4gICAgICAgIGFmdGVyX3VwZGF0ZTogW10sXG4gICAgICAgIGNvbnRleHQ6IG5ldyBNYXAob3B0aW9ucy5jb250ZXh0IHx8IChwYXJlbnRfY29tcG9uZW50ID8gcGFyZW50X2NvbXBvbmVudC4kJC5jb250ZXh0IDogW10pKSxcbiAgICAgICAgLy8gZXZlcnl0aGluZyBlbHNlXG4gICAgICAgIGNhbGxiYWNrczogYmxhbmtfb2JqZWN0KCksXG4gICAgICAgIGRpcnR5LFxuICAgICAgICBza2lwX2JvdW5kOiBmYWxzZSxcbiAgICAgICAgcm9vdDogb3B0aW9ucy50YXJnZXQgfHwgcGFyZW50X2NvbXBvbmVudC4kJC5yb290XG4gICAgfTtcbiAgICBhcHBlbmRfc3R5bGVzICYmIGFwcGVuZF9zdHlsZXMoJCQucm9vdCk7XG4gICAgbGV0IHJlYWR5ID0gZmFsc2U7XG4gICAgJCQuY3R4ID0gaW5zdGFuY2VcbiAgICAgICAgPyBpbnN0YW5jZShjb21wb25lbnQsIG9wdGlvbnMucHJvcHMgfHwge30sIChpLCByZXQsIC4uLnJlc3QpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHZhbHVlID0gcmVzdC5sZW5ndGggPyByZXN0WzBdIDogcmV0O1xuICAgICAgICAgICAgaWYgKCQkLmN0eCAmJiBub3RfZXF1YWwoJCQuY3R4W2ldLCAkJC5jdHhbaV0gPSB2YWx1ZSkpIHtcbiAgICAgICAgICAgICAgICBpZiAoISQkLnNraXBfYm91bmQgJiYgJCQuYm91bmRbaV0pXG4gICAgICAgICAgICAgICAgICAgICQkLmJvdW5kW2ldKHZhbHVlKTtcbiAgICAgICAgICAgICAgICBpZiAocmVhZHkpXG4gICAgICAgICAgICAgICAgICAgIG1ha2VfZGlydHkoY29tcG9uZW50LCBpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiByZXQ7XG4gICAgICAgIH0pXG4gICAgICAgIDogW107XG4gICAgJCQudXBkYXRlKCk7XG4gICAgcmVhZHkgPSB0cnVlO1xuICAgIHJ1bl9hbGwoJCQuYmVmb3JlX3VwZGF0ZSk7XG4gICAgLy8gYGZhbHNlYCBhcyBhIHNwZWNpYWwgY2FzZSBvZiBubyBET00gY29tcG9uZW50XG4gICAgJCQuZnJhZ21lbnQgPSBjcmVhdGVfZnJhZ21lbnQgPyBjcmVhdGVfZnJhZ21lbnQoJCQuY3R4KSA6IGZhbHNlO1xuICAgIGlmIChvcHRpb25zLnRhcmdldCkge1xuICAgICAgICBpZiAob3B0aW9ucy5oeWRyYXRlKSB7XG4gICAgICAgICAgICBzdGFydF9oeWRyYXRpbmcoKTtcbiAgICAgICAgICAgIGNvbnN0IG5vZGVzID0gY2hpbGRyZW4ob3B0aW9ucy50YXJnZXQpO1xuICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1ub24tbnVsbC1hc3NlcnRpb25cbiAgICAgICAgICAgICQkLmZyYWdtZW50ICYmICQkLmZyYWdtZW50Lmwobm9kZXMpO1xuICAgICAgICAgICAgbm9kZXMuZm9yRWFjaChkZXRhY2gpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1ub24tbnVsbC1hc3NlcnRpb25cbiAgICAgICAgICAgICQkLmZyYWdtZW50ICYmICQkLmZyYWdtZW50LmMoKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAob3B0aW9ucy5pbnRybylcbiAgICAgICAgICAgIHRyYW5zaXRpb25faW4oY29tcG9uZW50LiQkLmZyYWdtZW50KTtcbiAgICAgICAgbW91bnRfY29tcG9uZW50KGNvbXBvbmVudCwgb3B0aW9ucy50YXJnZXQsIG9wdGlvbnMuYW5jaG9yLCBvcHRpb25zLmN1c3RvbUVsZW1lbnQpO1xuICAgICAgICBlbmRfaHlkcmF0aW5nKCk7XG4gICAgICAgIGZsdXNoKCk7XG4gICAgfVxuICAgIHNldF9jdXJyZW50X2NvbXBvbmVudChwYXJlbnRfY29tcG9uZW50KTtcbn1cbmxldCBTdmVsdGVFbGVtZW50O1xuaWYgKHR5cGVvZiBIVE1MRWxlbWVudCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgIFN2ZWx0ZUVsZW1lbnQgPSBjbGFzcyBleHRlbmRzIEhUTUxFbGVtZW50IHtcbiAgICAgICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgICAgICBzdXBlcigpO1xuICAgICAgICAgICAgdGhpcy5hdHRhY2hTaGFkb3coeyBtb2RlOiAnb3BlbicgfSk7XG4gICAgICAgIH1cbiAgICAgICAgY29ubmVjdGVkQ2FsbGJhY2soKSB7XG4gICAgICAgICAgICBjb25zdCB7IG9uX21vdW50IH0gPSB0aGlzLiQkO1xuICAgICAgICAgICAgdGhpcy4kJC5vbl9kaXNjb25uZWN0ID0gb25fbW91bnQubWFwKHJ1bikuZmlsdGVyKGlzX2Z1bmN0aW9uKTtcbiAgICAgICAgICAgIC8vIEB0cy1pZ25vcmUgdG9kbzogaW1wcm92ZSB0eXBpbmdzXG4gICAgICAgICAgICBmb3IgKGNvbnN0IGtleSBpbiB0aGlzLiQkLnNsb3R0ZWQpIHtcbiAgICAgICAgICAgICAgICAvLyBAdHMtaWdub3JlIHRvZG86IGltcHJvdmUgdHlwaW5nc1xuICAgICAgICAgICAgICAgIHRoaXMuYXBwZW5kQ2hpbGQodGhpcy4kJC5zbG90dGVkW2tleV0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGF0dHJpYnV0ZUNoYW5nZWRDYWxsYmFjayhhdHRyLCBfb2xkVmFsdWUsIG5ld1ZhbHVlKSB7XG4gICAgICAgICAgICB0aGlzW2F0dHJdID0gbmV3VmFsdWU7XG4gICAgICAgIH1cbiAgICAgICAgZGlzY29ubmVjdGVkQ2FsbGJhY2soKSB7XG4gICAgICAgICAgICBydW5fYWxsKHRoaXMuJCQub25fZGlzY29ubmVjdCk7XG4gICAgICAgIH1cbiAgICAgICAgJGRlc3Ryb3koKSB7XG4gICAgICAgICAgICBkZXN0cm95X2NvbXBvbmVudCh0aGlzLCAxKTtcbiAgICAgICAgICAgIHRoaXMuJGRlc3Ryb3kgPSBub29wO1xuICAgICAgICB9XG4gICAgICAgICRvbih0eXBlLCBjYWxsYmFjaykge1xuICAgICAgICAgICAgLy8gVE9ETyBzaG91bGQgdGhpcyBkZWxlZ2F0ZSB0byBhZGRFdmVudExpc3RlbmVyP1xuICAgICAgICAgICAgY29uc3QgY2FsbGJhY2tzID0gKHRoaXMuJCQuY2FsbGJhY2tzW3R5cGVdIHx8ICh0aGlzLiQkLmNhbGxiYWNrc1t0eXBlXSA9IFtdKSk7XG4gICAgICAgICAgICBjYWxsYmFja3MucHVzaChjYWxsYmFjayk7XG4gICAgICAgICAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IGluZGV4ID0gY2FsbGJhY2tzLmluZGV4T2YoY2FsbGJhY2spO1xuICAgICAgICAgICAgICAgIGlmIChpbmRleCAhPT0gLTEpXG4gICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrcy5zcGxpY2UoaW5kZXgsIDEpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgICAkc2V0KCQkcHJvcHMpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLiQkc2V0ICYmICFpc19lbXB0eSgkJHByb3BzKSkge1xuICAgICAgICAgICAgICAgIHRoaXMuJCQuc2tpcF9ib3VuZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgdGhpcy4kJHNldCgkJHByb3BzKTtcbiAgICAgICAgICAgICAgICB0aGlzLiQkLnNraXBfYm91bmQgPSBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG59XG4vKipcbiAqIEJhc2UgY2xhc3MgZm9yIFN2ZWx0ZSBjb21wb25lbnRzLiBVc2VkIHdoZW4gZGV2PWZhbHNlLlxuICovXG5jbGFzcyBTdmVsdGVDb21wb25lbnQge1xuICAgICRkZXN0cm95KCkge1xuICAgICAgICBkZXN0cm95X2NvbXBvbmVudCh0aGlzLCAxKTtcbiAgICAgICAgdGhpcy4kZGVzdHJveSA9IG5vb3A7XG4gICAgfVxuICAgICRvbih0eXBlLCBjYWxsYmFjaykge1xuICAgICAgICBjb25zdCBjYWxsYmFja3MgPSAodGhpcy4kJC5jYWxsYmFja3NbdHlwZV0gfHwgKHRoaXMuJCQuY2FsbGJhY2tzW3R5cGVdID0gW10pKTtcbiAgICAgICAgY2FsbGJhY2tzLnB1c2goY2FsbGJhY2spO1xuICAgICAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgaW5kZXggPSBjYWxsYmFja3MuaW5kZXhPZihjYWxsYmFjayk7XG4gICAgICAgICAgICBpZiAoaW5kZXggIT09IC0xKVxuICAgICAgICAgICAgICAgIGNhbGxiYWNrcy5zcGxpY2UoaW5kZXgsIDEpO1xuICAgICAgICB9O1xuICAgIH1cbiAgICAkc2V0KCQkcHJvcHMpIHtcbiAgICAgICAgaWYgKHRoaXMuJCRzZXQgJiYgIWlzX2VtcHR5KCQkcHJvcHMpKSB7XG4gICAgICAgICAgICB0aGlzLiQkLnNraXBfYm91bmQgPSB0cnVlO1xuICAgICAgICAgICAgdGhpcy4kJHNldCgkJHByb3BzKTtcbiAgICAgICAgICAgIHRoaXMuJCQuc2tpcF9ib3VuZCA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgfVxufVxuXG5mdW5jdGlvbiBkaXNwYXRjaF9kZXYodHlwZSwgZGV0YWlsKSB7XG4gICAgZG9jdW1lbnQuZGlzcGF0Y2hFdmVudChjdXN0b21fZXZlbnQodHlwZSwgT2JqZWN0LmFzc2lnbih7IHZlcnNpb246ICczLjQ2LjQnIH0sIGRldGFpbCksIHRydWUpKTtcbn1cbmZ1bmN0aW9uIGFwcGVuZF9kZXYodGFyZ2V0LCBub2RlKSB7XG4gICAgZGlzcGF0Y2hfZGV2KCdTdmVsdGVET01JbnNlcnQnLCB7IHRhcmdldCwgbm9kZSB9KTtcbiAgICBhcHBlbmQodGFyZ2V0LCBub2RlKTtcbn1cbmZ1bmN0aW9uIGFwcGVuZF9oeWRyYXRpb25fZGV2KHRhcmdldCwgbm9kZSkge1xuICAgIGRpc3BhdGNoX2RldignU3ZlbHRlRE9NSW5zZXJ0JywgeyB0YXJnZXQsIG5vZGUgfSk7XG4gICAgYXBwZW5kX2h5ZHJhdGlvbih0YXJnZXQsIG5vZGUpO1xufVxuZnVuY3Rpb24gaW5zZXJ0X2Rldih0YXJnZXQsIG5vZGUsIGFuY2hvcikge1xuICAgIGRpc3BhdGNoX2RldignU3ZlbHRlRE9NSW5zZXJ0JywgeyB0YXJnZXQsIG5vZGUsIGFuY2hvciB9KTtcbiAgICBpbnNlcnQodGFyZ2V0LCBub2RlLCBhbmNob3IpO1xufVxuZnVuY3Rpb24gaW5zZXJ0X2h5ZHJhdGlvbl9kZXYodGFyZ2V0LCBub2RlLCBhbmNob3IpIHtcbiAgICBkaXNwYXRjaF9kZXYoJ1N2ZWx0ZURPTUluc2VydCcsIHsgdGFyZ2V0LCBub2RlLCBhbmNob3IgfSk7XG4gICAgaW5zZXJ0X2h5ZHJhdGlvbih0YXJnZXQsIG5vZGUsIGFuY2hvcik7XG59XG5mdW5jdGlvbiBkZXRhY2hfZGV2KG5vZGUpIHtcbiAgICBkaXNwYXRjaF9kZXYoJ1N2ZWx0ZURPTVJlbW92ZScsIHsgbm9kZSB9KTtcbiAgICBkZXRhY2gobm9kZSk7XG59XG5mdW5jdGlvbiBkZXRhY2hfYmV0d2Vlbl9kZXYoYmVmb3JlLCBhZnRlcikge1xuICAgIHdoaWxlIChiZWZvcmUubmV4dFNpYmxpbmcgJiYgYmVmb3JlLm5leHRTaWJsaW5nICE9PSBhZnRlcikge1xuICAgICAgICBkZXRhY2hfZGV2KGJlZm9yZS5uZXh0U2libGluZyk7XG4gICAgfVxufVxuZnVuY3Rpb24gZGV0YWNoX2JlZm9yZV9kZXYoYWZ0ZXIpIHtcbiAgICB3aGlsZSAoYWZ0ZXIucHJldmlvdXNTaWJsaW5nKSB7XG4gICAgICAgIGRldGFjaF9kZXYoYWZ0ZXIucHJldmlvdXNTaWJsaW5nKTtcbiAgICB9XG59XG5mdW5jdGlvbiBkZXRhY2hfYWZ0ZXJfZGV2KGJlZm9yZSkge1xuICAgIHdoaWxlIChiZWZvcmUubmV4dFNpYmxpbmcpIHtcbiAgICAgICAgZGV0YWNoX2RldihiZWZvcmUubmV4dFNpYmxpbmcpO1xuICAgIH1cbn1cbmZ1bmN0aW9uIGxpc3Rlbl9kZXYobm9kZSwgZXZlbnQsIGhhbmRsZXIsIG9wdGlvbnMsIGhhc19wcmV2ZW50X2RlZmF1bHQsIGhhc19zdG9wX3Byb3BhZ2F0aW9uKSB7XG4gICAgY29uc3QgbW9kaWZpZXJzID0gb3B0aW9ucyA9PT0gdHJ1ZSA/IFsnY2FwdHVyZSddIDogb3B0aW9ucyA/IEFycmF5LmZyb20oT2JqZWN0LmtleXMob3B0aW9ucykpIDogW107XG4gICAgaWYgKGhhc19wcmV2ZW50X2RlZmF1bHQpXG4gICAgICAgIG1vZGlmaWVycy5wdXNoKCdwcmV2ZW50RGVmYXVsdCcpO1xuICAgIGlmIChoYXNfc3RvcF9wcm9wYWdhdGlvbilcbiAgICAgICAgbW9kaWZpZXJzLnB1c2goJ3N0b3BQcm9wYWdhdGlvbicpO1xuICAgIGRpc3BhdGNoX2RldignU3ZlbHRlRE9NQWRkRXZlbnRMaXN0ZW5lcicsIHsgbm9kZSwgZXZlbnQsIGhhbmRsZXIsIG1vZGlmaWVycyB9KTtcbiAgICBjb25zdCBkaXNwb3NlID0gbGlzdGVuKG5vZGUsIGV2ZW50LCBoYW5kbGVyLCBvcHRpb25zKTtcbiAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgICBkaXNwYXRjaF9kZXYoJ1N2ZWx0ZURPTVJlbW92ZUV2ZW50TGlzdGVuZXInLCB7IG5vZGUsIGV2ZW50LCBoYW5kbGVyLCBtb2RpZmllcnMgfSk7XG4gICAgICAgIGRpc3Bvc2UoKTtcbiAgICB9O1xufVxuZnVuY3Rpb24gYXR0cl9kZXYobm9kZSwgYXR0cmlidXRlLCB2YWx1ZSkge1xuICAgIGF0dHIobm9kZSwgYXR0cmlidXRlLCB2YWx1ZSk7XG4gICAgaWYgKHZhbHVlID09IG51bGwpXG4gICAgICAgIGRpc3BhdGNoX2RldignU3ZlbHRlRE9NUmVtb3ZlQXR0cmlidXRlJywgeyBub2RlLCBhdHRyaWJ1dGUgfSk7XG4gICAgZWxzZVxuICAgICAgICBkaXNwYXRjaF9kZXYoJ1N2ZWx0ZURPTVNldEF0dHJpYnV0ZScsIHsgbm9kZSwgYXR0cmlidXRlLCB2YWx1ZSB9KTtcbn1cbmZ1bmN0aW9uIHByb3BfZGV2KG5vZGUsIHByb3BlcnR5LCB2YWx1ZSkge1xuICAgIG5vZGVbcHJvcGVydHldID0gdmFsdWU7XG4gICAgZGlzcGF0Y2hfZGV2KCdTdmVsdGVET01TZXRQcm9wZXJ0eScsIHsgbm9kZSwgcHJvcGVydHksIHZhbHVlIH0pO1xufVxuZnVuY3Rpb24gZGF0YXNldF9kZXYobm9kZSwgcHJvcGVydHksIHZhbHVlKSB7XG4gICAgbm9kZS5kYXRhc2V0W3Byb3BlcnR5XSA9IHZhbHVlO1xuICAgIGRpc3BhdGNoX2RldignU3ZlbHRlRE9NU2V0RGF0YXNldCcsIHsgbm9kZSwgcHJvcGVydHksIHZhbHVlIH0pO1xufVxuZnVuY3Rpb24gc2V0X2RhdGFfZGV2KHRleHQsIGRhdGEpIHtcbiAgICBkYXRhID0gJycgKyBkYXRhO1xuICAgIGlmICh0ZXh0Lndob2xlVGV4dCA9PT0gZGF0YSlcbiAgICAgICAgcmV0dXJuO1xuICAgIGRpc3BhdGNoX2RldignU3ZlbHRlRE9NU2V0RGF0YScsIHsgbm9kZTogdGV4dCwgZGF0YSB9KTtcbiAgICB0ZXh0LmRhdGEgPSBkYXRhO1xufVxuZnVuY3Rpb24gdmFsaWRhdGVfZWFjaF9hcmd1bWVudChhcmcpIHtcbiAgICBpZiAodHlwZW9mIGFyZyAhPT0gJ3N0cmluZycgJiYgIShhcmcgJiYgdHlwZW9mIGFyZyA9PT0gJ29iamVjdCcgJiYgJ2xlbmd0aCcgaW4gYXJnKSkge1xuICAgICAgICBsZXQgbXNnID0gJ3sjZWFjaH0gb25seSBpdGVyYXRlcyBvdmVyIGFycmF5LWxpa2Ugb2JqZWN0cy4nO1xuICAgICAgICBpZiAodHlwZW9mIFN5bWJvbCA9PT0gJ2Z1bmN0aW9uJyAmJiBhcmcgJiYgU3ltYm9sLml0ZXJhdG9yIGluIGFyZykge1xuICAgICAgICAgICAgbXNnICs9ICcgWW91IGNhbiB1c2UgYSBzcHJlYWQgdG8gY29udmVydCB0aGlzIGl0ZXJhYmxlIGludG8gYW4gYXJyYXkuJztcbiAgICAgICAgfVxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IobXNnKTtcbiAgICB9XG59XG5mdW5jdGlvbiB2YWxpZGF0ZV9zbG90cyhuYW1lLCBzbG90LCBrZXlzKSB7XG4gICAgZm9yIChjb25zdCBzbG90X2tleSBvZiBPYmplY3Qua2V5cyhzbG90KSkge1xuICAgICAgICBpZiAoIX5rZXlzLmluZGV4T2Yoc2xvdF9rZXkpKSB7XG4gICAgICAgICAgICBjb25zb2xlLndhcm4oYDwke25hbWV9PiByZWNlaXZlZCBhbiB1bmV4cGVjdGVkIHNsb3QgXCIke3Nsb3Rfa2V5fVwiLmApO1xuICAgICAgICB9XG4gICAgfVxufVxuLyoqXG4gKiBCYXNlIGNsYXNzIGZvciBTdmVsdGUgY29tcG9uZW50cyB3aXRoIHNvbWUgbWlub3IgZGV2LWVuaGFuY2VtZW50cy4gVXNlZCB3aGVuIGRldj10cnVlLlxuICovXG5jbGFzcyBTdmVsdGVDb21wb25lbnREZXYgZXh0ZW5kcyBTdmVsdGVDb21wb25lbnQge1xuICAgIGNvbnN0cnVjdG9yKG9wdGlvbnMpIHtcbiAgICAgICAgaWYgKCFvcHRpb25zIHx8ICghb3B0aW9ucy50YXJnZXQgJiYgIW9wdGlvbnMuJCRpbmxpbmUpKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCIndGFyZ2V0JyBpcyBhIHJlcXVpcmVkIG9wdGlvblwiKTtcbiAgICAgICAgfVxuICAgICAgICBzdXBlcigpO1xuICAgIH1cbiAgICAkZGVzdHJveSgpIHtcbiAgICAgICAgc3VwZXIuJGRlc3Ryb3koKTtcbiAgICAgICAgdGhpcy4kZGVzdHJveSA9ICgpID0+IHtcbiAgICAgICAgICAgIGNvbnNvbGUud2FybignQ29tcG9uZW50IHdhcyBhbHJlYWR5IGRlc3Ryb3llZCcpOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLWNvbnNvbGVcbiAgICAgICAgfTtcbiAgICB9XG4gICAgJGNhcHR1cmVfc3RhdGUoKSB7IH1cbiAgICAkaW5qZWN0X3N0YXRlKCkgeyB9XG59XG4vKipcbiAqIEJhc2UgY2xhc3MgdG8gY3JlYXRlIHN0cm9uZ2x5IHR5cGVkIFN2ZWx0ZSBjb21wb25lbnRzLlxuICogVGhpcyBvbmx5IGV4aXN0cyBmb3IgdHlwaW5nIHB1cnBvc2VzIGFuZCBzaG91bGQgYmUgdXNlZCBpbiBgLmQudHNgIGZpbGVzLlxuICpcbiAqICMjIyBFeGFtcGxlOlxuICpcbiAqIFlvdSBoYXZlIGNvbXBvbmVudCBsaWJyYXJ5IG9uIG5wbSBjYWxsZWQgYGNvbXBvbmVudC1saWJyYXJ5YCwgZnJvbSB3aGljaFxuICogeW91IGV4cG9ydCBhIGNvbXBvbmVudCBjYWxsZWQgYE15Q29tcG9uZW50YC4gRm9yIFN2ZWx0ZStUeXBlU2NyaXB0IHVzZXJzLFxuICogeW91IHdhbnQgdG8gcHJvdmlkZSB0eXBpbmdzLiBUaGVyZWZvcmUgeW91IGNyZWF0ZSBhIGBpbmRleC5kLnRzYDpcbiAqIGBgYHRzXG4gKiBpbXBvcnQgeyBTdmVsdGVDb21wb25lbnRUeXBlZCB9IGZyb20gXCJzdmVsdGVcIjtcbiAqIGV4cG9ydCBjbGFzcyBNeUNvbXBvbmVudCBleHRlbmRzIFN2ZWx0ZUNvbXBvbmVudFR5cGVkPHtmb286IHN0cmluZ30+IHt9XG4gKiBgYGBcbiAqIFR5cGluZyB0aGlzIG1ha2VzIGl0IHBvc3NpYmxlIGZvciBJREVzIGxpa2UgVlMgQ29kZSB3aXRoIHRoZSBTdmVsdGUgZXh0ZW5zaW9uXG4gKiB0byBwcm92aWRlIGludGVsbGlzZW5zZSBhbmQgdG8gdXNlIHRoZSBjb21wb25lbnQgbGlrZSB0aGlzIGluIGEgU3ZlbHRlIGZpbGVcbiAqIHdpdGggVHlwZVNjcmlwdDpcbiAqIGBgYHN2ZWx0ZVxuICogPHNjcmlwdCBsYW5nPVwidHNcIj5cbiAqIFx0aW1wb3J0IHsgTXlDb21wb25lbnQgfSBmcm9tIFwiY29tcG9uZW50LWxpYnJhcnlcIjtcbiAqIDwvc2NyaXB0PlxuICogPE15Q29tcG9uZW50IGZvbz17J2Jhcid9IC8+XG4gKiBgYGBcbiAqXG4gKiAjIyMjIFdoeSBub3QgbWFrZSB0aGlzIHBhcnQgb2YgYFN2ZWx0ZUNvbXBvbmVudChEZXYpYD9cbiAqIEJlY2F1c2VcbiAqIGBgYHRzXG4gKiBjbGFzcyBBU3ViY2xhc3NPZlN2ZWx0ZUNvbXBvbmVudCBleHRlbmRzIFN2ZWx0ZUNvbXBvbmVudDx7Zm9vOiBzdHJpbmd9PiB7fVxuICogY29uc3QgY29tcG9uZW50OiB0eXBlb2YgU3ZlbHRlQ29tcG9uZW50ID0gQVN1YmNsYXNzT2ZTdmVsdGVDb21wb25lbnQ7XG4gKiBgYGBcbiAqIHdpbGwgdGhyb3cgYSB0eXBlIGVycm9yLCBzbyB3ZSBuZWVkIHRvIHNlcGFyYXRlIHRoZSBtb3JlIHN0cmljdGx5IHR5cGVkIGNsYXNzLlxuICovXG5jbGFzcyBTdmVsdGVDb21wb25lbnRUeXBlZCBleHRlbmRzIFN2ZWx0ZUNvbXBvbmVudERldiB7XG4gICAgY29uc3RydWN0b3Iob3B0aW9ucykge1xuICAgICAgICBzdXBlcihvcHRpb25zKTtcbiAgICB9XG59XG5mdW5jdGlvbiBsb29wX2d1YXJkKHRpbWVvdXQpIHtcbiAgICBjb25zdCBzdGFydCA9IERhdGUubm93KCk7XG4gICAgcmV0dXJuICgpID0+IHtcbiAgICAgICAgaWYgKERhdGUubm93KCkgLSBzdGFydCA+IHRpbWVvdXQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignSW5maW5pdGUgbG9vcCBkZXRlY3RlZCcpO1xuICAgICAgICB9XG4gICAgfTtcbn1cblxuZXhwb3J0IHsgSHRtbFRhZywgSHRtbFRhZ0h5ZHJhdGlvbiwgU3ZlbHRlQ29tcG9uZW50LCBTdmVsdGVDb21wb25lbnREZXYsIFN2ZWx0ZUNvbXBvbmVudFR5cGVkLCBTdmVsdGVFbGVtZW50LCBhY3Rpb25fZGVzdHJveWVyLCBhZGRfYXR0cmlidXRlLCBhZGRfY2xhc3NlcywgYWRkX2ZsdXNoX2NhbGxiYWNrLCBhZGRfbG9jYXRpb24sIGFkZF9yZW5kZXJfY2FsbGJhY2ssIGFkZF9yZXNpemVfbGlzdGVuZXIsIGFkZF9zdHlsZXMsIGFkZF90cmFuc2Zvcm0sIGFmdGVyVXBkYXRlLCBhcHBlbmQsIGFwcGVuZF9kZXYsIGFwcGVuZF9lbXB0eV9zdHlsZXNoZWV0LCBhcHBlbmRfaHlkcmF0aW9uLCBhcHBlbmRfaHlkcmF0aW9uX2RldiwgYXBwZW5kX3N0eWxlcywgYXNzaWduLCBhdHRyLCBhdHRyX2RldiwgYXR0cmlidXRlX3RvX29iamVjdCwgYmVmb3JlVXBkYXRlLCBiaW5kLCBiaW5kaW5nX2NhbGxiYWNrcywgYmxhbmtfb2JqZWN0LCBidWJibGUsIGNoZWNrX291dHJvcywgY2hpbGRyZW4sIGNsYWltX2NvbXBvbmVudCwgY2xhaW1fZWxlbWVudCwgY2xhaW1faHRtbF90YWcsIGNsYWltX3NwYWNlLCBjbGFpbV9zdmdfZWxlbWVudCwgY2xhaW1fdGV4dCwgY2xlYXJfbG9vcHMsIGNvbXBvbmVudF9zdWJzY3JpYmUsIGNvbXB1dGVfcmVzdF9wcm9wcywgY29tcHV0ZV9zbG90cywgY3JlYXRlRXZlbnREaXNwYXRjaGVyLCBjcmVhdGVfYW5pbWF0aW9uLCBjcmVhdGVfYmlkaXJlY3Rpb25hbF90cmFuc2l0aW9uLCBjcmVhdGVfY29tcG9uZW50LCBjcmVhdGVfaW5fdHJhbnNpdGlvbiwgY3JlYXRlX291dF90cmFuc2l0aW9uLCBjcmVhdGVfc2xvdCwgY3JlYXRlX3Nzcl9jb21wb25lbnQsIGN1cnJlbnRfY29tcG9uZW50LCBjdXN0b21fZXZlbnQsIGRhdGFzZXRfZGV2LCBkZWJ1ZywgZGVzdHJveV9ibG9jaywgZGVzdHJveV9jb21wb25lbnQsIGRlc3Ryb3lfZWFjaCwgZGV0YWNoLCBkZXRhY2hfYWZ0ZXJfZGV2LCBkZXRhY2hfYmVmb3JlX2RldiwgZGV0YWNoX2JldHdlZW5fZGV2LCBkZXRhY2hfZGV2LCBkaXJ0eV9jb21wb25lbnRzLCBkaXNwYXRjaF9kZXYsIGVhY2gsIGVsZW1lbnQsIGVsZW1lbnRfaXMsIGVtcHR5LCBlbmRfaHlkcmF0aW5nLCBlc2NhcGUsIGVzY2FwZV9hdHRyaWJ1dGVfdmFsdWUsIGVzY2FwZV9vYmplY3QsIGVzY2FwZWQsIGV4Y2x1ZGVfaW50ZXJuYWxfcHJvcHMsIGZpeF9hbmRfZGVzdHJveV9ibG9jaywgZml4X2FuZF9vdXRyb19hbmRfZGVzdHJveV9ibG9jaywgZml4X3Bvc2l0aW9uLCBmbHVzaCwgZ2V0QWxsQ29udGV4dHMsIGdldENvbnRleHQsIGdldF9hbGxfZGlydHlfZnJvbV9zY29wZSwgZ2V0X2JpbmRpbmdfZ3JvdXBfdmFsdWUsIGdldF9jdXJyZW50X2NvbXBvbmVudCwgZ2V0X2N1c3RvbV9lbGVtZW50c19zbG90cywgZ2V0X3Jvb3RfZm9yX3N0eWxlLCBnZXRfc2xvdF9jaGFuZ2VzLCBnZXRfc3ByZWFkX29iamVjdCwgZ2V0X3NwcmVhZF91cGRhdGUsIGdldF9zdG9yZV92YWx1ZSwgZ2xvYmFscywgZ3JvdXBfb3V0cm9zLCBoYW5kbGVfcHJvbWlzZSwgaGFzQ29udGV4dCwgaGFzX3Byb3AsIGlkZW50aXR5LCBpbml0LCBpbnNlcnQsIGluc2VydF9kZXYsIGluc2VydF9oeWRyYXRpb24sIGluc2VydF9oeWRyYXRpb25fZGV2LCBpbnRyb3MsIGludmFsaWRfYXR0cmlidXRlX25hbWVfY2hhcmFjdGVyLCBpc19jbGllbnQsIGlzX2Nyb3Nzb3JpZ2luLCBpc19lbXB0eSwgaXNfZnVuY3Rpb24sIGlzX3Byb21pc2UsIGxpc3RlbiwgbGlzdGVuX2RldiwgbG9vcCwgbG9vcF9ndWFyZCwgbWVyZ2Vfc3NyX3N0eWxlcywgbWlzc2luZ19jb21wb25lbnQsIG1vdW50X2NvbXBvbmVudCwgbm9vcCwgbm90X2VxdWFsLCBub3csIG51bGxfdG9fZW1wdHksIG9iamVjdF93aXRob3V0X3Byb3BlcnRpZXMsIG9uRGVzdHJveSwgb25Nb3VudCwgb25jZSwgb3V0cm9fYW5kX2Rlc3Ryb3lfYmxvY2ssIHByZXZlbnRfZGVmYXVsdCwgcHJvcF9kZXYsIHF1ZXJ5X3NlbGVjdG9yX2FsbCwgcmFmLCBydW4sIHJ1bl9hbGwsIHNhZmVfbm90X2VxdWFsLCBzY2hlZHVsZV91cGRhdGUsIHNlbGVjdF9tdWx0aXBsZV92YWx1ZSwgc2VsZWN0X29wdGlvbiwgc2VsZWN0X29wdGlvbnMsIHNlbGVjdF92YWx1ZSwgc2VsZiwgc2V0Q29udGV4dCwgc2V0X2F0dHJpYnV0ZXMsIHNldF9jdXJyZW50X2NvbXBvbmVudCwgc2V0X2N1c3RvbV9lbGVtZW50X2RhdGEsIHNldF9kYXRhLCBzZXRfZGF0YV9kZXYsIHNldF9pbnB1dF90eXBlLCBzZXRfaW5wdXRfdmFsdWUsIHNldF9ub3csIHNldF9yYWYsIHNldF9zdG9yZV92YWx1ZSwgc2V0X3N0eWxlLCBzZXRfc3ZnX2F0dHJpYnV0ZXMsIHNwYWNlLCBzcHJlYWQsIHNyY191cmxfZXF1YWwsIHN0YXJ0X2h5ZHJhdGluZywgc3RvcF9wcm9wYWdhdGlvbiwgc3Vic2NyaWJlLCBzdmdfZWxlbWVudCwgdGV4dCwgdGljaywgdGltZV9yYW5nZXNfdG9fYXJyYXksIHRvX251bWJlciwgdG9nZ2xlX2NsYXNzLCB0cmFuc2l0aW9uX2luLCB0cmFuc2l0aW9uX291dCwgdHJ1c3RlZCwgdXBkYXRlX2F3YWl0X2Jsb2NrX2JyYW5jaCwgdXBkYXRlX2tleWVkX2VhY2gsIHVwZGF0ZV9zbG90LCB1cGRhdGVfc2xvdF9iYXNlLCB2YWxpZGF0ZV9jb21wb25lbnQsIHZhbGlkYXRlX2VhY2hfYXJndW1lbnQsIHZhbGlkYXRlX2VhY2hfa2V5cywgdmFsaWRhdGVfc2xvdHMsIHZhbGlkYXRlX3N0b3JlLCB4bGlua19hdHRyIH07XG4iLCIndXNlIHN0cmljdCc7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG5cbmZ1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHtcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykge1xuICAgIHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07XG4gICAgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlO1xuICAgIGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTtcbiAgICBpZiAoXCJ2YWx1ZVwiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTtcbiAgfVxufVxuXG5mdW5jdGlvbiBfY3JlYXRlQ2xhc3MoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7XG4gIGlmIChwcm90b1Byb3BzKSBfZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpO1xuICBpZiAoc3RhdGljUHJvcHMpIF9kZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7XG4gIHJldHVybiBDb25zdHJ1Y3Rvcjtcbn1cblxuZnVuY3Rpb24gX2V4dGVuZHMoKSB7XG4gIF9leHRlbmRzID0gT2JqZWN0LmFzc2lnbiB8fCBmdW5jdGlvbiAodGFyZ2V0KSB7XG4gICAgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHtcbiAgICAgIHZhciBzb3VyY2UgPSBhcmd1bWVudHNbaV07XG5cbiAgICAgIGZvciAodmFyIGtleSBpbiBzb3VyY2UpIHtcbiAgICAgICAgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzb3VyY2UsIGtleSkpIHtcbiAgICAgICAgICB0YXJnZXRba2V5XSA9IHNvdXJjZVtrZXldO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHRhcmdldDtcbiAgfTtcblxuICByZXR1cm4gX2V4dGVuZHMuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbn1cblxuZnVuY3Rpb24gX2luaGVyaXRzTG9vc2Uoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIHtcbiAgc3ViQ2xhc3MucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShzdXBlckNsYXNzLnByb3RvdHlwZSk7XG4gIHN1YkNsYXNzLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IHN1YkNsYXNzO1xuXG4gIF9zZXRQcm90b3R5cGVPZihzdWJDbGFzcywgc3VwZXJDbGFzcyk7XG59XG5cbmZ1bmN0aW9uIF9nZXRQcm90b3R5cGVPZihvKSB7XG4gIF9nZXRQcm90b3R5cGVPZiA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiA/IE9iamVjdC5nZXRQcm90b3R5cGVPZiA6IGZ1bmN0aW9uIF9nZXRQcm90b3R5cGVPZihvKSB7XG4gICAgcmV0dXJuIG8uX19wcm90b19fIHx8IE9iamVjdC5nZXRQcm90b3R5cGVPZihvKTtcbiAgfTtcbiAgcmV0dXJuIF9nZXRQcm90b3R5cGVPZihvKTtcbn1cblxuZnVuY3Rpb24gX3NldFByb3RvdHlwZU9mKG8sIHApIHtcbiAgX3NldFByb3RvdHlwZU9mID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8IGZ1bmN0aW9uIF9zZXRQcm90b3R5cGVPZihvLCBwKSB7XG4gICAgby5fX3Byb3RvX18gPSBwO1xuICAgIHJldHVybiBvO1xuICB9O1xuXG4gIHJldHVybiBfc2V0UHJvdG90eXBlT2YobywgcCk7XG59XG5cbmZ1bmN0aW9uIF9pc05hdGl2ZVJlZmxlY3RDb25zdHJ1Y3QoKSB7XG4gIGlmICh0eXBlb2YgUmVmbGVjdCA9PT0gXCJ1bmRlZmluZWRcIiB8fCAhUmVmbGVjdC5jb25zdHJ1Y3QpIHJldHVybiBmYWxzZTtcbiAgaWYgKFJlZmxlY3QuY29uc3RydWN0LnNoYW0pIHJldHVybiBmYWxzZTtcbiAgaWYgKHR5cGVvZiBQcm94eSA9PT0gXCJmdW5jdGlvblwiKSByZXR1cm4gdHJ1ZTtcblxuICB0cnkge1xuICAgIEJvb2xlYW4ucHJvdG90eXBlLnZhbHVlT2YuY2FsbChSZWZsZWN0LmNvbnN0cnVjdChCb29sZWFuLCBbXSwgZnVuY3Rpb24gKCkge30pKTtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfSBjYXRjaCAoZSkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxufVxuXG5mdW5jdGlvbiBfY29uc3RydWN0KFBhcmVudCwgYXJncywgQ2xhc3MpIHtcbiAgaWYgKF9pc05hdGl2ZVJlZmxlY3RDb25zdHJ1Y3QoKSkge1xuICAgIF9jb25zdHJ1Y3QgPSBSZWZsZWN0LmNvbnN0cnVjdDtcbiAgfSBlbHNlIHtcbiAgICBfY29uc3RydWN0ID0gZnVuY3Rpb24gX2NvbnN0cnVjdChQYXJlbnQsIGFyZ3MsIENsYXNzKSB7XG4gICAgICB2YXIgYSA9IFtudWxsXTtcbiAgICAgIGEucHVzaC5hcHBseShhLCBhcmdzKTtcbiAgICAgIHZhciBDb25zdHJ1Y3RvciA9IEZ1bmN0aW9uLmJpbmQuYXBwbHkoUGFyZW50LCBhKTtcbiAgICAgIHZhciBpbnN0YW5jZSA9IG5ldyBDb25zdHJ1Y3RvcigpO1xuICAgICAgaWYgKENsYXNzKSBfc2V0UHJvdG90eXBlT2YoaW5zdGFuY2UsIENsYXNzLnByb3RvdHlwZSk7XG4gICAgICByZXR1cm4gaW5zdGFuY2U7XG4gICAgfTtcbiAgfVxuXG4gIHJldHVybiBfY29uc3RydWN0LmFwcGx5KG51bGwsIGFyZ3VtZW50cyk7XG59XG5cbmZ1bmN0aW9uIF9pc05hdGl2ZUZ1bmN0aW9uKGZuKSB7XG4gIHJldHVybiBGdW5jdGlvbi50b1N0cmluZy5jYWxsKGZuKS5pbmRleE9mKFwiW25hdGl2ZSBjb2RlXVwiKSAhPT0gLTE7XG59XG5cbmZ1bmN0aW9uIF93cmFwTmF0aXZlU3VwZXIoQ2xhc3MpIHtcbiAgdmFyIF9jYWNoZSA9IHR5cGVvZiBNYXAgPT09IFwiZnVuY3Rpb25cIiA/IG5ldyBNYXAoKSA6IHVuZGVmaW5lZDtcblxuICBfd3JhcE5hdGl2ZVN1cGVyID0gZnVuY3Rpb24gX3dyYXBOYXRpdmVTdXBlcihDbGFzcykge1xuICAgIGlmIChDbGFzcyA9PT0gbnVsbCB8fCAhX2lzTmF0aXZlRnVuY3Rpb24oQ2xhc3MpKSByZXR1cm4gQ2xhc3M7XG5cbiAgICBpZiAodHlwZW9mIENsYXNzICE9PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvblwiKTtcbiAgICB9XG5cbiAgICBpZiAodHlwZW9mIF9jYWNoZSAhPT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgaWYgKF9jYWNoZS5oYXMoQ2xhc3MpKSByZXR1cm4gX2NhY2hlLmdldChDbGFzcyk7XG5cbiAgICAgIF9jYWNoZS5zZXQoQ2xhc3MsIFdyYXBwZXIpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIFdyYXBwZXIoKSB7XG4gICAgICByZXR1cm4gX2NvbnN0cnVjdChDbGFzcywgYXJndW1lbnRzLCBfZ2V0UHJvdG90eXBlT2YodGhpcykuY29uc3RydWN0b3IpO1xuICAgIH1cblxuICAgIFdyYXBwZXIucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShDbGFzcy5wcm90b3R5cGUsIHtcbiAgICAgIGNvbnN0cnVjdG9yOiB7XG4gICAgICAgIHZhbHVlOiBXcmFwcGVyLFxuICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgICAgfVxuICAgIH0pO1xuICAgIHJldHVybiBfc2V0UHJvdG90eXBlT2YoV3JhcHBlciwgQ2xhc3MpO1xuICB9O1xuXG4gIHJldHVybiBfd3JhcE5hdGl2ZVN1cGVyKENsYXNzKTtcbn1cblxuZnVuY3Rpb24gX29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzTG9vc2Uoc291cmNlLCBleGNsdWRlZCkge1xuICBpZiAoc291cmNlID09IG51bGwpIHJldHVybiB7fTtcbiAgdmFyIHRhcmdldCA9IHt9O1xuICB2YXIgc291cmNlS2V5cyA9IE9iamVjdC5rZXlzKHNvdXJjZSk7XG4gIHZhciBrZXksIGk7XG5cbiAgZm9yIChpID0gMDsgaSA8IHNvdXJjZUtleXMubGVuZ3RoOyBpKyspIHtcbiAgICBrZXkgPSBzb3VyY2VLZXlzW2ldO1xuICAgIGlmIChleGNsdWRlZC5pbmRleE9mKGtleSkgPj0gMCkgY29udGludWU7XG4gICAgdGFyZ2V0W2tleV0gPSBzb3VyY2Vba2V5XTtcbiAgfVxuXG4gIHJldHVybiB0YXJnZXQ7XG59XG5cbmZ1bmN0aW9uIF91bnN1cHBvcnRlZEl0ZXJhYmxlVG9BcnJheShvLCBtaW5MZW4pIHtcbiAgaWYgKCFvKSByZXR1cm47XG4gIGlmICh0eXBlb2YgbyA9PT0gXCJzdHJpbmdcIikgcmV0dXJuIF9hcnJheUxpa2VUb0FycmF5KG8sIG1pbkxlbik7XG4gIHZhciBuID0gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKG8pLnNsaWNlKDgsIC0xKTtcbiAgaWYgKG4gPT09IFwiT2JqZWN0XCIgJiYgby5jb25zdHJ1Y3RvcikgbiA9IG8uY29uc3RydWN0b3IubmFtZTtcbiAgaWYgKG4gPT09IFwiTWFwXCIgfHwgbiA9PT0gXCJTZXRcIikgcmV0dXJuIEFycmF5LmZyb20obyk7XG4gIGlmIChuID09PSBcIkFyZ3VtZW50c1wiIHx8IC9eKD86VWl8SSludCg/Ojh8MTZ8MzIpKD86Q2xhbXBlZCk/QXJyYXkkLy50ZXN0KG4pKSByZXR1cm4gX2FycmF5TGlrZVRvQXJyYXkobywgbWluTGVuKTtcbn1cblxuZnVuY3Rpb24gX2FycmF5TGlrZVRvQXJyYXkoYXJyLCBsZW4pIHtcbiAgaWYgKGxlbiA9PSBudWxsIHx8IGxlbiA+IGFyci5sZW5ndGgpIGxlbiA9IGFyci5sZW5ndGg7XG5cbiAgZm9yICh2YXIgaSA9IDAsIGFycjIgPSBuZXcgQXJyYXkobGVuKTsgaSA8IGxlbjsgaSsrKSBhcnIyW2ldID0gYXJyW2ldO1xuXG4gIHJldHVybiBhcnIyO1xufVxuXG5mdW5jdGlvbiBfY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlckxvb3NlKG8sIGFsbG93QXJyYXlMaWtlKSB7XG4gIHZhciBpdCA9IHR5cGVvZiBTeW1ib2wgIT09IFwidW5kZWZpbmVkXCIgJiYgb1tTeW1ib2wuaXRlcmF0b3JdIHx8IG9bXCJAQGl0ZXJhdG9yXCJdO1xuICBpZiAoaXQpIHJldHVybiAoaXQgPSBpdC5jYWxsKG8pKS5uZXh0LmJpbmQoaXQpO1xuXG4gIGlmIChBcnJheS5pc0FycmF5KG8pIHx8IChpdCA9IF91bnN1cHBvcnRlZEl0ZXJhYmxlVG9BcnJheShvKSkgfHwgYWxsb3dBcnJheUxpa2UgJiYgbyAmJiB0eXBlb2Ygby5sZW5ndGggPT09IFwibnVtYmVyXCIpIHtcbiAgICBpZiAoaXQpIG8gPSBpdDtcbiAgICB2YXIgaSA9IDA7XG4gICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgIGlmIChpID49IG8ubGVuZ3RoKSByZXR1cm4ge1xuICAgICAgICBkb25lOiB0cnVlXG4gICAgICB9O1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgZG9uZTogZmFsc2UsXG4gICAgICAgIHZhbHVlOiBvW2krK11cbiAgICAgIH07XG4gICAgfTtcbiAgfVxuXG4gIHRocm93IG5ldyBUeXBlRXJyb3IoXCJJbnZhbGlkIGF0dGVtcHQgdG8gaXRlcmF0ZSBub24taXRlcmFibGUgaW5zdGFuY2UuXFxuSW4gb3JkZXIgdG8gYmUgaXRlcmFibGUsIG5vbi1hcnJheSBvYmplY3RzIG11c3QgaGF2ZSBhIFtTeW1ib2wuaXRlcmF0b3JdKCkgbWV0aG9kLlwiKTtcbn1cblxuLy8gdGhlc2UgYXJlbid0IHJlYWxseSBwcml2YXRlLCBidXQgbm9yIGFyZSB0aGV5IHJlYWxseSB1c2VmdWwgdG8gZG9jdW1lbnRcblxuLyoqXG4gKiBAcHJpdmF0ZVxuICovXG52YXIgTHV4b25FcnJvciA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoX0Vycm9yKSB7XG4gIF9pbmhlcml0c0xvb3NlKEx1eG9uRXJyb3IsIF9FcnJvcik7XG5cbiAgZnVuY3Rpb24gTHV4b25FcnJvcigpIHtcbiAgICByZXR1cm4gX0Vycm9yLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgdGhpcztcbiAgfVxuXG4gIHJldHVybiBMdXhvbkVycm9yO1xufSggLyojX19QVVJFX18qL193cmFwTmF0aXZlU3VwZXIoRXJyb3IpKTtcbi8qKlxuICogQHByaXZhdGVcbiAqL1xuXG5cbnZhciBJbnZhbGlkRGF0ZVRpbWVFcnJvciA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoX0x1eG9uRXJyb3IpIHtcbiAgX2luaGVyaXRzTG9vc2UoSW52YWxpZERhdGVUaW1lRXJyb3IsIF9MdXhvbkVycm9yKTtcblxuICBmdW5jdGlvbiBJbnZhbGlkRGF0ZVRpbWVFcnJvcihyZWFzb24pIHtcbiAgICByZXR1cm4gX0x1eG9uRXJyb3IuY2FsbCh0aGlzLCBcIkludmFsaWQgRGF0ZVRpbWU6IFwiICsgcmVhc29uLnRvTWVzc2FnZSgpKSB8fCB0aGlzO1xuICB9XG5cbiAgcmV0dXJuIEludmFsaWREYXRlVGltZUVycm9yO1xufShMdXhvbkVycm9yKTtcbi8qKlxuICogQHByaXZhdGVcbiAqL1xuXG52YXIgSW52YWxpZEludGVydmFsRXJyb3IgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKF9MdXhvbkVycm9yMikge1xuICBfaW5oZXJpdHNMb29zZShJbnZhbGlkSW50ZXJ2YWxFcnJvciwgX0x1eG9uRXJyb3IyKTtcblxuICBmdW5jdGlvbiBJbnZhbGlkSW50ZXJ2YWxFcnJvcihyZWFzb24pIHtcbiAgICByZXR1cm4gX0x1eG9uRXJyb3IyLmNhbGwodGhpcywgXCJJbnZhbGlkIEludGVydmFsOiBcIiArIHJlYXNvbi50b01lc3NhZ2UoKSkgfHwgdGhpcztcbiAgfVxuXG4gIHJldHVybiBJbnZhbGlkSW50ZXJ2YWxFcnJvcjtcbn0oTHV4b25FcnJvcik7XG4vKipcbiAqIEBwcml2YXRlXG4gKi9cblxudmFyIEludmFsaWREdXJhdGlvbkVycm9yID0gLyojX19QVVJFX18qL2Z1bmN0aW9uIChfTHV4b25FcnJvcjMpIHtcbiAgX2luaGVyaXRzTG9vc2UoSW52YWxpZER1cmF0aW9uRXJyb3IsIF9MdXhvbkVycm9yMyk7XG5cbiAgZnVuY3Rpb24gSW52YWxpZER1cmF0aW9uRXJyb3IocmVhc29uKSB7XG4gICAgcmV0dXJuIF9MdXhvbkVycm9yMy5jYWxsKHRoaXMsIFwiSW52YWxpZCBEdXJhdGlvbjogXCIgKyByZWFzb24udG9NZXNzYWdlKCkpIHx8IHRoaXM7XG4gIH1cblxuICByZXR1cm4gSW52YWxpZER1cmF0aW9uRXJyb3I7XG59KEx1eG9uRXJyb3IpO1xuLyoqXG4gKiBAcHJpdmF0ZVxuICovXG5cbnZhciBDb25mbGljdGluZ1NwZWNpZmljYXRpb25FcnJvciA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoX0x1eG9uRXJyb3I0KSB7XG4gIF9pbmhlcml0c0xvb3NlKENvbmZsaWN0aW5nU3BlY2lmaWNhdGlvbkVycm9yLCBfTHV4b25FcnJvcjQpO1xuXG4gIGZ1bmN0aW9uIENvbmZsaWN0aW5nU3BlY2lmaWNhdGlvbkVycm9yKCkge1xuICAgIHJldHVybiBfTHV4b25FcnJvcjQuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzO1xuICB9XG5cbiAgcmV0dXJuIENvbmZsaWN0aW5nU3BlY2lmaWNhdGlvbkVycm9yO1xufShMdXhvbkVycm9yKTtcbi8qKlxuICogQHByaXZhdGVcbiAqL1xuXG52YXIgSW52YWxpZFVuaXRFcnJvciA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoX0x1eG9uRXJyb3I1KSB7XG4gIF9pbmhlcml0c0xvb3NlKEludmFsaWRVbml0RXJyb3IsIF9MdXhvbkVycm9yNSk7XG5cbiAgZnVuY3Rpb24gSW52YWxpZFVuaXRFcnJvcih1bml0KSB7XG4gICAgcmV0dXJuIF9MdXhvbkVycm9yNS5jYWxsKHRoaXMsIFwiSW52YWxpZCB1bml0IFwiICsgdW5pdCkgfHwgdGhpcztcbiAgfVxuXG4gIHJldHVybiBJbnZhbGlkVW5pdEVycm9yO1xufShMdXhvbkVycm9yKTtcbi8qKlxuICogQHByaXZhdGVcbiAqL1xuXG52YXIgSW52YWxpZEFyZ3VtZW50RXJyb3IgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKF9MdXhvbkVycm9yNikge1xuICBfaW5oZXJpdHNMb29zZShJbnZhbGlkQXJndW1lbnRFcnJvciwgX0x1eG9uRXJyb3I2KTtcblxuICBmdW5jdGlvbiBJbnZhbGlkQXJndW1lbnRFcnJvcigpIHtcbiAgICByZXR1cm4gX0x1eG9uRXJyb3I2LmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgdGhpcztcbiAgfVxuXG4gIHJldHVybiBJbnZhbGlkQXJndW1lbnRFcnJvcjtcbn0oTHV4b25FcnJvcik7XG4vKipcbiAqIEBwcml2YXRlXG4gKi9cblxudmFyIFpvbmVJc0Fic3RyYWN0RXJyb3IgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKF9MdXhvbkVycm9yNykge1xuICBfaW5oZXJpdHNMb29zZShab25lSXNBYnN0cmFjdEVycm9yLCBfTHV4b25FcnJvcjcpO1xuXG4gIGZ1bmN0aW9uIFpvbmVJc0Fic3RyYWN0RXJyb3IoKSB7XG4gICAgcmV0dXJuIF9MdXhvbkVycm9yNy5jYWxsKHRoaXMsIFwiWm9uZSBpcyBhbiBhYnN0cmFjdCBjbGFzc1wiKSB8fCB0aGlzO1xuICB9XG5cbiAgcmV0dXJuIFpvbmVJc0Fic3RyYWN0RXJyb3I7XG59KEx1eG9uRXJyb3IpO1xuXG4vKipcbiAqIEBwcml2YXRlXG4gKi9cbnZhciBuID0gXCJudW1lcmljXCIsXG4gICAgcyA9IFwic2hvcnRcIixcbiAgICBsID0gXCJsb25nXCI7XG52YXIgREFURV9TSE9SVCA9IHtcbiAgeWVhcjogbixcbiAgbW9udGg6IG4sXG4gIGRheTogblxufTtcbnZhciBEQVRFX01FRCA9IHtcbiAgeWVhcjogbixcbiAgbW9udGg6IHMsXG4gIGRheTogblxufTtcbnZhciBEQVRFX01FRF9XSVRIX1dFRUtEQVkgPSB7XG4gIHllYXI6IG4sXG4gIG1vbnRoOiBzLFxuICBkYXk6IG4sXG4gIHdlZWtkYXk6IHNcbn07XG52YXIgREFURV9GVUxMID0ge1xuICB5ZWFyOiBuLFxuICBtb250aDogbCxcbiAgZGF5OiBuXG59O1xudmFyIERBVEVfSFVHRSA9IHtcbiAgeWVhcjogbixcbiAgbW9udGg6IGwsXG4gIGRheTogbixcbiAgd2Vla2RheTogbFxufTtcbnZhciBUSU1FX1NJTVBMRSA9IHtcbiAgaG91cjogbixcbiAgbWludXRlOiBuXG59O1xudmFyIFRJTUVfV0lUSF9TRUNPTkRTID0ge1xuICBob3VyOiBuLFxuICBtaW51dGU6IG4sXG4gIHNlY29uZDogblxufTtcbnZhciBUSU1FX1dJVEhfU0hPUlRfT0ZGU0VUID0ge1xuICBob3VyOiBuLFxuICBtaW51dGU6IG4sXG4gIHNlY29uZDogbixcbiAgdGltZVpvbmVOYW1lOiBzXG59O1xudmFyIFRJTUVfV0lUSF9MT05HX09GRlNFVCA9IHtcbiAgaG91cjogbixcbiAgbWludXRlOiBuLFxuICBzZWNvbmQ6IG4sXG4gIHRpbWVab25lTmFtZTogbFxufTtcbnZhciBUSU1FXzI0X1NJTVBMRSA9IHtcbiAgaG91cjogbixcbiAgbWludXRlOiBuLFxuICBob3VyQ3ljbGU6IFwiaDIzXCJcbn07XG52YXIgVElNRV8yNF9XSVRIX1NFQ09ORFMgPSB7XG4gIGhvdXI6IG4sXG4gIG1pbnV0ZTogbixcbiAgc2Vjb25kOiBuLFxuICBob3VyQ3ljbGU6IFwiaDIzXCJcbn07XG52YXIgVElNRV8yNF9XSVRIX1NIT1JUX09GRlNFVCA9IHtcbiAgaG91cjogbixcbiAgbWludXRlOiBuLFxuICBzZWNvbmQ6IG4sXG4gIGhvdXJDeWNsZTogXCJoMjNcIixcbiAgdGltZVpvbmVOYW1lOiBzXG59O1xudmFyIFRJTUVfMjRfV0lUSF9MT05HX09GRlNFVCA9IHtcbiAgaG91cjogbixcbiAgbWludXRlOiBuLFxuICBzZWNvbmQ6IG4sXG4gIGhvdXJDeWNsZTogXCJoMjNcIixcbiAgdGltZVpvbmVOYW1lOiBsXG59O1xudmFyIERBVEVUSU1FX1NIT1JUID0ge1xuICB5ZWFyOiBuLFxuICBtb250aDogbixcbiAgZGF5OiBuLFxuICBob3VyOiBuLFxuICBtaW51dGU6IG5cbn07XG52YXIgREFURVRJTUVfU0hPUlRfV0lUSF9TRUNPTkRTID0ge1xuICB5ZWFyOiBuLFxuICBtb250aDogbixcbiAgZGF5OiBuLFxuICBob3VyOiBuLFxuICBtaW51dGU6IG4sXG4gIHNlY29uZDogblxufTtcbnZhciBEQVRFVElNRV9NRUQgPSB7XG4gIHllYXI6IG4sXG4gIG1vbnRoOiBzLFxuICBkYXk6IG4sXG4gIGhvdXI6IG4sXG4gIG1pbnV0ZTogblxufTtcbnZhciBEQVRFVElNRV9NRURfV0lUSF9TRUNPTkRTID0ge1xuICB5ZWFyOiBuLFxuICBtb250aDogcyxcbiAgZGF5OiBuLFxuICBob3VyOiBuLFxuICBtaW51dGU6IG4sXG4gIHNlY29uZDogblxufTtcbnZhciBEQVRFVElNRV9NRURfV0lUSF9XRUVLREFZID0ge1xuICB5ZWFyOiBuLFxuICBtb250aDogcyxcbiAgZGF5OiBuLFxuICB3ZWVrZGF5OiBzLFxuICBob3VyOiBuLFxuICBtaW51dGU6IG5cbn07XG52YXIgREFURVRJTUVfRlVMTCA9IHtcbiAgeWVhcjogbixcbiAgbW9udGg6IGwsXG4gIGRheTogbixcbiAgaG91cjogbixcbiAgbWludXRlOiBuLFxuICB0aW1lWm9uZU5hbWU6IHNcbn07XG52YXIgREFURVRJTUVfRlVMTF9XSVRIX1NFQ09ORFMgPSB7XG4gIHllYXI6IG4sXG4gIG1vbnRoOiBsLFxuICBkYXk6IG4sXG4gIGhvdXI6IG4sXG4gIG1pbnV0ZTogbixcbiAgc2Vjb25kOiBuLFxuICB0aW1lWm9uZU5hbWU6IHNcbn07XG52YXIgREFURVRJTUVfSFVHRSA9IHtcbiAgeWVhcjogbixcbiAgbW9udGg6IGwsXG4gIGRheTogbixcbiAgd2Vla2RheTogbCxcbiAgaG91cjogbixcbiAgbWludXRlOiBuLFxuICB0aW1lWm9uZU5hbWU6IGxcbn07XG52YXIgREFURVRJTUVfSFVHRV9XSVRIX1NFQ09ORFMgPSB7XG4gIHllYXI6IG4sXG4gIG1vbnRoOiBsLFxuICBkYXk6IG4sXG4gIHdlZWtkYXk6IGwsXG4gIGhvdXI6IG4sXG4gIG1pbnV0ZTogbixcbiAgc2Vjb25kOiBuLFxuICB0aW1lWm9uZU5hbWU6IGxcbn07XG5cbi8qKlxuICogQHByaXZhdGVcbiAqL1xuLy8gVFlQRVNcblxuZnVuY3Rpb24gaXNVbmRlZmluZWQobykge1xuICByZXR1cm4gdHlwZW9mIG8gPT09IFwidW5kZWZpbmVkXCI7XG59XG5mdW5jdGlvbiBpc051bWJlcihvKSB7XG4gIHJldHVybiB0eXBlb2YgbyA9PT0gXCJudW1iZXJcIjtcbn1cbmZ1bmN0aW9uIGlzSW50ZWdlcihvKSB7XG4gIHJldHVybiB0eXBlb2YgbyA9PT0gXCJudW1iZXJcIiAmJiBvICUgMSA9PT0gMDtcbn1cbmZ1bmN0aW9uIGlzU3RyaW5nKG8pIHtcbiAgcmV0dXJuIHR5cGVvZiBvID09PSBcInN0cmluZ1wiO1xufVxuZnVuY3Rpb24gaXNEYXRlKG8pIHtcbiAgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChvKSA9PT0gXCJbb2JqZWN0IERhdGVdXCI7XG59IC8vIENBUEFCSUxJVElFU1xuXG5mdW5jdGlvbiBoYXNSZWxhdGl2ZSgpIHtcbiAgdHJ5IHtcbiAgICByZXR1cm4gdHlwZW9mIEludGwgIT09IFwidW5kZWZpbmVkXCIgJiYgISFJbnRsLlJlbGF0aXZlVGltZUZvcm1hdDtcbiAgfSBjYXRjaCAoZSkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxufSAvLyBPQkpFQ1RTIEFORCBBUlJBWVNcblxuZnVuY3Rpb24gbWF5YmVBcnJheSh0aGluZykge1xuICByZXR1cm4gQXJyYXkuaXNBcnJheSh0aGluZykgPyB0aGluZyA6IFt0aGluZ107XG59XG5mdW5jdGlvbiBiZXN0QnkoYXJyLCBieSwgY29tcGFyZSkge1xuICBpZiAoYXJyLmxlbmd0aCA9PT0gMCkge1xuICAgIHJldHVybiB1bmRlZmluZWQ7XG4gIH1cblxuICByZXR1cm4gYXJyLnJlZHVjZShmdW5jdGlvbiAoYmVzdCwgbmV4dCkge1xuICAgIHZhciBwYWlyID0gW2J5KG5leHQpLCBuZXh0XTtcblxuICAgIGlmICghYmVzdCkge1xuICAgICAgcmV0dXJuIHBhaXI7XG4gICAgfSBlbHNlIGlmIChjb21wYXJlKGJlc3RbMF0sIHBhaXJbMF0pID09PSBiZXN0WzBdKSB7XG4gICAgICByZXR1cm4gYmVzdDtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIHBhaXI7XG4gICAgfVxuICB9LCBudWxsKVsxXTtcbn1cbmZ1bmN0aW9uIHBpY2sob2JqLCBrZXlzKSB7XG4gIHJldHVybiBrZXlzLnJlZHVjZShmdW5jdGlvbiAoYSwgaykge1xuICAgIGFba10gPSBvYmpba107XG4gICAgcmV0dXJuIGE7XG4gIH0sIHt9KTtcbn1cbmZ1bmN0aW9uIGhhc093blByb3BlcnR5KG9iaiwgcHJvcCkge1xuICByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwgcHJvcCk7XG59IC8vIE5VTUJFUlMgQU5EIFNUUklOR1NcblxuZnVuY3Rpb24gaW50ZWdlckJldHdlZW4odGhpbmcsIGJvdHRvbSwgdG9wKSB7XG4gIHJldHVybiBpc0ludGVnZXIodGhpbmcpICYmIHRoaW5nID49IGJvdHRvbSAmJiB0aGluZyA8PSB0b3A7XG59IC8vIHggJSBuIGJ1dCB0YWtlcyB0aGUgc2lnbiBvZiBuIGluc3RlYWQgb2YgeFxuXG5mdW5jdGlvbiBmbG9vck1vZCh4LCBuKSB7XG4gIHJldHVybiB4IC0gbiAqIE1hdGguZmxvb3IoeCAvIG4pO1xufVxuZnVuY3Rpb24gcGFkU3RhcnQoaW5wdXQsIG4pIHtcbiAgaWYgKG4gPT09IHZvaWQgMCkge1xuICAgIG4gPSAyO1xuICB9XG5cbiAgdmFyIGlzTmVnID0gaW5wdXQgPCAwO1xuICB2YXIgcGFkZGVkO1xuXG4gIGlmIChpc05lZykge1xuICAgIHBhZGRlZCA9IFwiLVwiICsgKFwiXCIgKyAtaW5wdXQpLnBhZFN0YXJ0KG4sIFwiMFwiKTtcbiAgfSBlbHNlIHtcbiAgICBwYWRkZWQgPSAoXCJcIiArIGlucHV0KS5wYWRTdGFydChuLCBcIjBcIik7XG4gIH1cblxuICByZXR1cm4gcGFkZGVkO1xufVxuZnVuY3Rpb24gcGFyc2VJbnRlZ2VyKHN0cmluZykge1xuICBpZiAoaXNVbmRlZmluZWQoc3RyaW5nKSB8fCBzdHJpbmcgPT09IG51bGwgfHwgc3RyaW5nID09PSBcIlwiKSB7XG4gICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gcGFyc2VJbnQoc3RyaW5nLCAxMCk7XG4gIH1cbn1cbmZ1bmN0aW9uIHBhcnNlRmxvYXRpbmcoc3RyaW5nKSB7XG4gIGlmIChpc1VuZGVmaW5lZChzdHJpbmcpIHx8IHN0cmluZyA9PT0gbnVsbCB8fCBzdHJpbmcgPT09IFwiXCIpIHtcbiAgICByZXR1cm4gdW5kZWZpbmVkO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiBwYXJzZUZsb2F0KHN0cmluZyk7XG4gIH1cbn1cbmZ1bmN0aW9uIHBhcnNlTWlsbGlzKGZyYWN0aW9uKSB7XG4gIC8vIFJldHVybiB1bmRlZmluZWQgKGluc3RlYWQgb2YgMCkgaW4gdGhlc2UgY2FzZXMsIHdoZXJlIGZyYWN0aW9uIGlzIG5vdCBzZXRcbiAgaWYgKGlzVW5kZWZpbmVkKGZyYWN0aW9uKSB8fCBmcmFjdGlvbiA9PT0gbnVsbCB8fCBmcmFjdGlvbiA9PT0gXCJcIikge1xuICAgIHJldHVybiB1bmRlZmluZWQ7XG4gIH0gZWxzZSB7XG4gICAgdmFyIGYgPSBwYXJzZUZsb2F0KFwiMC5cIiArIGZyYWN0aW9uKSAqIDEwMDA7XG4gICAgcmV0dXJuIE1hdGguZmxvb3IoZik7XG4gIH1cbn1cbmZ1bmN0aW9uIHJvdW5kVG8obnVtYmVyLCBkaWdpdHMsIHRvd2FyZFplcm8pIHtcbiAgaWYgKHRvd2FyZFplcm8gPT09IHZvaWQgMCkge1xuICAgIHRvd2FyZFplcm8gPSBmYWxzZTtcbiAgfVxuXG4gIHZhciBmYWN0b3IgPSBNYXRoLnBvdygxMCwgZGlnaXRzKSxcbiAgICAgIHJvdW5kZXIgPSB0b3dhcmRaZXJvID8gTWF0aC50cnVuYyA6IE1hdGgucm91bmQ7XG4gIHJldHVybiByb3VuZGVyKG51bWJlciAqIGZhY3RvcikgLyBmYWN0b3I7XG59IC8vIERBVEUgQkFTSUNTXG5cbmZ1bmN0aW9uIGlzTGVhcFllYXIoeWVhcikge1xuICByZXR1cm4geWVhciAlIDQgPT09IDAgJiYgKHllYXIgJSAxMDAgIT09IDAgfHwgeWVhciAlIDQwMCA9PT0gMCk7XG59XG5mdW5jdGlvbiBkYXlzSW5ZZWFyKHllYXIpIHtcbiAgcmV0dXJuIGlzTGVhcFllYXIoeWVhcikgPyAzNjYgOiAzNjU7XG59XG5mdW5jdGlvbiBkYXlzSW5Nb250aCh5ZWFyLCBtb250aCkge1xuICB2YXIgbW9kTW9udGggPSBmbG9vck1vZChtb250aCAtIDEsIDEyKSArIDEsXG4gICAgICBtb2RZZWFyID0geWVhciArIChtb250aCAtIG1vZE1vbnRoKSAvIDEyO1xuXG4gIGlmIChtb2RNb250aCA9PT0gMikge1xuICAgIHJldHVybiBpc0xlYXBZZWFyKG1vZFllYXIpID8gMjkgOiAyODtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gWzMxLCBudWxsLCAzMSwgMzAsIDMxLCAzMCwgMzEsIDMxLCAzMCwgMzEsIDMwLCAzMV1bbW9kTW9udGggLSAxXTtcbiAgfVxufSAvLyBjb3ZlcnQgYSBjYWxlbmRhciBvYmplY3QgdG8gYSBsb2NhbCB0aW1lc3RhbXAgKGVwb2NoLCBidXQgd2l0aCB0aGUgb2Zmc2V0IGJha2VkIGluKVxuXG5mdW5jdGlvbiBvYmpUb0xvY2FsVFMob2JqKSB7XG4gIHZhciBkID0gRGF0ZS5VVEMob2JqLnllYXIsIG9iai5tb250aCAtIDEsIG9iai5kYXksIG9iai5ob3VyLCBvYmoubWludXRlLCBvYmouc2Vjb25kLCBvYmoubWlsbGlzZWNvbmQpOyAvLyBmb3IgbGVnYWN5IHJlYXNvbnMsIHllYXJzIGJldHdlZW4gMCBhbmQgOTkgYXJlIGludGVycHJldGVkIGFzIDE5WFg7IHJldmVydCB0aGF0XG5cbiAgaWYgKG9iai55ZWFyIDwgMTAwICYmIG9iai55ZWFyID49IDApIHtcbiAgICBkID0gbmV3IERhdGUoZCk7XG4gICAgZC5zZXRVVENGdWxsWWVhcihkLmdldFVUQ0Z1bGxZZWFyKCkgLSAxOTAwKTtcbiAgfVxuXG4gIHJldHVybiArZDtcbn1cbmZ1bmN0aW9uIHdlZWtzSW5XZWVrWWVhcih3ZWVrWWVhcikge1xuICB2YXIgcDEgPSAod2Vla1llYXIgKyBNYXRoLmZsb29yKHdlZWtZZWFyIC8gNCkgLSBNYXRoLmZsb29yKHdlZWtZZWFyIC8gMTAwKSArIE1hdGguZmxvb3Iod2Vla1llYXIgLyA0MDApKSAlIDcsXG4gICAgICBsYXN0ID0gd2Vla1llYXIgLSAxLFxuICAgICAgcDIgPSAobGFzdCArIE1hdGguZmxvb3IobGFzdCAvIDQpIC0gTWF0aC5mbG9vcihsYXN0IC8gMTAwKSArIE1hdGguZmxvb3IobGFzdCAvIDQwMCkpICUgNztcbiAgcmV0dXJuIHAxID09PSA0IHx8IHAyID09PSAzID8gNTMgOiA1Mjtcbn1cbmZ1bmN0aW9uIHVudHJ1bmNhdGVZZWFyKHllYXIpIHtcbiAgaWYgKHllYXIgPiA5OSkge1xuICAgIHJldHVybiB5ZWFyO1xuICB9IGVsc2UgcmV0dXJuIHllYXIgPiA2MCA/IDE5MDAgKyB5ZWFyIDogMjAwMCArIHllYXI7XG59IC8vIFBBUlNJTkdcblxuZnVuY3Rpb24gcGFyc2Vab25lSW5mbyh0cywgb2Zmc2V0Rm9ybWF0LCBsb2NhbGUsIHRpbWVab25lKSB7XG4gIGlmICh0aW1lWm9uZSA9PT0gdm9pZCAwKSB7XG4gICAgdGltZVpvbmUgPSBudWxsO1xuICB9XG5cbiAgdmFyIGRhdGUgPSBuZXcgRGF0ZSh0cyksXG4gICAgICBpbnRsT3B0cyA9IHtcbiAgICBob3VyQ3ljbGU6IFwiaDIzXCIsXG4gICAgeWVhcjogXCJudW1lcmljXCIsXG4gICAgbW9udGg6IFwiMi1kaWdpdFwiLFxuICAgIGRheTogXCIyLWRpZ2l0XCIsXG4gICAgaG91cjogXCIyLWRpZ2l0XCIsXG4gICAgbWludXRlOiBcIjItZGlnaXRcIlxuICB9O1xuXG4gIGlmICh0aW1lWm9uZSkge1xuICAgIGludGxPcHRzLnRpbWVab25lID0gdGltZVpvbmU7XG4gIH1cblxuICB2YXIgbW9kaWZpZWQgPSBfZXh0ZW5kcyh7XG4gICAgdGltZVpvbmVOYW1lOiBvZmZzZXRGb3JtYXRcbiAgfSwgaW50bE9wdHMpO1xuXG4gIHZhciBwYXJzZWQgPSBuZXcgSW50bC5EYXRlVGltZUZvcm1hdChsb2NhbGUsIG1vZGlmaWVkKS5mb3JtYXRUb1BhcnRzKGRhdGUpLmZpbmQoZnVuY3Rpb24gKG0pIHtcbiAgICByZXR1cm4gbS50eXBlLnRvTG93ZXJDYXNlKCkgPT09IFwidGltZXpvbmVuYW1lXCI7XG4gIH0pO1xuICByZXR1cm4gcGFyc2VkID8gcGFyc2VkLnZhbHVlIDogbnVsbDtcbn0gLy8gc2lnbmVkT2Zmc2V0KCctNScsICczMCcpIC0+IC0zMzBcblxuZnVuY3Rpb24gc2lnbmVkT2Zmc2V0KG9mZkhvdXJTdHIsIG9mZk1pbnV0ZVN0cikge1xuICB2YXIgb2ZmSG91ciA9IHBhcnNlSW50KG9mZkhvdXJTdHIsIDEwKTsgLy8gZG9uJ3QgfHwgdGhpcyBiZWNhdXNlIHdlIHdhbnQgdG8gcHJlc2VydmUgLTBcblxuICBpZiAoTnVtYmVyLmlzTmFOKG9mZkhvdXIpKSB7XG4gICAgb2ZmSG91ciA9IDA7XG4gIH1cblxuICB2YXIgb2ZmTWluID0gcGFyc2VJbnQob2ZmTWludXRlU3RyLCAxMCkgfHwgMCxcbiAgICAgIG9mZk1pblNpZ25lZCA9IG9mZkhvdXIgPCAwIHx8IE9iamVjdC5pcyhvZmZIb3VyLCAtMCkgPyAtb2ZmTWluIDogb2ZmTWluO1xuICByZXR1cm4gb2ZmSG91ciAqIDYwICsgb2ZmTWluU2lnbmVkO1xufSAvLyBDT0VSQ0lPTlxuXG5mdW5jdGlvbiBhc051bWJlcih2YWx1ZSkge1xuICB2YXIgbnVtZXJpY1ZhbHVlID0gTnVtYmVyKHZhbHVlKTtcbiAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gXCJib29sZWFuXCIgfHwgdmFsdWUgPT09IFwiXCIgfHwgTnVtYmVyLmlzTmFOKG51bWVyaWNWYWx1ZSkpIHRocm93IG5ldyBJbnZhbGlkQXJndW1lbnRFcnJvcihcIkludmFsaWQgdW5pdCB2YWx1ZSBcIiArIHZhbHVlKTtcbiAgcmV0dXJuIG51bWVyaWNWYWx1ZTtcbn1cbmZ1bmN0aW9uIG5vcm1hbGl6ZU9iamVjdChvYmosIG5vcm1hbGl6ZXIpIHtcbiAgdmFyIG5vcm1hbGl6ZWQgPSB7fTtcblxuICBmb3IgKHZhciB1IGluIG9iaikge1xuICAgIGlmIChoYXNPd25Qcm9wZXJ0eShvYmosIHUpKSB7XG4gICAgICB2YXIgdiA9IG9ialt1XTtcbiAgICAgIGlmICh2ID09PSB1bmRlZmluZWQgfHwgdiA9PT0gbnVsbCkgY29udGludWU7XG4gICAgICBub3JtYWxpemVkW25vcm1hbGl6ZXIodSldID0gYXNOdW1iZXIodik7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIG5vcm1hbGl6ZWQ7XG59XG5mdW5jdGlvbiBmb3JtYXRPZmZzZXQob2Zmc2V0LCBmb3JtYXQpIHtcbiAgdmFyIGhvdXJzID0gTWF0aC50cnVuYyhNYXRoLmFicyhvZmZzZXQgLyA2MCkpLFxuICAgICAgbWludXRlcyA9IE1hdGgudHJ1bmMoTWF0aC5hYnMob2Zmc2V0ICUgNjApKSxcbiAgICAgIHNpZ24gPSBvZmZzZXQgPj0gMCA/IFwiK1wiIDogXCItXCI7XG5cbiAgc3dpdGNoIChmb3JtYXQpIHtcbiAgICBjYXNlIFwic2hvcnRcIjpcbiAgICAgIHJldHVybiBcIlwiICsgc2lnbiArIHBhZFN0YXJ0KGhvdXJzLCAyKSArIFwiOlwiICsgcGFkU3RhcnQobWludXRlcywgMik7XG5cbiAgICBjYXNlIFwibmFycm93XCI6XG4gICAgICByZXR1cm4gXCJcIiArIHNpZ24gKyBob3VycyArIChtaW51dGVzID4gMCA/IFwiOlwiICsgbWludXRlcyA6IFwiXCIpO1xuXG4gICAgY2FzZSBcInRlY2hpZVwiOlxuICAgICAgcmV0dXJuIFwiXCIgKyBzaWduICsgcGFkU3RhcnQoaG91cnMsIDIpICsgcGFkU3RhcnQobWludXRlcywgMik7XG5cbiAgICBkZWZhdWx0OlxuICAgICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoXCJWYWx1ZSBmb3JtYXQgXCIgKyBmb3JtYXQgKyBcIiBpcyBvdXQgb2YgcmFuZ2UgZm9yIHByb3BlcnR5IGZvcm1hdFwiKTtcbiAgfVxufVxuZnVuY3Rpb24gdGltZU9iamVjdChvYmopIHtcbiAgcmV0dXJuIHBpY2sob2JqLCBbXCJob3VyXCIsIFwibWludXRlXCIsIFwic2Vjb25kXCIsIFwibWlsbGlzZWNvbmRcIl0pO1xufVxudmFyIGlhbmFSZWdleCA9IC9bQS1aYS16XystXXsxLDI1Nn0oOj9cXC9bQS1aYS16MC05XystXXsxLDI1Nn0oXFwvW0EtWmEtejAtOV8rLV17MSwyNTZ9KT8pPy87XG5cbi8qKlxuICogQHByaXZhdGVcbiAqL1xuXG5cbnZhciBtb250aHNMb25nID0gW1wiSmFudWFyeVwiLCBcIkZlYnJ1YXJ5XCIsIFwiTWFyY2hcIiwgXCJBcHJpbFwiLCBcIk1heVwiLCBcIkp1bmVcIiwgXCJKdWx5XCIsIFwiQXVndXN0XCIsIFwiU2VwdGVtYmVyXCIsIFwiT2N0b2JlclwiLCBcIk5vdmVtYmVyXCIsIFwiRGVjZW1iZXJcIl07XG52YXIgbW9udGhzU2hvcnQgPSBbXCJKYW5cIiwgXCJGZWJcIiwgXCJNYXJcIiwgXCJBcHJcIiwgXCJNYXlcIiwgXCJKdW5cIiwgXCJKdWxcIiwgXCJBdWdcIiwgXCJTZXBcIiwgXCJPY3RcIiwgXCJOb3ZcIiwgXCJEZWNcIl07XG52YXIgbW9udGhzTmFycm93ID0gW1wiSlwiLCBcIkZcIiwgXCJNXCIsIFwiQVwiLCBcIk1cIiwgXCJKXCIsIFwiSlwiLCBcIkFcIiwgXCJTXCIsIFwiT1wiLCBcIk5cIiwgXCJEXCJdO1xuZnVuY3Rpb24gbW9udGhzKGxlbmd0aCkge1xuICBzd2l0Y2ggKGxlbmd0aCkge1xuICAgIGNhc2UgXCJuYXJyb3dcIjpcbiAgICAgIHJldHVybiBbXS5jb25jYXQobW9udGhzTmFycm93KTtcblxuICAgIGNhc2UgXCJzaG9ydFwiOlxuICAgICAgcmV0dXJuIFtdLmNvbmNhdChtb250aHNTaG9ydCk7XG5cbiAgICBjYXNlIFwibG9uZ1wiOlxuICAgICAgcmV0dXJuIFtdLmNvbmNhdChtb250aHNMb25nKTtcblxuICAgIGNhc2UgXCJudW1lcmljXCI6XG4gICAgICByZXR1cm4gW1wiMVwiLCBcIjJcIiwgXCIzXCIsIFwiNFwiLCBcIjVcIiwgXCI2XCIsIFwiN1wiLCBcIjhcIiwgXCI5XCIsIFwiMTBcIiwgXCIxMVwiLCBcIjEyXCJdO1xuXG4gICAgY2FzZSBcIjItZGlnaXRcIjpcbiAgICAgIHJldHVybiBbXCIwMVwiLCBcIjAyXCIsIFwiMDNcIiwgXCIwNFwiLCBcIjA1XCIsIFwiMDZcIiwgXCIwN1wiLCBcIjA4XCIsIFwiMDlcIiwgXCIxMFwiLCBcIjExXCIsIFwiMTJcIl07XG5cbiAgICBkZWZhdWx0OlxuICAgICAgcmV0dXJuIG51bGw7XG4gIH1cbn1cbnZhciB3ZWVrZGF5c0xvbmcgPSBbXCJNb25kYXlcIiwgXCJUdWVzZGF5XCIsIFwiV2VkbmVzZGF5XCIsIFwiVGh1cnNkYXlcIiwgXCJGcmlkYXlcIiwgXCJTYXR1cmRheVwiLCBcIlN1bmRheVwiXTtcbnZhciB3ZWVrZGF5c1Nob3J0ID0gW1wiTW9uXCIsIFwiVHVlXCIsIFwiV2VkXCIsIFwiVGh1XCIsIFwiRnJpXCIsIFwiU2F0XCIsIFwiU3VuXCJdO1xudmFyIHdlZWtkYXlzTmFycm93ID0gW1wiTVwiLCBcIlRcIiwgXCJXXCIsIFwiVFwiLCBcIkZcIiwgXCJTXCIsIFwiU1wiXTtcbmZ1bmN0aW9uIHdlZWtkYXlzKGxlbmd0aCkge1xuICBzd2l0Y2ggKGxlbmd0aCkge1xuICAgIGNhc2UgXCJuYXJyb3dcIjpcbiAgICAgIHJldHVybiBbXS5jb25jYXQod2Vla2RheXNOYXJyb3cpO1xuXG4gICAgY2FzZSBcInNob3J0XCI6XG4gICAgICByZXR1cm4gW10uY29uY2F0KHdlZWtkYXlzU2hvcnQpO1xuXG4gICAgY2FzZSBcImxvbmdcIjpcbiAgICAgIHJldHVybiBbXS5jb25jYXQod2Vla2RheXNMb25nKTtcblxuICAgIGNhc2UgXCJudW1lcmljXCI6XG4gICAgICByZXR1cm4gW1wiMVwiLCBcIjJcIiwgXCIzXCIsIFwiNFwiLCBcIjVcIiwgXCI2XCIsIFwiN1wiXTtcblxuICAgIGRlZmF1bHQ6XG4gICAgICByZXR1cm4gbnVsbDtcbiAgfVxufVxudmFyIG1lcmlkaWVtcyA9IFtcIkFNXCIsIFwiUE1cIl07XG52YXIgZXJhc0xvbmcgPSBbXCJCZWZvcmUgQ2hyaXN0XCIsIFwiQW5ubyBEb21pbmlcIl07XG52YXIgZXJhc1Nob3J0ID0gW1wiQkNcIiwgXCJBRFwiXTtcbnZhciBlcmFzTmFycm93ID0gW1wiQlwiLCBcIkFcIl07XG5mdW5jdGlvbiBlcmFzKGxlbmd0aCkge1xuICBzd2l0Y2ggKGxlbmd0aCkge1xuICAgIGNhc2UgXCJuYXJyb3dcIjpcbiAgICAgIHJldHVybiBbXS5jb25jYXQoZXJhc05hcnJvdyk7XG5cbiAgICBjYXNlIFwic2hvcnRcIjpcbiAgICAgIHJldHVybiBbXS5jb25jYXQoZXJhc1Nob3J0KTtcblxuICAgIGNhc2UgXCJsb25nXCI6XG4gICAgICByZXR1cm4gW10uY29uY2F0KGVyYXNMb25nKTtcblxuICAgIGRlZmF1bHQ6XG4gICAgICByZXR1cm4gbnVsbDtcbiAgfVxufVxuZnVuY3Rpb24gbWVyaWRpZW1Gb3JEYXRlVGltZShkdCkge1xuICByZXR1cm4gbWVyaWRpZW1zW2R0LmhvdXIgPCAxMiA/IDAgOiAxXTtcbn1cbmZ1bmN0aW9uIHdlZWtkYXlGb3JEYXRlVGltZShkdCwgbGVuZ3RoKSB7XG4gIHJldHVybiB3ZWVrZGF5cyhsZW5ndGgpW2R0LndlZWtkYXkgLSAxXTtcbn1cbmZ1bmN0aW9uIG1vbnRoRm9yRGF0ZVRpbWUoZHQsIGxlbmd0aCkge1xuICByZXR1cm4gbW9udGhzKGxlbmd0aClbZHQubW9udGggLSAxXTtcbn1cbmZ1bmN0aW9uIGVyYUZvckRhdGVUaW1lKGR0LCBsZW5ndGgpIHtcbiAgcmV0dXJuIGVyYXMobGVuZ3RoKVtkdC55ZWFyIDwgMCA/IDAgOiAxXTtcbn1cbmZ1bmN0aW9uIGZvcm1hdFJlbGF0aXZlVGltZSh1bml0LCBjb3VudCwgbnVtZXJpYywgbmFycm93KSB7XG4gIGlmIChudW1lcmljID09PSB2b2lkIDApIHtcbiAgICBudW1lcmljID0gXCJhbHdheXNcIjtcbiAgfVxuXG4gIGlmIChuYXJyb3cgPT09IHZvaWQgMCkge1xuICAgIG5hcnJvdyA9IGZhbHNlO1xuICB9XG5cbiAgdmFyIHVuaXRzID0ge1xuICAgIHllYXJzOiBbXCJ5ZWFyXCIsIFwieXIuXCJdLFxuICAgIHF1YXJ0ZXJzOiBbXCJxdWFydGVyXCIsIFwicXRyLlwiXSxcbiAgICBtb250aHM6IFtcIm1vbnRoXCIsIFwibW8uXCJdLFxuICAgIHdlZWtzOiBbXCJ3ZWVrXCIsIFwid2suXCJdLFxuICAgIGRheXM6IFtcImRheVwiLCBcImRheVwiLCBcImRheXNcIl0sXG4gICAgaG91cnM6IFtcImhvdXJcIiwgXCJoci5cIl0sXG4gICAgbWludXRlczogW1wibWludXRlXCIsIFwibWluLlwiXSxcbiAgICBzZWNvbmRzOiBbXCJzZWNvbmRcIiwgXCJzZWMuXCJdXG4gIH07XG4gIHZhciBsYXN0YWJsZSA9IFtcImhvdXJzXCIsIFwibWludXRlc1wiLCBcInNlY29uZHNcIl0uaW5kZXhPZih1bml0KSA9PT0gLTE7XG5cbiAgaWYgKG51bWVyaWMgPT09IFwiYXV0b1wiICYmIGxhc3RhYmxlKSB7XG4gICAgdmFyIGlzRGF5ID0gdW5pdCA9PT0gXCJkYXlzXCI7XG5cbiAgICBzd2l0Y2ggKGNvdW50KSB7XG4gICAgICBjYXNlIDE6XG4gICAgICAgIHJldHVybiBpc0RheSA/IFwidG9tb3Jyb3dcIiA6IFwibmV4dCBcIiArIHVuaXRzW3VuaXRdWzBdO1xuXG4gICAgICBjYXNlIC0xOlxuICAgICAgICByZXR1cm4gaXNEYXkgPyBcInllc3RlcmRheVwiIDogXCJsYXN0IFwiICsgdW5pdHNbdW5pdF1bMF07XG5cbiAgICAgIGNhc2UgMDpcbiAgICAgICAgcmV0dXJuIGlzRGF5ID8gXCJ0b2RheVwiIDogXCJ0aGlzIFwiICsgdW5pdHNbdW5pdF1bMF07XG5cbiAgICB9XG4gIH1cblxuICB2YXIgaXNJblBhc3QgPSBPYmplY3QuaXMoY291bnQsIC0wKSB8fCBjb3VudCA8IDAsXG4gICAgICBmbXRWYWx1ZSA9IE1hdGguYWJzKGNvdW50KSxcbiAgICAgIHNpbmd1bGFyID0gZm10VmFsdWUgPT09IDEsXG4gICAgICBsaWxVbml0cyA9IHVuaXRzW3VuaXRdLFxuICAgICAgZm10VW5pdCA9IG5hcnJvdyA/IHNpbmd1bGFyID8gbGlsVW5pdHNbMV0gOiBsaWxVbml0c1syXSB8fCBsaWxVbml0c1sxXSA6IHNpbmd1bGFyID8gdW5pdHNbdW5pdF1bMF0gOiB1bml0O1xuICByZXR1cm4gaXNJblBhc3QgPyBmbXRWYWx1ZSArIFwiIFwiICsgZm10VW5pdCArIFwiIGFnb1wiIDogXCJpbiBcIiArIGZtdFZhbHVlICsgXCIgXCIgKyBmbXRVbml0O1xufVxuXG5mdW5jdGlvbiBzdHJpbmdpZnlUb2tlbnMoc3BsaXRzLCB0b2tlblRvU3RyaW5nKSB7XG4gIHZhciBzID0gXCJcIjtcblxuICBmb3IgKHZhciBfaXRlcmF0b3IgPSBfY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlckxvb3NlKHNwbGl0cyksIF9zdGVwOyAhKF9zdGVwID0gX2l0ZXJhdG9yKCkpLmRvbmU7KSB7XG4gICAgdmFyIHRva2VuID0gX3N0ZXAudmFsdWU7XG5cbiAgICBpZiAodG9rZW4ubGl0ZXJhbCkge1xuICAgICAgcyArPSB0b2tlbi52YWw7XG4gICAgfSBlbHNlIHtcbiAgICAgIHMgKz0gdG9rZW5Ub1N0cmluZyh0b2tlbi52YWwpO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiBzO1xufVxuXG52YXIgX21hY3JvVG9rZW5Ub0Zvcm1hdE9wdHMgPSB7XG4gIEQ6IERBVEVfU0hPUlQsXG4gIEREOiBEQVRFX01FRCxcbiAgREREOiBEQVRFX0ZVTEwsXG4gIEREREQ6IERBVEVfSFVHRSxcbiAgdDogVElNRV9TSU1QTEUsXG4gIHR0OiBUSU1FX1dJVEhfU0VDT05EUyxcbiAgdHR0OiBUSU1FX1dJVEhfU0hPUlRfT0ZGU0VULFxuICB0dHR0OiBUSU1FX1dJVEhfTE9OR19PRkZTRVQsXG4gIFQ6IFRJTUVfMjRfU0lNUExFLFxuICBUVDogVElNRV8yNF9XSVRIX1NFQ09ORFMsXG4gIFRUVDogVElNRV8yNF9XSVRIX1NIT1JUX09GRlNFVCxcbiAgVFRUVDogVElNRV8yNF9XSVRIX0xPTkdfT0ZGU0VULFxuICBmOiBEQVRFVElNRV9TSE9SVCxcbiAgZmY6IERBVEVUSU1FX01FRCxcbiAgZmZmOiBEQVRFVElNRV9GVUxMLFxuICBmZmZmOiBEQVRFVElNRV9IVUdFLFxuICBGOiBEQVRFVElNRV9TSE9SVF9XSVRIX1NFQ09ORFMsXG4gIEZGOiBEQVRFVElNRV9NRURfV0lUSF9TRUNPTkRTLFxuICBGRkY6IERBVEVUSU1FX0ZVTExfV0lUSF9TRUNPTkRTLFxuICBGRkZGOiBEQVRFVElNRV9IVUdFX1dJVEhfU0VDT05EU1xufTtcbi8qKlxuICogQHByaXZhdGVcbiAqL1xuXG52YXIgRm9ybWF0dGVyID0gLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHtcbiAgRm9ybWF0dGVyLmNyZWF0ZSA9IGZ1bmN0aW9uIGNyZWF0ZShsb2NhbGUsIG9wdHMpIHtcbiAgICBpZiAob3B0cyA9PT0gdm9pZCAwKSB7XG4gICAgICBvcHRzID0ge307XG4gICAgfVxuXG4gICAgcmV0dXJuIG5ldyBGb3JtYXR0ZXIobG9jYWxlLCBvcHRzKTtcbiAgfTtcblxuICBGb3JtYXR0ZXIucGFyc2VGb3JtYXQgPSBmdW5jdGlvbiBwYXJzZUZvcm1hdChmbXQpIHtcbiAgICB2YXIgY3VycmVudCA9IG51bGwsXG4gICAgICAgIGN1cnJlbnRGdWxsID0gXCJcIixcbiAgICAgICAgYnJhY2tldGVkID0gZmFsc2U7XG4gICAgdmFyIHNwbGl0cyA9IFtdO1xuXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBmbXQubGVuZ3RoOyBpKyspIHtcbiAgICAgIHZhciBjID0gZm10LmNoYXJBdChpKTtcblxuICAgICAgaWYgKGMgPT09IFwiJ1wiKSB7XG4gICAgICAgIGlmIChjdXJyZW50RnVsbC5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgc3BsaXRzLnB1c2goe1xuICAgICAgICAgICAgbGl0ZXJhbDogYnJhY2tldGVkLFxuICAgICAgICAgICAgdmFsOiBjdXJyZW50RnVsbFxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgY3VycmVudCA9IG51bGw7XG4gICAgICAgIGN1cnJlbnRGdWxsID0gXCJcIjtcbiAgICAgICAgYnJhY2tldGVkID0gIWJyYWNrZXRlZDtcbiAgICAgIH0gZWxzZSBpZiAoYnJhY2tldGVkKSB7XG4gICAgICAgIGN1cnJlbnRGdWxsICs9IGM7XG4gICAgICB9IGVsc2UgaWYgKGMgPT09IGN1cnJlbnQpIHtcbiAgICAgICAgY3VycmVudEZ1bGwgKz0gYztcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGlmIChjdXJyZW50RnVsbC5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgc3BsaXRzLnB1c2goe1xuICAgICAgICAgICAgbGl0ZXJhbDogZmFsc2UsXG4gICAgICAgICAgICB2YWw6IGN1cnJlbnRGdWxsXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICBjdXJyZW50RnVsbCA9IGM7XG4gICAgICAgIGN1cnJlbnQgPSBjO1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChjdXJyZW50RnVsbC5sZW5ndGggPiAwKSB7XG4gICAgICBzcGxpdHMucHVzaCh7XG4gICAgICAgIGxpdGVyYWw6IGJyYWNrZXRlZCxcbiAgICAgICAgdmFsOiBjdXJyZW50RnVsbFxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHNwbGl0cztcbiAgfTtcblxuICBGb3JtYXR0ZXIubWFjcm9Ub2tlblRvRm9ybWF0T3B0cyA9IGZ1bmN0aW9uIG1hY3JvVG9rZW5Ub0Zvcm1hdE9wdHModG9rZW4pIHtcbiAgICByZXR1cm4gX21hY3JvVG9rZW5Ub0Zvcm1hdE9wdHNbdG9rZW5dO1xuICB9O1xuXG4gIGZ1bmN0aW9uIEZvcm1hdHRlcihsb2NhbGUsIGZvcm1hdE9wdHMpIHtcbiAgICB0aGlzLm9wdHMgPSBmb3JtYXRPcHRzO1xuICAgIHRoaXMubG9jID0gbG9jYWxlO1xuICAgIHRoaXMuc3lzdGVtTG9jID0gbnVsbDtcbiAgfVxuXG4gIHZhciBfcHJvdG8gPSBGb3JtYXR0ZXIucHJvdG90eXBlO1xuXG4gIF9wcm90by5mb3JtYXRXaXRoU3lzdGVtRGVmYXVsdCA9IGZ1bmN0aW9uIGZvcm1hdFdpdGhTeXN0ZW1EZWZhdWx0KGR0LCBvcHRzKSB7XG4gICAgaWYgKHRoaXMuc3lzdGVtTG9jID09PSBudWxsKSB7XG4gICAgICB0aGlzLnN5c3RlbUxvYyA9IHRoaXMubG9jLnJlZGVmYXVsdFRvU3lzdGVtKCk7XG4gICAgfVxuXG4gICAgdmFyIGRmID0gdGhpcy5zeXN0ZW1Mb2MuZHRGb3JtYXR0ZXIoZHQsIF9leHRlbmRzKHt9LCB0aGlzLm9wdHMsIG9wdHMpKTtcbiAgICByZXR1cm4gZGYuZm9ybWF0KCk7XG4gIH07XG5cbiAgX3Byb3RvLmZvcm1hdERhdGVUaW1lID0gZnVuY3Rpb24gZm9ybWF0RGF0ZVRpbWUoZHQsIG9wdHMpIHtcbiAgICBpZiAob3B0cyA9PT0gdm9pZCAwKSB7XG4gICAgICBvcHRzID0ge307XG4gICAgfVxuXG4gICAgdmFyIGRmID0gdGhpcy5sb2MuZHRGb3JtYXR0ZXIoZHQsIF9leHRlbmRzKHt9LCB0aGlzLm9wdHMsIG9wdHMpKTtcbiAgICByZXR1cm4gZGYuZm9ybWF0KCk7XG4gIH07XG5cbiAgX3Byb3RvLmZvcm1hdERhdGVUaW1lUGFydHMgPSBmdW5jdGlvbiBmb3JtYXREYXRlVGltZVBhcnRzKGR0LCBvcHRzKSB7XG4gICAgaWYgKG9wdHMgPT09IHZvaWQgMCkge1xuICAgICAgb3B0cyA9IHt9O1xuICAgIH1cblxuICAgIHZhciBkZiA9IHRoaXMubG9jLmR0Rm9ybWF0dGVyKGR0LCBfZXh0ZW5kcyh7fSwgdGhpcy5vcHRzLCBvcHRzKSk7XG4gICAgcmV0dXJuIGRmLmZvcm1hdFRvUGFydHMoKTtcbiAgfTtcblxuICBfcHJvdG8ucmVzb2x2ZWRPcHRpb25zID0gZnVuY3Rpb24gcmVzb2x2ZWRPcHRpb25zKGR0LCBvcHRzKSB7XG4gICAgaWYgKG9wdHMgPT09IHZvaWQgMCkge1xuICAgICAgb3B0cyA9IHt9O1xuICAgIH1cblxuICAgIHZhciBkZiA9IHRoaXMubG9jLmR0Rm9ybWF0dGVyKGR0LCBfZXh0ZW5kcyh7fSwgdGhpcy5vcHRzLCBvcHRzKSk7XG4gICAgcmV0dXJuIGRmLnJlc29sdmVkT3B0aW9ucygpO1xuICB9O1xuXG4gIF9wcm90by5udW0gPSBmdW5jdGlvbiBudW0obiwgcCkge1xuICAgIGlmIChwID09PSB2b2lkIDApIHtcbiAgICAgIHAgPSAwO1xuICAgIH1cblxuICAgIC8vIHdlIGdldCBzb21lIHBlcmYgb3V0IG9mIGRvaW5nIHRoaXMgaGVyZSwgYW5ub3lpbmdseVxuICAgIGlmICh0aGlzLm9wdHMuZm9yY2VTaW1wbGUpIHtcbiAgICAgIHJldHVybiBwYWRTdGFydChuLCBwKTtcbiAgICB9XG5cbiAgICB2YXIgb3B0cyA9IF9leHRlbmRzKHt9LCB0aGlzLm9wdHMpO1xuXG4gICAgaWYgKHAgPiAwKSB7XG4gICAgICBvcHRzLnBhZFRvID0gcDtcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcy5sb2MubnVtYmVyRm9ybWF0dGVyKG9wdHMpLmZvcm1hdChuKTtcbiAgfTtcblxuICBfcHJvdG8uZm9ybWF0RGF0ZVRpbWVGcm9tU3RyaW5nID0gZnVuY3Rpb24gZm9ybWF0RGF0ZVRpbWVGcm9tU3RyaW5nKGR0LCBmbXQpIHtcbiAgICB2YXIgX3RoaXMgPSB0aGlzO1xuXG4gICAgdmFyIGtub3duRW5nbGlzaCA9IHRoaXMubG9jLmxpc3RpbmdNb2RlKCkgPT09IFwiZW5cIixcbiAgICAgICAgdXNlRGF0ZVRpbWVGb3JtYXR0ZXIgPSB0aGlzLmxvYy5vdXRwdXRDYWxlbmRhciAmJiB0aGlzLmxvYy5vdXRwdXRDYWxlbmRhciAhPT0gXCJncmVnb3J5XCIsXG4gICAgICAgIHN0cmluZyA9IGZ1bmN0aW9uIHN0cmluZyhvcHRzLCBleHRyYWN0KSB7XG4gICAgICByZXR1cm4gX3RoaXMubG9jLmV4dHJhY3QoZHQsIG9wdHMsIGV4dHJhY3QpO1xuICAgIH0sXG4gICAgICAgIGZvcm1hdE9mZnNldCA9IGZ1bmN0aW9uIGZvcm1hdE9mZnNldChvcHRzKSB7XG4gICAgICBpZiAoZHQuaXNPZmZzZXRGaXhlZCAmJiBkdC5vZmZzZXQgPT09IDAgJiYgb3B0cy5hbGxvd1opIHtcbiAgICAgICAgcmV0dXJuIFwiWlwiO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gZHQuaXNWYWxpZCA/IGR0LnpvbmUuZm9ybWF0T2Zmc2V0KGR0LnRzLCBvcHRzLmZvcm1hdCkgOiBcIlwiO1xuICAgIH0sXG4gICAgICAgIG1lcmlkaWVtID0gZnVuY3Rpb24gbWVyaWRpZW0oKSB7XG4gICAgICByZXR1cm4ga25vd25FbmdsaXNoID8gbWVyaWRpZW1Gb3JEYXRlVGltZShkdCkgOiBzdHJpbmcoe1xuICAgICAgICBob3VyOiBcIm51bWVyaWNcIixcbiAgICAgICAgaG91ckN5Y2xlOiBcImgxMlwiXG4gICAgICB9LCBcImRheXBlcmlvZFwiKTtcbiAgICB9LFxuICAgICAgICBtb250aCA9IGZ1bmN0aW9uIG1vbnRoKGxlbmd0aCwgc3RhbmRhbG9uZSkge1xuICAgICAgcmV0dXJuIGtub3duRW5nbGlzaCA/IG1vbnRoRm9yRGF0ZVRpbWUoZHQsIGxlbmd0aCkgOiBzdHJpbmcoc3RhbmRhbG9uZSA/IHtcbiAgICAgICAgbW9udGg6IGxlbmd0aFxuICAgICAgfSA6IHtcbiAgICAgICAgbW9udGg6IGxlbmd0aCxcbiAgICAgICAgZGF5OiBcIm51bWVyaWNcIlxuICAgICAgfSwgXCJtb250aFwiKTtcbiAgICB9LFxuICAgICAgICB3ZWVrZGF5ID0gZnVuY3Rpb24gd2Vla2RheShsZW5ndGgsIHN0YW5kYWxvbmUpIHtcbiAgICAgIHJldHVybiBrbm93bkVuZ2xpc2ggPyB3ZWVrZGF5Rm9yRGF0ZVRpbWUoZHQsIGxlbmd0aCkgOiBzdHJpbmcoc3RhbmRhbG9uZSA/IHtcbiAgICAgICAgd2Vla2RheTogbGVuZ3RoXG4gICAgICB9IDoge1xuICAgICAgICB3ZWVrZGF5OiBsZW5ndGgsXG4gICAgICAgIG1vbnRoOiBcImxvbmdcIixcbiAgICAgICAgZGF5OiBcIm51bWVyaWNcIlxuICAgICAgfSwgXCJ3ZWVrZGF5XCIpO1xuICAgIH0sXG4gICAgICAgIG1heWJlTWFjcm8gPSBmdW5jdGlvbiBtYXliZU1hY3JvKHRva2VuKSB7XG4gICAgICB2YXIgZm9ybWF0T3B0cyA9IEZvcm1hdHRlci5tYWNyb1Rva2VuVG9Gb3JtYXRPcHRzKHRva2VuKTtcblxuICAgICAgaWYgKGZvcm1hdE9wdHMpIHtcbiAgICAgICAgcmV0dXJuIF90aGlzLmZvcm1hdFdpdGhTeXN0ZW1EZWZhdWx0KGR0LCBmb3JtYXRPcHRzKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiB0b2tlbjtcbiAgICAgIH1cbiAgICB9LFxuICAgICAgICBlcmEgPSBmdW5jdGlvbiBlcmEobGVuZ3RoKSB7XG4gICAgICByZXR1cm4ga25vd25FbmdsaXNoID8gZXJhRm9yRGF0ZVRpbWUoZHQsIGxlbmd0aCkgOiBzdHJpbmcoe1xuICAgICAgICBlcmE6IGxlbmd0aFxuICAgICAgfSwgXCJlcmFcIik7XG4gICAgfSxcbiAgICAgICAgdG9rZW5Ub1N0cmluZyA9IGZ1bmN0aW9uIHRva2VuVG9TdHJpbmcodG9rZW4pIHtcbiAgICAgIC8vIFdoZXJlIHBvc3NpYmxlOiBodHRwOi8vY2xkci51bmljb2RlLm9yZy90cmFuc2xhdGlvbi9kYXRlLXRpbWUtMS9kYXRlLXRpbWUjVE9DLVN0YW5kYWxvbmUtdnMuLUZvcm1hdC1TdHlsZXNcbiAgICAgIHN3aXRjaCAodG9rZW4pIHtcbiAgICAgICAgLy8gbXNcbiAgICAgICAgY2FzZSBcIlNcIjpcbiAgICAgICAgICByZXR1cm4gX3RoaXMubnVtKGR0Lm1pbGxpc2Vjb25kKTtcblxuICAgICAgICBjYXNlIFwidVwiOiAvLyBmYWxscyB0aHJvdWdoXG5cbiAgICAgICAgY2FzZSBcIlNTU1wiOlxuICAgICAgICAgIHJldHVybiBfdGhpcy5udW0oZHQubWlsbGlzZWNvbmQsIDMpO1xuICAgICAgICAvLyBzZWNvbmRzXG5cbiAgICAgICAgY2FzZSBcInNcIjpcbiAgICAgICAgICByZXR1cm4gX3RoaXMubnVtKGR0LnNlY29uZCk7XG5cbiAgICAgICAgY2FzZSBcInNzXCI6XG4gICAgICAgICAgcmV0dXJuIF90aGlzLm51bShkdC5zZWNvbmQsIDIpO1xuICAgICAgICAvLyBmcmFjdGlvbmFsIHNlY29uZHNcblxuICAgICAgICBjYXNlIFwidXVcIjpcbiAgICAgICAgICByZXR1cm4gX3RoaXMubnVtKE1hdGguZmxvb3IoZHQubWlsbGlzZWNvbmQgLyAxMCksIDIpO1xuXG4gICAgICAgIGNhc2UgXCJ1dXVcIjpcbiAgICAgICAgICByZXR1cm4gX3RoaXMubnVtKE1hdGguZmxvb3IoZHQubWlsbGlzZWNvbmQgLyAxMDApKTtcbiAgICAgICAgLy8gbWludXRlc1xuXG4gICAgICAgIGNhc2UgXCJtXCI6XG4gICAgICAgICAgcmV0dXJuIF90aGlzLm51bShkdC5taW51dGUpO1xuXG4gICAgICAgIGNhc2UgXCJtbVwiOlxuICAgICAgICAgIHJldHVybiBfdGhpcy5udW0oZHQubWludXRlLCAyKTtcbiAgICAgICAgLy8gaG91cnNcblxuICAgICAgICBjYXNlIFwiaFwiOlxuICAgICAgICAgIHJldHVybiBfdGhpcy5udW0oZHQuaG91ciAlIDEyID09PSAwID8gMTIgOiBkdC5ob3VyICUgMTIpO1xuXG4gICAgICAgIGNhc2UgXCJoaFwiOlxuICAgICAgICAgIHJldHVybiBfdGhpcy5udW0oZHQuaG91ciAlIDEyID09PSAwID8gMTIgOiBkdC5ob3VyICUgMTIsIDIpO1xuXG4gICAgICAgIGNhc2UgXCJIXCI6XG4gICAgICAgICAgcmV0dXJuIF90aGlzLm51bShkdC5ob3VyKTtcblxuICAgICAgICBjYXNlIFwiSEhcIjpcbiAgICAgICAgICByZXR1cm4gX3RoaXMubnVtKGR0LmhvdXIsIDIpO1xuICAgICAgICAvLyBvZmZzZXRcblxuICAgICAgICBjYXNlIFwiWlwiOlxuICAgICAgICAgIC8vIGxpa2UgKzZcbiAgICAgICAgICByZXR1cm4gZm9ybWF0T2Zmc2V0KHtcbiAgICAgICAgICAgIGZvcm1hdDogXCJuYXJyb3dcIixcbiAgICAgICAgICAgIGFsbG93WjogX3RoaXMub3B0cy5hbGxvd1pcbiAgICAgICAgICB9KTtcblxuICAgICAgICBjYXNlIFwiWlpcIjpcbiAgICAgICAgICAvLyBsaWtlICswNjowMFxuICAgICAgICAgIHJldHVybiBmb3JtYXRPZmZzZXQoe1xuICAgICAgICAgICAgZm9ybWF0OiBcInNob3J0XCIsXG4gICAgICAgICAgICBhbGxvd1o6IF90aGlzLm9wdHMuYWxsb3daXG4gICAgICAgICAgfSk7XG5cbiAgICAgICAgY2FzZSBcIlpaWlwiOlxuICAgICAgICAgIC8vIGxpa2UgKzA2MDBcbiAgICAgICAgICByZXR1cm4gZm9ybWF0T2Zmc2V0KHtcbiAgICAgICAgICAgIGZvcm1hdDogXCJ0ZWNoaWVcIixcbiAgICAgICAgICAgIGFsbG93WjogX3RoaXMub3B0cy5hbGxvd1pcbiAgICAgICAgICB9KTtcblxuICAgICAgICBjYXNlIFwiWlpaWlwiOlxuICAgICAgICAgIC8vIGxpa2UgRVNUXG4gICAgICAgICAgcmV0dXJuIGR0LnpvbmUub2Zmc2V0TmFtZShkdC50cywge1xuICAgICAgICAgICAgZm9ybWF0OiBcInNob3J0XCIsXG4gICAgICAgICAgICBsb2NhbGU6IF90aGlzLmxvYy5sb2NhbGVcbiAgICAgICAgICB9KTtcblxuICAgICAgICBjYXNlIFwiWlpaWlpcIjpcbiAgICAgICAgICAvLyBsaWtlIEVhc3Rlcm4gU3RhbmRhcmQgVGltZVxuICAgICAgICAgIHJldHVybiBkdC56b25lLm9mZnNldE5hbWUoZHQudHMsIHtcbiAgICAgICAgICAgIGZvcm1hdDogXCJsb25nXCIsXG4gICAgICAgICAgICBsb2NhbGU6IF90aGlzLmxvYy5sb2NhbGVcbiAgICAgICAgICB9KTtcbiAgICAgICAgLy8gem9uZVxuXG4gICAgICAgIGNhc2UgXCJ6XCI6XG4gICAgICAgICAgLy8gbGlrZSBBbWVyaWNhL05ld19Zb3JrXG4gICAgICAgICAgcmV0dXJuIGR0LnpvbmVOYW1lO1xuICAgICAgICAvLyBtZXJpZGllbXNcblxuICAgICAgICBjYXNlIFwiYVwiOlxuICAgICAgICAgIHJldHVybiBtZXJpZGllbSgpO1xuICAgICAgICAvLyBkYXRlc1xuXG4gICAgICAgIGNhc2UgXCJkXCI6XG4gICAgICAgICAgcmV0dXJuIHVzZURhdGVUaW1lRm9ybWF0dGVyID8gc3RyaW5nKHtcbiAgICAgICAgICAgIGRheTogXCJudW1lcmljXCJcbiAgICAgICAgICB9LCBcImRheVwiKSA6IF90aGlzLm51bShkdC5kYXkpO1xuXG4gICAgICAgIGNhc2UgXCJkZFwiOlxuICAgICAgICAgIHJldHVybiB1c2VEYXRlVGltZUZvcm1hdHRlciA/IHN0cmluZyh7XG4gICAgICAgICAgICBkYXk6IFwiMi1kaWdpdFwiXG4gICAgICAgICAgfSwgXCJkYXlcIikgOiBfdGhpcy5udW0oZHQuZGF5LCAyKTtcbiAgICAgICAgLy8gd2Vla2RheXMgLSBzdGFuZGFsb25lXG5cbiAgICAgICAgY2FzZSBcImNcIjpcbiAgICAgICAgICAvLyBsaWtlIDFcbiAgICAgICAgICByZXR1cm4gX3RoaXMubnVtKGR0LndlZWtkYXkpO1xuXG4gICAgICAgIGNhc2UgXCJjY2NcIjpcbiAgICAgICAgICAvLyBsaWtlICdUdWVzJ1xuICAgICAgICAgIHJldHVybiB3ZWVrZGF5KFwic2hvcnRcIiwgdHJ1ZSk7XG5cbiAgICAgICAgY2FzZSBcImNjY2NcIjpcbiAgICAgICAgICAvLyBsaWtlICdUdWVzZGF5J1xuICAgICAgICAgIHJldHVybiB3ZWVrZGF5KFwibG9uZ1wiLCB0cnVlKTtcblxuICAgICAgICBjYXNlIFwiY2NjY2NcIjpcbiAgICAgICAgICAvLyBsaWtlICdUJ1xuICAgICAgICAgIHJldHVybiB3ZWVrZGF5KFwibmFycm93XCIsIHRydWUpO1xuICAgICAgICAvLyB3ZWVrZGF5cyAtIGZvcm1hdFxuXG4gICAgICAgIGNhc2UgXCJFXCI6XG4gICAgICAgICAgLy8gbGlrZSAxXG4gICAgICAgICAgcmV0dXJuIF90aGlzLm51bShkdC53ZWVrZGF5KTtcblxuICAgICAgICBjYXNlIFwiRUVFXCI6XG4gICAgICAgICAgLy8gbGlrZSAnVHVlcydcbiAgICAgICAgICByZXR1cm4gd2Vla2RheShcInNob3J0XCIsIGZhbHNlKTtcblxuICAgICAgICBjYXNlIFwiRUVFRVwiOlxuICAgICAgICAgIC8vIGxpa2UgJ1R1ZXNkYXknXG4gICAgICAgICAgcmV0dXJuIHdlZWtkYXkoXCJsb25nXCIsIGZhbHNlKTtcblxuICAgICAgICBjYXNlIFwiRUVFRUVcIjpcbiAgICAgICAgICAvLyBsaWtlICdUJ1xuICAgICAgICAgIHJldHVybiB3ZWVrZGF5KFwibmFycm93XCIsIGZhbHNlKTtcbiAgICAgICAgLy8gbW9udGhzIC0gc3RhbmRhbG9uZVxuXG4gICAgICAgIGNhc2UgXCJMXCI6XG4gICAgICAgICAgLy8gbGlrZSAxXG4gICAgICAgICAgcmV0dXJuIHVzZURhdGVUaW1lRm9ybWF0dGVyID8gc3RyaW5nKHtcbiAgICAgICAgICAgIG1vbnRoOiBcIm51bWVyaWNcIixcbiAgICAgICAgICAgIGRheTogXCJudW1lcmljXCJcbiAgICAgICAgICB9LCBcIm1vbnRoXCIpIDogX3RoaXMubnVtKGR0Lm1vbnRoKTtcblxuICAgICAgICBjYXNlIFwiTExcIjpcbiAgICAgICAgICAvLyBsaWtlIDAxLCBkb2Vzbid0IHNlZW0gdG8gd29ya1xuICAgICAgICAgIHJldHVybiB1c2VEYXRlVGltZUZvcm1hdHRlciA/IHN0cmluZyh7XG4gICAgICAgICAgICBtb250aDogXCIyLWRpZ2l0XCIsXG4gICAgICAgICAgICBkYXk6IFwibnVtZXJpY1wiXG4gICAgICAgICAgfSwgXCJtb250aFwiKSA6IF90aGlzLm51bShkdC5tb250aCwgMik7XG5cbiAgICAgICAgY2FzZSBcIkxMTFwiOlxuICAgICAgICAgIC8vIGxpa2UgSmFuXG4gICAgICAgICAgcmV0dXJuIG1vbnRoKFwic2hvcnRcIiwgdHJ1ZSk7XG5cbiAgICAgICAgY2FzZSBcIkxMTExcIjpcbiAgICAgICAgICAvLyBsaWtlIEphbnVhcnlcbiAgICAgICAgICByZXR1cm4gbW9udGgoXCJsb25nXCIsIHRydWUpO1xuXG4gICAgICAgIGNhc2UgXCJMTExMTFwiOlxuICAgICAgICAgIC8vIGxpa2UgSlxuICAgICAgICAgIHJldHVybiBtb250aChcIm5hcnJvd1wiLCB0cnVlKTtcbiAgICAgICAgLy8gbW9udGhzIC0gZm9ybWF0XG5cbiAgICAgICAgY2FzZSBcIk1cIjpcbiAgICAgICAgICAvLyBsaWtlIDFcbiAgICAgICAgICByZXR1cm4gdXNlRGF0ZVRpbWVGb3JtYXR0ZXIgPyBzdHJpbmcoe1xuICAgICAgICAgICAgbW9udGg6IFwibnVtZXJpY1wiXG4gICAgICAgICAgfSwgXCJtb250aFwiKSA6IF90aGlzLm51bShkdC5tb250aCk7XG5cbiAgICAgICAgY2FzZSBcIk1NXCI6XG4gICAgICAgICAgLy8gbGlrZSAwMVxuICAgICAgICAgIHJldHVybiB1c2VEYXRlVGltZUZvcm1hdHRlciA/IHN0cmluZyh7XG4gICAgICAgICAgICBtb250aDogXCIyLWRpZ2l0XCJcbiAgICAgICAgICB9LCBcIm1vbnRoXCIpIDogX3RoaXMubnVtKGR0Lm1vbnRoLCAyKTtcblxuICAgICAgICBjYXNlIFwiTU1NXCI6XG4gICAgICAgICAgLy8gbGlrZSBKYW5cbiAgICAgICAgICByZXR1cm4gbW9udGgoXCJzaG9ydFwiLCBmYWxzZSk7XG5cbiAgICAgICAgY2FzZSBcIk1NTU1cIjpcbiAgICAgICAgICAvLyBsaWtlIEphbnVhcnlcbiAgICAgICAgICByZXR1cm4gbW9udGgoXCJsb25nXCIsIGZhbHNlKTtcblxuICAgICAgICBjYXNlIFwiTU1NTU1cIjpcbiAgICAgICAgICAvLyBsaWtlIEpcbiAgICAgICAgICByZXR1cm4gbW9udGgoXCJuYXJyb3dcIiwgZmFsc2UpO1xuICAgICAgICAvLyB5ZWFyc1xuXG4gICAgICAgIGNhc2UgXCJ5XCI6XG4gICAgICAgICAgLy8gbGlrZSAyMDE0XG4gICAgICAgICAgcmV0dXJuIHVzZURhdGVUaW1lRm9ybWF0dGVyID8gc3RyaW5nKHtcbiAgICAgICAgICAgIHllYXI6IFwibnVtZXJpY1wiXG4gICAgICAgICAgfSwgXCJ5ZWFyXCIpIDogX3RoaXMubnVtKGR0LnllYXIpO1xuXG4gICAgICAgIGNhc2UgXCJ5eVwiOlxuICAgICAgICAgIC8vIGxpa2UgMTRcbiAgICAgICAgICByZXR1cm4gdXNlRGF0ZVRpbWVGb3JtYXR0ZXIgPyBzdHJpbmcoe1xuICAgICAgICAgICAgeWVhcjogXCIyLWRpZ2l0XCJcbiAgICAgICAgICB9LCBcInllYXJcIikgOiBfdGhpcy5udW0oZHQueWVhci50b1N0cmluZygpLnNsaWNlKC0yKSwgMik7XG5cbiAgICAgICAgY2FzZSBcInl5eXlcIjpcbiAgICAgICAgICAvLyBsaWtlIDAwMTJcbiAgICAgICAgICByZXR1cm4gdXNlRGF0ZVRpbWVGb3JtYXR0ZXIgPyBzdHJpbmcoe1xuICAgICAgICAgICAgeWVhcjogXCJudW1lcmljXCJcbiAgICAgICAgICB9LCBcInllYXJcIikgOiBfdGhpcy5udW0oZHQueWVhciwgNCk7XG5cbiAgICAgICAgY2FzZSBcInl5eXl5eVwiOlxuICAgICAgICAgIC8vIGxpa2UgMDAwMDEyXG4gICAgICAgICAgcmV0dXJuIHVzZURhdGVUaW1lRm9ybWF0dGVyID8gc3RyaW5nKHtcbiAgICAgICAgICAgIHllYXI6IFwibnVtZXJpY1wiXG4gICAgICAgICAgfSwgXCJ5ZWFyXCIpIDogX3RoaXMubnVtKGR0LnllYXIsIDYpO1xuICAgICAgICAvLyBlcmFzXG5cbiAgICAgICAgY2FzZSBcIkdcIjpcbiAgICAgICAgICAvLyBsaWtlIEFEXG4gICAgICAgICAgcmV0dXJuIGVyYShcInNob3J0XCIpO1xuXG4gICAgICAgIGNhc2UgXCJHR1wiOlxuICAgICAgICAgIC8vIGxpa2UgQW5ubyBEb21pbmlcbiAgICAgICAgICByZXR1cm4gZXJhKFwibG9uZ1wiKTtcblxuICAgICAgICBjYXNlIFwiR0dHR0dcIjpcbiAgICAgICAgICByZXR1cm4gZXJhKFwibmFycm93XCIpO1xuXG4gICAgICAgIGNhc2UgXCJra1wiOlxuICAgICAgICAgIHJldHVybiBfdGhpcy5udW0oZHQud2Vla1llYXIudG9TdHJpbmcoKS5zbGljZSgtMiksIDIpO1xuXG4gICAgICAgIGNhc2UgXCJra2trXCI6XG4gICAgICAgICAgcmV0dXJuIF90aGlzLm51bShkdC53ZWVrWWVhciwgNCk7XG5cbiAgICAgICAgY2FzZSBcIldcIjpcbiAgICAgICAgICByZXR1cm4gX3RoaXMubnVtKGR0LndlZWtOdW1iZXIpO1xuXG4gICAgICAgIGNhc2UgXCJXV1wiOlxuICAgICAgICAgIHJldHVybiBfdGhpcy5udW0oZHQud2Vla051bWJlciwgMik7XG5cbiAgICAgICAgY2FzZSBcIm9cIjpcbiAgICAgICAgICByZXR1cm4gX3RoaXMubnVtKGR0Lm9yZGluYWwpO1xuXG4gICAgICAgIGNhc2UgXCJvb29cIjpcbiAgICAgICAgICByZXR1cm4gX3RoaXMubnVtKGR0Lm9yZGluYWwsIDMpO1xuXG4gICAgICAgIGNhc2UgXCJxXCI6XG4gICAgICAgICAgLy8gbGlrZSAxXG4gICAgICAgICAgcmV0dXJuIF90aGlzLm51bShkdC5xdWFydGVyKTtcblxuICAgICAgICBjYXNlIFwicXFcIjpcbiAgICAgICAgICAvLyBsaWtlIDAxXG4gICAgICAgICAgcmV0dXJuIF90aGlzLm51bShkdC5xdWFydGVyLCAyKTtcblxuICAgICAgICBjYXNlIFwiWFwiOlxuICAgICAgICAgIHJldHVybiBfdGhpcy5udW0oTWF0aC5mbG9vcihkdC50cyAvIDEwMDApKTtcblxuICAgICAgICBjYXNlIFwieFwiOlxuICAgICAgICAgIHJldHVybiBfdGhpcy5udW0oZHQudHMpO1xuXG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgcmV0dXJuIG1heWJlTWFjcm8odG9rZW4pO1xuICAgICAgfVxuICAgIH07XG5cbiAgICByZXR1cm4gc3RyaW5naWZ5VG9rZW5zKEZvcm1hdHRlci5wYXJzZUZvcm1hdChmbXQpLCB0b2tlblRvU3RyaW5nKTtcbiAgfTtcblxuICBfcHJvdG8uZm9ybWF0RHVyYXRpb25Gcm9tU3RyaW5nID0gZnVuY3Rpb24gZm9ybWF0RHVyYXRpb25Gcm9tU3RyaW5nKGR1ciwgZm10KSB7XG4gICAgdmFyIF90aGlzMiA9IHRoaXM7XG5cbiAgICB2YXIgdG9rZW5Ub0ZpZWxkID0gZnVuY3Rpb24gdG9rZW5Ub0ZpZWxkKHRva2VuKSB7XG4gICAgICBzd2l0Y2ggKHRva2VuWzBdKSB7XG4gICAgICAgIGNhc2UgXCJTXCI6XG4gICAgICAgICAgcmV0dXJuIFwibWlsbGlzZWNvbmRcIjtcblxuICAgICAgICBjYXNlIFwic1wiOlxuICAgICAgICAgIHJldHVybiBcInNlY29uZFwiO1xuXG4gICAgICAgIGNhc2UgXCJtXCI6XG4gICAgICAgICAgcmV0dXJuIFwibWludXRlXCI7XG5cbiAgICAgICAgY2FzZSBcImhcIjpcbiAgICAgICAgICByZXR1cm4gXCJob3VyXCI7XG5cbiAgICAgICAgY2FzZSBcImRcIjpcbiAgICAgICAgICByZXR1cm4gXCJkYXlcIjtcblxuICAgICAgICBjYXNlIFwiTVwiOlxuICAgICAgICAgIHJldHVybiBcIm1vbnRoXCI7XG5cbiAgICAgICAgY2FzZSBcInlcIjpcbiAgICAgICAgICByZXR1cm4gXCJ5ZWFyXCI7XG5cbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgIH1cbiAgICB9LFxuICAgICAgICB0b2tlblRvU3RyaW5nID0gZnVuY3Rpb24gdG9rZW5Ub1N0cmluZyhsaWxkdXIpIHtcbiAgICAgIHJldHVybiBmdW5jdGlvbiAodG9rZW4pIHtcbiAgICAgICAgdmFyIG1hcHBlZCA9IHRva2VuVG9GaWVsZCh0b2tlbik7XG5cbiAgICAgICAgaWYgKG1hcHBlZCkge1xuICAgICAgICAgIHJldHVybiBfdGhpczIubnVtKGxpbGR1ci5nZXQobWFwcGVkKSwgdG9rZW4ubGVuZ3RoKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZXR1cm4gdG9rZW47XG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgfSxcbiAgICAgICAgdG9rZW5zID0gRm9ybWF0dGVyLnBhcnNlRm9ybWF0KGZtdCksXG4gICAgICAgIHJlYWxUb2tlbnMgPSB0b2tlbnMucmVkdWNlKGZ1bmN0aW9uIChmb3VuZCwgX3JlZikge1xuICAgICAgdmFyIGxpdGVyYWwgPSBfcmVmLmxpdGVyYWwsXG4gICAgICAgICAgdmFsID0gX3JlZi52YWw7XG4gICAgICByZXR1cm4gbGl0ZXJhbCA/IGZvdW5kIDogZm91bmQuY29uY2F0KHZhbCk7XG4gICAgfSwgW10pLFxuICAgICAgICBjb2xsYXBzZWQgPSBkdXIuc2hpZnRUby5hcHBseShkdXIsIHJlYWxUb2tlbnMubWFwKHRva2VuVG9GaWVsZCkuZmlsdGVyKGZ1bmN0aW9uICh0KSB7XG4gICAgICByZXR1cm4gdDtcbiAgICB9KSk7XG5cbiAgICByZXR1cm4gc3RyaW5naWZ5VG9rZW5zKHRva2VucywgdG9rZW5Ub1N0cmluZyhjb2xsYXBzZWQpKTtcbiAgfTtcblxuICByZXR1cm4gRm9ybWF0dGVyO1xufSgpO1xuXG52YXIgSW52YWxpZCA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7XG4gIGZ1bmN0aW9uIEludmFsaWQocmVhc29uLCBleHBsYW5hdGlvbikge1xuICAgIHRoaXMucmVhc29uID0gcmVhc29uO1xuICAgIHRoaXMuZXhwbGFuYXRpb24gPSBleHBsYW5hdGlvbjtcbiAgfVxuXG4gIHZhciBfcHJvdG8gPSBJbnZhbGlkLnByb3RvdHlwZTtcblxuICBfcHJvdG8udG9NZXNzYWdlID0gZnVuY3Rpb24gdG9NZXNzYWdlKCkge1xuICAgIGlmICh0aGlzLmV4cGxhbmF0aW9uKSB7XG4gICAgICByZXR1cm4gdGhpcy5yZWFzb24gKyBcIjogXCIgKyB0aGlzLmV4cGxhbmF0aW9uO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gdGhpcy5yZWFzb247XG4gICAgfVxuICB9O1xuXG4gIHJldHVybiBJbnZhbGlkO1xufSgpO1xuXG4vKipcbiAqIEBpbnRlcmZhY2VcbiAqL1xuXG52YXIgWm9uZSA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7XG4gIGZ1bmN0aW9uIFpvbmUoKSB7fVxuXG4gIHZhciBfcHJvdG8gPSBab25lLnByb3RvdHlwZTtcblxuICAvKipcbiAgICogUmV0dXJucyB0aGUgb2Zmc2V0J3MgY29tbW9uIG5hbWUgKHN1Y2ggYXMgRVNUKSBhdCB0aGUgc3BlY2lmaWVkIHRpbWVzdGFtcFxuICAgKiBAYWJzdHJhY3RcbiAgICogQHBhcmFtIHtudW1iZXJ9IHRzIC0gRXBvY2ggbWlsbGlzZWNvbmRzIGZvciB3aGljaCB0byBnZXQgdGhlIG5hbWVcbiAgICogQHBhcmFtIHtPYmplY3R9IG9wdHMgLSBPcHRpb25zIHRvIGFmZmVjdCB0aGUgZm9ybWF0XG4gICAqIEBwYXJhbSB7c3RyaW5nfSBvcHRzLmZvcm1hdCAtIFdoYXQgc3R5bGUgb2Ygb2Zmc2V0IHRvIHJldHVybi4gQWNjZXB0cyAnbG9uZycgb3IgJ3Nob3J0Jy5cbiAgICogQHBhcmFtIHtzdHJpbmd9IG9wdHMubG9jYWxlIC0gV2hhdCBsb2NhbGUgdG8gcmV0dXJuIHRoZSBvZmZzZXQgbmFtZSBpbi5cbiAgICogQHJldHVybiB7c3RyaW5nfVxuICAgKi9cbiAgX3Byb3RvLm9mZnNldE5hbWUgPSBmdW5jdGlvbiBvZmZzZXROYW1lKHRzLCBvcHRzKSB7XG4gICAgdGhyb3cgbmV3IFpvbmVJc0Fic3RyYWN0RXJyb3IoKTtcbiAgfVxuICAvKipcbiAgICogUmV0dXJucyB0aGUgb2Zmc2V0J3MgdmFsdWUgYXMgYSBzdHJpbmdcbiAgICogQGFic3RyYWN0XG4gICAqIEBwYXJhbSB7bnVtYmVyfSB0cyAtIEVwb2NoIG1pbGxpc2Vjb25kcyBmb3Igd2hpY2ggdG8gZ2V0IHRoZSBvZmZzZXRcbiAgICogQHBhcmFtIHtzdHJpbmd9IGZvcm1hdCAtIFdoYXQgc3R5bGUgb2Ygb2Zmc2V0IHRvIHJldHVybi5cbiAgICogICAgICAgICAgICAgICAgICAgICAgICAgIEFjY2VwdHMgJ25hcnJvdycsICdzaG9ydCcsIG9yICd0ZWNoaWUnLiBSZXR1cm5pbmcgJys2JywgJyswNjowMCcsIG9yICcrMDYwMCcgcmVzcGVjdGl2ZWx5XG4gICAqIEByZXR1cm4ge3N0cmluZ31cbiAgICovXG4gIDtcblxuICBfcHJvdG8uZm9ybWF0T2Zmc2V0ID0gZnVuY3Rpb24gZm9ybWF0T2Zmc2V0KHRzLCBmb3JtYXQpIHtcbiAgICB0aHJvdyBuZXcgWm9uZUlzQWJzdHJhY3RFcnJvcigpO1xuICB9XG4gIC8qKlxuICAgKiBSZXR1cm4gdGhlIG9mZnNldCBpbiBtaW51dGVzIGZvciB0aGlzIHpvbmUgYXQgdGhlIHNwZWNpZmllZCB0aW1lc3RhbXAuXG4gICAqIEBhYnN0cmFjdFxuICAgKiBAcGFyYW0ge251bWJlcn0gdHMgLSBFcG9jaCBtaWxsaXNlY29uZHMgZm9yIHdoaWNoIHRvIGNvbXB1dGUgdGhlIG9mZnNldFxuICAgKiBAcmV0dXJuIHtudW1iZXJ9XG4gICAqL1xuICA7XG5cbiAgX3Byb3RvLm9mZnNldCA9IGZ1bmN0aW9uIG9mZnNldCh0cykge1xuICAgIHRocm93IG5ldyBab25lSXNBYnN0cmFjdEVycm9yKCk7XG4gIH1cbiAgLyoqXG4gICAqIFJldHVybiB3aGV0aGVyIHRoaXMgWm9uZSBpcyBlcXVhbCB0byBhbm90aGVyIHpvbmVcbiAgICogQGFic3RyYWN0XG4gICAqIEBwYXJhbSB7Wm9uZX0gb3RoZXJab25lIC0gdGhlIHpvbmUgdG8gY29tcGFyZVxuICAgKiBAcmV0dXJuIHtib29sZWFufVxuICAgKi9cbiAgO1xuXG4gIF9wcm90by5lcXVhbHMgPSBmdW5jdGlvbiBlcXVhbHMob3RoZXJab25lKSB7XG4gICAgdGhyb3cgbmV3IFpvbmVJc0Fic3RyYWN0RXJyb3IoKTtcbiAgfVxuICAvKipcbiAgICogUmV0dXJuIHdoZXRoZXIgdGhpcyBab25lIGlzIHZhbGlkLlxuICAgKiBAYWJzdHJhY3RcbiAgICogQHR5cGUge2Jvb2xlYW59XG4gICAqL1xuICA7XG5cbiAgX2NyZWF0ZUNsYXNzKFpvbmUsIFt7XG4gICAga2V5OiBcInR5cGVcIixcbiAgICBnZXQ6XG4gICAgLyoqXG4gICAgICogVGhlIHR5cGUgb2Ygem9uZVxuICAgICAqIEBhYnN0cmFjdFxuICAgICAqIEB0eXBlIHtzdHJpbmd9XG4gICAgICovXG4gICAgZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgdGhyb3cgbmV3IFpvbmVJc0Fic3RyYWN0RXJyb3IoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVGhlIG5hbWUgb2YgdGhpcyB6b25lLlxuICAgICAqIEBhYnN0cmFjdFxuICAgICAqIEB0eXBlIHtzdHJpbmd9XG4gICAgICovXG5cbiAgfSwge1xuICAgIGtleTogXCJuYW1lXCIsXG4gICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICB0aHJvdyBuZXcgWm9uZUlzQWJzdHJhY3RFcnJvcigpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHdoZXRoZXIgdGhlIG9mZnNldCBpcyBrbm93biB0byBiZSBmaXhlZCBmb3IgdGhlIHdob2xlIHllYXIuXG4gICAgICogQGFic3RyYWN0XG4gICAgICogQHR5cGUge2Jvb2xlYW59XG4gICAgICovXG5cbiAgfSwge1xuICAgIGtleTogXCJpc1VuaXZlcnNhbFwiLFxuICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgdGhyb3cgbmV3IFpvbmVJc0Fic3RyYWN0RXJyb3IoKTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwiaXNWYWxpZFwiLFxuICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgdGhyb3cgbmV3IFpvbmVJc0Fic3RyYWN0RXJyb3IoKTtcbiAgICB9XG4gIH1dKTtcblxuICByZXR1cm4gWm9uZTtcbn0oKTtcblxudmFyIHNpbmdsZXRvbiQxID0gbnVsbDtcbi8qKlxuICogUmVwcmVzZW50cyB0aGUgbG9jYWwgem9uZSBmb3IgdGhpcyBKYXZhU2NyaXB0IGVudmlyb25tZW50LlxuICogQGltcGxlbWVudHMge1pvbmV9XG4gKi9cblxudmFyIFN5c3RlbVpvbmUgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKF9ab25lKSB7XG4gIF9pbmhlcml0c0xvb3NlKFN5c3RlbVpvbmUsIF9ab25lKTtcblxuICBmdW5jdGlvbiBTeXN0ZW1ab25lKCkge1xuICAgIHJldHVybiBfWm9uZS5hcHBseSh0aGlzLCBhcmd1bWVudHMpIHx8IHRoaXM7XG4gIH1cblxuICB2YXIgX3Byb3RvID0gU3lzdGVtWm9uZS5wcm90b3R5cGU7XG5cbiAgLyoqIEBvdmVycmlkZSAqKi9cbiAgX3Byb3RvLm9mZnNldE5hbWUgPSBmdW5jdGlvbiBvZmZzZXROYW1lKHRzLCBfcmVmKSB7XG4gICAgdmFyIGZvcm1hdCA9IF9yZWYuZm9ybWF0LFxuICAgICAgICBsb2NhbGUgPSBfcmVmLmxvY2FsZTtcbiAgICByZXR1cm4gcGFyc2Vab25lSW5mbyh0cywgZm9ybWF0LCBsb2NhbGUpO1xuICB9XG4gIC8qKiBAb3ZlcnJpZGUgKiovXG4gIDtcblxuICBfcHJvdG8uZm9ybWF0T2Zmc2V0ID0gZnVuY3Rpb24gZm9ybWF0T2Zmc2V0JDEodHMsIGZvcm1hdCkge1xuICAgIHJldHVybiBmb3JtYXRPZmZzZXQodGhpcy5vZmZzZXQodHMpLCBmb3JtYXQpO1xuICB9XG4gIC8qKiBAb3ZlcnJpZGUgKiovXG4gIDtcblxuICBfcHJvdG8ub2Zmc2V0ID0gZnVuY3Rpb24gb2Zmc2V0KHRzKSB7XG4gICAgcmV0dXJuIC1uZXcgRGF0ZSh0cykuZ2V0VGltZXpvbmVPZmZzZXQoKTtcbiAgfVxuICAvKiogQG92ZXJyaWRlICoqL1xuICA7XG5cbiAgX3Byb3RvLmVxdWFscyA9IGZ1bmN0aW9uIGVxdWFscyhvdGhlclpvbmUpIHtcbiAgICByZXR1cm4gb3RoZXJab25lLnR5cGUgPT09IFwic3lzdGVtXCI7XG4gIH1cbiAgLyoqIEBvdmVycmlkZSAqKi9cbiAgO1xuXG4gIF9jcmVhdGVDbGFzcyhTeXN0ZW1ab25lLCBbe1xuICAgIGtleTogXCJ0eXBlXCIsXG4gICAgZ2V0OlxuICAgIC8qKiBAb3ZlcnJpZGUgKiovXG4gICAgZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgcmV0dXJuIFwic3lzdGVtXCI7XG4gICAgfVxuICAgIC8qKiBAb3ZlcnJpZGUgKiovXG5cbiAgfSwge1xuICAgIGtleTogXCJuYW1lXCIsXG4gICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICByZXR1cm4gbmV3IEludGwuRGF0ZVRpbWVGb3JtYXQoKS5yZXNvbHZlZE9wdGlvbnMoKS50aW1lWm9uZTtcbiAgICB9XG4gICAgLyoqIEBvdmVycmlkZSAqKi9cblxuICB9LCB7XG4gICAga2V5OiBcImlzVW5pdmVyc2FsXCIsXG4gICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcImlzVmFsaWRcIixcbiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgfV0sIFt7XG4gICAga2V5OiBcImluc3RhbmNlXCIsXG4gICAgZ2V0OlxuICAgIC8qKlxuICAgICAqIEdldCBhIHNpbmdsZXRvbiBpbnN0YW5jZSBvZiB0aGUgbG9jYWwgem9uZVxuICAgICAqIEByZXR1cm4ge1N5c3RlbVpvbmV9XG4gICAgICovXG4gICAgZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgaWYgKHNpbmdsZXRvbiQxID09PSBudWxsKSB7XG4gICAgICAgIHNpbmdsZXRvbiQxID0gbmV3IFN5c3RlbVpvbmUoKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHNpbmdsZXRvbiQxO1xuICAgIH1cbiAgfV0pO1xuXG4gIHJldHVybiBTeXN0ZW1ab25lO1xufShab25lKTtcblxudmFyIG1hdGNoaW5nUmVnZXggPSBSZWdFeHAoXCJeXCIgKyBpYW5hUmVnZXguc291cmNlICsgXCIkXCIpO1xudmFyIGR0ZkNhY2hlID0ge307XG5cbmZ1bmN0aW9uIG1ha2VEVEYoem9uZSkge1xuICBpZiAoIWR0ZkNhY2hlW3pvbmVdKSB7XG4gICAgZHRmQ2FjaGVbem9uZV0gPSBuZXcgSW50bC5EYXRlVGltZUZvcm1hdChcImVuLVVTXCIsIHtcbiAgICAgIGhvdXIxMjogZmFsc2UsXG4gICAgICB0aW1lWm9uZTogem9uZSxcbiAgICAgIHllYXI6IFwibnVtZXJpY1wiLFxuICAgICAgbW9udGg6IFwiMi1kaWdpdFwiLFxuICAgICAgZGF5OiBcIjItZGlnaXRcIixcbiAgICAgIGhvdXI6IFwiMi1kaWdpdFwiLFxuICAgICAgbWludXRlOiBcIjItZGlnaXRcIixcbiAgICAgIHNlY29uZDogXCIyLWRpZ2l0XCJcbiAgICB9KTtcbiAgfVxuXG4gIHJldHVybiBkdGZDYWNoZVt6b25lXTtcbn1cblxudmFyIHR5cGVUb1BvcyA9IHtcbiAgeWVhcjogMCxcbiAgbW9udGg6IDEsXG4gIGRheTogMixcbiAgaG91cjogMyxcbiAgbWludXRlOiA0LFxuICBzZWNvbmQ6IDVcbn07XG5cbmZ1bmN0aW9uIGhhY2t5T2Zmc2V0KGR0ZiwgZGF0ZSkge1xuICB2YXIgZm9ybWF0dGVkID0gZHRmLmZvcm1hdChkYXRlKS5yZXBsYWNlKC9cXHUyMDBFL2csIFwiXCIpLFxuICAgICAgcGFyc2VkID0gLyhcXGQrKVxcLyhcXGQrKVxcLyhcXGQrKSw/IChcXGQrKTooXFxkKyk6KFxcZCspLy5leGVjKGZvcm1hdHRlZCksXG4gICAgICBmTW9udGggPSBwYXJzZWRbMV0sXG4gICAgICBmRGF5ID0gcGFyc2VkWzJdLFxuICAgICAgZlllYXIgPSBwYXJzZWRbM10sXG4gICAgICBmSG91ciA9IHBhcnNlZFs0XSxcbiAgICAgIGZNaW51dGUgPSBwYXJzZWRbNV0sXG4gICAgICBmU2Vjb25kID0gcGFyc2VkWzZdO1xuICByZXR1cm4gW2ZZZWFyLCBmTW9udGgsIGZEYXksIGZIb3VyLCBmTWludXRlLCBmU2Vjb25kXTtcbn1cblxuZnVuY3Rpb24gcGFydHNPZmZzZXQoZHRmLCBkYXRlKSB7XG4gIHZhciBmb3JtYXR0ZWQgPSBkdGYuZm9ybWF0VG9QYXJ0cyhkYXRlKSxcbiAgICAgIGZpbGxlZCA9IFtdO1xuXG4gIGZvciAodmFyIGkgPSAwOyBpIDwgZm9ybWF0dGVkLmxlbmd0aDsgaSsrKSB7XG4gICAgdmFyIF9mb3JtYXR0ZWQkaSA9IGZvcm1hdHRlZFtpXSxcbiAgICAgICAgdHlwZSA9IF9mb3JtYXR0ZWQkaS50eXBlLFxuICAgICAgICB2YWx1ZSA9IF9mb3JtYXR0ZWQkaS52YWx1ZSxcbiAgICAgICAgcG9zID0gdHlwZVRvUG9zW3R5cGVdO1xuXG4gICAgaWYgKCFpc1VuZGVmaW5lZChwb3MpKSB7XG4gICAgICBmaWxsZWRbcG9zXSA9IHBhcnNlSW50KHZhbHVlLCAxMCk7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIGZpbGxlZDtcbn1cblxudmFyIGlhbmFab25lQ2FjaGUgPSB7fTtcbi8qKlxuICogQSB6b25lIGlkZW50aWZpZWQgYnkgYW4gSUFOQSBpZGVudGlmaWVyLCBsaWtlIEFtZXJpY2EvTmV3X1lvcmtcbiAqIEBpbXBsZW1lbnRzIHtab25lfVxuICovXG5cbnZhciBJQU5BWm9uZSA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoX1pvbmUpIHtcbiAgX2luaGVyaXRzTG9vc2UoSUFOQVpvbmUsIF9ab25lKTtcblxuICAvKipcbiAgICogQHBhcmFtIHtzdHJpbmd9IG5hbWUgLSBab25lIG5hbWVcbiAgICogQHJldHVybiB7SUFOQVpvbmV9XG4gICAqL1xuICBJQU5BWm9uZS5jcmVhdGUgPSBmdW5jdGlvbiBjcmVhdGUobmFtZSkge1xuICAgIGlmICghaWFuYVpvbmVDYWNoZVtuYW1lXSkge1xuICAgICAgaWFuYVpvbmVDYWNoZVtuYW1lXSA9IG5ldyBJQU5BWm9uZShuYW1lKTtcbiAgICB9XG5cbiAgICByZXR1cm4gaWFuYVpvbmVDYWNoZVtuYW1lXTtcbiAgfVxuICAvKipcbiAgICogUmVzZXQgbG9jYWwgY2FjaGVzLiBTaG91bGQgb25seSBiZSBuZWNlc3NhcnkgaW4gdGVzdGluZyBzY2VuYXJpb3MuXG4gICAqIEByZXR1cm4ge3ZvaWR9XG4gICAqL1xuICA7XG5cbiAgSUFOQVpvbmUucmVzZXRDYWNoZSA9IGZ1bmN0aW9uIHJlc2V0Q2FjaGUoKSB7XG4gICAgaWFuYVpvbmVDYWNoZSA9IHt9O1xuICAgIGR0ZkNhY2hlID0ge307XG4gIH1cbiAgLyoqXG4gICAqIFJldHVybnMgd2hldGhlciB0aGUgcHJvdmlkZWQgc3RyaW5nIGlzIGEgdmFsaWQgc3BlY2lmaWVyLiBUaGlzIG9ubHkgY2hlY2tzIHRoZSBzdHJpbmcncyBmb3JtYXQsIG5vdCB0aGF0IHRoZSBzcGVjaWZpZXIgaWRlbnRpZmllcyBhIGtub3duIHpvbmU7IHNlZSBpc1ZhbGlkWm9uZSBmb3IgdGhhdC5cbiAgICogQHBhcmFtIHtzdHJpbmd9IHMgLSBUaGUgc3RyaW5nIHRvIGNoZWNrIHZhbGlkaXR5IG9uXG4gICAqIEBleGFtcGxlIElBTkFab25lLmlzVmFsaWRTcGVjaWZpZXIoXCJBbWVyaWNhL05ld19Zb3JrXCIpIC8vPT4gdHJ1ZVxuICAgKiBAZXhhbXBsZSBJQU5BWm9uZS5pc1ZhbGlkU3BlY2lmaWVyKFwiRmFudGFzaWEvQ2FzdGxlXCIpIC8vPT4gdHJ1ZVxuICAgKiBAZXhhbXBsZSBJQU5BWm9uZS5pc1ZhbGlkU3BlY2lmaWVyKFwiU3BvcnR+fmJsb3JwXCIpIC8vPT4gZmFsc2VcbiAgICogQHJldHVybiB7Ym9vbGVhbn1cbiAgICovXG4gIDtcblxuICBJQU5BWm9uZS5pc1ZhbGlkU3BlY2lmaWVyID0gZnVuY3Rpb24gaXNWYWxpZFNwZWNpZmllcihzKSB7XG4gICAgcmV0dXJuICEhKHMgJiYgcy5tYXRjaChtYXRjaGluZ1JlZ2V4KSk7XG4gIH1cbiAgLyoqXG4gICAqIFJldHVybnMgd2hldGhlciB0aGUgcHJvdmlkZWQgc3RyaW5nIGlkZW50aWZpZXMgYSByZWFsIHpvbmVcbiAgICogQHBhcmFtIHtzdHJpbmd9IHpvbmUgLSBUaGUgc3RyaW5nIHRvIGNoZWNrXG4gICAqIEBleGFtcGxlIElBTkFab25lLmlzVmFsaWRab25lKFwiQW1lcmljYS9OZXdfWW9ya1wiKSAvLz0+IHRydWVcbiAgICogQGV4YW1wbGUgSUFOQVpvbmUuaXNWYWxpZFpvbmUoXCJGYW50YXNpYS9DYXN0bGVcIikgLy89PiBmYWxzZVxuICAgKiBAZXhhbXBsZSBJQU5BWm9uZS5pc1ZhbGlkWm9uZShcIlNwb3J0fn5ibG9ycFwiKSAvLz0+IGZhbHNlXG4gICAqIEByZXR1cm4ge2Jvb2xlYW59XG4gICAqL1xuICA7XG5cbiAgSUFOQVpvbmUuaXNWYWxpZFpvbmUgPSBmdW5jdGlvbiBpc1ZhbGlkWm9uZSh6b25lKSB7XG4gICAgaWYgKCF6b25lKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgdHJ5IHtcbiAgICAgIG5ldyBJbnRsLkRhdGVUaW1lRm9ybWF0KFwiZW4tVVNcIiwge1xuICAgICAgICB0aW1lWm9uZTogem9uZVxuICAgICAgfSkuZm9ybWF0KCk7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICB9O1xuXG4gIGZ1bmN0aW9uIElBTkFab25lKG5hbWUpIHtcbiAgICB2YXIgX3RoaXM7XG5cbiAgICBfdGhpcyA9IF9ab25lLmNhbGwodGhpcykgfHwgdGhpcztcbiAgICAvKiogQHByaXZhdGUgKiovXG5cbiAgICBfdGhpcy56b25lTmFtZSA9IG5hbWU7XG4gICAgLyoqIEBwcml2YXRlICoqL1xuXG4gICAgX3RoaXMudmFsaWQgPSBJQU5BWm9uZS5pc1ZhbGlkWm9uZShuYW1lKTtcbiAgICByZXR1cm4gX3RoaXM7XG4gIH1cbiAgLyoqIEBvdmVycmlkZSAqKi9cblxuXG4gIHZhciBfcHJvdG8gPSBJQU5BWm9uZS5wcm90b3R5cGU7XG5cbiAgLyoqIEBvdmVycmlkZSAqKi9cbiAgX3Byb3RvLm9mZnNldE5hbWUgPSBmdW5jdGlvbiBvZmZzZXROYW1lKHRzLCBfcmVmKSB7XG4gICAgdmFyIGZvcm1hdCA9IF9yZWYuZm9ybWF0LFxuICAgICAgICBsb2NhbGUgPSBfcmVmLmxvY2FsZTtcbiAgICByZXR1cm4gcGFyc2Vab25lSW5mbyh0cywgZm9ybWF0LCBsb2NhbGUsIHRoaXMubmFtZSk7XG4gIH1cbiAgLyoqIEBvdmVycmlkZSAqKi9cbiAgO1xuXG4gIF9wcm90by5mb3JtYXRPZmZzZXQgPSBmdW5jdGlvbiBmb3JtYXRPZmZzZXQkMSh0cywgZm9ybWF0KSB7XG4gICAgcmV0dXJuIGZvcm1hdE9mZnNldCh0aGlzLm9mZnNldCh0cyksIGZvcm1hdCk7XG4gIH1cbiAgLyoqIEBvdmVycmlkZSAqKi9cbiAgO1xuXG4gIF9wcm90by5vZmZzZXQgPSBmdW5jdGlvbiBvZmZzZXQodHMpIHtcbiAgICB2YXIgZGF0ZSA9IG5ldyBEYXRlKHRzKTtcbiAgICBpZiAoaXNOYU4oZGF0ZSkpIHJldHVybiBOYU47XG5cbiAgICB2YXIgZHRmID0gbWFrZURURih0aGlzLm5hbWUpLFxuICAgICAgICBfcmVmMiA9IGR0Zi5mb3JtYXRUb1BhcnRzID8gcGFydHNPZmZzZXQoZHRmLCBkYXRlKSA6IGhhY2t5T2Zmc2V0KGR0ZiwgZGF0ZSksXG4gICAgICAgIHllYXIgPSBfcmVmMlswXSxcbiAgICAgICAgbW9udGggPSBfcmVmMlsxXSxcbiAgICAgICAgZGF5ID0gX3JlZjJbMl0sXG4gICAgICAgIGhvdXIgPSBfcmVmMlszXSxcbiAgICAgICAgbWludXRlID0gX3JlZjJbNF0sXG4gICAgICAgIHNlY29uZCA9IF9yZWYyWzVdOyAvLyBiZWNhdXNlIHdlJ3JlIHVzaW5nIGhvdXIxMiBhbmQgaHR0cHM6Ly9idWdzLmNocm9taXVtLm9yZy9wL2Nocm9taXVtL2lzc3Vlcy9kZXRhaWw/aWQ9MTAyNTU2NCZjYW49MiZxPSUyMjI0JTNBMDAlMjIlMjBkYXRldGltZWZvcm1hdFxuXG5cbiAgICB2YXIgYWRqdXN0ZWRIb3VyID0gaG91ciA9PT0gMjQgPyAwIDogaG91cjtcbiAgICB2YXIgYXNVVEMgPSBvYmpUb0xvY2FsVFMoe1xuICAgICAgeWVhcjogeWVhcixcbiAgICAgIG1vbnRoOiBtb250aCxcbiAgICAgIGRheTogZGF5LFxuICAgICAgaG91cjogYWRqdXN0ZWRIb3VyLFxuICAgICAgbWludXRlOiBtaW51dGUsXG4gICAgICBzZWNvbmQ6IHNlY29uZCxcbiAgICAgIG1pbGxpc2Vjb25kOiAwXG4gICAgfSk7XG4gICAgdmFyIGFzVFMgPSArZGF0ZTtcbiAgICB2YXIgb3ZlciA9IGFzVFMgJSAxMDAwO1xuICAgIGFzVFMgLT0gb3ZlciA+PSAwID8gb3ZlciA6IDEwMDAgKyBvdmVyO1xuICAgIHJldHVybiAoYXNVVEMgLSBhc1RTKSAvICg2MCAqIDEwMDApO1xuICB9XG4gIC8qKiBAb3ZlcnJpZGUgKiovXG4gIDtcblxuICBfcHJvdG8uZXF1YWxzID0gZnVuY3Rpb24gZXF1YWxzKG90aGVyWm9uZSkge1xuICAgIHJldHVybiBvdGhlclpvbmUudHlwZSA9PT0gXCJpYW5hXCIgJiYgb3RoZXJab25lLm5hbWUgPT09IHRoaXMubmFtZTtcbiAgfVxuICAvKiogQG92ZXJyaWRlICoqL1xuICA7XG5cbiAgX2NyZWF0ZUNsYXNzKElBTkFab25lLCBbe1xuICAgIGtleTogXCJ0eXBlXCIsXG4gICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICByZXR1cm4gXCJpYW5hXCI7XG4gICAgfVxuICAgIC8qKiBAb3ZlcnJpZGUgKiovXG5cbiAgfSwge1xuICAgIGtleTogXCJuYW1lXCIsXG4gICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICByZXR1cm4gdGhpcy56b25lTmFtZTtcbiAgICB9XG4gICAgLyoqIEBvdmVycmlkZSAqKi9cblxuICB9LCB7XG4gICAga2V5OiBcImlzVW5pdmVyc2FsXCIsXG4gICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcImlzVmFsaWRcIixcbiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgIHJldHVybiB0aGlzLnZhbGlkO1xuICAgIH1cbiAgfV0pO1xuXG4gIHJldHVybiBJQU5BWm9uZTtcbn0oWm9uZSk7XG5cbnZhciBzaW5nbGV0b24gPSBudWxsO1xuLyoqXG4gKiBBIHpvbmUgd2l0aCBhIGZpeGVkIG9mZnNldCAobWVhbmluZyBubyBEU1QpXG4gKiBAaW1wbGVtZW50cyB7Wm9uZX1cbiAqL1xuXG52YXIgRml4ZWRPZmZzZXRab25lID0gLyojX19QVVJFX18qL2Z1bmN0aW9uIChfWm9uZSkge1xuICBfaW5oZXJpdHNMb29zZShGaXhlZE9mZnNldFpvbmUsIF9ab25lKTtcblxuICAvKipcbiAgICogR2V0IGFuIGluc3RhbmNlIHdpdGggYSBzcGVjaWZpZWQgb2Zmc2V0XG4gICAqIEBwYXJhbSB7bnVtYmVyfSBvZmZzZXQgLSBUaGUgb2Zmc2V0IGluIG1pbnV0ZXNcbiAgICogQHJldHVybiB7Rml4ZWRPZmZzZXRab25lfVxuICAgKi9cbiAgRml4ZWRPZmZzZXRab25lLmluc3RhbmNlID0gZnVuY3Rpb24gaW5zdGFuY2Uob2Zmc2V0KSB7XG4gICAgcmV0dXJuIG9mZnNldCA9PT0gMCA/IEZpeGVkT2Zmc2V0Wm9uZS51dGNJbnN0YW5jZSA6IG5ldyBGaXhlZE9mZnNldFpvbmUob2Zmc2V0KTtcbiAgfVxuICAvKipcbiAgICogR2V0IGFuIGluc3RhbmNlIG9mIEZpeGVkT2Zmc2V0Wm9uZSBmcm9tIGEgVVRDIG9mZnNldCBzdHJpbmcsIGxpa2UgXCJVVEMrNlwiXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBzIC0gVGhlIG9mZnNldCBzdHJpbmcgdG8gcGFyc2VcbiAgICogQGV4YW1wbGUgRml4ZWRPZmZzZXRab25lLnBhcnNlU3BlY2lmaWVyKFwiVVRDKzZcIilcbiAgICogQGV4YW1wbGUgRml4ZWRPZmZzZXRab25lLnBhcnNlU3BlY2lmaWVyKFwiVVRDKzA2XCIpXG4gICAqIEBleGFtcGxlIEZpeGVkT2Zmc2V0Wm9uZS5wYXJzZVNwZWNpZmllcihcIlVUQy02OjAwXCIpXG4gICAqIEByZXR1cm4ge0ZpeGVkT2Zmc2V0Wm9uZX1cbiAgICovXG4gIDtcblxuICBGaXhlZE9mZnNldFpvbmUucGFyc2VTcGVjaWZpZXIgPSBmdW5jdGlvbiBwYXJzZVNwZWNpZmllcihzKSB7XG4gICAgaWYgKHMpIHtcbiAgICAgIHZhciByID0gcy5tYXRjaCgvXnV0Yyg/OihbKy1dXFxkezEsMn0pKD86OihcXGR7Mn0pKT8pPyQvaSk7XG5cbiAgICAgIGlmIChyKSB7XG4gICAgICAgIHJldHVybiBuZXcgRml4ZWRPZmZzZXRab25lKHNpZ25lZE9mZnNldChyWzFdLCByWzJdKSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIG51bGw7XG4gIH07XG5cbiAgZnVuY3Rpb24gRml4ZWRPZmZzZXRab25lKG9mZnNldCkge1xuICAgIHZhciBfdGhpcztcblxuICAgIF90aGlzID0gX1pvbmUuY2FsbCh0aGlzKSB8fCB0aGlzO1xuICAgIC8qKiBAcHJpdmF0ZSAqKi9cblxuICAgIF90aGlzLmZpeGVkID0gb2Zmc2V0O1xuICAgIHJldHVybiBfdGhpcztcbiAgfVxuICAvKiogQG92ZXJyaWRlICoqL1xuXG5cbiAgdmFyIF9wcm90byA9IEZpeGVkT2Zmc2V0Wm9uZS5wcm90b3R5cGU7XG5cbiAgLyoqIEBvdmVycmlkZSAqKi9cbiAgX3Byb3RvLm9mZnNldE5hbWUgPSBmdW5jdGlvbiBvZmZzZXROYW1lKCkge1xuICAgIHJldHVybiB0aGlzLm5hbWU7XG4gIH1cbiAgLyoqIEBvdmVycmlkZSAqKi9cbiAgO1xuXG4gIF9wcm90by5mb3JtYXRPZmZzZXQgPSBmdW5jdGlvbiBmb3JtYXRPZmZzZXQkMSh0cywgZm9ybWF0KSB7XG4gICAgcmV0dXJuIGZvcm1hdE9mZnNldCh0aGlzLmZpeGVkLCBmb3JtYXQpO1xuICB9XG4gIC8qKiBAb3ZlcnJpZGUgKiovXG4gIDtcblxuICAvKiogQG92ZXJyaWRlICoqL1xuICBfcHJvdG8ub2Zmc2V0ID0gZnVuY3Rpb24gb2Zmc2V0KCkge1xuICAgIHJldHVybiB0aGlzLmZpeGVkO1xuICB9XG4gIC8qKiBAb3ZlcnJpZGUgKiovXG4gIDtcblxuICBfcHJvdG8uZXF1YWxzID0gZnVuY3Rpb24gZXF1YWxzKG90aGVyWm9uZSkge1xuICAgIHJldHVybiBvdGhlclpvbmUudHlwZSA9PT0gXCJmaXhlZFwiICYmIG90aGVyWm9uZS5maXhlZCA9PT0gdGhpcy5maXhlZDtcbiAgfVxuICAvKiogQG92ZXJyaWRlICoqL1xuICA7XG5cbiAgX2NyZWF0ZUNsYXNzKEZpeGVkT2Zmc2V0Wm9uZSwgW3tcbiAgICBrZXk6IFwidHlwZVwiLFxuICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgcmV0dXJuIFwiZml4ZWRcIjtcbiAgICB9XG4gICAgLyoqIEBvdmVycmlkZSAqKi9cblxuICB9LCB7XG4gICAga2V5OiBcIm5hbWVcIixcbiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgIHJldHVybiB0aGlzLmZpeGVkID09PSAwID8gXCJVVENcIiA6IFwiVVRDXCIgKyBmb3JtYXRPZmZzZXQodGhpcy5maXhlZCwgXCJuYXJyb3dcIik7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcImlzVW5pdmVyc2FsXCIsXG4gICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwiaXNWYWxpZFwiLFxuICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICB9XSwgW3tcbiAgICBrZXk6IFwidXRjSW5zdGFuY2VcIixcbiAgICBnZXQ6XG4gICAgLyoqXG4gICAgICogR2V0IGEgc2luZ2xldG9uIGluc3RhbmNlIG9mIFVUQ1xuICAgICAqIEByZXR1cm4ge0ZpeGVkT2Zmc2V0Wm9uZX1cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICBpZiAoc2luZ2xldG9uID09PSBudWxsKSB7XG4gICAgICAgIHNpbmdsZXRvbiA9IG5ldyBGaXhlZE9mZnNldFpvbmUoMCk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBzaW5nbGV0b247XG4gICAgfVxuICB9XSk7XG5cbiAgcmV0dXJuIEZpeGVkT2Zmc2V0Wm9uZTtcbn0oWm9uZSk7XG5cbi8qKlxuICogQSB6b25lIHRoYXQgZmFpbGVkIHRvIHBhcnNlLiBZb3Ugc2hvdWxkIG5ldmVyIG5lZWQgdG8gaW5zdGFudGlhdGUgdGhpcy5cbiAqIEBpbXBsZW1lbnRzIHtab25lfVxuICovXG5cbnZhciBJbnZhbGlkWm9uZSA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoX1pvbmUpIHtcbiAgX2luaGVyaXRzTG9vc2UoSW52YWxpZFpvbmUsIF9ab25lKTtcblxuICBmdW5jdGlvbiBJbnZhbGlkWm9uZSh6b25lTmFtZSkge1xuICAgIHZhciBfdGhpcztcblxuICAgIF90aGlzID0gX1pvbmUuY2FsbCh0aGlzKSB8fCB0aGlzO1xuICAgIC8qKiAgQHByaXZhdGUgKi9cblxuICAgIF90aGlzLnpvbmVOYW1lID0gem9uZU5hbWU7XG4gICAgcmV0dXJuIF90aGlzO1xuICB9XG4gIC8qKiBAb3ZlcnJpZGUgKiovXG5cblxuICB2YXIgX3Byb3RvID0gSW52YWxpZFpvbmUucHJvdG90eXBlO1xuXG4gIC8qKiBAb3ZlcnJpZGUgKiovXG4gIF9wcm90by5vZmZzZXROYW1lID0gZnVuY3Rpb24gb2Zmc2V0TmFtZSgpIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuICAvKiogQG92ZXJyaWRlICoqL1xuICA7XG5cbiAgX3Byb3RvLmZvcm1hdE9mZnNldCA9IGZ1bmN0aW9uIGZvcm1hdE9mZnNldCgpIHtcbiAgICByZXR1cm4gXCJcIjtcbiAgfVxuICAvKiogQG92ZXJyaWRlICoqL1xuICA7XG5cbiAgX3Byb3RvLm9mZnNldCA9IGZ1bmN0aW9uIG9mZnNldCgpIHtcbiAgICByZXR1cm4gTmFOO1xuICB9XG4gIC8qKiBAb3ZlcnJpZGUgKiovXG4gIDtcblxuICBfcHJvdG8uZXF1YWxzID0gZnVuY3Rpb24gZXF1YWxzKCkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICAvKiogQG92ZXJyaWRlICoqL1xuICA7XG5cbiAgX2NyZWF0ZUNsYXNzKEludmFsaWRab25lLCBbe1xuICAgIGtleTogXCJ0eXBlXCIsXG4gICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICByZXR1cm4gXCJpbnZhbGlkXCI7XG4gICAgfVxuICAgIC8qKiBAb3ZlcnJpZGUgKiovXG5cbiAgfSwge1xuICAgIGtleTogXCJuYW1lXCIsXG4gICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICByZXR1cm4gdGhpcy56b25lTmFtZTtcbiAgICB9XG4gICAgLyoqIEBvdmVycmlkZSAqKi9cblxuICB9LCB7XG4gICAga2V5OiBcImlzVW5pdmVyc2FsXCIsXG4gICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcImlzVmFsaWRcIixcbiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gIH1dKTtcblxuICByZXR1cm4gSW52YWxpZFpvbmU7XG59KFpvbmUpO1xuXG4vKipcbiAqIEBwcml2YXRlXG4gKi9cbmZ1bmN0aW9uIG5vcm1hbGl6ZVpvbmUoaW5wdXQsIGRlZmF1bHRab25lKSB7XG5cbiAgaWYgKGlzVW5kZWZpbmVkKGlucHV0KSB8fCBpbnB1dCA9PT0gbnVsbCkge1xuICAgIHJldHVybiBkZWZhdWx0Wm9uZTtcbiAgfSBlbHNlIGlmIChpbnB1dCBpbnN0YW5jZW9mIFpvbmUpIHtcbiAgICByZXR1cm4gaW5wdXQ7XG4gIH0gZWxzZSBpZiAoaXNTdHJpbmcoaW5wdXQpKSB7XG4gICAgdmFyIGxvd2VyZWQgPSBpbnB1dC50b0xvd2VyQ2FzZSgpO1xuICAgIGlmIChsb3dlcmVkID09PSBcImxvY2FsXCIgfHwgbG93ZXJlZCA9PT0gXCJzeXN0ZW1cIikgcmV0dXJuIGRlZmF1bHRab25lO2Vsc2UgaWYgKGxvd2VyZWQgPT09IFwidXRjXCIgfHwgbG93ZXJlZCA9PT0gXCJnbXRcIikgcmV0dXJuIEZpeGVkT2Zmc2V0Wm9uZS51dGNJbnN0YW5jZTtlbHNlIGlmIChJQU5BWm9uZS5pc1ZhbGlkU3BlY2lmaWVyKGxvd2VyZWQpKSByZXR1cm4gSUFOQVpvbmUuY3JlYXRlKGlucHV0KTtlbHNlIHJldHVybiBGaXhlZE9mZnNldFpvbmUucGFyc2VTcGVjaWZpZXIobG93ZXJlZCkgfHwgbmV3IEludmFsaWRab25lKGlucHV0KTtcbiAgfSBlbHNlIGlmIChpc051bWJlcihpbnB1dCkpIHtcbiAgICByZXR1cm4gRml4ZWRPZmZzZXRab25lLmluc3RhbmNlKGlucHV0KTtcbiAgfSBlbHNlIGlmICh0eXBlb2YgaW5wdXQgPT09IFwib2JqZWN0XCIgJiYgaW5wdXQub2Zmc2V0ICYmIHR5cGVvZiBpbnB1dC5vZmZzZXQgPT09IFwibnVtYmVyXCIpIHtcbiAgICAvLyBUaGlzIGlzIGR1bWIsIGJ1dCB0aGUgaW5zdGFuY2VvZiBjaGVjayBhYm92ZSBkb2Vzbid0IHNlZW0gdG8gcmVhbGx5IHdvcmtcbiAgICAvLyBzbyB3ZSdyZSBkdWNrIGNoZWNraW5nIGl0XG4gICAgcmV0dXJuIGlucHV0O1xuICB9IGVsc2Uge1xuICAgIHJldHVybiBuZXcgSW52YWxpZFpvbmUoaW5wdXQpO1xuICB9XG59XG5cbnZhciBub3cgPSBmdW5jdGlvbiBub3coKSB7XG4gIHJldHVybiBEYXRlLm5vdygpO1xufSxcbiAgICBkZWZhdWx0Wm9uZSA9IFwic3lzdGVtXCIsXG4gICAgZGVmYXVsdExvY2FsZSA9IG51bGwsXG4gICAgZGVmYXVsdE51bWJlcmluZ1N5c3RlbSA9IG51bGwsXG4gICAgZGVmYXVsdE91dHB1dENhbGVuZGFyID0gbnVsbCxcbiAgICB0aHJvd09uSW52YWxpZDtcbi8qKlxuICogU2V0dGluZ3MgY29udGFpbnMgc3RhdGljIGdldHRlcnMgYW5kIHNldHRlcnMgdGhhdCBjb250cm9sIEx1eG9uJ3Mgb3ZlcmFsbCBiZWhhdmlvci4gTHV4b24gaXMgYSBzaW1wbGUgbGlicmFyeSB3aXRoIGZldyBvcHRpb25zLCBidXQgdGhlIG9uZXMgaXQgZG9lcyBoYXZlIGxpdmUgaGVyZS5cbiAqL1xuXG5cbnZhciBTZXR0aW5ncyA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7XG4gIGZ1bmN0aW9uIFNldHRpbmdzKCkge31cblxuICAvKipcbiAgICogUmVzZXQgTHV4b24ncyBnbG9iYWwgY2FjaGVzLiBTaG91bGQgb25seSBiZSBuZWNlc3NhcnkgaW4gdGVzdGluZyBzY2VuYXJpb3MuXG4gICAqIEByZXR1cm4ge3ZvaWR9XG4gICAqL1xuICBTZXR0aW5ncy5yZXNldENhY2hlcyA9IGZ1bmN0aW9uIHJlc2V0Q2FjaGVzKCkge1xuICAgIExvY2FsZS5yZXNldENhY2hlKCk7XG4gICAgSUFOQVpvbmUucmVzZXRDYWNoZSgpO1xuICB9O1xuXG4gIF9jcmVhdGVDbGFzcyhTZXR0aW5ncywgbnVsbCwgW3tcbiAgICBrZXk6IFwibm93XCIsXG4gICAgZ2V0OlxuICAgIC8qKlxuICAgICAqIEdldCB0aGUgY2FsbGJhY2sgZm9yIHJldHVybmluZyB0aGUgY3VycmVudCB0aW1lc3RhbXAuXG4gICAgICogQHR5cGUge2Z1bmN0aW9ufVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgIHJldHVybiBub3c7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNldCB0aGUgY2FsbGJhY2sgZm9yIHJldHVybmluZyB0aGUgY3VycmVudCB0aW1lc3RhbXAuXG4gICAgICogVGhlIGZ1bmN0aW9uIHNob3VsZCByZXR1cm4gYSBudW1iZXIsIHdoaWNoIHdpbGwgYmUgaW50ZXJwcmV0ZWQgYXMgYW4gRXBvY2ggbWlsbGlzZWNvbmQgY291bnRcbiAgICAgKiBAdHlwZSB7ZnVuY3Rpb259XG4gICAgICogQGV4YW1wbGUgU2V0dGluZ3Mubm93ID0gKCkgPT4gRGF0ZS5ub3coKSArIDMwMDAgLy8gcHJldGVuZCBpdCBpcyAzIHNlY29uZHMgaW4gdGhlIGZ1dHVyZVxuICAgICAqIEBleGFtcGxlIFNldHRpbmdzLm5vdyA9ICgpID0+IDAgLy8gYWx3YXlzIHByZXRlbmQgaXQncyBKYW4gMSwgMTk3MCBhdCBtaWRuaWdodCBpbiBVVEMgdGltZVxuICAgICAqL1xuICAgICxcbiAgICBzZXQ6IGZ1bmN0aW9uIHNldChuKSB7XG4gICAgICBub3cgPSBuO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTZXQgdGhlIGRlZmF1bHQgdGltZSB6b25lIHRvIGNyZWF0ZSBEYXRlVGltZXMgaW4uIERvZXMgbm90IGFmZmVjdCBleGlzdGluZyBpbnN0YW5jZXMuXG4gICAgICogVXNlIHRoZSB2YWx1ZSBcInN5c3RlbVwiIHRvIHJlc2V0IHRoaXMgdmFsdWUgdG8gdGhlIHN5c3RlbSdzIHRpbWUgem9uZS5cbiAgICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgICAqL1xuXG4gIH0sIHtcbiAgICBrZXk6IFwiZGVmYXVsdFpvbmVcIixcbiAgICBnZXQ6XG4gICAgLyoqXG4gICAgICogR2V0IHRoZSBkZWZhdWx0IHRpbWUgem9uZSBvYmplY3QgY3VycmVudGx5IHVzZWQgdG8gY3JlYXRlIERhdGVUaW1lcy4gRG9lcyBub3QgYWZmZWN0IGV4aXN0aW5nIGluc3RhbmNlcy5cbiAgICAgKiBUaGUgZGVmYXVsdCB2YWx1ZSBpcyB0aGUgc3lzdGVtJ3MgdGltZSB6b25lICh0aGUgb25lIHNldCBvbiB0aGUgbWFjaGluZSB0aGF0IHJ1bnMgdGhpcyBjb2RlKS5cbiAgICAgKiBAdHlwZSB7Wm9uZX1cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICByZXR1cm4gbm9ybWFsaXplWm9uZShkZWZhdWx0Wm9uZSwgU3lzdGVtWm9uZS5pbnN0YW5jZSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEdldCB0aGUgZGVmYXVsdCBsb2NhbGUgdG8gY3JlYXRlIERhdGVUaW1lcyB3aXRoLiBEb2VzIG5vdCBhZmZlY3QgZXhpc3RpbmcgaW5zdGFuY2VzLlxuICAgICAqIEB0eXBlIHtzdHJpbmd9XG4gICAgICovXG4gICAgLFxuICAgIHNldDogZnVuY3Rpb24gc2V0KHpvbmUpIHtcbiAgICAgIGRlZmF1bHRab25lID0gem9uZTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwiZGVmYXVsdExvY2FsZVwiLFxuICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgcmV0dXJuIGRlZmF1bHRMb2NhbGU7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNldCB0aGUgZGVmYXVsdCBsb2NhbGUgdG8gY3JlYXRlIERhdGVUaW1lcyB3aXRoLiBEb2VzIG5vdCBhZmZlY3QgZXhpc3RpbmcgaW5zdGFuY2VzLlxuICAgICAqIEB0eXBlIHtzdHJpbmd9XG4gICAgICovXG4gICAgLFxuICAgIHNldDogZnVuY3Rpb24gc2V0KGxvY2FsZSkge1xuICAgICAgZGVmYXVsdExvY2FsZSA9IGxvY2FsZTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogR2V0IHRoZSBkZWZhdWx0IG51bWJlcmluZyBzeXN0ZW0gdG8gY3JlYXRlIERhdGVUaW1lcyB3aXRoLiBEb2VzIG5vdCBhZmZlY3QgZXhpc3RpbmcgaW5zdGFuY2VzLlxuICAgICAqIEB0eXBlIHtzdHJpbmd9XG4gICAgICovXG5cbiAgfSwge1xuICAgIGtleTogXCJkZWZhdWx0TnVtYmVyaW5nU3lzdGVtXCIsXG4gICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICByZXR1cm4gZGVmYXVsdE51bWJlcmluZ1N5c3RlbTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU2V0IHRoZSBkZWZhdWx0IG51bWJlcmluZyBzeXN0ZW0gdG8gY3JlYXRlIERhdGVUaW1lcyB3aXRoLiBEb2VzIG5vdCBhZmZlY3QgZXhpc3RpbmcgaW5zdGFuY2VzLlxuICAgICAqIEB0eXBlIHtzdHJpbmd9XG4gICAgICovXG4gICAgLFxuICAgIHNldDogZnVuY3Rpb24gc2V0KG51bWJlcmluZ1N5c3RlbSkge1xuICAgICAgZGVmYXVsdE51bWJlcmluZ1N5c3RlbSA9IG51bWJlcmluZ1N5c3RlbTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogR2V0IHRoZSBkZWZhdWx0IG91dHB1dCBjYWxlbmRhciB0byBjcmVhdGUgRGF0ZVRpbWVzIHdpdGguIERvZXMgbm90IGFmZmVjdCBleGlzdGluZyBpbnN0YW5jZXMuXG4gICAgICogQHR5cGUge3N0cmluZ31cbiAgICAgKi9cblxuICB9LCB7XG4gICAga2V5OiBcImRlZmF1bHRPdXRwdXRDYWxlbmRhclwiLFxuICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgcmV0dXJuIGRlZmF1bHRPdXRwdXRDYWxlbmRhcjtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU2V0IHRoZSBkZWZhdWx0IG91dHB1dCBjYWxlbmRhciB0byBjcmVhdGUgRGF0ZVRpbWVzIHdpdGguIERvZXMgbm90IGFmZmVjdCBleGlzdGluZyBpbnN0YW5jZXMuXG4gICAgICogQHR5cGUge3N0cmluZ31cbiAgICAgKi9cbiAgICAsXG4gICAgc2V0OiBmdW5jdGlvbiBzZXQob3V0cHV0Q2FsZW5kYXIpIHtcbiAgICAgIGRlZmF1bHRPdXRwdXRDYWxlbmRhciA9IG91dHB1dENhbGVuZGFyO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBHZXQgd2hldGhlciBMdXhvbiB3aWxsIHRocm93IHdoZW4gaXQgZW5jb3VudGVycyBpbnZhbGlkIERhdGVUaW1lcywgRHVyYXRpb25zLCBvciBJbnRlcnZhbHNcbiAgICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICAgKi9cblxuICB9LCB7XG4gICAga2V5OiBcInRocm93T25JbnZhbGlkXCIsXG4gICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICByZXR1cm4gdGhyb3dPbkludmFsaWQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNldCB3aGV0aGVyIEx1eG9uIHdpbGwgdGhyb3cgd2hlbiBpdCBlbmNvdW50ZXJzIGludmFsaWQgRGF0ZVRpbWVzLCBEdXJhdGlvbnMsIG9yIEludGVydmFsc1xuICAgICAqIEB0eXBlIHtib29sZWFufVxuICAgICAqL1xuICAgICxcbiAgICBzZXQ6IGZ1bmN0aW9uIHNldCh0KSB7XG4gICAgICB0aHJvd09uSW52YWxpZCA9IHQ7XG4gICAgfVxuICB9XSk7XG5cbiAgcmV0dXJuIFNldHRpbmdzO1xufSgpO1xuXG52YXIgX2V4Y2x1ZGVkID0gW1wiYmFzZVwiXSxcbiAgICBfZXhjbHVkZWQyID0gW1wicGFkVG9cIiwgXCJmbG9vclwiXTtcblxudmFyIGludGxMRkNhY2hlID0ge307XG5cbmZ1bmN0aW9uIGdldENhY2hlZExGKGxvY1N0cmluZywgb3B0cykge1xuICBpZiAob3B0cyA9PT0gdm9pZCAwKSB7XG4gICAgb3B0cyA9IHt9O1xuICB9XG5cbiAgdmFyIGtleSA9IEpTT04uc3RyaW5naWZ5KFtsb2NTdHJpbmcsIG9wdHNdKTtcbiAgdmFyIGR0ZiA9IGludGxMRkNhY2hlW2tleV07XG5cbiAgaWYgKCFkdGYpIHtcbiAgICBkdGYgPSBuZXcgSW50bC5MaXN0Rm9ybWF0KGxvY1N0cmluZywgb3B0cyk7XG4gICAgaW50bExGQ2FjaGVba2V5XSA9IGR0ZjtcbiAgfVxuXG4gIHJldHVybiBkdGY7XG59XG5cbnZhciBpbnRsRFRDYWNoZSA9IHt9O1xuXG5mdW5jdGlvbiBnZXRDYWNoZWREVEYobG9jU3RyaW5nLCBvcHRzKSB7XG4gIGlmIChvcHRzID09PSB2b2lkIDApIHtcbiAgICBvcHRzID0ge307XG4gIH1cblxuICB2YXIga2V5ID0gSlNPTi5zdHJpbmdpZnkoW2xvY1N0cmluZywgb3B0c10pO1xuICB2YXIgZHRmID0gaW50bERUQ2FjaGVba2V5XTtcblxuICBpZiAoIWR0Zikge1xuICAgIGR0ZiA9IG5ldyBJbnRsLkRhdGVUaW1lRm9ybWF0KGxvY1N0cmluZywgb3B0cyk7XG4gICAgaW50bERUQ2FjaGVba2V5XSA9IGR0ZjtcbiAgfVxuXG4gIHJldHVybiBkdGY7XG59XG5cbnZhciBpbnRsTnVtQ2FjaGUgPSB7fTtcblxuZnVuY3Rpb24gZ2V0Q2FjaGVkSU5GKGxvY1N0cmluZywgb3B0cykge1xuICBpZiAob3B0cyA9PT0gdm9pZCAwKSB7XG4gICAgb3B0cyA9IHt9O1xuICB9XG5cbiAgdmFyIGtleSA9IEpTT04uc3RyaW5naWZ5KFtsb2NTdHJpbmcsIG9wdHNdKTtcbiAgdmFyIGluZiA9IGludGxOdW1DYWNoZVtrZXldO1xuXG4gIGlmICghaW5mKSB7XG4gICAgaW5mID0gbmV3IEludGwuTnVtYmVyRm9ybWF0KGxvY1N0cmluZywgb3B0cyk7XG4gICAgaW50bE51bUNhY2hlW2tleV0gPSBpbmY7XG4gIH1cblxuICByZXR1cm4gaW5mO1xufVxuXG52YXIgaW50bFJlbENhY2hlID0ge307XG5cbmZ1bmN0aW9uIGdldENhY2hlZFJURihsb2NTdHJpbmcsIG9wdHMpIHtcbiAgaWYgKG9wdHMgPT09IHZvaWQgMCkge1xuICAgIG9wdHMgPSB7fTtcbiAgfVxuXG4gIHZhciBfb3B0cyA9IG9wdHM7XG4gICAgICBfb3B0cy5iYXNlO1xuICAgICAgdmFyIGNhY2hlS2V5T3B0cyA9IF9vYmplY3RXaXRob3V0UHJvcGVydGllc0xvb3NlKF9vcHRzLCBfZXhjbHVkZWQpOyAvLyBleGNsdWRlIGBiYXNlYCBmcm9tIHRoZSBvcHRpb25zXG5cblxuICB2YXIga2V5ID0gSlNPTi5zdHJpbmdpZnkoW2xvY1N0cmluZywgY2FjaGVLZXlPcHRzXSk7XG4gIHZhciBpbmYgPSBpbnRsUmVsQ2FjaGVba2V5XTtcblxuICBpZiAoIWluZikge1xuICAgIGluZiA9IG5ldyBJbnRsLlJlbGF0aXZlVGltZUZvcm1hdChsb2NTdHJpbmcsIG9wdHMpO1xuICAgIGludGxSZWxDYWNoZVtrZXldID0gaW5mO1xuICB9XG5cbiAgcmV0dXJuIGluZjtcbn1cblxudmFyIHN5c0xvY2FsZUNhY2hlID0gbnVsbDtcblxuZnVuY3Rpb24gc3lzdGVtTG9jYWxlKCkge1xuICBpZiAoc3lzTG9jYWxlQ2FjaGUpIHtcbiAgICByZXR1cm4gc3lzTG9jYWxlQ2FjaGU7XG4gIH0gZWxzZSB7XG4gICAgc3lzTG9jYWxlQ2FjaGUgPSBuZXcgSW50bC5EYXRlVGltZUZvcm1hdCgpLnJlc29sdmVkT3B0aW9ucygpLmxvY2FsZTtcbiAgICByZXR1cm4gc3lzTG9jYWxlQ2FjaGU7XG4gIH1cbn1cblxuZnVuY3Rpb24gcGFyc2VMb2NhbGVTdHJpbmcobG9jYWxlU3RyKSB7XG4gIC8vIEkgcmVhbGx5IHdhbnQgdG8gYXZvaWQgd3JpdGluZyBhIEJDUCA0NyBwYXJzZXJcbiAgLy8gc2VlLCBlLmcuIGh0dHBzOi8vZ2l0aHViLmNvbS93b29vcm0vYmNwLTQ3XG4gIC8vIEluc3RlYWQsIHdlJ2xsIGRvIHRoaXM6XG4gIC8vIGEpIGlmIHRoZSBzdHJpbmcgaGFzIG5vIC11IGV4dGVuc2lvbnMsIGp1c3QgbGVhdmUgaXQgYWxvbmVcbiAgLy8gYikgaWYgaXQgZG9lcywgdXNlIEludGwgdG8gcmVzb2x2ZSBldmVyeXRoaW5nXG4gIC8vIGMpIGlmIEludGwgZmFpbHMsIHRyeSBhZ2FpbiB3aXRob3V0IHRoZSAtdVxuICB2YXIgdUluZGV4ID0gbG9jYWxlU3RyLmluZGV4T2YoXCItdS1cIik7XG5cbiAgaWYgKHVJbmRleCA9PT0gLTEpIHtcbiAgICByZXR1cm4gW2xvY2FsZVN0cl07XG4gIH0gZWxzZSB7XG4gICAgdmFyIG9wdGlvbnM7XG4gICAgdmFyIHNtYWxsZXIgPSBsb2NhbGVTdHIuc3Vic3RyaW5nKDAsIHVJbmRleCk7XG5cbiAgICB0cnkge1xuICAgICAgb3B0aW9ucyA9IGdldENhY2hlZERURihsb2NhbGVTdHIpLnJlc29sdmVkT3B0aW9ucygpO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIG9wdGlvbnMgPSBnZXRDYWNoZWREVEYoc21hbGxlcikucmVzb2x2ZWRPcHRpb25zKCk7XG4gICAgfVxuXG4gICAgdmFyIF9vcHRpb25zID0gb3B0aW9ucyxcbiAgICAgICAgbnVtYmVyaW5nU3lzdGVtID0gX29wdGlvbnMubnVtYmVyaW5nU3lzdGVtLFxuICAgICAgICBjYWxlbmRhciA9IF9vcHRpb25zLmNhbGVuZGFyOyAvLyByZXR1cm4gdGhlIHNtYWxsZXIgb25lIHNvIHRoYXQgd2UgY2FuIGFwcGVuZCB0aGUgY2FsZW5kYXIgYW5kIG51bWJlcmluZyBvdmVycmlkZXMgdG8gaXRcblxuICAgIHJldHVybiBbc21hbGxlciwgbnVtYmVyaW5nU3lzdGVtLCBjYWxlbmRhcl07XG4gIH1cbn1cblxuZnVuY3Rpb24gaW50bENvbmZpZ1N0cmluZyhsb2NhbGVTdHIsIG51bWJlcmluZ1N5c3RlbSwgb3V0cHV0Q2FsZW5kYXIpIHtcbiAgaWYgKG91dHB1dENhbGVuZGFyIHx8IG51bWJlcmluZ1N5c3RlbSkge1xuICAgIGxvY2FsZVN0ciArPSBcIi11XCI7XG5cbiAgICBpZiAob3V0cHV0Q2FsZW5kYXIpIHtcbiAgICAgIGxvY2FsZVN0ciArPSBcIi1jYS1cIiArIG91dHB1dENhbGVuZGFyO1xuICAgIH1cblxuICAgIGlmIChudW1iZXJpbmdTeXN0ZW0pIHtcbiAgICAgIGxvY2FsZVN0ciArPSBcIi1udS1cIiArIG51bWJlcmluZ1N5c3RlbTtcbiAgICB9XG5cbiAgICByZXR1cm4gbG9jYWxlU3RyO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiBsb2NhbGVTdHI7XG4gIH1cbn1cblxuZnVuY3Rpb24gbWFwTW9udGhzKGYpIHtcbiAgdmFyIG1zID0gW107XG5cbiAgZm9yICh2YXIgaSA9IDE7IGkgPD0gMTI7IGkrKykge1xuICAgIHZhciBkdCA9IERhdGVUaW1lLnV0YygyMDE2LCBpLCAxKTtcbiAgICBtcy5wdXNoKGYoZHQpKTtcbiAgfVxuXG4gIHJldHVybiBtcztcbn1cblxuZnVuY3Rpb24gbWFwV2Vla2RheXMoZikge1xuICB2YXIgbXMgPSBbXTtcblxuICBmb3IgKHZhciBpID0gMTsgaSA8PSA3OyBpKyspIHtcbiAgICB2YXIgZHQgPSBEYXRlVGltZS51dGMoMjAxNiwgMTEsIDEzICsgaSk7XG4gICAgbXMucHVzaChmKGR0KSk7XG4gIH1cblxuICByZXR1cm4gbXM7XG59XG5cbmZ1bmN0aW9uIGxpc3RTdHVmZihsb2MsIGxlbmd0aCwgZGVmYXVsdE9LLCBlbmdsaXNoRm4sIGludGxGbikge1xuICB2YXIgbW9kZSA9IGxvYy5saXN0aW5nTW9kZShkZWZhdWx0T0spO1xuXG4gIGlmIChtb2RlID09PSBcImVycm9yXCIpIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfSBlbHNlIGlmIChtb2RlID09PSBcImVuXCIpIHtcbiAgICByZXR1cm4gZW5nbGlzaEZuKGxlbmd0aCk7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIGludGxGbihsZW5ndGgpO1xuICB9XG59XG5cbmZ1bmN0aW9uIHN1cHBvcnRzRmFzdE51bWJlcnMobG9jKSB7XG4gIGlmIChsb2MubnVtYmVyaW5nU3lzdGVtICYmIGxvYy5udW1iZXJpbmdTeXN0ZW0gIT09IFwibGF0blwiKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiBsb2MubnVtYmVyaW5nU3lzdGVtID09PSBcImxhdG5cIiB8fCAhbG9jLmxvY2FsZSB8fCBsb2MubG9jYWxlLnN0YXJ0c1dpdGgoXCJlblwiKSB8fCBuZXcgSW50bC5EYXRlVGltZUZvcm1hdChsb2MuaW50bCkucmVzb2x2ZWRPcHRpb25zKCkubnVtYmVyaW5nU3lzdGVtID09PSBcImxhdG5cIjtcbiAgfVxufVxuLyoqXG4gKiBAcHJpdmF0ZVxuICovXG5cblxudmFyIFBvbHlOdW1iZXJGb3JtYXR0ZXIgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkge1xuICBmdW5jdGlvbiBQb2x5TnVtYmVyRm9ybWF0dGVyKGludGwsIGZvcmNlU2ltcGxlLCBvcHRzKSB7XG4gICAgdGhpcy5wYWRUbyA9IG9wdHMucGFkVG8gfHwgMDtcbiAgICB0aGlzLmZsb29yID0gb3B0cy5mbG9vciB8fCBmYWxzZTtcblxuICAgIG9wdHMucGFkVG87XG4gICAgICAgIG9wdHMuZmxvb3I7XG4gICAgICAgIHZhciBvdGhlck9wdHMgPSBfb2JqZWN0V2l0aG91dFByb3BlcnRpZXNMb29zZShvcHRzLCBfZXhjbHVkZWQyKTtcblxuICAgIGlmICghZm9yY2VTaW1wbGUgfHwgT2JqZWN0LmtleXMob3RoZXJPcHRzKS5sZW5ndGggPiAwKSB7XG4gICAgICB2YXIgaW50bE9wdHMgPSBfZXh0ZW5kcyh7XG4gICAgICAgIHVzZUdyb3VwaW5nOiBmYWxzZVxuICAgICAgfSwgb3B0cyk7XG5cbiAgICAgIGlmIChvcHRzLnBhZFRvID4gMCkgaW50bE9wdHMubWluaW11bUludGVnZXJEaWdpdHMgPSBvcHRzLnBhZFRvO1xuICAgICAgdGhpcy5pbmYgPSBnZXRDYWNoZWRJTkYoaW50bCwgaW50bE9wdHMpO1xuICAgIH1cbiAgfVxuXG4gIHZhciBfcHJvdG8gPSBQb2x5TnVtYmVyRm9ybWF0dGVyLnByb3RvdHlwZTtcblxuICBfcHJvdG8uZm9ybWF0ID0gZnVuY3Rpb24gZm9ybWF0KGkpIHtcbiAgICBpZiAodGhpcy5pbmYpIHtcbiAgICAgIHZhciBmaXhlZCA9IHRoaXMuZmxvb3IgPyBNYXRoLmZsb29yKGkpIDogaTtcbiAgICAgIHJldHVybiB0aGlzLmluZi5mb3JtYXQoZml4ZWQpO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyB0byBtYXRjaCB0aGUgYnJvd3NlcidzIG51bWJlcmZvcm1hdHRlciBkZWZhdWx0c1xuICAgICAgdmFyIF9maXhlZCA9IHRoaXMuZmxvb3IgPyBNYXRoLmZsb29yKGkpIDogcm91bmRUbyhpLCAzKTtcblxuICAgICAgcmV0dXJuIHBhZFN0YXJ0KF9maXhlZCwgdGhpcy5wYWRUbyk7XG4gICAgfVxuICB9O1xuXG4gIHJldHVybiBQb2x5TnVtYmVyRm9ybWF0dGVyO1xufSgpO1xuLyoqXG4gKiBAcHJpdmF0ZVxuICovXG5cblxudmFyIFBvbHlEYXRlRm9ybWF0dGVyID0gLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHtcbiAgZnVuY3Rpb24gUG9seURhdGVGb3JtYXR0ZXIoZHQsIGludGwsIG9wdHMpIHtcbiAgICB0aGlzLm9wdHMgPSBvcHRzO1xuICAgIHZhciB6O1xuXG4gICAgaWYgKGR0LnpvbmUuaXNVbml2ZXJzYWwpIHtcbiAgICAgIC8vIFVUQy04IG9yIEV0Yy9VVEMtOCBhcmUgbm90IHBhcnQgb2YgdHpkYXRhLCBvbmx5IEV0Yy9HTVQrOCBhbmQgdGhlIGxpa2UuXG4gICAgICAvLyBUaGF0IGlzIHdoeSBmaXhlZC1vZmZzZXQgVFogaXMgc2V0IHRvIHRoYXQgdW5sZXNzIGl0IGlzOlxuICAgICAgLy8gMS4gUmVwcmVzZW50aW5nIG9mZnNldCAwIHdoZW4gVVRDIGlzIHVzZWQgdG8gbWFpbnRhaW4gcHJldmlvdXMgYmVoYXZpb3IgYW5kIGRvZXMgbm90IGJlY29tZSBHTVQuXG4gICAgICAvLyAyLiBVbnN1cHBvcnRlZCBieSB0aGUgYnJvd3NlcjpcbiAgICAgIC8vICAgIC0gc29tZSBkbyBub3Qgc3VwcG9ydCBFdGMvXG4gICAgICAvLyAgICAtIDwgRXRjL0dNVC0xNCwgPiBFdGMvR01UKzEyLCBhbmQgMzAtbWludXRlIG9yIDQ1LW1pbnV0ZSBvZmZzZXRzIGFyZSBub3QgcGFydCBvZiB0emRhdGFcbiAgICAgIHZhciBnbXRPZmZzZXQgPSAtMSAqIChkdC5vZmZzZXQgLyA2MCk7XG4gICAgICB2YXIgb2Zmc2V0WiA9IGdtdE9mZnNldCA+PSAwID8gXCJFdGMvR01UK1wiICsgZ210T2Zmc2V0IDogXCJFdGMvR01UXCIgKyBnbXRPZmZzZXQ7XG5cbiAgICAgIGlmIChkdC5vZmZzZXQgIT09IDAgJiYgSUFOQVpvbmUuY3JlYXRlKG9mZnNldFopLnZhbGlkKSB7XG4gICAgICAgIHogPSBvZmZzZXRaO1xuICAgICAgICB0aGlzLmR0ID0gZHQ7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBOb3QgYWxsIGZpeGVkLW9mZnNldCB6b25lcyBsaWtlIEV0Yy8rNDozMCBhcmUgcHJlc2VudCBpbiB0emRhdGEuXG4gICAgICAgIC8vIFNvIHdlIGhhdmUgdG8gbWFrZSBkby4gVHdvIGNhc2VzOlxuICAgICAgICAvLyAxLiBUaGUgZm9ybWF0IG9wdGlvbnMgdGVsbCB1cyB0byBzaG93IHRoZSB6b25lLiBXZSBjYW4ndCBkbyB0aGF0LCBzbyB0aGUgYmVzdFxuICAgICAgICAvLyB3ZSBjYW4gZG8gaXMgZm9ybWF0IHRoZSBkYXRlIGluIFVUQy5cbiAgICAgICAgLy8gMi4gVGhlIGZvcm1hdCBvcHRpb25zIGRvbid0IHRlbGwgdXMgdG8gc2hvdyB0aGUgem9uZS4gVGhlbiB3ZSBjYW4gYWRqdXN0IHRoZW1cbiAgICAgICAgLy8gdGhlIHRpbWUgYW5kIHRlbGwgdGhlIGZvcm1hdHRlciB0byBzaG93IGl0IHRvIHVzIGluIFVUQywgc28gdGhhdCB0aGUgdGltZSBpcyByaWdodFxuICAgICAgICAvLyBhbmQgdGhlIGJhZCB6b25lIGRvZXNuJ3Qgc2hvdyB1cC5cbiAgICAgICAgeiA9IFwiVVRDXCI7XG5cbiAgICAgICAgaWYgKG9wdHMudGltZVpvbmVOYW1lKSB7XG4gICAgICAgICAgdGhpcy5kdCA9IGR0O1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRoaXMuZHQgPSBkdC5vZmZzZXQgPT09IDAgPyBkdCA6IERhdGVUaW1lLmZyb21NaWxsaXMoZHQudHMgKyBkdC5vZmZzZXQgKiA2MCAqIDEwMDApO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSBlbHNlIGlmIChkdC56b25lLnR5cGUgPT09IFwic3lzdGVtXCIpIHtcbiAgICAgIHRoaXMuZHQgPSBkdDtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5kdCA9IGR0O1xuICAgICAgeiA9IGR0LnpvbmUubmFtZTtcbiAgICB9XG5cbiAgICB2YXIgaW50bE9wdHMgPSBfZXh0ZW5kcyh7fSwgdGhpcy5vcHRzKTtcblxuICAgIGlmICh6KSB7XG4gICAgICBpbnRsT3B0cy50aW1lWm9uZSA9IHo7XG4gICAgfVxuXG4gICAgdGhpcy5kdGYgPSBnZXRDYWNoZWREVEYoaW50bCwgaW50bE9wdHMpO1xuICB9XG5cbiAgdmFyIF9wcm90bzIgPSBQb2x5RGF0ZUZvcm1hdHRlci5wcm90b3R5cGU7XG5cbiAgX3Byb3RvMi5mb3JtYXQgPSBmdW5jdGlvbiBmb3JtYXQoKSB7XG4gICAgcmV0dXJuIHRoaXMuZHRmLmZvcm1hdCh0aGlzLmR0LnRvSlNEYXRlKCkpO1xuICB9O1xuXG4gIF9wcm90bzIuZm9ybWF0VG9QYXJ0cyA9IGZ1bmN0aW9uIGZvcm1hdFRvUGFydHMoKSB7XG4gICAgcmV0dXJuIHRoaXMuZHRmLmZvcm1hdFRvUGFydHModGhpcy5kdC50b0pTRGF0ZSgpKTtcbiAgfTtcblxuICBfcHJvdG8yLnJlc29sdmVkT3B0aW9ucyA9IGZ1bmN0aW9uIHJlc29sdmVkT3B0aW9ucygpIHtcbiAgICByZXR1cm4gdGhpcy5kdGYucmVzb2x2ZWRPcHRpb25zKCk7XG4gIH07XG5cbiAgcmV0dXJuIFBvbHlEYXRlRm9ybWF0dGVyO1xufSgpO1xuLyoqXG4gKiBAcHJpdmF0ZVxuICovXG5cblxudmFyIFBvbHlSZWxGb3JtYXR0ZXIgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkge1xuICBmdW5jdGlvbiBQb2x5UmVsRm9ybWF0dGVyKGludGwsIGlzRW5nbGlzaCwgb3B0cykge1xuICAgIHRoaXMub3B0cyA9IF9leHRlbmRzKHtcbiAgICAgIHN0eWxlOiBcImxvbmdcIlxuICAgIH0sIG9wdHMpO1xuXG4gICAgaWYgKCFpc0VuZ2xpc2ggJiYgaGFzUmVsYXRpdmUoKSkge1xuICAgICAgdGhpcy5ydGYgPSBnZXRDYWNoZWRSVEYoaW50bCwgb3B0cyk7XG4gICAgfVxuICB9XG5cbiAgdmFyIF9wcm90bzMgPSBQb2x5UmVsRm9ybWF0dGVyLnByb3RvdHlwZTtcblxuICBfcHJvdG8zLmZvcm1hdCA9IGZ1bmN0aW9uIGZvcm1hdChjb3VudCwgdW5pdCkge1xuICAgIGlmICh0aGlzLnJ0Zikge1xuICAgICAgcmV0dXJuIHRoaXMucnRmLmZvcm1hdChjb3VudCwgdW5pdCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBmb3JtYXRSZWxhdGl2ZVRpbWUodW5pdCwgY291bnQsIHRoaXMub3B0cy5udW1lcmljLCB0aGlzLm9wdHMuc3R5bGUgIT09IFwibG9uZ1wiKTtcbiAgICB9XG4gIH07XG5cbiAgX3Byb3RvMy5mb3JtYXRUb1BhcnRzID0gZnVuY3Rpb24gZm9ybWF0VG9QYXJ0cyhjb3VudCwgdW5pdCkge1xuICAgIGlmICh0aGlzLnJ0Zikge1xuICAgICAgcmV0dXJuIHRoaXMucnRmLmZvcm1hdFRvUGFydHMoY291bnQsIHVuaXQpO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gW107XG4gICAgfVxuICB9O1xuXG4gIHJldHVybiBQb2x5UmVsRm9ybWF0dGVyO1xufSgpO1xuLyoqXG4gKiBAcHJpdmF0ZVxuICovXG5cblxudmFyIExvY2FsZSA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7XG4gIExvY2FsZS5mcm9tT3B0cyA9IGZ1bmN0aW9uIGZyb21PcHRzKG9wdHMpIHtcbiAgICByZXR1cm4gTG9jYWxlLmNyZWF0ZShvcHRzLmxvY2FsZSwgb3B0cy5udW1iZXJpbmdTeXN0ZW0sIG9wdHMub3V0cHV0Q2FsZW5kYXIsIG9wdHMuZGVmYXVsdFRvRU4pO1xuICB9O1xuXG4gIExvY2FsZS5jcmVhdGUgPSBmdW5jdGlvbiBjcmVhdGUobG9jYWxlLCBudW1iZXJpbmdTeXN0ZW0sIG91dHB1dENhbGVuZGFyLCBkZWZhdWx0VG9FTikge1xuICAgIGlmIChkZWZhdWx0VG9FTiA9PT0gdm9pZCAwKSB7XG4gICAgICBkZWZhdWx0VG9FTiA9IGZhbHNlO1xuICAgIH1cblxuICAgIHZhciBzcGVjaWZpZWRMb2NhbGUgPSBsb2NhbGUgfHwgU2V0dGluZ3MuZGVmYXVsdExvY2FsZTsgLy8gdGhlIHN5c3RlbSBsb2NhbGUgaXMgdXNlZnVsIGZvciBodW1hbiByZWFkYWJsZSBzdHJpbmdzIGJ1dCBhbm5veWluZyBmb3IgcGFyc2luZy9mb3JtYXR0aW5nIGtub3duIGZvcm1hdHNcblxuICAgIHZhciBsb2NhbGVSID0gc3BlY2lmaWVkTG9jYWxlIHx8IChkZWZhdWx0VG9FTiA/IFwiZW4tVVNcIiA6IHN5c3RlbUxvY2FsZSgpKTtcbiAgICB2YXIgbnVtYmVyaW5nU3lzdGVtUiA9IG51bWJlcmluZ1N5c3RlbSB8fCBTZXR0aW5ncy5kZWZhdWx0TnVtYmVyaW5nU3lzdGVtO1xuICAgIHZhciBvdXRwdXRDYWxlbmRhclIgPSBvdXRwdXRDYWxlbmRhciB8fCBTZXR0aW5ncy5kZWZhdWx0T3V0cHV0Q2FsZW5kYXI7XG4gICAgcmV0dXJuIG5ldyBMb2NhbGUobG9jYWxlUiwgbnVtYmVyaW5nU3lzdGVtUiwgb3V0cHV0Q2FsZW5kYXJSLCBzcGVjaWZpZWRMb2NhbGUpO1xuICB9O1xuXG4gIExvY2FsZS5yZXNldENhY2hlID0gZnVuY3Rpb24gcmVzZXRDYWNoZSgpIHtcbiAgICBzeXNMb2NhbGVDYWNoZSA9IG51bGw7XG4gICAgaW50bERUQ2FjaGUgPSB7fTtcbiAgICBpbnRsTnVtQ2FjaGUgPSB7fTtcbiAgICBpbnRsUmVsQ2FjaGUgPSB7fTtcbiAgfTtcblxuICBMb2NhbGUuZnJvbU9iamVjdCA9IGZ1bmN0aW9uIGZyb21PYmplY3QoX3RlbXApIHtcbiAgICB2YXIgX3JlZiA9IF90ZW1wID09PSB2b2lkIDAgPyB7fSA6IF90ZW1wLFxuICAgICAgICBsb2NhbGUgPSBfcmVmLmxvY2FsZSxcbiAgICAgICAgbnVtYmVyaW5nU3lzdGVtID0gX3JlZi5udW1iZXJpbmdTeXN0ZW0sXG4gICAgICAgIG91dHB1dENhbGVuZGFyID0gX3JlZi5vdXRwdXRDYWxlbmRhcjtcblxuICAgIHJldHVybiBMb2NhbGUuY3JlYXRlKGxvY2FsZSwgbnVtYmVyaW5nU3lzdGVtLCBvdXRwdXRDYWxlbmRhcik7XG4gIH07XG5cbiAgZnVuY3Rpb24gTG9jYWxlKGxvY2FsZSwgbnVtYmVyaW5nLCBvdXRwdXRDYWxlbmRhciwgc3BlY2lmaWVkTG9jYWxlKSB7XG4gICAgdmFyIF9wYXJzZUxvY2FsZVN0cmluZyA9IHBhcnNlTG9jYWxlU3RyaW5nKGxvY2FsZSksXG4gICAgICAgIHBhcnNlZExvY2FsZSA9IF9wYXJzZUxvY2FsZVN0cmluZ1swXSxcbiAgICAgICAgcGFyc2VkTnVtYmVyaW5nU3lzdGVtID0gX3BhcnNlTG9jYWxlU3RyaW5nWzFdLFxuICAgICAgICBwYXJzZWRPdXRwdXRDYWxlbmRhciA9IF9wYXJzZUxvY2FsZVN0cmluZ1syXTtcblxuICAgIHRoaXMubG9jYWxlID0gcGFyc2VkTG9jYWxlO1xuICAgIHRoaXMubnVtYmVyaW5nU3lzdGVtID0gbnVtYmVyaW5nIHx8IHBhcnNlZE51bWJlcmluZ1N5c3RlbSB8fCBudWxsO1xuICAgIHRoaXMub3V0cHV0Q2FsZW5kYXIgPSBvdXRwdXRDYWxlbmRhciB8fCBwYXJzZWRPdXRwdXRDYWxlbmRhciB8fCBudWxsO1xuICAgIHRoaXMuaW50bCA9IGludGxDb25maWdTdHJpbmcodGhpcy5sb2NhbGUsIHRoaXMubnVtYmVyaW5nU3lzdGVtLCB0aGlzLm91dHB1dENhbGVuZGFyKTtcbiAgICB0aGlzLndlZWtkYXlzQ2FjaGUgPSB7XG4gICAgICBmb3JtYXQ6IHt9LFxuICAgICAgc3RhbmRhbG9uZToge31cbiAgICB9O1xuICAgIHRoaXMubW9udGhzQ2FjaGUgPSB7XG4gICAgICBmb3JtYXQ6IHt9LFxuICAgICAgc3RhbmRhbG9uZToge31cbiAgICB9O1xuICAgIHRoaXMubWVyaWRpZW1DYWNoZSA9IG51bGw7XG4gICAgdGhpcy5lcmFDYWNoZSA9IHt9O1xuICAgIHRoaXMuc3BlY2lmaWVkTG9jYWxlID0gc3BlY2lmaWVkTG9jYWxlO1xuICAgIHRoaXMuZmFzdE51bWJlcnNDYWNoZWQgPSBudWxsO1xuICB9XG5cbiAgdmFyIF9wcm90bzQgPSBMb2NhbGUucHJvdG90eXBlO1xuXG4gIF9wcm90bzQubGlzdGluZ01vZGUgPSBmdW5jdGlvbiBsaXN0aW5nTW9kZSgpIHtcbiAgICB2YXIgaXNBY3R1YWxseUVuID0gdGhpcy5pc0VuZ2xpc2goKTtcbiAgICB2YXIgaGFzTm9XZWlyZG5lc3MgPSAodGhpcy5udW1iZXJpbmdTeXN0ZW0gPT09IG51bGwgfHwgdGhpcy5udW1iZXJpbmdTeXN0ZW0gPT09IFwibGF0blwiKSAmJiAodGhpcy5vdXRwdXRDYWxlbmRhciA9PT0gbnVsbCB8fCB0aGlzLm91dHB1dENhbGVuZGFyID09PSBcImdyZWdvcnlcIik7XG4gICAgcmV0dXJuIGlzQWN0dWFsbHlFbiAmJiBoYXNOb1dlaXJkbmVzcyA/IFwiZW5cIiA6IFwiaW50bFwiO1xuICB9O1xuXG4gIF9wcm90bzQuY2xvbmUgPSBmdW5jdGlvbiBjbG9uZShhbHRzKSB7XG4gICAgaWYgKCFhbHRzIHx8IE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKGFsdHMpLmxlbmd0aCA9PT0gMCkge1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBMb2NhbGUuY3JlYXRlKGFsdHMubG9jYWxlIHx8IHRoaXMuc3BlY2lmaWVkTG9jYWxlLCBhbHRzLm51bWJlcmluZ1N5c3RlbSB8fCB0aGlzLm51bWJlcmluZ1N5c3RlbSwgYWx0cy5vdXRwdXRDYWxlbmRhciB8fCB0aGlzLm91dHB1dENhbGVuZGFyLCBhbHRzLmRlZmF1bHRUb0VOIHx8IGZhbHNlKTtcbiAgICB9XG4gIH07XG5cbiAgX3Byb3RvNC5yZWRlZmF1bHRUb0VOID0gZnVuY3Rpb24gcmVkZWZhdWx0VG9FTihhbHRzKSB7XG4gICAgaWYgKGFsdHMgPT09IHZvaWQgMCkge1xuICAgICAgYWx0cyA9IHt9O1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzLmNsb25lKF9leHRlbmRzKHt9LCBhbHRzLCB7XG4gICAgICBkZWZhdWx0VG9FTjogdHJ1ZVxuICAgIH0pKTtcbiAgfTtcblxuICBfcHJvdG80LnJlZGVmYXVsdFRvU3lzdGVtID0gZnVuY3Rpb24gcmVkZWZhdWx0VG9TeXN0ZW0oYWx0cykge1xuICAgIGlmIChhbHRzID09PSB2b2lkIDApIHtcbiAgICAgIGFsdHMgPSB7fTtcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcy5jbG9uZShfZXh0ZW5kcyh7fSwgYWx0cywge1xuICAgICAgZGVmYXVsdFRvRU46IGZhbHNlXG4gICAgfSkpO1xuICB9O1xuXG4gIF9wcm90bzQubW9udGhzID0gZnVuY3Rpb24gbW9udGhzJDEobGVuZ3RoLCBmb3JtYXQsIGRlZmF1bHRPSykge1xuICAgIHZhciBfdGhpcyA9IHRoaXM7XG5cbiAgICBpZiAoZm9ybWF0ID09PSB2b2lkIDApIHtcbiAgICAgIGZvcm1hdCA9IGZhbHNlO1xuICAgIH1cblxuICAgIGlmIChkZWZhdWx0T0sgPT09IHZvaWQgMCkge1xuICAgICAgZGVmYXVsdE9LID0gdHJ1ZTtcbiAgICB9XG5cbiAgICByZXR1cm4gbGlzdFN0dWZmKHRoaXMsIGxlbmd0aCwgZGVmYXVsdE9LLCBtb250aHMsIGZ1bmN0aW9uICgpIHtcbiAgICAgIHZhciBpbnRsID0gZm9ybWF0ID8ge1xuICAgICAgICBtb250aDogbGVuZ3RoLFxuICAgICAgICBkYXk6IFwibnVtZXJpY1wiXG4gICAgICB9IDoge1xuICAgICAgICBtb250aDogbGVuZ3RoXG4gICAgICB9LFxuICAgICAgICAgIGZvcm1hdFN0ciA9IGZvcm1hdCA/IFwiZm9ybWF0XCIgOiBcInN0YW5kYWxvbmVcIjtcblxuICAgICAgaWYgKCFfdGhpcy5tb250aHNDYWNoZVtmb3JtYXRTdHJdW2xlbmd0aF0pIHtcbiAgICAgICAgX3RoaXMubW9udGhzQ2FjaGVbZm9ybWF0U3RyXVtsZW5ndGhdID0gbWFwTW9udGhzKGZ1bmN0aW9uIChkdCkge1xuICAgICAgICAgIHJldHVybiBfdGhpcy5leHRyYWN0KGR0LCBpbnRsLCBcIm1vbnRoXCIpO1xuICAgICAgICB9KTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIF90aGlzLm1vbnRoc0NhY2hlW2Zvcm1hdFN0cl1bbGVuZ3RoXTtcbiAgICB9KTtcbiAgfTtcblxuICBfcHJvdG80LndlZWtkYXlzID0gZnVuY3Rpb24gd2Vla2RheXMkMShsZW5ndGgsIGZvcm1hdCwgZGVmYXVsdE9LKSB7XG4gICAgdmFyIF90aGlzMiA9IHRoaXM7XG5cbiAgICBpZiAoZm9ybWF0ID09PSB2b2lkIDApIHtcbiAgICAgIGZvcm1hdCA9IGZhbHNlO1xuICAgIH1cblxuICAgIGlmIChkZWZhdWx0T0sgPT09IHZvaWQgMCkge1xuICAgICAgZGVmYXVsdE9LID0gdHJ1ZTtcbiAgICB9XG5cbiAgICByZXR1cm4gbGlzdFN0dWZmKHRoaXMsIGxlbmd0aCwgZGVmYXVsdE9LLCB3ZWVrZGF5cywgZnVuY3Rpb24gKCkge1xuICAgICAgdmFyIGludGwgPSBmb3JtYXQgPyB7XG4gICAgICAgIHdlZWtkYXk6IGxlbmd0aCxcbiAgICAgICAgeWVhcjogXCJudW1lcmljXCIsXG4gICAgICAgIG1vbnRoOiBcImxvbmdcIixcbiAgICAgICAgZGF5OiBcIm51bWVyaWNcIlxuICAgICAgfSA6IHtcbiAgICAgICAgd2Vla2RheTogbGVuZ3RoXG4gICAgICB9LFxuICAgICAgICAgIGZvcm1hdFN0ciA9IGZvcm1hdCA/IFwiZm9ybWF0XCIgOiBcInN0YW5kYWxvbmVcIjtcblxuICAgICAgaWYgKCFfdGhpczIud2Vla2RheXNDYWNoZVtmb3JtYXRTdHJdW2xlbmd0aF0pIHtcbiAgICAgICAgX3RoaXMyLndlZWtkYXlzQ2FjaGVbZm9ybWF0U3RyXVtsZW5ndGhdID0gbWFwV2Vla2RheXMoZnVuY3Rpb24gKGR0KSB7XG4gICAgICAgICAgcmV0dXJuIF90aGlzMi5leHRyYWN0KGR0LCBpbnRsLCBcIndlZWtkYXlcIik7XG4gICAgICAgIH0pO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gX3RoaXMyLndlZWtkYXlzQ2FjaGVbZm9ybWF0U3RyXVtsZW5ndGhdO1xuICAgIH0pO1xuICB9O1xuXG4gIF9wcm90bzQubWVyaWRpZW1zID0gZnVuY3Rpb24gbWVyaWRpZW1zJDEoZGVmYXVsdE9LKSB7XG4gICAgdmFyIF90aGlzMyA9IHRoaXM7XG5cbiAgICBpZiAoZGVmYXVsdE9LID09PSB2b2lkIDApIHtcbiAgICAgIGRlZmF1bHRPSyA9IHRydWU7XG4gICAgfVxuXG4gICAgcmV0dXJuIGxpc3RTdHVmZih0aGlzLCB1bmRlZmluZWQsIGRlZmF1bHRPSywgZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIG1lcmlkaWVtcztcbiAgICB9LCBmdW5jdGlvbiAoKSB7XG4gICAgICAvLyBJbiB0aGVvcnkgdGhlcmUgY291bGQgYmUgYXJpYml0cmFyeSBkYXkgcGVyaW9kcy4gV2UncmUgZ29ubmEgYXNzdW1lIHRoZXJlIGFyZSBleGFjdGx5IHR3b1xuICAgICAgLy8gZm9yIEFNIGFuZCBQTS4gVGhpcyBpcyBwcm9iYWJseSB3cm9uZywgYnV0IGl0J3MgbWFrZXMgcGFyc2luZyB3YXkgZWFzaWVyLlxuICAgICAgaWYgKCFfdGhpczMubWVyaWRpZW1DYWNoZSkge1xuICAgICAgICB2YXIgaW50bCA9IHtcbiAgICAgICAgICBob3VyOiBcIm51bWVyaWNcIixcbiAgICAgICAgICBob3VyQ3ljbGU6IFwiaDEyXCJcbiAgICAgICAgfTtcbiAgICAgICAgX3RoaXMzLm1lcmlkaWVtQ2FjaGUgPSBbRGF0ZVRpbWUudXRjKDIwMTYsIDExLCAxMywgOSksIERhdGVUaW1lLnV0YygyMDE2LCAxMSwgMTMsIDE5KV0ubWFwKGZ1bmN0aW9uIChkdCkge1xuICAgICAgICAgIHJldHVybiBfdGhpczMuZXh0cmFjdChkdCwgaW50bCwgXCJkYXlwZXJpb2RcIik7XG4gICAgICAgIH0pO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gX3RoaXMzLm1lcmlkaWVtQ2FjaGU7XG4gICAgfSk7XG4gIH07XG5cbiAgX3Byb3RvNC5lcmFzID0gZnVuY3Rpb24gZXJhcyQxKGxlbmd0aCwgZGVmYXVsdE9LKSB7XG4gICAgdmFyIF90aGlzNCA9IHRoaXM7XG5cbiAgICBpZiAoZGVmYXVsdE9LID09PSB2b2lkIDApIHtcbiAgICAgIGRlZmF1bHRPSyA9IHRydWU7XG4gICAgfVxuXG4gICAgcmV0dXJuIGxpc3RTdHVmZih0aGlzLCBsZW5ndGgsIGRlZmF1bHRPSywgZXJhcywgZnVuY3Rpb24gKCkge1xuICAgICAgdmFyIGludGwgPSB7XG4gICAgICAgIGVyYTogbGVuZ3RoXG4gICAgICB9OyAvLyBUaGlzIGlzIHByb2JsZW1hdGljLiBEaWZmZXJlbnQgY2FsZW5kYXJzIGFyZSBnb2luZyB0byBkZWZpbmUgZXJhcyB0b3RhbGx5IGRpZmZlcmVudGx5LiBXaGF0IEkgbmVlZCBpcyB0aGUgbWluaW11bSBzZXQgb2YgZGF0ZXNcbiAgICAgIC8vIHRvIGRlZmluaXRlbHkgZW51bWVyYXRlIHRoZW0uXG5cbiAgICAgIGlmICghX3RoaXM0LmVyYUNhY2hlW2xlbmd0aF0pIHtcbiAgICAgICAgX3RoaXM0LmVyYUNhY2hlW2xlbmd0aF0gPSBbRGF0ZVRpbWUudXRjKC00MCwgMSwgMSksIERhdGVUaW1lLnV0YygyMDE3LCAxLCAxKV0ubWFwKGZ1bmN0aW9uIChkdCkge1xuICAgICAgICAgIHJldHVybiBfdGhpczQuZXh0cmFjdChkdCwgaW50bCwgXCJlcmFcIik7XG4gICAgICAgIH0pO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gX3RoaXM0LmVyYUNhY2hlW2xlbmd0aF07XG4gICAgfSk7XG4gIH07XG5cbiAgX3Byb3RvNC5leHRyYWN0ID0gZnVuY3Rpb24gZXh0cmFjdChkdCwgaW50bE9wdHMsIGZpZWxkKSB7XG4gICAgdmFyIGRmID0gdGhpcy5kdEZvcm1hdHRlcihkdCwgaW50bE9wdHMpLFxuICAgICAgICByZXN1bHRzID0gZGYuZm9ybWF0VG9QYXJ0cygpLFxuICAgICAgICBtYXRjaGluZyA9IHJlc3VsdHMuZmluZChmdW5jdGlvbiAobSkge1xuICAgICAgcmV0dXJuIG0udHlwZS50b0xvd2VyQ2FzZSgpID09PSBmaWVsZDtcbiAgICB9KTtcbiAgICByZXR1cm4gbWF0Y2hpbmcgPyBtYXRjaGluZy52YWx1ZSA6IG51bGw7XG4gIH07XG5cbiAgX3Byb3RvNC5udW1iZXJGb3JtYXR0ZXIgPSBmdW5jdGlvbiBudW1iZXJGb3JtYXR0ZXIob3B0cykge1xuICAgIGlmIChvcHRzID09PSB2b2lkIDApIHtcbiAgICAgIG9wdHMgPSB7fTtcbiAgICB9XG5cbiAgICAvLyB0aGlzIGZvcmNlc2ltcGxlIG9wdGlvbiBpcyBuZXZlciB1c2VkICh0aGUgb25seSBjYWxsZXIgc2hvcnQtY2lyY3VpdHMgb24gaXQsIGJ1dCBpdCBzZWVtcyBzYWZlciB0byBsZWF2ZSlcbiAgICAvLyAoaW4gY29udHJhc3QsIHRoZSByZXN0IG9mIHRoZSBjb25kaXRpb24gaXMgdXNlZCBoZWF2aWx5KVxuICAgIHJldHVybiBuZXcgUG9seU51bWJlckZvcm1hdHRlcih0aGlzLmludGwsIG9wdHMuZm9yY2VTaW1wbGUgfHwgdGhpcy5mYXN0TnVtYmVycywgb3B0cyk7XG4gIH07XG5cbiAgX3Byb3RvNC5kdEZvcm1hdHRlciA9IGZ1bmN0aW9uIGR0Rm9ybWF0dGVyKGR0LCBpbnRsT3B0cykge1xuICAgIGlmIChpbnRsT3B0cyA9PT0gdm9pZCAwKSB7XG4gICAgICBpbnRsT3B0cyA9IHt9O1xuICAgIH1cblxuICAgIHJldHVybiBuZXcgUG9seURhdGVGb3JtYXR0ZXIoZHQsIHRoaXMuaW50bCwgaW50bE9wdHMpO1xuICB9O1xuXG4gIF9wcm90bzQucmVsRm9ybWF0dGVyID0gZnVuY3Rpb24gcmVsRm9ybWF0dGVyKG9wdHMpIHtcbiAgICBpZiAob3B0cyA9PT0gdm9pZCAwKSB7XG4gICAgICBvcHRzID0ge307XG4gICAgfVxuXG4gICAgcmV0dXJuIG5ldyBQb2x5UmVsRm9ybWF0dGVyKHRoaXMuaW50bCwgdGhpcy5pc0VuZ2xpc2goKSwgb3B0cyk7XG4gIH07XG5cbiAgX3Byb3RvNC5saXN0Rm9ybWF0dGVyID0gZnVuY3Rpb24gbGlzdEZvcm1hdHRlcihvcHRzKSB7XG4gICAgaWYgKG9wdHMgPT09IHZvaWQgMCkge1xuICAgICAgb3B0cyA9IHt9O1xuICAgIH1cblxuICAgIHJldHVybiBnZXRDYWNoZWRMRih0aGlzLmludGwsIG9wdHMpO1xuICB9O1xuXG4gIF9wcm90bzQuaXNFbmdsaXNoID0gZnVuY3Rpb24gaXNFbmdsaXNoKCkge1xuICAgIHJldHVybiB0aGlzLmxvY2FsZSA9PT0gXCJlblwiIHx8IHRoaXMubG9jYWxlLnRvTG93ZXJDYXNlKCkgPT09IFwiZW4tdXNcIiB8fCBuZXcgSW50bC5EYXRlVGltZUZvcm1hdCh0aGlzLmludGwpLnJlc29sdmVkT3B0aW9ucygpLmxvY2FsZS5zdGFydHNXaXRoKFwiZW4tdXNcIik7XG4gIH07XG5cbiAgX3Byb3RvNC5lcXVhbHMgPSBmdW5jdGlvbiBlcXVhbHMob3RoZXIpIHtcbiAgICByZXR1cm4gdGhpcy5sb2NhbGUgPT09IG90aGVyLmxvY2FsZSAmJiB0aGlzLm51bWJlcmluZ1N5c3RlbSA9PT0gb3RoZXIubnVtYmVyaW5nU3lzdGVtICYmIHRoaXMub3V0cHV0Q2FsZW5kYXIgPT09IG90aGVyLm91dHB1dENhbGVuZGFyO1xuICB9O1xuXG4gIF9jcmVhdGVDbGFzcyhMb2NhbGUsIFt7XG4gICAga2V5OiBcImZhc3ROdW1iZXJzXCIsXG4gICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICBpZiAodGhpcy5mYXN0TnVtYmVyc0NhY2hlZCA9PSBudWxsKSB7XG4gICAgICAgIHRoaXMuZmFzdE51bWJlcnNDYWNoZWQgPSBzdXBwb3J0c0Zhc3ROdW1iZXJzKHRoaXMpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gdGhpcy5mYXN0TnVtYmVyc0NhY2hlZDtcbiAgICB9XG4gIH1dKTtcblxuICByZXR1cm4gTG9jYWxlO1xufSgpO1xuXG4vKlxuICogVGhpcyBmaWxlIGhhbmRsZXMgcGFyc2luZyBmb3Igd2VsbC1zcGVjaWZpZWQgZm9ybWF0cy4gSGVyZSdzIGhvdyBpdCB3b3JrczpcbiAqIFR3byB0aGluZ3MgZ28gaW50byBwYXJzaW5nOiBhIHJlZ2V4IHRvIG1hdGNoIHdpdGggYW5kIGFuIGV4dHJhY3RvciB0byB0YWtlIGFwYXJ0IHRoZSBncm91cHMgaW4gdGhlIG1hdGNoLlxuICogQW4gZXh0cmFjdG9yIGlzIGp1c3QgYSBmdW5jdGlvbiB0aGF0IHRha2VzIGEgcmVnZXggbWF0Y2ggYXJyYXkgYW5kIHJldHVybnMgYSB7IHllYXI6IC4uLiwgbW9udGg6IC4uLiB9IG9iamVjdFxuICogcGFyc2UoKSBkb2VzIHRoZSB3b3JrIG9mIGV4ZWN1dGluZyB0aGUgcmVnZXggYW5kIGFwcGx5aW5nIHRoZSBleHRyYWN0b3IuIEl0IHRha2VzIG11bHRpcGxlIHJlZ2V4L2V4dHJhY3RvciBwYWlycyB0byB0cnkgaW4gc2VxdWVuY2UuXG4gKiBFeHRyYWN0b3JzIGNhbiB0YWtlIGEgXCJjdXJzb3JcIiByZXByZXNlbnRpbmcgdGhlIG9mZnNldCBpbiB0aGUgbWF0Y2ggdG8gbG9vayBhdC4gVGhpcyBtYWtlcyBpdCBlYXN5IHRvIGNvbWJpbmUgZXh0cmFjdG9ycy5cbiAqIGNvbWJpbmVFeHRyYWN0b3JzKCkgZG9lcyB0aGUgd29yayBvZiBjb21iaW5pbmcgdGhlbSwga2VlcGluZyB0cmFjayBvZiB0aGUgY3Vyc29yIHRocm91Z2ggbXVsdGlwbGUgZXh0cmFjdGlvbnMuXG4gKiBTb21lIGV4dHJhY3Rpb25zIGFyZSBzdXBlciBkdW1iIGFuZCBzaW1wbGVQYXJzZSBhbmQgZnJvbVN0cmluZ3MgaGVscCBEUlkgdGhlbS5cbiAqL1xuXG5mdW5jdGlvbiBjb21iaW5lUmVnZXhlcygpIHtcbiAgZm9yICh2YXIgX2xlbiA9IGFyZ3VtZW50cy5sZW5ndGgsIHJlZ2V4ZXMgPSBuZXcgQXJyYXkoX2xlbiksIF9rZXkgPSAwOyBfa2V5IDwgX2xlbjsgX2tleSsrKSB7XG4gICAgcmVnZXhlc1tfa2V5XSA9IGFyZ3VtZW50c1tfa2V5XTtcbiAgfVxuXG4gIHZhciBmdWxsID0gcmVnZXhlcy5yZWR1Y2UoZnVuY3Rpb24gKGYsIHIpIHtcbiAgICByZXR1cm4gZiArIHIuc291cmNlO1xuICB9LCBcIlwiKTtcbiAgcmV0dXJuIFJlZ0V4cChcIl5cIiArIGZ1bGwgKyBcIiRcIik7XG59XG5cbmZ1bmN0aW9uIGNvbWJpbmVFeHRyYWN0b3JzKCkge1xuICBmb3IgKHZhciBfbGVuMiA9IGFyZ3VtZW50cy5sZW5ndGgsIGV4dHJhY3RvcnMgPSBuZXcgQXJyYXkoX2xlbjIpLCBfa2V5MiA9IDA7IF9rZXkyIDwgX2xlbjI7IF9rZXkyKyspIHtcbiAgICBleHRyYWN0b3JzW19rZXkyXSA9IGFyZ3VtZW50c1tfa2V5Ml07XG4gIH1cblxuICByZXR1cm4gZnVuY3Rpb24gKG0pIHtcbiAgICByZXR1cm4gZXh0cmFjdG9ycy5yZWR1Y2UoZnVuY3Rpb24gKF9yZWYsIGV4KSB7XG4gICAgICB2YXIgbWVyZ2VkVmFscyA9IF9yZWZbMF0sXG4gICAgICAgICAgbWVyZ2VkWm9uZSA9IF9yZWZbMV0sXG4gICAgICAgICAgY3Vyc29yID0gX3JlZlsyXTtcblxuICAgICAgdmFyIF9leCA9IGV4KG0sIGN1cnNvciksXG4gICAgICAgICAgdmFsID0gX2V4WzBdLFxuICAgICAgICAgIHpvbmUgPSBfZXhbMV0sXG4gICAgICAgICAgbmV4dCA9IF9leFsyXTtcblxuICAgICAgcmV0dXJuIFtfZXh0ZW5kcyh7fSwgbWVyZ2VkVmFscywgdmFsKSwgbWVyZ2VkWm9uZSB8fCB6b25lLCBuZXh0XTtcbiAgICB9LCBbe30sIG51bGwsIDFdKS5zbGljZSgwLCAyKTtcbiAgfTtcbn1cblxuZnVuY3Rpb24gcGFyc2Uocykge1xuICBpZiAocyA9PSBudWxsKSB7XG4gICAgcmV0dXJuIFtudWxsLCBudWxsXTtcbiAgfVxuXG4gIGZvciAodmFyIF9sZW4zID0gYXJndW1lbnRzLmxlbmd0aCwgcGF0dGVybnMgPSBuZXcgQXJyYXkoX2xlbjMgPiAxID8gX2xlbjMgLSAxIDogMCksIF9rZXkzID0gMTsgX2tleTMgPCBfbGVuMzsgX2tleTMrKykge1xuICAgIHBhdHRlcm5zW19rZXkzIC0gMV0gPSBhcmd1bWVudHNbX2tleTNdO1xuICB9XG5cbiAgZm9yICh2YXIgX2kgPSAwLCBfcGF0dGVybnMgPSBwYXR0ZXJuczsgX2kgPCBfcGF0dGVybnMubGVuZ3RoOyBfaSsrKSB7XG4gICAgdmFyIF9wYXR0ZXJucyRfaSA9IF9wYXR0ZXJuc1tfaV0sXG4gICAgICAgIHJlZ2V4ID0gX3BhdHRlcm5zJF9pWzBdLFxuICAgICAgICBleHRyYWN0b3IgPSBfcGF0dGVybnMkX2lbMV07XG4gICAgdmFyIG0gPSByZWdleC5leGVjKHMpO1xuXG4gICAgaWYgKG0pIHtcbiAgICAgIHJldHVybiBleHRyYWN0b3IobSk7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIFtudWxsLCBudWxsXTtcbn1cblxuZnVuY3Rpb24gc2ltcGxlUGFyc2UoKSB7XG4gIGZvciAodmFyIF9sZW40ID0gYXJndW1lbnRzLmxlbmd0aCwga2V5cyA9IG5ldyBBcnJheShfbGVuNCksIF9rZXk0ID0gMDsgX2tleTQgPCBfbGVuNDsgX2tleTQrKykge1xuICAgIGtleXNbX2tleTRdID0gYXJndW1lbnRzW19rZXk0XTtcbiAgfVxuXG4gIHJldHVybiBmdW5jdGlvbiAobWF0Y2gsIGN1cnNvcikge1xuICAgIHZhciByZXQgPSB7fTtcbiAgICB2YXIgaTtcblxuICAgIGZvciAoaSA9IDA7IGkgPCBrZXlzLmxlbmd0aDsgaSsrKSB7XG4gICAgICByZXRba2V5c1tpXV0gPSBwYXJzZUludGVnZXIobWF0Y2hbY3Vyc29yICsgaV0pO1xuICAgIH1cblxuICAgIHJldHVybiBbcmV0LCBudWxsLCBjdXJzb3IgKyBpXTtcbiAgfTtcbn0gLy8gSVNPIGFuZCBTUUwgcGFyc2luZ1xuXG5cbnZhciBvZmZzZXRSZWdleCA9IC8oPzooWil8KFsrLV1cXGRcXGQpKD86Oj8oXFxkXFxkKSk/KS8sXG4gICAgaXNvVGltZUJhc2VSZWdleCA9IC8oXFxkXFxkKSg/Ojo/KFxcZFxcZCkoPzo6PyhcXGRcXGQpKD86Wy4sXShcXGR7MSwzMH0pKT8pPyk/LyxcbiAgICBpc29UaW1lUmVnZXggPSBSZWdFeHAoXCJcIiArIGlzb1RpbWVCYXNlUmVnZXguc291cmNlICsgb2Zmc2V0UmVnZXguc291cmNlICsgXCI/XCIpLFxuICAgIGlzb1RpbWVFeHRlbnNpb25SZWdleCA9IFJlZ0V4cChcIig/OlRcIiArIGlzb1RpbWVSZWdleC5zb3VyY2UgKyBcIik/XCIpLFxuICAgIGlzb1ltZFJlZ2V4ID0gLyhbKy1dXFxkezZ9fFxcZHs0fSkoPzotPyhcXGRcXGQpKD86LT8oXFxkXFxkKSk/KT8vLFxuICAgIGlzb1dlZWtSZWdleCA9IC8oXFxkezR9KS0/VyhcXGRcXGQpKD86LT8oXFxkKSk/LyxcbiAgICBpc29PcmRpbmFsUmVnZXggPSAvKFxcZHs0fSktPyhcXGR7M30pLyxcbiAgICBleHRyYWN0SVNPV2Vla0RhdGEgPSBzaW1wbGVQYXJzZShcIndlZWtZZWFyXCIsIFwid2Vla051bWJlclwiLCBcIndlZWtEYXlcIiksXG4gICAgZXh0cmFjdElTT09yZGluYWxEYXRhID0gc2ltcGxlUGFyc2UoXCJ5ZWFyXCIsIFwib3JkaW5hbFwiKSxcbiAgICBzcWxZbWRSZWdleCA9IC8oXFxkezR9KS0oXFxkXFxkKS0oXFxkXFxkKS8sXG4gICAgLy8gZHVtYmVkLWRvd24gdmVyc2lvbiBvZiB0aGUgSVNPIG9uZVxuc3FsVGltZVJlZ2V4ID0gUmVnRXhwKGlzb1RpbWVCYXNlUmVnZXguc291cmNlICsgXCIgPyg/OlwiICsgb2Zmc2V0UmVnZXguc291cmNlICsgXCJ8KFwiICsgaWFuYVJlZ2V4LnNvdXJjZSArIFwiKSk/XCIpLFxuICAgIHNxbFRpbWVFeHRlbnNpb25SZWdleCA9IFJlZ0V4cChcIig/OiBcIiArIHNxbFRpbWVSZWdleC5zb3VyY2UgKyBcIik/XCIpO1xuXG5mdW5jdGlvbiBpbnQobWF0Y2gsIHBvcywgZmFsbGJhY2spIHtcbiAgdmFyIG0gPSBtYXRjaFtwb3NdO1xuICByZXR1cm4gaXNVbmRlZmluZWQobSkgPyBmYWxsYmFjayA6IHBhcnNlSW50ZWdlcihtKTtcbn1cblxuZnVuY3Rpb24gZXh0cmFjdElTT1ltZChtYXRjaCwgY3Vyc29yKSB7XG4gIHZhciBpdGVtID0ge1xuICAgIHllYXI6IGludChtYXRjaCwgY3Vyc29yKSxcbiAgICBtb250aDogaW50KG1hdGNoLCBjdXJzb3IgKyAxLCAxKSxcbiAgICBkYXk6IGludChtYXRjaCwgY3Vyc29yICsgMiwgMSlcbiAgfTtcbiAgcmV0dXJuIFtpdGVtLCBudWxsLCBjdXJzb3IgKyAzXTtcbn1cblxuZnVuY3Rpb24gZXh0cmFjdElTT1RpbWUobWF0Y2gsIGN1cnNvcikge1xuICB2YXIgaXRlbSA9IHtcbiAgICBob3VyczogaW50KG1hdGNoLCBjdXJzb3IsIDApLFxuICAgIG1pbnV0ZXM6IGludChtYXRjaCwgY3Vyc29yICsgMSwgMCksXG4gICAgc2Vjb25kczogaW50KG1hdGNoLCBjdXJzb3IgKyAyLCAwKSxcbiAgICBtaWxsaXNlY29uZHM6IHBhcnNlTWlsbGlzKG1hdGNoW2N1cnNvciArIDNdKVxuICB9O1xuICByZXR1cm4gW2l0ZW0sIG51bGwsIGN1cnNvciArIDRdO1xufVxuXG5mdW5jdGlvbiBleHRyYWN0SVNPT2Zmc2V0KG1hdGNoLCBjdXJzb3IpIHtcbiAgdmFyIGxvY2FsID0gIW1hdGNoW2N1cnNvcl0gJiYgIW1hdGNoW2N1cnNvciArIDFdLFxuICAgICAgZnVsbE9mZnNldCA9IHNpZ25lZE9mZnNldChtYXRjaFtjdXJzb3IgKyAxXSwgbWF0Y2hbY3Vyc29yICsgMl0pLFxuICAgICAgem9uZSA9IGxvY2FsID8gbnVsbCA6IEZpeGVkT2Zmc2V0Wm9uZS5pbnN0YW5jZShmdWxsT2Zmc2V0KTtcbiAgcmV0dXJuIFt7fSwgem9uZSwgY3Vyc29yICsgM107XG59XG5cbmZ1bmN0aW9uIGV4dHJhY3RJQU5BWm9uZShtYXRjaCwgY3Vyc29yKSB7XG4gIHZhciB6b25lID0gbWF0Y2hbY3Vyc29yXSA/IElBTkFab25lLmNyZWF0ZShtYXRjaFtjdXJzb3JdKSA6IG51bGw7XG4gIHJldHVybiBbe30sIHpvbmUsIGN1cnNvciArIDFdO1xufSAvLyBJU08gdGltZSBwYXJzaW5nXG5cblxudmFyIGlzb1RpbWVPbmx5ID0gUmVnRXhwKFwiXlQ/XCIgKyBpc29UaW1lQmFzZVJlZ2V4LnNvdXJjZSArIFwiJFwiKTsgLy8gSVNPIGR1cmF0aW9uIHBhcnNpbmdcblxudmFyIGlzb0R1cmF0aW9uID0gL14tP1AoPzooPzooLT9cXGR7MSw5fSg/OlxcLlxcZHsxLDl9KT8pWSk/KD86KC0/XFxkezEsOX0oPzpcXC5cXGR7MSw5fSk/KU0pPyg/OigtP1xcZHsxLDl9KD86XFwuXFxkezEsOX0pPylXKT8oPzooLT9cXGR7MSw5fSg/OlxcLlxcZHsxLDl9KT8pRCk/KD86VCg/OigtP1xcZHsxLDl9KD86XFwuXFxkezEsOX0pPylIKT8oPzooLT9cXGR7MSw5fSg/OlxcLlxcZHsxLDl9KT8pTSk/KD86KC0/XFxkezEsMjB9KSg/OlsuLF0oLT9cXGR7MSw5fSkpP1MpPyk/KSQvO1xuXG5mdW5jdGlvbiBleHRyYWN0SVNPRHVyYXRpb24obWF0Y2gpIHtcbiAgdmFyIHMgPSBtYXRjaFswXSxcbiAgICAgIHllYXJTdHIgPSBtYXRjaFsxXSxcbiAgICAgIG1vbnRoU3RyID0gbWF0Y2hbMl0sXG4gICAgICB3ZWVrU3RyID0gbWF0Y2hbM10sXG4gICAgICBkYXlTdHIgPSBtYXRjaFs0XSxcbiAgICAgIGhvdXJTdHIgPSBtYXRjaFs1XSxcbiAgICAgIG1pbnV0ZVN0ciA9IG1hdGNoWzZdLFxuICAgICAgc2Vjb25kU3RyID0gbWF0Y2hbN10sXG4gICAgICBtaWxsaXNlY29uZHNTdHIgPSBtYXRjaFs4XTtcbiAgdmFyIGhhc05lZ2F0aXZlUHJlZml4ID0gc1swXSA9PT0gXCItXCI7XG4gIHZhciBuZWdhdGl2ZVNlY29uZHMgPSBzZWNvbmRTdHIgJiYgc2Vjb25kU3RyWzBdID09PSBcIi1cIjtcblxuICB2YXIgbWF5YmVOZWdhdGUgPSBmdW5jdGlvbiBtYXliZU5lZ2F0ZShudW0sIGZvcmNlKSB7XG4gICAgaWYgKGZvcmNlID09PSB2b2lkIDApIHtcbiAgICAgIGZvcmNlID0gZmFsc2U7XG4gICAgfVxuXG4gICAgcmV0dXJuIG51bSAhPT0gdW5kZWZpbmVkICYmIChmb3JjZSB8fCBudW0gJiYgaGFzTmVnYXRpdmVQcmVmaXgpID8gLW51bSA6IG51bTtcbiAgfTtcblxuICByZXR1cm4gW3tcbiAgICB5ZWFyczogbWF5YmVOZWdhdGUocGFyc2VGbG9hdGluZyh5ZWFyU3RyKSksXG4gICAgbW9udGhzOiBtYXliZU5lZ2F0ZShwYXJzZUZsb2F0aW5nKG1vbnRoU3RyKSksXG4gICAgd2Vla3M6IG1heWJlTmVnYXRlKHBhcnNlRmxvYXRpbmcod2Vla1N0cikpLFxuICAgIGRheXM6IG1heWJlTmVnYXRlKHBhcnNlRmxvYXRpbmcoZGF5U3RyKSksXG4gICAgaG91cnM6IG1heWJlTmVnYXRlKHBhcnNlRmxvYXRpbmcoaG91clN0cikpLFxuICAgIG1pbnV0ZXM6IG1heWJlTmVnYXRlKHBhcnNlRmxvYXRpbmcobWludXRlU3RyKSksXG4gICAgc2Vjb25kczogbWF5YmVOZWdhdGUocGFyc2VGbG9hdGluZyhzZWNvbmRTdHIpLCBzZWNvbmRTdHIgPT09IFwiLTBcIiksXG4gICAgbWlsbGlzZWNvbmRzOiBtYXliZU5lZ2F0ZShwYXJzZU1pbGxpcyhtaWxsaXNlY29uZHNTdHIpLCBuZWdhdGl2ZVNlY29uZHMpXG4gIH1dO1xufSAvLyBUaGVzZSBhcmUgYSBsaXR0bGUgYnJhaW5kZWFkLiBFRFQgKnNob3VsZCogdGVsbCB1cyB0aGF0IHdlJ3JlIGluLCBzYXksIEFtZXJpY2EvTmV3X1lvcmtcbi8vIGFuZCBub3QganVzdCB0aGF0IHdlJ3JlIGluIC0yNDAgKnJpZ2h0IG5vdyouIEJ1dCBzaW5jZSBJIGRvbid0IHRoaW5rIHRoZXNlIGFyZSB1c2VkIHRoYXQgb2Z0ZW5cbi8vIEknbSBqdXN0IGdvaW5nIHRvIGlnbm9yZSB0aGF0XG5cblxudmFyIG9ic09mZnNldHMgPSB7XG4gIEdNVDogMCxcbiAgRURUOiAtNCAqIDYwLFxuICBFU1Q6IC01ICogNjAsXG4gIENEVDogLTUgKiA2MCxcbiAgQ1NUOiAtNiAqIDYwLFxuICBNRFQ6IC02ICogNjAsXG4gIE1TVDogLTcgKiA2MCxcbiAgUERUOiAtNyAqIDYwLFxuICBQU1Q6IC04ICogNjBcbn07XG5cbmZ1bmN0aW9uIGZyb21TdHJpbmdzKHdlZWtkYXlTdHIsIHllYXJTdHIsIG1vbnRoU3RyLCBkYXlTdHIsIGhvdXJTdHIsIG1pbnV0ZVN0ciwgc2Vjb25kU3RyKSB7XG4gIHZhciByZXN1bHQgPSB7XG4gICAgeWVhcjogeWVhclN0ci5sZW5ndGggPT09IDIgPyB1bnRydW5jYXRlWWVhcihwYXJzZUludGVnZXIoeWVhclN0cikpIDogcGFyc2VJbnRlZ2VyKHllYXJTdHIpLFxuICAgIG1vbnRoOiBtb250aHNTaG9ydC5pbmRleE9mKG1vbnRoU3RyKSArIDEsXG4gICAgZGF5OiBwYXJzZUludGVnZXIoZGF5U3RyKSxcbiAgICBob3VyOiBwYXJzZUludGVnZXIoaG91clN0ciksXG4gICAgbWludXRlOiBwYXJzZUludGVnZXIobWludXRlU3RyKVxuICB9O1xuICBpZiAoc2Vjb25kU3RyKSByZXN1bHQuc2Vjb25kID0gcGFyc2VJbnRlZ2VyKHNlY29uZFN0cik7XG5cbiAgaWYgKHdlZWtkYXlTdHIpIHtcbiAgICByZXN1bHQud2Vla2RheSA9IHdlZWtkYXlTdHIubGVuZ3RoID4gMyA/IHdlZWtkYXlzTG9uZy5pbmRleE9mKHdlZWtkYXlTdHIpICsgMSA6IHdlZWtkYXlzU2hvcnQuaW5kZXhPZih3ZWVrZGF5U3RyKSArIDE7XG4gIH1cblxuICByZXR1cm4gcmVzdWx0O1xufSAvLyBSRkMgMjgyMi81MzIyXG5cblxudmFyIHJmYzI4MjIgPSAvXig/OihNb258VHVlfFdlZHxUaHV8RnJpfFNhdHxTdW4pLFxccyk/KFxcZHsxLDJ9KVxccyhKYW58RmVifE1hcnxBcHJ8TWF5fEp1bnxKdWx8QXVnfFNlcHxPY3R8Tm92fERlYylcXHMoXFxkezIsNH0pXFxzKFxcZFxcZCk6KFxcZFxcZCkoPzo6KFxcZFxcZCkpP1xccyg/OihVVHxHTVR8W0VDTVBdW1NEXVQpfChbWnpdKXwoPzooWystXVxcZFxcZCkoXFxkXFxkKSkpJC87XG5cbmZ1bmN0aW9uIGV4dHJhY3RSRkMyODIyKG1hdGNoKSB7XG4gIHZhciB3ZWVrZGF5U3RyID0gbWF0Y2hbMV0sXG4gICAgICBkYXlTdHIgPSBtYXRjaFsyXSxcbiAgICAgIG1vbnRoU3RyID0gbWF0Y2hbM10sXG4gICAgICB5ZWFyU3RyID0gbWF0Y2hbNF0sXG4gICAgICBob3VyU3RyID0gbWF0Y2hbNV0sXG4gICAgICBtaW51dGVTdHIgPSBtYXRjaFs2XSxcbiAgICAgIHNlY29uZFN0ciA9IG1hdGNoWzddLFxuICAgICAgb2JzT2Zmc2V0ID0gbWF0Y2hbOF0sXG4gICAgICBtaWxPZmZzZXQgPSBtYXRjaFs5XSxcbiAgICAgIG9mZkhvdXJTdHIgPSBtYXRjaFsxMF0sXG4gICAgICBvZmZNaW51dGVTdHIgPSBtYXRjaFsxMV0sXG4gICAgICByZXN1bHQgPSBmcm9tU3RyaW5ncyh3ZWVrZGF5U3RyLCB5ZWFyU3RyLCBtb250aFN0ciwgZGF5U3RyLCBob3VyU3RyLCBtaW51dGVTdHIsIHNlY29uZFN0cik7XG4gIHZhciBvZmZzZXQ7XG5cbiAgaWYgKG9ic09mZnNldCkge1xuICAgIG9mZnNldCA9IG9ic09mZnNldHNbb2JzT2Zmc2V0XTtcbiAgfSBlbHNlIGlmIChtaWxPZmZzZXQpIHtcbiAgICBvZmZzZXQgPSAwO1xuICB9IGVsc2Uge1xuICAgIG9mZnNldCA9IHNpZ25lZE9mZnNldChvZmZIb3VyU3RyLCBvZmZNaW51dGVTdHIpO1xuICB9XG5cbiAgcmV0dXJuIFtyZXN1bHQsIG5ldyBGaXhlZE9mZnNldFpvbmUob2Zmc2V0KV07XG59XG5cbmZ1bmN0aW9uIHByZXByb2Nlc3NSRkMyODIyKHMpIHtcbiAgLy8gUmVtb3ZlIGNvbW1lbnRzIGFuZCBmb2xkaW5nIHdoaXRlc3BhY2UgYW5kIHJlcGxhY2UgbXVsdGlwbGUtc3BhY2VzIHdpdGggYSBzaW5nbGUgc3BhY2VcbiAgcmV0dXJuIHMucmVwbGFjZSgvXFwoW14pXSpcXCl8W1xcblxcdF0vZywgXCIgXCIpLnJlcGxhY2UoLyhcXHNcXHMrKS9nLCBcIiBcIikudHJpbSgpO1xufSAvLyBodHRwIGRhdGVcblxuXG52YXIgcmZjMTEyMyA9IC9eKE1vbnxUdWV8V2VkfFRodXxGcml8U2F0fFN1biksIChcXGRcXGQpIChKYW58RmVifE1hcnxBcHJ8TWF5fEp1bnxKdWx8QXVnfFNlcHxPY3R8Tm92fERlYykgKFxcZHs0fSkgKFxcZFxcZCk6KFxcZFxcZCk6KFxcZFxcZCkgR01UJC8sXG4gICAgcmZjODUwID0gL14oTW9uZGF5fFR1ZXNkYXl8V2Vkc2RheXxUaHVyc2RheXxGcmlkYXl8U2F0dXJkYXl8U3VuZGF5KSwgKFxcZFxcZCktKEphbnxGZWJ8TWFyfEFwcnxNYXl8SnVufEp1bHxBdWd8U2VwfE9jdHxOb3Z8RGVjKS0oXFxkXFxkKSAoXFxkXFxkKTooXFxkXFxkKTooXFxkXFxkKSBHTVQkLyxcbiAgICBhc2NpaSA9IC9eKE1vbnxUdWV8V2VkfFRodXxGcml8U2F0fFN1bikgKEphbnxGZWJ8TWFyfEFwcnxNYXl8SnVufEp1bHxBdWd8U2VwfE9jdHxOb3Z8RGVjKSAoIFxcZHxcXGRcXGQpIChcXGRcXGQpOihcXGRcXGQpOihcXGRcXGQpIChcXGR7NH0pJC87XG5cbmZ1bmN0aW9uIGV4dHJhY3RSRkMxMTIzT3I4NTAobWF0Y2gpIHtcbiAgdmFyIHdlZWtkYXlTdHIgPSBtYXRjaFsxXSxcbiAgICAgIGRheVN0ciA9IG1hdGNoWzJdLFxuICAgICAgbW9udGhTdHIgPSBtYXRjaFszXSxcbiAgICAgIHllYXJTdHIgPSBtYXRjaFs0XSxcbiAgICAgIGhvdXJTdHIgPSBtYXRjaFs1XSxcbiAgICAgIG1pbnV0ZVN0ciA9IG1hdGNoWzZdLFxuICAgICAgc2Vjb25kU3RyID0gbWF0Y2hbN10sXG4gICAgICByZXN1bHQgPSBmcm9tU3RyaW5ncyh3ZWVrZGF5U3RyLCB5ZWFyU3RyLCBtb250aFN0ciwgZGF5U3RyLCBob3VyU3RyLCBtaW51dGVTdHIsIHNlY29uZFN0cik7XG4gIHJldHVybiBbcmVzdWx0LCBGaXhlZE9mZnNldFpvbmUudXRjSW5zdGFuY2VdO1xufVxuXG5mdW5jdGlvbiBleHRyYWN0QVNDSUkobWF0Y2gpIHtcbiAgdmFyIHdlZWtkYXlTdHIgPSBtYXRjaFsxXSxcbiAgICAgIG1vbnRoU3RyID0gbWF0Y2hbMl0sXG4gICAgICBkYXlTdHIgPSBtYXRjaFszXSxcbiAgICAgIGhvdXJTdHIgPSBtYXRjaFs0XSxcbiAgICAgIG1pbnV0ZVN0ciA9IG1hdGNoWzVdLFxuICAgICAgc2Vjb25kU3RyID0gbWF0Y2hbNl0sXG4gICAgICB5ZWFyU3RyID0gbWF0Y2hbN10sXG4gICAgICByZXN1bHQgPSBmcm9tU3RyaW5ncyh3ZWVrZGF5U3RyLCB5ZWFyU3RyLCBtb250aFN0ciwgZGF5U3RyLCBob3VyU3RyLCBtaW51dGVTdHIsIHNlY29uZFN0cik7XG4gIHJldHVybiBbcmVzdWx0LCBGaXhlZE9mZnNldFpvbmUudXRjSW5zdGFuY2VdO1xufVxuXG52YXIgaXNvWW1kV2l0aFRpbWVFeHRlbnNpb25SZWdleCA9IGNvbWJpbmVSZWdleGVzKGlzb1ltZFJlZ2V4LCBpc29UaW1lRXh0ZW5zaW9uUmVnZXgpO1xudmFyIGlzb1dlZWtXaXRoVGltZUV4dGVuc2lvblJlZ2V4ID0gY29tYmluZVJlZ2V4ZXMoaXNvV2Vla1JlZ2V4LCBpc29UaW1lRXh0ZW5zaW9uUmVnZXgpO1xudmFyIGlzb09yZGluYWxXaXRoVGltZUV4dGVuc2lvblJlZ2V4ID0gY29tYmluZVJlZ2V4ZXMoaXNvT3JkaW5hbFJlZ2V4LCBpc29UaW1lRXh0ZW5zaW9uUmVnZXgpO1xudmFyIGlzb1RpbWVDb21iaW5lZFJlZ2V4ID0gY29tYmluZVJlZ2V4ZXMoaXNvVGltZVJlZ2V4KTtcbnZhciBleHRyYWN0SVNPWW1kVGltZUFuZE9mZnNldCA9IGNvbWJpbmVFeHRyYWN0b3JzKGV4dHJhY3RJU09ZbWQsIGV4dHJhY3RJU09UaW1lLCBleHRyYWN0SVNPT2Zmc2V0KTtcbnZhciBleHRyYWN0SVNPV2Vla1RpbWVBbmRPZmZzZXQgPSBjb21iaW5lRXh0cmFjdG9ycyhleHRyYWN0SVNPV2Vla0RhdGEsIGV4dHJhY3RJU09UaW1lLCBleHRyYWN0SVNPT2Zmc2V0KTtcbnZhciBleHRyYWN0SVNPT3JkaW5hbERhdGVBbmRUaW1lID0gY29tYmluZUV4dHJhY3RvcnMoZXh0cmFjdElTT09yZGluYWxEYXRhLCBleHRyYWN0SVNPVGltZSwgZXh0cmFjdElTT09mZnNldCk7XG52YXIgZXh0cmFjdElTT1RpbWVBbmRPZmZzZXQgPSBjb21iaW5lRXh0cmFjdG9ycyhleHRyYWN0SVNPVGltZSwgZXh0cmFjdElTT09mZnNldCk7XG4vKipcbiAqIEBwcml2YXRlXG4gKi9cblxuZnVuY3Rpb24gcGFyc2VJU09EYXRlKHMpIHtcbiAgcmV0dXJuIHBhcnNlKHMsIFtpc29ZbWRXaXRoVGltZUV4dGVuc2lvblJlZ2V4LCBleHRyYWN0SVNPWW1kVGltZUFuZE9mZnNldF0sIFtpc29XZWVrV2l0aFRpbWVFeHRlbnNpb25SZWdleCwgZXh0cmFjdElTT1dlZWtUaW1lQW5kT2Zmc2V0XSwgW2lzb09yZGluYWxXaXRoVGltZUV4dGVuc2lvblJlZ2V4LCBleHRyYWN0SVNPT3JkaW5hbERhdGVBbmRUaW1lXSwgW2lzb1RpbWVDb21iaW5lZFJlZ2V4LCBleHRyYWN0SVNPVGltZUFuZE9mZnNldF0pO1xufVxuZnVuY3Rpb24gcGFyc2VSRkMyODIyRGF0ZShzKSB7XG4gIHJldHVybiBwYXJzZShwcmVwcm9jZXNzUkZDMjgyMihzKSwgW3JmYzI4MjIsIGV4dHJhY3RSRkMyODIyXSk7XG59XG5mdW5jdGlvbiBwYXJzZUhUVFBEYXRlKHMpIHtcbiAgcmV0dXJuIHBhcnNlKHMsIFtyZmMxMTIzLCBleHRyYWN0UkZDMTEyM09yODUwXSwgW3JmYzg1MCwgZXh0cmFjdFJGQzExMjNPcjg1MF0sIFthc2NpaSwgZXh0cmFjdEFTQ0lJXSk7XG59XG5mdW5jdGlvbiBwYXJzZUlTT0R1cmF0aW9uKHMpIHtcbiAgcmV0dXJuIHBhcnNlKHMsIFtpc29EdXJhdGlvbiwgZXh0cmFjdElTT0R1cmF0aW9uXSk7XG59XG52YXIgZXh0cmFjdElTT1RpbWVPbmx5ID0gY29tYmluZUV4dHJhY3RvcnMoZXh0cmFjdElTT1RpbWUpO1xuZnVuY3Rpb24gcGFyc2VJU09UaW1lT25seShzKSB7XG4gIHJldHVybiBwYXJzZShzLCBbaXNvVGltZU9ubHksIGV4dHJhY3RJU09UaW1lT25seV0pO1xufVxudmFyIHNxbFltZFdpdGhUaW1lRXh0ZW5zaW9uUmVnZXggPSBjb21iaW5lUmVnZXhlcyhzcWxZbWRSZWdleCwgc3FsVGltZUV4dGVuc2lvblJlZ2V4KTtcbnZhciBzcWxUaW1lQ29tYmluZWRSZWdleCA9IGNvbWJpbmVSZWdleGVzKHNxbFRpbWVSZWdleCk7XG52YXIgZXh0cmFjdElTT1ltZFRpbWVPZmZzZXRBbmRJQU5BWm9uZSA9IGNvbWJpbmVFeHRyYWN0b3JzKGV4dHJhY3RJU09ZbWQsIGV4dHJhY3RJU09UaW1lLCBleHRyYWN0SVNPT2Zmc2V0LCBleHRyYWN0SUFOQVpvbmUpO1xudmFyIGV4dHJhY3RJU09UaW1lT2Zmc2V0QW5kSUFOQVpvbmUgPSBjb21iaW5lRXh0cmFjdG9ycyhleHRyYWN0SVNPVGltZSwgZXh0cmFjdElTT09mZnNldCwgZXh0cmFjdElBTkFab25lKTtcbmZ1bmN0aW9uIHBhcnNlU1FMKHMpIHtcbiAgcmV0dXJuIHBhcnNlKHMsIFtzcWxZbWRXaXRoVGltZUV4dGVuc2lvblJlZ2V4LCBleHRyYWN0SVNPWW1kVGltZU9mZnNldEFuZElBTkFab25lXSwgW3NxbFRpbWVDb21iaW5lZFJlZ2V4LCBleHRyYWN0SVNPVGltZU9mZnNldEFuZElBTkFab25lXSk7XG59XG5cbnZhciBJTlZBTElEJDIgPSBcIkludmFsaWQgRHVyYXRpb25cIjsgLy8gdW5pdCBjb252ZXJzaW9uIGNvbnN0YW50c1xuXG52YXIgbG93T3JkZXJNYXRyaXggPSB7XG4gIHdlZWtzOiB7XG4gICAgZGF5czogNyxcbiAgICBob3VyczogNyAqIDI0LFxuICAgIG1pbnV0ZXM6IDcgKiAyNCAqIDYwLFxuICAgIHNlY29uZHM6IDcgKiAyNCAqIDYwICogNjAsXG4gICAgbWlsbGlzZWNvbmRzOiA3ICogMjQgKiA2MCAqIDYwICogMTAwMFxuICB9LFxuICBkYXlzOiB7XG4gICAgaG91cnM6IDI0LFxuICAgIG1pbnV0ZXM6IDI0ICogNjAsXG4gICAgc2Vjb25kczogMjQgKiA2MCAqIDYwLFxuICAgIG1pbGxpc2Vjb25kczogMjQgKiA2MCAqIDYwICogMTAwMFxuICB9LFxuICBob3Vyczoge1xuICAgIG1pbnV0ZXM6IDYwLFxuICAgIHNlY29uZHM6IDYwICogNjAsXG4gICAgbWlsbGlzZWNvbmRzOiA2MCAqIDYwICogMTAwMFxuICB9LFxuICBtaW51dGVzOiB7XG4gICAgc2Vjb25kczogNjAsXG4gICAgbWlsbGlzZWNvbmRzOiA2MCAqIDEwMDBcbiAgfSxcbiAgc2Vjb25kczoge1xuICAgIG1pbGxpc2Vjb25kczogMTAwMFxuICB9XG59LFxuICAgIGNhc3VhbE1hdHJpeCA9IF9leHRlbmRzKHtcbiAgeWVhcnM6IHtcbiAgICBxdWFydGVyczogNCxcbiAgICBtb250aHM6IDEyLFxuICAgIHdlZWtzOiA1MixcbiAgICBkYXlzOiAzNjUsXG4gICAgaG91cnM6IDM2NSAqIDI0LFxuICAgIG1pbnV0ZXM6IDM2NSAqIDI0ICogNjAsXG4gICAgc2Vjb25kczogMzY1ICogMjQgKiA2MCAqIDYwLFxuICAgIG1pbGxpc2Vjb25kczogMzY1ICogMjQgKiA2MCAqIDYwICogMTAwMFxuICB9LFxuICBxdWFydGVyczoge1xuICAgIG1vbnRoczogMyxcbiAgICB3ZWVrczogMTMsXG4gICAgZGF5czogOTEsXG4gICAgaG91cnM6IDkxICogMjQsXG4gICAgbWludXRlczogOTEgKiAyNCAqIDYwLFxuICAgIHNlY29uZHM6IDkxICogMjQgKiA2MCAqIDYwLFxuICAgIG1pbGxpc2Vjb25kczogOTEgKiAyNCAqIDYwICogNjAgKiAxMDAwXG4gIH0sXG4gIG1vbnRoczoge1xuICAgIHdlZWtzOiA0LFxuICAgIGRheXM6IDMwLFxuICAgIGhvdXJzOiAzMCAqIDI0LFxuICAgIG1pbnV0ZXM6IDMwICogMjQgKiA2MCxcbiAgICBzZWNvbmRzOiAzMCAqIDI0ICogNjAgKiA2MCxcbiAgICBtaWxsaXNlY29uZHM6IDMwICogMjQgKiA2MCAqIDYwICogMTAwMFxuICB9XG59LCBsb3dPcmRlck1hdHJpeCksXG4gICAgZGF5c0luWWVhckFjY3VyYXRlID0gMTQ2MDk3LjAgLyA0MDAsXG4gICAgZGF5c0luTW9udGhBY2N1cmF0ZSA9IDE0NjA5Ny4wIC8gNDgwMCxcbiAgICBhY2N1cmF0ZU1hdHJpeCA9IF9leHRlbmRzKHtcbiAgeWVhcnM6IHtcbiAgICBxdWFydGVyczogNCxcbiAgICBtb250aHM6IDEyLFxuICAgIHdlZWtzOiBkYXlzSW5ZZWFyQWNjdXJhdGUgLyA3LFxuICAgIGRheXM6IGRheXNJblllYXJBY2N1cmF0ZSxcbiAgICBob3VyczogZGF5c0luWWVhckFjY3VyYXRlICogMjQsXG4gICAgbWludXRlczogZGF5c0luWWVhckFjY3VyYXRlICogMjQgKiA2MCxcbiAgICBzZWNvbmRzOiBkYXlzSW5ZZWFyQWNjdXJhdGUgKiAyNCAqIDYwICogNjAsXG4gICAgbWlsbGlzZWNvbmRzOiBkYXlzSW5ZZWFyQWNjdXJhdGUgKiAyNCAqIDYwICogNjAgKiAxMDAwXG4gIH0sXG4gIHF1YXJ0ZXJzOiB7XG4gICAgbW9udGhzOiAzLFxuICAgIHdlZWtzOiBkYXlzSW5ZZWFyQWNjdXJhdGUgLyAyOCxcbiAgICBkYXlzOiBkYXlzSW5ZZWFyQWNjdXJhdGUgLyA0LFxuICAgIGhvdXJzOiBkYXlzSW5ZZWFyQWNjdXJhdGUgKiAyNCAvIDQsXG4gICAgbWludXRlczogZGF5c0luWWVhckFjY3VyYXRlICogMjQgKiA2MCAvIDQsXG4gICAgc2Vjb25kczogZGF5c0luWWVhckFjY3VyYXRlICogMjQgKiA2MCAqIDYwIC8gNCxcbiAgICBtaWxsaXNlY29uZHM6IGRheXNJblllYXJBY2N1cmF0ZSAqIDI0ICogNjAgKiA2MCAqIDEwMDAgLyA0XG4gIH0sXG4gIG1vbnRoczoge1xuICAgIHdlZWtzOiBkYXlzSW5Nb250aEFjY3VyYXRlIC8gNyxcbiAgICBkYXlzOiBkYXlzSW5Nb250aEFjY3VyYXRlLFxuICAgIGhvdXJzOiBkYXlzSW5Nb250aEFjY3VyYXRlICogMjQsXG4gICAgbWludXRlczogZGF5c0luTW9udGhBY2N1cmF0ZSAqIDI0ICogNjAsXG4gICAgc2Vjb25kczogZGF5c0luTW9udGhBY2N1cmF0ZSAqIDI0ICogNjAgKiA2MCxcbiAgICBtaWxsaXNlY29uZHM6IGRheXNJbk1vbnRoQWNjdXJhdGUgKiAyNCAqIDYwICogNjAgKiAxMDAwXG4gIH1cbn0sIGxvd09yZGVyTWF0cml4KTsgLy8gdW5pdHMgb3JkZXJlZCBieSBzaXplXG5cbnZhciBvcmRlcmVkVW5pdHMkMSA9IFtcInllYXJzXCIsIFwicXVhcnRlcnNcIiwgXCJtb250aHNcIiwgXCJ3ZWVrc1wiLCBcImRheXNcIiwgXCJob3Vyc1wiLCBcIm1pbnV0ZXNcIiwgXCJzZWNvbmRzXCIsIFwibWlsbGlzZWNvbmRzXCJdO1xudmFyIHJldmVyc2VVbml0cyA9IG9yZGVyZWRVbml0cyQxLnNsaWNlKDApLnJldmVyc2UoKTsgLy8gY2xvbmUgcmVhbGx5IG1lYW5zIFwiY3JlYXRlIGFub3RoZXIgaW5zdGFuY2UganVzdCBsaWtlIHRoaXMgb25lLCBidXQgd2l0aCB0aGVzZSBjaGFuZ2VzXCJcblxuZnVuY3Rpb24gY2xvbmUkMShkdXIsIGFsdHMsIGNsZWFyKSB7XG4gIGlmIChjbGVhciA9PT0gdm9pZCAwKSB7XG4gICAgY2xlYXIgPSBmYWxzZTtcbiAgfVxuXG4gIC8vIGRlZXAgbWVyZ2UgZm9yIHZhbHNcbiAgdmFyIGNvbmYgPSB7XG4gICAgdmFsdWVzOiBjbGVhciA/IGFsdHMudmFsdWVzIDogX2V4dGVuZHMoe30sIGR1ci52YWx1ZXMsIGFsdHMudmFsdWVzIHx8IHt9KSxcbiAgICBsb2M6IGR1ci5sb2MuY2xvbmUoYWx0cy5sb2MpLFxuICAgIGNvbnZlcnNpb25BY2N1cmFjeTogYWx0cy5jb252ZXJzaW9uQWNjdXJhY3kgfHwgZHVyLmNvbnZlcnNpb25BY2N1cmFjeVxuICB9O1xuICByZXR1cm4gbmV3IER1cmF0aW9uKGNvbmYpO1xufVxuXG5mdW5jdGlvbiBhbnRpVHJ1bmMobikge1xuICByZXR1cm4gbiA8IDAgPyBNYXRoLmZsb29yKG4pIDogTWF0aC5jZWlsKG4pO1xufSAvLyBOQjogbXV0YXRlcyBwYXJhbWV0ZXJzXG5cblxuZnVuY3Rpb24gY29udmVydChtYXRyaXgsIGZyb21NYXAsIGZyb21Vbml0LCB0b01hcCwgdG9Vbml0KSB7XG4gIHZhciBjb252ID0gbWF0cml4W3RvVW5pdF1bZnJvbVVuaXRdLFxuICAgICAgcmF3ID0gZnJvbU1hcFtmcm9tVW5pdF0gLyBjb252LFxuICAgICAgc2FtZVNpZ24gPSBNYXRoLnNpZ24ocmF3KSA9PT0gTWF0aC5zaWduKHRvTWFwW3RvVW5pdF0pLFxuICAgICAgLy8gb2ssIHNvIHRoaXMgaXMgd2lsZCwgYnV0IHNlZSB0aGUgbWF0cml4IGluIHRoZSB0ZXN0c1xuICBhZGRlZCA9ICFzYW1lU2lnbiAmJiB0b01hcFt0b1VuaXRdICE9PSAwICYmIE1hdGguYWJzKHJhdykgPD0gMSA/IGFudGlUcnVuYyhyYXcpIDogTWF0aC50cnVuYyhyYXcpO1xuICB0b01hcFt0b1VuaXRdICs9IGFkZGVkO1xuICBmcm9tTWFwW2Zyb21Vbml0XSAtPSBhZGRlZCAqIGNvbnY7XG59IC8vIE5COiBtdXRhdGVzIHBhcmFtZXRlcnNcblxuXG5mdW5jdGlvbiBub3JtYWxpemVWYWx1ZXMobWF0cml4LCB2YWxzKSB7XG4gIHJldmVyc2VVbml0cy5yZWR1Y2UoZnVuY3Rpb24gKHByZXZpb3VzLCBjdXJyZW50KSB7XG4gICAgaWYgKCFpc1VuZGVmaW5lZCh2YWxzW2N1cnJlbnRdKSkge1xuICAgICAgaWYgKHByZXZpb3VzKSB7XG4gICAgICAgIGNvbnZlcnQobWF0cml4LCB2YWxzLCBwcmV2aW91cywgdmFscywgY3VycmVudCk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBjdXJyZW50O1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gcHJldmlvdXM7XG4gICAgfVxuICB9LCBudWxsKTtcbn1cbi8qKlxuICogQSBEdXJhdGlvbiBvYmplY3QgcmVwcmVzZW50cyBhIHBlcmlvZCBvZiB0aW1lLCBsaWtlIFwiMiBtb250aHNcIiBvciBcIjEgZGF5LCAxIGhvdXJcIi4gQ29uY2VwdHVhbGx5LCBpdCdzIGp1c3QgYSBtYXAgb2YgdW5pdHMgdG8gdGhlaXIgcXVhbnRpdGllcywgYWNjb21wYW5pZWQgYnkgc29tZSBhZGRpdGlvbmFsIGNvbmZpZ3VyYXRpb24gYW5kIG1ldGhvZHMgZm9yIGNyZWF0aW5nLCBwYXJzaW5nLCBpbnRlcnJvZ2F0aW5nLCB0cmFuc2Zvcm1pbmcsIGFuZCBmb3JtYXR0aW5nIHRoZW0uIFRoZXkgY2FuIGJlIHVzZWQgb24gdGhlaXIgb3duIG9yIGluIGNvbmp1bmN0aW9uIHdpdGggb3RoZXIgTHV4b24gdHlwZXM7IGZvciBleGFtcGxlLCB5b3UgY2FuIHVzZSB7QGxpbmsgRGF0ZVRpbWUjcGx1c30gdG8gYWRkIGEgRHVyYXRpb24gb2JqZWN0IHRvIGEgRGF0ZVRpbWUsIHByb2R1Y2luZyBhbm90aGVyIERhdGVUaW1lLlxuICpcbiAqIEhlcmUgaXMgYSBicmllZiBvdmVydmlldyBvZiBjb21tb25seSB1c2VkIG1ldGhvZHMgYW5kIGdldHRlcnMgaW4gRHVyYXRpb246XG4gKlxuICogKiAqKkNyZWF0aW9uKiogVG8gY3JlYXRlIGEgRHVyYXRpb24sIHVzZSB7QGxpbmsgRHVyYXRpb24jZnJvbU1pbGxpc30sIHtAbGluayBEdXJhdGlvbiNmcm9tT2JqZWN0fSwgb3Ige0BsaW5rIER1cmF0aW9uI2Zyb21JU099LlxuICogKiAqKlVuaXQgdmFsdWVzKiogU2VlIHRoZSB7QGxpbmsgRHVyYXRpb24jeWVhcnN9LCB7QGxpbmsgRHVyYXRpb24ubW9udGhzfSwge0BsaW5rIER1cmF0aW9uI3dlZWtzfSwge0BsaW5rIER1cmF0aW9uI2RheXN9LCB7QGxpbmsgRHVyYXRpb24jaG91cnN9LCB7QGxpbmsgRHVyYXRpb24jbWludXRlc30sIHtAbGluayBEdXJhdGlvbiNzZWNvbmRzfSwge0BsaW5rIER1cmF0aW9uI21pbGxpc2Vjb25kc30gYWNjZXNzb3JzLlxuICogKiAqKkNvbmZpZ3VyYXRpb24qKiBTZWUgIHtAbGluayBEdXJhdGlvbiNsb2NhbGV9IGFuZCB7QGxpbmsgRHVyYXRpb24jbnVtYmVyaW5nU3lzdGVtfSBhY2Nlc3NvcnMuXG4gKiAqICoqVHJhbnNmb3JtYXRpb24qKiBUbyBjcmVhdGUgbmV3IER1cmF0aW9ucyBvdXQgb2Ygb2xkIG9uZXMgdXNlIHtAbGluayBEdXJhdGlvbiNwbHVzfSwge0BsaW5rIER1cmF0aW9uI21pbnVzfSwge0BsaW5rIER1cmF0aW9uI25vcm1hbGl6ZX0sIHtAbGluayBEdXJhdGlvbiNzZXR9LCB7QGxpbmsgRHVyYXRpb24jcmVjb25maWd1cmV9LCB7QGxpbmsgRHVyYXRpb24jc2hpZnRUb30sIGFuZCB7QGxpbmsgRHVyYXRpb24jbmVnYXRlfS5cbiAqICogKipPdXRwdXQqKiBUbyBjb252ZXJ0IHRoZSBEdXJhdGlvbiBpbnRvIG90aGVyIHJlcHJlc2VudGF0aW9ucywgc2VlIHtAbGluayBEdXJhdGlvbiNhc30sIHtAbGluayBEdXJhdGlvbiN0b0lTT30sIHtAbGluayBEdXJhdGlvbiN0b0Zvcm1hdH0sIGFuZCB7QGxpbmsgRHVyYXRpb24jdG9KU09OfVxuICpcbiAqIFRoZXJlJ3MgYXJlIG1vcmUgbWV0aG9kcyBkb2N1bWVudGVkIGJlbG93LiBJbiBhZGRpdGlvbiwgZm9yIG1vcmUgaW5mb3JtYXRpb24gb24gc3VidGxlciB0b3BpY3MgbGlrZSBpbnRlcm5hdGlvbmFsaXphdGlvbiBhbmQgdmFsaWRpdHksIHNlZSB0aGUgZXh0ZXJuYWwgZG9jdW1lbnRhdGlvbi5cbiAqL1xuXG5cbnZhciBEdXJhdGlvbiA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7XG4gIC8qKlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgZnVuY3Rpb24gRHVyYXRpb24oY29uZmlnKSB7XG4gICAgdmFyIGFjY3VyYXRlID0gY29uZmlnLmNvbnZlcnNpb25BY2N1cmFjeSA9PT0gXCJsb25ndGVybVwiIHx8IGZhbHNlO1xuICAgIC8qKlxuICAgICAqIEBhY2Nlc3MgcHJpdmF0ZVxuICAgICAqL1xuXG4gICAgdGhpcy52YWx1ZXMgPSBjb25maWcudmFsdWVzO1xuICAgIC8qKlxuICAgICAqIEBhY2Nlc3MgcHJpdmF0ZVxuICAgICAqL1xuXG4gICAgdGhpcy5sb2MgPSBjb25maWcubG9jIHx8IExvY2FsZS5jcmVhdGUoKTtcbiAgICAvKipcbiAgICAgKiBAYWNjZXNzIHByaXZhdGVcbiAgICAgKi9cblxuICAgIHRoaXMuY29udmVyc2lvbkFjY3VyYWN5ID0gYWNjdXJhdGUgPyBcImxvbmd0ZXJtXCIgOiBcImNhc3VhbFwiO1xuICAgIC8qKlxuICAgICAqIEBhY2Nlc3MgcHJpdmF0ZVxuICAgICAqL1xuXG4gICAgdGhpcy5pbnZhbGlkID0gY29uZmlnLmludmFsaWQgfHwgbnVsbDtcbiAgICAvKipcbiAgICAgKiBAYWNjZXNzIHByaXZhdGVcbiAgICAgKi9cblxuICAgIHRoaXMubWF0cml4ID0gYWNjdXJhdGUgPyBhY2N1cmF0ZU1hdHJpeCA6IGNhc3VhbE1hdHJpeDtcbiAgICAvKipcbiAgICAgKiBAYWNjZXNzIHByaXZhdGVcbiAgICAgKi9cblxuICAgIHRoaXMuaXNMdXhvbkR1cmF0aW9uID0gdHJ1ZTtcbiAgfVxuICAvKipcbiAgICogQ3JlYXRlIER1cmF0aW9uIGZyb20gYSBudW1iZXIgb2YgbWlsbGlzZWNvbmRzLlxuICAgKiBAcGFyYW0ge251bWJlcn0gY291bnQgb2YgbWlsbGlzZWNvbmRzXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRzIC0gb3B0aW9ucyBmb3IgcGFyc2luZ1xuICAgKiBAcGFyYW0ge3N0cmluZ30gW29wdHMubG9jYWxlPSdlbi1VUyddIC0gdGhlIGxvY2FsZSB0byB1c2VcbiAgICogQHBhcmFtIHtzdHJpbmd9IG9wdHMubnVtYmVyaW5nU3lzdGVtIC0gdGhlIG51bWJlcmluZyBzeXN0ZW0gdG8gdXNlXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBbb3B0cy5jb252ZXJzaW9uQWNjdXJhY3k9J2Nhc3VhbCddIC0gdGhlIGNvbnZlcnNpb24gc3lzdGVtIHRvIHVzZVxuICAgKiBAcmV0dXJuIHtEdXJhdGlvbn1cbiAgICovXG5cblxuICBEdXJhdGlvbi5mcm9tTWlsbGlzID0gZnVuY3Rpb24gZnJvbU1pbGxpcyhjb3VudCwgb3B0cykge1xuICAgIHJldHVybiBEdXJhdGlvbi5mcm9tT2JqZWN0KHtcbiAgICAgIG1pbGxpc2Vjb25kczogY291bnRcbiAgICB9LCBvcHRzKTtcbiAgfVxuICAvKipcbiAgICogQ3JlYXRlIGEgRHVyYXRpb24gZnJvbSBhIEphdmFTY3JpcHQgb2JqZWN0IHdpdGgga2V5cyBsaWtlICd5ZWFycycgYW5kICdob3VycycuXG4gICAqIElmIHRoaXMgb2JqZWN0IGlzIGVtcHR5IHRoZW4gYSB6ZXJvIG1pbGxpc2Vjb25kcyBkdXJhdGlvbiBpcyByZXR1cm5lZC5cbiAgICogQHBhcmFtIHtPYmplY3R9IG9iaiAtIHRoZSBvYmplY3QgdG8gY3JlYXRlIHRoZSBEYXRlVGltZSBmcm9tXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBvYmoueWVhcnNcbiAgICogQHBhcmFtIHtudW1iZXJ9IG9iai5xdWFydGVyc1xuICAgKiBAcGFyYW0ge251bWJlcn0gb2JqLm1vbnRoc1xuICAgKiBAcGFyYW0ge251bWJlcn0gb2JqLndlZWtzXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBvYmouZGF5c1xuICAgKiBAcGFyYW0ge251bWJlcn0gb2JqLmhvdXJzXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBvYmoubWludXRlc1xuICAgKiBAcGFyYW0ge251bWJlcn0gb2JqLnNlY29uZHNcbiAgICogQHBhcmFtIHtudW1iZXJ9IG9iai5taWxsaXNlY29uZHNcbiAgICogQHBhcmFtIHtPYmplY3R9IFtvcHRzPVtdXSAtIG9wdGlvbnMgZm9yIGNyZWF0aW5nIHRoaXMgRHVyYXRpb25cbiAgICogQHBhcmFtIHtzdHJpbmd9IFtvcHRzLmxvY2FsZT0nZW4tVVMnXSAtIHRoZSBsb2NhbGUgdG8gdXNlXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBvcHRzLm51bWJlcmluZ1N5c3RlbSAtIHRoZSBudW1iZXJpbmcgc3lzdGVtIHRvIHVzZVxuICAgKiBAcGFyYW0ge3N0cmluZ30gW29wdHMuY29udmVyc2lvbkFjY3VyYWN5PSdjYXN1YWwnXSAtIHRoZSBjb252ZXJzaW9uIHN5c3RlbSB0byB1c2VcbiAgICogQHJldHVybiB7RHVyYXRpb259XG4gICAqL1xuICA7XG5cbiAgRHVyYXRpb24uZnJvbU9iamVjdCA9IGZ1bmN0aW9uIGZyb21PYmplY3Qob2JqLCBvcHRzKSB7XG4gICAgaWYgKG9wdHMgPT09IHZvaWQgMCkge1xuICAgICAgb3B0cyA9IHt9O1xuICAgIH1cblxuICAgIGlmIChvYmogPT0gbnVsbCB8fCB0eXBlb2Ygb2JqICE9PSBcIm9iamVjdFwiKSB7XG4gICAgICB0aHJvdyBuZXcgSW52YWxpZEFyZ3VtZW50RXJyb3IoXCJEdXJhdGlvbi5mcm9tT2JqZWN0OiBhcmd1bWVudCBleHBlY3RlZCB0byBiZSBhbiBvYmplY3QsIGdvdCBcIiArIChvYmogPT09IG51bGwgPyBcIm51bGxcIiA6IHR5cGVvZiBvYmopKTtcbiAgICB9XG5cbiAgICByZXR1cm4gbmV3IER1cmF0aW9uKHtcbiAgICAgIHZhbHVlczogbm9ybWFsaXplT2JqZWN0KG9iaiwgRHVyYXRpb24ubm9ybWFsaXplVW5pdCksXG4gICAgICBsb2M6IExvY2FsZS5mcm9tT2JqZWN0KG9wdHMpLFxuICAgICAgY29udmVyc2lvbkFjY3VyYWN5OiBvcHRzLmNvbnZlcnNpb25BY2N1cmFjeVxuICAgIH0pO1xuICB9XG4gIC8qKlxuICAgKiBDcmVhdGUgYSBEdXJhdGlvbiBmcm9tIER1cmF0aW9uTGlrZS5cbiAgICpcbiAgICogQHBhcmFtIHtPYmplY3QgfCBudW1iZXIgfCBEdXJhdGlvbn0gZHVyYXRpb25MaWtlXG4gICAqIE9uZSBvZjpcbiAgICogLSBvYmplY3Qgd2l0aCBrZXlzIGxpa2UgJ3llYXJzJyBhbmQgJ2hvdXJzJy5cbiAgICogLSBudW1iZXIgcmVwcmVzZW50aW5nIG1pbGxpc2Vjb25kc1xuICAgKiAtIER1cmF0aW9uIGluc3RhbmNlXG4gICAqIEByZXR1cm4ge0R1cmF0aW9ufVxuICAgKi9cbiAgO1xuXG4gIER1cmF0aW9uLmZyb21EdXJhdGlvbkxpa2UgPSBmdW5jdGlvbiBmcm9tRHVyYXRpb25MaWtlKGR1cmF0aW9uTGlrZSkge1xuICAgIGlmIChpc051bWJlcihkdXJhdGlvbkxpa2UpKSB7XG4gICAgICByZXR1cm4gRHVyYXRpb24uZnJvbU1pbGxpcyhkdXJhdGlvbkxpa2UpO1xuICAgIH0gZWxzZSBpZiAoRHVyYXRpb24uaXNEdXJhdGlvbihkdXJhdGlvbkxpa2UpKSB7XG4gICAgICByZXR1cm4gZHVyYXRpb25MaWtlO1xuICAgIH0gZWxzZSBpZiAodHlwZW9mIGR1cmF0aW9uTGlrZSA9PT0gXCJvYmplY3RcIikge1xuICAgICAgcmV0dXJuIER1cmF0aW9uLmZyb21PYmplY3QoZHVyYXRpb25MaWtlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhyb3cgbmV3IEludmFsaWRBcmd1bWVudEVycm9yKFwiVW5rbm93biBkdXJhdGlvbiBhcmd1bWVudCBcIiArIGR1cmF0aW9uTGlrZSArIFwiIG9mIHR5cGUgXCIgKyB0eXBlb2YgZHVyYXRpb25MaWtlKTtcbiAgICB9XG4gIH1cbiAgLyoqXG4gICAqIENyZWF0ZSBhIER1cmF0aW9uIGZyb20gYW4gSVNPIDg2MDEgZHVyYXRpb24gc3RyaW5nLlxuICAgKiBAcGFyYW0ge3N0cmluZ30gdGV4dCAtIHRleHQgdG8gcGFyc2VcbiAgICogQHBhcmFtIHtPYmplY3R9IG9wdHMgLSBvcHRpb25zIGZvciBwYXJzaW5nXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBbb3B0cy5sb2NhbGU9J2VuLVVTJ10gLSB0aGUgbG9jYWxlIHRvIHVzZVxuICAgKiBAcGFyYW0ge3N0cmluZ30gb3B0cy5udW1iZXJpbmdTeXN0ZW0gLSB0aGUgbnVtYmVyaW5nIHN5c3RlbSB0byB1c2VcbiAgICogQHBhcmFtIHtzdHJpbmd9IFtvcHRzLmNvbnZlcnNpb25BY2N1cmFjeT0nY2FzdWFsJ10gLSB0aGUgY29udmVyc2lvbiBzeXN0ZW0gdG8gdXNlXG4gICAqIEBzZWUgaHR0cHM6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvSVNPXzg2MDEjRHVyYXRpb25zXG4gICAqIEBleGFtcGxlIER1cmF0aW9uLmZyb21JU08oJ1AzWTZNMVc0RFQxMkgzME01UycpLnRvT2JqZWN0KCkgLy89PiB7IHllYXJzOiAzLCBtb250aHM6IDYsIHdlZWtzOiAxLCBkYXlzOiA0LCBob3VyczogMTIsIG1pbnV0ZXM6IDMwLCBzZWNvbmRzOiA1IH1cbiAgICogQGV4YW1wbGUgRHVyYXRpb24uZnJvbUlTTygnUFQyM0gnKS50b09iamVjdCgpIC8vPT4geyBob3VyczogMjMgfVxuICAgKiBAZXhhbXBsZSBEdXJhdGlvbi5mcm9tSVNPKCdQNVkzTScpLnRvT2JqZWN0KCkgLy89PiB7IHllYXJzOiA1LCBtb250aHM6IDMgfVxuICAgKiBAcmV0dXJuIHtEdXJhdGlvbn1cbiAgICovXG4gIDtcblxuICBEdXJhdGlvbi5mcm9tSVNPID0gZnVuY3Rpb24gZnJvbUlTTyh0ZXh0LCBvcHRzKSB7XG4gICAgdmFyIF9wYXJzZUlTT0R1cmF0aW9uID0gcGFyc2VJU09EdXJhdGlvbih0ZXh0KSxcbiAgICAgICAgcGFyc2VkID0gX3BhcnNlSVNPRHVyYXRpb25bMF07XG5cbiAgICBpZiAocGFyc2VkKSB7XG4gICAgICByZXR1cm4gRHVyYXRpb24uZnJvbU9iamVjdChwYXJzZWQsIG9wdHMpO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gRHVyYXRpb24uaW52YWxpZChcInVucGFyc2FibGVcIiwgXCJ0aGUgaW5wdXQgXFxcIlwiICsgdGV4dCArIFwiXFxcIiBjYW4ndCBiZSBwYXJzZWQgYXMgSVNPIDg2MDFcIik7XG4gICAgfVxuICB9XG4gIC8qKlxuICAgKiBDcmVhdGUgYSBEdXJhdGlvbiBmcm9tIGFuIElTTyA4NjAxIHRpbWUgc3RyaW5nLlxuICAgKiBAcGFyYW0ge3N0cmluZ30gdGV4dCAtIHRleHQgdG8gcGFyc2VcbiAgICogQHBhcmFtIHtPYmplY3R9IG9wdHMgLSBvcHRpb25zIGZvciBwYXJzaW5nXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBbb3B0cy5sb2NhbGU9J2VuLVVTJ10gLSB0aGUgbG9jYWxlIHRvIHVzZVxuICAgKiBAcGFyYW0ge3N0cmluZ30gb3B0cy5udW1iZXJpbmdTeXN0ZW0gLSB0aGUgbnVtYmVyaW5nIHN5c3RlbSB0byB1c2VcbiAgICogQHBhcmFtIHtzdHJpbmd9IFtvcHRzLmNvbnZlcnNpb25BY2N1cmFjeT0nY2FzdWFsJ10gLSB0aGUgY29udmVyc2lvbiBzeXN0ZW0gdG8gdXNlXG4gICAqIEBzZWUgaHR0cHM6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvSVNPXzg2MDEjVGltZXNcbiAgICogQGV4YW1wbGUgRHVyYXRpb24uZnJvbUlTT1RpbWUoJzExOjIyOjMzLjQ0NCcpLnRvT2JqZWN0KCkgLy89PiB7IGhvdXJzOiAxMSwgbWludXRlczogMjIsIHNlY29uZHM6IDMzLCBtaWxsaXNlY29uZHM6IDQ0NCB9XG4gICAqIEBleGFtcGxlIER1cmF0aW9uLmZyb21JU09UaW1lKCcxMTowMCcpLnRvT2JqZWN0KCkgLy89PiB7IGhvdXJzOiAxMSwgbWludXRlczogMCwgc2Vjb25kczogMCB9XG4gICAqIEBleGFtcGxlIER1cmF0aW9uLmZyb21JU09UaW1lKCdUMTE6MDAnKS50b09iamVjdCgpIC8vPT4geyBob3VyczogMTEsIG1pbnV0ZXM6IDAsIHNlY29uZHM6IDAgfVxuICAgKiBAZXhhbXBsZSBEdXJhdGlvbi5mcm9tSVNPVGltZSgnMTEwMCcpLnRvT2JqZWN0KCkgLy89PiB7IGhvdXJzOiAxMSwgbWludXRlczogMCwgc2Vjb25kczogMCB9XG4gICAqIEBleGFtcGxlIER1cmF0aW9uLmZyb21JU09UaW1lKCdUMTEwMCcpLnRvT2JqZWN0KCkgLy89PiB7IGhvdXJzOiAxMSwgbWludXRlczogMCwgc2Vjb25kczogMCB9XG4gICAqIEByZXR1cm4ge0R1cmF0aW9ufVxuICAgKi9cbiAgO1xuXG4gIER1cmF0aW9uLmZyb21JU09UaW1lID0gZnVuY3Rpb24gZnJvbUlTT1RpbWUodGV4dCwgb3B0cykge1xuICAgIHZhciBfcGFyc2VJU09UaW1lT25seSA9IHBhcnNlSVNPVGltZU9ubHkodGV4dCksXG4gICAgICAgIHBhcnNlZCA9IF9wYXJzZUlTT1RpbWVPbmx5WzBdO1xuXG4gICAgaWYgKHBhcnNlZCkge1xuICAgICAgcmV0dXJuIER1cmF0aW9uLmZyb21PYmplY3QocGFyc2VkLCBvcHRzKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIER1cmF0aW9uLmludmFsaWQoXCJ1bnBhcnNhYmxlXCIsIFwidGhlIGlucHV0IFxcXCJcIiArIHRleHQgKyBcIlxcXCIgY2FuJ3QgYmUgcGFyc2VkIGFzIElTTyA4NjAxXCIpO1xuICAgIH1cbiAgfVxuICAvKipcbiAgICogQ3JlYXRlIGFuIGludmFsaWQgRHVyYXRpb24uXG4gICAqIEBwYXJhbSB7c3RyaW5nfSByZWFzb24gLSBzaW1wbGUgc3RyaW5nIG9mIHdoeSB0aGlzIGRhdGV0aW1lIGlzIGludmFsaWQuIFNob3VsZCBub3QgY29udGFpbiBwYXJhbWV0ZXJzIG9yIGFueXRoaW5nIGVsc2UgZGF0YS1kZXBlbmRlbnRcbiAgICogQHBhcmFtIHtzdHJpbmd9IFtleHBsYW5hdGlvbj1udWxsXSAtIGxvbmdlciBleHBsYW5hdGlvbiwgbWF5IGluY2x1ZGUgcGFyYW1ldGVycyBhbmQgb3RoZXIgdXNlZnVsIGRlYnVnZ2luZyBpbmZvcm1hdGlvblxuICAgKiBAcmV0dXJuIHtEdXJhdGlvbn1cbiAgICovXG4gIDtcblxuICBEdXJhdGlvbi5pbnZhbGlkID0gZnVuY3Rpb24gaW52YWxpZChyZWFzb24sIGV4cGxhbmF0aW9uKSB7XG4gICAgaWYgKGV4cGxhbmF0aW9uID09PSB2b2lkIDApIHtcbiAgICAgIGV4cGxhbmF0aW9uID0gbnVsbDtcbiAgICB9XG5cbiAgICBpZiAoIXJlYXNvbikge1xuICAgICAgdGhyb3cgbmV3IEludmFsaWRBcmd1bWVudEVycm9yKFwibmVlZCB0byBzcGVjaWZ5IGEgcmVhc29uIHRoZSBEdXJhdGlvbiBpcyBpbnZhbGlkXCIpO1xuICAgIH1cblxuICAgIHZhciBpbnZhbGlkID0gcmVhc29uIGluc3RhbmNlb2YgSW52YWxpZCA/IHJlYXNvbiA6IG5ldyBJbnZhbGlkKHJlYXNvbiwgZXhwbGFuYXRpb24pO1xuXG4gICAgaWYgKFNldHRpbmdzLnRocm93T25JbnZhbGlkKSB7XG4gICAgICB0aHJvdyBuZXcgSW52YWxpZER1cmF0aW9uRXJyb3IoaW52YWxpZCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBuZXcgRHVyYXRpb24oe1xuICAgICAgICBpbnZhbGlkOiBpbnZhbGlkXG4gICAgICB9KTtcbiAgICB9XG4gIH1cbiAgLyoqXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICA7XG5cbiAgRHVyYXRpb24ubm9ybWFsaXplVW5pdCA9IGZ1bmN0aW9uIG5vcm1hbGl6ZVVuaXQodW5pdCkge1xuICAgIHZhciBub3JtYWxpemVkID0ge1xuICAgICAgeWVhcjogXCJ5ZWFyc1wiLFxuICAgICAgeWVhcnM6IFwieWVhcnNcIixcbiAgICAgIHF1YXJ0ZXI6IFwicXVhcnRlcnNcIixcbiAgICAgIHF1YXJ0ZXJzOiBcInF1YXJ0ZXJzXCIsXG4gICAgICBtb250aDogXCJtb250aHNcIixcbiAgICAgIG1vbnRoczogXCJtb250aHNcIixcbiAgICAgIHdlZWs6IFwid2Vla3NcIixcbiAgICAgIHdlZWtzOiBcIndlZWtzXCIsXG4gICAgICBkYXk6IFwiZGF5c1wiLFxuICAgICAgZGF5czogXCJkYXlzXCIsXG4gICAgICBob3VyOiBcImhvdXJzXCIsXG4gICAgICBob3VyczogXCJob3Vyc1wiLFxuICAgICAgbWludXRlOiBcIm1pbnV0ZXNcIixcbiAgICAgIG1pbnV0ZXM6IFwibWludXRlc1wiLFxuICAgICAgc2Vjb25kOiBcInNlY29uZHNcIixcbiAgICAgIHNlY29uZHM6IFwic2Vjb25kc1wiLFxuICAgICAgbWlsbGlzZWNvbmQ6IFwibWlsbGlzZWNvbmRzXCIsXG4gICAgICBtaWxsaXNlY29uZHM6IFwibWlsbGlzZWNvbmRzXCJcbiAgICB9W3VuaXQgPyB1bml0LnRvTG93ZXJDYXNlKCkgOiB1bml0XTtcbiAgICBpZiAoIW5vcm1hbGl6ZWQpIHRocm93IG5ldyBJbnZhbGlkVW5pdEVycm9yKHVuaXQpO1xuICAgIHJldHVybiBub3JtYWxpemVkO1xuICB9XG4gIC8qKlxuICAgKiBDaGVjayBpZiBhbiBvYmplY3QgaXMgYSBEdXJhdGlvbi4gV29ya3MgYWNyb3NzIGNvbnRleHQgYm91bmRhcmllc1xuICAgKiBAcGFyYW0ge29iamVjdH0gb1xuICAgKiBAcmV0dXJuIHtib29sZWFufVxuICAgKi9cbiAgO1xuXG4gIER1cmF0aW9uLmlzRHVyYXRpb24gPSBmdW5jdGlvbiBpc0R1cmF0aW9uKG8pIHtcbiAgICByZXR1cm4gbyAmJiBvLmlzTHV4b25EdXJhdGlvbiB8fCBmYWxzZTtcbiAgfVxuICAvKipcbiAgICogR2V0ICB0aGUgbG9jYWxlIG9mIGEgRHVyYXRpb24sIHN1Y2ggJ2VuLUdCJ1xuICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgKi9cbiAgO1xuXG4gIHZhciBfcHJvdG8gPSBEdXJhdGlvbi5wcm90b3R5cGU7XG5cbiAgLyoqXG4gICAqIFJldHVybnMgYSBzdHJpbmcgcmVwcmVzZW50YXRpb24gb2YgdGhpcyBEdXJhdGlvbiBmb3JtYXR0ZWQgYWNjb3JkaW5nIHRvIHRoZSBzcGVjaWZpZWQgZm9ybWF0IHN0cmluZy4gWW91IG1heSB1c2UgdGhlc2UgdG9rZW5zOlxuICAgKiAqIGBTYCBmb3IgbWlsbGlzZWNvbmRzXG4gICAqICogYHNgIGZvciBzZWNvbmRzXG4gICAqICogYG1gIGZvciBtaW51dGVzXG4gICAqICogYGhgIGZvciBob3Vyc1xuICAgKiAqIGBkYCBmb3IgZGF5c1xuICAgKiAqIGBNYCBmb3IgbW9udGhzXG4gICAqICogYHlgIGZvciB5ZWFyc1xuICAgKiBOb3RlczpcbiAgICogKiBBZGQgcGFkZGluZyBieSByZXBlYXRpbmcgdGhlIHRva2VuLCBlLmcuIFwieXlcIiBwYWRzIHRoZSB5ZWFycyB0byB0d28gZGlnaXRzLCBcImhoaGhcIiBwYWRzIHRoZSBob3VycyBvdXQgdG8gZm91ciBkaWdpdHNcbiAgICogKiBUaGUgZHVyYXRpb24gd2lsbCBiZSBjb252ZXJ0ZWQgdG8gdGhlIHNldCBvZiB1bml0cyBpbiB0aGUgZm9ybWF0IHN0cmluZyB1c2luZyB7QGxpbmsgRHVyYXRpb24jc2hpZnRUb30gYW5kIHRoZSBEdXJhdGlvbnMncyBjb252ZXJzaW9uIGFjY3VyYWN5IHNldHRpbmcuXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBmbXQgLSB0aGUgZm9ybWF0IHN0cmluZ1xuICAgKiBAcGFyYW0ge09iamVjdH0gb3B0cyAtIG9wdGlvbnNcbiAgICogQHBhcmFtIHtib29sZWFufSBbb3B0cy5mbG9vcj10cnVlXSAtIGZsb29yIG51bWVyaWNhbCB2YWx1ZXNcbiAgICogQGV4YW1wbGUgRHVyYXRpb24uZnJvbU9iamVjdCh7IHllYXJzOiAxLCBkYXlzOiA2LCBzZWNvbmRzOiAyIH0pLnRvRm9ybWF0KFwieSBkIHNcIikgLy89PiBcIjEgNiAyXCJcbiAgICogQGV4YW1wbGUgRHVyYXRpb24uZnJvbU9iamVjdCh7IHllYXJzOiAxLCBkYXlzOiA2LCBzZWNvbmRzOiAyIH0pLnRvRm9ybWF0KFwieXkgZGQgc3NzXCIpIC8vPT4gXCIwMSAwNiAwMDJcIlxuICAgKiBAZXhhbXBsZSBEdXJhdGlvbi5mcm9tT2JqZWN0KHsgeWVhcnM6IDEsIGRheXM6IDYsIHNlY29uZHM6IDIgfSkudG9Gb3JtYXQoXCJNIFNcIikgLy89PiBcIjEyIDUxODQwMjAwMFwiXG4gICAqIEByZXR1cm4ge3N0cmluZ31cbiAgICovXG4gIF9wcm90by50b0Zvcm1hdCA9IGZ1bmN0aW9uIHRvRm9ybWF0KGZtdCwgb3B0cykge1xuICAgIGlmIChvcHRzID09PSB2b2lkIDApIHtcbiAgICAgIG9wdHMgPSB7fTtcbiAgICB9XG5cbiAgICAvLyByZXZlcnNlLWNvbXBhdCBzaW5jZSAxLjI7IHdlIGFsd2F5cyByb3VuZCBkb3duIG5vdywgbmV2ZXIgdXAsIGFuZCB3ZSBkbyBpdCBieSBkZWZhdWx0XG4gICAgdmFyIGZtdE9wdHMgPSBfZXh0ZW5kcyh7fSwgb3B0cywge1xuICAgICAgZmxvb3I6IG9wdHMucm91bmQgIT09IGZhbHNlICYmIG9wdHMuZmxvb3IgIT09IGZhbHNlXG4gICAgfSk7XG5cbiAgICByZXR1cm4gdGhpcy5pc1ZhbGlkID8gRm9ybWF0dGVyLmNyZWF0ZSh0aGlzLmxvYywgZm10T3B0cykuZm9ybWF0RHVyYXRpb25Gcm9tU3RyaW5nKHRoaXMsIGZtdCkgOiBJTlZBTElEJDI7XG4gIH1cbiAgLyoqXG4gICAqIFJldHVybnMgYSBzdHJpbmcgcmVwcmVzZW50YXRpb24gb2YgYSBEdXJhdGlvbiB3aXRoIGFsbCB1bml0cyBpbmNsdWRlZFxuICAgKiBUbyBtb2RpZnkgaXRzIGJlaGF2aW9yIHVzZSB0aGUgYGxpc3RTdHlsZWAgYW5kIGFueSBJbnRsLk51bWJlckZvcm1hdCBvcHRpb24sIHRob3VnaCBgdW5pdERpc3BsYXlgIGlzIGVzcGVjaWFsbHkgcmVsZXZhbnQuIFNlZSB7QGxpbmsgSW50bC5OdW1iZXJGb3JtYXR9LlxuICAgKiBAcGFyYW0gb3B0cyAtIE9uIG9wdGlvbiBvYmplY3QgdG8gb3ZlcnJpZGUgdGhlIGZvcm1hdHRpbmcuIEFjY2VwdHMgdGhlIHNhbWUga2V5cyBhcyB0aGUgb3B0aW9ucyBwYXJhbWV0ZXIgb2YgdGhlIG5hdGl2ZSBgSW50Lk51bWJlckZvcm1hdGAgY29uc3RydWN0b3IsIGFzIHdlbGwgYXMgYGxpc3RTdHlsZWAuXG4gICAqIEBleGFtcGxlXG4gICAqIGBgYGpzXG4gICAqIHZhciBkdXIgPSBEdXJhdGlvbi5mcm9tT2JqZWN0KHsgZGF5czogMSwgaG91cnM6IDUsIG1pbnV0ZXM6IDYgfSlcbiAgICogZHVyLnRvSHVtYW4oKSAvLz0+ICcxIGRheSwgNSBob3VycywgNiBtaW51dGVzJ1xuICAgKiBkdXIudG9IdW1hbih7IGxpc3RTdHlsZTogXCJsb25nXCIgfSkgLy89PiAnMSBkYXksIDUgaG91cnMsIGFuZCA2IG1pbnV0ZXMnXG4gICAqIGR1ci50b0h1bWFuKHsgdW5pdERpc3BsYXk6IFwic2hvcnRcIiB9KSAvLz0+ICcxIGRheSwgNSBociwgNiBtaW4nXG4gICAqIGBgYFxuICAgKi9cbiAgO1xuXG4gIF9wcm90by50b0h1bWFuID0gZnVuY3Rpb24gdG9IdW1hbihvcHRzKSB7XG4gICAgdmFyIF90aGlzID0gdGhpcztcblxuICAgIGlmIChvcHRzID09PSB2b2lkIDApIHtcbiAgICAgIG9wdHMgPSB7fTtcbiAgICB9XG5cbiAgICB2YXIgbCA9IG9yZGVyZWRVbml0cyQxLm1hcChmdW5jdGlvbiAodW5pdCkge1xuICAgICAgdmFyIHZhbCA9IF90aGlzLnZhbHVlc1t1bml0XTtcblxuICAgICAgaWYgKGlzVW5kZWZpbmVkKHZhbCkpIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBfdGhpcy5sb2MubnVtYmVyRm9ybWF0dGVyKF9leHRlbmRzKHtcbiAgICAgICAgc3R5bGU6IFwidW5pdFwiLFxuICAgICAgICB1bml0RGlzcGxheTogXCJsb25nXCJcbiAgICAgIH0sIG9wdHMsIHtcbiAgICAgICAgdW5pdDogdW5pdC5zbGljZSgwLCAtMSlcbiAgICAgIH0pKS5mb3JtYXQodmFsKTtcbiAgICB9KS5maWx0ZXIoZnVuY3Rpb24gKG4pIHtcbiAgICAgIHJldHVybiBuO1xuICAgIH0pO1xuICAgIHJldHVybiB0aGlzLmxvYy5saXN0Rm9ybWF0dGVyKF9leHRlbmRzKHtcbiAgICAgIHR5cGU6IFwiY29uanVuY3Rpb25cIixcbiAgICAgIHN0eWxlOiBvcHRzLmxpc3RTdHlsZSB8fCBcIm5hcnJvd1wiXG4gICAgfSwgb3B0cykpLmZvcm1hdChsKTtcbiAgfVxuICAvKipcbiAgICogUmV0dXJucyBhIEphdmFTY3JpcHQgb2JqZWN0IHdpdGggdGhpcyBEdXJhdGlvbidzIHZhbHVlcy5cbiAgICogQGV4YW1wbGUgRHVyYXRpb24uZnJvbU9iamVjdCh7IHllYXJzOiAxLCBkYXlzOiA2LCBzZWNvbmRzOiAyIH0pLnRvT2JqZWN0KCkgLy89PiB7IHllYXJzOiAxLCBkYXlzOiA2LCBzZWNvbmRzOiAyIH1cbiAgICogQHJldHVybiB7T2JqZWN0fVxuICAgKi9cbiAgO1xuXG4gIF9wcm90by50b09iamVjdCA9IGZ1bmN0aW9uIHRvT2JqZWN0KCkge1xuICAgIGlmICghdGhpcy5pc1ZhbGlkKSByZXR1cm4ge307XG4gICAgcmV0dXJuIF9leHRlbmRzKHt9LCB0aGlzLnZhbHVlcyk7XG4gIH1cbiAgLyoqXG4gICAqIFJldHVybnMgYW4gSVNPIDg2MDEtY29tcGxpYW50IHN0cmluZyByZXByZXNlbnRhdGlvbiBvZiB0aGlzIER1cmF0aW9uLlxuICAgKiBAc2VlIGh0dHBzOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL0lTT184NjAxI0R1cmF0aW9uc1xuICAgKiBAZXhhbXBsZSBEdXJhdGlvbi5mcm9tT2JqZWN0KHsgeWVhcnM6IDMsIHNlY29uZHM6IDQ1IH0pLnRvSVNPKCkgLy89PiAnUDNZVDQ1UydcbiAgICogQGV4YW1wbGUgRHVyYXRpb24uZnJvbU9iamVjdCh7IG1vbnRoczogNCwgc2Vjb25kczogNDUgfSkudG9JU08oKSAvLz0+ICdQNE1UNDVTJ1xuICAgKiBAZXhhbXBsZSBEdXJhdGlvbi5mcm9tT2JqZWN0KHsgbW9udGhzOiA1IH0pLnRvSVNPKCkgLy89PiAnUDVNJ1xuICAgKiBAZXhhbXBsZSBEdXJhdGlvbi5mcm9tT2JqZWN0KHsgbWludXRlczogNSB9KS50b0lTTygpIC8vPT4gJ1BUNU0nXG4gICAqIEBleGFtcGxlIER1cmF0aW9uLmZyb21PYmplY3QoeyBtaWxsaXNlY29uZHM6IDYgfSkudG9JU08oKSAvLz0+ICdQVDAuMDA2UydcbiAgICogQHJldHVybiB7c3RyaW5nfVxuICAgKi9cbiAgO1xuXG4gIF9wcm90by50b0lTTyA9IGZ1bmN0aW9uIHRvSVNPKCkge1xuICAgIC8vIHdlIGNvdWxkIHVzZSB0aGUgZm9ybWF0dGVyLCBidXQgdGhpcyBpcyBhbiBlYXNpZXIgd2F5IHRvIGdldCB0aGUgbWluaW11bSBzdHJpbmdcbiAgICBpZiAoIXRoaXMuaXNWYWxpZCkgcmV0dXJuIG51bGw7XG4gICAgdmFyIHMgPSBcIlBcIjtcbiAgICBpZiAodGhpcy55ZWFycyAhPT0gMCkgcyArPSB0aGlzLnllYXJzICsgXCJZXCI7XG4gICAgaWYgKHRoaXMubW9udGhzICE9PSAwIHx8IHRoaXMucXVhcnRlcnMgIT09IDApIHMgKz0gdGhpcy5tb250aHMgKyB0aGlzLnF1YXJ0ZXJzICogMyArIFwiTVwiO1xuICAgIGlmICh0aGlzLndlZWtzICE9PSAwKSBzICs9IHRoaXMud2Vla3MgKyBcIldcIjtcbiAgICBpZiAodGhpcy5kYXlzICE9PSAwKSBzICs9IHRoaXMuZGF5cyArIFwiRFwiO1xuICAgIGlmICh0aGlzLmhvdXJzICE9PSAwIHx8IHRoaXMubWludXRlcyAhPT0gMCB8fCB0aGlzLnNlY29uZHMgIT09IDAgfHwgdGhpcy5taWxsaXNlY29uZHMgIT09IDApIHMgKz0gXCJUXCI7XG4gICAgaWYgKHRoaXMuaG91cnMgIT09IDApIHMgKz0gdGhpcy5ob3VycyArIFwiSFwiO1xuICAgIGlmICh0aGlzLm1pbnV0ZXMgIT09IDApIHMgKz0gdGhpcy5taW51dGVzICsgXCJNXCI7XG4gICAgaWYgKHRoaXMuc2Vjb25kcyAhPT0gMCB8fCB0aGlzLm1pbGxpc2Vjb25kcyAhPT0gMCkgLy8gdGhpcyB3aWxsIGhhbmRsZSBcImZsb2F0aW5nIHBvaW50IG1hZG5lc3NcIiBieSByZW1vdmluZyBleHRyYSBkZWNpbWFsIHBsYWNlc1xuICAgICAgLy8gaHR0cHM6Ly9zdGFja292ZXJmbG93LmNvbS9xdWVzdGlvbnMvNTg4MDA0L2lzLWZsb2F0aW5nLXBvaW50LW1hdGgtYnJva2VuXG4gICAgICBzICs9IHJvdW5kVG8odGhpcy5zZWNvbmRzICsgdGhpcy5taWxsaXNlY29uZHMgLyAxMDAwLCAzKSArIFwiU1wiO1xuICAgIGlmIChzID09PSBcIlBcIikgcyArPSBcIlQwU1wiO1xuICAgIHJldHVybiBzO1xuICB9XG4gIC8qKlxuICAgKiBSZXR1cm5zIGFuIElTTyA4NjAxLWNvbXBsaWFudCBzdHJpbmcgcmVwcmVzZW50YXRpb24gb2YgdGhpcyBEdXJhdGlvbiwgZm9ybWF0dGVkIGFzIGEgdGltZSBvZiBkYXkuXG4gICAqIE5vdGUgdGhhdCB0aGlzIHdpbGwgcmV0dXJuIG51bGwgaWYgdGhlIGR1cmF0aW9uIGlzIGludmFsaWQsIG5lZ2F0aXZlLCBvciBlcXVhbCB0byBvciBncmVhdGVyIHRoYW4gMjQgaG91cnMuXG4gICAqIEBzZWUgaHR0cHM6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvSVNPXzg2MDEjVGltZXNcbiAgICogQHBhcmFtIHtPYmplY3R9IG9wdHMgLSBvcHRpb25zXG4gICAqIEBwYXJhbSB7Ym9vbGVhbn0gW29wdHMuc3VwcHJlc3NNaWxsaXNlY29uZHM9ZmFsc2VdIC0gZXhjbHVkZSBtaWxsaXNlY29uZHMgZnJvbSB0aGUgZm9ybWF0IGlmIHRoZXkncmUgMFxuICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHRzLnN1cHByZXNzU2Vjb25kcz1mYWxzZV0gLSBleGNsdWRlIHNlY29uZHMgZnJvbSB0aGUgZm9ybWF0IGlmIHRoZXkncmUgMFxuICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHRzLmluY2x1ZGVQcmVmaXg9ZmFsc2VdIC0gaW5jbHVkZSB0aGUgYFRgIHByZWZpeFxuICAgKiBAcGFyYW0ge3N0cmluZ30gW29wdHMuZm9ybWF0PSdleHRlbmRlZCddIC0gY2hvb3NlIGJldHdlZW4gdGhlIGJhc2ljIGFuZCBleHRlbmRlZCBmb3JtYXRcbiAgICogQGV4YW1wbGUgRHVyYXRpb24uZnJvbU9iamVjdCh7IGhvdXJzOiAxMSB9KS50b0lTT1RpbWUoKSAvLz0+ICcxMTowMDowMC4wMDAnXG4gICAqIEBleGFtcGxlIER1cmF0aW9uLmZyb21PYmplY3QoeyBob3VyczogMTEgfSkudG9JU09UaW1lKHsgc3VwcHJlc3NNaWxsaXNlY29uZHM6IHRydWUgfSkgLy89PiAnMTE6MDA6MDAnXG4gICAqIEBleGFtcGxlIER1cmF0aW9uLmZyb21PYmplY3QoeyBob3VyczogMTEgfSkudG9JU09UaW1lKHsgc3VwcHJlc3NTZWNvbmRzOiB0cnVlIH0pIC8vPT4gJzExOjAwJ1xuICAgKiBAZXhhbXBsZSBEdXJhdGlvbi5mcm9tT2JqZWN0KHsgaG91cnM6IDExIH0pLnRvSVNPVGltZSh7IGluY2x1ZGVQcmVmaXg6IHRydWUgfSkgLy89PiAnVDExOjAwOjAwLjAwMCdcbiAgICogQGV4YW1wbGUgRHVyYXRpb24uZnJvbU9iamVjdCh7IGhvdXJzOiAxMSB9KS50b0lTT1RpbWUoeyBmb3JtYXQ6ICdiYXNpYycgfSkgLy89PiAnMTEwMDAwLjAwMCdcbiAgICogQHJldHVybiB7c3RyaW5nfVxuICAgKi9cbiAgO1xuXG4gIF9wcm90by50b0lTT1RpbWUgPSBmdW5jdGlvbiB0b0lTT1RpbWUob3B0cykge1xuICAgIGlmIChvcHRzID09PSB2b2lkIDApIHtcbiAgICAgIG9wdHMgPSB7fTtcbiAgICB9XG5cbiAgICBpZiAoIXRoaXMuaXNWYWxpZCkgcmV0dXJuIG51bGw7XG4gICAgdmFyIG1pbGxpcyA9IHRoaXMudG9NaWxsaXMoKTtcbiAgICBpZiAobWlsbGlzIDwgMCB8fCBtaWxsaXMgPj0gODY0MDAwMDApIHJldHVybiBudWxsO1xuICAgIG9wdHMgPSBfZXh0ZW5kcyh7XG4gICAgICBzdXBwcmVzc01pbGxpc2Vjb25kczogZmFsc2UsXG4gICAgICBzdXBwcmVzc1NlY29uZHM6IGZhbHNlLFxuICAgICAgaW5jbHVkZVByZWZpeDogZmFsc2UsXG4gICAgICBmb3JtYXQ6IFwiZXh0ZW5kZWRcIlxuICAgIH0sIG9wdHMpO1xuICAgIHZhciB2YWx1ZSA9IHRoaXMuc2hpZnRUbyhcImhvdXJzXCIsIFwibWludXRlc1wiLCBcInNlY29uZHNcIiwgXCJtaWxsaXNlY29uZHNcIik7XG4gICAgdmFyIGZtdCA9IG9wdHMuZm9ybWF0ID09PSBcImJhc2ljXCIgPyBcImhobW1cIiA6IFwiaGg6bW1cIjtcblxuICAgIGlmICghb3B0cy5zdXBwcmVzc1NlY29uZHMgfHwgdmFsdWUuc2Vjb25kcyAhPT0gMCB8fCB2YWx1ZS5taWxsaXNlY29uZHMgIT09IDApIHtcbiAgICAgIGZtdCArPSBvcHRzLmZvcm1hdCA9PT0gXCJiYXNpY1wiID8gXCJzc1wiIDogXCI6c3NcIjtcblxuICAgICAgaWYgKCFvcHRzLnN1cHByZXNzTWlsbGlzZWNvbmRzIHx8IHZhbHVlLm1pbGxpc2Vjb25kcyAhPT0gMCkge1xuICAgICAgICBmbXQgKz0gXCIuU1NTXCI7XG4gICAgICB9XG4gICAgfVxuXG4gICAgdmFyIHN0ciA9IHZhbHVlLnRvRm9ybWF0KGZtdCk7XG5cbiAgICBpZiAob3B0cy5pbmNsdWRlUHJlZml4KSB7XG4gICAgICBzdHIgPSBcIlRcIiArIHN0cjtcbiAgICB9XG5cbiAgICByZXR1cm4gc3RyO1xuICB9XG4gIC8qKlxuICAgKiBSZXR1cm5zIGFuIElTTyA4NjAxIHJlcHJlc2VudGF0aW9uIG9mIHRoaXMgRHVyYXRpb24gYXBwcm9wcmlhdGUgZm9yIHVzZSBpbiBKU09OLlxuICAgKiBAcmV0dXJuIHtzdHJpbmd9XG4gICAqL1xuICA7XG5cbiAgX3Byb3RvLnRvSlNPTiA9IGZ1bmN0aW9uIHRvSlNPTigpIHtcbiAgICByZXR1cm4gdGhpcy50b0lTTygpO1xuICB9XG4gIC8qKlxuICAgKiBSZXR1cm5zIGFuIElTTyA4NjAxIHJlcHJlc2VudGF0aW9uIG9mIHRoaXMgRHVyYXRpb24gYXBwcm9wcmlhdGUgZm9yIHVzZSBpbiBkZWJ1Z2dpbmcuXG4gICAqIEByZXR1cm4ge3N0cmluZ31cbiAgICovXG4gIDtcblxuICBfcHJvdG8udG9TdHJpbmcgPSBmdW5jdGlvbiB0b1N0cmluZygpIHtcbiAgICByZXR1cm4gdGhpcy50b0lTTygpO1xuICB9XG4gIC8qKlxuICAgKiBSZXR1cm5zIGFuIG1pbGxpc2Vjb25kcyB2YWx1ZSBvZiB0aGlzIER1cmF0aW9uLlxuICAgKiBAcmV0dXJuIHtudW1iZXJ9XG4gICAqL1xuICA7XG5cbiAgX3Byb3RvLnRvTWlsbGlzID0gZnVuY3Rpb24gdG9NaWxsaXMoKSB7XG4gICAgcmV0dXJuIHRoaXMuYXMoXCJtaWxsaXNlY29uZHNcIik7XG4gIH1cbiAgLyoqXG4gICAqIFJldHVybnMgYW4gbWlsbGlzZWNvbmRzIHZhbHVlIG9mIHRoaXMgRHVyYXRpb24uIEFsaWFzIG9mIHtAbGluayB0b01pbGxpc31cbiAgICogQHJldHVybiB7bnVtYmVyfVxuICAgKi9cbiAgO1xuXG4gIF9wcm90by52YWx1ZU9mID0gZnVuY3Rpb24gdmFsdWVPZigpIHtcbiAgICByZXR1cm4gdGhpcy50b01pbGxpcygpO1xuICB9XG4gIC8qKlxuICAgKiBNYWtlIHRoaXMgRHVyYXRpb24gbG9uZ2VyIGJ5IHRoZSBzcGVjaWZpZWQgYW1vdW50LiBSZXR1cm4gYSBuZXdseS1jb25zdHJ1Y3RlZCBEdXJhdGlvbi5cbiAgICogQHBhcmFtIHtEdXJhdGlvbnxPYmplY3R8bnVtYmVyfSBkdXJhdGlvbiAtIFRoZSBhbW91bnQgdG8gYWRkLiBFaXRoZXIgYSBMdXhvbiBEdXJhdGlvbiwgYSBudW1iZXIgb2YgbWlsbGlzZWNvbmRzLCB0aGUgb2JqZWN0IGFyZ3VtZW50IHRvIER1cmF0aW9uLmZyb21PYmplY3QoKVxuICAgKiBAcmV0dXJuIHtEdXJhdGlvbn1cbiAgICovXG4gIDtcblxuICBfcHJvdG8ucGx1cyA9IGZ1bmN0aW9uIHBsdXMoZHVyYXRpb24pIHtcbiAgICBpZiAoIXRoaXMuaXNWYWxpZCkgcmV0dXJuIHRoaXM7XG4gICAgdmFyIGR1ciA9IER1cmF0aW9uLmZyb21EdXJhdGlvbkxpa2UoZHVyYXRpb24pLFxuICAgICAgICByZXN1bHQgPSB7fTtcblxuICAgIGZvciAodmFyIF9pdGVyYXRvciA9IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyTG9vc2Uob3JkZXJlZFVuaXRzJDEpLCBfc3RlcDsgIShfc3RlcCA9IF9pdGVyYXRvcigpKS5kb25lOykge1xuICAgICAgdmFyIGsgPSBfc3RlcC52YWx1ZTtcblxuICAgICAgaWYgKGhhc093blByb3BlcnR5KGR1ci52YWx1ZXMsIGspIHx8IGhhc093blByb3BlcnR5KHRoaXMudmFsdWVzLCBrKSkge1xuICAgICAgICByZXN1bHRba10gPSBkdXIuZ2V0KGspICsgdGhpcy5nZXQoayk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIGNsb25lJDEodGhpcywge1xuICAgICAgdmFsdWVzOiByZXN1bHRcbiAgICB9LCB0cnVlKTtcbiAgfVxuICAvKipcbiAgICogTWFrZSB0aGlzIER1cmF0aW9uIHNob3J0ZXIgYnkgdGhlIHNwZWNpZmllZCBhbW91bnQuIFJldHVybiBhIG5ld2x5LWNvbnN0cnVjdGVkIER1cmF0aW9uLlxuICAgKiBAcGFyYW0ge0R1cmF0aW9ufE9iamVjdHxudW1iZXJ9IGR1cmF0aW9uIC0gVGhlIGFtb3VudCB0byBzdWJ0cmFjdC4gRWl0aGVyIGEgTHV4b24gRHVyYXRpb24sIGEgbnVtYmVyIG9mIG1pbGxpc2Vjb25kcywgdGhlIG9iamVjdCBhcmd1bWVudCB0byBEdXJhdGlvbi5mcm9tT2JqZWN0KClcbiAgICogQHJldHVybiB7RHVyYXRpb259XG4gICAqL1xuICA7XG5cbiAgX3Byb3RvLm1pbnVzID0gZnVuY3Rpb24gbWludXMoZHVyYXRpb24pIHtcbiAgICBpZiAoIXRoaXMuaXNWYWxpZCkgcmV0dXJuIHRoaXM7XG4gICAgdmFyIGR1ciA9IER1cmF0aW9uLmZyb21EdXJhdGlvbkxpa2UoZHVyYXRpb24pO1xuICAgIHJldHVybiB0aGlzLnBsdXMoZHVyLm5lZ2F0ZSgpKTtcbiAgfVxuICAvKipcbiAgICogU2NhbGUgdGhpcyBEdXJhdGlvbiBieSB0aGUgc3BlY2lmaWVkIGFtb3VudC4gUmV0dXJuIGEgbmV3bHktY29uc3RydWN0ZWQgRHVyYXRpb24uXG4gICAqIEBwYXJhbSB7ZnVuY3Rpb259IGZuIC0gVGhlIGZ1bmN0aW9uIHRvIGFwcGx5IHRvIGVhY2ggdW5pdC4gQXJpdHkgaXMgMSBvciAyOiB0aGUgdmFsdWUgb2YgdGhlIHVuaXQgYW5kLCBvcHRpb25hbGx5LCB0aGUgdW5pdCBuYW1lLiBNdXN0IHJldHVybiBhIG51bWJlci5cbiAgICogQGV4YW1wbGUgRHVyYXRpb24uZnJvbU9iamVjdCh7IGhvdXJzOiAxLCBtaW51dGVzOiAzMCB9KS5tYXBVbml0cyh4ID0+IHggKiAyKSAvLz0+IHsgaG91cnM6IDIsIG1pbnV0ZXM6IDYwIH1cbiAgICogQGV4YW1wbGUgRHVyYXRpb24uZnJvbU9iamVjdCh7IGhvdXJzOiAxLCBtaW51dGVzOiAzMCB9KS5tYXBVbml0cygoeCwgdSkgPT4gdSA9PT0gXCJob3VyXCIgPyB4ICogMiA6IHgpIC8vPT4geyBob3VyczogMiwgbWludXRlczogMzAgfVxuICAgKiBAcmV0dXJuIHtEdXJhdGlvbn1cbiAgICovXG4gIDtcblxuICBfcHJvdG8ubWFwVW5pdHMgPSBmdW5jdGlvbiBtYXBVbml0cyhmbikge1xuICAgIGlmICghdGhpcy5pc1ZhbGlkKSByZXR1cm4gdGhpcztcbiAgICB2YXIgcmVzdWx0ID0ge307XG5cbiAgICBmb3IgKHZhciBfaSA9IDAsIF9PYmplY3Qka2V5cyA9IE9iamVjdC5rZXlzKHRoaXMudmFsdWVzKTsgX2kgPCBfT2JqZWN0JGtleXMubGVuZ3RoOyBfaSsrKSB7XG4gICAgICB2YXIgayA9IF9PYmplY3Qka2V5c1tfaV07XG4gICAgICByZXN1bHRba10gPSBhc051bWJlcihmbih0aGlzLnZhbHVlc1trXSwgaykpO1xuICAgIH1cblxuICAgIHJldHVybiBjbG9uZSQxKHRoaXMsIHtcbiAgICAgIHZhbHVlczogcmVzdWx0XG4gICAgfSwgdHJ1ZSk7XG4gIH1cbiAgLyoqXG4gICAqIEdldCB0aGUgdmFsdWUgb2YgdW5pdC5cbiAgICogQHBhcmFtIHtzdHJpbmd9IHVuaXQgLSBhIHVuaXQgc3VjaCBhcyAnbWludXRlJyBvciAnZGF5J1xuICAgKiBAZXhhbXBsZSBEdXJhdGlvbi5mcm9tT2JqZWN0KHt5ZWFyczogMiwgZGF5czogM30pLmdldCgneWVhcnMnKSAvLz0+IDJcbiAgICogQGV4YW1wbGUgRHVyYXRpb24uZnJvbU9iamVjdCh7eWVhcnM6IDIsIGRheXM6IDN9KS5nZXQoJ21vbnRocycpIC8vPT4gMFxuICAgKiBAZXhhbXBsZSBEdXJhdGlvbi5mcm9tT2JqZWN0KHt5ZWFyczogMiwgZGF5czogM30pLmdldCgnZGF5cycpIC8vPT4gM1xuICAgKiBAcmV0dXJuIHtudW1iZXJ9XG4gICAqL1xuICA7XG5cbiAgX3Byb3RvLmdldCA9IGZ1bmN0aW9uIGdldCh1bml0KSB7XG4gICAgcmV0dXJuIHRoaXNbRHVyYXRpb24ubm9ybWFsaXplVW5pdCh1bml0KV07XG4gIH1cbiAgLyoqXG4gICAqIFwiU2V0XCIgdGhlIHZhbHVlcyBvZiBzcGVjaWZpZWQgdW5pdHMuIFJldHVybiBhIG5ld2x5LWNvbnN0cnVjdGVkIER1cmF0aW9uLlxuICAgKiBAcGFyYW0ge09iamVjdH0gdmFsdWVzIC0gYSBtYXBwaW5nIG9mIHVuaXRzIHRvIG51bWJlcnNcbiAgICogQGV4YW1wbGUgZHVyLnNldCh7IHllYXJzOiAyMDE3IH0pXG4gICAqIEBleGFtcGxlIGR1ci5zZXQoeyBob3VyczogOCwgbWludXRlczogMzAgfSlcbiAgICogQHJldHVybiB7RHVyYXRpb259XG4gICAqL1xuICA7XG5cbiAgX3Byb3RvLnNldCA9IGZ1bmN0aW9uIHNldCh2YWx1ZXMpIHtcbiAgICBpZiAoIXRoaXMuaXNWYWxpZCkgcmV0dXJuIHRoaXM7XG5cbiAgICB2YXIgbWl4ZWQgPSBfZXh0ZW5kcyh7fSwgdGhpcy52YWx1ZXMsIG5vcm1hbGl6ZU9iamVjdCh2YWx1ZXMsIER1cmF0aW9uLm5vcm1hbGl6ZVVuaXQpKTtcblxuICAgIHJldHVybiBjbG9uZSQxKHRoaXMsIHtcbiAgICAgIHZhbHVlczogbWl4ZWRcbiAgICB9KTtcbiAgfVxuICAvKipcbiAgICogXCJTZXRcIiB0aGUgbG9jYWxlIGFuZC9vciBudW1iZXJpbmdTeXN0ZW0uICBSZXR1cm5zIGEgbmV3bHktY29uc3RydWN0ZWQgRHVyYXRpb24uXG4gICAqIEBleGFtcGxlIGR1ci5yZWNvbmZpZ3VyZSh7IGxvY2FsZTogJ2VuLUdCJyB9KVxuICAgKiBAcmV0dXJuIHtEdXJhdGlvbn1cbiAgICovXG4gIDtcblxuICBfcHJvdG8ucmVjb25maWd1cmUgPSBmdW5jdGlvbiByZWNvbmZpZ3VyZShfdGVtcCkge1xuICAgIHZhciBfcmVmID0gX3RlbXAgPT09IHZvaWQgMCA/IHt9IDogX3RlbXAsXG4gICAgICAgIGxvY2FsZSA9IF9yZWYubG9jYWxlLFxuICAgICAgICBudW1iZXJpbmdTeXN0ZW0gPSBfcmVmLm51bWJlcmluZ1N5c3RlbSxcbiAgICAgICAgY29udmVyc2lvbkFjY3VyYWN5ID0gX3JlZi5jb252ZXJzaW9uQWNjdXJhY3k7XG5cbiAgICB2YXIgbG9jID0gdGhpcy5sb2MuY2xvbmUoe1xuICAgICAgbG9jYWxlOiBsb2NhbGUsXG4gICAgICBudW1iZXJpbmdTeXN0ZW06IG51bWJlcmluZ1N5c3RlbVxuICAgIH0pLFxuICAgICAgICBvcHRzID0ge1xuICAgICAgbG9jOiBsb2NcbiAgICB9O1xuXG4gICAgaWYgKGNvbnZlcnNpb25BY2N1cmFjeSkge1xuICAgICAgb3B0cy5jb252ZXJzaW9uQWNjdXJhY3kgPSBjb252ZXJzaW9uQWNjdXJhY3k7XG4gICAgfVxuXG4gICAgcmV0dXJuIGNsb25lJDEodGhpcywgb3B0cyk7XG4gIH1cbiAgLyoqXG4gICAqIFJldHVybiB0aGUgbGVuZ3RoIG9mIHRoZSBkdXJhdGlvbiBpbiB0aGUgc3BlY2lmaWVkIHVuaXQuXG4gICAqIEBwYXJhbSB7c3RyaW5nfSB1bml0IC0gYSB1bml0IHN1Y2ggYXMgJ21pbnV0ZXMnIG9yICdkYXlzJ1xuICAgKiBAZXhhbXBsZSBEdXJhdGlvbi5mcm9tT2JqZWN0KHt5ZWFyczogMX0pLmFzKCdkYXlzJykgLy89PiAzNjVcbiAgICogQGV4YW1wbGUgRHVyYXRpb24uZnJvbU9iamVjdCh7eWVhcnM6IDF9KS5hcygnbW9udGhzJykgLy89PiAxMlxuICAgKiBAZXhhbXBsZSBEdXJhdGlvbi5mcm9tT2JqZWN0KHtob3VyczogNjB9KS5hcygnZGF5cycpIC8vPT4gMi41XG4gICAqIEByZXR1cm4ge251bWJlcn1cbiAgICovXG4gIDtcblxuICBfcHJvdG8uYXMgPSBmdW5jdGlvbiBhcyh1bml0KSB7XG4gICAgcmV0dXJuIHRoaXMuaXNWYWxpZCA/IHRoaXMuc2hpZnRUbyh1bml0KS5nZXQodW5pdCkgOiBOYU47XG4gIH1cbiAgLyoqXG4gICAqIFJlZHVjZSB0aGlzIER1cmF0aW9uIHRvIGl0cyBjYW5vbmljYWwgcmVwcmVzZW50YXRpb24gaW4gaXRzIGN1cnJlbnQgdW5pdHMuXG4gICAqIEBleGFtcGxlIER1cmF0aW9uLmZyb21PYmplY3QoeyB5ZWFyczogMiwgZGF5czogNTAwMCB9KS5ub3JtYWxpemUoKS50b09iamVjdCgpIC8vPT4geyB5ZWFyczogMTUsIGRheXM6IDI1NSB9XG4gICAqIEBleGFtcGxlIER1cmF0aW9uLmZyb21PYmplY3QoeyBob3VyczogMTIsIG1pbnV0ZXM6IC00NSB9KS5ub3JtYWxpemUoKS50b09iamVjdCgpIC8vPT4geyBob3VyczogMTEsIG1pbnV0ZXM6IDE1IH1cbiAgICogQHJldHVybiB7RHVyYXRpb259XG4gICAqL1xuICA7XG5cbiAgX3Byb3RvLm5vcm1hbGl6ZSA9IGZ1bmN0aW9uIG5vcm1hbGl6ZSgpIHtcbiAgICBpZiAoIXRoaXMuaXNWYWxpZCkgcmV0dXJuIHRoaXM7XG4gICAgdmFyIHZhbHMgPSB0aGlzLnRvT2JqZWN0KCk7XG4gICAgbm9ybWFsaXplVmFsdWVzKHRoaXMubWF0cml4LCB2YWxzKTtcbiAgICByZXR1cm4gY2xvbmUkMSh0aGlzLCB7XG4gICAgICB2YWx1ZXM6IHZhbHNcbiAgICB9LCB0cnVlKTtcbiAgfVxuICAvKipcbiAgICogQ29udmVydCB0aGlzIER1cmF0aW9uIGludG8gaXRzIHJlcHJlc2VudGF0aW9uIGluIGEgZGlmZmVyZW50IHNldCBvZiB1bml0cy5cbiAgICogQGV4YW1wbGUgRHVyYXRpb24uZnJvbU9iamVjdCh7IGhvdXJzOiAxLCBzZWNvbmRzOiAzMCB9KS5zaGlmdFRvKCdtaW51dGVzJywgJ21pbGxpc2Vjb25kcycpLnRvT2JqZWN0KCkgLy89PiB7IG1pbnV0ZXM6IDYwLCBtaWxsaXNlY29uZHM6IDMwMDAwIH1cbiAgICogQHJldHVybiB7RHVyYXRpb259XG4gICAqL1xuICA7XG5cbiAgX3Byb3RvLnNoaWZ0VG8gPSBmdW5jdGlvbiBzaGlmdFRvKCkge1xuICAgIGZvciAodmFyIF9sZW4gPSBhcmd1bWVudHMubGVuZ3RoLCB1bml0cyA9IG5ldyBBcnJheShfbGVuKSwgX2tleSA9IDA7IF9rZXkgPCBfbGVuOyBfa2V5KyspIHtcbiAgICAgIHVuaXRzW19rZXldID0gYXJndW1lbnRzW19rZXldO1xuICAgIH1cblxuICAgIGlmICghdGhpcy5pc1ZhbGlkKSByZXR1cm4gdGhpcztcblxuICAgIGlmICh1bml0cy5sZW5ndGggPT09IDApIHtcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cblxuICAgIHVuaXRzID0gdW5pdHMubWFwKGZ1bmN0aW9uICh1KSB7XG4gICAgICByZXR1cm4gRHVyYXRpb24ubm9ybWFsaXplVW5pdCh1KTtcbiAgICB9KTtcbiAgICB2YXIgYnVpbHQgPSB7fSxcbiAgICAgICAgYWNjdW11bGF0ZWQgPSB7fSxcbiAgICAgICAgdmFscyA9IHRoaXMudG9PYmplY3QoKTtcbiAgICB2YXIgbGFzdFVuaXQ7XG5cbiAgICBmb3IgKHZhciBfaXRlcmF0b3IyID0gX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXJMb29zZShvcmRlcmVkVW5pdHMkMSksIF9zdGVwMjsgIShfc3RlcDIgPSBfaXRlcmF0b3IyKCkpLmRvbmU7KSB7XG4gICAgICB2YXIgayA9IF9zdGVwMi52YWx1ZTtcblxuICAgICAgaWYgKHVuaXRzLmluZGV4T2YoaykgPj0gMCkge1xuICAgICAgICBsYXN0VW5pdCA9IGs7XG4gICAgICAgIHZhciBvd24gPSAwOyAvLyBhbnl0aGluZyB3ZSBoYXZlbid0IGJvaWxlZCBkb3duIHlldCBzaG91bGQgZ2V0IGJvaWxlZCB0byB0aGlzIHVuaXRcblxuICAgICAgICBmb3IgKHZhciBhayBpbiBhY2N1bXVsYXRlZCkge1xuICAgICAgICAgIG93biArPSB0aGlzLm1hdHJpeFtha11ba10gKiBhY2N1bXVsYXRlZFtha107XG4gICAgICAgICAgYWNjdW11bGF0ZWRbYWtdID0gMDtcbiAgICAgICAgfSAvLyBwbHVzIGFueXRoaW5nIHRoYXQncyBhbHJlYWR5IGluIHRoaXMgdW5pdFxuXG5cbiAgICAgICAgaWYgKGlzTnVtYmVyKHZhbHNba10pKSB7XG4gICAgICAgICAgb3duICs9IHZhbHNba107XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgaSA9IE1hdGgudHJ1bmMob3duKTtcbiAgICAgICAgYnVpbHRba10gPSBpO1xuICAgICAgICBhY2N1bXVsYXRlZFtrXSA9IChvd24gKiAxMDAwIC0gaSAqIDEwMDApIC8gMTAwMDsgLy8gcGx1cyBhbnl0aGluZyBmdXJ0aGVyIGRvd24gdGhlIGNoYWluIHRoYXQgc2hvdWxkIGJlIHJvbGxlZCB1cCBpbiB0byB0aGlzXG5cbiAgICAgICAgZm9yICh2YXIgZG93biBpbiB2YWxzKSB7XG4gICAgICAgICAgaWYgKG9yZGVyZWRVbml0cyQxLmluZGV4T2YoZG93bikgPiBvcmRlcmVkVW5pdHMkMS5pbmRleE9mKGspKSB7XG4gICAgICAgICAgICBjb252ZXJ0KHRoaXMubWF0cml4LCB2YWxzLCBkb3duLCBidWlsdCwgayk7XG4gICAgICAgICAgfVxuICAgICAgICB9IC8vIG90aGVyd2lzZSwga2VlcCBpdCBpbiB0aGUgd2luZ3MgdG8gYm9pbCBpdCBsYXRlclxuXG4gICAgICB9IGVsc2UgaWYgKGlzTnVtYmVyKHZhbHNba10pKSB7XG4gICAgICAgIGFjY3VtdWxhdGVkW2tdID0gdmFsc1trXTtcbiAgICAgIH1cbiAgICB9IC8vIGFueXRoaW5nIGxlZnRvdmVyIGJlY29tZXMgdGhlIGRlY2ltYWwgZm9yIHRoZSBsYXN0IHVuaXRcbiAgICAvLyBsYXN0VW5pdCBtdXN0IGJlIGRlZmluZWQgc2luY2UgdW5pdHMgaXMgbm90IGVtcHR5XG5cblxuICAgIGZvciAodmFyIGtleSBpbiBhY2N1bXVsYXRlZCkge1xuICAgICAgaWYgKGFjY3VtdWxhdGVkW2tleV0gIT09IDApIHtcbiAgICAgICAgYnVpbHRbbGFzdFVuaXRdICs9IGtleSA9PT0gbGFzdFVuaXQgPyBhY2N1bXVsYXRlZFtrZXldIDogYWNjdW11bGF0ZWRba2V5XSAvIHRoaXMubWF0cml4W2xhc3RVbml0XVtrZXldO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBjbG9uZSQxKHRoaXMsIHtcbiAgICAgIHZhbHVlczogYnVpbHRcbiAgICB9LCB0cnVlKS5ub3JtYWxpemUoKTtcbiAgfVxuICAvKipcbiAgICogUmV0dXJuIHRoZSBuZWdhdGl2ZSBvZiB0aGlzIER1cmF0aW9uLlxuICAgKiBAZXhhbXBsZSBEdXJhdGlvbi5mcm9tT2JqZWN0KHsgaG91cnM6IDEsIHNlY29uZHM6IDMwIH0pLm5lZ2F0ZSgpLnRvT2JqZWN0KCkgLy89PiB7IGhvdXJzOiAtMSwgc2Vjb25kczogLTMwIH1cbiAgICogQHJldHVybiB7RHVyYXRpb259XG4gICAqL1xuICA7XG5cbiAgX3Byb3RvLm5lZ2F0ZSA9IGZ1bmN0aW9uIG5lZ2F0ZSgpIHtcbiAgICBpZiAoIXRoaXMuaXNWYWxpZCkgcmV0dXJuIHRoaXM7XG4gICAgdmFyIG5lZ2F0ZWQgPSB7fTtcblxuICAgIGZvciAodmFyIF9pMiA9IDAsIF9PYmplY3Qka2V5czIgPSBPYmplY3Qua2V5cyh0aGlzLnZhbHVlcyk7IF9pMiA8IF9PYmplY3Qka2V5czIubGVuZ3RoOyBfaTIrKykge1xuICAgICAgdmFyIGsgPSBfT2JqZWN0JGtleXMyW19pMl07XG4gICAgICBuZWdhdGVkW2tdID0gLXRoaXMudmFsdWVzW2tdO1xuICAgIH1cblxuICAgIHJldHVybiBjbG9uZSQxKHRoaXMsIHtcbiAgICAgIHZhbHVlczogbmVnYXRlZFxuICAgIH0sIHRydWUpO1xuICB9XG4gIC8qKlxuICAgKiBHZXQgdGhlIHllYXJzLlxuICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgKi9cbiAgO1xuXG4gIC8qKlxuICAgKiBFcXVhbGl0eSBjaGVja1xuICAgKiBUd28gRHVyYXRpb25zIGFyZSBlcXVhbCBpZmYgdGhleSBoYXZlIHRoZSBzYW1lIHVuaXRzIGFuZCB0aGUgc2FtZSB2YWx1ZXMgZm9yIGVhY2ggdW5pdC5cbiAgICogQHBhcmFtIHtEdXJhdGlvbn0gb3RoZXJcbiAgICogQHJldHVybiB7Ym9vbGVhbn1cbiAgICovXG4gIF9wcm90by5lcXVhbHMgPSBmdW5jdGlvbiBlcXVhbHMob3RoZXIpIHtcbiAgICBpZiAoIXRoaXMuaXNWYWxpZCB8fCAhb3RoZXIuaXNWYWxpZCkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIGlmICghdGhpcy5sb2MuZXF1YWxzKG90aGVyLmxvYykpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBlcSh2MSwgdjIpIHtcbiAgICAgIC8vIENvbnNpZGVyIDAgYW5kIHVuZGVmaW5lZCBhcyBlcXVhbFxuICAgICAgaWYgKHYxID09PSB1bmRlZmluZWQgfHwgdjEgPT09IDApIHJldHVybiB2MiA9PT0gdW5kZWZpbmVkIHx8IHYyID09PSAwO1xuICAgICAgcmV0dXJuIHYxID09PSB2MjtcbiAgICB9XG5cbiAgICBmb3IgKHZhciBfaXRlcmF0b3IzID0gX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXJMb29zZShvcmRlcmVkVW5pdHMkMSksIF9zdGVwMzsgIShfc3RlcDMgPSBfaXRlcmF0b3IzKCkpLmRvbmU7KSB7XG4gICAgICB2YXIgdSA9IF9zdGVwMy52YWx1ZTtcblxuICAgICAgaWYgKCFlcSh0aGlzLnZhbHVlc1t1XSwgb3RoZXIudmFsdWVzW3VdKSkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHRydWU7XG4gIH07XG5cbiAgX2NyZWF0ZUNsYXNzKER1cmF0aW9uLCBbe1xuICAgIGtleTogXCJsb2NhbGVcIixcbiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgIHJldHVybiB0aGlzLmlzVmFsaWQgPyB0aGlzLmxvYy5sb2NhbGUgOiBudWxsO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIG51bWJlcmluZyBzeXN0ZW0gb2YgYSBEdXJhdGlvbiwgc3VjaCAnYmVuZycuIFRoZSBudW1iZXJpbmcgc3lzdGVtIGlzIHVzZWQgd2hlbiBmb3JtYXR0aW5nIHRoZSBEdXJhdGlvblxuICAgICAqXG4gICAgICogQHR5cGUge3N0cmluZ31cbiAgICAgKi9cblxuICB9LCB7XG4gICAga2V5OiBcIm51bWJlcmluZ1N5c3RlbVwiLFxuICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgcmV0dXJuIHRoaXMuaXNWYWxpZCA/IHRoaXMubG9jLm51bWJlcmluZ1N5c3RlbSA6IG51bGw7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcInllYXJzXCIsXG4gICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICByZXR1cm4gdGhpcy5pc1ZhbGlkID8gdGhpcy52YWx1ZXMueWVhcnMgfHwgMCA6IE5hTjtcbiAgICB9XG4gICAgLyoqXG4gICAgICogR2V0IHRoZSBxdWFydGVycy5cbiAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAqL1xuXG4gIH0sIHtcbiAgICBrZXk6IFwicXVhcnRlcnNcIixcbiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgIHJldHVybiB0aGlzLmlzVmFsaWQgPyB0aGlzLnZhbHVlcy5xdWFydGVycyB8fCAwIDogTmFOO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIG1vbnRocy5cbiAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAqL1xuXG4gIH0sIHtcbiAgICBrZXk6IFwibW9udGhzXCIsXG4gICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICByZXR1cm4gdGhpcy5pc1ZhbGlkID8gdGhpcy52YWx1ZXMubW9udGhzIHx8IDAgOiBOYU47XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEdldCB0aGUgd2Vla3NcbiAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAqL1xuXG4gIH0sIHtcbiAgICBrZXk6IFwid2Vla3NcIixcbiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgIHJldHVybiB0aGlzLmlzVmFsaWQgPyB0aGlzLnZhbHVlcy53ZWVrcyB8fCAwIDogTmFOO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIGRheXMuXG4gICAgICogQHR5cGUge251bWJlcn1cbiAgICAgKi9cblxuICB9LCB7XG4gICAga2V5OiBcImRheXNcIixcbiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgIHJldHVybiB0aGlzLmlzVmFsaWQgPyB0aGlzLnZhbHVlcy5kYXlzIHx8IDAgOiBOYU47XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEdldCB0aGUgaG91cnMuXG4gICAgICogQHR5cGUge251bWJlcn1cbiAgICAgKi9cblxuICB9LCB7XG4gICAga2V5OiBcImhvdXJzXCIsXG4gICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICByZXR1cm4gdGhpcy5pc1ZhbGlkID8gdGhpcy52YWx1ZXMuaG91cnMgfHwgMCA6IE5hTjtcbiAgICB9XG4gICAgLyoqXG4gICAgICogR2V0IHRoZSBtaW51dGVzLlxuICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICovXG5cbiAgfSwge1xuICAgIGtleTogXCJtaW51dGVzXCIsXG4gICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICByZXR1cm4gdGhpcy5pc1ZhbGlkID8gdGhpcy52YWx1ZXMubWludXRlcyB8fCAwIDogTmFOO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIHNlY29uZHMuXG4gICAgICogQHJldHVybiB7bnVtYmVyfVxuICAgICAqL1xuXG4gIH0sIHtcbiAgICBrZXk6IFwic2Vjb25kc1wiLFxuICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgcmV0dXJuIHRoaXMuaXNWYWxpZCA/IHRoaXMudmFsdWVzLnNlY29uZHMgfHwgMCA6IE5hTjtcbiAgICB9XG4gICAgLyoqXG4gICAgICogR2V0IHRoZSBtaWxsaXNlY29uZHMuXG4gICAgICogQHJldHVybiB7bnVtYmVyfVxuICAgICAqL1xuXG4gIH0sIHtcbiAgICBrZXk6IFwibWlsbGlzZWNvbmRzXCIsXG4gICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICByZXR1cm4gdGhpcy5pc1ZhbGlkID8gdGhpcy52YWx1ZXMubWlsbGlzZWNvbmRzIHx8IDAgOiBOYU47XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgd2hldGhlciB0aGUgRHVyYXRpb24gaXMgaW52YWxpZC4gSW52YWxpZCBkdXJhdGlvbnMgYXJlIHJldHVybmVkIGJ5IGRpZmYgb3BlcmF0aW9uc1xuICAgICAqIG9uIGludmFsaWQgRGF0ZVRpbWVzIG9yIEludGVydmFscy5cbiAgICAgKiBAcmV0dXJuIHtib29sZWFufVxuICAgICAqL1xuXG4gIH0sIHtcbiAgICBrZXk6IFwiaXNWYWxpZFwiLFxuICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgcmV0dXJuIHRoaXMuaW52YWxpZCA9PT0gbnVsbDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyBhbiBlcnJvciBjb2RlIGlmIHRoaXMgRHVyYXRpb24gYmVjYW1lIGludmFsaWQsIG9yIG51bGwgaWYgdGhlIER1cmF0aW9uIGlzIHZhbGlkXG4gICAgICogQHJldHVybiB7c3RyaW5nfVxuICAgICAqL1xuXG4gIH0sIHtcbiAgICBrZXk6IFwiaW52YWxpZFJlYXNvblwiLFxuICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgcmV0dXJuIHRoaXMuaW52YWxpZCA/IHRoaXMuaW52YWxpZC5yZWFzb24gOiBudWxsO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGFuIGV4cGxhbmF0aW9uIG9mIHdoeSB0aGlzIER1cmF0aW9uIGJlY2FtZSBpbnZhbGlkLCBvciBudWxsIGlmIHRoZSBEdXJhdGlvbiBpcyB2YWxpZFxuICAgICAqIEB0eXBlIHtzdHJpbmd9XG4gICAgICovXG5cbiAgfSwge1xuICAgIGtleTogXCJpbnZhbGlkRXhwbGFuYXRpb25cIixcbiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgIHJldHVybiB0aGlzLmludmFsaWQgPyB0aGlzLmludmFsaWQuZXhwbGFuYXRpb24gOiBudWxsO1xuICAgIH1cbiAgfV0pO1xuXG4gIHJldHVybiBEdXJhdGlvbjtcbn0oKTtcblxudmFyIElOVkFMSUQkMSA9IFwiSW52YWxpZCBJbnRlcnZhbFwiOyAvLyBjaGVja3MgaWYgdGhlIHN0YXJ0IGlzIGVxdWFsIHRvIG9yIGJlZm9yZSB0aGUgZW5kXG5cbmZ1bmN0aW9uIHZhbGlkYXRlU3RhcnRFbmQoc3RhcnQsIGVuZCkge1xuICBpZiAoIXN0YXJ0IHx8ICFzdGFydC5pc1ZhbGlkKSB7XG4gICAgcmV0dXJuIEludGVydmFsLmludmFsaWQoXCJtaXNzaW5nIG9yIGludmFsaWQgc3RhcnRcIik7XG4gIH0gZWxzZSBpZiAoIWVuZCB8fCAhZW5kLmlzVmFsaWQpIHtcbiAgICByZXR1cm4gSW50ZXJ2YWwuaW52YWxpZChcIm1pc3Npbmcgb3IgaW52YWxpZCBlbmRcIik7XG4gIH0gZWxzZSBpZiAoZW5kIDwgc3RhcnQpIHtcbiAgICByZXR1cm4gSW50ZXJ2YWwuaW52YWxpZChcImVuZCBiZWZvcmUgc3RhcnRcIiwgXCJUaGUgZW5kIG9mIGFuIGludGVydmFsIG11c3QgYmUgYWZ0ZXIgaXRzIHN0YXJ0LCBidXQgeW91IGhhZCBzdGFydD1cIiArIHN0YXJ0LnRvSVNPKCkgKyBcIiBhbmQgZW5kPVwiICsgZW5kLnRvSVNPKCkpO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiBudWxsO1xuICB9XG59XG4vKipcbiAqIEFuIEludGVydmFsIG9iamVjdCByZXByZXNlbnRzIGEgaGFsZi1vcGVuIGludGVydmFsIG9mIHRpbWUsIHdoZXJlIGVhY2ggZW5kcG9pbnQgaXMgYSB7QGxpbmsgRGF0ZVRpbWV9LiBDb25jZXB0dWFsbHksIGl0J3MgYSBjb250YWluZXIgZm9yIHRob3NlIHR3byBlbmRwb2ludHMsIGFjY29tcGFuaWVkIGJ5IG1ldGhvZHMgZm9yIGNyZWF0aW5nLCBwYXJzaW5nLCBpbnRlcnJvZ2F0aW5nLCBjb21wYXJpbmcsIHRyYW5zZm9ybWluZywgYW5kIGZvcm1hdHRpbmcgdGhlbS5cbiAqXG4gKiBIZXJlIGlzIGEgYnJpZWYgb3ZlcnZpZXcgb2YgdGhlIG1vc3QgY29tbW9ubHkgdXNlZCBtZXRob2RzIGFuZCBnZXR0ZXJzIGluIEludGVydmFsOlxuICpcbiAqICogKipDcmVhdGlvbioqIFRvIGNyZWF0ZSBhbiBJbnRlcnZhbCwgdXNlIHtAbGluayBJbnRlcnZhbCNmcm9tRGF0ZVRpbWVzfSwge0BsaW5rIEludGVydmFsI2FmdGVyfSwge0BsaW5rIEludGVydmFsI2JlZm9yZX0sIG9yIHtAbGluayBJbnRlcnZhbCNmcm9tSVNPfS5cbiAqICogKipBY2Nlc3NvcnMqKiBVc2Uge0BsaW5rIEludGVydmFsI3N0YXJ0fSBhbmQge0BsaW5rIEludGVydmFsI2VuZH0gdG8gZ2V0IHRoZSBzdGFydCBhbmQgZW5kLlxuICogKiAqKkludGVycm9nYXRpb24qKiBUbyBhbmFseXplIHRoZSBJbnRlcnZhbCwgdXNlIHtAbGluayBJbnRlcnZhbCNjb3VudH0sIHtAbGluayBJbnRlcnZhbCNsZW5ndGh9LCB7QGxpbmsgSW50ZXJ2YWwjaGFzU2FtZX0sIHtAbGluayBJbnRlcnZhbCNjb250YWluc30sIHtAbGluayBJbnRlcnZhbCNpc0FmdGVyfSwgb3Ige0BsaW5rIEludGVydmFsI2lzQmVmb3JlfS5cbiAqICogKipUcmFuc2Zvcm1hdGlvbioqIFRvIGNyZWF0ZSBvdGhlciBJbnRlcnZhbHMgb3V0IG9mIHRoaXMgb25lLCB1c2Uge0BsaW5rIEludGVydmFsI3NldH0sIHtAbGluayBJbnRlcnZhbCNzcGxpdEF0fSwge0BsaW5rIEludGVydmFsI3NwbGl0Qnl9LCB7QGxpbmsgSW50ZXJ2YWwjZGl2aWRlRXF1YWxseX0sIHtAbGluayBJbnRlcnZhbCNtZXJnZX0sIHtAbGluayBJbnRlcnZhbCN4b3J9LCB7QGxpbmsgSW50ZXJ2YWwjdW5pb259LCB7QGxpbmsgSW50ZXJ2YWwjaW50ZXJzZWN0aW9ufSwgb3Ige0BsaW5rIEludGVydmFsI2RpZmZlcmVuY2V9LlxuICogKiAqKkNvbXBhcmlzb24qKiBUbyBjb21wYXJlIHRoaXMgSW50ZXJ2YWwgdG8gYW5vdGhlciBvbmUsIHVzZSB7QGxpbmsgSW50ZXJ2YWwjZXF1YWxzfSwge0BsaW5rIEludGVydmFsI292ZXJsYXBzfSwge0BsaW5rIEludGVydmFsI2FidXRzU3RhcnR9LCB7QGxpbmsgSW50ZXJ2YWwjYWJ1dHNFbmR9LCB7QGxpbmsgSW50ZXJ2YWwjZW5ndWxmc31cbiAqICogKipPdXRwdXQqKiBUbyBjb252ZXJ0IHRoZSBJbnRlcnZhbCBpbnRvIG90aGVyIHJlcHJlc2VudGF0aW9ucywgc2VlIHtAbGluayBJbnRlcnZhbCN0b1N0cmluZ30sIHtAbGluayBJbnRlcnZhbCN0b0lTT30sIHtAbGluayBJbnRlcnZhbCN0b0lTT0RhdGV9LCB7QGxpbmsgSW50ZXJ2YWwjdG9JU09UaW1lfSwge0BsaW5rIEludGVydmFsI3RvRm9ybWF0fSwgYW5kIHtAbGluayBJbnRlcnZhbCN0b0R1cmF0aW9ufS5cbiAqL1xuXG5cbnZhciBJbnRlcnZhbCA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7XG4gIC8qKlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgZnVuY3Rpb24gSW50ZXJ2YWwoY29uZmlnKSB7XG4gICAgLyoqXG4gICAgICogQGFjY2VzcyBwcml2YXRlXG4gICAgICovXG4gICAgdGhpcy5zID0gY29uZmlnLnN0YXJ0O1xuICAgIC8qKlxuICAgICAqIEBhY2Nlc3MgcHJpdmF0ZVxuICAgICAqL1xuXG4gICAgdGhpcy5lID0gY29uZmlnLmVuZDtcbiAgICAvKipcbiAgICAgKiBAYWNjZXNzIHByaXZhdGVcbiAgICAgKi9cblxuICAgIHRoaXMuaW52YWxpZCA9IGNvbmZpZy5pbnZhbGlkIHx8IG51bGw7XG4gICAgLyoqXG4gICAgICogQGFjY2VzcyBwcml2YXRlXG4gICAgICovXG5cbiAgICB0aGlzLmlzTHV4b25JbnRlcnZhbCA9IHRydWU7XG4gIH1cbiAgLyoqXG4gICAqIENyZWF0ZSBhbiBpbnZhbGlkIEludGVydmFsLlxuICAgKiBAcGFyYW0ge3N0cmluZ30gcmVhc29uIC0gc2ltcGxlIHN0cmluZyBvZiB3aHkgdGhpcyBJbnRlcnZhbCBpcyBpbnZhbGlkLiBTaG91bGQgbm90IGNvbnRhaW4gcGFyYW1ldGVycyBvciBhbnl0aGluZyBlbHNlIGRhdGEtZGVwZW5kZW50XG4gICAqIEBwYXJhbSB7c3RyaW5nfSBbZXhwbGFuYXRpb249bnVsbF0gLSBsb25nZXIgZXhwbGFuYXRpb24sIG1heSBpbmNsdWRlIHBhcmFtZXRlcnMgYW5kIG90aGVyIHVzZWZ1bCBkZWJ1Z2dpbmcgaW5mb3JtYXRpb25cbiAgICogQHJldHVybiB7SW50ZXJ2YWx9XG4gICAqL1xuXG5cbiAgSW50ZXJ2YWwuaW52YWxpZCA9IGZ1bmN0aW9uIGludmFsaWQocmVhc29uLCBleHBsYW5hdGlvbikge1xuICAgIGlmIChleHBsYW5hdGlvbiA9PT0gdm9pZCAwKSB7XG4gICAgICBleHBsYW5hdGlvbiA9IG51bGw7XG4gICAgfVxuXG4gICAgaWYgKCFyZWFzb24pIHtcbiAgICAgIHRocm93IG5ldyBJbnZhbGlkQXJndW1lbnRFcnJvcihcIm5lZWQgdG8gc3BlY2lmeSBhIHJlYXNvbiB0aGUgSW50ZXJ2YWwgaXMgaW52YWxpZFwiKTtcbiAgICB9XG5cbiAgICB2YXIgaW52YWxpZCA9IHJlYXNvbiBpbnN0YW5jZW9mIEludmFsaWQgPyByZWFzb24gOiBuZXcgSW52YWxpZChyZWFzb24sIGV4cGxhbmF0aW9uKTtcblxuICAgIGlmIChTZXR0aW5ncy50aHJvd09uSW52YWxpZCkge1xuICAgICAgdGhyb3cgbmV3IEludmFsaWRJbnRlcnZhbEVycm9yKGludmFsaWQpO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gbmV3IEludGVydmFsKHtcbiAgICAgICAgaW52YWxpZDogaW52YWxpZFxuICAgICAgfSk7XG4gICAgfVxuICB9XG4gIC8qKlxuICAgKiBDcmVhdGUgYW4gSW50ZXJ2YWwgZnJvbSBhIHN0YXJ0IERhdGVUaW1lIGFuZCBhbiBlbmQgRGF0ZVRpbWUuIEluY2x1c2l2ZSBvZiB0aGUgc3RhcnQgYnV0IG5vdCB0aGUgZW5kLlxuICAgKiBAcGFyYW0ge0RhdGVUaW1lfERhdGV8T2JqZWN0fSBzdGFydFxuICAgKiBAcGFyYW0ge0RhdGVUaW1lfERhdGV8T2JqZWN0fSBlbmRcbiAgICogQHJldHVybiB7SW50ZXJ2YWx9XG4gICAqL1xuICA7XG5cbiAgSW50ZXJ2YWwuZnJvbURhdGVUaW1lcyA9IGZ1bmN0aW9uIGZyb21EYXRlVGltZXMoc3RhcnQsIGVuZCkge1xuICAgIHZhciBidWlsdFN0YXJ0ID0gZnJpZW5kbHlEYXRlVGltZShzdGFydCksXG4gICAgICAgIGJ1aWx0RW5kID0gZnJpZW5kbHlEYXRlVGltZShlbmQpO1xuICAgIHZhciB2YWxpZGF0ZUVycm9yID0gdmFsaWRhdGVTdGFydEVuZChidWlsdFN0YXJ0LCBidWlsdEVuZCk7XG5cbiAgICBpZiAodmFsaWRhdGVFcnJvciA9PSBudWxsKSB7XG4gICAgICByZXR1cm4gbmV3IEludGVydmFsKHtcbiAgICAgICAgc3RhcnQ6IGJ1aWx0U3RhcnQsXG4gICAgICAgIGVuZDogYnVpbHRFbmRcbiAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gdmFsaWRhdGVFcnJvcjtcbiAgICB9XG4gIH1cbiAgLyoqXG4gICAqIENyZWF0ZSBhbiBJbnRlcnZhbCBmcm9tIGEgc3RhcnQgRGF0ZVRpbWUgYW5kIGEgRHVyYXRpb24gdG8gZXh0ZW5kIHRvLlxuICAgKiBAcGFyYW0ge0RhdGVUaW1lfERhdGV8T2JqZWN0fSBzdGFydFxuICAgKiBAcGFyYW0ge0R1cmF0aW9ufE9iamVjdHxudW1iZXJ9IGR1cmF0aW9uIC0gdGhlIGxlbmd0aCBvZiB0aGUgSW50ZXJ2YWwuXG4gICAqIEByZXR1cm4ge0ludGVydmFsfVxuICAgKi9cbiAgO1xuXG4gIEludGVydmFsLmFmdGVyID0gZnVuY3Rpb24gYWZ0ZXIoc3RhcnQsIGR1cmF0aW9uKSB7XG4gICAgdmFyIGR1ciA9IER1cmF0aW9uLmZyb21EdXJhdGlvbkxpa2UoZHVyYXRpb24pLFxuICAgICAgICBkdCA9IGZyaWVuZGx5RGF0ZVRpbWUoc3RhcnQpO1xuICAgIHJldHVybiBJbnRlcnZhbC5mcm9tRGF0ZVRpbWVzKGR0LCBkdC5wbHVzKGR1cikpO1xuICB9XG4gIC8qKlxuICAgKiBDcmVhdGUgYW4gSW50ZXJ2YWwgZnJvbSBhbiBlbmQgRGF0ZVRpbWUgYW5kIGEgRHVyYXRpb24gdG8gZXh0ZW5kIGJhY2t3YXJkcyB0by5cbiAgICogQHBhcmFtIHtEYXRlVGltZXxEYXRlfE9iamVjdH0gZW5kXG4gICAqIEBwYXJhbSB7RHVyYXRpb258T2JqZWN0fG51bWJlcn0gZHVyYXRpb24gLSB0aGUgbGVuZ3RoIG9mIHRoZSBJbnRlcnZhbC5cbiAgICogQHJldHVybiB7SW50ZXJ2YWx9XG4gICAqL1xuICA7XG5cbiAgSW50ZXJ2YWwuYmVmb3JlID0gZnVuY3Rpb24gYmVmb3JlKGVuZCwgZHVyYXRpb24pIHtcbiAgICB2YXIgZHVyID0gRHVyYXRpb24uZnJvbUR1cmF0aW9uTGlrZShkdXJhdGlvbiksXG4gICAgICAgIGR0ID0gZnJpZW5kbHlEYXRlVGltZShlbmQpO1xuICAgIHJldHVybiBJbnRlcnZhbC5mcm9tRGF0ZVRpbWVzKGR0Lm1pbnVzKGR1ciksIGR0KTtcbiAgfVxuICAvKipcbiAgICogQ3JlYXRlIGFuIEludGVydmFsIGZyb20gYW4gSVNPIDg2MDEgc3RyaW5nLlxuICAgKiBBY2NlcHRzIGA8c3RhcnQ+LzxlbmQ+YCwgYDxzdGFydD4vPGR1cmF0aW9uPmAsIGFuZCBgPGR1cmF0aW9uPi88ZW5kPmAgZm9ybWF0cy5cbiAgICogQHBhcmFtIHtzdHJpbmd9IHRleHQgLSB0aGUgSVNPIHN0cmluZyB0byBwYXJzZVxuICAgKiBAcGFyYW0ge09iamVjdH0gW29wdHNdIC0gb3B0aW9ucyB0byBwYXNzIHtAbGluayBEYXRlVGltZSNmcm9tSVNPfSBhbmQgb3B0aW9uYWxseSB7QGxpbmsgRHVyYXRpb24jZnJvbUlTT31cbiAgICogQHNlZSBodHRwczovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9JU09fODYwMSNUaW1lX2ludGVydmFsc1xuICAgKiBAcmV0dXJuIHtJbnRlcnZhbH1cbiAgICovXG4gIDtcblxuICBJbnRlcnZhbC5mcm9tSVNPID0gZnVuY3Rpb24gZnJvbUlTTyh0ZXh0LCBvcHRzKSB7XG4gICAgdmFyIF9zcGxpdCA9ICh0ZXh0IHx8IFwiXCIpLnNwbGl0KFwiL1wiLCAyKSxcbiAgICAgICAgcyA9IF9zcGxpdFswXSxcbiAgICAgICAgZSA9IF9zcGxpdFsxXTtcblxuICAgIGlmIChzICYmIGUpIHtcbiAgICAgIHZhciBzdGFydCwgc3RhcnRJc1ZhbGlkO1xuXG4gICAgICB0cnkge1xuICAgICAgICBzdGFydCA9IERhdGVUaW1lLmZyb21JU08ocywgb3B0cyk7XG4gICAgICAgIHN0YXJ0SXNWYWxpZCA9IHN0YXJ0LmlzVmFsaWQ7XG4gICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIHN0YXJ0SXNWYWxpZCA9IGZhbHNlO1xuICAgICAgfVxuXG4gICAgICB2YXIgZW5kLCBlbmRJc1ZhbGlkO1xuXG4gICAgICB0cnkge1xuICAgICAgICBlbmQgPSBEYXRlVGltZS5mcm9tSVNPKGUsIG9wdHMpO1xuICAgICAgICBlbmRJc1ZhbGlkID0gZW5kLmlzVmFsaWQ7XG4gICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIGVuZElzVmFsaWQgPSBmYWxzZTtcbiAgICAgIH1cblxuICAgICAgaWYgKHN0YXJ0SXNWYWxpZCAmJiBlbmRJc1ZhbGlkKSB7XG4gICAgICAgIHJldHVybiBJbnRlcnZhbC5mcm9tRGF0ZVRpbWVzKHN0YXJ0LCBlbmQpO1xuICAgICAgfVxuXG4gICAgICBpZiAoc3RhcnRJc1ZhbGlkKSB7XG4gICAgICAgIHZhciBkdXIgPSBEdXJhdGlvbi5mcm9tSVNPKGUsIG9wdHMpO1xuXG4gICAgICAgIGlmIChkdXIuaXNWYWxpZCkge1xuICAgICAgICAgIHJldHVybiBJbnRlcnZhbC5hZnRlcihzdGFydCwgZHVyKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmIChlbmRJc1ZhbGlkKSB7XG4gICAgICAgIHZhciBfZHVyID0gRHVyYXRpb24uZnJvbUlTTyhzLCBvcHRzKTtcblxuICAgICAgICBpZiAoX2R1ci5pc1ZhbGlkKSB7XG4gICAgICAgICAgcmV0dXJuIEludGVydmFsLmJlZm9yZShlbmQsIF9kdXIpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIEludGVydmFsLmludmFsaWQoXCJ1bnBhcnNhYmxlXCIsIFwidGhlIGlucHV0IFxcXCJcIiArIHRleHQgKyBcIlxcXCIgY2FuJ3QgYmUgcGFyc2VkIGFzIElTTyA4NjAxXCIpO1xuICB9XG4gIC8qKlxuICAgKiBDaGVjayBpZiBhbiBvYmplY3QgaXMgYW4gSW50ZXJ2YWwuIFdvcmtzIGFjcm9zcyBjb250ZXh0IGJvdW5kYXJpZXNcbiAgICogQHBhcmFtIHtvYmplY3R9IG9cbiAgICogQHJldHVybiB7Ym9vbGVhbn1cbiAgICovXG4gIDtcblxuICBJbnRlcnZhbC5pc0ludGVydmFsID0gZnVuY3Rpb24gaXNJbnRlcnZhbChvKSB7XG4gICAgcmV0dXJuIG8gJiYgby5pc0x1eG9uSW50ZXJ2YWwgfHwgZmFsc2U7XG4gIH1cbiAgLyoqXG4gICAqIFJldHVybnMgdGhlIHN0YXJ0IG9mIHRoZSBJbnRlcnZhbFxuICAgKiBAdHlwZSB7RGF0ZVRpbWV9XG4gICAqL1xuICA7XG5cbiAgdmFyIF9wcm90byA9IEludGVydmFsLnByb3RvdHlwZTtcblxuICAvKipcbiAgICogUmV0dXJucyB0aGUgbGVuZ3RoIG9mIHRoZSBJbnRlcnZhbCBpbiB0aGUgc3BlY2lmaWVkIHVuaXQuXG4gICAqIEBwYXJhbSB7c3RyaW5nfSB1bml0IC0gdGhlIHVuaXQgKHN1Y2ggYXMgJ2hvdXJzJyBvciAnZGF5cycpIHRvIHJldHVybiB0aGUgbGVuZ3RoIGluLlxuICAgKiBAcmV0dXJuIHtudW1iZXJ9XG4gICAqL1xuICBfcHJvdG8ubGVuZ3RoID0gZnVuY3Rpb24gbGVuZ3RoKHVuaXQpIHtcbiAgICBpZiAodW5pdCA9PT0gdm9pZCAwKSB7XG4gICAgICB1bml0ID0gXCJtaWxsaXNlY29uZHNcIjtcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcy5pc1ZhbGlkID8gdGhpcy50b0R1cmF0aW9uLmFwcGx5KHRoaXMsIFt1bml0XSkuZ2V0KHVuaXQpIDogTmFOO1xuICB9XG4gIC8qKlxuICAgKiBSZXR1cm5zIHRoZSBjb3VudCBvZiBtaW51dGVzLCBob3VycywgZGF5cywgbW9udGhzLCBvciB5ZWFycyBpbmNsdWRlZCBpbiB0aGUgSW50ZXJ2YWwsIGV2ZW4gaW4gcGFydC5cbiAgICogVW5saWtlIHtAbGluayBJbnRlcnZhbCNsZW5ndGh9IHRoaXMgY291bnRzIHNlY3Rpb25zIG9mIHRoZSBjYWxlbmRhciwgbm90IHBlcmlvZHMgb2YgdGltZSwgZS5nLiBzcGVjaWZ5aW5nICdkYXknXG4gICAqIGFza3MgJ3doYXQgZGF0ZXMgYXJlIGluY2x1ZGVkIGluIHRoaXMgaW50ZXJ2YWw/Jywgbm90ICdob3cgbWFueSBkYXlzIGxvbmcgaXMgdGhpcyBpbnRlcnZhbD8nXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBbdW5pdD0nbWlsbGlzZWNvbmRzJ10gLSB0aGUgdW5pdCBvZiB0aW1lIHRvIGNvdW50LlxuICAgKiBAcmV0dXJuIHtudW1iZXJ9XG4gICAqL1xuICA7XG5cbiAgX3Byb3RvLmNvdW50ID0gZnVuY3Rpb24gY291bnQodW5pdCkge1xuICAgIGlmICh1bml0ID09PSB2b2lkIDApIHtcbiAgICAgIHVuaXQgPSBcIm1pbGxpc2Vjb25kc1wiO1xuICAgIH1cblxuICAgIGlmICghdGhpcy5pc1ZhbGlkKSByZXR1cm4gTmFOO1xuICAgIHZhciBzdGFydCA9IHRoaXMuc3RhcnQuc3RhcnRPZih1bml0KSxcbiAgICAgICAgZW5kID0gdGhpcy5lbmQuc3RhcnRPZih1bml0KTtcbiAgICByZXR1cm4gTWF0aC5mbG9vcihlbmQuZGlmZihzdGFydCwgdW5pdCkuZ2V0KHVuaXQpKSArIDE7XG4gIH1cbiAgLyoqXG4gICAqIFJldHVybnMgd2hldGhlciB0aGlzIEludGVydmFsJ3Mgc3RhcnQgYW5kIGVuZCBhcmUgYm90aCBpbiB0aGUgc2FtZSB1bml0IG9mIHRpbWVcbiAgICogQHBhcmFtIHtzdHJpbmd9IHVuaXQgLSB0aGUgdW5pdCBvZiB0aW1lIHRvIGNoZWNrIHNhbWVuZXNzIG9uXG4gICAqIEByZXR1cm4ge2Jvb2xlYW59XG4gICAqL1xuICA7XG5cbiAgX3Byb3RvLmhhc1NhbWUgPSBmdW5jdGlvbiBoYXNTYW1lKHVuaXQpIHtcbiAgICByZXR1cm4gdGhpcy5pc1ZhbGlkID8gdGhpcy5pc0VtcHR5KCkgfHwgdGhpcy5lLm1pbnVzKDEpLmhhc1NhbWUodGhpcy5zLCB1bml0KSA6IGZhbHNlO1xuICB9XG4gIC8qKlxuICAgKiBSZXR1cm4gd2hldGhlciB0aGlzIEludGVydmFsIGhhcyB0aGUgc2FtZSBzdGFydCBhbmQgZW5kIERhdGVUaW1lcy5cbiAgICogQHJldHVybiB7Ym9vbGVhbn1cbiAgICovXG4gIDtcblxuICBfcHJvdG8uaXNFbXB0eSA9IGZ1bmN0aW9uIGlzRW1wdHkoKSB7XG4gICAgcmV0dXJuIHRoaXMucy52YWx1ZU9mKCkgPT09IHRoaXMuZS52YWx1ZU9mKCk7XG4gIH1cbiAgLyoqXG4gICAqIFJldHVybiB3aGV0aGVyIHRoaXMgSW50ZXJ2YWwncyBzdGFydCBpcyBhZnRlciB0aGUgc3BlY2lmaWVkIERhdGVUaW1lLlxuICAgKiBAcGFyYW0ge0RhdGVUaW1lfSBkYXRlVGltZVxuICAgKiBAcmV0dXJuIHtib29sZWFufVxuICAgKi9cbiAgO1xuXG4gIF9wcm90by5pc0FmdGVyID0gZnVuY3Rpb24gaXNBZnRlcihkYXRlVGltZSkge1xuICAgIGlmICghdGhpcy5pc1ZhbGlkKSByZXR1cm4gZmFsc2U7XG4gICAgcmV0dXJuIHRoaXMucyA+IGRhdGVUaW1lO1xuICB9XG4gIC8qKlxuICAgKiBSZXR1cm4gd2hldGhlciB0aGlzIEludGVydmFsJ3MgZW5kIGlzIGJlZm9yZSB0aGUgc3BlY2lmaWVkIERhdGVUaW1lLlxuICAgKiBAcGFyYW0ge0RhdGVUaW1lfSBkYXRlVGltZVxuICAgKiBAcmV0dXJuIHtib29sZWFufVxuICAgKi9cbiAgO1xuXG4gIF9wcm90by5pc0JlZm9yZSA9IGZ1bmN0aW9uIGlzQmVmb3JlKGRhdGVUaW1lKSB7XG4gICAgaWYgKCF0aGlzLmlzVmFsaWQpIHJldHVybiBmYWxzZTtcbiAgICByZXR1cm4gdGhpcy5lIDw9IGRhdGVUaW1lO1xuICB9XG4gIC8qKlxuICAgKiBSZXR1cm4gd2hldGhlciB0aGlzIEludGVydmFsIGNvbnRhaW5zIHRoZSBzcGVjaWZpZWQgRGF0ZVRpbWUuXG4gICAqIEBwYXJhbSB7RGF0ZVRpbWV9IGRhdGVUaW1lXG4gICAqIEByZXR1cm4ge2Jvb2xlYW59XG4gICAqL1xuICA7XG5cbiAgX3Byb3RvLmNvbnRhaW5zID0gZnVuY3Rpb24gY29udGFpbnMoZGF0ZVRpbWUpIHtcbiAgICBpZiAoIXRoaXMuaXNWYWxpZCkgcmV0dXJuIGZhbHNlO1xuICAgIHJldHVybiB0aGlzLnMgPD0gZGF0ZVRpbWUgJiYgdGhpcy5lID4gZGF0ZVRpbWU7XG4gIH1cbiAgLyoqXG4gICAqIFwiU2V0c1wiIHRoZSBzdGFydCBhbmQvb3IgZW5kIGRhdGVzLiBSZXR1cm5zIGEgbmV3bHktY29uc3RydWN0ZWQgSW50ZXJ2YWwuXG4gICAqIEBwYXJhbSB7T2JqZWN0fSB2YWx1ZXMgLSB0aGUgdmFsdWVzIHRvIHNldFxuICAgKiBAcGFyYW0ge0RhdGVUaW1lfSB2YWx1ZXMuc3RhcnQgLSB0aGUgc3RhcnRpbmcgRGF0ZVRpbWVcbiAgICogQHBhcmFtIHtEYXRlVGltZX0gdmFsdWVzLmVuZCAtIHRoZSBlbmRpbmcgRGF0ZVRpbWVcbiAgICogQHJldHVybiB7SW50ZXJ2YWx9XG4gICAqL1xuICA7XG5cbiAgX3Byb3RvLnNldCA9IGZ1bmN0aW9uIHNldChfdGVtcCkge1xuICAgIHZhciBfcmVmID0gX3RlbXAgPT09IHZvaWQgMCA/IHt9IDogX3RlbXAsXG4gICAgICAgIHN0YXJ0ID0gX3JlZi5zdGFydCxcbiAgICAgICAgZW5kID0gX3JlZi5lbmQ7XG5cbiAgICBpZiAoIXRoaXMuaXNWYWxpZCkgcmV0dXJuIHRoaXM7XG4gICAgcmV0dXJuIEludGVydmFsLmZyb21EYXRlVGltZXMoc3RhcnQgfHwgdGhpcy5zLCBlbmQgfHwgdGhpcy5lKTtcbiAgfVxuICAvKipcbiAgICogU3BsaXQgdGhpcyBJbnRlcnZhbCBhdCBlYWNoIG9mIHRoZSBzcGVjaWZpZWQgRGF0ZVRpbWVzXG4gICAqIEBwYXJhbSB7Li4uRGF0ZVRpbWV9IGRhdGVUaW1lcyAtIHRoZSB1bml0IG9mIHRpbWUgdG8gY291bnQuXG4gICAqIEByZXR1cm4ge0FycmF5fVxuICAgKi9cbiAgO1xuXG4gIF9wcm90by5zcGxpdEF0ID0gZnVuY3Rpb24gc3BsaXRBdCgpIHtcbiAgICB2YXIgX3RoaXMgPSB0aGlzO1xuXG4gICAgaWYgKCF0aGlzLmlzVmFsaWQpIHJldHVybiBbXTtcblxuICAgIGZvciAodmFyIF9sZW4gPSBhcmd1bWVudHMubGVuZ3RoLCBkYXRlVGltZXMgPSBuZXcgQXJyYXkoX2xlbiksIF9rZXkgPSAwOyBfa2V5IDwgX2xlbjsgX2tleSsrKSB7XG4gICAgICBkYXRlVGltZXNbX2tleV0gPSBhcmd1bWVudHNbX2tleV07XG4gICAgfVxuXG4gICAgdmFyIHNvcnRlZCA9IGRhdGVUaW1lcy5tYXAoZnJpZW5kbHlEYXRlVGltZSkuZmlsdGVyKGZ1bmN0aW9uIChkKSB7XG4gICAgICByZXR1cm4gX3RoaXMuY29udGFpbnMoZCk7XG4gICAgfSkuc29ydCgpLFxuICAgICAgICByZXN1bHRzID0gW107XG4gICAgdmFyIHMgPSB0aGlzLnMsXG4gICAgICAgIGkgPSAwO1xuXG4gICAgd2hpbGUgKHMgPCB0aGlzLmUpIHtcbiAgICAgIHZhciBhZGRlZCA9IHNvcnRlZFtpXSB8fCB0aGlzLmUsXG4gICAgICAgICAgbmV4dCA9ICthZGRlZCA+ICt0aGlzLmUgPyB0aGlzLmUgOiBhZGRlZDtcbiAgICAgIHJlc3VsdHMucHVzaChJbnRlcnZhbC5mcm9tRGF0ZVRpbWVzKHMsIG5leHQpKTtcbiAgICAgIHMgPSBuZXh0O1xuICAgICAgaSArPSAxO1xuICAgIH1cblxuICAgIHJldHVybiByZXN1bHRzO1xuICB9XG4gIC8qKlxuICAgKiBTcGxpdCB0aGlzIEludGVydmFsIGludG8gc21hbGxlciBJbnRlcnZhbHMsIGVhY2ggb2YgdGhlIHNwZWNpZmllZCBsZW5ndGguXG4gICAqIExlZnQgb3ZlciB0aW1lIGlzIGdyb3VwZWQgaW50byBhIHNtYWxsZXIgaW50ZXJ2YWxcbiAgICogQHBhcmFtIHtEdXJhdGlvbnxPYmplY3R8bnVtYmVyfSBkdXJhdGlvbiAtIFRoZSBsZW5ndGggb2YgZWFjaCByZXN1bHRpbmcgaW50ZXJ2YWwuXG4gICAqIEByZXR1cm4ge0FycmF5fVxuICAgKi9cbiAgO1xuXG4gIF9wcm90by5zcGxpdEJ5ID0gZnVuY3Rpb24gc3BsaXRCeShkdXJhdGlvbikge1xuICAgIHZhciBkdXIgPSBEdXJhdGlvbi5mcm9tRHVyYXRpb25MaWtlKGR1cmF0aW9uKTtcblxuICAgIGlmICghdGhpcy5pc1ZhbGlkIHx8ICFkdXIuaXNWYWxpZCB8fCBkdXIuYXMoXCJtaWxsaXNlY29uZHNcIikgPT09IDApIHtcbiAgICAgIHJldHVybiBbXTtcbiAgICB9XG5cbiAgICB2YXIgcyA9IHRoaXMucyxcbiAgICAgICAgaWR4ID0gMSxcbiAgICAgICAgbmV4dDtcbiAgICB2YXIgcmVzdWx0cyA9IFtdO1xuXG4gICAgd2hpbGUgKHMgPCB0aGlzLmUpIHtcbiAgICAgIHZhciBhZGRlZCA9IHRoaXMuc3RhcnQucGx1cyhkdXIubWFwVW5pdHMoZnVuY3Rpb24gKHgpIHtcbiAgICAgICAgcmV0dXJuIHggKiBpZHg7XG4gICAgICB9KSk7XG4gICAgICBuZXh0ID0gK2FkZGVkID4gK3RoaXMuZSA/IHRoaXMuZSA6IGFkZGVkO1xuICAgICAgcmVzdWx0cy5wdXNoKEludGVydmFsLmZyb21EYXRlVGltZXMocywgbmV4dCkpO1xuICAgICAgcyA9IG5leHQ7XG4gICAgICBpZHggKz0gMTtcbiAgICB9XG5cbiAgICByZXR1cm4gcmVzdWx0cztcbiAgfVxuICAvKipcbiAgICogU3BsaXQgdGhpcyBJbnRlcnZhbCBpbnRvIHRoZSBzcGVjaWZpZWQgbnVtYmVyIG9mIHNtYWxsZXIgaW50ZXJ2YWxzLlxuICAgKiBAcGFyYW0ge251bWJlcn0gbnVtYmVyT2ZQYXJ0cyAtIFRoZSBudW1iZXIgb2YgSW50ZXJ2YWxzIHRvIGRpdmlkZSB0aGUgSW50ZXJ2YWwgaW50by5cbiAgICogQHJldHVybiB7QXJyYXl9XG4gICAqL1xuICA7XG5cbiAgX3Byb3RvLmRpdmlkZUVxdWFsbHkgPSBmdW5jdGlvbiBkaXZpZGVFcXVhbGx5KG51bWJlck9mUGFydHMpIHtcbiAgICBpZiAoIXRoaXMuaXNWYWxpZCkgcmV0dXJuIFtdO1xuICAgIHJldHVybiB0aGlzLnNwbGl0QnkodGhpcy5sZW5ndGgoKSAvIG51bWJlck9mUGFydHMpLnNsaWNlKDAsIG51bWJlck9mUGFydHMpO1xuICB9XG4gIC8qKlxuICAgKiBSZXR1cm4gd2hldGhlciB0aGlzIEludGVydmFsIG92ZXJsYXBzIHdpdGggdGhlIHNwZWNpZmllZCBJbnRlcnZhbFxuICAgKiBAcGFyYW0ge0ludGVydmFsfSBvdGhlclxuICAgKiBAcmV0dXJuIHtib29sZWFufVxuICAgKi9cbiAgO1xuXG4gIF9wcm90by5vdmVybGFwcyA9IGZ1bmN0aW9uIG92ZXJsYXBzKG90aGVyKSB7XG4gICAgcmV0dXJuIHRoaXMuZSA+IG90aGVyLnMgJiYgdGhpcy5zIDwgb3RoZXIuZTtcbiAgfVxuICAvKipcbiAgICogUmV0dXJuIHdoZXRoZXIgdGhpcyBJbnRlcnZhbCdzIGVuZCBpcyBhZGphY2VudCB0byB0aGUgc3BlY2lmaWVkIEludGVydmFsJ3Mgc3RhcnQuXG4gICAqIEBwYXJhbSB7SW50ZXJ2YWx9IG90aGVyXG4gICAqIEByZXR1cm4ge2Jvb2xlYW59XG4gICAqL1xuICA7XG5cbiAgX3Byb3RvLmFidXRzU3RhcnQgPSBmdW5jdGlvbiBhYnV0c1N0YXJ0KG90aGVyKSB7XG4gICAgaWYgKCF0aGlzLmlzVmFsaWQpIHJldHVybiBmYWxzZTtcbiAgICByZXR1cm4gK3RoaXMuZSA9PT0gK290aGVyLnM7XG4gIH1cbiAgLyoqXG4gICAqIFJldHVybiB3aGV0aGVyIHRoaXMgSW50ZXJ2YWwncyBzdGFydCBpcyBhZGphY2VudCB0byB0aGUgc3BlY2lmaWVkIEludGVydmFsJ3MgZW5kLlxuICAgKiBAcGFyYW0ge0ludGVydmFsfSBvdGhlclxuICAgKiBAcmV0dXJuIHtib29sZWFufVxuICAgKi9cbiAgO1xuXG4gIF9wcm90by5hYnV0c0VuZCA9IGZ1bmN0aW9uIGFidXRzRW5kKG90aGVyKSB7XG4gICAgaWYgKCF0aGlzLmlzVmFsaWQpIHJldHVybiBmYWxzZTtcbiAgICByZXR1cm4gK290aGVyLmUgPT09ICt0aGlzLnM7XG4gIH1cbiAgLyoqXG4gICAqIFJldHVybiB3aGV0aGVyIHRoaXMgSW50ZXJ2YWwgZW5ndWxmcyB0aGUgc3RhcnQgYW5kIGVuZCBvZiB0aGUgc3BlY2lmaWVkIEludGVydmFsLlxuICAgKiBAcGFyYW0ge0ludGVydmFsfSBvdGhlclxuICAgKiBAcmV0dXJuIHtib29sZWFufVxuICAgKi9cbiAgO1xuXG4gIF9wcm90by5lbmd1bGZzID0gZnVuY3Rpb24gZW5ndWxmcyhvdGhlcikge1xuICAgIGlmICghdGhpcy5pc1ZhbGlkKSByZXR1cm4gZmFsc2U7XG4gICAgcmV0dXJuIHRoaXMucyA8PSBvdGhlci5zICYmIHRoaXMuZSA+PSBvdGhlci5lO1xuICB9XG4gIC8qKlxuICAgKiBSZXR1cm4gd2hldGhlciB0aGlzIEludGVydmFsIGhhcyB0aGUgc2FtZSBzdGFydCBhbmQgZW5kIGFzIHRoZSBzcGVjaWZpZWQgSW50ZXJ2YWwuXG4gICAqIEBwYXJhbSB7SW50ZXJ2YWx9IG90aGVyXG4gICAqIEByZXR1cm4ge2Jvb2xlYW59XG4gICAqL1xuICA7XG5cbiAgX3Byb3RvLmVxdWFscyA9IGZ1bmN0aW9uIGVxdWFscyhvdGhlcikge1xuICAgIGlmICghdGhpcy5pc1ZhbGlkIHx8ICFvdGhlci5pc1ZhbGlkKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXMucy5lcXVhbHMob3RoZXIucykgJiYgdGhpcy5lLmVxdWFscyhvdGhlci5lKTtcbiAgfVxuICAvKipcbiAgICogUmV0dXJuIGFuIEludGVydmFsIHJlcHJlc2VudGluZyB0aGUgaW50ZXJzZWN0aW9uIG9mIHRoaXMgSW50ZXJ2YWwgYW5kIHRoZSBzcGVjaWZpZWQgSW50ZXJ2YWwuXG4gICAqIFNwZWNpZmljYWxseSwgdGhlIHJlc3VsdGluZyBJbnRlcnZhbCBoYXMgdGhlIG1heGltdW0gc3RhcnQgdGltZSBhbmQgdGhlIG1pbmltdW0gZW5kIHRpbWUgb2YgdGhlIHR3byBJbnRlcnZhbHMuXG4gICAqIFJldHVybnMgbnVsbCBpZiB0aGUgaW50ZXJzZWN0aW9uIGlzIGVtcHR5LCBtZWFuaW5nLCB0aGUgaW50ZXJ2YWxzIGRvbid0IGludGVyc2VjdC5cbiAgICogQHBhcmFtIHtJbnRlcnZhbH0gb3RoZXJcbiAgICogQHJldHVybiB7SW50ZXJ2YWx9XG4gICAqL1xuICA7XG5cbiAgX3Byb3RvLmludGVyc2VjdGlvbiA9IGZ1bmN0aW9uIGludGVyc2VjdGlvbihvdGhlcikge1xuICAgIGlmICghdGhpcy5pc1ZhbGlkKSByZXR1cm4gdGhpcztcbiAgICB2YXIgcyA9IHRoaXMucyA+IG90aGVyLnMgPyB0aGlzLnMgOiBvdGhlci5zLFxuICAgICAgICBlID0gdGhpcy5lIDwgb3RoZXIuZSA/IHRoaXMuZSA6IG90aGVyLmU7XG5cbiAgICBpZiAocyA+PSBlKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIEludGVydmFsLmZyb21EYXRlVGltZXMocywgZSk7XG4gICAgfVxuICB9XG4gIC8qKlxuICAgKiBSZXR1cm4gYW4gSW50ZXJ2YWwgcmVwcmVzZW50aW5nIHRoZSB1bmlvbiBvZiB0aGlzIEludGVydmFsIGFuZCB0aGUgc3BlY2lmaWVkIEludGVydmFsLlxuICAgKiBTcGVjaWZpY2FsbHksIHRoZSByZXN1bHRpbmcgSW50ZXJ2YWwgaGFzIHRoZSBtaW5pbXVtIHN0YXJ0IHRpbWUgYW5kIHRoZSBtYXhpbXVtIGVuZCB0aW1lIG9mIHRoZSB0d28gSW50ZXJ2YWxzLlxuICAgKiBAcGFyYW0ge0ludGVydmFsfSBvdGhlclxuICAgKiBAcmV0dXJuIHtJbnRlcnZhbH1cbiAgICovXG4gIDtcblxuICBfcHJvdG8udW5pb24gPSBmdW5jdGlvbiB1bmlvbihvdGhlcikge1xuICAgIGlmICghdGhpcy5pc1ZhbGlkKSByZXR1cm4gdGhpcztcbiAgICB2YXIgcyA9IHRoaXMucyA8IG90aGVyLnMgPyB0aGlzLnMgOiBvdGhlci5zLFxuICAgICAgICBlID0gdGhpcy5lID4gb3RoZXIuZSA/IHRoaXMuZSA6IG90aGVyLmU7XG4gICAgcmV0dXJuIEludGVydmFsLmZyb21EYXRlVGltZXMocywgZSk7XG4gIH1cbiAgLyoqXG4gICAqIE1lcmdlIGFuIGFycmF5IG9mIEludGVydmFscyBpbnRvIGEgZXF1aXZhbGVudCBtaW5pbWFsIHNldCBvZiBJbnRlcnZhbHMuXG4gICAqIENvbWJpbmVzIG92ZXJsYXBwaW5nIGFuZCBhZGphY2VudCBJbnRlcnZhbHMuXG4gICAqIEBwYXJhbSB7QXJyYXl9IGludGVydmFsc1xuICAgKiBAcmV0dXJuIHtBcnJheX1cbiAgICovXG4gIDtcblxuICBJbnRlcnZhbC5tZXJnZSA9IGZ1bmN0aW9uIG1lcmdlKGludGVydmFscykge1xuICAgIHZhciBfaW50ZXJ2YWxzJHNvcnQkcmVkdWMgPSBpbnRlcnZhbHMuc29ydChmdW5jdGlvbiAoYSwgYikge1xuICAgICAgcmV0dXJuIGEucyAtIGIucztcbiAgICB9KS5yZWR1Y2UoZnVuY3Rpb24gKF9yZWYyLCBpdGVtKSB7XG4gICAgICB2YXIgc29mYXIgPSBfcmVmMlswXSxcbiAgICAgICAgICBjdXJyZW50ID0gX3JlZjJbMV07XG5cbiAgICAgIGlmICghY3VycmVudCkge1xuICAgICAgICByZXR1cm4gW3NvZmFyLCBpdGVtXTtcbiAgICAgIH0gZWxzZSBpZiAoY3VycmVudC5vdmVybGFwcyhpdGVtKSB8fCBjdXJyZW50LmFidXRzU3RhcnQoaXRlbSkpIHtcbiAgICAgICAgcmV0dXJuIFtzb2ZhciwgY3VycmVudC51bmlvbihpdGVtKV07XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gW3NvZmFyLmNvbmNhdChbY3VycmVudF0pLCBpdGVtXTtcbiAgICAgIH1cbiAgICB9LCBbW10sIG51bGxdKSxcbiAgICAgICAgZm91bmQgPSBfaW50ZXJ2YWxzJHNvcnQkcmVkdWNbMF0sXG4gICAgICAgIGZpbmFsID0gX2ludGVydmFscyRzb3J0JHJlZHVjWzFdO1xuXG4gICAgaWYgKGZpbmFsKSB7XG4gICAgICBmb3VuZC5wdXNoKGZpbmFsKTtcbiAgICB9XG5cbiAgICByZXR1cm4gZm91bmQ7XG4gIH1cbiAgLyoqXG4gICAqIFJldHVybiBhbiBhcnJheSBvZiBJbnRlcnZhbHMgcmVwcmVzZW50aW5nIHRoZSBzcGFucyBvZiB0aW1lIHRoYXQgb25seSBhcHBlYXIgaW4gb25lIG9mIHRoZSBzcGVjaWZpZWQgSW50ZXJ2YWxzLlxuICAgKiBAcGFyYW0ge0FycmF5fSBpbnRlcnZhbHNcbiAgICogQHJldHVybiB7QXJyYXl9XG4gICAqL1xuICA7XG5cbiAgSW50ZXJ2YWwueG9yID0gZnVuY3Rpb24geG9yKGludGVydmFscykge1xuICAgIHZhciBfQXJyYXkkcHJvdG90eXBlO1xuXG4gICAgdmFyIHN0YXJ0ID0gbnVsbCxcbiAgICAgICAgY3VycmVudENvdW50ID0gMDtcblxuICAgIHZhciByZXN1bHRzID0gW10sXG4gICAgICAgIGVuZHMgPSBpbnRlcnZhbHMubWFwKGZ1bmN0aW9uIChpKSB7XG4gICAgICByZXR1cm4gW3tcbiAgICAgICAgdGltZTogaS5zLFxuICAgICAgICB0eXBlOiBcInNcIlxuICAgICAgfSwge1xuICAgICAgICB0aW1lOiBpLmUsXG4gICAgICAgIHR5cGU6IFwiZVwiXG4gICAgICB9XTtcbiAgICB9KSxcbiAgICAgICAgZmxhdHRlbmVkID0gKF9BcnJheSRwcm90b3R5cGUgPSBBcnJheS5wcm90b3R5cGUpLmNvbmNhdC5hcHBseShfQXJyYXkkcHJvdG90eXBlLCBlbmRzKSxcbiAgICAgICAgYXJyID0gZmxhdHRlbmVkLnNvcnQoZnVuY3Rpb24gKGEsIGIpIHtcbiAgICAgIHJldHVybiBhLnRpbWUgLSBiLnRpbWU7XG4gICAgfSk7XG5cbiAgICBmb3IgKHZhciBfaXRlcmF0b3IgPSBfY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlckxvb3NlKGFyciksIF9zdGVwOyAhKF9zdGVwID0gX2l0ZXJhdG9yKCkpLmRvbmU7KSB7XG4gICAgICB2YXIgaSA9IF9zdGVwLnZhbHVlO1xuICAgICAgY3VycmVudENvdW50ICs9IGkudHlwZSA9PT0gXCJzXCIgPyAxIDogLTE7XG5cbiAgICAgIGlmIChjdXJyZW50Q291bnQgPT09IDEpIHtcbiAgICAgICAgc3RhcnQgPSBpLnRpbWU7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpZiAoc3RhcnQgJiYgK3N0YXJ0ICE9PSAraS50aW1lKSB7XG4gICAgICAgICAgcmVzdWx0cy5wdXNoKEludGVydmFsLmZyb21EYXRlVGltZXMoc3RhcnQsIGkudGltZSkpO1xuICAgICAgICB9XG5cbiAgICAgICAgc3RhcnQgPSBudWxsO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBJbnRlcnZhbC5tZXJnZShyZXN1bHRzKTtcbiAgfVxuICAvKipcbiAgICogUmV0dXJuIGFuIEludGVydmFsIHJlcHJlc2VudGluZyB0aGUgc3BhbiBvZiB0aW1lIGluIHRoaXMgSW50ZXJ2YWwgdGhhdCBkb2Vzbid0IG92ZXJsYXAgd2l0aCBhbnkgb2YgdGhlIHNwZWNpZmllZCBJbnRlcnZhbHMuXG4gICAqIEBwYXJhbSB7Li4uSW50ZXJ2YWx9IGludGVydmFsc1xuICAgKiBAcmV0dXJuIHtBcnJheX1cbiAgICovXG4gIDtcblxuICBfcHJvdG8uZGlmZmVyZW5jZSA9IGZ1bmN0aW9uIGRpZmZlcmVuY2UoKSB7XG4gICAgdmFyIF90aGlzMiA9IHRoaXM7XG5cbiAgICBmb3IgKHZhciBfbGVuMiA9IGFyZ3VtZW50cy5sZW5ndGgsIGludGVydmFscyA9IG5ldyBBcnJheShfbGVuMiksIF9rZXkyID0gMDsgX2tleTIgPCBfbGVuMjsgX2tleTIrKykge1xuICAgICAgaW50ZXJ2YWxzW19rZXkyXSA9IGFyZ3VtZW50c1tfa2V5Ml07XG4gICAgfVxuXG4gICAgcmV0dXJuIEludGVydmFsLnhvcihbdGhpc10uY29uY2F0KGludGVydmFscykpLm1hcChmdW5jdGlvbiAoaSkge1xuICAgICAgcmV0dXJuIF90aGlzMi5pbnRlcnNlY3Rpb24oaSk7XG4gICAgfSkuZmlsdGVyKGZ1bmN0aW9uIChpKSB7XG4gICAgICByZXR1cm4gaSAmJiAhaS5pc0VtcHR5KCk7XG4gICAgfSk7XG4gIH1cbiAgLyoqXG4gICAqIFJldHVybnMgYSBzdHJpbmcgcmVwcmVzZW50YXRpb24gb2YgdGhpcyBJbnRlcnZhbCBhcHByb3ByaWF0ZSBmb3IgZGVidWdnaW5nLlxuICAgKiBAcmV0dXJuIHtzdHJpbmd9XG4gICAqL1xuICA7XG5cbiAgX3Byb3RvLnRvU3RyaW5nID0gZnVuY3Rpb24gdG9TdHJpbmcoKSB7XG4gICAgaWYgKCF0aGlzLmlzVmFsaWQpIHJldHVybiBJTlZBTElEJDE7XG4gICAgcmV0dXJuIFwiW1wiICsgdGhpcy5zLnRvSVNPKCkgKyBcIiBcXHUyMDEzIFwiICsgdGhpcy5lLnRvSVNPKCkgKyBcIilcIjtcbiAgfVxuICAvKipcbiAgICogUmV0dXJucyBhbiBJU08gODYwMS1jb21wbGlhbnQgc3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIHRoaXMgSW50ZXJ2YWwuXG4gICAqIEBzZWUgaHR0cHM6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvSVNPXzg2MDEjVGltZV9pbnRlcnZhbHNcbiAgICogQHBhcmFtIHtPYmplY3R9IG9wdHMgLSBUaGUgc2FtZSBvcHRpb25zIGFzIHtAbGluayBEYXRlVGltZSN0b0lTT31cbiAgICogQHJldHVybiB7c3RyaW5nfVxuICAgKi9cbiAgO1xuXG4gIF9wcm90by50b0lTTyA9IGZ1bmN0aW9uIHRvSVNPKG9wdHMpIHtcbiAgICBpZiAoIXRoaXMuaXNWYWxpZCkgcmV0dXJuIElOVkFMSUQkMTtcbiAgICByZXR1cm4gdGhpcy5zLnRvSVNPKG9wdHMpICsgXCIvXCIgKyB0aGlzLmUudG9JU08ob3B0cyk7XG4gIH1cbiAgLyoqXG4gICAqIFJldHVybnMgYW4gSVNPIDg2MDEtY29tcGxpYW50IHN0cmluZyByZXByZXNlbnRhdGlvbiBvZiBkYXRlIG9mIHRoaXMgSW50ZXJ2YWwuXG4gICAqIFRoZSB0aW1lIGNvbXBvbmVudHMgYXJlIGlnbm9yZWQuXG4gICAqIEBzZWUgaHR0cHM6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvSVNPXzg2MDEjVGltZV9pbnRlcnZhbHNcbiAgICogQHJldHVybiB7c3RyaW5nfVxuICAgKi9cbiAgO1xuXG4gIF9wcm90by50b0lTT0RhdGUgPSBmdW5jdGlvbiB0b0lTT0RhdGUoKSB7XG4gICAgaWYgKCF0aGlzLmlzVmFsaWQpIHJldHVybiBJTlZBTElEJDE7XG4gICAgcmV0dXJuIHRoaXMucy50b0lTT0RhdGUoKSArIFwiL1wiICsgdGhpcy5lLnRvSVNPRGF0ZSgpO1xuICB9XG4gIC8qKlxuICAgKiBSZXR1cm5zIGFuIElTTyA4NjAxLWNvbXBsaWFudCBzdHJpbmcgcmVwcmVzZW50YXRpb24gb2YgdGltZSBvZiB0aGlzIEludGVydmFsLlxuICAgKiBUaGUgZGF0ZSBjb21wb25lbnRzIGFyZSBpZ25vcmVkLlxuICAgKiBAc2VlIGh0dHBzOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL0lTT184NjAxI1RpbWVfaW50ZXJ2YWxzXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRzIC0gVGhlIHNhbWUgb3B0aW9ucyBhcyB7QGxpbmsgRGF0ZVRpbWUjdG9JU099XG4gICAqIEByZXR1cm4ge3N0cmluZ31cbiAgICovXG4gIDtcblxuICBfcHJvdG8udG9JU09UaW1lID0gZnVuY3Rpb24gdG9JU09UaW1lKG9wdHMpIHtcbiAgICBpZiAoIXRoaXMuaXNWYWxpZCkgcmV0dXJuIElOVkFMSUQkMTtcbiAgICByZXR1cm4gdGhpcy5zLnRvSVNPVGltZShvcHRzKSArIFwiL1wiICsgdGhpcy5lLnRvSVNPVGltZShvcHRzKTtcbiAgfVxuICAvKipcbiAgICogUmV0dXJucyBhIHN0cmluZyByZXByZXNlbnRhdGlvbiBvZiB0aGlzIEludGVydmFsIGZvcm1hdHRlZCBhY2NvcmRpbmcgdG8gdGhlIHNwZWNpZmllZCBmb3JtYXQgc3RyaW5nLlxuICAgKiBAcGFyYW0ge3N0cmluZ30gZGF0ZUZvcm1hdCAtIHRoZSBmb3JtYXQgc3RyaW5nLiBUaGlzIHN0cmluZyBmb3JtYXRzIHRoZSBzdGFydCBhbmQgZW5kIHRpbWUuIFNlZSB7QGxpbmsgRGF0ZVRpbWUjdG9Gb3JtYXR9IGZvciBkZXRhaWxzLlxuICAgKiBAcGFyYW0ge09iamVjdH0gb3B0cyAtIG9wdGlvbnNcbiAgICogQHBhcmFtIHtzdHJpbmd9IFtvcHRzLnNlcGFyYXRvciA9ICAnIOKAkyAnXSAtIGEgc2VwYXJhdG9yIHRvIHBsYWNlIGJldHdlZW4gdGhlIHN0YXJ0IGFuZCBlbmQgcmVwcmVzZW50YXRpb25zXG4gICAqIEByZXR1cm4ge3N0cmluZ31cbiAgICovXG4gIDtcblxuICBfcHJvdG8udG9Gb3JtYXQgPSBmdW5jdGlvbiB0b0Zvcm1hdChkYXRlRm9ybWF0LCBfdGVtcDIpIHtcbiAgICB2YXIgX3JlZjMgPSBfdGVtcDIgPT09IHZvaWQgMCA/IHt9IDogX3RlbXAyLFxuICAgICAgICBfcmVmMyRzZXBhcmF0b3IgPSBfcmVmMy5zZXBhcmF0b3IsXG4gICAgICAgIHNlcGFyYXRvciA9IF9yZWYzJHNlcGFyYXRvciA9PT0gdm9pZCAwID8gXCIg4oCTIFwiIDogX3JlZjMkc2VwYXJhdG9yO1xuXG4gICAgaWYgKCF0aGlzLmlzVmFsaWQpIHJldHVybiBJTlZBTElEJDE7XG4gICAgcmV0dXJuIFwiXCIgKyB0aGlzLnMudG9Gb3JtYXQoZGF0ZUZvcm1hdCkgKyBzZXBhcmF0b3IgKyB0aGlzLmUudG9Gb3JtYXQoZGF0ZUZvcm1hdCk7XG4gIH1cbiAgLyoqXG4gICAqIFJldHVybiBhIER1cmF0aW9uIHJlcHJlc2VudGluZyB0aGUgdGltZSBzcGFubmVkIGJ5IHRoaXMgaW50ZXJ2YWwuXG4gICAqIEBwYXJhbSB7c3RyaW5nfHN0cmluZ1tdfSBbdW5pdD1bJ21pbGxpc2Vjb25kcyddXSAtIHRoZSB1bml0IG9yIHVuaXRzIChzdWNoIGFzICdob3Vycycgb3IgJ2RheXMnKSB0byBpbmNsdWRlIGluIHRoZSBkdXJhdGlvbi5cbiAgICogQHBhcmFtIHtPYmplY3R9IG9wdHMgLSBvcHRpb25zIHRoYXQgYWZmZWN0IHRoZSBjcmVhdGlvbiBvZiB0aGUgRHVyYXRpb25cbiAgICogQHBhcmFtIHtzdHJpbmd9IFtvcHRzLmNvbnZlcnNpb25BY2N1cmFjeT0nY2FzdWFsJ10gLSB0aGUgY29udmVyc2lvbiBzeXN0ZW0gdG8gdXNlXG4gICAqIEBleGFtcGxlIEludGVydmFsLmZyb21EYXRlVGltZXMoZHQxLCBkdDIpLnRvRHVyYXRpb24oKS50b09iamVjdCgpIC8vPT4geyBtaWxsaXNlY29uZHM6IDg4NDg5MjU3IH1cbiAgICogQGV4YW1wbGUgSW50ZXJ2YWwuZnJvbURhdGVUaW1lcyhkdDEsIGR0MikudG9EdXJhdGlvbignZGF5cycpLnRvT2JqZWN0KCkgLy89PiB7IGRheXM6IDEuMDI0MTgxMjE1Mjc3Nzc3OCB9XG4gICAqIEBleGFtcGxlIEludGVydmFsLmZyb21EYXRlVGltZXMoZHQxLCBkdDIpLnRvRHVyYXRpb24oWydob3VycycsICdtaW51dGVzJ10pLnRvT2JqZWN0KCkgLy89PiB7IGhvdXJzOiAyNCwgbWludXRlczogMzQuODIwOTUgfVxuICAgKiBAZXhhbXBsZSBJbnRlcnZhbC5mcm9tRGF0ZVRpbWVzKGR0MSwgZHQyKS50b0R1cmF0aW9uKFsnaG91cnMnLCAnbWludXRlcycsICdzZWNvbmRzJ10pLnRvT2JqZWN0KCkgLy89PiB7IGhvdXJzOiAyNCwgbWludXRlczogMzQsIHNlY29uZHM6IDQ5LjI1NyB9XG4gICAqIEBleGFtcGxlIEludGVydmFsLmZyb21EYXRlVGltZXMoZHQxLCBkdDIpLnRvRHVyYXRpb24oJ3NlY29uZHMnKS50b09iamVjdCgpIC8vPT4geyBzZWNvbmRzOiA4ODQ4OS4yNTcgfVxuICAgKiBAcmV0dXJuIHtEdXJhdGlvbn1cbiAgICovXG4gIDtcblxuICBfcHJvdG8udG9EdXJhdGlvbiA9IGZ1bmN0aW9uIHRvRHVyYXRpb24odW5pdCwgb3B0cykge1xuICAgIGlmICghdGhpcy5pc1ZhbGlkKSB7XG4gICAgICByZXR1cm4gRHVyYXRpb24uaW52YWxpZCh0aGlzLmludmFsaWRSZWFzb24pO1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzLmUuZGlmZih0aGlzLnMsIHVuaXQsIG9wdHMpO1xuICB9XG4gIC8qKlxuICAgKiBSdW4gbWFwRm4gb24gdGhlIGludGVydmFsIHN0YXJ0IGFuZCBlbmQsIHJldHVybmluZyBhIG5ldyBJbnRlcnZhbCBmcm9tIHRoZSByZXN1bHRpbmcgRGF0ZVRpbWVzXG4gICAqIEBwYXJhbSB7ZnVuY3Rpb259IG1hcEZuXG4gICAqIEByZXR1cm4ge0ludGVydmFsfVxuICAgKiBAZXhhbXBsZSBJbnRlcnZhbC5mcm9tRGF0ZVRpbWVzKGR0MSwgZHQyKS5tYXBFbmRwb2ludHMoZW5kcG9pbnQgPT4gZW5kcG9pbnQudG9VVEMoKSlcbiAgICogQGV4YW1wbGUgSW50ZXJ2YWwuZnJvbURhdGVUaW1lcyhkdDEsIGR0MikubWFwRW5kcG9pbnRzKGVuZHBvaW50ID0+IGVuZHBvaW50LnBsdXMoeyBob3VyczogMiB9KSlcbiAgICovXG4gIDtcblxuICBfcHJvdG8ubWFwRW5kcG9pbnRzID0gZnVuY3Rpb24gbWFwRW5kcG9pbnRzKG1hcEZuKSB7XG4gICAgcmV0dXJuIEludGVydmFsLmZyb21EYXRlVGltZXMobWFwRm4odGhpcy5zKSwgbWFwRm4odGhpcy5lKSk7XG4gIH07XG5cbiAgX2NyZWF0ZUNsYXNzKEludGVydmFsLCBbe1xuICAgIGtleTogXCJzdGFydFwiLFxuICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgcmV0dXJuIHRoaXMuaXNWYWxpZCA/IHRoaXMucyA6IG51bGw7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdGhlIGVuZCBvZiB0aGUgSW50ZXJ2YWxcbiAgICAgKiBAdHlwZSB7RGF0ZVRpbWV9XG4gICAgICovXG5cbiAgfSwge1xuICAgIGtleTogXCJlbmRcIixcbiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgIHJldHVybiB0aGlzLmlzVmFsaWQgPyB0aGlzLmUgOiBudWxsO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHdoZXRoZXIgdGhpcyBJbnRlcnZhbCdzIGVuZCBpcyBhdCBsZWFzdCBpdHMgc3RhcnQsIG1lYW5pbmcgdGhhdCB0aGUgSW50ZXJ2YWwgaXNuJ3QgJ2JhY2t3YXJkcycuXG4gICAgICogQHR5cGUge2Jvb2xlYW59XG4gICAgICovXG5cbiAgfSwge1xuICAgIGtleTogXCJpc1ZhbGlkXCIsXG4gICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICByZXR1cm4gdGhpcy5pbnZhbGlkUmVhc29uID09PSBudWxsO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGFuIGVycm9yIGNvZGUgaWYgdGhpcyBJbnRlcnZhbCBpcyBpbnZhbGlkLCBvciBudWxsIGlmIHRoZSBJbnRlcnZhbCBpcyB2YWxpZFxuICAgICAqIEB0eXBlIHtzdHJpbmd9XG4gICAgICovXG5cbiAgfSwge1xuICAgIGtleTogXCJpbnZhbGlkUmVhc29uXCIsXG4gICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICByZXR1cm4gdGhpcy5pbnZhbGlkID8gdGhpcy5pbnZhbGlkLnJlYXNvbiA6IG51bGw7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgYW4gZXhwbGFuYXRpb24gb2Ygd2h5IHRoaXMgSW50ZXJ2YWwgYmVjYW1lIGludmFsaWQsIG9yIG51bGwgaWYgdGhlIEludGVydmFsIGlzIHZhbGlkXG4gICAgICogQHR5cGUge3N0cmluZ31cbiAgICAgKi9cblxuICB9LCB7XG4gICAga2V5OiBcImludmFsaWRFeHBsYW5hdGlvblwiLFxuICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgcmV0dXJuIHRoaXMuaW52YWxpZCA/IHRoaXMuaW52YWxpZC5leHBsYW5hdGlvbiA6IG51bGw7XG4gICAgfVxuICB9XSk7XG5cbiAgcmV0dXJuIEludGVydmFsO1xufSgpO1xuXG4vKipcbiAqIFRoZSBJbmZvIGNsYXNzIGNvbnRhaW5zIHN0YXRpYyBtZXRob2RzIGZvciByZXRyaWV2aW5nIGdlbmVyYWwgdGltZSBhbmQgZGF0ZSByZWxhdGVkIGRhdGEuIEZvciBleGFtcGxlLCBpdCBoYXMgbWV0aG9kcyBmb3IgZmluZGluZyBvdXQgaWYgYSB0aW1lIHpvbmUgaGFzIGEgRFNULCBmb3IgbGlzdGluZyB0aGUgbW9udGhzIGluIGFueSBzdXBwb3J0ZWQgbG9jYWxlLCBhbmQgZm9yIGRpc2NvdmVyaW5nIHdoaWNoIG9mIEx1eG9uIGZlYXR1cmVzIGFyZSBhdmFpbGFibGUgaW4gdGhlIGN1cnJlbnQgZW52aXJvbm1lbnQuXG4gKi9cblxudmFyIEluZm8gPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkge1xuICBmdW5jdGlvbiBJbmZvKCkge31cblxuICAvKipcbiAgICogUmV0dXJuIHdoZXRoZXIgdGhlIHNwZWNpZmllZCB6b25lIGNvbnRhaW5zIGEgRFNULlxuICAgKiBAcGFyYW0ge3N0cmluZ3xab25lfSBbem9uZT0nbG9jYWwnXSAtIFpvbmUgdG8gY2hlY2suIERlZmF1bHRzIHRvIHRoZSBlbnZpcm9ubWVudCdzIGxvY2FsIHpvbmUuXG4gICAqIEByZXR1cm4ge2Jvb2xlYW59XG4gICAqL1xuICBJbmZvLmhhc0RTVCA9IGZ1bmN0aW9uIGhhc0RTVCh6b25lKSB7XG4gICAgaWYgKHpvbmUgPT09IHZvaWQgMCkge1xuICAgICAgem9uZSA9IFNldHRpbmdzLmRlZmF1bHRab25lO1xuICAgIH1cblxuICAgIHZhciBwcm90byA9IERhdGVUaW1lLm5vdygpLnNldFpvbmUoem9uZSkuc2V0KHtcbiAgICAgIG1vbnRoOiAxMlxuICAgIH0pO1xuICAgIHJldHVybiAhem9uZS5pc1VuaXZlcnNhbCAmJiBwcm90by5vZmZzZXQgIT09IHByb3RvLnNldCh7XG4gICAgICBtb250aDogNlxuICAgIH0pLm9mZnNldDtcbiAgfVxuICAvKipcbiAgICogUmV0dXJuIHdoZXRoZXIgdGhlIHNwZWNpZmllZCB6b25lIGlzIGEgdmFsaWQgSUFOQSBzcGVjaWZpZXIuXG4gICAqIEBwYXJhbSB7c3RyaW5nfSB6b25lIC0gWm9uZSB0byBjaGVja1xuICAgKiBAcmV0dXJuIHtib29sZWFufVxuICAgKi9cbiAgO1xuXG4gIEluZm8uaXNWYWxpZElBTkFab25lID0gZnVuY3Rpb24gaXNWYWxpZElBTkFab25lKHpvbmUpIHtcbiAgICByZXR1cm4gSUFOQVpvbmUuaXNWYWxpZFNwZWNpZmllcih6b25lKSAmJiBJQU5BWm9uZS5pc1ZhbGlkWm9uZSh6b25lKTtcbiAgfVxuICAvKipcbiAgICogQ29udmVydHMgdGhlIGlucHV0IGludG8gYSB7QGxpbmsgWm9uZX0gaW5zdGFuY2UuXG4gICAqXG4gICAqICogSWYgYGlucHV0YCBpcyBhbHJlYWR5IGEgWm9uZSBpbnN0YW5jZSwgaXQgaXMgcmV0dXJuZWQgdW5jaGFuZ2VkLlxuICAgKiAqIElmIGBpbnB1dGAgaXMgYSBzdHJpbmcgY29udGFpbmluZyBhIHZhbGlkIHRpbWUgem9uZSBuYW1lLCBhIFpvbmUgaW5zdGFuY2VcbiAgICogICB3aXRoIHRoYXQgbmFtZSBpcyByZXR1cm5lZC5cbiAgICogKiBJZiBgaW5wdXRgIGlzIGEgc3RyaW5nIHRoYXQgZG9lc24ndCByZWZlciB0byBhIGtub3duIHRpbWUgem9uZSwgYSBab25lXG4gICAqICAgaW5zdGFuY2Ugd2l0aCB7QGxpbmsgWm9uZSNpc1ZhbGlkfSA9PSBmYWxzZSBpcyByZXR1cm5lZC5cbiAgICogKiBJZiBgaW5wdXQgaXMgYSBudW1iZXIsIGEgWm9uZSBpbnN0YW5jZSB3aXRoIHRoZSBzcGVjaWZpZWQgZml4ZWQgb2Zmc2V0XG4gICAqICAgaW4gbWludXRlcyBpcyByZXR1cm5lZC5cbiAgICogKiBJZiBgaW5wdXRgIGlzIGBudWxsYCBvciBgdW5kZWZpbmVkYCwgdGhlIGRlZmF1bHQgem9uZSBpcyByZXR1cm5lZC5cbiAgICogQHBhcmFtIHtzdHJpbmd8Wm9uZXxudW1iZXJ9IFtpbnB1dF0gLSB0aGUgdmFsdWUgdG8gYmUgY29udmVydGVkXG4gICAqIEByZXR1cm4ge1pvbmV9XG4gICAqL1xuICA7XG5cbiAgSW5mby5ub3JtYWxpemVab25lID0gZnVuY3Rpb24gbm9ybWFsaXplWm9uZSQxKGlucHV0KSB7XG4gICAgcmV0dXJuIG5vcm1hbGl6ZVpvbmUoaW5wdXQsIFNldHRpbmdzLmRlZmF1bHRab25lKTtcbiAgfVxuICAvKipcbiAgICogUmV0dXJuIGFuIGFycmF5IG9mIHN0YW5kYWxvbmUgbW9udGggbmFtZXMuXG4gICAqIEBzZWUgaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvSmF2YVNjcmlwdC9SZWZlcmVuY2UvR2xvYmFsX09iamVjdHMvRGF0ZVRpbWVGb3JtYXRcbiAgICogQHBhcmFtIHtzdHJpbmd9IFtsZW5ndGg9J2xvbmcnXSAtIHRoZSBsZW5ndGggb2YgdGhlIG1vbnRoIHJlcHJlc2VudGF0aW9uLCBzdWNoIGFzIFwibnVtZXJpY1wiLCBcIjItZGlnaXRcIiwgXCJuYXJyb3dcIiwgXCJzaG9ydFwiLCBcImxvbmdcIlxuICAgKiBAcGFyYW0ge09iamVjdH0gb3B0cyAtIG9wdGlvbnNcbiAgICogQHBhcmFtIHtzdHJpbmd9IFtvcHRzLmxvY2FsZV0gLSB0aGUgbG9jYWxlIGNvZGVcbiAgICogQHBhcmFtIHtzdHJpbmd9IFtvcHRzLm51bWJlcmluZ1N5c3RlbT1udWxsXSAtIHRoZSBudW1iZXJpbmcgc3lzdGVtXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBbb3B0cy5sb2NPYmo9bnVsbF0gLSBhbiBleGlzdGluZyBsb2NhbGUgb2JqZWN0IHRvIHVzZVxuICAgKiBAcGFyYW0ge3N0cmluZ30gW29wdHMub3V0cHV0Q2FsZW5kYXI9J2dyZWdvcnknXSAtIHRoZSBjYWxlbmRhclxuICAgKiBAZXhhbXBsZSBJbmZvLm1vbnRocygpWzBdIC8vPT4gJ0phbnVhcnknXG4gICAqIEBleGFtcGxlIEluZm8ubW9udGhzKCdzaG9ydCcpWzBdIC8vPT4gJ0phbidcbiAgICogQGV4YW1wbGUgSW5mby5tb250aHMoJ251bWVyaWMnKVswXSAvLz0+ICcxJ1xuICAgKiBAZXhhbXBsZSBJbmZvLm1vbnRocygnc2hvcnQnLCB7IGxvY2FsZTogJ2ZyLUNBJyB9IClbMF0gLy89PiAnamFudi4nXG4gICAqIEBleGFtcGxlIEluZm8ubW9udGhzKCdudW1lcmljJywgeyBsb2NhbGU6ICdhcicgfSlbMF0gLy89PiAn2aEnXG4gICAqIEBleGFtcGxlIEluZm8ubW9udGhzKCdsb25nJywgeyBvdXRwdXRDYWxlbmRhcjogJ2lzbGFtaWMnIH0pWzBdIC8vPT4gJ1JhYmnKuyBJJ1xuICAgKiBAcmV0dXJuIHtBcnJheX1cbiAgICovXG4gIDtcblxuICBJbmZvLm1vbnRocyA9IGZ1bmN0aW9uIG1vbnRocyhsZW5ndGgsIF90ZW1wKSB7XG4gICAgaWYgKGxlbmd0aCA9PT0gdm9pZCAwKSB7XG4gICAgICBsZW5ndGggPSBcImxvbmdcIjtcbiAgICB9XG5cbiAgICB2YXIgX3JlZiA9IF90ZW1wID09PSB2b2lkIDAgPyB7fSA6IF90ZW1wLFxuICAgICAgICBfcmVmJGxvY2FsZSA9IF9yZWYubG9jYWxlLFxuICAgICAgICBsb2NhbGUgPSBfcmVmJGxvY2FsZSA9PT0gdm9pZCAwID8gbnVsbCA6IF9yZWYkbG9jYWxlLFxuICAgICAgICBfcmVmJG51bWJlcmluZ1N5c3RlbSA9IF9yZWYubnVtYmVyaW5nU3lzdGVtLFxuICAgICAgICBudW1iZXJpbmdTeXN0ZW0gPSBfcmVmJG51bWJlcmluZ1N5c3RlbSA9PT0gdm9pZCAwID8gbnVsbCA6IF9yZWYkbnVtYmVyaW5nU3lzdGVtLFxuICAgICAgICBfcmVmJGxvY09iaiA9IF9yZWYubG9jT2JqLFxuICAgICAgICBsb2NPYmogPSBfcmVmJGxvY09iaiA9PT0gdm9pZCAwID8gbnVsbCA6IF9yZWYkbG9jT2JqLFxuICAgICAgICBfcmVmJG91dHB1dENhbGVuZGFyID0gX3JlZi5vdXRwdXRDYWxlbmRhcixcbiAgICAgICAgb3V0cHV0Q2FsZW5kYXIgPSBfcmVmJG91dHB1dENhbGVuZGFyID09PSB2b2lkIDAgPyBcImdyZWdvcnlcIiA6IF9yZWYkb3V0cHV0Q2FsZW5kYXI7XG5cbiAgICByZXR1cm4gKGxvY09iaiB8fCBMb2NhbGUuY3JlYXRlKGxvY2FsZSwgbnVtYmVyaW5nU3lzdGVtLCBvdXRwdXRDYWxlbmRhcikpLm1vbnRocyhsZW5ndGgpO1xuICB9XG4gIC8qKlxuICAgKiBSZXR1cm4gYW4gYXJyYXkgb2YgZm9ybWF0IG1vbnRoIG5hbWVzLlxuICAgKiBGb3JtYXQgbW9udGhzIGRpZmZlciBmcm9tIHN0YW5kYWxvbmUgbW9udGhzIGluIHRoYXQgdGhleSdyZSBtZWFudCB0byBhcHBlYXIgbmV4dCB0byB0aGUgZGF5IG9mIHRoZSBtb250aC4gSW4gc29tZSBsYW5ndWFnZXMsIHRoYXRcbiAgICogY2hhbmdlcyB0aGUgc3RyaW5nLlxuICAgKiBTZWUge0BsaW5rIEluZm8jbW9udGhzfVxuICAgKiBAcGFyYW0ge3N0cmluZ30gW2xlbmd0aD0nbG9uZyddIC0gdGhlIGxlbmd0aCBvZiB0aGUgbW9udGggcmVwcmVzZW50YXRpb24sIHN1Y2ggYXMgXCJudW1lcmljXCIsIFwiMi1kaWdpdFwiLCBcIm5hcnJvd1wiLCBcInNob3J0XCIsIFwibG9uZ1wiXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRzIC0gb3B0aW9uc1xuICAgKiBAcGFyYW0ge3N0cmluZ30gW29wdHMubG9jYWxlXSAtIHRoZSBsb2NhbGUgY29kZVxuICAgKiBAcGFyYW0ge3N0cmluZ30gW29wdHMubnVtYmVyaW5nU3lzdGVtPW51bGxdIC0gdGhlIG51bWJlcmluZyBzeXN0ZW1cbiAgICogQHBhcmFtIHtzdHJpbmd9IFtvcHRzLmxvY09iaj1udWxsXSAtIGFuIGV4aXN0aW5nIGxvY2FsZSBvYmplY3QgdG8gdXNlXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBbb3B0cy5vdXRwdXRDYWxlbmRhcj0nZ3JlZ29yeSddIC0gdGhlIGNhbGVuZGFyXG4gICAqIEByZXR1cm4ge0FycmF5fVxuICAgKi9cbiAgO1xuXG4gIEluZm8ubW9udGhzRm9ybWF0ID0gZnVuY3Rpb24gbW9udGhzRm9ybWF0KGxlbmd0aCwgX3RlbXAyKSB7XG4gICAgaWYgKGxlbmd0aCA9PT0gdm9pZCAwKSB7XG4gICAgICBsZW5ndGggPSBcImxvbmdcIjtcbiAgICB9XG5cbiAgICB2YXIgX3JlZjIgPSBfdGVtcDIgPT09IHZvaWQgMCA/IHt9IDogX3RlbXAyLFxuICAgICAgICBfcmVmMiRsb2NhbGUgPSBfcmVmMi5sb2NhbGUsXG4gICAgICAgIGxvY2FsZSA9IF9yZWYyJGxvY2FsZSA9PT0gdm9pZCAwID8gbnVsbCA6IF9yZWYyJGxvY2FsZSxcbiAgICAgICAgX3JlZjIkbnVtYmVyaW5nU3lzdGVtID0gX3JlZjIubnVtYmVyaW5nU3lzdGVtLFxuICAgICAgICBudW1iZXJpbmdTeXN0ZW0gPSBfcmVmMiRudW1iZXJpbmdTeXN0ZW0gPT09IHZvaWQgMCA/IG51bGwgOiBfcmVmMiRudW1iZXJpbmdTeXN0ZW0sXG4gICAgICAgIF9yZWYyJGxvY09iaiA9IF9yZWYyLmxvY09iaixcbiAgICAgICAgbG9jT2JqID0gX3JlZjIkbG9jT2JqID09PSB2b2lkIDAgPyBudWxsIDogX3JlZjIkbG9jT2JqLFxuICAgICAgICBfcmVmMiRvdXRwdXRDYWxlbmRhciA9IF9yZWYyLm91dHB1dENhbGVuZGFyLFxuICAgICAgICBvdXRwdXRDYWxlbmRhciA9IF9yZWYyJG91dHB1dENhbGVuZGFyID09PSB2b2lkIDAgPyBcImdyZWdvcnlcIiA6IF9yZWYyJG91dHB1dENhbGVuZGFyO1xuXG4gICAgcmV0dXJuIChsb2NPYmogfHwgTG9jYWxlLmNyZWF0ZShsb2NhbGUsIG51bWJlcmluZ1N5c3RlbSwgb3V0cHV0Q2FsZW5kYXIpKS5tb250aHMobGVuZ3RoLCB0cnVlKTtcbiAgfVxuICAvKipcbiAgICogUmV0dXJuIGFuIGFycmF5IG9mIHN0YW5kYWxvbmUgd2VlayBuYW1lcy5cbiAgICogQHNlZSBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9KYXZhU2NyaXB0L1JlZmVyZW5jZS9HbG9iYWxfT2JqZWN0cy9EYXRlVGltZUZvcm1hdFxuICAgKiBAcGFyYW0ge3N0cmluZ30gW2xlbmd0aD0nbG9uZyddIC0gdGhlIGxlbmd0aCBvZiB0aGUgd2Vla2RheSByZXByZXNlbnRhdGlvbiwgc3VjaCBhcyBcIm5hcnJvd1wiLCBcInNob3J0XCIsIFwibG9uZ1wiLlxuICAgKiBAcGFyYW0ge09iamVjdH0gb3B0cyAtIG9wdGlvbnNcbiAgICogQHBhcmFtIHtzdHJpbmd9IFtvcHRzLmxvY2FsZV0gLSB0aGUgbG9jYWxlIGNvZGVcbiAgICogQHBhcmFtIHtzdHJpbmd9IFtvcHRzLm51bWJlcmluZ1N5c3RlbT1udWxsXSAtIHRoZSBudW1iZXJpbmcgc3lzdGVtXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBbb3B0cy5sb2NPYmo9bnVsbF0gLSBhbiBleGlzdGluZyBsb2NhbGUgb2JqZWN0IHRvIHVzZVxuICAgKiBAZXhhbXBsZSBJbmZvLndlZWtkYXlzKClbMF0gLy89PiAnTW9uZGF5J1xuICAgKiBAZXhhbXBsZSBJbmZvLndlZWtkYXlzKCdzaG9ydCcpWzBdIC8vPT4gJ01vbidcbiAgICogQGV4YW1wbGUgSW5mby53ZWVrZGF5cygnc2hvcnQnLCB7IGxvY2FsZTogJ2ZyLUNBJyB9KVswXSAvLz0+ICdsdW4uJ1xuICAgKiBAZXhhbXBsZSBJbmZvLndlZWtkYXlzKCdzaG9ydCcsIHsgbG9jYWxlOiAnYXInIH0pWzBdIC8vPT4gJ9in2YTYp9ir2YbZitmGJ1xuICAgKiBAcmV0dXJuIHtBcnJheX1cbiAgICovXG4gIDtcblxuICBJbmZvLndlZWtkYXlzID0gZnVuY3Rpb24gd2Vla2RheXMobGVuZ3RoLCBfdGVtcDMpIHtcbiAgICBpZiAobGVuZ3RoID09PSB2b2lkIDApIHtcbiAgICAgIGxlbmd0aCA9IFwibG9uZ1wiO1xuICAgIH1cblxuICAgIHZhciBfcmVmMyA9IF90ZW1wMyA9PT0gdm9pZCAwID8ge30gOiBfdGVtcDMsXG4gICAgICAgIF9yZWYzJGxvY2FsZSA9IF9yZWYzLmxvY2FsZSxcbiAgICAgICAgbG9jYWxlID0gX3JlZjMkbG9jYWxlID09PSB2b2lkIDAgPyBudWxsIDogX3JlZjMkbG9jYWxlLFxuICAgICAgICBfcmVmMyRudW1iZXJpbmdTeXN0ZW0gPSBfcmVmMy5udW1iZXJpbmdTeXN0ZW0sXG4gICAgICAgIG51bWJlcmluZ1N5c3RlbSA9IF9yZWYzJG51bWJlcmluZ1N5c3RlbSA9PT0gdm9pZCAwID8gbnVsbCA6IF9yZWYzJG51bWJlcmluZ1N5c3RlbSxcbiAgICAgICAgX3JlZjMkbG9jT2JqID0gX3JlZjMubG9jT2JqLFxuICAgICAgICBsb2NPYmogPSBfcmVmMyRsb2NPYmogPT09IHZvaWQgMCA/IG51bGwgOiBfcmVmMyRsb2NPYmo7XG5cbiAgICByZXR1cm4gKGxvY09iaiB8fCBMb2NhbGUuY3JlYXRlKGxvY2FsZSwgbnVtYmVyaW5nU3lzdGVtLCBudWxsKSkud2Vla2RheXMobGVuZ3RoKTtcbiAgfVxuICAvKipcbiAgICogUmV0dXJuIGFuIGFycmF5IG9mIGZvcm1hdCB3ZWVrIG5hbWVzLlxuICAgKiBGb3JtYXQgd2Vla2RheXMgZGlmZmVyIGZyb20gc3RhbmRhbG9uZSB3ZWVrZGF5cyBpbiB0aGF0IHRoZXkncmUgbWVhbnQgdG8gYXBwZWFyIG5leHQgdG8gbW9yZSBkYXRlIGluZm9ybWF0aW9uLiBJbiBzb21lIGxhbmd1YWdlcywgdGhhdFxuICAgKiBjaGFuZ2VzIHRoZSBzdHJpbmcuXG4gICAqIFNlZSB7QGxpbmsgSW5mbyN3ZWVrZGF5c31cbiAgICogQHBhcmFtIHtzdHJpbmd9IFtsZW5ndGg9J2xvbmcnXSAtIHRoZSBsZW5ndGggb2YgdGhlIG1vbnRoIHJlcHJlc2VudGF0aW9uLCBzdWNoIGFzIFwibmFycm93XCIsIFwic2hvcnRcIiwgXCJsb25nXCIuXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRzIC0gb3B0aW9uc1xuICAgKiBAcGFyYW0ge3N0cmluZ30gW29wdHMubG9jYWxlPW51bGxdIC0gdGhlIGxvY2FsZSBjb2RlXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBbb3B0cy5udW1iZXJpbmdTeXN0ZW09bnVsbF0gLSB0aGUgbnVtYmVyaW5nIHN5c3RlbVxuICAgKiBAcGFyYW0ge3N0cmluZ30gW29wdHMubG9jT2JqPW51bGxdIC0gYW4gZXhpc3RpbmcgbG9jYWxlIG9iamVjdCB0byB1c2VcbiAgICogQHJldHVybiB7QXJyYXl9XG4gICAqL1xuICA7XG5cbiAgSW5mby53ZWVrZGF5c0Zvcm1hdCA9IGZ1bmN0aW9uIHdlZWtkYXlzRm9ybWF0KGxlbmd0aCwgX3RlbXA0KSB7XG4gICAgaWYgKGxlbmd0aCA9PT0gdm9pZCAwKSB7XG4gICAgICBsZW5ndGggPSBcImxvbmdcIjtcbiAgICB9XG5cbiAgICB2YXIgX3JlZjQgPSBfdGVtcDQgPT09IHZvaWQgMCA/IHt9IDogX3RlbXA0LFxuICAgICAgICBfcmVmNCRsb2NhbGUgPSBfcmVmNC5sb2NhbGUsXG4gICAgICAgIGxvY2FsZSA9IF9yZWY0JGxvY2FsZSA9PT0gdm9pZCAwID8gbnVsbCA6IF9yZWY0JGxvY2FsZSxcbiAgICAgICAgX3JlZjQkbnVtYmVyaW5nU3lzdGVtID0gX3JlZjQubnVtYmVyaW5nU3lzdGVtLFxuICAgICAgICBudW1iZXJpbmdTeXN0ZW0gPSBfcmVmNCRudW1iZXJpbmdTeXN0ZW0gPT09IHZvaWQgMCA/IG51bGwgOiBfcmVmNCRudW1iZXJpbmdTeXN0ZW0sXG4gICAgICAgIF9yZWY0JGxvY09iaiA9IF9yZWY0LmxvY09iaixcbiAgICAgICAgbG9jT2JqID0gX3JlZjQkbG9jT2JqID09PSB2b2lkIDAgPyBudWxsIDogX3JlZjQkbG9jT2JqO1xuXG4gICAgcmV0dXJuIChsb2NPYmogfHwgTG9jYWxlLmNyZWF0ZShsb2NhbGUsIG51bWJlcmluZ1N5c3RlbSwgbnVsbCkpLndlZWtkYXlzKGxlbmd0aCwgdHJ1ZSk7XG4gIH1cbiAgLyoqXG4gICAqIFJldHVybiBhbiBhcnJheSBvZiBtZXJpZGllbXMuXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRzIC0gb3B0aW9uc1xuICAgKiBAcGFyYW0ge3N0cmluZ30gW29wdHMubG9jYWxlXSAtIHRoZSBsb2NhbGUgY29kZVxuICAgKiBAZXhhbXBsZSBJbmZvLm1lcmlkaWVtcygpIC8vPT4gWyAnQU0nLCAnUE0nIF1cbiAgICogQGV4YW1wbGUgSW5mby5tZXJpZGllbXMoeyBsb2NhbGU6ICdteScgfSkgLy89PiBbICfhgJThgLbhgJThgIDhgLonLCAn4YCK4YCU4YCxJyBdXG4gICAqIEByZXR1cm4ge0FycmF5fVxuICAgKi9cbiAgO1xuXG4gIEluZm8ubWVyaWRpZW1zID0gZnVuY3Rpb24gbWVyaWRpZW1zKF90ZW1wNSkge1xuICAgIHZhciBfcmVmNSA9IF90ZW1wNSA9PT0gdm9pZCAwID8ge30gOiBfdGVtcDUsXG4gICAgICAgIF9yZWY1JGxvY2FsZSA9IF9yZWY1LmxvY2FsZSxcbiAgICAgICAgbG9jYWxlID0gX3JlZjUkbG9jYWxlID09PSB2b2lkIDAgPyBudWxsIDogX3JlZjUkbG9jYWxlO1xuXG4gICAgcmV0dXJuIExvY2FsZS5jcmVhdGUobG9jYWxlKS5tZXJpZGllbXMoKTtcbiAgfVxuICAvKipcbiAgICogUmV0dXJuIGFuIGFycmF5IG9mIGVyYXMsIHN1Y2ggYXMgWydCQycsICdBRCddLiBUaGUgbG9jYWxlIGNhbiBiZSBzcGVjaWZpZWQsIGJ1dCB0aGUgY2FsZW5kYXIgc3lzdGVtIGlzIGFsd2F5cyBHcmVnb3JpYW4uXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBbbGVuZ3RoPSdzaG9ydCddIC0gdGhlIGxlbmd0aCBvZiB0aGUgZXJhIHJlcHJlc2VudGF0aW9uLCBzdWNoIGFzIFwic2hvcnRcIiBvciBcImxvbmdcIi5cbiAgICogQHBhcmFtIHtPYmplY3R9IG9wdHMgLSBvcHRpb25zXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBbb3B0cy5sb2NhbGVdIC0gdGhlIGxvY2FsZSBjb2RlXG4gICAqIEBleGFtcGxlIEluZm8uZXJhcygpIC8vPT4gWyAnQkMnLCAnQUQnIF1cbiAgICogQGV4YW1wbGUgSW5mby5lcmFzKCdsb25nJykgLy89PiBbICdCZWZvcmUgQ2hyaXN0JywgJ0Fubm8gRG9taW5pJyBdXG4gICAqIEBleGFtcGxlIEluZm8uZXJhcygnbG9uZycsIHsgbG9jYWxlOiAnZnInIH0pIC8vPT4gWyAnYXZhbnQgSsOpc3VzLUNocmlzdCcsICdhcHLDqHMgSsOpc3VzLUNocmlzdCcgXVxuICAgKiBAcmV0dXJuIHtBcnJheX1cbiAgICovXG4gIDtcblxuICBJbmZvLmVyYXMgPSBmdW5jdGlvbiBlcmFzKGxlbmd0aCwgX3RlbXA2KSB7XG4gICAgaWYgKGxlbmd0aCA9PT0gdm9pZCAwKSB7XG4gICAgICBsZW5ndGggPSBcInNob3J0XCI7XG4gICAgfVxuXG4gICAgdmFyIF9yZWY2ID0gX3RlbXA2ID09PSB2b2lkIDAgPyB7fSA6IF90ZW1wNixcbiAgICAgICAgX3JlZjYkbG9jYWxlID0gX3JlZjYubG9jYWxlLFxuICAgICAgICBsb2NhbGUgPSBfcmVmNiRsb2NhbGUgPT09IHZvaWQgMCA/IG51bGwgOiBfcmVmNiRsb2NhbGU7XG5cbiAgICByZXR1cm4gTG9jYWxlLmNyZWF0ZShsb2NhbGUsIG51bGwsIFwiZ3JlZ29yeVwiKS5lcmFzKGxlbmd0aCk7XG4gIH1cbiAgLyoqXG4gICAqIFJldHVybiB0aGUgc2V0IG9mIGF2YWlsYWJsZSBmZWF0dXJlcyBpbiB0aGlzIGVudmlyb25tZW50LlxuICAgKiBTb21lIGZlYXR1cmVzIG9mIEx1eG9uIGFyZSBub3QgYXZhaWxhYmxlIGluIGFsbCBlbnZpcm9ubWVudHMuIEZvciBleGFtcGxlLCBvbiBvbGRlciBicm93c2VycywgcmVsYXRpdmUgdGltZSBmb3JtYXR0aW5nIHN1cHBvcnQgaXMgbm90IGF2YWlsYWJsZS4gVXNlIHRoaXMgZnVuY3Rpb24gdG8gZmlndXJlIG91dCBpZiB0aGF0J3MgdGhlIGNhc2UuXG4gICAqIEtleXM6XG4gICAqICogYHJlbGF0aXZlYDogd2hldGhlciB0aGlzIGVudmlyb25tZW50IHN1cHBvcnRzIHJlbGF0aXZlIHRpbWUgZm9ybWF0dGluZ1xuICAgKiBAZXhhbXBsZSBJbmZvLmZlYXR1cmVzKCkgLy89PiB7IHJlbGF0aXZlOiBmYWxzZSB9XG4gICAqIEByZXR1cm4ge09iamVjdH1cbiAgICovXG4gIDtcblxuICBJbmZvLmZlYXR1cmVzID0gZnVuY3Rpb24gZmVhdHVyZXMoKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHJlbGF0aXZlOiBoYXNSZWxhdGl2ZSgpXG4gICAgfTtcbiAgfTtcblxuICByZXR1cm4gSW5mbztcbn0oKTtcblxuZnVuY3Rpb24gZGF5RGlmZihlYXJsaWVyLCBsYXRlcikge1xuICB2YXIgdXRjRGF5U3RhcnQgPSBmdW5jdGlvbiB1dGNEYXlTdGFydChkdCkge1xuICAgIHJldHVybiBkdC50b1VUQygwLCB7XG4gICAgICBrZWVwTG9jYWxUaW1lOiB0cnVlXG4gICAgfSkuc3RhcnRPZihcImRheVwiKS52YWx1ZU9mKCk7XG4gIH0sXG4gICAgICBtcyA9IHV0Y0RheVN0YXJ0KGxhdGVyKSAtIHV0Y0RheVN0YXJ0KGVhcmxpZXIpO1xuXG4gIHJldHVybiBNYXRoLmZsb29yKER1cmF0aW9uLmZyb21NaWxsaXMobXMpLmFzKFwiZGF5c1wiKSk7XG59XG5cbmZ1bmN0aW9uIGhpZ2hPcmRlckRpZmZzKGN1cnNvciwgbGF0ZXIsIHVuaXRzKSB7XG4gIHZhciBkaWZmZXJzID0gW1tcInllYXJzXCIsIGZ1bmN0aW9uIChhLCBiKSB7XG4gICAgcmV0dXJuIGIueWVhciAtIGEueWVhcjtcbiAgfV0sIFtcInF1YXJ0ZXJzXCIsIGZ1bmN0aW9uIChhLCBiKSB7XG4gICAgcmV0dXJuIGIucXVhcnRlciAtIGEucXVhcnRlcjtcbiAgfV0sIFtcIm1vbnRoc1wiLCBmdW5jdGlvbiAoYSwgYikge1xuICAgIHJldHVybiBiLm1vbnRoIC0gYS5tb250aCArIChiLnllYXIgLSBhLnllYXIpICogMTI7XG4gIH1dLCBbXCJ3ZWVrc1wiLCBmdW5jdGlvbiAoYSwgYikge1xuICAgIHZhciBkYXlzID0gZGF5RGlmZihhLCBiKTtcbiAgICByZXR1cm4gKGRheXMgLSBkYXlzICUgNykgLyA3O1xuICB9XSwgW1wiZGF5c1wiLCBkYXlEaWZmXV07XG4gIHZhciByZXN1bHRzID0ge307XG4gIHZhciBsb3dlc3RPcmRlciwgaGlnaFdhdGVyO1xuXG4gIGZvciAodmFyIF9pID0gMCwgX2RpZmZlcnMgPSBkaWZmZXJzOyBfaSA8IF9kaWZmZXJzLmxlbmd0aDsgX2krKykge1xuICAgIHZhciBfZGlmZmVycyRfaSA9IF9kaWZmZXJzW19pXSxcbiAgICAgICAgdW5pdCA9IF9kaWZmZXJzJF9pWzBdLFxuICAgICAgICBkaWZmZXIgPSBfZGlmZmVycyRfaVsxXTtcblxuICAgIGlmICh1bml0cy5pbmRleE9mKHVuaXQpID49IDApIHtcbiAgICAgIHZhciBfY3Vyc29yJHBsdXM7XG5cbiAgICAgIGxvd2VzdE9yZGVyID0gdW5pdDtcbiAgICAgIHZhciBkZWx0YSA9IGRpZmZlcihjdXJzb3IsIGxhdGVyKTtcbiAgICAgIGhpZ2hXYXRlciA9IGN1cnNvci5wbHVzKChfY3Vyc29yJHBsdXMgPSB7fSwgX2N1cnNvciRwbHVzW3VuaXRdID0gZGVsdGEsIF9jdXJzb3IkcGx1cykpO1xuXG4gICAgICBpZiAoaGlnaFdhdGVyID4gbGF0ZXIpIHtcbiAgICAgICAgdmFyIF9jdXJzb3IkcGx1czI7XG5cbiAgICAgICAgY3Vyc29yID0gY3Vyc29yLnBsdXMoKF9jdXJzb3IkcGx1czIgPSB7fSwgX2N1cnNvciRwbHVzMlt1bml0XSA9IGRlbHRhIC0gMSwgX2N1cnNvciRwbHVzMikpO1xuICAgICAgICBkZWx0YSAtPSAxO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY3Vyc29yID0gaGlnaFdhdGVyO1xuICAgICAgfVxuXG4gICAgICByZXN1bHRzW3VuaXRdID0gZGVsdGE7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIFtjdXJzb3IsIHJlc3VsdHMsIGhpZ2hXYXRlciwgbG93ZXN0T3JkZXJdO1xufVxuXG5mdW5jdGlvbiBfZGlmZiAoZWFybGllciwgbGF0ZXIsIHVuaXRzLCBvcHRzKSB7XG4gIHZhciBfaGlnaE9yZGVyRGlmZnMgPSBoaWdoT3JkZXJEaWZmcyhlYXJsaWVyLCBsYXRlciwgdW5pdHMpLFxuICAgICAgY3Vyc29yID0gX2hpZ2hPcmRlckRpZmZzWzBdLFxuICAgICAgcmVzdWx0cyA9IF9oaWdoT3JkZXJEaWZmc1sxXSxcbiAgICAgIGhpZ2hXYXRlciA9IF9oaWdoT3JkZXJEaWZmc1syXSxcbiAgICAgIGxvd2VzdE9yZGVyID0gX2hpZ2hPcmRlckRpZmZzWzNdO1xuXG4gIHZhciByZW1haW5pbmdNaWxsaXMgPSBsYXRlciAtIGN1cnNvcjtcbiAgdmFyIGxvd2VyT3JkZXJVbml0cyA9IHVuaXRzLmZpbHRlcihmdW5jdGlvbiAodSkge1xuICAgIHJldHVybiBbXCJob3Vyc1wiLCBcIm1pbnV0ZXNcIiwgXCJzZWNvbmRzXCIsIFwibWlsbGlzZWNvbmRzXCJdLmluZGV4T2YodSkgPj0gMDtcbiAgfSk7XG5cbiAgaWYgKGxvd2VyT3JkZXJVbml0cy5sZW5ndGggPT09IDApIHtcbiAgICBpZiAoaGlnaFdhdGVyIDwgbGF0ZXIpIHtcbiAgICAgIHZhciBfY3Vyc29yJHBsdXMzO1xuXG4gICAgICBoaWdoV2F0ZXIgPSBjdXJzb3IucGx1cygoX2N1cnNvciRwbHVzMyA9IHt9LCBfY3Vyc29yJHBsdXMzW2xvd2VzdE9yZGVyXSA9IDEsIF9jdXJzb3IkcGx1czMpKTtcbiAgICB9XG5cbiAgICBpZiAoaGlnaFdhdGVyICE9PSBjdXJzb3IpIHtcbiAgICAgIHJlc3VsdHNbbG93ZXN0T3JkZXJdID0gKHJlc3VsdHNbbG93ZXN0T3JkZXJdIHx8IDApICsgcmVtYWluaW5nTWlsbGlzIC8gKGhpZ2hXYXRlciAtIGN1cnNvcik7XG4gICAgfVxuICB9XG5cbiAgdmFyIGR1cmF0aW9uID0gRHVyYXRpb24uZnJvbU9iamVjdChyZXN1bHRzLCBvcHRzKTtcblxuICBpZiAobG93ZXJPcmRlclVuaXRzLmxlbmd0aCA+IDApIHtcbiAgICB2YXIgX0R1cmF0aW9uJGZyb21NaWxsaXM7XG5cbiAgICByZXR1cm4gKF9EdXJhdGlvbiRmcm9tTWlsbGlzID0gRHVyYXRpb24uZnJvbU1pbGxpcyhyZW1haW5pbmdNaWxsaXMsIG9wdHMpKS5zaGlmdFRvLmFwcGx5KF9EdXJhdGlvbiRmcm9tTWlsbGlzLCBsb3dlck9yZGVyVW5pdHMpLnBsdXMoZHVyYXRpb24pO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiBkdXJhdGlvbjtcbiAgfVxufVxuXG52YXIgbnVtYmVyaW5nU3lzdGVtcyA9IHtcbiAgYXJhYjogXCJbXFx1MDY2MC1cXHUwNjY5XVwiLFxuICBhcmFiZXh0OiBcIltcXHUwNkYwLVxcdTA2RjldXCIsXG4gIGJhbGk6IFwiW1xcdTFCNTAtXFx1MUI1OV1cIixcbiAgYmVuZzogXCJbXFx1MDlFNi1cXHUwOUVGXVwiLFxuICBkZXZhOiBcIltcXHUwOTY2LVxcdTA5NkZdXCIsXG4gIGZ1bGx3aWRlOiBcIltcXHVGRjEwLVxcdUZGMTldXCIsXG4gIGd1anI6IFwiW1xcdTBBRTYtXFx1MEFFRl1cIixcbiAgaGFuaWRlYzogXCJb44CHfOS4gHzkuox85LiJfOWbm3zkupR85YWtfOS4g3zlhat85LmdXVwiLFxuICBraG1yOiBcIltcXHUxN0UwLVxcdTE3RTldXCIsXG4gIGtuZGE6IFwiW1xcdTBDRTYtXFx1MENFRl1cIixcbiAgbGFvbzogXCJbXFx1MEVEMC1cXHUwRUQ5XVwiLFxuICBsaW1iOiBcIltcXHUxOTQ2LVxcdTE5NEZdXCIsXG4gIG1seW06IFwiW1xcdTBENjYtXFx1MEQ2Rl1cIixcbiAgbW9uZzogXCJbXFx1MTgxMC1cXHUxODE5XVwiLFxuICBteW1yOiBcIltcXHUxMDQwLVxcdTEwNDldXCIsXG4gIG9yeWE6IFwiW1xcdTBCNjYtXFx1MEI2Rl1cIixcbiAgdGFtbGRlYzogXCJbXFx1MEJFNi1cXHUwQkVGXVwiLFxuICB0ZWx1OiBcIltcXHUwQzY2LVxcdTBDNkZdXCIsXG4gIHRoYWk6IFwiW1xcdTBFNTAtXFx1MEU1OV1cIixcbiAgdGlidDogXCJbXFx1MEYyMC1cXHUwRjI5XVwiLFxuICBsYXRuOiBcIlxcXFxkXCJcbn07XG52YXIgbnVtYmVyaW5nU3lzdGVtc1VURjE2ID0ge1xuICBhcmFiOiBbMTYzMiwgMTY0MV0sXG4gIGFyYWJleHQ6IFsxNzc2LCAxNzg1XSxcbiAgYmFsaTogWzY5OTIsIDcwMDFdLFxuICBiZW5nOiBbMjUzNCwgMjU0M10sXG4gIGRldmE6IFsyNDA2LCAyNDE1XSxcbiAgZnVsbHdpZGU6IFs2NTI5NiwgNjUzMDNdLFxuICBndWpyOiBbMjc5MCwgMjc5OV0sXG4gIGtobXI6IFs2MTEyLCA2MTIxXSxcbiAga25kYTogWzMzMDIsIDMzMTFdLFxuICBsYW9vOiBbMzc5MiwgMzgwMV0sXG4gIGxpbWI6IFs2NDcwLCA2NDc5XSxcbiAgbWx5bTogWzM0MzAsIDM0MzldLFxuICBtb25nOiBbNjE2MCwgNjE2OV0sXG4gIG15bXI6IFs0MTYwLCA0MTY5XSxcbiAgb3J5YTogWzI5MTgsIDI5MjddLFxuICB0YW1sZGVjOiBbMzA0NiwgMzA1NV0sXG4gIHRlbHU6IFszMTc0LCAzMTgzXSxcbiAgdGhhaTogWzM2NjQsIDM2NzNdLFxuICB0aWJ0OiBbMzg3MiwgMzg4MV1cbn07XG52YXIgaGFuaWRlY0NoYXJzID0gbnVtYmVyaW5nU3lzdGVtcy5oYW5pZGVjLnJlcGxhY2UoL1tcXFt8XFxdXS9nLCBcIlwiKS5zcGxpdChcIlwiKTtcbmZ1bmN0aW9uIHBhcnNlRGlnaXRzKHN0cikge1xuICB2YXIgdmFsdWUgPSBwYXJzZUludChzdHIsIDEwKTtcblxuICBpZiAoaXNOYU4odmFsdWUpKSB7XG4gICAgdmFsdWUgPSBcIlwiO1xuXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzdHIubGVuZ3RoOyBpKyspIHtcbiAgICAgIHZhciBjb2RlID0gc3RyLmNoYXJDb2RlQXQoaSk7XG5cbiAgICAgIGlmIChzdHJbaV0uc2VhcmNoKG51bWJlcmluZ1N5c3RlbXMuaGFuaWRlYykgIT09IC0xKSB7XG4gICAgICAgIHZhbHVlICs9IGhhbmlkZWNDaGFycy5pbmRleE9mKHN0cltpXSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBmb3IgKHZhciBrZXkgaW4gbnVtYmVyaW5nU3lzdGVtc1VURjE2KSB7XG4gICAgICAgICAgdmFyIF9udW1iZXJpbmdTeXN0ZW1zVVRGID0gbnVtYmVyaW5nU3lzdGVtc1VURjE2W2tleV0sXG4gICAgICAgICAgICAgIG1pbiA9IF9udW1iZXJpbmdTeXN0ZW1zVVRGWzBdLFxuICAgICAgICAgICAgICBtYXggPSBfbnVtYmVyaW5nU3lzdGVtc1VURlsxXTtcblxuICAgICAgICAgIGlmIChjb2RlID49IG1pbiAmJiBjb2RlIDw9IG1heCkge1xuICAgICAgICAgICAgdmFsdWUgKz0gY29kZSAtIG1pbjtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gcGFyc2VJbnQodmFsdWUsIDEwKTtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gdmFsdWU7XG4gIH1cbn1cbmZ1bmN0aW9uIGRpZ2l0UmVnZXgoX3JlZiwgYXBwZW5kKSB7XG4gIHZhciBudW1iZXJpbmdTeXN0ZW0gPSBfcmVmLm51bWJlcmluZ1N5c3RlbTtcblxuICBpZiAoYXBwZW5kID09PSB2b2lkIDApIHtcbiAgICBhcHBlbmQgPSBcIlwiO1xuICB9XG5cbiAgcmV0dXJuIG5ldyBSZWdFeHAoXCJcIiArIG51bWJlcmluZ1N5c3RlbXNbbnVtYmVyaW5nU3lzdGVtIHx8IFwibGF0blwiXSArIGFwcGVuZCk7XG59XG5cbnZhciBNSVNTSU5HX0ZUUCA9IFwibWlzc2luZyBJbnRsLkRhdGVUaW1lRm9ybWF0LmZvcm1hdFRvUGFydHMgc3VwcG9ydFwiO1xuXG5mdW5jdGlvbiBpbnRVbml0KHJlZ2V4LCBwb3N0KSB7XG4gIGlmIChwb3N0ID09PSB2b2lkIDApIHtcbiAgICBwb3N0ID0gZnVuY3Rpb24gcG9zdChpKSB7XG4gICAgICByZXR1cm4gaTtcbiAgICB9O1xuICB9XG5cbiAgcmV0dXJuIHtcbiAgICByZWdleDogcmVnZXgsXG4gICAgZGVzZXI6IGZ1bmN0aW9uIGRlc2VyKF9yZWYpIHtcbiAgICAgIHZhciBzID0gX3JlZlswXTtcbiAgICAgIHJldHVybiBwb3N0KHBhcnNlRGlnaXRzKHMpKTtcbiAgICB9XG4gIH07XG59XG5cbnZhciBOQlNQID0gU3RyaW5nLmZyb21DaGFyQ29kZSgxNjApO1xudmFyIHNwYWNlT3JOQlNQID0gXCIoIHxcIiArIE5CU1AgKyBcIilcIjtcbnZhciBzcGFjZU9yTkJTUFJlZ0V4cCA9IG5ldyBSZWdFeHAoc3BhY2VPck5CU1AsIFwiZ1wiKTtcblxuZnVuY3Rpb24gZml4TGlzdFJlZ2V4KHMpIHtcbiAgLy8gbWFrZSBkb3RzIG9wdGlvbmFsIGFuZCBhbHNvIG1ha2UgdGhlbSBsaXRlcmFsXG4gIC8vIG1ha2Ugc3BhY2UgYW5kIG5vbiBicmVha2FibGUgc3BhY2UgY2hhcmFjdGVycyBpbnRlcmNoYW5nZWFibGVcbiAgcmV0dXJuIHMucmVwbGFjZSgvXFwuL2csIFwiXFxcXC4/XCIpLnJlcGxhY2Uoc3BhY2VPck5CU1BSZWdFeHAsIHNwYWNlT3JOQlNQKTtcbn1cblxuZnVuY3Rpb24gc3RyaXBJbnNlbnNpdGl2aXRpZXMocykge1xuICByZXR1cm4gcy5yZXBsYWNlKC9cXC4vZywgXCJcIikgLy8gaWdub3JlIGRvdHMgdGhhdCB3ZXJlIG1hZGUgb3B0aW9uYWxcbiAgLnJlcGxhY2Uoc3BhY2VPck5CU1BSZWdFeHAsIFwiIFwiKSAvLyBpbnRlcmNoYW5nZSBzcGFjZSBhbmQgbmJzcFxuICAudG9Mb3dlckNhc2UoKTtcbn1cblxuZnVuY3Rpb24gb25lT2Yoc3RyaW5ncywgc3RhcnRJbmRleCkge1xuICBpZiAoc3RyaW5ncyA9PT0gbnVsbCkge1xuICAgIHJldHVybiBudWxsO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiB7XG4gICAgICByZWdleDogUmVnRXhwKHN0cmluZ3MubWFwKGZpeExpc3RSZWdleCkuam9pbihcInxcIikpLFxuICAgICAgZGVzZXI6IGZ1bmN0aW9uIGRlc2VyKF9yZWYyKSB7XG4gICAgICAgIHZhciBzID0gX3JlZjJbMF07XG4gICAgICAgIHJldHVybiBzdHJpbmdzLmZpbmRJbmRleChmdW5jdGlvbiAoaSkge1xuICAgICAgICAgIHJldHVybiBzdHJpcEluc2Vuc2l0aXZpdGllcyhzKSA9PT0gc3RyaXBJbnNlbnNpdGl2aXRpZXMoaSk7XG4gICAgICAgIH0pICsgc3RhcnRJbmRleDtcbiAgICAgIH1cbiAgICB9O1xuICB9XG59XG5cbmZ1bmN0aW9uIG9mZnNldChyZWdleCwgZ3JvdXBzKSB7XG4gIHJldHVybiB7XG4gICAgcmVnZXg6IHJlZ2V4LFxuICAgIGRlc2VyOiBmdW5jdGlvbiBkZXNlcihfcmVmMykge1xuICAgICAgdmFyIGggPSBfcmVmM1sxXSxcbiAgICAgICAgICBtID0gX3JlZjNbMl07XG4gICAgICByZXR1cm4gc2lnbmVkT2Zmc2V0KGgsIG0pO1xuICAgIH0sXG4gICAgZ3JvdXBzOiBncm91cHNcbiAgfTtcbn1cblxuZnVuY3Rpb24gc2ltcGxlKHJlZ2V4KSB7XG4gIHJldHVybiB7XG4gICAgcmVnZXg6IHJlZ2V4LFxuICAgIGRlc2VyOiBmdW5jdGlvbiBkZXNlcihfcmVmNCkge1xuICAgICAgdmFyIHMgPSBfcmVmNFswXTtcbiAgICAgIHJldHVybiBzO1xuICAgIH1cbiAgfTtcbn1cblxuZnVuY3Rpb24gZXNjYXBlVG9rZW4odmFsdWUpIHtcbiAgcmV0dXJuIHZhbHVlLnJlcGxhY2UoL1tcXC1cXFtcXF17fSgpKis/LixcXFxcXFxeJHwjXFxzXS9nLCBcIlxcXFwkJlwiKTtcbn1cblxuZnVuY3Rpb24gdW5pdEZvclRva2VuKHRva2VuLCBsb2MpIHtcbiAgdmFyIG9uZSA9IGRpZ2l0UmVnZXgobG9jKSxcbiAgICAgIHR3byA9IGRpZ2l0UmVnZXgobG9jLCBcInsyfVwiKSxcbiAgICAgIHRocmVlID0gZGlnaXRSZWdleChsb2MsIFwiezN9XCIpLFxuICAgICAgZm91ciA9IGRpZ2l0UmVnZXgobG9jLCBcIns0fVwiKSxcbiAgICAgIHNpeCA9IGRpZ2l0UmVnZXgobG9jLCBcIns2fVwiKSxcbiAgICAgIG9uZU9yVHdvID0gZGlnaXRSZWdleChsb2MsIFwiezEsMn1cIiksXG4gICAgICBvbmVUb1RocmVlID0gZGlnaXRSZWdleChsb2MsIFwiezEsM31cIiksXG4gICAgICBvbmVUb1NpeCA9IGRpZ2l0UmVnZXgobG9jLCBcInsxLDZ9XCIpLFxuICAgICAgb25lVG9OaW5lID0gZGlnaXRSZWdleChsb2MsIFwiezEsOX1cIiksXG4gICAgICB0d29Ub0ZvdXIgPSBkaWdpdFJlZ2V4KGxvYywgXCJ7Miw0fVwiKSxcbiAgICAgIGZvdXJUb1NpeCA9IGRpZ2l0UmVnZXgobG9jLCBcIns0LDZ9XCIpLFxuICAgICAgbGl0ZXJhbCA9IGZ1bmN0aW9uIGxpdGVyYWwodCkge1xuICAgIHJldHVybiB7XG4gICAgICByZWdleDogUmVnRXhwKGVzY2FwZVRva2VuKHQudmFsKSksXG4gICAgICBkZXNlcjogZnVuY3Rpb24gZGVzZXIoX3JlZjUpIHtcbiAgICAgICAgdmFyIHMgPSBfcmVmNVswXTtcbiAgICAgICAgcmV0dXJuIHM7XG4gICAgICB9LFxuICAgICAgbGl0ZXJhbDogdHJ1ZVxuICAgIH07XG4gIH0sXG4gICAgICB1bml0YXRlID0gZnVuY3Rpb24gdW5pdGF0ZSh0KSB7XG4gICAgaWYgKHRva2VuLmxpdGVyYWwpIHtcbiAgICAgIHJldHVybiBsaXRlcmFsKHQpO1xuICAgIH1cblxuICAgIHN3aXRjaCAodC52YWwpIHtcbiAgICAgIC8vIGVyYVxuICAgICAgY2FzZSBcIkdcIjpcbiAgICAgICAgcmV0dXJuIG9uZU9mKGxvYy5lcmFzKFwic2hvcnRcIiwgZmFsc2UpLCAwKTtcblxuICAgICAgY2FzZSBcIkdHXCI6XG4gICAgICAgIHJldHVybiBvbmVPZihsb2MuZXJhcyhcImxvbmdcIiwgZmFsc2UpLCAwKTtcbiAgICAgIC8vIHllYXJzXG5cbiAgICAgIGNhc2UgXCJ5XCI6XG4gICAgICAgIHJldHVybiBpbnRVbml0KG9uZVRvU2l4KTtcblxuICAgICAgY2FzZSBcInl5XCI6XG4gICAgICAgIHJldHVybiBpbnRVbml0KHR3b1RvRm91ciwgdW50cnVuY2F0ZVllYXIpO1xuXG4gICAgICBjYXNlIFwieXl5eVwiOlxuICAgICAgICByZXR1cm4gaW50VW5pdChmb3VyKTtcblxuICAgICAgY2FzZSBcInl5eXl5XCI6XG4gICAgICAgIHJldHVybiBpbnRVbml0KGZvdXJUb1NpeCk7XG5cbiAgICAgIGNhc2UgXCJ5eXl5eXlcIjpcbiAgICAgICAgcmV0dXJuIGludFVuaXQoc2l4KTtcbiAgICAgIC8vIG1vbnRoc1xuXG4gICAgICBjYXNlIFwiTVwiOlxuICAgICAgICByZXR1cm4gaW50VW5pdChvbmVPclR3byk7XG5cbiAgICAgIGNhc2UgXCJNTVwiOlxuICAgICAgICByZXR1cm4gaW50VW5pdCh0d28pO1xuXG4gICAgICBjYXNlIFwiTU1NXCI6XG4gICAgICAgIHJldHVybiBvbmVPZihsb2MubW9udGhzKFwic2hvcnRcIiwgdHJ1ZSwgZmFsc2UpLCAxKTtcblxuICAgICAgY2FzZSBcIk1NTU1cIjpcbiAgICAgICAgcmV0dXJuIG9uZU9mKGxvYy5tb250aHMoXCJsb25nXCIsIHRydWUsIGZhbHNlKSwgMSk7XG5cbiAgICAgIGNhc2UgXCJMXCI6XG4gICAgICAgIHJldHVybiBpbnRVbml0KG9uZU9yVHdvKTtcblxuICAgICAgY2FzZSBcIkxMXCI6XG4gICAgICAgIHJldHVybiBpbnRVbml0KHR3byk7XG5cbiAgICAgIGNhc2UgXCJMTExcIjpcbiAgICAgICAgcmV0dXJuIG9uZU9mKGxvYy5tb250aHMoXCJzaG9ydFwiLCBmYWxzZSwgZmFsc2UpLCAxKTtcblxuICAgICAgY2FzZSBcIkxMTExcIjpcbiAgICAgICAgcmV0dXJuIG9uZU9mKGxvYy5tb250aHMoXCJsb25nXCIsIGZhbHNlLCBmYWxzZSksIDEpO1xuICAgICAgLy8gZGF0ZXNcblxuICAgICAgY2FzZSBcImRcIjpcbiAgICAgICAgcmV0dXJuIGludFVuaXQob25lT3JUd28pO1xuXG4gICAgICBjYXNlIFwiZGRcIjpcbiAgICAgICAgcmV0dXJuIGludFVuaXQodHdvKTtcbiAgICAgIC8vIG9yZGluYWxzXG5cbiAgICAgIGNhc2UgXCJvXCI6XG4gICAgICAgIHJldHVybiBpbnRVbml0KG9uZVRvVGhyZWUpO1xuXG4gICAgICBjYXNlIFwib29vXCI6XG4gICAgICAgIHJldHVybiBpbnRVbml0KHRocmVlKTtcbiAgICAgIC8vIHRpbWVcblxuICAgICAgY2FzZSBcIkhIXCI6XG4gICAgICAgIHJldHVybiBpbnRVbml0KHR3byk7XG5cbiAgICAgIGNhc2UgXCJIXCI6XG4gICAgICAgIHJldHVybiBpbnRVbml0KG9uZU9yVHdvKTtcblxuICAgICAgY2FzZSBcImhoXCI6XG4gICAgICAgIHJldHVybiBpbnRVbml0KHR3byk7XG5cbiAgICAgIGNhc2UgXCJoXCI6XG4gICAgICAgIHJldHVybiBpbnRVbml0KG9uZU9yVHdvKTtcblxuICAgICAgY2FzZSBcIm1tXCI6XG4gICAgICAgIHJldHVybiBpbnRVbml0KHR3byk7XG5cbiAgICAgIGNhc2UgXCJtXCI6XG4gICAgICAgIHJldHVybiBpbnRVbml0KG9uZU9yVHdvKTtcblxuICAgICAgY2FzZSBcInFcIjpcbiAgICAgICAgcmV0dXJuIGludFVuaXQob25lT3JUd28pO1xuXG4gICAgICBjYXNlIFwicXFcIjpcbiAgICAgICAgcmV0dXJuIGludFVuaXQodHdvKTtcblxuICAgICAgY2FzZSBcInNcIjpcbiAgICAgICAgcmV0dXJuIGludFVuaXQob25lT3JUd28pO1xuXG4gICAgICBjYXNlIFwic3NcIjpcbiAgICAgICAgcmV0dXJuIGludFVuaXQodHdvKTtcblxuICAgICAgY2FzZSBcIlNcIjpcbiAgICAgICAgcmV0dXJuIGludFVuaXQob25lVG9UaHJlZSk7XG5cbiAgICAgIGNhc2UgXCJTU1NcIjpcbiAgICAgICAgcmV0dXJuIGludFVuaXQodGhyZWUpO1xuXG4gICAgICBjYXNlIFwidVwiOlxuICAgICAgICByZXR1cm4gc2ltcGxlKG9uZVRvTmluZSk7XG5cbiAgICAgIGNhc2UgXCJ1dVwiOlxuICAgICAgICByZXR1cm4gc2ltcGxlKG9uZU9yVHdvKTtcblxuICAgICAgY2FzZSBcInV1dVwiOlxuICAgICAgICByZXR1cm4gaW50VW5pdChvbmUpO1xuICAgICAgLy8gbWVyaWRpZW1cblxuICAgICAgY2FzZSBcImFcIjpcbiAgICAgICAgcmV0dXJuIG9uZU9mKGxvYy5tZXJpZGllbXMoKSwgMCk7XG4gICAgICAvLyB3ZWVrWWVhciAoaylcblxuICAgICAgY2FzZSBcImtra2tcIjpcbiAgICAgICAgcmV0dXJuIGludFVuaXQoZm91cik7XG5cbiAgICAgIGNhc2UgXCJra1wiOlxuICAgICAgICByZXR1cm4gaW50VW5pdCh0d29Ub0ZvdXIsIHVudHJ1bmNhdGVZZWFyKTtcbiAgICAgIC8vIHdlZWtOdW1iZXIgKFcpXG5cbiAgICAgIGNhc2UgXCJXXCI6XG4gICAgICAgIHJldHVybiBpbnRVbml0KG9uZU9yVHdvKTtcblxuICAgICAgY2FzZSBcIldXXCI6XG4gICAgICAgIHJldHVybiBpbnRVbml0KHR3byk7XG4gICAgICAvLyB3ZWVrZGF5c1xuXG4gICAgICBjYXNlIFwiRVwiOlxuICAgICAgY2FzZSBcImNcIjpcbiAgICAgICAgcmV0dXJuIGludFVuaXQob25lKTtcblxuICAgICAgY2FzZSBcIkVFRVwiOlxuICAgICAgICByZXR1cm4gb25lT2YobG9jLndlZWtkYXlzKFwic2hvcnRcIiwgZmFsc2UsIGZhbHNlKSwgMSk7XG5cbiAgICAgIGNhc2UgXCJFRUVFXCI6XG4gICAgICAgIHJldHVybiBvbmVPZihsb2Mud2Vla2RheXMoXCJsb25nXCIsIGZhbHNlLCBmYWxzZSksIDEpO1xuXG4gICAgICBjYXNlIFwiY2NjXCI6XG4gICAgICAgIHJldHVybiBvbmVPZihsb2Mud2Vla2RheXMoXCJzaG9ydFwiLCB0cnVlLCBmYWxzZSksIDEpO1xuXG4gICAgICBjYXNlIFwiY2NjY1wiOlxuICAgICAgICByZXR1cm4gb25lT2YobG9jLndlZWtkYXlzKFwibG9uZ1wiLCB0cnVlLCBmYWxzZSksIDEpO1xuICAgICAgLy8gb2Zmc2V0L3pvbmVcblxuICAgICAgY2FzZSBcIlpcIjpcbiAgICAgIGNhc2UgXCJaWlwiOlxuICAgICAgICByZXR1cm4gb2Zmc2V0KG5ldyBSZWdFeHAoXCIoWystXVwiICsgb25lT3JUd28uc291cmNlICsgXCIpKD86OihcIiArIHR3by5zb3VyY2UgKyBcIikpP1wiKSwgMik7XG5cbiAgICAgIGNhc2UgXCJaWlpcIjpcbiAgICAgICAgcmV0dXJuIG9mZnNldChuZXcgUmVnRXhwKFwiKFsrLV1cIiArIG9uZU9yVHdvLnNvdXJjZSArIFwiKShcIiArIHR3by5zb3VyY2UgKyBcIik/XCIpLCAyKTtcbiAgICAgIC8vIHdlIGRvbid0IHN1cHBvcnQgWlpaWiAoUFNUKSBvciBaWlpaWiAoUGFjaWZpYyBTdGFuZGFyZCBUaW1lKSBpbiBwYXJzaW5nXG4gICAgICAvLyBiZWNhdXNlIHdlIGRvbid0IGhhdmUgYW55IHdheSB0byBmaWd1cmUgb3V0IHdoYXQgdGhleSBhcmVcblxuICAgICAgY2FzZSBcInpcIjpcbiAgICAgICAgcmV0dXJuIHNpbXBsZSgvW2Etel8rLS9dezEsMjU2fT8vaSk7XG5cbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHJldHVybiBsaXRlcmFsKHQpO1xuICAgIH1cbiAgfTtcblxuICB2YXIgdW5pdCA9IHVuaXRhdGUodG9rZW4pIHx8IHtcbiAgICBpbnZhbGlkUmVhc29uOiBNSVNTSU5HX0ZUUFxuICB9O1xuICB1bml0LnRva2VuID0gdG9rZW47XG4gIHJldHVybiB1bml0O1xufVxuXG52YXIgcGFydFR5cGVTdHlsZVRvVG9rZW5WYWwgPSB7XG4gIHllYXI6IHtcbiAgICBcIjItZGlnaXRcIjogXCJ5eVwiLFxuICAgIG51bWVyaWM6IFwieXl5eXlcIlxuICB9LFxuICBtb250aDoge1xuICAgIG51bWVyaWM6IFwiTVwiLFxuICAgIFwiMi1kaWdpdFwiOiBcIk1NXCIsXG4gICAgc2hvcnQ6IFwiTU1NXCIsXG4gICAgbG9uZzogXCJNTU1NXCJcbiAgfSxcbiAgZGF5OiB7XG4gICAgbnVtZXJpYzogXCJkXCIsXG4gICAgXCIyLWRpZ2l0XCI6IFwiZGRcIlxuICB9LFxuICB3ZWVrZGF5OiB7XG4gICAgc2hvcnQ6IFwiRUVFXCIsXG4gICAgbG9uZzogXCJFRUVFXCJcbiAgfSxcbiAgZGF5cGVyaW9kOiBcImFcIixcbiAgZGF5UGVyaW9kOiBcImFcIixcbiAgaG91cjoge1xuICAgIG51bWVyaWM6IFwiaFwiLFxuICAgIFwiMi1kaWdpdFwiOiBcImhoXCJcbiAgfSxcbiAgbWludXRlOiB7XG4gICAgbnVtZXJpYzogXCJtXCIsXG4gICAgXCIyLWRpZ2l0XCI6IFwibW1cIlxuICB9LFxuICBzZWNvbmQ6IHtcbiAgICBudW1lcmljOiBcInNcIixcbiAgICBcIjItZGlnaXRcIjogXCJzc1wiXG4gIH1cbn07XG5cbmZ1bmN0aW9uIHRva2VuRm9yUGFydChwYXJ0LCBsb2NhbGUsIGZvcm1hdE9wdHMpIHtcbiAgdmFyIHR5cGUgPSBwYXJ0LnR5cGUsXG4gICAgICB2YWx1ZSA9IHBhcnQudmFsdWU7XG5cbiAgaWYgKHR5cGUgPT09IFwibGl0ZXJhbFwiKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGxpdGVyYWw6IHRydWUsXG4gICAgICB2YWw6IHZhbHVlXG4gICAgfTtcbiAgfVxuXG4gIHZhciBzdHlsZSA9IGZvcm1hdE9wdHNbdHlwZV07XG4gIHZhciB2YWwgPSBwYXJ0VHlwZVN0eWxlVG9Ub2tlblZhbFt0eXBlXTtcblxuICBpZiAodHlwZW9mIHZhbCA9PT0gXCJvYmplY3RcIikge1xuICAgIHZhbCA9IHZhbFtzdHlsZV07XG4gIH1cblxuICBpZiAodmFsKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGxpdGVyYWw6IGZhbHNlLFxuICAgICAgdmFsOiB2YWxcbiAgICB9O1xuICB9XG5cbiAgcmV0dXJuIHVuZGVmaW5lZDtcbn1cblxuZnVuY3Rpb24gYnVpbGRSZWdleCh1bml0cykge1xuICB2YXIgcmUgPSB1bml0cy5tYXAoZnVuY3Rpb24gKHUpIHtcbiAgICByZXR1cm4gdS5yZWdleDtcbiAgfSkucmVkdWNlKGZ1bmN0aW9uIChmLCByKSB7XG4gICAgcmV0dXJuIGYgKyBcIihcIiArIHIuc291cmNlICsgXCIpXCI7XG4gIH0sIFwiXCIpO1xuICByZXR1cm4gW1wiXlwiICsgcmUgKyBcIiRcIiwgdW5pdHNdO1xufVxuXG5mdW5jdGlvbiBtYXRjaChpbnB1dCwgcmVnZXgsIGhhbmRsZXJzKSB7XG4gIHZhciBtYXRjaGVzID0gaW5wdXQubWF0Y2gocmVnZXgpO1xuXG4gIGlmIChtYXRjaGVzKSB7XG4gICAgdmFyIGFsbCA9IHt9O1xuICAgIHZhciBtYXRjaEluZGV4ID0gMTtcblxuICAgIGZvciAodmFyIGkgaW4gaGFuZGxlcnMpIHtcbiAgICAgIGlmIChoYXNPd25Qcm9wZXJ0eShoYW5kbGVycywgaSkpIHtcbiAgICAgICAgdmFyIGggPSBoYW5kbGVyc1tpXSxcbiAgICAgICAgICAgIGdyb3VwcyA9IGguZ3JvdXBzID8gaC5ncm91cHMgKyAxIDogMTtcblxuICAgICAgICBpZiAoIWgubGl0ZXJhbCAmJiBoLnRva2VuKSB7XG4gICAgICAgICAgYWxsW2gudG9rZW4udmFsWzBdXSA9IGguZGVzZXIobWF0Y2hlcy5zbGljZShtYXRjaEluZGV4LCBtYXRjaEluZGV4ICsgZ3JvdXBzKSk7XG4gICAgICAgIH1cblxuICAgICAgICBtYXRjaEluZGV4ICs9IGdyb3VwcztcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gW21hdGNoZXMsIGFsbF07XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIFttYXRjaGVzLCB7fV07XG4gIH1cbn1cblxuZnVuY3Rpb24gZGF0ZVRpbWVGcm9tTWF0Y2hlcyhtYXRjaGVzKSB7XG4gIHZhciB0b0ZpZWxkID0gZnVuY3Rpb24gdG9GaWVsZCh0b2tlbikge1xuICAgIHN3aXRjaCAodG9rZW4pIHtcbiAgICAgIGNhc2UgXCJTXCI6XG4gICAgICAgIHJldHVybiBcIm1pbGxpc2Vjb25kXCI7XG5cbiAgICAgIGNhc2UgXCJzXCI6XG4gICAgICAgIHJldHVybiBcInNlY29uZFwiO1xuXG4gICAgICBjYXNlIFwibVwiOlxuICAgICAgICByZXR1cm4gXCJtaW51dGVcIjtcblxuICAgICAgY2FzZSBcImhcIjpcbiAgICAgIGNhc2UgXCJIXCI6XG4gICAgICAgIHJldHVybiBcImhvdXJcIjtcblxuICAgICAgY2FzZSBcImRcIjpcbiAgICAgICAgcmV0dXJuIFwiZGF5XCI7XG5cbiAgICAgIGNhc2UgXCJvXCI6XG4gICAgICAgIHJldHVybiBcIm9yZGluYWxcIjtcblxuICAgICAgY2FzZSBcIkxcIjpcbiAgICAgIGNhc2UgXCJNXCI6XG4gICAgICAgIHJldHVybiBcIm1vbnRoXCI7XG5cbiAgICAgIGNhc2UgXCJ5XCI6XG4gICAgICAgIHJldHVybiBcInllYXJcIjtcblxuICAgICAgY2FzZSBcIkVcIjpcbiAgICAgIGNhc2UgXCJjXCI6XG4gICAgICAgIHJldHVybiBcIndlZWtkYXlcIjtcblxuICAgICAgY2FzZSBcIldcIjpcbiAgICAgICAgcmV0dXJuIFwid2Vla051bWJlclwiO1xuXG4gICAgICBjYXNlIFwia1wiOlxuICAgICAgICByZXR1cm4gXCJ3ZWVrWWVhclwiO1xuXG4gICAgICBjYXNlIFwicVwiOlxuICAgICAgICByZXR1cm4gXCJxdWFydGVyXCI7XG5cbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgfTtcblxuICB2YXIgem9uZSA9IG51bGw7XG4gIHZhciBzcGVjaWZpY09mZnNldDtcblxuICBpZiAoIWlzVW5kZWZpbmVkKG1hdGNoZXMueikpIHtcbiAgICB6b25lID0gSUFOQVpvbmUuY3JlYXRlKG1hdGNoZXMueik7XG4gIH1cblxuICBpZiAoIWlzVW5kZWZpbmVkKG1hdGNoZXMuWikpIHtcbiAgICBpZiAoIXpvbmUpIHtcbiAgICAgIHpvbmUgPSBuZXcgRml4ZWRPZmZzZXRab25lKG1hdGNoZXMuWik7XG4gICAgfVxuXG4gICAgc3BlY2lmaWNPZmZzZXQgPSBtYXRjaGVzLlo7XG4gIH1cblxuICBpZiAoIWlzVW5kZWZpbmVkKG1hdGNoZXMucSkpIHtcbiAgICBtYXRjaGVzLk0gPSAobWF0Y2hlcy5xIC0gMSkgKiAzICsgMTtcbiAgfVxuXG4gIGlmICghaXNVbmRlZmluZWQobWF0Y2hlcy5oKSkge1xuICAgIGlmIChtYXRjaGVzLmggPCAxMiAmJiBtYXRjaGVzLmEgPT09IDEpIHtcbiAgICAgIG1hdGNoZXMuaCArPSAxMjtcbiAgICB9IGVsc2UgaWYgKG1hdGNoZXMuaCA9PT0gMTIgJiYgbWF0Y2hlcy5hID09PSAwKSB7XG4gICAgICBtYXRjaGVzLmggPSAwO1xuICAgIH1cbiAgfVxuXG4gIGlmIChtYXRjaGVzLkcgPT09IDAgJiYgbWF0Y2hlcy55KSB7XG4gICAgbWF0Y2hlcy55ID0gLW1hdGNoZXMueTtcbiAgfVxuXG4gIGlmICghaXNVbmRlZmluZWQobWF0Y2hlcy51KSkge1xuICAgIG1hdGNoZXMuUyA9IHBhcnNlTWlsbGlzKG1hdGNoZXMudSk7XG4gIH1cblxuICB2YXIgdmFscyA9IE9iamVjdC5rZXlzKG1hdGNoZXMpLnJlZHVjZShmdW5jdGlvbiAociwgaykge1xuICAgIHZhciBmID0gdG9GaWVsZChrKTtcblxuICAgIGlmIChmKSB7XG4gICAgICByW2ZdID0gbWF0Y2hlc1trXTtcbiAgICB9XG5cbiAgICByZXR1cm4gcjtcbiAgfSwge30pO1xuICByZXR1cm4gW3ZhbHMsIHpvbmUsIHNwZWNpZmljT2Zmc2V0XTtcbn1cblxudmFyIGR1bW15RGF0ZVRpbWVDYWNoZSA9IG51bGw7XG5cbmZ1bmN0aW9uIGdldER1bW15RGF0ZVRpbWUoKSB7XG4gIGlmICghZHVtbXlEYXRlVGltZUNhY2hlKSB7XG4gICAgZHVtbXlEYXRlVGltZUNhY2hlID0gRGF0ZVRpbWUuZnJvbU1pbGxpcygxNTU1NTU1NTU1NTU1KTtcbiAgfVxuXG4gIHJldHVybiBkdW1teURhdGVUaW1lQ2FjaGU7XG59XG5cbmZ1bmN0aW9uIG1heWJlRXhwYW5kTWFjcm9Ub2tlbih0b2tlbiwgbG9jYWxlKSB7XG4gIGlmICh0b2tlbi5saXRlcmFsKSB7XG4gICAgcmV0dXJuIHRva2VuO1xuICB9XG5cbiAgdmFyIGZvcm1hdE9wdHMgPSBGb3JtYXR0ZXIubWFjcm9Ub2tlblRvRm9ybWF0T3B0cyh0b2tlbi52YWwpO1xuXG4gIGlmICghZm9ybWF0T3B0cykge1xuICAgIHJldHVybiB0b2tlbjtcbiAgfVxuXG4gIHZhciBmb3JtYXR0ZXIgPSBGb3JtYXR0ZXIuY3JlYXRlKGxvY2FsZSwgZm9ybWF0T3B0cyk7XG4gIHZhciBwYXJ0cyA9IGZvcm1hdHRlci5mb3JtYXREYXRlVGltZVBhcnRzKGdldER1bW15RGF0ZVRpbWUoKSk7XG4gIHZhciB0b2tlbnMgPSBwYXJ0cy5tYXAoZnVuY3Rpb24gKHApIHtcbiAgICByZXR1cm4gdG9rZW5Gb3JQYXJ0KHAsIGxvY2FsZSwgZm9ybWF0T3B0cyk7XG4gIH0pO1xuXG4gIGlmICh0b2tlbnMuaW5jbHVkZXModW5kZWZpbmVkKSkge1xuICAgIHJldHVybiB0b2tlbjtcbiAgfVxuXG4gIHJldHVybiB0b2tlbnM7XG59XG5cbmZ1bmN0aW9uIGV4cGFuZE1hY3JvVG9rZW5zKHRva2VucywgbG9jYWxlKSB7XG4gIHZhciBfQXJyYXkkcHJvdG90eXBlO1xuXG4gIHJldHVybiAoX0FycmF5JHByb3RvdHlwZSA9IEFycmF5LnByb3RvdHlwZSkuY29uY2F0LmFwcGx5KF9BcnJheSRwcm90b3R5cGUsIHRva2Vucy5tYXAoZnVuY3Rpb24gKHQpIHtcbiAgICByZXR1cm4gbWF5YmVFeHBhbmRNYWNyb1Rva2VuKHQsIGxvY2FsZSk7XG4gIH0pKTtcbn1cbi8qKlxuICogQHByaXZhdGVcbiAqL1xuXG5cbmZ1bmN0aW9uIGV4cGxhaW5Gcm9tVG9rZW5zKGxvY2FsZSwgaW5wdXQsIGZvcm1hdCkge1xuICB2YXIgdG9rZW5zID0gZXhwYW5kTWFjcm9Ub2tlbnMoRm9ybWF0dGVyLnBhcnNlRm9ybWF0KGZvcm1hdCksIGxvY2FsZSksXG4gICAgICB1bml0cyA9IHRva2Vucy5tYXAoZnVuY3Rpb24gKHQpIHtcbiAgICByZXR1cm4gdW5pdEZvclRva2VuKHQsIGxvY2FsZSk7XG4gIH0pLFxuICAgICAgZGlzcXVhbGlmeWluZ1VuaXQgPSB1bml0cy5maW5kKGZ1bmN0aW9uICh0KSB7XG4gICAgcmV0dXJuIHQuaW52YWxpZFJlYXNvbjtcbiAgfSk7XG5cbiAgaWYgKGRpc3F1YWxpZnlpbmdVbml0KSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGlucHV0OiBpbnB1dCxcbiAgICAgIHRva2VuczogdG9rZW5zLFxuICAgICAgaW52YWxpZFJlYXNvbjogZGlzcXVhbGlmeWluZ1VuaXQuaW52YWxpZFJlYXNvblxuICAgIH07XG4gIH0gZWxzZSB7XG4gICAgdmFyIF9idWlsZFJlZ2V4ID0gYnVpbGRSZWdleCh1bml0cyksXG4gICAgICAgIHJlZ2V4U3RyaW5nID0gX2J1aWxkUmVnZXhbMF0sXG4gICAgICAgIGhhbmRsZXJzID0gX2J1aWxkUmVnZXhbMV0sXG4gICAgICAgIHJlZ2V4ID0gUmVnRXhwKHJlZ2V4U3RyaW5nLCBcImlcIiksXG4gICAgICAgIF9tYXRjaCA9IG1hdGNoKGlucHV0LCByZWdleCwgaGFuZGxlcnMpLFxuICAgICAgICByYXdNYXRjaGVzID0gX21hdGNoWzBdLFxuICAgICAgICBtYXRjaGVzID0gX21hdGNoWzFdLFxuICAgICAgICBfcmVmNiA9IG1hdGNoZXMgPyBkYXRlVGltZUZyb21NYXRjaGVzKG1hdGNoZXMpIDogW251bGwsIG51bGwsIHVuZGVmaW5lZF0sXG4gICAgICAgIHJlc3VsdCA9IF9yZWY2WzBdLFxuICAgICAgICB6b25lID0gX3JlZjZbMV0sXG4gICAgICAgIHNwZWNpZmljT2Zmc2V0ID0gX3JlZjZbMl07XG5cbiAgICBpZiAoaGFzT3duUHJvcGVydHkobWF0Y2hlcywgXCJhXCIpICYmIGhhc093blByb3BlcnR5KG1hdGNoZXMsIFwiSFwiKSkge1xuICAgICAgdGhyb3cgbmV3IENvbmZsaWN0aW5nU3BlY2lmaWNhdGlvbkVycm9yKFwiQ2FuJ3QgaW5jbHVkZSBtZXJpZGllbSB3aGVuIHNwZWNpZnlpbmcgMjQtaG91ciBmb3JtYXRcIik7XG4gICAgfVxuXG4gICAgcmV0dXJuIHtcbiAgICAgIGlucHV0OiBpbnB1dCxcbiAgICAgIHRva2VuczogdG9rZW5zLFxuICAgICAgcmVnZXg6IHJlZ2V4LFxuICAgICAgcmF3TWF0Y2hlczogcmF3TWF0Y2hlcyxcbiAgICAgIG1hdGNoZXM6IG1hdGNoZXMsXG4gICAgICByZXN1bHQ6IHJlc3VsdCxcbiAgICAgIHpvbmU6IHpvbmUsXG4gICAgICBzcGVjaWZpY09mZnNldDogc3BlY2lmaWNPZmZzZXRcbiAgICB9O1xuICB9XG59XG5mdW5jdGlvbiBwYXJzZUZyb21Ub2tlbnMobG9jYWxlLCBpbnB1dCwgZm9ybWF0KSB7XG4gIHZhciBfZXhwbGFpbkZyb21Ub2tlbnMgPSBleHBsYWluRnJvbVRva2Vucyhsb2NhbGUsIGlucHV0LCBmb3JtYXQpLFxuICAgICAgcmVzdWx0ID0gX2V4cGxhaW5Gcm9tVG9rZW5zLnJlc3VsdCxcbiAgICAgIHpvbmUgPSBfZXhwbGFpbkZyb21Ub2tlbnMuem9uZSxcbiAgICAgIHNwZWNpZmljT2Zmc2V0ID0gX2V4cGxhaW5Gcm9tVG9rZW5zLnNwZWNpZmljT2Zmc2V0LFxuICAgICAgaW52YWxpZFJlYXNvbiA9IF9leHBsYWluRnJvbVRva2Vucy5pbnZhbGlkUmVhc29uO1xuXG4gIHJldHVybiBbcmVzdWx0LCB6b25lLCBzcGVjaWZpY09mZnNldCwgaW52YWxpZFJlYXNvbl07XG59XG5cbnZhciBub25MZWFwTGFkZGVyID0gWzAsIDMxLCA1OSwgOTAsIDEyMCwgMTUxLCAxODEsIDIxMiwgMjQzLCAyNzMsIDMwNCwgMzM0XSxcbiAgICBsZWFwTGFkZGVyID0gWzAsIDMxLCA2MCwgOTEsIDEyMSwgMTUyLCAxODIsIDIxMywgMjQ0LCAyNzQsIDMwNSwgMzM1XTtcblxuZnVuY3Rpb24gdW5pdE91dE9mUmFuZ2UodW5pdCwgdmFsdWUpIHtcbiAgcmV0dXJuIG5ldyBJbnZhbGlkKFwidW5pdCBvdXQgb2YgcmFuZ2VcIiwgXCJ5b3Ugc3BlY2lmaWVkIFwiICsgdmFsdWUgKyBcIiAob2YgdHlwZSBcIiArIHR5cGVvZiB2YWx1ZSArIFwiKSBhcyBhIFwiICsgdW5pdCArIFwiLCB3aGljaCBpcyBpbnZhbGlkXCIpO1xufVxuXG5mdW5jdGlvbiBkYXlPZldlZWsoeWVhciwgbW9udGgsIGRheSkge1xuICB2YXIganMgPSBuZXcgRGF0ZShEYXRlLlVUQyh5ZWFyLCBtb250aCAtIDEsIGRheSkpLmdldFVUQ0RheSgpO1xuICByZXR1cm4ganMgPT09IDAgPyA3IDoganM7XG59XG5cbmZ1bmN0aW9uIGNvbXB1dGVPcmRpbmFsKHllYXIsIG1vbnRoLCBkYXkpIHtcbiAgcmV0dXJuIGRheSArIChpc0xlYXBZZWFyKHllYXIpID8gbGVhcExhZGRlciA6IG5vbkxlYXBMYWRkZXIpW21vbnRoIC0gMV07XG59XG5cbmZ1bmN0aW9uIHVuY29tcHV0ZU9yZGluYWwoeWVhciwgb3JkaW5hbCkge1xuICB2YXIgdGFibGUgPSBpc0xlYXBZZWFyKHllYXIpID8gbGVhcExhZGRlciA6IG5vbkxlYXBMYWRkZXIsXG4gICAgICBtb250aDAgPSB0YWJsZS5maW5kSW5kZXgoZnVuY3Rpb24gKGkpIHtcbiAgICByZXR1cm4gaSA8IG9yZGluYWw7XG4gIH0pLFxuICAgICAgZGF5ID0gb3JkaW5hbCAtIHRhYmxlW21vbnRoMF07XG4gIHJldHVybiB7XG4gICAgbW9udGg6IG1vbnRoMCArIDEsXG4gICAgZGF5OiBkYXlcbiAgfTtcbn1cbi8qKlxuICogQHByaXZhdGVcbiAqL1xuXG5cbmZ1bmN0aW9uIGdyZWdvcmlhblRvV2VlayhncmVnT2JqKSB7XG4gIHZhciB5ZWFyID0gZ3JlZ09iai55ZWFyLFxuICAgICAgbW9udGggPSBncmVnT2JqLm1vbnRoLFxuICAgICAgZGF5ID0gZ3JlZ09iai5kYXksXG4gICAgICBvcmRpbmFsID0gY29tcHV0ZU9yZGluYWwoeWVhciwgbW9udGgsIGRheSksXG4gICAgICB3ZWVrZGF5ID0gZGF5T2ZXZWVrKHllYXIsIG1vbnRoLCBkYXkpO1xuICB2YXIgd2Vla051bWJlciA9IE1hdGguZmxvb3IoKG9yZGluYWwgLSB3ZWVrZGF5ICsgMTApIC8gNyksXG4gICAgICB3ZWVrWWVhcjtcblxuICBpZiAod2Vla051bWJlciA8IDEpIHtcbiAgICB3ZWVrWWVhciA9IHllYXIgLSAxO1xuICAgIHdlZWtOdW1iZXIgPSB3ZWVrc0luV2Vla1llYXIod2Vla1llYXIpO1xuICB9IGVsc2UgaWYgKHdlZWtOdW1iZXIgPiB3ZWVrc0luV2Vla1llYXIoeWVhcikpIHtcbiAgICB3ZWVrWWVhciA9IHllYXIgKyAxO1xuICAgIHdlZWtOdW1iZXIgPSAxO1xuICB9IGVsc2Uge1xuICAgIHdlZWtZZWFyID0geWVhcjtcbiAgfVxuXG4gIHJldHVybiBfZXh0ZW5kcyh7XG4gICAgd2Vla1llYXI6IHdlZWtZZWFyLFxuICAgIHdlZWtOdW1iZXI6IHdlZWtOdW1iZXIsXG4gICAgd2Vla2RheTogd2Vla2RheVxuICB9LCB0aW1lT2JqZWN0KGdyZWdPYmopKTtcbn1cbmZ1bmN0aW9uIHdlZWtUb0dyZWdvcmlhbih3ZWVrRGF0YSkge1xuICB2YXIgd2Vla1llYXIgPSB3ZWVrRGF0YS53ZWVrWWVhcixcbiAgICAgIHdlZWtOdW1iZXIgPSB3ZWVrRGF0YS53ZWVrTnVtYmVyLFxuICAgICAgd2Vla2RheSA9IHdlZWtEYXRhLndlZWtkYXksXG4gICAgICB3ZWVrZGF5T2ZKYW40ID0gZGF5T2ZXZWVrKHdlZWtZZWFyLCAxLCA0KSxcbiAgICAgIHllYXJJbkRheXMgPSBkYXlzSW5ZZWFyKHdlZWtZZWFyKTtcbiAgdmFyIG9yZGluYWwgPSB3ZWVrTnVtYmVyICogNyArIHdlZWtkYXkgLSB3ZWVrZGF5T2ZKYW40IC0gMyxcbiAgICAgIHllYXI7XG5cbiAgaWYgKG9yZGluYWwgPCAxKSB7XG4gICAgeWVhciA9IHdlZWtZZWFyIC0gMTtcbiAgICBvcmRpbmFsICs9IGRheXNJblllYXIoeWVhcik7XG4gIH0gZWxzZSBpZiAob3JkaW5hbCA+IHllYXJJbkRheXMpIHtcbiAgICB5ZWFyID0gd2Vla1llYXIgKyAxO1xuICAgIG9yZGluYWwgLT0gZGF5c0luWWVhcih3ZWVrWWVhcik7XG4gIH0gZWxzZSB7XG4gICAgeWVhciA9IHdlZWtZZWFyO1xuICB9XG5cbiAgdmFyIF91bmNvbXB1dGVPcmRpbmFsID0gdW5jb21wdXRlT3JkaW5hbCh5ZWFyLCBvcmRpbmFsKSxcbiAgICAgIG1vbnRoID0gX3VuY29tcHV0ZU9yZGluYWwubW9udGgsXG4gICAgICBkYXkgPSBfdW5jb21wdXRlT3JkaW5hbC5kYXk7XG5cbiAgcmV0dXJuIF9leHRlbmRzKHtcbiAgICB5ZWFyOiB5ZWFyLFxuICAgIG1vbnRoOiBtb250aCxcbiAgICBkYXk6IGRheVxuICB9LCB0aW1lT2JqZWN0KHdlZWtEYXRhKSk7XG59XG5mdW5jdGlvbiBncmVnb3JpYW5Ub09yZGluYWwoZ3JlZ0RhdGEpIHtcbiAgdmFyIHllYXIgPSBncmVnRGF0YS55ZWFyLFxuICAgICAgbW9udGggPSBncmVnRGF0YS5tb250aCxcbiAgICAgIGRheSA9IGdyZWdEYXRhLmRheTtcbiAgdmFyIG9yZGluYWwgPSBjb21wdXRlT3JkaW5hbCh5ZWFyLCBtb250aCwgZGF5KTtcbiAgcmV0dXJuIF9leHRlbmRzKHtcbiAgICB5ZWFyOiB5ZWFyLFxuICAgIG9yZGluYWw6IG9yZGluYWxcbiAgfSwgdGltZU9iamVjdChncmVnRGF0YSkpO1xufVxuZnVuY3Rpb24gb3JkaW5hbFRvR3JlZ29yaWFuKG9yZGluYWxEYXRhKSB7XG4gIHZhciB5ZWFyID0gb3JkaW5hbERhdGEueWVhcixcbiAgICAgIG9yZGluYWwgPSBvcmRpbmFsRGF0YS5vcmRpbmFsO1xuXG4gIHZhciBfdW5jb21wdXRlT3JkaW5hbDIgPSB1bmNvbXB1dGVPcmRpbmFsKHllYXIsIG9yZGluYWwpLFxuICAgICAgbW9udGggPSBfdW5jb21wdXRlT3JkaW5hbDIubW9udGgsXG4gICAgICBkYXkgPSBfdW5jb21wdXRlT3JkaW5hbDIuZGF5O1xuXG4gIHJldHVybiBfZXh0ZW5kcyh7XG4gICAgeWVhcjogeWVhcixcbiAgICBtb250aDogbW9udGgsXG4gICAgZGF5OiBkYXlcbiAgfSwgdGltZU9iamVjdChvcmRpbmFsRGF0YSkpO1xufVxuZnVuY3Rpb24gaGFzSW52YWxpZFdlZWtEYXRhKG9iaikge1xuICB2YXIgdmFsaWRZZWFyID0gaXNJbnRlZ2VyKG9iai53ZWVrWWVhciksXG4gICAgICB2YWxpZFdlZWsgPSBpbnRlZ2VyQmV0d2VlbihvYmoud2Vla051bWJlciwgMSwgd2Vla3NJbldlZWtZZWFyKG9iai53ZWVrWWVhcikpLFxuICAgICAgdmFsaWRXZWVrZGF5ID0gaW50ZWdlckJldHdlZW4ob2JqLndlZWtkYXksIDEsIDcpO1xuXG4gIGlmICghdmFsaWRZZWFyKSB7XG4gICAgcmV0dXJuIHVuaXRPdXRPZlJhbmdlKFwid2Vla1llYXJcIiwgb2JqLndlZWtZZWFyKTtcbiAgfSBlbHNlIGlmICghdmFsaWRXZWVrKSB7XG4gICAgcmV0dXJuIHVuaXRPdXRPZlJhbmdlKFwid2Vla1wiLCBvYmoud2Vlayk7XG4gIH0gZWxzZSBpZiAoIXZhbGlkV2Vla2RheSkge1xuICAgIHJldHVybiB1bml0T3V0T2ZSYW5nZShcIndlZWtkYXlcIiwgb2JqLndlZWtkYXkpO1xuICB9IGVsc2UgcmV0dXJuIGZhbHNlO1xufVxuZnVuY3Rpb24gaGFzSW52YWxpZE9yZGluYWxEYXRhKG9iaikge1xuICB2YXIgdmFsaWRZZWFyID0gaXNJbnRlZ2VyKG9iai55ZWFyKSxcbiAgICAgIHZhbGlkT3JkaW5hbCA9IGludGVnZXJCZXR3ZWVuKG9iai5vcmRpbmFsLCAxLCBkYXlzSW5ZZWFyKG9iai55ZWFyKSk7XG5cbiAgaWYgKCF2YWxpZFllYXIpIHtcbiAgICByZXR1cm4gdW5pdE91dE9mUmFuZ2UoXCJ5ZWFyXCIsIG9iai55ZWFyKTtcbiAgfSBlbHNlIGlmICghdmFsaWRPcmRpbmFsKSB7XG4gICAgcmV0dXJuIHVuaXRPdXRPZlJhbmdlKFwib3JkaW5hbFwiLCBvYmoub3JkaW5hbCk7XG4gIH0gZWxzZSByZXR1cm4gZmFsc2U7XG59XG5mdW5jdGlvbiBoYXNJbnZhbGlkR3JlZ29yaWFuRGF0YShvYmopIHtcbiAgdmFyIHZhbGlkWWVhciA9IGlzSW50ZWdlcihvYmoueWVhciksXG4gICAgICB2YWxpZE1vbnRoID0gaW50ZWdlckJldHdlZW4ob2JqLm1vbnRoLCAxLCAxMiksXG4gICAgICB2YWxpZERheSA9IGludGVnZXJCZXR3ZWVuKG9iai5kYXksIDEsIGRheXNJbk1vbnRoKG9iai55ZWFyLCBvYmoubW9udGgpKTtcblxuICBpZiAoIXZhbGlkWWVhcikge1xuICAgIHJldHVybiB1bml0T3V0T2ZSYW5nZShcInllYXJcIiwgb2JqLnllYXIpO1xuICB9IGVsc2UgaWYgKCF2YWxpZE1vbnRoKSB7XG4gICAgcmV0dXJuIHVuaXRPdXRPZlJhbmdlKFwibW9udGhcIiwgb2JqLm1vbnRoKTtcbiAgfSBlbHNlIGlmICghdmFsaWREYXkpIHtcbiAgICByZXR1cm4gdW5pdE91dE9mUmFuZ2UoXCJkYXlcIiwgb2JqLmRheSk7XG4gIH0gZWxzZSByZXR1cm4gZmFsc2U7XG59XG5mdW5jdGlvbiBoYXNJbnZhbGlkVGltZURhdGEob2JqKSB7XG4gIHZhciBob3VyID0gb2JqLmhvdXIsXG4gICAgICBtaW51dGUgPSBvYmoubWludXRlLFxuICAgICAgc2Vjb25kID0gb2JqLnNlY29uZCxcbiAgICAgIG1pbGxpc2Vjb25kID0gb2JqLm1pbGxpc2Vjb25kO1xuICB2YXIgdmFsaWRIb3VyID0gaW50ZWdlckJldHdlZW4oaG91ciwgMCwgMjMpIHx8IGhvdXIgPT09IDI0ICYmIG1pbnV0ZSA9PT0gMCAmJiBzZWNvbmQgPT09IDAgJiYgbWlsbGlzZWNvbmQgPT09IDAsXG4gICAgICB2YWxpZE1pbnV0ZSA9IGludGVnZXJCZXR3ZWVuKG1pbnV0ZSwgMCwgNTkpLFxuICAgICAgdmFsaWRTZWNvbmQgPSBpbnRlZ2VyQmV0d2VlbihzZWNvbmQsIDAsIDU5KSxcbiAgICAgIHZhbGlkTWlsbGlzZWNvbmQgPSBpbnRlZ2VyQmV0d2VlbihtaWxsaXNlY29uZCwgMCwgOTk5KTtcblxuICBpZiAoIXZhbGlkSG91cikge1xuICAgIHJldHVybiB1bml0T3V0T2ZSYW5nZShcImhvdXJcIiwgaG91cik7XG4gIH0gZWxzZSBpZiAoIXZhbGlkTWludXRlKSB7XG4gICAgcmV0dXJuIHVuaXRPdXRPZlJhbmdlKFwibWludXRlXCIsIG1pbnV0ZSk7XG4gIH0gZWxzZSBpZiAoIXZhbGlkU2Vjb25kKSB7XG4gICAgcmV0dXJuIHVuaXRPdXRPZlJhbmdlKFwic2Vjb25kXCIsIHNlY29uZCk7XG4gIH0gZWxzZSBpZiAoIXZhbGlkTWlsbGlzZWNvbmQpIHtcbiAgICByZXR1cm4gdW5pdE91dE9mUmFuZ2UoXCJtaWxsaXNlY29uZFwiLCBtaWxsaXNlY29uZCk7XG4gIH0gZWxzZSByZXR1cm4gZmFsc2U7XG59XG5cbnZhciBJTlZBTElEID0gXCJJbnZhbGlkIERhdGVUaW1lXCI7XG52YXIgTUFYX0RBVEUgPSA4LjY0ZTE1O1xuXG5mdW5jdGlvbiB1bnN1cHBvcnRlZFpvbmUoem9uZSkge1xuICByZXR1cm4gbmV3IEludmFsaWQoXCJ1bnN1cHBvcnRlZCB6b25lXCIsIFwidGhlIHpvbmUgXFxcIlwiICsgem9uZS5uYW1lICsgXCJcXFwiIGlzIG5vdCBzdXBwb3J0ZWRcIik7XG59IC8vIHdlIGNhY2hlIHdlZWsgZGF0YSBvbiB0aGUgRFQgb2JqZWN0IGFuZCB0aGlzIGludGVybWVkaWF0ZXMgdGhlIGNhY2hlXG5cblxuZnVuY3Rpb24gcG9zc2libHlDYWNoZWRXZWVrRGF0YShkdCkge1xuICBpZiAoZHQud2Vla0RhdGEgPT09IG51bGwpIHtcbiAgICBkdC53ZWVrRGF0YSA9IGdyZWdvcmlhblRvV2VlayhkdC5jKTtcbiAgfVxuXG4gIHJldHVybiBkdC53ZWVrRGF0YTtcbn0gLy8gY2xvbmUgcmVhbGx5IG1lYW5zLCBcIm1ha2UgYSBuZXcgb2JqZWN0IHdpdGggdGhlc2UgbW9kaWZpY2F0aW9uc1wiLiBhbGwgXCJzZXR0ZXJzXCIgcmVhbGx5IHVzZSB0aGlzXG4vLyB0byBjcmVhdGUgYSBuZXcgb2JqZWN0IHdoaWxlIG9ubHkgY2hhbmdpbmcgc29tZSBvZiB0aGUgcHJvcGVydGllc1xuXG5cbmZ1bmN0aW9uIGNsb25lKGluc3QsIGFsdHMpIHtcbiAgdmFyIGN1cnJlbnQgPSB7XG4gICAgdHM6IGluc3QudHMsXG4gICAgem9uZTogaW5zdC56b25lLFxuICAgIGM6IGluc3QuYyxcbiAgICBvOiBpbnN0Lm8sXG4gICAgbG9jOiBpbnN0LmxvYyxcbiAgICBpbnZhbGlkOiBpbnN0LmludmFsaWRcbiAgfTtcbiAgcmV0dXJuIG5ldyBEYXRlVGltZShfZXh0ZW5kcyh7fSwgY3VycmVudCwgYWx0cywge1xuICAgIG9sZDogY3VycmVudFxuICB9KSk7XG59IC8vIGZpbmQgdGhlIHJpZ2h0IG9mZnNldCBhIGdpdmVuIGxvY2FsIHRpbWUuIFRoZSBvIGlucHV0IGlzIG91ciBndWVzcywgd2hpY2ggZGV0ZXJtaW5lcyB3aGljaFxuLy8gb2Zmc2V0IHdlJ2xsIHBpY2sgaW4gYW1iaWd1b3VzIGNhc2VzIChlLmcuIHRoZXJlIGFyZSB0d28gMyBBTXMgYi9jIEZhbGxiYWNrIERTVClcblxuXG5mdW5jdGlvbiBmaXhPZmZzZXQobG9jYWxUUywgbywgdHopIHtcbiAgLy8gT3VyIFVUQyB0aW1lIGlzIGp1c3QgYSBndWVzcyBiZWNhdXNlIG91ciBvZmZzZXQgaXMganVzdCBhIGd1ZXNzXG4gIHZhciB1dGNHdWVzcyA9IGxvY2FsVFMgLSBvICogNjAgKiAxMDAwOyAvLyBUZXN0IHdoZXRoZXIgdGhlIHpvbmUgbWF0Y2hlcyB0aGUgb2Zmc2V0IGZvciB0aGlzIHRzXG5cbiAgdmFyIG8yID0gdHoub2Zmc2V0KHV0Y0d1ZXNzKTsgLy8gSWYgc28sIG9mZnNldCBkaWRuJ3QgY2hhbmdlIGFuZCB3ZSdyZSBkb25lXG5cbiAgaWYgKG8gPT09IG8yKSB7XG4gICAgcmV0dXJuIFt1dGNHdWVzcywgb107XG4gIH0gLy8gSWYgbm90LCBjaGFuZ2UgdGhlIHRzIGJ5IHRoZSBkaWZmZXJlbmNlIGluIHRoZSBvZmZzZXRcblxuXG4gIHV0Y0d1ZXNzIC09IChvMiAtIG8pICogNjAgKiAxMDAwOyAvLyBJZiB0aGF0IGdpdmVzIHVzIHRoZSBsb2NhbCB0aW1lIHdlIHdhbnQsIHdlJ3JlIGRvbmVcblxuICB2YXIgbzMgPSB0ei5vZmZzZXQodXRjR3Vlc3MpO1xuXG4gIGlmIChvMiA9PT0gbzMpIHtcbiAgICByZXR1cm4gW3V0Y0d1ZXNzLCBvMl07XG4gIH0gLy8gSWYgaXQncyBkaWZmZXJlbnQsIHdlJ3JlIGluIGEgaG9sZSB0aW1lLiBUaGUgb2Zmc2V0IGhhcyBjaGFuZ2VkLCBidXQgdGhlIHdlIGRvbid0IGFkanVzdCB0aGUgdGltZVxuXG5cbiAgcmV0dXJuIFtsb2NhbFRTIC0gTWF0aC5taW4obzIsIG8zKSAqIDYwICogMTAwMCwgTWF0aC5tYXgobzIsIG8zKV07XG59IC8vIGNvbnZlcnQgYW4gZXBvY2ggdGltZXN0YW1wIGludG8gYSBjYWxlbmRhciBvYmplY3Qgd2l0aCB0aGUgZ2l2ZW4gb2Zmc2V0XG5cblxuZnVuY3Rpb24gdHNUb09iaih0cywgb2Zmc2V0KSB7XG4gIHRzICs9IG9mZnNldCAqIDYwICogMTAwMDtcbiAgdmFyIGQgPSBuZXcgRGF0ZSh0cyk7XG4gIHJldHVybiB7XG4gICAgeWVhcjogZC5nZXRVVENGdWxsWWVhcigpLFxuICAgIG1vbnRoOiBkLmdldFVUQ01vbnRoKCkgKyAxLFxuICAgIGRheTogZC5nZXRVVENEYXRlKCksXG4gICAgaG91cjogZC5nZXRVVENIb3VycygpLFxuICAgIG1pbnV0ZTogZC5nZXRVVENNaW51dGVzKCksXG4gICAgc2Vjb25kOiBkLmdldFVUQ1NlY29uZHMoKSxcbiAgICBtaWxsaXNlY29uZDogZC5nZXRVVENNaWxsaXNlY29uZHMoKVxuICB9O1xufSAvLyBjb252ZXJ0IGEgY2FsZW5kYXIgb2JqZWN0IHRvIGEgZXBvY2ggdGltZXN0YW1wXG5cblxuZnVuY3Rpb24gb2JqVG9UUyhvYmosIG9mZnNldCwgem9uZSkge1xuICByZXR1cm4gZml4T2Zmc2V0KG9ialRvTG9jYWxUUyhvYmopLCBvZmZzZXQsIHpvbmUpO1xufSAvLyBjcmVhdGUgYSBuZXcgRFQgaW5zdGFuY2UgYnkgYWRkaW5nIGEgZHVyYXRpb24sIGFkanVzdGluZyBmb3IgRFNUc1xuXG5cbmZ1bmN0aW9uIGFkanVzdFRpbWUoaW5zdCwgZHVyKSB7XG4gIHZhciBvUHJlID0gaW5zdC5vLFxuICAgICAgeWVhciA9IGluc3QuYy55ZWFyICsgTWF0aC50cnVuYyhkdXIueWVhcnMpLFxuICAgICAgbW9udGggPSBpbnN0LmMubW9udGggKyBNYXRoLnRydW5jKGR1ci5tb250aHMpICsgTWF0aC50cnVuYyhkdXIucXVhcnRlcnMpICogMyxcbiAgICAgIGMgPSBfZXh0ZW5kcyh7fSwgaW5zdC5jLCB7XG4gICAgeWVhcjogeWVhcixcbiAgICBtb250aDogbW9udGgsXG4gICAgZGF5OiBNYXRoLm1pbihpbnN0LmMuZGF5LCBkYXlzSW5Nb250aCh5ZWFyLCBtb250aCkpICsgTWF0aC50cnVuYyhkdXIuZGF5cykgKyBNYXRoLnRydW5jKGR1ci53ZWVrcykgKiA3XG4gIH0pLFxuICAgICAgbWlsbGlzVG9BZGQgPSBEdXJhdGlvbi5mcm9tT2JqZWN0KHtcbiAgICB5ZWFyczogZHVyLnllYXJzIC0gTWF0aC50cnVuYyhkdXIueWVhcnMpLFxuICAgIHF1YXJ0ZXJzOiBkdXIucXVhcnRlcnMgLSBNYXRoLnRydW5jKGR1ci5xdWFydGVycyksXG4gICAgbW9udGhzOiBkdXIubW9udGhzIC0gTWF0aC50cnVuYyhkdXIubW9udGhzKSxcbiAgICB3ZWVrczogZHVyLndlZWtzIC0gTWF0aC50cnVuYyhkdXIud2Vla3MpLFxuICAgIGRheXM6IGR1ci5kYXlzIC0gTWF0aC50cnVuYyhkdXIuZGF5cyksXG4gICAgaG91cnM6IGR1ci5ob3VycyxcbiAgICBtaW51dGVzOiBkdXIubWludXRlcyxcbiAgICBzZWNvbmRzOiBkdXIuc2Vjb25kcyxcbiAgICBtaWxsaXNlY29uZHM6IGR1ci5taWxsaXNlY29uZHNcbiAgfSkuYXMoXCJtaWxsaXNlY29uZHNcIiksXG4gICAgICBsb2NhbFRTID0gb2JqVG9Mb2NhbFRTKGMpO1xuXG4gIHZhciBfZml4T2Zmc2V0ID0gZml4T2Zmc2V0KGxvY2FsVFMsIG9QcmUsIGluc3Quem9uZSksXG4gICAgICB0cyA9IF9maXhPZmZzZXRbMF0sXG4gICAgICBvID0gX2ZpeE9mZnNldFsxXTtcblxuICBpZiAobWlsbGlzVG9BZGQgIT09IDApIHtcbiAgICB0cyArPSBtaWxsaXNUb0FkZDsgLy8gdGhhdCBjb3VsZCBoYXZlIGNoYW5nZWQgdGhlIG9mZnNldCBieSBnb2luZyBvdmVyIGEgRFNULCBidXQgd2Ugd2FudCB0byBrZWVwIHRoZSB0cyB0aGUgc2FtZVxuXG4gICAgbyA9IGluc3Quem9uZS5vZmZzZXQodHMpO1xuICB9XG5cbiAgcmV0dXJuIHtcbiAgICB0czogdHMsXG4gICAgbzogb1xuICB9O1xufSAvLyBoZWxwZXIgdXNlZnVsIGluIHR1cm5pbmcgdGhlIHJlc3VsdHMgb2YgcGFyc2luZyBpbnRvIHJlYWwgZGF0ZXNcbi8vIGJ5IGhhbmRsaW5nIHRoZSB6b25lIG9wdGlvbnNcblxuXG5mdW5jdGlvbiBwYXJzZURhdGFUb0RhdGVUaW1lKHBhcnNlZCwgcGFyc2VkWm9uZSwgb3B0cywgZm9ybWF0LCB0ZXh0LCBzcGVjaWZpY09mZnNldCkge1xuICB2YXIgc2V0Wm9uZSA9IG9wdHMuc2V0Wm9uZSxcbiAgICAgIHpvbmUgPSBvcHRzLnpvbmU7XG5cbiAgaWYgKHBhcnNlZCAmJiBPYmplY3Qua2V5cyhwYXJzZWQpLmxlbmd0aCAhPT0gMCkge1xuICAgIHZhciBpbnRlcnByZXRhdGlvblpvbmUgPSBwYXJzZWRab25lIHx8IHpvbmUsXG4gICAgICAgIGluc3QgPSBEYXRlVGltZS5mcm9tT2JqZWN0KHBhcnNlZCwgX2V4dGVuZHMoe30sIG9wdHMsIHtcbiAgICAgIHpvbmU6IGludGVycHJldGF0aW9uWm9uZSxcbiAgICAgIHNwZWNpZmljT2Zmc2V0OiBzcGVjaWZpY09mZnNldFxuICAgIH0pKTtcbiAgICByZXR1cm4gc2V0Wm9uZSA/IGluc3QgOiBpbnN0LnNldFpvbmUoem9uZSk7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIERhdGVUaW1lLmludmFsaWQobmV3IEludmFsaWQoXCJ1bnBhcnNhYmxlXCIsIFwidGhlIGlucHV0IFxcXCJcIiArIHRleHQgKyBcIlxcXCIgY2FuJ3QgYmUgcGFyc2VkIGFzIFwiICsgZm9ybWF0KSk7XG4gIH1cbn0gLy8gaWYgeW91IHdhbnQgdG8gb3V0cHV0IGEgdGVjaG5pY2FsIGZvcm1hdCAoZS5nLiBSRkMgMjgyMiksIHRoaXMgaGVscGVyXG4vLyBoZWxwcyBoYW5kbGUgdGhlIGRldGFpbHNcblxuXG5mdW5jdGlvbiB0b1RlY2hGb3JtYXQoZHQsIGZvcm1hdCwgYWxsb3daKSB7XG4gIGlmIChhbGxvd1ogPT09IHZvaWQgMCkge1xuICAgIGFsbG93WiA9IHRydWU7XG4gIH1cblxuICByZXR1cm4gZHQuaXNWYWxpZCA/IEZvcm1hdHRlci5jcmVhdGUoTG9jYWxlLmNyZWF0ZShcImVuLVVTXCIpLCB7XG4gICAgYWxsb3daOiBhbGxvd1osXG4gICAgZm9yY2VTaW1wbGU6IHRydWVcbiAgfSkuZm9ybWF0RGF0ZVRpbWVGcm9tU3RyaW5nKGR0LCBmb3JtYXQpIDogbnVsbDtcbn1cblxuZnVuY3Rpb24gX3RvSVNPRGF0ZShvLCBleHRlbmRlZCkge1xuICB2YXIgbG9uZ0Zvcm1hdCA9IG8uYy55ZWFyID4gOTk5OSB8fCBvLmMueWVhciA8IDA7XG4gIHZhciBjID0gXCJcIjtcbiAgaWYgKGxvbmdGb3JtYXQgJiYgby5jLnllYXIgPj0gMCkgYyArPSBcIitcIjtcbiAgYyArPSBwYWRTdGFydChvLmMueWVhciwgbG9uZ0Zvcm1hdCA/IDYgOiA0KTtcblxuICBpZiAoZXh0ZW5kZWQpIHtcbiAgICBjICs9IFwiLVwiO1xuICAgIGMgKz0gcGFkU3RhcnQoby5jLm1vbnRoKTtcbiAgICBjICs9IFwiLVwiO1xuICAgIGMgKz0gcGFkU3RhcnQoby5jLmRheSk7XG4gIH0gZWxzZSB7XG4gICAgYyArPSBwYWRTdGFydChvLmMubW9udGgpO1xuICAgIGMgKz0gcGFkU3RhcnQoby5jLmRheSk7XG4gIH1cblxuICByZXR1cm4gYztcbn1cblxuZnVuY3Rpb24gX3RvSVNPVGltZShvLCBleHRlbmRlZCwgc3VwcHJlc3NTZWNvbmRzLCBzdXBwcmVzc01pbGxpc2Vjb25kcywgaW5jbHVkZU9mZnNldCkge1xuICB2YXIgYyA9IHBhZFN0YXJ0KG8uYy5ob3VyKTtcblxuICBpZiAoZXh0ZW5kZWQpIHtcbiAgICBjICs9IFwiOlwiO1xuICAgIGMgKz0gcGFkU3RhcnQoby5jLm1pbnV0ZSk7XG5cbiAgICBpZiAoby5jLnNlY29uZCAhPT0gMCB8fCAhc3VwcHJlc3NTZWNvbmRzKSB7XG4gICAgICBjICs9IFwiOlwiO1xuICAgIH1cbiAgfSBlbHNlIHtcbiAgICBjICs9IHBhZFN0YXJ0KG8uYy5taW51dGUpO1xuICB9XG5cbiAgaWYgKG8uYy5zZWNvbmQgIT09IDAgfHwgIXN1cHByZXNzU2Vjb25kcykge1xuICAgIGMgKz0gcGFkU3RhcnQoby5jLnNlY29uZCk7XG5cbiAgICBpZiAoby5jLm1pbGxpc2Vjb25kICE9PSAwIHx8ICFzdXBwcmVzc01pbGxpc2Vjb25kcykge1xuICAgICAgYyArPSBcIi5cIjtcbiAgICAgIGMgKz0gcGFkU3RhcnQoby5jLm1pbGxpc2Vjb25kLCAzKTtcbiAgICB9XG4gIH1cblxuICBpZiAoaW5jbHVkZU9mZnNldCkge1xuICAgIGlmIChvLmlzT2Zmc2V0Rml4ZWQgJiYgby5vZmZzZXQgPT09IDApIHtcbiAgICAgIGMgKz0gXCJaXCI7XG4gICAgfSBlbHNlIGlmIChvLm8gPCAwKSB7XG4gICAgICBjICs9IFwiLVwiO1xuICAgICAgYyArPSBwYWRTdGFydChNYXRoLnRydW5jKC1vLm8gLyA2MCkpO1xuICAgICAgYyArPSBcIjpcIjtcbiAgICAgIGMgKz0gcGFkU3RhcnQoTWF0aC50cnVuYygtby5vICUgNjApKTtcbiAgICB9IGVsc2Uge1xuICAgICAgYyArPSBcIitcIjtcbiAgICAgIGMgKz0gcGFkU3RhcnQoTWF0aC50cnVuYyhvLm8gLyA2MCkpO1xuICAgICAgYyArPSBcIjpcIjtcbiAgICAgIGMgKz0gcGFkU3RhcnQoTWF0aC50cnVuYyhvLm8gJSA2MCkpO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiBjO1xufSAvLyBkZWZhdWx0cyBmb3IgdW5zcGVjaWZpZWQgdW5pdHMgaW4gdGhlIHN1cHBvcnRlZCBjYWxlbmRhcnNcblxuXG52YXIgZGVmYXVsdFVuaXRWYWx1ZXMgPSB7XG4gIG1vbnRoOiAxLFxuICBkYXk6IDEsXG4gIGhvdXI6IDAsXG4gIG1pbnV0ZTogMCxcbiAgc2Vjb25kOiAwLFxuICBtaWxsaXNlY29uZDogMFxufSxcbiAgICBkZWZhdWx0V2Vla1VuaXRWYWx1ZXMgPSB7XG4gIHdlZWtOdW1iZXI6IDEsXG4gIHdlZWtkYXk6IDEsXG4gIGhvdXI6IDAsXG4gIG1pbnV0ZTogMCxcbiAgc2Vjb25kOiAwLFxuICBtaWxsaXNlY29uZDogMFxufSxcbiAgICBkZWZhdWx0T3JkaW5hbFVuaXRWYWx1ZXMgPSB7XG4gIG9yZGluYWw6IDEsXG4gIGhvdXI6IDAsXG4gIG1pbnV0ZTogMCxcbiAgc2Vjb25kOiAwLFxuICBtaWxsaXNlY29uZDogMFxufTsgLy8gVW5pdHMgaW4gdGhlIHN1cHBvcnRlZCBjYWxlbmRhcnMsIHNvcnRlZCBieSBiaWduZXNzXG5cbnZhciBvcmRlcmVkVW5pdHMgPSBbXCJ5ZWFyXCIsIFwibW9udGhcIiwgXCJkYXlcIiwgXCJob3VyXCIsIFwibWludXRlXCIsIFwic2Vjb25kXCIsIFwibWlsbGlzZWNvbmRcIl0sXG4gICAgb3JkZXJlZFdlZWtVbml0cyA9IFtcIndlZWtZZWFyXCIsIFwid2Vla051bWJlclwiLCBcIndlZWtkYXlcIiwgXCJob3VyXCIsIFwibWludXRlXCIsIFwic2Vjb25kXCIsIFwibWlsbGlzZWNvbmRcIl0sXG4gICAgb3JkZXJlZE9yZGluYWxVbml0cyA9IFtcInllYXJcIiwgXCJvcmRpbmFsXCIsIFwiaG91clwiLCBcIm1pbnV0ZVwiLCBcInNlY29uZFwiLCBcIm1pbGxpc2Vjb25kXCJdOyAvLyBzdGFuZGFyZGl6ZSBjYXNlIGFuZCBwbHVyYWxpdHkgaW4gdW5pdHNcblxuZnVuY3Rpb24gbm9ybWFsaXplVW5pdCh1bml0KSB7XG4gIHZhciBub3JtYWxpemVkID0ge1xuICAgIHllYXI6IFwieWVhclwiLFxuICAgIHllYXJzOiBcInllYXJcIixcbiAgICBtb250aDogXCJtb250aFwiLFxuICAgIG1vbnRoczogXCJtb250aFwiLFxuICAgIGRheTogXCJkYXlcIixcbiAgICBkYXlzOiBcImRheVwiLFxuICAgIGhvdXI6IFwiaG91clwiLFxuICAgIGhvdXJzOiBcImhvdXJcIixcbiAgICBtaW51dGU6IFwibWludXRlXCIsXG4gICAgbWludXRlczogXCJtaW51dGVcIixcbiAgICBxdWFydGVyOiBcInF1YXJ0ZXJcIixcbiAgICBxdWFydGVyczogXCJxdWFydGVyXCIsXG4gICAgc2Vjb25kOiBcInNlY29uZFwiLFxuICAgIHNlY29uZHM6IFwic2Vjb25kXCIsXG4gICAgbWlsbGlzZWNvbmQ6IFwibWlsbGlzZWNvbmRcIixcbiAgICBtaWxsaXNlY29uZHM6IFwibWlsbGlzZWNvbmRcIixcbiAgICB3ZWVrZGF5OiBcIndlZWtkYXlcIixcbiAgICB3ZWVrZGF5czogXCJ3ZWVrZGF5XCIsXG4gICAgd2Vla251bWJlcjogXCJ3ZWVrTnVtYmVyXCIsXG4gICAgd2Vla3NudW1iZXI6IFwid2Vla051bWJlclwiLFxuICAgIHdlZWtudW1iZXJzOiBcIndlZWtOdW1iZXJcIixcbiAgICB3ZWVreWVhcjogXCJ3ZWVrWWVhclwiLFxuICAgIHdlZWt5ZWFyczogXCJ3ZWVrWWVhclwiLFxuICAgIG9yZGluYWw6IFwib3JkaW5hbFwiXG4gIH1bdW5pdC50b0xvd2VyQ2FzZSgpXTtcbiAgaWYgKCFub3JtYWxpemVkKSB0aHJvdyBuZXcgSW52YWxpZFVuaXRFcnJvcih1bml0KTtcbiAgcmV0dXJuIG5vcm1hbGl6ZWQ7XG59IC8vIHRoaXMgaXMgYSBkdW1iZWQgZG93biB2ZXJzaW9uIG9mIGZyb21PYmplY3QoKSB0aGF0IHJ1bnMgYWJvdXQgNjAlIGZhc3RlclxuLy8gYnV0IGRvZXNuJ3QgZG8gYW55IHZhbGlkYXRpb24sIG1ha2VzIGEgYnVuY2ggb2YgYXNzdW1wdGlvbnMgYWJvdXQgd2hhdCB1bml0c1xuLy8gYXJlIHByZXNlbnQsIGFuZCBzbyBvbi5cbi8vIHRoaXMgaXMgYSBkdW1iZWQgZG93biB2ZXJzaW9uIG9mIGZyb21PYmplY3QoKSB0aGF0IHJ1bnMgYWJvdXQgNjAlIGZhc3RlclxuLy8gYnV0IGRvZXNuJ3QgZG8gYW55IHZhbGlkYXRpb24sIG1ha2VzIGEgYnVuY2ggb2YgYXNzdW1wdGlvbnMgYWJvdXQgd2hhdCB1bml0c1xuLy8gYXJlIHByZXNlbnQsIGFuZCBzbyBvbi5cblxuXG5mdW5jdGlvbiBxdWlja0RUKG9iaiwgb3B0cykge1xuICB2YXIgem9uZSA9IG5vcm1hbGl6ZVpvbmUob3B0cy56b25lLCBTZXR0aW5ncy5kZWZhdWx0Wm9uZSksXG4gICAgICBsb2MgPSBMb2NhbGUuZnJvbU9iamVjdChvcHRzKSxcbiAgICAgIHRzTm93ID0gU2V0dGluZ3Mubm93KCk7XG4gIHZhciB0cywgbzsgLy8gYXNzdW1lIHdlIGhhdmUgdGhlIGhpZ2hlci1vcmRlciB1bml0c1xuXG4gIGlmICghaXNVbmRlZmluZWQob2JqLnllYXIpKSB7XG4gICAgZm9yICh2YXIgX2l0ZXJhdG9yID0gX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXJMb29zZShvcmRlcmVkVW5pdHMpLCBfc3RlcDsgIShfc3RlcCA9IF9pdGVyYXRvcigpKS5kb25lOykge1xuICAgICAgdmFyIHUgPSBfc3RlcC52YWx1ZTtcblxuICAgICAgaWYgKGlzVW5kZWZpbmVkKG9ialt1XSkpIHtcbiAgICAgICAgb2JqW3VdID0gZGVmYXVsdFVuaXRWYWx1ZXNbdV07XG4gICAgICB9XG4gICAgfVxuXG4gICAgdmFyIGludmFsaWQgPSBoYXNJbnZhbGlkR3JlZ29yaWFuRGF0YShvYmopIHx8IGhhc0ludmFsaWRUaW1lRGF0YShvYmopO1xuXG4gICAgaWYgKGludmFsaWQpIHtcbiAgICAgIHJldHVybiBEYXRlVGltZS5pbnZhbGlkKGludmFsaWQpO1xuICAgIH1cblxuICAgIHZhciBvZmZzZXRQcm92aXMgPSB6b25lLm9mZnNldCh0c05vdyk7XG5cbiAgICB2YXIgX29ialRvVFMgPSBvYmpUb1RTKG9iaiwgb2Zmc2V0UHJvdmlzLCB6b25lKTtcblxuICAgIHRzID0gX29ialRvVFNbMF07XG4gICAgbyA9IF9vYmpUb1RTWzFdO1xuICB9IGVsc2Uge1xuICAgIHRzID0gdHNOb3c7XG4gIH1cblxuICByZXR1cm4gbmV3IERhdGVUaW1lKHtcbiAgICB0czogdHMsXG4gICAgem9uZTogem9uZSxcbiAgICBsb2M6IGxvYyxcbiAgICBvOiBvXG4gIH0pO1xufVxuXG5mdW5jdGlvbiBkaWZmUmVsYXRpdmUoc3RhcnQsIGVuZCwgb3B0cykge1xuICB2YXIgcm91bmQgPSBpc1VuZGVmaW5lZChvcHRzLnJvdW5kKSA/IHRydWUgOiBvcHRzLnJvdW5kLFxuICAgICAgZm9ybWF0ID0gZnVuY3Rpb24gZm9ybWF0KGMsIHVuaXQpIHtcbiAgICBjID0gcm91bmRUbyhjLCByb3VuZCB8fCBvcHRzLmNhbGVuZGFyeSA/IDAgOiAyLCB0cnVlKTtcbiAgICB2YXIgZm9ybWF0dGVyID0gZW5kLmxvYy5jbG9uZShvcHRzKS5yZWxGb3JtYXR0ZXIob3B0cyk7XG4gICAgcmV0dXJuIGZvcm1hdHRlci5mb3JtYXQoYywgdW5pdCk7XG4gIH0sXG4gICAgICBkaWZmZXIgPSBmdW5jdGlvbiBkaWZmZXIodW5pdCkge1xuICAgIGlmIChvcHRzLmNhbGVuZGFyeSkge1xuICAgICAgaWYgKCFlbmQuaGFzU2FtZShzdGFydCwgdW5pdCkpIHtcbiAgICAgICAgcmV0dXJuIGVuZC5zdGFydE9mKHVuaXQpLmRpZmYoc3RhcnQuc3RhcnRPZih1bml0KSwgdW5pdCkuZ2V0KHVuaXQpO1xuICAgICAgfSBlbHNlIHJldHVybiAwO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gZW5kLmRpZmYoc3RhcnQsIHVuaXQpLmdldCh1bml0KTtcbiAgICB9XG4gIH07XG5cbiAgaWYgKG9wdHMudW5pdCkge1xuICAgIHJldHVybiBmb3JtYXQoZGlmZmVyKG9wdHMudW5pdCksIG9wdHMudW5pdCk7XG4gIH1cblxuICBmb3IgKHZhciBfaXRlcmF0b3IyID0gX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXJMb29zZShvcHRzLnVuaXRzKSwgX3N0ZXAyOyAhKF9zdGVwMiA9IF9pdGVyYXRvcjIoKSkuZG9uZTspIHtcbiAgICB2YXIgdW5pdCA9IF9zdGVwMi52YWx1ZTtcbiAgICB2YXIgY291bnQgPSBkaWZmZXIodW5pdCk7XG5cbiAgICBpZiAoTWF0aC5hYnMoY291bnQpID49IDEpIHtcbiAgICAgIHJldHVybiBmb3JtYXQoY291bnQsIHVuaXQpO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiBmb3JtYXQoc3RhcnQgPiBlbmQgPyAtMCA6IDAsIG9wdHMudW5pdHNbb3B0cy51bml0cy5sZW5ndGggLSAxXSk7XG59XG5cbmZ1bmN0aW9uIGxhc3RPcHRzKGFyZ0xpc3QpIHtcbiAgdmFyIG9wdHMgPSB7fSxcbiAgICAgIGFyZ3M7XG5cbiAgaWYgKGFyZ0xpc3QubGVuZ3RoID4gMCAmJiB0eXBlb2YgYXJnTGlzdFthcmdMaXN0Lmxlbmd0aCAtIDFdID09PSBcIm9iamVjdFwiKSB7XG4gICAgb3B0cyA9IGFyZ0xpc3RbYXJnTGlzdC5sZW5ndGggLSAxXTtcbiAgICBhcmdzID0gQXJyYXkuZnJvbShhcmdMaXN0KS5zbGljZSgwLCBhcmdMaXN0Lmxlbmd0aCAtIDEpO1xuICB9IGVsc2Uge1xuICAgIGFyZ3MgPSBBcnJheS5mcm9tKGFyZ0xpc3QpO1xuICB9XG5cbiAgcmV0dXJuIFtvcHRzLCBhcmdzXTtcbn1cbi8qKlxuICogQSBEYXRlVGltZSBpcyBhbiBpbW11dGFibGUgZGF0YSBzdHJ1Y3R1cmUgcmVwcmVzZW50aW5nIGEgc3BlY2lmaWMgZGF0ZSBhbmQgdGltZSBhbmQgYWNjb21wYW55aW5nIG1ldGhvZHMuIEl0IGNvbnRhaW5zIGNsYXNzIGFuZCBpbnN0YW5jZSBtZXRob2RzIGZvciBjcmVhdGluZywgcGFyc2luZywgaW50ZXJyb2dhdGluZywgdHJhbnNmb3JtaW5nLCBhbmQgZm9ybWF0dGluZyB0aGVtLlxuICpcbiAqIEEgRGF0ZVRpbWUgY29tcHJpc2VzIG9mOlxuICogKiBBIHRpbWVzdGFtcC4gRWFjaCBEYXRlVGltZSBpbnN0YW5jZSByZWZlcnMgdG8gYSBzcGVjaWZpYyBtaWxsaXNlY29uZCBvZiB0aGUgVW5peCBlcG9jaC5cbiAqICogQSB0aW1lIHpvbmUuIEVhY2ggaW5zdGFuY2UgaXMgY29uc2lkZXJlZCBpbiB0aGUgY29udGV4dCBvZiBhIHNwZWNpZmljIHpvbmUgKGJ5IGRlZmF1bHQgdGhlIGxvY2FsIHN5c3RlbSdzIHpvbmUpLlxuICogKiBDb25maWd1cmF0aW9uIHByb3BlcnRpZXMgdGhhdCBlZmZlY3QgaG93IG91dHB1dCBzdHJpbmdzIGFyZSBmb3JtYXR0ZWQsIHN1Y2ggYXMgYGxvY2FsZWAsIGBudW1iZXJpbmdTeXN0ZW1gLCBhbmQgYG91dHB1dENhbGVuZGFyYC5cbiAqXG4gKiBIZXJlIGlzIGEgYnJpZWYgb3ZlcnZpZXcgb2YgdGhlIG1vc3QgY29tbW9ubHkgdXNlZCBmdW5jdGlvbmFsaXR5IGl0IHByb3ZpZGVzOlxuICpcbiAqICogKipDcmVhdGlvbioqOiBUbyBjcmVhdGUgYSBEYXRlVGltZSBmcm9tIGl0cyBjb21wb25lbnRzLCB1c2Ugb25lIG9mIGl0cyBmYWN0b3J5IGNsYXNzIG1ldGhvZHM6IHtAbGluayBEYXRlVGltZSNsb2NhbH0sIHtAbGluayBEYXRlVGltZSN1dGN9LCBhbmQgKG1vc3QgZmxleGlibHkpIHtAbGluayBEYXRlVGltZSNmcm9tT2JqZWN0fS4gVG8gY3JlYXRlIG9uZSBmcm9tIGEgc3RhbmRhcmQgc3RyaW5nIGZvcm1hdCwgdXNlIHtAbGluayBEYXRlVGltZSNmcm9tSVNPfSwge0BsaW5rIERhdGVUaW1lI2Zyb21IVFRQfSwgYW5kIHtAbGluayBEYXRlVGltZSNmcm9tUkZDMjgyMn0uIFRvIGNyZWF0ZSBvbmUgZnJvbSBhIGN1c3RvbSBzdHJpbmcgZm9ybWF0LCB1c2Uge0BsaW5rIERhdGVUaW1lI2Zyb21Gb3JtYXR9LiBUbyBjcmVhdGUgb25lIGZyb20gYSBuYXRpdmUgSlMgZGF0ZSwgdXNlIHtAbGluayBEYXRlVGltZSNmcm9tSlNEYXRlfS5cbiAqICogKipHcmVnb3JpYW4gY2FsZW5kYXIgYW5kIHRpbWUqKjogVG8gZXhhbWluZSB0aGUgR3JlZ29yaWFuIHByb3BlcnRpZXMgb2YgYSBEYXRlVGltZSBpbmRpdmlkdWFsbHkgKGkuZSBhcyBvcHBvc2VkIHRvIGNvbGxlY3RpdmVseSB0aHJvdWdoIHtAbGluayBEYXRlVGltZSN0b09iamVjdH0pLCB1c2UgdGhlIHtAbGluayBEYXRlVGltZSN5ZWFyfSwge0BsaW5rIERhdGVUaW1lI21vbnRofSxcbiAqIHtAbGluayBEYXRlVGltZSNkYXl9LCB7QGxpbmsgRGF0ZVRpbWUjaG91cn0sIHtAbGluayBEYXRlVGltZSNtaW51dGV9LCB7QGxpbmsgRGF0ZVRpbWUjc2Vjb25kfSwge0BsaW5rIERhdGVUaW1lI21pbGxpc2Vjb25kfSBhY2Nlc3NvcnMuXG4gKiAqICoqV2VlayBjYWxlbmRhcioqOiBGb3IgSVNPIHdlZWsgY2FsZW5kYXIgYXR0cmlidXRlcywgc2VlIHRoZSB7QGxpbmsgRGF0ZVRpbWUjd2Vla1llYXJ9LCB7QGxpbmsgRGF0ZVRpbWUjd2Vla051bWJlcn0sIGFuZCB7QGxpbmsgRGF0ZVRpbWUjd2Vla2RheX0gYWNjZXNzb3JzLlxuICogKiAqKkNvbmZpZ3VyYXRpb24qKiBTZWUgdGhlIHtAbGluayBEYXRlVGltZSNsb2NhbGV9IGFuZCB7QGxpbmsgRGF0ZVRpbWUjbnVtYmVyaW5nU3lzdGVtfSBhY2Nlc3NvcnMuXG4gKiAqICoqVHJhbnNmb3JtYXRpb24qKjogVG8gdHJhbnNmb3JtIHRoZSBEYXRlVGltZSBpbnRvIG90aGVyIERhdGVUaW1lcywgdXNlIHtAbGluayBEYXRlVGltZSNzZXR9LCB7QGxpbmsgRGF0ZVRpbWUjcmVjb25maWd1cmV9LCB7QGxpbmsgRGF0ZVRpbWUjc2V0Wm9uZX0sIHtAbGluayBEYXRlVGltZSNzZXRMb2NhbGV9LCB7QGxpbmsgRGF0ZVRpbWUucGx1c30sIHtAbGluayBEYXRlVGltZSNtaW51c30sIHtAbGluayBEYXRlVGltZSNlbmRPZn0sIHtAbGluayBEYXRlVGltZSNzdGFydE9mfSwge0BsaW5rIERhdGVUaW1lI3RvVVRDfSwgYW5kIHtAbGluayBEYXRlVGltZSN0b0xvY2FsfS5cbiAqICogKipPdXRwdXQqKjogVG8gY29udmVydCB0aGUgRGF0ZVRpbWUgdG8gb3RoZXIgcmVwcmVzZW50YXRpb25zLCB1c2UgdGhlIHtAbGluayBEYXRlVGltZSN0b1JlbGF0aXZlfSwge0BsaW5rIERhdGVUaW1lI3RvUmVsYXRpdmVDYWxlbmRhcn0sIHtAbGluayBEYXRlVGltZSN0b0pTT059LCB7QGxpbmsgRGF0ZVRpbWUjdG9JU099LCB7QGxpbmsgRGF0ZVRpbWUjdG9IVFRQfSwge0BsaW5rIERhdGVUaW1lI3RvT2JqZWN0fSwge0BsaW5rIERhdGVUaW1lI3RvUkZDMjgyMn0sIHtAbGluayBEYXRlVGltZSN0b1N0cmluZ30sIHtAbGluayBEYXRlVGltZSN0b0xvY2FsZVN0cmluZ30sIHtAbGluayBEYXRlVGltZSN0b0Zvcm1hdH0sIHtAbGluayBEYXRlVGltZSN0b01pbGxpc30gYW5kIHtAbGluayBEYXRlVGltZSN0b0pTRGF0ZX0uXG4gKlxuICogVGhlcmUncyBwbGVudHkgb3RoZXJzIGRvY3VtZW50ZWQgYmVsb3cuIEluIGFkZGl0aW9uLCBmb3IgbW9yZSBpbmZvcm1hdGlvbiBvbiBzdWJ0bGVyIHRvcGljcyBsaWtlIGludGVybmF0aW9uYWxpemF0aW9uLCB0aW1lIHpvbmVzLCBhbHRlcm5hdGl2ZSBjYWxlbmRhcnMsIHZhbGlkaXR5LCBhbmQgc28gb24sIHNlZSB0aGUgZXh0ZXJuYWwgZG9jdW1lbnRhdGlvbi5cbiAqL1xuXG5cbnZhciBEYXRlVGltZSA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7XG4gIC8qKlxuICAgKiBAYWNjZXNzIHByaXZhdGVcbiAgICovXG4gIGZ1bmN0aW9uIERhdGVUaW1lKGNvbmZpZykge1xuICAgIHZhciB6b25lID0gY29uZmlnLnpvbmUgfHwgU2V0dGluZ3MuZGVmYXVsdFpvbmU7XG4gICAgdmFyIGludmFsaWQgPSBjb25maWcuaW52YWxpZCB8fCAoTnVtYmVyLmlzTmFOKGNvbmZpZy50cykgPyBuZXcgSW52YWxpZChcImludmFsaWQgaW5wdXRcIikgOiBudWxsKSB8fCAoIXpvbmUuaXNWYWxpZCA/IHVuc3VwcG9ydGVkWm9uZSh6b25lKSA6IG51bGwpO1xuICAgIC8qKlxuICAgICAqIEBhY2Nlc3MgcHJpdmF0ZVxuICAgICAqL1xuXG4gICAgdGhpcy50cyA9IGlzVW5kZWZpbmVkKGNvbmZpZy50cykgPyBTZXR0aW5ncy5ub3coKSA6IGNvbmZpZy50cztcbiAgICB2YXIgYyA9IG51bGwsXG4gICAgICAgIG8gPSBudWxsO1xuXG4gICAgaWYgKCFpbnZhbGlkKSB7XG4gICAgICB2YXIgdW5jaGFuZ2VkID0gY29uZmlnLm9sZCAmJiBjb25maWcub2xkLnRzID09PSB0aGlzLnRzICYmIGNvbmZpZy5vbGQuem9uZS5lcXVhbHMoem9uZSk7XG5cbiAgICAgIGlmICh1bmNoYW5nZWQpIHtcbiAgICAgICAgdmFyIF9yZWYgPSBbY29uZmlnLm9sZC5jLCBjb25maWcub2xkLm9dO1xuICAgICAgICBjID0gX3JlZlswXTtcbiAgICAgICAgbyA9IF9yZWZbMV07XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB2YXIgb3QgPSB6b25lLm9mZnNldCh0aGlzLnRzKTtcbiAgICAgICAgYyA9IHRzVG9PYmoodGhpcy50cywgb3QpO1xuICAgICAgICBpbnZhbGlkID0gTnVtYmVyLmlzTmFOKGMueWVhcikgPyBuZXcgSW52YWxpZChcImludmFsaWQgaW5wdXRcIikgOiBudWxsO1xuICAgICAgICBjID0gaW52YWxpZCA/IG51bGwgOiBjO1xuICAgICAgICBvID0gaW52YWxpZCA/IG51bGwgOiBvdDtcbiAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogQGFjY2VzcyBwcml2YXRlXG4gICAgICovXG5cblxuICAgIHRoaXMuX3pvbmUgPSB6b25lO1xuICAgIC8qKlxuICAgICAqIEBhY2Nlc3MgcHJpdmF0ZVxuICAgICAqL1xuXG4gICAgdGhpcy5sb2MgPSBjb25maWcubG9jIHx8IExvY2FsZS5jcmVhdGUoKTtcbiAgICAvKipcbiAgICAgKiBAYWNjZXNzIHByaXZhdGVcbiAgICAgKi9cblxuICAgIHRoaXMuaW52YWxpZCA9IGludmFsaWQ7XG4gICAgLyoqXG4gICAgICogQGFjY2VzcyBwcml2YXRlXG4gICAgICovXG5cbiAgICB0aGlzLndlZWtEYXRhID0gbnVsbDtcbiAgICAvKipcbiAgICAgKiBAYWNjZXNzIHByaXZhdGVcbiAgICAgKi9cblxuICAgIHRoaXMuYyA9IGM7XG4gICAgLyoqXG4gICAgICogQGFjY2VzcyBwcml2YXRlXG4gICAgICovXG5cbiAgICB0aGlzLm8gPSBvO1xuICAgIC8qKlxuICAgICAqIEBhY2Nlc3MgcHJpdmF0ZVxuICAgICAqL1xuXG4gICAgdGhpcy5pc0x1eG9uRGF0ZVRpbWUgPSB0cnVlO1xuICB9IC8vIENPTlNUUlVDVFxuXG4gIC8qKlxuICAgKiBDcmVhdGUgYSBEYXRlVGltZSBmb3IgdGhlIGN1cnJlbnQgaW5zdGFudCwgaW4gdGhlIHN5c3RlbSdzIHRpbWUgem9uZS5cbiAgICpcbiAgICogVXNlIFNldHRpbmdzIHRvIG92ZXJyaWRlIHRoZXNlIGRlZmF1bHQgdmFsdWVzIGlmIG5lZWRlZC5cbiAgICogQGV4YW1wbGUgRGF0ZVRpbWUubm93KCkudG9JU08oKSAvL34+IG5vdyBpbiB0aGUgSVNPIGZvcm1hdFxuICAgKiBAcmV0dXJuIHtEYXRlVGltZX1cbiAgICovXG5cblxuICBEYXRlVGltZS5ub3cgPSBmdW5jdGlvbiBub3coKSB7XG4gICAgcmV0dXJuIG5ldyBEYXRlVGltZSh7fSk7XG4gIH1cbiAgLyoqXG4gICAqIENyZWF0ZSBhIGxvY2FsIERhdGVUaW1lXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBbeWVhcl0gLSBUaGUgY2FsZW5kYXIgeWVhci4gSWYgb21pdHRlZCAoYXMgaW4sIGNhbGwgYGxvY2FsKClgIHdpdGggbm8gYXJndW1lbnRzKSwgdGhlIGN1cnJlbnQgdGltZSB3aWxsIGJlIHVzZWRcbiAgICogQHBhcmFtIHtudW1iZXJ9IFttb250aD0xXSAtIFRoZSBtb250aCwgMS1pbmRleGVkXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBbZGF5PTFdIC0gVGhlIGRheSBvZiB0aGUgbW9udGgsIDEtaW5kZXhlZFxuICAgKiBAcGFyYW0ge251bWJlcn0gW2hvdXI9MF0gLSBUaGUgaG91ciBvZiB0aGUgZGF5LCBpbiAyNC1ob3VyIHRpbWVcbiAgICogQHBhcmFtIHtudW1iZXJ9IFttaW51dGU9MF0gLSBUaGUgbWludXRlIG9mIHRoZSBob3VyLCBtZWFuaW5nIGEgbnVtYmVyIGJldHdlZW4gMCBhbmQgNTlcbiAgICogQHBhcmFtIHtudW1iZXJ9IFtzZWNvbmQ9MF0gLSBUaGUgc2Vjb25kIG9mIHRoZSBtaW51dGUsIG1lYW5pbmcgYSBudW1iZXIgYmV0d2VlbiAwIGFuZCA1OVxuICAgKiBAcGFyYW0ge251bWJlcn0gW21pbGxpc2Vjb25kPTBdIC0gVGhlIG1pbGxpc2Vjb25kIG9mIHRoZSBzZWNvbmQsIG1lYW5pbmcgYSBudW1iZXIgYmV0d2VlbiAwIGFuZCA5OTlcbiAgICogQGV4YW1wbGUgRGF0ZVRpbWUubG9jYWwoKSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL34+IG5vd1xuICAgKiBAZXhhbXBsZSBEYXRlVGltZS5sb2NhbCh7IHpvbmU6IFwiQW1lcmljYS9OZXdfWW9ya1wiIH0pICAgICAgLy9+PiBub3csIGluIFVTIGVhc3QgY29hc3QgdGltZVxuICAgKiBAZXhhbXBsZSBEYXRlVGltZS5sb2NhbCgyMDE3KSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vfj4gMjAxNy0wMS0wMVQwMDowMDowMFxuICAgKiBAZXhhbXBsZSBEYXRlVGltZS5sb2NhbCgyMDE3LCAzKSAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vfj4gMjAxNy0wMy0wMVQwMDowMDowMFxuICAgKiBAZXhhbXBsZSBEYXRlVGltZS5sb2NhbCgyMDE3LCAzLCAxMiwgeyBsb2NhbGU6IFwiZnJcIiB9KSAgICAgLy9+PiAyMDE3LTAzLTEyVDAwOjAwOjAwLCB3aXRoIGEgRnJlbmNoIGxvY2FsZVxuICAgKiBAZXhhbXBsZSBEYXRlVGltZS5sb2NhbCgyMDE3LCAzLCAxMiwgNSkgICAgICAgICAgICAgICAgICAgIC8vfj4gMjAxNy0wMy0xMlQwNTowMDowMFxuICAgKiBAZXhhbXBsZSBEYXRlVGltZS5sb2NhbCgyMDE3LCAzLCAxMiwgNSwgeyB6b25lOiBcInV0Y1wiIH0pICAgLy9+PiAyMDE3LTAzLTEyVDA1OjAwOjAwLCBpbiBVVENcbiAgICogQGV4YW1wbGUgRGF0ZVRpbWUubG9jYWwoMjAxNywgMywgMTIsIDUsIDQ1KSAgICAgICAgICAgICAgICAvL34+IDIwMTctMDMtMTJUMDU6NDU6MDBcbiAgICogQGV4YW1wbGUgRGF0ZVRpbWUubG9jYWwoMjAxNywgMywgMTIsIDUsIDQ1LCAxMCkgICAgICAgICAgICAvL34+IDIwMTctMDMtMTJUMDU6NDU6MTBcbiAgICogQGV4YW1wbGUgRGF0ZVRpbWUubG9jYWwoMjAxNywgMywgMTIsIDUsIDQ1LCAxMCwgNzY1KSAgICAgICAvL34+IDIwMTctMDMtMTJUMDU6NDU6MTAuNzY1XG4gICAqIEByZXR1cm4ge0RhdGVUaW1lfVxuICAgKi9cbiAgO1xuXG4gIERhdGVUaW1lLmxvY2FsID0gZnVuY3Rpb24gbG9jYWwoKSB7XG4gICAgdmFyIF9sYXN0T3B0cyA9IGxhc3RPcHRzKGFyZ3VtZW50cyksXG4gICAgICAgIG9wdHMgPSBfbGFzdE9wdHNbMF0sXG4gICAgICAgIGFyZ3MgPSBfbGFzdE9wdHNbMV0sXG4gICAgICAgIHllYXIgPSBhcmdzWzBdLFxuICAgICAgICBtb250aCA9IGFyZ3NbMV0sXG4gICAgICAgIGRheSA9IGFyZ3NbMl0sXG4gICAgICAgIGhvdXIgPSBhcmdzWzNdLFxuICAgICAgICBtaW51dGUgPSBhcmdzWzRdLFxuICAgICAgICBzZWNvbmQgPSBhcmdzWzVdLFxuICAgICAgICBtaWxsaXNlY29uZCA9IGFyZ3NbNl07XG5cbiAgICByZXR1cm4gcXVpY2tEVCh7XG4gICAgICB5ZWFyOiB5ZWFyLFxuICAgICAgbW9udGg6IG1vbnRoLFxuICAgICAgZGF5OiBkYXksXG4gICAgICBob3VyOiBob3VyLFxuICAgICAgbWludXRlOiBtaW51dGUsXG4gICAgICBzZWNvbmQ6IHNlY29uZCxcbiAgICAgIG1pbGxpc2Vjb25kOiBtaWxsaXNlY29uZFxuICAgIH0sIG9wdHMpO1xuICB9XG4gIC8qKlxuICAgKiBDcmVhdGUgYSBEYXRlVGltZSBpbiBVVENcbiAgICogQHBhcmFtIHtudW1iZXJ9IFt5ZWFyXSAtIFRoZSBjYWxlbmRhciB5ZWFyLiBJZiBvbWl0dGVkIChhcyBpbiwgY2FsbCBgdXRjKClgIHdpdGggbm8gYXJndW1lbnRzKSwgdGhlIGN1cnJlbnQgdGltZSB3aWxsIGJlIHVzZWRcbiAgICogQHBhcmFtIHtudW1iZXJ9IFttb250aD0xXSAtIFRoZSBtb250aCwgMS1pbmRleGVkXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBbZGF5PTFdIC0gVGhlIGRheSBvZiB0aGUgbW9udGhcbiAgICogQHBhcmFtIHtudW1iZXJ9IFtob3VyPTBdIC0gVGhlIGhvdXIgb2YgdGhlIGRheSwgaW4gMjQtaG91ciB0aW1lXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBbbWludXRlPTBdIC0gVGhlIG1pbnV0ZSBvZiB0aGUgaG91ciwgbWVhbmluZyBhIG51bWJlciBiZXR3ZWVuIDAgYW5kIDU5XG4gICAqIEBwYXJhbSB7bnVtYmVyfSBbc2Vjb25kPTBdIC0gVGhlIHNlY29uZCBvZiB0aGUgbWludXRlLCBtZWFuaW5nIGEgbnVtYmVyIGJldHdlZW4gMCBhbmQgNTlcbiAgICogQHBhcmFtIHtudW1iZXJ9IFttaWxsaXNlY29uZD0wXSAtIFRoZSBtaWxsaXNlY29uZCBvZiB0aGUgc2Vjb25kLCBtZWFuaW5nIGEgbnVtYmVyIGJldHdlZW4gMCBhbmQgOTk5XG4gICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zIC0gY29uZmlndXJhdGlvbiBvcHRpb25zIGZvciB0aGUgRGF0ZVRpbWVcbiAgICogQHBhcmFtIHtzdHJpbmd9IFtvcHRpb25zLmxvY2FsZV0gLSBhIGxvY2FsZSB0byBzZXQgb24gdGhlIHJlc3VsdGluZyBEYXRlVGltZSBpbnN0YW5jZVxuICAgKiBAcGFyYW0ge3N0cmluZ30gW29wdGlvbnMub3V0cHV0Q2FsZW5kYXJdIC0gdGhlIG91dHB1dCBjYWxlbmRhciB0byBzZXQgb24gdGhlIHJlc3VsdGluZyBEYXRlVGltZSBpbnN0YW5jZVxuICAgKiBAcGFyYW0ge3N0cmluZ30gW29wdGlvbnMubnVtYmVyaW5nU3lzdGVtXSAtIHRoZSBudW1iZXJpbmcgc3lzdGVtIHRvIHNldCBvbiB0aGUgcmVzdWx0aW5nIERhdGVUaW1lIGluc3RhbmNlXG4gICAqIEBleGFtcGxlIERhdGVUaW1lLnV0YygpICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vfj4gbm93XG4gICAqIEBleGFtcGxlIERhdGVUaW1lLnV0YygyMDE3KSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vfj4gMjAxNy0wMS0wMVQwMDowMDowMFpcbiAgICogQGV4YW1wbGUgRGF0ZVRpbWUudXRjKDIwMTcsIDMpICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9+PiAyMDE3LTAzLTAxVDAwOjAwOjAwWlxuICAgKiBAZXhhbXBsZSBEYXRlVGltZS51dGMoMjAxNywgMywgMTIpICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL34+IDIwMTctMDMtMTJUMDA6MDA6MDBaXG4gICAqIEBleGFtcGxlIERhdGVUaW1lLnV0YygyMDE3LCAzLCAxMiwgNSkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vfj4gMjAxNy0wMy0xMlQwNTowMDowMFpcbiAgICogQGV4YW1wbGUgRGF0ZVRpbWUudXRjKDIwMTcsIDMsIDEyLCA1LCA0NSkgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9+PiAyMDE3LTAzLTEyVDA1OjQ1OjAwWlxuICAgKiBAZXhhbXBsZSBEYXRlVGltZS51dGMoMjAxNywgMywgMTIsIDUsIDQ1LCB7IGxvY2FsZTogXCJmclwiIH0pICAgICAgICAgIC8vfj4gMjAxNy0wMy0xMlQwNTo0NTowMFogd2l0aCBhIEZyZW5jaCBsb2NhbGVcbiAgICogQGV4YW1wbGUgRGF0ZVRpbWUudXRjKDIwMTcsIDMsIDEyLCA1LCA0NSwgMTApICAgICAgICAgICAgICAgICAgICAgICAgLy9+PiAyMDE3LTAzLTEyVDA1OjQ1OjEwWlxuICAgKiBAZXhhbXBsZSBEYXRlVGltZS51dGMoMjAxNywgMywgMTIsIDUsIDQ1LCAxMCwgNzY1LCB7IGxvY2FsZTogXCJmclwiIH0pIC8vfj4gMjAxNy0wMy0xMlQwNTo0NToxMC43NjVaIHdpdGggYSBGcmVuY2ggbG9jYWxlXG4gICAqIEByZXR1cm4ge0RhdGVUaW1lfVxuICAgKi9cbiAgO1xuXG4gIERhdGVUaW1lLnV0YyA9IGZ1bmN0aW9uIHV0YygpIHtcbiAgICB2YXIgX2xhc3RPcHRzMiA9IGxhc3RPcHRzKGFyZ3VtZW50cyksXG4gICAgICAgIG9wdHMgPSBfbGFzdE9wdHMyWzBdLFxuICAgICAgICBhcmdzID0gX2xhc3RPcHRzMlsxXSxcbiAgICAgICAgeWVhciA9IGFyZ3NbMF0sXG4gICAgICAgIG1vbnRoID0gYXJnc1sxXSxcbiAgICAgICAgZGF5ID0gYXJnc1syXSxcbiAgICAgICAgaG91ciA9IGFyZ3NbM10sXG4gICAgICAgIG1pbnV0ZSA9IGFyZ3NbNF0sXG4gICAgICAgIHNlY29uZCA9IGFyZ3NbNV0sXG4gICAgICAgIG1pbGxpc2Vjb25kID0gYXJnc1s2XTtcblxuICAgIG9wdHMuem9uZSA9IEZpeGVkT2Zmc2V0Wm9uZS51dGNJbnN0YW5jZTtcbiAgICByZXR1cm4gcXVpY2tEVCh7XG4gICAgICB5ZWFyOiB5ZWFyLFxuICAgICAgbW9udGg6IG1vbnRoLFxuICAgICAgZGF5OiBkYXksXG4gICAgICBob3VyOiBob3VyLFxuICAgICAgbWludXRlOiBtaW51dGUsXG4gICAgICBzZWNvbmQ6IHNlY29uZCxcbiAgICAgIG1pbGxpc2Vjb25kOiBtaWxsaXNlY29uZFxuICAgIH0sIG9wdHMpO1xuICB9XG4gIC8qKlxuICAgKiBDcmVhdGUgYSBEYXRlVGltZSBmcm9tIGEgSmF2YVNjcmlwdCBEYXRlIG9iamVjdC4gVXNlcyB0aGUgZGVmYXVsdCB6b25lLlxuICAgKiBAcGFyYW0ge0RhdGV9IGRhdGUgLSBhIEphdmFTY3JpcHQgRGF0ZSBvYmplY3RcbiAgICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnMgLSBjb25maWd1cmF0aW9uIG9wdGlvbnMgZm9yIHRoZSBEYXRlVGltZVxuICAgKiBAcGFyYW0ge3N0cmluZ3xab25lfSBbb3B0aW9ucy56b25lPSdsb2NhbCddIC0gdGhlIHpvbmUgdG8gcGxhY2UgdGhlIERhdGVUaW1lIGludG9cbiAgICogQHJldHVybiB7RGF0ZVRpbWV9XG4gICAqL1xuICA7XG5cbiAgRGF0ZVRpbWUuZnJvbUpTRGF0ZSA9IGZ1bmN0aW9uIGZyb21KU0RhdGUoZGF0ZSwgb3B0aW9ucykge1xuICAgIGlmIChvcHRpb25zID09PSB2b2lkIDApIHtcbiAgICAgIG9wdGlvbnMgPSB7fTtcbiAgICB9XG5cbiAgICB2YXIgdHMgPSBpc0RhdGUoZGF0ZSkgPyBkYXRlLnZhbHVlT2YoKSA6IE5hTjtcblxuICAgIGlmIChOdW1iZXIuaXNOYU4odHMpKSB7XG4gICAgICByZXR1cm4gRGF0ZVRpbWUuaW52YWxpZChcImludmFsaWQgaW5wdXRcIik7XG4gICAgfVxuXG4gICAgdmFyIHpvbmVUb1VzZSA9IG5vcm1hbGl6ZVpvbmUob3B0aW9ucy56b25lLCBTZXR0aW5ncy5kZWZhdWx0Wm9uZSk7XG5cbiAgICBpZiAoIXpvbmVUb1VzZS5pc1ZhbGlkKSB7XG4gICAgICByZXR1cm4gRGF0ZVRpbWUuaW52YWxpZCh1bnN1cHBvcnRlZFpvbmUoem9uZVRvVXNlKSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIG5ldyBEYXRlVGltZSh7XG4gICAgICB0czogdHMsXG4gICAgICB6b25lOiB6b25lVG9Vc2UsXG4gICAgICBsb2M6IExvY2FsZS5mcm9tT2JqZWN0KG9wdGlvbnMpXG4gICAgfSk7XG4gIH1cbiAgLyoqXG4gICAqIENyZWF0ZSBhIERhdGVUaW1lIGZyb20gYSBudW1iZXIgb2YgbWlsbGlzZWNvbmRzIHNpbmNlIHRoZSBlcG9jaCAobWVhbmluZyBzaW5jZSAxIEphbnVhcnkgMTk3MCAwMDowMDowMCBVVEMpLiBVc2VzIHRoZSBkZWZhdWx0IHpvbmUuXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBtaWxsaXNlY29uZHMgLSBhIG51bWJlciBvZiBtaWxsaXNlY29uZHMgc2luY2UgMTk3MCBVVENcbiAgICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnMgLSBjb25maWd1cmF0aW9uIG9wdGlvbnMgZm9yIHRoZSBEYXRlVGltZVxuICAgKiBAcGFyYW0ge3N0cmluZ3xab25lfSBbb3B0aW9ucy56b25lPSdsb2NhbCddIC0gdGhlIHpvbmUgdG8gcGxhY2UgdGhlIERhdGVUaW1lIGludG9cbiAgICogQHBhcmFtIHtzdHJpbmd9IFtvcHRpb25zLmxvY2FsZV0gLSBhIGxvY2FsZSB0byBzZXQgb24gdGhlIHJlc3VsdGluZyBEYXRlVGltZSBpbnN0YW5jZVxuICAgKiBAcGFyYW0ge3N0cmluZ30gb3B0aW9ucy5vdXRwdXRDYWxlbmRhciAtIHRoZSBvdXRwdXQgY2FsZW5kYXIgdG8gc2V0IG9uIHRoZSByZXN1bHRpbmcgRGF0ZVRpbWUgaW5zdGFuY2VcbiAgICogQHBhcmFtIHtzdHJpbmd9IG9wdGlvbnMubnVtYmVyaW5nU3lzdGVtIC0gdGhlIG51bWJlcmluZyBzeXN0ZW0gdG8gc2V0IG9uIHRoZSByZXN1bHRpbmcgRGF0ZVRpbWUgaW5zdGFuY2VcbiAgICogQHJldHVybiB7RGF0ZVRpbWV9XG4gICAqL1xuICA7XG5cbiAgRGF0ZVRpbWUuZnJvbU1pbGxpcyA9IGZ1bmN0aW9uIGZyb21NaWxsaXMobWlsbGlzZWNvbmRzLCBvcHRpb25zKSB7XG4gICAgaWYgKG9wdGlvbnMgPT09IHZvaWQgMCkge1xuICAgICAgb3B0aW9ucyA9IHt9O1xuICAgIH1cblxuICAgIGlmICghaXNOdW1iZXIobWlsbGlzZWNvbmRzKSkge1xuICAgICAgdGhyb3cgbmV3IEludmFsaWRBcmd1bWVudEVycm9yKFwiZnJvbU1pbGxpcyByZXF1aXJlcyBhIG51bWVyaWNhbCBpbnB1dCwgYnV0IHJlY2VpdmVkIGEgXCIgKyB0eXBlb2YgbWlsbGlzZWNvbmRzICsgXCIgd2l0aCB2YWx1ZSBcIiArIG1pbGxpc2Vjb25kcyk7XG4gICAgfSBlbHNlIGlmIChtaWxsaXNlY29uZHMgPCAtTUFYX0RBVEUgfHwgbWlsbGlzZWNvbmRzID4gTUFYX0RBVEUpIHtcbiAgICAgIC8vIHRoaXMgaXNuJ3QgcGVyZmVjdCBiZWNhdXNlIGJlY2F1c2Ugd2UgY2FuIHN0aWxsIGVuZCB1cCBvdXQgb2YgcmFuZ2UgYmVjYXVzZSBvZiBhZGRpdGlvbmFsIHNoaWZ0aW5nLCBidXQgaXQncyBhIHN0YXJ0XG4gICAgICByZXR1cm4gRGF0ZVRpbWUuaW52YWxpZChcIlRpbWVzdGFtcCBvdXQgb2YgcmFuZ2VcIik7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBuZXcgRGF0ZVRpbWUoe1xuICAgICAgICB0czogbWlsbGlzZWNvbmRzLFxuICAgICAgICB6b25lOiBub3JtYWxpemVab25lKG9wdGlvbnMuem9uZSwgU2V0dGluZ3MuZGVmYXVsdFpvbmUpLFxuICAgICAgICBsb2M6IExvY2FsZS5mcm9tT2JqZWN0KG9wdGlvbnMpXG4gICAgICB9KTtcbiAgICB9XG4gIH1cbiAgLyoqXG4gICAqIENyZWF0ZSBhIERhdGVUaW1lIGZyb20gYSBudW1iZXIgb2Ygc2Vjb25kcyBzaW5jZSB0aGUgZXBvY2ggKG1lYW5pbmcgc2luY2UgMSBKYW51YXJ5IDE5NzAgMDA6MDA6MDAgVVRDKS4gVXNlcyB0aGUgZGVmYXVsdCB6b25lLlxuICAgKiBAcGFyYW0ge251bWJlcn0gc2Vjb25kcyAtIGEgbnVtYmVyIG9mIHNlY29uZHMgc2luY2UgMTk3MCBVVENcbiAgICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnMgLSBjb25maWd1cmF0aW9uIG9wdGlvbnMgZm9yIHRoZSBEYXRlVGltZVxuICAgKiBAcGFyYW0ge3N0cmluZ3xab25lfSBbb3B0aW9ucy56b25lPSdsb2NhbCddIC0gdGhlIHpvbmUgdG8gcGxhY2UgdGhlIERhdGVUaW1lIGludG9cbiAgICogQHBhcmFtIHtzdHJpbmd9IFtvcHRpb25zLmxvY2FsZV0gLSBhIGxvY2FsZSB0byBzZXQgb24gdGhlIHJlc3VsdGluZyBEYXRlVGltZSBpbnN0YW5jZVxuICAgKiBAcGFyYW0ge3N0cmluZ30gb3B0aW9ucy5vdXRwdXRDYWxlbmRhciAtIHRoZSBvdXRwdXQgY2FsZW5kYXIgdG8gc2V0IG9uIHRoZSByZXN1bHRpbmcgRGF0ZVRpbWUgaW5zdGFuY2VcbiAgICogQHBhcmFtIHtzdHJpbmd9IG9wdGlvbnMubnVtYmVyaW5nU3lzdGVtIC0gdGhlIG51bWJlcmluZyBzeXN0ZW0gdG8gc2V0IG9uIHRoZSByZXN1bHRpbmcgRGF0ZVRpbWUgaW5zdGFuY2VcbiAgICogQHJldHVybiB7RGF0ZVRpbWV9XG4gICAqL1xuICA7XG5cbiAgRGF0ZVRpbWUuZnJvbVNlY29uZHMgPSBmdW5jdGlvbiBmcm9tU2Vjb25kcyhzZWNvbmRzLCBvcHRpb25zKSB7XG4gICAgaWYgKG9wdGlvbnMgPT09IHZvaWQgMCkge1xuICAgICAgb3B0aW9ucyA9IHt9O1xuICAgIH1cblxuICAgIGlmICghaXNOdW1iZXIoc2Vjb25kcykpIHtcbiAgICAgIHRocm93IG5ldyBJbnZhbGlkQXJndW1lbnRFcnJvcihcImZyb21TZWNvbmRzIHJlcXVpcmVzIGEgbnVtZXJpY2FsIGlucHV0XCIpO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gbmV3IERhdGVUaW1lKHtcbiAgICAgICAgdHM6IHNlY29uZHMgKiAxMDAwLFxuICAgICAgICB6b25lOiBub3JtYWxpemVab25lKG9wdGlvbnMuem9uZSwgU2V0dGluZ3MuZGVmYXVsdFpvbmUpLFxuICAgICAgICBsb2M6IExvY2FsZS5mcm9tT2JqZWN0KG9wdGlvbnMpXG4gICAgICB9KTtcbiAgICB9XG4gIH1cbiAgLyoqXG4gICAqIENyZWF0ZSBhIERhdGVUaW1lIGZyb20gYSBKYXZhU2NyaXB0IG9iamVjdCB3aXRoIGtleXMgbGlrZSAneWVhcicgYW5kICdob3VyJyB3aXRoIHJlYXNvbmFibGUgZGVmYXVsdHMuXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBvYmogLSB0aGUgb2JqZWN0IHRvIGNyZWF0ZSB0aGUgRGF0ZVRpbWUgZnJvbVxuICAgKiBAcGFyYW0ge251bWJlcn0gb2JqLnllYXIgLSBhIHllYXIsIHN1Y2ggYXMgMTk4N1xuICAgKiBAcGFyYW0ge251bWJlcn0gb2JqLm1vbnRoIC0gYSBtb250aCwgMS0xMlxuICAgKiBAcGFyYW0ge251bWJlcn0gb2JqLmRheSAtIGEgZGF5IG9mIHRoZSBtb250aCwgMS0zMSwgZGVwZW5kaW5nIG9uIHRoZSBtb250aFxuICAgKiBAcGFyYW0ge251bWJlcn0gb2JqLm9yZGluYWwgLSBkYXkgb2YgdGhlIHllYXIsIDEtMzY1IG9yIDM2NlxuICAgKiBAcGFyYW0ge251bWJlcn0gb2JqLndlZWtZZWFyIC0gYW4gSVNPIHdlZWsgeWVhclxuICAgKiBAcGFyYW0ge251bWJlcn0gb2JqLndlZWtOdW1iZXIgLSBhbiBJU08gd2VlayBudW1iZXIsIGJldHdlZW4gMSBhbmQgNTIgb3IgNTMsIGRlcGVuZGluZyBvbiB0aGUgeWVhclxuICAgKiBAcGFyYW0ge251bWJlcn0gb2JqLndlZWtkYXkgLSBhbiBJU08gd2Vla2RheSwgMS03LCB3aGVyZSAxIGlzIE1vbmRheSBhbmQgNyBpcyBTdW5kYXlcbiAgICogQHBhcmFtIHtudW1iZXJ9IG9iai5ob3VyIC0gaG91ciBvZiB0aGUgZGF5LCAwLTIzXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBvYmoubWludXRlIC0gbWludXRlIG9mIHRoZSBob3VyLCAwLTU5XG4gICAqIEBwYXJhbSB7bnVtYmVyfSBvYmouc2Vjb25kIC0gc2Vjb25kIG9mIHRoZSBtaW51dGUsIDAtNTlcbiAgICogQHBhcmFtIHtudW1iZXJ9IG9iai5taWxsaXNlY29uZCAtIG1pbGxpc2Vjb25kIG9mIHRoZSBzZWNvbmQsIDAtOTk5XG4gICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRzIC0gb3B0aW9ucyBmb3IgY3JlYXRpbmcgdGhpcyBEYXRlVGltZVxuICAgKiBAcGFyYW0ge3N0cmluZ3xab25lfSBbb3B0cy56b25lPSdsb2NhbCddIC0gaW50ZXJwcmV0IHRoZSBudW1iZXJzIGluIHRoZSBjb250ZXh0IG9mIGEgcGFydGljdWxhciB6b25lLiBDYW4gdGFrZSBhbnkgdmFsdWUgdGFrZW4gYXMgdGhlIGZpcnN0IGFyZ3VtZW50IHRvIHNldFpvbmUoKVxuICAgKiBAcGFyYW0ge3N0cmluZ30gW29wdHMubG9jYWxlPSdzeXN0ZW0ncyBsb2NhbGUnXSAtIGEgbG9jYWxlIHRvIHNldCBvbiB0aGUgcmVzdWx0aW5nIERhdGVUaW1lIGluc3RhbmNlXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBvcHRzLm91dHB1dENhbGVuZGFyIC0gdGhlIG91dHB1dCBjYWxlbmRhciB0byBzZXQgb24gdGhlIHJlc3VsdGluZyBEYXRlVGltZSBpbnN0YW5jZVxuICAgKiBAcGFyYW0ge3N0cmluZ30gb3B0cy5udW1iZXJpbmdTeXN0ZW0gLSB0aGUgbnVtYmVyaW5nIHN5c3RlbSB0byBzZXQgb24gdGhlIHJlc3VsdGluZyBEYXRlVGltZSBpbnN0YW5jZVxuICAgKiBAZXhhbXBsZSBEYXRlVGltZS5mcm9tT2JqZWN0KHsgeWVhcjogMTk4MiwgbW9udGg6IDUsIGRheTogMjV9KS50b0lTT0RhdGUoKSAvLz0+ICcxOTgyLTA1LTI1J1xuICAgKiBAZXhhbXBsZSBEYXRlVGltZS5mcm9tT2JqZWN0KHsgeWVhcjogMTk4MiB9KS50b0lTT0RhdGUoKSAvLz0+ICcxOTgyLTAxLTAxJ1xuICAgKiBAZXhhbXBsZSBEYXRlVGltZS5mcm9tT2JqZWN0KHsgaG91cjogMTAsIG1pbnV0ZTogMjYsIHNlY29uZDogNiB9KSAvL34+IHRvZGF5IGF0IDEwOjI2OjA2XG4gICAqIEBleGFtcGxlIERhdGVUaW1lLmZyb21PYmplY3QoeyBob3VyOiAxMCwgbWludXRlOiAyNiwgc2Vjb25kOiA2IH0sIHsgem9uZTogJ3V0YycgfSksXG4gICAqIEBleGFtcGxlIERhdGVUaW1lLmZyb21PYmplY3QoeyBob3VyOiAxMCwgbWludXRlOiAyNiwgc2Vjb25kOiA2IH0sIHsgem9uZTogJ2xvY2FsJyB9KVxuICAgKiBAZXhhbXBsZSBEYXRlVGltZS5mcm9tT2JqZWN0KHsgaG91cjogMTAsIG1pbnV0ZTogMjYsIHNlY29uZDogNiB9LCB7IHpvbmU6ICdBbWVyaWNhL05ld19Zb3JrJyB9KVxuICAgKiBAZXhhbXBsZSBEYXRlVGltZS5mcm9tT2JqZWN0KHsgd2Vla1llYXI6IDIwMTYsIHdlZWtOdW1iZXI6IDIsIHdlZWtkYXk6IDMgfSkudG9JU09EYXRlKCkgLy89PiAnMjAxNi0wMS0xMydcbiAgICogQHJldHVybiB7RGF0ZVRpbWV9XG4gICAqL1xuICA7XG5cbiAgRGF0ZVRpbWUuZnJvbU9iamVjdCA9IGZ1bmN0aW9uIGZyb21PYmplY3Qob2JqLCBvcHRzKSB7XG4gICAgaWYgKG9wdHMgPT09IHZvaWQgMCkge1xuICAgICAgb3B0cyA9IHt9O1xuICAgIH1cblxuICAgIG9iaiA9IG9iaiB8fCB7fTtcbiAgICB2YXIgem9uZVRvVXNlID0gbm9ybWFsaXplWm9uZShvcHRzLnpvbmUsIFNldHRpbmdzLmRlZmF1bHRab25lKTtcblxuICAgIGlmICghem9uZVRvVXNlLmlzVmFsaWQpIHtcbiAgICAgIHJldHVybiBEYXRlVGltZS5pbnZhbGlkKHVuc3VwcG9ydGVkWm9uZSh6b25lVG9Vc2UpKTtcbiAgICB9XG5cbiAgICB2YXIgdHNOb3cgPSBTZXR0aW5ncy5ub3coKSxcbiAgICAgICAgb2Zmc2V0UHJvdmlzID0gIWlzVW5kZWZpbmVkKG9wdHMuc3BlY2lmaWNPZmZzZXQpID8gb3B0cy5zcGVjaWZpY09mZnNldCA6IHpvbmVUb1VzZS5vZmZzZXQodHNOb3cpLFxuICAgICAgICBub3JtYWxpemVkID0gbm9ybWFsaXplT2JqZWN0KG9iaiwgbm9ybWFsaXplVW5pdCksXG4gICAgICAgIGNvbnRhaW5zT3JkaW5hbCA9ICFpc1VuZGVmaW5lZChub3JtYWxpemVkLm9yZGluYWwpLFxuICAgICAgICBjb250YWluc0dyZWdvclllYXIgPSAhaXNVbmRlZmluZWQobm9ybWFsaXplZC55ZWFyKSxcbiAgICAgICAgY29udGFpbnNHcmVnb3JNRCA9ICFpc1VuZGVmaW5lZChub3JtYWxpemVkLm1vbnRoKSB8fCAhaXNVbmRlZmluZWQobm9ybWFsaXplZC5kYXkpLFxuICAgICAgICBjb250YWluc0dyZWdvciA9IGNvbnRhaW5zR3JlZ29yWWVhciB8fCBjb250YWluc0dyZWdvck1ELFxuICAgICAgICBkZWZpbml0ZVdlZWtEZWYgPSBub3JtYWxpemVkLndlZWtZZWFyIHx8IG5vcm1hbGl6ZWQud2Vla051bWJlcixcbiAgICAgICAgbG9jID0gTG9jYWxlLmZyb21PYmplY3Qob3B0cyk7IC8vIGNhc2VzOlxuICAgIC8vIGp1c3QgYSB3ZWVrZGF5IC0+IHRoaXMgd2VlaydzIGluc3RhbmNlIG9mIHRoYXQgd2Vla2RheSwgbm8gd29ycmllc1xuICAgIC8vIChncmVnb3JpYW4gZGF0YSBvciBvcmRpbmFsKSArICh3ZWVrWWVhciBvciB3ZWVrTnVtYmVyKSAtPiBlcnJvclxuICAgIC8vIChncmVnb3JpYW4gbW9udGggb3IgZGF5KSArIG9yZGluYWwgLT4gZXJyb3JcbiAgICAvLyBvdGhlcndpc2UganVzdCB1c2Ugd2Vla3Mgb3Igb3JkaW5hbHMgb3IgZ3JlZ29yaWFuLCBkZXBlbmRpbmcgb24gd2hhdCdzIHNwZWNpZmllZFxuXG4gICAgaWYgKChjb250YWluc0dyZWdvciB8fCBjb250YWluc09yZGluYWwpICYmIGRlZmluaXRlV2Vla0RlZikge1xuICAgICAgdGhyb3cgbmV3IENvbmZsaWN0aW5nU3BlY2lmaWNhdGlvbkVycm9yKFwiQ2FuJ3QgbWl4IHdlZWtZZWFyL3dlZWtOdW1iZXIgdW5pdHMgd2l0aCB5ZWFyL21vbnRoL2RheSBvciBvcmRpbmFsc1wiKTtcbiAgICB9XG5cbiAgICBpZiAoY29udGFpbnNHcmVnb3JNRCAmJiBjb250YWluc09yZGluYWwpIHtcbiAgICAgIHRocm93IG5ldyBDb25mbGljdGluZ1NwZWNpZmljYXRpb25FcnJvcihcIkNhbid0IG1peCBvcmRpbmFsIGRhdGVzIHdpdGggbW9udGgvZGF5XCIpO1xuICAgIH1cblxuICAgIHZhciB1c2VXZWVrRGF0YSA9IGRlZmluaXRlV2Vla0RlZiB8fCBub3JtYWxpemVkLndlZWtkYXkgJiYgIWNvbnRhaW5zR3JlZ29yOyAvLyBjb25maWd1cmUgb3Vyc2VsdmVzIHRvIGRlYWwgd2l0aCBncmVnb3JpYW4gZGF0ZXMgb3Igd2VlayBzdHVmZlxuXG4gICAgdmFyIHVuaXRzLFxuICAgICAgICBkZWZhdWx0VmFsdWVzLFxuICAgICAgICBvYmpOb3cgPSB0c1RvT2JqKHRzTm93LCBvZmZzZXRQcm92aXMpO1xuXG4gICAgaWYgKHVzZVdlZWtEYXRhKSB7XG4gICAgICB1bml0cyA9IG9yZGVyZWRXZWVrVW5pdHM7XG4gICAgICBkZWZhdWx0VmFsdWVzID0gZGVmYXVsdFdlZWtVbml0VmFsdWVzO1xuICAgICAgb2JqTm93ID0gZ3JlZ29yaWFuVG9XZWVrKG9iak5vdyk7XG4gICAgfSBlbHNlIGlmIChjb250YWluc09yZGluYWwpIHtcbiAgICAgIHVuaXRzID0gb3JkZXJlZE9yZGluYWxVbml0cztcbiAgICAgIGRlZmF1bHRWYWx1ZXMgPSBkZWZhdWx0T3JkaW5hbFVuaXRWYWx1ZXM7XG4gICAgICBvYmpOb3cgPSBncmVnb3JpYW5Ub09yZGluYWwob2JqTm93KTtcbiAgICB9IGVsc2Uge1xuICAgICAgdW5pdHMgPSBvcmRlcmVkVW5pdHM7XG4gICAgICBkZWZhdWx0VmFsdWVzID0gZGVmYXVsdFVuaXRWYWx1ZXM7XG4gICAgfSAvLyBzZXQgZGVmYXVsdCB2YWx1ZXMgZm9yIG1pc3Npbmcgc3R1ZmZcblxuXG4gICAgdmFyIGZvdW5kRmlyc3QgPSBmYWxzZTtcblxuICAgIGZvciAodmFyIF9pdGVyYXRvcjMgPSBfY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlckxvb3NlKHVuaXRzKSwgX3N0ZXAzOyAhKF9zdGVwMyA9IF9pdGVyYXRvcjMoKSkuZG9uZTspIHtcbiAgICAgIHZhciB1ID0gX3N0ZXAzLnZhbHVlO1xuICAgICAgdmFyIHYgPSBub3JtYWxpemVkW3VdO1xuXG4gICAgICBpZiAoIWlzVW5kZWZpbmVkKHYpKSB7XG4gICAgICAgIGZvdW5kRmlyc3QgPSB0cnVlO1xuICAgICAgfSBlbHNlIGlmIChmb3VuZEZpcnN0KSB7XG4gICAgICAgIG5vcm1hbGl6ZWRbdV0gPSBkZWZhdWx0VmFsdWVzW3VdO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgbm9ybWFsaXplZFt1XSA9IG9iak5vd1t1XTtcbiAgICAgIH1cbiAgICB9IC8vIG1ha2Ugc3VyZSB0aGUgdmFsdWVzIHdlIGhhdmUgYXJlIGluIHJhbmdlXG5cblxuICAgIHZhciBoaWdoZXJPcmRlckludmFsaWQgPSB1c2VXZWVrRGF0YSA/IGhhc0ludmFsaWRXZWVrRGF0YShub3JtYWxpemVkKSA6IGNvbnRhaW5zT3JkaW5hbCA/IGhhc0ludmFsaWRPcmRpbmFsRGF0YShub3JtYWxpemVkKSA6IGhhc0ludmFsaWRHcmVnb3JpYW5EYXRhKG5vcm1hbGl6ZWQpLFxuICAgICAgICBpbnZhbGlkID0gaGlnaGVyT3JkZXJJbnZhbGlkIHx8IGhhc0ludmFsaWRUaW1lRGF0YShub3JtYWxpemVkKTtcblxuICAgIGlmIChpbnZhbGlkKSB7XG4gICAgICByZXR1cm4gRGF0ZVRpbWUuaW52YWxpZChpbnZhbGlkKTtcbiAgICB9IC8vIGNvbXB1dGUgdGhlIGFjdHVhbCB0aW1lXG5cblxuICAgIHZhciBncmVnb3JpYW4gPSB1c2VXZWVrRGF0YSA/IHdlZWtUb0dyZWdvcmlhbihub3JtYWxpemVkKSA6IGNvbnRhaW5zT3JkaW5hbCA/IG9yZGluYWxUb0dyZWdvcmlhbihub3JtYWxpemVkKSA6IG5vcm1hbGl6ZWQsXG4gICAgICAgIF9vYmpUb1RTMiA9IG9ialRvVFMoZ3JlZ29yaWFuLCBvZmZzZXRQcm92aXMsIHpvbmVUb1VzZSksXG4gICAgICAgIHRzRmluYWwgPSBfb2JqVG9UUzJbMF0sXG4gICAgICAgIG9mZnNldEZpbmFsID0gX29ialRvVFMyWzFdLFxuICAgICAgICBpbnN0ID0gbmV3IERhdGVUaW1lKHtcbiAgICAgIHRzOiB0c0ZpbmFsLFxuICAgICAgem9uZTogem9uZVRvVXNlLFxuICAgICAgbzogb2Zmc2V0RmluYWwsXG4gICAgICBsb2M6IGxvY1xuICAgIH0pOyAvLyBncmVnb3JpYW4gZGF0YSArIHdlZWtkYXkgc2VydmVzIG9ubHkgdG8gdmFsaWRhdGVcblxuXG4gICAgaWYgKG5vcm1hbGl6ZWQud2Vla2RheSAmJiBjb250YWluc0dyZWdvciAmJiBvYmoud2Vla2RheSAhPT0gaW5zdC53ZWVrZGF5KSB7XG4gICAgICByZXR1cm4gRGF0ZVRpbWUuaW52YWxpZChcIm1pc21hdGNoZWQgd2Vla2RheVwiLCBcInlvdSBjYW4ndCBzcGVjaWZ5IGJvdGggYSB3ZWVrZGF5IG9mIFwiICsgbm9ybWFsaXplZC53ZWVrZGF5ICsgXCIgYW5kIGEgZGF0ZSBvZiBcIiArIGluc3QudG9JU08oKSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGluc3Q7XG4gIH1cbiAgLyoqXG4gICAqIENyZWF0ZSBhIERhdGVUaW1lIGZyb20gYW4gSVNPIDg2MDEgc3RyaW5nXG4gICAqIEBwYXJhbSB7c3RyaW5nfSB0ZXh0IC0gdGhlIElTTyBzdHJpbmdcbiAgICogQHBhcmFtIHtPYmplY3R9IG9wdHMgLSBvcHRpb25zIHRvIGFmZmVjdCB0aGUgY3JlYXRpb25cbiAgICogQHBhcmFtIHtzdHJpbmd8Wm9uZX0gW29wdHMuem9uZT0nbG9jYWwnXSAtIHVzZSB0aGlzIHpvbmUgaWYgbm8gb2Zmc2V0IGlzIHNwZWNpZmllZCBpbiB0aGUgaW5wdXQgc3RyaW5nIGl0c2VsZi4gV2lsbCBhbHNvIGNvbnZlcnQgdGhlIHRpbWUgdG8gdGhpcyB6b25lXG4gICAqIEBwYXJhbSB7Ym9vbGVhbn0gW29wdHMuc2V0Wm9uZT1mYWxzZV0gLSBvdmVycmlkZSB0aGUgem9uZSB3aXRoIGEgZml4ZWQtb2Zmc2V0IHpvbmUgc3BlY2lmaWVkIGluIHRoZSBzdHJpbmcgaXRzZWxmLCBpZiBpdCBzcGVjaWZpZXMgb25lXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBbb3B0cy5sb2NhbGU9J3N5c3RlbSdzIGxvY2FsZSddIC0gYSBsb2NhbGUgdG8gc2V0IG9uIHRoZSByZXN1bHRpbmcgRGF0ZVRpbWUgaW5zdGFuY2VcbiAgICogQHBhcmFtIHtzdHJpbmd9IFtvcHRzLm91dHB1dENhbGVuZGFyXSAtIHRoZSBvdXRwdXQgY2FsZW5kYXIgdG8gc2V0IG9uIHRoZSByZXN1bHRpbmcgRGF0ZVRpbWUgaW5zdGFuY2VcbiAgICogQHBhcmFtIHtzdHJpbmd9IFtvcHRzLm51bWJlcmluZ1N5c3RlbV0gLSB0aGUgbnVtYmVyaW5nIHN5c3RlbSB0byBzZXQgb24gdGhlIHJlc3VsdGluZyBEYXRlVGltZSBpbnN0YW5jZVxuICAgKiBAZXhhbXBsZSBEYXRlVGltZS5mcm9tSVNPKCcyMDE2LTA1LTI1VDA5OjA4OjM0LjEyMycpXG4gICAqIEBleGFtcGxlIERhdGVUaW1lLmZyb21JU08oJzIwMTYtMDUtMjVUMDk6MDg6MzQuMTIzKzA2OjAwJylcbiAgICogQGV4YW1wbGUgRGF0ZVRpbWUuZnJvbUlTTygnMjAxNi0wNS0yNVQwOTowODozNC4xMjMrMDY6MDAnLCB7c2V0Wm9uZTogdHJ1ZX0pXG4gICAqIEBleGFtcGxlIERhdGVUaW1lLmZyb21JU08oJzIwMTYtMDUtMjVUMDk6MDg6MzQuMTIzJywge3pvbmU6ICd1dGMnfSlcbiAgICogQGV4YW1wbGUgRGF0ZVRpbWUuZnJvbUlTTygnMjAxNi1XMDUtNCcpXG4gICAqIEByZXR1cm4ge0RhdGVUaW1lfVxuICAgKi9cbiAgO1xuXG4gIERhdGVUaW1lLmZyb21JU08gPSBmdW5jdGlvbiBmcm9tSVNPKHRleHQsIG9wdHMpIHtcbiAgICBpZiAob3B0cyA9PT0gdm9pZCAwKSB7XG4gICAgICBvcHRzID0ge307XG4gICAgfVxuXG4gICAgdmFyIF9wYXJzZUlTT0RhdGUgPSBwYXJzZUlTT0RhdGUodGV4dCksXG4gICAgICAgIHZhbHMgPSBfcGFyc2VJU09EYXRlWzBdLFxuICAgICAgICBwYXJzZWRab25lID0gX3BhcnNlSVNPRGF0ZVsxXTtcblxuICAgIHJldHVybiBwYXJzZURhdGFUb0RhdGVUaW1lKHZhbHMsIHBhcnNlZFpvbmUsIG9wdHMsIFwiSVNPIDg2MDFcIiwgdGV4dCk7XG4gIH1cbiAgLyoqXG4gICAqIENyZWF0ZSBhIERhdGVUaW1lIGZyb20gYW4gUkZDIDI4MjIgc3RyaW5nXG4gICAqIEBwYXJhbSB7c3RyaW5nfSB0ZXh0IC0gdGhlIFJGQyAyODIyIHN0cmluZ1xuICAgKiBAcGFyYW0ge09iamVjdH0gb3B0cyAtIG9wdGlvbnMgdG8gYWZmZWN0IHRoZSBjcmVhdGlvblxuICAgKiBAcGFyYW0ge3N0cmluZ3xab25lfSBbb3B0cy56b25lPSdsb2NhbCddIC0gY29udmVydCB0aGUgdGltZSB0byB0aGlzIHpvbmUuIFNpbmNlIHRoZSBvZmZzZXQgaXMgYWx3YXlzIHNwZWNpZmllZCBpbiB0aGUgc3RyaW5nIGl0c2VsZiwgdGhpcyBoYXMgbm8gZWZmZWN0IG9uIHRoZSBpbnRlcnByZXRhdGlvbiBvZiBzdHJpbmcsIG1lcmVseSB0aGUgem9uZSB0aGUgcmVzdWx0aW5nIERhdGVUaW1lIGlzIGV4cHJlc3NlZCBpbi5cbiAgICogQHBhcmFtIHtib29sZWFufSBbb3B0cy5zZXRab25lPWZhbHNlXSAtIG92ZXJyaWRlIHRoZSB6b25lIHdpdGggYSBmaXhlZC1vZmZzZXQgem9uZSBzcGVjaWZpZWQgaW4gdGhlIHN0cmluZyBpdHNlbGYsIGlmIGl0IHNwZWNpZmllcyBvbmVcbiAgICogQHBhcmFtIHtzdHJpbmd9IFtvcHRzLmxvY2FsZT0nc3lzdGVtJ3MgbG9jYWxlJ10gLSBhIGxvY2FsZSB0byBzZXQgb24gdGhlIHJlc3VsdGluZyBEYXRlVGltZSBpbnN0YW5jZVxuICAgKiBAcGFyYW0ge3N0cmluZ30gb3B0cy5vdXRwdXRDYWxlbmRhciAtIHRoZSBvdXRwdXQgY2FsZW5kYXIgdG8gc2V0IG9uIHRoZSByZXN1bHRpbmcgRGF0ZVRpbWUgaW5zdGFuY2VcbiAgICogQHBhcmFtIHtzdHJpbmd9IG9wdHMubnVtYmVyaW5nU3lzdGVtIC0gdGhlIG51bWJlcmluZyBzeXN0ZW0gdG8gc2V0IG9uIHRoZSByZXN1bHRpbmcgRGF0ZVRpbWUgaW5zdGFuY2VcbiAgICogQGV4YW1wbGUgRGF0ZVRpbWUuZnJvbVJGQzI4MjIoJzI1IE5vdiAyMDE2IDEzOjIzOjEyIEdNVCcpXG4gICAqIEBleGFtcGxlIERhdGVUaW1lLmZyb21SRkMyODIyKCdGcmksIDI1IE5vdiAyMDE2IDEzOjIzOjEyICswNjAwJylcbiAgICogQGV4YW1wbGUgRGF0ZVRpbWUuZnJvbVJGQzI4MjIoJzI1IE5vdiAyMDE2IDEzOjIzIFonKVxuICAgKiBAcmV0dXJuIHtEYXRlVGltZX1cbiAgICovXG4gIDtcblxuICBEYXRlVGltZS5mcm9tUkZDMjgyMiA9IGZ1bmN0aW9uIGZyb21SRkMyODIyKHRleHQsIG9wdHMpIHtcbiAgICBpZiAob3B0cyA9PT0gdm9pZCAwKSB7XG4gICAgICBvcHRzID0ge307XG4gICAgfVxuXG4gICAgdmFyIF9wYXJzZVJGQzI4MjJEYXRlID0gcGFyc2VSRkMyODIyRGF0ZSh0ZXh0KSxcbiAgICAgICAgdmFscyA9IF9wYXJzZVJGQzI4MjJEYXRlWzBdLFxuICAgICAgICBwYXJzZWRab25lID0gX3BhcnNlUkZDMjgyMkRhdGVbMV07XG5cbiAgICByZXR1cm4gcGFyc2VEYXRhVG9EYXRlVGltZSh2YWxzLCBwYXJzZWRab25lLCBvcHRzLCBcIlJGQyAyODIyXCIsIHRleHQpO1xuICB9XG4gIC8qKlxuICAgKiBDcmVhdGUgYSBEYXRlVGltZSBmcm9tIGFuIEhUVFAgaGVhZGVyIGRhdGVcbiAgICogQHNlZSBodHRwczovL3d3dy53My5vcmcvUHJvdG9jb2xzL3JmYzI2MTYvcmZjMjYxNi1zZWMzLmh0bWwjc2VjMy4zLjFcbiAgICogQHBhcmFtIHtzdHJpbmd9IHRleHQgLSB0aGUgSFRUUCBoZWFkZXIgZGF0ZVxuICAgKiBAcGFyYW0ge09iamVjdH0gb3B0cyAtIG9wdGlvbnMgdG8gYWZmZWN0IHRoZSBjcmVhdGlvblxuICAgKiBAcGFyYW0ge3N0cmluZ3xab25lfSBbb3B0cy56b25lPSdsb2NhbCddIC0gY29udmVydCB0aGUgdGltZSB0byB0aGlzIHpvbmUuIFNpbmNlIEhUVFAgZGF0ZXMgYXJlIGFsd2F5cyBpbiBVVEMsIHRoaXMgaGFzIG5vIGVmZmVjdCBvbiB0aGUgaW50ZXJwcmV0YXRpb24gb2Ygc3RyaW5nLCBtZXJlbHkgdGhlIHpvbmUgdGhlIHJlc3VsdGluZyBEYXRlVGltZSBpcyBleHByZXNzZWQgaW4uXG4gICAqIEBwYXJhbSB7Ym9vbGVhbn0gW29wdHMuc2V0Wm9uZT1mYWxzZV0gLSBvdmVycmlkZSB0aGUgem9uZSB3aXRoIHRoZSBmaXhlZC1vZmZzZXQgem9uZSBzcGVjaWZpZWQgaW4gdGhlIHN0cmluZy4gRm9yIEhUVFAgZGF0ZXMsIHRoaXMgaXMgYWx3YXlzIFVUQywgc28gdGhpcyBvcHRpb24gaXMgZXF1aXZhbGVudCB0byBzZXR0aW5nIHRoZSBgem9uZWAgb3B0aW9uIHRvICd1dGMnLCBidXQgdGhpcyBvcHRpb24gaXMgaW5jbHVkZWQgZm9yIGNvbnNpc3RlbmN5IHdpdGggc2ltaWxhciBtZXRob2RzLlxuICAgKiBAcGFyYW0ge3N0cmluZ30gW29wdHMubG9jYWxlPSdzeXN0ZW0ncyBsb2NhbGUnXSAtIGEgbG9jYWxlIHRvIHNldCBvbiB0aGUgcmVzdWx0aW5nIERhdGVUaW1lIGluc3RhbmNlXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBvcHRzLm91dHB1dENhbGVuZGFyIC0gdGhlIG91dHB1dCBjYWxlbmRhciB0byBzZXQgb24gdGhlIHJlc3VsdGluZyBEYXRlVGltZSBpbnN0YW5jZVxuICAgKiBAcGFyYW0ge3N0cmluZ30gb3B0cy5udW1iZXJpbmdTeXN0ZW0gLSB0aGUgbnVtYmVyaW5nIHN5c3RlbSB0byBzZXQgb24gdGhlIHJlc3VsdGluZyBEYXRlVGltZSBpbnN0YW5jZVxuICAgKiBAZXhhbXBsZSBEYXRlVGltZS5mcm9tSFRUUCgnU3VuLCAwNiBOb3YgMTk5NCAwODo0OTozNyBHTVQnKVxuICAgKiBAZXhhbXBsZSBEYXRlVGltZS5mcm9tSFRUUCgnU3VuZGF5LCAwNi1Ob3YtOTQgMDg6NDk6MzcgR01UJylcbiAgICogQGV4YW1wbGUgRGF0ZVRpbWUuZnJvbUhUVFAoJ1N1biBOb3YgIDYgMDg6NDk6MzcgMTk5NCcpXG4gICAqIEByZXR1cm4ge0RhdGVUaW1lfVxuICAgKi9cbiAgO1xuXG4gIERhdGVUaW1lLmZyb21IVFRQID0gZnVuY3Rpb24gZnJvbUhUVFAodGV4dCwgb3B0cykge1xuICAgIGlmIChvcHRzID09PSB2b2lkIDApIHtcbiAgICAgIG9wdHMgPSB7fTtcbiAgICB9XG5cbiAgICB2YXIgX3BhcnNlSFRUUERhdGUgPSBwYXJzZUhUVFBEYXRlKHRleHQpLFxuICAgICAgICB2YWxzID0gX3BhcnNlSFRUUERhdGVbMF0sXG4gICAgICAgIHBhcnNlZFpvbmUgPSBfcGFyc2VIVFRQRGF0ZVsxXTtcblxuICAgIHJldHVybiBwYXJzZURhdGFUb0RhdGVUaW1lKHZhbHMsIHBhcnNlZFpvbmUsIG9wdHMsIFwiSFRUUFwiLCBvcHRzKTtcbiAgfVxuICAvKipcbiAgICogQ3JlYXRlIGEgRGF0ZVRpbWUgZnJvbSBhbiBpbnB1dCBzdHJpbmcgYW5kIGZvcm1hdCBzdHJpbmcuXG4gICAqIERlZmF1bHRzIHRvIGVuLVVTIGlmIG5vIGxvY2FsZSBoYXMgYmVlbiBzcGVjaWZpZWQsIHJlZ2FyZGxlc3Mgb2YgdGhlIHN5c3RlbSdzIGxvY2FsZS4gRm9yIGEgdGFibGUgb2YgdG9rZW5zIGFuZCB0aGVpciBpbnRlcnByZXRhdGlvbnMsIHNlZSBbaGVyZV0oaHR0cHM6Ly9tb21lbnQuZ2l0aHViLmlvL2x1eG9uLyMvcGFyc2luZz9pZD10YWJsZS1vZi10b2tlbnMpLlxuICAgKiBAcGFyYW0ge3N0cmluZ30gdGV4dCAtIHRoZSBzdHJpbmcgdG8gcGFyc2VcbiAgICogQHBhcmFtIHtzdHJpbmd9IGZtdCAtIHRoZSBmb3JtYXQgdGhlIHN0cmluZyBpcyBleHBlY3RlZCB0byBiZSBpbiAoc2VlIHRoZSBsaW5rIGJlbG93IGZvciB0aGUgZm9ybWF0cylcbiAgICogQHBhcmFtIHtPYmplY3R9IG9wdHMgLSBvcHRpb25zIHRvIGFmZmVjdCB0aGUgY3JlYXRpb25cbiAgICogQHBhcmFtIHtzdHJpbmd8Wm9uZX0gW29wdHMuem9uZT0nbG9jYWwnXSAtIHVzZSB0aGlzIHpvbmUgaWYgbm8gb2Zmc2V0IGlzIHNwZWNpZmllZCBpbiB0aGUgaW5wdXQgc3RyaW5nIGl0c2VsZi4gV2lsbCBhbHNvIGNvbnZlcnQgdGhlIERhdGVUaW1lIHRvIHRoaXMgem9uZVxuICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHRzLnNldFpvbmU9ZmFsc2VdIC0gb3ZlcnJpZGUgdGhlIHpvbmUgd2l0aCBhIHpvbmUgc3BlY2lmaWVkIGluIHRoZSBzdHJpbmcgaXRzZWxmLCBpZiBpdCBzcGVjaWZpZXMgb25lXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBbb3B0cy5sb2NhbGU9J2VuLVVTJ10gLSBhIGxvY2FsZSBzdHJpbmcgdG8gdXNlIHdoZW4gcGFyc2luZy4gV2lsbCBhbHNvIHNldCB0aGUgRGF0ZVRpbWUgdG8gdGhpcyBsb2NhbGVcbiAgICogQHBhcmFtIHtzdHJpbmd9IG9wdHMubnVtYmVyaW5nU3lzdGVtIC0gdGhlIG51bWJlcmluZyBzeXN0ZW0gdG8gdXNlIHdoZW4gcGFyc2luZy4gV2lsbCBhbHNvIHNldCB0aGUgcmVzdWx0aW5nIERhdGVUaW1lIHRvIHRoaXMgbnVtYmVyaW5nIHN5c3RlbVxuICAgKiBAcGFyYW0ge3N0cmluZ30gb3B0cy5vdXRwdXRDYWxlbmRhciAtIHRoZSBvdXRwdXQgY2FsZW5kYXIgdG8gc2V0IG9uIHRoZSByZXN1bHRpbmcgRGF0ZVRpbWUgaW5zdGFuY2VcbiAgICogQHJldHVybiB7RGF0ZVRpbWV9XG4gICAqL1xuICA7XG5cbiAgRGF0ZVRpbWUuZnJvbUZvcm1hdCA9IGZ1bmN0aW9uIGZyb21Gb3JtYXQodGV4dCwgZm10LCBvcHRzKSB7XG4gICAgaWYgKG9wdHMgPT09IHZvaWQgMCkge1xuICAgICAgb3B0cyA9IHt9O1xuICAgIH1cblxuICAgIGlmIChpc1VuZGVmaW5lZCh0ZXh0KSB8fCBpc1VuZGVmaW5lZChmbXQpKSB7XG4gICAgICB0aHJvdyBuZXcgSW52YWxpZEFyZ3VtZW50RXJyb3IoXCJmcm9tRm9ybWF0IHJlcXVpcmVzIGFuIGlucHV0IHN0cmluZyBhbmQgYSBmb3JtYXRcIik7XG4gICAgfVxuXG4gICAgdmFyIF9vcHRzID0gb3B0cyxcbiAgICAgICAgX29wdHMkbG9jYWxlID0gX29wdHMubG9jYWxlLFxuICAgICAgICBsb2NhbGUgPSBfb3B0cyRsb2NhbGUgPT09IHZvaWQgMCA/IG51bGwgOiBfb3B0cyRsb2NhbGUsXG4gICAgICAgIF9vcHRzJG51bWJlcmluZ1N5c3RlbSA9IF9vcHRzLm51bWJlcmluZ1N5c3RlbSxcbiAgICAgICAgbnVtYmVyaW5nU3lzdGVtID0gX29wdHMkbnVtYmVyaW5nU3lzdGVtID09PSB2b2lkIDAgPyBudWxsIDogX29wdHMkbnVtYmVyaW5nU3lzdGVtLFxuICAgICAgICBsb2NhbGVUb1VzZSA9IExvY2FsZS5mcm9tT3B0cyh7XG4gICAgICBsb2NhbGU6IGxvY2FsZSxcbiAgICAgIG51bWJlcmluZ1N5c3RlbTogbnVtYmVyaW5nU3lzdGVtLFxuICAgICAgZGVmYXVsdFRvRU46IHRydWVcbiAgICB9KSxcbiAgICAgICAgX3BhcnNlRnJvbVRva2VucyA9IHBhcnNlRnJvbVRva2Vucyhsb2NhbGVUb1VzZSwgdGV4dCwgZm10KSxcbiAgICAgICAgdmFscyA9IF9wYXJzZUZyb21Ub2tlbnNbMF0sXG4gICAgICAgIHBhcnNlZFpvbmUgPSBfcGFyc2VGcm9tVG9rZW5zWzFdLFxuICAgICAgICBzcGVjaWZpY09mZnNldCA9IF9wYXJzZUZyb21Ub2tlbnNbMl0sXG4gICAgICAgIGludmFsaWQgPSBfcGFyc2VGcm9tVG9rZW5zWzNdO1xuXG4gICAgaWYgKGludmFsaWQpIHtcbiAgICAgIHJldHVybiBEYXRlVGltZS5pbnZhbGlkKGludmFsaWQpO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gcGFyc2VEYXRhVG9EYXRlVGltZSh2YWxzLCBwYXJzZWRab25lLCBvcHRzLCBcImZvcm1hdCBcIiArIGZtdCwgdGV4dCwgc3BlY2lmaWNPZmZzZXQpO1xuICAgIH1cbiAgfVxuICAvKipcbiAgICogQGRlcHJlY2F0ZWQgdXNlIGZyb21Gb3JtYXQgaW5zdGVhZFxuICAgKi9cbiAgO1xuXG4gIERhdGVUaW1lLmZyb21TdHJpbmcgPSBmdW5jdGlvbiBmcm9tU3RyaW5nKHRleHQsIGZtdCwgb3B0cykge1xuICAgIGlmIChvcHRzID09PSB2b2lkIDApIHtcbiAgICAgIG9wdHMgPSB7fTtcbiAgICB9XG5cbiAgICByZXR1cm4gRGF0ZVRpbWUuZnJvbUZvcm1hdCh0ZXh0LCBmbXQsIG9wdHMpO1xuICB9XG4gIC8qKlxuICAgKiBDcmVhdGUgYSBEYXRlVGltZSBmcm9tIGEgU1FMIGRhdGUsIHRpbWUsIG9yIGRhdGV0aW1lXG4gICAqIERlZmF1bHRzIHRvIGVuLVVTIGlmIG5vIGxvY2FsZSBoYXMgYmVlbiBzcGVjaWZpZWQsIHJlZ2FyZGxlc3Mgb2YgdGhlIHN5c3RlbSdzIGxvY2FsZVxuICAgKiBAcGFyYW0ge3N0cmluZ30gdGV4dCAtIHRoZSBzdHJpbmcgdG8gcGFyc2VcbiAgICogQHBhcmFtIHtPYmplY3R9IG9wdHMgLSBvcHRpb25zIHRvIGFmZmVjdCB0aGUgY3JlYXRpb25cbiAgICogQHBhcmFtIHtzdHJpbmd8Wm9uZX0gW29wdHMuem9uZT0nbG9jYWwnXSAtIHVzZSB0aGlzIHpvbmUgaWYgbm8gb2Zmc2V0IGlzIHNwZWNpZmllZCBpbiB0aGUgaW5wdXQgc3RyaW5nIGl0c2VsZi4gV2lsbCBhbHNvIGNvbnZlcnQgdGhlIERhdGVUaW1lIHRvIHRoaXMgem9uZVxuICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHRzLnNldFpvbmU9ZmFsc2VdIC0gb3ZlcnJpZGUgdGhlIHpvbmUgd2l0aCBhIHpvbmUgc3BlY2lmaWVkIGluIHRoZSBzdHJpbmcgaXRzZWxmLCBpZiBpdCBzcGVjaWZpZXMgb25lXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBbb3B0cy5sb2NhbGU9J2VuLVVTJ10gLSBhIGxvY2FsZSBzdHJpbmcgdG8gdXNlIHdoZW4gcGFyc2luZy4gV2lsbCBhbHNvIHNldCB0aGUgRGF0ZVRpbWUgdG8gdGhpcyBsb2NhbGVcbiAgICogQHBhcmFtIHtzdHJpbmd9IG9wdHMubnVtYmVyaW5nU3lzdGVtIC0gdGhlIG51bWJlcmluZyBzeXN0ZW0gdG8gdXNlIHdoZW4gcGFyc2luZy4gV2lsbCBhbHNvIHNldCB0aGUgcmVzdWx0aW5nIERhdGVUaW1lIHRvIHRoaXMgbnVtYmVyaW5nIHN5c3RlbVxuICAgKiBAcGFyYW0ge3N0cmluZ30gb3B0cy5vdXRwdXRDYWxlbmRhciAtIHRoZSBvdXRwdXQgY2FsZW5kYXIgdG8gc2V0IG9uIHRoZSByZXN1bHRpbmcgRGF0ZVRpbWUgaW5zdGFuY2VcbiAgICogQGV4YW1wbGUgRGF0ZVRpbWUuZnJvbVNRTCgnMjAxNy0wNS0xNScpXG4gICAqIEBleGFtcGxlIERhdGVUaW1lLmZyb21TUUwoJzIwMTctMDUtMTUgMDk6MTI6MzQnKVxuICAgKiBAZXhhbXBsZSBEYXRlVGltZS5mcm9tU1FMKCcyMDE3LTA1LTE1IDA5OjEyOjM0LjM0MicpXG4gICAqIEBleGFtcGxlIERhdGVUaW1lLmZyb21TUUwoJzIwMTctMDUtMTUgMDk6MTI6MzQuMzQyKzA2OjAwJylcbiAgICogQGV4YW1wbGUgRGF0ZVRpbWUuZnJvbVNRTCgnMjAxNy0wNS0xNSAwOToxMjozNC4zNDIgQW1lcmljYS9Mb3NfQW5nZWxlcycpXG4gICAqIEBleGFtcGxlIERhdGVUaW1lLmZyb21TUUwoJzIwMTctMDUtMTUgMDk6MTI6MzQuMzQyIEFtZXJpY2EvTG9zX0FuZ2VsZXMnLCB7IHNldFpvbmU6IHRydWUgfSlcbiAgICogQGV4YW1wbGUgRGF0ZVRpbWUuZnJvbVNRTCgnMjAxNy0wNS0xNSAwOToxMjozNC4zNDInLCB7IHpvbmU6ICdBbWVyaWNhL0xvc19BbmdlbGVzJyB9KVxuICAgKiBAZXhhbXBsZSBEYXRlVGltZS5mcm9tU1FMKCcwOToxMjozNC4zNDInKVxuICAgKiBAcmV0dXJuIHtEYXRlVGltZX1cbiAgICovXG4gIDtcblxuICBEYXRlVGltZS5mcm9tU1FMID0gZnVuY3Rpb24gZnJvbVNRTCh0ZXh0LCBvcHRzKSB7XG4gICAgaWYgKG9wdHMgPT09IHZvaWQgMCkge1xuICAgICAgb3B0cyA9IHt9O1xuICAgIH1cblxuICAgIHZhciBfcGFyc2VTUUwgPSBwYXJzZVNRTCh0ZXh0KSxcbiAgICAgICAgdmFscyA9IF9wYXJzZVNRTFswXSxcbiAgICAgICAgcGFyc2VkWm9uZSA9IF9wYXJzZVNRTFsxXTtcblxuICAgIHJldHVybiBwYXJzZURhdGFUb0RhdGVUaW1lKHZhbHMsIHBhcnNlZFpvbmUsIG9wdHMsIFwiU1FMXCIsIHRleHQpO1xuICB9XG4gIC8qKlxuICAgKiBDcmVhdGUgYW4gaW52YWxpZCBEYXRlVGltZS5cbiAgICogQHBhcmFtIHtzdHJpbmd9IHJlYXNvbiAtIHNpbXBsZSBzdHJpbmcgb2Ygd2h5IHRoaXMgRGF0ZVRpbWUgaXMgaW52YWxpZC4gU2hvdWxkIG5vdCBjb250YWluIHBhcmFtZXRlcnMgb3IgYW55dGhpbmcgZWxzZSBkYXRhLWRlcGVuZGVudFxuICAgKiBAcGFyYW0ge3N0cmluZ30gW2V4cGxhbmF0aW9uPW51bGxdIC0gbG9uZ2VyIGV4cGxhbmF0aW9uLCBtYXkgaW5jbHVkZSBwYXJhbWV0ZXJzIGFuZCBvdGhlciB1c2VmdWwgZGVidWdnaW5nIGluZm9ybWF0aW9uXG4gICAqIEByZXR1cm4ge0RhdGVUaW1lfVxuICAgKi9cbiAgO1xuXG4gIERhdGVUaW1lLmludmFsaWQgPSBmdW5jdGlvbiBpbnZhbGlkKHJlYXNvbiwgZXhwbGFuYXRpb24pIHtcbiAgICBpZiAoZXhwbGFuYXRpb24gPT09IHZvaWQgMCkge1xuICAgICAgZXhwbGFuYXRpb24gPSBudWxsO1xuICAgIH1cblxuICAgIGlmICghcmVhc29uKSB7XG4gICAgICB0aHJvdyBuZXcgSW52YWxpZEFyZ3VtZW50RXJyb3IoXCJuZWVkIHRvIHNwZWNpZnkgYSByZWFzb24gdGhlIERhdGVUaW1lIGlzIGludmFsaWRcIik7XG4gICAgfVxuXG4gICAgdmFyIGludmFsaWQgPSByZWFzb24gaW5zdGFuY2VvZiBJbnZhbGlkID8gcmVhc29uIDogbmV3IEludmFsaWQocmVhc29uLCBleHBsYW5hdGlvbik7XG5cbiAgICBpZiAoU2V0dGluZ3MudGhyb3dPbkludmFsaWQpIHtcbiAgICAgIHRocm93IG5ldyBJbnZhbGlkRGF0ZVRpbWVFcnJvcihpbnZhbGlkKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIG5ldyBEYXRlVGltZSh7XG4gICAgICAgIGludmFsaWQ6IGludmFsaWRcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuICAvKipcbiAgICogQ2hlY2sgaWYgYW4gb2JqZWN0IGlzIGEgRGF0ZVRpbWUuIFdvcmtzIGFjcm9zcyBjb250ZXh0IGJvdW5kYXJpZXNcbiAgICogQHBhcmFtIHtvYmplY3R9IG9cbiAgICogQHJldHVybiB7Ym9vbGVhbn1cbiAgICovXG4gIDtcblxuICBEYXRlVGltZS5pc0RhdGVUaW1lID0gZnVuY3Rpb24gaXNEYXRlVGltZShvKSB7XG4gICAgcmV0dXJuIG8gJiYgby5pc0x1eG9uRGF0ZVRpbWUgfHwgZmFsc2U7XG4gIH0gLy8gSU5GT1xuXG4gIC8qKlxuICAgKiBHZXQgdGhlIHZhbHVlIG9mIHVuaXQuXG4gICAqIEBwYXJhbSB7c3RyaW5nfSB1bml0IC0gYSB1bml0IHN1Y2ggYXMgJ21pbnV0ZScgb3IgJ2RheSdcbiAgICogQGV4YW1wbGUgRGF0ZVRpbWUubG9jYWwoMjAxNywgNywgNCkuZ2V0KCdtb250aCcpOyAvLz0+IDdcbiAgICogQGV4YW1wbGUgRGF0ZVRpbWUubG9jYWwoMjAxNywgNywgNCkuZ2V0KCdkYXknKTsgLy89PiA0XG4gICAqIEByZXR1cm4ge251bWJlcn1cbiAgICovXG4gIDtcblxuICB2YXIgX3Byb3RvID0gRGF0ZVRpbWUucHJvdG90eXBlO1xuXG4gIF9wcm90by5nZXQgPSBmdW5jdGlvbiBnZXQodW5pdCkge1xuICAgIHJldHVybiB0aGlzW3VuaXRdO1xuICB9XG4gIC8qKlxuICAgKiBSZXR1cm5zIHdoZXRoZXIgdGhlIERhdGVUaW1lIGlzIHZhbGlkLiBJbnZhbGlkIERhdGVUaW1lcyBvY2N1ciB3aGVuOlxuICAgKiAqIFRoZSBEYXRlVGltZSB3YXMgY3JlYXRlZCBmcm9tIGludmFsaWQgY2FsZW5kYXIgaW5mb3JtYXRpb24sIHN1Y2ggYXMgdGhlIDEzdGggbW9udGggb3IgRmVicnVhcnkgMzBcbiAgICogKiBUaGUgRGF0ZVRpbWUgd2FzIGNyZWF0ZWQgYnkgYW4gb3BlcmF0aW9uIG9uIGFub3RoZXIgaW52YWxpZCBkYXRlXG4gICAqIEB0eXBlIHtib29sZWFufVxuICAgKi9cbiAgO1xuXG4gIC8qKlxuICAgKiBSZXR1cm5zIHRoZSByZXNvbHZlZCBJbnRsIG9wdGlvbnMgZm9yIHRoaXMgRGF0ZVRpbWUuXG4gICAqIFRoaXMgaXMgdXNlZnVsIGluIHVuZGVyc3RhbmRpbmcgdGhlIGJlaGF2aW9yIG9mIGZvcm1hdHRpbmcgbWV0aG9kc1xuICAgKiBAcGFyYW0ge09iamVjdH0gb3B0cyAtIHRoZSBzYW1lIG9wdGlvbnMgYXMgdG9Mb2NhbGVTdHJpbmdcbiAgICogQHJldHVybiB7T2JqZWN0fVxuICAgKi9cbiAgX3Byb3RvLnJlc29sdmVkTG9jYWxlT3B0aW9ucyA9IGZ1bmN0aW9uIHJlc29sdmVkTG9jYWxlT3B0aW9ucyhvcHRzKSB7XG4gICAgaWYgKG9wdHMgPT09IHZvaWQgMCkge1xuICAgICAgb3B0cyA9IHt9O1xuICAgIH1cblxuICAgIHZhciBfRm9ybWF0dGVyJGNyZWF0ZSRyZXMgPSBGb3JtYXR0ZXIuY3JlYXRlKHRoaXMubG9jLmNsb25lKG9wdHMpLCBvcHRzKS5yZXNvbHZlZE9wdGlvbnModGhpcyksXG4gICAgICAgIGxvY2FsZSA9IF9Gb3JtYXR0ZXIkY3JlYXRlJHJlcy5sb2NhbGUsXG4gICAgICAgIG51bWJlcmluZ1N5c3RlbSA9IF9Gb3JtYXR0ZXIkY3JlYXRlJHJlcy5udW1iZXJpbmdTeXN0ZW0sXG4gICAgICAgIGNhbGVuZGFyID0gX0Zvcm1hdHRlciRjcmVhdGUkcmVzLmNhbGVuZGFyO1xuXG4gICAgcmV0dXJuIHtcbiAgICAgIGxvY2FsZTogbG9jYWxlLFxuICAgICAgbnVtYmVyaW5nU3lzdGVtOiBudW1iZXJpbmdTeXN0ZW0sXG4gICAgICBvdXRwdXRDYWxlbmRhcjogY2FsZW5kYXJcbiAgICB9O1xuICB9IC8vIFRSQU5TRk9STVxuXG4gIC8qKlxuICAgKiBcIlNldFwiIHRoZSBEYXRlVGltZSdzIHpvbmUgdG8gVVRDLiBSZXR1cm5zIGEgbmV3bHktY29uc3RydWN0ZWQgRGF0ZVRpbWUuXG4gICAqXG4gICAqIEVxdWl2YWxlbnQgdG8ge0BsaW5rIERhdGVUaW1lI3NldFpvbmV9KCd1dGMnKVxuICAgKiBAcGFyYW0ge251bWJlcn0gW29mZnNldD0wXSAtIG9wdGlvbmFsbHksIGFuIG9mZnNldCBmcm9tIFVUQyBpbiBtaW51dGVzXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0cz17fV0gLSBvcHRpb25zIHRvIHBhc3MgdG8gYHNldFpvbmUoKWBcbiAgICogQHJldHVybiB7RGF0ZVRpbWV9XG4gICAqL1xuICA7XG5cbiAgX3Byb3RvLnRvVVRDID0gZnVuY3Rpb24gdG9VVEMob2Zmc2V0LCBvcHRzKSB7XG4gICAgaWYgKG9mZnNldCA9PT0gdm9pZCAwKSB7XG4gICAgICBvZmZzZXQgPSAwO1xuICAgIH1cblxuICAgIGlmIChvcHRzID09PSB2b2lkIDApIHtcbiAgICAgIG9wdHMgPSB7fTtcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcy5zZXRab25lKEZpeGVkT2Zmc2V0Wm9uZS5pbnN0YW5jZShvZmZzZXQpLCBvcHRzKTtcbiAgfVxuICAvKipcbiAgICogXCJTZXRcIiB0aGUgRGF0ZVRpbWUncyB6b25lIHRvIHRoZSBob3N0J3MgbG9jYWwgem9uZS4gUmV0dXJucyBhIG5ld2x5LWNvbnN0cnVjdGVkIERhdGVUaW1lLlxuICAgKlxuICAgKiBFcXVpdmFsZW50IHRvIGBzZXRab25lKCdsb2NhbCcpYFxuICAgKiBAcmV0dXJuIHtEYXRlVGltZX1cbiAgICovXG4gIDtcblxuICBfcHJvdG8udG9Mb2NhbCA9IGZ1bmN0aW9uIHRvTG9jYWwoKSB7XG4gICAgcmV0dXJuIHRoaXMuc2V0Wm9uZShTZXR0aW5ncy5kZWZhdWx0Wm9uZSk7XG4gIH1cbiAgLyoqXG4gICAqIFwiU2V0XCIgdGhlIERhdGVUaW1lJ3Mgem9uZSB0byBzcGVjaWZpZWQgem9uZS4gUmV0dXJucyBhIG5ld2x5LWNvbnN0cnVjdGVkIERhdGVUaW1lLlxuICAgKlxuICAgKiBCeSBkZWZhdWx0LCB0aGUgc2V0dGVyIGtlZXBzIHRoZSB1bmRlcmx5aW5nIHRpbWUgdGhlIHNhbWUgKGFzIGluLCB0aGUgc2FtZSB0aW1lc3RhbXApLCBidXQgdGhlIG5ldyBpbnN0YW5jZSB3aWxsIHJlcG9ydCBkaWZmZXJlbnQgbG9jYWwgdGltZXMgYW5kIGNvbnNpZGVyIERTVHMgd2hlbiBtYWtpbmcgY29tcHV0YXRpb25zLCBhcyB3aXRoIHtAbGluayBEYXRlVGltZSNwbHVzfS4gWW91IG1heSB3aXNoIHRvIHVzZSB7QGxpbmsgRGF0ZVRpbWUjdG9Mb2NhbH0gYW5kIHtAbGluayBEYXRlVGltZSN0b1VUQ30gd2hpY2ggcHJvdmlkZSBzaW1wbGUgY29udmVuaWVuY2Ugd3JhcHBlcnMgZm9yIGNvbW1vbmx5IHVzZWQgem9uZXMuXG4gICAqIEBwYXJhbSB7c3RyaW5nfFpvbmV9IFt6b25lPSdsb2NhbCddIC0gYSB6b25lIGlkZW50aWZpZXIuIEFzIGEgc3RyaW5nLCB0aGF0IGNhbiBiZSBhbnkgSUFOQSB6b25lIHN1cHBvcnRlZCBieSB0aGUgaG9zdCBlbnZpcm9ubWVudCwgb3IgYSBmaXhlZC1vZmZzZXQgbmFtZSBvZiB0aGUgZm9ybSAnVVRDKzMnLCBvciB0aGUgc3RyaW5ncyAnbG9jYWwnIG9yICd1dGMnLiBZb3UgbWF5IGFsc28gc3VwcGx5IGFuIGluc3RhbmNlIG9mIGEge0BsaW5rIERhdGVUaW1lI1pvbmV9IGNsYXNzLlxuICAgKiBAcGFyYW0ge09iamVjdH0gb3B0cyAtIG9wdGlvbnNcbiAgICogQHBhcmFtIHtib29sZWFufSBbb3B0cy5rZWVwTG9jYWxUaW1lPWZhbHNlXSAtIElmIHRydWUsIGFkanVzdCB0aGUgdW5kZXJseWluZyB0aW1lIHNvIHRoYXQgdGhlIGxvY2FsIHRpbWUgc3RheXMgdGhlIHNhbWUsIGJ1dCBpbiB0aGUgdGFyZ2V0IHpvbmUuIFlvdSBzaG91bGQgcmFyZWx5IG5lZWQgdGhpcy5cbiAgICogQHJldHVybiB7RGF0ZVRpbWV9XG4gICAqL1xuICA7XG5cbiAgX3Byb3RvLnNldFpvbmUgPSBmdW5jdGlvbiBzZXRab25lKHpvbmUsIF90ZW1wKSB7XG4gICAgdmFyIF9yZWYyID0gX3RlbXAgPT09IHZvaWQgMCA/IHt9IDogX3RlbXAsXG4gICAgICAgIF9yZWYyJGtlZXBMb2NhbFRpbWUgPSBfcmVmMi5rZWVwTG9jYWxUaW1lLFxuICAgICAgICBrZWVwTG9jYWxUaW1lID0gX3JlZjIka2VlcExvY2FsVGltZSA9PT0gdm9pZCAwID8gZmFsc2UgOiBfcmVmMiRrZWVwTG9jYWxUaW1lLFxuICAgICAgICBfcmVmMiRrZWVwQ2FsZW5kYXJUaW0gPSBfcmVmMi5rZWVwQ2FsZW5kYXJUaW1lLFxuICAgICAgICBrZWVwQ2FsZW5kYXJUaW1lID0gX3JlZjIka2VlcENhbGVuZGFyVGltID09PSB2b2lkIDAgPyBmYWxzZSA6IF9yZWYyJGtlZXBDYWxlbmRhclRpbTtcblxuICAgIHpvbmUgPSBub3JtYWxpemVab25lKHpvbmUsIFNldHRpbmdzLmRlZmF1bHRab25lKTtcblxuICAgIGlmICh6b25lLmVxdWFscyh0aGlzLnpvbmUpKSB7XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9IGVsc2UgaWYgKCF6b25lLmlzVmFsaWQpIHtcbiAgICAgIHJldHVybiBEYXRlVGltZS5pbnZhbGlkKHVuc3VwcG9ydGVkWm9uZSh6b25lKSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHZhciBuZXdUUyA9IHRoaXMudHM7XG5cbiAgICAgIGlmIChrZWVwTG9jYWxUaW1lIHx8IGtlZXBDYWxlbmRhclRpbWUpIHtcbiAgICAgICAgdmFyIG9mZnNldEd1ZXNzID0gem9uZS5vZmZzZXQodGhpcy50cyk7XG4gICAgICAgIHZhciBhc09iaiA9IHRoaXMudG9PYmplY3QoKTtcblxuICAgICAgICB2YXIgX29ialRvVFMzID0gb2JqVG9UUyhhc09iaiwgb2Zmc2V0R3Vlc3MsIHpvbmUpO1xuXG4gICAgICAgIG5ld1RTID0gX29ialRvVFMzWzBdO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gY2xvbmUodGhpcywge1xuICAgICAgICB0czogbmV3VFMsXG4gICAgICAgIHpvbmU6IHpvbmVcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuICAvKipcbiAgICogXCJTZXRcIiB0aGUgbG9jYWxlLCBudW1iZXJpbmdTeXN0ZW0sIG9yIG91dHB1dENhbGVuZGFyLiBSZXR1cm5zIGEgbmV3bHktY29uc3RydWN0ZWQgRGF0ZVRpbWUuXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBwcm9wZXJ0aWVzIC0gdGhlIHByb3BlcnRpZXMgdG8gc2V0XG4gICAqIEBleGFtcGxlIERhdGVUaW1lLmxvY2FsKDIwMTcsIDUsIDI1KS5yZWNvbmZpZ3VyZSh7IGxvY2FsZTogJ2VuLUdCJyB9KVxuICAgKiBAcmV0dXJuIHtEYXRlVGltZX1cbiAgICovXG4gIDtcblxuICBfcHJvdG8ucmVjb25maWd1cmUgPSBmdW5jdGlvbiByZWNvbmZpZ3VyZShfdGVtcDIpIHtcbiAgICB2YXIgX3JlZjMgPSBfdGVtcDIgPT09IHZvaWQgMCA/IHt9IDogX3RlbXAyLFxuICAgICAgICBsb2NhbGUgPSBfcmVmMy5sb2NhbGUsXG4gICAgICAgIG51bWJlcmluZ1N5c3RlbSA9IF9yZWYzLm51bWJlcmluZ1N5c3RlbSxcbiAgICAgICAgb3V0cHV0Q2FsZW5kYXIgPSBfcmVmMy5vdXRwdXRDYWxlbmRhcjtcblxuICAgIHZhciBsb2MgPSB0aGlzLmxvYy5jbG9uZSh7XG4gICAgICBsb2NhbGU6IGxvY2FsZSxcbiAgICAgIG51bWJlcmluZ1N5c3RlbTogbnVtYmVyaW5nU3lzdGVtLFxuICAgICAgb3V0cHV0Q2FsZW5kYXI6IG91dHB1dENhbGVuZGFyXG4gICAgfSk7XG4gICAgcmV0dXJuIGNsb25lKHRoaXMsIHtcbiAgICAgIGxvYzogbG9jXG4gICAgfSk7XG4gIH1cbiAgLyoqXG4gICAqIFwiU2V0XCIgdGhlIGxvY2FsZS4gUmV0dXJucyBhIG5ld2x5LWNvbnN0cnVjdGVkIERhdGVUaW1lLlxuICAgKiBKdXN0IGEgY29udmVuaWVudCBhbGlhcyBmb3IgcmVjb25maWd1cmUoeyBsb2NhbGUgfSlcbiAgICogQGV4YW1wbGUgRGF0ZVRpbWUubG9jYWwoMjAxNywgNSwgMjUpLnNldExvY2FsZSgnZW4tR0InKVxuICAgKiBAcmV0dXJuIHtEYXRlVGltZX1cbiAgICovXG4gIDtcblxuICBfcHJvdG8uc2V0TG9jYWxlID0gZnVuY3Rpb24gc2V0TG9jYWxlKGxvY2FsZSkge1xuICAgIHJldHVybiB0aGlzLnJlY29uZmlndXJlKHtcbiAgICAgIGxvY2FsZTogbG9jYWxlXG4gICAgfSk7XG4gIH1cbiAgLyoqXG4gICAqIFwiU2V0XCIgdGhlIHZhbHVlcyBvZiBzcGVjaWZpZWQgdW5pdHMuIFJldHVybnMgYSBuZXdseS1jb25zdHJ1Y3RlZCBEYXRlVGltZS5cbiAgICogWW91IGNhbiBvbmx5IHNldCB1bml0cyB3aXRoIHRoaXMgbWV0aG9kOyBmb3IgXCJzZXR0aW5nXCIgbWV0YWRhdGEsIHNlZSB7QGxpbmsgRGF0ZVRpbWUjcmVjb25maWd1cmV9IGFuZCB7QGxpbmsgRGF0ZVRpbWUjc2V0Wm9uZX0uXG4gICAqIEBwYXJhbSB7T2JqZWN0fSB2YWx1ZXMgLSBhIG1hcHBpbmcgb2YgdW5pdHMgdG8gbnVtYmVyc1xuICAgKiBAZXhhbXBsZSBkdC5zZXQoeyB5ZWFyOiAyMDE3IH0pXG4gICAqIEBleGFtcGxlIGR0LnNldCh7IGhvdXI6IDgsIG1pbnV0ZTogMzAgfSlcbiAgICogQGV4YW1wbGUgZHQuc2V0KHsgd2Vla2RheTogNSB9KVxuICAgKiBAZXhhbXBsZSBkdC5zZXQoeyB5ZWFyOiAyMDA1LCBvcmRpbmFsOiAyMzQgfSlcbiAgICogQHJldHVybiB7RGF0ZVRpbWV9XG4gICAqL1xuICA7XG5cbiAgX3Byb3RvLnNldCA9IGZ1bmN0aW9uIHNldCh2YWx1ZXMpIHtcbiAgICBpZiAoIXRoaXMuaXNWYWxpZCkgcmV0dXJuIHRoaXM7XG4gICAgdmFyIG5vcm1hbGl6ZWQgPSBub3JtYWxpemVPYmplY3QodmFsdWVzLCBub3JtYWxpemVVbml0KSxcbiAgICAgICAgc2V0dGluZ1dlZWtTdHVmZiA9ICFpc1VuZGVmaW5lZChub3JtYWxpemVkLndlZWtZZWFyKSB8fCAhaXNVbmRlZmluZWQobm9ybWFsaXplZC53ZWVrTnVtYmVyKSB8fCAhaXNVbmRlZmluZWQobm9ybWFsaXplZC53ZWVrZGF5KSxcbiAgICAgICAgY29udGFpbnNPcmRpbmFsID0gIWlzVW5kZWZpbmVkKG5vcm1hbGl6ZWQub3JkaW5hbCksXG4gICAgICAgIGNvbnRhaW5zR3JlZ29yWWVhciA9ICFpc1VuZGVmaW5lZChub3JtYWxpemVkLnllYXIpLFxuICAgICAgICBjb250YWluc0dyZWdvck1EID0gIWlzVW5kZWZpbmVkKG5vcm1hbGl6ZWQubW9udGgpIHx8ICFpc1VuZGVmaW5lZChub3JtYWxpemVkLmRheSksXG4gICAgICAgIGNvbnRhaW5zR3JlZ29yID0gY29udGFpbnNHcmVnb3JZZWFyIHx8IGNvbnRhaW5zR3JlZ29yTUQsXG4gICAgICAgIGRlZmluaXRlV2Vla0RlZiA9IG5vcm1hbGl6ZWQud2Vla1llYXIgfHwgbm9ybWFsaXplZC53ZWVrTnVtYmVyO1xuXG4gICAgaWYgKChjb250YWluc0dyZWdvciB8fCBjb250YWluc09yZGluYWwpICYmIGRlZmluaXRlV2Vla0RlZikge1xuICAgICAgdGhyb3cgbmV3IENvbmZsaWN0aW5nU3BlY2lmaWNhdGlvbkVycm9yKFwiQ2FuJ3QgbWl4IHdlZWtZZWFyL3dlZWtOdW1iZXIgdW5pdHMgd2l0aCB5ZWFyL21vbnRoL2RheSBvciBvcmRpbmFsc1wiKTtcbiAgICB9XG5cbiAgICBpZiAoY29udGFpbnNHcmVnb3JNRCAmJiBjb250YWluc09yZGluYWwpIHtcbiAgICAgIHRocm93IG5ldyBDb25mbGljdGluZ1NwZWNpZmljYXRpb25FcnJvcihcIkNhbid0IG1peCBvcmRpbmFsIGRhdGVzIHdpdGggbW9udGgvZGF5XCIpO1xuICAgIH1cblxuICAgIHZhciBtaXhlZDtcblxuICAgIGlmIChzZXR0aW5nV2Vla1N0dWZmKSB7XG4gICAgICBtaXhlZCA9IHdlZWtUb0dyZWdvcmlhbihfZXh0ZW5kcyh7fSwgZ3JlZ29yaWFuVG9XZWVrKHRoaXMuYyksIG5vcm1hbGl6ZWQpKTtcbiAgICB9IGVsc2UgaWYgKCFpc1VuZGVmaW5lZChub3JtYWxpemVkLm9yZGluYWwpKSB7XG4gICAgICBtaXhlZCA9IG9yZGluYWxUb0dyZWdvcmlhbihfZXh0ZW5kcyh7fSwgZ3JlZ29yaWFuVG9PcmRpbmFsKHRoaXMuYyksIG5vcm1hbGl6ZWQpKTtcbiAgICB9IGVsc2Uge1xuICAgICAgbWl4ZWQgPSBfZXh0ZW5kcyh7fSwgdGhpcy50b09iamVjdCgpLCBub3JtYWxpemVkKTsgLy8gaWYgd2UgZGlkbid0IHNldCB0aGUgZGF5IGJ1dCB3ZSBlbmRlZCB1cCBvbiBhbiBvdmVyZmxvdyBkYXRlLFxuICAgICAgLy8gdXNlIHRoZSBsYXN0IGRheSBvZiB0aGUgcmlnaHQgbW9udGhcblxuICAgICAgaWYgKGlzVW5kZWZpbmVkKG5vcm1hbGl6ZWQuZGF5KSkge1xuICAgICAgICBtaXhlZC5kYXkgPSBNYXRoLm1pbihkYXlzSW5Nb250aChtaXhlZC55ZWFyLCBtaXhlZC5tb250aCksIG1peGVkLmRheSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgdmFyIF9vYmpUb1RTNCA9IG9ialRvVFMobWl4ZWQsIHRoaXMubywgdGhpcy56b25lKSxcbiAgICAgICAgdHMgPSBfb2JqVG9UUzRbMF0sXG4gICAgICAgIG8gPSBfb2JqVG9UUzRbMV07XG5cbiAgICByZXR1cm4gY2xvbmUodGhpcywge1xuICAgICAgdHM6IHRzLFxuICAgICAgbzogb1xuICAgIH0pO1xuICB9XG4gIC8qKlxuICAgKiBBZGQgYSBwZXJpb2Qgb2YgdGltZSB0byB0aGlzIERhdGVUaW1lIGFuZCByZXR1cm4gdGhlIHJlc3VsdGluZyBEYXRlVGltZVxuICAgKlxuICAgKiBBZGRpbmcgaG91cnMsIG1pbnV0ZXMsIHNlY29uZHMsIG9yIG1pbGxpc2Vjb25kcyBpbmNyZWFzZXMgdGhlIHRpbWVzdGFtcCBieSB0aGUgcmlnaHQgbnVtYmVyIG9mIG1pbGxpc2Vjb25kcy4gQWRkaW5nIGRheXMsIG1vbnRocywgb3IgeWVhcnMgc2hpZnRzIHRoZSBjYWxlbmRhciwgYWNjb3VudGluZyBmb3IgRFNUcyBhbmQgbGVhcCB5ZWFycyBhbG9uZyB0aGUgd2F5LiBUaHVzLCBgZHQucGx1cyh7IGhvdXJzOiAyNCB9KWAgbWF5IHJlc3VsdCBpbiBhIGRpZmZlcmVudCB0aW1lIHRoYW4gYGR0LnBsdXMoeyBkYXlzOiAxIH0pYCBpZiB0aGVyZSdzIGEgRFNUIHNoaWZ0IGluIGJldHdlZW4uXG4gICAqIEBwYXJhbSB7RHVyYXRpb258T2JqZWN0fG51bWJlcn0gZHVyYXRpb24gLSBUaGUgYW1vdW50IHRvIGFkZC4gRWl0aGVyIGEgTHV4b24gRHVyYXRpb24sIGEgbnVtYmVyIG9mIG1pbGxpc2Vjb25kcywgdGhlIG9iamVjdCBhcmd1bWVudCB0byBEdXJhdGlvbi5mcm9tT2JqZWN0KClcbiAgICogQGV4YW1wbGUgRGF0ZVRpbWUubm93KCkucGx1cygxMjMpIC8vfj4gaW4gMTIzIG1pbGxpc2Vjb25kc1xuICAgKiBAZXhhbXBsZSBEYXRlVGltZS5ub3coKS5wbHVzKHsgbWludXRlczogMTUgfSkgLy9+PiBpbiAxNSBtaW51dGVzXG4gICAqIEBleGFtcGxlIERhdGVUaW1lLm5vdygpLnBsdXMoeyBkYXlzOiAxIH0pIC8vfj4gdGhpcyB0aW1lIHRvbW9ycm93XG4gICAqIEBleGFtcGxlIERhdGVUaW1lLm5vdygpLnBsdXMoeyBkYXlzOiAtMSB9KSAvL34+IHRoaXMgdGltZSB5ZXN0ZXJkYXlcbiAgICogQGV4YW1wbGUgRGF0ZVRpbWUubm93KCkucGx1cyh7IGhvdXJzOiAzLCBtaW51dGVzOiAxMyB9KSAvL34+IGluIDMgaHIsIDEzIG1pblxuICAgKiBAZXhhbXBsZSBEYXRlVGltZS5ub3coKS5wbHVzKER1cmF0aW9uLmZyb21PYmplY3QoeyBob3VyczogMywgbWludXRlczogMTMgfSkpIC8vfj4gaW4gMyBociwgMTMgbWluXG4gICAqIEByZXR1cm4ge0RhdGVUaW1lfVxuICAgKi9cbiAgO1xuXG4gIF9wcm90by5wbHVzID0gZnVuY3Rpb24gcGx1cyhkdXJhdGlvbikge1xuICAgIGlmICghdGhpcy5pc1ZhbGlkKSByZXR1cm4gdGhpcztcbiAgICB2YXIgZHVyID0gRHVyYXRpb24uZnJvbUR1cmF0aW9uTGlrZShkdXJhdGlvbik7XG4gICAgcmV0dXJuIGNsb25lKHRoaXMsIGFkanVzdFRpbWUodGhpcywgZHVyKSk7XG4gIH1cbiAgLyoqXG4gICAqIFN1YnRyYWN0IGEgcGVyaW9kIG9mIHRpbWUgdG8gdGhpcyBEYXRlVGltZSBhbmQgcmV0dXJuIHRoZSByZXN1bHRpbmcgRGF0ZVRpbWVcbiAgICogU2VlIHtAbGluayBEYXRlVGltZSNwbHVzfVxuICAgKiBAcGFyYW0ge0R1cmF0aW9ufE9iamVjdHxudW1iZXJ9IGR1cmF0aW9uIC0gVGhlIGFtb3VudCB0byBzdWJ0cmFjdC4gRWl0aGVyIGEgTHV4b24gRHVyYXRpb24sIGEgbnVtYmVyIG9mIG1pbGxpc2Vjb25kcywgdGhlIG9iamVjdCBhcmd1bWVudCB0byBEdXJhdGlvbi5mcm9tT2JqZWN0KClcbiAgIEByZXR1cm4ge0RhdGVUaW1lfVxuICAgKi9cbiAgO1xuXG4gIF9wcm90by5taW51cyA9IGZ1bmN0aW9uIG1pbnVzKGR1cmF0aW9uKSB7XG4gICAgaWYgKCF0aGlzLmlzVmFsaWQpIHJldHVybiB0aGlzO1xuICAgIHZhciBkdXIgPSBEdXJhdGlvbi5mcm9tRHVyYXRpb25MaWtlKGR1cmF0aW9uKS5uZWdhdGUoKTtcbiAgICByZXR1cm4gY2xvbmUodGhpcywgYWRqdXN0VGltZSh0aGlzLCBkdXIpKTtcbiAgfVxuICAvKipcbiAgICogXCJTZXRcIiB0aGlzIERhdGVUaW1lIHRvIHRoZSBiZWdpbm5pbmcgb2YgYSB1bml0IG9mIHRpbWUuXG4gICAqIEBwYXJhbSB7c3RyaW5nfSB1bml0IC0gVGhlIHVuaXQgdG8gZ28gdG8gdGhlIGJlZ2lubmluZyBvZi4gQ2FuIGJlICd5ZWFyJywgJ3F1YXJ0ZXInLCAnbW9udGgnLCAnd2VlaycsICdkYXknLCAnaG91cicsICdtaW51dGUnLCAnc2Vjb25kJywgb3IgJ21pbGxpc2Vjb25kJy5cbiAgICogQGV4YW1wbGUgRGF0ZVRpbWUubG9jYWwoMjAxNCwgMywgMykuc3RhcnRPZignbW9udGgnKS50b0lTT0RhdGUoKTsgLy89PiAnMjAxNC0wMy0wMSdcbiAgICogQGV4YW1wbGUgRGF0ZVRpbWUubG9jYWwoMjAxNCwgMywgMykuc3RhcnRPZigneWVhcicpLnRvSVNPRGF0ZSgpOyAvLz0+ICcyMDE0LTAxLTAxJ1xuICAgKiBAZXhhbXBsZSBEYXRlVGltZS5sb2NhbCgyMDE0LCAzLCAzKS5zdGFydE9mKCd3ZWVrJykudG9JU09EYXRlKCk7IC8vPT4gJzIwMTQtMDMtMDMnLCB3ZWVrcyBhbHdheXMgc3RhcnQgb24gTW9uZGF5c1xuICAgKiBAZXhhbXBsZSBEYXRlVGltZS5sb2NhbCgyMDE0LCAzLCAzLCA1LCAzMCkuc3RhcnRPZignZGF5JykudG9JU09UaW1lKCk7IC8vPT4gJzAwOjAwLjAwMC0wNTowMCdcbiAgICogQGV4YW1wbGUgRGF0ZVRpbWUubG9jYWwoMjAxNCwgMywgMywgNSwgMzApLnN0YXJ0T2YoJ2hvdXInKS50b0lTT1RpbWUoKTsgLy89PiAnMDU6MDA6MDAuMDAwLTA1OjAwJ1xuICAgKiBAcmV0dXJuIHtEYXRlVGltZX1cbiAgICovXG4gIDtcblxuICBfcHJvdG8uc3RhcnRPZiA9IGZ1bmN0aW9uIHN0YXJ0T2YodW5pdCkge1xuICAgIGlmICghdGhpcy5pc1ZhbGlkKSByZXR1cm4gdGhpcztcbiAgICB2YXIgbyA9IHt9LFxuICAgICAgICBub3JtYWxpemVkVW5pdCA9IER1cmF0aW9uLm5vcm1hbGl6ZVVuaXQodW5pdCk7XG5cbiAgICBzd2l0Y2ggKG5vcm1hbGl6ZWRVbml0KSB7XG4gICAgICBjYXNlIFwieWVhcnNcIjpcbiAgICAgICAgby5tb250aCA9IDE7XG4gICAgICAvLyBmYWxscyB0aHJvdWdoXG5cbiAgICAgIGNhc2UgXCJxdWFydGVyc1wiOlxuICAgICAgY2FzZSBcIm1vbnRoc1wiOlxuICAgICAgICBvLmRheSA9IDE7XG4gICAgICAvLyBmYWxscyB0aHJvdWdoXG5cbiAgICAgIGNhc2UgXCJ3ZWVrc1wiOlxuICAgICAgY2FzZSBcImRheXNcIjpcbiAgICAgICAgby5ob3VyID0gMDtcbiAgICAgIC8vIGZhbGxzIHRocm91Z2hcblxuICAgICAgY2FzZSBcImhvdXJzXCI6XG4gICAgICAgIG8ubWludXRlID0gMDtcbiAgICAgIC8vIGZhbGxzIHRocm91Z2hcblxuICAgICAgY2FzZSBcIm1pbnV0ZXNcIjpcbiAgICAgICAgby5zZWNvbmQgPSAwO1xuICAgICAgLy8gZmFsbHMgdGhyb3VnaFxuXG4gICAgICBjYXNlIFwic2Vjb25kc1wiOlxuICAgICAgICBvLm1pbGxpc2Vjb25kID0gMDtcbiAgICAgICAgYnJlYWs7XG4gICAgICAvLyBubyBkZWZhdWx0LCBpbnZhbGlkIHVuaXRzIHRocm93IGluIG5vcm1hbGl6ZVVuaXQoKVxuICAgIH1cblxuICAgIGlmIChub3JtYWxpemVkVW5pdCA9PT0gXCJ3ZWVrc1wiKSB7XG4gICAgICBvLndlZWtkYXkgPSAxO1xuICAgIH1cblxuICAgIGlmIChub3JtYWxpemVkVW5pdCA9PT0gXCJxdWFydGVyc1wiKSB7XG4gICAgICB2YXIgcSA9IE1hdGguY2VpbCh0aGlzLm1vbnRoIC8gMyk7XG4gICAgICBvLm1vbnRoID0gKHEgLSAxKSAqIDMgKyAxO1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzLnNldChvKTtcbiAgfVxuICAvKipcbiAgICogXCJTZXRcIiB0aGlzIERhdGVUaW1lIHRvIHRoZSBlbmQgKG1lYW5pbmcgdGhlIGxhc3QgbWlsbGlzZWNvbmQpIG9mIGEgdW5pdCBvZiB0aW1lXG4gICAqIEBwYXJhbSB7c3RyaW5nfSB1bml0IC0gVGhlIHVuaXQgdG8gZ28gdG8gdGhlIGVuZCBvZi4gQ2FuIGJlICd5ZWFyJywgJ3F1YXJ0ZXInLCAnbW9udGgnLCAnd2VlaycsICdkYXknLCAnaG91cicsICdtaW51dGUnLCAnc2Vjb25kJywgb3IgJ21pbGxpc2Vjb25kJy5cbiAgICogQGV4YW1wbGUgRGF0ZVRpbWUubG9jYWwoMjAxNCwgMywgMykuZW5kT2YoJ21vbnRoJykudG9JU08oKTsgLy89PiAnMjAxNC0wMy0zMVQyMzo1OTo1OS45OTktMDU6MDAnXG4gICAqIEBleGFtcGxlIERhdGVUaW1lLmxvY2FsKDIwMTQsIDMsIDMpLmVuZE9mKCd5ZWFyJykudG9JU08oKTsgLy89PiAnMjAxNC0xMi0zMVQyMzo1OTo1OS45OTktMDU6MDAnXG4gICAqIEBleGFtcGxlIERhdGVUaW1lLmxvY2FsKDIwMTQsIDMsIDMpLmVuZE9mKCd3ZWVrJykudG9JU08oKTsgLy8gPT4gJzIwMTQtMDMtMDlUMjM6NTk6NTkuOTk5LTA1OjAwJywgd2Vla3Mgc3RhcnQgb24gTW9uZGF5c1xuICAgKiBAZXhhbXBsZSBEYXRlVGltZS5sb2NhbCgyMDE0LCAzLCAzLCA1LCAzMCkuZW5kT2YoJ2RheScpLnRvSVNPKCk7IC8vPT4gJzIwMTQtMDMtMDNUMjM6NTk6NTkuOTk5LTA1OjAwJ1xuICAgKiBAZXhhbXBsZSBEYXRlVGltZS5sb2NhbCgyMDE0LCAzLCAzLCA1LCAzMCkuZW5kT2YoJ2hvdXInKS50b0lTTygpOyAvLz0+ICcyMDE0LTAzLTAzVDA1OjU5OjU5Ljk5OS0wNTowMCdcbiAgICogQHJldHVybiB7RGF0ZVRpbWV9XG4gICAqL1xuICA7XG5cbiAgX3Byb3RvLmVuZE9mID0gZnVuY3Rpb24gZW5kT2YodW5pdCkge1xuICAgIHZhciBfdGhpcyRwbHVzO1xuXG4gICAgcmV0dXJuIHRoaXMuaXNWYWxpZCA/IHRoaXMucGx1cygoX3RoaXMkcGx1cyA9IHt9LCBfdGhpcyRwbHVzW3VuaXRdID0gMSwgX3RoaXMkcGx1cykpLnN0YXJ0T2YodW5pdCkubWludXMoMSkgOiB0aGlzO1xuICB9IC8vIE9VVFBVVFxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIGEgc3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIHRoaXMgRGF0ZVRpbWUgZm9ybWF0dGVkIGFjY29yZGluZyB0byB0aGUgc3BlY2lmaWVkIGZvcm1hdCBzdHJpbmcuXG4gICAqICoqWW91IG1heSBub3Qgd2FudCB0aGlzLioqIFNlZSB7QGxpbmsgRGF0ZVRpbWUjdG9Mb2NhbGVTdHJpbmd9IGZvciBhIG1vcmUgZmxleGlibGUgZm9ybWF0dGluZyB0b29sLiBGb3IgYSB0YWJsZSBvZiB0b2tlbnMgYW5kIHRoZWlyIGludGVycHJldGF0aW9ucywgc2VlIFtoZXJlXShodHRwczovL21vbWVudC5naXRodWIuaW8vbHV4b24vIy9mb3JtYXR0aW5nP2lkPXRhYmxlLW9mLXRva2VucykuXG4gICAqIERlZmF1bHRzIHRvIGVuLVVTIGlmIG5vIGxvY2FsZSBoYXMgYmVlbiBzcGVjaWZpZWQsIHJlZ2FyZGxlc3Mgb2YgdGhlIHN5c3RlbSdzIGxvY2FsZS5cbiAgICogQHBhcmFtIHtzdHJpbmd9IGZtdCAtIHRoZSBmb3JtYXQgc3RyaW5nXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRzIC0gb3B0cyB0byBvdmVycmlkZSB0aGUgY29uZmlndXJhdGlvbiBvcHRpb25zIG9uIHRoaXMgRGF0ZVRpbWVcbiAgICogQGV4YW1wbGUgRGF0ZVRpbWUubm93KCkudG9Gb3JtYXQoJ3l5eXkgTExMIGRkJykgLy89PiAnMjAxNyBBcHIgMjInXG4gICAqIEBleGFtcGxlIERhdGVUaW1lLm5vdygpLnNldExvY2FsZSgnZnInKS50b0Zvcm1hdCgneXl5eSBMTEwgZGQnKSAvLz0+ICcyMDE3IGF2ci4gMjInXG4gICAqIEBleGFtcGxlIERhdGVUaW1lLm5vdygpLnRvRm9ybWF0KCd5eXl5IExMTCBkZCcsIHsgbG9jYWxlOiBcImZyXCIgfSkgLy89PiAnMjAxNyBhdnIuIDIyJ1xuICAgKiBAZXhhbXBsZSBEYXRlVGltZS5ub3coKS50b0Zvcm1hdChcIkhIICdob3VycyBhbmQnIG1tICdtaW51dGVzJ1wiKSAvLz0+ICcyMCBob3VycyBhbmQgNTUgbWludXRlcydcbiAgICogQHJldHVybiB7c3RyaW5nfVxuICAgKi9cbiAgO1xuXG4gIF9wcm90by50b0Zvcm1hdCA9IGZ1bmN0aW9uIHRvRm9ybWF0KGZtdCwgb3B0cykge1xuICAgIGlmIChvcHRzID09PSB2b2lkIDApIHtcbiAgICAgIG9wdHMgPSB7fTtcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcy5pc1ZhbGlkID8gRm9ybWF0dGVyLmNyZWF0ZSh0aGlzLmxvYy5yZWRlZmF1bHRUb0VOKG9wdHMpKS5mb3JtYXREYXRlVGltZUZyb21TdHJpbmcodGhpcywgZm10KSA6IElOVkFMSUQ7XG4gIH1cbiAgLyoqXG4gICAqIFJldHVybnMgYSBsb2NhbGl6ZWQgc3RyaW5nIHJlcHJlc2VudGluZyB0aGlzIGRhdGUuIEFjY2VwdHMgdGhlIHNhbWUgb3B0aW9ucyBhcyB0aGUgSW50bC5EYXRlVGltZUZvcm1hdCBjb25zdHJ1Y3RvciBhbmQgYW55IHByZXNldHMgZGVmaW5lZCBieSBMdXhvbiwgc3VjaCBhcyBgRGF0ZVRpbWUuREFURV9GVUxMYCBvciBgRGF0ZVRpbWUuVElNRV9TSU1QTEVgLlxuICAgKiBUaGUgZXhhY3QgYmVoYXZpb3Igb2YgdGhpcyBtZXRob2QgaXMgYnJvd3Nlci1zcGVjaWZpYywgYnV0IGluIGdlbmVyYWwgaXQgd2lsbCByZXR1cm4gYW4gYXBwcm9wcmlhdGUgcmVwcmVzZW50YXRpb25cbiAgICogb2YgdGhlIERhdGVUaW1lIGluIHRoZSBhc3NpZ25lZCBsb2NhbGUuXG4gICAqIERlZmF1bHRzIHRvIHRoZSBzeXN0ZW0ncyBsb2NhbGUgaWYgbm8gbG9jYWxlIGhhcyBiZWVuIHNwZWNpZmllZFxuICAgKiBAc2VlIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0phdmFTY3JpcHQvUmVmZXJlbmNlL0dsb2JhbF9PYmplY3RzL0RhdGVUaW1lRm9ybWF0XG4gICAqIEBwYXJhbSBmb3JtYXRPcHRzIHtPYmplY3R9IC0gSW50bC5EYXRlVGltZUZvcm1hdCBjb25zdHJ1Y3RvciBvcHRpb25zIGFuZCBjb25maWd1cmF0aW9uIG9wdGlvbnNcbiAgICogQHBhcmFtIHtPYmplY3R9IG9wdHMgLSBvcHRzIHRvIG92ZXJyaWRlIHRoZSBjb25maWd1cmF0aW9uIG9wdGlvbnMgb24gdGhpcyBEYXRlVGltZVxuICAgKiBAZXhhbXBsZSBEYXRlVGltZS5ub3coKS50b0xvY2FsZVN0cmluZygpOyAvLz0+IDQvMjAvMjAxN1xuICAgKiBAZXhhbXBsZSBEYXRlVGltZS5ub3coKS5zZXRMb2NhbGUoJ2VuLWdiJykudG9Mb2NhbGVTdHJpbmcoKTsgLy89PiAnMjAvMDQvMjAxNydcbiAgICogQGV4YW1wbGUgRGF0ZVRpbWUubm93KCkudG9Mb2NhbGVTdHJpbmcoeyBsb2NhbGU6ICdlbi1nYicgfSk7IC8vPT4gJzIwLzA0LzIwMTcnXG4gICAqIEBleGFtcGxlIERhdGVUaW1lLm5vdygpLnRvTG9jYWxlU3RyaW5nKERhdGVUaW1lLkRBVEVfRlVMTCk7IC8vPT4gJ0FwcmlsIDIwLCAyMDE3J1xuICAgKiBAZXhhbXBsZSBEYXRlVGltZS5ub3coKS50b0xvY2FsZVN0cmluZyhEYXRlVGltZS5USU1FX1NJTVBMRSk7IC8vPT4gJzExOjMyIEFNJ1xuICAgKiBAZXhhbXBsZSBEYXRlVGltZS5ub3coKS50b0xvY2FsZVN0cmluZyhEYXRlVGltZS5EQVRFVElNRV9TSE9SVCk7IC8vPT4gJzQvMjAvMjAxNywgMTE6MzIgQU0nXG4gICAqIEBleGFtcGxlIERhdGVUaW1lLm5vdygpLnRvTG9jYWxlU3RyaW5nKHsgd2Vla2RheTogJ2xvbmcnLCBtb250aDogJ2xvbmcnLCBkYXk6ICcyLWRpZ2l0JyB9KTsgLy89PiAnVGh1cnNkYXksIEFwcmlsIDIwJ1xuICAgKiBAZXhhbXBsZSBEYXRlVGltZS5ub3coKS50b0xvY2FsZVN0cmluZyh7IHdlZWtkYXk6ICdzaG9ydCcsIG1vbnRoOiAnc2hvcnQnLCBkYXk6ICcyLWRpZ2l0JywgaG91cjogJzItZGlnaXQnLCBtaW51dGU6ICcyLWRpZ2l0JyB9KTsgLy89PiAnVGh1LCBBcHIgMjAsIDExOjI3IEFNJ1xuICAgKiBAZXhhbXBsZSBEYXRlVGltZS5ub3coKS50b0xvY2FsZVN0cmluZyh7IGhvdXI6ICcyLWRpZ2l0JywgbWludXRlOiAnMi1kaWdpdCcsIGhvdXJDeWNsZTogJ2gyMycgfSk7IC8vPT4gJzExOjMyJ1xuICAgKiBAcmV0dXJuIHtzdHJpbmd9XG4gICAqL1xuICA7XG5cbiAgX3Byb3RvLnRvTG9jYWxlU3RyaW5nID0gZnVuY3Rpb24gdG9Mb2NhbGVTdHJpbmcoZm9ybWF0T3B0cywgb3B0cykge1xuICAgIGlmIChmb3JtYXRPcHRzID09PSB2b2lkIDApIHtcbiAgICAgIGZvcm1hdE9wdHMgPSBEQVRFX1NIT1JUO1xuICAgIH1cblxuICAgIGlmIChvcHRzID09PSB2b2lkIDApIHtcbiAgICAgIG9wdHMgPSB7fTtcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcy5pc1ZhbGlkID8gRm9ybWF0dGVyLmNyZWF0ZSh0aGlzLmxvYy5jbG9uZShvcHRzKSwgZm9ybWF0T3B0cykuZm9ybWF0RGF0ZVRpbWUodGhpcykgOiBJTlZBTElEO1xuICB9XG4gIC8qKlxuICAgKiBSZXR1cm5zIGFuIGFycmF5IG9mIGZvcm1hdCBcInBhcnRzXCIsIG1lYW5pbmcgaW5kaXZpZHVhbCB0b2tlbnMgYWxvbmcgd2l0aCBtZXRhZGF0YS4gVGhpcyBpcyBhbGxvd3MgY2FsbGVycyB0byBwb3N0LXByb2Nlc3MgaW5kaXZpZHVhbCBzZWN0aW9ucyBvZiB0aGUgZm9ybWF0dGVkIG91dHB1dC5cbiAgICogRGVmYXVsdHMgdG8gdGhlIHN5c3RlbSdzIGxvY2FsZSBpZiBubyBsb2NhbGUgaGFzIGJlZW4gc3BlY2lmaWVkXG4gICAqIEBzZWUgaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvSmF2YVNjcmlwdC9SZWZlcmVuY2UvR2xvYmFsX09iamVjdHMvRGF0ZVRpbWVGb3JtYXQvZm9ybWF0VG9QYXJ0c1xuICAgKiBAcGFyYW0gb3B0cyB7T2JqZWN0fSAtIEludGwuRGF0ZVRpbWVGb3JtYXQgY29uc3RydWN0b3Igb3B0aW9ucywgc2FtZSBhcyBgdG9Mb2NhbGVTdHJpbmdgLlxuICAgKiBAZXhhbXBsZSBEYXRlVGltZS5ub3coKS50b0xvY2FsZVBhcnRzKCk7IC8vPT4gW1xuICAgKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy89PiAgIHsgdHlwZTogJ2RheScsIHZhbHVlOiAnMjUnIH0sXG4gICAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLz0+ICAgeyB0eXBlOiAnbGl0ZXJhbCcsIHZhbHVlOiAnLycgfSxcbiAgICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vPT4gICB7IHR5cGU6ICdtb250aCcsIHZhbHVlOiAnMDUnIH0sXG4gICAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLz0+ICAgeyB0eXBlOiAnbGl0ZXJhbCcsIHZhbHVlOiAnLycgfSxcbiAgICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vPT4gICB7IHR5cGU6ICd5ZWFyJywgdmFsdWU6ICcxOTgyJyB9XG4gICAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLz0+IF1cbiAgICovXG4gIDtcblxuICBfcHJvdG8udG9Mb2NhbGVQYXJ0cyA9IGZ1bmN0aW9uIHRvTG9jYWxlUGFydHMob3B0cykge1xuICAgIGlmIChvcHRzID09PSB2b2lkIDApIHtcbiAgICAgIG9wdHMgPSB7fTtcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcy5pc1ZhbGlkID8gRm9ybWF0dGVyLmNyZWF0ZSh0aGlzLmxvYy5jbG9uZShvcHRzKSwgb3B0cykuZm9ybWF0RGF0ZVRpbWVQYXJ0cyh0aGlzKSA6IFtdO1xuICB9XG4gIC8qKlxuICAgKiBSZXR1cm5zIGFuIElTTyA4NjAxLWNvbXBsaWFudCBzdHJpbmcgcmVwcmVzZW50YXRpb24gb2YgdGhpcyBEYXRlVGltZVxuICAgKiBAcGFyYW0ge09iamVjdH0gb3B0cyAtIG9wdGlvbnNcbiAgICogQHBhcmFtIHtib29sZWFufSBbb3B0cy5zdXBwcmVzc01pbGxpc2Vjb25kcz1mYWxzZV0gLSBleGNsdWRlIG1pbGxpc2Vjb25kcyBmcm9tIHRoZSBmb3JtYXQgaWYgdGhleSdyZSAwXG4gICAqIEBwYXJhbSB7Ym9vbGVhbn0gW29wdHMuc3VwcHJlc3NTZWNvbmRzPWZhbHNlXSAtIGV4Y2x1ZGUgc2Vjb25kcyBmcm9tIHRoZSBmb3JtYXQgaWYgdGhleSdyZSAwXG4gICAqIEBwYXJhbSB7Ym9vbGVhbn0gW29wdHMuaW5jbHVkZU9mZnNldD10cnVlXSAtIGluY2x1ZGUgdGhlIG9mZnNldCwgc3VjaCBhcyAnWicgb3IgJy0wNDowMCdcbiAgICogQHBhcmFtIHtzdHJpbmd9IFtvcHRzLmZvcm1hdD0nZXh0ZW5kZWQnXSAtIGNob29zZSBiZXR3ZWVuIHRoZSBiYXNpYyBhbmQgZXh0ZW5kZWQgZm9ybWF0XG4gICAqIEBleGFtcGxlIERhdGVUaW1lLnV0YygxOTgzLCA1LCAyNSkudG9JU08oKSAvLz0+ICcxOTgyLTA1LTI1VDAwOjAwOjAwLjAwMFonXG4gICAqIEBleGFtcGxlIERhdGVUaW1lLm5vdygpLnRvSVNPKCkgLy89PiAnMjAxNy0wNC0yMlQyMDo0NzowNS4zMzUtMDQ6MDAnXG4gICAqIEBleGFtcGxlIERhdGVUaW1lLm5vdygpLnRvSVNPKHsgaW5jbHVkZU9mZnNldDogZmFsc2UgfSkgLy89PiAnMjAxNy0wNC0yMlQyMDo0NzowNS4zMzUnXG4gICAqIEBleGFtcGxlIERhdGVUaW1lLm5vdygpLnRvSVNPKHsgZm9ybWF0OiAnYmFzaWMnIH0pIC8vPT4gJzIwMTcwNDIyVDIwNDcwNS4zMzUtMDQwMCdcbiAgICogQHJldHVybiB7c3RyaW5nfVxuICAgKi9cbiAgO1xuXG4gIF9wcm90by50b0lTTyA9IGZ1bmN0aW9uIHRvSVNPKF90ZW1wMykge1xuICAgIHZhciBfcmVmNCA9IF90ZW1wMyA9PT0gdm9pZCAwID8ge30gOiBfdGVtcDMsXG4gICAgICAgIF9yZWY0JGZvcm1hdCA9IF9yZWY0LmZvcm1hdCxcbiAgICAgICAgZm9ybWF0ID0gX3JlZjQkZm9ybWF0ID09PSB2b2lkIDAgPyBcImV4dGVuZGVkXCIgOiBfcmVmNCRmb3JtYXQsXG4gICAgICAgIF9yZWY0JHN1cHByZXNzU2Vjb25kcyA9IF9yZWY0LnN1cHByZXNzU2Vjb25kcyxcbiAgICAgICAgc3VwcHJlc3NTZWNvbmRzID0gX3JlZjQkc3VwcHJlc3NTZWNvbmRzID09PSB2b2lkIDAgPyBmYWxzZSA6IF9yZWY0JHN1cHByZXNzU2Vjb25kcyxcbiAgICAgICAgX3JlZjQkc3VwcHJlc3NNaWxsaXNlID0gX3JlZjQuc3VwcHJlc3NNaWxsaXNlY29uZHMsXG4gICAgICAgIHN1cHByZXNzTWlsbGlzZWNvbmRzID0gX3JlZjQkc3VwcHJlc3NNaWxsaXNlID09PSB2b2lkIDAgPyBmYWxzZSA6IF9yZWY0JHN1cHByZXNzTWlsbGlzZSxcbiAgICAgICAgX3JlZjQkaW5jbHVkZU9mZnNldCA9IF9yZWY0LmluY2x1ZGVPZmZzZXQsXG4gICAgICAgIGluY2x1ZGVPZmZzZXQgPSBfcmVmNCRpbmNsdWRlT2Zmc2V0ID09PSB2b2lkIDAgPyB0cnVlIDogX3JlZjQkaW5jbHVkZU9mZnNldDtcblxuICAgIGlmICghdGhpcy5pc1ZhbGlkKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICB2YXIgZXh0ID0gZm9ybWF0ID09PSBcImV4dGVuZGVkXCI7XG5cbiAgICB2YXIgYyA9IF90b0lTT0RhdGUodGhpcywgZXh0KTtcblxuICAgIGMgKz0gXCJUXCI7XG4gICAgYyArPSBfdG9JU09UaW1lKHRoaXMsIGV4dCwgc3VwcHJlc3NTZWNvbmRzLCBzdXBwcmVzc01pbGxpc2Vjb25kcywgaW5jbHVkZU9mZnNldCk7XG4gICAgcmV0dXJuIGM7XG4gIH1cbiAgLyoqXG4gICAqIFJldHVybnMgYW4gSVNPIDg2MDEtY29tcGxpYW50IHN0cmluZyByZXByZXNlbnRhdGlvbiBvZiB0aGlzIERhdGVUaW1lJ3MgZGF0ZSBjb21wb25lbnRcbiAgICogQHBhcmFtIHtPYmplY3R9IG9wdHMgLSBvcHRpb25zXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBbb3B0cy5mb3JtYXQ9J2V4dGVuZGVkJ10gLSBjaG9vc2UgYmV0d2VlbiB0aGUgYmFzaWMgYW5kIGV4dGVuZGVkIGZvcm1hdFxuICAgKiBAZXhhbXBsZSBEYXRlVGltZS51dGMoMTk4MiwgNSwgMjUpLnRvSVNPRGF0ZSgpIC8vPT4gJzE5ODItMDUtMjUnXG4gICAqIEBleGFtcGxlIERhdGVUaW1lLnV0YygxOTgyLCA1LCAyNSkudG9JU09EYXRlKHsgZm9ybWF0OiAnYmFzaWMnIH0pIC8vPT4gJzE5ODIwNTI1J1xuICAgKiBAcmV0dXJuIHtzdHJpbmd9XG4gICAqL1xuICA7XG5cbiAgX3Byb3RvLnRvSVNPRGF0ZSA9IGZ1bmN0aW9uIHRvSVNPRGF0ZShfdGVtcDQpIHtcbiAgICB2YXIgX3JlZjUgPSBfdGVtcDQgPT09IHZvaWQgMCA/IHt9IDogX3RlbXA0LFxuICAgICAgICBfcmVmNSRmb3JtYXQgPSBfcmVmNS5mb3JtYXQsXG4gICAgICAgIGZvcm1hdCA9IF9yZWY1JGZvcm1hdCA9PT0gdm9pZCAwID8gXCJleHRlbmRlZFwiIDogX3JlZjUkZm9ybWF0O1xuXG4gICAgaWYgKCF0aGlzLmlzVmFsaWQpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIHJldHVybiBfdG9JU09EYXRlKHRoaXMsIGZvcm1hdCA9PT0gXCJleHRlbmRlZFwiKTtcbiAgfVxuICAvKipcbiAgICogUmV0dXJucyBhbiBJU08gODYwMS1jb21wbGlhbnQgc3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIHRoaXMgRGF0ZVRpbWUncyB3ZWVrIGRhdGVcbiAgICogQGV4YW1wbGUgRGF0ZVRpbWUudXRjKDE5ODIsIDUsIDI1KS50b0lTT1dlZWtEYXRlKCkgLy89PiAnMTk4Mi1XMjEtMidcbiAgICogQHJldHVybiB7c3RyaW5nfVxuICAgKi9cbiAgO1xuXG4gIF9wcm90by50b0lTT1dlZWtEYXRlID0gZnVuY3Rpb24gdG9JU09XZWVrRGF0ZSgpIHtcbiAgICByZXR1cm4gdG9UZWNoRm9ybWF0KHRoaXMsIFwia2tray0nVydXVy1jXCIpO1xuICB9XG4gIC8qKlxuICAgKiBSZXR1cm5zIGFuIElTTyA4NjAxLWNvbXBsaWFudCBzdHJpbmcgcmVwcmVzZW50YXRpb24gb2YgdGhpcyBEYXRlVGltZSdzIHRpbWUgY29tcG9uZW50XG4gICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRzIC0gb3B0aW9uc1xuICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHRzLnN1cHByZXNzTWlsbGlzZWNvbmRzPWZhbHNlXSAtIGV4Y2x1ZGUgbWlsbGlzZWNvbmRzIGZyb20gdGhlIGZvcm1hdCBpZiB0aGV5J3JlIDBcbiAgICogQHBhcmFtIHtib29sZWFufSBbb3B0cy5zdXBwcmVzc1NlY29uZHM9ZmFsc2VdIC0gZXhjbHVkZSBzZWNvbmRzIGZyb20gdGhlIGZvcm1hdCBpZiB0aGV5J3JlIDBcbiAgICogQHBhcmFtIHtib29sZWFufSBbb3B0cy5pbmNsdWRlT2Zmc2V0PXRydWVdIC0gaW5jbHVkZSB0aGUgb2Zmc2V0LCBzdWNoIGFzICdaJyBvciAnLTA0OjAwJ1xuICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHRzLmluY2x1ZGVQcmVmaXg9ZmFsc2VdIC0gaW5jbHVkZSB0aGUgYFRgIHByZWZpeFxuICAgKiBAcGFyYW0ge3N0cmluZ30gW29wdHMuZm9ybWF0PSdleHRlbmRlZCddIC0gY2hvb3NlIGJldHdlZW4gdGhlIGJhc2ljIGFuZCBleHRlbmRlZCBmb3JtYXRcbiAgICogQGV4YW1wbGUgRGF0ZVRpbWUudXRjKCkuc2V0KHsgaG91cjogNywgbWludXRlOiAzNCB9KS50b0lTT1RpbWUoKSAvLz0+ICcwNzozNDoxOS4zNjFaJ1xuICAgKiBAZXhhbXBsZSBEYXRlVGltZS51dGMoKS5zZXQoeyBob3VyOiA3LCBtaW51dGU6IDM0LCBzZWNvbmRzOiAwLCBtaWxsaXNlY29uZHM6IDAgfSkudG9JU09UaW1lKHsgc3VwcHJlc3NTZWNvbmRzOiB0cnVlIH0pIC8vPT4gJzA3OjM0WidcbiAgICogQGV4YW1wbGUgRGF0ZVRpbWUudXRjKCkuc2V0KHsgaG91cjogNywgbWludXRlOiAzNCB9KS50b0lTT1RpbWUoeyBmb3JtYXQ6ICdiYXNpYycgfSkgLy89PiAnMDczNDE5LjM2MVonXG4gICAqIEBleGFtcGxlIERhdGVUaW1lLnV0YygpLnNldCh7IGhvdXI6IDcsIG1pbnV0ZTogMzQgfSkudG9JU09UaW1lKHsgaW5jbHVkZVByZWZpeDogdHJ1ZSB9KSAvLz0+ICdUMDc6MzQ6MTkuMzYxWidcbiAgICogQHJldHVybiB7c3RyaW5nfVxuICAgKi9cbiAgO1xuXG4gIF9wcm90by50b0lTT1RpbWUgPSBmdW5jdGlvbiB0b0lTT1RpbWUoX3RlbXA1KSB7XG4gICAgdmFyIF9yZWY2ID0gX3RlbXA1ID09PSB2b2lkIDAgPyB7fSA6IF90ZW1wNSxcbiAgICAgICAgX3JlZjYkc3VwcHJlc3NNaWxsaXNlID0gX3JlZjYuc3VwcHJlc3NNaWxsaXNlY29uZHMsXG4gICAgICAgIHN1cHByZXNzTWlsbGlzZWNvbmRzID0gX3JlZjYkc3VwcHJlc3NNaWxsaXNlID09PSB2b2lkIDAgPyBmYWxzZSA6IF9yZWY2JHN1cHByZXNzTWlsbGlzZSxcbiAgICAgICAgX3JlZjYkc3VwcHJlc3NTZWNvbmRzID0gX3JlZjYuc3VwcHJlc3NTZWNvbmRzLFxuICAgICAgICBzdXBwcmVzc1NlY29uZHMgPSBfcmVmNiRzdXBwcmVzc1NlY29uZHMgPT09IHZvaWQgMCA/IGZhbHNlIDogX3JlZjYkc3VwcHJlc3NTZWNvbmRzLFxuICAgICAgICBfcmVmNiRpbmNsdWRlT2Zmc2V0ID0gX3JlZjYuaW5jbHVkZU9mZnNldCxcbiAgICAgICAgaW5jbHVkZU9mZnNldCA9IF9yZWY2JGluY2x1ZGVPZmZzZXQgPT09IHZvaWQgMCA/IHRydWUgOiBfcmVmNiRpbmNsdWRlT2Zmc2V0LFxuICAgICAgICBfcmVmNiRpbmNsdWRlUHJlZml4ID0gX3JlZjYuaW5jbHVkZVByZWZpeCxcbiAgICAgICAgaW5jbHVkZVByZWZpeCA9IF9yZWY2JGluY2x1ZGVQcmVmaXggPT09IHZvaWQgMCA/IGZhbHNlIDogX3JlZjYkaW5jbHVkZVByZWZpeCxcbiAgICAgICAgX3JlZjYkZm9ybWF0ID0gX3JlZjYuZm9ybWF0LFxuICAgICAgICBmb3JtYXQgPSBfcmVmNiRmb3JtYXQgPT09IHZvaWQgMCA/IFwiZXh0ZW5kZWRcIiA6IF9yZWY2JGZvcm1hdDtcblxuICAgIGlmICghdGhpcy5pc1ZhbGlkKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICB2YXIgYyA9IGluY2x1ZGVQcmVmaXggPyBcIlRcIiA6IFwiXCI7XG4gICAgcmV0dXJuIGMgKyBfdG9JU09UaW1lKHRoaXMsIGZvcm1hdCA9PT0gXCJleHRlbmRlZFwiLCBzdXBwcmVzc1NlY29uZHMsIHN1cHByZXNzTWlsbGlzZWNvbmRzLCBpbmNsdWRlT2Zmc2V0KTtcbiAgfVxuICAvKipcbiAgICogUmV0dXJucyBhbiBSRkMgMjgyMi1jb21wYXRpYmxlIHN0cmluZyByZXByZXNlbnRhdGlvbiBvZiB0aGlzIERhdGVUaW1lXG4gICAqIEBleGFtcGxlIERhdGVUaW1lLnV0YygyMDE0LCA3LCAxMykudG9SRkMyODIyKCkgLy89PiAnU3VuLCAxMyBKdWwgMjAxNCAwMDowMDowMCArMDAwMCdcbiAgICogQGV4YW1wbGUgRGF0ZVRpbWUubG9jYWwoMjAxNCwgNywgMTMpLnRvUkZDMjgyMigpIC8vPT4gJ1N1biwgMTMgSnVsIDIwMTQgMDA6MDA6MDAgLTA0MDAnXG4gICAqIEByZXR1cm4ge3N0cmluZ31cbiAgICovXG4gIDtcblxuICBfcHJvdG8udG9SRkMyODIyID0gZnVuY3Rpb24gdG9SRkMyODIyKCkge1xuICAgIHJldHVybiB0b1RlY2hGb3JtYXQodGhpcywgXCJFRUUsIGRkIExMTCB5eXl5IEhIOm1tOnNzIFpaWlwiLCBmYWxzZSk7XG4gIH1cbiAgLyoqXG4gICAqIFJldHVybnMgYSBzdHJpbmcgcmVwcmVzZW50YXRpb24gb2YgdGhpcyBEYXRlVGltZSBhcHByb3ByaWF0ZSBmb3IgdXNlIGluIEhUVFAgaGVhZGVycy4gVGhlIG91dHB1dCBpcyBhbHdheXMgZXhwcmVzc2VkIGluIEdNVC5cbiAgICogU3BlY2lmaWNhbGx5LCB0aGUgc3RyaW5nIGNvbmZvcm1zIHRvIFJGQyAxMTIzLlxuICAgKiBAc2VlIGh0dHBzOi8vd3d3LnczLm9yZy9Qcm90b2NvbHMvcmZjMjYxNi9yZmMyNjE2LXNlYzMuaHRtbCNzZWMzLjMuMVxuICAgKiBAZXhhbXBsZSBEYXRlVGltZS51dGMoMjAxNCwgNywgMTMpLnRvSFRUUCgpIC8vPT4gJ1N1biwgMTMgSnVsIDIwMTQgMDA6MDA6MDAgR01UJ1xuICAgKiBAZXhhbXBsZSBEYXRlVGltZS51dGMoMjAxNCwgNywgMTMsIDE5KS50b0hUVFAoKSAvLz0+ICdTdW4sIDEzIEp1bCAyMDE0IDE5OjAwOjAwIEdNVCdcbiAgICogQHJldHVybiB7c3RyaW5nfVxuICAgKi9cbiAgO1xuXG4gIF9wcm90by50b0hUVFAgPSBmdW5jdGlvbiB0b0hUVFAoKSB7XG4gICAgcmV0dXJuIHRvVGVjaEZvcm1hdCh0aGlzLnRvVVRDKCksIFwiRUVFLCBkZCBMTEwgeXl5eSBISDptbTpzcyAnR01UJ1wiKTtcbiAgfVxuICAvKipcbiAgICogUmV0dXJucyBhIHN0cmluZyByZXByZXNlbnRhdGlvbiBvZiB0aGlzIERhdGVUaW1lIGFwcHJvcHJpYXRlIGZvciB1c2UgaW4gU1FMIERhdGVcbiAgICogQGV4YW1wbGUgRGF0ZVRpbWUudXRjKDIwMTQsIDcsIDEzKS50b1NRTERhdGUoKSAvLz0+ICcyMDE0LTA3LTEzJ1xuICAgKiBAcmV0dXJuIHtzdHJpbmd9XG4gICAqL1xuICA7XG5cbiAgX3Byb3RvLnRvU1FMRGF0ZSA9IGZ1bmN0aW9uIHRvU1FMRGF0ZSgpIHtcbiAgICBpZiAoIXRoaXMuaXNWYWxpZCkge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG4gICAgcmV0dXJuIF90b0lTT0RhdGUodGhpcywgdHJ1ZSk7XG4gIH1cbiAgLyoqXG4gICAqIFJldHVybnMgYSBzdHJpbmcgcmVwcmVzZW50YXRpb24gb2YgdGhpcyBEYXRlVGltZSBhcHByb3ByaWF0ZSBmb3IgdXNlIGluIFNRTCBUaW1lXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRzIC0gb3B0aW9uc1xuICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHRzLmluY2x1ZGVab25lPWZhbHNlXSAtIGluY2x1ZGUgdGhlIHpvbmUsIHN1Y2ggYXMgJ0FtZXJpY2EvTmV3X1lvcmsnLiBPdmVycmlkZXMgaW5jbHVkZU9mZnNldC5cbiAgICogQHBhcmFtIHtib29sZWFufSBbb3B0cy5pbmNsdWRlT2Zmc2V0PXRydWVdIC0gaW5jbHVkZSB0aGUgb2Zmc2V0LCBzdWNoIGFzICdaJyBvciAnLTA0OjAwJ1xuICAgKiBAZXhhbXBsZSBEYXRlVGltZS51dGMoKS50b1NRTCgpIC8vPT4gJzA1OjE1OjE2LjM0NSdcbiAgICogQGV4YW1wbGUgRGF0ZVRpbWUubm93KCkudG9TUUwoKSAvLz0+ICcwNToxNToxNi4zNDUgLTA0OjAwJ1xuICAgKiBAZXhhbXBsZSBEYXRlVGltZS5ub3coKS50b1NRTCh7IGluY2x1ZGVPZmZzZXQ6IGZhbHNlIH0pIC8vPT4gJzA1OjE1OjE2LjM0NSdcbiAgICogQGV4YW1wbGUgRGF0ZVRpbWUubm93KCkudG9TUUwoeyBpbmNsdWRlWm9uZTogZmFsc2UgfSkgLy89PiAnMDU6MTU6MTYuMzQ1IEFtZXJpY2EvTmV3X1lvcmsnXG4gICAqIEByZXR1cm4ge3N0cmluZ31cbiAgICovXG4gIDtcblxuICBfcHJvdG8udG9TUUxUaW1lID0gZnVuY3Rpb24gdG9TUUxUaW1lKF90ZW1wNikge1xuICAgIHZhciBfcmVmNyA9IF90ZW1wNiA9PT0gdm9pZCAwID8ge30gOiBfdGVtcDYsXG4gICAgICAgIF9yZWY3JGluY2x1ZGVPZmZzZXQgPSBfcmVmNy5pbmNsdWRlT2Zmc2V0LFxuICAgICAgICBpbmNsdWRlT2Zmc2V0ID0gX3JlZjckaW5jbHVkZU9mZnNldCA9PT0gdm9pZCAwID8gdHJ1ZSA6IF9yZWY3JGluY2x1ZGVPZmZzZXQsXG4gICAgICAgIF9yZWY3JGluY2x1ZGVab25lID0gX3JlZjcuaW5jbHVkZVpvbmUsXG4gICAgICAgIGluY2x1ZGVab25lID0gX3JlZjckaW5jbHVkZVpvbmUgPT09IHZvaWQgMCA/IGZhbHNlIDogX3JlZjckaW5jbHVkZVpvbmU7XG5cbiAgICB2YXIgZm10ID0gXCJISDptbTpzcy5TU1NcIjtcblxuICAgIGlmIChpbmNsdWRlWm9uZSB8fCBpbmNsdWRlT2Zmc2V0KSB7XG4gICAgICBmbXQgKz0gXCIgXCI7XG5cbiAgICAgIGlmIChpbmNsdWRlWm9uZSkge1xuICAgICAgICBmbXQgKz0gXCJ6XCI7XG4gICAgICB9IGVsc2UgaWYgKGluY2x1ZGVPZmZzZXQpIHtcbiAgICAgICAgZm10ICs9IFwiWlpcIjtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gdG9UZWNoRm9ybWF0KHRoaXMsIGZtdCwgdHJ1ZSk7XG4gIH1cbiAgLyoqXG4gICAqIFJldHVybnMgYSBzdHJpbmcgcmVwcmVzZW50YXRpb24gb2YgdGhpcyBEYXRlVGltZSBhcHByb3ByaWF0ZSBmb3IgdXNlIGluIFNRTCBEYXRlVGltZVxuICAgKiBAcGFyYW0ge09iamVjdH0gb3B0cyAtIG9wdGlvbnNcbiAgICogQHBhcmFtIHtib29sZWFufSBbb3B0cy5pbmNsdWRlWm9uZT1mYWxzZV0gLSBpbmNsdWRlIHRoZSB6b25lLCBzdWNoIGFzICdBbWVyaWNhL05ld19Zb3JrJy4gT3ZlcnJpZGVzIGluY2x1ZGVPZmZzZXQuXG4gICAqIEBwYXJhbSB7Ym9vbGVhbn0gW29wdHMuaW5jbHVkZU9mZnNldD10cnVlXSAtIGluY2x1ZGUgdGhlIG9mZnNldCwgc3VjaCBhcyAnWicgb3IgJy0wNDowMCdcbiAgICogQGV4YW1wbGUgRGF0ZVRpbWUudXRjKDIwMTQsIDcsIDEzKS50b1NRTCgpIC8vPT4gJzIwMTQtMDctMTMgMDA6MDA6MDAuMDAwIFonXG4gICAqIEBleGFtcGxlIERhdGVUaW1lLmxvY2FsKDIwMTQsIDcsIDEzKS50b1NRTCgpIC8vPT4gJzIwMTQtMDctMTMgMDA6MDA6MDAuMDAwIC0wNDowMCdcbiAgICogQGV4YW1wbGUgRGF0ZVRpbWUubG9jYWwoMjAxNCwgNywgMTMpLnRvU1FMKHsgaW5jbHVkZU9mZnNldDogZmFsc2UgfSkgLy89PiAnMjAxNC0wNy0xMyAwMDowMDowMC4wMDAnXG4gICAqIEBleGFtcGxlIERhdGVUaW1lLmxvY2FsKDIwMTQsIDcsIDEzKS50b1NRTCh7IGluY2x1ZGVab25lOiB0cnVlIH0pIC8vPT4gJzIwMTQtMDctMTMgMDA6MDA6MDAuMDAwIEFtZXJpY2EvTmV3X1lvcmsnXG4gICAqIEByZXR1cm4ge3N0cmluZ31cbiAgICovXG4gIDtcblxuICBfcHJvdG8udG9TUUwgPSBmdW5jdGlvbiB0b1NRTChvcHRzKSB7XG4gICAgaWYgKG9wdHMgPT09IHZvaWQgMCkge1xuICAgICAgb3B0cyA9IHt9O1xuICAgIH1cblxuICAgIGlmICghdGhpcy5pc1ZhbGlkKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcy50b1NRTERhdGUoKSArIFwiIFwiICsgdGhpcy50b1NRTFRpbWUob3B0cyk7XG4gIH1cbiAgLyoqXG4gICAqIFJldHVybnMgYSBzdHJpbmcgcmVwcmVzZW50YXRpb24gb2YgdGhpcyBEYXRlVGltZSBhcHByb3ByaWF0ZSBmb3IgZGVidWdnaW5nXG4gICAqIEByZXR1cm4ge3N0cmluZ31cbiAgICovXG4gIDtcblxuICBfcHJvdG8udG9TdHJpbmcgPSBmdW5jdGlvbiB0b1N0cmluZygpIHtcbiAgICByZXR1cm4gdGhpcy5pc1ZhbGlkID8gdGhpcy50b0lTTygpIDogSU5WQUxJRDtcbiAgfVxuICAvKipcbiAgICogUmV0dXJucyB0aGUgZXBvY2ggbWlsbGlzZWNvbmRzIG9mIHRoaXMgRGF0ZVRpbWUuIEFsaWFzIG9mIHtAbGluayBEYXRlVGltZSN0b01pbGxpc31cbiAgICogQHJldHVybiB7bnVtYmVyfVxuICAgKi9cbiAgO1xuXG4gIF9wcm90by52YWx1ZU9mID0gZnVuY3Rpb24gdmFsdWVPZigpIHtcbiAgICByZXR1cm4gdGhpcy50b01pbGxpcygpO1xuICB9XG4gIC8qKlxuICAgKiBSZXR1cm5zIHRoZSBlcG9jaCBtaWxsaXNlY29uZHMgb2YgdGhpcyBEYXRlVGltZS5cbiAgICogQHJldHVybiB7bnVtYmVyfVxuICAgKi9cbiAgO1xuXG4gIF9wcm90by50b01pbGxpcyA9IGZ1bmN0aW9uIHRvTWlsbGlzKCkge1xuICAgIHJldHVybiB0aGlzLmlzVmFsaWQgPyB0aGlzLnRzIDogTmFOO1xuICB9XG4gIC8qKlxuICAgKiBSZXR1cm5zIHRoZSBlcG9jaCBzZWNvbmRzIG9mIHRoaXMgRGF0ZVRpbWUuXG4gICAqIEByZXR1cm4ge251bWJlcn1cbiAgICovXG4gIDtcblxuICBfcHJvdG8udG9TZWNvbmRzID0gZnVuY3Rpb24gdG9TZWNvbmRzKCkge1xuICAgIHJldHVybiB0aGlzLmlzVmFsaWQgPyB0aGlzLnRzIC8gMTAwMCA6IE5hTjtcbiAgfVxuICAvKipcbiAgICogUmV0dXJucyBhbiBJU08gODYwMSByZXByZXNlbnRhdGlvbiBvZiB0aGlzIERhdGVUaW1lIGFwcHJvcHJpYXRlIGZvciB1c2UgaW4gSlNPTi5cbiAgICogQHJldHVybiB7c3RyaW5nfVxuICAgKi9cbiAgO1xuXG4gIF9wcm90by50b0pTT04gPSBmdW5jdGlvbiB0b0pTT04oKSB7XG4gICAgcmV0dXJuIHRoaXMudG9JU08oKTtcbiAgfVxuICAvKipcbiAgICogUmV0dXJucyBhIEJTT04gc2VyaWFsaXphYmxlIGVxdWl2YWxlbnQgdG8gdGhpcyBEYXRlVGltZS5cbiAgICogQHJldHVybiB7RGF0ZX1cbiAgICovXG4gIDtcblxuICBfcHJvdG8udG9CU09OID0gZnVuY3Rpb24gdG9CU09OKCkge1xuICAgIHJldHVybiB0aGlzLnRvSlNEYXRlKCk7XG4gIH1cbiAgLyoqXG4gICAqIFJldHVybnMgYSBKYXZhU2NyaXB0IG9iamVjdCB3aXRoIHRoaXMgRGF0ZVRpbWUncyB5ZWFyLCBtb250aCwgZGF5LCBhbmQgc28gb24uXG4gICAqIEBwYXJhbSBvcHRzIC0gb3B0aW9ucyBmb3IgZ2VuZXJhdGluZyB0aGUgb2JqZWN0XG4gICAqIEBwYXJhbSB7Ym9vbGVhbn0gW29wdHMuaW5jbHVkZUNvbmZpZz1mYWxzZV0gLSBpbmNsdWRlIGNvbmZpZ3VyYXRpb24gYXR0cmlidXRlcyBpbiB0aGUgb3V0cHV0XG4gICAqIEBleGFtcGxlIERhdGVUaW1lLm5vdygpLnRvT2JqZWN0KCkgLy89PiB7IHllYXI6IDIwMTcsIG1vbnRoOiA0LCBkYXk6IDIyLCBob3VyOiAyMCwgbWludXRlOiA0OSwgc2Vjb25kOiA0MiwgbWlsbGlzZWNvbmQ6IDI2OCB9XG4gICAqIEByZXR1cm4ge09iamVjdH1cbiAgICovXG4gIDtcblxuICBfcHJvdG8udG9PYmplY3QgPSBmdW5jdGlvbiB0b09iamVjdChvcHRzKSB7XG4gICAgaWYgKG9wdHMgPT09IHZvaWQgMCkge1xuICAgICAgb3B0cyA9IHt9O1xuICAgIH1cblxuICAgIGlmICghdGhpcy5pc1ZhbGlkKSByZXR1cm4ge307XG5cbiAgICB2YXIgYmFzZSA9IF9leHRlbmRzKHt9LCB0aGlzLmMpO1xuXG4gICAgaWYgKG9wdHMuaW5jbHVkZUNvbmZpZykge1xuICAgICAgYmFzZS5vdXRwdXRDYWxlbmRhciA9IHRoaXMub3V0cHV0Q2FsZW5kYXI7XG4gICAgICBiYXNlLm51bWJlcmluZ1N5c3RlbSA9IHRoaXMubG9jLm51bWJlcmluZ1N5c3RlbTtcbiAgICAgIGJhc2UubG9jYWxlID0gdGhpcy5sb2MubG9jYWxlO1xuICAgIH1cblxuICAgIHJldHVybiBiYXNlO1xuICB9XG4gIC8qKlxuICAgKiBSZXR1cm5zIGEgSmF2YVNjcmlwdCBEYXRlIGVxdWl2YWxlbnQgdG8gdGhpcyBEYXRlVGltZS5cbiAgICogQHJldHVybiB7RGF0ZX1cbiAgICovXG4gIDtcblxuICBfcHJvdG8udG9KU0RhdGUgPSBmdW5jdGlvbiB0b0pTRGF0ZSgpIHtcbiAgICByZXR1cm4gbmV3IERhdGUodGhpcy5pc1ZhbGlkID8gdGhpcy50cyA6IE5hTik7XG4gIH0gLy8gQ09NUEFSRVxuXG4gIC8qKlxuICAgKiBSZXR1cm4gdGhlIGRpZmZlcmVuY2UgYmV0d2VlbiB0d28gRGF0ZVRpbWVzIGFzIGEgRHVyYXRpb24uXG4gICAqIEBwYXJhbSB7RGF0ZVRpbWV9IG90aGVyRGF0ZVRpbWUgLSB0aGUgRGF0ZVRpbWUgdG8gY29tcGFyZSB0aGlzIG9uZSB0b1xuICAgKiBAcGFyYW0ge3N0cmluZ3xzdHJpbmdbXX0gW3VuaXQ9WydtaWxsaXNlY29uZHMnXV0gLSB0aGUgdW5pdCBvciBhcnJheSBvZiB1bml0cyAoc3VjaCBhcyAnaG91cnMnIG9yICdkYXlzJykgdG8gaW5jbHVkZSBpbiB0aGUgZHVyYXRpb24uXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRzIC0gb3B0aW9ucyB0aGF0IGFmZmVjdCB0aGUgY3JlYXRpb24gb2YgdGhlIER1cmF0aW9uXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBbb3B0cy5jb252ZXJzaW9uQWNjdXJhY3k9J2Nhc3VhbCddIC0gdGhlIGNvbnZlcnNpb24gc3lzdGVtIHRvIHVzZVxuICAgKiBAZXhhbXBsZVxuICAgKiB2YXIgaTEgPSBEYXRlVGltZS5mcm9tSVNPKCcxOTgyLTA1LTI1VDA5OjQ1JyksXG4gICAqICAgICBpMiA9IERhdGVUaW1lLmZyb21JU08oJzE5ODMtMTAtMTRUMTA6MzAnKTtcbiAgICogaTIuZGlmZihpMSkudG9PYmplY3QoKSAvLz0+IHsgbWlsbGlzZWNvbmRzOiA0MzgwNzUwMDAwMCB9XG4gICAqIGkyLmRpZmYoaTEsICdob3VycycpLnRvT2JqZWN0KCkgLy89PiB7IGhvdXJzOiAxMjE2OC43NSB9XG4gICAqIGkyLmRpZmYoaTEsIFsnbW9udGhzJywgJ2RheXMnXSkudG9PYmplY3QoKSAvLz0+IHsgbW9udGhzOiAxNiwgZGF5czogMTkuMDMxMjUgfVxuICAgKiBpMi5kaWZmKGkxLCBbJ21vbnRocycsICdkYXlzJywgJ2hvdXJzJ10pLnRvT2JqZWN0KCkgLy89PiB7IG1vbnRoczogMTYsIGRheXM6IDE5LCBob3VyczogMC43NSB9XG4gICAqIEByZXR1cm4ge0R1cmF0aW9ufVxuICAgKi9cbiAgO1xuXG4gIF9wcm90by5kaWZmID0gZnVuY3Rpb24gZGlmZihvdGhlckRhdGVUaW1lLCB1bml0LCBvcHRzKSB7XG4gICAgaWYgKHVuaXQgPT09IHZvaWQgMCkge1xuICAgICAgdW5pdCA9IFwibWlsbGlzZWNvbmRzXCI7XG4gICAgfVxuXG4gICAgaWYgKG9wdHMgPT09IHZvaWQgMCkge1xuICAgICAgb3B0cyA9IHt9O1xuICAgIH1cblxuICAgIGlmICghdGhpcy5pc1ZhbGlkIHx8ICFvdGhlckRhdGVUaW1lLmlzVmFsaWQpIHtcbiAgICAgIHJldHVybiBEdXJhdGlvbi5pbnZhbGlkKFwiY3JlYXRlZCBieSBkaWZmaW5nIGFuIGludmFsaWQgRGF0ZVRpbWVcIik7XG4gICAgfVxuXG4gICAgdmFyIGR1ck9wdHMgPSBfZXh0ZW5kcyh7XG4gICAgICBsb2NhbGU6IHRoaXMubG9jYWxlLFxuICAgICAgbnVtYmVyaW5nU3lzdGVtOiB0aGlzLm51bWJlcmluZ1N5c3RlbVxuICAgIH0sIG9wdHMpO1xuXG4gICAgdmFyIHVuaXRzID0gbWF5YmVBcnJheSh1bml0KS5tYXAoRHVyYXRpb24ubm9ybWFsaXplVW5pdCksXG4gICAgICAgIG90aGVySXNMYXRlciA9IG90aGVyRGF0ZVRpbWUudmFsdWVPZigpID4gdGhpcy52YWx1ZU9mKCksXG4gICAgICAgIGVhcmxpZXIgPSBvdGhlcklzTGF0ZXIgPyB0aGlzIDogb3RoZXJEYXRlVGltZSxcbiAgICAgICAgbGF0ZXIgPSBvdGhlcklzTGF0ZXIgPyBvdGhlckRhdGVUaW1lIDogdGhpcyxcbiAgICAgICAgZGlmZmVkID0gX2RpZmYoZWFybGllciwgbGF0ZXIsIHVuaXRzLCBkdXJPcHRzKTtcblxuICAgIHJldHVybiBvdGhlcklzTGF0ZXIgPyBkaWZmZWQubmVnYXRlKCkgOiBkaWZmZWQ7XG4gIH1cbiAgLyoqXG4gICAqIFJldHVybiB0aGUgZGlmZmVyZW5jZSBiZXR3ZWVuIHRoaXMgRGF0ZVRpbWUgYW5kIHJpZ2h0IG5vdy5cbiAgICogU2VlIHtAbGluayBEYXRlVGltZSNkaWZmfVxuICAgKiBAcGFyYW0ge3N0cmluZ3xzdHJpbmdbXX0gW3VuaXQ9WydtaWxsaXNlY29uZHMnXV0gLSB0aGUgdW5pdCBvciB1bml0cyB1bml0cyAoc3VjaCBhcyAnaG91cnMnIG9yICdkYXlzJykgdG8gaW5jbHVkZSBpbiB0aGUgZHVyYXRpb25cbiAgICogQHBhcmFtIHtPYmplY3R9IG9wdHMgLSBvcHRpb25zIHRoYXQgYWZmZWN0IHRoZSBjcmVhdGlvbiBvZiB0aGUgRHVyYXRpb25cbiAgICogQHBhcmFtIHtzdHJpbmd9IFtvcHRzLmNvbnZlcnNpb25BY2N1cmFjeT0nY2FzdWFsJ10gLSB0aGUgY29udmVyc2lvbiBzeXN0ZW0gdG8gdXNlXG4gICAqIEByZXR1cm4ge0R1cmF0aW9ufVxuICAgKi9cbiAgO1xuXG4gIF9wcm90by5kaWZmTm93ID0gZnVuY3Rpb24gZGlmZk5vdyh1bml0LCBvcHRzKSB7XG4gICAgaWYgKHVuaXQgPT09IHZvaWQgMCkge1xuICAgICAgdW5pdCA9IFwibWlsbGlzZWNvbmRzXCI7XG4gICAgfVxuXG4gICAgaWYgKG9wdHMgPT09IHZvaWQgMCkge1xuICAgICAgb3B0cyA9IHt9O1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzLmRpZmYoRGF0ZVRpbWUubm93KCksIHVuaXQsIG9wdHMpO1xuICB9XG4gIC8qKlxuICAgKiBSZXR1cm4gYW4gSW50ZXJ2YWwgc3Bhbm5pbmcgYmV0d2VlbiB0aGlzIERhdGVUaW1lIGFuZCBhbm90aGVyIERhdGVUaW1lXG4gICAqIEBwYXJhbSB7RGF0ZVRpbWV9IG90aGVyRGF0ZVRpbWUgLSB0aGUgb3RoZXIgZW5kIHBvaW50IG9mIHRoZSBJbnRlcnZhbFxuICAgKiBAcmV0dXJuIHtJbnRlcnZhbH1cbiAgICovXG4gIDtcblxuICBfcHJvdG8udW50aWwgPSBmdW5jdGlvbiB1bnRpbChvdGhlckRhdGVUaW1lKSB7XG4gICAgcmV0dXJuIHRoaXMuaXNWYWxpZCA/IEludGVydmFsLmZyb21EYXRlVGltZXModGhpcywgb3RoZXJEYXRlVGltZSkgOiB0aGlzO1xuICB9XG4gIC8qKlxuICAgKiBSZXR1cm4gd2hldGhlciB0aGlzIERhdGVUaW1lIGlzIGluIHRoZSBzYW1lIHVuaXQgb2YgdGltZSBhcyBhbm90aGVyIERhdGVUaW1lLlxuICAgKiBIaWdoZXItb3JkZXIgdW5pdHMgbXVzdCBhbHNvIGJlIGlkZW50aWNhbCBmb3IgdGhpcyBmdW5jdGlvbiB0byByZXR1cm4gYHRydWVgLlxuICAgKiBOb3RlIHRoYXQgdGltZSB6b25lcyBhcmUgKippZ25vcmVkKiogaW4gdGhpcyBjb21wYXJpc29uLCB3aGljaCBjb21wYXJlcyB0aGUgKipsb2NhbCoqIGNhbGVuZGFyIHRpbWUuIFVzZSB7QGxpbmsgRGF0ZVRpbWUjc2V0Wm9uZX0gdG8gY29udmVydCBvbmUgb2YgdGhlIGRhdGVzIGlmIG5lZWRlZC5cbiAgICogQHBhcmFtIHtEYXRlVGltZX0gb3RoZXJEYXRlVGltZSAtIHRoZSBvdGhlciBEYXRlVGltZVxuICAgKiBAcGFyYW0ge3N0cmluZ30gdW5pdCAtIHRoZSB1bml0IG9mIHRpbWUgdG8gY2hlY2sgc2FtZW5lc3Mgb25cbiAgICogQGV4YW1wbGUgRGF0ZVRpbWUubm93KCkuaGFzU2FtZShvdGhlckRULCAnZGF5Jyk7IC8vfj4gdHJ1ZSBpZiBvdGhlckRUIGlzIGluIHRoZSBzYW1lIGN1cnJlbnQgY2FsZW5kYXIgZGF5XG4gICAqIEByZXR1cm4ge2Jvb2xlYW59XG4gICAqL1xuICA7XG5cbiAgX3Byb3RvLmhhc1NhbWUgPSBmdW5jdGlvbiBoYXNTYW1lKG90aGVyRGF0ZVRpbWUsIHVuaXQpIHtcbiAgICBpZiAoIXRoaXMuaXNWYWxpZCkgcmV0dXJuIGZhbHNlO1xuICAgIHZhciBpbnB1dE1zID0gb3RoZXJEYXRlVGltZS52YWx1ZU9mKCk7XG4gICAgdmFyIGFkanVzdGVkVG9ab25lID0gdGhpcy5zZXRab25lKG90aGVyRGF0ZVRpbWUuem9uZSwge1xuICAgICAga2VlcExvY2FsVGltZTogdHJ1ZVxuICAgIH0pO1xuICAgIHJldHVybiBhZGp1c3RlZFRvWm9uZS5zdGFydE9mKHVuaXQpIDw9IGlucHV0TXMgJiYgaW5wdXRNcyA8PSBhZGp1c3RlZFRvWm9uZS5lbmRPZih1bml0KTtcbiAgfVxuICAvKipcbiAgICogRXF1YWxpdHkgY2hlY2tcbiAgICogVHdvIERhdGVUaW1lcyBhcmUgZXF1YWwgaWZmIHRoZXkgcmVwcmVzZW50IHRoZSBzYW1lIG1pbGxpc2Vjb25kLCBoYXZlIHRoZSBzYW1lIHpvbmUgYW5kIGxvY2F0aW9uLCBhbmQgYXJlIGJvdGggdmFsaWQuXG4gICAqIFRvIGNvbXBhcmUganVzdCB0aGUgbWlsbGlzZWNvbmQgdmFsdWVzLCB1c2UgYCtkdDEgPT09ICtkdDJgLlxuICAgKiBAcGFyYW0ge0RhdGVUaW1lfSBvdGhlciAtIHRoZSBvdGhlciBEYXRlVGltZVxuICAgKiBAcmV0dXJuIHtib29sZWFufVxuICAgKi9cbiAgO1xuXG4gIF9wcm90by5lcXVhbHMgPSBmdW5jdGlvbiBlcXVhbHMob3RoZXIpIHtcbiAgICByZXR1cm4gdGhpcy5pc1ZhbGlkICYmIG90aGVyLmlzVmFsaWQgJiYgdGhpcy52YWx1ZU9mKCkgPT09IG90aGVyLnZhbHVlT2YoKSAmJiB0aGlzLnpvbmUuZXF1YWxzKG90aGVyLnpvbmUpICYmIHRoaXMubG9jLmVxdWFscyhvdGhlci5sb2MpO1xuICB9XG4gIC8qKlxuICAgKiBSZXR1cm5zIGEgc3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIGEgdGhpcyB0aW1lIHJlbGF0aXZlIHRvIG5vdywgc3VjaCBhcyBcImluIHR3byBkYXlzXCIuIENhbiBvbmx5IGludGVybmF0aW9uYWxpemUgaWYgeW91clxuICAgKiBwbGF0Zm9ybSBzdXBwb3J0cyBJbnRsLlJlbGF0aXZlVGltZUZvcm1hdC4gUm91bmRzIGRvd24gYnkgZGVmYXVsdC5cbiAgICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnMgLSBvcHRpb25zIHRoYXQgYWZmZWN0IHRoZSBvdXRwdXRcbiAgICogQHBhcmFtIHtEYXRlVGltZX0gW29wdGlvbnMuYmFzZT1EYXRlVGltZS5ub3coKV0gLSB0aGUgRGF0ZVRpbWUgdG8gdXNlIGFzIHRoZSBiYXNpcyB0byB3aGljaCB0aGlzIHRpbWUgaXMgY29tcGFyZWQuIERlZmF1bHRzIHRvIG5vdy5cbiAgICogQHBhcmFtIHtzdHJpbmd9IFtvcHRpb25zLnN0eWxlPVwibG9uZ1wiXSAtIHRoZSBzdHlsZSBvZiB1bml0cywgbXVzdCBiZSBcImxvbmdcIiwgXCJzaG9ydFwiLCBvciBcIm5hcnJvd1wiXG4gICAqIEBwYXJhbSB7c3RyaW5nfHN0cmluZ1tdfSBvcHRpb25zLnVuaXQgLSB1c2UgYSBzcGVjaWZpYyB1bml0IG9yIGFycmF5IG9mIHVuaXRzOyBpZiBvbWl0dGVkLCBvciBhbiBhcnJheSwgdGhlIG1ldGhvZCB3aWxsIHBpY2sgdGhlIGJlc3QgdW5pdC4gVXNlIGFuIGFycmF5IG9yIG9uZSBvZiBcInllYXJzXCIsIFwicXVhcnRlcnNcIiwgXCJtb250aHNcIiwgXCJ3ZWVrc1wiLCBcImRheXNcIiwgXCJob3Vyc1wiLCBcIm1pbnV0ZXNcIiwgb3IgXCJzZWNvbmRzXCJcbiAgICogQHBhcmFtIHtib29sZWFufSBbb3B0aW9ucy5yb3VuZD10cnVlXSAtIHdoZXRoZXIgdG8gcm91bmQgdGhlIG51bWJlcnMgaW4gdGhlIG91dHB1dC5cbiAgICogQHBhcmFtIHtudW1iZXJ9IFtvcHRpb25zLnBhZGRpbmc9MF0gLSBwYWRkaW5nIGluIG1pbGxpc2Vjb25kcy4gVGhpcyBhbGxvd3MgeW91IHRvIHJvdW5kIHVwIHRoZSByZXN1bHQgaWYgaXQgZml0cyBpbnNpZGUgdGhlIHRocmVzaG9sZC4gRG9uJ3QgdXNlIGluIGNvbWJpbmF0aW9uIHdpdGgge3JvdW5kOiBmYWxzZX0gYmVjYXVzZSB0aGUgZGVjaW1hbCBvdXRwdXQgd2lsbCBpbmNsdWRlIHRoZSBwYWRkaW5nLlxuICAgKiBAcGFyYW0ge3N0cmluZ30gb3B0aW9ucy5sb2NhbGUgLSBvdmVycmlkZSB0aGUgbG9jYWxlIG9mIHRoaXMgRGF0ZVRpbWVcbiAgICogQHBhcmFtIHtzdHJpbmd9IG9wdGlvbnMubnVtYmVyaW5nU3lzdGVtIC0gb3ZlcnJpZGUgdGhlIG51bWJlcmluZ1N5c3RlbSBvZiB0aGlzIERhdGVUaW1lLiBUaGUgSW50bCBzeXN0ZW0gbWF5IGNob29zZSBub3QgdG8gaG9ub3IgdGhpc1xuICAgKiBAZXhhbXBsZSBEYXRlVGltZS5ub3coKS5wbHVzKHsgZGF5czogMSB9KS50b1JlbGF0aXZlKCkgLy89PiBcImluIDEgZGF5XCJcbiAgICogQGV4YW1wbGUgRGF0ZVRpbWUubm93KCkuc2V0TG9jYWxlKFwiZXNcIikudG9SZWxhdGl2ZSh7IGRheXM6IDEgfSkgLy89PiBcImRlbnRybyBkZSAxIGTDrWFcIlxuICAgKiBAZXhhbXBsZSBEYXRlVGltZS5ub3coKS5wbHVzKHsgZGF5czogMSB9KS50b1JlbGF0aXZlKHsgbG9jYWxlOiBcImZyXCIgfSkgLy89PiBcImRhbnMgMjMgaGV1cmVzXCJcbiAgICogQGV4YW1wbGUgRGF0ZVRpbWUubm93KCkubWludXMoeyBkYXlzOiAyIH0pLnRvUmVsYXRpdmUoKSAvLz0+IFwiMiBkYXlzIGFnb1wiXG4gICAqIEBleGFtcGxlIERhdGVUaW1lLm5vdygpLm1pbnVzKHsgZGF5czogMiB9KS50b1JlbGF0aXZlKHsgdW5pdDogXCJob3Vyc1wiIH0pIC8vPT4gXCI0OCBob3VycyBhZ29cIlxuICAgKiBAZXhhbXBsZSBEYXRlVGltZS5ub3coKS5taW51cyh7IGhvdXJzOiAzNiB9KS50b1JlbGF0aXZlKHsgcm91bmQ6IGZhbHNlIH0pIC8vPT4gXCIxLjUgZGF5cyBhZ29cIlxuICAgKi9cbiAgO1xuXG4gIF9wcm90by50b1JlbGF0aXZlID0gZnVuY3Rpb24gdG9SZWxhdGl2ZShvcHRpb25zKSB7XG4gICAgaWYgKG9wdGlvbnMgPT09IHZvaWQgMCkge1xuICAgICAgb3B0aW9ucyA9IHt9O1xuICAgIH1cblxuICAgIGlmICghdGhpcy5pc1ZhbGlkKSByZXR1cm4gbnVsbDtcbiAgICB2YXIgYmFzZSA9IG9wdGlvbnMuYmFzZSB8fCBEYXRlVGltZS5mcm9tT2JqZWN0KHt9LCB7XG4gICAgICB6b25lOiB0aGlzLnpvbmVcbiAgICB9KSxcbiAgICAgICAgcGFkZGluZyA9IG9wdGlvbnMucGFkZGluZyA/IHRoaXMgPCBiYXNlID8gLW9wdGlvbnMucGFkZGluZyA6IG9wdGlvbnMucGFkZGluZyA6IDA7XG4gICAgdmFyIHVuaXRzID0gW1wieWVhcnNcIiwgXCJtb250aHNcIiwgXCJkYXlzXCIsIFwiaG91cnNcIiwgXCJtaW51dGVzXCIsIFwic2Vjb25kc1wiXTtcbiAgICB2YXIgdW5pdCA9IG9wdGlvbnMudW5pdDtcblxuICAgIGlmIChBcnJheS5pc0FycmF5KG9wdGlvbnMudW5pdCkpIHtcbiAgICAgIHVuaXRzID0gb3B0aW9ucy51bml0O1xuICAgICAgdW5pdCA9IHVuZGVmaW5lZDtcbiAgICB9XG5cbiAgICByZXR1cm4gZGlmZlJlbGF0aXZlKGJhc2UsIHRoaXMucGx1cyhwYWRkaW5nKSwgX2V4dGVuZHMoe30sIG9wdGlvbnMsIHtcbiAgICAgIG51bWVyaWM6IFwiYWx3YXlzXCIsXG4gICAgICB1bml0czogdW5pdHMsXG4gICAgICB1bml0OiB1bml0XG4gICAgfSkpO1xuICB9XG4gIC8qKlxuICAgKiBSZXR1cm5zIGEgc3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIHRoaXMgZGF0ZSByZWxhdGl2ZSB0byB0b2RheSwgc3VjaCBhcyBcInllc3RlcmRheVwiIG9yIFwibmV4dCBtb250aFwiLlxuICAgKiBPbmx5IGludGVybmF0aW9uYWxpemVzIG9uIHBsYXRmb3JtcyB0aGF0IHN1cHBvcnRzIEludGwuUmVsYXRpdmVUaW1lRm9ybWF0LlxuICAgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9ucyAtIG9wdGlvbnMgdGhhdCBhZmZlY3QgdGhlIG91dHB1dFxuICAgKiBAcGFyYW0ge0RhdGVUaW1lfSBbb3B0aW9ucy5iYXNlPURhdGVUaW1lLm5vdygpXSAtIHRoZSBEYXRlVGltZSB0byB1c2UgYXMgdGhlIGJhc2lzIHRvIHdoaWNoIHRoaXMgdGltZSBpcyBjb21wYXJlZC4gRGVmYXVsdHMgdG8gbm93LlxuICAgKiBAcGFyYW0ge3N0cmluZ30gb3B0aW9ucy5sb2NhbGUgLSBvdmVycmlkZSB0aGUgbG9jYWxlIG9mIHRoaXMgRGF0ZVRpbWVcbiAgICogQHBhcmFtIHtzdHJpbmd9IG9wdGlvbnMudW5pdCAtIHVzZSBhIHNwZWNpZmljIHVuaXQ7IGlmIG9taXR0ZWQsIHRoZSBtZXRob2Qgd2lsbCBwaWNrIHRoZSB1bml0LiBVc2Ugb25lIG9mIFwieWVhcnNcIiwgXCJxdWFydGVyc1wiLCBcIm1vbnRoc1wiLCBcIndlZWtzXCIsIG9yIFwiZGF5c1wiXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBvcHRpb25zLm51bWJlcmluZ1N5c3RlbSAtIG92ZXJyaWRlIHRoZSBudW1iZXJpbmdTeXN0ZW0gb2YgdGhpcyBEYXRlVGltZS4gVGhlIEludGwgc3lzdGVtIG1heSBjaG9vc2Ugbm90IHRvIGhvbm9yIHRoaXNcbiAgICogQGV4YW1wbGUgRGF0ZVRpbWUubm93KCkucGx1cyh7IGRheXM6IDEgfSkudG9SZWxhdGl2ZUNhbGVuZGFyKCkgLy89PiBcInRvbW9ycm93XCJcbiAgICogQGV4YW1wbGUgRGF0ZVRpbWUubm93KCkuc2V0TG9jYWxlKFwiZXNcIikucGx1cyh7IGRheXM6IDEgfSkudG9SZWxhdGl2ZSgpIC8vPT4gXCJcIm1hw7FhbmFcIlxuICAgKiBAZXhhbXBsZSBEYXRlVGltZS5ub3coKS5wbHVzKHsgZGF5czogMSB9KS50b1JlbGF0aXZlQ2FsZW5kYXIoeyBsb2NhbGU6IFwiZnJcIiB9KSAvLz0+IFwiZGVtYWluXCJcbiAgICogQGV4YW1wbGUgRGF0ZVRpbWUubm93KCkubWludXMoeyBkYXlzOiAyIH0pLnRvUmVsYXRpdmVDYWxlbmRhcigpIC8vPT4gXCIyIGRheXMgYWdvXCJcbiAgICovXG4gIDtcblxuICBfcHJvdG8udG9SZWxhdGl2ZUNhbGVuZGFyID0gZnVuY3Rpb24gdG9SZWxhdGl2ZUNhbGVuZGFyKG9wdGlvbnMpIHtcbiAgICBpZiAob3B0aW9ucyA9PT0gdm9pZCAwKSB7XG4gICAgICBvcHRpb25zID0ge307XG4gICAgfVxuXG4gICAgaWYgKCF0aGlzLmlzVmFsaWQpIHJldHVybiBudWxsO1xuICAgIHJldHVybiBkaWZmUmVsYXRpdmUob3B0aW9ucy5iYXNlIHx8IERhdGVUaW1lLmZyb21PYmplY3Qoe30sIHtcbiAgICAgIHpvbmU6IHRoaXMuem9uZVxuICAgIH0pLCB0aGlzLCBfZXh0ZW5kcyh7fSwgb3B0aW9ucywge1xuICAgICAgbnVtZXJpYzogXCJhdXRvXCIsXG4gICAgICB1bml0czogW1wieWVhcnNcIiwgXCJtb250aHNcIiwgXCJkYXlzXCJdLFxuICAgICAgY2FsZW5kYXJ5OiB0cnVlXG4gICAgfSkpO1xuICB9XG4gIC8qKlxuICAgKiBSZXR1cm4gdGhlIG1pbiBvZiBzZXZlcmFsIGRhdGUgdGltZXNcbiAgICogQHBhcmFtIHsuLi5EYXRlVGltZX0gZGF0ZVRpbWVzIC0gdGhlIERhdGVUaW1lcyBmcm9tIHdoaWNoIHRvIGNob29zZSB0aGUgbWluaW11bVxuICAgKiBAcmV0dXJuIHtEYXRlVGltZX0gdGhlIG1pbiBEYXRlVGltZSwgb3IgdW5kZWZpbmVkIGlmIGNhbGxlZCB3aXRoIG5vIGFyZ3VtZW50XG4gICAqL1xuICA7XG5cbiAgRGF0ZVRpbWUubWluID0gZnVuY3Rpb24gbWluKCkge1xuICAgIGZvciAodmFyIF9sZW4gPSBhcmd1bWVudHMubGVuZ3RoLCBkYXRlVGltZXMgPSBuZXcgQXJyYXkoX2xlbiksIF9rZXkgPSAwOyBfa2V5IDwgX2xlbjsgX2tleSsrKSB7XG4gICAgICBkYXRlVGltZXNbX2tleV0gPSBhcmd1bWVudHNbX2tleV07XG4gICAgfVxuXG4gICAgaWYgKCFkYXRlVGltZXMuZXZlcnkoRGF0ZVRpbWUuaXNEYXRlVGltZSkpIHtcbiAgICAgIHRocm93IG5ldyBJbnZhbGlkQXJndW1lbnRFcnJvcihcIm1pbiByZXF1aXJlcyBhbGwgYXJndW1lbnRzIGJlIERhdGVUaW1lc1wiKTtcbiAgICB9XG5cbiAgICByZXR1cm4gYmVzdEJ5KGRhdGVUaW1lcywgZnVuY3Rpb24gKGkpIHtcbiAgICAgIHJldHVybiBpLnZhbHVlT2YoKTtcbiAgICB9LCBNYXRoLm1pbik7XG4gIH1cbiAgLyoqXG4gICAqIFJldHVybiB0aGUgbWF4IG9mIHNldmVyYWwgZGF0ZSB0aW1lc1xuICAgKiBAcGFyYW0gey4uLkRhdGVUaW1lfSBkYXRlVGltZXMgLSB0aGUgRGF0ZVRpbWVzIGZyb20gd2hpY2ggdG8gY2hvb3NlIHRoZSBtYXhpbXVtXG4gICAqIEByZXR1cm4ge0RhdGVUaW1lfSB0aGUgbWF4IERhdGVUaW1lLCBvciB1bmRlZmluZWQgaWYgY2FsbGVkIHdpdGggbm8gYXJndW1lbnRcbiAgICovXG4gIDtcblxuICBEYXRlVGltZS5tYXggPSBmdW5jdGlvbiBtYXgoKSB7XG4gICAgZm9yICh2YXIgX2xlbjIgPSBhcmd1bWVudHMubGVuZ3RoLCBkYXRlVGltZXMgPSBuZXcgQXJyYXkoX2xlbjIpLCBfa2V5MiA9IDA7IF9rZXkyIDwgX2xlbjI7IF9rZXkyKyspIHtcbiAgICAgIGRhdGVUaW1lc1tfa2V5Ml0gPSBhcmd1bWVudHNbX2tleTJdO1xuICAgIH1cblxuICAgIGlmICghZGF0ZVRpbWVzLmV2ZXJ5KERhdGVUaW1lLmlzRGF0ZVRpbWUpKSB7XG4gICAgICB0aHJvdyBuZXcgSW52YWxpZEFyZ3VtZW50RXJyb3IoXCJtYXggcmVxdWlyZXMgYWxsIGFyZ3VtZW50cyBiZSBEYXRlVGltZXNcIik7XG4gICAgfVxuXG4gICAgcmV0dXJuIGJlc3RCeShkYXRlVGltZXMsIGZ1bmN0aW9uIChpKSB7XG4gICAgICByZXR1cm4gaS52YWx1ZU9mKCk7XG4gICAgfSwgTWF0aC5tYXgpO1xuICB9IC8vIE1JU0NcblxuICAvKipcbiAgICogRXhwbGFpbiBob3cgYSBzdHJpbmcgd291bGQgYmUgcGFyc2VkIGJ5IGZyb21Gb3JtYXQoKVxuICAgKiBAcGFyYW0ge3N0cmluZ30gdGV4dCAtIHRoZSBzdHJpbmcgdG8gcGFyc2VcbiAgICogQHBhcmFtIHtzdHJpbmd9IGZtdCAtIHRoZSBmb3JtYXQgdGhlIHN0cmluZyBpcyBleHBlY3RlZCB0byBiZSBpbiAoc2VlIGRlc2NyaXB0aW9uKVxuICAgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9ucyAtIG9wdGlvbnMgdGFrZW4gYnkgZnJvbUZvcm1hdCgpXG4gICAqIEByZXR1cm4ge09iamVjdH1cbiAgICovXG4gIDtcblxuICBEYXRlVGltZS5mcm9tRm9ybWF0RXhwbGFpbiA9IGZ1bmN0aW9uIGZyb21Gb3JtYXRFeHBsYWluKHRleHQsIGZtdCwgb3B0aW9ucykge1xuICAgIGlmIChvcHRpb25zID09PSB2b2lkIDApIHtcbiAgICAgIG9wdGlvbnMgPSB7fTtcbiAgICB9XG5cbiAgICB2YXIgX29wdGlvbnMgPSBvcHRpb25zLFxuICAgICAgICBfb3B0aW9ucyRsb2NhbGUgPSBfb3B0aW9ucy5sb2NhbGUsXG4gICAgICAgIGxvY2FsZSA9IF9vcHRpb25zJGxvY2FsZSA9PT0gdm9pZCAwID8gbnVsbCA6IF9vcHRpb25zJGxvY2FsZSxcbiAgICAgICAgX29wdGlvbnMkbnVtYmVyaW5nU3lzID0gX29wdGlvbnMubnVtYmVyaW5nU3lzdGVtLFxuICAgICAgICBudW1iZXJpbmdTeXN0ZW0gPSBfb3B0aW9ucyRudW1iZXJpbmdTeXMgPT09IHZvaWQgMCA/IG51bGwgOiBfb3B0aW9ucyRudW1iZXJpbmdTeXMsXG4gICAgICAgIGxvY2FsZVRvVXNlID0gTG9jYWxlLmZyb21PcHRzKHtcbiAgICAgIGxvY2FsZTogbG9jYWxlLFxuICAgICAgbnVtYmVyaW5nU3lzdGVtOiBudW1iZXJpbmdTeXN0ZW0sXG4gICAgICBkZWZhdWx0VG9FTjogdHJ1ZVxuICAgIH0pO1xuICAgIHJldHVybiBleHBsYWluRnJvbVRva2Vucyhsb2NhbGVUb1VzZSwgdGV4dCwgZm10KTtcbiAgfVxuICAvKipcbiAgICogQGRlcHJlY2F0ZWQgdXNlIGZyb21Gb3JtYXRFeHBsYWluIGluc3RlYWRcbiAgICovXG4gIDtcblxuICBEYXRlVGltZS5mcm9tU3RyaW5nRXhwbGFpbiA9IGZ1bmN0aW9uIGZyb21TdHJpbmdFeHBsYWluKHRleHQsIGZtdCwgb3B0aW9ucykge1xuICAgIGlmIChvcHRpb25zID09PSB2b2lkIDApIHtcbiAgICAgIG9wdGlvbnMgPSB7fTtcbiAgICB9XG5cbiAgICByZXR1cm4gRGF0ZVRpbWUuZnJvbUZvcm1hdEV4cGxhaW4odGV4dCwgZm10LCBvcHRpb25zKTtcbiAgfSAvLyBGT1JNQVQgUFJFU0VUU1xuXG4gIC8qKlxuICAgKiB7QGxpbmsgRGF0ZVRpbWUjdG9Mb2NhbGVTdHJpbmd9IGZvcm1hdCBsaWtlIDEwLzE0LzE5ODNcbiAgICogQHR5cGUge09iamVjdH1cbiAgICovXG4gIDtcblxuICBfY3JlYXRlQ2xhc3MoRGF0ZVRpbWUsIFt7XG4gICAga2V5OiBcImlzVmFsaWRcIixcbiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgIHJldHVybiB0aGlzLmludmFsaWQgPT09IG51bGw7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgYW4gZXJyb3IgY29kZSBpZiB0aGlzIERhdGVUaW1lIGlzIGludmFsaWQsIG9yIG51bGwgaWYgdGhlIERhdGVUaW1lIGlzIHZhbGlkXG4gICAgICogQHR5cGUge3N0cmluZ31cbiAgICAgKi9cblxuICB9LCB7XG4gICAga2V5OiBcImludmFsaWRSZWFzb25cIixcbiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgIHJldHVybiB0aGlzLmludmFsaWQgPyB0aGlzLmludmFsaWQucmVhc29uIDogbnVsbDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyBhbiBleHBsYW5hdGlvbiBvZiB3aHkgdGhpcyBEYXRlVGltZSBiZWNhbWUgaW52YWxpZCwgb3IgbnVsbCBpZiB0aGUgRGF0ZVRpbWUgaXMgdmFsaWRcbiAgICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgICAqL1xuXG4gIH0sIHtcbiAgICBrZXk6IFwiaW52YWxpZEV4cGxhbmF0aW9uXCIsXG4gICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICByZXR1cm4gdGhpcy5pbnZhbGlkID8gdGhpcy5pbnZhbGlkLmV4cGxhbmF0aW9uIDogbnVsbDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogR2V0IHRoZSBsb2NhbGUgb2YgYSBEYXRlVGltZSwgc3VjaCAnZW4tR0InLiBUaGUgbG9jYWxlIGlzIHVzZWQgd2hlbiBmb3JtYXR0aW5nIHRoZSBEYXRlVGltZVxuICAgICAqXG4gICAgICogQHR5cGUge3N0cmluZ31cbiAgICAgKi9cblxuICB9LCB7XG4gICAga2V5OiBcImxvY2FsZVwiLFxuICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgcmV0dXJuIHRoaXMuaXNWYWxpZCA/IHRoaXMubG9jLmxvY2FsZSA6IG51bGw7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEdldCB0aGUgbnVtYmVyaW5nIHN5c3RlbSBvZiBhIERhdGVUaW1lLCBzdWNoICdiZW5nJy4gVGhlIG51bWJlcmluZyBzeXN0ZW0gaXMgdXNlZCB3aGVuIGZvcm1hdHRpbmcgdGhlIERhdGVUaW1lXG4gICAgICpcbiAgICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgICAqL1xuXG4gIH0sIHtcbiAgICBrZXk6IFwibnVtYmVyaW5nU3lzdGVtXCIsXG4gICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICByZXR1cm4gdGhpcy5pc1ZhbGlkID8gdGhpcy5sb2MubnVtYmVyaW5nU3lzdGVtIDogbnVsbDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogR2V0IHRoZSBvdXRwdXQgY2FsZW5kYXIgb2YgYSBEYXRlVGltZSwgc3VjaCAnaXNsYW1pYycuIFRoZSBvdXRwdXQgY2FsZW5kYXIgaXMgdXNlZCB3aGVuIGZvcm1hdHRpbmcgdGhlIERhdGVUaW1lXG4gICAgICpcbiAgICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgICAqL1xuXG4gIH0sIHtcbiAgICBrZXk6IFwib3V0cHV0Q2FsZW5kYXJcIixcbiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgIHJldHVybiB0aGlzLmlzVmFsaWQgPyB0aGlzLmxvYy5vdXRwdXRDYWxlbmRhciA6IG51bGw7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEdldCB0aGUgdGltZSB6b25lIGFzc29jaWF0ZWQgd2l0aCB0aGlzIERhdGVUaW1lLlxuICAgICAqIEB0eXBlIHtab25lfVxuICAgICAqL1xuXG4gIH0sIHtcbiAgICBrZXk6IFwiem9uZVwiLFxuICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgcmV0dXJuIHRoaXMuX3pvbmU7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEdldCB0aGUgbmFtZSBvZiB0aGUgdGltZSB6b25lLlxuICAgICAqIEB0eXBlIHtzdHJpbmd9XG4gICAgICovXG5cbiAgfSwge1xuICAgIGtleTogXCJ6b25lTmFtZVwiLFxuICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgcmV0dXJuIHRoaXMuaXNWYWxpZCA/IHRoaXMuem9uZS5uYW1lIDogbnVsbDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogR2V0IHRoZSB5ZWFyXG4gICAgICogQGV4YW1wbGUgRGF0ZVRpbWUubG9jYWwoMjAxNywgNSwgMjUpLnllYXIgLy89PiAyMDE3XG4gICAgICogQHR5cGUge251bWJlcn1cbiAgICAgKi9cblxuICB9LCB7XG4gICAga2V5OiBcInllYXJcIixcbiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgIHJldHVybiB0aGlzLmlzVmFsaWQgPyB0aGlzLmMueWVhciA6IE5hTjtcbiAgICB9XG4gICAgLyoqXG4gICAgICogR2V0IHRoZSBxdWFydGVyXG4gICAgICogQGV4YW1wbGUgRGF0ZVRpbWUubG9jYWwoMjAxNywgNSwgMjUpLnF1YXJ0ZXIgLy89PiAyXG4gICAgICogQHR5cGUge251bWJlcn1cbiAgICAgKi9cblxuICB9LCB7XG4gICAga2V5OiBcInF1YXJ0ZXJcIixcbiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgIHJldHVybiB0aGlzLmlzVmFsaWQgPyBNYXRoLmNlaWwodGhpcy5jLm1vbnRoIC8gMykgOiBOYU47XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEdldCB0aGUgbW9udGggKDEtMTIpLlxuICAgICAqIEBleGFtcGxlIERhdGVUaW1lLmxvY2FsKDIwMTcsIDUsIDI1KS5tb250aCAvLz0+IDVcbiAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAqL1xuXG4gIH0sIHtcbiAgICBrZXk6IFwibW9udGhcIixcbiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgIHJldHVybiB0aGlzLmlzVmFsaWQgPyB0aGlzLmMubW9udGggOiBOYU47XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEdldCB0aGUgZGF5IG9mIHRoZSBtb250aCAoMS0zMGlzaCkuXG4gICAgICogQGV4YW1wbGUgRGF0ZVRpbWUubG9jYWwoMjAxNywgNSwgMjUpLmRheSAvLz0+IDI1XG4gICAgICogQHR5cGUge251bWJlcn1cbiAgICAgKi9cblxuICB9LCB7XG4gICAga2V5OiBcImRheVwiLFxuICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgcmV0dXJuIHRoaXMuaXNWYWxpZCA/IHRoaXMuYy5kYXkgOiBOYU47XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEdldCB0aGUgaG91ciBvZiB0aGUgZGF5ICgwLTIzKS5cbiAgICAgKiBAZXhhbXBsZSBEYXRlVGltZS5sb2NhbCgyMDE3LCA1LCAyNSwgOSkuaG91ciAvLz0+IDlcbiAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAqL1xuXG4gIH0sIHtcbiAgICBrZXk6IFwiaG91clwiLFxuICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgcmV0dXJuIHRoaXMuaXNWYWxpZCA/IHRoaXMuYy5ob3VyIDogTmFOO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIG1pbnV0ZSBvZiB0aGUgaG91ciAoMC01OSkuXG4gICAgICogQGV4YW1wbGUgRGF0ZVRpbWUubG9jYWwoMjAxNywgNSwgMjUsIDksIDMwKS5taW51dGUgLy89PiAzMFxuICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICovXG5cbiAgfSwge1xuICAgIGtleTogXCJtaW51dGVcIixcbiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgIHJldHVybiB0aGlzLmlzVmFsaWQgPyB0aGlzLmMubWludXRlIDogTmFOO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIHNlY29uZCBvZiB0aGUgbWludXRlICgwLTU5KS5cbiAgICAgKiBAZXhhbXBsZSBEYXRlVGltZS5sb2NhbCgyMDE3LCA1LCAyNSwgOSwgMzAsIDUyKS5zZWNvbmQgLy89PiA1MlxuICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICovXG5cbiAgfSwge1xuICAgIGtleTogXCJzZWNvbmRcIixcbiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgIHJldHVybiB0aGlzLmlzVmFsaWQgPyB0aGlzLmMuc2Vjb25kIDogTmFOO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIG1pbGxpc2Vjb25kIG9mIHRoZSBzZWNvbmQgKDAtOTk5KS5cbiAgICAgKiBAZXhhbXBsZSBEYXRlVGltZS5sb2NhbCgyMDE3LCA1LCAyNSwgOSwgMzAsIDUyLCA2NTQpLm1pbGxpc2Vjb25kIC8vPT4gNjU0XG4gICAgICogQHR5cGUge251bWJlcn1cbiAgICAgKi9cblxuICB9LCB7XG4gICAga2V5OiBcIm1pbGxpc2Vjb25kXCIsXG4gICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICByZXR1cm4gdGhpcy5pc1ZhbGlkID8gdGhpcy5jLm1pbGxpc2Vjb25kIDogTmFOO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIHdlZWsgeWVhclxuICAgICAqIEBzZWUgaHR0cHM6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvSVNPX3dlZWtfZGF0ZVxuICAgICAqIEBleGFtcGxlIERhdGVUaW1lLmxvY2FsKDIwMTQsIDEyLCAzMSkud2Vla1llYXIgLy89PiAyMDE1XG4gICAgICogQHR5cGUge251bWJlcn1cbiAgICAgKi9cblxuICB9LCB7XG4gICAga2V5OiBcIndlZWtZZWFyXCIsXG4gICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICByZXR1cm4gdGhpcy5pc1ZhbGlkID8gcG9zc2libHlDYWNoZWRXZWVrRGF0YSh0aGlzKS53ZWVrWWVhciA6IE5hTjtcbiAgICB9XG4gICAgLyoqXG4gICAgICogR2V0IHRoZSB3ZWVrIG51bWJlciBvZiB0aGUgd2VlayB5ZWFyICgxLTUyaXNoKS5cbiAgICAgKiBAc2VlIGh0dHBzOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL0lTT193ZWVrX2RhdGVcbiAgICAgKiBAZXhhbXBsZSBEYXRlVGltZS5sb2NhbCgyMDE3LCA1LCAyNSkud2Vla051bWJlciAvLz0+IDIxXG4gICAgICogQHR5cGUge251bWJlcn1cbiAgICAgKi9cblxuICB9LCB7XG4gICAga2V5OiBcIndlZWtOdW1iZXJcIixcbiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgIHJldHVybiB0aGlzLmlzVmFsaWQgPyBwb3NzaWJseUNhY2hlZFdlZWtEYXRhKHRoaXMpLndlZWtOdW1iZXIgOiBOYU47XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEdldCB0aGUgZGF5IG9mIHRoZSB3ZWVrLlxuICAgICAqIDEgaXMgTW9uZGF5IGFuZCA3IGlzIFN1bmRheVxuICAgICAqIEBzZWUgaHR0cHM6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvSVNPX3dlZWtfZGF0ZVxuICAgICAqIEBleGFtcGxlIERhdGVUaW1lLmxvY2FsKDIwMTQsIDExLCAzMSkud2Vla2RheSAvLz0+IDRcbiAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAqL1xuXG4gIH0sIHtcbiAgICBrZXk6IFwid2Vla2RheVwiLFxuICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgcmV0dXJuIHRoaXMuaXNWYWxpZCA/IHBvc3NpYmx5Q2FjaGVkV2Vla0RhdGEodGhpcykud2Vla2RheSA6IE5hTjtcbiAgICB9XG4gICAgLyoqXG4gICAgICogR2V0IHRoZSBvcmRpbmFsIChtZWFuaW5nIHRoZSBkYXkgb2YgdGhlIHllYXIpXG4gICAgICogQGV4YW1wbGUgRGF0ZVRpbWUubG9jYWwoMjAxNywgNSwgMjUpLm9yZGluYWwgLy89PiAxNDVcbiAgICAgKiBAdHlwZSB7bnVtYmVyfERhdGVUaW1lfVxuICAgICAqL1xuXG4gIH0sIHtcbiAgICBrZXk6IFwib3JkaW5hbFwiLFxuICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgcmV0dXJuIHRoaXMuaXNWYWxpZCA/IGdyZWdvcmlhblRvT3JkaW5hbCh0aGlzLmMpLm9yZGluYWwgOiBOYU47XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEdldCB0aGUgaHVtYW4gcmVhZGFibGUgc2hvcnQgbW9udGggbmFtZSwgc3VjaCBhcyAnT2N0Jy5cbiAgICAgKiBEZWZhdWx0cyB0byB0aGUgc3lzdGVtJ3MgbG9jYWxlIGlmIG5vIGxvY2FsZSBoYXMgYmVlbiBzcGVjaWZpZWRcbiAgICAgKiBAZXhhbXBsZSBEYXRlVGltZS5sb2NhbCgyMDE3LCAxMCwgMzApLm1vbnRoU2hvcnQgLy89PiBPY3RcbiAgICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgICAqL1xuXG4gIH0sIHtcbiAgICBrZXk6IFwibW9udGhTaG9ydFwiLFxuICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgcmV0dXJuIHRoaXMuaXNWYWxpZCA/IEluZm8ubW9udGhzKFwic2hvcnRcIiwge1xuICAgICAgICBsb2NPYmo6IHRoaXMubG9jXG4gICAgICB9KVt0aGlzLm1vbnRoIC0gMV0gOiBudWxsO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIGh1bWFuIHJlYWRhYmxlIGxvbmcgbW9udGggbmFtZSwgc3VjaCBhcyAnT2N0b2JlcicuXG4gICAgICogRGVmYXVsdHMgdG8gdGhlIHN5c3RlbSdzIGxvY2FsZSBpZiBubyBsb2NhbGUgaGFzIGJlZW4gc3BlY2lmaWVkXG4gICAgICogQGV4YW1wbGUgRGF0ZVRpbWUubG9jYWwoMjAxNywgMTAsIDMwKS5tb250aExvbmcgLy89PiBPY3RvYmVyXG4gICAgICogQHR5cGUge3N0cmluZ31cbiAgICAgKi9cblxuICB9LCB7XG4gICAga2V5OiBcIm1vbnRoTG9uZ1wiLFxuICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgcmV0dXJuIHRoaXMuaXNWYWxpZCA/IEluZm8ubW9udGhzKFwibG9uZ1wiLCB7XG4gICAgICAgIGxvY09iajogdGhpcy5sb2NcbiAgICAgIH0pW3RoaXMubW9udGggLSAxXSA6IG51bGw7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEdldCB0aGUgaHVtYW4gcmVhZGFibGUgc2hvcnQgd2Vla2RheSwgc3VjaCBhcyAnTW9uJy5cbiAgICAgKiBEZWZhdWx0cyB0byB0aGUgc3lzdGVtJ3MgbG9jYWxlIGlmIG5vIGxvY2FsZSBoYXMgYmVlbiBzcGVjaWZpZWRcbiAgICAgKiBAZXhhbXBsZSBEYXRlVGltZS5sb2NhbCgyMDE3LCAxMCwgMzApLndlZWtkYXlTaG9ydCAvLz0+IE1vblxuICAgICAqIEB0eXBlIHtzdHJpbmd9XG4gICAgICovXG5cbiAgfSwge1xuICAgIGtleTogXCJ3ZWVrZGF5U2hvcnRcIixcbiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgIHJldHVybiB0aGlzLmlzVmFsaWQgPyBJbmZvLndlZWtkYXlzKFwic2hvcnRcIiwge1xuICAgICAgICBsb2NPYmo6IHRoaXMubG9jXG4gICAgICB9KVt0aGlzLndlZWtkYXkgLSAxXSA6IG51bGw7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEdldCB0aGUgaHVtYW4gcmVhZGFibGUgbG9uZyB3ZWVrZGF5LCBzdWNoIGFzICdNb25kYXknLlxuICAgICAqIERlZmF1bHRzIHRvIHRoZSBzeXN0ZW0ncyBsb2NhbGUgaWYgbm8gbG9jYWxlIGhhcyBiZWVuIHNwZWNpZmllZFxuICAgICAqIEBleGFtcGxlIERhdGVUaW1lLmxvY2FsKDIwMTcsIDEwLCAzMCkud2Vla2RheUxvbmcgLy89PiBNb25kYXlcbiAgICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgICAqL1xuXG4gIH0sIHtcbiAgICBrZXk6IFwid2Vla2RheUxvbmdcIixcbiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgIHJldHVybiB0aGlzLmlzVmFsaWQgPyBJbmZvLndlZWtkYXlzKFwibG9uZ1wiLCB7XG4gICAgICAgIGxvY09iajogdGhpcy5sb2NcbiAgICAgIH0pW3RoaXMud2Vla2RheSAtIDFdIDogbnVsbDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogR2V0IHRoZSBVVEMgb2Zmc2V0IG9mIHRoaXMgRGF0ZVRpbWUgaW4gbWludXRlc1xuICAgICAqIEBleGFtcGxlIERhdGVUaW1lLm5vdygpLm9mZnNldCAvLz0+IC0yNDBcbiAgICAgKiBAZXhhbXBsZSBEYXRlVGltZS51dGMoKS5vZmZzZXQgLy89PiAwXG4gICAgICogQHR5cGUge251bWJlcn1cbiAgICAgKi9cblxuICB9LCB7XG4gICAga2V5OiBcIm9mZnNldFwiLFxuICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgcmV0dXJuIHRoaXMuaXNWYWxpZCA/ICt0aGlzLm8gOiBOYU47XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEdldCB0aGUgc2hvcnQgaHVtYW4gbmFtZSBmb3IgdGhlIHpvbmUncyBjdXJyZW50IG9mZnNldCwgZm9yIGV4YW1wbGUgXCJFU1RcIiBvciBcIkVEVFwiLlxuICAgICAqIERlZmF1bHRzIHRvIHRoZSBzeXN0ZW0ncyBsb2NhbGUgaWYgbm8gbG9jYWxlIGhhcyBiZWVuIHNwZWNpZmllZFxuICAgICAqIEB0eXBlIHtzdHJpbmd9XG4gICAgICovXG5cbiAgfSwge1xuICAgIGtleTogXCJvZmZzZXROYW1lU2hvcnRcIixcbiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgIGlmICh0aGlzLmlzVmFsaWQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuem9uZS5vZmZzZXROYW1lKHRoaXMudHMsIHtcbiAgICAgICAgICBmb3JtYXQ6IFwic2hvcnRcIixcbiAgICAgICAgICBsb2NhbGU6IHRoaXMubG9jYWxlXG4gICAgICAgIH0pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEdldCB0aGUgbG9uZyBodW1hbiBuYW1lIGZvciB0aGUgem9uZSdzIGN1cnJlbnQgb2Zmc2V0LCBmb3IgZXhhbXBsZSBcIkVhc3Rlcm4gU3RhbmRhcmQgVGltZVwiIG9yIFwiRWFzdGVybiBEYXlsaWdodCBUaW1lXCIuXG4gICAgICogRGVmYXVsdHMgdG8gdGhlIHN5c3RlbSdzIGxvY2FsZSBpZiBubyBsb2NhbGUgaGFzIGJlZW4gc3BlY2lmaWVkXG4gICAgICogQHR5cGUge3N0cmluZ31cbiAgICAgKi9cblxuICB9LCB7XG4gICAga2V5OiBcIm9mZnNldE5hbWVMb25nXCIsXG4gICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICBpZiAodGhpcy5pc1ZhbGlkKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnpvbmUub2Zmc2V0TmFtZSh0aGlzLnRzLCB7XG4gICAgICAgICAgZm9ybWF0OiBcImxvbmdcIixcbiAgICAgICAgICBsb2NhbGU6IHRoaXMubG9jYWxlXG4gICAgICAgIH0pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEdldCB3aGV0aGVyIHRoaXMgem9uZSdzIG9mZnNldCBldmVyIGNoYW5nZXMsIGFzIGluIGEgRFNULlxuICAgICAqIEB0eXBlIHtib29sZWFufVxuICAgICAqL1xuXG4gIH0sIHtcbiAgICBrZXk6IFwiaXNPZmZzZXRGaXhlZFwiLFxuICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgcmV0dXJuIHRoaXMuaXNWYWxpZCA/IHRoaXMuem9uZS5pc1VuaXZlcnNhbCA6IG51bGw7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEdldCB3aGV0aGVyIHRoZSBEYXRlVGltZSBpcyBpbiBhIERTVC5cbiAgICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICAgKi9cblxuICB9LCB7XG4gICAga2V5OiBcImlzSW5EU1RcIixcbiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgIGlmICh0aGlzLmlzT2Zmc2V0Rml4ZWQpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIHRoaXMub2Zmc2V0ID4gdGhpcy5zZXQoe1xuICAgICAgICAgIG1vbnRoOiAxXG4gICAgICAgIH0pLm9mZnNldCB8fCB0aGlzLm9mZnNldCA+IHRoaXMuc2V0KHtcbiAgICAgICAgICBtb250aDogNVxuICAgICAgICB9KS5vZmZzZXQ7XG4gICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdHJ1ZSBpZiB0aGlzIERhdGVUaW1lIGlzIGluIGEgbGVhcCB5ZWFyLCBmYWxzZSBvdGhlcndpc2VcbiAgICAgKiBAZXhhbXBsZSBEYXRlVGltZS5sb2NhbCgyMDE2KS5pc0luTGVhcFllYXIgLy89PiB0cnVlXG4gICAgICogQGV4YW1wbGUgRGF0ZVRpbWUubG9jYWwoMjAxMykuaXNJbkxlYXBZZWFyIC8vPT4gZmFsc2VcbiAgICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICAgKi9cblxuICB9LCB7XG4gICAga2V5OiBcImlzSW5MZWFwWWVhclwiLFxuICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgcmV0dXJuIGlzTGVhcFllYXIodGhpcy55ZWFyKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0aGUgbnVtYmVyIG9mIGRheXMgaW4gdGhpcyBEYXRlVGltZSdzIG1vbnRoXG4gICAgICogQGV4YW1wbGUgRGF0ZVRpbWUubG9jYWwoMjAxNiwgMikuZGF5c0luTW9udGggLy89PiAyOVxuICAgICAqIEBleGFtcGxlIERhdGVUaW1lLmxvY2FsKDIwMTYsIDMpLmRheXNJbk1vbnRoIC8vPT4gMzFcbiAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAqL1xuXG4gIH0sIHtcbiAgICBrZXk6IFwiZGF5c0luTW9udGhcIixcbiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgIHJldHVybiBkYXlzSW5Nb250aCh0aGlzLnllYXIsIHRoaXMubW9udGgpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRoZSBudW1iZXIgb2YgZGF5cyBpbiB0aGlzIERhdGVUaW1lJ3MgeWVhclxuICAgICAqIEBleGFtcGxlIERhdGVUaW1lLmxvY2FsKDIwMTYpLmRheXNJblllYXIgLy89PiAzNjZcbiAgICAgKiBAZXhhbXBsZSBEYXRlVGltZS5sb2NhbCgyMDEzKS5kYXlzSW5ZZWFyIC8vPT4gMzY1XG4gICAgICogQHR5cGUge251bWJlcn1cbiAgICAgKi9cblxuICB9LCB7XG4gICAga2V5OiBcImRheXNJblllYXJcIixcbiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgIHJldHVybiB0aGlzLmlzVmFsaWQgPyBkYXlzSW5ZZWFyKHRoaXMueWVhcikgOiBOYU47XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdGhlIG51bWJlciBvZiB3ZWVrcyBpbiB0aGlzIERhdGVUaW1lJ3MgeWVhclxuICAgICAqIEBzZWUgaHR0cHM6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvSVNPX3dlZWtfZGF0ZVxuICAgICAqIEBleGFtcGxlIERhdGVUaW1lLmxvY2FsKDIwMDQpLndlZWtzSW5XZWVrWWVhciAvLz0+IDUzXG4gICAgICogQGV4YW1wbGUgRGF0ZVRpbWUubG9jYWwoMjAxMykud2Vla3NJbldlZWtZZWFyIC8vPT4gNTJcbiAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAqL1xuXG4gIH0sIHtcbiAgICBrZXk6IFwid2Vla3NJbldlZWtZZWFyXCIsXG4gICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICByZXR1cm4gdGhpcy5pc1ZhbGlkID8gd2Vla3NJbldlZWtZZWFyKHRoaXMud2Vla1llYXIpIDogTmFOO1xuICAgIH1cbiAgfV0sIFt7XG4gICAga2V5OiBcIkRBVEVfU0hPUlRcIixcbiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgIHJldHVybiBEQVRFX1NIT1JUO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiB7QGxpbmsgRGF0ZVRpbWUjdG9Mb2NhbGVTdHJpbmd9IGZvcm1hdCBsaWtlICdPY3QgMTQsIDE5ODMnXG4gICAgICogQHR5cGUge09iamVjdH1cbiAgICAgKi9cblxuICB9LCB7XG4gICAga2V5OiBcIkRBVEVfTUVEXCIsXG4gICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICByZXR1cm4gREFURV9NRUQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIHtAbGluayBEYXRlVGltZSN0b0xvY2FsZVN0cmluZ30gZm9ybWF0IGxpa2UgJ0ZyaSwgT2N0IDE0LCAxOTgzJ1xuICAgICAqIEB0eXBlIHtPYmplY3R9XG4gICAgICovXG5cbiAgfSwge1xuICAgIGtleTogXCJEQVRFX01FRF9XSVRIX1dFRUtEQVlcIixcbiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgIHJldHVybiBEQVRFX01FRF9XSVRIX1dFRUtEQVk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIHtAbGluayBEYXRlVGltZSN0b0xvY2FsZVN0cmluZ30gZm9ybWF0IGxpa2UgJ09jdG9iZXIgMTQsIDE5ODMnXG4gICAgICogQHR5cGUge09iamVjdH1cbiAgICAgKi9cblxuICB9LCB7XG4gICAga2V5OiBcIkRBVEVfRlVMTFwiLFxuICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgcmV0dXJuIERBVEVfRlVMTDtcbiAgICB9XG4gICAgLyoqXG4gICAgICoge0BsaW5rIERhdGVUaW1lI3RvTG9jYWxlU3RyaW5nfSBmb3JtYXQgbGlrZSAnVHVlc2RheSwgT2N0b2JlciAxNCwgMTk4MydcbiAgICAgKiBAdHlwZSB7T2JqZWN0fVxuICAgICAqL1xuXG4gIH0sIHtcbiAgICBrZXk6IFwiREFURV9IVUdFXCIsXG4gICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICByZXR1cm4gREFURV9IVUdFO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiB7QGxpbmsgRGF0ZVRpbWUjdG9Mb2NhbGVTdHJpbmd9IGZvcm1hdCBsaWtlICcwOTozMCBBTScuIE9ubHkgMTItaG91ciBpZiB0aGUgbG9jYWxlIGlzLlxuICAgICAqIEB0eXBlIHtPYmplY3R9XG4gICAgICovXG5cbiAgfSwge1xuICAgIGtleTogXCJUSU1FX1NJTVBMRVwiLFxuICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgcmV0dXJuIFRJTUVfU0lNUExFO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiB7QGxpbmsgRGF0ZVRpbWUjdG9Mb2NhbGVTdHJpbmd9IGZvcm1hdCBsaWtlICcwOTozMDoyMyBBTScuIE9ubHkgMTItaG91ciBpZiB0aGUgbG9jYWxlIGlzLlxuICAgICAqIEB0eXBlIHtPYmplY3R9XG4gICAgICovXG5cbiAgfSwge1xuICAgIGtleTogXCJUSU1FX1dJVEhfU0VDT05EU1wiLFxuICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgcmV0dXJuIFRJTUVfV0lUSF9TRUNPTkRTO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiB7QGxpbmsgRGF0ZVRpbWUjdG9Mb2NhbGVTdHJpbmd9IGZvcm1hdCBsaWtlICcwOTozMDoyMyBBTSBFRFQnLiBPbmx5IDEyLWhvdXIgaWYgdGhlIGxvY2FsZSBpcy5cbiAgICAgKiBAdHlwZSB7T2JqZWN0fVxuICAgICAqL1xuXG4gIH0sIHtcbiAgICBrZXk6IFwiVElNRV9XSVRIX1NIT1JUX09GRlNFVFwiLFxuICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgcmV0dXJuIFRJTUVfV0lUSF9TSE9SVF9PRkZTRVQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIHtAbGluayBEYXRlVGltZSN0b0xvY2FsZVN0cmluZ30gZm9ybWF0IGxpa2UgJzA5OjMwOjIzIEFNIEVhc3Rlcm4gRGF5bGlnaHQgVGltZScuIE9ubHkgMTItaG91ciBpZiB0aGUgbG9jYWxlIGlzLlxuICAgICAqIEB0eXBlIHtPYmplY3R9XG4gICAgICovXG5cbiAgfSwge1xuICAgIGtleTogXCJUSU1FX1dJVEhfTE9OR19PRkZTRVRcIixcbiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgIHJldHVybiBUSU1FX1dJVEhfTE9OR19PRkZTRVQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIHtAbGluayBEYXRlVGltZSN0b0xvY2FsZVN0cmluZ30gZm9ybWF0IGxpa2UgJzA5OjMwJywgYWx3YXlzIDI0LWhvdXIuXG4gICAgICogQHR5cGUge09iamVjdH1cbiAgICAgKi9cblxuICB9LCB7XG4gICAga2V5OiBcIlRJTUVfMjRfU0lNUExFXCIsXG4gICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICByZXR1cm4gVElNRV8yNF9TSU1QTEU7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIHtAbGluayBEYXRlVGltZSN0b0xvY2FsZVN0cmluZ30gZm9ybWF0IGxpa2UgJzA5OjMwOjIzJywgYWx3YXlzIDI0LWhvdXIuXG4gICAgICogQHR5cGUge09iamVjdH1cbiAgICAgKi9cblxuICB9LCB7XG4gICAga2V5OiBcIlRJTUVfMjRfV0lUSF9TRUNPTkRTXCIsXG4gICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICByZXR1cm4gVElNRV8yNF9XSVRIX1NFQ09ORFM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIHtAbGluayBEYXRlVGltZSN0b0xvY2FsZVN0cmluZ30gZm9ybWF0IGxpa2UgJzA5OjMwOjIzIEVEVCcsIGFsd2F5cyAyNC1ob3VyLlxuICAgICAqIEB0eXBlIHtPYmplY3R9XG4gICAgICovXG5cbiAgfSwge1xuICAgIGtleTogXCJUSU1FXzI0X1dJVEhfU0hPUlRfT0ZGU0VUXCIsXG4gICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICByZXR1cm4gVElNRV8yNF9XSVRIX1NIT1JUX09GRlNFVDtcbiAgICB9XG4gICAgLyoqXG4gICAgICoge0BsaW5rIERhdGVUaW1lI3RvTG9jYWxlU3RyaW5nfSBmb3JtYXQgbGlrZSAnMDk6MzA6MjMgRWFzdGVybiBEYXlsaWdodCBUaW1lJywgYWx3YXlzIDI0LWhvdXIuXG4gICAgICogQHR5cGUge09iamVjdH1cbiAgICAgKi9cblxuICB9LCB7XG4gICAga2V5OiBcIlRJTUVfMjRfV0lUSF9MT05HX09GRlNFVFwiLFxuICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgcmV0dXJuIFRJTUVfMjRfV0lUSF9MT05HX09GRlNFVDtcbiAgICB9XG4gICAgLyoqXG4gICAgICoge0BsaW5rIERhdGVUaW1lI3RvTG9jYWxlU3RyaW5nfSBmb3JtYXQgbGlrZSAnMTAvMTQvMTk4MywgOTozMCBBTScuIE9ubHkgMTItaG91ciBpZiB0aGUgbG9jYWxlIGlzLlxuICAgICAqIEB0eXBlIHtPYmplY3R9XG4gICAgICovXG5cbiAgfSwge1xuICAgIGtleTogXCJEQVRFVElNRV9TSE9SVFwiLFxuICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgcmV0dXJuIERBVEVUSU1FX1NIT1JUO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiB7QGxpbmsgRGF0ZVRpbWUjdG9Mb2NhbGVTdHJpbmd9IGZvcm1hdCBsaWtlICcxMC8xNC8xOTgzLCA5OjMwOjMzIEFNJy4gT25seSAxMi1ob3VyIGlmIHRoZSBsb2NhbGUgaXMuXG4gICAgICogQHR5cGUge09iamVjdH1cbiAgICAgKi9cblxuICB9LCB7XG4gICAga2V5OiBcIkRBVEVUSU1FX1NIT1JUX1dJVEhfU0VDT05EU1wiLFxuICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgcmV0dXJuIERBVEVUSU1FX1NIT1JUX1dJVEhfU0VDT05EUztcbiAgICB9XG4gICAgLyoqXG4gICAgICoge0BsaW5rIERhdGVUaW1lI3RvTG9jYWxlU3RyaW5nfSBmb3JtYXQgbGlrZSAnT2N0IDE0LCAxOTgzLCA5OjMwIEFNJy4gT25seSAxMi1ob3VyIGlmIHRoZSBsb2NhbGUgaXMuXG4gICAgICogQHR5cGUge09iamVjdH1cbiAgICAgKi9cblxuICB9LCB7XG4gICAga2V5OiBcIkRBVEVUSU1FX01FRFwiLFxuICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgcmV0dXJuIERBVEVUSU1FX01FRDtcbiAgICB9XG4gICAgLyoqXG4gICAgICoge0BsaW5rIERhdGVUaW1lI3RvTG9jYWxlU3RyaW5nfSBmb3JtYXQgbGlrZSAnT2N0IDE0LCAxOTgzLCA5OjMwOjMzIEFNJy4gT25seSAxMi1ob3VyIGlmIHRoZSBsb2NhbGUgaXMuXG4gICAgICogQHR5cGUge09iamVjdH1cbiAgICAgKi9cblxuICB9LCB7XG4gICAga2V5OiBcIkRBVEVUSU1FX01FRF9XSVRIX1NFQ09ORFNcIixcbiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgIHJldHVybiBEQVRFVElNRV9NRURfV0lUSF9TRUNPTkRTO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiB7QGxpbmsgRGF0ZVRpbWUjdG9Mb2NhbGVTdHJpbmd9IGZvcm1hdCBsaWtlICdGcmksIDE0IE9jdCAxOTgzLCA5OjMwIEFNJy4gT25seSAxMi1ob3VyIGlmIHRoZSBsb2NhbGUgaXMuXG4gICAgICogQHR5cGUge09iamVjdH1cbiAgICAgKi9cblxuICB9LCB7XG4gICAga2V5OiBcIkRBVEVUSU1FX01FRF9XSVRIX1dFRUtEQVlcIixcbiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgIHJldHVybiBEQVRFVElNRV9NRURfV0lUSF9XRUVLREFZO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiB7QGxpbmsgRGF0ZVRpbWUjdG9Mb2NhbGVTdHJpbmd9IGZvcm1hdCBsaWtlICdPY3RvYmVyIDE0LCAxOTgzLCA5OjMwIEFNIEVEVCcuIE9ubHkgMTItaG91ciBpZiB0aGUgbG9jYWxlIGlzLlxuICAgICAqIEB0eXBlIHtPYmplY3R9XG4gICAgICovXG5cbiAgfSwge1xuICAgIGtleTogXCJEQVRFVElNRV9GVUxMXCIsXG4gICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICByZXR1cm4gREFURVRJTUVfRlVMTDtcbiAgICB9XG4gICAgLyoqXG4gICAgICoge0BsaW5rIERhdGVUaW1lI3RvTG9jYWxlU3RyaW5nfSBmb3JtYXQgbGlrZSAnT2N0b2JlciAxNCwgMTk4MywgOTozMDozMyBBTSBFRFQnLiBPbmx5IDEyLWhvdXIgaWYgdGhlIGxvY2FsZSBpcy5cbiAgICAgKiBAdHlwZSB7T2JqZWN0fVxuICAgICAqL1xuXG4gIH0sIHtcbiAgICBrZXk6IFwiREFURVRJTUVfRlVMTF9XSVRIX1NFQ09ORFNcIixcbiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgIHJldHVybiBEQVRFVElNRV9GVUxMX1dJVEhfU0VDT05EUztcbiAgICB9XG4gICAgLyoqXG4gICAgICoge0BsaW5rIERhdGVUaW1lI3RvTG9jYWxlU3RyaW5nfSBmb3JtYXQgbGlrZSAnRnJpZGF5LCBPY3RvYmVyIDE0LCAxOTgzLCA5OjMwIEFNIEVhc3Rlcm4gRGF5bGlnaHQgVGltZScuIE9ubHkgMTItaG91ciBpZiB0aGUgbG9jYWxlIGlzLlxuICAgICAqIEB0eXBlIHtPYmplY3R9XG4gICAgICovXG5cbiAgfSwge1xuICAgIGtleTogXCJEQVRFVElNRV9IVUdFXCIsXG4gICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICByZXR1cm4gREFURVRJTUVfSFVHRTtcbiAgICB9XG4gICAgLyoqXG4gICAgICoge0BsaW5rIERhdGVUaW1lI3RvTG9jYWxlU3RyaW5nfSBmb3JtYXQgbGlrZSAnRnJpZGF5LCBPY3RvYmVyIDE0LCAxOTgzLCA5OjMwOjMzIEFNIEVhc3Rlcm4gRGF5bGlnaHQgVGltZScuIE9ubHkgMTItaG91ciBpZiB0aGUgbG9jYWxlIGlzLlxuICAgICAqIEB0eXBlIHtPYmplY3R9XG4gICAgICovXG5cbiAgfSwge1xuICAgIGtleTogXCJEQVRFVElNRV9IVUdFX1dJVEhfU0VDT05EU1wiLFxuICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgcmV0dXJuIERBVEVUSU1FX0hVR0VfV0lUSF9TRUNPTkRTO1xuICAgIH1cbiAgfV0pO1xuXG4gIHJldHVybiBEYXRlVGltZTtcbn0oKTtcbmZ1bmN0aW9uIGZyaWVuZGx5RGF0ZVRpbWUoZGF0ZVRpbWVpc2gpIHtcbiAgaWYgKERhdGVUaW1lLmlzRGF0ZVRpbWUoZGF0ZVRpbWVpc2gpKSB7XG4gICAgcmV0dXJuIGRhdGVUaW1laXNoO1xuICB9IGVsc2UgaWYgKGRhdGVUaW1laXNoICYmIGRhdGVUaW1laXNoLnZhbHVlT2YgJiYgaXNOdW1iZXIoZGF0ZVRpbWVpc2gudmFsdWVPZigpKSkge1xuICAgIHJldHVybiBEYXRlVGltZS5mcm9tSlNEYXRlKGRhdGVUaW1laXNoKTtcbiAgfSBlbHNlIGlmIChkYXRlVGltZWlzaCAmJiB0eXBlb2YgZGF0ZVRpbWVpc2ggPT09IFwib2JqZWN0XCIpIHtcbiAgICByZXR1cm4gRGF0ZVRpbWUuZnJvbU9iamVjdChkYXRlVGltZWlzaCk7XG4gIH0gZWxzZSB7XG4gICAgdGhyb3cgbmV3IEludmFsaWRBcmd1bWVudEVycm9yKFwiVW5rbm93biBkYXRldGltZSBhcmd1bWVudDogXCIgKyBkYXRlVGltZWlzaCArIFwiLCBvZiB0eXBlIFwiICsgdHlwZW9mIGRhdGVUaW1laXNoKTtcbiAgfVxufVxuXG52YXIgVkVSU0lPTiA9IFwiMi4zLjBcIjtcblxuZXhwb3J0cy5EYXRlVGltZSA9IERhdGVUaW1lO1xuZXhwb3J0cy5EdXJhdGlvbiA9IER1cmF0aW9uO1xuZXhwb3J0cy5GaXhlZE9mZnNldFpvbmUgPSBGaXhlZE9mZnNldFpvbmU7XG5leHBvcnRzLklBTkFab25lID0gSUFOQVpvbmU7XG5leHBvcnRzLkluZm8gPSBJbmZvO1xuZXhwb3J0cy5JbnRlcnZhbCA9IEludGVydmFsO1xuZXhwb3J0cy5JbnZhbGlkWm9uZSA9IEludmFsaWRab25lO1xuZXhwb3J0cy5TZXR0aW5ncyA9IFNldHRpbmdzO1xuZXhwb3J0cy5TeXN0ZW1ab25lID0gU3lzdGVtWm9uZTtcbmV4cG9ydHMuVkVSU0lPTiA9IFZFUlNJT047XG5leHBvcnRzLlpvbmUgPSBab25lO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9bHV4b24uanMubWFwXG4iLCJpbXBvcnQgeyBEYXRlVGltZSwgSUFOQVpvbmUgfSBmcm9tIFwibHV4b25cIjtcblxuZXhwb3J0IGZ1bmN0aW9uIGlzVmFsaWRUaW1lem9uZSh6b25lOiBzdHJpbmcpIHtcbiAgcmV0dXJuIElBTkFab25lLmlzVmFsaWRab25lKHpvbmUpO1xufVxuXG4vKipcbiAqXG4gKiBAcGFyYW0gc2xvdCBEYXRlXG4gKiBAcGFyYW0gem9uZSBzdHJpbmdcbiAqIEByZXR1cm5zIHN0cmluZ1xuICovXG5leHBvcnQgZnVuY3Rpb24gZm9ybWF0VGltZVNsb3Qoc2xvdDogRGF0ZSwgem9uZTogc3RyaW5nKTogc3RyaW5nIHtcbiAgY29uc3QgdW5mb3JtYXR0ZWRUaW1lU2xvdCA9IERhdGVUaW1lLmZyb21KU0RhdGUoc2xvdClcbiAgICAudG9Mb2NhbGVTdHJpbmcoRGF0ZVRpbWUuVElNRV9TSU1QTEUpXG4gICAgLnJlcGxhY2UoL1xcLi9nLCBcIlwiKTtcbiAgdHJ5IHtcbiAgICBjb25zdCBkYXRlVGltZVNsb3QgPSBEYXRlVGltZS5mcm9tSlNEYXRlKHNsb3QsIHsgem9uZSB9KTtcbiAgICBpZiAoXG4gICAgICAhZGF0ZVRpbWVTbG90LmlzVmFsaWQgJiZcbiAgICAgIChkYXRlVGltZVNsb3QuaW52YWxpZFJlYXNvbiA9PT0gXCJ1bnN1cHBvcnRlZCB6b25lXCIgfHwgIXpvbmUpXG4gICAgKSB7XG4gICAgICByZXR1cm4gdW5mb3JtYXR0ZWRUaW1lU2xvdDtcbiAgICB9XG4gICAgcmV0dXJuIGRhdGVUaW1lU2xvdC50b0xvY2FsZVN0cmluZyhEYXRlVGltZS5USU1FX1NJTVBMRSkucmVwbGFjZSgvXFwuL2csIFwiXCIpO1xuICB9IGNhdGNoIChlcnIpIHtcbiAgICByZXR1cm4gdW5mb3JtYXR0ZWRUaW1lU2xvdDtcbiAgfVxufVxuXG4vKipcbiAqXG4gKiBAcGFyYW0gc2xvdCBEYXRlXG4gKiBAcGFyYW0gem9uZSBzdHJpbmdcbiAqIEByZXR1cm5zIHN0cmluZ1xuICovXG5leHBvcnQgZnVuY3Rpb24gc2V0VGltZVpvbmVPZmZzZXQoc2xvdDogRGF0ZSwgem9uZT86IHN0cmluZyk6IHN0cmluZyB7XG4gIGNvbnN0IGRhdGVUaW1lU2xvdCA9IERhdGVUaW1lLmZyb21KU0RhdGUoc2xvdCwgeyB6b25lIH0pO1xuICBpZiAoXG4gICAgKHpvbmUgJiYgIWlzVmFsaWRUaW1lem9uZSh6b25lKSkgfHxcbiAgICAoIWRhdGVUaW1lU2xvdC5pc1ZhbGlkICYmXG4gICAgICAoZGF0ZVRpbWVTbG90LmludmFsaWRSZWFzb24gPT09IFwidW5zdXBwb3J0ZWQgem9uZVwiIHx8ICF6b25lKSlcbiAgKSB7XG4gICAgcmV0dXJuIFwiXCI7XG4gIH1cbiAgcmV0dXJuIGRhdGVUaW1lU2xvdC5vZmZzZXROYW1lU2hvcnQ7XG59XG5cbi8qKlxuICogQHBhcmFtIHpvbmUgc3RyaW5nXG4gKiBAcmV0dXJucyBudW1iZXIgKGluIG1pbGxpc2Vjb25kcylcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldFNwZWNpZmllZFRpbWVab25lT2Zmc2V0KHpvbmU/OiBzdHJpbmcpOiBudW1iZXIge1xuICBpZiAoIXpvbmUgfHwgIWlzVmFsaWRUaW1lem9uZSh6b25lKSkge1xuICAgIHJldHVybiAwO1xuICB9XG4gIGNvbnN0IGR0ID0gRGF0ZVRpbWUubm93KCk7XG4gIGNvbnN0IGR0eiA9IERhdGVUaW1lLm5vdygpLnNldFpvbmUoem9uZSwgeyBrZWVwTG9jYWxUaW1lOiB0cnVlIH0pO1xuICByZXR1cm4gZHQuZGlmZihkdHopLm1pbGxpc2Vjb25kcztcbn1cblxuLyoqXG4gKiBAcGFyYW0gem9uZSBzdHJpbmdcbiAqIEByZXR1cm5zIHN0cmluZyAoVVRDIE9mZnNldClcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldFNwZWNpZmllZFRpbWVab25lT2Zmc2V0TmFtZSh6b25lPzogc3RyaW5nKTogc3RyaW5nIHtcbiAgaWYgKCF6b25lIHx8ICFpc1ZhbGlkVGltZXpvbmUoem9uZSkpIHtcbiAgICByZXR1cm4gRGF0ZVRpbWUubm93KCkub2Zmc2V0TmFtZVNob3J0O1xuICB9XG4gIGNvbnN0IGR0ID0gRGF0ZVRpbWUubm93KCkuc2V0Wm9uZSh6b25lKTtcbiAgcmV0dXJuIGR0Lm9mZnNldE5hbWVTaG9ydDtcbn1cblxuLyoqXG4gKlxuICogQHBhcmFtIGRhdGUgRGF0ZVxuICogQHBhcmFtIHpvbmUgc3RyaW5nXG4gKiBAcmV0dXJucyBudW1iZXIgKGluIG1pbGxpc2Vjb25kcylcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldFRpbWVJblRpbWV6b25lKGRhdGU6IERhdGUsIHpvbmU/OiBzdHJpbmcpOiBudW1iZXIge1xuICBjb25zdCB0aW1lVmFsdWUgPSBkYXRlLmdldFRpbWUoKTtcbiAgcmV0dXJuIHRpbWVWYWx1ZSArIGdldFNwZWNpZmllZFRpbWVab25lT2Zmc2V0KHpvbmUpO1xufVxuIiwiaW1wb3J0IHsgbm9vcCwgc2FmZV9ub3RfZXF1YWwsIHN1YnNjcmliZSwgcnVuX2FsbCwgaXNfZnVuY3Rpb24gfSBmcm9tICcuLi9pbnRlcm5hbC9pbmRleC5tanMnO1xuZXhwb3J0IHsgZ2V0X3N0b3JlX3ZhbHVlIGFzIGdldCB9IGZyb20gJy4uL2ludGVybmFsL2luZGV4Lm1qcyc7XG5cbmNvbnN0IHN1YnNjcmliZXJfcXVldWUgPSBbXTtcbi8qKlxuICogQ3JlYXRlcyBhIGBSZWFkYWJsZWAgc3RvcmUgdGhhdCBhbGxvd3MgcmVhZGluZyBieSBzdWJzY3JpcHRpb24uXG4gKiBAcGFyYW0gdmFsdWUgaW5pdGlhbCB2YWx1ZVxuICogQHBhcmFtIHtTdGFydFN0b3BOb3RpZmllcn1zdGFydCBzdGFydCBhbmQgc3RvcCBub3RpZmljYXRpb25zIGZvciBzdWJzY3JpcHRpb25zXG4gKi9cbmZ1bmN0aW9uIHJlYWRhYmxlKHZhbHVlLCBzdGFydCkge1xuICAgIHJldHVybiB7XG4gICAgICAgIHN1YnNjcmliZTogd3JpdGFibGUodmFsdWUsIHN0YXJ0KS5zdWJzY3JpYmVcbiAgICB9O1xufVxuLyoqXG4gKiBDcmVhdGUgYSBgV3JpdGFibGVgIHN0b3JlIHRoYXQgYWxsb3dzIGJvdGggdXBkYXRpbmcgYW5kIHJlYWRpbmcgYnkgc3Vic2NyaXB0aW9uLlxuICogQHBhcmFtIHsqPX12YWx1ZSBpbml0aWFsIHZhbHVlXG4gKiBAcGFyYW0ge1N0YXJ0U3RvcE5vdGlmaWVyPX1zdGFydCBzdGFydCBhbmQgc3RvcCBub3RpZmljYXRpb25zIGZvciBzdWJzY3JpcHRpb25zXG4gKi9cbmZ1bmN0aW9uIHdyaXRhYmxlKHZhbHVlLCBzdGFydCA9IG5vb3ApIHtcbiAgICBsZXQgc3RvcDtcbiAgICBjb25zdCBzdWJzY3JpYmVycyA9IG5ldyBTZXQoKTtcbiAgICBmdW5jdGlvbiBzZXQobmV3X3ZhbHVlKSB7XG4gICAgICAgIGlmIChzYWZlX25vdF9lcXVhbCh2YWx1ZSwgbmV3X3ZhbHVlKSkge1xuICAgICAgICAgICAgdmFsdWUgPSBuZXdfdmFsdWU7XG4gICAgICAgICAgICBpZiAoc3RvcCkgeyAvLyBzdG9yZSBpcyByZWFkeVxuICAgICAgICAgICAgICAgIGNvbnN0IHJ1bl9xdWV1ZSA9ICFzdWJzY3JpYmVyX3F1ZXVlLmxlbmd0aDtcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IHN1YnNjcmliZXIgb2Ygc3Vic2NyaWJlcnMpIHtcbiAgICAgICAgICAgICAgICAgICAgc3Vic2NyaWJlclsxXSgpO1xuICAgICAgICAgICAgICAgICAgICBzdWJzY3JpYmVyX3F1ZXVlLnB1c2goc3Vic2NyaWJlciwgdmFsdWUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAocnVuX3F1ZXVlKSB7XG4gICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc3Vic2NyaWJlcl9xdWV1ZS5sZW5ndGg7IGkgKz0gMikge1xuICAgICAgICAgICAgICAgICAgICAgICAgc3Vic2NyaWJlcl9xdWV1ZVtpXVswXShzdWJzY3JpYmVyX3F1ZXVlW2kgKyAxXSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgc3Vic2NyaWJlcl9xdWV1ZS5sZW5ndGggPSAwO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBmdW5jdGlvbiB1cGRhdGUoZm4pIHtcbiAgICAgICAgc2V0KGZuKHZhbHVlKSk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIHN1YnNjcmliZShydW4sIGludmFsaWRhdGUgPSBub29wKSB7XG4gICAgICAgIGNvbnN0IHN1YnNjcmliZXIgPSBbcnVuLCBpbnZhbGlkYXRlXTtcbiAgICAgICAgc3Vic2NyaWJlcnMuYWRkKHN1YnNjcmliZXIpO1xuICAgICAgICBpZiAoc3Vic2NyaWJlcnMuc2l6ZSA9PT0gMSkge1xuICAgICAgICAgICAgc3RvcCA9IHN0YXJ0KHNldCkgfHwgbm9vcDtcbiAgICAgICAgfVxuICAgICAgICBydW4odmFsdWUpO1xuICAgICAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgICAgICAgc3Vic2NyaWJlcnMuZGVsZXRlKHN1YnNjcmliZXIpO1xuICAgICAgICAgICAgaWYgKHN1YnNjcmliZXJzLnNpemUgPT09IDApIHtcbiAgICAgICAgICAgICAgICBzdG9wKCk7XG4gICAgICAgICAgICAgICAgc3RvcCA9IG51bGw7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgfVxuICAgIHJldHVybiB7IHNldCwgdXBkYXRlLCBzdWJzY3JpYmUgfTtcbn1cbmZ1bmN0aW9uIGRlcml2ZWQoc3RvcmVzLCBmbiwgaW5pdGlhbF92YWx1ZSkge1xuICAgIGNvbnN0IHNpbmdsZSA9ICFBcnJheS5pc0FycmF5KHN0b3Jlcyk7XG4gICAgY29uc3Qgc3RvcmVzX2FycmF5ID0gc2luZ2xlXG4gICAgICAgID8gW3N0b3Jlc11cbiAgICAgICAgOiBzdG9yZXM7XG4gICAgY29uc3QgYXV0byA9IGZuLmxlbmd0aCA8IDI7XG4gICAgcmV0dXJuIHJlYWRhYmxlKGluaXRpYWxfdmFsdWUsIChzZXQpID0+IHtcbiAgICAgICAgbGV0IGluaXRlZCA9IGZhbHNlO1xuICAgICAgICBjb25zdCB2YWx1ZXMgPSBbXTtcbiAgICAgICAgbGV0IHBlbmRpbmcgPSAwO1xuICAgICAgICBsZXQgY2xlYW51cCA9IG5vb3A7XG4gICAgICAgIGNvbnN0IHN5bmMgPSAoKSA9PiB7XG4gICAgICAgICAgICBpZiAocGVuZGluZykge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNsZWFudXAoKTtcbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGZuKHNpbmdsZSA/IHZhbHVlc1swXSA6IHZhbHVlcywgc2V0KTtcbiAgICAgICAgICAgIGlmIChhdXRvKSB7XG4gICAgICAgICAgICAgICAgc2V0KHJlc3VsdCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBjbGVhbnVwID0gaXNfZnVuY3Rpb24ocmVzdWx0KSA/IHJlc3VsdCA6IG5vb3A7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIGNvbnN0IHVuc3Vic2NyaWJlcnMgPSBzdG9yZXNfYXJyYXkubWFwKChzdG9yZSwgaSkgPT4gc3Vic2NyaWJlKHN0b3JlLCAodmFsdWUpID0+IHtcbiAgICAgICAgICAgIHZhbHVlc1tpXSA9IHZhbHVlO1xuICAgICAgICAgICAgcGVuZGluZyAmPSB+KDEgPDwgaSk7XG4gICAgICAgICAgICBpZiAoaW5pdGVkKSB7XG4gICAgICAgICAgICAgICAgc3luYygpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LCAoKSA9PiB7XG4gICAgICAgICAgICBwZW5kaW5nIHw9ICgxIDw8IGkpO1xuICAgICAgICB9KSk7XG4gICAgICAgIGluaXRlZCA9IHRydWU7XG4gICAgICAgIHN5bmMoKTtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIHN0b3AoKSB7XG4gICAgICAgICAgICBydW5fYWxsKHVuc3Vic2NyaWJlcnMpO1xuICAgICAgICAgICAgY2xlYW51cCgpO1xuICAgICAgICB9O1xuICAgIH0pO1xufVxuXG5leHBvcnQgeyBkZXJpdmVkLCByZWFkYWJsZSwgd3JpdGFibGUgfTtcbiIsImltcG9ydCB7IFdyaXRhYmxlLCB3cml0YWJsZSB9IGZyb20gXCJzdmVsdGUvc3RvcmVcIjtcbmltcG9ydCB0eXBlIHsgTWFuaWZlc3QgfSBmcm9tIFwiQGNvbW1vbnMvdHlwZXMvTnlsYXNcIjtcblxudHlwZSBFcnJvclN0b3JlID0gUmVjb3JkPHN0cmluZywgTWFuaWZlc3RbXCJlcnJvclwiXT47XG5cbmZ1bmN0aW9uIGluaXRpYWxpemUoKTogV3JpdGFibGU8RXJyb3JTdG9yZT4ge1xuICByZXR1cm4gd3JpdGFibGUoe30pO1xufVxuXG5leHBvcnQgY29uc3QgRXJyb3JTdG9yZSA9IGluaXRpYWxpemUoKTtcbiIsImltcG9ydCB7IEVycm9yU3RvcmUgfSBmcm9tIFwiLi4vc3RvcmUvZXJyb3JcIjtcbmltcG9ydCB0eXBlIHsgTWFuaWZlc3QgfSBmcm9tIFwiQGNvbW1vbnMvdHlwZXMvTnlsYXNcIjtcblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGhhbmRsZVJlc3BvbnNlPFQgPSB1bmtub3duPihcbiAgcmVzcG9uc2U6IFJlc3BvbnNlLFxuKTogUHJvbWlzZTxUPiB7XG4gIGlmICghcmVzcG9uc2Uub2spIHtcbiAgICBjb25zdCBwYXNzZWRFcnJvciA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKS50aGVuKFxuICAgICAgKGpzb246IHtcbiAgICAgICAgbWVzc2FnZTogc3RyaW5nO1xuICAgICAgICBuYW1lOiBzdHJpbmc7XG4gICAgICAgIHJlc3BvbnNlPzoge1xuICAgICAgICAgIGVycm9yPzogc3RyaW5nO1xuICAgICAgICB9O1xuICAgICAgfSkgPT4ganNvbixcbiAgICApO1xuXG4gICAgY29uc3QgbWVzc2FnZSA9IHBhc3NlZEVycm9yPy5yZXNwb25zZT8uZXJyb3IgfHwgcGFzc2VkRXJyb3I/Lm1lc3NhZ2U7XG5cbiAgICBjb25zdCBlcnJvciA9IG5ldyBFcnJvcihtZXNzYWdlKTtcbiAgICBlcnJvci5uYW1lID0gcGFzc2VkRXJyb3IubmFtZTtcbiAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoeyBtZXNzYWdlOiBlcnJvciwgc3RhdHVzQ29kZTogcmVzcG9uc2Uuc3RhdHVzIH0pO1xuICB9XG4gIHJldHVybiByZXNwb25zZS5qc29uKCk7XG59XG5cbnR5cGUgSFRUUE1ldGhvZCA9IFwiUE9TVFwiIHwgXCJHRVRcIiB8IFwiUFVUXCIgfCBcIlBBVENIXCIgfCBcIk9QVElPTlNcIiB8IHVuZGVmaW5lZDtcblxudHlwZSBGZXRjaE9wdGlvbnMgPSB7XG4gIGJvZHk/OiB1bmtub3duO1xuICBtZXRob2Q/OiBIVFRQTWV0aG9kO1xuICBjb21wb25lbnRfaWQ/OiBzdHJpbmc7XG4gIGFjY2Vzc190b2tlbj86IHN0cmluZztcbn07XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRGZXRjaENvbmZpZyhcbiAgb3B0czogRmV0Y2hPcHRpb25zID0geyBjb21wb25lbnRfaWQ6IFwiXCIgfSxcbik6IFJlcXVlc3RJbml0IHtcbiAgcmV0dXJuIHtcbiAgICBtZXRob2Q6IG9wdHMubWV0aG9kIHx8IFwiR0VUXCIsIC8vIEdFVCBpcyBkZWZhdWx0IG1ldGhvZFxuICAgIGhlYWRlcnM6IHtcbiAgICAgIEFjY2VwdDogXCJhcHBsaWNhdGlvbi9qc29uXCIsXG4gICAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIixcbiAgICAgIFwiWC1Db21wb25lbnQtSWRcIjogb3B0cy5jb21wb25lbnRfaWQgfHwgXCJcIiwgLy8gQ29tcG9uZW50IElEIGlzIHBhc3NlZCBhcyBoZWFkZXJcbiAgICAgIFwiWC1BY2Nlc3MtVG9rZW5cIjogb3B0cy5hY2Nlc3NfdG9rZW4gfHwgXCJcIiwgLy8gQWNjZXNzIFRva2VuIGlzIHBhc3NlZCBhcyBoZWFkZXJcbiAgICB9LFxuICAgIGJvZHk6IG9wdHMuYm9keSA/IEpTT04uc3RyaW5naWZ5KG9wdHMuYm9keSkgOiB1bmRlZmluZWQsXG4gIH07XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBoYW5kbGVFcnJvcihpZDogc3RyaW5nLCBlcnJvcjogTWFuaWZlc3RbXCJlcnJvclwiXSk6IG5ldmVyIHtcbiAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikgY29uc29sZS5lcnJvcihlcnJvcik7XG4gIEVycm9yU3RvcmUudXBkYXRlKChlcnJvck1hcCkgPT4gKHsgLi4uZXJyb3JNYXAsIFtpZF06IGVycm9yIH0pKTtcbiAgdGhyb3cgZXJyb3I7XG59XG5cbmNvbnN0IFJFR0lPTl9NQVBQSU5HOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+ID0ge1xuICBcIjAwMVwiOiBcIlwiLCAvLyBVU1xuICBcIjAwMlwiOiBcImlyZWxhbmQtXCIsIC8vIEVVXG4gIFwiMDAzXCI6IFwiY2FuYWRhLVwiLCAvLyBDYW5hZGFcbn07XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRNaWRkbGV3YXJlQXBpVXJsKGlkOiBzdHJpbmcpOiBzdHJpbmcge1xuICBsZXQgcmVnaW9uID0gXCJcIjtcbiAgaWYgKGlkLnN1YnN0cmluZygzLCA0KSA9PT0gXCItXCIpIHtcbiAgICBjb25zdCBjb2RlID0gaWQuc3Vic3RyaW5nKDAsIDMpO1xuICAgIGlmICh0eXBlb2YgUkVHSU9OX01BUFBJTkdbY29kZV0gIT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgIHJlZ2lvbiA9IFJFR0lPTl9NQVBQSU5HW2NvZGVdO1xuICAgIH1cbiAgfVxuICBjb25zdCBBUElfR0FURVdBWSA9IGBodHRwczovLyR7cmVnaW9ufSR7cHJvY2Vzcy5lbnYuQVBJX0dBVEVXQVl9YDtcbiAgcmV0dXJuIEFQSV9HQVRFV0FZO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gc2lsZW5jZShlcnJvcjogRXJyb3IpIHt9XG5cbmV4cG9ydCBmdW5jdGlvbiBidWlsZFF1ZXJ5UGFyYW1zKHBhcmFtczogUmVjb3JkPHN0cmluZywgYW55Pik6IHN0cmluZyB7XG4gIHJldHVybiBPYmplY3Qua2V5cyhwYXJhbXMpXG4gICAgLnJlZHVjZSgoYWNjLCBrZXkpID0+IHtcbiAgICAgIGlmIChwYXJhbXNba2V5XSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIGFjYy5hcHBlbmQoa2V5LCBwYXJhbXNba2V5XSk7XG4gICAgICB9XG4gICAgICByZXR1cm4gYWNjO1xuICAgIH0sIG5ldyBVUkxTZWFyY2hQYXJhbXMoKSlcbiAgICAudG9TdHJpbmcoKTtcbn1cbiIsImltcG9ydCB7XG4gIGdldEZldGNoQ29uZmlnLFxuICBoYW5kbGVFcnJvcixcbiAgaGFuZGxlUmVzcG9uc2UsXG4gIGdldE1pZGRsZXdhcmVBcGlVcmwsXG4gIGJ1aWxkUXVlcnlQYXJhbXMsXG59IGZyb20gXCIuLi9tZXRob2RzL2FwaVwiO1xuaW1wb3J0IHR5cGUge1xuICBDb250YWN0c1F1ZXJ5LFxuICBDb250YWN0LFxuICBDb250YWN0U2VhcmNoUXVlcnksXG4gIENvbnRhY3RzUXVlcnlQYXJhbXMsXG59IGZyb20gXCJAY29tbW9ucy90eXBlcy9Db250YWN0c1wiO1xuaW1wb3J0IHR5cGUgeyBNaWRkbGV3YXJlUmVzcG9uc2UsIFRocmVhZCB9IGZyb20gXCJAY29tbW9ucy90eXBlcy9OeWxhc1wiO1xuXG5leHBvcnQgY29uc3QgZmV0Y2hDb250YWN0cyA9IGFzeW5jIChcbiAgcXVlcnk6IENvbnRhY3RzUXVlcnksXG4gIHBhcmFtczogQ29udGFjdHNRdWVyeVBhcmFtcyxcbik6IFByb21pc2U8Q29udGFjdFtdPiA9PiB7XG4gIGNvbnN0IHVybCA9IGAke2dldE1pZGRsZXdhcmVBcGlVcmwoXG4gICAgcXVlcnkuY29tcG9uZW50X2lkLFxuICApfS9jb250YWN0LWxpc3QvY29udGFjdHM/JHtidWlsZFF1ZXJ5UGFyYW1zKHBhcmFtcyl9YDtcblxuICBjb25zdCBjb250YWN0cyA9IGF3YWl0IGZldGNoKFxuICAgIHVybCxcbiAgICBnZXRGZXRjaENvbmZpZyh7XG4gICAgICBjb21wb25lbnRfaWQ6IHF1ZXJ5LmNvbXBvbmVudF9pZCxcbiAgICAgIGFjY2Vzc190b2tlbjogcXVlcnkuYWNjZXNzX3Rva2VuLFxuICAgIH0pLFxuICApXG4gICAgLnRoZW4oKHJlc3BvbnNlKSA9PiBoYW5kbGVSZXNwb25zZTxNaWRkbGV3YXJlUmVzcG9uc2U8Q29udGFjdFtdPj4ocmVzcG9uc2UpKVxuICAgIC50aGVuKChqc29uKSA9PiB7XG4gICAgICByZXR1cm4ganNvbi5yZXNwb25zZTtcbiAgICB9KVxuICAgIC5jYXRjaCgoZXJyb3IpID0+IGhhbmRsZUVycm9yKHF1ZXJ5LmNvbXBvbmVudF9pZCwgZXJyb3IpKTtcbiAgcmV0dXJuIGNvbnRhY3RzID8/IFtdO1xufTtcblxuLy8gcXVlcnkucXVlcnkgc2hvdWxkIGJlIGEgcXVlcnlTdHJpbmcgYXMgZGVmaW5lZCBhdCBodHRwczovL2RvY3MubnlsYXMuY29tL3JlZmVyZW5jZSNjb250YWN0cy0xXG5leHBvcnQgY29uc3QgZmV0Y2hDb250YWN0c0J5UXVlcnkgPSBhc3luYyAoXG4gIHF1ZXJ5OiBDb250YWN0U2VhcmNoUXVlcnksXG4pOiBQcm9taXNlPENvbnRhY3RbXT4gPT4ge1xuICBjb25zdCBjb250YWN0cyA9IGF3YWl0IGZldGNoKFxuICAgIGAke2dldE1pZGRsZXdhcmVBcGlVcmwocXVlcnkuY29tcG9uZW50X2lkKX0vY29udGFjdHMke3F1ZXJ5LnF1ZXJ5fWAsXG4gICAgZ2V0RmV0Y2hDb25maWcoe1xuICAgICAgY29tcG9uZW50X2lkOiBxdWVyeS5jb21wb25lbnRfaWQsXG4gICAgICBhY2Nlc3NfdG9rZW46IHF1ZXJ5LmFjY2Vzc190b2tlbixcbiAgICB9KSxcbiAgKVxuICAgIC50aGVuKChyZXNwb25zZSkgPT4gaGFuZGxlUmVzcG9uc2U8TWlkZGxld2FyZVJlc3BvbnNlPENvbnRhY3RbXT4+KHJlc3BvbnNlKSlcbiAgICAudGhlbigoanNvbikgPT4ge1xuICAgICAgcmV0dXJuIGpzb24ucmVzcG9uc2U7XG4gICAgfSlcbiAgICAuY2F0Y2goKGVycm9yKSA9PiBoYW5kbGVFcnJvcihxdWVyeS5jb21wb25lbnRfaWQsIGVycm9yKSk7XG5cbiAgcmV0dXJuIGNvbnRhY3RzID8/IFtdO1xufTtcblxuZXhwb3J0IGNvbnN0IGZldGNoQ29udGFjdEltYWdlID0gYXN5bmMgKFxuICBxdWVyeTogQ29udGFjdHNRdWVyeSxcbiAgaWQ6IHN0cmluZyxcbik6IFByb21pc2U8c3RyaW5nPiA9PiB7XG4gIHJldHVybiBhd2FpdCBmZXRjaChcbiAgICBgJHtnZXRNaWRkbGV3YXJlQXBpVXJsKHF1ZXJ5LmNvbXBvbmVudF9pZCl9L2NvbnRhY3RzLyR7aWR9L3BpY3R1cmVgLFxuICAgIGdldEZldGNoQ29uZmlnKHtcbiAgICAgIGNvbXBvbmVudF9pZDogcXVlcnkuY29tcG9uZW50X2lkLFxuICAgICAgYWNjZXNzX3Rva2VuOiBxdWVyeS5hY2Nlc3NfdG9rZW4sXG4gICAgfSksXG4gIClcbiAgICAudGhlbigocmVzcG9uc2UpID0+IGhhbmRsZVJlc3BvbnNlPE1pZGRsZXdhcmVSZXNwb25zZTxzdHJpbmc+PihyZXNwb25zZSkpXG4gICAgLnRoZW4oKGpzb24pID0+IHtcbiAgICAgIHJldHVybiBqc29uLnJlc3BvbnNlO1xuICAgIH0pXG4gICAgLmNhdGNoKChlcnJvcikgPT4gaGFuZGxlRXJyb3IocXVlcnkuY29tcG9uZW50X2lkLCBlcnJvcikpO1xufTtcblxuZXhwb3J0IGNvbnN0IGZldGNoQ29udGFjdFRocmVhZHMgPSBhc3luYyAoXG4gIHF1ZXJ5OiBDb250YWN0c1F1ZXJ5LFxuICBvZmZzZXQ6IG51bWJlcixcbiAgbGltaXQ6IG51bWJlcixcbik6IFByb21pc2U8VGhyZWFkW10+ID0+IHtcbiAgcmV0dXJuIGF3YWl0IGZldGNoKFxuICAgIGAke2dldE1pZGRsZXdhcmVBcGlVcmwoXG4gICAgICBxdWVyeS5jb21wb25lbnRfaWQsXG4gICAgKX0vdGhyZWFkcz9vZmZzZXQ9JHtvZmZzZXR9JmxpbWl0PSR7bGltaXR9YCxcbiAgICBnZXRGZXRjaENvbmZpZyhxdWVyeSksXG4gIClcbiAgICAudGhlbigocmVzcG9uc2UpID0+IGhhbmRsZVJlc3BvbnNlPE1pZGRsZXdhcmVSZXNwb25zZTxUaHJlYWRbXT4+KHJlc3BvbnNlKSlcbiAgICAudGhlbigoanNvbikgPT4ge1xuICAgICAgcmV0dXJuIGpzb24ucmVzcG9uc2U7XG4gICAgfSlcbiAgICAuY2F0Y2goKGVycm9yKSA9PiBoYW5kbGVFcnJvcihxdWVyeS5jb21wb25lbnRfaWQsIGVycm9yKSk7XG59O1xuIiwiaW1wb3J0IHtcbiAgZ2V0RmV0Y2hDb25maWcsXG4gIGhhbmRsZUVycm9yLFxuICBoYW5kbGVSZXNwb25zZSxcbiAgZ2V0TWlkZGxld2FyZUFwaVVybCxcbn0gZnJvbSBcIi4uL21ldGhvZHMvYXBpXCI7XG5pbXBvcnQgdHlwZSB7XG4gIE1haWxib3hRdWVyeSxcbiAgVGhyZWFkLFxuICBDb252ZXJzYXRpb25RdWVyeSxcbiAgQ29udmVyc2F0aW9uLFxuICBNaWRkbGV3YXJlUmVzcG9uc2UsXG59IGZyb20gXCJAY29tbW9ucy90eXBlcy9OeWxhc1wiO1xuXG5leHBvcnQgY29uc3QgZmV0Y2hUaHJlYWRzID0gKFxuICBxdWVyeTogTWFpbGJveFF1ZXJ5LFxuICBsaW1pdDogbnVtYmVyLFxuICBvZmZzZXQ6IG51bWJlcixcbik6IFByb21pc2U8VGhyZWFkW10+ID0+IHtcbiAgaWYgKHF1ZXJ5LnRocmVhZF9pZHMpIHtcbiAgICAvLyAmbGltaXQ9JHtsaW1pdH0mb2Zmc2V0PSR7b2Zmc2V0fVxuICAgIGNvbnN0IHBhZ2Vfb2ZfaWRzID0gcXVlcnkudGhyZWFkX2lkcy5zbGljZShvZmZzZXQsIG9mZnNldCArIGxpbWl0KTtcbiAgICByZXR1cm4gUHJvbWlzZS5hbGwoXG4gICAgICBwYWdlX29mX2lkcy5tYXAoYXN5bmMgKHRocmVhZF9pZCkgPT4ge1xuICAgICAgICAvLyBOeWxhcyBBUEkgZG9lcyBub3Qgc3VwcG9ydCBmZXRjaGluZyB0aHJlYWRzIGluIGJ1bGssIHNvIG11c3QgZmV0Y2ggdGhlbSBvbmVcbiAgICAgICAgLy8gYXQgYSB0aW1lIDooXG4gICAgICAgIGNvbnN0IHF1ZXJ5U3RyaW5nID0gYCR7Z2V0TWlkZGxld2FyZUFwaVVybChcbiAgICAgICAgICBxdWVyeS5jb21wb25lbnRfaWQsXG4gICAgICAgICl9L3RocmVhZHMvJHt0aHJlYWRfaWR9P3ZpZXc9ZXhwYW5kZWRgO1xuICAgICAgICAvLyBUT0RPOiBpZGVhbGx5IHRoaXMgd291bGRuJ3QgcmVwbGljYXRlIG11Y2ggb2YgdGhlIGNvZGUgZnJvbSBiZWxvd1xuICAgICAgICByZXR1cm4gYXdhaXQgZmV0Y2gocXVlcnlTdHJpbmcsIGdldEZldGNoQ29uZmlnKHF1ZXJ5KSlcbiAgICAgICAgICAudGhlbigocmVzcG9uc2UpID0+XG4gICAgICAgICAgICBoYW5kbGVSZXNwb25zZTxNaWRkbGV3YXJlUmVzcG9uc2U8VGhyZWFkPj4ocmVzcG9uc2UpLFxuICAgICAgICAgIClcbiAgICAgICAgICAudGhlbigoanNvbikgPT4ganNvbi5yZXNwb25zZSlcbiAgICAgICAgICAvLyBUT0RPOiBSZW1vdmUgdGhpcyB1Z2x5IGhhY2sgd2hlbiB3ZSBmaXggdGhlIEFQSSBmcm9tIHJldHVybmluZyBnaG9zdCBtZXNzYWdlcyAoZS5nLiB3L28gYSBmcm9tL3RvIGZpZWxkKVxuICAgICAgICAgIC50aGVuKCh0aHJlYWQpID0+ICh7XG4gICAgICAgICAgICAuLi50aHJlYWQsXG4gICAgICAgICAgICBtZXNzYWdlczogdGhyZWFkLm1lc3NhZ2VzLmZpbHRlcihcbiAgICAgICAgICAgICAgKG1lc3NhZ2UpID0+IG1lc3NhZ2UuZnJvbS5sZW5ndGggIT09IDAgfHwgbWVzc2FnZS50by5sZW5ndGggIT09IDAsXG4gICAgICAgICAgICApLFxuICAgICAgICAgIH0pKVxuICAgICAgICAgIC5jYXRjaCgoZXJyb3IpID0+IGhhbmRsZUVycm9yKHF1ZXJ5LmNvbXBvbmVudF9pZCwgZXJyb3IpKTtcbiAgICAgIH0pLFxuICAgICk7XG4gIH1cbiAgbGV0IHF1ZXJ5U3RyaW5nID0gYCR7Z2V0TWlkZGxld2FyZUFwaVVybChcbiAgICBxdWVyeS5jb21wb25lbnRfaWQsXG4gICl9L3RocmVhZHM/dmlldz1leHBhbmRlZCZub3RfaW49dHJhc2gmbGltaXQ9JHtsaW1pdH0mb2Zmc2V0PSR7b2Zmc2V0fWA7XG4gIGlmIChxdWVyeS5xdWVyeSkge1xuICAgIE9iamVjdC5lbnRyaWVzKHF1ZXJ5LnF1ZXJ5KS5mb3JFYWNoKFxuICAgICAgKHBhcmFtKSA9PiAocXVlcnlTdHJpbmcgPSBxdWVyeVN0cmluZy5jb25jYXQoYCYke3BhcmFtWzBdfT0ke3BhcmFtWzFdfWApKSxcbiAgICApO1xuICB9XG4gIHJldHVybiAoXG4gICAgZmV0Y2gocXVlcnlTdHJpbmcsIGdldEZldGNoQ29uZmlnKHF1ZXJ5KSlcbiAgICAgIC50aGVuKChyZXNwb25zZSkgPT5cbiAgICAgICAgaGFuZGxlUmVzcG9uc2U8TWlkZGxld2FyZVJlc3BvbnNlPFRocmVhZFtdPj4ocmVzcG9uc2UpLFxuICAgICAgKVxuICAgICAgLnRoZW4oKGpzb24pID0+IGpzb24ucmVzcG9uc2UpXG4gICAgICAvLyBUT0RPOiBSZW1vdmUgdGhpcyB1Z2x5IGhhY2sgd2hlbiB3ZSBmaXggdGhlIEFQSSBmcm9tIHJldHVybmluZyBnaG9zdCBtZXNzYWdlcyAoZS5nLiB3L28gYSBmcm9tL3RvIGZpZWxkKVxuICAgICAgLnRoZW4oKHRocmVhZHMpID0+XG4gICAgICAgIHRocmVhZHMubWFwKCh0aHJlYWQpID0+ICh7XG4gICAgICAgICAgLi4udGhyZWFkLFxuICAgICAgICAgIG1lc3NhZ2VzOiB0aHJlYWQubWVzc2FnZXMuZmlsdGVyKFxuICAgICAgICAgICAgKG1lc3NhZ2UpID0+IG1lc3NhZ2UuZnJvbS5sZW5ndGggIT09IDAgfHwgbWVzc2FnZS50by5sZW5ndGggIT09IDAsXG4gICAgICAgICAgKSxcbiAgICAgICAgfSkpLFxuICAgICAgKVxuICAgICAgLmNhdGNoKChlcnJvcikgPT4gaGFuZGxlRXJyb3IocXVlcnkuY29tcG9uZW50X2lkLCBlcnJvcikpXG4gICk7XG59O1xuXG5leHBvcnQgZnVuY3Rpb24gZmV0Y2hUaHJlYWRDb3VudChxdWVyeTogTWFpbGJveFF1ZXJ5KTogUHJvbWlzZTxudW1iZXI+IHtcbiAgbGV0IHF1ZXJ5U3RyaW5nID0gYCR7Z2V0TWlkZGxld2FyZUFwaVVybChcbiAgICBxdWVyeS5jb21wb25lbnRfaWQsXG4gICl9L3RocmVhZHM/dmlldz1leHBhbmRlZCZub3RfaW49dHJhc2gmdmlldz1jb3VudGA7XG4gIGlmIChxdWVyeS5xdWVyeSkge1xuICAgIE9iamVjdC5lbnRyaWVzKHF1ZXJ5LnF1ZXJ5KS5mb3JFYWNoKFxuICAgICAgKHBhcmFtKSA9PiAocXVlcnlTdHJpbmcgPSBxdWVyeVN0cmluZy5jb25jYXQoYCYke3BhcmFtWzBdfT0ke3BhcmFtWzFdfWApKSxcbiAgICApO1xuICB9XG5cbiAgaWYgKHF1ZXJ5LmtleXdvcmRUb1NlYXJjaCkge1xuICAgIHF1ZXJ5U3RyaW5nICs9IGAmcT0ke3F1ZXJ5LmtleXdvcmRUb1NlYXJjaH1gO1xuICB9XG5cbiAgcmV0dXJuIGZldGNoKHF1ZXJ5U3RyaW5nLCBnZXRGZXRjaENvbmZpZyhxdWVyeSkpXG4gICAgLnRoZW4oKHJlc3BvbnNlKSA9PiBoYW5kbGVSZXNwb25zZTxNaWRkbGV3YXJlUmVzcG9uc2U8YW55Pj4ocmVzcG9uc2UpKVxuICAgIC50aGVuKChqc29uKSA9PiBqc29uLnJlc3BvbnNlLmNvdW50KTtcbn1cblxuZXhwb3J0IGNvbnN0IGZldGNoU2VhcmNoUmVzdWx0VGhyZWFkcyA9IChcbiAgcXVlcnk6IE1haWxib3hRdWVyeSxcbik6IFByb21pc2U8VGhyZWFkW10+ID0+IHtcbiAgY29uc3QgcXVlcnlTdHJpbmcgPSBgJHtnZXRNaWRkbGV3YXJlQXBpVXJsKFxuICAgIHF1ZXJ5LmNvbXBvbmVudF9pZCxcbiAgKX0vdGhyZWFkcy9zZWFyY2g/cT0ke3F1ZXJ5LmtleXdvcmRUb1NlYXJjaH0mdmlldz1leHBhbmRlZCZsaW1pdD0ke1xuICAgIHF1ZXJ5LnF1ZXJ5LmxpbWl0XG4gIH0mb2Zmc2V0PSR7cXVlcnkucXVlcnkub2Zmc2V0fWA7XG5cbiAgcmV0dXJuIGZldGNoKHF1ZXJ5U3RyaW5nLCBnZXRGZXRjaENvbmZpZyhxdWVyeSkpXG4gICAgLnRoZW4oYXN5bmMgKHJlc3BvbnNlKSA9PlxuICAgICAgaGFuZGxlUmVzcG9uc2U8TWlkZGxld2FyZVJlc3BvbnNlPFRocmVhZFtdPj4ocmVzcG9uc2UpLFxuICAgIClcbiAgICAudGhlbigoanNvbikgPT4ganNvbi5yZXNwb25zZSlcbiAgICAuY2F0Y2goKGVycm9yKSA9PiBoYW5kbGVFcnJvcihxdWVyeS5jb21wb25lbnRfaWQsIGVycm9yKSk7XG59O1xuXG5leHBvcnQgY29uc3QgZmV0Y2hUaHJlYWQgPSBhc3luYyAoXG4gIHF1ZXJ5OiBDb252ZXJzYXRpb25RdWVyeSxcbik6IFByb21pc2U8Q29udmVyc2F0aW9uPiA9PiB7XG4gIGNvbnN0IHRocmVhZCA9IGF3YWl0IGZldGNoKFxuICAgIGAke2dldE1pZGRsZXdhcmVBcGlVcmwocXVlcnkuY29tcG9uZW50X2lkKX0vdGhyZWFkcy8ke1xuICAgICAgcXVlcnkudGhyZWFkX2lkXG4gICAgfT92aWV3PWV4cGFuZGVkYCxcbiAgICBnZXRGZXRjaENvbmZpZyh7XG4gICAgICBjb21wb25lbnRfaWQ6IHF1ZXJ5LmNvbXBvbmVudF9pZCxcbiAgICAgIGFjY2Vzc190b2tlbjogcXVlcnkuYWNjZXNzX3Rva2VuLFxuICAgIH0pLFxuICApXG4gICAgLnRoZW4oKHJlc3BvbnNlKSA9PlxuICAgICAgaGFuZGxlUmVzcG9uc2U8TWlkZGxld2FyZVJlc3BvbnNlPENvbnZlcnNhdGlvbj4+KHJlc3BvbnNlKSxcbiAgICApXG4gICAgLnRoZW4oKGpzb24pID0+IGpzb24ucmVzcG9uc2UpXG4gICAgLmNhdGNoKChlcnJvcikgPT4gaGFuZGxlRXJyb3IocXVlcnkuY29tcG9uZW50X2lkLCBlcnJvcikpO1xuXG4gIHJldHVybiB0aHJlYWQ7XG59O1xuXG5leHBvcnQgY29uc3QgdXBkYXRlVGhyZWFkID0gKFxuICBxdWVyeTogQ29udmVyc2F0aW9uUXVlcnksXG4gIHVwZGF0ZWRUaHJlYWQ6IENvbnZlcnNhdGlvbixcbik6IFByb21pc2U8Q29udmVyc2F0aW9uPiA9PiB7XG4gIC8vIGFjY2VwdHMgdW5yZWFkLCBzdGFycmVkLCBmb2xkZXJfaWQgKyBsYWJlbF9pZHMuIGRldmVsb3Blci5ueWxhcy5jb20vZG9jcy9hcGkvI3B1dC90aHJlYWRzL2lkXG4gIHJldHVybiBmZXRjaChcbiAgICBgJHtnZXRNaWRkbGV3YXJlQXBpVXJsKHF1ZXJ5LmNvbXBvbmVudF9pZCl9L3RocmVhZHMvJHt1cGRhdGVkVGhyZWFkLmlkfWAsXG4gICAgZ2V0RmV0Y2hDb25maWcoe1xuICAgICAgbWV0aG9kOiBcIlBVVFwiLFxuICAgICAgY29tcG9uZW50X2lkOiBxdWVyeS5jb21wb25lbnRfaWQsXG4gICAgICBhY2Nlc3NfdG9rZW46IHF1ZXJ5LmFjY2Vzc190b2tlbixcbiAgICAgIGJvZHk6IHtcbiAgICAgICAgdW5yZWFkOiB1cGRhdGVkVGhyZWFkLnVucmVhZCxcbiAgICAgICAgc3RhcnJlZDogdXBkYXRlZFRocmVhZC5zdGFycmVkLFxuICAgICAgICBmb2xkZXJfaWQ6IHVwZGF0ZWRUaHJlYWQuZm9sZGVyX2lkLFxuICAgICAgICBsYWJlbF9pZHM6IHVwZGF0ZWRUaHJlYWQubGFiZWxfaWRzLFxuICAgICAgfSxcbiAgICB9KSxcbiAgKVxuICAgIC50aGVuKChyZXNwb25zZSkgPT5cbiAgICAgIGhhbmRsZVJlc3BvbnNlPE1pZGRsZXdhcmVSZXNwb25zZTxDb252ZXJzYXRpb24+PihyZXNwb25zZSksXG4gICAgKVxuICAgIC50aGVuKChqc29uKSA9PiBqc29uLnJlc3BvbnNlKVxuICAgIC5jYXRjaCgoZXJyb3IpID0+IGhhbmRsZUVycm9yKHF1ZXJ5LmNvbXBvbmVudF9pZCwgZXJyb3IpKTtcbn07XG4iLCJpbXBvcnQge1xuICBnZXRGZXRjaENvbmZpZyxcbiAgaGFuZGxlRXJyb3IsXG4gIGhhbmRsZVJlc3BvbnNlLFxuICBnZXRNaWRkbGV3YXJlQXBpVXJsLFxufSBmcm9tIFwiLi4vbWV0aG9kcy9hcGlcIjtcbmltcG9ydCB0eXBlIHsgTWFuaWZlc3QsIE1pZGRsZXdhcmVSZXNwb25zZSB9IGZyb20gXCJAY29tbW9ucy90eXBlcy9OeWxhc1wiO1xuXG5leHBvcnQgY29uc3QgZmV0Y2hNYW5pZmVzdCA9IGFzeW5jIChcbiAgaWQ6IHN0cmluZyxcbiAgYWNjZXNzX3Rva2VuPzogc3RyaW5nLFxuKTogUHJvbWlzZTxNYW5pZmVzdD4gPT4ge1xuICByZXR1cm4gYXdhaXQgZmV0Y2goXG4gICAgYCR7Z2V0TWlkZGxld2FyZUFwaVVybChpZCl9L21hbmlmZXN0YCxcbiAgICBnZXRGZXRjaENvbmZpZyh7XG4gICAgICBhY2Nlc3NfdG9rZW4sXG4gICAgICBjb21wb25lbnRfaWQ6IGlkLFxuICAgIH0pLFxuICApXG4gICAgLnRoZW48TWlkZGxld2FyZVJlc3BvbnNlPihoYW5kbGVSZXNwb25zZSlcbiAgICAudGhlbigocmVzcG9uc2UpID0+IHJlc3BvbnNlLmNvbXBvbmVudC50aGVtaW5nKVxuICAgIC5jYXRjaCgoZXJyb3IpID0+IGhhbmRsZUVycm9yKGlkLCBlcnJvcikpO1xufTtcblxuLy8gQWxsb3dzIDxueWxhcy1zY2hlZHVsZS1lZGl0b3I+IHRvIG1vZGlmeSBpdHMgb3duIHByb3BlcnRpZXNcblxuZXhwb3J0IGNvbnN0IHNhdmVNYW5pZmVzdCA9IGFzeW5jIChcbiAgaWQ6IHN0cmluZyxcbiAgbWFuaWZlc3Q6IE1hbmlmZXN0LFxuICBhY2Nlc3NfdG9rZW4/OiBzdHJpbmcsXG4pOiBQcm9taXNlPE1hbmlmZXN0PiA9PiB7XG4gIHJldHVybiBmZXRjaChcbiAgICBgJHtnZXRNaWRkbGV3YXJlQXBpVXJsKGlkKX0vY29tcG9uZW50YCxcbiAgICBnZXRGZXRjaENvbmZpZyh7XG4gICAgICBtZXRob2Q6IFwiUFVUXCIsXG4gICAgICBjb21wb25lbnRfaWQ6IGlkLFxuICAgICAgYWNjZXNzX3Rva2VuLFxuICAgICAgYm9keTogeyBzZXR0aW5nczogbWFuaWZlc3QgfSxcbiAgICB9KSxcbiAgKVxuICAgIC50aGVuKChyZXNwb25zZSkgPT4gaGFuZGxlUmVzcG9uc2U8TWlkZGxld2FyZVJlc3BvbnNlPE1hbmlmZXN0Pj4ocmVzcG9uc2UpKVxuICAgIC50aGVuKChqc29uKSA9PiB7XG4gICAgICByZXR1cm4ganNvbi5yZXNwb25zZTtcbiAgICB9KTtcbn07XG4iLCJpbXBvcnQge1xuICBnZXRGZXRjaENvbmZpZyxcbiAgaGFuZGxlRXJyb3IsXG4gIGhhbmRsZVJlc3BvbnNlLFxuICBnZXRNaWRkbGV3YXJlQXBpVXJsLFxufSBmcm9tIFwiLi4vbWV0aG9kcy9hcGlcIjtcbmltcG9ydCB0eXBlIHtcbiAgQ29uc2VjdXRpdmVBdmFpbGFiaWxpdHlRdWVyeSxcbiAgQXZhaWxhYmlsaXR5UXVlcnksXG4gIEF2YWlsYWJpbGl0eVJlc3BvbnNlLFxuICBGcmVlQnVzeVJlc3BvbnNlLFxuICBQcmVEYXRlZFRpbWVTbG90LFxufSBmcm9tIFwiQGNvbW1vbnMvdHlwZXMvQXZhaWxhYmlsaXR5XCI7XG5pbXBvcnQgdHlwZSB7IE1pZGRsZXdhcmVSZXNwb25zZSB9IGZyb20gXCJAY29tbW9ucy90eXBlcy9OeWxhc1wiO1xuaW1wb3J0IHR5cGUgeyBFdmVudERlZmluaXRpb24gfSBmcm9tIFwiQGNvbW1vbnMvdHlwZXMvU2NoZWR1bGVFZGl0b3JcIjtcbmltcG9ydCB0eXBlIHsgQ29uc2VjdXRpdmVFdmVudCB9IGZyb20gXCJAY29tbW9ucy90eXBlcy9Cb29raW5nXCI7XG5cbi8vIFRPRE86IGRlcHJlY2F0ZSBpZiB3ZSBmaW5kIC9jYWxlbmRhcnMvYXZhaWxhYmlsaXR5IHRvIGJlIGZ1bGx5IHN1ZmZpY2llbnRcbmV4cG9ydCBjb25zdCBmZXRjaEZyZWVCdXN5ID0gYXN5bmMgKFxuICBxdWVyeTogQXZhaWxhYmlsaXR5UXVlcnksXG4pOiBQcm9taXNlPEZyZWVCdXN5UmVzcG9uc2VbXT4gPT4ge1xuICByZXR1cm4gZmV0Y2goXG4gICAgYCR7Z2V0TWlkZGxld2FyZUFwaVVybChxdWVyeS5jb21wb25lbnRfaWQpfS9jYWxlbmRhcnMvZnJlZS1idXN5YCxcbiAgICBnZXRGZXRjaENvbmZpZyh7XG4gICAgICBtZXRob2Q6IFwiUE9TVFwiLFxuICAgICAgY29tcG9uZW50X2lkOiBxdWVyeS5jb21wb25lbnRfaWQsXG4gICAgICBhY2Nlc3NfdG9rZW46IHF1ZXJ5LmFjY2Vzc190b2tlbixcbiAgICAgIGJvZHk6IHF1ZXJ5LmJvZHksXG4gICAgfSksXG4gIClcbiAgICAudGhlbihhc3luYyAoYXBpUmVzcG9uc2UpID0+IHtcbiAgICAgIGNvbnN0IGpzb24gPSBhd2FpdCBoYW5kbGVSZXNwb25zZTxNaWRkbGV3YXJlUmVzcG9uc2U8RnJlZUJ1c3lSZXNwb25zZVtdPj4oXG4gICAgICAgIGFwaVJlc3BvbnNlLFxuICAgICAgKTtcbiAgICAgIHJldHVybiBqc29uLnJlc3BvbnNlO1xuICAgIH0pXG4gICAgLmNhdGNoKChlcnJvcikgPT4gaGFuZGxlRXJyb3IocXVlcnkuY29tcG9uZW50X2lkLCBlcnJvcikpO1xufTtcblxuZXhwb3J0IGNvbnN0IGZldGNoQXZhaWxhYmlsaXR5ID0gYXN5bmMgKFxuICBxdWVyeTogQXZhaWxhYmlsaXR5UXVlcnksXG4pOiBQcm9taXNlPEF2YWlsYWJpbGl0eVJlc3BvbnNlPiA9PiB7XG4gIHJldHVybiBmZXRjaChcbiAgICBgJHtnZXRNaWRkbGV3YXJlQXBpVXJsKHF1ZXJ5LmNvbXBvbmVudF9pZCl9L2NhbGVuZGFycy9hdmFpbGFiaWxpdHlgLFxuICAgIGdldEZldGNoQ29uZmlnKHtcbiAgICAgIG1ldGhvZDogXCJQT1NUXCIsXG4gICAgICBjb21wb25lbnRfaWQ6IHF1ZXJ5LmNvbXBvbmVudF9pZCxcbiAgICAgIGFjY2Vzc190b2tlbjogcXVlcnkuYWNjZXNzX3Rva2VuLFxuICAgICAgYm9keTogcXVlcnkuYm9keSxcbiAgICB9KSxcbiAgKVxuICAgIC50aGVuKGFzeW5jIChhcGlSZXNwb25zZSkgPT4ge1xuICAgICAgY29uc3QganNvbiA9IGF3YWl0IGhhbmRsZVJlc3BvbnNlPFxuICAgICAgICBNaWRkbGV3YXJlUmVzcG9uc2U8QXZhaWxhYmlsaXR5UmVzcG9uc2U+XG4gICAgICA+KGFwaVJlc3BvbnNlKTtcbiAgICAgIC8vIE5vcm1hbGl6ZSByZXNwb25zZSAuc3RhcnQgYW5kIC5lbmQgdG8gLnN0YXJ0X3RpbWUgYW5kIC5lbmRfdGltZSB0byBtYWtlIHVwIGZvciBkaXNjcmVwZW5kY3kgaW4gdGhlIE55bGFzIEFQSTogaHR0cHM6Ly9kZXZlbG9wZXIubnlsYXMuY29tL2RvY3MvY29ubmVjdGl2aXR5L2NhbGVuZGFyL2NhbGVuZGFyLWF2YWlsYWJpbGl0eS8jYXZhaWxhYmlsaXR5LXJlc3BvbnNlXG4gICAgICAvLyBBUEkgc3Rvcnk6IGh0dHBzOi8vYXBwLnNob3J0Y3V0LmNvbS9ueWxhcy9zdG9yeS83MzE5Ni9cbiAgICAgIGpzb24ucmVzcG9uc2UudGltZV9zbG90cyA9IGpzb24ucmVzcG9uc2UudGltZV9zbG90cy5tYXAoKHNsb3QpID0+IHtcbiAgICAgICAgc2xvdC5zdGFydF90aW1lID0gc2xvdC5zdGFydCB8fCAwO1xuICAgICAgICBzbG90LmVuZF90aW1lID0gc2xvdC5lbmQgfHwgMDtcbiAgICAgICAgZGVsZXRlIHNsb3Quc3RhcnQ7XG4gICAgICAgIGRlbGV0ZSBzbG90LmVuZDtcbiAgICAgICAgcmV0dXJuIHNsb3Q7XG4gICAgICB9KTtcbiAgICAgIHJldHVybiBqc29uLnJlc3BvbnNlO1xuICAgIH0pXG4gICAgLmNhdGNoKChlcnJvcikgPT4gaGFuZGxlRXJyb3IocXVlcnkuY29tcG9uZW50X2lkLCBlcnJvcikpO1xufTtcblxuZXhwb3J0IGNvbnN0IGZldGNoQ29uc2VjdXRpdmVBdmFpbGFiaWxpdHkgPSBhc3luYyAoXG4gIHF1ZXJ5OiBDb25zZWN1dGl2ZUF2YWlsYWJpbGl0eVF1ZXJ5LFxuKTogUHJvbWlzZTxDb25zZWN1dGl2ZUV2ZW50W11bXT4gPT4ge1xuICByZXR1cm4gZmV0Y2goXG4gICAgYCR7Z2V0TWlkZGxld2FyZUFwaVVybChcbiAgICAgIHF1ZXJ5LmNvbXBvbmVudF9pZCxcbiAgICApfS9jYWxlbmRhcnMvYXZhaWxhYmlsaXR5L2NvbnNlY3V0aXZlYCxcbiAgICBnZXRGZXRjaENvbmZpZyh7XG4gICAgICBtZXRob2Q6IFwiUE9TVFwiLFxuICAgICAgY29tcG9uZW50X2lkOiBxdWVyeS5jb21wb25lbnRfaWQsXG4gICAgICBhY2Nlc3NfdG9rZW46IHF1ZXJ5LmFjY2Vzc190b2tlbixcbiAgICAgIGJvZHk6IHF1ZXJ5LmJvZHksXG4gICAgfSksXG4gIClcbiAgICAudGhlbihhc3luYyAoYXBpUmVzcG9uc2UpOiBQcm9taXNlPENvbnNlY3V0aXZlRXZlbnRbXVtdPiA9PiB7XG4gICAgICBjb25zdCBqc29uID0gYXdhaXQgaGFuZGxlUmVzcG9uc2U8XG4gICAgICAgIE1pZGRsZXdhcmVSZXNwb25zZTxQcmVEYXRlZFRpbWVTbG90W11bXT5cbiAgICAgID4oYXBpUmVzcG9uc2UpO1xuICAgICAgY29uc3QgcmVzcG9uc2U6IFByZURhdGVkVGltZVNsb3RbXVtdID1cbiAgICAgICAganNvbi5yZXNwb25zZT8ubWFwKChibG9ja1Nsb3QpID0+IHtcbiAgICAgICAgICBibG9ja1Nsb3QgPSBibG9ja1Nsb3QubWFwKChzbG90OiBhbnkpID0+IHtcbiAgICAgICAgICAgIHNsb3Quc3RhcnRfdGltZSA9IG5ldyBEYXRlKHNsb3Quc3RhcnRfdGltZSAqIDEwMDApO1xuICAgICAgICAgICAgc2xvdC5lbmRfdGltZSA9IG5ldyBEYXRlKHNsb3QuZW5kX3RpbWUgKiAxMDAwKTtcbiAgICAgICAgICAgIHJldHVybiBzbG90O1xuICAgICAgICAgIH0pO1xuICAgICAgICAgIHJldHVybiBibG9ja1Nsb3Q7XG4gICAgICAgIH0pIHx8IFtdO1xuICAgICAgY29uc3QgaHlkcmF0ZWRSZXNwb25zZSA9IGh5ZHJhdGVTbG90c1RvRXZlbnRzKFxuICAgICAgICByZXNwb25zZSxcbiAgICAgICAgcXVlcnkuYm9keS5ldmVudHMsXG4gICAgICApO1xuICAgICAgY29uc3QgZGVkdXBlZFJlc3BvbnNlID1cbiAgICAgICAgcmVtb3ZlU2ltdWx0YW5lb3VzQXZhaWxhYmlsaXR5T3B0aW9ucyhoeWRyYXRlZFJlc3BvbnNlKTtcbiAgICAgIHJldHVybiBkZWR1cGVkUmVzcG9uc2U7XG4gICAgfSlcbiAgICAuY2F0Y2goKGVycm9yKSA9PiBoYW5kbGVFcnJvcihxdWVyeS5jb21wb25lbnRfaWQsIGVycm9yKSk7XG59O1xuXG4vLyBEb2luZyB0aGUgYmVzdCB3ZSBjYW4gd2l0aCB3aGF0IHdlJ3ZlIGdvdDogL2NhbGVuZGFycy9hdmFpbGFiaWxpdHkvY29uc2VjdXRpdmUgZG9lc24ndCByZXR1cm4gYW55IGluZm8gb3RoZXIgdGhhbiBlbWFpbHNcbi8vIGFuZCBzdGFydC9lbmQgdGltZXMuIFRoaXMgbWVhbnMgdGhhdCBpZiB3ZSBoYXZlIHRvIGV2ZW50cyAoRXZlbnREZWZpbml0aW9ucykgd2l0aCB0aGUgc2FtZSBlbWFpbCBhZGRyZXNzZXM/IFdlJ3JlIHNob290aW5nIGluIHRoZSBkYXJrIGFib3V0IHdoaWNoIGlzIHdoaWNoLlxuLy8gVE9ETzogYWxsb3cgZm9yIGFuIGluZGljYXRvciBvbiB0aGUgQVBJIHNpZGVcbmZ1bmN0aW9uIGh5ZHJhdGVTbG90c1RvRXZlbnRzKFxuICBhdmFpbGFiaWxpdGllczogUHJlRGF0ZWRUaW1lU2xvdFtdW10sXG4gIGV2ZW50czogRXZlbnREZWZpbml0aW9uW10sXG4pOiBDb25zZWN1dGl2ZUV2ZW50W11bXSB7XG4gIHJldHVybiBhdmFpbGFiaWxpdGllcy5tYXAoKGJsb2NrKSA9PiB7XG4gICAgcmV0dXJuIGJsb2NrLm1hcCgoc3ViZXZlbnQpID0+IHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIC4uLnN1YmV2ZW50LFxuICAgICAgICAuLi5ldmVudHMuZmluZChcbiAgICAgICAgICAoZXZlbnRkZWYpID0+XG4gICAgICAgICAgICBldmVudGRlZi5wYXJ0aWNpcGFudEVtYWlscy5sZW5ndGggPT09IHN1YmV2ZW50LmVtYWlscy5sZW5ndGggJiZcbiAgICAgICAgICAgIGV2ZW50ZGVmLnBhcnRpY2lwYW50RW1haWxzLmV2ZXJ5KChlbWFpbCkgPT5cbiAgICAgICAgICAgICAgc3ViZXZlbnQuZW1haWxzLmluY2x1ZGVzKGVtYWlsKSxcbiAgICAgICAgICAgICksXG4gICAgICAgICksXG4gICAgICB9O1xuICAgIH0pO1xuICB9KSBhcyBhbnlbXVtdOyAvLyBUT0RPOiBIb3cgdG8gYmVzdCBjb2VyY2UgUHJlRGF0ZWRUaW1lU2xvdFtdW10gdG8gQ29uc2VjdXRpdmVFdmVudFtdW10/IHNwcmVhZC1jb21iaW5lZCByZXR1cm4gaGFuZGxlcyBpdC5cbn1cblxuLy8gV2UgZG9uJ3Qgd2FudCB0byBvdmVyYnVyZGVuIG91ciB1c2VycyB3aXRoIHRvbyBtdWNoIHN3ZWV0IGhvcnJpYmxlIGZyZWVkb20gb2YgY2hvaWNlO1xuLy8gdGhlIC9jYWxlbmRhcnMvYXZhaWxhYmlsaXR5L2NvbnNlY3V0aXZlIGVuZHBvaW50IHJldHVybnMgb3JkZXIgcGVybXV0YXRpb25zIHdpdGggc2FtZSB0aW1lIHNsb3RzO1xuLy8gQ3VsbCB0aGVtIGRvd24gdG8ganVzdCB0aGUgZmlyc3QgdGhhdCBleGlzdHMgcGVyIHRpbWVzbG90LlxuZnVuY3Rpb24gcmVtb3ZlU2ltdWx0YW5lb3VzQXZhaWxhYmlsaXR5T3B0aW9ucyhcbiAgYXZhaWxhYmlsaXRpZXM6IENvbnNlY3V0aXZlRXZlbnRbXVtdLFxuKSB7XG4gIGNvbnN0IGJsb2NrU2V0ID0gbmV3IFNldCgpO1xuICByZXR1cm4gYXZhaWxhYmlsaXRpZXMuZmlsdGVyKChibG9jaykgPT4ge1xuICAgIGNvbnN0IGJsb2NrU3RyaW5nID0gYCR7YmxvY2tbMF0uc3RhcnRfdGltZX1fJHtcbiAgICAgIGJsb2NrW2Jsb2NrLmxlbmd0aCAtIDFdLmVuZF90aW1lXG4gICAgfWA7XG4gICAgaWYgKGJsb2NrU2V0LmhhcyhibG9ja1N0cmluZykpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9IGVsc2Uge1xuICAgICAgYmxvY2tTZXQuYWRkKGJsb2NrU3RyaW5nKTtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgfSk7XG59XG4iLCJpbXBvcnQgeyBXcml0YWJsZSwgd3JpdGFibGUgfSBmcm9tIFwic3ZlbHRlL3N0b3JlXCI7XG5pbXBvcnQgeyBmZXRjaEF2YWlsYWJpbGl0eSB9IGZyb20gXCIuLi9jb25uZWN0aW9ucy9hdmFpbGFiaWxpdHlcIjtcbmltcG9ydCB0eXBlIHtcbiAgQXZhaWxhYmlsaXR5UXVlcnksXG4gIEF2YWlsYWJpbGl0eVJlc3BvbnNlLFxufSBmcm9tIFwiQGNvbW1vbnMvdHlwZXMvQXZhaWxhYmlsaXR5XCI7XG5cbnR5cGUgQXZhaWxhYmlsaXR5U3RvcmUgPSBSZWNvcmQ8c3RyaW5nLCBQcm9taXNlPEF2YWlsYWJpbGl0eVJlc3BvbnNlPj47XG5cbmZ1bmN0aW9uIGluaXRpYWxpemUoKTogV3JpdGFibGU8QXZhaWxhYmlsaXR5U3RvcmU+IHtcbiAgY29uc3QgZ2V0ID0gKFxuICAgIHRhcmdldDogQXZhaWxhYmlsaXR5U3RvcmUsXG4gICAga2V5OiBzdHJpbmcsXG4gICk6IFByb21pc2U8QXZhaWxhYmlsaXR5UmVzcG9uc2U+IHwgdm9pZCA9PiB7XG4gICAgY29uc3QgYWNjZXNzb3I6IEF2YWlsYWJpbGl0eVF1ZXJ5ID0gSlNPTi5wYXJzZShrZXkpO1xuICAgIC8vIEF2b2lkIHNhdmluZyBmb3JjZVJlbG9hZCBwcm9wZXJ0eSBhcyBwYXJ0IG9mIHN0b3JlIGtleVxuICAgIGNvbnN0IGFjY2Vzc29yQ29weSA9IHsgLi4uYWNjZXNzb3IgfTtcbiAgICBkZWxldGUgYWNjZXNzb3JDb3B5LmZvcmNlUmVsb2FkO1xuICAgIGtleSA9IEpTT04uc3RyaW5naWZ5KGFjY2Vzc29yQ29weSk7XG5cbiAgICBpZiAoXG4gICAgICAhYWNjZXNzb3IuY29tcG9uZW50X2lkIHx8XG4gICAgICAhYWNjZXNzb3I/LmJvZHk/LnN0YXJ0X3RpbWUgfHxcbiAgICAgICFhY2Nlc3Nvcj8uYm9keT8uZW5kX3RpbWVcbiAgICApIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAoIXRhcmdldFtrZXldIHx8IGFjY2Vzc29yLmZvcmNlUmVsb2FkKSB7XG4gICAgICBjb25zdCBmZXRjaFByb21pc2UgPSBmZXRjaEF2YWlsYWJpbGl0eShhY2Nlc3Nvcik7XG4gICAgICBzdG9yZS51cGRhdGUoKHN0b3JlKSA9PiB7XG4gICAgICAgIHN0b3JlW2tleV0gPSBmZXRjaFByb21pc2U7XG4gICAgICAgIHJldHVybiBzdG9yZTtcbiAgICAgIH0pO1xuICAgICAgdGFyZ2V0W2tleV0gPSBmZXRjaFByb21pc2U7XG4gICAgfVxuICAgIHJldHVybiB0YXJnZXRba2V5XTtcbiAgfTtcbiAgY29uc3Qgc3RvcmUgPSB3cml0YWJsZShuZXcgUHJveHk8QXZhaWxhYmlsaXR5U3RvcmU+KHt9LCB7IGdldCB9KSk7XG4gIHJldHVybiBzdG9yZTtcbn1cblxuZXhwb3J0IGNvbnN0IEF2YWlsYWJpbGl0eVN0b3JlID0gaW5pdGlhbGl6ZSgpO1xuIiwiaW1wb3J0IHsgV3JpdGFibGUsIHdyaXRhYmxlIH0gZnJvbSBcInN2ZWx0ZS9zdG9yZVwiO1xuaW1wb3J0IHsgZmV0Y2hDb25zZWN1dGl2ZUF2YWlsYWJpbGl0eSB9IGZyb20gXCIuLi9jb25uZWN0aW9ucy9hdmFpbGFiaWxpdHlcIjtcbmltcG9ydCB0eXBlIHsgQ29uc2VjdXRpdmVBdmFpbGFiaWxpdHlRdWVyeSB9IGZyb20gXCJAY29tbW9ucy90eXBlcy9BdmFpbGFiaWxpdHlcIjtcbmltcG9ydCB0eXBlIHsgQ29uc2VjdXRpdmVFdmVudCB9IGZyb20gXCJAY29tbW9ucy90eXBlcy9Cb29raW5nXCI7XG5cbnR5cGUgQ29uc2VjdXRpdmVBdmFpbGFiaWxpdHlTdG9yZSA9IFJlY29yZDxcbiAgc3RyaW5nLFxuICBQcm9taXNlPENvbnNlY3V0aXZlRXZlbnRbXVtdPlxuPjtcblxuZnVuY3Rpb24gaW5pdGlhbGl6ZSgpOiBXcml0YWJsZTxDb25zZWN1dGl2ZUF2YWlsYWJpbGl0eVN0b3JlPiB7XG4gIGNvbnN0IGdldCA9IChcbiAgICB0YXJnZXQ6IENvbnNlY3V0aXZlQXZhaWxhYmlsaXR5U3RvcmUsXG4gICAga2V5OiBzdHJpbmcsXG4gICk6IFByb21pc2U8Q29uc2VjdXRpdmVFdmVudFtdW10+IHwgdm9pZCA9PiB7XG4gICAgY29uc3QgYWNjZXNzb3I6IENvbnNlY3V0aXZlQXZhaWxhYmlsaXR5UXVlcnkgPSBKU09OLnBhcnNlKGtleSk7XG5cbiAgICBpZiAoXG4gICAgICAhYWNjZXNzb3IuY29tcG9uZW50X2lkIHx8XG4gICAgICAhYWNjZXNzb3I/LmJvZHk/LnN0YXJ0X3RpbWUgfHxcbiAgICAgICFhY2Nlc3Nvcj8uYm9keT8uZW5kX3RpbWVcbiAgICApIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAoIXRhcmdldFtrZXldKSB7XG4gICAgICBjb25zdCBmZXRjaFByb21pc2UgPSBmZXRjaENvbnNlY3V0aXZlQXZhaWxhYmlsaXR5KGFjY2Vzc29yKTtcbiAgICAgIHN0b3JlLnVwZGF0ZSgoc3RvcmUpID0+IHtcbiAgICAgICAgc3RvcmVba2V5XSA9IGZldGNoUHJvbWlzZTtcbiAgICAgICAgcmV0dXJuIHN0b3JlO1xuICAgICAgfSk7XG4gICAgICB0YXJnZXRba2V5XSA9IGZldGNoUHJvbWlzZTtcbiAgICB9XG4gICAgcmV0dXJuIHRhcmdldFtrZXldO1xuICB9O1xuICBjb25zdCBzdG9yZSA9IHdyaXRhYmxlKG5ldyBQcm94eTxDb25zZWN1dGl2ZUF2YWlsYWJpbGl0eVN0b3JlPih7fSwgeyBnZXQgfSkpO1xuICByZXR1cm4gc3RvcmU7XG59XG5cbmV4cG9ydCBjb25zdCBDb25zZWN1dGl2ZUF2YWlsYWJpbGl0eVN0b3JlID0gaW5pdGlhbGl6ZSgpO1xuIiwiaW1wb3J0IHsgd3JpdGFibGUgfSBmcm9tIFwic3ZlbHRlL3N0b3JlXCI7XG5pbXBvcnQgeyBmZXRjaENvbnRhY3RJbWFnZSB9IGZyb20gXCJAY29tbW9ucy9jb25uZWN0aW9ucy9jb250YWN0c1wiO1xuaW1wb3J0IHR5cGUgeyBDb250YWN0c1F1ZXJ5IH0gZnJvbSBcIkBjb21tb25zL3R5cGVzL0NvbnRhY3RzXCI7XG5cbmNvbnN0IGNvbnRhY3RBdmF0YXJNYXA6IFJlY29yZDxzdHJpbmcsIHN0cmluZz4gPSB7fTtcblxuZnVuY3Rpb24gaW5pdGlhbGl6ZUNvbnRhY3RBdmF0YXJzKCkge1xuICBjb25zdCB7IHN1YnNjcmliZSwgc2V0IH0gPSB3cml0YWJsZTxSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+Pih7fSk7XG4gIHJldHVybiB7XG4gICAgc3Vic2NyaWJlLFxuICAgIGdldENvbnRhY3RBdmF0YXI6IGFzeW5jIChcbiAgICAgIHF1ZXJ5OiBDb250YWN0c1F1ZXJ5LFxuICAgICAgY29udGFjdF9pZDogc3RyaW5nLFxuICAgICAgcmVmcmVzaCA9IGZhbHNlLFxuICAgICkgPT4ge1xuICAgICAgaWYgKCFjb250YWN0QXZhdGFyTWFwW2NvbnRhY3RfaWRdIHx8IHJlZnJlc2gpIHtcbiAgICAgICAgY29uc3QgYXZhdGFyID0gYXdhaXQgZmV0Y2hDb250YWN0SW1hZ2UocXVlcnksIGNvbnRhY3RfaWQpXG4gICAgICAgICAgLnRoZW4oKHJlcykgPT4gcmVzKVxuICAgICAgICAgIC5jYXRjaCgoKSA9PiBcIlwiKTtcbiAgICAgICAgaWYgKGF2YXRhcikge1xuICAgICAgICAgIGNvbnRhY3RBdmF0YXJNYXBbY29udGFjdF9pZF0gPSBhdmF0YXI7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiBjb250YWN0QXZhdGFyTWFwW2NvbnRhY3RfaWRdO1xuICAgIH0sXG4gICAgcmVzZXQ6ICgpID0+IHNldCh7fSksXG4gIH07XG59XG5cbmV4cG9ydCBjb25zdCBDb250YWN0QXZhdGFyU3RvcmUgPSBpbml0aWFsaXplQ29udGFjdEF2YXRhcnMoKTtcbiIsImltcG9ydCB7IGRlcml2ZWQsIFJlYWRhYmxlLCB3cml0YWJsZSB9IGZyb20gXCJzdmVsdGUvc3RvcmVcIjtcbmltcG9ydCB7XG4gIGZldGNoVGhyZWFkcyxcbiAgZmV0Y2hTZWFyY2hSZXN1bHRUaHJlYWRzLFxuICB1cGRhdGVUaHJlYWQsXG4gIGZldGNoVGhyZWFkQ291bnQsXG59IGZyb20gXCIuLi9jb25uZWN0aW9ucy90aHJlYWRzXCI7XG5pbXBvcnQgdHlwZSB7XG4gIFRocmVhZCxcbiAgTWFpbGJveFF1ZXJ5LFxuICBDb252ZXJzYXRpb25RdWVyeSxcbiAgTWVzc2FnZSxcbiAgQ29udmVyc2F0aW9uLFxufSBmcm9tIFwiQGNvbW1vbnMvdHlwZXMvTnlsYXNcIjtcbmltcG9ydCB7IHNpbGVuY2UgfSBmcm9tIFwiQGNvbW1vbnNcIjtcblxuaW50ZXJmYWNlIFBhZ2luYXRlZFRocmVhZHMge1xuICBpc0xvYWRlZDogYm9vbGVhbjtcbiAgdGhyZWFkczogVGhyZWFkW107XG59XG5cbmFzeW5jIGZ1bmN0aW9uIGluaXRpYWxpemVQYWdpbmF0ZWRUaHJlYWRzKHRvdGFsUGFnZXM6IG51bWJlcikge1xuICBjb25zdCBwYWdpbmF0ZWRUaHJlYWRzID0gW107XG5cbiAgZm9yIChsZXQgaSA9IDA7IGkgPCB0b3RhbFBhZ2VzOyBpKyspIHtcbiAgICBwYWdpbmF0ZWRUaHJlYWRzLnB1c2goe1xuICAgICAgaXNMb2FkZWQ6IGZhbHNlLFxuICAgICAgdGhyZWFkczogPFRocmVhZFtdPltdLFxuICAgIH0pO1xuICB9XG4gIHJldHVybiBwYWdpbmF0ZWRUaHJlYWRzO1xufVxuXG5mdW5jdGlvbiBpbml0aWFsaXplVGhyZWFkcygpIHtcbiAgY29uc3QgeyBzdWJzY3JpYmUsIHNldCwgdXBkYXRlIH0gPSB3cml0YWJsZTxcbiAgICBSZWNvcmQ8c3RyaW5nLCBQYWdpbmF0ZWRUaHJlYWRzW10+XG4gID4oe30pO1xuICBsZXQgdGhyZWFkc01hcDogUmVjb3JkPHN0cmluZywgUGFnaW5hdGVkVGhyZWFkc1tdPiA9IHt9O1xuICBsZXQgdG90YWxJdGVtczogbnVtYmVyO1xuXG4gIHJldHVybiB7XG4gICAgc3Vic2NyaWJlLFxuICAgIHNldCxcbiAgICBnZXRUaHJlYWRzOiBhc3luYyAoXG4gICAgICBxdWVyeTogTWFpbGJveFF1ZXJ5LFxuICAgICAgY3VycmVudFBhZ2U6IG51bWJlcixcbiAgICAgIHBhZ2VTaXplOiBudW1iZXIsXG4gICAgICBmb3JjZVJlZnJlc2ggPSBmYWxzZSxcbiAgICApID0+IHtcbiAgICAgIGNvbnN0IHF1ZXJ5S2V5ID0gSlNPTi5zdHJpbmdpZnkocXVlcnkpO1xuXG4gICAgICBpZiAoIXF1ZXJ5LmNvbXBvbmVudF9pZCAmJiAhcXVlcnkuYWNjZXNzX3Rva2VuKSB7XG4gICAgICAgIC8vIFRoaXMgc2hvdWxkIGFsZXJ0IHRoZSB1c2VyXG4gICAgICAgIHJldHVybiBbXTtcbiAgICAgIH1cblxuICAgICAgaWYgKHRvdGFsSXRlbXMgPT09IHVuZGVmaW5lZCB8fCBmb3JjZVJlZnJlc2gpIHtcbiAgICAgICAgLy8gVE9ETzogdGhpcyBjYW4gY291bnQgcGFzc2VkLWluIElEc1xuICAgICAgICBjb25zdCB0aHJlYWRDb3VudCA9IHF1ZXJ5LnRocmVhZF9pZHNcbiAgICAgICAgICA/IHF1ZXJ5LnRocmVhZF9pZHMubGVuZ3RoXG4gICAgICAgICAgOiBhd2FpdCBmZXRjaFRocmVhZENvdW50KHF1ZXJ5KS5jYXRjaChzaWxlbmNlKTtcblxuICAgICAgICBpZiAodGhyZWFkQ291bnQpIHtcbiAgICAgICAgICB0b3RhbEl0ZW1zID0gdGhyZWFkQ291bnQ7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgaWYgKCFBcnJheS5pc0FycmF5KHRocmVhZHNNYXBbcXVlcnlLZXldKSB8fCBmb3JjZVJlZnJlc2gpIHtcbiAgICAgICAgY29uc3QgdG90YWxQYWdlcyA9IE1hdGguY2VpbCh0b3RhbEl0ZW1zIC8gcGFnZVNpemUpO1xuICAgICAgICB0aHJlYWRzTWFwW3F1ZXJ5S2V5XSA9IGF3YWl0IGluaXRpYWxpemVQYWdpbmF0ZWRUaHJlYWRzKHRvdGFsUGFnZXMpO1xuICAgICAgfVxuXG4gICAgICBpZiAodHlwZW9mIHRocmVhZHNNYXBbcXVlcnlLZXldW2N1cnJlbnRQYWdlXSA9PT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgICAvLyBTaG91bGRuJ3QgdGhpcyBiZSBhbiBpbnRlcm5hbCBlcnJvcj9cbiAgICAgICAgcmV0dXJuIFtdO1xuICAgICAgfSBlbHNlIGlmICghdGhyZWFkc01hcFtxdWVyeUtleV1bY3VycmVudFBhZ2VdLmlzTG9hZGVkKSB7XG4gICAgICAgIGNvbnN0IHRocmVhZHMgPSBhd2FpdCBmZXRjaFRocmVhZHMoXG4gICAgICAgICAgcXVlcnksXG4gICAgICAgICAgcGFnZVNpemUsXG4gICAgICAgICAgY3VycmVudFBhZ2UgKiBwYWdlU2l6ZSxcbiAgICAgICAgKS5jYXRjaChzaWxlbmNlKTtcblxuICAgICAgICBpZiAodGhyZWFkcykge1xuICAgICAgICAgIHRocmVhZHNNYXBbcXVlcnlLZXldW2N1cnJlbnRQYWdlXS50aHJlYWRzID0gdGhyZWFkcztcbiAgICAgICAgICB0aHJlYWRzTWFwW3F1ZXJ5S2V5XVtjdXJyZW50UGFnZV0uaXNMb2FkZWQgPSB0cnVlO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHVwZGF0ZSgodGhyZWFkcykgPT4ge1xuICAgICAgICB0aHJlYWRzW3F1ZXJ5S2V5XSA9IHRocmVhZHNNYXBbcXVlcnlLZXldO1xuICAgICAgICByZXR1cm4geyAuLi50aHJlYWRzIH07XG4gICAgICB9KTtcblxuICAgICAgcmV0dXJuIHRocmVhZHNNYXBbcXVlcnlLZXldW2N1cnJlbnRQYWdlXS50aHJlYWRzO1xuICAgIH0sXG4gICAgZ2V0TnVtYmVyT2ZJdGVtczogYXN5bmMgKHF1ZXJ5OiBNYWlsYm94UXVlcnkpID0+IHtcbiAgICAgIGlmICghcXVlcnkuY29tcG9uZW50X2lkICYmICFxdWVyeS5hY2Nlc3NfdG9rZW4pIHtcbiAgICAgICAgcmV0dXJuIDA7XG4gICAgICB9XG5cbiAgICAgIGlmICh0eXBlb2YgdG90YWxJdGVtcyA9PT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgICBjb25zdCB0aHJlYWRDb3VudCA9IGF3YWl0IGZldGNoVGhyZWFkQ291bnQocXVlcnkpLmNhdGNoKHNpbGVuY2UpO1xuXG4gICAgICAgIGlmICh0aHJlYWRDb3VudCkge1xuICAgICAgICAgIHRvdGFsSXRlbXMgPSB0aHJlYWRDb3VudDtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIHRvdGFsSXRlbXM7XG4gICAgfSxcbiAgICAvLyBUT0RPIC0gVXNlIHJlYWwgcGFnaW5hdGlvbiB3aGVuIHNlYXJjaCBlbmRwb2ludCBzdXBwb3J0cyBpdFxuICAgIGdldFRocmVhZHNXaXRoU2VhcmNoS2V5d29yZDogYXN5bmMgKFxuICAgICAgcXVlcnk6IE1haWxib3hRdWVyeSxcbiAgICAgIGZvcmNlUmVmcmVzaCA9IGZhbHNlLFxuICAgICkgPT4ge1xuICAgICAgaWYgKCFxdWVyeS5jb21wb25lbnRfaWQgJiYgIXF1ZXJ5LmFjY2Vzc190b2tlbikge1xuICAgICAgICByZXR1cm4gW107XG4gICAgICB9XG4gICAgICBjb25zdCBxdWVyeUtleSA9IEpTT04uc3RyaW5naWZ5KHF1ZXJ5KTtcblxuICAgICAgaWYgKCFBcnJheS5pc0FycmF5KHRocmVhZHNNYXBbcXVlcnlLZXldKSB8fCBmb3JjZVJlZnJlc2gpIHtcbiAgICAgICAgdGhyZWFkc01hcFtxdWVyeUtleV0gPSBhd2FpdCBpbml0aWFsaXplUGFnaW5hdGVkVGhyZWFkcygxKTtcbiAgICAgIH1cblxuICAgICAgaWYgKCF0aHJlYWRzTWFwW3F1ZXJ5S2V5XVswXS5pc0xvYWRlZCB8fCBmb3JjZVJlZnJlc2gpIHtcbiAgICAgICAgY29uc3Qgc2VhcmNoUmVzdWx0VGhyZWFkcyA9IGF3YWl0IGZldGNoU2VhcmNoUmVzdWx0VGhyZWFkcyhxdWVyeSkuY2F0Y2goXG4gICAgICAgICAgc2lsZW5jZSxcbiAgICAgICAgKTtcblxuICAgICAgICBpZiAoc2VhcmNoUmVzdWx0VGhyZWFkcykge1xuICAgICAgICAgIHRocmVhZHNNYXBbcXVlcnlLZXldWzBdLnRocmVhZHMgPSBzZWFyY2hSZXN1bHRUaHJlYWRzO1xuICAgICAgICAgIHRocmVhZHNNYXBbcXVlcnlLZXldWzBdLmlzTG9hZGVkID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgdXBkYXRlKCh0aHJlYWRzKSA9PiB7XG4gICAgICAgIHRocmVhZHNbcXVlcnlLZXldID0gdGhyZWFkc01hcFtxdWVyeUtleV07XG4gICAgICAgIHJldHVybiB7IC4uLnRocmVhZHMgfTtcbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIHRocmVhZHNNYXBbcXVlcnlLZXldWzBdLnRocmVhZHM7XG4gICAgfSxcbiAgICB1cGRhdGVUaHJlYWQ6IGFzeW5jIChcbiAgICAgIHRocmVhZFF1ZXJ5OiBDb252ZXJzYXRpb25RdWVyeSxcbiAgICAgIHF1ZXJ5S2V5OiBzdHJpbmcsXG4gICAgICB1cGRhdGVkVGhyZWFkOiBDb252ZXJzYXRpb24sXG4gICAgICBjdXJyZW50UGFnZTogbnVtYmVyLFxuICAgICAgcGFnZVNpemU6IG51bWJlcixcbiAgICApID0+IHtcbiAgICAgIGNvbnN0IHRocmVhZCA9IGF3YWl0IHVwZGF0ZVRocmVhZCh0aHJlYWRRdWVyeSwgdXBkYXRlZFRocmVhZCkuY2F0Y2goXG4gICAgICAgIHNpbGVuY2UsXG4gICAgICApO1xuXG4gICAgICBpZiAoIXRocmVhZHNNYXBbcXVlcnlLZXldW2N1cnJlbnRQYWdlXS5pc0xvYWRlZCkge1xuICAgICAgICAvLyBwb3NzaWJsZSBoYWNrOiBwYXNzIGluIGFycmF5IHRvIHF1ZXJ5P1xuICAgICAgICBjb25zdCB0aHJlYWRzID0gYXdhaXQgZmV0Y2hUaHJlYWRzKFxuICAgICAgICAgIEpTT04ucGFyc2UocXVlcnlLZXkpLFxuICAgICAgICAgIHBhZ2VTaXplLFxuICAgICAgICAgIGN1cnJlbnRQYWdlICogcGFnZVNpemUsXG4gICAgICAgICkuY2F0Y2goc2lsZW5jZSk7XG5cbiAgICAgICAgaWYgKHRocmVhZHMpIHtcbiAgICAgICAgICB0aHJlYWRzTWFwW3F1ZXJ5S2V5XVtjdXJyZW50UGFnZV0udGhyZWFkcyA9IHRocmVhZHM7XG4gICAgICAgICAgdGhyZWFkc01hcFtxdWVyeUtleV1bY3VycmVudFBhZ2VdLmlzTG9hZGVkID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICB0aHJlYWRzTWFwW3F1ZXJ5S2V5XVtjdXJyZW50UGFnZV0udGhyZWFkcyA9IHRocmVhZHNNYXBbcXVlcnlLZXldW1xuICAgICAgICBjdXJyZW50UGFnZVxuICAgICAgXS50aHJlYWRzLm1hcCgoaW5pdGlhbFRocmVhZCkgPT4ge1xuICAgICAgICBpZiAodGhyZWFkICYmIGluaXRpYWxUaHJlYWQuaWQgPT09IHRocmVhZC5pZCkge1xuICAgICAgICAgIGluaXRpYWxUaHJlYWQgPSBPYmplY3QuYXNzaWduKGluaXRpYWxUaHJlYWQsIHRocmVhZCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGluaXRpYWxUaHJlYWQ7XG4gICAgICB9KTtcbiAgICAgIHVwZGF0ZSgodGhyZWFkcykgPT4ge1xuICAgICAgICB0aHJlYWRzW3F1ZXJ5S2V5XSA9IHRocmVhZHNNYXBbcXVlcnlLZXldO1xuICAgICAgICByZXR1cm4geyAuLi50aHJlYWRzIH07XG4gICAgICB9KTtcbiAgICAgIHJldHVybiB0aHJlYWRzTWFwW3F1ZXJ5S2V5XVtjdXJyZW50UGFnZV0udGhyZWFkcztcbiAgICB9LFxuICAgIHVwZGF0ZVRocmVhZFNlbGVjdGlvbjogKFxuICAgICAgcXVlcnlLZXk6IHN0cmluZyxcbiAgICAgIGN1cnJlbnRQYWdlOiBudW1iZXIsXG4gICAgICB0aHJlYWRJZD86IHN0cmluZyxcbiAgICApID0+IHtcbiAgICAgIGNvbnN0IHRocmVhZHMgPSB0aHJlYWRzTWFwW3F1ZXJ5S2V5XVtjdXJyZW50UGFnZV0udGhyZWFkcztcblxuICAgICAgaWYgKCF0aHJlYWRJZCkge1xuICAgICAgICBjb25zdCBzZWxlY3Rpb25TdGF0ZSA9IHRocmVhZHMuc29tZSgodGhyZWFkKSA9PiB0aHJlYWQuc2VsZWN0ZWQpO1xuICAgICAgICBmb3IgKGNvbnN0IHRocmVhZCBvZiB0aHJlYWRzKSB7XG4gICAgICAgICAgdGhyZWFkLnNlbGVjdGVkID0gIXNlbGVjdGlvblN0YXRlO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb25zdCB0aHJlYWQgPSB0aHJlYWRzLmZpbmQoKHRocmVhZCkgPT4gdGhyZWFkLmlkID09PSB0aHJlYWRJZCk7XG4gICAgICAgIGlmICh0aHJlYWQpIHtcbiAgICAgICAgICB0aHJlYWQuc2VsZWN0ZWQgPSAhdGhyZWFkLnNlbGVjdGVkO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICB1cGRhdGUoKHRocmVhZHMpID0+IHtcbiAgICAgICAgdGhyZWFkc1txdWVyeUtleV0gPSB0aHJlYWRzTWFwW3F1ZXJ5S2V5XTtcbiAgICAgICAgcmV0dXJuIHsgLi4udGhyZWFkcyB9O1xuICAgICAgfSk7XG4gICAgICByZXR1cm4gdGhyZWFkc01hcFtxdWVyeUtleV1bY3VycmVudFBhZ2VdLnRocmVhZHM7XG4gICAgfSxcblxuICAgIHJlc2V0OiAoKSA9PiB7XG4gICAgICB0aHJlYWRzTWFwID0ge307XG4gICAgICBzZXQoe30pO1xuICAgIH0sXG5cbiAgICBoeWRyYXRlTWVzc2FnZUluVGhyZWFkOiAoXG4gICAgICBpbmNvbWluZ01lc3NhZ2U6IE1lc3NhZ2UsXG4gICAgICBxdWVyeTogTWFpbGJveFF1ZXJ5LFxuICAgICAgY3VycmVudFBhZ2U6IG51bWJlcixcbiAgICApID0+IHtcbiAgICAgIGNvbnN0IHF1ZXJ5S2V5ID0gSlNPTi5zdHJpbmdpZnkocXVlcnkpO1xuXG4gICAgICBjb25zdCBmb3VuZFRocmVhZCA9IHRocmVhZHNNYXBbcXVlcnlLZXldW2N1cnJlbnRQYWdlXT8udGhyZWFkcz8uZmluZChcbiAgICAgICAgKHRocmVhZCkgPT4gdGhyZWFkLmlkID09PSBpbmNvbWluZ01lc3NhZ2UudGhyZWFkX2lkLFxuICAgICAgKTtcbiAgICAgIGlmIChmb3VuZFRocmVhZCkge1xuICAgICAgICBjb25zdCBmb3VuZE1lc3NhZ2UgPSBmb3VuZFRocmVhZC5tZXNzYWdlcz8uZmluZChcbiAgICAgICAgICAobWVzc2FnZSkgPT4gbWVzc2FnZS5pZCA9PT0gaW5jb21pbmdNZXNzYWdlLmlkLFxuICAgICAgICApO1xuICAgICAgICBpZiAoZm91bmRNZXNzYWdlKSB7XG4gICAgICAgICAgZm91bmRNZXNzYWdlLmJvZHkgPSBpbmNvbWluZ01lc3NhZ2UuYm9keTtcbiAgICAgICAgICB1cGRhdGUoKHRocmVhZHMpID0+IHtcbiAgICAgICAgICAgIGlmIChpbmNvbWluZ01lc3NhZ2UudGhyZWFkX2lkKSB7XG4gICAgICAgICAgICAgIGxldCB0aHJlYWRUb1VwZGF0ZSA9IHRocmVhZHNbcXVlcnlLZXldW2N1cnJlbnRQYWdlXS50aHJlYWRzLmZpbmQoXG4gICAgICAgICAgICAgICAgKHRocmVhZCkgPT4gdGhyZWFkLmlkID09PSBmb3VuZFRocmVhZC5pZCxcbiAgICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgICBpZiAodGhyZWFkVG9VcGRhdGUpIHtcbiAgICAgICAgICAgICAgICB0aHJlYWRUb1VwZGF0ZSA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkoZm91bmRUaHJlYWQpKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHsgLi4udGhyZWFkcyB9O1xuICAgICAgICAgIH0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIC8vIFRoaXMgaGFwcGVucyB3aGVuIHNvbWVvbmUgc2VuZHMgYSBtZXNzYWdlIHVzaW5nIGNvbXBvc2VyIGFuZCB3ZSB3YW50XG4gICAgICAgICAgLy8gdG8gdXBkYXRlIHRoZSBleGlzdGluZyB0aHJlYWQgd2l0aCB0aGUgc2VudCBtZXNzYWdlXG4gICAgICAgICAgdXBkYXRlKCh0aHJlYWRzKSA9PiB7XG4gICAgICAgICAgICBpZiAoaW5jb21pbmdNZXNzYWdlLnRocmVhZF9pZCkge1xuICAgICAgICAgICAgICBsZXQgdGhyZWFkVG9VcGRhdGUgPSB0aHJlYWRzW3F1ZXJ5S2V5XVtjdXJyZW50UGFnZV0udGhyZWFkcy5maW5kKFxuICAgICAgICAgICAgICAgICh0aHJlYWQpID0+IHRocmVhZC5pZCA9PT0gZm91bmRUaHJlYWQuaWQsXG4gICAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgICAgaWYgKHRocmVhZFRvVXBkYXRlKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgbWVzc2FnZXMgPSBmb3VuZFRocmVhZC5tZXNzYWdlcztcbiAgICAgICAgICAgICAgICBtZXNzYWdlcy5wdXNoKGluY29taW5nTWVzc2FnZSk7XG4gICAgICAgICAgICAgICAgZm91bmRUaHJlYWQubWVzc2FnZXMgPSBtZXNzYWdlcztcbiAgICAgICAgICAgICAgICBmb3VuZFRocmVhZC5zbmlwcGV0ID0gaW5jb21pbmdNZXNzYWdlLnNuaXBwZXQ7XG4gICAgICAgICAgICAgICAgLy9SZW1vdmUgZHJhZnQgd2l0aCB0aGUgc2FtZSBpZCBhcyBzZW50IG1lc3NhZ2VcbiAgICAgICAgICAgICAgICBmb3VuZFRocmVhZC5kcmFmdHMgPSBmb3VuZFRocmVhZC5kcmFmdHMuZmlsdGVyKFxuICAgICAgICAgICAgICAgICAgKGRyYWZ0KSA9PiBkcmFmdC5pZCAhPT0gaW5jb21pbmdNZXNzYWdlLmlkLFxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgdGhyZWFkVG9VcGRhdGUgPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KGZvdW5kVGhyZWFkKSk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB7IC4uLnRocmVhZHMgfTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICByZXR1cm4gdGhyZWFkc01hcFtxdWVyeUtleV1bY3VycmVudFBhZ2VdLnRocmVhZHM7XG4gICAgfSxcblxuICAgIC8vVXBkYXRlIGRyYWZ0cyBpbiB0aGUgdGhyZWFkcyBzdG9yZVxuICAgIGh5ZHJhdGVEcmFmdEluVGhyZWFkOiAoXG4gICAgICBpbmNvbWluZ0RyYWZ0OiBNZXNzYWdlLFxuICAgICAgcXVlcnk6IE1haWxib3hRdWVyeSxcbiAgICAgIGN1cnJlbnRQYWdlOiBudW1iZXIsXG4gICAgKSA9PiB7XG4gICAgICBjb25zdCBxdWVyeUtleSA9IEpTT04uc3RyaW5naWZ5KHF1ZXJ5KTtcblxuICAgICAgY29uc3QgZm91bmRUaHJlYWQgPSB0aHJlYWRzTWFwW3F1ZXJ5S2V5XVtjdXJyZW50UGFnZV0/LnRocmVhZHM/LmZpbmQoXG4gICAgICAgICh0aHJlYWQpID0+IHRocmVhZC5pZCA9PT0gaW5jb21pbmdEcmFmdC50aHJlYWRfaWQsXG4gICAgICApO1xuICAgICAgaWYgKGZvdW5kVGhyZWFkKSB7XG4gICAgICAgIC8vVXBkYXRlIGV4aXN0aW5nIGRyYWZ0IG1lc3NhZ2UgaW4gc3RvcmVcbiAgICAgICAgY29uc3QgZm91bmREcmFmdCA9IGZvdW5kVGhyZWFkLmRyYWZ0cz8uZmluZChcbiAgICAgICAgICAoZHJhZnQpID0+IGRyYWZ0LmlkID09PSBpbmNvbWluZ0RyYWZ0LmlkLFxuICAgICAgICApO1xuXG4gICAgICAgIGlmIChpbmNvbWluZ0RyYWZ0LnRocmVhZF9pZCkge1xuICAgICAgICAgIGlmIChmb3VuZERyYWZ0KSB7XG4gICAgICAgICAgICBPYmplY3QuYXNzaWduKGZvdW5kRHJhZnQsIGluY29taW5nRHJhZnQpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjb25zdCBkcmFmdHMgPSBmb3VuZFRocmVhZC5kcmFmdHM7XG4gICAgICAgICAgICBkcmFmdHMucHVzaChpbmNvbWluZ0RyYWZ0KTtcbiAgICAgICAgICAgIGZvdW5kVGhyZWFkLmRyYWZ0cyA9IGRyYWZ0cztcbiAgICAgICAgICB9XG5cbiAgICAgICAgICB1cGRhdGUoKHRocmVhZHMpID0+IHtcbiAgICAgICAgICAgIGxldCB0aHJlYWRUb1VwZGF0ZSA9IHRocmVhZHNbcXVlcnlLZXldW2N1cnJlbnRQYWdlXS50aHJlYWRzLmZpbmQoXG4gICAgICAgICAgICAgICh0aHJlYWQpID0+IHRocmVhZC5pZCA9PT0gZm91bmRUaHJlYWQuaWQsXG4gICAgICAgICAgICApO1xuICAgICAgICAgICAgaWYgKHRocmVhZFRvVXBkYXRlKSB7XG4gICAgICAgICAgICAgIHRocmVhZFRvVXBkYXRlID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShmb3VuZFRocmVhZCkpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4geyAuLi50aHJlYWRzIH07XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiB0aHJlYWRzTWFwW3F1ZXJ5S2V5XVtjdXJyZW50UGFnZV0udGhyZWFkcztcbiAgICB9LFxuICB9O1xufVxuXG5leHBvcnQgY29uc3QgTWFpbGJveFN0b3JlID0gaW5pdGlhbGl6ZVRocmVhZHMoKTtcblxuZXhwb3J0IGNvbnN0IEVtYWlsU3RvcmU6IFJlYWRhYmxlPFJlY29yZDxzdHJpbmcsIFRocmVhZFtdPj4gPSBkZXJpdmVkKFxuICBNYWlsYm94U3RvcmUsXG4gICgkTWFpbGJveFN0b3JlKSA9PiB7XG4gICAgY29uc3QgZW1haWxTdG9yZTogUmVjb3JkPHN0cmluZywgVGhyZWFkW10+ID0ge307XG4gICAgT2JqZWN0LmVudHJpZXMoJE1haWxib3hTdG9yZSkuZm9yRWFjaChcbiAgICAgIChba2V5LCBwYWdpbmF0ZWRUaHJlYWRzXSkgPT5cbiAgICAgICAgKGVtYWlsU3RvcmVba2V5XSA9IHBhZ2luYXRlZFRocmVhZHNcbiAgICAgICAgICAubWFwKChwYWdpbmF0ZWRUaHJlYWQpID0+IHBhZ2luYXRlZFRocmVhZC50aHJlYWRzKVxuICAgICAgICAgIC5mbGF0KCkpLFxuICAgICk7XG4gICAgcmV0dXJuIGVtYWlsU3RvcmU7XG4gIH0sXG4pO1xuIiwiaW1wb3J0IHsgZmV0Y2hNYW5pZmVzdCB9IGZyb20gXCIuLi9jb25uZWN0aW9ucy9tYW5pZmVzdFwiO1xuaW1wb3J0IHsgV3JpdGFibGUsIHdyaXRhYmxlIH0gZnJvbSBcInN2ZWx0ZS9zdG9yZVwiO1xuaW1wb3J0IHR5cGUgeyBNYW5pZmVzdCB9IGZyb20gXCJAY29tbW9ucy90eXBlcy9OeWxhc1wiO1xuXG50eXBlIE1hbmlmZXN0QWNjZXNzb3IgPSB7XG4gIGNvbXBvbmVudF9pZDogc3RyaW5nO1xuICBhY2Nlc3NfdG9rZW4/OiBzdHJpbmc7XG4gIGV4dGVybmFsX21hbmlmZXN0X2lkcz86IFtdO1xufTtcbnR5cGUgTWFuaWZlc3RTdG9yZSA9IFJlY29yZDxzdHJpbmcsIFByb21pc2U8TWFuaWZlc3Q+PjtcblxuZnVuY3Rpb24gaW5pdGlhbGl6ZSgpOiBXcml0YWJsZTxNYW5pZmVzdFN0b3JlPiB7XG4gIGNvbnN0IGdldCA9IChcbiAgICB0YXJnZXQ6IE1hbmlmZXN0U3RvcmUsXG4gICAga2V5OiBzdHJpbmcsXG4gICk6IFByb21pc2U8TWFuaWZlc3Q+IHwgdm9pZCA9PiB7XG4gICAgY29uc3QgYWNjZXNzb3I6IE1hbmlmZXN0QWNjZXNzb3IgPSBKU09OLnBhcnNlKGtleSk7XG5cbiAgICBpZiAoIWFjY2Vzc29yLmNvbXBvbmVudF9pZCkgcmV0dXJuO1xuXG4gICAgaWYgKCF0YXJnZXRba2V5XSkge1xuICAgICAgY29uc3QgZmV0Y2hQcm9taXNlID0gZmV0Y2hNYW5pZmVzdChcbiAgICAgICAgYWNjZXNzb3IuY29tcG9uZW50X2lkLFxuICAgICAgICBhY2Nlc3Nvci5hY2Nlc3NfdG9rZW4sXG4gICAgICApO1xuICAgICAgc3RvcmUudXBkYXRlKChzdG9yZSkgPT4ge1xuICAgICAgICBzdG9yZVtrZXldID0gZmV0Y2hQcm9taXNlO1xuICAgICAgICByZXR1cm4gc3RvcmU7XG4gICAgICB9KTtcbiAgICAgIHRhcmdldFtrZXldID0gZmV0Y2hQcm9taXNlO1xuICAgIH1cbiAgICByZXR1cm4gdGFyZ2V0W2tleV07XG4gIH07XG4gIGNvbnN0IHN0b3JlID0gd3JpdGFibGUobmV3IFByb3h5PE1hbmlmZXN0U3RvcmU+KHt9LCB7IGdldCB9KSk7XG4gIHJldHVybiBzdG9yZTtcbn1cblxuZXhwb3J0IGNvbnN0IE1hbmlmZXN0U3RvcmUgPSBpbml0aWFsaXplKCk7XG4iLCJpbXBvcnQgdHlwZSB7IEZpbGUsIE1hbmlmZXN0IH0gZnJvbSBcIkBjb21tb25zL3R5cGVzL055bGFzXCI7XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRFdmVudERpc3BhdGNoZXIoY29tcG9uZW50OiB7XG4gIGRpc3BhdGNoRXZlbnQ/OiAoZTogRXZlbnQpID0+IGJvb2xlYW47XG59KSB7XG4gIHJldHVybiAobmFtZTogc3RyaW5nLCBkZXRhaWw6IHVua25vd24pOiB2b2lkID0+IHtcbiAgICBpZiAoY29tcG9uZW50LmRpc3BhdGNoRXZlbnQpIHtcbiAgICAgIGNvbXBvbmVudC5kaXNwYXRjaEV2ZW50KFxuICAgICAgICBuZXcgQ3VzdG9tRXZlbnQobmFtZSwge1xuICAgICAgICAgIGRldGFpbCxcbiAgICAgICAgICBjb21wb3NlZDogdHJ1ZSwgLy8gcHJvcGFnYXRlIGFjcm9zcyB0aGUgc2hhZG93IERPTVxuICAgICAgICB9KSxcbiAgICAgICk7XG4gICAgfVxuICB9O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZGVib3VuY2UoXG4gIGZuOiAoYXJnczogdW5rbm93bikgPT4gdW5rbm93bixcbiAgdGltZTogbnVtYmVyLFxuKTogKCkgPT4gdm9pZCB7XG4gIGxldCB0aW1lb3V0SWQ6IFJldHVyblR5cGU8dHlwZW9mIHNldFRpbWVvdXQ+O1xuICByZXR1cm4gKCk6IHZvaWQgPT4ge1xuICAgIGlmICh0aW1lb3V0SWQpIHtcbiAgICAgIGNsZWFyVGltZW91dCh0aW1lb3V0SWQpO1xuICAgIH1cblxuICAgIHRpbWVvdXRJZCA9IHNldFRpbWVvdXQoZm4sIHRpbWUpO1xuICB9O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gYnVpbGRJbnRlcm5hbFByb3BzPFQgZXh0ZW5kcyBQYXJ0aWFsPE1hbmlmZXN0Pj4oXG4gIHByb3BlcnRpZXM6IFQsXG4gIG1hbmlmZXN0OiBULFxuICBkZWZhdWx0VmFsdWVNYXA6IFQsXG4pOiBUIHtcbiAgcmV0dXJuIG5ldyBQcm94eShwcm9wZXJ0aWVzLCB7XG4gICAgZ2V0OiAodGFyZ2V0LCBuYW1lOiBrZXlvZiBNYW5pZmVzdCB8IFwidG9KU09OXCIgfCBcInRvU3RyaW5nXCIpID0+IHtcbiAgICAgIGlmIChuYW1lID09PSBcInRvU3RyaW5nXCIgfHwgbmFtZSA9PT0gXCJ0b0pTT05cIikge1xuICAgICAgICByZXR1cm4gKCkgPT4gSlNPTi5zdHJpbmdpZnkodGFyZ2V0KTtcbiAgICAgIH1cblxuICAgICAgaWYgKFJlZmxlY3QuZ2V0KHRhcmdldCwgbmFtZSkgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICByZXR1cm4gZ2V0UHJvcGVydHlWYWx1ZShcbiAgICAgICAgICBSZWZsZWN0LmdldCh0YXJnZXQsIG5hbWUpLFxuICAgICAgICAgIGRlZmF1bHRWYWx1ZU1hcFtuYW1lXSxcbiAgICAgICAgKTtcbiAgICAgIH1cblxuICAgICAgaWYgKG1hbmlmZXN0ICYmIG5hbWUgaW4gbWFuaWZlc3QpIHtcbiAgICAgICAgcmV0dXJuIGdldFByb3BlcnR5VmFsdWUobWFuaWZlc3RbbmFtZV0sIGRlZmF1bHRWYWx1ZU1hcFtuYW1lXSk7XG4gICAgICB9XG4gICAgICByZXR1cm4gZGVmYXVsdFZhbHVlTWFwW25hbWVdO1xuICAgIH0sXG5cbiAgICBvd25LZXlzOiAodGFyZ2V0KSA9PiB7XG4gICAgICBjb25zdCBrZXlzID0gbmV3IFNldChbXG4gICAgICAgIC4uLlJlZmxlY3Qub3duS2V5cyh0YXJnZXQpLFxuICAgICAgICAuLi5PYmplY3Qua2V5cyhtYW5pZmVzdCksXG4gICAgICAgIC4uLk9iamVjdC5rZXlzKGRlZmF1bHRWYWx1ZU1hcCksXG4gICAgICBdKTtcbiAgICAgIHJldHVybiBBcnJheS5mcm9tKGtleXMpO1xuICAgIH0sXG5cbiAgICBnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3I6ICh0YXJnZXQsIHByb3ApID0+IHtcbiAgICAgIGxldCBwcm9wRGVzY3JpcHRvciA9IFJlZmxlY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHRhcmdldCwgcHJvcCk7XG4gICAgICBpZiAoIXByb3BEZXNjcmlwdG9yKSB7XG4gICAgICAgIHByb3BEZXNjcmlwdG9yID0gKG1hbmlmZXN0ICYmXG4gICAgICAgICAgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihtYW5pZmVzdCwgcHJvcCkpID8/XG4gICAgICAgICAgKGRlZmF1bHRWYWx1ZU1hcCAmJlxuICAgICAgICAgICAgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihkZWZhdWx0VmFsdWVNYXAsIHByb3ApKSA/PyB7XG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgfTtcbiAgICAgICAgUmVmbGVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIHByb3AsIHByb3BEZXNjcmlwdG9yKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBwcm9wRGVzY3JpcHRvcjtcbiAgICB9LFxuICB9KTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldFByb3BlcnR5VmFsdWU8VD4ocHJvcFZhbHVlOiBhbnksIGRlZmF1bHRUbzogVCk6IFQge1xuICBpZiAocHJvcFZhbHVlKSB7XG4gICAgaWYgKHR5cGVvZiBkZWZhdWx0VG8gPT09IFwiYm9vbGVhblwiKSB7XG4gICAgICByZXR1cm4gcGFyc2VCb29sZWFuKHByb3BWYWx1ZSkgYXMgYW55O1xuICAgIH1cbiAgICBpZiAodHlwZW9mIGRlZmF1bHRUbyA9PT0gXCJudW1iZXJcIikge1xuICAgICAgcmV0dXJuIE51bWJlcihwcm9wVmFsdWUpIGFzIGFueTtcbiAgICB9XG4gICAgaWYgKGRlZmF1bHRUbyBpbnN0YW5jZW9mIERhdGUpIHtcbiAgICAgIHJldHVybiBuZXcgRGF0ZShwcm9wVmFsdWUpIGFzIGFueTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gcHJvcFZhbHVlID09PSB1bmRlZmluZWQgPyBkZWZhdWx0VG8gPz8gbnVsbCA6IHByb3BWYWx1ZTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHBhcnNlQm9vbGVhbihcbiAgdmFsOiBzdHJpbmcgfCBib29sZWFuIHwgdW5kZWZpbmVkIHwgbnVsbCxcbik6IGJvb2xlYW4ge1xuICByZXR1cm4gKDxhbnk+W3RydWUsIFwidHJ1ZVwiLCBcIjFcIl0pLmluY2x1ZGVzKHZhbCk7XG59XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIHBhcnNlU3RyaW5nVG9BcnJheShwYXJzZVN0cjogc3RyaW5nKTogc3RyaW5nW10ge1xuICBpZiAoIXBhcnNlU3RyKSB7XG4gICAgcmV0dXJuIFtdO1xuICB9XG5cbiAgaWYgKHBhcnNlU3RyLmluY2x1ZGVzKFwiLFwiKSkge1xuICAgIHJldHVybiBwYXJzZVN0ci5zcGxpdChcIixcIikubWFwKChzOiBzdHJpbmcpID0+IHMudHJpbSgpKTtcbiAgfVxuICBpZiAocGFyc2VTdHIuaW5jbHVkZXMoXCIgXCIpKSB7XG4gICAgcmV0dXJuIHBhcnNlU3RyLnNwbGl0KFwiIFwiKS5tYXAoKHM6IHN0cmluZykgPT4gcy50cmltKCkpO1xuICB9XG4gIGlmIChwYXJzZVN0ci5pbmNsdWRlcyhcIlxcblwiKSkge1xuICAgIHJldHVybiBwYXJzZVN0ci5zcGxpdChcIlxcblwiKS5tYXAoKHM6IHN0cmluZykgPT4gcy50cmltKCkpO1xuICB9XG5cbiAgcmV0dXJuIFtwYXJzZVN0ci50cmltKCldO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZG93bmxvYWRBdHRhY2hlZEZpbGUoZmlsZURhdGE6IHN0cmluZywgZmlsZTogRmlsZSk6IHZvaWQge1xuICBjb25zdCBidWZmZXIgPSBVaW50OEFycmF5LmZyb20oYXRvYihmaWxlRGF0YSksIChjKSA9PiBjLmNoYXJDb2RlQXQoMCkpO1xuICBjb25zdCBibG9iID0gbmV3IEJsb2IoW2J1ZmZlcl0sIHsgdHlwZTogZmlsZS5jb250ZW50X3R5cGUgfSk7XG4gIGNvbnN0IGJsb2JGaWxlID0gd2luZG93LlVSTC5jcmVhdGVPYmplY3RVUkwoYmxvYik7XG5cbiAgY29uc3QgYSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJhXCIpO1xuICBhLmhyZWYgPSBibG9iRmlsZTtcbiAgYS5kb3dubG9hZCA9IGZpbGUuZmlsZW5hbWUgPz8gZmlsZS5pZDtcbiAgYS50YXJnZXQgPSBcIl9ibGFua1wiO1xuICBhLmNsaWNrKCk7XG4gIGEucmVtb3ZlKCk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBhcnJheUNvbnRhaW5zQXJyYXkoc3VwZXJzZXQ6IGFueVtdLCBzdWJzZXQ6IGFueVtdKTogYm9vbGVhbiB7XG4gIHJldHVybiBzdWJzZXQuZXZlcnkoKHRhcmdldCkgPT4gc3VwZXJzZXQuaW5jbHVkZXModGFyZ2V0KSk7XG59XG4iLCI8c3ZlbHRlOm9wdGlvbnMgdGFnPVwibnlsYXMtZXJyb3JcIiBpbW11dGFibGU9e3RydWV9IC8+XG5cbjxzY3JpcHQgbGFuZz1cInRzXCI+XG4gIGltcG9ydCB7IEVycm9yU3RvcmUgfSBmcm9tIFwiLi4vc3RvcmUvZXJyb3JcIjtcbiAgaW1wb3J0IHR5cGUgeyBORXJyb3IgfSBmcm9tIFwiQGNvbW1vbnMvdHlwZXMvTnlsYXNcIjtcblxuICBleHBvcnQgbGV0IGlkOiBzdHJpbmc7IC8vIGNvbXBvbmVudCBpZFxuXG4gIGxldCBlcnJvcjogTkVycm9yO1xuICBsZXQgZXJyb3JOYW1lOiBzdHJpbmc7XG5cbiAgJDoge1xuICAgIGVycm9yID0gJEVycm9yU3RvcmVbaWRdID8/IHsgbmFtZTogXCJcIiB9O1xuICAgIGVycm9yTmFtZSA9IGVycm9yLm5hbWUgPz8gZXJyb3IubWVzc2FnZT8ubmFtZSA/PyBcIlwiO1xuICB9XG5cbiAgY29uc3QgaXNEZXZFbnYgPVxuICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmLmluY2x1ZGVzKFwibG9jYWxob3N0XCIpIHx8XG4gICAgd2luZG93LmxvY2F0aW9uLmhyZWYuaW5jbHVkZXMoXCIxMjcuMC4wLjFcIik7XG48L3NjcmlwdD5cblxuPHN0eWxlPlxuICAubWVzc2FnZS1jb250YWluZXIge1xuICAgIGJhY2tncm91bmQ6ICNmZmY2ZjY7XG4gICAgYm9yZGVyLXJhZGl1czogNXB4O1xuICAgIGJveC1zaGFkb3c6IDAgMCAwIDFweCAjYWE5MmEwIGluc2V0LCAwIDAgMCAwIHRyYW5zcGFyZW50O1xuICAgIGNvbG9yOiAjOWYzYTM4O1xuICAgIGZvbnQtc2l6ZTogMS4yNXJlbTtcbiAgICBwYWRkaW5nOiAxMHB4O1xuICAgIG1hcmdpbjogMCBhdXRvO1xuICAgIHRyYW5zaXRpb246IG9wYWNpdHkgNTAwbXMgZWFzZSwgY29sb3IgNTAwbXMgZWFzZSxcbiAgICAgIGJhY2tncm91bmQtY29sb3IgNTAwbXMgZWFzZSwgYm94LXNoYWRvdyA1MDBtcyBlYXNlLFxuICAgICAgLXdlYmtpdC1ib3gtc2hhZG93IDUwMG1zIGVhc2U7XG4gIH1cblxuICAubWVzc2FnZS1jb250YWluZXIgKjpmb2N1cyB7XG4gICAgb3V0bGluZTogNXB4IGF1dG8gSGlnaGxpZ2h0O1xuICAgIG91dGxpbmU6IDVweCBhdXRvIC13ZWJraXQtZm9jdXMtcmluZy1jb2xvcjtcbiAgfVxuXG4gIC5kZXRhaWxzIHtcbiAgICBjb2xvcjogIzQ5NDk0OTtcbiAgICBmb250LXNpemU6IDAuNzVyZW07XG4gICAgd2lkdGg6IDEwMCU7XG4gIH1cbjwvc3R5bGU+XG5cbnsjaWYgZXJyb3JOYW1lICYmIGlzRGV2RW52fVxuICA8ZGl2IGNsYXNzPVwibWVzc2FnZS1jb250YWluZXJcIj5cbiAgICB7I2lmIGVycm9yTmFtZSA9PT0gXCJIb3N0RG9tYWluTm90QWxsb3dlZEVycm9yXCJ9XG4gICAgICA8aDM+XG4gICAgICAgIFlvdSBhcmUgdHJ5aW5nIHRvIGFjY2VzcyB0aGlzIGNvbXBvbmVudCBmcm9tJm5ic3A7XG4gICAgICAgIDxjb2RlPnt3aW5kb3cubG9jYXRpb24uaG9zdG5hbWV9PC9jb2RlPi4gVGhlIGNvbXBvbmVudCdzIHNldHRpbmdzIGRvIG5vdFxuICAgICAgICBhbGxvdyBhY2Nlc3MgZnJvbSB0aGlzIGRvbWFpbi5cbiAgICAgIDwvaDM+XG4gICAgICA8aDQ+XG4gICAgICAgIFRoZSBsaXN0IG9mIGFsbG93ZWQgZG9tYWlucyBjYW4gYmUgbW9kaWZpZWQgaW4geW91ciZuYnNwO1xuICAgICAgICA8YSBocmVmPVwiaHR0cHM6Ly9kYXNoYm9hcmQubnlsYXMuY29tXCI+RGFzaGJvYXJkPC9hPi5cbiAgICAgIDwvaDQ+XG4gICAgezplbHNlIGlmIGVycm9yTmFtZSA9PT0gXCJJbmNvbXBhdGlibGVQcm9wZXJ0aWVzXCJ9XG4gICAgICA8aDM+WW91ciBjb21wb25lbnQgcHJvcGVydGllcyBkbyBub3Qgd29yayB3aXRoIGVhY2ggb3RoZXIuPC9oMz5cbiAgICB7L2lmfVxuICAgIDxzcGFuIGNsYXNzPVwiZGV0YWlsc1wiPkRlYnVnIGluZm86PC9zcGFuPlxuICAgIDx0ZXh0YXJlYSBjbGFzcz1cImRldGFpbHNcIiByZWFkb25seT5cbiAgICAgIHtlcnJvck5hbWV9OiB7aWR9XG4gICAgICB7ZXJyb3IubWVzc2FnZT8ubWVzc2FnZSA/PyBcIlwifVxuICAgIDwvdGV4dGFyZWE+XG4gIDwvZGl2Plxuey9pZn1cbiIsInZhciB0MCA9IG5ldyBEYXRlLFxuICAgIHQxID0gbmV3IERhdGU7XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIG5ld0ludGVydmFsKGZsb29yaSwgb2Zmc2V0aSwgY291bnQsIGZpZWxkKSB7XG5cbiAgZnVuY3Rpb24gaW50ZXJ2YWwoZGF0ZSkge1xuICAgIHJldHVybiBmbG9vcmkoZGF0ZSA9IGFyZ3VtZW50cy5sZW5ndGggPT09IDAgPyBuZXcgRGF0ZSA6IG5ldyBEYXRlKCtkYXRlKSksIGRhdGU7XG4gIH1cblxuICBpbnRlcnZhbC5mbG9vciA9IGZ1bmN0aW9uKGRhdGUpIHtcbiAgICByZXR1cm4gZmxvb3JpKGRhdGUgPSBuZXcgRGF0ZSgrZGF0ZSkpLCBkYXRlO1xuICB9O1xuXG4gIGludGVydmFsLmNlaWwgPSBmdW5jdGlvbihkYXRlKSB7XG4gICAgcmV0dXJuIGZsb29yaShkYXRlID0gbmV3IERhdGUoZGF0ZSAtIDEpKSwgb2Zmc2V0aShkYXRlLCAxKSwgZmxvb3JpKGRhdGUpLCBkYXRlO1xuICB9O1xuXG4gIGludGVydmFsLnJvdW5kID0gZnVuY3Rpb24oZGF0ZSkge1xuICAgIHZhciBkMCA9IGludGVydmFsKGRhdGUpLFxuICAgICAgICBkMSA9IGludGVydmFsLmNlaWwoZGF0ZSk7XG4gICAgcmV0dXJuIGRhdGUgLSBkMCA8IGQxIC0gZGF0ZSA/IGQwIDogZDE7XG4gIH07XG5cbiAgaW50ZXJ2YWwub2Zmc2V0ID0gZnVuY3Rpb24oZGF0ZSwgc3RlcCkge1xuICAgIHJldHVybiBvZmZzZXRpKGRhdGUgPSBuZXcgRGF0ZSgrZGF0ZSksIHN0ZXAgPT0gbnVsbCA/IDEgOiBNYXRoLmZsb29yKHN0ZXApKSwgZGF0ZTtcbiAgfTtcblxuICBpbnRlcnZhbC5yYW5nZSA9IGZ1bmN0aW9uKHN0YXJ0LCBzdG9wLCBzdGVwKSB7XG4gICAgdmFyIHJhbmdlID0gW10sIHByZXZpb3VzO1xuICAgIHN0YXJ0ID0gaW50ZXJ2YWwuY2VpbChzdGFydCk7XG4gICAgc3RlcCA9IHN0ZXAgPT0gbnVsbCA/IDEgOiBNYXRoLmZsb29yKHN0ZXApO1xuICAgIGlmICghKHN0YXJ0IDwgc3RvcCkgfHwgIShzdGVwID4gMCkpIHJldHVybiByYW5nZTsgLy8gYWxzbyBoYW5kbGVzIEludmFsaWQgRGF0ZVxuICAgIGRvIHJhbmdlLnB1c2gocHJldmlvdXMgPSBuZXcgRGF0ZSgrc3RhcnQpKSwgb2Zmc2V0aShzdGFydCwgc3RlcCksIGZsb29yaShzdGFydCk7XG4gICAgd2hpbGUgKHByZXZpb3VzIDwgc3RhcnQgJiYgc3RhcnQgPCBzdG9wKTtcbiAgICByZXR1cm4gcmFuZ2U7XG4gIH07XG5cbiAgaW50ZXJ2YWwuZmlsdGVyID0gZnVuY3Rpb24odGVzdCkge1xuICAgIHJldHVybiBuZXdJbnRlcnZhbChmdW5jdGlvbihkYXRlKSB7XG4gICAgICBpZiAoZGF0ZSA+PSBkYXRlKSB3aGlsZSAoZmxvb3JpKGRhdGUpLCAhdGVzdChkYXRlKSkgZGF0ZS5zZXRUaW1lKGRhdGUgLSAxKTtcbiAgICB9LCBmdW5jdGlvbihkYXRlLCBzdGVwKSB7XG4gICAgICBpZiAoZGF0ZSA+PSBkYXRlKSB7XG4gICAgICAgIGlmIChzdGVwIDwgMCkgd2hpbGUgKCsrc3RlcCA8PSAwKSB7XG4gICAgICAgICAgd2hpbGUgKG9mZnNldGkoZGF0ZSwgLTEpLCAhdGVzdChkYXRlKSkge30gLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby1lbXB0eVxuICAgICAgICB9IGVsc2Ugd2hpbGUgKC0tc3RlcCA+PSAwKSB7XG4gICAgICAgICAgd2hpbGUgKG9mZnNldGkoZGF0ZSwgKzEpLCAhdGVzdChkYXRlKSkge30gLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby1lbXB0eVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSk7XG4gIH07XG5cbiAgaWYgKGNvdW50KSB7XG4gICAgaW50ZXJ2YWwuY291bnQgPSBmdW5jdGlvbihzdGFydCwgZW5kKSB7XG4gICAgICB0MC5zZXRUaW1lKCtzdGFydCksIHQxLnNldFRpbWUoK2VuZCk7XG4gICAgICBmbG9vcmkodDApLCBmbG9vcmkodDEpO1xuICAgICAgcmV0dXJuIE1hdGguZmxvb3IoY291bnQodDAsIHQxKSk7XG4gICAgfTtcblxuICAgIGludGVydmFsLmV2ZXJ5ID0gZnVuY3Rpb24oc3RlcCkge1xuICAgICAgc3RlcCA9IE1hdGguZmxvb3Ioc3RlcCk7XG4gICAgICByZXR1cm4gIWlzRmluaXRlKHN0ZXApIHx8ICEoc3RlcCA+IDApID8gbnVsbFxuICAgICAgICAgIDogIShzdGVwID4gMSkgPyBpbnRlcnZhbFxuICAgICAgICAgIDogaW50ZXJ2YWwuZmlsdGVyKGZpZWxkXG4gICAgICAgICAgICAgID8gZnVuY3Rpb24oZCkgeyByZXR1cm4gZmllbGQoZCkgJSBzdGVwID09PSAwOyB9XG4gICAgICAgICAgICAgIDogZnVuY3Rpb24oZCkgeyByZXR1cm4gaW50ZXJ2YWwuY291bnQoMCwgZCkgJSBzdGVwID09PSAwOyB9KTtcbiAgICB9O1xuICB9XG5cbiAgcmV0dXJuIGludGVydmFsO1xufVxuIiwiaW1wb3J0IGludGVydmFsIGZyb20gXCIuL2ludGVydmFsLmpzXCI7XG5cbnZhciBtaWxsaXNlY29uZCA9IGludGVydmFsKGZ1bmN0aW9uKCkge1xuICAvLyBub29wXG59LCBmdW5jdGlvbihkYXRlLCBzdGVwKSB7XG4gIGRhdGUuc2V0VGltZSgrZGF0ZSArIHN0ZXApO1xufSwgZnVuY3Rpb24oc3RhcnQsIGVuZCkge1xuICByZXR1cm4gZW5kIC0gc3RhcnQ7XG59KTtcblxuLy8gQW4gb3B0aW1pemVkIGltcGxlbWVudGF0aW9uIGZvciB0aGlzIHNpbXBsZSBjYXNlLlxubWlsbGlzZWNvbmQuZXZlcnkgPSBmdW5jdGlvbihrKSB7XG4gIGsgPSBNYXRoLmZsb29yKGspO1xuICBpZiAoIWlzRmluaXRlKGspIHx8ICEoayA+IDApKSByZXR1cm4gbnVsbDtcbiAgaWYgKCEoayA+IDEpKSByZXR1cm4gbWlsbGlzZWNvbmQ7XG4gIHJldHVybiBpbnRlcnZhbChmdW5jdGlvbihkYXRlKSB7XG4gICAgZGF0ZS5zZXRUaW1lKE1hdGguZmxvb3IoZGF0ZSAvIGspICogayk7XG4gIH0sIGZ1bmN0aW9uKGRhdGUsIHN0ZXApIHtcbiAgICBkYXRlLnNldFRpbWUoK2RhdGUgKyBzdGVwICogayk7XG4gIH0sIGZ1bmN0aW9uKHN0YXJ0LCBlbmQpIHtcbiAgICByZXR1cm4gKGVuZCAtIHN0YXJ0KSAvIGs7XG4gIH0pO1xufTtcblxuZXhwb3J0IGRlZmF1bHQgbWlsbGlzZWNvbmQ7XG5leHBvcnQgdmFyIG1pbGxpc2Vjb25kcyA9IG1pbGxpc2Vjb25kLnJhbmdlO1xuIiwiZXhwb3J0IGNvbnN0IGR1cmF0aW9uU2Vjb25kID0gMTAwMDtcbmV4cG9ydCBjb25zdCBkdXJhdGlvbk1pbnV0ZSA9IGR1cmF0aW9uU2Vjb25kICogNjA7XG5leHBvcnQgY29uc3QgZHVyYXRpb25Ib3VyID0gZHVyYXRpb25NaW51dGUgKiA2MDtcbmV4cG9ydCBjb25zdCBkdXJhdGlvbkRheSA9IGR1cmF0aW9uSG91ciAqIDI0O1xuZXhwb3J0IGNvbnN0IGR1cmF0aW9uV2VlayA9IGR1cmF0aW9uRGF5ICogNztcbmV4cG9ydCBjb25zdCBkdXJhdGlvbk1vbnRoID0gZHVyYXRpb25EYXkgKiAzMDtcbmV4cG9ydCBjb25zdCBkdXJhdGlvblllYXIgPSBkdXJhdGlvbkRheSAqIDM2NTtcbiIsImltcG9ydCBpbnRlcnZhbCBmcm9tIFwiLi9pbnRlcnZhbC5qc1wiO1xuaW1wb3J0IHtkdXJhdGlvblNlY29uZH0gZnJvbSBcIi4vZHVyYXRpb24uanNcIjtcblxudmFyIHNlY29uZCA9IGludGVydmFsKGZ1bmN0aW9uKGRhdGUpIHtcbiAgZGF0ZS5zZXRUaW1lKGRhdGUgLSBkYXRlLmdldE1pbGxpc2Vjb25kcygpKTtcbn0sIGZ1bmN0aW9uKGRhdGUsIHN0ZXApIHtcbiAgZGF0ZS5zZXRUaW1lKCtkYXRlICsgc3RlcCAqIGR1cmF0aW9uU2Vjb25kKTtcbn0sIGZ1bmN0aW9uKHN0YXJ0LCBlbmQpIHtcbiAgcmV0dXJuIChlbmQgLSBzdGFydCkgLyBkdXJhdGlvblNlY29uZDtcbn0sIGZ1bmN0aW9uKGRhdGUpIHtcbiAgcmV0dXJuIGRhdGUuZ2V0VVRDU2Vjb25kcygpO1xufSk7XG5cbmV4cG9ydCBkZWZhdWx0IHNlY29uZDtcbmV4cG9ydCB2YXIgc2Vjb25kcyA9IHNlY29uZC5yYW5nZTtcbiIsImltcG9ydCBpbnRlcnZhbCBmcm9tIFwiLi9pbnRlcnZhbC5qc1wiO1xuaW1wb3J0IHtkdXJhdGlvbk1pbnV0ZSwgZHVyYXRpb25TZWNvbmR9IGZyb20gXCIuL2R1cmF0aW9uLmpzXCI7XG5cbnZhciBtaW51dGUgPSBpbnRlcnZhbChmdW5jdGlvbihkYXRlKSB7XG4gIGRhdGUuc2V0VGltZShkYXRlIC0gZGF0ZS5nZXRNaWxsaXNlY29uZHMoKSAtIGRhdGUuZ2V0U2Vjb25kcygpICogZHVyYXRpb25TZWNvbmQpO1xufSwgZnVuY3Rpb24oZGF0ZSwgc3RlcCkge1xuICBkYXRlLnNldFRpbWUoK2RhdGUgKyBzdGVwICogZHVyYXRpb25NaW51dGUpO1xufSwgZnVuY3Rpb24oc3RhcnQsIGVuZCkge1xuICByZXR1cm4gKGVuZCAtIHN0YXJ0KSAvIGR1cmF0aW9uTWludXRlO1xufSwgZnVuY3Rpb24oZGF0ZSkge1xuICByZXR1cm4gZGF0ZS5nZXRNaW51dGVzKCk7XG59KTtcblxuZXhwb3J0IGRlZmF1bHQgbWludXRlO1xuZXhwb3J0IHZhciBtaW51dGVzID0gbWludXRlLnJhbmdlO1xuIiwiaW1wb3J0IGludGVydmFsIGZyb20gXCIuL2ludGVydmFsLmpzXCI7XG5pbXBvcnQge2R1cmF0aW9uSG91ciwgZHVyYXRpb25NaW51dGUsIGR1cmF0aW9uU2Vjb25kfSBmcm9tIFwiLi9kdXJhdGlvbi5qc1wiO1xuXG52YXIgaG91ciA9IGludGVydmFsKGZ1bmN0aW9uKGRhdGUpIHtcbiAgZGF0ZS5zZXRUaW1lKGRhdGUgLSBkYXRlLmdldE1pbGxpc2Vjb25kcygpIC0gZGF0ZS5nZXRTZWNvbmRzKCkgKiBkdXJhdGlvblNlY29uZCAtIGRhdGUuZ2V0TWludXRlcygpICogZHVyYXRpb25NaW51dGUpO1xufSwgZnVuY3Rpb24oZGF0ZSwgc3RlcCkge1xuICBkYXRlLnNldFRpbWUoK2RhdGUgKyBzdGVwICogZHVyYXRpb25Ib3VyKTtcbn0sIGZ1bmN0aW9uKHN0YXJ0LCBlbmQpIHtcbiAgcmV0dXJuIChlbmQgLSBzdGFydCkgLyBkdXJhdGlvbkhvdXI7XG59LCBmdW5jdGlvbihkYXRlKSB7XG4gIHJldHVybiBkYXRlLmdldEhvdXJzKCk7XG59KTtcblxuZXhwb3J0IGRlZmF1bHQgaG91cjtcbmV4cG9ydCB2YXIgaG91cnMgPSBob3VyLnJhbmdlO1xuIiwiaW1wb3J0IGludGVydmFsIGZyb20gXCIuL2ludGVydmFsLmpzXCI7XG5pbXBvcnQge2R1cmF0aW9uRGF5LCBkdXJhdGlvbk1pbnV0ZX0gZnJvbSBcIi4vZHVyYXRpb24uanNcIjtcblxudmFyIGRheSA9IGludGVydmFsKFxuICBkYXRlID0+IGRhdGUuc2V0SG91cnMoMCwgMCwgMCwgMCksXG4gIChkYXRlLCBzdGVwKSA9PiBkYXRlLnNldERhdGUoZGF0ZS5nZXREYXRlKCkgKyBzdGVwKSxcbiAgKHN0YXJ0LCBlbmQpID0+IChlbmQgLSBzdGFydCAtIChlbmQuZ2V0VGltZXpvbmVPZmZzZXQoKSAtIHN0YXJ0LmdldFRpbWV6b25lT2Zmc2V0KCkpICogZHVyYXRpb25NaW51dGUpIC8gZHVyYXRpb25EYXksXG4gIGRhdGUgPT4gZGF0ZS5nZXREYXRlKCkgLSAxXG4pO1xuXG5leHBvcnQgZGVmYXVsdCBkYXk7XG5leHBvcnQgdmFyIGRheXMgPSBkYXkucmFuZ2U7XG4iLCJpbXBvcnQgaW50ZXJ2YWwgZnJvbSBcIi4vaW50ZXJ2YWwuanNcIjtcbmltcG9ydCB7ZHVyYXRpb25NaW51dGUsIGR1cmF0aW9uV2Vla30gZnJvbSBcIi4vZHVyYXRpb24uanNcIjtcblxuZnVuY3Rpb24gd2Vla2RheShpKSB7XG4gIHJldHVybiBpbnRlcnZhbChmdW5jdGlvbihkYXRlKSB7XG4gICAgZGF0ZS5zZXREYXRlKGRhdGUuZ2V0RGF0ZSgpIC0gKGRhdGUuZ2V0RGF5KCkgKyA3IC0gaSkgJSA3KTtcbiAgICBkYXRlLnNldEhvdXJzKDAsIDAsIDAsIDApO1xuICB9LCBmdW5jdGlvbihkYXRlLCBzdGVwKSB7XG4gICAgZGF0ZS5zZXREYXRlKGRhdGUuZ2V0RGF0ZSgpICsgc3RlcCAqIDcpO1xuICB9LCBmdW5jdGlvbihzdGFydCwgZW5kKSB7XG4gICAgcmV0dXJuIChlbmQgLSBzdGFydCAtIChlbmQuZ2V0VGltZXpvbmVPZmZzZXQoKSAtIHN0YXJ0LmdldFRpbWV6b25lT2Zmc2V0KCkpICogZHVyYXRpb25NaW51dGUpIC8gZHVyYXRpb25XZWVrO1xuICB9KTtcbn1cblxuZXhwb3J0IHZhciBzdW5kYXkgPSB3ZWVrZGF5KDApO1xuZXhwb3J0IHZhciBtb25kYXkgPSB3ZWVrZGF5KDEpO1xuZXhwb3J0IHZhciB0dWVzZGF5ID0gd2Vla2RheSgyKTtcbmV4cG9ydCB2YXIgd2VkbmVzZGF5ID0gd2Vla2RheSgzKTtcbmV4cG9ydCB2YXIgdGh1cnNkYXkgPSB3ZWVrZGF5KDQpO1xuZXhwb3J0IHZhciBmcmlkYXkgPSB3ZWVrZGF5KDUpO1xuZXhwb3J0IHZhciBzYXR1cmRheSA9IHdlZWtkYXkoNik7XG5cbmV4cG9ydCB2YXIgc3VuZGF5cyA9IHN1bmRheS5yYW5nZTtcbmV4cG9ydCB2YXIgbW9uZGF5cyA9IG1vbmRheS5yYW5nZTtcbmV4cG9ydCB2YXIgdHVlc2RheXMgPSB0dWVzZGF5LnJhbmdlO1xuZXhwb3J0IHZhciB3ZWRuZXNkYXlzID0gd2VkbmVzZGF5LnJhbmdlO1xuZXhwb3J0IHZhciB0aHVyc2RheXMgPSB0aHVyc2RheS5yYW5nZTtcbmV4cG9ydCB2YXIgZnJpZGF5cyA9IGZyaWRheS5yYW5nZTtcbmV4cG9ydCB2YXIgc2F0dXJkYXlzID0gc2F0dXJkYXkucmFuZ2U7XG4iLCJpbXBvcnQgaW50ZXJ2YWwgZnJvbSBcIi4vaW50ZXJ2YWwuanNcIjtcblxudmFyIG1vbnRoID0gaW50ZXJ2YWwoZnVuY3Rpb24oZGF0ZSkge1xuICBkYXRlLnNldERhdGUoMSk7XG4gIGRhdGUuc2V0SG91cnMoMCwgMCwgMCwgMCk7XG59LCBmdW5jdGlvbihkYXRlLCBzdGVwKSB7XG4gIGRhdGUuc2V0TW9udGgoZGF0ZS5nZXRNb250aCgpICsgc3RlcCk7XG59LCBmdW5jdGlvbihzdGFydCwgZW5kKSB7XG4gIHJldHVybiBlbmQuZ2V0TW9udGgoKSAtIHN0YXJ0LmdldE1vbnRoKCkgKyAoZW5kLmdldEZ1bGxZZWFyKCkgLSBzdGFydC5nZXRGdWxsWWVhcigpKSAqIDEyO1xufSwgZnVuY3Rpb24oZGF0ZSkge1xuICByZXR1cm4gZGF0ZS5nZXRNb250aCgpO1xufSk7XG5cbmV4cG9ydCBkZWZhdWx0IG1vbnRoO1xuZXhwb3J0IHZhciBtb250aHMgPSBtb250aC5yYW5nZTtcbiIsImltcG9ydCBpbnRlcnZhbCBmcm9tIFwiLi9pbnRlcnZhbC5qc1wiO1xuXG52YXIgeWVhciA9IGludGVydmFsKGZ1bmN0aW9uKGRhdGUpIHtcbiAgZGF0ZS5zZXRNb250aCgwLCAxKTtcbiAgZGF0ZS5zZXRIb3VycygwLCAwLCAwLCAwKTtcbn0sIGZ1bmN0aW9uKGRhdGUsIHN0ZXApIHtcbiAgZGF0ZS5zZXRGdWxsWWVhcihkYXRlLmdldEZ1bGxZZWFyKCkgKyBzdGVwKTtcbn0sIGZ1bmN0aW9uKHN0YXJ0LCBlbmQpIHtcbiAgcmV0dXJuIGVuZC5nZXRGdWxsWWVhcigpIC0gc3RhcnQuZ2V0RnVsbFllYXIoKTtcbn0sIGZ1bmN0aW9uKGRhdGUpIHtcbiAgcmV0dXJuIGRhdGUuZ2V0RnVsbFllYXIoKTtcbn0pO1xuXG4vLyBBbiBvcHRpbWl6ZWQgaW1wbGVtZW50YXRpb24gZm9yIHRoaXMgc2ltcGxlIGNhc2UuXG55ZWFyLmV2ZXJ5ID0gZnVuY3Rpb24oaykge1xuICByZXR1cm4gIWlzRmluaXRlKGsgPSBNYXRoLmZsb29yKGspKSB8fCAhKGsgPiAwKSA/IG51bGwgOiBpbnRlcnZhbChmdW5jdGlvbihkYXRlKSB7XG4gICAgZGF0ZS5zZXRGdWxsWWVhcihNYXRoLmZsb29yKGRhdGUuZ2V0RnVsbFllYXIoKSAvIGspICogayk7XG4gICAgZGF0ZS5zZXRNb250aCgwLCAxKTtcbiAgICBkYXRlLnNldEhvdXJzKDAsIDAsIDAsIDApO1xuICB9LCBmdW5jdGlvbihkYXRlLCBzdGVwKSB7XG4gICAgZGF0ZS5zZXRGdWxsWWVhcihkYXRlLmdldEZ1bGxZZWFyKCkgKyBzdGVwICogayk7XG4gIH0pO1xufTtcblxuZXhwb3J0IGRlZmF1bHQgeWVhcjtcbmV4cG9ydCB2YXIgeWVhcnMgPSB5ZWFyLnJhbmdlO1xuIiwiaW1wb3J0IGludGVydmFsIGZyb20gXCIuL2ludGVydmFsLmpzXCI7XG5pbXBvcnQge2R1cmF0aW9uRGF5fSBmcm9tIFwiLi9kdXJhdGlvbi5qc1wiO1xuXG52YXIgdXRjRGF5ID0gaW50ZXJ2YWwoZnVuY3Rpb24oZGF0ZSkge1xuICBkYXRlLnNldFVUQ0hvdXJzKDAsIDAsIDAsIDApO1xufSwgZnVuY3Rpb24oZGF0ZSwgc3RlcCkge1xuICBkYXRlLnNldFVUQ0RhdGUoZGF0ZS5nZXRVVENEYXRlKCkgKyBzdGVwKTtcbn0sIGZ1bmN0aW9uKHN0YXJ0LCBlbmQpIHtcbiAgcmV0dXJuIChlbmQgLSBzdGFydCkgLyBkdXJhdGlvbkRheTtcbn0sIGZ1bmN0aW9uKGRhdGUpIHtcbiAgcmV0dXJuIGRhdGUuZ2V0VVRDRGF0ZSgpIC0gMTtcbn0pO1xuXG5leHBvcnQgZGVmYXVsdCB1dGNEYXk7XG5leHBvcnQgdmFyIHV0Y0RheXMgPSB1dGNEYXkucmFuZ2U7XG4iLCJpbXBvcnQgaW50ZXJ2YWwgZnJvbSBcIi4vaW50ZXJ2YWwuanNcIjtcbmltcG9ydCB7ZHVyYXRpb25XZWVrfSBmcm9tIFwiLi9kdXJhdGlvbi5qc1wiO1xuXG5mdW5jdGlvbiB1dGNXZWVrZGF5KGkpIHtcbiAgcmV0dXJuIGludGVydmFsKGZ1bmN0aW9uKGRhdGUpIHtcbiAgICBkYXRlLnNldFVUQ0RhdGUoZGF0ZS5nZXRVVENEYXRlKCkgLSAoZGF0ZS5nZXRVVENEYXkoKSArIDcgLSBpKSAlIDcpO1xuICAgIGRhdGUuc2V0VVRDSG91cnMoMCwgMCwgMCwgMCk7XG4gIH0sIGZ1bmN0aW9uKGRhdGUsIHN0ZXApIHtcbiAgICBkYXRlLnNldFVUQ0RhdGUoZGF0ZS5nZXRVVENEYXRlKCkgKyBzdGVwICogNyk7XG4gIH0sIGZ1bmN0aW9uKHN0YXJ0LCBlbmQpIHtcbiAgICByZXR1cm4gKGVuZCAtIHN0YXJ0KSAvIGR1cmF0aW9uV2VlaztcbiAgfSk7XG59XG5cbmV4cG9ydCB2YXIgdXRjU3VuZGF5ID0gdXRjV2Vla2RheSgwKTtcbmV4cG9ydCB2YXIgdXRjTW9uZGF5ID0gdXRjV2Vla2RheSgxKTtcbmV4cG9ydCB2YXIgdXRjVHVlc2RheSA9IHV0Y1dlZWtkYXkoMik7XG5leHBvcnQgdmFyIHV0Y1dlZG5lc2RheSA9IHV0Y1dlZWtkYXkoMyk7XG5leHBvcnQgdmFyIHV0Y1RodXJzZGF5ID0gdXRjV2Vla2RheSg0KTtcbmV4cG9ydCB2YXIgdXRjRnJpZGF5ID0gdXRjV2Vla2RheSg1KTtcbmV4cG9ydCB2YXIgdXRjU2F0dXJkYXkgPSB1dGNXZWVrZGF5KDYpO1xuXG5leHBvcnQgdmFyIHV0Y1N1bmRheXMgPSB1dGNTdW5kYXkucmFuZ2U7XG5leHBvcnQgdmFyIHV0Y01vbmRheXMgPSB1dGNNb25kYXkucmFuZ2U7XG5leHBvcnQgdmFyIHV0Y1R1ZXNkYXlzID0gdXRjVHVlc2RheS5yYW5nZTtcbmV4cG9ydCB2YXIgdXRjV2VkbmVzZGF5cyA9IHV0Y1dlZG5lc2RheS5yYW5nZTtcbmV4cG9ydCB2YXIgdXRjVGh1cnNkYXlzID0gdXRjVGh1cnNkYXkucmFuZ2U7XG5leHBvcnQgdmFyIHV0Y0ZyaWRheXMgPSB1dGNGcmlkYXkucmFuZ2U7XG5leHBvcnQgdmFyIHV0Y1NhdHVyZGF5cyA9IHV0Y1NhdHVyZGF5LnJhbmdlO1xuIiwiaW1wb3J0IGludGVydmFsIGZyb20gXCIuL2ludGVydmFsLmpzXCI7XG5cbnZhciB1dGNZZWFyID0gaW50ZXJ2YWwoZnVuY3Rpb24oZGF0ZSkge1xuICBkYXRlLnNldFVUQ01vbnRoKDAsIDEpO1xuICBkYXRlLnNldFVUQ0hvdXJzKDAsIDAsIDAsIDApO1xufSwgZnVuY3Rpb24oZGF0ZSwgc3RlcCkge1xuICBkYXRlLnNldFVUQ0Z1bGxZZWFyKGRhdGUuZ2V0VVRDRnVsbFllYXIoKSArIHN0ZXApO1xufSwgZnVuY3Rpb24oc3RhcnQsIGVuZCkge1xuICByZXR1cm4gZW5kLmdldFVUQ0Z1bGxZZWFyKCkgLSBzdGFydC5nZXRVVENGdWxsWWVhcigpO1xufSwgZnVuY3Rpb24oZGF0ZSkge1xuICByZXR1cm4gZGF0ZS5nZXRVVENGdWxsWWVhcigpO1xufSk7XG5cbi8vIEFuIG9wdGltaXplZCBpbXBsZW1lbnRhdGlvbiBmb3IgdGhpcyBzaW1wbGUgY2FzZS5cbnV0Y1llYXIuZXZlcnkgPSBmdW5jdGlvbihrKSB7XG4gIHJldHVybiAhaXNGaW5pdGUoayA9IE1hdGguZmxvb3IoaykpIHx8ICEoayA+IDApID8gbnVsbCA6IGludGVydmFsKGZ1bmN0aW9uKGRhdGUpIHtcbiAgICBkYXRlLnNldFVUQ0Z1bGxZZWFyKE1hdGguZmxvb3IoZGF0ZS5nZXRVVENGdWxsWWVhcigpIC8gaykgKiBrKTtcbiAgICBkYXRlLnNldFVUQ01vbnRoKDAsIDEpO1xuICAgIGRhdGUuc2V0VVRDSG91cnMoMCwgMCwgMCwgMCk7XG4gIH0sIGZ1bmN0aW9uKGRhdGUsIHN0ZXApIHtcbiAgICBkYXRlLnNldFVUQ0Z1bGxZZWFyKGRhdGUuZ2V0VVRDRnVsbFllYXIoKSArIHN0ZXAgKiBrKTtcbiAgfSk7XG59O1xuXG5leHBvcnQgZGVmYXVsdCB1dGNZZWFyO1xuZXhwb3J0IHZhciB1dGNZZWFycyA9IHV0Y1llYXIucmFuZ2U7XG4iLCJleHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBhc2NlbmRpbmcoYSwgYikge1xuICByZXR1cm4gYSA9PSBudWxsIHx8IGIgPT0gbnVsbCA/IE5hTiA6IGEgPCBiID8gLTEgOiBhID4gYiA/IDEgOiBhID49IGIgPyAwIDogTmFOO1xufVxuIiwiaW1wb3J0IGFzY2VuZGluZyBmcm9tIFwiLi9hc2NlbmRpbmcuanNcIjtcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gYmlzZWN0b3IoZikge1xuICBsZXQgZGVsdGEgPSBmO1xuICBsZXQgY29tcGFyZTEgPSBmO1xuICBsZXQgY29tcGFyZTIgPSBmO1xuXG4gIGlmIChmLmxlbmd0aCAhPT0gMikge1xuICAgIGRlbHRhID0gKGQsIHgpID0+IGYoZCkgLSB4O1xuICAgIGNvbXBhcmUxID0gYXNjZW5kaW5nO1xuICAgIGNvbXBhcmUyID0gKGQsIHgpID0+IGFzY2VuZGluZyhmKGQpLCB4KTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGxlZnQoYSwgeCwgbG8gPSAwLCBoaSA9IGEubGVuZ3RoKSB7XG4gICAgaWYgKGxvIDwgaGkpIHtcbiAgICAgIGlmIChjb21wYXJlMSh4LCB4KSAhPT0gMCkgcmV0dXJuIGhpO1xuICAgICAgZG8ge1xuICAgICAgICBjb25zdCBtaWQgPSAobG8gKyBoaSkgPj4+IDE7XG4gICAgICAgIGlmIChjb21wYXJlMihhW21pZF0sIHgpIDwgMCkgbG8gPSBtaWQgKyAxO1xuICAgICAgICBlbHNlIGhpID0gbWlkO1xuICAgICAgfSB3aGlsZSAobG8gPCBoaSk7XG4gICAgfVxuICAgIHJldHVybiBsbztcbiAgfVxuXG4gIGZ1bmN0aW9uIHJpZ2h0KGEsIHgsIGxvID0gMCwgaGkgPSBhLmxlbmd0aCkge1xuICAgIGlmIChsbyA8IGhpKSB7XG4gICAgICBpZiAoY29tcGFyZTEoeCwgeCkgIT09IDApIHJldHVybiBoaTtcbiAgICAgIGRvIHtcbiAgICAgICAgY29uc3QgbWlkID0gKGxvICsgaGkpID4+PiAxO1xuICAgICAgICBpZiAoY29tcGFyZTIoYVttaWRdLCB4KSA8PSAwKSBsbyA9IG1pZCArIDE7XG4gICAgICAgIGVsc2UgaGkgPSBtaWQ7XG4gICAgICB9IHdoaWxlIChsbyA8IGhpKTtcbiAgICB9XG4gICAgcmV0dXJuIGxvO1xuICB9XG5cbiAgZnVuY3Rpb24gY2VudGVyKGEsIHgsIGxvID0gMCwgaGkgPSBhLmxlbmd0aCkge1xuICAgIGNvbnN0IGkgPSBsZWZ0KGEsIHgsIGxvLCBoaSAtIDEpO1xuICAgIHJldHVybiBpID4gbG8gJiYgZGVsdGEoYVtpIC0gMV0sIHgpID4gLWRlbHRhKGFbaV0sIHgpID8gaSAtIDEgOiBpO1xuICB9XG5cbiAgcmV0dXJuIHtsZWZ0LCBjZW50ZXIsIHJpZ2h0fTtcbn1cbiIsImV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIG51bWJlcih4KSB7XG4gIHJldHVybiB4ID09PSBudWxsID8gTmFOIDogK3g7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiogbnVtYmVycyh2YWx1ZXMsIHZhbHVlb2YpIHtcbiAgaWYgKHZhbHVlb2YgPT09IHVuZGVmaW5lZCkge1xuICAgIGZvciAobGV0IHZhbHVlIG9mIHZhbHVlcykge1xuICAgICAgaWYgKHZhbHVlICE9IG51bGwgJiYgKHZhbHVlID0gK3ZhbHVlKSA+PSB2YWx1ZSkge1xuICAgICAgICB5aWVsZCB2YWx1ZTtcbiAgICAgIH1cbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgbGV0IGluZGV4ID0gLTE7XG4gICAgZm9yIChsZXQgdmFsdWUgb2YgdmFsdWVzKSB7XG4gICAgICBpZiAoKHZhbHVlID0gdmFsdWVvZih2YWx1ZSwgKytpbmRleCwgdmFsdWVzKSkgIT0gbnVsbCAmJiAodmFsdWUgPSArdmFsdWUpID49IHZhbHVlKSB7XG4gICAgICAgIHlpZWxkIHZhbHVlO1xuICAgICAgfVxuICAgIH1cbiAgfVxufVxuIiwiaW1wb3J0IGFzY2VuZGluZyBmcm9tIFwiLi9hc2NlbmRpbmcuanNcIjtcbmltcG9ydCBiaXNlY3RvciBmcm9tIFwiLi9iaXNlY3Rvci5qc1wiO1xuaW1wb3J0IG51bWJlciBmcm9tIFwiLi9udW1iZXIuanNcIjtcblxuY29uc3QgYXNjZW5kaW5nQmlzZWN0ID0gYmlzZWN0b3IoYXNjZW5kaW5nKTtcbmV4cG9ydCBjb25zdCBiaXNlY3RSaWdodCA9IGFzY2VuZGluZ0Jpc2VjdC5yaWdodDtcbmV4cG9ydCBjb25zdCBiaXNlY3RMZWZ0ID0gYXNjZW5kaW5nQmlzZWN0LmxlZnQ7XG5leHBvcnQgY29uc3QgYmlzZWN0Q2VudGVyID0gYmlzZWN0b3IobnVtYmVyKS5jZW50ZXI7XG5leHBvcnQgZGVmYXVsdCBiaXNlY3RSaWdodDtcbiIsInZhciBlMTAgPSBNYXRoLnNxcnQoNTApLFxuICAgIGU1ID0gTWF0aC5zcXJ0KDEwKSxcbiAgICBlMiA9IE1hdGguc3FydCgyKTtcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gdGlja3Moc3RhcnQsIHN0b3AsIGNvdW50KSB7XG4gIHZhciByZXZlcnNlLFxuICAgICAgaSA9IC0xLFxuICAgICAgbixcbiAgICAgIHRpY2tzLFxuICAgICAgc3RlcDtcblxuICBzdG9wID0gK3N0b3AsIHN0YXJ0ID0gK3N0YXJ0LCBjb3VudCA9ICtjb3VudDtcbiAgaWYgKHN0YXJ0ID09PSBzdG9wICYmIGNvdW50ID4gMCkgcmV0dXJuIFtzdGFydF07XG4gIGlmIChyZXZlcnNlID0gc3RvcCA8IHN0YXJ0KSBuID0gc3RhcnQsIHN0YXJ0ID0gc3RvcCwgc3RvcCA9IG47XG4gIGlmICgoc3RlcCA9IHRpY2tJbmNyZW1lbnQoc3RhcnQsIHN0b3AsIGNvdW50KSkgPT09IDAgfHwgIWlzRmluaXRlKHN0ZXApKSByZXR1cm4gW107XG5cbiAgaWYgKHN0ZXAgPiAwKSB7XG4gICAgbGV0IHIwID0gTWF0aC5yb3VuZChzdGFydCAvIHN0ZXApLCByMSA9IE1hdGgucm91bmQoc3RvcCAvIHN0ZXApO1xuICAgIGlmIChyMCAqIHN0ZXAgPCBzdGFydCkgKytyMDtcbiAgICBpZiAocjEgKiBzdGVwID4gc3RvcCkgLS1yMTtcbiAgICB0aWNrcyA9IG5ldyBBcnJheShuID0gcjEgLSByMCArIDEpO1xuICAgIHdoaWxlICgrK2kgPCBuKSB0aWNrc1tpXSA9IChyMCArIGkpICogc3RlcDtcbiAgfSBlbHNlIHtcbiAgICBzdGVwID0gLXN0ZXA7XG4gICAgbGV0IHIwID0gTWF0aC5yb3VuZChzdGFydCAqIHN0ZXApLCByMSA9IE1hdGgucm91bmQoc3RvcCAqIHN0ZXApO1xuICAgIGlmIChyMCAvIHN0ZXAgPCBzdGFydCkgKytyMDtcbiAgICBpZiAocjEgLyBzdGVwID4gc3RvcCkgLS1yMTtcbiAgICB0aWNrcyA9IG5ldyBBcnJheShuID0gcjEgLSByMCArIDEpO1xuICAgIHdoaWxlICgrK2kgPCBuKSB0aWNrc1tpXSA9IChyMCArIGkpIC8gc3RlcDtcbiAgfVxuXG4gIGlmIChyZXZlcnNlKSB0aWNrcy5yZXZlcnNlKCk7XG5cbiAgcmV0dXJuIHRpY2tzO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gdGlja0luY3JlbWVudChzdGFydCwgc3RvcCwgY291bnQpIHtcbiAgdmFyIHN0ZXAgPSAoc3RvcCAtIHN0YXJ0KSAvIE1hdGgubWF4KDAsIGNvdW50KSxcbiAgICAgIHBvd2VyID0gTWF0aC5mbG9vcihNYXRoLmxvZyhzdGVwKSAvIE1hdGguTE4xMCksXG4gICAgICBlcnJvciA9IHN0ZXAgLyBNYXRoLnBvdygxMCwgcG93ZXIpO1xuICByZXR1cm4gcG93ZXIgPj0gMFxuICAgICAgPyAoZXJyb3IgPj0gZTEwID8gMTAgOiBlcnJvciA+PSBlNSA/IDUgOiBlcnJvciA+PSBlMiA/IDIgOiAxKSAqIE1hdGgucG93KDEwLCBwb3dlcilcbiAgICAgIDogLU1hdGgucG93KDEwLCAtcG93ZXIpIC8gKGVycm9yID49IGUxMCA/IDEwIDogZXJyb3IgPj0gZTUgPyA1IDogZXJyb3IgPj0gZTIgPyAyIDogMSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiB0aWNrU3RlcChzdGFydCwgc3RvcCwgY291bnQpIHtcbiAgdmFyIHN0ZXAwID0gTWF0aC5hYnMoc3RvcCAtIHN0YXJ0KSAvIE1hdGgubWF4KDAsIGNvdW50KSxcbiAgICAgIHN0ZXAxID0gTWF0aC5wb3coMTAsIE1hdGguZmxvb3IoTWF0aC5sb2coc3RlcDApIC8gTWF0aC5MTjEwKSksXG4gICAgICBlcnJvciA9IHN0ZXAwIC8gc3RlcDE7XG4gIGlmIChlcnJvciA+PSBlMTApIHN0ZXAxICo9IDEwO1xuICBlbHNlIGlmIChlcnJvciA+PSBlNSkgc3RlcDEgKj0gNTtcbiAgZWxzZSBpZiAoZXJyb3IgPj0gZTIpIHN0ZXAxICo9IDI7XG4gIHJldHVybiBzdG9wIDwgc3RhcnQgPyAtc3RlcDEgOiBzdGVwMTtcbn1cbiIsImltcG9ydCB7YmlzZWN0b3IsIHRpY2tTdGVwfSBmcm9tIFwiZDMtYXJyYXlcIjtcbmltcG9ydCB7ZHVyYXRpb25EYXksIGR1cmF0aW9uSG91ciwgZHVyYXRpb25NaW51dGUsIGR1cmF0aW9uTW9udGgsIGR1cmF0aW9uU2Vjb25kLCBkdXJhdGlvbldlZWssIGR1cmF0aW9uWWVhcn0gZnJvbSBcIi4vZHVyYXRpb24uanNcIjtcbmltcG9ydCBtaWxsaXNlY29uZCBmcm9tIFwiLi9taWxsaXNlY29uZC5qc1wiO1xuaW1wb3J0IHNlY29uZCBmcm9tIFwiLi9zZWNvbmQuanNcIjtcbmltcG9ydCBtaW51dGUgZnJvbSBcIi4vbWludXRlLmpzXCI7XG5pbXBvcnQgaG91ciBmcm9tIFwiLi9ob3VyLmpzXCI7XG5pbXBvcnQgZGF5IGZyb20gXCIuL2RheS5qc1wiO1xuaW1wb3J0IHtzdW5kYXkgYXMgd2Vla30gZnJvbSBcIi4vd2Vlay5qc1wiO1xuaW1wb3J0IG1vbnRoIGZyb20gXCIuL21vbnRoLmpzXCI7XG5pbXBvcnQgeWVhciBmcm9tIFwiLi95ZWFyLmpzXCI7XG5pbXBvcnQgdXRjTWludXRlIGZyb20gXCIuL3V0Y01pbnV0ZS5qc1wiO1xuaW1wb3J0IHV0Y0hvdXIgZnJvbSBcIi4vdXRjSG91ci5qc1wiO1xuaW1wb3J0IHV0Y0RheSBmcm9tIFwiLi91dGNEYXkuanNcIjtcbmltcG9ydCB7dXRjU3VuZGF5IGFzIHV0Y1dlZWt9IGZyb20gXCIuL3V0Y1dlZWsuanNcIjtcbmltcG9ydCB1dGNNb250aCBmcm9tIFwiLi91dGNNb250aC5qc1wiO1xuaW1wb3J0IHV0Y1llYXIgZnJvbSBcIi4vdXRjWWVhci5qc1wiO1xuXG5mdW5jdGlvbiB0aWNrZXIoeWVhciwgbW9udGgsIHdlZWssIGRheSwgaG91ciwgbWludXRlKSB7XG5cbiAgY29uc3QgdGlja0ludGVydmFscyA9IFtcbiAgICBbc2Vjb25kLCAgMSwgICAgICBkdXJhdGlvblNlY29uZF0sXG4gICAgW3NlY29uZCwgIDUsICA1ICogZHVyYXRpb25TZWNvbmRdLFxuICAgIFtzZWNvbmQsIDE1LCAxNSAqIGR1cmF0aW9uU2Vjb25kXSxcbiAgICBbc2Vjb25kLCAzMCwgMzAgKiBkdXJhdGlvblNlY29uZF0sXG4gICAgW21pbnV0ZSwgIDEsICAgICAgZHVyYXRpb25NaW51dGVdLFxuICAgIFttaW51dGUsICA1LCAgNSAqIGR1cmF0aW9uTWludXRlXSxcbiAgICBbbWludXRlLCAxNSwgMTUgKiBkdXJhdGlvbk1pbnV0ZV0sXG4gICAgW21pbnV0ZSwgMzAsIDMwICogZHVyYXRpb25NaW51dGVdLFxuICAgIFsgIGhvdXIsICAxLCAgICAgIGR1cmF0aW9uSG91ciAgXSxcbiAgICBbICBob3VyLCAgMywgIDMgKiBkdXJhdGlvbkhvdXIgIF0sXG4gICAgWyAgaG91ciwgIDYsICA2ICogZHVyYXRpb25Ib3VyICBdLFxuICAgIFsgIGhvdXIsIDEyLCAxMiAqIGR1cmF0aW9uSG91ciAgXSxcbiAgICBbICAgZGF5LCAgMSwgICAgICBkdXJhdGlvbkRheSAgIF0sXG4gICAgWyAgIGRheSwgIDIsICAyICogZHVyYXRpb25EYXkgICBdLFxuICAgIFsgIHdlZWssICAxLCAgICAgIGR1cmF0aW9uV2VlayAgXSxcbiAgICBbIG1vbnRoLCAgMSwgICAgICBkdXJhdGlvbk1vbnRoIF0sXG4gICAgWyBtb250aCwgIDMsICAzICogZHVyYXRpb25Nb250aCBdLFxuICAgIFsgIHllYXIsICAxLCAgICAgIGR1cmF0aW9uWWVhciAgXVxuICBdO1xuXG4gIGZ1bmN0aW9uIHRpY2tzKHN0YXJ0LCBzdG9wLCBjb3VudCkge1xuICAgIGNvbnN0IHJldmVyc2UgPSBzdG9wIDwgc3RhcnQ7XG4gICAgaWYgKHJldmVyc2UpIFtzdGFydCwgc3RvcF0gPSBbc3RvcCwgc3RhcnRdO1xuICAgIGNvbnN0IGludGVydmFsID0gY291bnQgJiYgdHlwZW9mIGNvdW50LnJhbmdlID09PSBcImZ1bmN0aW9uXCIgPyBjb3VudCA6IHRpY2tJbnRlcnZhbChzdGFydCwgc3RvcCwgY291bnQpO1xuICAgIGNvbnN0IHRpY2tzID0gaW50ZXJ2YWwgPyBpbnRlcnZhbC5yYW5nZShzdGFydCwgK3N0b3AgKyAxKSA6IFtdOyAvLyBpbmNsdXNpdmUgc3RvcFxuICAgIHJldHVybiByZXZlcnNlID8gdGlja3MucmV2ZXJzZSgpIDogdGlja3M7XG4gIH1cblxuICBmdW5jdGlvbiB0aWNrSW50ZXJ2YWwoc3RhcnQsIHN0b3AsIGNvdW50KSB7XG4gICAgY29uc3QgdGFyZ2V0ID0gTWF0aC5hYnMoc3RvcCAtIHN0YXJ0KSAvIGNvdW50O1xuICAgIGNvbnN0IGkgPSBiaXNlY3RvcigoWywsIHN0ZXBdKSA9PiBzdGVwKS5yaWdodCh0aWNrSW50ZXJ2YWxzLCB0YXJnZXQpO1xuICAgIGlmIChpID09PSB0aWNrSW50ZXJ2YWxzLmxlbmd0aCkgcmV0dXJuIHllYXIuZXZlcnkodGlja1N0ZXAoc3RhcnQgLyBkdXJhdGlvblllYXIsIHN0b3AgLyBkdXJhdGlvblllYXIsIGNvdW50KSk7XG4gICAgaWYgKGkgPT09IDApIHJldHVybiBtaWxsaXNlY29uZC5ldmVyeShNYXRoLm1heCh0aWNrU3RlcChzdGFydCwgc3RvcCwgY291bnQpLCAxKSk7XG4gICAgY29uc3QgW3QsIHN0ZXBdID0gdGlja0ludGVydmFsc1t0YXJnZXQgLyB0aWNrSW50ZXJ2YWxzW2kgLSAxXVsyXSA8IHRpY2tJbnRlcnZhbHNbaV1bMl0gLyB0YXJnZXQgPyBpIC0gMSA6IGldO1xuICAgIHJldHVybiB0LmV2ZXJ5KHN0ZXApO1xuICB9XG5cbiAgcmV0dXJuIFt0aWNrcywgdGlja0ludGVydmFsXTtcbn1cblxuY29uc3QgW3V0Y1RpY2tzLCB1dGNUaWNrSW50ZXJ2YWxdID0gdGlja2VyKHV0Y1llYXIsIHV0Y01vbnRoLCB1dGNXZWVrLCB1dGNEYXksIHV0Y0hvdXIsIHV0Y01pbnV0ZSk7XG5jb25zdCBbdGltZVRpY2tzLCB0aW1lVGlja0ludGVydmFsXSA9IHRpY2tlcih5ZWFyLCBtb250aCwgd2VlaywgZGF5LCBob3VyLCBtaW51dGUpO1xuXG5leHBvcnQge3V0Y1RpY2tzLCB1dGNUaWNrSW50ZXJ2YWwsIHRpbWVUaWNrcywgdGltZVRpY2tJbnRlcnZhbH07XG4iLCJleHBvcnQgZnVuY3Rpb24gaW5pdFJhbmdlKGRvbWFpbiwgcmFuZ2UpIHtcbiAgc3dpdGNoIChhcmd1bWVudHMubGVuZ3RoKSB7XG4gICAgY2FzZSAwOiBicmVhaztcbiAgICBjYXNlIDE6IHRoaXMucmFuZ2UoZG9tYWluKTsgYnJlYWs7XG4gICAgZGVmYXVsdDogdGhpcy5yYW5nZShyYW5nZSkuZG9tYWluKGRvbWFpbik7IGJyZWFrO1xuICB9XG4gIHJldHVybiB0aGlzO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gaW5pdEludGVycG9sYXRvcihkb21haW4sIGludGVycG9sYXRvcikge1xuICBzd2l0Y2ggKGFyZ3VtZW50cy5sZW5ndGgpIHtcbiAgICBjYXNlIDA6IGJyZWFrO1xuICAgIGNhc2UgMToge1xuICAgICAgaWYgKHR5cGVvZiBkb21haW4gPT09IFwiZnVuY3Rpb25cIikgdGhpcy5pbnRlcnBvbGF0b3IoZG9tYWluKTtcbiAgICAgIGVsc2UgdGhpcy5yYW5nZShkb21haW4pO1xuICAgICAgYnJlYWs7XG4gICAgfVxuICAgIGRlZmF1bHQ6IHtcbiAgICAgIHRoaXMuZG9tYWluKGRvbWFpbik7XG4gICAgICBpZiAodHlwZW9mIGludGVycG9sYXRvciA9PT0gXCJmdW5jdGlvblwiKSB0aGlzLmludGVycG9sYXRvcihpbnRlcnBvbGF0b3IpO1xuICAgICAgZWxzZSB0aGlzLnJhbmdlKGludGVycG9sYXRvcik7XG4gICAgICBicmVhaztcbiAgICB9XG4gIH1cbiAgcmV0dXJuIHRoaXM7XG59XG4iLCJleHBvcnQgZGVmYXVsdCBmdW5jdGlvbihjb25zdHJ1Y3RvciwgZmFjdG9yeSwgcHJvdG90eXBlKSB7XG4gIGNvbnN0cnVjdG9yLnByb3RvdHlwZSA9IGZhY3RvcnkucHJvdG90eXBlID0gcHJvdG90eXBlO1xuICBwcm90b3R5cGUuY29uc3RydWN0b3IgPSBjb25zdHJ1Y3Rvcjtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGV4dGVuZChwYXJlbnQsIGRlZmluaXRpb24pIHtcbiAgdmFyIHByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUocGFyZW50LnByb3RvdHlwZSk7XG4gIGZvciAodmFyIGtleSBpbiBkZWZpbml0aW9uKSBwcm90b3R5cGVba2V5XSA9IGRlZmluaXRpb25ba2V5XTtcbiAgcmV0dXJuIHByb3RvdHlwZTtcbn1cbiIsImltcG9ydCBkZWZpbmUsIHtleHRlbmR9IGZyb20gXCIuL2RlZmluZS5qc1wiO1xuXG5leHBvcnQgZnVuY3Rpb24gQ29sb3IoKSB7fVxuXG5leHBvcnQgdmFyIGRhcmtlciA9IDAuNztcbmV4cG9ydCB2YXIgYnJpZ2h0ZXIgPSAxIC8gZGFya2VyO1xuXG52YXIgcmVJID0gXCJcXFxccyooWystXT9cXFxcZCspXFxcXHMqXCIsXG4gICAgcmVOID0gXCJcXFxccyooWystXT9cXFxcZCpcXFxcLj9cXFxcZCsoPzpbZUVdWystXT9cXFxcZCspPylcXFxccypcIixcbiAgICByZVAgPSBcIlxcXFxzKihbKy1dP1xcXFxkKlxcXFwuP1xcXFxkKyg/OltlRV1bKy1dP1xcXFxkKyk/KSVcXFxccypcIixcbiAgICByZUhleCA9IC9eIyhbMC05YS1mXXszLDh9KSQvLFxuICAgIHJlUmdiSW50ZWdlciA9IG5ldyBSZWdFeHAoXCJecmdiXFxcXChcIiArIFtyZUksIHJlSSwgcmVJXSArIFwiXFxcXCkkXCIpLFxuICAgIHJlUmdiUGVyY2VudCA9IG5ldyBSZWdFeHAoXCJecmdiXFxcXChcIiArIFtyZVAsIHJlUCwgcmVQXSArIFwiXFxcXCkkXCIpLFxuICAgIHJlUmdiYUludGVnZXIgPSBuZXcgUmVnRXhwKFwiXnJnYmFcXFxcKFwiICsgW3JlSSwgcmVJLCByZUksIHJlTl0gKyBcIlxcXFwpJFwiKSxcbiAgICByZVJnYmFQZXJjZW50ID0gbmV3IFJlZ0V4cChcIl5yZ2JhXFxcXChcIiArIFtyZVAsIHJlUCwgcmVQLCByZU5dICsgXCJcXFxcKSRcIiksXG4gICAgcmVIc2xQZXJjZW50ID0gbmV3IFJlZ0V4cChcIl5oc2xcXFxcKFwiICsgW3JlTiwgcmVQLCByZVBdICsgXCJcXFxcKSRcIiksXG4gICAgcmVIc2xhUGVyY2VudCA9IG5ldyBSZWdFeHAoXCJeaHNsYVxcXFwoXCIgKyBbcmVOLCByZVAsIHJlUCwgcmVOXSArIFwiXFxcXCkkXCIpO1xuXG52YXIgbmFtZWQgPSB7XG4gIGFsaWNlYmx1ZTogMHhmMGY4ZmYsXG4gIGFudGlxdWV3aGl0ZTogMHhmYWViZDcsXG4gIGFxdWE6IDB4MDBmZmZmLFxuICBhcXVhbWFyaW5lOiAweDdmZmZkNCxcbiAgYXp1cmU6IDB4ZjBmZmZmLFxuICBiZWlnZTogMHhmNWY1ZGMsXG4gIGJpc3F1ZTogMHhmZmU0YzQsXG4gIGJsYWNrOiAweDAwMDAwMCxcbiAgYmxhbmNoZWRhbG1vbmQ6IDB4ZmZlYmNkLFxuICBibHVlOiAweDAwMDBmZixcbiAgYmx1ZXZpb2xldDogMHg4YTJiZTIsXG4gIGJyb3duOiAweGE1MmEyYSxcbiAgYnVybHl3b29kOiAweGRlYjg4NyxcbiAgY2FkZXRibHVlOiAweDVmOWVhMCxcbiAgY2hhcnRyZXVzZTogMHg3ZmZmMDAsXG4gIGNob2NvbGF0ZTogMHhkMjY5MWUsXG4gIGNvcmFsOiAweGZmN2Y1MCxcbiAgY29ybmZsb3dlcmJsdWU6IDB4NjQ5NWVkLFxuICBjb3Juc2lsazogMHhmZmY4ZGMsXG4gIGNyaW1zb246IDB4ZGMxNDNjLFxuICBjeWFuOiAweDAwZmZmZixcbiAgZGFya2JsdWU6IDB4MDAwMDhiLFxuICBkYXJrY3lhbjogMHgwMDhiOGIsXG4gIGRhcmtnb2xkZW5yb2Q6IDB4Yjg4NjBiLFxuICBkYXJrZ3JheTogMHhhOWE5YTksXG4gIGRhcmtncmVlbjogMHgwMDY0MDAsXG4gIGRhcmtncmV5OiAweGE5YTlhOSxcbiAgZGFya2toYWtpOiAweGJkYjc2YixcbiAgZGFya21hZ2VudGE6IDB4OGIwMDhiLFxuICBkYXJrb2xpdmVncmVlbjogMHg1NTZiMmYsXG4gIGRhcmtvcmFuZ2U6IDB4ZmY4YzAwLFxuICBkYXJrb3JjaGlkOiAweDk5MzJjYyxcbiAgZGFya3JlZDogMHg4YjAwMDAsXG4gIGRhcmtzYWxtb246IDB4ZTk5NjdhLFxuICBkYXJrc2VhZ3JlZW46IDB4OGZiYzhmLFxuICBkYXJrc2xhdGVibHVlOiAweDQ4M2Q4YixcbiAgZGFya3NsYXRlZ3JheTogMHgyZjRmNGYsXG4gIGRhcmtzbGF0ZWdyZXk6IDB4MmY0ZjRmLFxuICBkYXJrdHVycXVvaXNlOiAweDAwY2VkMSxcbiAgZGFya3Zpb2xldDogMHg5NDAwZDMsXG4gIGRlZXBwaW5rOiAweGZmMTQ5MyxcbiAgZGVlcHNreWJsdWU6IDB4MDBiZmZmLFxuICBkaW1ncmF5OiAweDY5Njk2OSxcbiAgZGltZ3JleTogMHg2OTY5NjksXG4gIGRvZGdlcmJsdWU6IDB4MWU5MGZmLFxuICBmaXJlYnJpY2s6IDB4YjIyMjIyLFxuICBmbG9yYWx3aGl0ZTogMHhmZmZhZjAsXG4gIGZvcmVzdGdyZWVuOiAweDIyOGIyMixcbiAgZnVjaHNpYTogMHhmZjAwZmYsXG4gIGdhaW5zYm9ybzogMHhkY2RjZGMsXG4gIGdob3N0d2hpdGU6IDB4ZjhmOGZmLFxuICBnb2xkOiAweGZmZDcwMCxcbiAgZ29sZGVucm9kOiAweGRhYTUyMCxcbiAgZ3JheTogMHg4MDgwODAsXG4gIGdyZWVuOiAweDAwODAwMCxcbiAgZ3JlZW55ZWxsb3c6IDB4YWRmZjJmLFxuICBncmV5OiAweDgwODA4MCxcbiAgaG9uZXlkZXc6IDB4ZjBmZmYwLFxuICBob3RwaW5rOiAweGZmNjliNCxcbiAgaW5kaWFucmVkOiAweGNkNWM1YyxcbiAgaW5kaWdvOiAweDRiMDA4MixcbiAgaXZvcnk6IDB4ZmZmZmYwLFxuICBraGFraTogMHhmMGU2OGMsXG4gIGxhdmVuZGVyOiAweGU2ZTZmYSxcbiAgbGF2ZW5kZXJibHVzaDogMHhmZmYwZjUsXG4gIGxhd25ncmVlbjogMHg3Y2ZjMDAsXG4gIGxlbW9uY2hpZmZvbjogMHhmZmZhY2QsXG4gIGxpZ2h0Ymx1ZTogMHhhZGQ4ZTYsXG4gIGxpZ2h0Y29yYWw6IDB4ZjA4MDgwLFxuICBsaWdodGN5YW46IDB4ZTBmZmZmLFxuICBsaWdodGdvbGRlbnJvZHllbGxvdzogMHhmYWZhZDIsXG4gIGxpZ2h0Z3JheTogMHhkM2QzZDMsXG4gIGxpZ2h0Z3JlZW46IDB4OTBlZTkwLFxuICBsaWdodGdyZXk6IDB4ZDNkM2QzLFxuICBsaWdodHBpbms6IDB4ZmZiNmMxLFxuICBsaWdodHNhbG1vbjogMHhmZmEwN2EsXG4gIGxpZ2h0c2VhZ3JlZW46IDB4MjBiMmFhLFxuICBsaWdodHNreWJsdWU6IDB4ODdjZWZhLFxuICBsaWdodHNsYXRlZ3JheTogMHg3Nzg4OTksXG4gIGxpZ2h0c2xhdGVncmV5OiAweDc3ODg5OSxcbiAgbGlnaHRzdGVlbGJsdWU6IDB4YjBjNGRlLFxuICBsaWdodHllbGxvdzogMHhmZmZmZTAsXG4gIGxpbWU6IDB4MDBmZjAwLFxuICBsaW1lZ3JlZW46IDB4MzJjZDMyLFxuICBsaW5lbjogMHhmYWYwZTYsXG4gIG1hZ2VudGE6IDB4ZmYwMGZmLFxuICBtYXJvb246IDB4ODAwMDAwLFxuICBtZWRpdW1hcXVhbWFyaW5lOiAweDY2Y2RhYSxcbiAgbWVkaXVtYmx1ZTogMHgwMDAwY2QsXG4gIG1lZGl1bW9yY2hpZDogMHhiYTU1ZDMsXG4gIG1lZGl1bXB1cnBsZTogMHg5MzcwZGIsXG4gIG1lZGl1bXNlYWdyZWVuOiAweDNjYjM3MSxcbiAgbWVkaXVtc2xhdGVibHVlOiAweDdiNjhlZSxcbiAgbWVkaXVtc3ByaW5nZ3JlZW46IDB4MDBmYTlhLFxuICBtZWRpdW10dXJxdW9pc2U6IDB4NDhkMWNjLFxuICBtZWRpdW12aW9sZXRyZWQ6IDB4YzcxNTg1LFxuICBtaWRuaWdodGJsdWU6IDB4MTkxOTcwLFxuICBtaW50Y3JlYW06IDB4ZjVmZmZhLFxuICBtaXN0eXJvc2U6IDB4ZmZlNGUxLFxuICBtb2NjYXNpbjogMHhmZmU0YjUsXG4gIG5hdmFqb3doaXRlOiAweGZmZGVhZCxcbiAgbmF2eTogMHgwMDAwODAsXG4gIG9sZGxhY2U6IDB4ZmRmNWU2LFxuICBvbGl2ZTogMHg4MDgwMDAsXG4gIG9saXZlZHJhYjogMHg2YjhlMjMsXG4gIG9yYW5nZTogMHhmZmE1MDAsXG4gIG9yYW5nZXJlZDogMHhmZjQ1MDAsXG4gIG9yY2hpZDogMHhkYTcwZDYsXG4gIHBhbGVnb2xkZW5yb2Q6IDB4ZWVlOGFhLFxuICBwYWxlZ3JlZW46IDB4OThmYjk4LFxuICBwYWxldHVycXVvaXNlOiAweGFmZWVlZSxcbiAgcGFsZXZpb2xldHJlZDogMHhkYjcwOTMsXG4gIHBhcGF5YXdoaXA6IDB4ZmZlZmQ1LFxuICBwZWFjaHB1ZmY6IDB4ZmZkYWI5LFxuICBwZXJ1OiAweGNkODUzZixcbiAgcGluazogMHhmZmMwY2IsXG4gIHBsdW06IDB4ZGRhMGRkLFxuICBwb3dkZXJibHVlOiAweGIwZTBlNixcbiAgcHVycGxlOiAweDgwMDA4MCxcbiAgcmViZWNjYXB1cnBsZTogMHg2NjMzOTksXG4gIHJlZDogMHhmZjAwMDAsXG4gIHJvc3licm93bjogMHhiYzhmOGYsXG4gIHJveWFsYmx1ZTogMHg0MTY5ZTEsXG4gIHNhZGRsZWJyb3duOiAweDhiNDUxMyxcbiAgc2FsbW9uOiAweGZhODA3MixcbiAgc2FuZHlicm93bjogMHhmNGE0NjAsXG4gIHNlYWdyZWVuOiAweDJlOGI1NyxcbiAgc2Vhc2hlbGw6IDB4ZmZmNWVlLFxuICBzaWVubmE6IDB4YTA1MjJkLFxuICBzaWx2ZXI6IDB4YzBjMGMwLFxuICBza3libHVlOiAweDg3Y2VlYixcbiAgc2xhdGVibHVlOiAweDZhNWFjZCxcbiAgc2xhdGVncmF5OiAweDcwODA5MCxcbiAgc2xhdGVncmV5OiAweDcwODA5MCxcbiAgc25vdzogMHhmZmZhZmEsXG4gIHNwcmluZ2dyZWVuOiAweDAwZmY3ZixcbiAgc3RlZWxibHVlOiAweDQ2ODJiNCxcbiAgdGFuOiAweGQyYjQ4YyxcbiAgdGVhbDogMHgwMDgwODAsXG4gIHRoaXN0bGU6IDB4ZDhiZmQ4LFxuICB0b21hdG86IDB4ZmY2MzQ3LFxuICB0dXJxdW9pc2U6IDB4NDBlMGQwLFxuICB2aW9sZXQ6IDB4ZWU4MmVlLFxuICB3aGVhdDogMHhmNWRlYjMsXG4gIHdoaXRlOiAweGZmZmZmZixcbiAgd2hpdGVzbW9rZTogMHhmNWY1ZjUsXG4gIHllbGxvdzogMHhmZmZmMDAsXG4gIHllbGxvd2dyZWVuOiAweDlhY2QzMlxufTtcblxuZGVmaW5lKENvbG9yLCBjb2xvciwge1xuICBjb3B5OiBmdW5jdGlvbihjaGFubmVscykge1xuICAgIHJldHVybiBPYmplY3QuYXNzaWduKG5ldyB0aGlzLmNvbnN0cnVjdG9yLCB0aGlzLCBjaGFubmVscyk7XG4gIH0sXG4gIGRpc3BsYXlhYmxlOiBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5yZ2IoKS5kaXNwbGF5YWJsZSgpO1xuICB9LFxuICBoZXg6IGNvbG9yX2Zvcm1hdEhleCwgLy8gRGVwcmVjYXRlZCEgVXNlIGNvbG9yLmZvcm1hdEhleC5cbiAgZm9ybWF0SGV4OiBjb2xvcl9mb3JtYXRIZXgsXG4gIGZvcm1hdEhzbDogY29sb3JfZm9ybWF0SHNsLFxuICBmb3JtYXRSZ2I6IGNvbG9yX2Zvcm1hdFJnYixcbiAgdG9TdHJpbmc6IGNvbG9yX2Zvcm1hdFJnYlxufSk7XG5cbmZ1bmN0aW9uIGNvbG9yX2Zvcm1hdEhleCgpIHtcbiAgcmV0dXJuIHRoaXMucmdiKCkuZm9ybWF0SGV4KCk7XG59XG5cbmZ1bmN0aW9uIGNvbG9yX2Zvcm1hdEhzbCgpIHtcbiAgcmV0dXJuIGhzbENvbnZlcnQodGhpcykuZm9ybWF0SHNsKCk7XG59XG5cbmZ1bmN0aW9uIGNvbG9yX2Zvcm1hdFJnYigpIHtcbiAgcmV0dXJuIHRoaXMucmdiKCkuZm9ybWF0UmdiKCk7XG59XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGNvbG9yKGZvcm1hdCkge1xuICB2YXIgbSwgbDtcbiAgZm9ybWF0ID0gKGZvcm1hdCArIFwiXCIpLnRyaW0oKS50b0xvd2VyQ2FzZSgpO1xuICByZXR1cm4gKG0gPSByZUhleC5leGVjKGZvcm1hdCkpID8gKGwgPSBtWzFdLmxlbmd0aCwgbSA9IHBhcnNlSW50KG1bMV0sIDE2KSwgbCA9PT0gNiA/IHJnYm4obSkgLy8gI2ZmMDAwMFxuICAgICAgOiBsID09PSAzID8gbmV3IFJnYigobSA+PiA4ICYgMHhmKSB8IChtID4+IDQgJiAweGYwKSwgKG0gPj4gNCAmIDB4ZikgfCAobSAmIDB4ZjApLCAoKG0gJiAweGYpIDw8IDQpIHwgKG0gJiAweGYpLCAxKSAvLyAjZjAwXG4gICAgICA6IGwgPT09IDggPyByZ2JhKG0gPj4gMjQgJiAweGZmLCBtID4+IDE2ICYgMHhmZiwgbSA+PiA4ICYgMHhmZiwgKG0gJiAweGZmKSAvIDB4ZmYpIC8vICNmZjAwMDAwMFxuICAgICAgOiBsID09PSA0ID8gcmdiYSgobSA+PiAxMiAmIDB4ZikgfCAobSA+PiA4ICYgMHhmMCksIChtID4+IDggJiAweGYpIHwgKG0gPj4gNCAmIDB4ZjApLCAobSA+PiA0ICYgMHhmKSB8IChtICYgMHhmMCksICgoKG0gJiAweGYpIDw8IDQpIHwgKG0gJiAweGYpKSAvIDB4ZmYpIC8vICNmMDAwXG4gICAgICA6IG51bGwpIC8vIGludmFsaWQgaGV4XG4gICAgICA6IChtID0gcmVSZ2JJbnRlZ2VyLmV4ZWMoZm9ybWF0KSkgPyBuZXcgUmdiKG1bMV0sIG1bMl0sIG1bM10sIDEpIC8vIHJnYigyNTUsIDAsIDApXG4gICAgICA6IChtID0gcmVSZ2JQZXJjZW50LmV4ZWMoZm9ybWF0KSkgPyBuZXcgUmdiKG1bMV0gKiAyNTUgLyAxMDAsIG1bMl0gKiAyNTUgLyAxMDAsIG1bM10gKiAyNTUgLyAxMDAsIDEpIC8vIHJnYigxMDAlLCAwJSwgMCUpXG4gICAgICA6IChtID0gcmVSZ2JhSW50ZWdlci5leGVjKGZvcm1hdCkpID8gcmdiYShtWzFdLCBtWzJdLCBtWzNdLCBtWzRdKSAvLyByZ2JhKDI1NSwgMCwgMCwgMSlcbiAgICAgIDogKG0gPSByZVJnYmFQZXJjZW50LmV4ZWMoZm9ybWF0KSkgPyByZ2JhKG1bMV0gKiAyNTUgLyAxMDAsIG1bMl0gKiAyNTUgLyAxMDAsIG1bM10gKiAyNTUgLyAxMDAsIG1bNF0pIC8vIHJnYigxMDAlLCAwJSwgMCUsIDEpXG4gICAgICA6IChtID0gcmVIc2xQZXJjZW50LmV4ZWMoZm9ybWF0KSkgPyBoc2xhKG1bMV0sIG1bMl0gLyAxMDAsIG1bM10gLyAxMDAsIDEpIC8vIGhzbCgxMjAsIDUwJSwgNTAlKVxuICAgICAgOiAobSA9IHJlSHNsYVBlcmNlbnQuZXhlYyhmb3JtYXQpKSA/IGhzbGEobVsxXSwgbVsyXSAvIDEwMCwgbVszXSAvIDEwMCwgbVs0XSkgLy8gaHNsYSgxMjAsIDUwJSwgNTAlLCAxKVxuICAgICAgOiBuYW1lZC5oYXNPd25Qcm9wZXJ0eShmb3JtYXQpID8gcmdibihuYW1lZFtmb3JtYXRdKSAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLXByb3RvdHlwZS1idWlsdGluc1xuICAgICAgOiBmb3JtYXQgPT09IFwidHJhbnNwYXJlbnRcIiA/IG5ldyBSZ2IoTmFOLCBOYU4sIE5hTiwgMClcbiAgICAgIDogbnVsbDtcbn1cblxuZnVuY3Rpb24gcmdibihuKSB7XG4gIHJldHVybiBuZXcgUmdiKG4gPj4gMTYgJiAweGZmLCBuID4+IDggJiAweGZmLCBuICYgMHhmZiwgMSk7XG59XG5cbmZ1bmN0aW9uIHJnYmEociwgZywgYiwgYSkge1xuICBpZiAoYSA8PSAwKSByID0gZyA9IGIgPSBOYU47XG4gIHJldHVybiBuZXcgUmdiKHIsIGcsIGIsIGEpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gcmdiQ29udmVydChvKSB7XG4gIGlmICghKG8gaW5zdGFuY2VvZiBDb2xvcikpIG8gPSBjb2xvcihvKTtcbiAgaWYgKCFvKSByZXR1cm4gbmV3IFJnYjtcbiAgbyA9IG8ucmdiKCk7XG4gIHJldHVybiBuZXcgUmdiKG8uciwgby5nLCBvLmIsIG8ub3BhY2l0eSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiByZ2IociwgZywgYiwgb3BhY2l0eSkge1xuICByZXR1cm4gYXJndW1lbnRzLmxlbmd0aCA9PT0gMSA/IHJnYkNvbnZlcnQocikgOiBuZXcgUmdiKHIsIGcsIGIsIG9wYWNpdHkgPT0gbnVsbCA/IDEgOiBvcGFjaXR5KTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIFJnYihyLCBnLCBiLCBvcGFjaXR5KSB7XG4gIHRoaXMuciA9ICtyO1xuICB0aGlzLmcgPSArZztcbiAgdGhpcy5iID0gK2I7XG4gIHRoaXMub3BhY2l0eSA9ICtvcGFjaXR5O1xufVxuXG5kZWZpbmUoUmdiLCByZ2IsIGV4dGVuZChDb2xvciwge1xuICBicmlnaHRlcjogZnVuY3Rpb24oaykge1xuICAgIGsgPSBrID09IG51bGwgPyBicmlnaHRlciA6IE1hdGgucG93KGJyaWdodGVyLCBrKTtcbiAgICByZXR1cm4gbmV3IFJnYih0aGlzLnIgKiBrLCB0aGlzLmcgKiBrLCB0aGlzLmIgKiBrLCB0aGlzLm9wYWNpdHkpO1xuICB9LFxuICBkYXJrZXI6IGZ1bmN0aW9uKGspIHtcbiAgICBrID0gayA9PSBudWxsID8gZGFya2VyIDogTWF0aC5wb3coZGFya2VyLCBrKTtcbiAgICByZXR1cm4gbmV3IFJnYih0aGlzLnIgKiBrLCB0aGlzLmcgKiBrLCB0aGlzLmIgKiBrLCB0aGlzLm9wYWNpdHkpO1xuICB9LFxuICByZ2I6IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzO1xuICB9LFxuICBkaXNwbGF5YWJsZTogZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuICgtMC41IDw9IHRoaXMuciAmJiB0aGlzLnIgPCAyNTUuNSlcbiAgICAgICAgJiYgKC0wLjUgPD0gdGhpcy5nICYmIHRoaXMuZyA8IDI1NS41KVxuICAgICAgICAmJiAoLTAuNSA8PSB0aGlzLmIgJiYgdGhpcy5iIDwgMjU1LjUpXG4gICAgICAgICYmICgwIDw9IHRoaXMub3BhY2l0eSAmJiB0aGlzLm9wYWNpdHkgPD0gMSk7XG4gIH0sXG4gIGhleDogcmdiX2Zvcm1hdEhleCwgLy8gRGVwcmVjYXRlZCEgVXNlIGNvbG9yLmZvcm1hdEhleC5cbiAgZm9ybWF0SGV4OiByZ2JfZm9ybWF0SGV4LFxuICBmb3JtYXRSZ2I6IHJnYl9mb3JtYXRSZ2IsXG4gIHRvU3RyaW5nOiByZ2JfZm9ybWF0UmdiXG59KSk7XG5cbmZ1bmN0aW9uIHJnYl9mb3JtYXRIZXgoKSB7XG4gIHJldHVybiBcIiNcIiArIGhleCh0aGlzLnIpICsgaGV4KHRoaXMuZykgKyBoZXgodGhpcy5iKTtcbn1cblxuZnVuY3Rpb24gcmdiX2Zvcm1hdFJnYigpIHtcbiAgdmFyIGEgPSB0aGlzLm9wYWNpdHk7IGEgPSBpc05hTihhKSA/IDEgOiBNYXRoLm1heCgwLCBNYXRoLm1pbigxLCBhKSk7XG4gIHJldHVybiAoYSA9PT0gMSA/IFwicmdiKFwiIDogXCJyZ2JhKFwiKVxuICAgICAgKyBNYXRoLm1heCgwLCBNYXRoLm1pbigyNTUsIE1hdGgucm91bmQodGhpcy5yKSB8fCAwKSkgKyBcIiwgXCJcbiAgICAgICsgTWF0aC5tYXgoMCwgTWF0aC5taW4oMjU1LCBNYXRoLnJvdW5kKHRoaXMuZykgfHwgMCkpICsgXCIsIFwiXG4gICAgICArIE1hdGgubWF4KDAsIE1hdGgubWluKDI1NSwgTWF0aC5yb3VuZCh0aGlzLmIpIHx8IDApKVxuICAgICAgKyAoYSA9PT0gMSA/IFwiKVwiIDogXCIsIFwiICsgYSArIFwiKVwiKTtcbn1cblxuZnVuY3Rpb24gaGV4KHZhbHVlKSB7XG4gIHZhbHVlID0gTWF0aC5tYXgoMCwgTWF0aC5taW4oMjU1LCBNYXRoLnJvdW5kKHZhbHVlKSB8fCAwKSk7XG4gIHJldHVybiAodmFsdWUgPCAxNiA/IFwiMFwiIDogXCJcIikgKyB2YWx1ZS50b1N0cmluZygxNik7XG59XG5cbmZ1bmN0aW9uIGhzbGEoaCwgcywgbCwgYSkge1xuICBpZiAoYSA8PSAwKSBoID0gcyA9IGwgPSBOYU47XG4gIGVsc2UgaWYgKGwgPD0gMCB8fCBsID49IDEpIGggPSBzID0gTmFOO1xuICBlbHNlIGlmIChzIDw9IDApIGggPSBOYU47XG4gIHJldHVybiBuZXcgSHNsKGgsIHMsIGwsIGEpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gaHNsQ29udmVydChvKSB7XG4gIGlmIChvIGluc3RhbmNlb2YgSHNsKSByZXR1cm4gbmV3IEhzbChvLmgsIG8ucywgby5sLCBvLm9wYWNpdHkpO1xuICBpZiAoIShvIGluc3RhbmNlb2YgQ29sb3IpKSBvID0gY29sb3Iobyk7XG4gIGlmICghbykgcmV0dXJuIG5ldyBIc2w7XG4gIGlmIChvIGluc3RhbmNlb2YgSHNsKSByZXR1cm4gbztcbiAgbyA9IG8ucmdiKCk7XG4gIHZhciByID0gby5yIC8gMjU1LFxuICAgICAgZyA9IG8uZyAvIDI1NSxcbiAgICAgIGIgPSBvLmIgLyAyNTUsXG4gICAgICBtaW4gPSBNYXRoLm1pbihyLCBnLCBiKSxcbiAgICAgIG1heCA9IE1hdGgubWF4KHIsIGcsIGIpLFxuICAgICAgaCA9IE5hTixcbiAgICAgIHMgPSBtYXggLSBtaW4sXG4gICAgICBsID0gKG1heCArIG1pbikgLyAyO1xuICBpZiAocykge1xuICAgIGlmIChyID09PSBtYXgpIGggPSAoZyAtIGIpIC8gcyArIChnIDwgYikgKiA2O1xuICAgIGVsc2UgaWYgKGcgPT09IG1heCkgaCA9IChiIC0gcikgLyBzICsgMjtcbiAgICBlbHNlIGggPSAociAtIGcpIC8gcyArIDQ7XG4gICAgcyAvPSBsIDwgMC41ID8gbWF4ICsgbWluIDogMiAtIG1heCAtIG1pbjtcbiAgICBoICo9IDYwO1xuICB9IGVsc2Uge1xuICAgIHMgPSBsID4gMCAmJiBsIDwgMSA/IDAgOiBoO1xuICB9XG4gIHJldHVybiBuZXcgSHNsKGgsIHMsIGwsIG8ub3BhY2l0eSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBoc2woaCwgcywgbCwgb3BhY2l0eSkge1xuICByZXR1cm4gYXJndW1lbnRzLmxlbmd0aCA9PT0gMSA/IGhzbENvbnZlcnQoaCkgOiBuZXcgSHNsKGgsIHMsIGwsIG9wYWNpdHkgPT0gbnVsbCA/IDEgOiBvcGFjaXR5KTtcbn1cblxuZnVuY3Rpb24gSHNsKGgsIHMsIGwsIG9wYWNpdHkpIHtcbiAgdGhpcy5oID0gK2g7XG4gIHRoaXMucyA9ICtzO1xuICB0aGlzLmwgPSArbDtcbiAgdGhpcy5vcGFjaXR5ID0gK29wYWNpdHk7XG59XG5cbmRlZmluZShIc2wsIGhzbCwgZXh0ZW5kKENvbG9yLCB7XG4gIGJyaWdodGVyOiBmdW5jdGlvbihrKSB7XG4gICAgayA9IGsgPT0gbnVsbCA/IGJyaWdodGVyIDogTWF0aC5wb3coYnJpZ2h0ZXIsIGspO1xuICAgIHJldHVybiBuZXcgSHNsKHRoaXMuaCwgdGhpcy5zLCB0aGlzLmwgKiBrLCB0aGlzLm9wYWNpdHkpO1xuICB9LFxuICBkYXJrZXI6IGZ1bmN0aW9uKGspIHtcbiAgICBrID0gayA9PSBudWxsID8gZGFya2VyIDogTWF0aC5wb3coZGFya2VyLCBrKTtcbiAgICByZXR1cm4gbmV3IEhzbCh0aGlzLmgsIHRoaXMucywgdGhpcy5sICogaywgdGhpcy5vcGFjaXR5KTtcbiAgfSxcbiAgcmdiOiBmdW5jdGlvbigpIHtcbiAgICB2YXIgaCA9IHRoaXMuaCAlIDM2MCArICh0aGlzLmggPCAwKSAqIDM2MCxcbiAgICAgICAgcyA9IGlzTmFOKGgpIHx8IGlzTmFOKHRoaXMucykgPyAwIDogdGhpcy5zLFxuICAgICAgICBsID0gdGhpcy5sLFxuICAgICAgICBtMiA9IGwgKyAobCA8IDAuNSA/IGwgOiAxIC0gbCkgKiBzLFxuICAgICAgICBtMSA9IDIgKiBsIC0gbTI7XG4gICAgcmV0dXJuIG5ldyBSZ2IoXG4gICAgICBoc2wycmdiKGggPj0gMjQwID8gaCAtIDI0MCA6IGggKyAxMjAsIG0xLCBtMiksXG4gICAgICBoc2wycmdiKGgsIG0xLCBtMiksXG4gICAgICBoc2wycmdiKGggPCAxMjAgPyBoICsgMjQwIDogaCAtIDEyMCwgbTEsIG0yKSxcbiAgICAgIHRoaXMub3BhY2l0eVxuICAgICk7XG4gIH0sXG4gIGRpc3BsYXlhYmxlOiBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gKDAgPD0gdGhpcy5zICYmIHRoaXMucyA8PSAxIHx8IGlzTmFOKHRoaXMucykpXG4gICAgICAgICYmICgwIDw9IHRoaXMubCAmJiB0aGlzLmwgPD0gMSlcbiAgICAgICAgJiYgKDAgPD0gdGhpcy5vcGFjaXR5ICYmIHRoaXMub3BhY2l0eSA8PSAxKTtcbiAgfSxcbiAgZm9ybWF0SHNsOiBmdW5jdGlvbigpIHtcbiAgICB2YXIgYSA9IHRoaXMub3BhY2l0eTsgYSA9IGlzTmFOKGEpID8gMSA6IE1hdGgubWF4KDAsIE1hdGgubWluKDEsIGEpKTtcbiAgICByZXR1cm4gKGEgPT09IDEgPyBcImhzbChcIiA6IFwiaHNsYShcIilcbiAgICAgICAgKyAodGhpcy5oIHx8IDApICsgXCIsIFwiXG4gICAgICAgICsgKHRoaXMucyB8fCAwKSAqIDEwMCArIFwiJSwgXCJcbiAgICAgICAgKyAodGhpcy5sIHx8IDApICogMTAwICsgXCIlXCJcbiAgICAgICAgKyAoYSA9PT0gMSA/IFwiKVwiIDogXCIsIFwiICsgYSArIFwiKVwiKTtcbiAgfVxufSkpO1xuXG4vKiBGcm9tIEZ2RCAxMy4zNywgQ1NTIENvbG9yIE1vZHVsZSBMZXZlbCAzICovXG5mdW5jdGlvbiBoc2wycmdiKGgsIG0xLCBtMikge1xuICByZXR1cm4gKGggPCA2MCA/IG0xICsgKG0yIC0gbTEpICogaCAvIDYwXG4gICAgICA6IGggPCAxODAgPyBtMlxuICAgICAgOiBoIDwgMjQwID8gbTEgKyAobTIgLSBtMSkgKiAoMjQwIC0gaCkgLyA2MFxuICAgICAgOiBtMSkgKiAyNTU7XG59XG4iLCJleHBvcnQgZGVmYXVsdCB4ID0+ICgpID0+IHg7XG4iLCJpbXBvcnQgY29uc3RhbnQgZnJvbSBcIi4vY29uc3RhbnQuanNcIjtcblxuZnVuY3Rpb24gbGluZWFyKGEsIGQpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uKHQpIHtcbiAgICByZXR1cm4gYSArIHQgKiBkO1xuICB9O1xufVxuXG5mdW5jdGlvbiBleHBvbmVudGlhbChhLCBiLCB5KSB7XG4gIHJldHVybiBhID0gTWF0aC5wb3coYSwgeSksIGIgPSBNYXRoLnBvdyhiLCB5KSAtIGEsIHkgPSAxIC8geSwgZnVuY3Rpb24odCkge1xuICAgIHJldHVybiBNYXRoLnBvdyhhICsgdCAqIGIsIHkpO1xuICB9O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gaHVlKGEsIGIpIHtcbiAgdmFyIGQgPSBiIC0gYTtcbiAgcmV0dXJuIGQgPyBsaW5lYXIoYSwgZCA+IDE4MCB8fCBkIDwgLTE4MCA/IGQgLSAzNjAgKiBNYXRoLnJvdW5kKGQgLyAzNjApIDogZCkgOiBjb25zdGFudChpc05hTihhKSA/IGIgOiBhKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdhbW1hKHkpIHtcbiAgcmV0dXJuICh5ID0gK3kpID09PSAxID8gbm9nYW1tYSA6IGZ1bmN0aW9uKGEsIGIpIHtcbiAgICByZXR1cm4gYiAtIGEgPyBleHBvbmVudGlhbChhLCBiLCB5KSA6IGNvbnN0YW50KGlzTmFOKGEpID8gYiA6IGEpO1xuICB9O1xufVxuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBub2dhbW1hKGEsIGIpIHtcbiAgdmFyIGQgPSBiIC0gYTtcbiAgcmV0dXJuIGQgPyBsaW5lYXIoYSwgZCkgOiBjb25zdGFudChpc05hTihhKSA/IGIgOiBhKTtcbn1cbiIsImltcG9ydCB7cmdiIGFzIGNvbG9yUmdifSBmcm9tIFwiZDMtY29sb3JcIjtcbmltcG9ydCBiYXNpcyBmcm9tIFwiLi9iYXNpcy5qc1wiO1xuaW1wb3J0IGJhc2lzQ2xvc2VkIGZyb20gXCIuL2Jhc2lzQ2xvc2VkLmpzXCI7XG5pbXBvcnQgbm9nYW1tYSwge2dhbW1hfSBmcm9tIFwiLi9jb2xvci5qc1wiO1xuXG5leHBvcnQgZGVmYXVsdCAoZnVuY3Rpb24gcmdiR2FtbWEoeSkge1xuICB2YXIgY29sb3IgPSBnYW1tYSh5KTtcblxuICBmdW5jdGlvbiByZ2Ioc3RhcnQsIGVuZCkge1xuICAgIHZhciByID0gY29sb3IoKHN0YXJ0ID0gY29sb3JSZ2Ioc3RhcnQpKS5yLCAoZW5kID0gY29sb3JSZ2IoZW5kKSkuciksXG4gICAgICAgIGcgPSBjb2xvcihzdGFydC5nLCBlbmQuZyksXG4gICAgICAgIGIgPSBjb2xvcihzdGFydC5iLCBlbmQuYiksXG4gICAgICAgIG9wYWNpdHkgPSBub2dhbW1hKHN0YXJ0Lm9wYWNpdHksIGVuZC5vcGFjaXR5KTtcbiAgICByZXR1cm4gZnVuY3Rpb24odCkge1xuICAgICAgc3RhcnQuciA9IHIodCk7XG4gICAgICBzdGFydC5nID0gZyh0KTtcbiAgICAgIHN0YXJ0LmIgPSBiKHQpO1xuICAgICAgc3RhcnQub3BhY2l0eSA9IG9wYWNpdHkodCk7XG4gICAgICByZXR1cm4gc3RhcnQgKyBcIlwiO1xuICAgIH07XG4gIH1cblxuICByZ2IuZ2FtbWEgPSByZ2JHYW1tYTtcblxuICByZXR1cm4gcmdiO1xufSkoMSk7XG5cbmZ1bmN0aW9uIHJnYlNwbGluZShzcGxpbmUpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uKGNvbG9ycykge1xuICAgIHZhciBuID0gY29sb3JzLmxlbmd0aCxcbiAgICAgICAgciA9IG5ldyBBcnJheShuKSxcbiAgICAgICAgZyA9IG5ldyBBcnJheShuKSxcbiAgICAgICAgYiA9IG5ldyBBcnJheShuKSxcbiAgICAgICAgaSwgY29sb3I7XG4gICAgZm9yIChpID0gMDsgaSA8IG47ICsraSkge1xuICAgICAgY29sb3IgPSBjb2xvclJnYihjb2xvcnNbaV0pO1xuICAgICAgcltpXSA9IGNvbG9yLnIgfHwgMDtcbiAgICAgIGdbaV0gPSBjb2xvci5nIHx8IDA7XG4gICAgICBiW2ldID0gY29sb3IuYiB8fCAwO1xuICAgIH1cbiAgICByID0gc3BsaW5lKHIpO1xuICAgIGcgPSBzcGxpbmUoZyk7XG4gICAgYiA9IHNwbGluZShiKTtcbiAgICBjb2xvci5vcGFjaXR5ID0gMTtcbiAgICByZXR1cm4gZnVuY3Rpb24odCkge1xuICAgICAgY29sb3IuciA9IHIodCk7XG4gICAgICBjb2xvci5nID0gZyh0KTtcbiAgICAgIGNvbG9yLmIgPSBiKHQpO1xuICAgICAgcmV0dXJuIGNvbG9yICsgXCJcIjtcbiAgICB9O1xuICB9O1xufVxuXG5leHBvcnQgdmFyIHJnYkJhc2lzID0gcmdiU3BsaW5lKGJhc2lzKTtcbmV4cG9ydCB2YXIgcmdiQmFzaXNDbG9zZWQgPSByZ2JTcGxpbmUoYmFzaXNDbG9zZWQpO1xuIiwiZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24oYSwgYikge1xuICBpZiAoIWIpIGIgPSBbXTtcbiAgdmFyIG4gPSBhID8gTWF0aC5taW4oYi5sZW5ndGgsIGEubGVuZ3RoKSA6IDAsXG4gICAgICBjID0gYi5zbGljZSgpLFxuICAgICAgaTtcbiAgcmV0dXJuIGZ1bmN0aW9uKHQpIHtcbiAgICBmb3IgKGkgPSAwOyBpIDwgbjsgKytpKSBjW2ldID0gYVtpXSAqICgxIC0gdCkgKyBiW2ldICogdDtcbiAgICByZXR1cm4gYztcbiAgfTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGlzTnVtYmVyQXJyYXkoeCkge1xuICByZXR1cm4gQXJyYXlCdWZmZXIuaXNWaWV3KHgpICYmICEoeCBpbnN0YW5jZW9mIERhdGFWaWV3KTtcbn1cbiIsImltcG9ydCB2YWx1ZSBmcm9tIFwiLi92YWx1ZS5qc1wiO1xuaW1wb3J0IG51bWJlckFycmF5LCB7aXNOdW1iZXJBcnJheX0gZnJvbSBcIi4vbnVtYmVyQXJyYXkuanNcIjtcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24oYSwgYikge1xuICByZXR1cm4gKGlzTnVtYmVyQXJyYXkoYikgPyBudW1iZXJBcnJheSA6IGdlbmVyaWNBcnJheSkoYSwgYik7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZW5lcmljQXJyYXkoYSwgYikge1xuICB2YXIgbmIgPSBiID8gYi5sZW5ndGggOiAwLFxuICAgICAgbmEgPSBhID8gTWF0aC5taW4obmIsIGEubGVuZ3RoKSA6IDAsXG4gICAgICB4ID0gbmV3IEFycmF5KG5hKSxcbiAgICAgIGMgPSBuZXcgQXJyYXkobmIpLFxuICAgICAgaTtcblxuICBmb3IgKGkgPSAwOyBpIDwgbmE7ICsraSkgeFtpXSA9IHZhbHVlKGFbaV0sIGJbaV0pO1xuICBmb3IgKDsgaSA8IG5iOyArK2kpIGNbaV0gPSBiW2ldO1xuXG4gIHJldHVybiBmdW5jdGlvbih0KSB7XG4gICAgZm9yIChpID0gMDsgaSA8IG5hOyArK2kpIGNbaV0gPSB4W2ldKHQpO1xuICAgIHJldHVybiBjO1xuICB9O1xufVxuIiwiZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24oYSwgYikge1xuICB2YXIgZCA9IG5ldyBEYXRlO1xuICByZXR1cm4gYSA9ICthLCBiID0gK2IsIGZ1bmN0aW9uKHQpIHtcbiAgICByZXR1cm4gZC5zZXRUaW1lKGEgKiAoMSAtIHQpICsgYiAqIHQpLCBkO1xuICB9O1xufVxuIiwiZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24oYSwgYikge1xuICByZXR1cm4gYSA9ICthLCBiID0gK2IsIGZ1bmN0aW9uKHQpIHtcbiAgICByZXR1cm4gYSAqICgxIC0gdCkgKyBiICogdDtcbiAgfTtcbn1cbiIsImltcG9ydCB2YWx1ZSBmcm9tIFwiLi92YWx1ZS5qc1wiO1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbihhLCBiKSB7XG4gIHZhciBpID0ge30sXG4gICAgICBjID0ge30sXG4gICAgICBrO1xuXG4gIGlmIChhID09PSBudWxsIHx8IHR5cGVvZiBhICE9PSBcIm9iamVjdFwiKSBhID0ge307XG4gIGlmIChiID09PSBudWxsIHx8IHR5cGVvZiBiICE9PSBcIm9iamVjdFwiKSBiID0ge307XG5cbiAgZm9yIChrIGluIGIpIHtcbiAgICBpZiAoayBpbiBhKSB7XG4gICAgICBpW2tdID0gdmFsdWUoYVtrXSwgYltrXSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNba10gPSBiW2tdO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiBmdW5jdGlvbih0KSB7XG4gICAgZm9yIChrIGluIGkpIGNba10gPSBpW2tdKHQpO1xuICAgIHJldHVybiBjO1xuICB9O1xufVxuIiwiaW1wb3J0IG51bWJlciBmcm9tIFwiLi9udW1iZXIuanNcIjtcblxudmFyIHJlQSA9IC9bLStdPyg/OlxcZCtcXC4/XFxkKnxcXC4/XFxkKykoPzpbZUVdWy0rXT9cXGQrKT8vZyxcbiAgICByZUIgPSBuZXcgUmVnRXhwKHJlQS5zb3VyY2UsIFwiZ1wiKTtcblxuZnVuY3Rpb24gemVybyhiKSB7XG4gIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gYjtcbiAgfTtcbn1cblxuZnVuY3Rpb24gb25lKGIpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uKHQpIHtcbiAgICByZXR1cm4gYih0KSArIFwiXCI7XG4gIH07XG59XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uKGEsIGIpIHtcbiAgdmFyIGJpID0gcmVBLmxhc3RJbmRleCA9IHJlQi5sYXN0SW5kZXggPSAwLCAvLyBzY2FuIGluZGV4IGZvciBuZXh0IG51bWJlciBpbiBiXG4gICAgICBhbSwgLy8gY3VycmVudCBtYXRjaCBpbiBhXG4gICAgICBibSwgLy8gY3VycmVudCBtYXRjaCBpbiBiXG4gICAgICBicywgLy8gc3RyaW5nIHByZWNlZGluZyBjdXJyZW50IG51bWJlciBpbiBiLCBpZiBhbnlcbiAgICAgIGkgPSAtMSwgLy8gaW5kZXggaW4gc1xuICAgICAgcyA9IFtdLCAvLyBzdHJpbmcgY29uc3RhbnRzIGFuZCBwbGFjZWhvbGRlcnNcbiAgICAgIHEgPSBbXTsgLy8gbnVtYmVyIGludGVycG9sYXRvcnNcblxuICAvLyBDb2VyY2UgaW5wdXRzIHRvIHN0cmluZ3MuXG4gIGEgPSBhICsgXCJcIiwgYiA9IGIgKyBcIlwiO1xuXG4gIC8vIEludGVycG9sYXRlIHBhaXJzIG9mIG51bWJlcnMgaW4gYSAmIGIuXG4gIHdoaWxlICgoYW0gPSByZUEuZXhlYyhhKSlcbiAgICAgICYmIChibSA9IHJlQi5leGVjKGIpKSkge1xuICAgIGlmICgoYnMgPSBibS5pbmRleCkgPiBiaSkgeyAvLyBhIHN0cmluZyBwcmVjZWRlcyB0aGUgbmV4dCBudW1iZXIgaW4gYlxuICAgICAgYnMgPSBiLnNsaWNlKGJpLCBicyk7XG4gICAgICBpZiAoc1tpXSkgc1tpXSArPSBiczsgLy8gY29hbGVzY2Ugd2l0aCBwcmV2aW91cyBzdHJpbmdcbiAgICAgIGVsc2Ugc1srK2ldID0gYnM7XG4gICAgfVxuICAgIGlmICgoYW0gPSBhbVswXSkgPT09IChibSA9IGJtWzBdKSkgeyAvLyBudW1iZXJzIGluIGEgJiBiIG1hdGNoXG4gICAgICBpZiAoc1tpXSkgc1tpXSArPSBibTsgLy8gY29hbGVzY2Ugd2l0aCBwcmV2aW91cyBzdHJpbmdcbiAgICAgIGVsc2Ugc1srK2ldID0gYm07XG4gICAgfSBlbHNlIHsgLy8gaW50ZXJwb2xhdGUgbm9uLW1hdGNoaW5nIG51bWJlcnNcbiAgICAgIHNbKytpXSA9IG51bGw7XG4gICAgICBxLnB1c2goe2k6IGksIHg6IG51bWJlcihhbSwgYm0pfSk7XG4gICAgfVxuICAgIGJpID0gcmVCLmxhc3RJbmRleDtcbiAgfVxuXG4gIC8vIEFkZCByZW1haW5zIG9mIGIuXG4gIGlmIChiaSA8IGIubGVuZ3RoKSB7XG4gICAgYnMgPSBiLnNsaWNlKGJpKTtcbiAgICBpZiAoc1tpXSkgc1tpXSArPSBiczsgLy8gY29hbGVzY2Ugd2l0aCBwcmV2aW91cyBzdHJpbmdcbiAgICBlbHNlIHNbKytpXSA9IGJzO1xuICB9XG5cbiAgLy8gU3BlY2lhbCBvcHRpbWl6YXRpb24gZm9yIG9ubHkgYSBzaW5nbGUgbWF0Y2guXG4gIC8vIE90aGVyd2lzZSwgaW50ZXJwb2xhdGUgZWFjaCBvZiB0aGUgbnVtYmVycyBhbmQgcmVqb2luIHRoZSBzdHJpbmcuXG4gIHJldHVybiBzLmxlbmd0aCA8IDIgPyAocVswXVxuICAgICAgPyBvbmUocVswXS54KVxuICAgICAgOiB6ZXJvKGIpKVxuICAgICAgOiAoYiA9IHEubGVuZ3RoLCBmdW5jdGlvbih0KSB7XG4gICAgICAgICAgZm9yICh2YXIgaSA9IDAsIG87IGkgPCBiOyArK2kpIHNbKG8gPSBxW2ldKS5pXSA9IG8ueCh0KTtcbiAgICAgICAgICByZXR1cm4gcy5qb2luKFwiXCIpO1xuICAgICAgICB9KTtcbn1cbiIsImltcG9ydCB7Y29sb3J9IGZyb20gXCJkMy1jb2xvclwiO1xuaW1wb3J0IHJnYiBmcm9tIFwiLi9yZ2IuanNcIjtcbmltcG9ydCB7Z2VuZXJpY0FycmF5fSBmcm9tIFwiLi9hcnJheS5qc1wiO1xuaW1wb3J0IGRhdGUgZnJvbSBcIi4vZGF0ZS5qc1wiO1xuaW1wb3J0IG51bWJlciBmcm9tIFwiLi9udW1iZXIuanNcIjtcbmltcG9ydCBvYmplY3QgZnJvbSBcIi4vb2JqZWN0LmpzXCI7XG5pbXBvcnQgc3RyaW5nIGZyb20gXCIuL3N0cmluZy5qc1wiO1xuaW1wb3J0IGNvbnN0YW50IGZyb20gXCIuL2NvbnN0YW50LmpzXCI7XG5pbXBvcnQgbnVtYmVyQXJyYXksIHtpc051bWJlckFycmF5fSBmcm9tIFwiLi9udW1iZXJBcnJheS5qc1wiO1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbihhLCBiKSB7XG4gIHZhciB0ID0gdHlwZW9mIGIsIGM7XG4gIHJldHVybiBiID09IG51bGwgfHwgdCA9PT0gXCJib29sZWFuXCIgPyBjb25zdGFudChiKVxuICAgICAgOiAodCA9PT0gXCJudW1iZXJcIiA/IG51bWJlclxuICAgICAgOiB0ID09PSBcInN0cmluZ1wiID8gKChjID0gY29sb3IoYikpID8gKGIgPSBjLCByZ2IpIDogc3RyaW5nKVxuICAgICAgOiBiIGluc3RhbmNlb2YgY29sb3IgPyByZ2JcbiAgICAgIDogYiBpbnN0YW5jZW9mIERhdGUgPyBkYXRlXG4gICAgICA6IGlzTnVtYmVyQXJyYXkoYikgPyBudW1iZXJBcnJheVxuICAgICAgOiBBcnJheS5pc0FycmF5KGIpID8gZ2VuZXJpY0FycmF5XG4gICAgICA6IHR5cGVvZiBiLnZhbHVlT2YgIT09IFwiZnVuY3Rpb25cIiAmJiB0eXBlb2YgYi50b1N0cmluZyAhPT0gXCJmdW5jdGlvblwiIHx8IGlzTmFOKGIpID8gb2JqZWN0XG4gICAgICA6IG51bWJlcikoYSwgYik7XG59XG4iLCJleHBvcnQgZGVmYXVsdCBmdW5jdGlvbihhLCBiKSB7XG4gIHJldHVybiBhID0gK2EsIGIgPSArYiwgZnVuY3Rpb24odCkge1xuICAgIHJldHVybiBNYXRoLnJvdW5kKGEgKiAoMSAtIHQpICsgYiAqIHQpO1xuICB9O1xufVxuIiwiZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gY29uc3RhbnRzKHgpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB4O1xuICB9O1xufVxuIiwiZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gbnVtYmVyKHgpIHtcbiAgcmV0dXJuICt4O1xufVxuIiwiaW1wb3J0IHtiaXNlY3R9IGZyb20gXCJkMy1hcnJheVwiO1xuaW1wb3J0IHtpbnRlcnBvbGF0ZSBhcyBpbnRlcnBvbGF0ZVZhbHVlLCBpbnRlcnBvbGF0ZU51bWJlciwgaW50ZXJwb2xhdGVSb3VuZH0gZnJvbSBcImQzLWludGVycG9sYXRlXCI7XG5pbXBvcnQgY29uc3RhbnQgZnJvbSBcIi4vY29uc3RhbnQuanNcIjtcbmltcG9ydCBudW1iZXIgZnJvbSBcIi4vbnVtYmVyLmpzXCI7XG5cbnZhciB1bml0ID0gWzAsIDFdO1xuXG5leHBvcnQgZnVuY3Rpb24gaWRlbnRpdHkoeCkge1xuICByZXR1cm4geDtcbn1cblxuZnVuY3Rpb24gbm9ybWFsaXplKGEsIGIpIHtcbiAgcmV0dXJuIChiIC09IChhID0gK2EpKVxuICAgICAgPyBmdW5jdGlvbih4KSB7IHJldHVybiAoeCAtIGEpIC8gYjsgfVxuICAgICAgOiBjb25zdGFudChpc05hTihiKSA/IE5hTiA6IDAuNSk7XG59XG5cbmZ1bmN0aW9uIGNsYW1wZXIoYSwgYikge1xuICB2YXIgdDtcbiAgaWYgKGEgPiBiKSB0ID0gYSwgYSA9IGIsIGIgPSB0O1xuICByZXR1cm4gZnVuY3Rpb24oeCkgeyByZXR1cm4gTWF0aC5tYXgoYSwgTWF0aC5taW4oYiwgeCkpOyB9O1xufVxuXG4vLyBub3JtYWxpemUoYSwgYikoeCkgdGFrZXMgYSBkb21haW4gdmFsdWUgeCBpbiBbYSxiXSBhbmQgcmV0dXJucyB0aGUgY29ycmVzcG9uZGluZyBwYXJhbWV0ZXIgdCBpbiBbMCwxXS5cbi8vIGludGVycG9sYXRlKGEsIGIpKHQpIHRha2VzIGEgcGFyYW1ldGVyIHQgaW4gWzAsMV0gYW5kIHJldHVybnMgdGhlIGNvcnJlc3BvbmRpbmcgcmFuZ2UgdmFsdWUgeCBpbiBbYSxiXS5cbmZ1bmN0aW9uIGJpbWFwKGRvbWFpbiwgcmFuZ2UsIGludGVycG9sYXRlKSB7XG4gIHZhciBkMCA9IGRvbWFpblswXSwgZDEgPSBkb21haW5bMV0sIHIwID0gcmFuZ2VbMF0sIHIxID0gcmFuZ2VbMV07XG4gIGlmIChkMSA8IGQwKSBkMCA9IG5vcm1hbGl6ZShkMSwgZDApLCByMCA9IGludGVycG9sYXRlKHIxLCByMCk7XG4gIGVsc2UgZDAgPSBub3JtYWxpemUoZDAsIGQxKSwgcjAgPSBpbnRlcnBvbGF0ZShyMCwgcjEpO1xuICByZXR1cm4gZnVuY3Rpb24oeCkgeyByZXR1cm4gcjAoZDAoeCkpOyB9O1xufVxuXG5mdW5jdGlvbiBwb2x5bWFwKGRvbWFpbiwgcmFuZ2UsIGludGVycG9sYXRlKSB7XG4gIHZhciBqID0gTWF0aC5taW4oZG9tYWluLmxlbmd0aCwgcmFuZ2UubGVuZ3RoKSAtIDEsXG4gICAgICBkID0gbmV3IEFycmF5KGopLFxuICAgICAgciA9IG5ldyBBcnJheShqKSxcbiAgICAgIGkgPSAtMTtcblxuICAvLyBSZXZlcnNlIGRlc2NlbmRpbmcgZG9tYWlucy5cbiAgaWYgKGRvbWFpbltqXSA8IGRvbWFpblswXSkge1xuICAgIGRvbWFpbiA9IGRvbWFpbi5zbGljZSgpLnJldmVyc2UoKTtcbiAgICByYW5nZSA9IHJhbmdlLnNsaWNlKCkucmV2ZXJzZSgpO1xuICB9XG5cbiAgd2hpbGUgKCsraSA8IGopIHtcbiAgICBkW2ldID0gbm9ybWFsaXplKGRvbWFpbltpXSwgZG9tYWluW2kgKyAxXSk7XG4gICAgcltpXSA9IGludGVycG9sYXRlKHJhbmdlW2ldLCByYW5nZVtpICsgMV0pO1xuICB9XG5cbiAgcmV0dXJuIGZ1bmN0aW9uKHgpIHtcbiAgICB2YXIgaSA9IGJpc2VjdChkb21haW4sIHgsIDEsIGopIC0gMTtcbiAgICByZXR1cm4gcltpXShkW2ldKHgpKTtcbiAgfTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGNvcHkoc291cmNlLCB0YXJnZXQpIHtcbiAgcmV0dXJuIHRhcmdldFxuICAgICAgLmRvbWFpbihzb3VyY2UuZG9tYWluKCkpXG4gICAgICAucmFuZ2Uoc291cmNlLnJhbmdlKCkpXG4gICAgICAuaW50ZXJwb2xhdGUoc291cmNlLmludGVycG9sYXRlKCkpXG4gICAgICAuY2xhbXAoc291cmNlLmNsYW1wKCkpXG4gICAgICAudW5rbm93bihzb3VyY2UudW5rbm93bigpKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHRyYW5zZm9ybWVyKCkge1xuICB2YXIgZG9tYWluID0gdW5pdCxcbiAgICAgIHJhbmdlID0gdW5pdCxcbiAgICAgIGludGVycG9sYXRlID0gaW50ZXJwb2xhdGVWYWx1ZSxcbiAgICAgIHRyYW5zZm9ybSxcbiAgICAgIHVudHJhbnNmb3JtLFxuICAgICAgdW5rbm93bixcbiAgICAgIGNsYW1wID0gaWRlbnRpdHksXG4gICAgICBwaWVjZXdpc2UsXG4gICAgICBvdXRwdXQsXG4gICAgICBpbnB1dDtcblxuICBmdW5jdGlvbiByZXNjYWxlKCkge1xuICAgIHZhciBuID0gTWF0aC5taW4oZG9tYWluLmxlbmd0aCwgcmFuZ2UubGVuZ3RoKTtcbiAgICBpZiAoY2xhbXAgIT09IGlkZW50aXR5KSBjbGFtcCA9IGNsYW1wZXIoZG9tYWluWzBdLCBkb21haW5bbiAtIDFdKTtcbiAgICBwaWVjZXdpc2UgPSBuID4gMiA/IHBvbHltYXAgOiBiaW1hcDtcbiAgICBvdXRwdXQgPSBpbnB1dCA9IG51bGw7XG4gICAgcmV0dXJuIHNjYWxlO1xuICB9XG5cbiAgZnVuY3Rpb24gc2NhbGUoeCkge1xuICAgIHJldHVybiB4ID09IG51bGwgfHwgaXNOYU4oeCA9ICt4KSA/IHVua25vd24gOiAob3V0cHV0IHx8IChvdXRwdXQgPSBwaWVjZXdpc2UoZG9tYWluLm1hcCh0cmFuc2Zvcm0pLCByYW5nZSwgaW50ZXJwb2xhdGUpKSkodHJhbnNmb3JtKGNsYW1wKHgpKSk7XG4gIH1cblxuICBzY2FsZS5pbnZlcnQgPSBmdW5jdGlvbih5KSB7XG4gICAgcmV0dXJuIGNsYW1wKHVudHJhbnNmb3JtKChpbnB1dCB8fCAoaW5wdXQgPSBwaWVjZXdpc2UocmFuZ2UsIGRvbWFpbi5tYXAodHJhbnNmb3JtKSwgaW50ZXJwb2xhdGVOdW1iZXIpKSkoeSkpKTtcbiAgfTtcblxuICBzY2FsZS5kb21haW4gPSBmdW5jdGlvbihfKSB7XG4gICAgcmV0dXJuIGFyZ3VtZW50cy5sZW5ndGggPyAoZG9tYWluID0gQXJyYXkuZnJvbShfLCBudW1iZXIpLCByZXNjYWxlKCkpIDogZG9tYWluLnNsaWNlKCk7XG4gIH07XG5cbiAgc2NhbGUucmFuZ2UgPSBmdW5jdGlvbihfKSB7XG4gICAgcmV0dXJuIGFyZ3VtZW50cy5sZW5ndGggPyAocmFuZ2UgPSBBcnJheS5mcm9tKF8pLCByZXNjYWxlKCkpIDogcmFuZ2Uuc2xpY2UoKTtcbiAgfTtcblxuICBzY2FsZS5yYW5nZVJvdW5kID0gZnVuY3Rpb24oXykge1xuICAgIHJldHVybiByYW5nZSA9IEFycmF5LmZyb20oXyksIGludGVycG9sYXRlID0gaW50ZXJwb2xhdGVSb3VuZCwgcmVzY2FsZSgpO1xuICB9O1xuXG4gIHNjYWxlLmNsYW1wID0gZnVuY3Rpb24oXykge1xuICAgIHJldHVybiBhcmd1bWVudHMubGVuZ3RoID8gKGNsYW1wID0gXyA/IHRydWUgOiBpZGVudGl0eSwgcmVzY2FsZSgpKSA6IGNsYW1wICE9PSBpZGVudGl0eTtcbiAgfTtcblxuICBzY2FsZS5pbnRlcnBvbGF0ZSA9IGZ1bmN0aW9uKF8pIHtcbiAgICByZXR1cm4gYXJndW1lbnRzLmxlbmd0aCA/IChpbnRlcnBvbGF0ZSA9IF8sIHJlc2NhbGUoKSkgOiBpbnRlcnBvbGF0ZTtcbiAgfTtcblxuICBzY2FsZS51bmtub3duID0gZnVuY3Rpb24oXykge1xuICAgIHJldHVybiBhcmd1bWVudHMubGVuZ3RoID8gKHVua25vd24gPSBfLCBzY2FsZSkgOiB1bmtub3duO1xuICB9O1xuXG4gIHJldHVybiBmdW5jdGlvbih0LCB1KSB7XG4gICAgdHJhbnNmb3JtID0gdCwgdW50cmFuc2Zvcm0gPSB1O1xuICAgIHJldHVybiByZXNjYWxlKCk7XG4gIH07XG59XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGNvbnRpbnVvdXMoKSB7XG4gIHJldHVybiB0cmFuc2Zvcm1lcigpKGlkZW50aXR5LCBpZGVudGl0eSk7XG59XG4iLCJleHBvcnQgZGVmYXVsdCBmdW5jdGlvbih4KSB7XG4gIHJldHVybiBNYXRoLmFicyh4ID0gTWF0aC5yb3VuZCh4KSkgPj0gMWUyMVxuICAgICAgPyB4LnRvTG9jYWxlU3RyaW5nKFwiZW5cIikucmVwbGFjZSgvLC9nLCBcIlwiKVxuICAgICAgOiB4LnRvU3RyaW5nKDEwKTtcbn1cblxuLy8gQ29tcHV0ZXMgdGhlIGRlY2ltYWwgY29lZmZpY2llbnQgYW5kIGV4cG9uZW50IG9mIHRoZSBzcGVjaWZpZWQgbnVtYmVyIHggd2l0aFxuLy8gc2lnbmlmaWNhbnQgZGlnaXRzIHAsIHdoZXJlIHggaXMgcG9zaXRpdmUgYW5kIHAgaXMgaW4gWzEsIDIxXSBvciB1bmRlZmluZWQuXG4vLyBGb3IgZXhhbXBsZSwgZm9ybWF0RGVjaW1hbFBhcnRzKDEuMjMpIHJldHVybnMgW1wiMTIzXCIsIDBdLlxuZXhwb3J0IGZ1bmN0aW9uIGZvcm1hdERlY2ltYWxQYXJ0cyh4LCBwKSB7XG4gIGlmICgoaSA9ICh4ID0gcCA/IHgudG9FeHBvbmVudGlhbChwIC0gMSkgOiB4LnRvRXhwb25lbnRpYWwoKSkuaW5kZXhPZihcImVcIikpIDwgMCkgcmV0dXJuIG51bGw7IC8vIE5hTiwgwrFJbmZpbml0eVxuICB2YXIgaSwgY29lZmZpY2llbnQgPSB4LnNsaWNlKDAsIGkpO1xuXG4gIC8vIFRoZSBzdHJpbmcgcmV0dXJuZWQgYnkgdG9FeHBvbmVudGlhbCBlaXRoZXIgaGFzIHRoZSBmb3JtIFxcZFxcLlxcZCtlWy0rXVxcZCtcbiAgLy8gKGUuZy4sIDEuMmUrMykgb3IgdGhlIGZvcm0gXFxkZVstK11cXGQrIChlLmcuLCAxZSszKS5cbiAgcmV0dXJuIFtcbiAgICBjb2VmZmljaWVudC5sZW5ndGggPiAxID8gY29lZmZpY2llbnRbMF0gKyBjb2VmZmljaWVudC5zbGljZSgyKSA6IGNvZWZmaWNpZW50LFxuICAgICt4LnNsaWNlKGkgKyAxKVxuICBdO1xufVxuIiwiaW1wb3J0IHtmb3JtYXREZWNpbWFsUGFydHN9IGZyb20gXCIuL2Zvcm1hdERlY2ltYWwuanNcIjtcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24oeCkge1xuICByZXR1cm4geCA9IGZvcm1hdERlY2ltYWxQYXJ0cyhNYXRoLmFicyh4KSksIHggPyB4WzFdIDogTmFOO1xufVxuIiwiZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24oZ3JvdXBpbmcsIHRob3VzYW5kcykge1xuICByZXR1cm4gZnVuY3Rpb24odmFsdWUsIHdpZHRoKSB7XG4gICAgdmFyIGkgPSB2YWx1ZS5sZW5ndGgsXG4gICAgICAgIHQgPSBbXSxcbiAgICAgICAgaiA9IDAsXG4gICAgICAgIGcgPSBncm91cGluZ1swXSxcbiAgICAgICAgbGVuZ3RoID0gMDtcblxuICAgIHdoaWxlIChpID4gMCAmJiBnID4gMCkge1xuICAgICAgaWYgKGxlbmd0aCArIGcgKyAxID4gd2lkdGgpIGcgPSBNYXRoLm1heCgxLCB3aWR0aCAtIGxlbmd0aCk7XG4gICAgICB0LnB1c2godmFsdWUuc3Vic3RyaW5nKGkgLT0gZywgaSArIGcpKTtcbiAgICAgIGlmICgobGVuZ3RoICs9IGcgKyAxKSA+IHdpZHRoKSBicmVhaztcbiAgICAgIGcgPSBncm91cGluZ1tqID0gKGogKyAxKSAlIGdyb3VwaW5nLmxlbmd0aF07XG4gICAgfVxuXG4gICAgcmV0dXJuIHQucmV2ZXJzZSgpLmpvaW4odGhvdXNhbmRzKTtcbiAgfTtcbn1cbiIsImV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uKG51bWVyYWxzKSB7XG4gIHJldHVybiBmdW5jdGlvbih2YWx1ZSkge1xuICAgIHJldHVybiB2YWx1ZS5yZXBsYWNlKC9bMC05XS9nLCBmdW5jdGlvbihpKSB7XG4gICAgICByZXR1cm4gbnVtZXJhbHNbK2ldO1xuICAgIH0pO1xuICB9O1xufVxuIiwiLy8gW1tmaWxsXWFsaWduXVtzaWduXVtzeW1ib2xdWzBdW3dpZHRoXVssXVsucHJlY2lzaW9uXVt+XVt0eXBlXVxudmFyIHJlID0gL14oPzooLik/KFs8Pj1eXSkpPyhbK1xcLSggXSk/KFskI10pPygwKT8oXFxkKyk/KCwpPyhcXC5cXGQrKT8ofik/KFthLXolXSk/JC9pO1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBmb3JtYXRTcGVjaWZpZXIoc3BlY2lmaWVyKSB7XG4gIGlmICghKG1hdGNoID0gcmUuZXhlYyhzcGVjaWZpZXIpKSkgdGhyb3cgbmV3IEVycm9yKFwiaW52YWxpZCBmb3JtYXQ6IFwiICsgc3BlY2lmaWVyKTtcbiAgdmFyIG1hdGNoO1xuICByZXR1cm4gbmV3IEZvcm1hdFNwZWNpZmllcih7XG4gICAgZmlsbDogbWF0Y2hbMV0sXG4gICAgYWxpZ246IG1hdGNoWzJdLFxuICAgIHNpZ246IG1hdGNoWzNdLFxuICAgIHN5bWJvbDogbWF0Y2hbNF0sXG4gICAgemVybzogbWF0Y2hbNV0sXG4gICAgd2lkdGg6IG1hdGNoWzZdLFxuICAgIGNvbW1hOiBtYXRjaFs3XSxcbiAgICBwcmVjaXNpb246IG1hdGNoWzhdICYmIG1hdGNoWzhdLnNsaWNlKDEpLFxuICAgIHRyaW06IG1hdGNoWzldLFxuICAgIHR5cGU6IG1hdGNoWzEwXVxuICB9KTtcbn1cblxuZm9ybWF0U3BlY2lmaWVyLnByb3RvdHlwZSA9IEZvcm1hdFNwZWNpZmllci5wcm90b3R5cGU7IC8vIGluc3RhbmNlb2ZcblxuZXhwb3J0IGZ1bmN0aW9uIEZvcm1hdFNwZWNpZmllcihzcGVjaWZpZXIpIHtcbiAgdGhpcy5maWxsID0gc3BlY2lmaWVyLmZpbGwgPT09IHVuZGVmaW5lZCA/IFwiIFwiIDogc3BlY2lmaWVyLmZpbGwgKyBcIlwiO1xuICB0aGlzLmFsaWduID0gc3BlY2lmaWVyLmFsaWduID09PSB1bmRlZmluZWQgPyBcIj5cIiA6IHNwZWNpZmllci5hbGlnbiArIFwiXCI7XG4gIHRoaXMuc2lnbiA9IHNwZWNpZmllci5zaWduID09PSB1bmRlZmluZWQgPyBcIi1cIiA6IHNwZWNpZmllci5zaWduICsgXCJcIjtcbiAgdGhpcy5zeW1ib2wgPSBzcGVjaWZpZXIuc3ltYm9sID09PSB1bmRlZmluZWQgPyBcIlwiIDogc3BlY2lmaWVyLnN5bWJvbCArIFwiXCI7XG4gIHRoaXMuemVybyA9ICEhc3BlY2lmaWVyLnplcm87XG4gIHRoaXMud2lkdGggPSBzcGVjaWZpZXIud2lkdGggPT09IHVuZGVmaW5lZCA/IHVuZGVmaW5lZCA6ICtzcGVjaWZpZXIud2lkdGg7XG4gIHRoaXMuY29tbWEgPSAhIXNwZWNpZmllci5jb21tYTtcbiAgdGhpcy5wcmVjaXNpb24gPSBzcGVjaWZpZXIucHJlY2lzaW9uID09PSB1bmRlZmluZWQgPyB1bmRlZmluZWQgOiArc3BlY2lmaWVyLnByZWNpc2lvbjtcbiAgdGhpcy50cmltID0gISFzcGVjaWZpZXIudHJpbTtcbiAgdGhpcy50eXBlID0gc3BlY2lmaWVyLnR5cGUgPT09IHVuZGVmaW5lZCA/IFwiXCIgOiBzcGVjaWZpZXIudHlwZSArIFwiXCI7XG59XG5cbkZvcm1hdFNwZWNpZmllci5wcm90b3R5cGUudG9TdHJpbmcgPSBmdW5jdGlvbigpIHtcbiAgcmV0dXJuIHRoaXMuZmlsbFxuICAgICAgKyB0aGlzLmFsaWduXG4gICAgICArIHRoaXMuc2lnblxuICAgICAgKyB0aGlzLnN5bWJvbFxuICAgICAgKyAodGhpcy56ZXJvID8gXCIwXCIgOiBcIlwiKVxuICAgICAgKyAodGhpcy53aWR0aCA9PT0gdW5kZWZpbmVkID8gXCJcIiA6IE1hdGgubWF4KDEsIHRoaXMud2lkdGggfCAwKSlcbiAgICAgICsgKHRoaXMuY29tbWEgPyBcIixcIiA6IFwiXCIpXG4gICAgICArICh0aGlzLnByZWNpc2lvbiA9PT0gdW5kZWZpbmVkID8gXCJcIiA6IFwiLlwiICsgTWF0aC5tYXgoMCwgdGhpcy5wcmVjaXNpb24gfCAwKSlcbiAgICAgICsgKHRoaXMudHJpbSA/IFwiflwiIDogXCJcIilcbiAgICAgICsgdGhpcy50eXBlO1xufTtcbiIsIi8vIFRyaW1zIGluc2lnbmlmaWNhbnQgemVyb3MsIGUuZy4sIHJlcGxhY2VzIDEuMjAwMGsgd2l0aCAxLjJrLlxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24ocykge1xuICBvdXQ6IGZvciAodmFyIG4gPSBzLmxlbmd0aCwgaSA9IDEsIGkwID0gLTEsIGkxOyBpIDwgbjsgKytpKSB7XG4gICAgc3dpdGNoIChzW2ldKSB7XG4gICAgICBjYXNlIFwiLlwiOiBpMCA9IGkxID0gaTsgYnJlYWs7XG4gICAgICBjYXNlIFwiMFwiOiBpZiAoaTAgPT09IDApIGkwID0gaTsgaTEgPSBpOyBicmVhaztcbiAgICAgIGRlZmF1bHQ6IGlmICghK3NbaV0pIGJyZWFrIG91dDsgaWYgKGkwID4gMCkgaTAgPSAwOyBicmVhaztcbiAgICB9XG4gIH1cbiAgcmV0dXJuIGkwID4gMCA/IHMuc2xpY2UoMCwgaTApICsgcy5zbGljZShpMSArIDEpIDogcztcbn1cbiIsImltcG9ydCB7Zm9ybWF0RGVjaW1hbFBhcnRzfSBmcm9tIFwiLi9mb3JtYXREZWNpbWFsLmpzXCI7XG5cbmV4cG9ydCB2YXIgcHJlZml4RXhwb25lbnQ7XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uKHgsIHApIHtcbiAgdmFyIGQgPSBmb3JtYXREZWNpbWFsUGFydHMoeCwgcCk7XG4gIGlmICghZCkgcmV0dXJuIHggKyBcIlwiO1xuICB2YXIgY29lZmZpY2llbnQgPSBkWzBdLFxuICAgICAgZXhwb25lbnQgPSBkWzFdLFxuICAgICAgaSA9IGV4cG9uZW50IC0gKHByZWZpeEV4cG9uZW50ID0gTWF0aC5tYXgoLTgsIE1hdGgubWluKDgsIE1hdGguZmxvb3IoZXhwb25lbnQgLyAzKSkpICogMykgKyAxLFxuICAgICAgbiA9IGNvZWZmaWNpZW50Lmxlbmd0aDtcbiAgcmV0dXJuIGkgPT09IG4gPyBjb2VmZmljaWVudFxuICAgICAgOiBpID4gbiA/IGNvZWZmaWNpZW50ICsgbmV3IEFycmF5KGkgLSBuICsgMSkuam9pbihcIjBcIilcbiAgICAgIDogaSA+IDAgPyBjb2VmZmljaWVudC5zbGljZSgwLCBpKSArIFwiLlwiICsgY29lZmZpY2llbnQuc2xpY2UoaSlcbiAgICAgIDogXCIwLlwiICsgbmV3IEFycmF5KDEgLSBpKS5qb2luKFwiMFwiKSArIGZvcm1hdERlY2ltYWxQYXJ0cyh4LCBNYXRoLm1heCgwLCBwICsgaSAtIDEpKVswXTsgLy8gbGVzcyB0aGFuIDF5IVxufVxuIiwiaW1wb3J0IHtmb3JtYXREZWNpbWFsUGFydHN9IGZyb20gXCIuL2Zvcm1hdERlY2ltYWwuanNcIjtcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24oeCwgcCkge1xuICB2YXIgZCA9IGZvcm1hdERlY2ltYWxQYXJ0cyh4LCBwKTtcbiAgaWYgKCFkKSByZXR1cm4geCArIFwiXCI7XG4gIHZhciBjb2VmZmljaWVudCA9IGRbMF0sXG4gICAgICBleHBvbmVudCA9IGRbMV07XG4gIHJldHVybiBleHBvbmVudCA8IDAgPyBcIjAuXCIgKyBuZXcgQXJyYXkoLWV4cG9uZW50KS5qb2luKFwiMFwiKSArIGNvZWZmaWNpZW50XG4gICAgICA6IGNvZWZmaWNpZW50Lmxlbmd0aCA+IGV4cG9uZW50ICsgMSA/IGNvZWZmaWNpZW50LnNsaWNlKDAsIGV4cG9uZW50ICsgMSkgKyBcIi5cIiArIGNvZWZmaWNpZW50LnNsaWNlKGV4cG9uZW50ICsgMSlcbiAgICAgIDogY29lZmZpY2llbnQgKyBuZXcgQXJyYXkoZXhwb25lbnQgLSBjb2VmZmljaWVudC5sZW5ndGggKyAyKS5qb2luKFwiMFwiKTtcbn1cbiIsImltcG9ydCBmb3JtYXREZWNpbWFsIGZyb20gXCIuL2Zvcm1hdERlY2ltYWwuanNcIjtcbmltcG9ydCBmb3JtYXRQcmVmaXhBdXRvIGZyb20gXCIuL2Zvcm1hdFByZWZpeEF1dG8uanNcIjtcbmltcG9ydCBmb3JtYXRSb3VuZGVkIGZyb20gXCIuL2Zvcm1hdFJvdW5kZWQuanNcIjtcblxuZXhwb3J0IGRlZmF1bHQge1xuICBcIiVcIjogKHgsIHApID0+ICh4ICogMTAwKS50b0ZpeGVkKHApLFxuICBcImJcIjogKHgpID0+IE1hdGgucm91bmQoeCkudG9TdHJpbmcoMiksXG4gIFwiY1wiOiAoeCkgPT4geCArIFwiXCIsXG4gIFwiZFwiOiBmb3JtYXREZWNpbWFsLFxuICBcImVcIjogKHgsIHApID0+IHgudG9FeHBvbmVudGlhbChwKSxcbiAgXCJmXCI6ICh4LCBwKSA9PiB4LnRvRml4ZWQocCksXG4gIFwiZ1wiOiAoeCwgcCkgPT4geC50b1ByZWNpc2lvbihwKSxcbiAgXCJvXCI6ICh4KSA9PiBNYXRoLnJvdW5kKHgpLnRvU3RyaW5nKDgpLFxuICBcInBcIjogKHgsIHApID0+IGZvcm1hdFJvdW5kZWQoeCAqIDEwMCwgcCksXG4gIFwiclwiOiBmb3JtYXRSb3VuZGVkLFxuICBcInNcIjogZm9ybWF0UHJlZml4QXV0byxcbiAgXCJYXCI6ICh4KSA9PiBNYXRoLnJvdW5kKHgpLnRvU3RyaW5nKDE2KS50b1VwcGVyQ2FzZSgpLFxuICBcInhcIjogKHgpID0+IE1hdGgucm91bmQoeCkudG9TdHJpbmcoMTYpXG59O1xuIiwiZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24oeCkge1xuICByZXR1cm4geDtcbn1cbiIsImltcG9ydCBleHBvbmVudCBmcm9tIFwiLi9leHBvbmVudC5qc1wiO1xuaW1wb3J0IGZvcm1hdEdyb3VwIGZyb20gXCIuL2Zvcm1hdEdyb3VwLmpzXCI7XG5pbXBvcnQgZm9ybWF0TnVtZXJhbHMgZnJvbSBcIi4vZm9ybWF0TnVtZXJhbHMuanNcIjtcbmltcG9ydCBmb3JtYXRTcGVjaWZpZXIgZnJvbSBcIi4vZm9ybWF0U3BlY2lmaWVyLmpzXCI7XG5pbXBvcnQgZm9ybWF0VHJpbSBmcm9tIFwiLi9mb3JtYXRUcmltLmpzXCI7XG5pbXBvcnQgZm9ybWF0VHlwZXMgZnJvbSBcIi4vZm9ybWF0VHlwZXMuanNcIjtcbmltcG9ydCB7cHJlZml4RXhwb25lbnR9IGZyb20gXCIuL2Zvcm1hdFByZWZpeEF1dG8uanNcIjtcbmltcG9ydCBpZGVudGl0eSBmcm9tIFwiLi9pZGVudGl0eS5qc1wiO1xuXG52YXIgbWFwID0gQXJyYXkucHJvdG90eXBlLm1hcCxcbiAgICBwcmVmaXhlcyA9IFtcInlcIixcInpcIixcImFcIixcImZcIixcInBcIixcIm5cIixcIsK1XCIsXCJtXCIsXCJcIixcImtcIixcIk1cIixcIkdcIixcIlRcIixcIlBcIixcIkVcIixcIlpcIixcIllcIl07XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uKGxvY2FsZSkge1xuICB2YXIgZ3JvdXAgPSBsb2NhbGUuZ3JvdXBpbmcgPT09IHVuZGVmaW5lZCB8fCBsb2NhbGUudGhvdXNhbmRzID09PSB1bmRlZmluZWQgPyBpZGVudGl0eSA6IGZvcm1hdEdyb3VwKG1hcC5jYWxsKGxvY2FsZS5ncm91cGluZywgTnVtYmVyKSwgbG9jYWxlLnRob3VzYW5kcyArIFwiXCIpLFxuICAgICAgY3VycmVuY3lQcmVmaXggPSBsb2NhbGUuY3VycmVuY3kgPT09IHVuZGVmaW5lZCA/IFwiXCIgOiBsb2NhbGUuY3VycmVuY3lbMF0gKyBcIlwiLFxuICAgICAgY3VycmVuY3lTdWZmaXggPSBsb2NhbGUuY3VycmVuY3kgPT09IHVuZGVmaW5lZCA/IFwiXCIgOiBsb2NhbGUuY3VycmVuY3lbMV0gKyBcIlwiLFxuICAgICAgZGVjaW1hbCA9IGxvY2FsZS5kZWNpbWFsID09PSB1bmRlZmluZWQgPyBcIi5cIiA6IGxvY2FsZS5kZWNpbWFsICsgXCJcIixcbiAgICAgIG51bWVyYWxzID0gbG9jYWxlLm51bWVyYWxzID09PSB1bmRlZmluZWQgPyBpZGVudGl0eSA6IGZvcm1hdE51bWVyYWxzKG1hcC5jYWxsKGxvY2FsZS5udW1lcmFscywgU3RyaW5nKSksXG4gICAgICBwZXJjZW50ID0gbG9jYWxlLnBlcmNlbnQgPT09IHVuZGVmaW5lZCA/IFwiJVwiIDogbG9jYWxlLnBlcmNlbnQgKyBcIlwiLFxuICAgICAgbWludXMgPSBsb2NhbGUubWludXMgPT09IHVuZGVmaW5lZCA/IFwi4oiSXCIgOiBsb2NhbGUubWludXMgKyBcIlwiLFxuICAgICAgbmFuID0gbG9jYWxlLm5hbiA9PT0gdW5kZWZpbmVkID8gXCJOYU5cIiA6IGxvY2FsZS5uYW4gKyBcIlwiO1xuXG4gIGZ1bmN0aW9uIG5ld0Zvcm1hdChzcGVjaWZpZXIpIHtcbiAgICBzcGVjaWZpZXIgPSBmb3JtYXRTcGVjaWZpZXIoc3BlY2lmaWVyKTtcblxuICAgIHZhciBmaWxsID0gc3BlY2lmaWVyLmZpbGwsXG4gICAgICAgIGFsaWduID0gc3BlY2lmaWVyLmFsaWduLFxuICAgICAgICBzaWduID0gc3BlY2lmaWVyLnNpZ24sXG4gICAgICAgIHN5bWJvbCA9IHNwZWNpZmllci5zeW1ib2wsXG4gICAgICAgIHplcm8gPSBzcGVjaWZpZXIuemVybyxcbiAgICAgICAgd2lkdGggPSBzcGVjaWZpZXIud2lkdGgsXG4gICAgICAgIGNvbW1hID0gc3BlY2lmaWVyLmNvbW1hLFxuICAgICAgICBwcmVjaXNpb24gPSBzcGVjaWZpZXIucHJlY2lzaW9uLFxuICAgICAgICB0cmltID0gc3BlY2lmaWVyLnRyaW0sXG4gICAgICAgIHR5cGUgPSBzcGVjaWZpZXIudHlwZTtcblxuICAgIC8vIFRoZSBcIm5cIiB0eXBlIGlzIGFuIGFsaWFzIGZvciBcIixnXCIuXG4gICAgaWYgKHR5cGUgPT09IFwiblwiKSBjb21tYSA9IHRydWUsIHR5cGUgPSBcImdcIjtcblxuICAgIC8vIFRoZSBcIlwiIHR5cGUsIGFuZCBhbnkgaW52YWxpZCB0eXBlLCBpcyBhbiBhbGlhcyBmb3IgXCIuMTJ+Z1wiLlxuICAgIGVsc2UgaWYgKCFmb3JtYXRUeXBlc1t0eXBlXSkgcHJlY2lzaW9uID09PSB1bmRlZmluZWQgJiYgKHByZWNpc2lvbiA9IDEyKSwgdHJpbSA9IHRydWUsIHR5cGUgPSBcImdcIjtcblxuICAgIC8vIElmIHplcm8gZmlsbCBpcyBzcGVjaWZpZWQsIHBhZGRpbmcgZ29lcyBhZnRlciBzaWduIGFuZCBiZWZvcmUgZGlnaXRzLlxuICAgIGlmICh6ZXJvIHx8IChmaWxsID09PSBcIjBcIiAmJiBhbGlnbiA9PT0gXCI9XCIpKSB6ZXJvID0gdHJ1ZSwgZmlsbCA9IFwiMFwiLCBhbGlnbiA9IFwiPVwiO1xuXG4gICAgLy8gQ29tcHV0ZSB0aGUgcHJlZml4IGFuZCBzdWZmaXguXG4gICAgLy8gRm9yIFNJLXByZWZpeCwgdGhlIHN1ZmZpeCBpcyBsYXppbHkgY29tcHV0ZWQuXG4gICAgdmFyIHByZWZpeCA9IHN5bWJvbCA9PT0gXCIkXCIgPyBjdXJyZW5jeVByZWZpeCA6IHN5bWJvbCA9PT0gXCIjXCIgJiYgL1tib3hYXS8udGVzdCh0eXBlKSA/IFwiMFwiICsgdHlwZS50b0xvd2VyQ2FzZSgpIDogXCJcIixcbiAgICAgICAgc3VmZml4ID0gc3ltYm9sID09PSBcIiRcIiA/IGN1cnJlbmN5U3VmZml4IDogL1slcF0vLnRlc3QodHlwZSkgPyBwZXJjZW50IDogXCJcIjtcblxuICAgIC8vIFdoYXQgZm9ybWF0IGZ1bmN0aW9uIHNob3VsZCB3ZSB1c2U/XG4gICAgLy8gSXMgdGhpcyBhbiBpbnRlZ2VyIHR5cGU/XG4gICAgLy8gQ2FuIHRoaXMgdHlwZSBnZW5lcmF0ZSBleHBvbmVudGlhbCBub3RhdGlvbj9cbiAgICB2YXIgZm9ybWF0VHlwZSA9IGZvcm1hdFR5cGVzW3R5cGVdLFxuICAgICAgICBtYXliZVN1ZmZpeCA9IC9bZGVmZ3BycyVdLy50ZXN0KHR5cGUpO1xuXG4gICAgLy8gU2V0IHRoZSBkZWZhdWx0IHByZWNpc2lvbiBpZiBub3Qgc3BlY2lmaWVkLFxuICAgIC8vIG9yIGNsYW1wIHRoZSBzcGVjaWZpZWQgcHJlY2lzaW9uIHRvIHRoZSBzdXBwb3J0ZWQgcmFuZ2UuXG4gICAgLy8gRm9yIHNpZ25pZmljYW50IHByZWNpc2lvbiwgaXQgbXVzdCBiZSBpbiBbMSwgMjFdLlxuICAgIC8vIEZvciBmaXhlZCBwcmVjaXNpb24sIGl0IG11c3QgYmUgaW4gWzAsIDIwXS5cbiAgICBwcmVjaXNpb24gPSBwcmVjaXNpb24gPT09IHVuZGVmaW5lZCA/IDZcbiAgICAgICAgOiAvW2dwcnNdLy50ZXN0KHR5cGUpID8gTWF0aC5tYXgoMSwgTWF0aC5taW4oMjEsIHByZWNpc2lvbikpXG4gICAgICAgIDogTWF0aC5tYXgoMCwgTWF0aC5taW4oMjAsIHByZWNpc2lvbikpO1xuXG4gICAgZnVuY3Rpb24gZm9ybWF0KHZhbHVlKSB7XG4gICAgICB2YXIgdmFsdWVQcmVmaXggPSBwcmVmaXgsXG4gICAgICAgICAgdmFsdWVTdWZmaXggPSBzdWZmaXgsXG4gICAgICAgICAgaSwgbiwgYztcblxuICAgICAgaWYgKHR5cGUgPT09IFwiY1wiKSB7XG4gICAgICAgIHZhbHVlU3VmZml4ID0gZm9ybWF0VHlwZSh2YWx1ZSkgKyB2YWx1ZVN1ZmZpeDtcbiAgICAgICAgdmFsdWUgPSBcIlwiO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdmFsdWUgPSArdmFsdWU7XG5cbiAgICAgICAgLy8gRGV0ZXJtaW5lIHRoZSBzaWduLiAtMCBpcyBub3QgbGVzcyB0aGFuIDAsIGJ1dCAxIC8gLTAgaXMhXG4gICAgICAgIHZhciB2YWx1ZU5lZ2F0aXZlID0gdmFsdWUgPCAwIHx8IDEgLyB2YWx1ZSA8IDA7XG5cbiAgICAgICAgLy8gUGVyZm9ybSB0aGUgaW5pdGlhbCBmb3JtYXR0aW5nLlxuICAgICAgICB2YWx1ZSA9IGlzTmFOKHZhbHVlKSA/IG5hbiA6IGZvcm1hdFR5cGUoTWF0aC5hYnModmFsdWUpLCBwcmVjaXNpb24pO1xuXG4gICAgICAgIC8vIFRyaW0gaW5zaWduaWZpY2FudCB6ZXJvcy5cbiAgICAgICAgaWYgKHRyaW0pIHZhbHVlID0gZm9ybWF0VHJpbSh2YWx1ZSk7XG5cbiAgICAgICAgLy8gSWYgYSBuZWdhdGl2ZSB2YWx1ZSByb3VuZHMgdG8gemVybyBhZnRlciBmb3JtYXR0aW5nLCBhbmQgbm8gZXhwbGljaXQgcG9zaXRpdmUgc2lnbiBpcyByZXF1ZXN0ZWQsIGhpZGUgdGhlIHNpZ24uXG4gICAgICAgIGlmICh2YWx1ZU5lZ2F0aXZlICYmICt2YWx1ZSA9PT0gMCAmJiBzaWduICE9PSBcIitcIikgdmFsdWVOZWdhdGl2ZSA9IGZhbHNlO1xuXG4gICAgICAgIC8vIENvbXB1dGUgdGhlIHByZWZpeCBhbmQgc3VmZml4LlxuICAgICAgICB2YWx1ZVByZWZpeCA9ICh2YWx1ZU5lZ2F0aXZlID8gKHNpZ24gPT09IFwiKFwiID8gc2lnbiA6IG1pbnVzKSA6IHNpZ24gPT09IFwiLVwiIHx8IHNpZ24gPT09IFwiKFwiID8gXCJcIiA6IHNpZ24pICsgdmFsdWVQcmVmaXg7XG4gICAgICAgIHZhbHVlU3VmZml4ID0gKHR5cGUgPT09IFwic1wiID8gcHJlZml4ZXNbOCArIHByZWZpeEV4cG9uZW50IC8gM10gOiBcIlwiKSArIHZhbHVlU3VmZml4ICsgKHZhbHVlTmVnYXRpdmUgJiYgc2lnbiA9PT0gXCIoXCIgPyBcIilcIiA6IFwiXCIpO1xuXG4gICAgICAgIC8vIEJyZWFrIHRoZSBmb3JtYXR0ZWQgdmFsdWUgaW50byB0aGUgaW50ZWdlciDigJx2YWx1ZeKAnSBwYXJ0IHRoYXQgY2FuIGJlXG4gICAgICAgIC8vIGdyb3VwZWQsIGFuZCBmcmFjdGlvbmFsIG9yIGV4cG9uZW50aWFsIOKAnHN1ZmZpeOKAnSBwYXJ0IHRoYXQgaXMgbm90LlxuICAgICAgICBpZiAobWF5YmVTdWZmaXgpIHtcbiAgICAgICAgICBpID0gLTEsIG4gPSB2YWx1ZS5sZW5ndGg7XG4gICAgICAgICAgd2hpbGUgKCsraSA8IG4pIHtcbiAgICAgICAgICAgIGlmIChjID0gdmFsdWUuY2hhckNvZGVBdChpKSwgNDggPiBjIHx8IGMgPiA1Nykge1xuICAgICAgICAgICAgICB2YWx1ZVN1ZmZpeCA9IChjID09PSA0NiA/IGRlY2ltYWwgKyB2YWx1ZS5zbGljZShpICsgMSkgOiB2YWx1ZS5zbGljZShpKSkgKyB2YWx1ZVN1ZmZpeDtcbiAgICAgICAgICAgICAgdmFsdWUgPSB2YWx1ZS5zbGljZSgwLCBpKTtcbiAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8vIElmIHRoZSBmaWxsIGNoYXJhY3RlciBpcyBub3QgXCIwXCIsIGdyb3VwaW5nIGlzIGFwcGxpZWQgYmVmb3JlIHBhZGRpbmcuXG4gICAgICBpZiAoY29tbWEgJiYgIXplcm8pIHZhbHVlID0gZ3JvdXAodmFsdWUsIEluZmluaXR5KTtcblxuICAgICAgLy8gQ29tcHV0ZSB0aGUgcGFkZGluZy5cbiAgICAgIHZhciBsZW5ndGggPSB2YWx1ZVByZWZpeC5sZW5ndGggKyB2YWx1ZS5sZW5ndGggKyB2YWx1ZVN1ZmZpeC5sZW5ndGgsXG4gICAgICAgICAgcGFkZGluZyA9IGxlbmd0aCA8IHdpZHRoID8gbmV3IEFycmF5KHdpZHRoIC0gbGVuZ3RoICsgMSkuam9pbihmaWxsKSA6IFwiXCI7XG5cbiAgICAgIC8vIElmIHRoZSBmaWxsIGNoYXJhY3RlciBpcyBcIjBcIiwgZ3JvdXBpbmcgaXMgYXBwbGllZCBhZnRlciBwYWRkaW5nLlxuICAgICAgaWYgKGNvbW1hICYmIHplcm8pIHZhbHVlID0gZ3JvdXAocGFkZGluZyArIHZhbHVlLCBwYWRkaW5nLmxlbmd0aCA/IHdpZHRoIC0gdmFsdWVTdWZmaXgubGVuZ3RoIDogSW5maW5pdHkpLCBwYWRkaW5nID0gXCJcIjtcblxuICAgICAgLy8gUmVjb25zdHJ1Y3QgdGhlIGZpbmFsIG91dHB1dCBiYXNlZCBvbiB0aGUgZGVzaXJlZCBhbGlnbm1lbnQuXG4gICAgICBzd2l0Y2ggKGFsaWduKSB7XG4gICAgICAgIGNhc2UgXCI8XCI6IHZhbHVlID0gdmFsdWVQcmVmaXggKyB2YWx1ZSArIHZhbHVlU3VmZml4ICsgcGFkZGluZzsgYnJlYWs7XG4gICAgICAgIGNhc2UgXCI9XCI6IHZhbHVlID0gdmFsdWVQcmVmaXggKyBwYWRkaW5nICsgdmFsdWUgKyB2YWx1ZVN1ZmZpeDsgYnJlYWs7XG4gICAgICAgIGNhc2UgXCJeXCI6IHZhbHVlID0gcGFkZGluZy5zbGljZSgwLCBsZW5ndGggPSBwYWRkaW5nLmxlbmd0aCA+PiAxKSArIHZhbHVlUHJlZml4ICsgdmFsdWUgKyB2YWx1ZVN1ZmZpeCArIHBhZGRpbmcuc2xpY2UobGVuZ3RoKTsgYnJlYWs7XG4gICAgICAgIGRlZmF1bHQ6IHZhbHVlID0gcGFkZGluZyArIHZhbHVlUHJlZml4ICsgdmFsdWUgKyB2YWx1ZVN1ZmZpeDsgYnJlYWs7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBudW1lcmFscyh2YWx1ZSk7XG4gICAgfVxuXG4gICAgZm9ybWF0LnRvU3RyaW5nID0gZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gc3BlY2lmaWVyICsgXCJcIjtcbiAgICB9O1xuXG4gICAgcmV0dXJuIGZvcm1hdDtcbiAgfVxuXG4gIGZ1bmN0aW9uIGZvcm1hdFByZWZpeChzcGVjaWZpZXIsIHZhbHVlKSB7XG4gICAgdmFyIGYgPSBuZXdGb3JtYXQoKHNwZWNpZmllciA9IGZvcm1hdFNwZWNpZmllcihzcGVjaWZpZXIpLCBzcGVjaWZpZXIudHlwZSA9IFwiZlwiLCBzcGVjaWZpZXIpKSxcbiAgICAgICAgZSA9IE1hdGgubWF4KC04LCBNYXRoLm1pbig4LCBNYXRoLmZsb29yKGV4cG9uZW50KHZhbHVlKSAvIDMpKSkgKiAzLFxuICAgICAgICBrID0gTWF0aC5wb3coMTAsIC1lKSxcbiAgICAgICAgcHJlZml4ID0gcHJlZml4ZXNbOCArIGUgLyAzXTtcbiAgICByZXR1cm4gZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgIHJldHVybiBmKGsgKiB2YWx1ZSkgKyBwcmVmaXg7XG4gICAgfTtcbiAgfVxuXG4gIHJldHVybiB7XG4gICAgZm9ybWF0OiBuZXdGb3JtYXQsXG4gICAgZm9ybWF0UHJlZml4OiBmb3JtYXRQcmVmaXhcbiAgfTtcbn1cbiIsImltcG9ydCBmb3JtYXRMb2NhbGUgZnJvbSBcIi4vbG9jYWxlLmpzXCI7XG5cbnZhciBsb2NhbGU7XG5leHBvcnQgdmFyIGZvcm1hdDtcbmV4cG9ydCB2YXIgZm9ybWF0UHJlZml4O1xuXG5kZWZhdWx0TG9jYWxlKHtcbiAgdGhvdXNhbmRzOiBcIixcIixcbiAgZ3JvdXBpbmc6IFszXSxcbiAgY3VycmVuY3k6IFtcIiRcIiwgXCJcIl1cbn0pO1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBkZWZhdWx0TG9jYWxlKGRlZmluaXRpb24pIHtcbiAgbG9jYWxlID0gZm9ybWF0TG9jYWxlKGRlZmluaXRpb24pO1xuICBmb3JtYXQgPSBsb2NhbGUuZm9ybWF0O1xuICBmb3JtYXRQcmVmaXggPSBsb2NhbGUuZm9ybWF0UHJlZml4O1xuICByZXR1cm4gbG9jYWxlO1xufVxuIiwiaW1wb3J0IGV4cG9uZW50IGZyb20gXCIuL2V4cG9uZW50LmpzXCI7XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uKHN0ZXApIHtcbiAgcmV0dXJuIE1hdGgubWF4KDAsIC1leHBvbmVudChNYXRoLmFicyhzdGVwKSkpO1xufVxuIiwiaW1wb3J0IGV4cG9uZW50IGZyb20gXCIuL2V4cG9uZW50LmpzXCI7XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uKHN0ZXAsIHZhbHVlKSB7XG4gIHJldHVybiBNYXRoLm1heCgwLCBNYXRoLm1heCgtOCwgTWF0aC5taW4oOCwgTWF0aC5mbG9vcihleHBvbmVudCh2YWx1ZSkgLyAzKSkpICogMyAtIGV4cG9uZW50KE1hdGguYWJzKHN0ZXApKSk7XG59XG4iLCJpbXBvcnQgZXhwb25lbnQgZnJvbSBcIi4vZXhwb25lbnQuanNcIjtcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24oc3RlcCwgbWF4KSB7XG4gIHN0ZXAgPSBNYXRoLmFicyhzdGVwKSwgbWF4ID0gTWF0aC5hYnMobWF4KSAtIHN0ZXA7XG4gIHJldHVybiBNYXRoLm1heCgwLCBleHBvbmVudChtYXgpIC0gZXhwb25lbnQoc3RlcCkpICsgMTtcbn1cbiIsImltcG9ydCB7dGlja1N0ZXB9IGZyb20gXCJkMy1hcnJheVwiO1xuaW1wb3J0IHtmb3JtYXQsIGZvcm1hdFByZWZpeCwgZm9ybWF0U3BlY2lmaWVyLCBwcmVjaXNpb25GaXhlZCwgcHJlY2lzaW9uUHJlZml4LCBwcmVjaXNpb25Sb3VuZH0gZnJvbSBcImQzLWZvcm1hdFwiO1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiB0aWNrRm9ybWF0KHN0YXJ0LCBzdG9wLCBjb3VudCwgc3BlY2lmaWVyKSB7XG4gIHZhciBzdGVwID0gdGlja1N0ZXAoc3RhcnQsIHN0b3AsIGNvdW50KSxcbiAgICAgIHByZWNpc2lvbjtcbiAgc3BlY2lmaWVyID0gZm9ybWF0U3BlY2lmaWVyKHNwZWNpZmllciA9PSBudWxsID8gXCIsZlwiIDogc3BlY2lmaWVyKTtcbiAgc3dpdGNoIChzcGVjaWZpZXIudHlwZSkge1xuICAgIGNhc2UgXCJzXCI6IHtcbiAgICAgIHZhciB2YWx1ZSA9IE1hdGgubWF4KE1hdGguYWJzKHN0YXJ0KSwgTWF0aC5hYnMoc3RvcCkpO1xuICAgICAgaWYgKHNwZWNpZmllci5wcmVjaXNpb24gPT0gbnVsbCAmJiAhaXNOYU4ocHJlY2lzaW9uID0gcHJlY2lzaW9uUHJlZml4KHN0ZXAsIHZhbHVlKSkpIHNwZWNpZmllci5wcmVjaXNpb24gPSBwcmVjaXNpb247XG4gICAgICByZXR1cm4gZm9ybWF0UHJlZml4KHNwZWNpZmllciwgdmFsdWUpO1xuICAgIH1cbiAgICBjYXNlIFwiXCI6XG4gICAgY2FzZSBcImVcIjpcbiAgICBjYXNlIFwiZ1wiOlxuICAgIGNhc2UgXCJwXCI6XG4gICAgY2FzZSBcInJcIjoge1xuICAgICAgaWYgKHNwZWNpZmllci5wcmVjaXNpb24gPT0gbnVsbCAmJiAhaXNOYU4ocHJlY2lzaW9uID0gcHJlY2lzaW9uUm91bmQoc3RlcCwgTWF0aC5tYXgoTWF0aC5hYnMoc3RhcnQpLCBNYXRoLmFicyhzdG9wKSkpKSkgc3BlY2lmaWVyLnByZWNpc2lvbiA9IHByZWNpc2lvbiAtIChzcGVjaWZpZXIudHlwZSA9PT0gXCJlXCIpO1xuICAgICAgYnJlYWs7XG4gICAgfVxuICAgIGNhc2UgXCJmXCI6XG4gICAgY2FzZSBcIiVcIjoge1xuICAgICAgaWYgKHNwZWNpZmllci5wcmVjaXNpb24gPT0gbnVsbCAmJiAhaXNOYU4ocHJlY2lzaW9uID0gcHJlY2lzaW9uRml4ZWQoc3RlcCkpKSBzcGVjaWZpZXIucHJlY2lzaW9uID0gcHJlY2lzaW9uIC0gKHNwZWNpZmllci50eXBlID09PSBcIiVcIikgKiAyO1xuICAgICAgYnJlYWs7XG4gICAgfVxuICB9XG4gIHJldHVybiBmb3JtYXQoc3BlY2lmaWVyKTtcbn1cbiIsImltcG9ydCB7dGlja3MsIHRpY2tJbmNyZW1lbnR9IGZyb20gXCJkMy1hcnJheVwiO1xuaW1wb3J0IGNvbnRpbnVvdXMsIHtjb3B5fSBmcm9tIFwiLi9jb250aW51b3VzLmpzXCI7XG5pbXBvcnQge2luaXRSYW5nZX0gZnJvbSBcIi4vaW5pdC5qc1wiO1xuaW1wb3J0IHRpY2tGb3JtYXQgZnJvbSBcIi4vdGlja0Zvcm1hdC5qc1wiO1xuXG5leHBvcnQgZnVuY3Rpb24gbGluZWFyaXNoKHNjYWxlKSB7XG4gIHZhciBkb21haW4gPSBzY2FsZS5kb21haW47XG5cbiAgc2NhbGUudGlja3MgPSBmdW5jdGlvbihjb3VudCkge1xuICAgIHZhciBkID0gZG9tYWluKCk7XG4gICAgcmV0dXJuIHRpY2tzKGRbMF0sIGRbZC5sZW5ndGggLSAxXSwgY291bnQgPT0gbnVsbCA/IDEwIDogY291bnQpO1xuICB9O1xuXG4gIHNjYWxlLnRpY2tGb3JtYXQgPSBmdW5jdGlvbihjb3VudCwgc3BlY2lmaWVyKSB7XG4gICAgdmFyIGQgPSBkb21haW4oKTtcbiAgICByZXR1cm4gdGlja0Zvcm1hdChkWzBdLCBkW2QubGVuZ3RoIC0gMV0sIGNvdW50ID09IG51bGwgPyAxMCA6IGNvdW50LCBzcGVjaWZpZXIpO1xuICB9O1xuXG4gIHNjYWxlLm5pY2UgPSBmdW5jdGlvbihjb3VudCkge1xuICAgIGlmIChjb3VudCA9PSBudWxsKSBjb3VudCA9IDEwO1xuXG4gICAgdmFyIGQgPSBkb21haW4oKTtcbiAgICB2YXIgaTAgPSAwO1xuICAgIHZhciBpMSA9IGQubGVuZ3RoIC0gMTtcbiAgICB2YXIgc3RhcnQgPSBkW2kwXTtcbiAgICB2YXIgc3RvcCA9IGRbaTFdO1xuICAgIHZhciBwcmVzdGVwO1xuICAgIHZhciBzdGVwO1xuICAgIHZhciBtYXhJdGVyID0gMTA7XG5cbiAgICBpZiAoc3RvcCA8IHN0YXJ0KSB7XG4gICAgICBzdGVwID0gc3RhcnQsIHN0YXJ0ID0gc3RvcCwgc3RvcCA9IHN0ZXA7XG4gICAgICBzdGVwID0gaTAsIGkwID0gaTEsIGkxID0gc3RlcDtcbiAgICB9XG4gICAgXG4gICAgd2hpbGUgKG1heEl0ZXItLSA+IDApIHtcbiAgICAgIHN0ZXAgPSB0aWNrSW5jcmVtZW50KHN0YXJ0LCBzdG9wLCBjb3VudCk7XG4gICAgICBpZiAoc3RlcCA9PT0gcHJlc3RlcCkge1xuICAgICAgICBkW2kwXSA9IHN0YXJ0XG4gICAgICAgIGRbaTFdID0gc3RvcFxuICAgICAgICByZXR1cm4gZG9tYWluKGQpO1xuICAgICAgfSBlbHNlIGlmIChzdGVwID4gMCkge1xuICAgICAgICBzdGFydCA9IE1hdGguZmxvb3Ioc3RhcnQgLyBzdGVwKSAqIHN0ZXA7XG4gICAgICAgIHN0b3AgPSBNYXRoLmNlaWwoc3RvcCAvIHN0ZXApICogc3RlcDtcbiAgICAgIH0gZWxzZSBpZiAoc3RlcCA8IDApIHtcbiAgICAgICAgc3RhcnQgPSBNYXRoLmNlaWwoc3RhcnQgKiBzdGVwKSAvIHN0ZXA7XG4gICAgICAgIHN0b3AgPSBNYXRoLmZsb29yKHN0b3AgKiBzdGVwKSAvIHN0ZXA7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICAgIHByZXN0ZXAgPSBzdGVwO1xuICAgIH1cblxuICAgIHJldHVybiBzY2FsZTtcbiAgfTtcblxuICByZXR1cm4gc2NhbGU7XG59XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGxpbmVhcigpIHtcbiAgdmFyIHNjYWxlID0gY29udGludW91cygpO1xuXG4gIHNjYWxlLmNvcHkgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gY29weShzY2FsZSwgbGluZWFyKCkpO1xuICB9O1xuXG4gIGluaXRSYW5nZS5hcHBseShzY2FsZSwgYXJndW1lbnRzKTtcblxuICByZXR1cm4gbGluZWFyaXNoKHNjYWxlKTtcbn1cbiIsImV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIG5pY2UoZG9tYWluLCBpbnRlcnZhbCkge1xuICBkb21haW4gPSBkb21haW4uc2xpY2UoKTtcblxuICB2YXIgaTAgPSAwLFxuICAgICAgaTEgPSBkb21haW4ubGVuZ3RoIC0gMSxcbiAgICAgIHgwID0gZG9tYWluW2kwXSxcbiAgICAgIHgxID0gZG9tYWluW2kxXSxcbiAgICAgIHQ7XG5cbiAgaWYgKHgxIDwgeDApIHtcbiAgICB0ID0gaTAsIGkwID0gaTEsIGkxID0gdDtcbiAgICB0ID0geDAsIHgwID0geDEsIHgxID0gdDtcbiAgfVxuXG4gIGRvbWFpbltpMF0gPSBpbnRlcnZhbC5mbG9vcih4MCk7XG4gIGRvbWFpbltpMV0gPSBpbnRlcnZhbC5jZWlsKHgxKTtcbiAgcmV0dXJuIGRvbWFpbjtcbn1cbiIsImltcG9ydCB7XG4gIHRpbWVEYXksXG4gIHRpbWVTdW5kYXksXG4gIHRpbWVNb25kYXksXG4gIHRpbWVUaHVyc2RheSxcbiAgdGltZVllYXIsXG4gIHV0Y0RheSxcbiAgdXRjU3VuZGF5LFxuICB1dGNNb25kYXksXG4gIHV0Y1RodXJzZGF5LFxuICB1dGNZZWFyXG59IGZyb20gXCJkMy10aW1lXCI7XG5cbmZ1bmN0aW9uIGxvY2FsRGF0ZShkKSB7XG4gIGlmICgwIDw9IGQueSAmJiBkLnkgPCAxMDApIHtcbiAgICB2YXIgZGF0ZSA9IG5ldyBEYXRlKC0xLCBkLm0sIGQuZCwgZC5ILCBkLk0sIGQuUywgZC5MKTtcbiAgICBkYXRlLnNldEZ1bGxZZWFyKGQueSk7XG4gICAgcmV0dXJuIGRhdGU7XG4gIH1cbiAgcmV0dXJuIG5ldyBEYXRlKGQueSwgZC5tLCBkLmQsIGQuSCwgZC5NLCBkLlMsIGQuTCk7XG59XG5cbmZ1bmN0aW9uIHV0Y0RhdGUoZCkge1xuICBpZiAoMCA8PSBkLnkgJiYgZC55IDwgMTAwKSB7XG4gICAgdmFyIGRhdGUgPSBuZXcgRGF0ZShEYXRlLlVUQygtMSwgZC5tLCBkLmQsIGQuSCwgZC5NLCBkLlMsIGQuTCkpO1xuICAgIGRhdGUuc2V0VVRDRnVsbFllYXIoZC55KTtcbiAgICByZXR1cm4gZGF0ZTtcbiAgfVxuICByZXR1cm4gbmV3IERhdGUoRGF0ZS5VVEMoZC55LCBkLm0sIGQuZCwgZC5ILCBkLk0sIGQuUywgZC5MKSk7XG59XG5cbmZ1bmN0aW9uIG5ld0RhdGUoeSwgbSwgZCkge1xuICByZXR1cm4ge3k6IHksIG06IG0sIGQ6IGQsIEg6IDAsIE06IDAsIFM6IDAsIEw6IDB9O1xufVxuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBmb3JtYXRMb2NhbGUobG9jYWxlKSB7XG4gIHZhciBsb2NhbGVfZGF0ZVRpbWUgPSBsb2NhbGUuZGF0ZVRpbWUsXG4gICAgICBsb2NhbGVfZGF0ZSA9IGxvY2FsZS5kYXRlLFxuICAgICAgbG9jYWxlX3RpbWUgPSBsb2NhbGUudGltZSxcbiAgICAgIGxvY2FsZV9wZXJpb2RzID0gbG9jYWxlLnBlcmlvZHMsXG4gICAgICBsb2NhbGVfd2Vla2RheXMgPSBsb2NhbGUuZGF5cyxcbiAgICAgIGxvY2FsZV9zaG9ydFdlZWtkYXlzID0gbG9jYWxlLnNob3J0RGF5cyxcbiAgICAgIGxvY2FsZV9tb250aHMgPSBsb2NhbGUubW9udGhzLFxuICAgICAgbG9jYWxlX3Nob3J0TW9udGhzID0gbG9jYWxlLnNob3J0TW9udGhzO1xuXG4gIHZhciBwZXJpb2RSZSA9IGZvcm1hdFJlKGxvY2FsZV9wZXJpb2RzKSxcbiAgICAgIHBlcmlvZExvb2t1cCA9IGZvcm1hdExvb2t1cChsb2NhbGVfcGVyaW9kcyksXG4gICAgICB3ZWVrZGF5UmUgPSBmb3JtYXRSZShsb2NhbGVfd2Vla2RheXMpLFxuICAgICAgd2Vla2RheUxvb2t1cCA9IGZvcm1hdExvb2t1cChsb2NhbGVfd2Vla2RheXMpLFxuICAgICAgc2hvcnRXZWVrZGF5UmUgPSBmb3JtYXRSZShsb2NhbGVfc2hvcnRXZWVrZGF5cyksXG4gICAgICBzaG9ydFdlZWtkYXlMb29rdXAgPSBmb3JtYXRMb29rdXAobG9jYWxlX3Nob3J0V2Vla2RheXMpLFxuICAgICAgbW9udGhSZSA9IGZvcm1hdFJlKGxvY2FsZV9tb250aHMpLFxuICAgICAgbW9udGhMb29rdXAgPSBmb3JtYXRMb29rdXAobG9jYWxlX21vbnRocyksXG4gICAgICBzaG9ydE1vbnRoUmUgPSBmb3JtYXRSZShsb2NhbGVfc2hvcnRNb250aHMpLFxuICAgICAgc2hvcnRNb250aExvb2t1cCA9IGZvcm1hdExvb2t1cChsb2NhbGVfc2hvcnRNb250aHMpO1xuXG4gIHZhciBmb3JtYXRzID0ge1xuICAgIFwiYVwiOiBmb3JtYXRTaG9ydFdlZWtkYXksXG4gICAgXCJBXCI6IGZvcm1hdFdlZWtkYXksXG4gICAgXCJiXCI6IGZvcm1hdFNob3J0TW9udGgsXG4gICAgXCJCXCI6IGZvcm1hdE1vbnRoLFxuICAgIFwiY1wiOiBudWxsLFxuICAgIFwiZFwiOiBmb3JtYXREYXlPZk1vbnRoLFxuICAgIFwiZVwiOiBmb3JtYXREYXlPZk1vbnRoLFxuICAgIFwiZlwiOiBmb3JtYXRNaWNyb3NlY29uZHMsXG4gICAgXCJnXCI6IGZvcm1hdFllYXJJU08sXG4gICAgXCJHXCI6IGZvcm1hdEZ1bGxZZWFySVNPLFxuICAgIFwiSFwiOiBmb3JtYXRIb3VyMjQsXG4gICAgXCJJXCI6IGZvcm1hdEhvdXIxMixcbiAgICBcImpcIjogZm9ybWF0RGF5T2ZZZWFyLFxuICAgIFwiTFwiOiBmb3JtYXRNaWxsaXNlY29uZHMsXG4gICAgXCJtXCI6IGZvcm1hdE1vbnRoTnVtYmVyLFxuICAgIFwiTVwiOiBmb3JtYXRNaW51dGVzLFxuICAgIFwicFwiOiBmb3JtYXRQZXJpb2QsXG4gICAgXCJxXCI6IGZvcm1hdFF1YXJ0ZXIsXG4gICAgXCJRXCI6IGZvcm1hdFVuaXhUaW1lc3RhbXAsXG4gICAgXCJzXCI6IGZvcm1hdFVuaXhUaW1lc3RhbXBTZWNvbmRzLFxuICAgIFwiU1wiOiBmb3JtYXRTZWNvbmRzLFxuICAgIFwidVwiOiBmb3JtYXRXZWVrZGF5TnVtYmVyTW9uZGF5LFxuICAgIFwiVVwiOiBmb3JtYXRXZWVrTnVtYmVyU3VuZGF5LFxuICAgIFwiVlwiOiBmb3JtYXRXZWVrTnVtYmVySVNPLFxuICAgIFwid1wiOiBmb3JtYXRXZWVrZGF5TnVtYmVyU3VuZGF5LFxuICAgIFwiV1wiOiBmb3JtYXRXZWVrTnVtYmVyTW9uZGF5LFxuICAgIFwieFwiOiBudWxsLFxuICAgIFwiWFwiOiBudWxsLFxuICAgIFwieVwiOiBmb3JtYXRZZWFyLFxuICAgIFwiWVwiOiBmb3JtYXRGdWxsWWVhcixcbiAgICBcIlpcIjogZm9ybWF0Wm9uZSxcbiAgICBcIiVcIjogZm9ybWF0TGl0ZXJhbFBlcmNlbnRcbiAgfTtcblxuICB2YXIgdXRjRm9ybWF0cyA9IHtcbiAgICBcImFcIjogZm9ybWF0VVRDU2hvcnRXZWVrZGF5LFxuICAgIFwiQVwiOiBmb3JtYXRVVENXZWVrZGF5LFxuICAgIFwiYlwiOiBmb3JtYXRVVENTaG9ydE1vbnRoLFxuICAgIFwiQlwiOiBmb3JtYXRVVENNb250aCxcbiAgICBcImNcIjogbnVsbCxcbiAgICBcImRcIjogZm9ybWF0VVRDRGF5T2ZNb250aCxcbiAgICBcImVcIjogZm9ybWF0VVRDRGF5T2ZNb250aCxcbiAgICBcImZcIjogZm9ybWF0VVRDTWljcm9zZWNvbmRzLFxuICAgIFwiZ1wiOiBmb3JtYXRVVENZZWFySVNPLFxuICAgIFwiR1wiOiBmb3JtYXRVVENGdWxsWWVhcklTTyxcbiAgICBcIkhcIjogZm9ybWF0VVRDSG91cjI0LFxuICAgIFwiSVwiOiBmb3JtYXRVVENIb3VyMTIsXG4gICAgXCJqXCI6IGZvcm1hdFVUQ0RheU9mWWVhcixcbiAgICBcIkxcIjogZm9ybWF0VVRDTWlsbGlzZWNvbmRzLFxuICAgIFwibVwiOiBmb3JtYXRVVENNb250aE51bWJlcixcbiAgICBcIk1cIjogZm9ybWF0VVRDTWludXRlcyxcbiAgICBcInBcIjogZm9ybWF0VVRDUGVyaW9kLFxuICAgIFwicVwiOiBmb3JtYXRVVENRdWFydGVyLFxuICAgIFwiUVwiOiBmb3JtYXRVbml4VGltZXN0YW1wLFxuICAgIFwic1wiOiBmb3JtYXRVbml4VGltZXN0YW1wU2Vjb25kcyxcbiAgICBcIlNcIjogZm9ybWF0VVRDU2Vjb25kcyxcbiAgICBcInVcIjogZm9ybWF0VVRDV2Vla2RheU51bWJlck1vbmRheSxcbiAgICBcIlVcIjogZm9ybWF0VVRDV2Vla051bWJlclN1bmRheSxcbiAgICBcIlZcIjogZm9ybWF0VVRDV2Vla051bWJlcklTTyxcbiAgICBcIndcIjogZm9ybWF0VVRDV2Vla2RheU51bWJlclN1bmRheSxcbiAgICBcIldcIjogZm9ybWF0VVRDV2Vla051bWJlck1vbmRheSxcbiAgICBcInhcIjogbnVsbCxcbiAgICBcIlhcIjogbnVsbCxcbiAgICBcInlcIjogZm9ybWF0VVRDWWVhcixcbiAgICBcIllcIjogZm9ybWF0VVRDRnVsbFllYXIsXG4gICAgXCJaXCI6IGZvcm1hdFVUQ1pvbmUsXG4gICAgXCIlXCI6IGZvcm1hdExpdGVyYWxQZXJjZW50XG4gIH07XG5cbiAgdmFyIHBhcnNlcyA9IHtcbiAgICBcImFcIjogcGFyc2VTaG9ydFdlZWtkYXksXG4gICAgXCJBXCI6IHBhcnNlV2Vla2RheSxcbiAgICBcImJcIjogcGFyc2VTaG9ydE1vbnRoLFxuICAgIFwiQlwiOiBwYXJzZU1vbnRoLFxuICAgIFwiY1wiOiBwYXJzZUxvY2FsZURhdGVUaW1lLFxuICAgIFwiZFwiOiBwYXJzZURheU9mTW9udGgsXG4gICAgXCJlXCI6IHBhcnNlRGF5T2ZNb250aCxcbiAgICBcImZcIjogcGFyc2VNaWNyb3NlY29uZHMsXG4gICAgXCJnXCI6IHBhcnNlWWVhcixcbiAgICBcIkdcIjogcGFyc2VGdWxsWWVhcixcbiAgICBcIkhcIjogcGFyc2VIb3VyMjQsXG4gICAgXCJJXCI6IHBhcnNlSG91cjI0LFxuICAgIFwialwiOiBwYXJzZURheU9mWWVhcixcbiAgICBcIkxcIjogcGFyc2VNaWxsaXNlY29uZHMsXG4gICAgXCJtXCI6IHBhcnNlTW9udGhOdW1iZXIsXG4gICAgXCJNXCI6IHBhcnNlTWludXRlcyxcbiAgICBcInBcIjogcGFyc2VQZXJpb2QsXG4gICAgXCJxXCI6IHBhcnNlUXVhcnRlcixcbiAgICBcIlFcIjogcGFyc2VVbml4VGltZXN0YW1wLFxuICAgIFwic1wiOiBwYXJzZVVuaXhUaW1lc3RhbXBTZWNvbmRzLFxuICAgIFwiU1wiOiBwYXJzZVNlY29uZHMsXG4gICAgXCJ1XCI6IHBhcnNlV2Vla2RheU51bWJlck1vbmRheSxcbiAgICBcIlVcIjogcGFyc2VXZWVrTnVtYmVyU3VuZGF5LFxuICAgIFwiVlwiOiBwYXJzZVdlZWtOdW1iZXJJU08sXG4gICAgXCJ3XCI6IHBhcnNlV2Vla2RheU51bWJlclN1bmRheSxcbiAgICBcIldcIjogcGFyc2VXZWVrTnVtYmVyTW9uZGF5LFxuICAgIFwieFwiOiBwYXJzZUxvY2FsZURhdGUsXG4gICAgXCJYXCI6IHBhcnNlTG9jYWxlVGltZSxcbiAgICBcInlcIjogcGFyc2VZZWFyLFxuICAgIFwiWVwiOiBwYXJzZUZ1bGxZZWFyLFxuICAgIFwiWlwiOiBwYXJzZVpvbmUsXG4gICAgXCIlXCI6IHBhcnNlTGl0ZXJhbFBlcmNlbnRcbiAgfTtcblxuICAvLyBUaGVzZSByZWN1cnNpdmUgZGlyZWN0aXZlIGRlZmluaXRpb25zIG11c3QgYmUgZGVmZXJyZWQuXG4gIGZvcm1hdHMueCA9IG5ld0Zvcm1hdChsb2NhbGVfZGF0ZSwgZm9ybWF0cyk7XG4gIGZvcm1hdHMuWCA9IG5ld0Zvcm1hdChsb2NhbGVfdGltZSwgZm9ybWF0cyk7XG4gIGZvcm1hdHMuYyA9IG5ld0Zvcm1hdChsb2NhbGVfZGF0ZVRpbWUsIGZvcm1hdHMpO1xuICB1dGNGb3JtYXRzLnggPSBuZXdGb3JtYXQobG9jYWxlX2RhdGUsIHV0Y0Zvcm1hdHMpO1xuICB1dGNGb3JtYXRzLlggPSBuZXdGb3JtYXQobG9jYWxlX3RpbWUsIHV0Y0Zvcm1hdHMpO1xuICB1dGNGb3JtYXRzLmMgPSBuZXdGb3JtYXQobG9jYWxlX2RhdGVUaW1lLCB1dGNGb3JtYXRzKTtcblxuICBmdW5jdGlvbiBuZXdGb3JtYXQoc3BlY2lmaWVyLCBmb3JtYXRzKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKGRhdGUpIHtcbiAgICAgIHZhciBzdHJpbmcgPSBbXSxcbiAgICAgICAgICBpID0gLTEsXG4gICAgICAgICAgaiA9IDAsXG4gICAgICAgICAgbiA9IHNwZWNpZmllci5sZW5ndGgsXG4gICAgICAgICAgYyxcbiAgICAgICAgICBwYWQsXG4gICAgICAgICAgZm9ybWF0O1xuXG4gICAgICBpZiAoIShkYXRlIGluc3RhbmNlb2YgRGF0ZSkpIGRhdGUgPSBuZXcgRGF0ZSgrZGF0ZSk7XG5cbiAgICAgIHdoaWxlICgrK2kgPCBuKSB7XG4gICAgICAgIGlmIChzcGVjaWZpZXIuY2hhckNvZGVBdChpKSA9PT0gMzcpIHtcbiAgICAgICAgICBzdHJpbmcucHVzaChzcGVjaWZpZXIuc2xpY2UoaiwgaSkpO1xuICAgICAgICAgIGlmICgocGFkID0gcGFkc1tjID0gc3BlY2lmaWVyLmNoYXJBdCgrK2kpXSkgIT0gbnVsbCkgYyA9IHNwZWNpZmllci5jaGFyQXQoKytpKTtcbiAgICAgICAgICBlbHNlIHBhZCA9IGMgPT09IFwiZVwiID8gXCIgXCIgOiBcIjBcIjtcbiAgICAgICAgICBpZiAoZm9ybWF0ID0gZm9ybWF0c1tjXSkgYyA9IGZvcm1hdChkYXRlLCBwYWQpO1xuICAgICAgICAgIHN0cmluZy5wdXNoKGMpO1xuICAgICAgICAgIGogPSBpICsgMTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBzdHJpbmcucHVzaChzcGVjaWZpZXIuc2xpY2UoaiwgaSkpO1xuICAgICAgcmV0dXJuIHN0cmluZy5qb2luKFwiXCIpO1xuICAgIH07XG4gIH1cblxuICBmdW5jdGlvbiBuZXdQYXJzZShzcGVjaWZpZXIsIFopIHtcbiAgICByZXR1cm4gZnVuY3Rpb24oc3RyaW5nKSB7XG4gICAgICB2YXIgZCA9IG5ld0RhdGUoMTkwMCwgdW5kZWZpbmVkLCAxKSxcbiAgICAgICAgICBpID0gcGFyc2VTcGVjaWZpZXIoZCwgc3BlY2lmaWVyLCBzdHJpbmcgKz0gXCJcIiwgMCksXG4gICAgICAgICAgd2VlaywgZGF5O1xuICAgICAgaWYgKGkgIT0gc3RyaW5nLmxlbmd0aCkgcmV0dXJuIG51bGw7XG5cbiAgICAgIC8vIElmIGEgVU5JWCB0aW1lc3RhbXAgaXMgc3BlY2lmaWVkLCByZXR1cm4gaXQuXG4gICAgICBpZiAoXCJRXCIgaW4gZCkgcmV0dXJuIG5ldyBEYXRlKGQuUSk7XG4gICAgICBpZiAoXCJzXCIgaW4gZCkgcmV0dXJuIG5ldyBEYXRlKGQucyAqIDEwMDAgKyAoXCJMXCIgaW4gZCA/IGQuTCA6IDApKTtcblxuICAgICAgLy8gSWYgdGhpcyBpcyB1dGNQYXJzZSwgbmV2ZXIgdXNlIHRoZSBsb2NhbCB0aW1lem9uZS5cbiAgICAgIGlmIChaICYmICEoXCJaXCIgaW4gZCkpIGQuWiA9IDA7XG5cbiAgICAgIC8vIFRoZSBhbS1wbSBmbGFnIGlzIDAgZm9yIEFNLCBhbmQgMSBmb3IgUE0uXG4gICAgICBpZiAoXCJwXCIgaW4gZCkgZC5IID0gZC5IICUgMTIgKyBkLnAgKiAxMjtcblxuICAgICAgLy8gSWYgdGhlIG1vbnRoIHdhcyBub3Qgc3BlY2lmaWVkLCBpbmhlcml0IGZyb20gdGhlIHF1YXJ0ZXIuXG4gICAgICBpZiAoZC5tID09PSB1bmRlZmluZWQpIGQubSA9IFwicVwiIGluIGQgPyBkLnEgOiAwO1xuXG4gICAgICAvLyBDb252ZXJ0IGRheS1vZi13ZWVrIGFuZCB3ZWVrLW9mLXllYXIgdG8gZGF5LW9mLXllYXIuXG4gICAgICBpZiAoXCJWXCIgaW4gZCkge1xuICAgICAgICBpZiAoZC5WIDwgMSB8fCBkLlYgPiA1MykgcmV0dXJuIG51bGw7XG4gICAgICAgIGlmICghKFwid1wiIGluIGQpKSBkLncgPSAxO1xuICAgICAgICBpZiAoXCJaXCIgaW4gZCkge1xuICAgICAgICAgIHdlZWsgPSB1dGNEYXRlKG5ld0RhdGUoZC55LCAwLCAxKSksIGRheSA9IHdlZWsuZ2V0VVRDRGF5KCk7XG4gICAgICAgICAgd2VlayA9IGRheSA+IDQgfHwgZGF5ID09PSAwID8gdXRjTW9uZGF5LmNlaWwod2VlaykgOiB1dGNNb25kYXkod2Vlayk7XG4gICAgICAgICAgd2VlayA9IHV0Y0RheS5vZmZzZXQod2VlaywgKGQuViAtIDEpICogNyk7XG4gICAgICAgICAgZC55ID0gd2Vlay5nZXRVVENGdWxsWWVhcigpO1xuICAgICAgICAgIGQubSA9IHdlZWsuZ2V0VVRDTW9udGgoKTtcbiAgICAgICAgICBkLmQgPSB3ZWVrLmdldFVUQ0RhdGUoKSArIChkLncgKyA2KSAlIDc7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgd2VlayA9IGxvY2FsRGF0ZShuZXdEYXRlKGQueSwgMCwgMSkpLCBkYXkgPSB3ZWVrLmdldERheSgpO1xuICAgICAgICAgIHdlZWsgPSBkYXkgPiA0IHx8IGRheSA9PT0gMCA/IHRpbWVNb25kYXkuY2VpbCh3ZWVrKSA6IHRpbWVNb25kYXkod2Vlayk7XG4gICAgICAgICAgd2VlayA9IHRpbWVEYXkub2Zmc2V0KHdlZWssIChkLlYgLSAxKSAqIDcpO1xuICAgICAgICAgIGQueSA9IHdlZWsuZ2V0RnVsbFllYXIoKTtcbiAgICAgICAgICBkLm0gPSB3ZWVrLmdldE1vbnRoKCk7XG4gICAgICAgICAgZC5kID0gd2Vlay5nZXREYXRlKCkgKyAoZC53ICsgNikgJSA3O1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKFwiV1wiIGluIGQgfHwgXCJVXCIgaW4gZCkge1xuICAgICAgICBpZiAoIShcIndcIiBpbiBkKSkgZC53ID0gXCJ1XCIgaW4gZCA/IGQudSAlIDcgOiBcIldcIiBpbiBkID8gMSA6IDA7XG4gICAgICAgIGRheSA9IFwiWlwiIGluIGQgPyB1dGNEYXRlKG5ld0RhdGUoZC55LCAwLCAxKSkuZ2V0VVRDRGF5KCkgOiBsb2NhbERhdGUobmV3RGF0ZShkLnksIDAsIDEpKS5nZXREYXkoKTtcbiAgICAgICAgZC5tID0gMDtcbiAgICAgICAgZC5kID0gXCJXXCIgaW4gZCA/IChkLncgKyA2KSAlIDcgKyBkLlcgKiA3IC0gKGRheSArIDUpICUgNyA6IGQudyArIGQuVSAqIDcgLSAoZGF5ICsgNikgJSA3O1xuICAgICAgfVxuXG4gICAgICAvLyBJZiBhIHRpbWUgem9uZSBpcyBzcGVjaWZpZWQsIGFsbCBmaWVsZHMgYXJlIGludGVycHJldGVkIGFzIFVUQyBhbmQgdGhlblxuICAgICAgLy8gb2Zmc2V0IGFjY29yZGluZyB0byB0aGUgc3BlY2lmaWVkIHRpbWUgem9uZS5cbiAgICAgIGlmIChcIlpcIiBpbiBkKSB7XG4gICAgICAgIGQuSCArPSBkLlogLyAxMDAgfCAwO1xuICAgICAgICBkLk0gKz0gZC5aICUgMTAwO1xuICAgICAgICByZXR1cm4gdXRjRGF0ZShkKTtcbiAgICAgIH1cblxuICAgICAgLy8gT3RoZXJ3aXNlLCBhbGwgZmllbGRzIGFyZSBpbiBsb2NhbCB0aW1lLlxuICAgICAgcmV0dXJuIGxvY2FsRGF0ZShkKTtcbiAgICB9O1xuICB9XG5cbiAgZnVuY3Rpb24gcGFyc2VTcGVjaWZpZXIoZCwgc3BlY2lmaWVyLCBzdHJpbmcsIGopIHtcbiAgICB2YXIgaSA9IDAsXG4gICAgICAgIG4gPSBzcGVjaWZpZXIubGVuZ3RoLFxuICAgICAgICBtID0gc3RyaW5nLmxlbmd0aCxcbiAgICAgICAgYyxcbiAgICAgICAgcGFyc2U7XG5cbiAgICB3aGlsZSAoaSA8IG4pIHtcbiAgICAgIGlmIChqID49IG0pIHJldHVybiAtMTtcbiAgICAgIGMgPSBzcGVjaWZpZXIuY2hhckNvZGVBdChpKyspO1xuICAgICAgaWYgKGMgPT09IDM3KSB7XG4gICAgICAgIGMgPSBzcGVjaWZpZXIuY2hhckF0KGkrKyk7XG4gICAgICAgIHBhcnNlID0gcGFyc2VzW2MgaW4gcGFkcyA/IHNwZWNpZmllci5jaGFyQXQoaSsrKSA6IGNdO1xuICAgICAgICBpZiAoIXBhcnNlIHx8ICgoaiA9IHBhcnNlKGQsIHN0cmluZywgaikpIDwgMCkpIHJldHVybiAtMTtcbiAgICAgIH0gZWxzZSBpZiAoYyAhPSBzdHJpbmcuY2hhckNvZGVBdChqKyspKSB7XG4gICAgICAgIHJldHVybiAtMTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gajtcbiAgfVxuXG4gIGZ1bmN0aW9uIHBhcnNlUGVyaW9kKGQsIHN0cmluZywgaSkge1xuICAgIHZhciBuID0gcGVyaW9kUmUuZXhlYyhzdHJpbmcuc2xpY2UoaSkpO1xuICAgIHJldHVybiBuID8gKGQucCA9IHBlcmlvZExvb2t1cC5nZXQoblswXS50b0xvd2VyQ2FzZSgpKSwgaSArIG5bMF0ubGVuZ3RoKSA6IC0xO1xuICB9XG5cbiAgZnVuY3Rpb24gcGFyc2VTaG9ydFdlZWtkYXkoZCwgc3RyaW5nLCBpKSB7XG4gICAgdmFyIG4gPSBzaG9ydFdlZWtkYXlSZS5leGVjKHN0cmluZy5zbGljZShpKSk7XG4gICAgcmV0dXJuIG4gPyAoZC53ID0gc2hvcnRXZWVrZGF5TG9va3VwLmdldChuWzBdLnRvTG93ZXJDYXNlKCkpLCBpICsgblswXS5sZW5ndGgpIDogLTE7XG4gIH1cblxuICBmdW5jdGlvbiBwYXJzZVdlZWtkYXkoZCwgc3RyaW5nLCBpKSB7XG4gICAgdmFyIG4gPSB3ZWVrZGF5UmUuZXhlYyhzdHJpbmcuc2xpY2UoaSkpO1xuICAgIHJldHVybiBuID8gKGQudyA9IHdlZWtkYXlMb29rdXAuZ2V0KG5bMF0udG9Mb3dlckNhc2UoKSksIGkgKyBuWzBdLmxlbmd0aCkgOiAtMTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHBhcnNlU2hvcnRNb250aChkLCBzdHJpbmcsIGkpIHtcbiAgICB2YXIgbiA9IHNob3J0TW9udGhSZS5leGVjKHN0cmluZy5zbGljZShpKSk7XG4gICAgcmV0dXJuIG4gPyAoZC5tID0gc2hvcnRNb250aExvb2t1cC5nZXQoblswXS50b0xvd2VyQ2FzZSgpKSwgaSArIG5bMF0ubGVuZ3RoKSA6IC0xO1xuICB9XG5cbiAgZnVuY3Rpb24gcGFyc2VNb250aChkLCBzdHJpbmcsIGkpIHtcbiAgICB2YXIgbiA9IG1vbnRoUmUuZXhlYyhzdHJpbmcuc2xpY2UoaSkpO1xuICAgIHJldHVybiBuID8gKGQubSA9IG1vbnRoTG9va3VwLmdldChuWzBdLnRvTG93ZXJDYXNlKCkpLCBpICsgblswXS5sZW5ndGgpIDogLTE7XG4gIH1cblxuICBmdW5jdGlvbiBwYXJzZUxvY2FsZURhdGVUaW1lKGQsIHN0cmluZywgaSkge1xuICAgIHJldHVybiBwYXJzZVNwZWNpZmllcihkLCBsb2NhbGVfZGF0ZVRpbWUsIHN0cmluZywgaSk7XG4gIH1cblxuICBmdW5jdGlvbiBwYXJzZUxvY2FsZURhdGUoZCwgc3RyaW5nLCBpKSB7XG4gICAgcmV0dXJuIHBhcnNlU3BlY2lmaWVyKGQsIGxvY2FsZV9kYXRlLCBzdHJpbmcsIGkpO1xuICB9XG5cbiAgZnVuY3Rpb24gcGFyc2VMb2NhbGVUaW1lKGQsIHN0cmluZywgaSkge1xuICAgIHJldHVybiBwYXJzZVNwZWNpZmllcihkLCBsb2NhbGVfdGltZSwgc3RyaW5nLCBpKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGZvcm1hdFNob3J0V2Vla2RheShkKSB7XG4gICAgcmV0dXJuIGxvY2FsZV9zaG9ydFdlZWtkYXlzW2QuZ2V0RGF5KCldO1xuICB9XG5cbiAgZnVuY3Rpb24gZm9ybWF0V2Vla2RheShkKSB7XG4gICAgcmV0dXJuIGxvY2FsZV93ZWVrZGF5c1tkLmdldERheSgpXTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGZvcm1hdFNob3J0TW9udGgoZCkge1xuICAgIHJldHVybiBsb2NhbGVfc2hvcnRNb250aHNbZC5nZXRNb250aCgpXTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGZvcm1hdE1vbnRoKGQpIHtcbiAgICByZXR1cm4gbG9jYWxlX21vbnRoc1tkLmdldE1vbnRoKCldO1xuICB9XG5cbiAgZnVuY3Rpb24gZm9ybWF0UGVyaW9kKGQpIHtcbiAgICByZXR1cm4gbG9jYWxlX3BlcmlvZHNbKyhkLmdldEhvdXJzKCkgPj0gMTIpXTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGZvcm1hdFF1YXJ0ZXIoZCkge1xuICAgIHJldHVybiAxICsgfn4oZC5nZXRNb250aCgpIC8gMyk7XG4gIH1cblxuICBmdW5jdGlvbiBmb3JtYXRVVENTaG9ydFdlZWtkYXkoZCkge1xuICAgIHJldHVybiBsb2NhbGVfc2hvcnRXZWVrZGF5c1tkLmdldFVUQ0RheSgpXTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGZvcm1hdFVUQ1dlZWtkYXkoZCkge1xuICAgIHJldHVybiBsb2NhbGVfd2Vla2RheXNbZC5nZXRVVENEYXkoKV07XG4gIH1cblxuICBmdW5jdGlvbiBmb3JtYXRVVENTaG9ydE1vbnRoKGQpIHtcbiAgICByZXR1cm4gbG9jYWxlX3Nob3J0TW9udGhzW2QuZ2V0VVRDTW9udGgoKV07XG4gIH1cblxuICBmdW5jdGlvbiBmb3JtYXRVVENNb250aChkKSB7XG4gICAgcmV0dXJuIGxvY2FsZV9tb250aHNbZC5nZXRVVENNb250aCgpXTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGZvcm1hdFVUQ1BlcmlvZChkKSB7XG4gICAgcmV0dXJuIGxvY2FsZV9wZXJpb2RzWysoZC5nZXRVVENIb3VycygpID49IDEyKV07XG4gIH1cblxuICBmdW5jdGlvbiBmb3JtYXRVVENRdWFydGVyKGQpIHtcbiAgICByZXR1cm4gMSArIH5+KGQuZ2V0VVRDTW9udGgoKSAvIDMpO1xuICB9XG5cbiAgcmV0dXJuIHtcbiAgICBmb3JtYXQ6IGZ1bmN0aW9uKHNwZWNpZmllcikge1xuICAgICAgdmFyIGYgPSBuZXdGb3JtYXQoc3BlY2lmaWVyICs9IFwiXCIsIGZvcm1hdHMpO1xuICAgICAgZi50b1N0cmluZyA9IGZ1bmN0aW9uKCkgeyByZXR1cm4gc3BlY2lmaWVyOyB9O1xuICAgICAgcmV0dXJuIGY7XG4gICAgfSxcbiAgICBwYXJzZTogZnVuY3Rpb24oc3BlY2lmaWVyKSB7XG4gICAgICB2YXIgcCA9IG5ld1BhcnNlKHNwZWNpZmllciArPSBcIlwiLCBmYWxzZSk7XG4gICAgICBwLnRvU3RyaW5nID0gZnVuY3Rpb24oKSB7IHJldHVybiBzcGVjaWZpZXI7IH07XG4gICAgICByZXR1cm4gcDtcbiAgICB9LFxuICAgIHV0Y0Zvcm1hdDogZnVuY3Rpb24oc3BlY2lmaWVyKSB7XG4gICAgICB2YXIgZiA9IG5ld0Zvcm1hdChzcGVjaWZpZXIgKz0gXCJcIiwgdXRjRm9ybWF0cyk7XG4gICAgICBmLnRvU3RyaW5nID0gZnVuY3Rpb24oKSB7IHJldHVybiBzcGVjaWZpZXI7IH07XG4gICAgICByZXR1cm4gZjtcbiAgICB9LFxuICAgIHV0Y1BhcnNlOiBmdW5jdGlvbihzcGVjaWZpZXIpIHtcbiAgICAgIHZhciBwID0gbmV3UGFyc2Uoc3BlY2lmaWVyICs9IFwiXCIsIHRydWUpO1xuICAgICAgcC50b1N0cmluZyA9IGZ1bmN0aW9uKCkgeyByZXR1cm4gc3BlY2lmaWVyOyB9O1xuICAgICAgcmV0dXJuIHA7XG4gICAgfVxuICB9O1xufVxuXG52YXIgcGFkcyA9IHtcIi1cIjogXCJcIiwgXCJfXCI6IFwiIFwiLCBcIjBcIjogXCIwXCJ9LFxuICAgIG51bWJlclJlID0gL15cXHMqXFxkKy8sIC8vIG5vdGU6IGlnbm9yZXMgbmV4dCBkaXJlY3RpdmVcbiAgICBwZXJjZW50UmUgPSAvXiUvLFxuICAgIHJlcXVvdGVSZSA9IC9bXFxcXF4kKis/fFtcXF0oKS57fV0vZztcblxuZnVuY3Rpb24gcGFkKHZhbHVlLCBmaWxsLCB3aWR0aCkge1xuICB2YXIgc2lnbiA9IHZhbHVlIDwgMCA/IFwiLVwiIDogXCJcIixcbiAgICAgIHN0cmluZyA9IChzaWduID8gLXZhbHVlIDogdmFsdWUpICsgXCJcIixcbiAgICAgIGxlbmd0aCA9IHN0cmluZy5sZW5ndGg7XG4gIHJldHVybiBzaWduICsgKGxlbmd0aCA8IHdpZHRoID8gbmV3IEFycmF5KHdpZHRoIC0gbGVuZ3RoICsgMSkuam9pbihmaWxsKSArIHN0cmluZyA6IHN0cmluZyk7XG59XG5cbmZ1bmN0aW9uIHJlcXVvdGUocykge1xuICByZXR1cm4gcy5yZXBsYWNlKHJlcXVvdGVSZSwgXCJcXFxcJCZcIik7XG59XG5cbmZ1bmN0aW9uIGZvcm1hdFJlKG5hbWVzKSB7XG4gIHJldHVybiBuZXcgUmVnRXhwKFwiXig/OlwiICsgbmFtZXMubWFwKHJlcXVvdGUpLmpvaW4oXCJ8XCIpICsgXCIpXCIsIFwiaVwiKTtcbn1cblxuZnVuY3Rpb24gZm9ybWF0TG9va3VwKG5hbWVzKSB7XG4gIHJldHVybiBuZXcgTWFwKG5hbWVzLm1hcCgobmFtZSwgaSkgPT4gW25hbWUudG9Mb3dlckNhc2UoKSwgaV0pKTtcbn1cblxuZnVuY3Rpb24gcGFyc2VXZWVrZGF5TnVtYmVyU3VuZGF5KGQsIHN0cmluZywgaSkge1xuICB2YXIgbiA9IG51bWJlclJlLmV4ZWMoc3RyaW5nLnNsaWNlKGksIGkgKyAxKSk7XG4gIHJldHVybiBuID8gKGQudyA9ICtuWzBdLCBpICsgblswXS5sZW5ndGgpIDogLTE7XG59XG5cbmZ1bmN0aW9uIHBhcnNlV2Vla2RheU51bWJlck1vbmRheShkLCBzdHJpbmcsIGkpIHtcbiAgdmFyIG4gPSBudW1iZXJSZS5leGVjKHN0cmluZy5zbGljZShpLCBpICsgMSkpO1xuICByZXR1cm4gbiA/IChkLnUgPSArblswXSwgaSArIG5bMF0ubGVuZ3RoKSA6IC0xO1xufVxuXG5mdW5jdGlvbiBwYXJzZVdlZWtOdW1iZXJTdW5kYXkoZCwgc3RyaW5nLCBpKSB7XG4gIHZhciBuID0gbnVtYmVyUmUuZXhlYyhzdHJpbmcuc2xpY2UoaSwgaSArIDIpKTtcbiAgcmV0dXJuIG4gPyAoZC5VID0gK25bMF0sIGkgKyBuWzBdLmxlbmd0aCkgOiAtMTtcbn1cblxuZnVuY3Rpb24gcGFyc2VXZWVrTnVtYmVySVNPKGQsIHN0cmluZywgaSkge1xuICB2YXIgbiA9IG51bWJlclJlLmV4ZWMoc3RyaW5nLnNsaWNlKGksIGkgKyAyKSk7XG4gIHJldHVybiBuID8gKGQuViA9ICtuWzBdLCBpICsgblswXS5sZW5ndGgpIDogLTE7XG59XG5cbmZ1bmN0aW9uIHBhcnNlV2Vla051bWJlck1vbmRheShkLCBzdHJpbmcsIGkpIHtcbiAgdmFyIG4gPSBudW1iZXJSZS5leGVjKHN0cmluZy5zbGljZShpLCBpICsgMikpO1xuICByZXR1cm4gbiA/IChkLlcgPSArblswXSwgaSArIG5bMF0ubGVuZ3RoKSA6IC0xO1xufVxuXG5mdW5jdGlvbiBwYXJzZUZ1bGxZZWFyKGQsIHN0cmluZywgaSkge1xuICB2YXIgbiA9IG51bWJlclJlLmV4ZWMoc3RyaW5nLnNsaWNlKGksIGkgKyA0KSk7XG4gIHJldHVybiBuID8gKGQueSA9ICtuWzBdLCBpICsgblswXS5sZW5ndGgpIDogLTE7XG59XG5cbmZ1bmN0aW9uIHBhcnNlWWVhcihkLCBzdHJpbmcsIGkpIHtcbiAgdmFyIG4gPSBudW1iZXJSZS5leGVjKHN0cmluZy5zbGljZShpLCBpICsgMikpO1xuICByZXR1cm4gbiA/IChkLnkgPSArblswXSArICgrblswXSA+IDY4ID8gMTkwMCA6IDIwMDApLCBpICsgblswXS5sZW5ndGgpIDogLTE7XG59XG5cbmZ1bmN0aW9uIHBhcnNlWm9uZShkLCBzdHJpbmcsIGkpIHtcbiAgdmFyIG4gPSAvXihaKXwoWystXVxcZFxcZCkoPzo6PyhcXGRcXGQpKT8vLmV4ZWMoc3RyaW5nLnNsaWNlKGksIGkgKyA2KSk7XG4gIHJldHVybiBuID8gKGQuWiA9IG5bMV0gPyAwIDogLShuWzJdICsgKG5bM10gfHwgXCIwMFwiKSksIGkgKyBuWzBdLmxlbmd0aCkgOiAtMTtcbn1cblxuZnVuY3Rpb24gcGFyc2VRdWFydGVyKGQsIHN0cmluZywgaSkge1xuICB2YXIgbiA9IG51bWJlclJlLmV4ZWMoc3RyaW5nLnNsaWNlKGksIGkgKyAxKSk7XG4gIHJldHVybiBuID8gKGQucSA9IG5bMF0gKiAzIC0gMywgaSArIG5bMF0ubGVuZ3RoKSA6IC0xO1xufVxuXG5mdW5jdGlvbiBwYXJzZU1vbnRoTnVtYmVyKGQsIHN0cmluZywgaSkge1xuICB2YXIgbiA9IG51bWJlclJlLmV4ZWMoc3RyaW5nLnNsaWNlKGksIGkgKyAyKSk7XG4gIHJldHVybiBuID8gKGQubSA9IG5bMF0gLSAxLCBpICsgblswXS5sZW5ndGgpIDogLTE7XG59XG5cbmZ1bmN0aW9uIHBhcnNlRGF5T2ZNb250aChkLCBzdHJpbmcsIGkpIHtcbiAgdmFyIG4gPSBudW1iZXJSZS5leGVjKHN0cmluZy5zbGljZShpLCBpICsgMikpO1xuICByZXR1cm4gbiA/IChkLmQgPSArblswXSwgaSArIG5bMF0ubGVuZ3RoKSA6IC0xO1xufVxuXG5mdW5jdGlvbiBwYXJzZURheU9mWWVhcihkLCBzdHJpbmcsIGkpIHtcbiAgdmFyIG4gPSBudW1iZXJSZS5leGVjKHN0cmluZy5zbGljZShpLCBpICsgMykpO1xuICByZXR1cm4gbiA/IChkLm0gPSAwLCBkLmQgPSArblswXSwgaSArIG5bMF0ubGVuZ3RoKSA6IC0xO1xufVxuXG5mdW5jdGlvbiBwYXJzZUhvdXIyNChkLCBzdHJpbmcsIGkpIHtcbiAgdmFyIG4gPSBudW1iZXJSZS5leGVjKHN0cmluZy5zbGljZShpLCBpICsgMikpO1xuICByZXR1cm4gbiA/IChkLkggPSArblswXSwgaSArIG5bMF0ubGVuZ3RoKSA6IC0xO1xufVxuXG5mdW5jdGlvbiBwYXJzZU1pbnV0ZXMoZCwgc3RyaW5nLCBpKSB7XG4gIHZhciBuID0gbnVtYmVyUmUuZXhlYyhzdHJpbmcuc2xpY2UoaSwgaSArIDIpKTtcbiAgcmV0dXJuIG4gPyAoZC5NID0gK25bMF0sIGkgKyBuWzBdLmxlbmd0aCkgOiAtMTtcbn1cblxuZnVuY3Rpb24gcGFyc2VTZWNvbmRzKGQsIHN0cmluZywgaSkge1xuICB2YXIgbiA9IG51bWJlclJlLmV4ZWMoc3RyaW5nLnNsaWNlKGksIGkgKyAyKSk7XG4gIHJldHVybiBuID8gKGQuUyA9ICtuWzBdLCBpICsgblswXS5sZW5ndGgpIDogLTE7XG59XG5cbmZ1bmN0aW9uIHBhcnNlTWlsbGlzZWNvbmRzKGQsIHN0cmluZywgaSkge1xuICB2YXIgbiA9IG51bWJlclJlLmV4ZWMoc3RyaW5nLnNsaWNlKGksIGkgKyAzKSk7XG4gIHJldHVybiBuID8gKGQuTCA9ICtuWzBdLCBpICsgblswXS5sZW5ndGgpIDogLTE7XG59XG5cbmZ1bmN0aW9uIHBhcnNlTWljcm9zZWNvbmRzKGQsIHN0cmluZywgaSkge1xuICB2YXIgbiA9IG51bWJlclJlLmV4ZWMoc3RyaW5nLnNsaWNlKGksIGkgKyA2KSk7XG4gIHJldHVybiBuID8gKGQuTCA9IE1hdGguZmxvb3IoblswXSAvIDEwMDApLCBpICsgblswXS5sZW5ndGgpIDogLTE7XG59XG5cbmZ1bmN0aW9uIHBhcnNlTGl0ZXJhbFBlcmNlbnQoZCwgc3RyaW5nLCBpKSB7XG4gIHZhciBuID0gcGVyY2VudFJlLmV4ZWMoc3RyaW5nLnNsaWNlKGksIGkgKyAxKSk7XG4gIHJldHVybiBuID8gaSArIG5bMF0ubGVuZ3RoIDogLTE7XG59XG5cbmZ1bmN0aW9uIHBhcnNlVW5peFRpbWVzdGFtcChkLCBzdHJpbmcsIGkpIHtcbiAgdmFyIG4gPSBudW1iZXJSZS5leGVjKHN0cmluZy5zbGljZShpKSk7XG4gIHJldHVybiBuID8gKGQuUSA9ICtuWzBdLCBpICsgblswXS5sZW5ndGgpIDogLTE7XG59XG5cbmZ1bmN0aW9uIHBhcnNlVW5peFRpbWVzdGFtcFNlY29uZHMoZCwgc3RyaW5nLCBpKSB7XG4gIHZhciBuID0gbnVtYmVyUmUuZXhlYyhzdHJpbmcuc2xpY2UoaSkpO1xuICByZXR1cm4gbiA/IChkLnMgPSArblswXSwgaSArIG5bMF0ubGVuZ3RoKSA6IC0xO1xufVxuXG5mdW5jdGlvbiBmb3JtYXREYXlPZk1vbnRoKGQsIHApIHtcbiAgcmV0dXJuIHBhZChkLmdldERhdGUoKSwgcCwgMik7XG59XG5cbmZ1bmN0aW9uIGZvcm1hdEhvdXIyNChkLCBwKSB7XG4gIHJldHVybiBwYWQoZC5nZXRIb3VycygpLCBwLCAyKTtcbn1cblxuZnVuY3Rpb24gZm9ybWF0SG91cjEyKGQsIHApIHtcbiAgcmV0dXJuIHBhZChkLmdldEhvdXJzKCkgJSAxMiB8fCAxMiwgcCwgMik7XG59XG5cbmZ1bmN0aW9uIGZvcm1hdERheU9mWWVhcihkLCBwKSB7XG4gIHJldHVybiBwYWQoMSArIHRpbWVEYXkuY291bnQodGltZVllYXIoZCksIGQpLCBwLCAzKTtcbn1cblxuZnVuY3Rpb24gZm9ybWF0TWlsbGlzZWNvbmRzKGQsIHApIHtcbiAgcmV0dXJuIHBhZChkLmdldE1pbGxpc2Vjb25kcygpLCBwLCAzKTtcbn1cblxuZnVuY3Rpb24gZm9ybWF0TWljcm9zZWNvbmRzKGQsIHApIHtcbiAgcmV0dXJuIGZvcm1hdE1pbGxpc2Vjb25kcyhkLCBwKSArIFwiMDAwXCI7XG59XG5cbmZ1bmN0aW9uIGZvcm1hdE1vbnRoTnVtYmVyKGQsIHApIHtcbiAgcmV0dXJuIHBhZChkLmdldE1vbnRoKCkgKyAxLCBwLCAyKTtcbn1cblxuZnVuY3Rpb24gZm9ybWF0TWludXRlcyhkLCBwKSB7XG4gIHJldHVybiBwYWQoZC5nZXRNaW51dGVzKCksIHAsIDIpO1xufVxuXG5mdW5jdGlvbiBmb3JtYXRTZWNvbmRzKGQsIHApIHtcbiAgcmV0dXJuIHBhZChkLmdldFNlY29uZHMoKSwgcCwgMik7XG59XG5cbmZ1bmN0aW9uIGZvcm1hdFdlZWtkYXlOdW1iZXJNb25kYXkoZCkge1xuICB2YXIgZGF5ID0gZC5nZXREYXkoKTtcbiAgcmV0dXJuIGRheSA9PT0gMCA/IDcgOiBkYXk7XG59XG5cbmZ1bmN0aW9uIGZvcm1hdFdlZWtOdW1iZXJTdW5kYXkoZCwgcCkge1xuICByZXR1cm4gcGFkKHRpbWVTdW5kYXkuY291bnQodGltZVllYXIoZCkgLSAxLCBkKSwgcCwgMik7XG59XG5cbmZ1bmN0aW9uIGRJU08oZCkge1xuICB2YXIgZGF5ID0gZC5nZXREYXkoKTtcbiAgcmV0dXJuIChkYXkgPj0gNCB8fCBkYXkgPT09IDApID8gdGltZVRodXJzZGF5KGQpIDogdGltZVRodXJzZGF5LmNlaWwoZCk7XG59XG5cbmZ1bmN0aW9uIGZvcm1hdFdlZWtOdW1iZXJJU08oZCwgcCkge1xuICBkID0gZElTTyhkKTtcbiAgcmV0dXJuIHBhZCh0aW1lVGh1cnNkYXkuY291bnQodGltZVllYXIoZCksIGQpICsgKHRpbWVZZWFyKGQpLmdldERheSgpID09PSA0KSwgcCwgMik7XG59XG5cbmZ1bmN0aW9uIGZvcm1hdFdlZWtkYXlOdW1iZXJTdW5kYXkoZCkge1xuICByZXR1cm4gZC5nZXREYXkoKTtcbn1cblxuZnVuY3Rpb24gZm9ybWF0V2Vla051bWJlck1vbmRheShkLCBwKSB7XG4gIHJldHVybiBwYWQodGltZU1vbmRheS5jb3VudCh0aW1lWWVhcihkKSAtIDEsIGQpLCBwLCAyKTtcbn1cblxuZnVuY3Rpb24gZm9ybWF0WWVhcihkLCBwKSB7XG4gIHJldHVybiBwYWQoZC5nZXRGdWxsWWVhcigpICUgMTAwLCBwLCAyKTtcbn1cblxuZnVuY3Rpb24gZm9ybWF0WWVhcklTTyhkLCBwKSB7XG4gIGQgPSBkSVNPKGQpO1xuICByZXR1cm4gcGFkKGQuZ2V0RnVsbFllYXIoKSAlIDEwMCwgcCwgMik7XG59XG5cbmZ1bmN0aW9uIGZvcm1hdEZ1bGxZZWFyKGQsIHApIHtcbiAgcmV0dXJuIHBhZChkLmdldEZ1bGxZZWFyKCkgJSAxMDAwMCwgcCwgNCk7XG59XG5cbmZ1bmN0aW9uIGZvcm1hdEZ1bGxZZWFySVNPKGQsIHApIHtcbiAgdmFyIGRheSA9IGQuZ2V0RGF5KCk7XG4gIGQgPSAoZGF5ID49IDQgfHwgZGF5ID09PSAwKSA/IHRpbWVUaHVyc2RheShkKSA6IHRpbWVUaHVyc2RheS5jZWlsKGQpO1xuICByZXR1cm4gcGFkKGQuZ2V0RnVsbFllYXIoKSAlIDEwMDAwLCBwLCA0KTtcbn1cblxuZnVuY3Rpb24gZm9ybWF0Wm9uZShkKSB7XG4gIHZhciB6ID0gZC5nZXRUaW1lem9uZU9mZnNldCgpO1xuICByZXR1cm4gKHogPiAwID8gXCItXCIgOiAoeiAqPSAtMSwgXCIrXCIpKVxuICAgICAgKyBwYWQoeiAvIDYwIHwgMCwgXCIwXCIsIDIpXG4gICAgICArIHBhZCh6ICUgNjAsIFwiMFwiLCAyKTtcbn1cblxuZnVuY3Rpb24gZm9ybWF0VVRDRGF5T2ZNb250aChkLCBwKSB7XG4gIHJldHVybiBwYWQoZC5nZXRVVENEYXRlKCksIHAsIDIpO1xufVxuXG5mdW5jdGlvbiBmb3JtYXRVVENIb3VyMjQoZCwgcCkge1xuICByZXR1cm4gcGFkKGQuZ2V0VVRDSG91cnMoKSwgcCwgMik7XG59XG5cbmZ1bmN0aW9uIGZvcm1hdFVUQ0hvdXIxMihkLCBwKSB7XG4gIHJldHVybiBwYWQoZC5nZXRVVENIb3VycygpICUgMTIgfHwgMTIsIHAsIDIpO1xufVxuXG5mdW5jdGlvbiBmb3JtYXRVVENEYXlPZlllYXIoZCwgcCkge1xuICByZXR1cm4gcGFkKDEgKyB1dGNEYXkuY291bnQodXRjWWVhcihkKSwgZCksIHAsIDMpO1xufVxuXG5mdW5jdGlvbiBmb3JtYXRVVENNaWxsaXNlY29uZHMoZCwgcCkge1xuICByZXR1cm4gcGFkKGQuZ2V0VVRDTWlsbGlzZWNvbmRzKCksIHAsIDMpO1xufVxuXG5mdW5jdGlvbiBmb3JtYXRVVENNaWNyb3NlY29uZHMoZCwgcCkge1xuICByZXR1cm4gZm9ybWF0VVRDTWlsbGlzZWNvbmRzKGQsIHApICsgXCIwMDBcIjtcbn1cblxuZnVuY3Rpb24gZm9ybWF0VVRDTW9udGhOdW1iZXIoZCwgcCkge1xuICByZXR1cm4gcGFkKGQuZ2V0VVRDTW9udGgoKSArIDEsIHAsIDIpO1xufVxuXG5mdW5jdGlvbiBmb3JtYXRVVENNaW51dGVzKGQsIHApIHtcbiAgcmV0dXJuIHBhZChkLmdldFVUQ01pbnV0ZXMoKSwgcCwgMik7XG59XG5cbmZ1bmN0aW9uIGZvcm1hdFVUQ1NlY29uZHMoZCwgcCkge1xuICByZXR1cm4gcGFkKGQuZ2V0VVRDU2Vjb25kcygpLCBwLCAyKTtcbn1cblxuZnVuY3Rpb24gZm9ybWF0VVRDV2Vla2RheU51bWJlck1vbmRheShkKSB7XG4gIHZhciBkb3cgPSBkLmdldFVUQ0RheSgpO1xuICByZXR1cm4gZG93ID09PSAwID8gNyA6IGRvdztcbn1cblxuZnVuY3Rpb24gZm9ybWF0VVRDV2Vla051bWJlclN1bmRheShkLCBwKSB7XG4gIHJldHVybiBwYWQodXRjU3VuZGF5LmNvdW50KHV0Y1llYXIoZCkgLSAxLCBkKSwgcCwgMik7XG59XG5cbmZ1bmN0aW9uIFVUQ2RJU08oZCkge1xuICB2YXIgZGF5ID0gZC5nZXRVVENEYXkoKTtcbiAgcmV0dXJuIChkYXkgPj0gNCB8fCBkYXkgPT09IDApID8gdXRjVGh1cnNkYXkoZCkgOiB1dGNUaHVyc2RheS5jZWlsKGQpO1xufVxuXG5mdW5jdGlvbiBmb3JtYXRVVENXZWVrTnVtYmVySVNPKGQsIHApIHtcbiAgZCA9IFVUQ2RJU08oZCk7XG4gIHJldHVybiBwYWQodXRjVGh1cnNkYXkuY291bnQodXRjWWVhcihkKSwgZCkgKyAodXRjWWVhcihkKS5nZXRVVENEYXkoKSA9PT0gNCksIHAsIDIpO1xufVxuXG5mdW5jdGlvbiBmb3JtYXRVVENXZWVrZGF5TnVtYmVyU3VuZGF5KGQpIHtcbiAgcmV0dXJuIGQuZ2V0VVRDRGF5KCk7XG59XG5cbmZ1bmN0aW9uIGZvcm1hdFVUQ1dlZWtOdW1iZXJNb25kYXkoZCwgcCkge1xuICByZXR1cm4gcGFkKHV0Y01vbmRheS5jb3VudCh1dGNZZWFyKGQpIC0gMSwgZCksIHAsIDIpO1xufVxuXG5mdW5jdGlvbiBmb3JtYXRVVENZZWFyKGQsIHApIHtcbiAgcmV0dXJuIHBhZChkLmdldFVUQ0Z1bGxZZWFyKCkgJSAxMDAsIHAsIDIpO1xufVxuXG5mdW5jdGlvbiBmb3JtYXRVVENZZWFySVNPKGQsIHApIHtcbiAgZCA9IFVUQ2RJU08oZCk7XG4gIHJldHVybiBwYWQoZC5nZXRVVENGdWxsWWVhcigpICUgMTAwLCBwLCAyKTtcbn1cblxuZnVuY3Rpb24gZm9ybWF0VVRDRnVsbFllYXIoZCwgcCkge1xuICByZXR1cm4gcGFkKGQuZ2V0VVRDRnVsbFllYXIoKSAlIDEwMDAwLCBwLCA0KTtcbn1cblxuZnVuY3Rpb24gZm9ybWF0VVRDRnVsbFllYXJJU08oZCwgcCkge1xuICB2YXIgZGF5ID0gZC5nZXRVVENEYXkoKTtcbiAgZCA9IChkYXkgPj0gNCB8fCBkYXkgPT09IDApID8gdXRjVGh1cnNkYXkoZCkgOiB1dGNUaHVyc2RheS5jZWlsKGQpO1xuICByZXR1cm4gcGFkKGQuZ2V0VVRDRnVsbFllYXIoKSAlIDEwMDAwLCBwLCA0KTtcbn1cblxuZnVuY3Rpb24gZm9ybWF0VVRDWm9uZSgpIHtcbiAgcmV0dXJuIFwiKzAwMDBcIjtcbn1cblxuZnVuY3Rpb24gZm9ybWF0TGl0ZXJhbFBlcmNlbnQoKSB7XG4gIHJldHVybiBcIiVcIjtcbn1cblxuZnVuY3Rpb24gZm9ybWF0VW5peFRpbWVzdGFtcChkKSB7XG4gIHJldHVybiArZDtcbn1cblxuZnVuY3Rpb24gZm9ybWF0VW5peFRpbWVzdGFtcFNlY29uZHMoZCkge1xuICByZXR1cm4gTWF0aC5mbG9vcigrZCAvIDEwMDApO1xufVxuIiwiaW1wb3J0IGZvcm1hdExvY2FsZSBmcm9tIFwiLi9sb2NhbGUuanNcIjtcblxudmFyIGxvY2FsZTtcbmV4cG9ydCB2YXIgdGltZUZvcm1hdDtcbmV4cG9ydCB2YXIgdGltZVBhcnNlO1xuZXhwb3J0IHZhciB1dGNGb3JtYXQ7XG5leHBvcnQgdmFyIHV0Y1BhcnNlO1xuXG5kZWZhdWx0TG9jYWxlKHtcbiAgZGF0ZVRpbWU6IFwiJXgsICVYXCIsXG4gIGRhdGU6IFwiJS1tLyUtZC8lWVwiLFxuICB0aW1lOiBcIiUtSTolTTolUyAlcFwiLFxuICBwZXJpb2RzOiBbXCJBTVwiLCBcIlBNXCJdLFxuICBkYXlzOiBbXCJTdW5kYXlcIiwgXCJNb25kYXlcIiwgXCJUdWVzZGF5XCIsIFwiV2VkbmVzZGF5XCIsIFwiVGh1cnNkYXlcIiwgXCJGcmlkYXlcIiwgXCJTYXR1cmRheVwiXSxcbiAgc2hvcnREYXlzOiBbXCJTdW5cIiwgXCJNb25cIiwgXCJUdWVcIiwgXCJXZWRcIiwgXCJUaHVcIiwgXCJGcmlcIiwgXCJTYXRcIl0sXG4gIG1vbnRoczogW1wiSmFudWFyeVwiLCBcIkZlYnJ1YXJ5XCIsIFwiTWFyY2hcIiwgXCJBcHJpbFwiLCBcIk1heVwiLCBcIkp1bmVcIiwgXCJKdWx5XCIsIFwiQXVndXN0XCIsIFwiU2VwdGVtYmVyXCIsIFwiT2N0b2JlclwiLCBcIk5vdmVtYmVyXCIsIFwiRGVjZW1iZXJcIl0sXG4gIHNob3J0TW9udGhzOiBbXCJKYW5cIiwgXCJGZWJcIiwgXCJNYXJcIiwgXCJBcHJcIiwgXCJNYXlcIiwgXCJKdW5cIiwgXCJKdWxcIiwgXCJBdWdcIiwgXCJTZXBcIiwgXCJPY3RcIiwgXCJOb3ZcIiwgXCJEZWNcIl1cbn0pO1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBkZWZhdWx0TG9jYWxlKGRlZmluaXRpb24pIHtcbiAgbG9jYWxlID0gZm9ybWF0TG9jYWxlKGRlZmluaXRpb24pO1xuICB0aW1lRm9ybWF0ID0gbG9jYWxlLmZvcm1hdDtcbiAgdGltZVBhcnNlID0gbG9jYWxlLnBhcnNlO1xuICB1dGNGb3JtYXQgPSBsb2NhbGUudXRjRm9ybWF0O1xuICB1dGNQYXJzZSA9IGxvY2FsZS51dGNQYXJzZTtcbiAgcmV0dXJuIGxvY2FsZTtcbn1cbiIsImltcG9ydCB7dGltZVllYXIsIHRpbWVNb250aCwgdGltZVdlZWssIHRpbWVEYXksIHRpbWVIb3VyLCB0aW1lTWludXRlLCB0aW1lU2Vjb25kLCB0aW1lVGlja3MsIHRpbWVUaWNrSW50ZXJ2YWx9IGZyb20gXCJkMy10aW1lXCI7XG5pbXBvcnQge3RpbWVGb3JtYXR9IGZyb20gXCJkMy10aW1lLWZvcm1hdFwiO1xuaW1wb3J0IGNvbnRpbnVvdXMsIHtjb3B5fSBmcm9tIFwiLi9jb250aW51b3VzLmpzXCI7XG5pbXBvcnQge2luaXRSYW5nZX0gZnJvbSBcIi4vaW5pdC5qc1wiO1xuaW1wb3J0IG5pY2UgZnJvbSBcIi4vbmljZS5qc1wiO1xuXG5mdW5jdGlvbiBkYXRlKHQpIHtcbiAgcmV0dXJuIG5ldyBEYXRlKHQpO1xufVxuXG5mdW5jdGlvbiBudW1iZXIodCkge1xuICByZXR1cm4gdCBpbnN0YW5jZW9mIERhdGUgPyArdCA6ICtuZXcgRGF0ZSgrdCk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBjYWxlbmRhcih0aWNrcywgdGlja0ludGVydmFsLCB5ZWFyLCBtb250aCwgd2VlaywgZGF5LCBob3VyLCBtaW51dGUsIHNlY29uZCwgZm9ybWF0KSB7XG4gIHZhciBzY2FsZSA9IGNvbnRpbnVvdXMoKSxcbiAgICAgIGludmVydCA9IHNjYWxlLmludmVydCxcbiAgICAgIGRvbWFpbiA9IHNjYWxlLmRvbWFpbjtcblxuICB2YXIgZm9ybWF0TWlsbGlzZWNvbmQgPSBmb3JtYXQoXCIuJUxcIiksXG4gICAgICBmb3JtYXRTZWNvbmQgPSBmb3JtYXQoXCI6JVNcIiksXG4gICAgICBmb3JtYXRNaW51dGUgPSBmb3JtYXQoXCIlSTolTVwiKSxcbiAgICAgIGZvcm1hdEhvdXIgPSBmb3JtYXQoXCIlSSAlcFwiKSxcbiAgICAgIGZvcm1hdERheSA9IGZvcm1hdChcIiVhICVkXCIpLFxuICAgICAgZm9ybWF0V2VlayA9IGZvcm1hdChcIiViICVkXCIpLFxuICAgICAgZm9ybWF0TW9udGggPSBmb3JtYXQoXCIlQlwiKSxcbiAgICAgIGZvcm1hdFllYXIgPSBmb3JtYXQoXCIlWVwiKTtcblxuICBmdW5jdGlvbiB0aWNrRm9ybWF0KGRhdGUpIHtcbiAgICByZXR1cm4gKHNlY29uZChkYXRlKSA8IGRhdGUgPyBmb3JtYXRNaWxsaXNlY29uZFxuICAgICAgICA6IG1pbnV0ZShkYXRlKSA8IGRhdGUgPyBmb3JtYXRTZWNvbmRcbiAgICAgICAgOiBob3VyKGRhdGUpIDwgZGF0ZSA/IGZvcm1hdE1pbnV0ZVxuICAgICAgICA6IGRheShkYXRlKSA8IGRhdGUgPyBmb3JtYXRIb3VyXG4gICAgICAgIDogbW9udGgoZGF0ZSkgPCBkYXRlID8gKHdlZWsoZGF0ZSkgPCBkYXRlID8gZm9ybWF0RGF5IDogZm9ybWF0V2VlaylcbiAgICAgICAgOiB5ZWFyKGRhdGUpIDwgZGF0ZSA/IGZvcm1hdE1vbnRoXG4gICAgICAgIDogZm9ybWF0WWVhcikoZGF0ZSk7XG4gIH1cblxuICBzY2FsZS5pbnZlcnQgPSBmdW5jdGlvbih5KSB7XG4gICAgcmV0dXJuIG5ldyBEYXRlKGludmVydCh5KSk7XG4gIH07XG5cbiAgc2NhbGUuZG9tYWluID0gZnVuY3Rpb24oXykge1xuICAgIHJldHVybiBhcmd1bWVudHMubGVuZ3RoID8gZG9tYWluKEFycmF5LmZyb20oXywgbnVtYmVyKSkgOiBkb21haW4oKS5tYXAoZGF0ZSk7XG4gIH07XG5cbiAgc2NhbGUudGlja3MgPSBmdW5jdGlvbihpbnRlcnZhbCkge1xuICAgIHZhciBkID0gZG9tYWluKCk7XG4gICAgcmV0dXJuIHRpY2tzKGRbMF0sIGRbZC5sZW5ndGggLSAxXSwgaW50ZXJ2YWwgPT0gbnVsbCA/IDEwIDogaW50ZXJ2YWwpO1xuICB9O1xuXG4gIHNjYWxlLnRpY2tGb3JtYXQgPSBmdW5jdGlvbihjb3VudCwgc3BlY2lmaWVyKSB7XG4gICAgcmV0dXJuIHNwZWNpZmllciA9PSBudWxsID8gdGlja0Zvcm1hdCA6IGZvcm1hdChzcGVjaWZpZXIpO1xuICB9O1xuXG4gIHNjYWxlLm5pY2UgPSBmdW5jdGlvbihpbnRlcnZhbCkge1xuICAgIHZhciBkID0gZG9tYWluKCk7XG4gICAgaWYgKCFpbnRlcnZhbCB8fCB0eXBlb2YgaW50ZXJ2YWwucmFuZ2UgIT09IFwiZnVuY3Rpb25cIikgaW50ZXJ2YWwgPSB0aWNrSW50ZXJ2YWwoZFswXSwgZFtkLmxlbmd0aCAtIDFdLCBpbnRlcnZhbCA9PSBudWxsID8gMTAgOiBpbnRlcnZhbCk7XG4gICAgcmV0dXJuIGludGVydmFsID8gZG9tYWluKG5pY2UoZCwgaW50ZXJ2YWwpKSA6IHNjYWxlO1xuICB9O1xuXG4gIHNjYWxlLmNvcHkgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gY29weShzY2FsZSwgY2FsZW5kYXIodGlja3MsIHRpY2tJbnRlcnZhbCwgeWVhciwgbW9udGgsIHdlZWssIGRheSwgaG91ciwgbWludXRlLCBzZWNvbmQsIGZvcm1hdCkpO1xuICB9O1xuXG4gIHJldHVybiBzY2FsZTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gdGltZSgpIHtcbiAgcmV0dXJuIGluaXRSYW5nZS5hcHBseShjYWxlbmRhcih0aW1lVGlja3MsIHRpbWVUaWNrSW50ZXJ2YWwsIHRpbWVZZWFyLCB0aW1lTW9udGgsIHRpbWVXZWVrLCB0aW1lRGF5LCB0aW1lSG91ciwgdGltZU1pbnV0ZSwgdGltZVNlY29uZCwgdGltZUZvcm1hdCkuZG9tYWluKFtuZXcgRGF0ZSgyMDAwLCAwLCAxKSwgbmV3IERhdGUoMjAwMCwgMCwgMildKSwgYXJndW1lbnRzKTtcbn1cbiIsImV4cG9ydCBmdW5jdGlvbiBsaWdodGVuSGV4Q29sb3VyKEg6IHN0cmluZywgbGlnaHRuZXNzOiBudW1iZXIpOiBzdHJpbmcge1xuICBpZiAoIUgpIHtcbiAgICByZXR1cm4gXCJcIjtcbiAgfVxuXG4gIC8vIENvbnZlcnQgaGV4IHRvIFJHQiBmaXJzdFxuICBsZXQgcjogYW55ID0gMCxcbiAgICBnOiBhbnkgPSAwLFxuICAgIGI6IGFueSA9IDA7XG4gIGlmIChILmxlbmd0aCA9PSA0KSB7XG4gICAgciA9IFwiMHhcIiArIEhbMV0gKyBIWzFdO1xuICAgIGcgPSBcIjB4XCIgKyBIWzJdICsgSFsyXTtcbiAgICBiID0gXCIweFwiICsgSFszXSArIEhbM107XG4gIH0gZWxzZSB7XG4gICAgciA9IFwiMHhcIiArIEhbMV0gKyBIWzJdO1xuICAgIGcgPSBcIjB4XCIgKyBIWzNdICsgSFs0XTtcbiAgICBiID0gXCIweFwiICsgSFs1XSArIEhbNl07XG4gIH1cbiAgLy8gVGhlbiB0byBIU0xcbiAgciAvPSAyNTU7XG4gIGcgLz0gMjU1O1xuICBiIC89IDI1NTtcblxuICBjb25zdCBjbWluID0gTWF0aC5taW4ociwgZywgYiksXG4gICAgY21heCA9IE1hdGgubWF4KHIsIGcsIGIpLFxuICAgIGRlbHRhID0gY21heCAtIGNtaW47XG5cbiAgbGV0IGggPSAwLFxuICAgIHMgPSAwLFxuICAgIGwgPSAwO1xuXG4gIGlmIChkZWx0YSA9PSAwKSBoID0gMDtcbiAgZWxzZSBpZiAoY21heCA9PSByKSBoID0gKChnIC0gYikgLyBkZWx0YSkgJSA2O1xuICBlbHNlIGlmIChjbWF4ID09IGcpIGggPSAoYiAtIHIpIC8gZGVsdGEgKyAyO1xuICBlbHNlIGggPSAociAtIGcpIC8gZGVsdGEgKyA0O1xuXG4gIGggPSBNYXRoLnJvdW5kKGggKiA2MCk7XG5cbiAgaWYgKGggPCAwKSBoICs9IDM2MDtcblxuICBsID0gKGNtYXggKyBjbWluKSAvIDI7XG4gIHMgPSBkZWx0YSA9PSAwID8gMCA6IGRlbHRhIC8gKDEgLSBNYXRoLmFicygyICogbCAtIDEpKTtcbiAgcyA9ICsocyAqIDEwMCkudG9GaXhlZCgxKTtcbiAgbCA9ICsobCAqIDEwMCkudG9GaXhlZCgxKTtcblxuICByZXR1cm4gXCJoc2woXCIgKyBoICsgXCIsXCIgKyBzIC8gMiArIFwiJSxcIiArIGxpZ2h0bmVzcyArIFwiJSlcIjtcbn1cbiIsImV4cG9ydCBlbnVtIEF2YWlsYWJpbGl0eVN0YXR1cyB7XG4gIEZSRUUgPSBcImZyZWVcIixcbiAgQlVTWSA9IFwiYnVzeVwiLFxuICBQQVJUSUFMID0gXCJwYXJ0aWFsXCIsXG4gIENMT1NFRCA9IFwiY2xvc2VkXCIsXG59XG5cbmV4cG9ydCBlbnVtIFNlbGVjdGlvblN0YXR1cyB7XG4gIFVOU0VMRUNURUQgPSBcInVuc2VsZWN0ZWRcIixcbiAgU0VMRUNURUQgPSBcInNlbGVjdGVkXCIsXG59XG5cbmV4cG9ydCBlbnVtIENsaWNrQWN0aW9uIHtcbiAgVkVSSUZZID0gXCJ2ZXJpZnlcIixcbiAgQ0hPT1NFID0gXCJjaG9vc2VcIixcbn1cbiIsIjxzdmVsdGU6b3B0aW9ucyB0YWc9XCJueWxhcy1jb250YWN0LWltYWdlXCIgLz5cblxuPHNjcmlwdD5cbiAgaW1wb3J0IHsgQ29udGFjdEF2YXRhclN0b3JlIH0gZnJvbSBcIkBjb21tb25zXCI7XG4gIGltcG9ydCB7IGJlZm9yZVVwZGF0ZSB9IGZyb20gXCJzdmVsdGUvaW50ZXJuYWxcIjtcblxuICBleHBvcnQgbGV0IGNvbnRhY3Q7XG4gIGV4cG9ydCBsZXQgY29udGFjdF9xdWVyeTtcbiAgZXhwb3J0IGxldCBoZWlnaHQgPSBcIjMycHhcIjtcbiAgZXhwb3J0IGxldCB3aWR0aCA9IFwiMzJweFwiO1xuICAkOiBpbWFnZSA9IG51bGw7XG5cbiAgYmVmb3JlVXBkYXRlKGFzeW5jICgpID0+IHtcbiAgICBpZiAoY29udGFjdCAmJiBjb250YWN0LnBpY3R1cmVfdXJsKSB7XG4gICAgICBpbWFnZSA9IGF3YWl0IENvbnRhY3RBdmF0YXJTdG9yZS5nZXRDb250YWN0QXZhdGFyKFxuICAgICAgICBjb250YWN0X3F1ZXJ5LFxuICAgICAgICBjb250YWN0LmlkLFxuICAgICAgKTtcbiAgICB9IGVsc2Uge1xuICAgICAgaW1hZ2UgPSBudWxsO1xuICAgIH1cbiAgfSk7XG48L3NjcmlwdD5cblxueyNpZiBpbWFnZX1cbiAgPGltZ1xuICAgIGFsdD1cIlwiXG4gICAgc3R5bGU9XCJoZWlnaHQ6IHtoZWlnaHR9OyB3aWR0aDoge3dpZHRofTsgYm9yZGVyLXJhZGl1czogNTAlO1wiXG4gICAgc3JjPVwiZGF0YTppbWFnZS9qcGc7YmFzZTY0LHtpbWFnZX1cIlxuICAvPlxuezplbHNlIGlmIGNvbnRhY3R9XG4gIDxwIHN0eWxlPVwibWFyZ2luOiAwO1wiPlxuICAgIHtjb250YWN0LmdpdmVuX25hbWUgJiYgY29udGFjdC5zdXJuYW1lXG4gICAgICA/IGNvbnRhY3QuZ2l2ZW5fbmFtZS5jaGFyQXQoMCkgKyBjb250YWN0LnN1cm5hbWUuY2hhckF0KDApXG4gICAgICA6IGNvbnRhY3QubmFtZVxuICAgICAgPyBjb250YWN0Lm5hbWUuY2hhckF0KDApXG4gICAgICA6IGNvbnRhY3QuZW1haWxcbiAgICAgID8gY29udGFjdC5lbWFpbC5jaGFyQXQoMClcbiAgICAgIDogXCI/XCJ9XG4gIDwvcD5cbnsvaWZ9XG4iLCI8c3ZlbHRlOm9wdGlvbnMgdGFnPVwibnlsYXMtbWVzc2FnZS1lcnJvclwiIC8+XG5cbjxzY3JpcHQ+XG4gIGV4cG9ydCBsZXQgZXJyb3JfbWVzc2FnZSA9IFwiVWggb2ghIExvb2tzIGxpa2UgYW4gZXJyb3Igb2NjdXJyZWRcIjtcbjwvc2NyaXB0PlxuXG48c3R5bGUgbGFuZz1cInNjc3NcIj5cbiAgQGltcG9ydCBcIi4uLy4uLy4uL2NvbXBvbmVudHMvdGhlbWluZy9yZXNldC5zY3NzXCI7XG4gIEBpbXBvcnQgXCIuLi8uLi8uLi9jb21wb25lbnRzL3RoZW1pbmcvdmFyaWFibGVzLnNjc3NcIjtcblxuICBkaXYge1xuICAgIGJhY2tncm91bmQ6IHZhcigtLXJlZC1saWdodGVyKTtcbiAgICBib3R0b206IDA7XG4gICAgY29sb3I6IHZhcigtLXJlZCk7XG4gICAgZm9udC1zaXplOiAxcmVtO1xuICAgIGxpbmUtaGVpZ2h0OiAyNHB4O1xuICAgIG1pbi1oZWlnaHQ6IDg1cHg7XG4gICAgcGFkZGluZzogMjBweCAyNHB4O1xuICAgIHBvc2l0aW9uOiBmaXhlZDtcbiAgICByaWdodDogMDtcbiAgICBtaW4td2lkdGg6IDI0MHB4O1xuICAgIHotaW5kZXg6IDI7XG4gIH1cblxuICBidXR0b24ge1xuICAgIGJhY2tncm91bmQ6IHRyYW5zcGFyZW50O1xuICAgIGNvbG9yOiB2YXIoLS1ibHVlKTtcbiAgICBjdXJzb3I6IHBvaW50ZXI7XG4gICAgZm9udC1zdHlsZTogaXRhbGljO1xuICAgIHRleHQtZGVjb3JhdGlvbjogdW5kZXJsaW5lO1xuICAgIG1hcmdpbi10b3A6IDEwcHg7XG4gIH1cbjwvc3R5bGU+XG5cbjxkaXY+XG4gIDxwPntlcnJvcl9tZXNzYWdlfTwvcD5cbiAgPGJ1dHRvbiB0eXBlPVwiYnV0dG9uXCIgb246Y2xpY2s9eygpID0+IGxvY2F0aW9uLnJlbG9hZCgpfT5cbiAgICBSZWZyZXNoIHlvdXIgcGFnZVxuICA8L2J1dHRvbj5cbjwvZGl2PlxuIiwiaW1wb3J0IHR5cGUgeyBEYXkgfSBmcm9tIFwiQGNvbW1vbnMvdHlwZXMvQXZhaWxhYmlsaXR5XCI7XG5cbi8qKlxuICogRXZlbnR1YWxseSwgcGVyaGFwcyBhIGRlc2lnbi1zeXN0ZW0tbGV2ZWwgZ3VpZGVsaW5lIGZvciBkYXRlIGFuZCB0aW1lIHN0cmluZ3MuXG4gKlxuICogQ3VycmVudGx5LCBEYXRlIGxvZ2ljOiBodHRwczovL3d3dy5maWdtYS5jb20vZmlsZS9vaUNLTnNIRGZBbzlLbkgxU2JzOFhqL0VtYWlsLSUyNi1NYWlsYm94LUNvbXBvbmVudD9ub2RlLWlkPTEyOCUzQTUxXG4gKiBObyB0aW1lIGxvZ2ljIHN0YW5kYXJkIHlldFxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBzaG93RGF0ZVJhbmdlKGRheXM6IERheVtdKTogc3RyaW5nIHtcbiAgaWYgKCFBcnJheS5pc0FycmF5KGRheXMpIHx8IGRheXMubGVuZ3RoID09PSAwKSB7XG4gICAgcmV0dXJuIFwiXCI7XG4gIH1cblxuICBjb25zdCBmaXJzdERheSA9IGRheXNbMF0udGltZXN0YW1wO1xuICBjb25zdCBsYXN0RGF5ID0gZGF5c1tkYXlzLmxlbmd0aCAtIDFdLnRpbWVzdGFtcDtcblxuICBpZiAobGFzdERheS5nZXRNb250aCgpICE9PSBmaXJzdERheS5nZXRNb250aCgpKSB7XG4gICAgaWYgKGxhc3REYXkuZ2V0RnVsbFllYXIoKSAhPT0gZmlyc3REYXkuZ2V0RnVsbFllYXIoKSkge1xuICAgICAgLy8gQ2FzZSAxOiBtb250aHMgYW5kIHllYXJzIGRpZmZlcjogRGVjIDIwMjEgLSBKYW4gMjAyMlxuICAgICAgcmV0dXJuIGAke2dldE1vbnRoU3RyaW5nKGZpcnN0RGF5LCB0cnVlKX0gLSAke2dldE1vbnRoU3RyaW5nKFxuICAgICAgICBsYXN0RGF5LFxuICAgICAgICB0cnVlLFxuICAgICAgKX1gO1xuICAgIH1cbiAgICAvLyBDYXNlIDI6IG1vbnRocyBkaWZmZXIsIHllYXJzIHRoZSBzYW1lOiBPY3QgLSBOb3YgMjAyMVxuICAgIHJldHVybiBgJHtnZXRNb250aFN0cmluZyhmaXJzdERheSl9IC0gJHtnZXRNb250aFN0cmluZyhsYXN0RGF5LCB0cnVlKX1gO1xuICB9XG4gIC8vIENhc2UgMzogbW9udGhzLCBhbmQgdGhlcmVmb3JlIHllYXJzLCBhcmUgdGhlIHNhbWU6IE9jdCAyMDIxXG4gIHJldHVybiBnZXRNb250aFN0cmluZyhmaXJzdERheSwgdHJ1ZSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRDb25kZW5zZWRUaW1lU3RyaW5nKGRhdGU6IERhdGUpOiBzdHJpbmcge1xuICAvLyAxIGFtIHwgMToxNSBhbVxuICBjb25zdCB0aW1lU3RyaW5nID0gZGF0ZS50b0xvY2FsZVRpbWVTdHJpbmcoW10sIHsgdGltZVN0eWxlOiBcInNob3J0XCIgfSk7XG4gIGlmIChkYXRlLmdldE1pbnV0ZXMoKSA9PT0gMCkge1xuICAgIHJldHVybiBkYXRlXG4gICAgICAudG9Mb2NhbGVUaW1lU3RyaW5nKFtdLCB7XG4gICAgICAgIGhvdXI6IFwibnVtZXJpY1wiLFxuICAgICAgICBob3VyMTI6IHRydWUsXG4gICAgICB9KVxuICAgICAgLnJlcGxhY2VBbGwoL1xcLi9nLCBcIlwiKTtcbiAgfVxuICByZXR1cm4gdGltZVN0cmluZy5yZXBsYWNlQWxsKC9cXC4vZywgXCJcIik7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRUaW1lU3RyaW5nKGRhdGU6IERhdGUpOiBzdHJpbmcge1xuICAvLyAxMToxMSBhbSwgTm9vblxuICBjb25zdCB0aW1lU3RyaW5nID0gZGF0ZS50b0xvY2FsZVRpbWVTdHJpbmcoW10sIHsgdGltZVN0eWxlOiBcInNob3J0XCIgfSk7XG4gIGlmICh0aW1lU3RyaW5nID09PSBcIjEyOjAwIHAubS5cIikge1xuICAgIHJldHVybiBcIk5vb25cIjtcbiAgfVxuICByZXR1cm4gdGltZVN0cmluZy5yZXBsYWNlKC9cXC4vZywgXCJcIik7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRNb250aFN0cmluZyhkYXRlOiBEYXRlLCB3aXRoWWVhciA9IGZhbHNlKTogc3RyaW5nIHtcbiAgcmV0dXJuIGRhdGVcbiAgICAudG9Mb2NhbGVEYXRlU3RyaW5nKFwiZGVmYXVsdFwiLCB7XG4gICAgICBtb250aDogXCJzaG9ydFwiLFxuICAgICAgeWVhcjogd2l0aFllYXIgPyBcIm51bWVyaWNcIiA6IHVuZGVmaW5lZCxcbiAgICB9KVxuICAgIC5yZXBsYWNlQWxsKC9cXC4vZywgXCJcIik7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRZZWFyU3RyaW5nKGRhdGU6IERhdGUpOiBzdHJpbmcge1xuICAvLyBKdWwgNXRoIDIwMjBcbiAgY29uc3Qgc3VmZml4TWFwcGVyID0gKG51bTogbnVtYmVyKTogc3RyaW5nID0+IHtcbiAgICBpZiAoWzMxLCAyMSwgMV0uaW5jbHVkZXMobnVtKSkgcmV0dXJuIFwic3QgXCI7XG4gICAgaWYgKFsyMiwgMl0uaW5jbHVkZXMobnVtKSkgcmV0dXJuIFwibmQgXCI7XG4gICAgaWYgKFsyMywgM10uaW5jbHVkZXMobnVtKSkgcmV0dXJuIFwicmQgXCI7XG4gICAgcmV0dXJuIFwidGggXCI7XG4gIH07XG4gIHJldHVybiBkYXRlXG4gICAgLnRvTG9jYWxlRGF0ZVN0cmluZyh1bmRlZmluZWQsIHtcbiAgICAgIHllYXI6IFwibnVtZXJpY1wiLFxuICAgICAgbW9udGg6IFwic2hvcnRcIixcbiAgICAgIGRheTogXCJudW1lcmljXCIsXG4gICAgfSlcbiAgICAucmVwbGFjZUFsbCgvLCAvZywgc3VmZml4TWFwcGVyKGRhdGUuZ2V0RGF0ZSgpKSlcbiAgICAucmVwbGFjZUFsbCgvWy5dL2csIFwiXCIpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0RGF0ZVN0cmluZyhkYXRlOiBEYXRlKTogc3RyaW5nIHtcbiAgLy8gU2VwIDIyXG4gIHJldHVybiBkYXRlXG4gICAgLnRvTG9jYWxlRGF0ZVN0cmluZyh1bmRlZmluZWQsIHsgbW9udGg6IFwic2hvcnRcIiwgZGF5OiBcIm51bWVyaWNcIiB9KVxuICAgIC5yZXBsYWNlQWxsKC9bLl0vZywgXCJcIik7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXREYXRlKGRhdGU6IERhdGUpOiBzdHJpbmcge1xuICBjb25zdCB0b2RheSA9IG5ldyBEYXRlKCk7XG4gIGlmICh0b2RheS50b0RhdGVTdHJpbmcoKSA9PT0gZGF0ZS50b0RhdGVTdHJpbmcoKSkge1xuICAgIHJldHVybiBnZXRUaW1lU3RyaW5nKGRhdGUpO1xuICB9XG5cbiAgY29uc3QgZGlmZl95ZWFycyA9IHRvZGF5LmdldEZ1bGxZZWFyKCkgLSBkYXRlLmdldEZ1bGxZZWFyKCk7XG4gIGlmIChkaWZmX3llYXJzICE9PSAwKSB7XG4gICAgcmV0dXJuIGdldFllYXJTdHJpbmcoZGF0ZSk7XG4gIH1cblxuICBjb25zdCB5ZXN0ZXJkYXkgPSBuZXcgRGF0ZSh0b2RheS5nZXREYXRlKCkgLSAxKTtcbiAgaWYgKHllc3RlcmRheS50b0RhdGVTdHJpbmcoKSA9PT0gZGF0ZS50b0RhdGVTdHJpbmcoKSkge1xuICAgIHJldHVybiBcIlllc3RlcmRheVwiO1xuICB9XG5cbiAgcmV0dXJuIGdldERhdGVTdHJpbmcoZGF0ZSk7XG59XG5cbmV4cG9ydCBjb25zdCB3ZWVrZGF5cyA9IFtcbiAgXCJTdW5kYXlcIixcbiAgXCJNb25kYXlcIixcbiAgXCJUdWVzZGF5XCIsXG4gIFwiV2VkbmVzZGF5XCIsXG4gIFwiVGh1cnNkYXlcIixcbiAgXCJGcmlkYXlcIixcbiAgXCJTYXR1cmRheVwiLFxuXTtcbiIsIjxzdmcgd2lkdGg9XCIyNFwiIGhlaWdodD1cIjI0XCIgdmlld0JveD1cIjAgMCAyNCAyNFwiIGZpbGw9XCJub25lXCIgeG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiPlxuPHBhdGggZD1cIk0xNCAxNkw5Ljc3NjEyIDEyLjAwMTRMMTQgOFwiIHN0cm9rZT1cIiM2QTcyODVcIiBzdHJva2Utd2lkdGg9XCIxLjVcIiBzdHJva2UtbWl0ZXJsaW1pdD1cIjEwXCIvPlxuPC9zdmc+XG4iLCI8c3ZnIHdpZHRoPVwiMjRcIiBoZWlnaHQ9XCIyNFwiIHZpZXdCb3g9XCIwIDAgMjQgMjRcIiBmaWxsPVwibm9uZVwiIHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIj5cbjxwYXRoIGQ9XCJNMTAgOEwxNC4yMjM5IDExLjk5ODZMMTAgMTZcIiBzdHJva2U9XCIjNkE3Mjg1XCIgc3Ryb2tlLXdpZHRoPVwiMS41XCIgc3Ryb2tlLW1pdGVybGltaXQ9XCIxMFwiLz5cbjwvc3ZnPlxuIiwiaW1wb3J0IHsgQXZhaWxhYmlsaXR5U3RhdHVzIH0gZnJvbSBcIkBjb21tb25zL2VudW1zL0F2YWlsYWJpbGl0eVwiO1xuaW1wb3J0IHR5cGUgeyBTZWxlY3RhYmxlU2xvdCB9IGZyb20gXCJAY29tbW9ucy90eXBlcy9BdmFpbGFiaWxpdHlcIjtcblxuZXhwb3J0IGZ1bmN0aW9uIGlzQXZhaWxhYmxlKHNsb3Q6IFNlbGVjdGFibGVTbG90KTogYm9vbGVhbiB7XG4gIHJldHVybiAoXG4gICAgc2xvdC5hdmFpbGFiaWxpdHkgIT09IEF2YWlsYWJpbGl0eVN0YXR1cy5CVVNZICYmXG4gICAgc2xvdC5hdmFpbGFiaWxpdHkgIT09IEF2YWlsYWJpbGl0eVN0YXR1cy5DTE9TRURcbiAgKTtcbn1cbiIsImltcG9ydCB0eXBlIHsgRXZlbnREZWZpbml0aW9uIH0gZnJvbSBcIkBjb21tb25zL3R5cGVzL1NjaGVkdWxlRWRpdG9yXCI7XG5pbXBvcnQgdHlwZSB7IEF2YWlsYWJpbGl0eVJ1bGUsIE9wZW5Ib3VycyB9IGZyb20gXCJAY29tbW9ucy90eXBlcy9BdmFpbGFiaWxpdHlcIjtcblxuZXhwb3J0IGZ1bmN0aW9uIGNvbnZlcnRIb3VyQXNzdW1wdGlvbnNUb09wZW5Ib3VycyhcbiAgc3RhcnRIb3VyOiBudW1iZXIsXG4gIGVuZEhvdXI6IG51bWJlcixcbiAgZXZlbnRzOiBFdmVudERlZmluaXRpb25bXSxcbik6IE9wZW5Ib3Vyc1tdIHtcbiAgcmV0dXJuIFtcbiAgICB7XG4gICAgICBlbWFpbHM6IGV2ZW50cy5mbGF0TWFwKChldmVudCkgPT4gZXZlbnQucGFydGljaXBhbnRFbWFpbHMpLFxuICAgICAgZGF5czogWy4uLkFycmF5KDcpLmtleXMoKV0sXG4gICAgICBzdGFydDogYCR7c3RhcnRIb3VyfTowMGAsXG4gICAgICBlbmQ6IGNvZXJjZUVuZFRpbWUoeyBob3VyOiBlbmRIb3VyIH0pLFxuICAgICAgdGltZXpvbmU6IEludGwuRGF0ZVRpbWVGb3JtYXQoKS5yZXNvbHZlZE9wdGlvbnMoKS50aW1lWm9uZSxcbiAgICAgIG9iamVjdF90eXBlOiBcIm9wZW5faG91cnNcIixcbiAgICB9LFxuICBdO1xufVxuXG5mdW5jdGlvbiBmb3JtYXRUaW1lKHRpbWU6IG51bWJlcikge1xuICBpZiAoIXRpbWUpIHtcbiAgICByZXR1cm4gXCIwMFwiO1xuICB9XG5cbiAgcmV0dXJuIHRpbWUudG9TdHJpbmcoKS5wYWRTdGFydCgyLCBcIjBcIik7XG59XG5cbi8qKlxuICogQ2xvdWQgY29yZSBleHBlY3RzIGVuZCB0aW1lIHJhbmdlIFswLCAyMylcbiAqIFNvIGEgdGltZSByYW5nZSAwOjAwIC0gMjQ6MDAgKHRoZSBmdWxsIGRheSksXG4gKiB3aGljaCBhIHVzZXIgbWlnaHQgdGhpbmsgaXMgYSB2YWxpZCByYW5nZSB0aHJvd3MgYW4gZXJyb3IuXG4gKlxuICogVGhlIGFjdHVhbCByYW5nZSBzaG91bGQgYmUgMDowMCAtIDIzOjU5LlxuICovXG5mdW5jdGlvbiBjb2VyY2VFbmRUaW1lKHtcbiAgaG91cixcbiAgbWludXRlID0gMCxcbn06IHtcbiAgaG91cjogbnVtYmVyO1xuICBtaW51dGU/OiBudW1iZXI7XG59KSB7XG4gIGlmIChob3VyID49IDI0KSB7XG4gICAgcmV0dXJuIGAke2Zvcm1hdFRpbWUoMjMpfToke2Zvcm1hdFRpbWUoNTkpfWA7XG4gIH1cblxuICByZXR1cm4gYCR7Zm9ybWF0VGltZShob3VyKX06JHtmb3JtYXRUaW1lKG1pbnV0ZSl9YDtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGJ1aWxkT3BlbkhvdXJzKFxuICBvcGVuSG91cnM6IEF2YWlsYWJpbGl0eVJ1bGVbXSxcbiAgZXZlbnRzOiBFdmVudERlZmluaXRpb25bXSxcbik6IE9wZW5Ib3Vyc1tdIHtcbiAgcmV0dXJuIG9wZW5Ib3Vycy5tYXAoKHJ1bGUpID0+ICh7XG4gICAgZW1haWxzOiBldmVudHMuZmxhdE1hcCgoZXZlbnQpID0+IGV2ZW50LnBhcnRpY2lwYW50RW1haWxzKSxcbiAgICBkYXlzOiBbcnVsZS5zdGFydFdlZWtkYXkgPT09IDAgPyA2IDogcnVsZS5zdGFydFdlZWtkYXkgLSAxXSwgLy8gVE9ETyAtIGluY2x1ZGUgZW5kV2Vla2RheVxuICAgIHN0YXJ0OiBgJHtmb3JtYXRUaW1lKHJ1bGUuc3RhcnRIb3VyKX06JHtmb3JtYXRUaW1lKHJ1bGUuc3RhcnRNaW51dGUpfWAsXG4gICAgZW5kOiBjb2VyY2VFbmRUaW1lKHsgaG91cjogcnVsZS5lbmRIb3VyLCBtaW51dGU6IHJ1bGUuZW5kTWludXRlIH0pLFxuICAgIHRpbWV6b25lOiBydWxlLnRpbWVab25lID8/IEludGwuRGF0ZVRpbWVGb3JtYXQoKS5yZXNvbHZlZE9wdGlvbnMoKS50aW1lWm9uZSxcbiAgICBvYmplY3RfdHlwZTogXCJvcGVuX2hvdXJzXCIsXG4gIH0pKTtcbn1cbiIsImltcG9ydCB7XG4gIFNlbGVjdGlvblN0YXR1cyxcbiAgQXZhaWxhYmlsaXR5U3RhdHVzLFxufSBmcm9tIFwiQGNvbW1vbnMvZW51bXMvQXZhaWxhYmlsaXR5XCI7XG5pbXBvcnQgeyB0aW1lRGF5LCB0aW1lSG91ciwgdGltZU1pbnV0ZSB9IGZyb20gXCJkMy10aW1lXCI7XG5pbXBvcnQgeyBzY2FsZVRpbWUgfSBmcm9tIFwiZDMtc2NhbGVcIjtcbmltcG9ydCB0eXBlIHsgVGltZUludGVydmFsIH0gZnJvbSBcImQzLXRpbWVcIjtcbmltcG9ydCB0eXBlIHsgTWFuaWZlc3QsIFRpbWVTbG90IH0gZnJvbSBcIkBjb21tb25zL3R5cGVzL0F2YWlsYWJpbGl0eVwiO1xuaW1wb3J0IHsgYXJyYXlDb250YWluc0FycmF5IH0gZnJvbSBcIkBjb21tb25zL21ldGhvZHMvY29tcG9uZW50XCI7XG5pbXBvcnQgdHlwZSB7IENvbnNlY3V0aXZlRXZlbnQgfSBmcm9tIFwiQGNvbW1vbnMvdHlwZXMvQm9va2luZ1wiO1xuXG4vLyBtYXAgb3ZlciB0aGUgdGlja3MoKSBvZiB0aGUgdGltZSBzY2FsZSBiZXR3ZWVuIHlvdXIgc3RhcnQgZGF5IGFuZCBlbmQgZGF5XG4vLyBwb3B1bGF0ZSB0aGVtIHdpdGggYXMgbWFueSBzbG90cyBhcyB5b3VyIHN0YXJ0X2hvdXIsIGVuZF9ob3VyLCBhbmQgc2xvdF9zaXplIGRpY3RhdGVcbmV4cG9ydCBjb25zdCBnZW5lcmF0ZURheVNsb3RzID0gKFxuICB0aW1lc3RhbXA6IERhdGUsXG4gIGFsbENhbGVuZGFyczogYW55W10sXG4gIHJlcXVpcmVkUGFydGljaXBhbnRzOiBzdHJpbmdbXSxcbiAgY29uc2VjdXRpdmVPcHRpb25zOiBDb25zZWN1dGl2ZUV2ZW50W11bXSxcbiAgY29uc2VjdXRpdmVQYXJ0aWNpcGFudHM6IHN0cmluZ1tdLFxuICBpbnRlcm5hbFByb3BzOiBNYW5pZmVzdCxcbik6IGFueVtdID0+IHtcbiAgY29uc3QgZGF5U3RhcnQgPSB0aW1lSG91cihcbiAgICBuZXcgRGF0ZShuZXcgRGF0ZSh0aW1lc3RhbXApLnNldEhvdXJzKGludGVybmFsUHJvcHMuc3RhcnRfaG91cikpLFxuICApO1xuICBjb25zdCBkYXlFbmQgPSB0aW1lSG91cihcbiAgICBuZXcgRGF0ZShuZXcgRGF0ZSh0aW1lc3RhbXApLnNldEhvdXJzKGludGVybmFsUHJvcHMuZW5kX2hvdXIpKSxcbiAgKTtcbiAgcmV0dXJuIHNjYWxlVGltZSgpXG4gICAgLmRvbWFpbihbZGF5U3RhcnQsIGRheUVuZF0pXG4gICAgLnRpY2tzKHRpbWVNaW51dGUuZXZlcnkoaW50ZXJuYWxQcm9wcy5zbG90X3NpemUpIGFzIFRpbWVJbnRlcnZhbClcbiAgICAuc2xpY2UoMCwgLTEpIC8vIGRvbnQgc2hvdyB0aGUgMjV0aCBob3VyXG4gICAgLm1hcCgodGltZTogRGF0ZSkgPT4ge1xuICAgICAgY29uc3QgZW5kVGltZSA9IHRpbWVNaW51dGUub2Zmc2V0KHRpbWUsIGludGVybmFsUHJvcHMuc2xvdF9zaXplKTtcbiAgICAgIGNvbnN0IGZyZWVDYWxlbmRhcnM6IHN0cmluZ1tdID0gW107XG4gICAgICBsZXQgYXZhaWxhYmlsaXR5ID0gQXZhaWxhYmlsaXR5U3RhdHVzLkZSRUU7IC8vIGRlZmF1bHRcbiAgICAgIGlmIChhbGxDYWxlbmRhcnMubGVuZ3RoKSB7XG4gICAgICAgIGNvbnN0IGN1cnJlbnRTbG90OiBUaW1lU2xvdCA9IHtcbiAgICAgICAgICBzdGFydF90aW1lOiB0aW1lLFxuICAgICAgICAgIGVuZF90aW1lOiBlbmRUaW1lLFxuICAgICAgICAgIGF2YWlsYWJsZV9jYWxlbmRhcnM6IFtdLFxuICAgICAgICAgIGV4cGlyeVNlbGVjdGlvbjogXCJcIixcbiAgICAgICAgICByZWN1cnJlbmNlX2NhZGVuY2U6IFwiXCIsXG4gICAgICAgICAgcmVjdXJyZW5jZV9leHBpcnk6IFwiXCIsXG4gICAgICAgICAgZmFsbHNXaXRoaW5BbGxvd2VkVGltZVJhbmdlOiBmYWxzZSxcbiAgICAgICAgfTtcbiAgICAgICAgZm9yIChjb25zdCBjYWxlbmRhciBvZiBhbGxDYWxlbmRhcnMpIHtcbiAgICAgICAgICAvLyBBZGp1c3QgY2FsZW5kYXIudGltZXNsb3RzIGZvciBidWZmZXJzXG4gICAgICAgICAgY29uc3QgdGltZXNsb3RzID1cbiAgICAgICAgICAgIGNhbGVuZGFyLmF2YWlsYWJpbGl0eSA9PT0gQXZhaWxhYmlsaXR5U3RhdHVzLkJVU1lcbiAgICAgICAgICAgICAgPyBjYWxlbmRhci50aW1lc2xvdHMubWFwKChzbG90OiBUaW1lU2xvdCkgPT4gKHtcbiAgICAgICAgICAgICAgICAgIHN0YXJ0X3RpbWU6IHRpbWVNaW51dGUub2Zmc2V0KFxuICAgICAgICAgICAgICAgICAgICBzbG90LnN0YXJ0X3RpbWUsXG4gICAgICAgICAgICAgICAgICAgIC1pbnRlcm5hbFByb3BzLmV2ZW50X2J1ZmZlcixcbiAgICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgICBlbmRfdGltZTogdGltZU1pbnV0ZS5vZmZzZXQoXG4gICAgICAgICAgICAgICAgICAgIHNsb3QuZW5kX3RpbWUsXG4gICAgICAgICAgICAgICAgICAgIGludGVybmFsUHJvcHMuZXZlbnRfYnVmZmVyLFxuICAgICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICB9KSlcbiAgICAgICAgICAgICAgOiBjYWxlbmRhci50aW1lc2xvdHMubWFwKChzbG90OiBUaW1lU2xvdCkgPT4gKHtcbiAgICAgICAgICAgICAgICAgIC8vIERvbid0IGFwcGx5IHN0YXJ0LWJ1ZmZlciB0byB0aGUgZmlyc3QgdGltZXNsb3QsIG5vciBlbmQtYnVmZmVyIHRvIHRoZSBsYXN0IHRpbWVzbG90LlxuICAgICAgICAgICAgICAgICAgLy8gV29ya3MgYWNyb3NzIG11bHRpcGxlIGRheXM7IHlvdSB3b24ndCBnZXQgYSByYW5kb20gYnVmZmVyIGF0IDExOjUwIC8gMDA6MTBcbiAgICAgICAgICAgICAgICAgIHN0YXJ0X3RpbWU6IHRpbWVNaW51dGUub2Zmc2V0KFxuICAgICAgICAgICAgICAgICAgICBzbG90LnN0YXJ0X3RpbWUsXG4gICAgICAgICAgICAgICAgICAgIHNsb3QgPT09IGNhbGVuZGFyLnRpbWVzbG90c1swXVxuICAgICAgICAgICAgICAgICAgICAgID8gMFxuICAgICAgICAgICAgICAgICAgICAgIDogaW50ZXJuYWxQcm9wcy5ldmVudF9idWZmZXIsXG4gICAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgICAgZW5kX3RpbWU6IHRpbWVNaW51dGUub2Zmc2V0KFxuICAgICAgICAgICAgICAgICAgICBzbG90LmVuZF90aW1lLFxuICAgICAgICAgICAgICAgICAgICBzbG90ID09PSBjYWxlbmRhci50aW1lc2xvdHNbY2FsZW5kYXIudGltZXNsb3RzLmxlbmd0aCAtIDFdXG4gICAgICAgICAgICAgICAgICAgICAgPyAwXG4gICAgICAgICAgICAgICAgICAgICAgOiAtaW50ZXJuYWxQcm9wcy5ldmVudF9idWZmZXIsXG4gICAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgIH0pKTtcblxuICAgICAgICAgIGxldCBjb25jdXJyZW50U2xvdEV2ZW50c0ZvclVzZXIgPSAwO1xuICAgICAgICAgIGlmIChjYWxlbmRhci5hdmFpbGFiaWxpdHkgPT09IEF2YWlsYWJpbGl0eVN0YXR1cy5CVVNZKSB7XG4gICAgICAgICAgICAvLyBGb3IgQnVzeSBjYWxlbmRhcnMsIGEgdGltZXNsb3QgaXMgY29uc2lkZXJlZCBhdmFpbGFibGUgaWYgaXRzIGNhbGVuZGFyIGhhcyBubyBvdmVybGFwcGluZyBldmVudHNcbiAgICAgICAgICAgIGNvbmN1cnJlbnRTbG90RXZlbnRzRm9yVXNlciA9IG92ZXJsYXAodGltZXNsb3RzLCBjdXJyZW50U2xvdCk7XG4gICAgICAgICAgfSBlbHNlIGlmIChjYWxlbmRhci5hdmFpbGFiaWxpdHkgPT09IEF2YWlsYWJpbGl0eVN0YXR1cy5GUkVFKSB7XG4gICAgICAgICAgICAvLyBGb3IgRnJlZSBjYWxlbmRhcnMsIGEgdGltZXNsb3QgaXMgY29uc2lkZXJlZCBhdmFpbGFibGUgaWYgaXRzIGNhbGVuZGFyIGhhcyBhIHRpbWUgdGhhdCBmdWxseSBlbnZlbG9wcyBpdC5cbiAgICAgICAgICAgIGNvbmN1cnJlbnRTbG90RXZlbnRzRm9yVXNlciA9IHRpbWVzbG90cy5zb21lKFxuICAgICAgICAgICAgICAoYmxvYjogVGltZVNsb3QpID0+XG4gICAgICAgICAgICAgICAgY3VycmVudFNsb3Quc3RhcnRfdGltZSA+PSBibG9iLnN0YXJ0X3RpbWUgJiZcbiAgICAgICAgICAgICAgICBjdXJyZW50U2xvdC5lbmRfdGltZSA8PSBibG9iLmVuZF90aW1lLFxuICAgICAgICAgICAgKVxuICAgICAgICAgICAgICA/IDFcbiAgICAgICAgICAgICAgOiAwO1xuICAgICAgICAgICAgLy8gc2xvdCBhdmFpbGFiaWxpdHkgaXMgd2hlbiBhIGdpdmVuIHRpbWVzbG90IGhhcyBhbGwgb2YgaXRzIG1pbnV0ZXMgcmVwcmVzZW50ZWQgaW4gY2FsZW5kYXIuZnJlZSB0aW1lc2xvdHNcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKGNhbGVuZGFyLmF2YWlsYWJpbGl0eSA9PT0gQXZhaWxhYmlsaXR5U3RhdHVzLkJVU1kpIHtcbiAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgaW50ZXJuYWxQcm9wcy5jYXBhY2l0eSAmJlxuICAgICAgICAgICAgICBpbnRlcm5hbFByb3BzLmNhcGFjaXR5ID49IDEgJiZcbiAgICAgICAgICAgICAgY29uY3VycmVudFNsb3RFdmVudHNGb3JVc2VyIDwgaW50ZXJuYWxQcm9wcy5jYXBhY2l0eVxuICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgIGZyZWVDYWxlbmRhcnMucHVzaChjYWxlbmRhcj8uZW1haWxBZGRyZXNzIHx8IFwiXCIpO1xuICAgICAgICAgICAgfSBlbHNlIGlmICghY29uY3VycmVudFNsb3RFdmVudHNGb3JVc2VyKSB7XG4gICAgICAgICAgICAgIGZyZWVDYWxlbmRhcnMucHVzaChjYWxlbmRhcj8uZW1haWxBZGRyZXNzIHx8IFwiXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0gZWxzZSBpZiAoXG4gICAgICAgICAgICBjYWxlbmRhci5hdmFpbGFiaWxpdHkgPT09IEF2YWlsYWJpbGl0eVN0YXR1cy5GUkVFIHx8XG4gICAgICAgICAgICAhY2FsZW5kYXIuYXZhaWxhYmlsaXR5XG4gICAgICAgICAgKSB7XG4gICAgICAgICAgICAvLyBpZiBhIGNhbGVuZGFyIGlzIHBhc3NlZCBpbiB3aXRob3V0IGF2YWlsYWJpbGl0eSwgYXNzdW1lIHRoZSB0aW1lc2xvdHMgYXJlIGF2YWlsYWJsZS5cbiAgICAgICAgICAgIGlmIChjb25jdXJyZW50U2xvdEV2ZW50c0ZvclVzZXIpIHtcbiAgICAgICAgICAgICAgZnJlZUNhbGVuZGFycy5wdXNoKGNhbGVuZGFyPy5lbWFpbEFkZHJlc3MgfHwgXCJcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGZyZWVDYWxlbmRhcnMubGVuZ3RoKSB7XG4gICAgICAgICAgaWYgKGZyZWVDYWxlbmRhcnMubGVuZ3RoID09PSBhbGxDYWxlbmRhcnMubGVuZ3RoKSB7XG4gICAgICAgICAgICBhdmFpbGFiaWxpdHkgPSBBdmFpbGFiaWxpdHlTdGF0dXMuRlJFRTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgYXZhaWxhYmlsaXR5ID0gQXZhaWxhYmlsaXR5U3RhdHVzLlBBUlRJQUw7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGF2YWlsYWJpbGl0eSA9IEF2YWlsYWJpbGl0eVN0YXR1cy5CVVNZO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8vIElmIGF2YWlsYWJpbGl0eSBpcyBwYXJ0aWFsIChub3QgMTAwJSBvZiBjYWxlbmRhcnMpLCBhbmQgdGhhdCByYXRpbyBpcyBsZXNzIHRoYW4gcGFydGlhbF9ib29rYWJsZV9yYXRpbyxcbiAgICAgIC8vIG1hcmsgdGhlIHNsb3QgYXMgYnVzeVxuICAgICAgaWYgKFxuICAgICAgICBhdmFpbGFiaWxpdHkgPT09IEF2YWlsYWJpbGl0eVN0YXR1cy5QQVJUSUFMICYmXG4gICAgICAgIGZyZWVDYWxlbmRhcnMubGVuZ3RoIDxcbiAgICAgICAgICBhbGxDYWxlbmRhcnMubGVuZ3RoICogaW50ZXJuYWxQcm9wcy5wYXJ0aWFsX2Jvb2thYmxlX3JhdGlvXG4gICAgICApIHtcbiAgICAgICAgYXZhaWxhYmlsaXR5ID0gQXZhaWxhYmlsaXR5U3RhdHVzLkJVU1k7XG4gICAgICB9XG5cbiAgICAgIC8vIEFsbG93cyB1c2VycyB0byBib29rIG92ZXIgYnVzeSBzbG90cyBpZiBwYXJ0aWFsX2Jvb2thYmxlX3JhdGlvIGlzIDBcbiAgICAgIGlmIChcbiAgICAgICAgYXZhaWxhYmlsaXR5ID09PSBBdmFpbGFiaWxpdHlTdGF0dXMuQlVTWSAmJlxuICAgICAgICBpbnRlcm5hbFByb3BzLnBhcnRpYWxfYm9va2FibGVfcmF0aW8gPT09IDBcbiAgICAgICkge1xuICAgICAgICBhdmFpbGFiaWxpdHkgPSBBdmFpbGFiaWxpdHlTdGF0dXMuUEFSVElBTDtcbiAgICAgIH1cblxuICAgICAgLy8gSWYgYXZhaWxhYmlsaXR5IGlzIHBhcnRpYWwsIGJ1dCBhIHJlcXVpcmVkIHBhcnRpY2lwYW50IGlzIHVuYXZhaWxibGUsIHRoZSBzbG90IGJlY29tZXMgQnVzeVxuICAgICAgaWYgKFxuICAgICAgICBhdmFpbGFiaWxpdHkgPT09IEF2YWlsYWJpbGl0eVN0YXR1cy5QQVJUSUFMICYmXG4gICAgICAgIGludGVybmFsUHJvcHMucmVxdWlyZWRfcGFydGljaXBhbnRzLmxlbmd0aFxuICAgICAgKSB7XG4gICAgICAgIC8vQ2hlY2sgaWYgZXZlcnkgcGFydGljaXBhbnRzIGlzIGluY2x1ZGVkIGluIHRoZSBhdmFpbGFibGUgY2FsZW5kYXJcbiAgICAgICAgaWYgKCFhcnJheUNvbnRhaW5zQXJyYXkocmVxdWlyZWRQYXJ0aWNpcGFudHMsIGZyZWVDYWxlbmRhcnMpKSB7XG4gICAgICAgICAgYXZhaWxhYmlsaXR5ID0gQXZhaWxhYmlsaXR5U3RhdHVzLkJVU1k7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLy8gSWYgbWFuZGF0ZV90b3Bfb2ZfaG91ciwgY2hhbmdlIGFueSBzdGF0dXMgdG8gXCJidXN5XCIgaWYgaXQncyBub3QgYXQgOjAwXG4gICAgICBpZiAoaW50ZXJuYWxQcm9wcy5tYW5kYXRlX3RvcF9vZl9ob3VyICYmIHRpbWUuZ2V0TWludXRlcygpICE9PSAwKSB7XG4gICAgICAgIGF2YWlsYWJpbGl0eSA9IEF2YWlsYWJpbGl0eVN0YXR1cy5CVVNZO1xuICAgICAgICBmcmVlQ2FsZW5kYXJzLmxlbmd0aCA9IDA7XG4gICAgICB9XG5cbiAgICAgIC8vIGlmIHRoZSBcIm9wZW5faG91cnNcIiBwcm9wZXJ0eSBoYXMgcnVsZXMsIGFkaGVyZSB0byB0aGVtIGFib3ZlIGFueSBvdGhlciBldmVudC1iYXNlZCBmcmVlL2J1c3kgc3RhdHVzZXNcbiAgICAgIC8vIChNYXJrIHRoZSBzbG90IGJ1c3kgaWYgaXQgZmFsbHMgb3V0c2lkZSB0aGUgb3Blbl9ob3VycylcbiAgICAgIGlmIChpbnRlcm5hbFByb3BzLm9wZW5faG91cnMubGVuZ3RoKSB7XG4gICAgICAgIGlmIChhdmFpbGFiaWxpdHkgIT09IEF2YWlsYWJpbGl0eVN0YXR1cy5CVVNZKSB7XG4gICAgICAgICAgbGV0IGRheVJlbGV2YW50UnVsZXMgPSBbXTtcbiAgICAgICAgICBkYXlSZWxldmFudFJ1bGVzID0gaW50ZXJuYWxQcm9wcy5vcGVuX2hvdXJzLmZpbHRlcihcbiAgICAgICAgICAgIChydWxlKSA9PlxuICAgICAgICAgICAgICAhT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHJ1bGUsIFwic3RhcnRXZWVrZGF5XCIpIHx8XG4gICAgICAgICAgICAgIHJ1bGUuc3RhcnRXZWVrZGF5ID09PSB0aW1lLmdldERheSgpIHx8XG4gICAgICAgICAgICAgIHJ1bGUuZW5kV2Vla2RheSA9PT0gdGltZS5nZXREYXkoKSxcbiAgICAgICAgICApO1xuICAgICAgICAgIGNvbnN0IHNsb3RFeGlzdHNJbk9wZW5Ib3VycyA9IGRheVJlbGV2YW50UnVsZXMuc29tZSgocnVsZSkgPT4ge1xuICAgICAgICAgICAgY29uc3QgcnVsZVN0YXJ0QXBwbGllZERhdGUgPSBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoXG4gICAgICAgICAgICAgIHJ1bGUsXG4gICAgICAgICAgICAgIFwic3RhcnRXZWVrZGF5XCIsXG4gICAgICAgICAgICApXG4gICAgICAgICAgICAgID8gdGltZURheS5vZmZzZXQoXG4gICAgICAgICAgICAgICAgICB0aW1lLFxuICAgICAgICAgICAgICAgICAgKHJ1bGUuc3RhcnRXZWVrZGF5IGFzIG51bWJlcikgLSB0aW1lLmdldERheSgpLFxuICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgOiBuZXcgRGF0ZSh0aW1lKTtcbiAgICAgICAgICAgIHJ1bGVTdGFydEFwcGxpZWREYXRlLnNldEhvdXJzKHJ1bGUuc3RhcnRIb3VyKTtcbiAgICAgICAgICAgIHJ1bGVTdGFydEFwcGxpZWREYXRlLnNldE1pbnV0ZXMocnVsZS5zdGFydE1pbnV0ZSk7XG5cbiAgICAgICAgICAgIGNvbnN0IHJ1bGVFbmRBcHBsaWVkRGF0ZSA9IE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChcbiAgICAgICAgICAgICAgcnVsZSxcbiAgICAgICAgICAgICAgXCJzdGFydFdlZWtkYXlcIixcbiAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgPyB0aW1lRGF5Lm9mZnNldChcbiAgICAgICAgICAgICAgICAgIHRpbWUsXG4gICAgICAgICAgICAgICAgICAocnVsZS5lbmRXZWVrZGF5IGFzIG51bWJlcikgLSB0aW1lLmdldERheSgpLFxuICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgOiBuZXcgRGF0ZSh0aW1lKTtcbiAgICAgICAgICAgIHJ1bGVFbmRBcHBsaWVkRGF0ZS5zZXRIb3VycyhydWxlLmVuZEhvdXIpO1xuICAgICAgICAgICAgcnVsZUVuZEFwcGxpZWREYXRlLnNldE1pbnV0ZXMocnVsZS5lbmRNaW51dGUpO1xuXG4gICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICB0aW1lID49IHJ1bGVTdGFydEFwcGxpZWREYXRlICYmIGVuZFRpbWUgPD0gcnVsZUVuZEFwcGxpZWREYXRlXG4gICAgICAgICAgICApO1xuICAgICAgICAgIH0pO1xuICAgICAgICAgIGlmICghc2xvdEV4aXN0c0luT3BlbkhvdXJzKSB7XG4gICAgICAgICAgICBhdmFpbGFiaWxpdHkgPSBBdmFpbGFiaWxpdHlTdGF0dXMuQ0xPU0VEO1xuICAgICAgICAgICAgZnJlZUNhbGVuZGFycy5sZW5ndGggPSAwO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvLyBIYW5kbGUgdGhlIENvbnNlY3V0aXZlIEV2ZW50cyBtb2RlbCwgd2hlcmUgYSBzbG90IGlmIGJ1c3kgaWYgaXQgZmFsbHMgd2l0aGluIGEgY29uc2VjdXRpdmUgdGltZXNsb3QuXG4gICAgICAvLyBOb25lIG9mIHRoZSBvdGhlciBhYm92ZSBydWxlcyBzaG91bGQgYXBwbHksIGV4Y2VwdCAobWF5YmUhKSBCdWZmZXIgYW5kIE9wZW4gSG91cnMuXG4gICAgICBpZiAoaW50ZXJuYWxQcm9wcy5ldmVudHM/Lmxlbmd0aCA+IDEgJiYgY29uc2VjdXRpdmVPcHRpb25zLmxlbmd0aCkge1xuICAgICAgICBjb25zdCBleGlzdHNXaXRoaW5Db25zZWN1dGl2ZUJsb2NrID0gY29uc2VjdXRpdmVPcHRpb25zLnNvbWUoXG4gICAgICAgICAgKGV2ZW50KSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICB0aW1lID49IGV2ZW50WzBdLnN0YXJ0X3RpbWUgJiZcbiAgICAgICAgICAgICAgZW5kVGltZSA8PSBldmVudFtldmVudC5sZW5ndGggLSAxXS5lbmRfdGltZVxuICAgICAgICAgICAgKTtcbiAgICAgICAgICB9LFxuICAgICAgICApO1xuICAgICAgICBpZiAoZXhpc3RzV2l0aGluQ29uc2VjdXRpdmVCbG9jaykge1xuICAgICAgICAgIGF2YWlsYWJpbGl0eSA9IEF2YWlsYWJpbGl0eVN0YXR1cy5GUkVFO1xuICAgICAgICAgIGZyZWVDYWxlbmRhcnMubGVuZ3RoID0gY29uc2VjdXRpdmVQYXJ0aWNpcGFudHMubGVuZ3RoO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGF2YWlsYWJpbGl0eSA9IEF2YWlsYWJpbGl0eVN0YXR1cy5CVVNZO1xuICAgICAgICAgIGZyZWVDYWxlbmRhcnMubGVuZ3RoID0gMDtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBjb25zdCB0b2RheSA9IG5ldyBEYXRlKG5ldyBEYXRlKCkuc2V0SG91cnMoMCwgMCwgMCwgMCkpLmdldFRpbWUoKTtcbiAgICAgIGNvbnN0IGRheU9mZnNldCA9XG4gICAgICAgIChuZXcgRGF0ZSh0aW1lc3RhbXApLmdldFRpbWUoKSAtIHRvZGF5KSAvICgxMDAwICogNjAgKiA2MCAqIDI0KTtcblxuICAgICAgY29uc3QgdGltZU9mZnNldCA9XG4gICAgICAgIChuZXcgRGF0ZSh0aW1lKS5nZXRUaW1lKCkgLSBuZXcgRGF0ZSgpLmdldFRpbWUoKSkgL1xuICAgICAgICAoMTAwMCAqIDYwICogNjAgKiAyNCk7XG5cbiAgICAgIHJldHVybiB7XG4gICAgICAgIHNlbGVjdGlvblN0YXR1czogU2VsZWN0aW9uU3RhdHVzLlVOU0VMRUNURUQsXG4gICAgICAgIGF2YWlsYWJpbGl0eTogYXZhaWxhYmlsaXR5LFxuICAgICAgICBhdmFpbGFibGVfY2FsZW5kYXJzOiBmcmVlQ2FsZW5kYXJzLFxuICAgICAgICBzdGFydF90aW1lOiB0aW1lLFxuICAgICAgICBlbmRfdGltZTogZW5kVGltZSxcbiAgICAgICAgZmFsbHNXaXRoaW5BbGxvd2VkVGltZVJhbmdlOlxuICAgICAgICAgIHRpbWVPZmZzZXQgPj0gMCAmJlxuICAgICAgICAgIGRheU9mZnNldCA+PSBpbnRlcm5hbFByb3BzLm1pbl9ib29rX2FoZWFkX2RheXMgJiZcbiAgICAgICAgICBkYXlPZmZzZXQgPD0gaW50ZXJuYWxQcm9wcy5tYXhfYm9va19haGVhZF9kYXlzLFxuICAgICAgfTtcbiAgICB9KTtcbn07XG5cbi8vIGh0dHBzOi8vZGVyaWNrYmFpbGV5LmNvbS8yMDE1LzA5LzA3L2NoZWNrLWZvci1kYXRlLXJhbmdlLW92ZXJsYXAtd2l0aC1qYXZhc2NyaXB0LWFycmF5cy1zb3J0aW5nLWFuZC1yZWR1Y2luZy9cbmV4cG9ydCBmdW5jdGlvbiBvdmVybGFwKGV2ZW50czogVGltZVNsb3RbXSwgc2xvdDogVGltZVNsb3QpOiBudW1iZXIge1xuICByZXR1cm4gZXZlbnRzLnJlZHVjZSgocmVzdWx0LCBjdXJyZW50KSA9PiB7XG4gICAgY29uc3Qgb3ZlcmxhcCA9XG4gICAgICBzbG90LnN0YXJ0X3RpbWUgPCBjdXJyZW50LmVuZF90aW1lICYmIGN1cnJlbnQuc3RhcnRfdGltZSA8IHNsb3QuZW5kX3RpbWU7XG5cbiAgICBpZiAob3ZlcmxhcCkge1xuICAgICAgLy8gc3RvcmUgdGhlIGFtb3VudCBvZiBvdmVybGFwXG4gICAgICByZXN1bHQrKztcbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfSwgMCk7XG59XG4iLCI8c3ZlbHRlOm9wdGlvbnMgdGFnPVwibnlsYXMtYXZhaWxhYmlsaXR5XCIgLz5cblxuPHNjcmlwdCBsYW5nPVwidHNcIj5cbiAgaW1wb3J0IHtcbiAgICBmb3JtYXRUaW1lU2xvdCxcbiAgICBpc1ZhbGlkVGltZXpvbmUsXG4gICAgc2V0VGltZVpvbmVPZmZzZXQsXG4gIH0gZnJvbSBcIkBjb21tb25zL21ldGhvZHMvY29udmVydERhdGVUaW1lWm9uZVwiO1xuICBpbXBvcnQge1xuICAgIE1hbmlmZXN0U3RvcmUsXG4gICAgQXZhaWxhYmlsaXR5U3RvcmUsXG4gICAgRXJyb3JTdG9yZSxcbiAgICBDb25zZWN1dGl2ZUF2YWlsYWJpbGl0eVN0b3JlLFxuICB9IGZyb20gXCIuLi8uLi8uLi9jb21tb25zL3NyY1wiO1xuICBpbXBvcnQgeyBoYW5kbGVFcnJvciB9IGZyb20gXCJAY29tbW9ucy9tZXRob2RzL2FwaVwiO1xuICBpbXBvcnQgeyBvbk1vdW50LCB0aWNrIH0gZnJvbSBcInN2ZWx0ZVwiO1xuICBpbXBvcnQgeyBnZXRfY3VycmVudF9jb21wb25lbnQgfSBmcm9tIFwic3ZlbHRlL2ludGVybmFsXCI7XG5cbiAgaW1wb3J0IHtcbiAgICBnZXRFdmVudERpc3BhdGNoZXIsXG4gICAgYnVpbGRJbnRlcm5hbFByb3BzLFxuICAgIGFycmF5Q29udGFpbnNBcnJheSxcbiAgfSBmcm9tIFwiQGNvbW1vbnMvbWV0aG9kcy9jb21wb25lbnRcIjtcbiAgaW1wb3J0IHR5cGUgeyBUaW1lSW50ZXJ2YWwgfSBmcm9tIFwiZDMtdGltZVwiO1xuICBpbXBvcnQgeyB0aW1lV2VlaywgdGltZURheSwgdGltZUhvdXIsIHRpbWVNaW51dGUgfSBmcm9tIFwiZDMtdGltZVwiO1xuICBpbXBvcnQgeyBzY2FsZVRpbWUsIHNjYWxlTGluZWFyIH0gZnJvbSBcImQzLXNjYWxlXCI7XG4gIGltcG9ydCB7IGxpZ2h0ZW5IZXhDb2xvdXIgfSBmcm9tIFwiQGNvbW1vbnMvbWV0aG9kcy9jb2xvdXJcIjtcbiAgaW1wb3J0IHtcbiAgICBTZWxlY3Rpb25TdGF0dXMsXG4gICAgQXZhaWxhYmlsaXR5U3RhdHVzLFxuICB9IGZyb20gXCJAY29tbW9ucy9lbnVtcy9BdmFpbGFiaWxpdHlcIjtcblxuICBpbXBvcnQgdHlwZSB7XG4gICAgTWFuaWZlc3QsXG4gICAgVGltZVNsb3QsXG4gICAgU2VsZWN0YWJsZVNsb3QsXG4gICAgQXZhaWxhYmlsaXR5UXVlcnksXG4gICAgQXZhaWxhYmlsaXR5UnVsZSxcbiAgICBEYXksXG4gICAgUHJlRGF0ZWRUaW1lU2xvdCxcbiAgICBPcGVuSG91cnMsXG4gICAgQXZhaWxhYmlsaXR5UmVzcG9uc2UsXG4gIH0gZnJvbSBcIkBjb21tb25zL3R5cGVzL0F2YWlsYWJpbGl0eVwiO1xuICBpbXBvcnQgXCJAY29tbW9ucy9jb21wb25lbnRzL0NvbnRhY3RJbWFnZS9Db250YWN0SW1hZ2Uuc3ZlbHRlXCI7XG4gIGltcG9ydCBcIkBjb21tb25zL2NvbXBvbmVudHMvRXJyb3JNZXNzYWdlLnN2ZWx0ZVwiO1xuICBpbXBvcnQge1xuICAgIGdldFRpbWVTdHJpbmcsXG4gICAgZ2V0Q29uZGVuc2VkVGltZVN0cmluZyxcbiAgICBzaG93RGF0ZVJhbmdlLFxuICB9IGZyb20gXCJAY29tbW9ucy9tZXRob2RzL2RhdGV0aW1lXCI7XG4gIGltcG9ydCBCYWNrSWNvbiBmcm9tIFwiLi9hc3NldHMvbGVmdC1hcnJvdy5zdmdcIjtcbiAgaW1wb3J0IE5leHRJY29uIGZyb20gXCIuL2Fzc2V0cy9yaWdodC1hcnJvdy5zdmdcIjtcbiAgaW1wb3J0IHsgaXNBdmFpbGFibGUgfSBmcm9tIFwiLi9tZXRob2Qvc2xvdFwiO1xuICBpbXBvcnQge1xuICAgIGJ1aWxkT3BlbkhvdXJzLFxuICAgIGNvbnZlcnRIb3VyQXNzdW1wdGlvbnNUb09wZW5Ib3VycyxcbiAgfSBmcm9tIFwiLi9tZXRob2Qvb3BlbmhvdXJzXCI7XG4gIGltcG9ydCB0eXBlIHsgRXZlbnREZWZpbml0aW9uIH0gZnJvbSBcIkBjb21tb25zL3R5cGVzL1NjaGVkdWxlRWRpdG9yXCI7XG4gIGltcG9ydCB0eXBlIHsgQ29uc2VjdXRpdmVFdmVudCB9IGZyb20gXCJAY29tbW9ucy90eXBlcy9Cb29raW5nXCI7XG4gIGltcG9ydCB7IGdlbmVyYXRlRGF5U2xvdHMgfSBmcm9tIFwiLi9tZXRob2QvYXZhaWxhYmlsaXR5VXRpbHNcIjtcblxuICAvLyNyZWdpb24gcHJvcHNcbiAgZXhwb3J0IGxldCBpZDogc3RyaW5nID0gXCJcIjtcbiAgZXhwb3J0IGxldCBhY2Nlc3NfdG9rZW46IHN0cmluZyA9IFwiXCI7XG5cbiAgZXhwb3J0IGxldCBldmVudF90b19ob3ZlcjogQ29uc2VjdXRpdmVFdmVudFtdIHwgbnVsbCA9IG51bGw7XG4gIGV4cG9ydCBsZXQgZXZlbnRfdG9fc2VsZWN0OiBDb25zZWN1dGl2ZUV2ZW50W10gfCBudWxsID0gbnVsbDtcblxuICBleHBvcnQgbGV0IGFsbG93X2Jvb2tpbmc6IGJvb2xlYW47XG4gIGV4cG9ydCBsZXQgYWxsb3dfZGF0ZV9jaGFuZ2U6IGJvb2xlYW47XG4gIGV4cG9ydCBsZXQgYXR0ZW5kZWVzX3RvX3Nob3c6IG51bWJlcjtcbiAgZXhwb3J0IGxldCBhdmFpbGFiaWxpdHk6IEF2YWlsYWJpbGl0eVJlc3BvbnNlO1xuICBleHBvcnQgbGV0IGJvb2tpbmdfb3B0aW9uczogQ29uc2VjdXRpdmVFdmVudFtdW107XG4gIGV4cG9ydCBsZXQgYm9va2luZ191c2VyX2VtYWlsOiBzdHJpbmc7XG4gIGV4cG9ydCBsZXQgYm9va2luZ191c2VyX3Rva2VuOiBzdHJpbmc7XG4gIGV4cG9ydCBsZXQgYnVzeV9jb2xvcjogc3RyaW5nO1xuICBleHBvcnQgbGV0IGNhcGFjaXR5OiBudW1iZXIgfCBudWxsO1xuICBleHBvcnQgbGV0IGNsb3NlZF9jb2xvcjogc3RyaW5nO1xuICBleHBvcnQgbGV0IGRhdGVfZm9ybWF0OiBcIndlZWtkYXlcIiB8IFwiZGF0ZVwiIHwgXCJmdWxsXCIgfCBcIm5vbmVcIjtcbiAgZXhwb3J0IGxldCBkYXRlc190b19zaG93OiBudW1iZXI7XG4gIGV4cG9ydCBsZXQgZW5kX2hvdXI6IG51bWJlcjtcbiAgZXhwb3J0IGxldCBldmVudF9idWZmZXI6IG51bWJlcjtcbiAgZXhwb3J0IGxldCBmcmVlX2NvbG9yOiBzdHJpbmc7XG4gIGV4cG9ydCBsZXQgbWFuZGF0ZV90b3Bfb2ZfaG91cjogYm9vbGVhbjtcbiAgZXhwb3J0IGxldCBtYXhfYm9va19haGVhZF9kYXlzOiBudW1iZXI7XG4gIGV4cG9ydCBsZXQgbWluX2Jvb2tfYWhlYWRfZGF5czogbnVtYmVyO1xuICBleHBvcnQgbGV0IG9wZW5faG91cnM6IEF2YWlsYWJpbGl0eVJ1bGVbXTtcbiAgZXhwb3J0IGxldCBvdmVyYm9va2VkX3RocmVzaG9sZDogbnVtYmVyO1xuICBleHBvcnQgbGV0IHBhcnRpYWxfYm9va2FibGVfcmF0aW86IG51bWJlcjtcbiAgZXhwb3J0IGxldCBwYXJ0aWFsX2NvbG9yOiBzdHJpbmc7XG4gIGV4cG9ydCBsZXQgcmVxdWlyZWRfcGFydGljaXBhbnRzOiBzdHJpbmdbXTtcbiAgZXhwb3J0IGxldCBzZWxlY3RlZF9jb2xvcjogc3RyaW5nO1xuICBleHBvcnQgbGV0IHNob3dfYXNfd2VlazogYm9vbGVhbjtcbiAgZXhwb3J0IGxldCBzaG93X2hlYWRlcjogYm9vbGVhbjtcbiAgZXhwb3J0IGxldCBzaG93X2hvc3RzOiBcInNob3dcIiB8IFwiaGlkZVwiO1xuICBleHBvcnQgbGV0IHNob3dfdGlja3M6IGJvb2xlYW47XG4gIGV4cG9ydCBsZXQgc2hvd193ZWVrZW5kczogYm9vbGVhbjtcbiAgZXhwb3J0IGxldCBzbG90X3NpemU6IG51bWJlcjsgLy8gaW4gbWludXRlc1xuICBleHBvcnQgbGV0IHN0YXJ0X2RhdGU6IERhdGUgfCBudWxsO1xuICBleHBvcnQgbGV0IHN0YXJ0X2hvdXI6IG51bWJlcjtcbiAgZXhwb3J0IGxldCB0aW1lem9uZTogc3RyaW5nO1xuICBleHBvcnQgbGV0IHZpZXdfYXM6IFwic2NoZWR1bGVcIiB8IFwibGlzdFwiO1xuICBleHBvcnQgbGV0IHVuYXZhaWxhYmxlX2NvbG9yOiBzdHJpbmc7XG4gIGV4cG9ydCBsZXQgZXZlbnRzOiBFdmVudERlZmluaXRpb25bXTtcblxuICBjb25zdCBkZWZhdWx0VmFsdWVNYXA6IFBhcnRpYWw8TWFuaWZlc3Q+ID0ge1xuICAgIGFsbG93X2Jvb2tpbmc6IGZhbHNlLFxuICAgIGFsbG93X2RhdGVfY2hhbmdlOiB0cnVlLFxuICAgIGF0dGVuZGVlc190b19zaG93OiA1LFxuICAgIGJ1c3lfY29sb3I6IFwiI0VFMzI0OGNjXCIsXG4gICAgY2FsZW5kYXJzOiBbXSxcbiAgICBjbG9zZWRfY29sb3I6IFwiI0VFMzI0OGNjXCIsXG4gICAgZGF0ZV9mb3JtYXQ6IFwiZnVsbFwiLFxuICAgIGRhdGVzX3RvX3Nob3c6IDEsXG4gICAgZW5kX2hvdXI6IDI0LFxuICAgIGV2ZW50X2J1ZmZlcjogMCxcbiAgICBmcmVlX2NvbG9yOiBcIiMwNzgzNTFjY1wiLFxuICAgIG1hbmRhdGVfdG9wX29mX2hvdXI6IGZhbHNlLFxuICAgIG1heF9ib29rX2FoZWFkX2RheXM6IDMwLFxuICAgIG1pbl9ib29rX2FoZWFkX2RheXM6IDAsXG4gICAgb3Blbl9ob3VyczogW10sXG4gICAgb3ZlcmJvb2tlZF90aHJlc2hvbGQ6IDEwMCxcbiAgICBwYXJ0aWFsX2Jvb2thYmxlX3JhdGlvOiAwLjAxLFxuICAgIHBhcnRpYWxfY29sb3I6IFwiI0ZFQ0E3Q2NjXCIsXG4gICAgcmVxdWlyZWRfcGFydGljaXBhbnRzOiBbXSxcbiAgICBzZWxlY3RlZF9jb2xvcjogXCIjMDAyZGI0XCIsXG4gICAgc2hvd19hc193ZWVrOiBmYWxzZSxcbiAgICBzaG93X2hlYWRlcjogdHJ1ZSxcbiAgICBzaG93X2hvc3RzOiBcInNob3dcIixcbiAgICBzaG93X3RpY2tzOiB0cnVlLFxuICAgIHNob3dfd2Vla2VuZHM6IHRydWUsXG4gICAgc2xvdF9zaXplOiAxNSxcbiAgICBzdGFydF9kYXRlOiBuZXcgRGF0ZSgpLFxuICAgIHN0YXJ0X2hvdXI6IDAsXG4gICAgdGltZXpvbmU6IFwiXCIsXG4gICAgdmlld19hczogXCJzY2hlZHVsZVwiLFxuICAgIHVuYXZhaWxhYmxlX2NvbG9yOiBcIiNERERcIixcbiAgICBldmVudHM6IFtdLFxuICB9O1xuXG4gICQ6IGhhc0Vycm9yID0gT2JqZWN0LmtleXMoJEVycm9yU3RvcmUpLmxlbmd0aCA/IHRydWUgOiBmYWxzZTtcbiAgLyoqXG4gICAqIFJlLWxvYWRzIGF2YWlsYWJpbGl0eSBkYXRhIGZyb20gdGhlIE55bGFzIEFQSS5cbiAgICogQHBhcmFtIHtib29sZWFufSBjbGVhclNlbGVjdGlvbiBVc2VkIHRvIGluZGljYXRlIHdoZXRoZXIgYW55IGN1cnJlbnRseSBzZWxlY3RlZCB0aW1lc2xvdHMgc2hvdWxkIGJlIGNsZWFyZWQuIERlZmF1bHRzIHRvIGZhbHNlLlxuICAgKiBAcGFyYW0ge2Jvb2xlYW59IHNsb3RzQm9va2VkIFVzZWQgdG8gaW5kaWNhdGUgd2hldGhlciB0aGUgY29tcG9uZW50IHNob3VsZCBhc3N1bWUgdGhlIHByZXZpb3VzbHkgc2VsZWN0ZWQgc2xvdHMgd2VyZSBib29rZWQuIERlZmF1bHRzIHRvIGZhbHNlLlxuICAgKi9cbiAgZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHJlbG9hZChjbGVhclNlbGVjdGlvbiA9IGZhbHNlLCBzbG90c0Jvb2tlZCA9IGZhbHNlKSB7XG4gICAgYXdhaXQgZ2V0QXZhaWxhYmlsaXR5KHRydWUpO1xuXG4gICAgaWYgKHNsb3RzQm9va2VkKSB7XG4gICAgICBjb25zdCBzZWxlY3RlZFNsb3RzOiBhbnkgPSBbXTtcbiAgICAgIGZvciAoY29uc3QgZGF5IG9mIGRheXMpIHtcbiAgICAgICAgLy8gVE9ETzogdmVyaWZ5IHRoYXQgdGhpcyB3b3JrcyBub3cgdGhhdCBBUEktZmV0Y2hlZCBhdmFpbGFiaWxpdHkgaXMgb2YgdHlwZSBcImZyZWVcIiByYXRoZXIgdGhhbiBcImJ1c3lcIiAoc2VlIHN0YXR1cz1cImJ1c3lcIiBpbiBzZWxlY3RlZCBzbG90cyBiZWxvdylcbiAgICAgICAgc2VsZWN0ZWRTbG90cy5wdXNoKFxuICAgICAgICAgIC4uLmRheT8uc2xvdHNcbiAgICAgICAgICAgIC5maWx0ZXIoXG4gICAgICAgICAgICAgIChzbG90OiBhbnkpID0+IHNsb3Quc2VsZWN0aW9uU3RhdHVzID09PSBTZWxlY3Rpb25TdGF0dXMuU0VMRUNURUQsXG4gICAgICAgICAgICApXG4gICAgICAgICAgICAubWFwKChzbG90OiBhbnkpID0+ICh7XG4gICAgICAgICAgICAgIHN0YXR1czogXCJidXN5XCIsXG4gICAgICAgICAgICAgIHN0YXJ0X3RpbWU6IG5ldyBEYXRlKHNsb3Quc3RhcnRfdGltZSkuZ2V0VGltZSgpIC8gMTAwMCxcbiAgICAgICAgICAgICAgZW5kX3RpbWU6IG5ldyBEYXRlKHNsb3QuZW5kX3RpbWUpLmdldFRpbWUoKSAvIDEwMDAsXG4gICAgICAgICAgICB9KSksXG4gICAgICAgICk7XG4gICAgICB9XG5cbiAgICAgIGZvciAoY29uc3QgY2FsZW5kYXIgb2YgYWxsQ2FsZW5kYXJzKSB7XG4gICAgICAgIGNhbGVuZGFyLnRpbWVzbG90cy5wdXNoKC4uLnNlbGVjdGVkU2xvdHMpO1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChjbGVhclNlbGVjdGlvbiAmJiBBcnJheS5pc0FycmF5KGRheXMpKSB7XG4gICAgICBmb3IgKGNvbnN0IGRheSBvZiBkYXlzKSB7XG4gICAgICAgIGZvciAoY29uc3Qgc2xvdCBvZiBkYXkuc2xvdHMpIHtcbiAgICAgICAgICBzbG90LnNlbGVjdGlvblN0YXR1cyA9IFNlbGVjdGlvblN0YXR1cy5VTlNFTEVDVEVEO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBkYXlzID0gWy4uLmRheXNdO1xuICAgIH1cbiAgfVxuXG4gIC8vI2VuZHJlZ2lvbiBwcm9wc1xuXG4gIHR5cGUgU2xvdFJlZnMgPSBSZWNvcmQ8c3RyaW5nLCBBcnJheTxIVE1MRWxlbWVudCB8IG51bGw+PjtcblxuICAvLyNyZWdpb24gbW91bnQgYW5kIHByb3AgaW5pdGlhbGl6YXRpb25cbiAgbGV0IF90aGlzID0gPE1hbmlmZXN0PmJ1aWxkSW50ZXJuYWxQcm9wcyh7fSwge30sIGRlZmF1bHRWYWx1ZU1hcCk7XG4gIGxldCBtYW5pZmVzdDogUGFydGlhbDxNYW5pZmVzdD4gPSB7fTtcbiAgbGV0IGxvYWRpbmc6IGJvb2xlYW47XG4gIGxldCBkYXlSZWY6IEhUTUxFbGVtZW50W10gPSBbXTtcbiAgbGV0IHNsb3RSZWY6IFNsb3RSZWZzID0ge307IC8vIG1hcHBpbmcgb2YgZGF0ZXMgdG8gc2xvdCBidXR0b24gRE9NIG5vZGVzXG4gIGxldCBkYXlPcmRlcjogc3RyaW5nW10gPSBbXTsgLy8gbWFpbnRhaW5zIG9yZGVyIG9mIGRpc3BsYXllZCBkYXRlc1xuXG4gICQ6IHtcbiAgICBpZiAoXG4gICAgICBfdGhpcy5kYXRlc190b19zaG93IHx8XG4gICAgICBfdGhpcy5zaG93X3RpY2tzIHx8XG4gICAgICBfdGhpcy5zaG93X2FzX3dlZWsgfHxcbiAgICAgIF90aGlzLnNob3dfd2Vla2VuZHNcbiAgICApIHtcbiAgICAgIC8vIENoYW5nZXMgdG8gdGhlc2UgcHJvcHMgd2lsbCByZXNpemUgdGhlIHdpZHRoIG9mIGRheSBjb250YWluZXJcbiAgICAgIGRheVJlZiA9IGRheVJlZi5maWx0ZXIoKGRheSkgPT4gISFkYXkpO1xuICAgIH1cbiAgfVxuXG4gIG9uTW91bnQoYXN5bmMgKCkgPT4ge1xuICAgIGF3YWl0IHRpY2soKTtcbiAgICBsb2FkaW5nID0gdHJ1ZTtcbiAgICBjbGllbnRIZWlnaHQgPSBtYWluPy5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5oZWlnaHQ7XG4gICAgZGF5Q29udGFpbmVyV2lkdGggPSBtYWluPy5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5oZWlnaHQ7XG4gICAgY29uc3Qgc3RvcmVLZXkgPSBKU09OLnN0cmluZ2lmeSh7XG4gICAgICBjb21wb25lbnRfaWQ6IGlkLFxuICAgICAgYWNjZXNzX3Rva2VuLFxuICAgIH0pO1xuICAgIG1hbmlmZXN0ID0gKGF3YWl0ICRNYW5pZmVzdFN0b3JlW3N0b3JlS2V5XSkgfHwge307XG5cbiAgICBfdGhpcyA9IGJ1aWxkSW50ZXJuYWxQcm9wcygkJHByb3BzLCBtYW5pZmVzdCwgZGVmYXVsdFZhbHVlTWFwKSBhcyBNYW5pZmVzdDtcbiAgICB0cmFuc2Zvcm1Qcm9wZXJ0eVZhbHVlcygpO1xuXG4gICAgbG9hZGluZyA9IGZhbHNlO1xuICB9KTtcblxuICBsZXQgcHJldmlvdXNQcm9wcyA9ICQkcHJvcHM7XG4gICQ6IHtcbiAgICAvLyBUT0RPIC0gVXNlIGEgbGlicmFyeSB0byBjYWxjdWxhdGUgdGhlIGRpZmYgYmV0d2VlbiBwcm9wcyBzbyB0aGF0XG4gICAgLy8gb25seSB1cGRhdGVkIHByb3BzIGFyZSByZWFzc2lnbmVkIGluc3RlYWQgb2YgcmVidWlsZGluZyB0aGUgd2hvbGUgb2JqZWN0LlxuICAgIGlmIChcbiAgICAgICgkJHByb3BzLmV2ZW50X3RvX2hvdmVyID09PSB1bmRlZmluZWQgfHxcbiAgICAgICAgcHJldmlvdXNQcm9wcy5ldmVudF90b19ob3ZlciA9PT0gJCRwcm9wcy5ldmVudF90b19ob3ZlcikgJiZcbiAgICAgIEpTT04uc3RyaW5naWZ5KHByZXZpb3VzUHJvcHMpICE9PSBKU09OLnN0cmluZ2lmeSgkJHByb3BzKVxuICAgICkge1xuICAgICAgX3RoaXMgPSBidWlsZEludGVybmFsUHJvcHMoXG4gICAgICAgICQkcHJvcHMsXG4gICAgICAgIG1hbmlmZXN0LFxuICAgICAgICBkZWZhdWx0VmFsdWVNYXAsXG4gICAgICApIGFzIE1hbmlmZXN0O1xuICAgICAgcHJldmlvdXNQcm9wcyA9ICQkcHJvcHM7XG4gICAgICB0cmFuc2Zvcm1Qcm9wZXJ0eVZhbHVlcygpO1xuICAgIH1cbiAgfVxuXG4gIC8vIFByb3BlcnRpZXMgcmVxdWlyaW5nIGZ1cnRoZXIgbWFuaXB1bGF0aW9uOlxuICBmdW5jdGlvbiB0cmFuc2Zvcm1Qcm9wZXJ0eVZhbHVlcygpIHtcbiAgICBpZiAoIV90aGlzLnN0YXJ0X2RhdGUpIHtcbiAgICAgIF90aGlzLnN0YXJ0X2RhdGUgPSBkZWZhdWx0VmFsdWVNYXAuc3RhcnRfZGF0ZTtcbiAgICB9XG5cbiAgICBpZiAoX3RoaXMudGltZXpvbmUpIHtcbiAgICAgIGlmICghaXNWYWxpZFRpbWV6b25lKF90aGlzLnRpbWV6b25lKSkge1xuICAgICAgICBjb25zb2xlLndhcm4oYEludmFsaWQgSUFOQSB0aW1lIHpvbmU6ICR7X3RoaXMudGltZXpvbmV9YCk7XG4gICAgICAgIF90aGlzLnRpbWV6b25lID0gdW5kZWZpbmVkO1xuICAgICAgfSBlbHNlIGlmIChcbiAgICAgICAgX3RoaXMudGltZXpvbmUgPT09IEludGwuRGF0ZVRpbWVGb3JtYXQoKS5yZXNvbHZlZE9wdGlvbnMoKS50aW1lWm9uZVxuICAgICAgKSB7XG4gICAgICAgIF90aGlzLnRpbWV6b25lID0gdW5kZWZpbmVkO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gICQ6IChhc3luYyAoKSA9PiB7XG4gICAgaWYgKF90aGlzLmJvb2tpbmdfb3B0aW9ucykge1xuICAgICAgY29uc2VjdXRpdmVPcHRpb25zID0gX3RoaXMuYm9va2luZ19vcHRpb25zO1xuICAgIH0gZWxzZSBpZiAoXG4gICAgICAhbG9hZGluZyAmJlxuICAgICAgaWQgJiZcbiAgICAgIEFycmF5LmlzQXJyYXkoX3RoaXMuZXZlbnRzKSAmJlxuICAgICAgZGF5UmFuZ2UubGVuZ3RoID4gMFxuICAgICkge1xuICAgICAgYXdhaXQgYnVpbGRDb25zZWN1dGl2ZU9wdGlvbnMoKTtcbiAgICB9XG4gICAgYnVpbGREYWlseUNvbnNlY3V0aXZlT3B0aW9ucygpO1xuICB9KSgpO1xuXG4gIC8vI2VuZHJlZ2lvbiBtb3VudCBhbmQgcHJvcCBpbml0aWFsaXphdGlvblxuXG4gIGNvbnN0IGRpc3BhdGNoRXZlbnQgPSBnZXRFdmVudERpc3BhdGNoZXIoZ2V0X2N1cnJlbnRfY29tcG9uZW50KCkpO1xuXG4gICQ6IGlmIChPYmplY3Qua2V5cygkRXJyb3JTdG9yZSkubGVuZ3RoKSB7XG4gICAgZGlzcGF0Y2hFdmVudChcIm9uRXJyb3JcIiwgJEVycm9yU3RvcmUpO1xuICB9XG5cbiAgLy8jcmVnaW9uIGxheW91dFxuXG4gIGxldCBtYWluOiBIVE1MRWxlbWVudDtcbiAgbGV0IHRpY2tDb250YWluZXI6IEhUTUxFbGVtZW50O1xuICBsZXQgZGF5Q29udGFpbmVyOiBIVE1MRWxlbWVudDtcbiAgbGV0IGRheUNvbnRhaW5lcldpZHRoOiBudW1iZXIgPSAwO1xuICBsZXQgY2xpZW50SGVpZ2h0OiBudW1iZXI7XG5cbiAgY29uc3QgTUlOSU1VTV9EQVlfV0lEVEggPSAxMDA7XG5cbiAgLy8gSW50ZXJuYWxseS1zZXR0YWJsZSByZWFjdGl2ZS10by1leHRlcm5hbC1wcm9wcyB2YXJpYWJsZVxuICBsZXQgZGF0ZXNUb1Nob3c6IG51bWJlcjtcblxuICAkOiBvcHRpbWFsRGF0ZXNUb1Nob3cgPVxuICAgIE1hdGguZmxvb3IoZGF5Q29udGFpbmVyV2lkdGggLyBNSU5JTVVNX0RBWV9XSURUSCkgfHwgMTtcbiAgJDogZGF0ZXNUb1Nob3cgPVxuICAgIG9wdGltYWxEYXRlc1RvU2hvdyA8IF90aGlzLmRhdGVzX3RvX3Nob3cgfHwgX3RoaXMuc2hvd19hc193ZWVrXG4gICAgICA/IG9wdGltYWxEYXRlc1RvU2hvd1xuICAgICAgOiBfdGhpcy5kYXRlc190b19zaG93O1xuXG4gICQ6IHRvb1NtYWxsRm9yV2VlayA9IF90aGlzLnNob3dfYXNfd2VlayAmJiBvcHRpbWFsRGF0ZXNUb1Nob3cgPCA3O1xuXG4gIC8vI2VuZHJlZ2lvbiBsYXlvdXRcblxuICAvLyNyZWdpb24gZGF0YSBnZW5lcmF0aW9uXG5cbiAgLy8gWW91IGNhbiBoYXZlIGFzIGZldyBhcyAxLCBhbmQgYXMgbWFueSBhcyA3LCBkYXlzIHNob3duXG4gIC8vIHN0YXJ0X2RhdGUgYW5kIGRhdGVzVG9TaG93IGdldCBvdmVycnVsZWQgYnkgc2hvd19hc193ZWVrIChhbHdheXMgc2hvd3MgNSBvciA3IGRhdGVzIHRoYXQgaW5jbHVkZSB5b3VyIHN0YXJ0X2RhdGUgaW5zdGVhZClcbiAgbGV0IHN0YXJ0RGF5OiBEYXRlOyAvLyB0aGUgZmlyc3QgZGF5IGNvbHVtbiBzaG93bjsgZGVwZW5kcyBvbiBzaG93X2FzX3dlZWtcbiAgbGV0IGVuZERheTogRGF0ZTtcblxuICAkOiBkYXlSYW5nZSA9ICgoKSA9PiB7XG4gICAgcmV0dXJuIChcbiAgICAgIChfdGhpcy5zaG93X3dlZWtlbmRzIHx8ICFfdGhpcy5zaG93X3dlZWtlbmRzKSAmJlxuICAgICAgZ2VuZXJhdGVEYXlSYW5nZShcbiAgICAgICAgc3RhcnREYXksIC8vIFRPRE86IHdlaXJkIGp1c3QgdG8gZ2V0IHNob3dfd2Vla2VuZHMgcGFzc2VkIGluXG4gICAgICAgIF90aGlzLnNob3dfYXNfd2Vla1xuICAgICAgICAgID8gdGltZURheS5vZmZzZXQoc3RhcnREYXksIHRvb1NtYWxsRm9yV2VlayA/IGRhdGVzVG9TaG93IC0gMSA6IDYpXG4gICAgICAgICAgOiB0aW1lRGF5Lm9mZnNldChzdGFydERheSwgZGF0ZXNUb1Nob3cgLSAxKSxcbiAgICAgIClcbiAgICApO1xuICB9KSgpO1xuXG4gICQ6IHN0YXJ0RGF5ID1cbiAgICBfdGhpcy5zaG93X2FzX3dlZWsgJiYgIXRvb1NtYWxsRm9yV2Vla1xuICAgICAgPyB0aW1lV2Vlay5mbG9vcihfdGhpcy5zdGFydF9kYXRlKVxuICAgICAgOiB0aW1lRGF5LmZsb29yKF90aGlzLnN0YXJ0X2RhdGUpO1xuXG4gICQ6IGVuZERheSA9IGRheVJhbmdlW2RheVJhbmdlLmxlbmd0aCAtIDFdO1xuXG4gIGxldCBtYXhCb29rQWhlYWRPZmZzZXQ6IHN0cmluZztcbiAgbGV0IG1pbkJvb2tBaGVhZE9mZnNldDogc3RyaW5nO1xuXG4gICQ6IG1heEJvb2tBaGVhZE9mZnNldCA9IHRpbWVEYXlcbiAgICAub2Zmc2V0KG5ldyBEYXRlKCksIF90aGlzLm1heF9ib29rX2FoZWFkX2RheXMpXG4gICAgLnRvTG9jYWxlRGF0ZVN0cmluZygpO1xuXG4gICQ6IG1pbkJvb2tBaGVhZE9mZnNldCA9IHRpbWVEYXlcbiAgICAub2Zmc2V0KG5ldyBEYXRlKCksIF90aGlzLm1pbl9ib29rX2FoZWFkX2RheXMpXG4gICAgLnRvTG9jYWxlRGF0ZVN0cmluZygpO1xuXG4gIGxldCB0aWNrczogRGF0ZVtdID0gW107XG5cbiAgY29uc3QgbWluaW11bVRpY2tIZWlnaHQgPSAzMDsgLy8gbWluaW11bSBwaXhlbHMgYmV0d2VlbiB0aWNrcywgdmVydGljYWxseVxuICBjb25zdCBzbG90U2l6ZXMgPSBbMTUsIDMwLCA2MCwgMTgwLCAzNjBdOyAvLyB3ZSBvbmx5IHdhbnQgdG8gc2hvdyB0aWNrcyBpbiBpbnRlcnZhbHMgb2YgMTUgbWlucywgMzAgbWlucywgNjAgbWlucywgMyBob3Vycywgb3IgNiBob3Vycy5cblxuICAkOiB0aWNrcyA9IGdlbmVyYXRlVGlja3MoXG4gICAgY2xpZW50SGVpZ2h0LFxuICAgIChkYXlzWzBdID8/IHt9KS5zbG90cz8ubWFwKChzbG90OiBUaW1lU2xvdCkgPT4gc2xvdC5zdGFydF90aW1lKSxcbiAgKTtcblxuICAvLyBXZSBkb24ndCB3YW50IHRvIHNob3cgYWxsIDk2IDE1LW1pbnV0ZSBpbnRlcnZhbHMgdW5sZXNzIHRoZSB1c2VyIGhhcyBhIHJlYWwgdGFsbCBzY3JlZW4uXG4gIC8vIFNvIGxldCdzIGJlIHNtYXJ0IGFib3V0IGl0IGFuZCBmaWx0ZXIgb24gbW9kaWZpY2F0aW9uIG9mIHN0YXJ0X3RpbWUsIGVuZF90aW1lLCBzbG90X3NpemUsIG9yIGNsaWVudEhlaWdodFxuICAvLyBnZW5lcmF0ZVRpY2tzKCkgaXMgYSByZWN1cnNpdmUgZnVuYyB0aGF0IHJldHJpZXMgaWYgYSBtaW5pbXVtVGlja0hlaWdodCB0aHJlc2hvbGQgaXMgbm90IG1ldFxuICAvLyBDYWxjdWxhdGlvbiBnb2FsIG9mIDwgNW1zIC0tIGNvbnNvbGUudGltZXJzIGtlcHQgaW4gcGxhY2UgZm9yIGZ1dHVyZSBkZXZlbG9wbWVudCB0ZXN0aW5nLlxuICBjb25zdCBnZW5lcmF0ZVRpY2tzID0gKFxuICAgIGhlaWdodDogbnVtYmVyLFxuICAgIHRpY2tzOiBEYXRlW10sXG4gICAgaW50ZXJ2YWxDb3VudGVyOiBudW1iZXIgPSAwLFxuICApOiBEYXRlW10gPT4ge1xuICAgIGlmIChoZWlnaHQgPT09IHVuZGVmaW5lZCB8fCB0aWNrcyA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICByZXR1cm4gW107XG4gICAgfVxuXG4gICAgY29uc3QgdGlja0l0ZXJzID0gc2xvdFNpemVzW2ludGVydmFsQ291bnRlcl07XG5cbiAgICAvLyB0ZXJuYXJ5IGhlcmUgYmVjYXVzZSB0aW1lTWludXRlLmV2ZXJ5KDEyMCkgZG9lc250IHdvcmssIGJ1dCB0aW1lSG91ci5ldmVyeSgyKSBkb2VzLlxuICAgIGxldCB0aW1lSW50ZXJ2YWwgPVxuICAgICAgdGlja0l0ZXJzID4gNjBcbiAgICAgICAgPyB0aW1lSG91ci5ldmVyeSh0aWNrSXRlcnMgLyA2MClcbiAgICAgICAgOiB0aW1lTWludXRlLmV2ZXJ5KHRpY2tJdGVycyk7XG5cbiAgICB0aWNrcyA9IHNjYWxlVGltZSgpXG4gICAgICAuZG9tYWluKHRpY2tzKVxuICAgICAgLnRpY2tzKHRpbWVJbnRlcnZhbCBhcyBUaW1lSW50ZXJ2YWwpO1xuXG4gICAgY29uc3QgYXZlcmFnZVRpY2tIZWlnaHQgPSBoZWlnaHQgLyB0aWNrcy5sZW5ndGg7XG5cbiAgICBpZiAoXG4gICAgICB0aWNrSXRlcnMgPCBfdGhpcy5zbG90X3NpemUgfHwgLy8gZG9udCBzaG93IDE1LW1pbiB0aWNrcyBpZiBzbG90IHNpemUgaXMgaG91cmx5XG4gICAgICAoYXZlcmFnZVRpY2tIZWlnaHQgPCBtaW5pbXVtVGlja0hlaWdodCAmJiAvLyBtYWtlIHN1cmUgdGlja3MncmUgYXQgbGVhc3QgeWVhLXBpeGVscyB0YWxsXG4gICAgICAgIGludGVydmFsQ291bnRlciA8IHNsb3RTaXplcy5sZW5ndGgpIC8vIGRvbid0IHRyeSB0byBrZWVwIGdvaW5nIGlmIHlvdXZlIHJlYWNoZWQgZXZlcnkgNiBob3Vycy4gU3ViZGl2aWRpbmcgYSBkYXkgaW50byBmZXdlciB0aGFuIDQgcGFydHMgZG9lc24ndCB5aWVsZCBhIG5pY2UgcmVzdWx0LlxuICAgICkge1xuICAgICAgcmV0dXJuIGdlbmVyYXRlVGlja3MoaGVpZ2h0LCB0aWNrcywgaW50ZXJ2YWxDb3VudGVyICsgMSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiB0aWNrcztcbiAgICB9XG4gIH07XG5cbiAgLy8gQ29uc2VjdXRpdmUgc2FtZS1hdmFpbGFiaWxpdHkgcGVyaW9kcyBvZiB0aW1lLCBmcm9tIGVhcmxpZXN0IHN0YXJ0X3RpbWUgdG8gbGF0ZXN0IGVuZF90aW1lLlxuICBmdW5jdGlvbiBnZW5lcmF0ZUVwb2NocyhcbiAgICBzbG90czogU2VsZWN0YWJsZVNsb3RbXSxcbiAgICBwYXJ0aWFsQm9va2FibGVSYXRpbzogbnVtYmVyLFxuICApIHtcbiAgICBjb25zdCBlcG9jaFNjYWxlID0gc2NhbGVUaW1lKCkuZG9tYWluKFtcbiAgICAgIHNsb3RzWzBdLnN0YXJ0X3RpbWUsXG4gICAgICBzbG90c1tzbG90cy5sZW5ndGggLSAxXS5lbmRfdGltZSxcbiAgICBdKTtcbiAgICByZXR1cm4gc2xvdHNcbiAgICAgIC5yZWR1Y2UoKGVwb2NoTGlzdCwgc2xvdCkgPT4ge1xuICAgICAgICBjb25zdCBwcmV2RXBvY2ggPSBlcG9jaExpc3RbZXBvY2hMaXN0Lmxlbmd0aCAtIDFdO1xuICAgICAgICAvLyBFZGdlIGNhc2Ugbm90ZTogYXZhaWxhYmxlX2NhbGVuZGFycyBpcyBkb2luZyBhIHN0cmluZ2lmaWVkIGFycmF5IGNvbXBhcmUsXG4gICAgICAgIC8vIHdoaWNoIG1lYW5zIGlmIHRoZXkncmUgZGlmZmVyZW50bHkgb3JkZXJlZCBidXQgb3RoZXJ3aXNlIHRlaCBzYW1lLCB0aGlzIHdpbGwgZmFpbC5cbiAgICAgICAgaWYgKFxuICAgICAgICAgIHByZXZFcG9jaCAmJlxuICAgICAgICAgIEpTT04uc3RyaW5naWZ5KHByZXZFcG9jaFswXS5hdmFpbGFibGVfY2FsZW5kYXJzKSA9PT1cbiAgICAgICAgICAgIEpTT04uc3RyaW5naWZ5KHNsb3QuYXZhaWxhYmxlX2NhbGVuZGFycykgJiZcbiAgICAgICAgICBwcmV2RXBvY2hbMF0uYXZhaWxhYmlsaXR5ID09PSBzbG90LmF2YWlsYWJpbGl0eVxuICAgICAgICApIHtcbiAgICAgICAgICBwcmV2RXBvY2gucHVzaChzbG90KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBlcG9jaExpc3QucHVzaChbc2xvdF0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBlcG9jaExpc3Q7XG4gICAgICB9LCBbXSBhcyBTZWxlY3RhYmxlU2xvdFtdW10pXG4gICAgICAubWFwKChlcG9jaCkgPT4ge1xuICAgICAgICBsZXQgc3RhdHVzID0gQXZhaWxhYmlsaXR5U3RhdHVzLkZSRUU7XG5cbiAgICAgICAgY29uc3QgbnVtRnJlZUNhbGVuZGFycyA9IGVwb2NoWzBdLmF2YWlsYWJsZV9jYWxlbmRhcnMubGVuZ3RoO1xuICAgICAgICBjb25zdCBmZXdlckNhbGVuZGFyc1RoYW5SYXRpbyA9XG4gICAgICAgICAgbnVtRnJlZUNhbGVuZGFycyAhPT0gYWxsQ2FsZW5kYXJzLmxlbmd0aCAmJlxuICAgICAgICAgIG51bUZyZWVDYWxlbmRhcnMgPCBhbGxDYWxlbmRhcnMubGVuZ3RoICogcGFydGlhbEJvb2thYmxlUmF0aW87XG5cbiAgICAgICAgaWYgKFxuICAgICAgICAgIG51bUZyZWVDYWxlbmRhcnMgPT09IDAgfHxcbiAgICAgICAgICBmZXdlckNhbGVuZGFyc1RoYW5SYXRpbyB8fFxuICAgICAgICAgIChfdGhpcy5yZXF1aXJlZF9wYXJ0aWNpcGFudHMubGVuZ3RoICYmXG4gICAgICAgICAgICAvL0NoZWNrIGlmIGV2ZXJ5IHBhcnRpY2lwYW50cyBpcyBpbmNsdWRlZCBpbiB0aGUgYXZhaWxhYmxlIGNhbGVuZGFyXG4gICAgICAgICAgICAhYXJyYXlDb250YWluc0FycmF5KFxuICAgICAgICAgICAgICByZXF1aXJlZFBhcnRpY2lwYW50cyxcbiAgICAgICAgICAgICAgZXBvY2hbMF0uYXZhaWxhYmxlX2NhbGVuZGFycyxcbiAgICAgICAgICAgICkpXG4gICAgICAgICkge1xuICAgICAgICAgIGlmIChlcG9jaFswXS5hdmFpbGFiaWxpdHkgPT09IEF2YWlsYWJpbGl0eVN0YXR1cy5DTE9TRUQpIHtcbiAgICAgICAgICAgIHN0YXR1cyA9IEF2YWlsYWJpbGl0eVN0YXR1cy5DTE9TRUQ7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHN0YXR1cyA9IEF2YWlsYWJpbGl0eVN0YXR1cy5CVVNZO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIGlmIChcbiAgICAgICAgICBudW1GcmVlQ2FsZW5kYXJzID4gMCAmJlxuICAgICAgICAgIG51bUZyZWVDYWxlbmRhcnMgPCBhbGxDYWxlbmRhcnMubGVuZ3RoXG4gICAgICAgICkge1xuICAgICAgICAgIHN0YXR1cyA9IEF2YWlsYWJpbGl0eVN0YXR1cy5QQVJUSUFMO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBzdGFydF90aW1lOiBlcG9jaFswXS5zdGFydF90aW1lLFxuICAgICAgICAgIG9mZnNldDogZXBvY2hTY2FsZShlcG9jaFswXS5zdGFydF90aW1lKSAqIDEwMCxcbiAgICAgICAgICBzdGF0dXMsXG4gICAgICAgICAgaGVpZ2h0OlxuICAgICAgICAgICAgKGVwb2NoU2NhbGUoZXBvY2hbZXBvY2gubGVuZ3RoIC0gMV0uZW5kX3RpbWUpIC1cbiAgICAgICAgICAgICAgZXBvY2hTY2FsZShlcG9jaFswXS5zdGFydF90aW1lKSkgKlxuICAgICAgICAgICAgMTAwLFxuICAgICAgICAgIGVuZF90aW1lOiBlcG9jaFtlcG9jaC5sZW5ndGggLSAxXS5lbmRfdGltZSxcbiAgICAgICAgICBzbG90czogZXBvY2gubGVuZ3RoLFxuICAgICAgICAgIGF2YWlsYWJsZV9jYWxlbmRhcnM6IGVwb2NoWzBdLmF2YWlsYWJsZV9jYWxlbmRhcnMsXG4gICAgICAgIH07XG4gICAgICB9KTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGdlbmVyYXRlRGF5UmFuZ2UoXG4gICAgc3RhcnREYXk6IERhdGUsXG4gICAgZW5kRGF5OiBEYXRlLFxuICAgIHJldmVyc2U/OiBib29sZWFuLFxuICApOiBEYXRlW10ge1xuICAgIGxldCByYW5nZSA9IHNjYWxlVGltZSgpXG4gICAgICAuZG9tYWluKFtzdGFydERheSwgZW5kRGF5XSlcbiAgICAgIC50aWNrcyh0aW1lRGF5KVxuICAgICAgLmZpbHRlcigodGltZXN0YW1wOiBEYXRlKSA9PiB7XG4gICAgICAgIGlmIChfdGhpcy5zaG93X3dlZWtlbmRzKSB7XG4gICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmV0dXJuIHRpbWVzdGFtcC5nZXREYXkoKSAhPT0gNiAmJiB0aW1lc3RhbXAuZ2V0RGF5KCkgIT09IDA7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIGlmICghX3RoaXMuc2hvd19hc193ZWVrICYmICFfdGhpcy5zaG93X3dlZWtlbmRzKSB7XG4gICAgICBpZiAocmFuZ2UubGVuZ3RoIDwgZGF0ZXNUb1Nob3cpIHtcbiAgICAgICAgaWYgKHJldmVyc2UpIHtcbiAgICAgICAgICByZXR1cm4gZ2VuZXJhdGVEYXlSYW5nZSh0aW1lRGF5Lm9mZnNldChzdGFydERheSwgLTEpLCBlbmREYXksIHRydWUpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBnZW5lcmF0ZURheVJhbmdlKHN0YXJ0RGF5LCB0aW1lRGF5Lm9mZnNldChlbmREYXksIDEpKTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHJhbmdlO1xuICB9XG5cbiAgZnVuY3Rpb24gY2hlY2tPdmVyYm9va2VkKHNsb3RzOiBTZWxlY3RhYmxlU2xvdFtdKSB7XG4gICAgYWxsQ2FsZW5kYXJzLmZvckVhY2goKGNhbGVuZGFyKSA9PiB7XG4gICAgICBjb25zdCBhdmFpbGFibGVTbG90c0ZvckNhbGVuZGFyID0gc2xvdHMuZmlsdGVyKChzbG90KSA9PlxuICAgICAgICBzbG90LmF2YWlsYWJsZV9jYWxlbmRhcnMuaW5jbHVkZXMoY2FsZW5kYXIuZW1haWxBZGRyZXNzKSxcbiAgICAgICk7XG4gICAgICBpZiAoXG4gICAgICAgIHNsb3RzLmxlbmd0aCAtIGF2YWlsYWJsZVNsb3RzRm9yQ2FsZW5kYXIubGVuZ3RoID5cbiAgICAgICAgKF90aGlzLm92ZXJib29rZWRfdGhyZXNob2xkICogc2xvdHMubGVuZ3RoKSAvIDEwMFxuICAgICAgKSB7XG4gICAgICAgIGF2YWlsYWJsZVNsb3RzRm9yQ2FsZW5kYXIuZm9yRWFjaCgoc2xvdCkgPT4ge1xuICAgICAgICAgIHNsb3QuYXZhaWxhYmxlX2NhbGVuZGFycyA9IHNsb3QuYXZhaWxhYmxlX2NhbGVuZGFycy5maWx0ZXIoXG4gICAgICAgICAgICAoY2FsKSA9PiBjYWwgIT09IGNhbGVuZGFyLmVtYWlsQWRkcmVzcyxcbiAgICAgICAgICApO1xuICAgICAgICAgIGlmICghc2xvdC5hdmFpbGFibGVfY2FsZW5kYXJzLmxlbmd0aCkge1xuICAgICAgICAgICAgLy8gaWYgaXQgaGFzIG5vIGNhbGVuZGFycyBhdmFpbGFibGUsIGl0J3MgYnVzeVxuICAgICAgICAgICAgc2xvdC5hdmFpbGFiaWxpdHkgPSBBdmFpbGFiaWxpdHlTdGF0dXMuQlVTWTtcbiAgICAgICAgICB9IGVsc2UgaWYgKFxuICAgICAgICAgICAgc2xvdC5hdmFpbGFiaWxpdHkgPT09IEF2YWlsYWJpbGl0eVN0YXR1cy5GUkVFICYmXG4gICAgICAgICAgICBzbG90LmF2YWlsYWJsZV9jYWxlbmRhcnMubGVuZ3RoICE9PSBhbGxDYWxlbmRhcnMubGVuZ3RoXG4gICAgICAgICAgKSB7XG4gICAgICAgICAgICAvLyBpZiBpdCB3YXMgcHJldmlvdXNseSBmcmVlLCBidXQgbm93IGxhY2tzIGEgY2FsZW5kYXIsIGl0IHNob3VsZCBiZSBjb25zaWRlcmVkIFBhcnRpYWwuXG4gICAgICAgICAgICBzbG90LmF2YWlsYWJpbGl0eSA9IEF2YWlsYWJpbGl0eVN0YXR1cy5QQVJUSUFMO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICByZXR1cm4gc2xvdHM7XG4gIH1cblxuICBsZXQgZGF5czogRGF5W107XG4gICQ6IGRheXMgPSBkYXlSYW5nZS5tYXAoKHRpbWVzdGFtcDogRGF0ZSkgPT4ge1xuICAgIGNvbnN0IHNsb3RzID0gY2hlY2tPdmVyYm9va2VkKFxuICAgICAgZ2VuZXJhdGVEYXlTbG90cyhcbiAgICAgICAgdGltZXN0YW1wLFxuICAgICAgICBhbGxDYWxlbmRhcnMsXG4gICAgICAgIHJlcXVpcmVkUGFydGljaXBhbnRzLFxuICAgICAgICBjb25zZWN1dGl2ZU9wdGlvbnMsXG4gICAgICAgIGNvbnNlY3V0aXZlUGFydGljaXBhbnRzLFxuICAgICAgICBfdGhpcyxcbiAgICAgICksXG4gICAgKTsgLy8gVE9ETzogaW5jbHVkZSBvdGhlciBwb3RlbnRpYWwgcG9zdC1hbGwtc2xvdHMtZXN0YWJsaXNoZWQgY2hlY2tzLCBsaWtlIG92ZXJib29rZWQsIGluIGEgc2luZ2xlIHNlY29uZGFyeSBydW4gaGVyZS5cblxuICAgIHJldHVybiB7XG4gICAgICBlcG9jaHM6IGdlbmVyYXRlRXBvY2hzKHNsb3RzLCBfdGhpcy5wYXJ0aWFsX2Jvb2thYmxlX3JhdGlvKSxcbiAgICAgIHNsb3RzLFxuICAgICAgdGltZXN0YW1wLFxuICAgIH07XG4gIH0pO1xuICAvLyNlbmRyZWdpb24gZGF0YSBnZW5lcmF0aW9uXG5cbiAgLy8gI3JlZ2lvbiB0aW1lU2xvdCBzZWxlY3Rpb25cbiAgbGV0IHNsb3RTZWxlY3Rpb246IFNlbGVjdGFibGVTbG90W10gPSBbXTtcbiAgbGV0IHNvcnRlZFNsb3RzOiBTZWxlY3RhYmxlU2xvdFtdID0gW107XG4gICQ6IHNsb3RTZWxlY3Rpb24gPSAoZGF5cyA/PyBbXSlcbiAgICAubWFwKChkYXkpID0+XG4gICAgICBkYXkuc2xvdHMuZmlsdGVyKFxuICAgICAgICAoc2xvdCkgPT4gc2xvdC5zZWxlY3Rpb25TdGF0dXMgPT09IFNlbGVjdGlvblN0YXR1cy5TRUxFQ1RFRCxcbiAgICAgICksXG4gICAgKVxuICAgIC5mbGF0KCk7XG5cbiAgJDogc29ydGVkU2xvdHMgPSBzbG90U2VsZWN0aW9uXG4gICAgLnNvcnQoKGEsIGIpID0+IGEuc3RhcnRfdGltZS5nZXRUaW1lKCkgLSBiLnN0YXJ0X3RpbWUuZ2V0VGltZSgpKVxuICAgIC5yZWR1Y2UoKHNsb3RMaXN0LCBzbG90KSA9PiB7XG4gICAgICBjb25zdCBwcmV2U2xvdCA9IHNsb3RMaXN0W3Nsb3RMaXN0Lmxlbmd0aCAtIDFdO1xuICAgICAgaWYgKFxuICAgICAgICBwcmV2U2xvdCAmJlxuICAgICAgICBzbG90LnN0YXJ0X3RpbWUuZ2V0VGltZSgpID09PSBwcmV2U2xvdC5lbmRfdGltZS5nZXRUaW1lKClcbiAgICAgICkge1xuICAgICAgICBwcmV2U2xvdC5lbmRfdGltZSA9IHNsb3QuZW5kX3RpbWU7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBzbG90TGlzdC5wdXNoKHsgLi4uc2xvdCB9KTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBzbG90TGlzdDtcbiAgICB9LCBbXSBhcyBTZWxlY3RhYmxlU2xvdFtdKTtcblxuICBsZXQgbGFzdERpc3BhdGNoZWRTbG90czogU2VsZWN0YWJsZVNsb3RbXTtcbiAgJDoge1xuICAgIC8vIE9ubHkgZGlzcGF0Y2ggaWYgdGhlcmUncyBhIGRpZmZcbiAgICBpZiAoSlNPTi5zdHJpbmdpZnkoc29ydGVkU2xvdHMpICE9PSBKU09OLnN0cmluZ2lmeShsYXN0RGlzcGF0Y2hlZFNsb3RzKSkge1xuICAgICAgbGV0IGRpc3BhdGNoYWJsZVNsb3RzID0gc29ydGVkU2xvdHM7XG4gICAgICBpZiAoc29ydGVkU2xvdHMubGVuZ3RoID09PSAxKSB7XG4gICAgICAgIGlmIChzZWxlY3RlZENvbnNlY3V0aXZlRXZlbnRCbG9jay5sZW5ndGgpIHtcbiAgICAgICAgICBkaXNwYXRjaGFibGVTbG90cyA9IHNlbGVjdGVkQ29uc2VjdXRpdmVFdmVudEJsb2NrLm1hcCgoZXZlbnQpID0+IHtcbiAgICAgICAgICAgIGV2ZW50LmF2YWlsYWJsZV9jYWxlbmRhcnMgPSBldmVudC5lbWFpbHM7IC8vIHNsb3QuYXZhaWxhYmxlX2NhbGVuZGFycyBpcyBhIGxpdHRsZSBjb252b2x1dGVkIHdpdGggZnJlZUNhbGVuZGFycyBhYm92ZS4gVE9ETzogcmVmYWN0b3IgZnJlZUNhbGVuZGFycyBpbiBnZW5lcmF0ZURheVNsb3RzKClcbiAgICAgICAgICAgIHJldHVybiB7IC4uLnNvcnRlZFNsb3RzWzBdLCAuLi5ldmVudCB9O1xuICAgICAgICAgIH0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGRpc3BhdGNoYWJsZVNsb3RzID0gZGlzcGF0Y2hhYmxlU2xvdHMubWFwKChzbG90KSA9PiB7XG4gICAgICAgICAgICByZXR1cm4geyAuLi5fdGhpcy5ldmVudHNbMF0sIC4uLnNsb3QgfTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgZGlzcGF0Y2hFdmVudChcInRpbWVTbG90Q2hvc2VuXCIsIHtcbiAgICAgICAgdGltZVNsb3RzOiBkaXNwYXRjaGFibGVTbG90cy5tYXAoKHNsb3QpID0+IE9iamVjdC5hc3NpZ24oe30sIHNsb3QpKSxcbiAgICAgIH0pO1xuICAgICAgbGFzdERpc3BhdGNoZWRTbG90cyA9IHNvcnRlZFNsb3RzO1xuICAgIH1cbiAgfVxuICAvLyAjZW5kcmVnaW9uIHRpbWVTbG90IHNlbGVjdGlvblxuXG4gIGxldCBjb25zZWN1dGl2ZVBhcnRpY2lwYW50czogc3RyaW5nW10gPSBbXTtcbiAgbGV0IHNpbmdsZUV2ZW50UGFydGljaXBhbnRzOiBzdHJpbmdbXSA9IFtdO1xuXG4gICQ6IGlmIChfdGhpcy5ldmVudHM/Lmxlbmd0aCAmJiBfdGhpcy5ldmVudHM/Lmxlbmd0aCA+IDEpIHtcbiAgICBjb25zZWN1dGl2ZVBhcnRpY2lwYW50cyA9IF90aGlzLmV2ZW50cz8uZmxhdE1hcCgoZSkgPT4gZS5wYXJ0aWNpcGFudEVtYWlscyk7XG4gICAgc2luZ2xlRXZlbnRQYXJ0aWNpcGFudHMgPSBbXTtcbiAgICBuZXdDYWxlbmRhclRpbWVzbG90c0ZvckdpdmVuRW1haWxzID0gW107XG4gIH0gZWxzZSBpZiAoX3RoaXMuZXZlbnRzPy5sZW5ndGggPT09IDEpIHtcbiAgICBzaW5nbGVFdmVudFBhcnRpY2lwYW50cyA9IF90aGlzLmV2ZW50cz8uZmxhdE1hcCgoZSkgPT4gZS5wYXJ0aWNpcGFudEVtYWlscyk7XG4gICAgY29uc2VjdXRpdmVQYXJ0aWNpcGFudHMgPSBbXTtcbiAgICBkaXNwYXRjaEV2ZW50KFwiZXZlbnRPcHRpb25zUmVhZHlcIiwge1xuICAgICAgc2xvdHM6IFtdLFxuICAgIH0pO1xuICB9XG5cbiAgZnVuY3Rpb24gZ2V0QXZhaWxhYmlsaXR5UXVlcnkoXG4gICAgZW1haWxBZGRyZXNzZXMgPSBzaW5nbGVFdmVudFBhcnRpY2lwYW50cyxcbiAgICBhY2Nlc3NUb2tlbiA9IGFjY2Vzc190b2tlbixcbiAgKTogQXZhaWxhYmlsaXR5UXVlcnkge1xuICAgIHJldHVybiB7XG4gICAgICBib2R5OiB7XG4gICAgICAgIGVtYWlsczogZW1haWxBZGRyZXNzZXMsXG4gICAgICAgIGZyZWVfYnVzeTogW10sXG4gICAgICAgIGR1cmF0aW9uX21pbnV0ZXM6IDE1LCAvLyBtaW51bXVtIGFsbG93ZWQgZHVyYXRpb24vaW50ZXJ2YWxcbiAgICAgICAgaW50ZXJ2YWxfbWludXRlczogMTUsXG4gICAgICAgIHN0YXJ0X3RpbWU6XG4gICAgICAgICAgdGltZUhvdXIoXG4gICAgICAgICAgICBuZXcgRGF0ZShuZXcgRGF0ZShzdGFydERheSkuc2V0SG91cnMoX3RoaXMuc3RhcnRfaG91cikpLFxuICAgICAgICAgICkuZ2V0VGltZSgpIC8gMTAwMCxcbiAgICAgICAgZW5kX3RpbWU6XG4gICAgICAgICAgdGltZUhvdXIoXG4gICAgICAgICAgICBuZXcgRGF0ZShuZXcgRGF0ZShlbmREYXkpLnNldEhvdXJzKF90aGlzLmVuZF9ob3VyKSksXG4gICAgICAgICAgKS5nZXRUaW1lKCkgLyAxMDAwLFxuICAgICAgICByb3VuZF9yb2JpbjogXCJtYXgtYXZhaWxhYmlsaXR5XCIsXG4gICAgICB9LFxuICAgICAgY29tcG9uZW50X2lkOiBpZCxcbiAgICAgIGFjY2Vzc190b2tlbjogYWNjZXNzVG9rZW4sXG4gICAgfTtcbiAgfVxuXG4gIGxldCBuZXdDYWxlbmRhclRpbWVzbG90c0ZvckdpdmVuRW1haWxzOiBhbnlbXSA9IFtdO1xuXG4gICQ6IChhc3luYyAoKSA9PiB7XG4gICAgaWYgKF90aGlzLmF2YWlsYWJpbGl0eSkge1xuICAgICAgLy8gTmVlZCB0byB3YWl0IGEgdGljayBoZXJlIHRvIGF2b2lkIHJhY2UgY29uZGl0aW9uXG4gICAgICBzZXRUaW1lb3V0KCgpID0+IG1hcFRpbWVzbG90c1RvQ2FsZW5kYXJzKF90aGlzLmF2YWlsYWJpbGl0eSkpO1xuICAgIH0gZWxzZSBpZiAoXG4gICAgICBpZCAmJlxuICAgICAgKChBcnJheS5pc0FycmF5KHNpbmdsZUV2ZW50UGFydGljaXBhbnRzKSAmJlxuICAgICAgICBzaW5nbGVFdmVudFBhcnRpY2lwYW50cy5sZW5ndGggPiAwKSB8fFxuICAgICAgICAoX3RoaXMuYm9va2luZ191c2VyX2VtYWlsICYmIF90aGlzLmJvb2tpbmdfdXNlcl90b2tlbikpICYmXG4gICAgICBfdGhpcy5ldmVudHM/Lmxlbmd0aCA9PT0gMVxuICAgICkge1xuICAgICAgYXdhaXQgZ2V0QXZhaWxhYmlsaXR5KCk7XG4gICAgfVxuICB9KSgpO1xuXG4gIC8vIElmIDIgc2xvdHMgYnVtcCB1cCB0byBlYWNoIG90aGVyIGNvbnNpZGVyIHRoZW0gYSBzaW5nbGUgZ3JvdXAgb2YgdGltZVxuICBmdW5jdGlvbiBncm91cENvbnNlY3V0aXZlVGltZXNsb3RzKHNsb3RzOiBQcmVEYXRlZFRpbWVTbG90W10gPSBbXSkge1xuICAgIHJldHVybiBzbG90cy5yZWR1Y2UoKGdyb3VwczogUHJlRGF0ZWRUaW1lU2xvdFtdLCBzbG90KSA9PiB7XG4gICAgICBjb25zdCBwcmV2U2xvdCA9IGdyb3Vwc1tncm91cHMubGVuZ3RoIC0gMV07XG4gICAgICBpZiAocHJldlNsb3QgJiYgcHJldlNsb3QuZW5kX3RpbWUgPT09IHNsb3Quc3RhcnRfdGltZSkge1xuICAgICAgICBwcmV2U2xvdC5lbmRfdGltZSA9IHNsb3QuZW5kX3RpbWU7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBncm91cHMucHVzaCh7IC4uLnNsb3QgfSk7XG4gICAgICB9XG4gICAgICByZXR1cm4gZ3JvdXBzO1xuICAgIH0sIFtdKTtcbiAgfVxuXG4gIGxldCByZXF1aXJlZFBhcnRpY2lwYW50czogc3RyaW5nW10gPSBbXTtcbiAgJDogcmVxdWlyZWRQYXJ0aWNpcGFudHMgPSBbXG4gICAgLi4ubmV3IFNldChbLi4uX3RoaXMucmVxdWlyZWRfcGFydGljaXBhbnRzLCBib29raW5nX3VzZXJfZW1haWxdKSxcbiAgXTtcblxuICBhc3luYyBmdW5jdGlvbiBnZXRBdmFpbGFiaWxpdHkoZm9yY2VSZWxvYWQgPSBmYWxzZSkge1xuICAgIGxvYWRpbmcgPSB0cnVlO1xuXG4gICAgY29uc3QgY2FsZW5kYXJzVG9GZXRjaDogeyBlbWFpbDogc3RyaW5nOyB0b2tlbj86IHN0cmluZyB9W10gPVxuICAgICAgc2luZ2xlRXZlbnRQYXJ0aWNpcGFudHMubWFwKChlbWFpbEFkZHJlc3MpID0+IHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBlbWFpbDogZW1haWxBZGRyZXNzLFxuICAgICAgICB9O1xuICAgICAgfSk7XG5cbiAgICAvLyBJZiB0aGUgYm9va2luZyB1c2VyIGFuZCBhY2Nlc3MgdG9rZW4gYXJlIHBhc3NlZCBpbiwgZmV0Y2ggdGhlaXIgY2FsZW5kYXJzIGFzIHdlbGwuXG4gICAgLy8gVE9ETzogZG9udCBpbmNsdWRlIHRoZW0gaW4gdGhlIG1haW4gbGlzdCwgYXMgdGhleSBzaG91bGRuJ3QgY29udHJpYnV0ZSB0byBwYXJ0aWFsIHNsb3QgYXZhaWxhYmlsaXR5LlxuICAgIC8vIFRPRE86IHVzZSBib29raW5nX3VzZXJfdG9rZW4gaW5zdGVhZCBvZiBhY2Nlc3NfdG9rZW4gZm9yIGJvb2tpbmdfdXNlcl9lbWFpbCBpbiBjYWxlbmRhcnNUb0ZldGNoXG4gICAgaWYgKF90aGlzLmJvb2tpbmdfdXNlcl9lbWFpbCAmJiBfdGhpcy5ib29raW5nX3VzZXJfdG9rZW4pIHtcbiAgICAgIGNhbGVuZGFyc1RvRmV0Y2gucHVzaCh7XG4gICAgICAgIGVtYWlsOiBfdGhpcy5ib29raW5nX3VzZXJfZW1haWwsXG4gICAgICAgIHRva2VuOiBfdGhpcy5ib29raW5nX3VzZXJfdG9rZW4sXG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBpZiAoQXJyYXkuaXNBcnJheShjYWxlbmRhcnNUb0ZldGNoKSAmJiBjYWxlbmRhcnNUb0ZldGNoLmxlbmd0aCA+IDApIHtcbiAgICAgIGNvbnN0IGZldGNoZWRDYWxlbmRhcnMgPSBhd2FpdCAkQXZhaWxhYmlsaXR5U3RvcmVbXG4gICAgICAgIEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgICAuLi5nZXRBdmFpbGFiaWxpdHlRdWVyeShcbiAgICAgICAgICAgIGNhbGVuZGFyc1RvRmV0Y2gubWFwKCh4KSA9PiB4LmVtYWlsKSxcbiAgICAgICAgICAgIGFjY2Vzc190b2tlbixcbiAgICAgICAgICApLFxuICAgICAgICAgIGZvcmNlUmVsb2FkLFxuICAgICAgICB9KVxuICAgICAgXTtcblxuICAgICAgbG9hZGluZyA9IGZhbHNlO1xuXG4gICAgICAvLyBBIHVzZXIgY2FuIGxvYWQgc2V2ZXJhbCBxdWVyaWVzIGluIHF1aWNrIHN1Y2Nlc3Npb24sIGFuZCB0aGVpciB2YXJpYWJsZSBsYXRlbmN5IGNhbiBsZWFkIHRvIHJhY2UgY29uZGl0aW9ucy5cbiAgICAgIC8vIFRoaXMgY29uZGl0aW9uIGNoZWNrcyB0byBzZWUgaWYgdGhlIHJldHVybmVkIHNjaGVkdWxlJ3MgZGF0ZSBhbmQgdGhlIGNvbXBvbmVudCBhY3RpdmUgZGF0ZSBhcmUgdGhlIHNhbWUuXG4gICAgICAvLyBJZiBub3QsIGNpcmN1aXQgYnJlYWsuXG4gICAgICBpZiAoXG4gICAgICAgIHRpbWVEYXkoXG4gICAgICAgICAgbmV3IERhdGUoZ2V0QXZhaWxhYmlsaXR5UXVlcnkoKS5ib2R5LnN0YXJ0X3RpbWUgKiAxMDAwKSxcbiAgICAgICAgKS5nZXRUaW1lKCkgIT09XG4gICAgICAgIHRpbWVEYXkoXG4gICAgICAgICAgbmV3IERhdGUoZmV0Y2hlZENhbGVuZGFycy50aW1lX3Nsb3RzWzBdPy5zdGFydF90aW1lICogMTAwMCksXG4gICAgICAgICkuZ2V0VGltZSgpXG4gICAgICApIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBpZiAoIV90aGlzLmF2YWlsYWJpbGl0eSkge1xuICAgICAgICBtYXBUaW1lc2xvdHNUb0NhbGVuZGFycyhmZXRjaGVkQ2FsZW5kYXJzKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIG5ld0NhbGVuZGFyVGltZXNsb3RzRm9yR2l2ZW5FbWFpbHM7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gbWFwVGltZXNsb3RzVG9DYWxlbmRhcnMoY2FsZW5kYXJMaXN0OiBBdmFpbGFiaWxpdHlSZXNwb25zZSkge1xuICAgIGNvbnN0IGZyZWVCdXN5Q2FsZW5kYXJzOiBhbnkgPSBbXTtcblxuICAgIGNvbnN0IHRpbWVTbG90TWFwOiBSZWNvcmQ8c3RyaW5nLCBQcmVEYXRlZFRpbWVTbG90W10+ID0ge307XG5cbiAgICBmb3IgKGNvbnN0IHVzZXIgb2YgY2FsZW5kYXJMaXN0Py5vcmRlcikge1xuICAgICAgdGltZVNsb3RNYXBbdXNlcl0gPSBbXTtcbiAgICB9XG5cbiAgICBmb3IgKGNvbnN0IHNsb3Qgb2YgY2FsZW5kYXJMaXN0LnRpbWVfc2xvdHMpIHtcbiAgICAgIHNsb3QuZW1haWxzLmZvckVhY2goKGUpID0+IHRpbWVTbG90TWFwW2VdLnB1c2goc2xvdCkpO1xuICAgIH1cblxuICAgIGNhbGVuZGFyTGlzdD8ub3JkZXIuZm9yRWFjaCgodXNlcjogYW55KSA9PiB7XG4gICAgICBmcmVlQnVzeUNhbGVuZGFycy5wdXNoKHtcbiAgICAgICAgZW1haWxBZGRyZXNzOiB1c2VyLFxuICAgICAgICBhdmFpbGFiaWxpdHk6IEF2YWlsYWJpbGl0eVN0YXR1cy5GUkVFLFxuICAgICAgICB0aW1lc2xvdHM6IGdyb3VwQ29uc2VjdXRpdmVUaW1lc2xvdHModGltZVNsb3RNYXBbdXNlcl0pLm1hcChcbiAgICAgICAgICAoc2xvdDogUHJlRGF0ZWRUaW1lU2xvdCkgPT4gKHtcbiAgICAgICAgICAgIHN0YXJ0X3RpbWU6IG5ldyBEYXRlKHNsb3Quc3RhcnRfdGltZSAqIDEwMDApLFxuICAgICAgICAgICAgZW5kX3RpbWU6IG5ldyBEYXRlKHNsb3QuZW5kX3RpbWUgKiAxMDAwKSxcbiAgICAgICAgICB9KSxcbiAgICAgICAgKSxcbiAgICAgIH0pO1xuICAgIH0pO1xuICAgIG5ld0NhbGVuZGFyVGltZXNsb3RzRm9yR2l2ZW5FbWFpbHMgPSBbLi4uZnJlZUJ1c3lDYWxlbmRhcnNdO1xuICB9XG5cbiAgLy8gRmlndXJlIG91dCBpZiBhIGdpdmVuIFRpbWVTbG90IGlzIHRoZSBmaXJzdCBvbmUgaW4gYSBwZW5kaW5nLCBvciBzZWxlY3RlZCwgYmxvY2suXG4gIGZ1bmN0aW9uIGdldEJsb2NrVGltZXMoc2xvdDogU2VsZWN0YWJsZVNsb3QsIGRheTogRGF5KSB7XG4gICAgY29uc3Qgd3JhcHBpbmdTb3J0ZWRTbG90ID0gc29ydGVkU2xvdHMuZmluZChcbiAgICAgIChibG9jaykgPT4gYmxvY2suc3RhcnRfdGltZSA9PT0gc2xvdC5zdGFydF90aW1lLFxuICAgICk7XG5cbiAgICBjb25zdCBwcmVjZWRpbmdTbG90OiBTZWxlY3RhYmxlU2xvdCA9XG4gICAgICBkYXkuc2xvdHNbZGF5LnNsb3RzLmluZGV4T2Yoc2xvdCkgLSAxXTtcblxuICAgIC8vIEEgc2xvdCBpcyBmaXJzdCBpbiBhIFBlbmRpbmcgYmxvY2sgaWY6XG4gICAgLy8gaXQncyBwZW5kaW5nXG4gICAgLy8gYW5kIGl0J3Mgbm90IGJ1c3lcbiAgICAvLyBhbmQgZWl0aGVyOlxuICAgIC8vIHRoZSBzbG90IGltbWVkaWF0ZWx5IGJlZm9yZSBpdCBpc24ndCBwZW5kaW5nXG4gICAgLy8gT1JcbiAgICAvLyB0aGUgc2xvdCBpbW1lZGlhdGVseSBiZWZvcmUgaXQgaXMgYnVzeVxuICAgIGNvbnN0IHByZWNlZGluZ1Nsb3RJc1VuYXZhaWxhYmxlID0gcHJlY2VkaW5nU2xvdFxuICAgICAgPyAhaXNBdmFpbGFibGUocHJlY2VkaW5nU2xvdClcbiAgICAgIDogZmFsc2U7XG5cbiAgICBpZiAoXG4gICAgICBzbG90LnNlbGVjdGlvblBlbmRpbmcgJiZcbiAgICAgIGlzQXZhaWxhYmxlKHNsb3QpICYmXG4gICAgICAoIXByZWNlZGluZ1Nsb3Q/LnNlbGVjdGlvblBlbmRpbmcgfHwgcHJlY2VkaW5nU2xvdElzVW5hdmFpbGFibGUpXG4gICAgKSB7XG4gICAgICBjb25zdCBwZW5kaW5nRW5kVGltZSA9XG4gICAgICAgIGRheS5zbG90cy5maW5kKChkYXlTbG90KSA9PiB7XG4gICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgIGRheVNsb3Quc3RhcnRfdGltZSA+IHNsb3Quc3RhcnRfdGltZSAmJlxuICAgICAgICAgICAgKCFkYXlTbG90LnNlbGVjdGlvblBlbmRpbmcgfHwgIWlzQXZhaWxhYmxlKGRheVNsb3QpKVxuICAgICAgICAgICk7XG4gICAgICAgIH0pPy5zdGFydF90aW1lIHx8IGRheS5zbG90c1tkYXkuc2xvdHMubGVuZ3RoIC0gMV0uZW5kX3RpbWU7XG4gICAgICBjb25zdCBzdGFydFRpbWUgPSBnZXRDb25kZW5zZWRUaW1lU3RyaW5nKHNsb3Quc3RhcnRfdGltZSkucmVwbGFjZShcbiAgICAgICAgXCIgXCIsXG4gICAgICAgIFwiXCIsXG4gICAgICApO1xuICAgICAgY29uc3QgZW5kVGltZSA9IGdldENvbmRlbnNlZFRpbWVTdHJpbmcocGVuZGluZ0VuZFRpbWUpLnJlcGxhY2UoXCIgXCIsIFwiXCIpO1xuICAgICAgcmV0dXJuIGAke3N0YXJ0VGltZX0gLSAke2VuZFRpbWV9YDtcbiAgICAgIC8vIE90aGVyd2lzZSwgaXQncyBmaXJzdCBpbiBhIHNlbGVjdGVkIGJsb2NrIGlmIGl0cyBzdGFydF90aW1lIG1hdGNoZXMgYSBzb3J0ZWRTbG90J3Mgc3RhcnRfdGltZVxuICAgIH0gZWxzZSBpZiAod3JhcHBpbmdTb3J0ZWRTbG90KSB7XG4gICAgICBsZXQgc3RhcnRUaW1lID0gZ2V0Q29uZGVuc2VkVGltZVN0cmluZyh3cmFwcGluZ1NvcnRlZFNsb3Quc3RhcnRfdGltZSk7XG4gICAgICBsZXQgZW5kVGltZSA9IGdldENvbmRlbnNlZFRpbWVTdHJpbmcod3JhcHBpbmdTb3J0ZWRTbG90LmVuZF90aW1lKTtcbiAgICAgIHJldHVybiBgJHtzdGFydFRpbWUucmVwbGFjZShcIiBcIiwgXCJcIil9IC0gJHtlbmRUaW1lLnJlcGxhY2UoXCIgXCIsIFwiXCIpfWA7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBcIlwiO1xuICAgIH1cbiAgfVxuXG4gICQ6IGFsbENhbGVuZGFycyA9IFtcbiAgICAvLyBUT0RPOiBjb25zaWRlciBtZXJnaW5nIHRoZXNlIDIgaW50byBqdXN0IGNhbGVuZGFyc1xuICAgIC4uLm5ld0NhbGVuZGFyVGltZXNsb3RzRm9yR2l2ZW5FbWFpbHMsXG4gICAgLi4uY29uc2VjdXRpdmVQYXJ0aWNpcGFudHMubWFwKChlbWFpbCkgPT4ge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgZW1haWxBZGRyZXNzOiBlbWFpbCxcbiAgICAgICAgYXZhaWxhYmlsaXR5OiBBdmFpbGFiaWxpdHlTdGF0dXMuRlJFRSxcbiAgICAgICAgdGltZXNsb3RzOiBbXSxcbiAgICAgIH07XG4gICAgfSksXG4gIF07XG5cbiAgLy8gI3JlZ2lvbiBEYXRlIENoYW5nZVxuICBmdW5jdGlvbiBnb1RvTmV4dERhdGUoKSB7XG4gICAgaWYgKF90aGlzLnNob3dfYXNfd2VlayAmJiAhdG9vU21hbGxGb3JXZWVrKSB7XG4gICAgICBfdGhpcy5zdGFydF9kYXRlID0gdGltZVdlZWsub2Zmc2V0KGVuZERheSwgMSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIF90aGlzLnN0YXJ0X2RhdGUgPSB0aW1lRGF5Lm9mZnNldChlbmREYXksIDEpO1xuICAgIH1cbiAgICAvLyBPbiBkYXRlIGNoYW5nZSwgZGlzcGF0Y2ggYW4gZW1wdHkgbGlzdCB0byBsZXQgcGFyZW50IGFwcCB0cmlnZ2VyIGEgbG9hZGluZyBzdGF0ZVxuICAgIGRpc3BhdGNoRXZlbnQoXCJldmVudE9wdGlvbnNSZWFkeVwiLCB7XG4gICAgICBzbG90czogW10sXG4gICAgfSk7XG4gIH1cbiAgZnVuY3Rpb24gZ29Ub1ByZXZpb3VzRGF0ZSgpIHtcbiAgICBpZiAoX3RoaXMuc2hvd19hc193ZWVrICYmICF0b29TbWFsbEZvcldlZWspIHtcbiAgICAgIF90aGlzLnN0YXJ0X2RhdGUgPSB0aW1lV2Vlay5vZmZzZXQoc3RhcnREYXksIC0xKTtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gQ2FuJ3QgZG8gc29tZXRoaW5nIGFzIHNpbXBsZSBhcyBgc3RhcnRfZGF0ZSA9IHRpbWVEYXkub2Zmc2V0KHN0YXJ0RGF5LCAtZGF0ZXNUb1Nob3cpYCBoZXJlO1xuICAgICAgLy8gYnJva2VuIGNhc2U6ICFzaG93X3dlZWtlbmRzLCBzdGFydF9kYXRlID0gYSBtb25kYXksIGRhdGVzVG9TaG93ID0gMzsgZ28gYmFja3dhcmRzLiBZb3UnbGwgZ2V0IGZyaS1tb24tdHVlcywgcmF0aGVyIHRoYW4gd2VkLXRodS1mcmkuXG4gICAgICAvLyBJbnN0ZWFkLCB3ZSBnZW5lcmF0ZURheVJhbmdlKCkgd2l0aCByZXZlcnNlPXRydWUgdG8gdGFrZSBhZHZhbmNlIG9mIHJlY3Vyc2l2ZSBub24td2Vla2VuZCByYW5nZS1tYWtpbmcuXG4gICAgICBsZXQgcHJldmlvdXNSYW5nZSA9IGdlbmVyYXRlRGF5UmFuZ2UoXG4gICAgICAgIHRpbWVEYXkub2Zmc2V0KHN0YXJ0RGF5LCAtZGF0ZXNUb1Nob3cpLFxuICAgICAgICB0aW1lRGF5Lm9mZnNldChlbmREYXksIC1kYXRlc1RvU2hvdyksXG4gICAgICAgIHRydWUsXG4gICAgICApO1xuICAgICAgX3RoaXMuc3RhcnRfZGF0ZSA9IHByZXZpb3VzUmFuZ2VbMF07XG4gICAgfVxuICAgIC8vIE9uIGRhdGUgY2hhbmdlLCBkaXNwYXRjaCBhbiBlbXB0eSBsaXN0IHRvIGxldCBwYXJlbnQgYXBwIHRyaWdnZXIgYSBsb2FkaW5nIHN0YXRlXG4gICAgZGlzcGF0Y2hFdmVudChcImV2ZW50T3B0aW9uc1JlYWR5XCIsIHtcbiAgICAgIHNsb3RzOiBbXSxcbiAgICB9KTtcbiAgfVxuXG4gIC8vIFRyYWNrIGFuZCBkaXNwYXRjaCBhY3RpdmUgZGF0ZXMgd2hlbmV2ZXIgdGhleSBjaGFuZ2VcbiAgbGV0IGNhbm9uaWNhbERhdGVzOiBEYXRlW10gPSBbXTtcbiAgJDogaWYgKFxuICAgIEpTT04uc3RyaW5naWZ5KGNhbm9uaWNhbERhdGVzKSAhPT1cbiAgICBKU09OLnN0cmluZ2lmeShkYXlzLm1hcCgoZGF5KSA9PiBkYXkudGltZXN0YW1wKSlcbiAgKSB7XG4gICAgY2Fub25pY2FsRGF0ZXMgPSBkYXlzLm1hcCgoZGF5KSA9PiBkYXkudGltZXN0YW1wKTtcbiAgICBkaXNwYXRjaEV2ZW50KFwiZGF0ZUNoYW5nZVwiLCB7XG4gICAgICBkYXRlczogY2Fub25pY2FsRGF0ZXMsXG4gICAgfSk7XG4gIH1cblxuICAvLyAjZW5kcmVnaW9uIERhdGUgQ2hhbmdlXG5cbiAgLy8jcmVnaW9uIHNsb3Qgc2VsZWN0aW9uXG4gIC8vIENsaWNrIGFjdGlvbiBmb3IgdW4tZHJhZ2dhYmxlIHNsb3QtbGlzdCBidXR0b25zIChsaXN0IHZpZXcpXG4gIGZ1bmN0aW9uIHRvZ2dsZVNsb3Qoc2xvdDogU2VsZWN0YWJsZVNsb3QpIHtcbiAgICBpZiAoc2xvdC5zZWxlY3Rpb25TdGF0dXMgPT09IFNlbGVjdGlvblN0YXR1cy5TRUxFQ1RFRCkge1xuICAgICAgZXZlbnRfdG9fc2VsZWN0ID0gbnVsbDtcbiAgICB9IGVsc2Uge1xuICAgICAgZXZlbnRfdG9fc2VsZWN0ID0gaW5zcGVjdENvbnNlY3V0aXZlQmxvY2soc2xvdCk7XG4gICAgfVxuXG4gICAgLy8gRGVzZWxlY3QgYW55IG90aGVyc1xuICAgIGRheXNcbiAgICAgIC5mbGF0TWFwKChkKSA9PiBkLnNsb3RzKVxuICAgICAgLmZvckVhY2goKHNsb3QpID0+IHtcbiAgICAgICAgc2xvdC5zZWxlY3Rpb25QZW5kaW5nID0gZmFsc2U7XG4gICAgICAgIHNsb3Quc2VsZWN0aW9uU3RhdHVzID0gU2VsZWN0aW9uU3RhdHVzLlVOU0VMRUNURUQ7XG4gICAgICB9KTtcblxuICAgIGRheXMgPSBbLi4uZGF5c107XG4gICAgZXZlbnRfdG9faG92ZXIgPSBudWxsO1xuICB9XG4gIC8vI2VuZHJlZ2lvbiBkcmFnZ2luZ1xuXG4gIC8vI3JlZ2lvbiBzbG90IGludGVyYWN0aW9uIGhhbmRsZXJzXG4gIGZ1bmN0aW9uIGhhbmRsZVNsb3RJbnRlcmFjdGlvblN0YXJ0KHNsb3Q6IFRpbWVTbG90KSB7XG4gICAgaWYgKHNsb3QpIHtcbiAgICAgIC8vIERlc2VsZWN0IGFueSBvdGhlcnNcbiAgICAgIGRheXNcbiAgICAgICAgLmZsYXRNYXAoKGQpID0+IGQuc2xvdHMpXG4gICAgICAgIC5mb3JFYWNoKChzbG90KSA9PiB7XG4gICAgICAgICAgc2xvdC5zZWxlY3Rpb25QZW5kaW5nID0gZmFsc2U7XG4gICAgICAgICAgc2xvdC5zZWxlY3Rpb25TdGF0dXMgPSBTZWxlY3Rpb25TdGF0dXMuVU5TRUxFQ1RFRDtcbiAgICAgICAgfSk7XG5cbiAgICAgIGlmIChldmVudF90b19zZWxlY3QgPT09IGluc3BlY3RDb25zZWN1dGl2ZUJsb2NrKHNsb3QpKSB7XG4gICAgICAgIGV2ZW50X3RvX3NlbGVjdCA9IG51bGw7XG4gICAgICAgIGRheXMgPSBbLi4uZGF5c107XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBldmVudF90b19zZWxlY3QgPSBpbnNwZWN0Q29uc2VjdXRpdmVCbG9jayhzbG90KTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBoYW5kbGVTbG90SG92ZXIoaG92ZXJlZFNsb3Q6IFRpbWVTbG90KSB7XG4gICAgaWYgKGhvdmVyZWRTbG90KSB7XG4gICAgICBldmVudF90b19ob3ZlciA9IGluc3BlY3RDb25zZWN1dGl2ZUJsb2NrKGhvdmVyZWRTbG90KTtcbiAgICB9XG4gIH1cblxuICAvLyNlbmRyZWdpb24gc2xvdCBpbnRlcmFjdGlvbiBoYW5kbGVyc1xuXG4gIC8vICNyZWdpb24gZXJyb3JcbiAgJDogaWYgKGlkICYmIGNvbnNlY3V0aXZlUGFydGljaXBhbnRzLmxlbmd0aCAmJiBfdGhpcy5jYXBhY2l0eSkge1xuICAgIHRyeSB7XG4gICAgICBoYW5kbGVFcnJvcihpZCwge1xuICAgICAgICBuYW1lOiBcIkluY29tcGF0aWJsZVByb3BlcnRpZXNcIixcbiAgICAgICAgbWVzc2FnZTpcbiAgICAgICAgICBcIlNldHRpbmcgYGNhcGFjaXR5YCBjdXJyZW50bHkgZG9lcyBub3Qgd29yayB3aGVuIGZldGNoaW5nIGF2YWlsYWJpbGl0eSBkaXJlY3RseSBmcm9tIE55bGFzLiBQbGVhc2UgcGFzcyBgY2FsZW5kYXJzYCBkYXRhIGRpcmVjdGx5IHRvIHVzZSBgY2FwYWNpdHlgLlwiLFxuICAgICAgfSk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoZXJyb3IpO1xuICAgIH1cbiAgfSBlbHNlIGlmIChfdGhpcy5jYXBhY2l0eSAmJiBfdGhpcy5jYXBhY2l0eSA8IDEpIHtcbiAgICB0cnkge1xuICAgICAgaGFuZGxlRXJyb3IoaWQsIHtcbiAgICAgICAgbmFtZTogXCJJbmNvbXBhdGlibGVQcm9wZXJ0aWVzXCIsXG4gICAgICAgIG1lc3NhZ2U6IFwiYGNhcGFjaXR5YCBtdXN0IGJlIGFuIGludGVnZXIgb2YgMSBvciBtb3JlXCIsXG4gICAgICB9KTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcihlcnJvcik7XG4gICAgfVxuICB9XG4gIC8vICNlbmRyZWdpb24gZXJyb3JcblxuICBmdW5jdGlvbiBzdG9yZVJlZihcbiAgICBub2RlOiBIVE1MRWxlbWVudCxcbiAgICBwYXJhbXM6IHsgZGF0ZUtleTogc3RyaW5nOyBzbG90SW5kZXg6IG51bWJlcjsgc3RhcnRUaW1lOiBzdHJpbmcgfSxcbiAgKSB7XG4gICAgaWYgKHR5cGVvZiBzbG90UmVmW3BhcmFtcy5kYXRlS2V5XSA9PT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgZGF5T3JkZXIgPSBkYXlPcmRlci5jb25jYXQocGFyYW1zLmRhdGVLZXkpLnNvcnQoKTtcbiAgICAgIHNsb3RSZWZbcGFyYW1zLmRhdGVLZXldID0gW107XG4gICAgfVxuXG4gICAgc2xvdFJlZltwYXJhbXMuZGF0ZUtleV1bcGFyYW1zLnNsb3RJbmRleF0gPSBub2RlO1xuXG4gICAgcmV0dXJuIHtcbiAgICAgIGRlc3Ryb3koKSB7XG4gICAgICAgIC8vIEZpbmQgdGhlIG5vZGUgdGhhdCB3YXMgZGVzdHJveWVkIGluIGhhc2htYXBcbiAgICAgICAgY29uc3QgZWxlbUluZGV4ID0gc2xvdFJlZltwYXJhbXMuZGF0ZUtleV0uaW5kZXhPZihub2RlKTtcblxuICAgICAgICAvLyBjbGVhbiB1cCBzbG90UmVmIGhhc2htYXBcbiAgICAgICAgaWYgKGVsZW1JbmRleCA+PSAwKSB7XG4gICAgICAgICAgc2xvdFJlZltwYXJhbXMuZGF0ZUtleV0uc3BsaWNlKGVsZW1JbmRleCwgMSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHNsb3RSZWZbcGFyYW1zLmRhdGVLZXldLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgIGRheU9yZGVyID0gZGF5T3JkZXIuZmlsdGVyKChkYXkpID0+IGRheSAhPT0gcGFyYW1zLmRhdGVLZXkpO1xuICAgICAgICAgIGRlbGV0ZSBzbG90UmVmW3BhcmFtcy5kYXRlS2V5XTtcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICB9O1xuICB9XG5cbiAgLy8jcmVnaW9uIGNvbG91cnNcbiAgLy8gU2hvdyBwYXJ0aWFsIGF2YWlsYWJpbGl0eSBhcyBhIGdyYWRpZW50LCByYXRoZXIgdGhhbiBhcyBjYXRlZ29yaWNhbGx5IFwicGFydGlhbFwiXG4gICQ6IHBhcnRpYWxTY2FsZSA9IHNjYWxlTGluZWFyPHN0cmluZz4oKVxuICAgIC5kb21haW4oWzAsIGFsbENhbGVuZGFycy5sZW5ndGggLyAyLCBhbGxDYWxlbmRhcnMubGVuZ3RoXSlcbiAgICAucmFuZ2UoW190aGlzLmJ1c3lfY29sb3IsIF90aGlzLnBhcnRpYWxfY29sb3IsIF90aGlzLmZyZWVfY29sb3JdKTtcbiAgLy8jZW5kcmVnaW9uIGNvbG91cnNcblxuICAvLyNyZWdpb24gQ29uc2VjdXRpdmUgRXZlbnRzXG4gIC8vIElmIG1hbmlmZXN0LmV2ZW50cy5sZW5ndGggPiAxLCBmZXRjaCBjb25zZWN1dGl2ZSBldmVudHMgYW5kIGVtaXQgdGhlbSBmb3IgPG55bGFzLWJvb2tpbmc+IG9yIHBhcmVudCBhcHAgdG8gcGljayB1cC5cbiAgbGV0IGNvbnNlY3V0aXZlT3B0aW9uczogQ29uc2VjdXRpdmVFdmVudFtdW10gPSBbXTtcbiAgbGV0IGRhaWx5Q29uc2VjdXRpdmVPcHRpb25zOiBSZWNvcmQ8c3RyaW5nLCBDb25zZWN1dGl2ZUV2ZW50W11bXT4gPSB7fTtcblxuICBhc3luYyBmdW5jdGlvbiBidWlsZENvbnNlY3V0aXZlT3B0aW9ucygpIHtcbiAgICAvLyB0aGUgYXZhaWxhYmlsaXR5L2NvbnNlY3V0aXZlIGVuZHBvaW50IGVhZ2VybHkgcmV0dXJucyBvcGVuIHRpbWVzbG90cztcbiAgICAvLyBlc3RhYmxpc2ggb3BlbiBob3VycyBzbyB0aGUgdXNlciBpc24ndCBvdmVyYnVyZGVuZWQgd2l0aCB0aGUgaG9ycmlibGUgZnJlZWRvbSBvZiBjaG9pY2UuXG4gICAgbGV0IG9wZW5Ib3VyczogT3BlbkhvdXJzW10gPSBbXTtcbiAgICBpZiAoX3RoaXMub3Blbl9ob3Vycy5sZW5ndGgpIHtcbiAgICAgIC8vIFRPRE86IGNvbnZlcnNpb24gZnJvbSBjb21wb25lbnQgb3BlbiBob3VycyBmb3JtYXQgdG8gTnlsYXMgZXZlbnRzIG9wZW4gaG91cnMgZm9ybWF0XG4gICAgICAvLyBvcGVuSG91cnMgPSBfdGhpcy5vcGVuX2hvdXJzO1xuXG4gICAgICBvcGVuSG91cnMgPSBidWlsZE9wZW5Ib3VycyhfdGhpcy5vcGVuX2hvdXJzLCBfdGhpcy5ldmVudHMpO1xuICAgIH0gZWxzZSBpZiAoX3RoaXMuc3RhcnRfaG91ciAmJiBfdGhpcy5lbmRfaG91cikge1xuICAgICAgLy8gV2UgY2FuIGJ1aWxkIGFuIG9wZW4gaG91cnMgYXJyYXkgaW4gdGhlIE55bGFzIGZvcm1hdCBmcm9tIGFzc3VtcHRpb25zIGdpdmVuIHN0YXJ0X2hvdXIgYW5kIGVuZF9ob3VyXG4gICAgICBvcGVuSG91cnMgPSBjb252ZXJ0SG91ckFzc3VtcHRpb25zVG9PcGVuSG91cnMoXG4gICAgICAgIF90aGlzLnN0YXJ0X2hvdXIsXG4gICAgICAgIF90aGlzLmVuZF9ob3VyLFxuICAgICAgICBfdGhpcy5ldmVudHMsXG4gICAgICApO1xuICAgIH1cblxuICAgIGNvbnN0IGNvbnNlY3V0aXZlU2xvdHNRdWVyeUtleSA9IGF3YWl0IGNyZWF0ZUNvbnNlY3V0aXZlUXVlcnlLZXkoXG4gICAgICBfdGhpcy5ldmVudHMsXG4gICAgICBkYXlSYW5nZSxcbiAgICAgIF90aGlzLmVuZF9ob3VyLFxuICAgICAgb3BlbkhvdXJzLFxuICAgICk7XG5cbiAgICBpZiAoXG4gICAgICBjb25zZWN1dGl2ZVNsb3RzUXVlcnlLZXk/LnN0YXJ0X3RpbWUgPCBjb25zZWN1dGl2ZVNsb3RzUXVlcnlLZXk/LmVuZF90aW1lXG4gICAgKSB7XG4gICAgICBjb25zZWN1dGl2ZU9wdGlvbnMgPSBhd2FpdCAkQ29uc2VjdXRpdmVBdmFpbGFiaWxpdHlTdG9yZVtcbiAgICAgICAgSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICAgIGJvZHk6IGNvbnNlY3V0aXZlU2xvdHNRdWVyeUtleSxcbiAgICAgICAgICBjb21wb25lbnRfaWQ6IGlkLFxuICAgICAgICAgIGFjY2Vzc190b2tlbixcbiAgICAgICAgfSlcbiAgICAgIF07XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnNlY3V0aXZlT3B0aW9ucyA9IFtdO1xuICAgIH1cblxuICAgIC8vIGVtaXQgdGhlIGF3YWl0ZWQgZXZlbnRzIGxpc3RcbiAgICBkaXNwYXRjaEV2ZW50KFwiZXZlbnRPcHRpb25zUmVhZHlcIiwge1xuICAgICAgc2xvdHM6IGNvbnNlY3V0aXZlT3B0aW9ucyxcbiAgICB9KTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGJ1aWxkRGFpbHlDb25zZWN1dGl2ZU9wdGlvbnMoKSB7XG4gICAgZGFpbHlDb25zZWN1dGl2ZU9wdGlvbnMgPSB7fTtcblxuICAgIGZvciAoY29uc3Qgb3B0aW9uIG9mIGNvbnNlY3V0aXZlT3B0aW9ucykge1xuICAgICAgaWYgKCFvcHRpb25bMF0/LnN0YXJ0X3RpbWUpIHtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IGRheSA9IG5ldyBEYXRlKFxuICAgICAgICBuZXcgRGF0ZShvcHRpb25bMF0uc3RhcnRfdGltZSkuc2V0SG91cnMoMCwgMCwgMCwgMCksXG4gICAgICApLmdldFRpbWUoKTtcbiAgICAgIGlmIChkYWlseUNvbnNlY3V0aXZlT3B0aW9uc1tkYXldKSB7XG4gICAgICAgIGRhaWx5Q29uc2VjdXRpdmVPcHRpb25zW2RheV0ucHVzaChvcHRpb24pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZGFpbHlDb25zZWN1dGl2ZU9wdGlvbnNbZGF5XSA9IFtvcHRpb25dO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIGNyZWF0ZUNvbnNlY3V0aXZlUXVlcnlLZXkoXG4gICAgZXZlbnRzOiBFdmVudERlZmluaXRpb25bXSxcbiAgICBkYXlSYW5nZTogRGF0ZVtdLFxuICAgIGVuZEhvdXI6IG51bWJlcixcbiAgICBvcGVuSG91cnM6IE9wZW5Ib3Vyc1tdLFxuICApIHtcbiAgICBpZiAoZXZlbnRzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IGVuZERheSA9IGRheVJhbmdlW2RheVJhbmdlLmxlbmd0aCAtIDFdO1xuXG4gICAgY29uc3QgZW1haWxzTGlzdCA9IGV2ZW50cy5yZWR1Y2UoXG4gICAgICAoZW1haWxzOiBzdHJpbmdbXVtdLCBldmVudDogRXZlbnREZWZpbml0aW9uKSA9PiB7XG4gICAgICAgIGVtYWlscy5wdXNoKGV2ZW50LnBhcnRpY2lwYW50RW1haWxzKTtcbiAgICAgICAgcmV0dXJuIGVtYWlscztcbiAgICAgIH0sXG4gICAgICBbXSxcbiAgICApO1xuICAgIC8vIFBpY2sgdGhlIGR1cmF0aW9uX21pbnV0ZXMgZnJvbSB0aGUgZmlyc3QgYmxvY2sgc2xvdFxuICAgIC8vIFRPRE86IE5lZWQgdG8gYmUgdXBkYXRlZCB3aGVuIEFQSSBjYW4gaGFuZGxlIGRpZmZlcmVudCBzbG90IHNpemUgcGVyIG1lZXRpbmdcbiAgICBjb25zdCBkdXJhdGlvbl9taW51dGVzID0gZXZlbnRzWzBdLnNsb3Rfc2l6ZTtcbiAgICBjb25zdCBldmVudERldGFpbHMgPSB7XG4gICAgICBkdXJhdGlvbl9taW51dGVzLFxuICAgICAgaW50ZXJ2YWxfbWludXRlczogX3RoaXMuc2xvdF9zaXplLFxuICAgICAgc3RhcnRfdGltZTogTWF0aC5mbG9vcihuZXcgRGF0ZSgpLmdldFRpbWUoKSAvIDEwMDApLFxuICAgICAgZW5kX3RpbWU6XG4gICAgICAgIHRpbWVIb3VyKG5ldyBEYXRlKG5ldyBEYXRlKGVuZERheSkuc2V0SG91cnMoZW5kSG91cikpKS5nZXRUaW1lKCkgLyAxMDAwLFxuICAgICAgZnJlZV9idXN5OiA8YW55W10+W10sXG4gICAgICBvcGVuX2hvdXJzOiBvcGVuSG91cnMsXG4gICAgICBlbWFpbHM6IGVtYWlsc0xpc3QsXG4gICAgICBldmVudHMsXG4gICAgICByb3VuZF9yb2JpbjogXCJtYXgtZmFpcm5lc3NcIixcbiAgICB9O1xuICAgIHJldHVybiBldmVudERldGFpbHM7XG4gIH1cblxuICAvLyBSZWFjdCB0byBob3ZlcmVkIGV2ZW50czsgcmVzcG9uZCBieSBoaWdobGlnaHRpbmcgc2xvdHNcbiAgJDogaWYgKGV2ZW50X3RvX2hvdmVyKSB7XG4gICAgZGF5c1xuICAgICAgLmZsYXRNYXAoKGRheSkgPT4gZGF5LnNsb3RzKVxuICAgICAgLmZvckVhY2goKHNsb3QpID0+IHtcbiAgICAgICAgc2xvdC5zZWxlY3Rpb25QZW5kaW5nID1cbiAgICAgICAgICBzbG90LnN0YXJ0X3RpbWUgPj0gZXZlbnRfdG9faG92ZXJbMF0uc3RhcnRfdGltZSAmJlxuICAgICAgICAgIHNsb3QuZW5kX3RpbWUgPD0gZXZlbnRfdG9faG92ZXJbZXZlbnRfdG9faG92ZXIubGVuZ3RoIC0gMV0uZW5kX3RpbWU7XG4gICAgICB9KTtcbiAgICBkYXlzID0gWy4uLmRheXNdO1xuICB9XG5cbiAgbGV0IHNlbGVjdGVkQ29uc2VjdXRpdmVFdmVudEJsb2NrOiBDb25zZWN1dGl2ZUV2ZW50W10gPSBbXTtcblxuICAkOiBpZiAoZXZlbnRfdG9fc2VsZWN0KSB7XG4gICAgc2VsZWN0ZWRDb25zZWN1dGl2ZUV2ZW50QmxvY2sgPSBldmVudF90b19zZWxlY3Q7XG4gICAgZGF5c1xuICAgICAgLmZsYXRNYXAoKGQpID0+IGQuc2xvdHMpXG4gICAgICAuZmlsdGVyKChzbG90KSA9PiB7XG4gICAgICAgIHJldHVybiAoXG4gICAgICAgICAgZXZlbnRfdG9fc2VsZWN0ICYmXG4gICAgICAgICAgc2xvdC5zdGFydF90aW1lID49IGV2ZW50X3RvX3NlbGVjdFswXS5zdGFydF90aW1lICYmXG4gICAgICAgICAgc2xvdC5lbmRfdGltZSA8PSBldmVudF90b19zZWxlY3RbZXZlbnRfdG9fc2VsZWN0Lmxlbmd0aCAtIDFdLmVuZF90aW1lXG4gICAgICAgICk7XG4gICAgICB9KVxuICAgICAgLmZvckVhY2goKHNsb3QpID0+IHtcbiAgICAgICAgc2xvdC5zZWxlY3Rpb25QZW5kaW5nID0gZmFsc2U7XG4gICAgICAgIHNsb3Quc2VsZWN0aW9uU3RhdHVzID0gU2VsZWN0aW9uU3RhdHVzLlNFTEVDVEVEO1xuICAgICAgfSk7XG4gICAgZGF5cyA9IFsuLi5kYXlzXTtcbiAgfVxuXG4gIC8vIEV4cGFuZCBob3ZlcmVkIC8gY2xpY2tlZCB0aW1lIHNsb3RzIHRvIHNob3cgdGhlIGZ1bGwgY29uc2VjdXRpdmUgZXZlbnQgc3BhblxuICBmdW5jdGlvbiBpbnNwZWN0Q29uc2VjdXRpdmVCbG9jayhzbG90OiBUaW1lU2xvdCkge1xuICAgIGlmICghc2xvdC5mYWxsc1dpdGhpbkFsbG93ZWRUaW1lUmFuZ2UpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIGNvbnN0IGRheSA9IG5ldyBEYXRlKFxuICAgICAgbmV3IERhdGUoc2xvdC5zdGFydF90aW1lKS5zZXRIb3VycygwLCAwLCAwLCAwKSxcbiAgICApLmdldFRpbWUoKTtcblxuICAgIGNvbnN0IGNvbnNlY3V0aXZlQmxvY2tzID1cbiAgICAgIGRhaWx5Q29uc2VjdXRpdmVPcHRpb25zW2RheV0/LmZpbHRlcigoYmxvY2spID0+IHtcbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICBzbG90LnN0YXJ0X3RpbWUgPj0gYmxvY2tbMF0uc3RhcnRfdGltZSAmJlxuICAgICAgICAgIHNsb3QuZW5kX3RpbWUgPD0gYmxvY2tbYmxvY2subGVuZ3RoIC0gMV0uZW5kX3RpbWVcbiAgICAgICAgKTtcbiAgICAgIH0pID8/IFtdO1xuXG4gICAgLy8gVXNlIGxhc3QgYmxvY2sgc28gdGhhdCBjb25zZWN1dGl2ZSBibG9ja3MgYWx3YXlzIGZsb3cgZG93bndhcmRzXG4gICAgLy8gU29ydGluZyBpc24ndCBuZWVkZWQgc2luY2UgQVBJIHJlc3BvbmRzIHdpdGggb3B0aW9ucyBzb3J0ZWQgYnkgc3RhcnRfZGF0ZVxuICAgIHJldHVybiBjb25zZWN1dGl2ZUJsb2Nrc1tjb25zZWN1dGl2ZUJsb2Nrcy5sZW5ndGggLSAxXTtcbiAgfVxuXG4gIC8vIENvbnNlY3V0aXZlIEV2ZW50cyBwcmVzZW50IGEgY2hhbGxlbmdlIGZvciBMaXN0IFZpZXc7IHdoZXJlIHdlIHR5cGljYWxseSBzaG93IGEgc2xvdCBmb3IgZXZlcnkgc2xvdF9zaXplLFxuICAvLyBhIHVzZXIgY2FuIG9ubHkgYm9vayBzZXZlcmFsIGluIGEgcm93LiBXZSBzaG91bGQsIHRoZXJlZm9yZSwgb25seSBzaG93IHRob3NlIHNsb3RzIHRoYXQgZXhpc3Qgd2l0aGluIGEgY29uc2VjdXRpdmUgc2VyaWVzXG4gICQ6IGxpc3RWaWV3T3B0aW9ucyA9IChkYXk6IERheSk6IFNlbGVjdGFibGVTbG90W10gPT4ge1xuICAgIHJldHVybiBkYXkuc2xvdHMuZmlsdGVyKChzbG90KSA9PiBpbnNwZWN0Q29uc2VjdXRpdmVCbG9jayhzbG90KSk7XG4gIH07XG5cbiAgLy8jZW5kcmVnaW9uIENvbnNlY3V0aXZlIEV2ZW50c1xuPC9zY3JpcHQ+XG5cbjxzdHlsZSBsYW5nPVwic2Nzc1wiPlxuICBAaW1wb3J0IFwiLi9zdHlsZXMvYXZhaWxhYmlsaXR5LnNjc3NcIjtcbjwvc3R5bGU+XG5cbnsjaWYgbWFuaWZlc3QgJiYgbWFuaWZlc3QuZXJyb3J9XG4gIDxueWxhcy1lcnJvciB7aWR9IC8+XG57OmVsc2V9XG4gIDxtYWluXG4gICAgYmluZDp0aGlzPXttYWlufVxuICAgIGJpbmQ6Y2xpZW50SGVpZ2h0XG4gICAgY2xhc3M6dGlja2VkPXtfdGhpcy5zaG93X3RpY2tzICYmIF90aGlzLnZpZXdfYXMgPT09IFwic2NoZWR1bGVcIn1cbiAgICBjbGFzczp0aW1lem9uZT17X3RoaXMudGltZXpvbmV9XG4gICAgY2xhc3M6YWxsb3dfYm9va2luZz17X3RoaXMuYWxsb3dfYm9va2luZ31cbiAgICBjbGFzczpoaWRlLWhlYWRlcj17IV90aGlzLnNob3dfaGVhZGVyfVxuICAgIG9uOm1vdXNlbGVhdmU9eygpID0+IChldmVudF90b19ob3ZlciA9IG51bGwpfVxuICAgIHN0eWxlPVwiXG4gICAgLS1idXN5LWNvbG9yLWxpZ2h0ZW5lZDoge2xpZ2h0ZW5IZXhDb2xvdXIoX3RoaXMuYnVzeV9jb2xvciwgOTApfTtcbiAgICAtLWNsb3NlZC1jb2xvci1saWdodGVuZWQ6IHtsaWdodGVuSGV4Q29sb3VyKF90aGlzLmNsb3NlZF9jb2xvciwgOTApfTtcbiAgICAtLXNlbGVjdGVkLWNvbG9yLWxpZ2h0ZW5lZDoge2xpZ2h0ZW5IZXhDb2xvdXIoX3RoaXMuc2VsZWN0ZWRfY29sb3IsIDYwKX07XG4gICAgLS1mcmVlLWNvbG9yOiB7X3RoaXMuZnJlZV9jb2xvcn07IC0tYnVzeS1jb2xvcjoge190aGlzLmJ1c3lfY29sb3J9O1xuICAgIC0tY2xvc2VkLWNvbG9yOiB7X3RoaXMuY2xvc2VkX2NvbG9yfTsgLS1wYXJ0aWFsLWNvbG9yOiB7X3RoaXMucGFydGlhbF9jb2xvcn07XG4gICAgLS1zZWxlY3RlZC1jb2xvcjoge190aGlzLnNlbGVjdGVkX2NvbG9yfTtcbiAgICAtLXVuYXZhaWxhYmxlLWNvbG9yOiB7X3RoaXMudW5hdmFpbGFibGVfY29sb3J9XCI+XG4gICAgPGhlYWRlciBjbGFzczpkYXRlZD17X3RoaXMuYWxsb3dfZGF0ZV9jaGFuZ2V9PlxuICAgICAgPGgyIGNsYXNzPVwibW9udGhcIj57c2hvd0RhdGVSYW5nZShkYXlzKX08L2gyPlxuICAgICAgeyNpZiBfdGhpcy5hbGxvd19kYXRlX2NoYW5nZX1cbiAgICAgICAgPGRpdiBjbGFzcz1cImNoYW5nZS1kYXRlc1wiPlxuICAgICAgICAgIHsjaWYgIWRheU9yZGVyLmluY2x1ZGVzKG1pbkJvb2tBaGVhZE9mZnNldCl9XG4gICAgICAgICAgICA8YnV0dG9uIG9uOmNsaWNrPXtnb1RvUHJldmlvdXNEYXRlfSBhcmlhLWxhYmVsPVwiUHJldmlvdXMgZGF0ZVwiPlxuICAgICAgICAgICAgICA8QmFja0ljb24gc3R5bGU9XCJoZWlnaHQ6MzJweDt3aWR0aDozMnB4O1wiIC8+XG4gICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICB7OmVsc2V9XG4gICAgICAgICAgICA8c3BhbiAvPlxuICAgICAgICAgIHsvaWZ9XG5cbiAgICAgICAgICB7I2lmICFkYXlPcmRlci5pbmNsdWRlcyhtYXhCb29rQWhlYWRPZmZzZXQpfVxuICAgICAgICAgICAgPGJ1dHRvbiBvbjpjbGljaz17Z29Ub05leHREYXRlfSBhcmlhLWxhYmVsPVwiTmV4dCBkYXRlXCI+XG4gICAgICAgICAgICAgIDxOZXh0SWNvbiBzdHlsZT1cImhlaWdodDozMnB4O3dpZHRoOjMycHg7XCIgLz5cbiAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgIHs6ZWxzZX1cbiAgICAgICAgICAgIDxzcGFuIC8+XG4gICAgICAgICAgey9pZn1cbiAgICAgICAgPC9kaXY+XG4gICAgICB7L2lmfVxuICAgICAgPGRpdiBjbGFzcz1cImxlZ2VuZFwiPlxuICAgICAgICA8c3BhbiBjbGFzcz1cIm5vdC1hdmFpbGFibGVcIj5Ob3QgYXZhaWxhYmxlPC9zcGFuPlxuICAgICAgICA8c3BhbiBjbGFzcz1cInBhcnRpYWxseS1hdmFpbGFibGVcIj5QYXJ0aWFsbHkgYXZhaWxhYmxlPC9zcGFuPlxuICAgICAgICA8c3BhbiBjbGFzcz1cImF2YWlsYWJsZVwiPkF2YWlsYWJsZTwvc3Bhbj5cbiAgICAgICAgeyNpZiBfdGhpcy5idXN5X2NvbG9yICE9PSBfdGhpcy5jbG9zZWRfY29sb3J9XG4gICAgICAgICAgPHNwYW4gY2xhc3M9XCJjbG9zZWRcIj5DbG9zZWQ8L3NwYW4+XG4gICAgICAgIHsvaWZ9XG4gICAgICA8L2Rpdj5cbiAgICA8L2hlYWRlcj5cbiAgICB7I2lmIF90aGlzLnNob3dfdGlja3MgJiYgX3RoaXMudmlld19hcyA9PT0gXCJzY2hlZHVsZVwifVxuICAgICAgeyNpZiBfdGhpcy50aW1lem9uZX1cbiAgICAgICAgPGRpdiBjbGFzcz1cInRpbWV6b25lLXRpY2tzXCI+XG4gICAgICAgICAgPHAgY2xhc3M9XCJ0aW1lem9uZVwiPlxuICAgICAgICAgICAge3NldFRpbWVab25lT2Zmc2V0KHRpY2tzWzBdLCBfdGhpcy50aW1lem9uZSl9XG4gICAgICAgICAgPC9wPlxuICAgICAgICAgIDx1bCBjbGFzcz1cInRpY2tzXCI+XG4gICAgICAgICAgICB7I2VhY2ggdGlja3MgYXMgdGlja31cbiAgICAgICAgICAgICAgPGxpIGNsYXNzPVwidGlja1wiPlxuICAgICAgICAgICAgICAgIHtmb3JtYXRUaW1lU2xvdCh0aWNrLCBfdGhpcy50aW1lem9uZSl9XG4gICAgICAgICAgICAgIDwvbGk+XG4gICAgICAgICAgICB7L2VhY2h9XG4gICAgICAgICAgPC91bD5cbiAgICAgICAgPC9kaXY+XG4gICAgICB7L2lmfVxuICAgICAgPHVsIGNsYXNzPVwidGlja3NcIiBiaW5kOnRoaXM9e3RpY2tDb250YWluZXJ9PlxuICAgICAgICB7I2VhY2ggdGlja3MgYXMgdGlja31cbiAgICAgICAgICA8bGkgY2xhc3M9XCJ0aWNrXCI+XG4gICAgICAgICAgICB7Z2V0VGltZVN0cmluZyh0aWNrKX1cbiAgICAgICAgICA8L2xpPlxuICAgICAgICB7L2VhY2h9XG4gICAgICA8L3VsPlxuICAgIHsvaWZ9XG4gICAgPGRpdlxuICAgICAgY2xhc3M9XCJkYXlzXCJcbiAgICAgIGNsYXNzOnNjaGVkdWxlPXtfdGhpcy52aWV3X2FzID09PSBcInNjaGVkdWxlXCJ9XG4gICAgICBjbGFzczpsaXN0PXtfdGhpcy52aWV3X2FzID09PSBcImxpc3RcIn1cbiAgICAgIGNsYXNzOmxvYWRpbmdcbiAgICAgIGNsYXNzOnRpbWV6b25lPXtfdGhpcy50aW1lem9uZX1cbiAgICAgIGNsYXNzOmVycm9yPXtoYXNFcnJvcn1cbiAgICAgIGJpbmQ6dGhpcz17ZGF5Q29udGFpbmVyfVxuICAgICAgYmluZDpjbGllbnRXaWR0aD17ZGF5Q29udGFpbmVyV2lkdGh9PlxuICAgICAgeyNlYWNoIGRheXMgYXMgZGF5LCBkYXlJbmRleCAoZGF5LnRpbWVzdGFtcC50b0lTT1N0cmluZygpKX1cbiAgICAgICAgPGRpdlxuICAgICAgICAgIGNsYXNzPVwiZGF5XCJcbiAgICAgICAgICBkYXRhLXRpbWVzdGFtcD17ZGF5LnRpbWVzdGFtcC50b0lTT1N0cmluZygpfVxuICAgICAgICAgIGJpbmQ6dGhpcz17ZGF5UmVmW2RheUluZGV4XX0+XG4gICAgICAgICAgPGhlYWRlcj5cbiAgICAgICAgICAgIDxoMj5cbiAgICAgICAgICAgICAgeyNpZiBfdGhpcy5kYXRlX2Zvcm1hdCA9PT0gXCJkYXRlXCIgfHwgX3RoaXMuZGF0ZV9mb3JtYXQgPT09IFwiZnVsbFwifVxuICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwiZGF0ZVwiPlxuICAgICAgICAgICAgICAgICAge25ldyBEYXRlKGRheS50aW1lc3RhbXApLnRvTG9jYWxlU3RyaW5nKFwiZGVmYXVsdFwiLCB7XG4gICAgICAgICAgICAgICAgICAgIGRheTogXCJudW1lcmljXCIsXG4gICAgICAgICAgICAgICAgICB9KX1cbiAgICAgICAgICAgICAgICA8L3NwYW4+XG4gICAgICAgICAgICAgIHsvaWZ9XG4gICAgICAgICAgICAgIHsjaWYgX3RoaXMuZGF0ZV9mb3JtYXQgPT09IFwid2Vla2RheVwiIHx8IF90aGlzLmRhdGVfZm9ybWF0ID09PSBcImZ1bGxcIn1cbiAgICAgICAgICAgICAgICA8c3Bhbj5cbiAgICAgICAgICAgICAgICAgIHtuZXcgRGF0ZShkYXkudGltZXN0YW1wKS50b0xvY2FsZVN0cmluZyhcImRlZmF1bHRcIiwge1xuICAgICAgICAgICAgICAgICAgICB3ZWVrZGF5OiBcInNob3J0XCIsXG4gICAgICAgICAgICAgICAgICB9KX1cbiAgICAgICAgICAgICAgICA8L3NwYW4+XG4gICAgICAgICAgICAgIHsvaWZ9XG4gICAgICAgICAgICA8L2gyPlxuICAgICAgICAgIDwvaGVhZGVyPlxuICAgICAgICAgIHsjaWYgX3RoaXMudmlld19hcyA9PT0gXCJzY2hlZHVsZVwifVxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cImVwb2Noc1wiPlxuICAgICAgICAgICAgICB7I2VhY2ggZGF5LmVwb2NocyBhcyBlcG9jaH1cbiAgICAgICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgICBjbGFzcz1cImVwb2NoIHtlcG9jaC5zdGF0dXN9XCJcbiAgICAgICAgICAgICAgICAgIHN0eWxlPVwiaGVpZ2h0OiB7ZXBvY2guaGVpZ2h0fSU7IHRvcDoge2Vwb2NoLm9mZnNldH0lO1wiXG4gICAgICAgICAgICAgICAgICBkYXRhLWF2YWlsYWJsZS1jYWxlbmRhcnM9e2Vwb2NoLmF2YWlsYWJsZV9jYWxlbmRhcnMudG9TdHJpbmcoKX1cbiAgICAgICAgICAgICAgICAgIGRhdGEtc3RhcnQtdGltZT17bmV3IERhdGUoZXBvY2guc3RhcnRfdGltZSkudG9Mb2NhbGVTdHJpbmcoKX1cbiAgICAgICAgICAgICAgICAgIGRhdGEtZW5kLXRpbWU9e25ldyBEYXRlKGVwb2NoLmVuZF90aW1lKS50b0xvY2FsZVN0cmluZygpfT5cbiAgICAgICAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICAgICAgY2xhc3M9XCJpbm5lclwiXG4gICAgICAgICAgICAgICAgICAgIHN0eWxlPVwiYmFja2dyb3VuZC1jb2xvcjoge3BhcnRpYWxTY2FsZShcbiAgICAgICAgICAgICAgICAgICAgICBlcG9jaC5hdmFpbGFibGVfY2FsZW5kYXJzLmxlbmd0aCxcbiAgICAgICAgICAgICAgICAgICAgKX1cIiAvPlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICB7L2VhY2h9XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJzbG90c1wiPlxuICAgICAgICAgICAgICB7I2VhY2ggZGF5LnNsb3RzIGFzIHNsb3QsIHNsb3RJbmRleCAoc2xvdC5zdGFydF90aW1lLnRvSVNPU3RyaW5nKCkpfVxuICAgICAgICAgICAgICAgIDxidXR0b25cbiAgICAgICAgICAgICAgICAgIGRhdGEtYXZhaWxhYmxlLWNhbGVuZGFycz17c2xvdC5hdmFpbGFibGVfY2FsZW5kYXJzLnRvU3RyaW5nKCl9XG4gICAgICAgICAgICAgICAgICBhcmlhLWxhYmVsPVwie25ldyBEYXRlKFxuICAgICAgICAgICAgICAgICAgICBzbG90LnN0YXJ0X3RpbWUsXG4gICAgICAgICAgICAgICAgICApLnRvTG9jYWxlU3RyaW5nKCl9IHRvIHtuZXcgRGF0ZShcbiAgICAgICAgICAgICAgICAgICAgc2xvdC5lbmRfdGltZSxcbiAgICAgICAgICAgICAgICAgICkudG9Mb2NhbGVTdHJpbmcoKX07IEZyZWUgY2FsZW5kYXJzOiB7c2xvdC5hdmFpbGFibGVfY2FsZW5kYXJzLnRvU3RyaW5nKCl9XCJcbiAgICAgICAgICAgICAgICAgIHVzZTpzdG9yZVJlZj17e1xuICAgICAgICAgICAgICAgICAgICBkYXRlS2V5OiBkYXkudGltZXN0YW1wLnRvTG9jYWxlRGF0ZVN0cmluZygpLFxuICAgICAgICAgICAgICAgICAgICBzbG90SW5kZXgsXG4gICAgICAgICAgICAgICAgICAgIHN0YXJ0VGltZTogbmV3IERhdGUoc2xvdC5zdGFydF90aW1lKS50b0xvY2FsZVN0cmluZygpLFxuICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgIGNsYXNzPVwic2xvdCB7c2xvdC5zZWxlY3Rpb25TdGF0dXN9IHtzbG90LmF2YWlsYWJpbGl0eX1cIlxuICAgICAgICAgICAgICAgICAgY2xhc3M6cGVuZGluZz17ZXZlbnRfdG9faG92ZXIgJiYgc2xvdC5zZWxlY3Rpb25QZW5kaW5nfVxuICAgICAgICAgICAgICAgICAgZGF0YS1zdGFydC10aW1lPXtuZXcgRGF0ZShzbG90LnN0YXJ0X3RpbWUpLnRvTG9jYWxlU3RyaW5nKCl9XG4gICAgICAgICAgICAgICAgICBkYXRhLWVuZC10aW1lPXtuZXcgRGF0ZShzbG90LmVuZF90aW1lKS50b0xvY2FsZVN0cmluZygpfVxuICAgICAgICAgICAgICAgICAgY2xhc3M6b3V0c2lkZS1vZi10aW1lLXJhbmdlPXshc2xvdC5mYWxsc1dpdGhpbkFsbG93ZWRUaW1lUmFuZ2V9XG4gICAgICAgICAgICAgICAgICB0aXRsZT17c2xvdC5mYWxsc1dpdGhpbkFsbG93ZWRUaW1lUmFuZ2VcbiAgICAgICAgICAgICAgICAgICAgPyBudWxsXG4gICAgICAgICAgICAgICAgICAgIDogYFlvdSBtYXkgb25seSBzZWxlY3QgdGltZXNsb3RzIGluIHRoZSBmdXR1cmUsIGJldHdlZW4gJHttaW5Cb29rQWhlYWRPZmZzZXR9IGFuZCAke21heEJvb2tBaGVhZE9mZnNldH1gfVxuICAgICAgICAgICAgICAgICAgb246Y2xpY2s9eygpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgaGFuZGxlU2xvdEludGVyYWN0aW9uU3RhcnQoc2xvdCk7XG4gICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgb246bW91c2VlbnRlcj17KCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBoYW5kbGVTbG90SG92ZXIoc2xvdCk7XG4gICAgICAgICAgICAgICAgICB9fT5cbiAgICAgICAgICAgICAgICAgIHsjaWYgc2xvdC5zZWxlY3Rpb25TdGF0dXMgPT09IFNlbGVjdGlvblN0YXR1cy5TRUxFQ1RFRCB8fCAoZXZlbnRfdG9faG92ZXIgJiYgZ2V0QmxvY2tUaW1lcyhzbG90LCBkYXkpKX1cbiAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJzZWxlY3RlZC1oZWFkaW5nXCJcbiAgICAgICAgICAgICAgICAgICAgICA+e2dldEJsb2NrVGltZXMoc2xvdCwgZGF5KX08L3NwYW4+XG4gICAgICAgICAgICAgICAgICB7L2lmfVxuICAgICAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgICAgICB7L2VhY2h9XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICB7OmVsc2UgaWYgX3RoaXMudmlld19hcyA9PT0gXCJsaXN0XCJ9XG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwic2xvdC1saXN0XCI+XG4gICAgICAgICAgICAgIHsjZWFjaCBsaXN0Vmlld09wdGlvbnMoZGF5KSBhcyBzbG90fVxuICAgICAgICAgICAgICAgIDxidXR0b25cbiAgICAgICAgICAgICAgICAgIGRhdGEtYXZhaWxhYmxlLWNhbGVuZGFycz17c2xvdC5hdmFpbGFibGVfY2FsZW5kYXJzLnRvU3RyaW5nKCl9XG4gICAgICAgICAgICAgICAgICBhcmlhLWxhYmVsPVwie2dldFRpbWVTdHJpbmcoXG4gICAgICAgICAgICAgICAgICAgIG5ldyBEYXRlKHNsb3Quc3RhcnRfdGltZSksXG4gICAgICAgICAgICAgICAgICApfSB0byB7Z2V0VGltZVN0cmluZyhcbiAgICAgICAgICAgICAgICAgICAgbmV3IERhdGUoc2xvdC5lbmRfdGltZSksXG4gICAgICAgICAgICAgICAgICApfTsgRnJlZSBjYWxlbmRhcnM6IHtzbG90LmF2YWlsYWJsZV9jYWxlbmRhcnMudG9TdHJpbmcoKX1cIlxuICAgICAgICAgICAgICAgICAgY2xhc3M9XCJzbG90IHtzbG90LnNlbGVjdGlvblN0YXR1c30ge3Nsb3QuYXZhaWxhYmlsaXR5fVwiXG4gICAgICAgICAgICAgICAgICBjbGFzczpwZW5kaW5nPXtzbG90LnNlbGVjdGlvblBlbmRpbmd9XG4gICAgICAgICAgICAgICAgICBkYXRhLXN0YXJ0LXRpbWU9e25ldyBEYXRlKHNsb3Quc3RhcnRfdGltZSkudG9Mb2NhbGVTdHJpbmcoKX1cbiAgICAgICAgICAgICAgICAgIGRhdGEtZW5kLXRpbWU9e25ldyBEYXRlKHNsb3QuZW5kX3RpbWUpLnRvTG9jYWxlU3RyaW5nKCl9XG4gICAgICAgICAgICAgICAgICBvbjpjbGljaz17KCkgPT4gdG9nZ2xlU2xvdChzbG90KX0+XG4gICAgICAgICAgICAgICAgICB7Z2V0VGltZVN0cmluZyhuZXcgRGF0ZShzbG90LnN0YXJ0X3RpbWUpKX1cbiAgICAgICAgICAgICAgICAgIHsjaWYgc2xvdC5hdmFpbGFiaWxpdHkgPT09IEF2YWlsYWJpbGl0eVN0YXR1cy5QQVJUSUFMfVxuICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cInBhcnRpYWxcIj5cbiAgICAgICAgICAgICAgICAgICAgICAoe3Nsb3QuYXZhaWxhYmxlX2NhbGVuZGFycy5sZW5ndGh9IG9mIHthbGxDYWxlbmRhcnMubGVuZ3RofVxuICAgICAgICAgICAgICAgICAgICAgIGF2YWlsYWJsZSlcbiAgICAgICAgICAgICAgICAgICAgPC9zcGFuPlxuICAgICAgICAgICAgICAgICAgey9pZn1cbiAgICAgICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICAgICAgey9lYWNofVxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgey9pZn1cbiAgICAgICAgPC9kaXY+XG4gICAgICB7L2VhY2h9XG4gICAgPC9kaXY+XG4gICAgeyNpZiBoYXNFcnJvcn1cbiAgICAgIDxueWxhcy1tZXNzYWdlLWVycm9yIC8+XG4gICAgey9pZn1cbiAgPC9tYWluPlxuey9pZn1cbiJdLCJuYW1lcyI6WyJJQU5BWm9uZSIsIkRhdGVUaW1lIiwiaW5pdGlhbGl6ZSIsIl9fc3ByZWFkUHJvcHMiLCJfX3NwcmVhZFZhbHVlcyIsImludGVydmFsIiwibnVtYmVyIiwid2VlayIsInJnYiIsImxpbmVhciIsImNvbG9yUmdiIiwidmFsdWUiLCJkYXRlIiwiY29uc3RhbnQiLCJiaXNlY3QiLCJpbnRlcnBvbGF0ZSIsImludGVycG9sYXRlVmFsdWUiLCJpZGVudGl0eSIsImxvY2FsZSIsImZvcm1hdExvY2FsZSIsImRheSIsInRpbWVNb25kYXkiLCJ0aW1lRGF5IiwidGltZVllYXIiLCJ0aW1lU3VuZGF5IiwidGltZVRodXJzZGF5IiwidGltZU1vbnRoIiwidGltZVdlZWsiLCJ0aW1lSG91ciIsInRpbWVNaW51dGUiLCJ0aW1lU2Vjb25kIiwic2NhbGVUaW1lIl0sIm1hcHBpbmdzIjoibVBBQWEsSUFBaUIsT0FBTyxlQUFlLE9BQU8sS0FDekQsT0FBTyxnQkFFVCxPQUFPLGVBQWUsT0FBUyxDQUFDLEtBQWlCLElBQVMsSUFDcEQsZ0JBQWUsSUFBSSxTQUdoQixJQUFlLEVBQU0sR0FBRyxJQ1BqQyxhQUFnQixFQUVoQixZQUFnQixFQUFLLEVBQUssQ0FFdEIsU0FBVyxLQUFLLEdBQ1osRUFBSSxHQUFLLEVBQUksR0FDakIsTUFBTyxHQVVYLFlBQWEsRUFBSSxDQUNiLE1BQU8sS0FFWCxhQUF3QixDQUNwQixNQUFPLFFBQU8sT0FBTyxNQUV6QixZQUFpQixFQUFLLENBQ2xCLEVBQUksUUFBUSxJQUVoQixZQUFxQixFQUFPLENBQ3hCLE1BQU8sT0FBTyxJQUFVLFdBRTVCLFlBQXdCLEVBQUcsRUFBRyxDQUMxQixNQUFPLElBQUssRUFBSSxHQUFLLEVBQUksSUFBTSxHQUFPLEdBQUssTUFBTyxJQUFNLFVBQWEsTUFBTyxJQUFNLFdBRXRGLEdBQUksSUFDSixZQUF1QixFQUFhLEVBQUssQ0FDckMsTUFBSyxLQUNELElBQXVCLFNBQVMsY0FBYyxNQUVsRCxHQUFxQixLQUFPLEVBQ3JC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
